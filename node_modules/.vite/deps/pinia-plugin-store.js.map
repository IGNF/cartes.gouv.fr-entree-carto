{
  "version": 3,
  "sources": ["../../pinia-plugin-store/dist/index.esm.js"],
  "sourcesContent": ["function getState(value) {\n  if (value) {\n    try {\n      return JSON.parse(value);\n    } catch (error) {\n      console.warn(error, 'unknown json format!');\n    }\n  }\n}\nfunction createStore(store, options) {\n  const { storage, encrypt, decrypt } = options;\n  const session = storage.getItem(store.$id);\n  if (session) {\n    const state = getState(decrypt ? decrypt(session) : session);\n    if (state) store.$state = state;\n  } else {\n    const json = JSON.stringify(store.$state);\n    storage.setItem(store.$id, encrypt ? encrypt(json) : json);\n  }\n  const subscription = (_mutation, state) => {\n    const json = JSON.stringify(state);\n    storage.setItem(store.$id, encrypt ? encrypt(json) : json);\n  };\n  store.$subscribe(subscription, { detached: true, deep: true, immediate: true });\n}\nfunction storePlugin(options) {\n  return (context) => {\n    const getOptions = { ...options };\n    const { store } = context;\n    const { stores, encrypt, decrypt } = getOptions;\n    if (stores && stores.length > 0) {\n      stores.forEach((storeKey) => {\n        if (typeof storeKey === 'string') {\n          if (storeKey === store.$id) {\n            const storage = getOptions.storage ?? localStorage;\n            createStore(store, { stores, storage, encrypt, decrypt });\n          }\n        } else if (storeKey.name === store.$id) {\n          const { storage, ciphertext } = storeKey;\n          const getStorage = () => {\n            if (storage) return storage;\n            if (getOptions.storage) return getOptions.storage;\n            return localStorage;\n          };\n          createStore(store, {\n            stores,\n            storage: getStorage(),\n            encrypt: ciphertext === false ? undefined : encrypt,\n            decrypt: ciphertext === false ? undefined : decrypt,\n          });\n        }\n      });\n    }\n  };\n}\n\nexport { storePlugin };\n"],
  "mappings": ";;;AAAA,SAAS,SAAS,OAAO;AACvB,MAAI,OAAO;AACT,QAAI;AACF,aAAO,KAAK,MAAM,KAAK;AAAA,IACzB,SAAS,OAAO;AACd,cAAQ,KAAK,OAAO,sBAAsB;AAAA,IAC5C;AAAA,EACF;AACF;AACA,SAAS,YAAY,OAAO,SAAS;AACnC,QAAM,EAAE,SAAS,SAAS,QAAQ,IAAI;AACtC,QAAM,UAAU,QAAQ,QAAQ,MAAM,GAAG;AACzC,MAAI,SAAS;AACX,UAAM,QAAQ,SAAS,UAAU,QAAQ,OAAO,IAAI,OAAO;AAC3D,QAAI,MAAO,OAAM,SAAS;AAAA,EAC5B,OAAO;AACL,UAAM,OAAO,KAAK,UAAU,MAAM,MAAM;AACxC,YAAQ,QAAQ,MAAM,KAAK,UAAU,QAAQ,IAAI,IAAI,IAAI;AAAA,EAC3D;AACA,QAAM,eAAe,CAAC,WAAW,UAAU;AACzC,UAAM,OAAO,KAAK,UAAU,KAAK;AACjC,YAAQ,QAAQ,MAAM,KAAK,UAAU,QAAQ,IAAI,IAAI,IAAI;AAAA,EAC3D;AACA,QAAM,WAAW,cAAc,EAAE,UAAU,MAAM,MAAM,MAAM,WAAW,KAAK,CAAC;AAChF;AACA,SAAS,YAAY,SAAS;AAC5B,SAAO,CAAC,YAAY;AAClB,UAAM,aAAa,EAAE,GAAG,QAAQ;AAChC,UAAM,EAAE,MAAM,IAAI;AAClB,UAAM,EAAE,QAAQ,SAAS,QAAQ,IAAI;AACrC,QAAI,UAAU,OAAO,SAAS,GAAG;AAC/B,aAAO,QAAQ,CAAC,aAAa;AAC3B,YAAI,OAAO,aAAa,UAAU;AAChC,cAAI,aAAa,MAAM,KAAK;AAC1B,kBAAM,UAAU,WAAW,WAAW;AACtC,wBAAY,OAAO,EAAE,QAAQ,SAAS,SAAS,QAAQ,CAAC;AAAA,UAC1D;AAAA,QACF,WAAW,SAAS,SAAS,MAAM,KAAK;AACtC,gBAAM,EAAE,SAAS,WAAW,IAAI;AAChC,gBAAM,aAAa,MAAM;AACvB,gBAAI,QAAS,QAAO;AACpB,gBAAI,WAAW,QAAS,QAAO,WAAW;AAC1C,mBAAO;AAAA,UACT;AACA,sBAAY,OAAO;AAAA,YACjB;AAAA,YACA,SAAS,WAAW;AAAA,YACpB,SAAS,eAAe,QAAQ,SAAY;AAAA,YAC5C,SAAS,eAAe,QAAQ,SAAY;AAAA,UAC9C,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
