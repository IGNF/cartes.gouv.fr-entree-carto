var qp=Object.defineProperty;var Nf=Te=>{throw TypeError(Te)};var Wp=(Te,e,t)=>e in Te?qp(Te,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Te[e]=t;var Tc=(Te,e,t)=>Wp(Te,typeof e!="symbol"?e+"":e,t),rf=(Te,e,t)=>e.has(Te)||Nf("Cannot "+t);var Qu=(Te,e,t)=>(rf(Te,e,"read from private field"),t?t.call(Te):e.get(Te)),hd=(Te,e,t)=>e.has(Te)?Nf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(Te):e.set(Te,t),gd=(Te,e,t,Oe)=>(rf(Te,e,"write to private field"),Oe?Oe.call(Te,t):e.set(Te,t),t),pc=(Te,e,t)=>(rf(Te,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const ke of document.querySelectorAll('link[rel="modulepreload"]'))Oe(ke);new MutationObserver(ke=>{for(const Be of ke)if(Be.type==="childList")for(const Ue of Be.addedNodes)Ue.tagName==="LINK"&&Ue.rel==="modulepreload"&&Oe(Ue)}).observe(document,{childList:!0,subtree:!0});function t(ke){const Be={};return ke.integrity&&(Be.integrity=ke.integrity),ke.referrerPolicy&&(Be.referrerPolicy=ke.referrerPolicy),ke.crossOrigin==="use-credentials"?Be.credentials="include":ke.crossOrigin==="anonymous"?Be.credentials="omit":Be.credentials="same-origin",Be}function Oe(ke){if(ke.ep)return;ke.ep=!0;const Be=t(ke);fetch(ke.href,Be)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(Te){const e=Object.create(null);for(const t of Te.split(","))e[t]=1;return t=>t in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=Te=>Te.charCodeAt(0)===111&&Te.charCodeAt(1)===110&&(Te.charCodeAt(2)>122||Te.charCodeAt(2)<97),isModelListener=Te=>Te.startsWith("onUpdate:"),extend$5=Object.assign,remove=(Te,e)=>{const t=Te.indexOf(e);t>-1&&Te.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Te,e)=>hasOwnProperty$1.call(Te,e),isArray$1=Array.isArray,isMap=Te=>toTypeString(Te)==="[object Map]",isSet=Te=>toTypeString(Te)==="[object Set]",isDate=Te=>toTypeString(Te)==="[object Date]",isRegExp=Te=>toTypeString(Te)==="[object RegExp]",isFunction$1=Te=>typeof Te=="function",isString=Te=>typeof Te=="string",isSymbol=Te=>typeof Te=="symbol",isObject$1=Te=>Te!==null&&typeof Te=="object",isPromise=Te=>(isObject$1(Te)||isFunction$1(Te))&&isFunction$1(Te.then)&&isFunction$1(Te.catch),objectToString=Object.prototype.toString,toTypeString=Te=>objectToString.call(Te),toRawType=Te=>toTypeString(Te).slice(8,-1),isPlainObject$1=Te=>toTypeString(Te)==="[object Object]",isIntegerKey=Te=>isString(Te)&&Te!=="NaN"&&Te[0]!=="-"&&""+parseInt(Te,10)===Te,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=Te=>{const e=Object.create(null);return t=>e[t]||(e[t]=Te(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Te=>Te.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Te=>Te.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(Te=>Te.charAt(0).toUpperCase()+Te.slice(1)),toHandlerKey=cacheStringFunction(Te=>Te?`on${capitalize(Te)}`:""),hasChanged=(Te,e)=>!Object.is(Te,e),invokeArrayFns=(Te,...e)=>{for(let t=0;t<Te.length;t++)Te[t](...e)},def=(Te,e,t,Oe=!1)=>{Object.defineProperty(Te,e,{configurable:!0,enumerable:!1,writable:Oe,value:t})},looseToNumber=Te=>{const e=parseFloat(Te);return isNaN(e)?Te:e},toNumber=Te=>{const e=isString(Te)?Number(Te):NaN;return isNaN(e)?Te:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(Te){if(isArray$1(Te)){const e={};for(let t=0;t<Te.length;t++){const Oe=Te[t],ke=isString(Oe)?parseStringStyle(Oe):normalizeStyle(Oe);if(ke)for(const Be in ke)e[Be]=ke[Be]}return e}else if(isString(Te)||isObject$1(Te))return Te}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Te){const e={};return Te.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const Oe=t.split(propertyDelimiterRE);Oe.length>1&&(e[Oe[0].trim()]=Oe[1].trim())}}),e}function normalizeClass(Te){let e="";if(isString(Te))e=Te;else if(isArray$1(Te))for(let t=0;t<Te.length;t++){const Oe=normalizeClass(Te[t]);Oe&&(e+=Oe+" ")}else if(isObject$1(Te))for(const t in Te)Te[t]&&(e+=t+" ");return e.trim()}function normalizeProps(Te){if(!Te)return null;let{class:e,style:t}=Te;return e&&!isString(e)&&(Te.class=normalizeClass(e)),t&&(Te.style=normalizeStyle(t)),Te}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(Te){return!!Te||Te===""}function looseCompareArrays(Te,e){if(Te.length!==e.length)return!1;let t=!0;for(let Oe=0;t&&Oe<Te.length;Oe++)t=looseEqual(Te[Oe],e[Oe]);return t}function looseEqual(Te,e){if(Te===e)return!0;let t=isDate(Te),Oe=isDate(e);if(t||Oe)return t&&Oe?Te.getTime()===e.getTime():!1;if(t=isSymbol(Te),Oe=isSymbol(e),t||Oe)return Te===e;if(t=isArray$1(Te),Oe=isArray$1(e),t||Oe)return t&&Oe?looseCompareArrays(Te,e):!1;if(t=isObject$1(Te),Oe=isObject$1(e),t||Oe){if(!t||!Oe)return!1;const ke=Object.keys(Te).length,Be=Object.keys(e).length;if(ke!==Be)return!1;for(const Ue in Te){const He=Te.hasOwnProperty(Ue),We=e.hasOwnProperty(Ue);if(He&&!We||!He&&We||!looseEqual(Te[Ue],e[Ue]))return!1}}return String(Te)===String(e)}function looseIndexOf(Te,e){return Te.findIndex(t=>looseEqual(t,e))}const isRef$1=Te=>!!(Te&&Te.__v_isRef===!0),toDisplayString=Te=>isString(Te)?Te:Te==null?"":isArray$1(Te)||isObject$1(Te)&&(Te.toString===objectToString||!isFunction$1(Te.toString))?isRef$1(Te)?toDisplayString(Te.value):JSON.stringify(Te,replacer,2):String(Te),replacer=(Te,e)=>isRef$1(e)?replacer(Te,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[Oe,ke],Be)=>(t[stringifySymbol(Oe,Be)+" =>"]=ke,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>stringifySymbol(t))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,stringifySymbol=(Te,e="")=>{var t;return isSymbol(Te)?`Symbol(${(t=Te.description)!=null?t:e})`:Te};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let t,Oe;for(t=0,Oe=this.effects.length;t<Oe;t++)this.effects[t].stop();for(this.effects.length=0,t=0,Oe=this.cleanups.length;t<Oe;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,Oe=this.scopes.length;t<Oe;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const ke=this.parent.scopes.pop();ke&&ke!==this&&(this.parent.scopes[this.index]=ke,ke.index=this.index)}this.parent=void 0}}}function effectScope(Te){return new EffectScope(Te)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Te,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(Te)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(Te,e=!1){if(Te.flags|=8,e){Te.next=batchedComputed,batchedComputed=Te;return}Te.next=batchedSub,batchedSub=Te}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let Te;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(Oe){Te||(Te=Oe)}e=t}}if(Te)throw Te}function prepareDeps(Te){for(let e=Te.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(Te){let e,t=Te.depsTail,Oe=t;for(;Oe;){const ke=Oe.prevDep;Oe.version===-1?(Oe===t&&(t=ke),removeSub(Oe),removeDep(Oe)):e=Oe,Oe.dep.activeLink=Oe.prevActiveLink,Oe.prevActiveLink=void 0,Oe=ke}Te.deps=e,Te.depsTail=t}function isDirty(Te){for(let e=Te.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!Te._dirty}function refreshComputed(Te){if(Te.flags&4&&!(Te.flags&16)||(Te.flags&=-17,Te.globalVersion===globalVersion))return;Te.globalVersion=globalVersion;const e=Te.dep;if(Te.flags|=2,e.version>0&&!Te.isSSR&&Te.deps&&!isDirty(Te)){Te.flags&=-3;return}const t=activeSub,Oe=shouldTrack;activeSub=Te,shouldTrack=!0;try{prepareDeps(Te);const ke=Te.fn(Te._value);(e.version===0||hasChanged(ke,Te._value))&&(Te._value=ke,e.version++)}catch(ke){throw e.version++,ke}finally{activeSub=t,shouldTrack=Oe,cleanupDeps(Te),Te.flags&=-3}}function removeSub(Te,e=!1){const{dep:t,prevSub:Oe,nextSub:ke}=Te;if(Oe&&(Oe.nextSub=ke,Te.prevSub=void 0),ke&&(ke.prevSub=Oe,Te.nextSub=void 0),t.subs===Te&&(t.subs=Oe,!Oe&&t.computed)){t.computed.flags&=-5;for(let Be=t.computed.deps;Be;Be=Be.nextDep)removeSub(Be,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function removeDep(Te){const{prevDep:e,nextDep:t}=Te;e&&(e.nextDep=t,Te.prevDep=void 0),t&&(t.prevDep=e,Te.nextDep=void 0)}function effect(Te,e){Te.effect instanceof ReactiveEffect&&(Te=Te.effect.fn);const t=new ReactiveEffect(Te);e&&extend$5(t,e);try{t.run()}catch(ke){throw t.stop(),ke}const Oe=t.run.bind(t);return Oe.effect=t,Oe}function stop(Te){Te.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Te=trackStack.pop();shouldTrack=Te===void 0?!0:Te}function cleanupEffect(Te){const{cleanup:e}=Te;if(Te.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const Oe=t.nextDep;Oe.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=Oe),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=Oe)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{endBatch()}}}function addSub(Te){if(Te.dep.sc++,Te.sub.flags&4){const e=Te.dep.computed;if(e&&!Te.dep.subs){e.flags|=20;for(let Oe=e.deps;Oe;Oe=Oe.nextDep)addSub(Oe)}const t=Te.dep.subs;t!==Te&&(Te.prevSub=t,t&&(t.nextSub=Te)),Te.dep.subs=Te}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(Te,e,t){if(shouldTrack&&activeSub){let Oe=targetMap.get(Te);Oe||targetMap.set(Te,Oe=new Map);let ke=Oe.get(t);ke||(Oe.set(t,ke=new Dep),ke.map=Oe,ke.key=t),ke.track()}}function trigger(Te,e,t,Oe,ke,Be){const Ue=targetMap.get(Te);if(!Ue){globalVersion++;return}const He=We=>{We&&We.trigger()};if(startBatch(),e==="clear")Ue.forEach(He);else{const We=isArray$1(Te),Cn=We&&isIntegerKey(t);if(We&&t==="length"){const An=Number(Oe);Ue.forEach((En,Sn)=>{(Sn==="length"||Sn===ARRAY_ITERATE_KEY||!isSymbol(Sn)&&Sn>=An)&&He(En)})}else switch((t!==void 0||Ue.has(void 0))&&He(Ue.get(t)),Cn&&He(Ue.get(ARRAY_ITERATE_KEY)),e){case"add":We?Cn&&He(Ue.get("length")):(He(Ue.get(ITERATE_KEY)),isMap(Te)&&He(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"delete":We||(He(Ue.get(ITERATE_KEY)),isMap(Te)&&He(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Te)&&He(Ue.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(Te,e){const t=targetMap.get(Te);return t&&t.get(e)}function reactiveReadArray(Te){const e=toRaw(Te);return e===Te?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(Te)?e:e.map(toReactive))}function shallowReadArray(Te){return track(Te=toRaw(Te),"iterate",ARRAY_ITERATE_KEY),Te}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...Te){return reactiveReadArray(this).concat(...Te.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",Te=>(Te[1]=toReactive(Te[1]),Te))},every(Te,e){return apply$1(this,"every",Te,e,void 0,arguments)},filter(Te,e){return apply$1(this,"filter",Te,e,t=>t.map(toReactive),arguments)},find(Te,e){return apply$1(this,"find",Te,e,toReactive,arguments)},findIndex(Te,e){return apply$1(this,"findIndex",Te,e,void 0,arguments)},findLast(Te,e){return apply$1(this,"findLast",Te,e,toReactive,arguments)},findLastIndex(Te,e){return apply$1(this,"findLastIndex",Te,e,void 0,arguments)},forEach(Te,e){return apply$1(this,"forEach",Te,e,void 0,arguments)},includes(...Te){return searchProxy(this,"includes",Te)},indexOf(...Te){return searchProxy(this,"indexOf",Te)},join(Te){return reactiveReadArray(this).join(Te)},lastIndexOf(...Te){return searchProxy(this,"lastIndexOf",Te)},map(Te,e){return apply$1(this,"map",Te,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...Te){return noTracking(this,"push",Te)},reduce(Te,...e){return reduce(this,"reduce",Te,e)},reduceRight(Te,...e){return reduce(this,"reduceRight",Te,e)},shift(){return noTracking(this,"shift")},some(Te,e){return apply$1(this,"some",Te,e,void 0,arguments)},splice(...Te){return noTracking(this,"splice",Te)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(Te){return reactiveReadArray(this).toSorted(Te)},toSpliced(...Te){return reactiveReadArray(this).toSpliced(...Te)},unshift(...Te){return noTracking(this,"unshift",Te)},values(){return iterator(this,"values",toReactive)}};function iterator(Te,e,t){const Oe=shallowReadArray(Te),ke=Oe[e]();return Oe!==Te&&!isShallow(Te)&&(ke._next=ke.next,ke.next=()=>{const Be=ke._next();return Be.value&&(Be.value=t(Be.value)),Be}),ke}const arrayProto=Array.prototype;function apply$1(Te,e,t,Oe,ke,Be){const Ue=shallowReadArray(Te),He=Ue!==Te&&!isShallow(Te),We=Ue[e];if(We!==arrayProto[e]){const En=We.apply(Te,Be);return He?toReactive(En):En}let Cn=t;Ue!==Te&&(He?Cn=function(En,Sn){return t.call(this,toReactive(En),Sn,Te)}:t.length>2&&(Cn=function(En,Sn){return t.call(this,En,Sn,Te)}));const An=We.call(Ue,Cn,Oe);return He&&ke?ke(An):An}function reduce(Te,e,t,Oe){const ke=shallowReadArray(Te);let Be=t;return ke!==Te&&(isShallow(Te)?t.length>3&&(Be=function(Ue,He,We){return t.call(this,Ue,He,We,Te)}):Be=function(Ue,He,We){return t.call(this,Ue,toReactive(He),We,Te)}),ke[e](Be,...Oe)}function searchProxy(Te,e,t){const Oe=toRaw(Te);track(Oe,"iterate",ARRAY_ITERATE_KEY);const ke=Oe[e](...t);return(ke===-1||ke===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),Oe[e](...t)):ke}function noTracking(Te,e,t=[]){pauseTracking(),startBatch();const Oe=toRaw(Te)[e].apply(Te,t);return endBatch(),resetTracking(),Oe}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Te=>Te!=="arguments"&&Te!=="caller").map(Te=>Symbol[Te]).filter(isSymbol));function hasOwnProperty(Te){isSymbol(Te)||(Te=String(Te));const e=toRaw(this);return track(e,"has",Te),e.hasOwnProperty(Te)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,Oe){if(t==="__v_skip")return e.__v_skip;const ke=this._isReadonly,Be=this._isShallow;if(t==="__v_isReactive")return!ke;if(t==="__v_isReadonly")return ke;if(t==="__v_isShallow")return Be;if(t==="__v_raw")return Oe===(ke?Be?shallowReadonlyMap:readonlyMap:Be?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(Oe)?e:void 0;const Ue=isArray$1(e);if(!ke){let We;if(Ue&&(We=arrayInstrumentations[t]))return We;if(t==="hasOwnProperty")return hasOwnProperty}const He=Reflect.get(e,t,isRef(e)?e:Oe);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(ke||track(e,"get",t),Be)?He:isRef(He)?Ue&&isIntegerKey(t)?He:He.value:isObject$1(He)?ke?readonly(He):reactive(He):He}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,Oe,ke){let Be=e[t];if(!this._isShallow){const We=isReadonly(Be);if(!isShallow(Oe)&&!isReadonly(Oe)&&(Be=toRaw(Be),Oe=toRaw(Oe)),!isArray$1(e)&&isRef(Be)&&!isRef(Oe))return We?!1:(Be.value=Oe,!0)}const Ue=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),He=Reflect.set(e,t,Oe,isRef(e)?e:ke);return e===toRaw(ke)&&(Ue?hasChanged(Oe,Be)&&trigger(e,"set",t,Oe):trigger(e,"add",t,Oe)),He}deleteProperty(e,t){const Oe=hasOwn(e,t);e[t];const ke=Reflect.deleteProperty(e,t);return ke&&Oe&&trigger(e,"delete",t,void 0),ke}has(e,t){const Oe=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),Oe}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=Te=>Te,getProto=Te=>Reflect.getPrototypeOf(Te);function createIterableMethod(Te,e,t){return function(...Oe){const ke=this.__v_raw,Be=toRaw(ke),Ue=isMap(Be),He=Te==="entries"||Te===Symbol.iterator&&Ue,We=Te==="keys"&&Ue,Cn=ke[Te](...Oe),An=t?toShallow:e?toReadonly:toReactive;return!e&&track(Be,"iterate",We?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:En,done:Sn}=Cn.next();return Sn?{value:En,done:Sn}:{value:He?[An(En[0]),An(En[1])]:An(En),done:Sn}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Te){return function(...e){return Te==="delete"?!1:Te==="clear"?void 0:this}}function createInstrumentations(Te,e){const t={get(ke){const Be=this.__v_raw,Ue=toRaw(Be),He=toRaw(ke);Te||(hasChanged(ke,He)&&track(Ue,"get",ke),track(Ue,"get",He));const{has:We}=getProto(Ue),Cn=e?toShallow:Te?toReadonly:toReactive;if(We.call(Ue,ke))return Cn(Be.get(ke));if(We.call(Ue,He))return Cn(Be.get(He));Be!==Ue&&Be.get(ke)},get size(){const ke=this.__v_raw;return!Te&&track(toRaw(ke),"iterate",ITERATE_KEY),Reflect.get(ke,"size",ke)},has(ke){const Be=this.__v_raw,Ue=toRaw(Be),He=toRaw(ke);return Te||(hasChanged(ke,He)&&track(Ue,"has",ke),track(Ue,"has",He)),ke===He?Be.has(ke):Be.has(ke)||Be.has(He)},forEach(ke,Be){const Ue=this,He=Ue.__v_raw,We=toRaw(He),Cn=e?toShallow:Te?toReadonly:toReactive;return!Te&&track(We,"iterate",ITERATE_KEY),He.forEach((An,En)=>ke.call(Be,Cn(An),Cn(En),Ue))}};return extend$5(t,Te?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(ke){!e&&!isShallow(ke)&&!isReadonly(ke)&&(ke=toRaw(ke));const Be=toRaw(this);return getProto(Be).has.call(Be,ke)||(Be.add(ke),trigger(Be,"add",ke,ke)),this},set(ke,Be){!e&&!isShallow(Be)&&!isReadonly(Be)&&(Be=toRaw(Be));const Ue=toRaw(this),{has:He,get:We}=getProto(Ue);let Cn=He.call(Ue,ke);Cn||(ke=toRaw(ke),Cn=He.call(Ue,ke));const An=We.call(Ue,ke);return Ue.set(ke,Be),Cn?hasChanged(Be,An)&&trigger(Ue,"set",ke,Be):trigger(Ue,"add",ke,Be),this},delete(ke){const Be=toRaw(this),{has:Ue,get:He}=getProto(Be);let We=Ue.call(Be,ke);We||(ke=toRaw(ke),We=Ue.call(Be,ke)),He&&He.call(Be,ke);const Cn=Be.delete(ke);return We&&trigger(Be,"delete",ke,void 0),Cn},clear(){const ke=toRaw(this),Be=ke.size!==0,Ue=ke.clear();return Be&&trigger(ke,"clear",void 0,void 0),Ue}}),["keys","values","entries",Symbol.iterator].forEach(ke=>{t[ke]=createIterableMethod(ke,Te,e)}),t}function createInstrumentationGetter(Te,e){const t=createInstrumentations(Te,e);return(Oe,ke,Be)=>ke==="__v_isReactive"?!Te:ke==="__v_isReadonly"?Te:ke==="__v_raw"?Oe:Reflect.get(hasOwn(t,ke)&&ke in Oe?t:Oe,ke,Be)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Te){switch(Te){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Te){return Te.__v_skip||!Object.isExtensible(Te)?0:targetTypeMap(toRawType(Te))}function reactive(Te){return isReadonly(Te)?Te:createReactiveObject(Te,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Te){return createReactiveObject(Te,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Te){return createReactiveObject(Te,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(Te){return createReactiveObject(Te,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(Te,e,t,Oe,ke){if(!isObject$1(Te)||Te.__v_raw&&!(e&&Te.__v_isReactive))return Te;const Be=ke.get(Te);if(Be)return Be;const Ue=getTargetType(Te);if(Ue===0)return Te;const He=new Proxy(Te,Ue===2?Oe:t);return ke.set(Te,He),He}function isReactive(Te){return isReadonly(Te)?isReactive(Te.__v_raw):!!(Te&&Te.__v_isReactive)}function isReadonly(Te){return!!(Te&&Te.__v_isReadonly)}function isShallow(Te){return!!(Te&&Te.__v_isShallow)}function isProxy(Te){return Te?!!Te.__v_raw:!1}function toRaw(Te){const e=Te&&Te.__v_raw;return e?toRaw(e):Te}function markRaw(Te){return!hasOwn(Te,"__v_skip")&&Object.isExtensible(Te)&&def(Te,"__v_skip",!0),Te}const toReactive=Te=>isObject$1(Te)?reactive(Te):Te,toReadonly=Te=>isObject$1(Te)?readonly(Te):Te;function isRef(Te){return Te?Te.__v_isRef===!0:!1}function ref(Te){return createRef(Te,!1)}function shallowRef(Te){return createRef(Te,!0)}function createRef(Te,e){return isRef(Te)?Te:new RefImpl(Te,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,Oe=this.__v_isShallow||isShallow(e)||isReadonly(e);e=Oe?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=Oe?e:toReactive(e),this.dep.trigger())}}function triggerRef(Te){Te.dep&&Te.dep.trigger()}function unref(Te){return isRef(Te)?Te.value:Te}function toValue$1(Te){return isFunction$1(Te)?Te():unref(Te)}const shallowUnwrapHandlers={get:(Te,e,t)=>e==="__v_raw"?Te:unref(Reflect.get(Te,e,t)),set:(Te,e,t,Oe)=>{const ke=Te[e];return isRef(ke)&&!isRef(t)?(ke.value=t,!0):Reflect.set(Te,e,t,Oe)}};function proxyRefs(Te){return isReactive(Te)?Te:new Proxy(Te,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Dep,{get:Oe,set:ke}=e(t.track.bind(t),t.trigger.bind(t));this._get=Oe,this._set=ke}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(Te){return new CustomRefImpl(Te)}function toRefs(Te){const e=isArray$1(Te)?new Array(Te.length):{};for(const t in Te)e[t]=propertyToRef(Te,t);return e}class ObjectRefImpl{constructor(e,t,Oe){this._object=e,this._key=t,this._defaultValue=Oe,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(Te,e,t){return isRef(Te)?Te:isFunction$1(Te)?new GetterRefImpl(Te):isObject$1(Te)&&arguments.length>1?propertyToRef(Te,e,t):ref(Te)}function propertyToRef(Te,e,t){const Oe=Te[e];return isRef(Oe)?Oe:new ObjectRefImpl(Te,e,t)}class ComputedRefImpl{constructor(e,t,Oe){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=Oe}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(Te,e,t=!1){let Oe,ke;return isFunction$1(Te)?Oe=Te:(Oe=Te.get,ke=Te.set),new ComputedRefImpl(Oe,ke,t)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(Te,e=!1,t=activeWatcher){if(t){let Oe=cleanupMap.get(t);Oe||cleanupMap.set(t,Oe=[]),Oe.push(Te)}}function watch$1(Te,e,t=EMPTY_OBJ){const{immediate:Oe,deep:ke,once:Be,scheduler:Ue,augmentJob:He,call:We}=t,Cn=oi=>ke?oi:isShallow(oi)||ke===!1||ke===0?traverse(oi,1):traverse(oi);let An,En,Sn,Tn,Ln=!1,Bn=!1;if(isRef(Te)?(En=()=>Te.value,Ln=isShallow(Te)):isReactive(Te)?(En=()=>Cn(Te),Ln=!0):isArray$1(Te)?(Bn=!0,Ln=Te.some(oi=>isReactive(oi)||isShallow(oi)),En=()=>Te.map(oi=>{if(isRef(oi))return oi.value;if(isReactive(oi))return Cn(oi);if(isFunction$1(oi))return We?We(oi,2):oi()})):isFunction$1(Te)?e?En=We?()=>We(Te,2):Te:En=()=>{if(Sn){pauseTracking();try{Sn()}finally{resetTracking()}}const oi=activeWatcher;activeWatcher=An;try{return We?We(Te,3,[Tn]):Te(Tn)}finally{activeWatcher=oi}}:En=NOOP,e&&ke){const oi=En,ci=ke===!0?1/0:ke;En=()=>traverse(oi(),ci)}const ti=getCurrentScope(),ni=()=>{An.stop(),ti&&ti.active&&remove(ti.effects,An)};if(Be&&e){const oi=e;e=(...ci)=>{oi(...ci),ni()}}let ii=Bn?new Array(Te.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const si=oi=>{if(!(!(An.flags&1)||!An.dirty&&!oi))if(e){const ci=An.run();if(ke||Ln||(Bn?ci.some((vi,pi)=>hasChanged(vi,ii[pi])):hasChanged(ci,ii))){Sn&&Sn();const vi=activeWatcher;activeWatcher=An;try{const pi=[ci,ii===INITIAL_WATCHER_VALUE?void 0:Bn&&ii[0]===INITIAL_WATCHER_VALUE?[]:ii,Tn];We?We(e,3,pi):e(...pi),ii=ci}finally{activeWatcher=vi}}}else An.run()};return He&&He(si),An=new ReactiveEffect(En),An.scheduler=Ue?()=>Ue(si,!1):si,Tn=oi=>onWatcherCleanup(oi,!1,An),Sn=An.onStop=()=>{const oi=cleanupMap.get(An);if(oi){if(We)We(oi,4);else for(const ci of oi)ci();cleanupMap.delete(An)}},e?Oe?si(!0):ii=An.run():Ue?Ue(si.bind(null,!0),!0):An.run(),ni.pause=An.pause.bind(An),ni.resume=An.resume.bind(An),ni.stop=ni,ni}function traverse(Te,e=1/0,t){if(e<=0||!isObject$1(Te)||Te.__v_skip||(t=t||new Set,t.has(Te)))return Te;if(t.add(Te),e--,isRef(Te))traverse(Te.value,e,t);else if(isArray$1(Te))for(let Oe=0;Oe<Te.length;Oe++)traverse(Te[Oe],e,t);else if(isSet(Te)||isMap(Te))Te.forEach(Oe=>{traverse(Oe,e,t)});else if(isPlainObject$1(Te)){for(const Oe in Te)traverse(Te[Oe],e,t);for(const Oe of Object.getOwnPropertySymbols(Te))Object.prototype.propertyIsEnumerable.call(Te,Oe)&&traverse(Te[Oe],e,t)}return Te}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(Te){stack.push(Te)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(Te,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,Oe=t&&t.appContext.config.warnHandler,ke=getComponentTrace();if(Oe)callWithErrorHandling(Oe,t,11,[Te+e.map(Be=>{var Ue,He;return(He=(Ue=Be.toString)==null?void 0:Ue.call(Be))!=null?He:JSON.stringify(Be)}).join(""),t&&t.proxy,ke.map(({vnode:Be})=>`at <${formatComponentName(t,Be.type)}>`).join(`
`),ke]);else{const Be=[`[Vue warn]: ${Te}`,...e];ke.length&&Be.push(`
`,...formatTrace(ke)),console.warn(...Be)}resetTracking(),isWarning=!1}function getComponentTrace(){let Te=stack[stack.length-1];if(!Te)return[];const e=[];for(;Te;){const t=e[0];t&&t.vnode===Te?t.recurseCount++:e.push({vnode:Te,recurseCount:0});const Oe=Te.component&&Te.component.parent;Te=Oe&&Oe.vnode}return e}function formatTrace(Te){const e=[];return Te.forEach((t,Oe)=>{e.push(...Oe===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:Te,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",Oe=Te.component?Te.component.parent==null:!1,ke=` at <${formatComponentName(Te.component,Te.type,Oe)}`,Be=">"+t;return Te.props?[ke,...formatProps(Te.props),Be]:[ke+Be]}function formatProps(Te){const e=[],t=Object.keys(Te);return t.slice(0,3).forEach(Oe=>{e.push(...formatProp(Oe,Te[Oe]))}),t.length>3&&e.push(" ..."),e}function formatProp(Te,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${Te}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${Te}=${e}`]:isRef(e)?(e=formatProp(Te,toRaw(e.value),!0),t?e:[`${Te}=Ref<`,e,">"]):isFunction$1(e)?[`${Te}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${Te}=`,e])}function assertNumber(Te,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(Te,e,t,Oe){try{return Oe?Te(...Oe):Te()}catch(ke){handleError(ke,e,t)}}function callWithAsyncErrorHandling(Te,e,t,Oe){if(isFunction$1(Te)){const ke=callWithErrorHandling(Te,e,t,Oe);return ke&&isPromise(ke)&&ke.catch(Be=>{handleError(Be,e,t)}),ke}if(isArray$1(Te)){const ke=[];for(let Be=0;Be<Te.length;Be++)ke.push(callWithAsyncErrorHandling(Te[Be],e,t,Oe));return ke}}function handleError(Te,e,t,Oe=!0){const ke=e?e.vnode:null,{errorHandler:Be,throwUnhandledErrorInProduction:Ue}=e&&e.appContext.config||EMPTY_OBJ;if(e){let He=e.parent;const We=e.proxy,Cn=`https://vuejs.org/error-reference/#runtime-${t}`;for(;He;){const An=He.ec;if(An){for(let En=0;En<An.length;En++)if(An[En](Te,We,Cn)===!1)return}He=He.parent}if(Be){pauseTracking(),callWithErrorHandling(Be,null,10,[Te,We,Cn]),resetTracking();return}}logError(Te,t,ke,Oe,Ue)}function logError(Te,e,t,Oe=!0,ke=!1){if(ke)throw Te;console.error(Te)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Te){const e=currentFlushPromise||resolvedPromise;return Te?e.then(this?Te.bind(this):Te):e}function findInsertionIndex$1(Te){let e=flushIndex+1,t=queue.length;for(;e<t;){const Oe=e+t>>>1,ke=queue[Oe],Be=getId(ke);Be<Te||Be===Te&&ke.flags&2?e=Oe+1:t=Oe}return e}function queueJob(Te){if(!(Te.flags&1)){const e=getId(Te),t=queue[queue.length-1];!t||!(Te.flags&2)&&e>=getId(t)?queue.push(Te):queue.splice(findInsertionIndex$1(e),0,Te),Te.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(Te){isArray$1(Te)?pendingPostFlushCbs.push(...Te):activePostFlushCbs&&Te.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,Te):Te.flags&1||(pendingPostFlushCbs.push(Te),Te.flags|=1),queueFlush()}function flushPreFlushCbs(Te,e,t=flushIndex+1){for(;t<queue.length;t++){const Oe=queue[t];if(Oe&&Oe.flags&2){if(Te&&Oe.id!==Te.uid)continue;queue.splice(t,1),t--,Oe.flags&4&&(Oe.flags&=-2),Oe(),Oe.flags&4||(Oe.flags&=-2)}}}function flushPostFlushCbs(Te){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,Oe)=>getId(t)-getId(Oe));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=Te=>Te.id==null?Te.flags&2?-1:1/0:Te.id;function flushJobs(Te){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(Te,e){var t,Oe;devtools$1=Te,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:ke,args:Be})=>devtools$1.emit(ke,...Be)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((Oe=(t=window.navigator)==null?void 0:t.userAgent)!=null&&Oe.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Be=>{setDevtoolsHook$1(Be,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Te){const e=currentRenderingInstance;return currentRenderingInstance=Te,currentScopeId=Te&&Te.type.__scopeId||null,e}function pushScopeId(Te){currentScopeId=Te}function popScopeId(){currentScopeId=null}const withScopeId=Te=>withCtx;function withCtx(Te,e=currentRenderingInstance,t){if(!e||Te._n)return Te;const Oe=(...ke)=>{Oe._d&&setBlockTracking(-1);const Be=setCurrentRenderingInstance(e);let Ue;try{Ue=Te(...ke)}finally{setCurrentRenderingInstance(Be),Oe._d&&setBlockTracking(1)}return Ue};return Oe._n=!0,Oe._c=!0,Oe._d=!0,Oe}function withDirectives(Te,e){if(currentRenderingInstance===null)return Te;const t=getComponentPublicInstance(currentRenderingInstance),Oe=Te.dirs||(Te.dirs=[]);for(let ke=0;ke<e.length;ke++){let[Be,Ue,He,We=EMPTY_OBJ]=e[ke];Be&&(isFunction$1(Be)&&(Be={mounted:Be,updated:Be}),Be.deep&&traverse(Ue),Oe.push({dir:Be,instance:t,value:Ue,oldValue:void 0,arg:He,modifiers:We}))}return Te}function invokeDirectiveHook(Te,e,t,Oe){const ke=Te.dirs,Be=e&&e.dirs;for(let Ue=0;Ue<ke.length;Ue++){const He=ke[Ue];Be&&(He.oldValue=Be[Ue].value);let We=He.dir[Oe];We&&(pauseTracking(),callWithAsyncErrorHandling(We,t,8,[Te.el,He,Te,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=Te=>Te.__isTeleport,isTeleportDisabled=Te=>Te&&(Te.disabled||Te.disabled===""),isTeleportDeferred=Te=>Te&&(Te.defer||Te.defer===""),isTargetSVG=Te=>typeof SVGElement<"u"&&Te instanceof SVGElement,isTargetMathML=Te=>typeof MathMLElement=="function"&&Te instanceof MathMLElement,resolveTarget=(Te,e)=>{const t=Te&&Te.to;return isString(t)?e?e(t):null:t},TeleportImpl={name:"Teleport",__isTeleport:!0,process(Te,e,t,Oe,ke,Be,Ue,He,We,Cn){const{mc:An,pc:En,pbc:Sn,o:{insert:Tn,querySelector:Ln,createText:Bn,createComment:ti}}=Cn,ni=isTeleportDisabled(e.props);let{shapeFlag:ii,children:si,dynamicChildren:oi}=e;if(Te==null){const ci=e.el=Bn(""),vi=e.anchor=Bn("");Tn(ci,t,Oe),Tn(vi,t,Oe);const pi=(Mi,Oi)=>{ii&16&&(ke&&ke.isCE&&(ke.ce._teleportTarget=Mi),An(si,Mi,Oi,ke,Be,Ue,He,We))},fi=()=>{const Mi=e.target=resolveTarget(e.props,Ln),Oi=prepareAnchor(Mi,e,Bn,Tn);Mi&&(Ue!=="svg"&&isTargetSVG(Mi)?Ue="svg":Ue!=="mathml"&&isTargetMathML(Mi)&&(Ue="mathml"),ni||(pi(Mi,Oi),updateCssVars(e,!1)))};ni&&(pi(t,vi),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{fi(),e.el.__isMounted=!0},Be):fi()}else{if(isTeleportDeferred(e.props)&&!Te.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(Te,e,t,Oe,ke,Be,Ue,He,We,Cn),delete Te.el.__isMounted},Be);return}e.el=Te.el,e.targetStart=Te.targetStart;const ci=e.anchor=Te.anchor,vi=e.target=Te.target,pi=e.targetAnchor=Te.targetAnchor,fi=isTeleportDisabled(Te.props),Mi=fi?t:vi,Oi=fi?ci:pi;if(Ue==="svg"||isTargetSVG(vi)?Ue="svg":(Ue==="mathml"||isTargetMathML(vi))&&(Ue="mathml"),oi?(Sn(Te.dynamicChildren,oi,Mi,ke,Be,Ue,He),traverseStaticChildren(Te,e,!0)):We||En(Te,e,Mi,Oi,ke,Be,Ue,He,!1),ni)fi?e.props&&Te.props&&e.props.to!==Te.props.to&&(e.props.to=Te.props.to):moveTeleport(e,t,ci,Cn,1);else if((e.props&&e.props.to)!==(Te.props&&Te.props.to)){const ui=e.target=resolveTarget(e.props,Ln);ui&&moveTeleport(e,ui,null,Cn,0)}else fi&&moveTeleport(e,vi,pi,Cn,1);updateCssVars(e,ni)}},remove(Te,e,t,{um:Oe,o:{remove:ke}},Be){const{shapeFlag:Ue,children:He,anchor:We,targetStart:Cn,targetAnchor:An,target:En,props:Sn}=Te;if(En&&(ke(Cn),ke(An)),Be&&ke(We),Ue&16){const Tn=Be||!isTeleportDisabled(Sn);for(let Ln=0;Ln<He.length;Ln++){const Bn=He[Ln];Oe(Bn,e,t,Tn,!!Bn.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Te,e,t,{o:{insert:Oe},m:ke},Be=2){Be===0&&Oe(Te.targetAnchor,e,t);const{el:Ue,anchor:He,shapeFlag:We,children:Cn,props:An}=Te,En=Be===2;if(En&&Oe(Ue,e,t),(!En||isTeleportDisabled(An))&&We&16)for(let Sn=0;Sn<Cn.length;Sn++)ke(Cn[Sn],e,t,2);En&&Oe(He,e,t)}function hydrateTeleport(Te,e,t,Oe,ke,Be,{o:{nextSibling:Ue,parentNode:He,querySelector:We,insert:Cn,createText:An}},En){const Sn=e.target=resolveTarget(e.props,We);if(Sn){const Tn=isTeleportDisabled(e.props),Ln=Sn._lpa||Sn.firstChild;if(e.shapeFlag&16)if(Tn)e.anchor=En(Ue(Te),e,He(Te),t,Oe,ke,Be),e.targetStart=Ln,e.targetAnchor=Ln&&Ue(Ln);else{e.anchor=Ue(Te);let Bn=Ln;for(;Bn;){if(Bn&&Bn.nodeType===8){if(Bn.data==="teleport start anchor")e.targetStart=Bn;else if(Bn.data==="teleport anchor"){e.targetAnchor=Bn,Sn._lpa=e.targetAnchor&&Ue(e.targetAnchor);break}}Bn=Ue(Bn)}e.targetAnchor||prepareAnchor(Sn,e,An,Cn),En(Ln&&Ue(Ln),e,Sn,t,Oe,ke,Be)}updateCssVars(e,Tn)}return e.anchor&&Ue(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(Te,e){const t=Te.ctx;if(t&&t.ut){let Oe,ke;for(e?(Oe=Te.el,ke=Te.anchor):(Oe=Te.targetStart,ke=Te.targetAnchor);Oe&&Oe!==ke;)Oe.nodeType===1&&Oe.setAttribute("data-v-owner",t.uid),Oe=Oe.nextSibling;t.ut()}}function prepareAnchor(Te,e,t,Oe){const ke=e.targetStart=t(""),Be=e.targetAnchor=t("");return ke[TeleportEndKey]=Be,Te&&(Oe(ke,Te),Oe(Be,Te)),Be}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const Te={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Te.isMounted=!0}),onBeforeUnmount(()=>{Te.isUnmounting=!0}),Te}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=Te=>{const e=Te.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Te,{slots:e}){const t=getCurrentInstance(),Oe=useTransitionState();return()=>{const ke=e.default&&getTransitionRawChildren(e.default(),!0);if(!ke||!ke.length)return;const Be=findNonCommentChild(ke),Ue=toRaw(Te),{mode:He}=Ue;if(Oe.isLeaving)return emptyPlaceholder(Be);const We=getInnerChild$1(Be);if(!We)return emptyPlaceholder(Be);let Cn=resolveTransitionHooks(We,Ue,Oe,t,En=>Cn=En);We.type!==Comment&&setTransitionHooks(We,Cn);let An=t.subTree&&getInnerChild$1(t.subTree);if(An&&An.type!==Comment&&!isSameVNodeType(We,An)&&recursiveGetSubtree(t).type!==Comment){let En=resolveTransitionHooks(An,Ue,Oe,t);if(setTransitionHooks(An,En),He==="out-in"&&We.type!==Comment)return Oe.isLeaving=!0,En.afterLeave=()=>{Oe.isLeaving=!1,t.job.flags&8||t.update(),delete En.afterLeave,An=void 0},emptyPlaceholder(Be);He==="in-out"&&We.type!==Comment?En.delayLeave=(Sn,Tn,Ln)=>{const Bn=getLeavingNodesForType(Oe,An);Bn[String(An.key)]=An,Sn[leaveCbKey]=()=>{Tn(),Sn[leaveCbKey]=void 0,delete Cn.delayedLeave,An=void 0},Cn.delayedLeave=()=>{Ln(),delete Cn.delayedLeave,An=void 0}}:An=void 0}else An&&(An=void 0);return Be}}};function findNonCommentChild(Te){let e=Te[0];if(Te.length>1){for(const t of Te)if(t.type!==Comment){e=t;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Te,e){const{leavingVNodes:t}=Te;let Oe=t.get(e.type);return Oe||(Oe=Object.create(null),t.set(e.type,Oe)),Oe}function resolveTransitionHooks(Te,e,t,Oe,ke){const{appear:Be,mode:Ue,persisted:He=!1,onBeforeEnter:We,onEnter:Cn,onAfterEnter:An,onEnterCancelled:En,onBeforeLeave:Sn,onLeave:Tn,onAfterLeave:Ln,onLeaveCancelled:Bn,onBeforeAppear:ti,onAppear:ni,onAfterAppear:ii,onAppearCancelled:si}=e,oi=String(Te.key),ci=getLeavingNodesForType(t,Te),vi=(Mi,Oi)=>{Mi&&callWithAsyncErrorHandling(Mi,Oe,9,Oi)},pi=(Mi,Oi)=>{const ui=Oi[1];vi(Mi,Oi),isArray$1(Mi)?Mi.every(li=>li.length<=1)&&ui():Mi.length<=1&&ui()},fi={mode:Ue,persisted:He,beforeEnter(Mi){let Oi=We;if(!t.isMounted)if(Be)Oi=ti||We;else return;Mi[leaveCbKey]&&Mi[leaveCbKey](!0);const ui=ci[oi];ui&&isSameVNodeType(Te,ui)&&ui.el[leaveCbKey]&&ui.el[leaveCbKey](),vi(Oi,[Mi])},enter(Mi){let Oi=Cn,ui=An,li=En;if(!t.isMounted)if(Be)Oi=ni||Cn,ui=ii||An,li=si||En;else return;let Ri=!1;const Pi=Mi[enterCbKey$1]=Fi=>{Ri||(Ri=!0,Fi?vi(li,[Mi]):vi(ui,[Mi]),fi.delayedLeave&&fi.delayedLeave(),Mi[enterCbKey$1]=void 0)};Oi?pi(Oi,[Mi,Pi]):Pi()},leave(Mi,Oi){const ui=String(Te.key);if(Mi[enterCbKey$1]&&Mi[enterCbKey$1](!0),t.isUnmounting)return Oi();vi(Sn,[Mi]);let li=!1;const Ri=Mi[leaveCbKey]=Pi=>{li||(li=!0,Oi(),Pi?vi(Bn,[Mi]):vi(Ln,[Mi]),Mi[leaveCbKey]=void 0,ci[ui]===Te&&delete ci[ui])};ci[ui]=Te,Tn?pi(Tn,[Mi,Ri]):Ri()},clone(Mi){const Oi=resolveTransitionHooks(Mi,e,t,Oe,ke);return ke&&ke(Oi),Oi}};return fi}function emptyPlaceholder(Te){if(isKeepAlive(Te))return Te=cloneVNode(Te),Te.children=null,Te}function getInnerChild$1(Te){if(!isKeepAlive(Te))return isTeleport(Te.type)&&Te.children?findNonCommentChild(Te.children):Te;const{shapeFlag:e,children:t}=Te;if(t){if(e&16)return t[0];if(e&32&&isFunction$1(t.default))return t.default()}}function setTransitionHooks(Te,e){Te.shapeFlag&6&&Te.component?(Te.transition=e,setTransitionHooks(Te.component.subTree,e)):Te.shapeFlag&128?(Te.ssContent.transition=e.clone(Te.ssContent),Te.ssFallback.transition=e.clone(Te.ssFallback)):Te.transition=e}function getTransitionRawChildren(Te,e=!1,t){let Oe=[],ke=0;for(let Be=0;Be<Te.length;Be++){let Ue=Te[Be];const He=t==null?Ue.key:String(t)+String(Ue.key!=null?Ue.key:Be);Ue.type===Fragment?(Ue.patchFlag&128&&ke++,Oe=Oe.concat(getTransitionRawChildren(Ue.children,e,He))):(e||Ue.type!==Comment)&&Oe.push(He!=null?cloneVNode(Ue,{key:He}):Ue)}if(ke>1)for(let Be=0;Be<Oe.length;Be++)Oe[Be].patchFlag=-2;return Oe}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(Te,e){return isFunction$1(Te)?extend$5({name:Te.name},e,{setup:Te}):Te}function useId(){const Te=getCurrentInstance();return Te?(Te.appContext.config.idPrefix||"v")+"-"+Te.ids[0]+Te.ids[1]++:""}function markAsyncBoundary(Te){Te.ids=[Te.ids[0]+Te.ids[2]+++"-",0,0]}function useTemplateRef(Te){const e=getCurrentInstance(),t=shallowRef(null);if(e){const ke=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(ke,Te,{enumerable:!0,get:()=>t.value,set:Be=>t.value=Be})}return t}function setRef(Te,e,t,Oe,ke=!1){if(isArray$1(Te)){Te.forEach((Ln,Bn)=>setRef(Ln,e&&(isArray$1(e)?e[Bn]:e),t,Oe,ke));return}if(isAsyncWrapper(Oe)&&!ke){Oe.shapeFlag&512&&Oe.type.__asyncResolved&&Oe.component.subTree.component&&setRef(Te,e,t,Oe.component.subTree);return}const Be=Oe.shapeFlag&4?getComponentPublicInstance(Oe.component):Oe.el,Ue=ke?null:Be,{i:He,r:We}=Te,Cn=e&&e.r,An=He.refs===EMPTY_OBJ?He.refs={}:He.refs,En=He.setupState,Sn=toRaw(En),Tn=En===EMPTY_OBJ?()=>!1:Ln=>hasOwn(Sn,Ln);if(Cn!=null&&Cn!==We&&(isString(Cn)?(An[Cn]=null,Tn(Cn)&&(En[Cn]=null)):isRef(Cn)&&(Cn.value=null)),isFunction$1(We))callWithErrorHandling(We,He,12,[Ue,An]);else{const Ln=isString(We),Bn=isRef(We);if(Ln||Bn){const ti=()=>{if(Te.f){const ni=Ln?Tn(We)?En[We]:An[We]:We.value;ke?isArray$1(ni)&&remove(ni,Be):isArray$1(ni)?ni.includes(Be)||ni.push(Be):Ln?(An[We]=[Be],Tn(We)&&(En[We]=An[We])):(We.value=[Be],Te.k&&(An[Te.k]=We.value))}else Ln?(An[We]=Ue,Tn(We)&&(En[We]=Ue)):Bn&&(We.value=Ue,Te.k&&(An[Te.k]=Ue))};Ue?(ti.id=-1,queuePostRenderEffect(ti,t)):ti()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=Te=>Te.namespaceURI.includes("svg")&&Te.tagName!=="foreignObject",isMathMLContainer=Te=>Te.namespaceURI.includes("MathML"),getContainerType=Te=>{if(Te.nodeType===1){if(isSVGContainer(Te))return"svg";if(isMathMLContainer(Te))return"mathml"}},isComment=Te=>Te.nodeType===8;function createHydrationFunctions(Te){const{mt:e,p:t,o:{patchProp:Oe,createText:ke,nextSibling:Be,parentNode:Ue,remove:He,insert:We,createComment:Cn}}=Te,An=(si,oi)=>{if(!oi.hasChildNodes()){t(null,si,oi),flushPostFlushCbs(),oi._vnode=si;return}En(oi.firstChild,si,null,null,null),flushPostFlushCbs(),oi._vnode=si},En=(si,oi,ci,vi,pi,fi=!1)=>{fi=fi||!!oi.dynamicChildren;const Mi=isComment(si)&&si.data==="[",Oi=()=>Bn(si,oi,ci,vi,pi,Mi),{type:ui,ref:li,shapeFlag:Ri,patchFlag:Pi}=oi;let Fi=si.nodeType;oi.el=si,Pi===-2&&(fi=!1,oi.dynamicChildren=null);let Hi=null;switch(ui){case Text$1:Fi!==3?oi.children===""?(We(oi.el=ke(""),Ue(si),si),Hi=si):Hi=Oi():(si.data!==oi.children&&(logMismatchError(),si.data=oi.children),Hi=Be(si));break;case Comment:ii(si)?(Hi=Be(si),ni(oi.el=si.content.firstChild,si,ci)):Fi!==8||Mi?Hi=Oi():Hi=Be(si);break;case Static:if(Mi&&(si=Be(si),Fi=si.nodeType),Fi===1||Fi===3){Hi=si;const nr=!oi.children.length;for(let ar=0;ar<oi.staticCount;ar++)nr&&(oi.children+=Hi.nodeType===1?Hi.outerHTML:Hi.data),ar===oi.staticCount-1&&(oi.anchor=Hi),Hi=Be(Hi);return Mi?Be(Hi):Hi}else Oi();break;case Fragment:Mi?Hi=Ln(si,oi,ci,vi,pi,fi):Hi=Oi();break;default:if(Ri&1)(Fi!==1||oi.type.toLowerCase()!==si.tagName.toLowerCase())&&!ii(si)?Hi=Oi():Hi=Sn(si,oi,ci,vi,pi,fi);else if(Ri&6){oi.slotScopeIds=pi;const nr=Ue(si);if(Mi?Hi=ti(si):isComment(si)&&si.data==="teleport start"?Hi=ti(si,si.data,"teleport end"):Hi=Be(si),e(oi,nr,null,ci,vi,getContainerType(nr),fi),isAsyncWrapper(oi)&&!oi.type.__asyncResolved){let ar;Mi?(ar=createVNode(Fragment),ar.anchor=Hi?Hi.previousSibling:nr.lastChild):ar=si.nodeType===3?createTextVNode(""):createVNode("div"),ar.el=si,oi.component.subTree=ar}}else Ri&64?Fi!==8?Hi=Oi():Hi=oi.type.hydrate(si,oi,ci,vi,pi,fi,Te,Tn):Ri&128&&(Hi=oi.type.hydrate(si,oi,ci,vi,getContainerType(Ue(si)),pi,fi,Te,En))}return li!=null&&setRef(li,null,vi,oi),Hi},Sn=(si,oi,ci,vi,pi,fi)=>{fi=fi||!!oi.dynamicChildren;const{type:Mi,props:Oi,patchFlag:ui,shapeFlag:li,dirs:Ri,transition:Pi}=oi,Fi=Mi==="input"||Mi==="option";if(Fi||ui!==-1){Ri&&invokeDirectiveHook(oi,null,ci,"created");let Hi=!1;if(ii(si)){Hi=needTransition(null,Pi)&&ci&&ci.vnode.props&&ci.vnode.props.appear;const ar=si.content.firstChild;Hi&&Pi.beforeEnter(ar),ni(ar,si,ci),oi.el=si=ar}if(li&16&&!(Oi&&(Oi.innerHTML||Oi.textContent))){let ar=Tn(si.firstChild,oi,si,ci,vi,pi,fi);for(;ar;){isMismatchAllowed(si,1)||logMismatchError();const cr=ar;ar=ar.nextSibling,He(cr)}}else if(li&8){let ar=oi.children;ar[0]===`
`&&(si.tagName==="PRE"||si.tagName==="TEXTAREA")&&(ar=ar.slice(1)),si.textContent!==ar&&(isMismatchAllowed(si,0)||logMismatchError(),si.textContent=oi.children)}if(Oi){if(Fi||!fi||ui&48){const ar=si.tagName.includes("-");for(const cr in Oi)(Fi&&(cr.endsWith("value")||cr==="indeterminate")||isOn(cr)&&!isReservedProp(cr)||cr[0]==="."||ar)&&Oe(si,cr,null,Oi[cr],void 0,ci)}else if(Oi.onClick)Oe(si,"onClick",null,Oi.onClick,void 0,ci);else if(ui&4&&isReactive(Oi.style))for(const ar in Oi.style)Oi.style[ar]}let nr;(nr=Oi&&Oi.onVnodeBeforeMount)&&invokeVNodeHook(nr,ci,oi),Ri&&invokeDirectiveHook(oi,null,ci,"beforeMount"),((nr=Oi&&Oi.onVnodeMounted)||Ri||Hi)&&queueEffectWithSuspense(()=>{nr&&invokeVNodeHook(nr,ci,oi),Hi&&Pi.enter(si),Ri&&invokeDirectiveHook(oi,null,ci,"mounted")},vi)}return si.nextSibling},Tn=(si,oi,ci,vi,pi,fi,Mi)=>{Mi=Mi||!!oi.dynamicChildren;const Oi=oi.children,ui=Oi.length;for(let li=0;li<ui;li++){const Ri=Mi?Oi[li]:Oi[li]=normalizeVNode(Oi[li]),Pi=Ri.type===Text$1;si?(Pi&&!Mi&&li+1<ui&&normalizeVNode(Oi[li+1]).type===Text$1&&(We(ke(si.data.slice(Ri.children.length)),ci,Be(si)),si.data=Ri.children),si=En(si,Ri,vi,pi,fi,Mi)):Pi&&!Ri.children?We(Ri.el=ke(""),ci):(isMismatchAllowed(ci,1)||logMismatchError(),t(null,Ri,ci,null,vi,pi,getContainerType(ci),fi))}return si},Ln=(si,oi,ci,vi,pi,fi)=>{const{slotScopeIds:Mi}=oi;Mi&&(pi=pi?pi.concat(Mi):Mi);const Oi=Ue(si),ui=Tn(Be(si),oi,Oi,ci,vi,pi,fi);return ui&&isComment(ui)&&ui.data==="]"?Be(oi.anchor=ui):(logMismatchError(),We(oi.anchor=Cn("]"),Oi,ui),ui)},Bn=(si,oi,ci,vi,pi,fi)=>{if(isMismatchAllowed(si.parentElement,1)||logMismatchError(),oi.el=null,fi){const ui=ti(si);for(;;){const li=Be(si);if(li&&li!==ui)He(li);else break}}const Mi=Be(si),Oi=Ue(si);return He(si),t(null,oi,Oi,Mi,ci,vi,getContainerType(Oi),pi),ci&&(ci.vnode.el=oi.el,updateHOCHostEl(ci,oi.el)),Mi},ti=(si,oi="[",ci="]")=>{let vi=0;for(;si;)if(si=Be(si),si&&isComment(si)&&(si.data===oi&&vi++,si.data===ci)){if(vi===0)return Be(si);vi--}return si},ni=(si,oi,ci)=>{const vi=oi.parentNode;vi&&vi.replaceChild(si,oi);let pi=ci;for(;pi;)pi.vnode.el===oi&&(pi.vnode.el=pi.subTree.el=si),pi=pi.parent},ii=si=>si.nodeType===1&&si.tagName==="TEMPLATE";return[An,En]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(Te,e){if(e===0||e===1)for(;Te&&!Te.hasAttribute(allowMismatchAttr);)Te=Te.parentElement;const t=Te&&Te.getAttribute(allowMismatchAttr);if(t==null)return!1;if(t==="")return!0;{const Oe=t.split(",");return e===0&&Oe.includes("children")?!0:t.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(Te=>setTimeout(Te,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(Te=>clearTimeout(Te)),hydrateOnIdle=(Te=1e4)=>e=>{const t=requestIdleCallback(e,{timeout:Te});return()=>cancelIdleCallback(t)};function elementIsVisibleInViewport(Te){const{top:e,left:t,bottom:Oe,right:ke}=Te.getBoundingClientRect(),{innerHeight:Be,innerWidth:Ue}=window;return(e>0&&e<Be||Oe>0&&Oe<Be)&&(t>0&&t<Ue||ke>0&&ke<Ue)}const hydrateOnVisible=Te=>(e,t)=>{const Oe=new IntersectionObserver(ke=>{for(const Be of ke)if(Be.isIntersecting){Oe.disconnect(),e();break}},Te);return t(ke=>{if(ke instanceof Element){if(elementIsVisibleInViewport(ke))return e(),Oe.disconnect(),!1;Oe.observe(ke)}}),()=>Oe.disconnect()},hydrateOnMediaQuery=Te=>e=>{if(Te){const t=matchMedia(Te);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},hydrateOnInteraction=(Te=[])=>(e,t)=>{isString(Te)&&(Te=[Te]);let Oe=!1;const ke=Ue=>{Oe||(Oe=!0,Be(),e(),Ue.target.dispatchEvent(new Ue.constructor(Ue.type,Ue)))},Be=()=>{t(Ue=>{for(const He of Te)Ue.removeEventListener(He,ke)})};return t(Ue=>{for(const He of Te)Ue.addEventListener(He,ke,{once:!0})}),Be};function forEachElement(Te,e){if(isComment(Te)&&Te.data==="["){let t=1,Oe=Te.nextSibling;for(;Oe;){if(Oe.nodeType===1){if(e(Oe)===!1)break}else if(isComment(Oe))if(Oe.data==="]"){if(--t===0)break}else Oe.data==="["&&t++;Oe=Oe.nextSibling}}else e(Te)}const isAsyncWrapper=Te=>!!Te.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(Te){isFunction$1(Te)&&(Te={loader:Te});const{loader:e,loadingComponent:t,errorComponent:Oe,delay:ke=200,hydrate:Be,timeout:Ue,suspensible:He=!0,onError:We}=Te;let Cn=null,An,En=0;const Sn=()=>(En++,Cn=null,Tn()),Tn=()=>{let Ln;return Cn||(Ln=Cn=e().catch(Bn=>{if(Bn=Bn instanceof Error?Bn:new Error(String(Bn)),We)return new Promise((ti,ni)=>{We(Bn,()=>ti(Sn()),()=>ni(Bn),En+1)});throw Bn}).then(Bn=>Ln!==Cn&&Cn?Cn:(Bn&&(Bn.__esModule||Bn[Symbol.toStringTag]==="Module")&&(Bn=Bn.default),An=Bn,Bn)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:Tn,__asyncHydrate(Ln,Bn,ti){const ni=Be?()=>{const ii=Be(ti,si=>forEachElement(Ln,si));ii&&(Bn.bum||(Bn.bum=[])).push(ii)}:ti;An?ni():Tn().then(()=>!Bn.isUnmounted&&ni())},get __asyncResolved(){return An},setup(){const Ln=currentInstance;if(markAsyncBoundary(Ln),An)return()=>createInnerComp(An,Ln);const Bn=si=>{Cn=null,handleError(si,Ln,13,!Oe)};if(He&&Ln.suspense||isInSSRComponentSetup)return Tn().then(si=>()=>createInnerComp(si,Ln)).catch(si=>(Bn(si),()=>Oe?createVNode(Oe,{error:si}):null));const ti=ref(!1),ni=ref(),ii=ref(!!ke);return ke&&setTimeout(()=>{ii.value=!1},ke),Ue!=null&&setTimeout(()=>{if(!ti.value&&!ni.value){const si=new Error(`Async component timed out after ${Ue}ms.`);Bn(si),ni.value=si}},Ue),Tn().then(()=>{ti.value=!0,Ln.parent&&isKeepAlive(Ln.parent.vnode)&&Ln.parent.update()}).catch(si=>{Bn(si),ni.value=si}),()=>{if(ti.value&&An)return createInnerComp(An,Ln);if(ni.value&&Oe)return createVNode(Oe,{error:ni.value});if(t&&!ii.value)return createVNode(t)}}})}function createInnerComp(Te,e){const{ref:t,props:Oe,children:ke,ce:Be}=e.vnode,Ue=createVNode(Te,Oe,ke);return Ue.ref=t,Ue.ce=Be,delete e.vnode.ce,Ue}const isKeepAlive=Te=>Te.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Te,{slots:e}){const t=getCurrentInstance(),Oe=t.ctx;if(!Oe.renderer)return()=>{const ii=e.default&&e.default();return ii&&ii.length===1?ii[0]:ii};const ke=new Map,Be=new Set;let Ue=null;const He=t.suspense,{renderer:{p:We,m:Cn,um:An,o:{createElement:En}}}=Oe,Sn=En("div");Oe.activate=(ii,si,oi,ci,vi)=>{const pi=ii.component;Cn(ii,si,oi,0,He),We(pi.vnode,ii,si,oi,pi,He,ci,ii.slotScopeIds,vi),queuePostRenderEffect(()=>{pi.isDeactivated=!1,pi.a&&invokeArrayFns(pi.a);const fi=ii.props&&ii.props.onVnodeMounted;fi&&invokeVNodeHook(fi,pi.parent,ii)},He)},Oe.deactivate=ii=>{const si=ii.component;invalidateMount(si.m),invalidateMount(si.a),Cn(ii,Sn,null,1,He),queuePostRenderEffect(()=>{si.da&&invokeArrayFns(si.da);const oi=ii.props&&ii.props.onVnodeUnmounted;oi&&invokeVNodeHook(oi,si.parent,ii),si.isDeactivated=!0},He)};function Tn(ii){resetShapeFlag(ii),An(ii,t,He,!0)}function Ln(ii){ke.forEach((si,oi)=>{const ci=getComponentName(si.type);ci&&!ii(ci)&&Bn(oi)})}function Bn(ii){const si=ke.get(ii);si&&(!Ue||!isSameVNodeType(si,Ue))?Tn(si):Ue&&resetShapeFlag(Ue),ke.delete(ii),Be.delete(ii)}watch(()=>[Te.include,Te.exclude],([ii,si])=>{ii&&Ln(oi=>matches$1(ii,oi)),si&&Ln(oi=>!matches$1(si,oi))},{flush:"post",deep:!0});let ti=null;const ni=()=>{ti!=null&&(isSuspense(t.subTree.type)?queuePostRenderEffect(()=>{ke.set(ti,getInnerChild(t.subTree))},t.subTree.suspense):ke.set(ti,getInnerChild(t.subTree)))};return onMounted(ni),onUpdated(ni),onBeforeUnmount(()=>{ke.forEach(ii=>{const{subTree:si,suspense:oi}=t,ci=getInnerChild(si);if(ii.type===ci.type&&ii.key===ci.key){resetShapeFlag(ci);const vi=ci.component.da;vi&&queuePostRenderEffect(vi,oi);return}Tn(ii)})}),()=>{if(ti=null,!e.default)return Ue=null;const ii=e.default(),si=ii[0];if(ii.length>1)return Ue=null,ii;if(!isVNode(si)||!(si.shapeFlag&4)&&!(si.shapeFlag&128))return Ue=null,si;let oi=getInnerChild(si);if(oi.type===Comment)return Ue=null,oi;const ci=oi.type,vi=getComponentName(isAsyncWrapper(oi)?oi.type.__asyncResolved||{}:ci),{include:pi,exclude:fi,max:Mi}=Te;if(pi&&(!vi||!matches$1(pi,vi))||fi&&vi&&matches$1(fi,vi))return oi.shapeFlag&=-257,Ue=oi,si;const Oi=oi.key==null?ci:oi.key,ui=ke.get(Oi);return oi.el&&(oi=cloneVNode(oi),si.shapeFlag&128&&(si.ssContent=oi)),ti=Oi,ui?(oi.el=ui.el,oi.component=ui.component,oi.transition&&setTransitionHooks(oi,oi.transition),oi.shapeFlag|=512,Be.delete(Oi),Be.add(Oi)):(Be.add(Oi),Mi&&Be.size>parseInt(Mi,10)&&Bn(Be.values().next().value)),oi.shapeFlag|=256,Ue=oi,isSuspense(si.type)?si:oi}}},KeepAlive=KeepAliveImpl;function matches$1(Te,e){return isArray$1(Te)?Te.some(t=>matches$1(t,e)):isString(Te)?Te.split(",").includes(e):isRegExp(Te)?(Te.lastIndex=0,Te.test(e)):!1}function onActivated(Te,e){registerKeepAliveHook(Te,"a",e)}function onDeactivated(Te,e){registerKeepAliveHook(Te,"da",e)}function registerKeepAliveHook(Te,e,t=currentInstance){const Oe=Te.__wdc||(Te.__wdc=()=>{let ke=t;for(;ke;){if(ke.isDeactivated)return;ke=ke.parent}return Te()});if(injectHook(e,Oe,t),t){let ke=t.parent;for(;ke&&ke.parent;)isKeepAlive(ke.parent.vnode)&&injectToKeepAliveRoot(Oe,e,t,ke),ke=ke.parent}}function injectToKeepAliveRoot(Te,e,t,Oe){const ke=injectHook(e,Te,Oe,!0);onUnmounted(()=>{remove(Oe[e],ke)},t)}function resetShapeFlag(Te){Te.shapeFlag&=-257,Te.shapeFlag&=-513}function getInnerChild(Te){return Te.shapeFlag&128?Te.ssContent:Te}function injectHook(Te,e,t=currentInstance,Oe=!1){if(t){const ke=t[Te]||(t[Te]=[]),Be=e.__weh||(e.__weh=(...Ue)=>{pauseTracking();const He=setCurrentInstance(t),We=callWithAsyncErrorHandling(e,t,Te,Ue);return He(),resetTracking(),We});return Oe?ke.unshift(Be):ke.push(Be),Be}}const createHook=Te=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||Te==="sp")&&injectHook(Te,(...Oe)=>e(...Oe),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Te,e=currentInstance){injectHook("ec",Te,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Te,e){return resolveAsset(COMPONENTS,Te,!0,e)||Te}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Te){return isString(Te)?resolveAsset(COMPONENTS,Te,!1)||Te:Te||NULL_DYNAMIC_COMPONENT}function resolveDirective(Te){return resolveAsset(DIRECTIVES,Te)}function resolveAsset(Te,e,t=!0,Oe=!1){const ke=currentRenderingInstance||currentInstance;if(ke){const Be=ke.type;if(Te===COMPONENTS){const He=getComponentName(Be,!1);if(He&&(He===e||He===camelize(e)||He===capitalize(camelize(e))))return Be}const Ue=resolve(ke[Te]||Be[Te],e)||resolve(ke.appContext[Te],e);return!Ue&&Oe?Be:Ue}}function resolve(Te,e){return Te&&(Te[e]||Te[camelize(e)]||Te[capitalize(camelize(e))])}function renderList(Te,e,t,Oe){let ke;const Be=t&&t[Oe],Ue=isArray$1(Te);if(Ue||isString(Te)){const He=Ue&&isReactive(Te);let We=!1;He&&(We=!isShallow(Te),Te=shallowReadArray(Te)),ke=new Array(Te.length);for(let Cn=0,An=Te.length;Cn<An;Cn++)ke[Cn]=e(We?toReactive(Te[Cn]):Te[Cn],Cn,void 0,Be&&Be[Cn])}else if(typeof Te=="number"){ke=new Array(Te);for(let He=0;He<Te;He++)ke[He]=e(He+1,He,void 0,Be&&Be[He])}else if(isObject$1(Te))if(Te[Symbol.iterator])ke=Array.from(Te,(He,We)=>e(He,We,void 0,Be&&Be[We]));else{const He=Object.keys(Te);ke=new Array(He.length);for(let We=0,Cn=He.length;We<Cn;We++){const An=He[We];ke[We]=e(Te[An],An,We,Be&&Be[We])}}else ke=[];return t&&(t[Oe]=ke),ke}function createSlots(Te,e){for(let t=0;t<e.length;t++){const Oe=e[t];if(isArray$1(Oe))for(let ke=0;ke<Oe.length;ke++)Te[Oe[ke].name]=Oe[ke].fn;else Oe&&(Te[Oe.name]=Oe.key?(...ke)=>{const Be=Oe.fn(...ke);return Be&&(Be.key=Oe.key),Be}:Oe.fn)}return Te}function renderSlot(Te,e,t={},Oe,ke){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(t.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",t,Oe&&Oe())],64);let Be=Te[e];Be&&Be._c&&(Be._d=!1),openBlock();const Ue=Be&&ensureValidVNode(Be(t)),He=t.key||Ue&&Ue.key,We=createBlock(Fragment,{key:(He&&!isSymbol(He)?He:`_${e}`)+(!Ue&&Oe?"_fb":"")},Ue||(Oe?Oe():[]),Ue&&Te._===1?64:-2);return!ke&&We.scopeId&&(We.slotScopeIds=[We.scopeId+"-s"]),Be&&Be._c&&(Be._d=!0),We}function ensureValidVNode(Te){return Te.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?Te:null}function toHandlers(Te,e){const t={};for(const Oe in Te)t[e&&/[A-Z]/.test(Oe)?`on:${Oe}`:toHandlerKey(Oe)]=Te[Oe];return t}const getPublicInstance=Te=>Te?isStatefulComponent(Te)?getComponentPublicInstance(Te):getPublicInstance(Te.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:Te=>Te,$el:Te=>Te.vnode.el,$data:Te=>Te.data,$props:Te=>Te.props,$attrs:Te=>Te.attrs,$slots:Te=>Te.slots,$refs:Te=>Te.refs,$parent:Te=>getPublicInstance(Te.parent),$root:Te=>getPublicInstance(Te.root),$host:Te=>Te.ce,$emit:Te=>Te.emit,$options:Te=>resolveMergedOptions(Te),$forceUpdate:Te=>Te.f||(Te.f=()=>{queueJob(Te.update)}),$nextTick:Te=>Te.n||(Te.n=nextTick.bind(Te.proxy)),$watch:Te=>instanceWatch.bind(Te)}),hasSetupBinding=(Te,e)=>Te!==EMPTY_OBJ&&!Te.__isScriptSetup&&hasOwn(Te,e),PublicInstanceProxyHandlers={get({_:Te},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:Oe,data:ke,props:Be,accessCache:Ue,type:He,appContext:We}=Te;let Cn;if(e[0]!=="$"){const Tn=Ue[e];if(Tn!==void 0)switch(Tn){case 1:return Oe[e];case 2:return ke[e];case 4:return t[e];case 3:return Be[e]}else{if(hasSetupBinding(Oe,e))return Ue[e]=1,Oe[e];if(ke!==EMPTY_OBJ&&hasOwn(ke,e))return Ue[e]=2,ke[e];if((Cn=Te.propsOptions[0])&&hasOwn(Cn,e))return Ue[e]=3,Be[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return Ue[e]=4,t[e];shouldCacheAccess&&(Ue[e]=0)}}const An=publicPropertiesMap[e];let En,Sn;if(An)return e==="$attrs"&&track(Te.attrs,"get",""),An(Te);if((En=He.__cssModules)&&(En=En[e]))return En;if(t!==EMPTY_OBJ&&hasOwn(t,e))return Ue[e]=4,t[e];if(Sn=We.config.globalProperties,hasOwn(Sn,e))return Sn[e]},set({_:Te},e,t){const{data:Oe,setupState:ke,ctx:Be}=Te;return hasSetupBinding(ke,e)?(ke[e]=t,!0):Oe!==EMPTY_OBJ&&hasOwn(Oe,e)?(Oe[e]=t,!0):hasOwn(Te.props,e)||e[0]==="$"&&e.slice(1)in Te?!1:(Be[e]=t,!0)},has({_:{data:Te,setupState:e,accessCache:t,ctx:Oe,appContext:ke,propsOptions:Be}},Ue){let He;return!!t[Ue]||Te!==EMPTY_OBJ&&hasOwn(Te,Ue)||hasSetupBinding(e,Ue)||(He=Be[0])&&hasOwn(He,Ue)||hasOwn(Oe,Ue)||hasOwn(publicPropertiesMap,Ue)||hasOwn(ke.config.globalProperties,Ue)},defineProperty(Te,e,t){return t.get!=null?Te._.accessCache[e]=0:hasOwn(t,"value")&&this.set(Te,e,t.value,null),Reflect.defineProperty(Te,e,t)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(Te,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(Te,e,Te)},has(Te,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(Te){}function defineOptions(Te){}function defineSlots(){return null}function defineModel(){}function withDefaults(Te,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const Te=getCurrentInstance();return Te.setupContext||(Te.setupContext=createSetupContext(Te))}function normalizePropsOrEmits(Te){return isArray$1(Te)?Te.reduce((e,t)=>(e[t]=null,e),{}):Te}function mergeDefaults(Te,e){const t=normalizePropsOrEmits(Te);for(const Oe in e){if(Oe.startsWith("__skip"))continue;let ke=t[Oe];ke?isArray$1(ke)||isFunction$1(ke)?ke=t[Oe]={type:ke,default:e[Oe]}:ke.default=e[Oe]:ke===null&&(ke=t[Oe]={default:e[Oe]}),ke&&e[`__skip_${Oe}`]&&(ke.skipFactory=!0)}return t}function mergeModels(Te,e){return!Te||!e?Te||e:isArray$1(Te)&&isArray$1(e)?Te.concat(e):extend$5({},normalizePropsOrEmits(Te),normalizePropsOrEmits(e))}function createPropsRestProxy(Te,e){const t={};for(const Oe in Te)e.includes(Oe)||Object.defineProperty(t,Oe,{enumerable:!0,get:()=>Te[Oe]});return t}function withAsyncContext(Te){const e=getCurrentInstance();let t=Te();return unsetCurrentInstance(),isPromise(t)&&(t=t.catch(Oe=>{throw setCurrentInstance(e),Oe})),[t,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(Te){const e=resolveMergedOptions(Te),t=Te.proxy,Oe=Te.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,Te,"bc");const{data:ke,computed:Be,methods:Ue,watch:He,provide:We,inject:Cn,created:An,beforeMount:En,mounted:Sn,beforeUpdate:Tn,updated:Ln,activated:Bn,deactivated:ti,beforeDestroy:ni,beforeUnmount:ii,destroyed:si,unmounted:oi,render:ci,renderTracked:vi,renderTriggered:pi,errorCaptured:fi,serverPrefetch:Mi,expose:Oi,inheritAttrs:ui,components:li,directives:Ri,filters:Pi}=e;if(Cn&&resolveInjections(Cn,Oe,null),Ue)for(const nr in Ue){const ar=Ue[nr];isFunction$1(ar)&&(Oe[nr]=ar.bind(t))}if(ke){const nr=ke.call(t,t);isObject$1(nr)&&(Te.data=reactive(nr))}if(shouldCacheAccess=!0,Be)for(const nr in Be){const ar=Be[nr],cr=isFunction$1(ar)?ar.bind(t,t):isFunction$1(ar.get)?ar.get.bind(t,t):NOOP,sr=!isFunction$1(ar)&&isFunction$1(ar.set)?ar.set.bind(t):NOOP,br=computed({get:cr,set:sr});Object.defineProperty(Oe,nr,{enumerable:!0,configurable:!0,get:()=>br.value,set:Ni=>br.value=Ni})}if(He)for(const nr in He)createWatcher(He[nr],Oe,t,nr);if(We){const nr=isFunction$1(We)?We.call(t):We;Reflect.ownKeys(nr).forEach(ar=>{provide(ar,nr[ar])})}An&&callHook$1(An,Te,"c");function Hi(nr,ar){isArray$1(ar)?ar.forEach(cr=>nr(cr.bind(t))):ar&&nr(ar.bind(t))}if(Hi(onBeforeMount,En),Hi(onMounted,Sn),Hi(onBeforeUpdate,Tn),Hi(onUpdated,Ln),Hi(onActivated,Bn),Hi(onDeactivated,ti),Hi(onErrorCaptured,fi),Hi(onRenderTracked,vi),Hi(onRenderTriggered,pi),Hi(onBeforeUnmount,ii),Hi(onUnmounted,oi),Hi(onServerPrefetch,Mi),isArray$1(Oi))if(Oi.length){const nr=Te.exposed||(Te.exposed={});Oi.forEach(ar=>{Object.defineProperty(nr,ar,{get:()=>t[ar],set:cr=>t[ar]=cr})})}else Te.exposed||(Te.exposed={});ci&&Te.render===NOOP&&(Te.render=ci),ui!=null&&(Te.inheritAttrs=ui),li&&(Te.components=li),Ri&&(Te.directives=Ri),Mi&&markAsyncBoundary(Te)}function resolveInjections(Te,e,t=NOOP){isArray$1(Te)&&(Te=normalizeInject(Te));for(const Oe in Te){const ke=Te[Oe];let Be;isObject$1(ke)?"default"in ke?Be=inject(ke.from||Oe,ke.default,!0):Be=inject(ke.from||Oe):Be=inject(ke),isRef(Be)?Object.defineProperty(e,Oe,{enumerable:!0,configurable:!0,get:()=>Be.value,set:Ue=>Be.value=Ue}):e[Oe]=Be}}function callHook$1(Te,e,t){callWithAsyncErrorHandling(isArray$1(Te)?Te.map(Oe=>Oe.bind(e.proxy)):Te.bind(e.proxy),e,t)}function createWatcher(Te,e,t,Oe){let ke=Oe.includes(".")?createPathGetter(t,Oe):()=>t[Oe];if(isString(Te)){const Be=e[Te];isFunction$1(Be)&&watch(ke,Be)}else if(isFunction$1(Te))watch(ke,Te.bind(t));else if(isObject$1(Te))if(isArray$1(Te))Te.forEach(Be=>createWatcher(Be,e,t,Oe));else{const Be=isFunction$1(Te.handler)?Te.handler.bind(t):e[Te.handler];isFunction$1(Be)&&watch(ke,Be,Te)}}function resolveMergedOptions(Te){const e=Te.type,{mixins:t,extends:Oe}=e,{mixins:ke,optionsCache:Be,config:{optionMergeStrategies:Ue}}=Te.appContext,He=Be.get(e);let We;return He?We=He:!ke.length&&!t&&!Oe?We=e:(We={},ke.length&&ke.forEach(Cn=>mergeOptions$1(We,Cn,Ue,!0)),mergeOptions$1(We,e,Ue)),isObject$1(e)&&Be.set(e,We),We}function mergeOptions$1(Te,e,t,Oe=!1){const{mixins:ke,extends:Be}=e;Be&&mergeOptions$1(Te,Be,t,!0),ke&&ke.forEach(Ue=>mergeOptions$1(Te,Ue,t,!0));for(const Ue in e)if(!(Oe&&Ue==="expose")){const He=internalOptionMergeStrats[Ue]||t&&t[Ue];Te[Ue]=He?He(Te[Ue],e[Ue]):e[Ue]}return Te}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Te,e){return e?Te?function(){return extend$5(isFunction$1(Te)?Te.call(this,this):Te,isFunction$1(e)?e.call(this,this):e)}:e:Te}function mergeInject(Te,e){return mergeObjectOptions(normalizeInject(Te),normalizeInject(e))}function normalizeInject(Te){if(isArray$1(Te)){const e={};for(let t=0;t<Te.length;t++)e[Te[t]]=Te[t];return e}return Te}function mergeAsArray(Te,e){return Te?[...new Set([].concat(Te,e))]:e}function mergeObjectOptions(Te,e){return Te?extend$5(Object.create(null),Te,e):e}function mergeEmitsOrPropsOptions(Te,e){return Te?isArray$1(Te)&&isArray$1(e)?[...new Set([...Te,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(Te),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(Te,e){if(!Te)return e;if(!e)return Te;const t=extend$5(Object.create(null),Te);for(const Oe in e)t[Oe]=mergeAsArray(Te[Oe],e[Oe]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Te,e){return function(Oe,ke=null){isFunction$1(Oe)||(Oe=extend$5({},Oe)),ke!=null&&!isObject$1(ke)&&(ke=null);const Be=createAppContext(),Ue=new WeakSet,He=[];let We=!1;const Cn=Be.app={_uid:uid$1++,_component:Oe,_props:ke,_container:null,_context:Be,_instance:null,version:version$3,get config(){return Be.config},set config(An){},use(An,...En){return Ue.has(An)||(An&&isFunction$1(An.install)?(Ue.add(An),An.install(Cn,...En)):isFunction$1(An)&&(Ue.add(An),An(Cn,...En))),Cn},mixin(An){return Be.mixins.includes(An)||Be.mixins.push(An),Cn},component(An,En){return En?(Be.components[An]=En,Cn):Be.components[An]},directive(An,En){return En?(Be.directives[An]=En,Cn):Be.directives[An]},mount(An,En,Sn){if(!We){const Tn=Cn._ceVNode||createVNode(Oe,ke);return Tn.appContext=Be,Sn===!0?Sn="svg":Sn===!1&&(Sn=void 0),En&&e?e(Tn,An):Te(Tn,An,Sn),We=!0,Cn._container=An,An.__vue_app__=Cn,getComponentPublicInstance(Tn.component)}},onUnmount(An){He.push(An)},unmount(){We&&(callWithAsyncErrorHandling(He,Cn._instance,16),Te(null,Cn._container),delete Cn._container.__vue_app__)},provide(An,En){return Be.provides[An]=En,Cn},runWithContext(An){const En=currentApp;currentApp=Cn;try{return An()}finally{currentApp=En}}};return Cn}}let currentApp=null;function provide(Te,e){if(currentInstance){let t=currentInstance.provides;const Oe=currentInstance.parent&&currentInstance.parent.provides;Oe===t&&(t=currentInstance.provides=Object.create(Oe)),t[Te]=e}}function inject(Te,e,t=!1){const Oe=currentInstance||currentRenderingInstance;if(Oe||currentApp){const ke=currentApp?currentApp._context.provides:Oe?Oe.parent==null?Oe.vnode.appContext&&Oe.vnode.appContext.provides:Oe.parent.provides:void 0;if(ke&&Te in ke)return ke[Te];if(arguments.length>1)return t&&isFunction$1(e)?e.call(Oe&&Oe.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=Te=>Object.getPrototypeOf(Te)===internalObjectProto;function initProps(Te,e,t,Oe=!1){const ke={},Be=createInternalObject();Te.propsDefaults=Object.create(null),setFullProps(Te,e,ke,Be);for(const Ue in Te.propsOptions[0])Ue in ke||(ke[Ue]=void 0);t?Te.props=Oe?ke:shallowReactive(ke):Te.type.props?Te.props=ke:Te.props=Be,Te.attrs=Be}function updateProps(Te,e,t,Oe){const{props:ke,attrs:Be,vnode:{patchFlag:Ue}}=Te,He=toRaw(ke),[We]=Te.propsOptions;let Cn=!1;if((Oe||Ue>0)&&!(Ue&16)){if(Ue&8){const An=Te.vnode.dynamicProps;for(let En=0;En<An.length;En++){let Sn=An[En];if(isEmitListener(Te.emitsOptions,Sn))continue;const Tn=e[Sn];if(We)if(hasOwn(Be,Sn))Tn!==Be[Sn]&&(Be[Sn]=Tn,Cn=!0);else{const Ln=camelize(Sn);ke[Ln]=resolvePropValue(We,He,Ln,Tn,Te,!1)}else Tn!==Be[Sn]&&(Be[Sn]=Tn,Cn=!0)}}}else{setFullProps(Te,e,ke,Be)&&(Cn=!0);let An;for(const En in He)(!e||!hasOwn(e,En)&&((An=hyphenate(En))===En||!hasOwn(e,An)))&&(We?t&&(t[En]!==void 0||t[An]!==void 0)&&(ke[En]=resolvePropValue(We,He,En,void 0,Te,!0)):delete ke[En]);if(Be!==He)for(const En in Be)(!e||!hasOwn(e,En))&&(delete Be[En],Cn=!0)}Cn&&trigger(Te.attrs,"set","")}function setFullProps(Te,e,t,Oe){const[ke,Be]=Te.propsOptions;let Ue=!1,He;if(e)for(let We in e){if(isReservedProp(We))continue;const Cn=e[We];let An;ke&&hasOwn(ke,An=camelize(We))?!Be||!Be.includes(An)?t[An]=Cn:(He||(He={}))[An]=Cn:isEmitListener(Te.emitsOptions,We)||(!(We in Oe)||Cn!==Oe[We])&&(Oe[We]=Cn,Ue=!0)}if(Be){const We=toRaw(t),Cn=He||EMPTY_OBJ;for(let An=0;An<Be.length;An++){const En=Be[An];t[En]=resolvePropValue(ke,We,En,Cn[En],Te,!hasOwn(Cn,En))}}return Ue}function resolvePropValue(Te,e,t,Oe,ke,Be){const Ue=Te[t];if(Ue!=null){const He=hasOwn(Ue,"default");if(He&&Oe===void 0){const We=Ue.default;if(Ue.type!==Function&&!Ue.skipFactory&&isFunction$1(We)){const{propsDefaults:Cn}=ke;if(t in Cn)Oe=Cn[t];else{const An=setCurrentInstance(ke);Oe=Cn[t]=We.call(null,e),An()}}else Oe=We;ke.ce&&ke.ce._setProp(t,Oe)}Ue[0]&&(Be&&!He?Oe=!1:Ue[1]&&(Oe===""||Oe===hyphenate(t))&&(Oe=!0))}return Oe}const mixinPropsCache=new WeakMap;function normalizePropsOptions(Te,e,t=!1){const Oe=t?mixinPropsCache:e.propsCache,ke=Oe.get(Te);if(ke)return ke;const Be=Te.props,Ue={},He=[];let We=!1;if(!isFunction$1(Te)){const An=En=>{We=!0;const[Sn,Tn]=normalizePropsOptions(En,e,!0);extend$5(Ue,Sn),Tn&&He.push(...Tn)};!t&&e.mixins.length&&e.mixins.forEach(An),Te.extends&&An(Te.extends),Te.mixins&&Te.mixins.forEach(An)}if(!Be&&!We)return isObject$1(Te)&&Oe.set(Te,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Be))for(let An=0;An<Be.length;An++){const En=camelize(Be[An]);validatePropName(En)&&(Ue[En]=EMPTY_OBJ)}else if(Be)for(const An in Be){const En=camelize(An);if(validatePropName(En)){const Sn=Be[An],Tn=Ue[En]=isArray$1(Sn)||isFunction$1(Sn)?{type:Sn}:extend$5({},Sn),Ln=Tn.type;let Bn=!1,ti=!0;if(isArray$1(Ln))for(let ni=0;ni<Ln.length;++ni){const ii=Ln[ni],si=isFunction$1(ii)&&ii.name;if(si==="Boolean"){Bn=!0;break}else si==="String"&&(ti=!1)}else Bn=isFunction$1(Ln)&&Ln.name==="Boolean";Tn[0]=Bn,Tn[1]=ti,(Bn||hasOwn(Tn,"default"))&&He.push(En)}}const Cn=[Ue,He];return isObject$1(Te)&&Oe.set(Te,Cn),Cn}function validatePropName(Te){return Te[0]!=="$"&&!isReservedProp(Te)}const isInternalKey=Te=>Te[0]==="_"||Te==="$stable",normalizeSlotValue=Te=>isArray$1(Te)?Te.map(normalizeVNode):[normalizeVNode(Te)],normalizeSlot$1=(Te,e,t)=>{if(e._n)return e;const Oe=withCtx((...ke)=>normalizeSlotValue(e(...ke)),t);return Oe._c=!1,Oe},normalizeObjectSlots=(Te,e,t)=>{const Oe=Te._ctx;for(const ke in Te){if(isInternalKey(ke))continue;const Be=Te[ke];if(isFunction$1(Be))e[ke]=normalizeSlot$1(ke,Be,Oe);else if(Be!=null){const Ue=normalizeSlotValue(Be);e[ke]=()=>Ue}}},normalizeVNodeSlots=(Te,e)=>{const t=normalizeSlotValue(e);Te.slots.default=()=>t},assignSlots=(Te,e,t)=>{for(const Oe in e)(t||Oe!=="_")&&(Te[Oe]=e[Oe])},initSlots=(Te,e,t)=>{const Oe=Te.slots=createInternalObject();if(Te.vnode.shapeFlag&32){const ke=e._;ke?(assignSlots(Oe,e,t),t&&def(Oe,"_",ke,!0)):normalizeObjectSlots(e,Oe)}else e&&normalizeVNodeSlots(Te,e)},updateSlots=(Te,e,t)=>{const{vnode:Oe,slots:ke}=Te;let Be=!0,Ue=EMPTY_OBJ;if(Oe.shapeFlag&32){const He=e._;He?t&&He===1?Be=!1:assignSlots(ke,e,t):(Be=!e.$stable,normalizeObjectSlots(e,ke)),Ue=e}else e&&(normalizeVNodeSlots(Te,e),Ue={default:1});if(Be)for(const He in ke)!isInternalKey(He)&&Ue[He]==null&&delete ke[He]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Te){return baseCreateRenderer(Te)}function createHydrationRenderer(Te){return baseCreateRenderer(Te,createHydrationFunctions)}function baseCreateRenderer(Te,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:Oe,remove:ke,patchProp:Be,createElement:Ue,createText:He,createComment:We,setText:Cn,setElementText:An,parentNode:En,nextSibling:Sn,setScopeId:Tn=NOOP,insertStaticContent:Ln}=Te,Bn=(tr,pr,ur,Ki=null,Nr=null,Or=null,Ir=void 0,Mr=null,Tr=!!pr.dynamicChildren)=>{if(tr===pr)return;tr&&!isSameVNodeType(tr,pr)&&(Ki=hr(tr),Ni(tr,Nr,Or,!0),tr=null),pr.patchFlag===-2&&(Tr=!1,pr.dynamicChildren=null);const{type:wr,ref:Cr,shapeFlag:Er}=pr;switch(wr){case Text$1:ti(tr,pr,ur,Ki);break;case Comment:ni(tr,pr,ur,Ki);break;case Static:tr==null&&ii(pr,ur,Ki,Ir);break;case Fragment:li(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr);break;default:Er&1?ci(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr):Er&6?Ri(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr):(Er&64||Er&128)&&wr.process(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr,Ar)}Cr!=null&&Nr&&setRef(Cr,tr&&tr.ref,Or,pr||tr,!pr)},ti=(tr,pr,ur,Ki)=>{if(tr==null)Oe(pr.el=He(pr.children),ur,Ki);else{const Nr=pr.el=tr.el;pr.children!==tr.children&&Cn(Nr,pr.children)}},ni=(tr,pr,ur,Ki)=>{tr==null?Oe(pr.el=We(pr.children||""),ur,Ki):pr.el=tr.el},ii=(tr,pr,ur,Ki)=>{[tr.el,tr.anchor]=Ln(tr.children,pr,ur,Ki,tr.el,tr.anchor)},si=({el:tr,anchor:pr},ur,Ki)=>{let Nr;for(;tr&&tr!==pr;)Nr=Sn(tr),Oe(tr,ur,Ki),tr=Nr;Oe(pr,ur,Ki)},oi=({el:tr,anchor:pr})=>{let ur;for(;tr&&tr!==pr;)ur=Sn(tr),ke(tr),tr=ur;ke(pr)},ci=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr)=>{pr.type==="svg"?Ir="svg":pr.type==="math"&&(Ir="mathml"),tr==null?vi(pr,ur,Ki,Nr,Or,Ir,Mr,Tr):Mi(tr,pr,Nr,Or,Ir,Mr,Tr)},vi=(tr,pr,ur,Ki,Nr,Or,Ir,Mr)=>{let Tr,wr;const{props:Cr,shapeFlag:Er,transition:Sr,dirs:Gr}=tr;if(Tr=tr.el=Ue(tr.type,Or,Cr&&Cr.is,Cr),Er&8?An(Tr,tr.children):Er&16&&fi(tr.children,Tr,null,Ki,Nr,resolveChildrenNamespace(tr,Or),Ir,Mr),Gr&&invokeDirectiveHook(tr,null,Ki,"created"),pi(Tr,tr,tr.scopeId,Ir,Ki),Cr){for(const $r in Cr)$r!=="value"&&!isReservedProp($r)&&Be(Tr,$r,null,Cr[$r],Or,Ki);"value"in Cr&&Be(Tr,"value",null,Cr.value,Or),(wr=Cr.onVnodeBeforeMount)&&invokeVNodeHook(wr,Ki,tr)}Gr&&invokeDirectiveHook(tr,null,Ki,"beforeMount");const zr=needTransition(Nr,Sr);zr&&Sr.beforeEnter(Tr),Oe(Tr,pr,ur),((wr=Cr&&Cr.onVnodeMounted)||zr||Gr)&&queuePostRenderEffect(()=>{wr&&invokeVNodeHook(wr,Ki,tr),zr&&Sr.enter(Tr),Gr&&invokeDirectiveHook(tr,null,Ki,"mounted")},Nr)},pi=(tr,pr,ur,Ki,Nr)=>{if(ur&&Tn(tr,ur),Ki)for(let Or=0;Or<Ki.length;Or++)Tn(tr,Ki[Or]);if(Nr){let Or=Nr.subTree;if(pr===Or||isSuspense(Or.type)&&(Or.ssContent===pr||Or.ssFallback===pr)){const Ir=Nr.vnode;pi(tr,Ir,Ir.scopeId,Ir.slotScopeIds,Nr.parent)}}},fi=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr=0)=>{for(let wr=Tr;wr<tr.length;wr++){const Cr=tr[wr]=Mr?cloneIfMounted(tr[wr]):normalizeVNode(tr[wr]);Bn(null,Cr,pr,ur,Ki,Nr,Or,Ir,Mr)}},Mi=(tr,pr,ur,Ki,Nr,Or,Ir)=>{const Mr=pr.el=tr.el;let{patchFlag:Tr,dynamicChildren:wr,dirs:Cr}=pr;Tr|=tr.patchFlag&16;const Er=tr.props||EMPTY_OBJ,Sr=pr.props||EMPTY_OBJ;let Gr;if(ur&&toggleRecurse(ur,!1),(Gr=Sr.onVnodeBeforeUpdate)&&invokeVNodeHook(Gr,ur,pr,tr),Cr&&invokeDirectiveHook(pr,tr,ur,"beforeUpdate"),ur&&toggleRecurse(ur,!0),(Er.innerHTML&&Sr.innerHTML==null||Er.textContent&&Sr.textContent==null)&&An(Mr,""),wr?Oi(tr.dynamicChildren,wr,Mr,ur,Ki,resolveChildrenNamespace(pr,Nr),Or):Ir||ar(tr,pr,Mr,null,ur,Ki,resolveChildrenNamespace(pr,Nr),Or,!1),Tr>0){if(Tr&16)ui(Mr,Er,Sr,ur,Nr);else if(Tr&2&&Er.class!==Sr.class&&Be(Mr,"class",null,Sr.class,Nr),Tr&4&&Be(Mr,"style",Er.style,Sr.style,Nr),Tr&8){const zr=pr.dynamicProps;for(let $r=0;$r<zr.length;$r++){const Hr=zr[$r],as=Er[Hr],Kr=Sr[Hr];(Kr!==as||Hr==="value")&&Be(Mr,Hr,as,Kr,Nr,ur)}}Tr&1&&tr.children!==pr.children&&An(Mr,pr.children)}else!Ir&&wr==null&&ui(Mr,Er,Sr,ur,Nr);((Gr=Sr.onVnodeUpdated)||Cr)&&queuePostRenderEffect(()=>{Gr&&invokeVNodeHook(Gr,ur,pr,tr),Cr&&invokeDirectiveHook(pr,tr,ur,"updated")},Ki)},Oi=(tr,pr,ur,Ki,Nr,Or,Ir)=>{for(let Mr=0;Mr<pr.length;Mr++){const Tr=tr[Mr],wr=pr[Mr],Cr=Tr.el&&(Tr.type===Fragment||!isSameVNodeType(Tr,wr)||Tr.shapeFlag&70)?En(Tr.el):ur;Bn(Tr,wr,Cr,null,Ki,Nr,Or,Ir,!0)}},ui=(tr,pr,ur,Ki,Nr)=>{if(pr!==ur){if(pr!==EMPTY_OBJ)for(const Or in pr)!isReservedProp(Or)&&!(Or in ur)&&Be(tr,Or,pr[Or],null,Nr,Ki);for(const Or in ur){if(isReservedProp(Or))continue;const Ir=ur[Or],Mr=pr[Or];Ir!==Mr&&Or!=="value"&&Be(tr,Or,Mr,Ir,Nr,Ki)}"value"in ur&&Be(tr,"value",pr.value,ur.value,Nr)}},li=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr)=>{const wr=pr.el=tr?tr.el:He(""),Cr=pr.anchor=tr?tr.anchor:He("");let{patchFlag:Er,dynamicChildren:Sr,slotScopeIds:Gr}=pr;Gr&&(Mr=Mr?Mr.concat(Gr):Gr),tr==null?(Oe(wr,ur,Ki),Oe(Cr,ur,Ki),fi(pr.children||[],ur,Cr,Nr,Or,Ir,Mr,Tr)):Er>0&&Er&64&&Sr&&tr.dynamicChildren?(Oi(tr.dynamicChildren,Sr,ur,Nr,Or,Ir,Mr),(pr.key!=null||Nr&&pr===Nr.subTree)&&traverseStaticChildren(tr,pr,!0)):ar(tr,pr,ur,Cr,Nr,Or,Ir,Mr,Tr)},Ri=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr)=>{pr.slotScopeIds=Mr,tr==null?pr.shapeFlag&512?Nr.ctx.activate(pr,ur,Ki,Ir,Tr):Pi(pr,ur,Ki,Nr,Or,Ir,Tr):Fi(tr,pr,Tr)},Pi=(tr,pr,ur,Ki,Nr,Or,Ir)=>{const Mr=tr.component=createComponentInstance(tr,Ki,Nr);if(isKeepAlive(tr)&&(Mr.ctx.renderer=Ar),setupComponent(Mr,!1,Ir),Mr.asyncDep){if(Nr&&Nr.registerDep(Mr,Hi,Ir),!tr.el){const Tr=Mr.subTree=createVNode(Comment);ni(null,Tr,pr,ur)}}else Hi(Mr,tr,pr,ur,Nr,Or,Ir)},Fi=(tr,pr,ur)=>{const Ki=pr.component=tr.component;if(shouldUpdateComponent(tr,pr,ur))if(Ki.asyncDep&&!Ki.asyncResolved){nr(Ki,pr,ur);return}else Ki.next=pr,Ki.update();else pr.el=tr.el,Ki.vnode=pr},Hi=(tr,pr,ur,Ki,Nr,Or,Ir)=>{const Mr=()=>{if(tr.isMounted){let{next:Er,bu:Sr,u:Gr,parent:zr,vnode:$r}=tr;{const ms=locateNonHydratedAsyncRoot(tr);if(ms){Er&&(Er.el=$r.el,nr(tr,Er,Ir)),ms.asyncDep.then(()=>{tr.isUnmounted||Mr()});return}}let Hr=Er,as;toggleRecurse(tr,!1),Er?(Er.el=$r.el,nr(tr,Er,Ir)):Er=$r,Sr&&invokeArrayFns(Sr),(as=Er.props&&Er.props.onVnodeBeforeUpdate)&&invokeVNodeHook(as,zr,Er,$r),toggleRecurse(tr,!0);const Kr=renderComponentRoot(tr),Ss=tr.subTree;tr.subTree=Kr,Bn(Ss,Kr,En(Ss.el),hr(Ss),tr,Nr,Or),Er.el=Kr.el,Hr===null&&updateHOCHostEl(tr,Kr.el),Gr&&queuePostRenderEffect(Gr,Nr),(as=Er.props&&Er.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(as,zr,Er,$r),Nr)}else{let Er;const{el:Sr,props:Gr}=pr,{bm:zr,m:$r,parent:Hr,root:as,type:Kr}=tr,Ss=isAsyncWrapper(pr);if(toggleRecurse(tr,!1),zr&&invokeArrayFns(zr),!Ss&&(Er=Gr&&Gr.onVnodeBeforeMount)&&invokeVNodeHook(Er,Hr,pr),toggleRecurse(tr,!0),Sr&&Wr){const ms=()=>{tr.subTree=renderComponentRoot(tr),Wr(Sr,tr.subTree,tr,Nr,null)};Ss&&Kr.__asyncHydrate?Kr.__asyncHydrate(Sr,tr,ms):ms()}else{as.ce&&as.ce._injectChildStyle(Kr);const ms=tr.subTree=renderComponentRoot(tr);Bn(null,ms,ur,Ki,tr,Nr,Or),pr.el=ms.el}if($r&&queuePostRenderEffect($r,Nr),!Ss&&(Er=Gr&&Gr.onVnodeMounted)){const ms=pr;queuePostRenderEffect(()=>invokeVNodeHook(Er,Hr,ms),Nr)}(pr.shapeFlag&256||Hr&&isAsyncWrapper(Hr.vnode)&&Hr.vnode.shapeFlag&256)&&tr.a&&queuePostRenderEffect(tr.a,Nr),tr.isMounted=!0,pr=ur=Ki=null}};tr.scope.on();const Tr=tr.effect=new ReactiveEffect(Mr);tr.scope.off();const wr=tr.update=Tr.run.bind(Tr),Cr=tr.job=Tr.runIfDirty.bind(Tr);Cr.i=tr,Cr.id=tr.uid,Tr.scheduler=()=>queueJob(Cr),toggleRecurse(tr,!0),wr()},nr=(tr,pr,ur)=>{pr.component=tr;const Ki=tr.vnode.props;tr.vnode=pr,tr.next=null,updateProps(tr,pr.props,Ki,ur),updateSlots(tr,pr.children,ur),pauseTracking(),flushPreFlushCbs(tr),resetTracking()},ar=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr=!1)=>{const wr=tr&&tr.children,Cr=tr?tr.shapeFlag:0,Er=pr.children,{patchFlag:Sr,shapeFlag:Gr}=pr;if(Sr>0){if(Sr&128){sr(wr,Er,ur,Ki,Nr,Or,Ir,Mr,Tr);return}else if(Sr&256){cr(wr,Er,ur,Ki,Nr,Or,Ir,Mr,Tr);return}}Gr&8?(Cr&16&&mr(wr,Nr,Or),Er!==wr&&An(ur,Er)):Cr&16?Gr&16?sr(wr,Er,ur,Ki,Nr,Or,Ir,Mr,Tr):mr(wr,Nr,Or,!0):(Cr&8&&An(ur,""),Gr&16&&fi(Er,ur,Ki,Nr,Or,Ir,Mr,Tr))},cr=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr)=>{tr=tr||EMPTY_ARR,pr=pr||EMPTY_ARR;const wr=tr.length,Cr=pr.length,Er=Math.min(wr,Cr);let Sr;for(Sr=0;Sr<Er;Sr++){const Gr=pr[Sr]=Tr?cloneIfMounted(pr[Sr]):normalizeVNode(pr[Sr]);Bn(tr[Sr],Gr,ur,null,Nr,Or,Ir,Mr,Tr)}wr>Cr?mr(tr,Nr,Or,!0,!1,Er):fi(pr,ur,Ki,Nr,Or,Ir,Mr,Tr,Er)},sr=(tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr)=>{let wr=0;const Cr=pr.length;let Er=tr.length-1,Sr=Cr-1;for(;wr<=Er&&wr<=Sr;){const Gr=tr[wr],zr=pr[wr]=Tr?cloneIfMounted(pr[wr]):normalizeVNode(pr[wr]);if(isSameVNodeType(Gr,zr))Bn(Gr,zr,ur,null,Nr,Or,Ir,Mr,Tr);else break;wr++}for(;wr<=Er&&wr<=Sr;){const Gr=tr[Er],zr=pr[Sr]=Tr?cloneIfMounted(pr[Sr]):normalizeVNode(pr[Sr]);if(isSameVNodeType(Gr,zr))Bn(Gr,zr,ur,null,Nr,Or,Ir,Mr,Tr);else break;Er--,Sr--}if(wr>Er){if(wr<=Sr){const Gr=Sr+1,zr=Gr<Cr?pr[Gr].el:Ki;for(;wr<=Sr;)Bn(null,pr[wr]=Tr?cloneIfMounted(pr[wr]):normalizeVNode(pr[wr]),ur,zr,Nr,Or,Ir,Mr,Tr),wr++}}else if(wr>Sr)for(;wr<=Er;)Ni(tr[wr],Nr,Or,!0),wr++;else{const Gr=wr,zr=wr,$r=new Map;for(wr=zr;wr<=Sr;wr++){const ps=pr[wr]=Tr?cloneIfMounted(pr[wr]):normalizeVNode(pr[wr]);ps.key!=null&&$r.set(ps.key,wr)}let Hr,as=0;const Kr=Sr-zr+1;let Ss=!1,ms=0;const Rs=new Array(Kr);for(wr=0;wr<Kr;wr++)Rs[wr]=0;for(wr=Gr;wr<=Er;wr++){const ps=tr[wr];if(as>=Kr){Ni(ps,Nr,Or,!0);continue}let Is;if(ps.key!=null)Is=$r.get(ps.key);else for(Hr=zr;Hr<=Sr;Hr++)if(Rs[Hr-zr]===0&&isSameVNodeType(ps,pr[Hr])){Is=Hr;break}Is===void 0?Ni(ps,Nr,Or,!0):(Rs[Is-zr]=wr+1,Is>=ms?ms=Is:Ss=!0,Bn(ps,pr[Is],ur,null,Nr,Or,Ir,Mr,Tr),as++)}const Ps=Ss?getSequence(Rs):EMPTY_ARR;for(Hr=Ps.length-1,wr=Kr-1;wr>=0;wr--){const ps=zr+wr,Is=pr[ps],As=ps+1<Cr?pr[ps+1].el:Ki;Rs[wr]===0?Bn(null,Is,ur,As,Nr,Or,Ir,Mr,Tr):Ss&&(Hr<0||wr!==Ps[Hr]?br(Is,ur,As,2):Hr--)}}},br=(tr,pr,ur,Ki,Nr=null)=>{const{el:Or,type:Ir,transition:Mr,children:Tr,shapeFlag:wr}=tr;if(wr&6){br(tr.component.subTree,pr,ur,Ki);return}if(wr&128){tr.suspense.move(pr,ur,Ki);return}if(wr&64){Ir.move(tr,pr,ur,Ar);return}if(Ir===Fragment){Oe(Or,pr,ur);for(let Er=0;Er<Tr.length;Er++)br(Tr[Er],pr,ur,Ki);Oe(tr.anchor,pr,ur);return}if(Ir===Static){si(tr,pr,ur);return}if(Ki!==2&&wr&1&&Mr)if(Ki===0)Mr.beforeEnter(Or),Oe(Or,pr,ur),queuePostRenderEffect(()=>Mr.enter(Or),Nr);else{const{leave:Er,delayLeave:Sr,afterLeave:Gr}=Mr,zr=()=>Oe(Or,pr,ur),$r=()=>{Er(Or,()=>{zr(),Gr&&Gr()})};Sr?Sr(Or,zr,$r):$r()}else Oe(Or,pr,ur)},Ni=(tr,pr,ur,Ki=!1,Nr=!1)=>{const{type:Or,props:Ir,ref:Mr,children:Tr,dynamicChildren:wr,shapeFlag:Cr,patchFlag:Er,dirs:Sr,cacheIndex:Gr}=tr;if(Er===-2&&(Nr=!1),Mr!=null&&setRef(Mr,null,ur,tr,!0),Gr!=null&&(pr.renderCache[Gr]=void 0),Cr&256){pr.ctx.deactivate(tr);return}const zr=Cr&1&&Sr,$r=!isAsyncWrapper(tr);let Hr;if($r&&(Hr=Ir&&Ir.onVnodeBeforeUnmount)&&invokeVNodeHook(Hr,pr,tr),Cr&6)fr(tr.component,ur,Ki);else{if(Cr&128){tr.suspense.unmount(ur,Ki);return}zr&&invokeDirectiveHook(tr,null,pr,"beforeUnmount"),Cr&64?tr.type.remove(tr,pr,ur,Ar,Ki):wr&&!wr.hasOnce&&(Or!==Fragment||Er>0&&Er&64)?mr(wr,pr,ur,!1,!0):(Or===Fragment&&Er&384||!Nr&&Cr&16)&&mr(Tr,pr,ur),Ki&&or(tr)}($r&&(Hr=Ir&&Ir.onVnodeUnmounted)||zr)&&queuePostRenderEffect(()=>{Hr&&invokeVNodeHook(Hr,pr,tr),zr&&invokeDirectiveHook(tr,null,pr,"unmounted")},ur)},or=tr=>{const{type:pr,el:ur,anchor:Ki,transition:Nr}=tr;if(pr===Fragment){er(ur,Ki);return}if(pr===Static){oi(tr);return}const Or=()=>{ke(ur),Nr&&!Nr.persisted&&Nr.afterLeave&&Nr.afterLeave()};if(tr.shapeFlag&1&&Nr&&!Nr.persisted){const{leave:Ir,delayLeave:Mr}=Nr,Tr=()=>Ir(ur,Or);Mr?Mr(tr.el,Or,Tr):Tr()}else Or()},er=(tr,pr)=>{let ur;for(;tr!==pr;)ur=Sn(tr),ke(tr),tr=ur;ke(pr)},fr=(tr,pr,ur)=>{const{bum:Ki,scope:Nr,job:Or,subTree:Ir,um:Mr,m:Tr,a:wr}=tr;invalidateMount(Tr),invalidateMount(wr),Ki&&invokeArrayFns(Ki),Nr.stop(),Or&&(Or.flags|=8,Ni(Ir,tr,pr,ur)),Mr&&queuePostRenderEffect(Mr,pr),queuePostRenderEffect(()=>{tr.isUnmounted=!0},pr),pr&&pr.pendingBranch&&!pr.isUnmounted&&tr.asyncDep&&!tr.asyncResolved&&tr.suspenseId===pr.pendingId&&(pr.deps--,pr.deps===0&&pr.resolve())},mr=(tr,pr,ur,Ki=!1,Nr=!1,Or=0)=>{for(let Ir=Or;Ir<tr.length;Ir++)Ni(tr[Ir],pr,ur,Ki,Nr)},hr=tr=>{if(tr.shapeFlag&6)return hr(tr.component.subTree);if(tr.shapeFlag&128)return tr.suspense.next();const pr=Sn(tr.anchor||tr.el),ur=pr&&pr[TeleportEndKey];return ur?Sn(ur):pr};let vr=!1;const _r=(tr,pr,ur)=>{tr==null?pr._vnode&&Ni(pr._vnode,null,null,!0):Bn(pr._vnode||null,tr,pr,null,null,null,ur),pr._vnode=tr,vr||(vr=!0,flushPreFlushCbs(),flushPostFlushCbs(),vr=!1)},Ar={p:Bn,um:Ni,m:br,r:or,mt:Pi,mc:fi,pc:ar,pbc:Oi,n:hr,o:Te};let Vr,Wr;return e&&([Vr,Wr]=e(Ar)),{render:_r,hydrate:Vr,createApp:createAppAPI(_r,Vr)}}function resolveChildrenNamespace({type:Te,props:e},t){return t==="svg"&&Te==="foreignObject"||t==="mathml"&&Te==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:Te,job:e},t){t?(Te.flags|=32,e.flags|=4):(Te.flags&=-33,e.flags&=-5)}function needTransition(Te,e){return(!Te||Te&&!Te.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(Te,e,t=!1){const Oe=Te.children,ke=e.children;if(isArray$1(Oe)&&isArray$1(ke))for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];let He=ke[Be];He.shapeFlag&1&&!He.dynamicChildren&&((He.patchFlag<=0||He.patchFlag===32)&&(He=ke[Be]=cloneIfMounted(ke[Be]),He.el=Ue.el),!t&&He.patchFlag!==-2&&traverseStaticChildren(Ue,He)),He.type===Text$1&&(He.el=Ue.el)}}function getSequence(Te){const e=Te.slice(),t=[0];let Oe,ke,Be,Ue,He;const We=Te.length;for(Oe=0;Oe<We;Oe++){const Cn=Te[Oe];if(Cn!==0){if(ke=t[t.length-1],Te[ke]<Cn){e[Oe]=ke,t.push(Oe);continue}for(Be=0,Ue=t.length-1;Be<Ue;)He=Be+Ue>>1,Te[t[He]]<Cn?Be=He+1:Ue=He;Cn<Te[t[Be]]&&(Be>0&&(e[Oe]=t[Be-1]),t[Be]=Oe)}}for(Be=t.length,Ue=t[Be-1];Be-- >0;)t[Be]=Ue,Ue=e[Ue];return t}function locateNonHydratedAsyncRoot(Te){const e=Te.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(Te){if(Te)for(let e=0;e<Te.length;e++)Te[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(Te,e){return doWatch(Te,null,e)}function watchPostEffect(Te,e){return doWatch(Te,null,{flush:"post"})}function watchSyncEffect(Te,e){return doWatch(Te,null,{flush:"sync"})}function watch(Te,e,t){return doWatch(Te,e,t)}function doWatch(Te,e,t=EMPTY_OBJ){const{immediate:Oe,deep:ke,flush:Be,once:Ue}=t,He=extend$5({},t),We=e&&Oe||!e&&Be!=="post";let Cn;if(isInSSRComponentSetup){if(Be==="sync"){const Tn=useSSRContext();Cn=Tn.__watcherHandles||(Tn.__watcherHandles=[])}else if(!We){const Tn=()=>{};return Tn.stop=NOOP,Tn.resume=NOOP,Tn.pause=NOOP,Tn}}const An=currentInstance;He.call=(Tn,Ln,Bn)=>callWithAsyncErrorHandling(Tn,An,Ln,Bn);let En=!1;Be==="post"?He.scheduler=Tn=>{queuePostRenderEffect(Tn,An&&An.suspense)}:Be!=="sync"&&(En=!0,He.scheduler=(Tn,Ln)=>{Ln?Tn():queueJob(Tn)}),He.augmentJob=Tn=>{e&&(Tn.flags|=4),En&&(Tn.flags|=2,An&&(Tn.id=An.uid,Tn.i=An))};const Sn=watch$1(Te,e,He);return isInSSRComponentSetup&&(Cn?Cn.push(Sn):We&&Sn()),Sn}function instanceWatch(Te,e,t){const Oe=this.proxy,ke=isString(Te)?Te.includes(".")?createPathGetter(Oe,Te):()=>Oe[Te]:Te.bind(Oe,Oe);let Be;isFunction$1(e)?Be=e:(Be=e.handler,t=e);const Ue=setCurrentInstance(this),He=doWatch(ke,Be.bind(Oe),t);return Ue(),He}function createPathGetter(Te,e){const t=e.split(".");return()=>{let Oe=Te;for(let ke=0;ke<t.length&&Oe;ke++)Oe=Oe[t[ke]];return Oe}}function useModel(Te,e,t=EMPTY_OBJ){const Oe=getCurrentInstance(),ke=camelize(e),Be=hyphenate(e),Ue=getModelModifiers(Te,ke),He=customRef((We,Cn)=>{let An,En=EMPTY_OBJ,Sn;return watchSyncEffect(()=>{const Tn=Te[ke];hasChanged(An,Tn)&&(An=Tn,Cn())}),{get(){return We(),t.get?t.get(An):An},set(Tn){const Ln=t.set?t.set(Tn):Tn;if(!hasChanged(Ln,An)&&!(En!==EMPTY_OBJ&&hasChanged(Tn,En)))return;const Bn=Oe.vnode.props;Bn&&(e in Bn||ke in Bn||Be in Bn)&&(`onUpdate:${e}`in Bn||`onUpdate:${ke}`in Bn||`onUpdate:${Be}`in Bn)||(An=Tn,Cn()),Oe.emit(`update:${e}`,Ln),hasChanged(Tn,Ln)&&hasChanged(Tn,En)&&!hasChanged(Ln,Sn)&&Cn(),En=Tn,Sn=Ln}}});return He[Symbol.iterator]=()=>{let We=0;return{next(){return We<2?{value:We++?Ue||EMPTY_OBJ:He,done:!1}:{done:!0}}}},He}const getModelModifiers=(Te,e)=>e==="modelValue"||e==="model-value"?Te.modelModifiers:Te[`${e}Modifiers`]||Te[`${camelize(e)}Modifiers`]||Te[`${hyphenate(e)}Modifiers`];function emit(Te,e,...t){if(Te.isUnmounted)return;const Oe=Te.vnode.props||EMPTY_OBJ;let ke=t;const Be=e.startsWith("update:"),Ue=Be&&getModelModifiers(Oe,e.slice(7));Ue&&(Ue.trim&&(ke=t.map(An=>isString(An)?An.trim():An)),Ue.number&&(ke=t.map(looseToNumber)));let He,We=Oe[He=toHandlerKey(e)]||Oe[He=toHandlerKey(camelize(e))];!We&&Be&&(We=Oe[He=toHandlerKey(hyphenate(e))]),We&&callWithAsyncErrorHandling(We,Te,6,ke);const Cn=Oe[He+"Once"];if(Cn){if(!Te.emitted)Te.emitted={};else if(Te.emitted[He])return;Te.emitted[He]=!0,callWithAsyncErrorHandling(Cn,Te,6,ke)}}function normalizeEmitsOptions(Te,e,t=!1){const Oe=e.emitsCache,ke=Oe.get(Te);if(ke!==void 0)return ke;const Be=Te.emits;let Ue={},He=!1;if(!isFunction$1(Te)){const We=Cn=>{const An=normalizeEmitsOptions(Cn,e,!0);An&&(He=!0,extend$5(Ue,An))};!t&&e.mixins.length&&e.mixins.forEach(We),Te.extends&&We(Te.extends),Te.mixins&&Te.mixins.forEach(We)}return!Be&&!He?(isObject$1(Te)&&Oe.set(Te,null),null):(isArray$1(Be)?Be.forEach(We=>Ue[We]=null):extend$5(Ue,Be),isObject$1(Te)&&Oe.set(Te,Ue),Ue)}function isEmitListener(Te,e){return!Te||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(Te,e[0].toLowerCase()+e.slice(1))||hasOwn(Te,hyphenate(e))||hasOwn(Te,e))}function markAttrsAccessed(){}function renderComponentRoot(Te){const{type:e,vnode:t,proxy:Oe,withProxy:ke,propsOptions:[Be],slots:Ue,attrs:He,emit:We,render:Cn,renderCache:An,props:En,data:Sn,setupState:Tn,ctx:Ln,inheritAttrs:Bn}=Te,ti=setCurrentRenderingInstance(Te);let ni,ii;try{if(t.shapeFlag&4){const oi=ke||Oe,ci=oi;ni=normalizeVNode(Cn.call(ci,oi,An,En,Tn,Sn,Ln)),ii=He}else{const oi=e;ni=normalizeVNode(oi.length>1?oi(En,{attrs:He,slots:Ue,emit:We}):oi(En,null)),ii=e.props?He:getFunctionalFallthrough(He)}}catch(oi){blockStack.length=0,handleError(oi,Te,1),ni=createVNode(Comment)}let si=ni;if(ii&&Bn!==!1){const oi=Object.keys(ii),{shapeFlag:ci}=si;oi.length&&ci&7&&(Be&&oi.some(isModelListener)&&(ii=filterModelListeners(ii,Be)),si=cloneVNode(si,ii,!1,!0))}return t.dirs&&(si=cloneVNode(si,null,!1,!0),si.dirs=si.dirs?si.dirs.concat(t.dirs):t.dirs),t.transition&&setTransitionHooks(si,t.transition),ni=si,setCurrentRenderingInstance(ti),ni}function filterSingleRoot(Te,e=!0){let t;for(let Oe=0;Oe<Te.length;Oe++){const ke=Te[Oe];if(isVNode(ke)){if(ke.type!==Comment||ke.children==="v-if"){if(t)return;t=ke}}else return}return t}const getFunctionalFallthrough=Te=>{let e;for(const t in Te)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=Te[t]);return e},filterModelListeners=(Te,e)=>{const t={};for(const Oe in Te)(!isModelListener(Oe)||!(Oe.slice(9)in e))&&(t[Oe]=Te[Oe]);return t};function shouldUpdateComponent(Te,e,t){const{props:Oe,children:ke,component:Be}=Te,{props:Ue,children:He,patchFlag:We}=e,Cn=Be.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&We>=0){if(We&1024)return!0;if(We&16)return Oe?hasPropsChanged(Oe,Ue,Cn):!!Ue;if(We&8){const An=e.dynamicProps;for(let En=0;En<An.length;En++){const Sn=An[En];if(Ue[Sn]!==Oe[Sn]&&!isEmitListener(Cn,Sn))return!0}}}else return(ke||He)&&(!He||!He.$stable)?!0:Oe===Ue?!1:Oe?Ue?hasPropsChanged(Oe,Ue,Cn):!0:!!Ue;return!1}function hasPropsChanged(Te,e,t){const Oe=Object.keys(e);if(Oe.length!==Object.keys(Te).length)return!0;for(let ke=0;ke<Oe.length;ke++){const Be=Oe[ke];if(e[Be]!==Te[Be]&&!isEmitListener(t,Be))return!0}return!1}function updateHOCHostEl({vnode:Te,parent:e},t){for(;e;){const Oe=e.subTree;if(Oe.suspense&&Oe.suspense.activeBranch===Te&&(Oe.el=Te.el),Oe===Te)(Te=e.vnode).el=t,e=e.parent;else break}}const isSuspense=Te=>Te.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Te,e,t,Oe,ke,Be,Ue,He,We,Cn){if(Te==null)mountSuspense(e,t,Oe,ke,Be,Ue,He,We,Cn);else{if(Be&&Be.deps>0&&!Te.suspense.isInFallback){e.suspense=Te.suspense,e.suspense.vnode=e,e.el=Te.el;return}patchSuspense(Te,e,t,Oe,ke,Ue,He,We,Cn)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Te,e){const t=Te.props&&Te.props[e];isFunction$1(t)&&t()}function mountSuspense(Te,e,t,Oe,ke,Be,Ue,He,We){const{p:Cn,o:{createElement:An}}=We,En=An("div"),Sn=Te.suspense=createSuspenseBoundary(Te,ke,Oe,e,En,t,Be,Ue,He,We);Cn(null,Sn.pendingBranch=Te.ssContent,En,null,Oe,Sn,Be,Ue),Sn.deps>0?(triggerEvent(Te,"onPending"),triggerEvent(Te,"onFallback"),Cn(null,Te.ssFallback,e,t,Oe,null,Be,Ue),setActiveBranch(Sn,Te.ssFallback)):Sn.resolve(!1,!0)}function patchSuspense(Te,e,t,Oe,ke,Be,Ue,He,{p:We,um:Cn,o:{createElement:An}}){const En=e.suspense=Te.suspense;En.vnode=e,e.el=Te.el;const Sn=e.ssContent,Tn=e.ssFallback,{activeBranch:Ln,pendingBranch:Bn,isInFallback:ti,isHydrating:ni}=En;if(Bn)En.pendingBranch=Sn,isSameVNodeType(Sn,Bn)?(We(Bn,Sn,En.hiddenContainer,null,ke,En,Be,Ue,He),En.deps<=0?En.resolve():ti&&(ni||(We(Ln,Tn,t,Oe,ke,null,Be,Ue,He),setActiveBranch(En,Tn)))):(En.pendingId=suspenseId++,ni?(En.isHydrating=!1,En.activeBranch=Bn):Cn(Bn,ke,En),En.deps=0,En.effects.length=0,En.hiddenContainer=An("div"),ti?(We(null,Sn,En.hiddenContainer,null,ke,En,Be,Ue,He),En.deps<=0?En.resolve():(We(Ln,Tn,t,Oe,ke,null,Be,Ue,He),setActiveBranch(En,Tn))):Ln&&isSameVNodeType(Sn,Ln)?(We(Ln,Sn,t,Oe,ke,En,Be,Ue,He),En.resolve(!0)):(We(null,Sn,En.hiddenContainer,null,ke,En,Be,Ue,He),En.deps<=0&&En.resolve()));else if(Ln&&isSameVNodeType(Sn,Ln))We(Ln,Sn,t,Oe,ke,En,Be,Ue,He),setActiveBranch(En,Sn);else if(triggerEvent(e,"onPending"),En.pendingBranch=Sn,Sn.shapeFlag&512?En.pendingId=Sn.component.suspenseId:En.pendingId=suspenseId++,We(null,Sn,En.hiddenContainer,null,ke,En,Be,Ue,He),En.deps<=0)En.resolve();else{const{timeout:ii,pendingId:si}=En;ii>0?setTimeout(()=>{En.pendingId===si&&En.fallback(Tn)},ii):ii===0&&En.fallback(Tn)}}function createSuspenseBoundary(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An=!1){const{p:En,m:Sn,um:Tn,n:Ln,o:{parentNode:Bn,remove:ti}}=Cn;let ni;const ii=isVNodeSuspensible(Te);ii&&e&&e.pendingBranch&&(ni=e.pendingId,e.deps++);const si=Te.props?toNumber(Te.props.timeout):void 0,oi=Be,ci={vnode:Te,parent:e,parentComponent:t,namespace:Ue,container:Oe,hiddenContainer:ke,deps:0,pendingId:suspenseId++,timeout:typeof si=="number"?si:-1,activeBranch:null,pendingBranch:null,isInFallback:!An,isHydrating:An,isUnmounted:!1,effects:[],resolve(vi=!1,pi=!1){const{vnode:fi,activeBranch:Mi,pendingBranch:Oi,pendingId:ui,effects:li,parentComponent:Ri,container:Pi}=ci;let Fi=!1;ci.isHydrating?ci.isHydrating=!1:vi||(Fi=Mi&&Oi.transition&&Oi.transition.mode==="out-in",Fi&&(Mi.transition.afterLeave=()=>{ui===ci.pendingId&&(Sn(Oi,Pi,Be===oi?Ln(Mi):Be,0),queuePostFlushCb(li))}),Mi&&(Bn(Mi.el)===Pi&&(Be=Ln(Mi)),Tn(Mi,Ri,ci,!0)),Fi||Sn(Oi,Pi,Be,0)),setActiveBranch(ci,Oi),ci.pendingBranch=null,ci.isInFallback=!1;let Hi=ci.parent,nr=!1;for(;Hi;){if(Hi.pendingBranch){Hi.effects.push(...li),nr=!0;break}Hi=Hi.parent}!nr&&!Fi&&queuePostFlushCb(li),ci.effects=[],ii&&e&&e.pendingBranch&&ni===e.pendingId&&(e.deps--,e.deps===0&&!pi&&e.resolve()),triggerEvent(fi,"onResolve")},fallback(vi){if(!ci.pendingBranch)return;const{vnode:pi,activeBranch:fi,parentComponent:Mi,container:Oi,namespace:ui}=ci;triggerEvent(pi,"onFallback");const li=Ln(fi),Ri=()=>{ci.isInFallback&&(En(null,vi,Oi,li,Mi,null,ui,He,We),setActiveBranch(ci,vi))},Pi=vi.transition&&vi.transition.mode==="out-in";Pi&&(fi.transition.afterLeave=Ri),ci.isInFallback=!0,Tn(fi,Mi,null,!0),Pi||Ri()},move(vi,pi,fi){ci.activeBranch&&Sn(ci.activeBranch,vi,pi,fi),ci.container=vi},next(){return ci.activeBranch&&Ln(ci.activeBranch)},registerDep(vi,pi,fi){const Mi=!!ci.pendingBranch;Mi&&ci.deps++;const Oi=vi.vnode.el;vi.asyncDep.catch(ui=>{handleError(ui,vi,0)}).then(ui=>{if(vi.isUnmounted||ci.isUnmounted||ci.pendingId!==vi.suspenseId)return;vi.asyncResolved=!0;const{vnode:li}=vi;handleSetupResult(vi,ui,!1),Oi&&(li.el=Oi);const Ri=!Oi&&vi.subTree.el;pi(vi,li,Bn(Oi||vi.subTree.el),Oi?null:Ln(vi.subTree),ci,Ue,fi),Ri&&ti(Ri),updateHOCHostEl(vi,li.el),Mi&&--ci.deps===0&&ci.resolve()})},unmount(vi,pi){ci.isUnmounted=!0,ci.activeBranch&&Tn(ci.activeBranch,t,vi,pi),ci.pendingBranch&&Tn(ci.pendingBranch,t,vi,pi)}};return ci}function hydrateSuspense(Te,e,t,Oe,ke,Be,Ue,He,We){const Cn=e.suspense=createSuspenseBoundary(e,Oe,t,Te.parentNode,document.createElement("div"),null,ke,Be,Ue,He,!0),An=We(Te,Cn.pendingBranch=e.ssContent,t,Cn,Be,Ue);return Cn.deps===0&&Cn.resolve(!1,!0),An}function normalizeSuspenseChildren(Te){const{shapeFlag:e,children:t}=Te,Oe=e&32;Te.ssContent=normalizeSuspenseSlot(Oe?t.default:t),Te.ssFallback=Oe?normalizeSuspenseSlot(t.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Te){let e;if(isFunction$1(Te)){const t=isBlockTreeEnabled&&Te._c;t&&(Te._d=!1,openBlock()),Te=Te(),t&&(Te._d=!0,e=currentBlock,closeBlock())}return isArray$1(Te)&&(Te=filterSingleRoot(Te)),Te=normalizeVNode(Te),e&&!Te.dynamicChildren&&(Te.dynamicChildren=e.filter(t=>t!==Te)),Te}function queueEffectWithSuspense(Te,e){e&&e.pendingBranch?isArray$1(Te)?e.effects.push(...Te):e.effects.push(Te):queuePostFlushCb(Te)}function setActiveBranch(Te,e){Te.activeBranch=e;const{vnode:t,parentComponent:Oe}=Te;let ke=e.el;for(;!ke&&e.component;)e=e.component.subTree,ke=e.el;t.el=ke,Oe&&Oe.subTree===t&&(Oe.vnode.el=ke,updateHOCHostEl(Oe,ke))}function isVNodeSuspensible(Te){const e=Te.props&&Te.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Te=!1){blockStack.push(currentBlock=Te?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Te,e=!1){isBlockTreeEnabled+=Te,Te<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(Te){return Te.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Te),Te}function createElementBlock(Te,e,t,Oe,ke,Be){return setupBlock(createBaseVNode(Te,e,t,Oe,ke,Be,!0))}function createBlock(Te,e,t,Oe,ke){return setupBlock(createVNode(Te,e,t,Oe,ke,!0))}function isVNode(Te){return Te?Te.__v_isVNode===!0:!1}function isSameVNodeType(Te,e){return Te.type===e.type&&Te.key===e.key}function transformVNodeArgs(Te){}const normalizeKey=({key:Te})=>Te??null,normalizeRef=({ref:Te,ref_key:e,ref_for:t})=>(typeof Te=="number"&&(Te=""+Te),Te!=null?isString(Te)||isRef(Te)||isFunction$1(Te)?{i:currentRenderingInstance,r:Te,k:e,f:!!t}:Te:null);function createBaseVNode(Te,e=null,t=null,Oe=0,ke=null,Be=Te===Fragment?0:1,Ue=!1,He=!1){const We={__v_isVNode:!0,__v_skip:!0,type:Te,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Be,patchFlag:Oe,dynamicProps:ke,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return He?(normalizeChildren(We,t),Be&128&&Te.normalize(We)):t&&(We.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!Ue&&currentBlock&&(We.patchFlag>0||Be&6)&&We.patchFlag!==32&&currentBlock.push(We),We}const createVNode=_createVNode;function _createVNode(Te,e=null,t=null,Oe=0,ke=null,Be=!1){if((!Te||Te===NULL_DYNAMIC_COMPONENT)&&(Te=Comment),isVNode(Te)){const He=cloneVNode(Te,e,!0);return t&&normalizeChildren(He,t),isBlockTreeEnabled>0&&!Be&&currentBlock&&(He.shapeFlag&6?currentBlock[currentBlock.indexOf(Te)]=He:currentBlock.push(He)),He.patchFlag=-2,He}if(isClassComponent(Te)&&(Te=Te.__vccOpts),e){e=guardReactiveProps(e);let{class:He,style:We}=e;He&&!isString(He)&&(e.class=normalizeClass(He)),isObject$1(We)&&(isProxy(We)&&!isArray$1(We)&&(We=extend$5({},We)),e.style=normalizeStyle(We))}const Ue=isString(Te)?1:isSuspense(Te)?128:isTeleport(Te)?64:isObject$1(Te)?4:isFunction$1(Te)?2:0;return createBaseVNode(Te,e,t,Oe,ke,Ue,Be,!0)}function guardReactiveProps(Te){return Te?isProxy(Te)||isInternalObject(Te)?extend$5({},Te):Te:null}function cloneVNode(Te,e,t=!1,Oe=!1){const{props:ke,ref:Be,patchFlag:Ue,children:He,transition:We}=Te,Cn=e?mergeProps(ke||{},e):ke,An={__v_isVNode:!0,__v_skip:!0,type:Te.type,props:Cn,key:Cn&&normalizeKey(Cn),ref:e&&e.ref?t&&Be?isArray$1(Be)?Be.concat(normalizeRef(e)):[Be,normalizeRef(e)]:normalizeRef(e):Be,scopeId:Te.scopeId,slotScopeIds:Te.slotScopeIds,children:He,target:Te.target,targetStart:Te.targetStart,targetAnchor:Te.targetAnchor,staticCount:Te.staticCount,shapeFlag:Te.shapeFlag,patchFlag:e&&Te.type!==Fragment?Ue===-1?16:Ue|16:Ue,dynamicProps:Te.dynamicProps,dynamicChildren:Te.dynamicChildren,appContext:Te.appContext,dirs:Te.dirs,transition:We,component:Te.component,suspense:Te.suspense,ssContent:Te.ssContent&&cloneVNode(Te.ssContent),ssFallback:Te.ssFallback&&cloneVNode(Te.ssFallback),el:Te.el,anchor:Te.anchor,ctx:Te.ctx,ce:Te.ce};return We&&Oe&&setTransitionHooks(An,We.clone(An)),An}function createTextVNode(Te=" ",e=0){return createVNode(Text$1,null,Te,e)}function createStaticVNode(Te,e){const t=createVNode(Static,null,Te);return t.staticCount=e,t}function createCommentVNode(Te="",e=!1){return e?(openBlock(),createBlock(Comment,null,Te)):createVNode(Comment,null,Te)}function normalizeVNode(Te){return Te==null||typeof Te=="boolean"?createVNode(Comment):isArray$1(Te)?createVNode(Fragment,null,Te.slice()):isVNode(Te)?cloneIfMounted(Te):createVNode(Text$1,null,String(Te))}function cloneIfMounted(Te){return Te.el===null&&Te.patchFlag!==-1||Te.memo?Te:cloneVNode(Te)}function normalizeChildren(Te,e){let t=0;const{shapeFlag:Oe}=Te;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(Oe&65){const ke=e.default;ke&&(ke._c&&(ke._d=!1),normalizeChildren(Te,ke()),ke._c&&(ke._d=!0));return}else{t=32;const ke=e._;!ke&&!isInternalObject(e)?e._ctx=currentRenderingInstance:ke===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,Te.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),Oe&64?(t=16,e=[createTextVNode(e)]):t=8);Te.children=e,Te.shapeFlag|=t}function mergeProps(...Te){const e={};for(let t=0;t<Te.length;t++){const Oe=Te[t];for(const ke in Oe)if(ke==="class")e.class!==Oe.class&&(e.class=normalizeClass([e.class,Oe.class]));else if(ke==="style")e.style=normalizeStyle([e.style,Oe.style]);else if(isOn(ke)){const Be=e[ke],Ue=Oe[ke];Ue&&Be!==Ue&&!(isArray$1(Be)&&Be.includes(Ue))&&(e[ke]=Be?[].concat(Be,Ue):Ue)}else ke!==""&&(e[ke]=Oe[ke])}return e}function invokeVNodeHook(Te,e,t,Oe=null){callWithAsyncErrorHandling(Te,e,7,[t,Oe])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Te,e,t){const Oe=Te.type,ke=(e?e.appContext:Te.appContext)||emptyAppContext,Be={uid:uid++,vnode:Te,type:Oe,parent:e,appContext:ke,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(ke.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Oe,ke),emitsOptions:normalizeEmitsOptions(Oe,ke),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Oe.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Be.ctx={_:Be},Be.root=e?e.root:Be,Be.emit=emit.bind(null,Be),Te.ce&&Te.ce(Be),Be}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const Te=getGlobalThis(),e=(t,Oe)=>{let ke;return(ke=Te[t])||(ke=Te[t]=[]),ke.push(Oe),Be=>{ke.length>1?ke.forEach(Ue=>Ue(Be)):ke[0](Be)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=Te=>{const e=currentInstance;return internalSetCurrentInstance(Te),Te.scope.on(),()=>{Te.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Te){return Te.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Te,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:Oe,children:ke}=Te.vnode,Be=isStatefulComponent(Te);initProps(Te,Oe,Be,e),initSlots(Te,ke,t);const Ue=Be?setupStatefulComponent(Te,e):void 0;return e&&setInSSRSetupState(!1),Ue}function setupStatefulComponent(Te,e){const t=Te.type;Te.accessCache=Object.create(null),Te.proxy=new Proxy(Te.ctx,PublicInstanceProxyHandlers);const{setup:Oe}=t;if(Oe){pauseTracking();const ke=Te.setupContext=Oe.length>1?createSetupContext(Te):null,Be=setCurrentInstance(Te),Ue=callWithErrorHandling(Oe,Te,0,[Te.props,ke]),He=isPromise(Ue);if(resetTracking(),Be(),(He||Te.sp)&&!isAsyncWrapper(Te)&&markAsyncBoundary(Te),He){if(Ue.then(unsetCurrentInstance,unsetCurrentInstance),e)return Ue.then(We=>{handleSetupResult(Te,We,e)}).catch(We=>{handleError(We,Te,0)});Te.asyncDep=Ue}else handleSetupResult(Te,Ue,e)}else finishComponentSetup(Te,e)}function handleSetupResult(Te,e,t){isFunction$1(e)?Te.type.__ssrInlineRender?Te.ssrRender=e:Te.render=e:isObject$1(e)&&(Te.setupState=proxyRefs(e)),finishComponentSetup(Te,t)}let compile$1,installWithProxy;function registerRuntimeCompiler(Te){compile$1=Te,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(Te,e,t){const Oe=Te.type;if(!Te.render){if(!e&&compile$1&&!Oe.render){const ke=Oe.template||resolveMergedOptions(Te).template;if(ke){const{isCustomElement:Be,compilerOptions:Ue}=Te.appContext.config,{delimiters:He,compilerOptions:We}=Oe,Cn=extend$5(extend$5({isCustomElement:Be,delimiters:He},Ue),We);Oe.render=compile$1(ke,Cn)}}Te.render=Oe.render||NOOP,installWithProxy&&installWithProxy(Te)}{const ke=setCurrentInstance(Te);pauseTracking();try{applyOptions(Te)}finally{resetTracking(),ke()}}}const attrsProxyHandlers={get(Te,e){return track(Te,"get",""),Te[e]}};function createSetupContext(Te){const e=t=>{Te.exposed=t||{}};return{attrs:new Proxy(Te.attrs,attrsProxyHandlers),slots:Te.slots,emit:Te.emit,expose:e}}function getComponentPublicInstance(Te){return Te.exposed?Te.exposeProxy||(Te.exposeProxy=new Proxy(proxyRefs(markRaw(Te.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](Te)},has(e,t){return t in e||t in publicPropertiesMap}})):Te.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=Te=>Te.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(Te,e=!0){return isFunction$1(Te)?Te.displayName||Te.name:Te.name||e&&Te.__name}function formatComponentName(Te,e,t=!1){let Oe=getComponentName(e);if(!Oe&&e.__file){const ke=e.__file.match(/([^/\\]+)\.\w+$/);ke&&(Oe=ke[1])}if(!Oe&&Te&&Te.parent){const ke=Be=>{for(const Ue in Be)if(Be[Ue]===e)return Ue};Oe=ke(Te.components||Te.parent.type.components)||ke(Te.appContext.components)}return Oe?classify(Oe):t?"App":"Anonymous"}function isClassComponent(Te){return isFunction$1(Te)&&"__vccOpts"in Te}const computed=(Te,e)=>computed$1(Te,e,isInSSRComponentSetup);function h$1(Te,e,t){const Oe=arguments.length;return Oe===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(Te,null,[e]):createVNode(Te,e):createVNode(Te,null,e):(Oe>3?t=Array.prototype.slice.call(arguments,2):Oe===3&&isVNode(t)&&(t=[t]),createVNode(Te,e,t))}function initCustomFormatter(){}function withMemo(Te,e,t,Oe){const ke=t[Oe];if(ke&&isMemoSame(ke,Te))return ke;const Be=e();return Be.memo=Te.slice(),Be.cacheIndex=Oe,t[Oe]=Be}function isMemoSame(Te,e){const t=Te.memo;if(t.length!=e.length)return!1;for(let Oe=0;Oe<t.length;Oe++)if(hasChanged(t[Oe],e[Oe]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Te),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:Te=>Te})}catch{}const unsafeToTrustedHTML=policy?Te=>policy.createHTML(Te):Te=>Te,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Te,e,t)=>{e.insertBefore(Te,t||null)},remove:Te=>{const e=Te.parentNode;e&&e.removeChild(Te)},createElement:(Te,e,t,Oe)=>{const ke=e==="svg"?doc.createElementNS(svgNS,Te):e==="mathml"?doc.createElementNS(mathmlNS,Te):t?doc.createElement(Te,{is:t}):doc.createElement(Te);return Te==="select"&&Oe&&Oe.multiple!=null&&ke.setAttribute("multiple",Oe.multiple),ke},createText:Te=>doc.createTextNode(Te),createComment:Te=>doc.createComment(Te),setText:(Te,e)=>{Te.nodeValue=e},setElementText:(Te,e)=>{Te.textContent=e},parentNode:Te=>Te.parentNode,nextSibling:Te=>Te.nextSibling,querySelector:Te=>doc.querySelector(Te),setScopeId(Te,e){Te.setAttribute(e,"")},insertStaticContent(Te,e,t,Oe,ke,Be){const Ue=t?t.previousSibling:e.lastChild;if(ke&&(ke===Be||ke.nextSibling))for(;e.insertBefore(ke.cloneNode(!0),t),!(ke===Be||!(ke=ke.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(Oe==="svg"?`<svg>${Te}</svg>`:Oe==="mathml"?`<math>${Te}</math>`:Te);const He=templateContainer.content;if(Oe==="svg"||Oe==="mathml"){const We=He.firstChild;for(;We.firstChild;)He.appendChild(We.firstChild);He.removeChild(We)}e.insertBefore(He,t)}return[Ue?Ue.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=Te=>(Te.displayName="Transition",Te.props=TransitionPropsValidators,Te),Transition=decorate$1((Te,{slots:e})=>h$1(BaseTransition,resolveTransitionProps(Te),e)),callHook=(Te,e=[])=>{isArray$1(Te)?Te.forEach(t=>t(...e)):Te&&Te(...e)},hasExplicitCallback=Te=>Te?isArray$1(Te)?Te.some(e=>e.length>1):Te.length>1:!1;function resolveTransitionProps(Te){const e={};for(const li in Te)li in DOMTransitionPropsValidators||(e[li]=Te[li]);if(Te.css===!1)return e;const{name:t="v",type:Oe,duration:ke,enterFromClass:Be=`${t}-enter-from`,enterActiveClass:Ue=`${t}-enter-active`,enterToClass:He=`${t}-enter-to`,appearFromClass:We=Be,appearActiveClass:Cn=Ue,appearToClass:An=He,leaveFromClass:En=`${t}-leave-from`,leaveActiveClass:Sn=`${t}-leave-active`,leaveToClass:Tn=`${t}-leave-to`}=Te,Ln=normalizeDuration(ke),Bn=Ln&&Ln[0],ti=Ln&&Ln[1],{onBeforeEnter:ni,onEnter:ii,onEnterCancelled:si,onLeave:oi,onLeaveCancelled:ci,onBeforeAppear:vi=ni,onAppear:pi=ii,onAppearCancelled:fi=si}=e,Mi=(li,Ri,Pi,Fi)=>{li._enterCancelled=Fi,removeTransitionClass(li,Ri?An:He),removeTransitionClass(li,Ri?Cn:Ue),Pi&&Pi()},Oi=(li,Ri)=>{li._isLeaving=!1,removeTransitionClass(li,En),removeTransitionClass(li,Tn),removeTransitionClass(li,Sn),Ri&&Ri()},ui=li=>(Ri,Pi)=>{const Fi=li?pi:ii,Hi=()=>Mi(Ri,li,Pi);callHook(Fi,[Ri,Hi]),nextFrame(()=>{removeTransitionClass(Ri,li?We:Be),addTransitionClass(Ri,li?An:He),hasExplicitCallback(Fi)||whenTransitionEnds(Ri,Oe,Bn,Hi)})};return extend$5(e,{onBeforeEnter(li){callHook(ni,[li]),addTransitionClass(li,Be),addTransitionClass(li,Ue)},onBeforeAppear(li){callHook(vi,[li]),addTransitionClass(li,We),addTransitionClass(li,Cn)},onEnter:ui(!1),onAppear:ui(!0),onLeave(li,Ri){li._isLeaving=!0;const Pi=()=>Oi(li,Ri);addTransitionClass(li,En),li._enterCancelled?(addTransitionClass(li,Sn),forceReflow()):(forceReflow(),addTransitionClass(li,Sn)),nextFrame(()=>{li._isLeaving&&(removeTransitionClass(li,En),addTransitionClass(li,Tn),hasExplicitCallback(oi)||whenTransitionEnds(li,Oe,ti,Pi))}),callHook(oi,[li,Pi])},onEnterCancelled(li){Mi(li,!1,void 0,!0),callHook(si,[li])},onAppearCancelled(li){Mi(li,!0,void 0,!0),callHook(fi,[li])},onLeaveCancelled(li){Oi(li),callHook(ci,[li])}})}function normalizeDuration(Te){if(Te==null)return null;if(isObject$1(Te))return[NumberOf(Te.enter),NumberOf(Te.leave)];{const e=NumberOf(Te);return[e,e]}}function NumberOf(Te){return toNumber(Te)}function addTransitionClass(Te,e){e.split(/\s+/).forEach(t=>t&&Te.classList.add(t)),(Te[vtcKey]||(Te[vtcKey]=new Set)).add(e)}function removeTransitionClass(Te,e){e.split(/\s+/).forEach(Oe=>Oe&&Te.classList.remove(Oe));const t=Te[vtcKey];t&&(t.delete(e),t.size||(Te[vtcKey]=void 0))}function nextFrame(Te){requestAnimationFrame(()=>{requestAnimationFrame(Te)})}let endId=0;function whenTransitionEnds(Te,e,t,Oe){const ke=Te._endId=++endId,Be=()=>{ke===Te._endId&&Oe()};if(t!=null)return setTimeout(Be,t);const{type:Ue,timeout:He,propCount:We}=getTransitionInfo(Te,e);if(!Ue)return Oe();const Cn=Ue+"end";let An=0;const En=()=>{Te.removeEventListener(Cn,Sn),Be()},Sn=Tn=>{Tn.target===Te&&++An>=We&&En()};setTimeout(()=>{An<We&&En()},He+1),Te.addEventListener(Cn,Sn)}function getTransitionInfo(Te,e){const t=window.getComputedStyle(Te),Oe=Ln=>(t[Ln]||"").split(", "),ke=Oe(`${TRANSITION}Delay`),Be=Oe(`${TRANSITION}Duration`),Ue=getTimeout(ke,Be),He=Oe(`${ANIMATION}Delay`),We=Oe(`${ANIMATION}Duration`),Cn=getTimeout(He,We);let An=null,En=0,Sn=0;e===TRANSITION?Ue>0&&(An=TRANSITION,En=Ue,Sn=Be.length):e===ANIMATION?Cn>0&&(An=ANIMATION,En=Cn,Sn=We.length):(En=Math.max(Ue,Cn),An=En>0?Ue>Cn?TRANSITION:ANIMATION:null,Sn=An?An===TRANSITION?Be.length:We.length:0);const Tn=An===TRANSITION&&/\b(transform|all)(,|$)/.test(Oe(`${TRANSITION}Property`).toString());return{type:An,timeout:En,propCount:Sn,hasTransform:Tn}}function getTimeout(Te,e){for(;Te.length<e.length;)Te=Te.concat(Te);return Math.max(...e.map((t,Oe)=>toMs(t)+toMs(Te[Oe])))}function toMs(Te){return Te==="auto"?0:Number(Te.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(Te,e,t){const Oe=Te[vtcKey];Oe&&(e=(e?[e,...Oe]:[...Oe]).join(" ")),e==null?Te.removeAttribute("class"):t?Te.setAttribute("class",e):Te.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(Te,{value:e},{transition:t}){Te[vShowOriginalDisplay]=Te.style.display==="none"?"":Te.style.display,t&&e?t.beforeEnter(Te):setDisplay(Te,e)},mounted(Te,{value:e},{transition:t}){t&&e&&t.enter(Te)},updated(Te,{value:e,oldValue:t},{transition:Oe}){!e!=!t&&(Oe?e?(Oe.beforeEnter(Te),setDisplay(Te,!0),Oe.enter(Te)):Oe.leave(Te,()=>{setDisplay(Te,!1)}):setDisplay(Te,e))},beforeUnmount(Te,{value:e}){setDisplay(Te,e)}};function setDisplay(Te,e){Te.style.display=e?Te[vShowOriginalDisplay]:"none",Te[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:Te})=>{if(!Te)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(Te){const e=getCurrentInstance();if(!e)return;const t=e.ut=(ke=Te(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Be=>setVarsOnNode(Be,ke))},Oe=()=>{const ke=Te(e.proxy);e.ce?setVarsOnNode(e.ce,ke):setVarsOnVNode(e.subTree,ke),t(ke)};onBeforeUpdate(()=>{queuePostFlushCb(Oe)}),onMounted(()=>{watch(Oe,NOOP,{flush:"post"});const ke=new MutationObserver(Oe);ke.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>ke.disconnect())})}function setVarsOnVNode(Te,e){if(Te.shapeFlag&128){const t=Te.suspense;Te=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{setVarsOnVNode(t.activeBranch,e)})}for(;Te.component;)Te=Te.component.subTree;if(Te.shapeFlag&1&&Te.el)setVarsOnNode(Te.el,e);else if(Te.type===Fragment)Te.children.forEach(t=>setVarsOnVNode(t,e));else if(Te.type===Static){let{el:t,anchor:Oe}=Te;for(;t&&(setVarsOnNode(t,e),t!==Oe);)t=t.nextSibling}}function setVarsOnNode(Te,e){if(Te.nodeType===1){const t=Te.style;let Oe="";for(const ke in e)t.setProperty(`--${ke}`,e[ke]),Oe+=`--${ke}: ${e[ke]};`;t[CSS_VAR_TEXT]=Oe}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(Te,e,t){const Oe=Te.style,ke=isString(t);let Be=!1;if(t&&!ke){if(e)if(isString(e))for(const Ue of e.split(";")){const He=Ue.slice(0,Ue.indexOf(":")).trim();t[He]==null&&setStyle(Oe,He,"")}else for(const Ue in e)t[Ue]==null&&setStyle(Oe,Ue,"");for(const Ue in t)Ue==="display"&&(Be=!0),setStyle(Oe,Ue,t[Ue])}else if(ke){if(e!==t){const Ue=Oe[CSS_VAR_TEXT];Ue&&(t+=";"+Ue),Oe.cssText=t,Be=displayRE.test(t)}}else e&&Te.removeAttribute("style");vShowOriginalDisplay in Te&&(Te[vShowOriginalDisplay]=Be?Oe.display:"",Te[vShowHidden]&&(Oe.display="none"))}const importantRE=/\s*!important$/;function setStyle(Te,e,t){if(isArray$1(t))t.forEach(Oe=>setStyle(Te,e,Oe));else if(t==null&&(t=""),e.startsWith("--"))Te.setProperty(e,t);else{const Oe=autoPrefix(Te,e);importantRE.test(t)?Te.setProperty(hyphenate(Oe),t.replace(importantRE,""),"important"):Te[Oe]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Te,e){const t=prefixCache[e];if(t)return t;let Oe=camelize(e);if(Oe!=="filter"&&Oe in Te)return prefixCache[e]=Oe;Oe=capitalize(Oe);for(let ke=0;ke<prefixes.length;ke++){const Be=prefixes[ke]+Oe;if(Be in Te)return prefixCache[e]=Be}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Te,e,t,Oe,ke,Be=isSpecialBooleanAttr(e)){Oe&&e.startsWith("xlink:")?t==null?Te.removeAttributeNS(xlinkNS,e.slice(6,e.length)):Te.setAttributeNS(xlinkNS,e,t):t==null||Be&&!includeBooleanAttr(t)?Te.removeAttribute(e):Te.setAttribute(e,Be?"":isSymbol(t)?String(t):t)}function patchDOMProp(Te,e,t,Oe,ke){if(e==="innerHTML"||e==="textContent"){t!=null&&(Te[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const Be=Te.tagName;if(e==="value"&&Be!=="PROGRESS"&&!Be.includes("-")){const He=Be==="OPTION"?Te.getAttribute("value")||"":Te.value,We=t==null?Te.type==="checkbox"?"on":"":String(t);(He!==We||!("_value"in Te))&&(Te.value=We),t==null&&Te.removeAttribute(e),Te._value=t;return}let Ue=!1;if(t===""||t==null){const He=typeof Te[e];He==="boolean"?t=includeBooleanAttr(t):t==null&&He==="string"?(t="",Ue=!0):He==="number"&&(t=0,Ue=!0)}try{Te[e]=t}catch{}Ue&&Te.removeAttribute(ke||e)}function addEventListener(Te,e,t,Oe){Te.addEventListener(e,t,Oe)}function removeEventListener(Te,e,t,Oe){Te.removeEventListener(e,t,Oe)}const veiKey=Symbol("_vei");function patchEvent(Te,e,t,Oe,ke=null){const Be=Te[veiKey]||(Te[veiKey]={}),Ue=Be[e];if(Oe&&Ue)Ue.value=Oe;else{const[He,We]=parseName(e);if(Oe){const Cn=Be[e]=createInvoker(Oe,ke);addEventListener(Te,He,Cn,We)}else Ue&&(removeEventListener(Te,He,Ue,We),Be[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Te){let e;if(optionsModifierRE.test(Te)){e={};let Oe;for(;Oe=Te.match(optionsModifierRE);)Te=Te.slice(0,Te.length-Oe[0].length),e[Oe[0].toLowerCase()]=!0}return[Te[2]===":"?Te.slice(3):hyphenate(Te.slice(2)),e]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Te,e){const t=Oe=>{if(!Oe._vts)Oe._vts=Date.now();else if(Oe._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Oe,t.value),e,5,[Oe])};return t.value=Te,t.attached=getNow(),t}function patchStopImmediatePropagation(Te,e){if(isArray$1(e)){const t=Te.stopImmediatePropagation;return Te.stopImmediatePropagation=()=>{t.call(Te),Te._stopped=!0},e.map(Oe=>ke=>!ke._stopped&&Oe&&Oe(ke))}else return e}const isNativeOn=Te=>Te.charCodeAt(0)===111&&Te.charCodeAt(1)===110&&Te.charCodeAt(2)>96&&Te.charCodeAt(2)<123,patchProp=(Te,e,t,Oe,ke,Be)=>{const Ue=ke==="svg";e==="class"?patchClass(Te,Oe,Ue):e==="style"?patchStyle(Te,t,Oe):isOn(e)?isModelListener(e)||patchEvent(Te,e,t,Oe,Be):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(Te,e,Oe,Ue))?(patchDOMProp(Te,e,Oe),!Te.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(Te,e,Oe,Ue,Be,e!=="value")):Te._isVueCE&&(/[A-Z]/.test(e)||!isString(Oe))?patchDOMProp(Te,camelize(e),Oe,Be,e):(e==="true-value"?Te._trueValue=Oe:e==="false-value"&&(Te._falseValue=Oe),patchAttr(Te,e,Oe,Ue))};function shouldSetAsProp(Te,e,t,Oe){if(Oe)return!!(e==="innerHTML"||e==="textContent"||e in Te&&isNativeOn(e)&&isFunction$1(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&Te.tagName==="INPUT"||e==="type"&&Te.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const ke=Te.tagName;if(ke==="IMG"||ke==="VIDEO"||ke==="CANVAS"||ke==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in Te}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(Te,e,t){const Oe=defineComponent(Te,e);isPlainObject$1(Oe)&&extend$5(Oe,e);class ke extends VueElement{constructor(Ue){super(Oe,Ue,t)}}return ke.def=Oe,ke}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(Te,e)=>defineCustomElement(Te,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},Oe=createApp){super(),this._def=e,this._props=t,this._createApp=Oe,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&Oe!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let Oe=0;Oe<this.attributes.length;Oe++)this._setAttr(this.attributes[Oe].name);this._ob=new MutationObserver(Oe=>{for(const ke of Oe)this._setAttr(ke.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(Oe,ke=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Be,styles:Ue}=Oe;let He;if(Be&&!isArray$1(Be))for(const We in Be){const Cn=Be[We];(Cn===Number||Cn&&Cn.type===Number)&&(We in this._props&&(this._props[We]=toNumber(this._props[We])),(He||(He=Object.create(null)))[camelize(We)]=!0)}this._numberProps=He,ke&&this._resolveProps(Oe),this.shadowRoot&&this._applyStyles(Ue),this._mount(Oe)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(Oe=>e(this._def=Oe,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const Oe in t)hasOwn(this,Oe)||Object.defineProperty(this,Oe,{get:()=>unref(t[Oe])})}_resolveProps(e){const{props:t}=e,Oe=isArray$1(t)?t:Object.keys(t||{});for(const ke of Object.keys(this))ke[0]!=="_"&&Oe.includes(ke)&&this._setProp(ke,this[ke]);for(const ke of Oe.map(camelize))Object.defineProperty(this,ke,{get(){return this._getProp(ke)},set(Be){this._setProp(ke,Be,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let Oe=t?this.getAttribute(e):REMOVAL;const ke=camelize(e);t&&this._numberProps&&this._numberProps[ke]&&(Oe=toNumber(Oe)),this._setProp(ke,Oe,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,Oe=!0,ke=!1){if(t!==this._props[e]&&(t===REMOVAL?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),ke&&this._instance&&this._update(),Oe)){const Be=this._ob;Be&&Be.disconnect(),t===!0?this.setAttribute(hyphenate(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e)),Be&&Be.observe(this,{attributes:!0})}}_update(){render$3(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=createVNode(this._def,extend$5(e,this._props));return this._instance||(t.ce=Oe=>{this._instance=Oe,Oe.ce=this,Oe.isCE=!0;const ke=(Be,Ue)=>{this.dispatchEvent(new CustomEvent(Be,isPlainObject$1(Ue[0])?extend$5({detail:Ue},Ue[0]):{detail:Ue}))};Oe.emit=(Be,...Ue)=>{ke(Be,Ue),hyphenate(Be)!==Be&&ke(hyphenate(Be),Ue)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const Oe=this._nonce;for(let ke=e.length-1;ke>=0;ke--){const Be=document.createElement("style");Oe&&Be.setAttribute("nonce",Oe),Be.textContent=e[ke],this.shadowRoot.prepend(Be)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const Oe=t.nodeType===1&&t.getAttribute("slot")||"default";(e[Oe]||(e[Oe]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let Oe=0;Oe<e.length;Oe++){const ke=e[Oe],Be=ke.getAttribute("name")||"default",Ue=this._slots[Be],He=ke.parentNode;if(Ue)for(const We of Ue){if(t&&We.nodeType===1){const Cn=t+"-s",An=document.createTreeWalker(We,1);We.setAttribute(Cn,"");let En;for(;En=An.nextNode();)En.setAttribute(Cn,"")}He.insertBefore(We,ke)}else for(;ke.firstChild;)He.insertBefore(ke.firstChild,ke);He.removeChild(ke)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(Te){const e=getCurrentInstance(),t=e&&e.ce;return t||null}function useShadowRoot(){const Te=useHost();return Te&&Te.shadowRoot}function useCssModule(Te="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const t=e.type.__cssModules;if(!t)return EMPTY_OBJ;const Oe=t[Te];return Oe||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=Te=>(delete Te.props.mode,Te),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Te,{slots:e}){const t=getCurrentInstance(),Oe=useTransitionState();let ke,Be;return onUpdated(()=>{if(!ke.length)return;const Ue=Te.moveClass||`${Te.name||"v"}-move`;if(!hasCSSTransform(ke[0].el,t.vnode.el,Ue))return;ke.forEach(callPendingCbs),ke.forEach(recordPosition);const He=ke.filter(applyTranslation);forceReflow(),He.forEach(We=>{const Cn=We.el,An=Cn.style;addTransitionClass(Cn,Ue),An.transform=An.webkitTransform=An.transitionDuration="";const En=Cn[moveCbKey]=Sn=>{Sn&&Sn.target!==Cn||(!Sn||/transform$/.test(Sn.propertyName))&&(Cn.removeEventListener("transitionend",En),Cn[moveCbKey]=null,removeTransitionClass(Cn,Ue))};Cn.addEventListener("transitionend",En)})}),()=>{const Ue=toRaw(Te),He=resolveTransitionProps(Ue);let We=Ue.tag||Fragment;if(ke=[],Be)for(let Cn=0;Cn<Be.length;Cn++){const An=Be[Cn];An.el&&An.el instanceof Element&&(ke.push(An),setTransitionHooks(An,resolveTransitionHooks(An,He,Oe,t)),positionMap.set(An,An.el.getBoundingClientRect()))}Be=e.default?getTransitionRawChildren(e.default()):[];for(let Cn=0;Cn<Be.length;Cn++){const An=Be[Cn];An.key!=null&&setTransitionHooks(An,resolveTransitionHooks(An,He,Oe,t))}return createVNode(We,null,Be)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(Te){const e=Te.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(Te){newPositionMap.set(Te,Te.el.getBoundingClientRect())}function applyTranslation(Te){const e=positionMap.get(Te),t=newPositionMap.get(Te),Oe=e.left-t.left,ke=e.top-t.top;if(Oe||ke){const Be=Te.el.style;return Be.transform=Be.webkitTransform=`translate(${Oe}px,${ke}px)`,Be.transitionDuration="0s",Te}}function hasCSSTransform(Te,e,t){const Oe=Te.cloneNode(),ke=Te[vtcKey];ke&&ke.forEach(He=>{He.split(/\s+/).forEach(We=>We&&Oe.classList.remove(We))}),t.split(/\s+/).forEach(He=>He&&Oe.classList.add(He)),Oe.style.display="none";const Be=e.nodeType===1?e:e.parentNode;Be.appendChild(Oe);const{hasTransform:Ue}=getTransitionInfo(Oe);return Be.removeChild(Oe),Ue}const getModelAssigner=Te=>{const e=Te.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(Te){Te.target.composing=!0}function onCompositionEnd(Te){const e=Te.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(Te,{modifiers:{lazy:e,trim:t,number:Oe}},ke){Te[assignKey]=getModelAssigner(ke);const Be=Oe||ke.props&&ke.props.type==="number";addEventListener(Te,e?"change":"input",Ue=>{if(Ue.target.composing)return;let He=Te.value;t&&(He=He.trim()),Be&&(He=looseToNumber(He)),Te[assignKey](He)}),t&&addEventListener(Te,"change",()=>{Te.value=Te.value.trim()}),e||(addEventListener(Te,"compositionstart",onCompositionStart),addEventListener(Te,"compositionend",onCompositionEnd),addEventListener(Te,"change",onCompositionEnd))},mounted(Te,{value:e}){Te.value=e??""},beforeUpdate(Te,{value:e,oldValue:t,modifiers:{lazy:Oe,trim:ke,number:Be}},Ue){if(Te[assignKey]=getModelAssigner(Ue),Te.composing)return;const He=(Be||Te.type==="number")&&!/^0\d/.test(Te.value)?looseToNumber(Te.value):Te.value,We=e??"";He!==We&&(document.activeElement===Te&&Te.type!=="range"&&(Oe&&e===t||ke&&Te.value.trim()===We)||(Te.value=We))}},vModelCheckbox={deep:!0,created(Te,e,t){Te[assignKey]=getModelAssigner(t),addEventListener(Te,"change",()=>{const Oe=Te._modelValue,ke=getValue$1(Te),Be=Te.checked,Ue=Te[assignKey];if(isArray$1(Oe)){const He=looseIndexOf(Oe,ke),We=He!==-1;if(Be&&!We)Ue(Oe.concat(ke));else if(!Be&&We){const Cn=[...Oe];Cn.splice(He,1),Ue(Cn)}}else if(isSet(Oe)){const He=new Set(Oe);Be?He.add(ke):He.delete(ke),Ue(He)}else Ue(getCheckboxValue(Te,Be))})},mounted:setChecked,beforeUpdate(Te,e,t){Te[assignKey]=getModelAssigner(t),setChecked(Te,e,t)}};function setChecked(Te,{value:e,oldValue:t},Oe){Te._modelValue=e;let ke;if(isArray$1(e))ke=looseIndexOf(e,Oe.props.value)>-1;else if(isSet(e))ke=e.has(Oe.props.value);else{if(e===t)return;ke=looseEqual(e,getCheckboxValue(Te,!0))}Te.checked!==ke&&(Te.checked=ke)}const vModelRadio={created(Te,{value:e},t){Te.checked=looseEqual(e,t.props.value),Te[assignKey]=getModelAssigner(t),addEventListener(Te,"change",()=>{Te[assignKey](getValue$1(Te))})},beforeUpdate(Te,{value:e,oldValue:t},Oe){Te[assignKey]=getModelAssigner(Oe),e!==t&&(Te.checked=looseEqual(e,Oe.props.value))}},vModelSelect={deep:!0,created(Te,{value:e,modifiers:{number:t}},Oe){const ke=isSet(e);addEventListener(Te,"change",()=>{const Be=Array.prototype.filter.call(Te.options,Ue=>Ue.selected).map(Ue=>t?looseToNumber(getValue$1(Ue)):getValue$1(Ue));Te[assignKey](Te.multiple?ke?new Set(Be):Be:Be[0]),Te._assigning=!0,nextTick(()=>{Te._assigning=!1})}),Te[assignKey]=getModelAssigner(Oe)},mounted(Te,{value:e}){setSelected(Te,e)},beforeUpdate(Te,e,t){Te[assignKey]=getModelAssigner(t)},updated(Te,{value:e}){Te._assigning||setSelected(Te,e)}};function setSelected(Te,e){const t=Te.multiple,Oe=isArray$1(e);if(!(t&&!Oe&&!isSet(e))){for(let ke=0,Be=Te.options.length;ke<Be;ke++){const Ue=Te.options[ke],He=getValue$1(Ue);if(t)if(Oe){const We=typeof He;We==="string"||We==="number"?Ue.selected=e.some(Cn=>String(Cn)===String(He)):Ue.selected=looseIndexOf(e,He)>-1}else Ue.selected=e.has(He);else if(looseEqual(getValue$1(Ue),e)){Te.selectedIndex!==ke&&(Te.selectedIndex=ke);return}}!t&&Te.selectedIndex!==-1&&(Te.selectedIndex=-1)}}function getValue$1(Te){return"_value"in Te?Te._value:Te.value}function getCheckboxValue(Te,e){const t=e?"_trueValue":"_falseValue";return t in Te?Te[t]:e}const vModelDynamic={created(Te,e,t){callModelHook(Te,e,t,null,"created")},mounted(Te,e,t){callModelHook(Te,e,t,null,"mounted")},beforeUpdate(Te,e,t,Oe){callModelHook(Te,e,t,Oe,"beforeUpdate")},updated(Te,e,t,Oe){callModelHook(Te,e,t,Oe,"updated")}};function resolveDynamicModel(Te,e){switch(Te){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(Te,e,t,Oe,ke){const Ue=resolveDynamicModel(Te.tagName,t.props&&t.props.type)[ke];Ue&&Ue(Te,e,t,Oe)}function initVModelForSSR(){vModelText.getSSRProps=({value:Te})=>({value:Te}),vModelRadio.getSSRProps=({value:Te},e)=>{if(e.props&&looseEqual(e.props.value,Te))return{checked:!0}},vModelCheckbox.getSSRProps=({value:Te},e)=>{if(isArray$1(Te)){if(e.props&&looseIndexOf(Te,e.props.value)>-1)return{checked:!0}}else if(isSet(Te)){if(e.props&&Te.has(e.props.value))return{checked:!0}}else if(Te)return{checked:!0}},vModelDynamic.getSSRProps=(Te,e)=>{if(typeof e.type!="string")return;const t=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(Te,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Te=>Te.stopPropagation(),prevent:Te=>Te.preventDefault(),self:Te=>Te.target!==Te.currentTarget,ctrl:Te=>!Te.ctrlKey,shift:Te=>!Te.shiftKey,alt:Te=>!Te.altKey,meta:Te=>!Te.metaKey,left:Te=>"button"in Te&&Te.button!==0,middle:Te=>"button"in Te&&Te.button!==1,right:Te=>"button"in Te&&Te.button!==2,exact:(Te,e)=>systemModifiers.some(t=>Te[`${t}Key`]&&!e.includes(t))},withModifiers=(Te,e)=>{const t=Te._withMods||(Te._withMods={}),Oe=e.join(".");return t[Oe]||(t[Oe]=(ke,...Be)=>{for(let Ue=0;Ue<e.length;Ue++){const He=modifierGuards[e[Ue]];if(He&&He(ke,e))return}return Te(ke,...Be)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Te,e)=>{const t=Te._withKeys||(Te._withKeys={}),Oe=e.join(".");return t[Oe]||(t[Oe]=ke=>{if(!("key"in ke))return;const Be=hyphenate(ke.key);if(e.some(Ue=>Ue===Be||keyNames[Ue]===Be))return Te(ke)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$3=(...Te)=>{ensureRenderer().render(...Te)},hydrate=(...Te)=>{ensureHydrationRenderer().hydrate(...Te)},createApp=(...Te)=>{const e=ensureRenderer().createApp(...Te),{mount:t}=e;return e.mount=Oe=>{const ke=normalizeContainer(Oe);if(!ke)return;const Be=e._component;!isFunction$1(Be)&&!Be.render&&!Be.template&&(Be.template=ke.innerHTML),ke.nodeType===1&&(ke.textContent="");const Ue=t(ke,!1,resolveRootNamespace(ke));return ke instanceof Element&&(ke.removeAttribute("v-cloak"),ke.setAttribute("data-v-app","")),Ue},e},createSSRApp=(...Te)=>{const e=ensureHydrationRenderer().createApp(...Te),{mount:t}=e;return e.mount=Oe=>{const ke=normalizeContainer(Oe);if(ke)return t(ke,!0,resolveRootNamespace(ke))},e};function resolveRootNamespace(Te){if(Te instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&Te instanceof MathMLElement)return"mathml"}function normalizeContainer(Te){return isString(Te)?document.querySelector(Te):Te}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$3,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=Te=>activePinia=Te,piniaSymbol=Symbol();function isPlainObject(Te){return Te&&typeof Te=="object"&&Object.prototype.toString.call(Te)==="[object Object]"&&typeof Te.toJSON!="function"}var MutationType;(function(Te){Te.direct="direct",Te.patchObject="patch object",Te.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Te=effectScope(!0),e=Te.run(()=>ref({}));let t=[],Oe=[];const ke=markRaw({install(Be){setActivePinia(ke),ke._a=Be,Be.provide(piniaSymbol,ke),Be.config.globalProperties.$pinia=ke,Oe.forEach(Ue=>t.push(Ue)),Oe=[]},use(Be){return this._a?t.push(Be):Oe.push(Be),this},_p:t,_a:null,_e:Te,_s:new Map,state:e});return ke}const noop$2=()=>{};function addSubscription(Te,e,t,Oe=noop$2){Te.push(e);const ke=()=>{const Be=Te.indexOf(e);Be>-1&&(Te.splice(Be,1),Oe())};return!t&&getCurrentScope()&&onScopeDispose(ke),ke}function triggerSubscriptions(Te,...e){Te.slice().forEach(t=>{t(...e)})}const fallbackRunWithContext=Te=>Te(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(Te,e){Te instanceof Map&&e instanceof Map?e.forEach((t,Oe)=>Te.set(Oe,t)):Te instanceof Set&&e instanceof Set&&e.forEach(Te.add,Te);for(const t in e){if(!e.hasOwnProperty(t))continue;const Oe=e[t],ke=Te[t];isPlainObject(ke)&&isPlainObject(Oe)&&Te.hasOwnProperty(t)&&!isRef(Oe)&&!isReactive(Oe)?Te[t]=mergeReactiveObjects(ke,Oe):Te[t]=Oe}return Te}const skipHydrateSymbol=Symbol();function shouldHydrate(Te){return!isPlainObject(Te)||!Te.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Te){return!!(isRef(Te)&&Te.effect)}function createOptionsStore(Te,e,t,Oe){const{state:ke,actions:Be,getters:Ue}=e,He=t.state.value[Te];let We;function Cn(){He||(t.state.value[Te]=ke?ke():{});const An=toRefs(t.state.value[Te]);return assign$1(An,Be,Object.keys(Ue||{}).reduce((En,Sn)=>(En[Sn]=markRaw(computed(()=>{setActivePinia(t);const Tn=t._s.get(Te);return Ue[Sn].call(Tn,Tn)})),En),{}))}return We=createSetupStore(Te,Cn,e,t,Oe,!0),We}function createSetupStore(Te,e,t={},Oe,ke,Be){let Ue;const He=assign$1({actions:{}},t),We={deep:!0};let Cn,An,En=[],Sn=[],Tn;const Ln=Oe.state.value[Te];!Be&&!Ln&&(Oe.state.value[Te]={}),ref({});let Bn;function ti(fi){let Mi;Cn=An=!1,typeof fi=="function"?(fi(Oe.state.value[Te]),Mi={type:MutationType.patchFunction,storeId:Te,events:Tn}):(mergeReactiveObjects(Oe.state.value[Te],fi),Mi={type:MutationType.patchObject,payload:fi,storeId:Te,events:Tn});const Oi=Bn=Symbol();nextTick().then(()=>{Bn===Oi&&(Cn=!0)}),An=!0,triggerSubscriptions(En,Mi,Oe.state.value[Te])}const ni=Be?function(){const{state:Mi}=t,Oi=Mi?Mi():{};this.$patch(ui=>{assign$1(ui,Oi)})}:noop$2;function ii(){Ue.stop(),En=[],Sn=[],Oe._s.delete(Te)}const si=(fi,Mi="")=>{if(ACTION_MARKER in fi)return fi[ACTION_NAME]=Mi,fi;const Oi=function(){setActivePinia(Oe);const ui=Array.from(arguments),li=[],Ri=[];function Pi(nr){li.push(nr)}function Fi(nr){Ri.push(nr)}triggerSubscriptions(Sn,{args:ui,name:Oi[ACTION_NAME],store:ci,after:Pi,onError:Fi});let Hi;try{Hi=fi.apply(this&&this.$id===Te?this:ci,ui)}catch(nr){throw triggerSubscriptions(Ri,nr),nr}return Hi instanceof Promise?Hi.then(nr=>(triggerSubscriptions(li,nr),nr)).catch(nr=>(triggerSubscriptions(Ri,nr),Promise.reject(nr))):(triggerSubscriptions(li,Hi),Hi)};return Oi[ACTION_MARKER]=!0,Oi[ACTION_NAME]=Mi,Oi},oi={_p:Oe,$id:Te,$onAction:addSubscription.bind(null,Sn),$patch:ti,$reset:ni,$subscribe(fi,Mi={}){const Oi=addSubscription(En,fi,Mi.detached,()=>ui()),ui=Ue.run(()=>watch(()=>Oe.state.value[Te],li=>{(Mi.flush==="sync"?An:Cn)&&fi({storeId:Te,type:MutationType.direct,events:Tn},li)},assign$1({},We,Mi)));return Oi},$dispose:ii},ci=reactive(oi);Oe._s.set(Te,ci);const pi=(Oe._a&&Oe._a.runWithContext||fallbackRunWithContext)(()=>Oe._e.run(()=>(Ue=effectScope()).run(()=>e({action:si}))));for(const fi in pi){const Mi=pi[fi];if(isRef(Mi)&&!isComputed(Mi)||isReactive(Mi))Be||(Ln&&shouldHydrate(Mi)&&(isRef(Mi)?Mi.value=Ln[fi]:mergeReactiveObjects(Mi,Ln[fi])),Oe.state.value[Te][fi]=Mi);else if(typeof Mi=="function"){const Oi=si(Mi,fi);pi[fi]=Oi,He.actions[fi]=Mi}}return assign$1(ci,pi),assign$1(toRaw(ci),pi),Object.defineProperty(ci,"$state",{get:()=>Oe.state.value[Te],set:fi=>{ti(Mi=>{assign$1(Mi,fi)})}}),Oe._p.forEach(fi=>{assign$1(ci,Ue.run(()=>fi({store:ci,app:Oe._a,pinia:Oe,options:He})))}),Ln&&Be&&t.hydrate&&t.hydrate(ci.$state,Ln),Cn=!0,An=!0,ci}/*! #__NO_SIDE_EFFECTS__ */function defineStore(Te,e,t){let Oe,ke;const Be=typeof e=="function";typeof Te=="string"?(Oe=Te,ke=Be?t:e):(ke=Te,Oe=Te.id);function Ue(He,We){const Cn=hasInjectionContext();return He=He||(Cn?inject(piniaSymbol,null):null),He&&setActivePinia(He),He=activePinia,He._s.has(Oe)||(Be?createSetupStore(Oe,e,ke,He):createOptionsStore(Oe,ke,He)),He._s.get(Oe)}return Ue.$id=Oe,Ue}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(Te){return Te&&Te.__esModule&&Object.prototype.hasOwnProperty.call(Te,"default")?Te.default:Te}function getAugmentedNamespace(Te){if(Te.__esModule)return Te;var e=Te.default;if(typeof e=="function"){var t=function Oe(){return this instanceof Oe?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(Te).forEach(function(Oe){var ke=Object.getOwnPropertyDescriptor(Te,Oe);Object.defineProperty(t,Oe,ke.get?ke:{enumerable:!0,get:function(){return Te[Oe]}})}),t}var dist={},logger$G={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$G,"__esModule",{value:!0});logger$G.useLogger=logger$G.createLogger=logger$G.VueLogger=void 0;const vue_1=require$$0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:Te,caller:e})=>e?`[${Te.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${Te.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(t=>typeof console[t]=="function")}apply(e){const t=this._options||defaultOptions;this._options={...t,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...t){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const Oe=this._options.callerInfo?this.getCallerInfo():void 0,ke={level:e,caller:Oe,argumentArray:t};if(await this.invokeHooks(this._options.beforeHooks,ke),this._options.consoleEnabled){const Be=this._options.prefixFormat({level:e,caller:Oe});this._consoleFunctions.indexOf(e)>=0?console[e](Be,...t):console.log(Be,...t)}await this.invokeHooks(this._options.afterHooks,ke)}}installHooks(e){if(e&&e.length>0){for(const t of e)if(t.install)try{t.install(this._options)}catch(Oe){console.warn("LoggerHook install failure",Oe)}}}async invokeHooks(e,t){if(e&&e.length>0)for(const Oe of e)try{await Oe.run(t)}catch(ke){console.warn("LoggerHook run failure",ke)}}getCallerInfo(){const e=new Error;if(e.stack)try{const Oe=e.stack.split(`
`)[0].startsWith("Error")?4:3,ke=e.stack.split(`
`)[Oe].trim().replace("(","").replace(")","");let Be;ke.indexOf("at ")>-1?Be=ke.substring(ke.indexOf("at ")+3,ke.lastIndexOf(" ")).split(".").reverse()[0]:ke.indexOf("@")>-1&&(Be=ke.substring(0,ke.indexOf("@")));const Ue=ke.split(":").reverse(),He=Ue[2].substring(Math.max(Ue[2].lastIndexOf("/"),Ue[2].lastIndexOf("\\"))+1).split("?")[0],We=Ue[1];return{functionName:Be,fileName:He,lineNumber:We}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$G.VueLogger=VueLogger;function createLogger(Te={}){return new VueLogger(Te)}logger$G.createLogger=createLogger;function useLogger(){return vue_1.inject(loggerSymbol)}logger$G.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(Te){for(let e=0;e<Te.argumentArray.length;e++)Te.argumentArray[e]!=null&&typeof Te.argumentArray[e]=="object"&&(Te.argumentArray[e]=JSON.stringify(Te.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(Te){for(let e=0;e<Te.argumentArray.length;e++)Te.argumentArray[e]!=null&&typeof Te.argumentArray[e]=="object"&&(Te.argumentArray[e]=JSON.parse(JSON.stringify(Te.argumentArray[e])))}};(function(Te){Object.defineProperty(Te,"__esModule",{value:!0}),Te.StringifyAndParseObjectsHook=Te.StringifyObjectsHook=Te.useLogger=Te.createLogger=Te.VueLogger=void 0;var e=logger$G;Object.defineProperty(Te,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(Te,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(Te,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var t=hooks;Object.defineProperty(Te,"StringifyObjectsHook",{enumerable:!0,get:function(){return t.StringifyObjectsHook}}),Object.defineProperty(Te,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return t.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(Te){return"/cartes.gouv.fr-entree-carto/"+Te},seen={},__vitePreload=function(e,t,Oe){let ke=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const Ue=document.querySelector("meta[property=csp-nonce]"),He=(Ue==null?void 0:Ue.nonce)||(Ue==null?void 0:Ue.getAttribute("nonce"));ke=Promise.allSettled(t.map(We=>{if(We=assetsURL(We),We in seen)return;seen[We]=!0;const Cn=We.endsWith(".css"),An=Cn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${We}"]${An}`))return;const En=document.createElement("link");if(En.rel=Cn?"stylesheet":scriptRel,Cn||(En.as="script"),En.crossOrigin="",En.href=We,He&&En.setAttribute("nonce",He),document.head.appendChild(En),Cn)return new Promise((Sn,Tn)=>{En.addEventListener("load",Sn),En.addEventListener("error",()=>Tn(new Error(`Unable to preload CSS for ${We}`)))})}))}function Be(Ue){const He=new Event("vite:preloadError",{cancelable:!0});if(He.payload=Ue,window.dispatchEvent(He),!He.defaultPrevented)throw Ue}return ke.then(Ue=>{for(const He of Ue||[])He.status==="rejected"&&Be(He.reason);return e().catch(Be)})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug("eulerian",e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var t=JSON.parse(localStorage.getItem(this.key));t&&(t.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-ClVZRmXE.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-FhbEcPM0.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(Te){return new Eulerian(Te)}function useEulerian(){return inject(eulerianSymbol)}var oauth2Client_min={exports:{}};(function(Te,e){(function(t,Oe){Te.exports=Oe()})(self,()=>(()=>{var t={985:(Ue,He,We)=>{Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2Client=void 0,He.generateQueryString=Sn;const Cn=We(854),An=We(129);function En(Tn,Ln){return new URL(Tn,Ln).toString()}function Sn(Tn){const Ln=new URLSearchParams;for(const[Bn,ti]of Object.entries(Tn))if(Array.isArray(ti))for(const ni of ti)Ln.append(Bn,ni);else ti!==void 0&&Ln.set(Bn,ti.toString());return Ln.toString()}He.OAuth2Client=class{constructor(Tn){this.discoveryDone=!1,this.serverMetadata=null,Tn!=null&&Tn.fetch||(Tn.fetch=fetch.bind(globalThis)),this.settings=Tn}async refreshToken(Tn,Ln){if(!Tn.refreshToken)throw new Error("This token didn't have a refreshToken. It's not possible to refresh this");const Bn={grant_type:"refresh_token",refresh_token:Tn.refreshToken};this.settings.clientSecret||(Bn.client_id=this.settings.clientId),Ln!=null&&Ln.scope&&(Bn.scope=Ln.scope.join(" ")),Ln!=null&&Ln.resource&&(Bn.resource=Ln.resource);const ti=await this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",Bn));return!ti.refreshToken&&Tn.refreshToken&&(ti.refreshToken=Tn.refreshToken),ti}async clientCredentials(Tn){var Ln;const Bn=["client_id","client_secret","grant_type","scope"];if(Tn!=null&&Tn.extraParams&&Object.keys(Tn.extraParams).filter(ni=>Bn.includes(ni)).length>0)throw new Error(`The following extraParams are disallowed: '${Bn.join("', '")}'`);const ti={grant_type:"client_credentials",scope:(Ln=Tn==null?void 0:Tn.scope)===null||Ln===void 0?void 0:Ln.join(" "),resource:Tn==null?void 0:Tn.resource,...Tn==null?void 0:Tn.extraParams};if(!this.settings.clientSecret)throw new Error("A clientSecret must be provided to use client_credentials");return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ti))}async password(Tn){var Ln;const Bn={grant_type:"password",...Tn,scope:(Ln=Tn.scope)===null||Ln===void 0?void 0:Ln.join(" ")};return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",Bn))}get authorizationCode(){return new An.OAuth2AuthorizationCodeClient(this)}async introspect(Tn){const Ln={token:Tn.accessToken,token_type_hint:"access_token"};return this.request("introspectionEndpoint",Ln)}async revoke(Tn,Ln="access_token"){let Bn=Tn.accessToken;Ln==="refresh_token"&&(Bn=Tn.refreshToken);const ti={token:Bn,token_type_hint:Ln};return this.request("revocationEndpoint",ti)}async getEndpoint(Tn){if(this.settings[Tn]!==void 0)return En(this.settings[Tn],this.settings.server);if(Tn!=="discoveryEndpoint"&&(await this.discover(),this.settings[Tn]!==void 0))return En(this.settings[Tn],this.settings.server);if(!this.settings.server)throw new Error(`Could not determine the location of ${Tn}. Either specify ${Tn} in the settings, or the "server" endpoint to let the client discover it.`);switch(Tn){case"authorizationEndpoint":return En("/authorize",this.settings.server);case"tokenEndpoint":return En("/token",this.settings.server);case"discoveryEndpoint":return En("/.well-known/oauth-authorization-server",this.settings.server);case"introspectionEndpoint":return En("/introspect",this.settings.server);case"revocationEndpoint":return En("/revoke",this.settings.server)}}async discover(){var Tn;if(this.discoveryDone)return;let Ln;this.discoveryDone=!0;try{Ln=await this.getEndpoint("discoveryEndpoint")}catch{return void console.warn('[oauth2] OAuth2 discovery endpoint could not be determined. Either specify the "server" or "discoveryEndpoint')}const Bn=await this.settings.fetch(Ln,{headers:{Accept:"application/json"}});if(!Bn.ok)return;if(!(!((Tn=Bn.headers.get("Content-Type"))===null||Tn===void 0)&&Tn.startsWith("application/json")))return void console.warn("[oauth2] OAuth2 discovery endpoint was not a JSON response. Response is ignored");this.serverMetadata=await Bn.json();const ti=[["authorization_endpoint","authorizationEndpoint"],["token_endpoint","tokenEndpoint"],["introspection_endpoint","introspectionEndpoint"],["revocation_endpoint","revocationEndpoint"]];if(this.serverMetadata!==null){for(const[ni,ii]of ti)this.serverMetadata[ni]&&(this.settings[ii]=En(this.serverMetadata[ni],Ln));this.serverMetadata.token_endpoint_auth_methods_supported&&!this.settings.authenticationMethod&&(this.settings.authenticationMethod=this.serverMetadata.token_endpoint_auth_methods_supported[0])}}async request(Tn,Ln){const Bn=await this.getEndpoint(Tn),ti={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};let ni=this.settings.authenticationMethod;switch(this.settings.clientSecret||(ni="client_secret_post"),ni||(ni="client_secret_basic"),ni){case"client_secret_basic":ti.Authorization="Basic "+btoa(this.settings.clientId+":"+this.settings.clientSecret);break;case"client_secret_post":Ln.client_id=this.settings.clientId,this.settings.clientSecret&&(Ln.client_secret=this.settings.clientSecret);break;default:throw new Error("Authentication method not yet supported:"+ni+". Open a feature request if you want this!")}const ii=await this.settings.fetch(Bn,{method:"POST",body:Sn(Ln),headers:ti});let si,oi,ci;if(ii.status!==204&&ii.headers.has("Content-Type")&&ii.headers.get("Content-Type").match(/^application\/(.*\+)?json/)&&(si=await ii.json()),ii.ok)return si;throw si!=null&&si.error?(oi="OAuth2 error "+si.error+".",si.error_description&&(oi+=" "+si.error_description),ci=si.error):(oi="HTTP Error "+ii.status+" "+ii.statusText,ii.status===401&&this.settings.clientSecret&&(oi+=". It's likely that the clientId and/or clientSecret was incorrect"),ci=null),new Cn.OAuth2HttpError(oi,ci,ii,si)}async tokenResponseToOAuth2Token(Tn){var Ln;const Bn=await Tn;if(!(Bn!=null&&Bn.access_token))throw console.warn("Invalid OAuth2 Token Response: ",Bn),new TypeError("We received an invalid token response from an OAuth2 server.");return{accessToken:Bn.access_token,expiresAt:Bn.expires_in?Date.now()+1e3*Bn.expires_in:null,refreshToken:(Ln=Bn.refresh_token)!==null&&Ln!==void 0?Ln:null}}}},129:(Ue,He,We)=>{Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2AuthorizationCodeClient=void 0,He.generateCodeVerifier=async function(){const Ln=En();if(Ln){const Bn=new Uint8Array(32);return Ln.getRandomValues(Bn),Tn(Bn)}{const Bn=We(483);return new Promise((ti,ni)=>{Bn.randomBytes(32,(ii,si)=>{ii&&ni(ii),ti(si.toString("base64url"))})})}},He.getCodeChallenge=An;const Cn=We(854);async function An(Ln){const Bn=En();if(Bn!=null&&Bn.subtle)return["S256",Tn(await Bn.subtle.digest("SHA-256",Sn(Ln)))];{const ti=We(483).createHash("sha256");return ti.update(Sn(Ln)),["S256",ti.digest("base64url")]}}function En(){if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof self<"u"&&self.crypto)return self.crypto;const Ln=We(483);return Ln.webcrypto?Ln.webcrypto:null}function Sn(Ln){const Bn=new Uint8Array(Ln.length);for(let ti=0;ti<Ln.length;ti++)Bn[ti]=255&Ln.charCodeAt(ti);return Bn}function Tn(Ln){return btoa(String.fromCharCode(...new Uint8Array(Ln))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}He.OAuth2AuthorizationCodeClient=class{constructor(Ln){this.client=Ln}async getAuthorizeUri(Ln){const[Bn,ti]=await Promise.all([Ln.codeVerifier?An(Ln.codeVerifier):void 0,this.client.getEndpoint("authorizationEndpoint")]),ni=new URLSearchParams({client_id:this.client.settings.clientId,response_type:"code",redirect_uri:Ln.redirectUri});if(Bn&&(ni.set("code_challenge_method",Bn[0]),ni.set("code_challenge",Bn[1])),Ln.state&&ni.set("state",Ln.state),Ln.scope&&ni.set("scope",Ln.scope.join(" ")),Ln.resource)for(const ii of[].concat(Ln.resource))ni.append("resource",ii);if(Ln.responseMode&&Ln.responseMode!=="query"&&ni.append("response_mode",Ln.responseMode),Ln.extraParams)for(const[ii,si]of Object.entries(Ln.extraParams)){if(ni.has(ii))throw new Error(`Property in extraParams would overwrite standard property: ${ii}`);ni.set(ii,si)}return ti+"?"+ni.toString()}async getTokenFromCodeRedirect(Ln,Bn){const{code:ti}=this.validateResponse(Ln,{state:Bn.state});return this.getToken({code:ti,redirectUri:Bn.redirectUri,codeVerifier:Bn.codeVerifier})}validateResponse(Ln,Bn){var ti;let ni=(Ln=new URL(Ln)).searchParams;if(!ni.has("code")&&!ni.has("error")&&Ln.hash.length>0&&(ni=new URLSearchParams(Ln.hash.slice(1))),ni.has("error"))throw new Cn.OAuth2Error((ti=ni.get("error_description"))!==null&&ti!==void 0?ti:"OAuth2 error",ni.get("error"));if(!ni.has("code"))throw new Error(`The url did not contain a code parameter ${Ln}`);if(Bn.state&&Bn.state!==ni.get("state"))throw new Error(`The "state" parameter in the url did not match the expected value of ${Bn.state}`);return{code:ni.get("code"),scope:ni.has("scope")?ni.get("scope").split(" "):void 0}}async getToken(Ln){const Bn={grant_type:"authorization_code",code:Ln.code,redirect_uri:Ln.redirectUri,code_verifier:Ln.codeVerifier,resource:Ln.resource};return this.client.tokenResponseToOAuth2Token(this.client.request("tokenEndpoint",Bn))}}},854:(Ue,He)=>{Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2HttpError=He.OAuth2Error=void 0;class We extends Error{constructor(An,En){super(An),this.oauth2Code=En}}He.OAuth2Error=We,He.OAuth2HttpError=class extends We{constructor(Cn,An,En,Sn){super(Cn,An),this.httpCode=En.status,this.response=En,this.parsedBody=Sn}}},238:(Ue,He)=>{Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2Fetch=void 0,He.OAuth2Fetch=class{constructor(We){this.token=null,this.activeGetStoredToken=null,this.activeRefresh=null,this.refreshTimer=null,(We==null?void 0:We.scheduleRefresh)===void 0&&(We.scheduleRefresh=!0),this.options=We,We.getStoredToken&&(this.activeGetStoredToken=(async()=>{this.token=await We.getStoredToken(),this.activeGetStoredToken=null})()),this.scheduleRefresh()}async fetch(We,Cn){const An=new Request(We,Cn);return this.mw()(An,En=>fetch(En))}mw(){return async(We,Cn)=>{const An=await this.getAccessToken();let En=We.clone();En.headers.set("Authorization","Bearer "+An);let Sn=await Cn(En);if(!Sn.ok&&Sn.status===401){const Tn=await this.refreshToken();En=We.clone(),En.headers.set("Authorization","Bearer "+Tn.accessToken),Sn=await Cn(En)}return Sn}}async getToken(){return this.token&&(this.token.expiresAt===null||this.token.expiresAt>Date.now())?this.token:this.refreshToken()}async getAccessToken(){return await this.activeGetStoredToken,(await this.getToken()).accessToken}async refreshToken(){var We,Cn;if(this.activeRefresh)return this.activeRefresh;const An=this.token;this.activeRefresh=(async()=>{var En,Sn;let Tn=null;try{An!=null&&An.refreshToken&&(Tn=await this.options.client.refreshToken(An))}catch{console.warn("[oauth2] refresh token not accepted, we'll try reauthenticating")}if(Tn||(Tn=await this.options.getNewToken()),!Tn){const Ln=new Error("Unable to obtain OAuth2 tokens, a full reauth may be needed");throw(Sn=(En=this.options).onError)===null||Sn===void 0||Sn.call(En,Ln),Ln}return Tn})();try{const En=await this.activeRefresh;return this.token=En,(Cn=(We=this.options).storeToken)===null||Cn===void 0||Cn.call(We,En),this.scheduleRefresh(),En}catch(En){throw this.options.onError&&this.options.onError(En),En}finally{this.activeRefresh=null}}scheduleRefresh(){var We;if(!this.options.scheduleRefresh||(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),!(!((We=this.token)===null||We===void 0)&&We.expiresAt)||!this.token.refreshToken))return;const Cn=this.token.expiresAt-Date.now();Cn<12e4||(this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(An){console.error("[fetch-mw-oauth2] error while doing a background OAuth2 auto-refresh",An)}},Cn-6e4))}}},483:()=>{}},Oe={};function ke(Ue){var He=Oe[Ue];if(He!==void 0)return He.exports;var We=Oe[Ue]={exports:{}};return t[Ue](We,We.exports,ke),We.exports}var Be={};return(()=>{var Ue=Be;Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.OAuth2HttpError=Ue.OAuth2Error=Ue.OAuth2Fetch=Ue.generateCodeVerifier=Ue.OAuth2AuthorizationCodeClient=Ue.OAuth2Client=void 0;var He=ke(985);Object.defineProperty(Ue,"OAuth2Client",{enumerable:!0,get:function(){return He.OAuth2Client}});var We=ke(129);Object.defineProperty(Ue,"OAuth2AuthorizationCodeClient",{enumerable:!0,get:function(){return We.OAuth2AuthorizationCodeClient}}),Object.defineProperty(Ue,"generateCodeVerifier",{enumerable:!0,get:function(){return We.generateCodeVerifier}});var Cn=ke(238);Object.defineProperty(Ue,"OAuth2Fetch",{enumerable:!0,get:function(){return Cn.OAuth2Fetch}});var An=ke(854);Object.defineProperty(Ue,"OAuth2Error",{enumerable:!0,get:function(){return An.OAuth2Error}}),Object.defineProperty(Ue,"OAuth2HttpError",{enumerable:!0,get:function(){return An.OAuth2HttpError}})})(),Be})())})(oauth2Client_min);var oauth2Client_minExports=oauth2Client_min.exports;const useServiceStore=defineStore({id:"service",state:()=>({connexion:{}}),getters:{},actions:{getService(){return this.connexion},setService(Te){Te?this.connexion=new Services$1(Te):this.connexion=new Services$1}}});var Connexion={getAccessLogin:async function(){const Te=this.url.includes("login")?this.url:this.url+"/login",e=await oauth2Client_minExports.generateCodeVerifier();this.codeVerifier=e,localStorage.setItem("codeVerifier",e);var t=await this.getClient().authorizationCode.getAuthorizeUri({redirectUri:Te,state:"some-string",codeVerifier:e,scope:["openid","profile","email"],extraParams:{approval_prompt:"auto"},responseMode:"query"});return t},getAccessLogout:function(){const Te=this.url.includes("logout")?this.url:this.url+"/logout";var e=`${this.getClient().settings.server}/realms/${this.getClient().settings.index}/protocol/openid-connect/logout?
      scope=openid%20profile%20email&
      approval_prompt=auto&
      response_type=code&
      post_logout_redirect_uri=${Te}?session_state=${this.session}&
      client_id=${this.getClient().settings.clientId}`.replace(/ /g,"");return Promise.resolve(e)},getAccessToken:async function(){const Te=this.url.includes("login")?this.url:this.url+"/login";var e=this.codeVerifier||localStorage.getItem("codeVerifier"),t=await this.getClient().authorizationCode.getTokenFromCodeRedirect(location,{redirectUri:Te,state:"some-string",codeVerifier:e});this.token=t,this.getFetch().token=t,this.addTokenStorage();var Oe=useServiceStore();return Oe.setService(this),t},getTokenStorage:function(){var Te=JSON.parse(localStorage.getItem("auth"));return Te?Te.authenticated:null},addTokenStorage:function(){var Te=JSON.stringify({authenticated:this.token});localStorage.setItem("auth",Te)},removeTokenStorage:function(){var Te=JSON.stringify({authenticated:{}});localStorage.setItem("auth",Te)}},Users={getUserMe:async function(){var Te=await this.getFetch().fetch("https://data.geopf.fr/api/users/me",{method:"GET"}),e=await Te.json();this.user=e;var t=useServiceStore();return t.setService(this),e}},Documents={};const IAM_URL="https://sso.geopf.fr",IAM_REALM="geoplateforme",IAM_CLIENT_ID="cartes-gouv-fr-carto",IAM_CLIENT_SECRET="GLGe8lcjSj7OytvAeHXABrZRFjbu31ny";var Lc,yu,fh,Df,kf;let Services$1=(kf=class{constructor(e){hd(this,fh);hd(this,Lc);hd(this,yu);return e=e||{},this.authenticated=e.authenticated||!1,this.session=e.session||"",this.codeVerifier=e.codeVerifier||"",this.code=e.code||"",this.token=e.token||"",this.user=e.user||{},this.error=e.error||{},gd(this,Lc,null),gd(this,yu,null),this.url=null,pc(this,fh,Df).call(this,e),this}getClient(){return Qu(this,Lc)}getFetch(){return Qu(this,yu)}isAccessValided(){var e=useServiceStore();const t=location.search,Oe=new URLSearchParams(t);var ke=Oe.get("code"),Be=Oe.get("session_state"),Ue=Oe.get("error"),He=null;return ke&&Be&&(this.session=Be,this.code=ke,this.authenticated=!0,He="login"),!ke&&Be&&Be===this.session&&(this.session=null,this.code=null,this.authenticated=!1,this.token=null,this.removeTokenStorage(),this.user={},this.error={},He="logout"),Ue?(this.error={name:Ue,message:Oe.get("error_description")},Promise.reject(this.error)):(e.setService(this),Promise.resolve(He))}},Lc=new WeakMap,yu=new WeakMap,fh=new WeakSet,Df=function(e){this.url=encodeURI(location.origin+"/cartes.gouv.fr-entree-carto");var t=e.client?e.client.settings:{server:`${IAM_URL}`,clientId:`${IAM_CLIENT_ID}`,clientSecret:`${IAM_CLIENT_SECRET}`,index:`${IAM_REALM}`,tokenEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/token`,authorizationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/auth`,discoveryEndpoint:`/realms/${IAM_REALM}/.well-known/openid-configuration`,revocationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/revoke`};gd(this,Lc,new oauth2Client_minExports.OAuth2Client(t)),gd(this,yu,new oauth2Client_minExports.OAuth2Fetch({client:Qu(this,Lc),getNewToken:async()=>{var Oe=await Qu(this,Lc).authorizationCode.getToken({code:this.code,redirectUri:this.url,code_verifier:this.codeVerifier});return Oe},storeToken:Oe=>{this.token=Oe,this.addTokenStorage()},getStoredToken:()=>{const Oe=this.getTokenStorage();return Oe||null},onError:Oe=>{console.error(Oe)}}))},kf);Object.assign(Services$1.prototype,Connexion);Object.assign(Services$1.prototype,Users);Object.assign(Services$1.prototype,Documents);const servicesSymbol=Symbol("vue-services-plugin");class PluginServices extends Services$1{constructor(e){console.debug("connexion",e),super(e)}install(e){e.provide(servicesSymbol,this),e.config.globalProperties.$services=this,e.provide("services",this)}}function createServices(Te){return new PluginServices(Te)}function getState(Te){if(Te)try{return JSON.parse(Te)}catch(e){console.warn(e,"unknown json format!")}}function createStore(Te,e){const{storage:t,encrypt:Oe,decrypt:ke}=e,Be=t.getItem(Te.$id);if(Be){const He=getState(ke?ke(Be):Be);He&&(Te.$state=He)}else{const He=JSON.stringify(Te.$state);t.setItem(Te.$id,Oe?Oe(He):He)}const Ue=(He,We)=>{const Cn=JSON.stringify(We);t.setItem(Te.$id,Oe?Oe(Cn):Cn)};Te.$subscribe(Ue,{detached:!0,deep:!0,immediate:!0})}function storePlugin(Te){return e=>{const t={...Te},{store:Oe}=e,{stores:ke,encrypt:Be,decrypt:Ue}=t;ke&&ke.length>0&&ke.forEach(He=>{if(typeof He=="string"){if(He===Oe.$id){const We=t.storage??localStorage;createStore(Oe,{storage:We,encrypt:Be,decrypt:Ue})}}else if(He.name===Oe.$id){const{storage:We,ciphertext:Cn}=He;createStore(Oe,{storage:We||(t.storage?t.storage:localStorage),encrypt:Cn===!1?void 0:Be,decrypt:Cn===!1?void 0:Ue})}})}}const matchIconName=/^[a-z0-9]+(-[a-z0-9]+)*$/,stringToIcon=(Te,e,t,Oe="")=>{const ke=Te.split(":");if(Te.slice(0,1)==="@"){if(ke.length<2||ke.length>3)return null;Oe=ke.shift().slice(1)}if(ke.length>3||!ke.length)return null;if(ke.length>1){const He=ke.pop(),We=ke.pop(),Cn={provider:ke.length>0?ke[0]:Oe,prefix:We,name:He};return e&&!validateIconName(Cn)?null:Cn}const Be=ke[0],Ue=Be.split("-");if(Ue.length>1){const He={provider:Oe,prefix:Ue.shift(),name:Ue.join("-")};return e&&!validateIconName(He)?null:He}if(t&&Oe===""){const He={provider:Oe,prefix:"",name:Be};return e&&!validateIconName(He,t)?null:He}return null},validateIconName=(Te,e)=>Te?!!((e&&Te.prefix===""||Te.prefix)&&Te.name):!1,defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1});function mergeIconTransformations(Te,e){const t={};!Te.hFlip!=!e.hFlip&&(t.hFlip=!0),!Te.vFlip!=!e.vFlip&&(t.vFlip=!0);const Oe=((Te.rotate||0)+(e.rotate||0))%4;return Oe&&(t.rotate=Oe),t}function mergeIconData(Te,e){const t=mergeIconTransformations(Te,e);for(const Oe in defaultExtendedIconProps)Oe in defaultIconTransformations?Oe in Te&&!(Oe in t)&&(t[Oe]=defaultIconTransformations[Oe]):Oe in e?t[Oe]=e[Oe]:Oe in Te&&(t[Oe]=Te[Oe]);return t}function getIconsTree(Te,e){const t=Te.icons,Oe=Te.aliases||Object.create(null),ke=Object.create(null);function Be(Ue){if(t[Ue])return ke[Ue]=[];if(!(Ue in ke)){ke[Ue]=null;const He=Oe[Ue]&&Oe[Ue].parent,We=He&&Be(He);We&&(ke[Ue]=[He].concat(We))}return ke[Ue]}return Object.keys(t).concat(Object.keys(Oe)).forEach(Be),ke}function internalGetIconData(Te,e,t){const Oe=Te.icons,ke=Te.aliases||Object.create(null);let Be={};function Ue(He){Be=mergeIconData(Oe[He]||ke[He],Be)}return Ue(e),t.forEach(Ue),mergeIconData(Te,Be)}function parseIconSet(Te,e){const t=[];if(typeof Te!="object"||typeof Te.icons!="object")return t;Te.not_found instanceof Array&&Te.not_found.forEach(ke=>{e(ke,null),t.push(ke)});const Oe=getIconsTree(Te);for(const ke in Oe){const Be=Oe[ke];Be&&(e(ke,internalGetIconData(Te,ke,Be)),t.push(ke))}return t}const optionalPropertyDefaults={provider:"",aliases:{},not_found:{},...defaultIconDimensions};function checkOptionalProps(Te,e){for(const t in e)if(t in Te&&typeof Te[t]!=typeof e[t])return!1;return!0}function quicklyValidateIconSet(Te){if(typeof Te!="object"||Te===null)return null;const e=Te;if(typeof e.prefix!="string"||!Te.icons||typeof Te.icons!="object"||!checkOptionalProps(Te,optionalPropertyDefaults))return null;const t=e.icons;for(const ke in t){const Be=t[ke];if(!ke||typeof Be.body!="string"||!checkOptionalProps(Be,defaultExtendedIconProps))return null}const Oe=e.aliases||Object.create(null);for(const ke in Oe){const Be=Oe[ke],Ue=Be.parent;if(!ke||typeof Ue!="string"||!t[Ue]&&!Oe[Ue]||!checkOptionalProps(Be,defaultExtendedIconProps))return null}return e}const dataStorage=Object.create(null);function newStorage(Te,e){return{provider:Te,prefix:e,icons:Object.create(null),missing:new Set}}function getStorage(Te,e){const t=dataStorage[Te]||(dataStorage[Te]=Object.create(null));return t[e]||(t[e]=newStorage(Te,e))}function addIconSet(Te,e){return quicklyValidateIconSet(e)?parseIconSet(e,(t,Oe)=>{Oe?Te.icons[t]=Oe:Te.missing.add(t)}):[]}function addIconToStorage(Te,e,t){try{if(typeof t.body=="string")return Te.icons[e]={...t},!0}catch{}return!1}let simpleNames=!1;function allowSimpleNames(Te){return typeof Te=="boolean"&&(simpleNames=Te),simpleNames}function getIconData(Te){const e=typeof Te=="string"?stringToIcon(Te,!0,simpleNames):Te;if(e){const t=getStorage(e.provider,e.prefix),Oe=e.name;return t.icons[Oe]||(t.missing.has(Oe)?null:void 0)}}function addIcon(Te,e){const t=stringToIcon(Te,!0,simpleNames);if(!t)return!1;const Oe=getStorage(t.provider,t.prefix);return e?addIconToStorage(Oe,t.name,e):(Oe.missing.add(t.name),!0)}function addCollection(Te,e){if(typeof Te!="object")return!1;if(typeof e!="string"&&(e=Te.provider||""),simpleNames&&!e&&!Te.prefix){let ke=!1;return quicklyValidateIconSet(Te)&&(Te.prefix="",parseIconSet(Te,(Be,Ue)=>{addIcon(Be,Ue)&&(ke=!0)})),ke}const t=Te.prefix;if(!validateIconName({prefix:t,name:"a"}))return!1;const Oe=getStorage(e,t);return!!addIconSet(Oe,Te)}const defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(Te,e,t){if(e===1)return Te;if(t=t||100,typeof Te=="number")return Math.ceil(Te*e*t)/t;if(typeof Te!="string")return Te;const Oe=Te.split(unitsSplit);if(Oe===null||!Oe.length)return Te;const ke=[];let Be=Oe.shift(),Ue=unitsTest.test(Be);for(;;){if(Ue){const He=parseFloat(Be);isNaN(He)?ke.push(Be):ke.push(Math.ceil(He*e*t)/t)}else ke.push(Be);if(Be=Oe.shift(),Be===void 0)return ke.join("");Ue=!Ue}}function splitSVGDefs(Te,e="defs"){let t="";const Oe=Te.indexOf("<"+e);for(;Oe>=0;){const ke=Te.indexOf(">",Oe),Be=Te.indexOf("</"+e);if(ke===-1||Be===-1)break;const Ue=Te.indexOf(">",Be);if(Ue===-1)break;t+=Te.slice(ke+1,Be).trim(),Te=Te.slice(0,Oe).trim()+Te.slice(Ue+1)}return{defs:t,content:Te}}function mergeDefsAndContent(Te,e){return Te?"<defs>"+Te+"</defs>"+e:e}function wrapSVGContent(Te,e,t){const Oe=splitSVGDefs(Te);return mergeDefsAndContent(Oe.defs,e+Oe.content+t)}const isUnsetKeyword=Te=>Te==="unset"||Te==="undefined"||Te==="none";function iconToSVG(Te,e){const t={...defaultIconProps,...Te},Oe={...defaultIconCustomisations,...e},ke={left:t.left,top:t.top,width:t.width,height:t.height};let Be=t.body;[t,Oe].forEach(Bn=>{const ti=[],ni=Bn.hFlip,ii=Bn.vFlip;let si=Bn.rotate;ni?ii?si+=2:(ti.push("translate("+(ke.width+ke.left).toString()+" "+(0-ke.top).toString()+")"),ti.push("scale(-1 1)"),ke.top=ke.left=0):ii&&(ti.push("translate("+(0-ke.left).toString()+" "+(ke.height+ke.top).toString()+")"),ti.push("scale(1 -1)"),ke.top=ke.left=0);let oi;switch(si<0&&(si-=Math.floor(si/4)*4),si=si%4,si){case 1:oi=ke.height/2+ke.top,ti.unshift("rotate(90 "+oi.toString()+" "+oi.toString()+")");break;case 2:ti.unshift("rotate(180 "+(ke.width/2+ke.left).toString()+" "+(ke.height/2+ke.top).toString()+")");break;case 3:oi=ke.width/2+ke.left,ti.unshift("rotate(-90 "+oi.toString()+" "+oi.toString()+")");break}si%2===1&&(ke.left!==ke.top&&(oi=ke.left,ke.left=ke.top,ke.top=oi),ke.width!==ke.height&&(oi=ke.width,ke.width=ke.height,ke.height=oi)),ti.length&&(Be=wrapSVGContent(Be,'<g transform="'+ti.join(" ")+'">',"</g>"))});const Ue=Oe.width,He=Oe.height,We=ke.width,Cn=ke.height;let An,En;Ue===null?(En=He===null?"1em":He==="auto"?Cn:He,An=calculateSize(En,We/Cn)):(An=Ue==="auto"?We:Ue,En=He===null?calculateSize(An,Cn/We):He==="auto"?Cn:He);const Sn={},Tn=(Bn,ti)=>{isUnsetKeyword(ti)||(Sn[Bn]=ti.toString())};Tn("width",An),Tn("height",En);const Ln=[ke.left,ke.top,We,Cn];return Sn.viewBox=Ln.join(" "),{attributes:Sn,viewBox:Ln,body:Be}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(Te,e=randomPrefix){const t=[];let Oe;for(;Oe=regex.exec(Te);)t.push(Oe[1]);if(!t.length)return Te;const ke="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(Be=>{const Ue=typeof e=="function"?e(Be):e+(counter++).toString(),He=Be.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");Te=Te.replace(new RegExp('([#;"])('+He+')([")]|\\.[a-z])',"g"),"$1"+Ue+ke+"$3")}),Te=Te.replace(new RegExp(ke,"g"),""),Te}const storage$1=Object.create(null);function setAPIModule(Te,e){storage$1[Te]=e}function getAPIModule(Te){return storage$1[Te]||storage$1[""]}function createAPIConfig(Te){let e;if(typeof Te.resources=="string")e=[Te.resources];else if(e=Te.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:Te.path||"/",maxURL:Te.maxURL||500,rotate:Te.rotate||750,timeout:Te.timeout||5e3,random:Te.random===!0,index:Te.index||0,dataAfterTimeout:Te.dataAfterTimeout!==!1}}const configStorage=Object.create(null),fallBackAPISources=["https://api.simplesvg.com","https://api.unisvg.com"],fallBackAPI=[];for(;fallBackAPISources.length>0;)fallBackAPISources.length===1||Math.random()>.5?fallBackAPI.push(fallBackAPISources.shift()):fallBackAPI.push(fallBackAPISources.pop());configStorage[""]=createAPIConfig({resources:["https://api.iconify.design"].concat(fallBackAPI)});function addAPIProvider(Te,e){const t=createAPIConfig(e);return t===null?!1:(configStorage[Te]=t,!0)}function getAPIConfig(Te){return configStorage[Te]}const detectFetch=()=>{let Te;try{if(Te=fetch,typeof Te=="function")return Te}catch{}};let fetchModule=detectFetch();function calculateMaxLength(Te,e){const t=getAPIConfig(Te);if(!t)return 0;let Oe;if(!t.maxURL)Oe=0;else{let ke=0;t.resources.forEach(Ue=>{ke=Math.max(ke,Ue.length)});const Be=e+".json?icons=";Oe=t.maxURL-ke-t.path.length-Be.length}return Oe}function shouldAbort(Te){return Te===404}const prepare=(Te,e,t)=>{const Oe=[],ke=calculateMaxLength(Te,e),Be="icons";let Ue={type:Be,provider:Te,prefix:e,icons:[]},He=0;return t.forEach((We,Cn)=>{He+=We.length+1,He>=ke&&Cn>0&&(Oe.push(Ue),Ue={type:Be,provider:Te,prefix:e,icons:[]},He=We.length),Ue.icons.push(We)}),Oe.push(Ue),Oe};function getPath(Te){if(typeof Te=="string"){const e=getAPIConfig(Te);if(e)return e.path}return"/"}const send=(Te,e,t)=>{if(!fetchModule){t("abort",424);return}let Oe=getPath(e.provider);switch(e.type){case"icons":{const Be=e.prefix,He=e.icons.join(","),We=new URLSearchParams({icons:He});Oe+=Be+".json?"+We.toString();break}case"custom":{const Be=e.uri;Oe+=Be.slice(0,1)==="/"?Be.slice(1):Be;break}default:t("abort",400);return}let ke=503;fetchModule(Te+Oe).then(Be=>{const Ue=Be.status;if(Ue!==200){setTimeout(()=>{t(shouldAbort(Ue)?"abort":"next",Ue)});return}return ke=501,Be.json()}).then(Be=>{if(typeof Be!="object"||Be===null){setTimeout(()=>{Be===404?t("abort",Be):t("next",ke)});return}setTimeout(()=>{t("success",Be)})}).catch(()=>{t("next",ke)})},fetchAPIModule={prepare,send};function sortIcons(Te){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);Te.sort((ke,Be)=>ke.provider!==Be.provider?ke.provider.localeCompare(Be.provider):ke.prefix!==Be.prefix?ke.prefix.localeCompare(Be.prefix):ke.name.localeCompare(Be.name));let Oe={provider:"",prefix:"",name:""};return Te.forEach(ke=>{if(Oe.name===ke.name&&Oe.prefix===ke.prefix&&Oe.provider===ke.provider)return;Oe=ke;const Be=ke.provider,Ue=ke.prefix,He=ke.name,We=t[Be]||(t[Be]=Object.create(null)),Cn=We[Ue]||(We[Ue]=getStorage(Be,Ue));let An;He in Cn.icons?An=e.loaded:Ue===""||Cn.missing.has(He)?An=e.missing:An=e.pending;const En={provider:Be,prefix:Ue,name:He};An.push(En)}),e}function removeCallback(Te,e){Te.forEach(t=>{const Oe=t.loaderCallbacks;Oe&&(t.loaderCallbacks=Oe.filter(ke=>ke.id!==e))})}function updateCallbacks(Te){Te.pendingCallbacksFlag||(Te.pendingCallbacksFlag=!0,setTimeout(()=>{Te.pendingCallbacksFlag=!1;const e=Te.loaderCallbacks?Te.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const Oe=Te.provider,ke=Te.prefix;e.forEach(Be=>{const Ue=Be.icons,He=Ue.pending.length;Ue.pending=Ue.pending.filter(We=>{if(We.prefix!==ke)return!0;const Cn=We.name;if(Te.icons[Cn])Ue.loaded.push({provider:Oe,prefix:ke,name:Cn});else if(Te.missing.has(Cn))Ue.missing.push({provider:Oe,prefix:ke,name:Cn});else return t=!0,!0;return!1}),Ue.pending.length!==He&&(t||removeCallback([Te],Be.id),Be.callback(Ue.loaded.slice(0),Ue.missing.slice(0),Ue.pending.slice(0),Be.abort))})}))}let idCounter=0;function storeCallback(Te,e,t){const Oe=idCounter++,ke=removeCallback.bind(null,t,Oe);if(!e.pending.length)return ke;const Be={id:Oe,icons:e,callback:Te,abort:ke};return t.forEach(Ue=>{(Ue.loaderCallbacks||(Ue.loaderCallbacks=[])).push(Be)}),ke}function listToIcons(Te,e=!0,t=!1){const Oe=[];return Te.forEach(ke=>{const Be=typeof ke=="string"?stringToIcon(ke,e,t):ke;Be&&Oe.push(Be)}),Oe}var defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function sendQuery(Te,e,t,Oe){const ke=Te.resources.length,Be=Te.random?Math.floor(Math.random()*ke):Te.index;let Ue;if(Te.random){let vi=Te.resources.slice(0);for(Ue=[];vi.length>1;){const pi=Math.floor(Math.random()*vi.length);Ue.push(vi[pi]),vi=vi.slice(0,pi).concat(vi.slice(pi+1))}Ue=Ue.concat(vi)}else Ue=Te.resources.slice(Be).concat(Te.resources.slice(0,Be));const He=Date.now();let We="pending",Cn=0,An,En=null,Sn=[],Tn=[];typeof Oe=="function"&&Tn.push(Oe);function Ln(){En&&(clearTimeout(En),En=null)}function Bn(){We==="pending"&&(We="aborted"),Ln(),Sn.forEach(vi=>{vi.status==="pending"&&(vi.status="aborted")}),Sn=[]}function ti(vi,pi){pi&&(Tn=[]),typeof vi=="function"&&Tn.push(vi)}function ni(){return{startTime:He,payload:e,status:We,queriesSent:Cn,queriesPending:Sn.length,subscribe:ti,abort:Bn}}function ii(){We="failed",Tn.forEach(vi=>{vi(void 0,An)})}function si(){Sn.forEach(vi=>{vi.status==="pending"&&(vi.status="aborted")}),Sn=[]}function oi(vi,pi,fi){const Mi=pi!=="success";switch(Sn=Sn.filter(Oi=>Oi!==vi),We){case"pending":break;case"failed":if(Mi||!Te.dataAfterTimeout)return;break;default:return}if(pi==="abort"){An=fi,ii();return}if(Mi){An=fi,Sn.length||(Ue.length?ci():ii());return}if(Ln(),si(),!Te.random){const Oi=Te.resources.indexOf(vi.resource);Oi!==-1&&Oi!==Te.index&&(Te.index=Oi)}We="completed",Tn.forEach(Oi=>{Oi(fi)})}function ci(){if(We!=="pending")return;Ln();const vi=Ue.shift();if(vi===void 0){if(Sn.length){En=setTimeout(()=>{Ln(),We==="pending"&&(si(),ii())},Te.timeout);return}ii();return}const pi={status:"pending",resource:vi,callback:(fi,Mi)=>{oi(pi,fi,Mi)}};Sn.push(pi),Cn++,En=setTimeout(ci,Te.rotate),t(vi,e,pi.callback)}return setTimeout(ci),ni}function initRedundancy(Te){const e={...defaultConfig,...Te};let t=[];function Oe(){t=t.filter(He=>He().status==="pending")}function ke(He,We,Cn){const An=sendQuery(e,He,We,(En,Sn)=>{Oe(),Cn&&Cn(En,Sn)});return t.push(An),An}function Be(He){return t.find(We=>He(We))||null}return{query:ke,find:Be,setIndex:He=>{e.index=He},getIndex:()=>e.index,cleanup:Oe}}function emptyCallback$1(){}const redundancyCache=Object.create(null);function getRedundancyCache(Te){if(!redundancyCache[Te]){const e=getAPIConfig(Te);if(!e)return;const t=initRedundancy(e),Oe={config:e,redundancy:t};redundancyCache[Te]=Oe}return redundancyCache[Te]}function sendAPIQuery(Te,e,t){let Oe,ke;if(typeof Te=="string"){const Be=getAPIModule(Te);if(!Be)return t(void 0,424),emptyCallback$1;ke=Be.send;const Ue=getRedundancyCache(Te);Ue&&(Oe=Ue.redundancy)}else{const Be=createAPIConfig(Te);if(Be){Oe=initRedundancy(Be);const Ue=Te.resources?Te.resources[0]:"",He=getAPIModule(Ue);He&&(ke=He.send)}}return!Oe||!ke?(t(void 0,424),emptyCallback$1):Oe.query(e,ke,t)().abort}function emptyCallback(){}function loadedNewIcons(Te){Te.iconsLoaderFlag||(Te.iconsLoaderFlag=!0,setTimeout(()=>{Te.iconsLoaderFlag=!1,updateCallbacks(Te)}))}function checkIconNamesForAPI(Te){const e=[],t=[];return Te.forEach(Oe=>{(Oe.match(matchIconName)?e:t).push(Oe)}),{valid:e,invalid:t}}function parseLoaderResponse(Te,e,t){function Oe(){const ke=Te.pendingIcons;e.forEach(Be=>{ke&&ke.delete(Be),Te.icons[Be]||Te.missing.add(Be)})}if(t&&typeof t=="object")try{if(!addIconSet(Te,t).length){Oe();return}}catch(ke){console.error(ke)}Oe(),loadedNewIcons(Te)}function parsePossiblyAsyncResponse(Te,e){Te instanceof Promise?Te.then(t=>{e(t)}).catch(()=>{e(null)}):e(Te)}function loadNewIcons(Te,e){Te.iconsToLoad?Te.iconsToLoad=Te.iconsToLoad.concat(e).sort():Te.iconsToLoad=e,Te.iconsQueueFlag||(Te.iconsQueueFlag=!0,setTimeout(()=>{Te.iconsQueueFlag=!1;const{provider:t,prefix:Oe}=Te,ke=Te.iconsToLoad;if(delete Te.iconsToLoad,!ke||!ke.length)return;const Be=Te.loadIcon;if(Te.loadIcons&&(ke.length>1||!Be)){parsePossiblyAsyncResponse(Te.loadIcons(ke,Oe,t),An=>{parseLoaderResponse(Te,ke,An)});return}if(Be){ke.forEach(An=>{const En=Be(An,Oe,t);parsePossiblyAsyncResponse(En,Sn=>{const Tn=Sn?{prefix:Oe,icons:{[An]:Sn}}:null;parseLoaderResponse(Te,[An],Tn)})});return}const{valid:Ue,invalid:He}=checkIconNamesForAPI(ke);if(He.length&&parseLoaderResponse(Te,He,null),!Ue.length)return;const We=Oe.match(matchIconName)?getAPIModule(t):null;if(!We){parseLoaderResponse(Te,Ue,null);return}We.prepare(t,Oe,Ue).forEach(An=>{sendAPIQuery(t,An,En=>{parseLoaderResponse(Te,An.icons,En)})})}))}const loadIcons=(Te,e)=>{const t=listToIcons(Te,!0,allowSimpleNames()),Oe=sortIcons(t);if(!Oe.pending.length){let We=!0;return e&&setTimeout(()=>{We&&e(Oe.loaded,Oe.missing,Oe.pending,emptyCallback)}),()=>{We=!1}}const ke=Object.create(null),Be=[];let Ue,He;return Oe.pending.forEach(We=>{const{provider:Cn,prefix:An}=We;if(An===He&&Cn===Ue)return;Ue=Cn,He=An,Be.push(getStorage(Cn,An));const En=ke[Cn]||(ke[Cn]=Object.create(null));En[An]||(En[An]=[])}),Oe.pending.forEach(We=>{const{provider:Cn,prefix:An,name:En}=We,Sn=getStorage(Cn,An),Tn=Sn.pendingIcons||(Sn.pendingIcons=new Set);Tn.has(En)||(Tn.add(En),ke[Cn][An].push(En))}),Be.forEach(We=>{const Cn=ke[We.provider][We.prefix];Cn.length&&loadNewIcons(We,Cn)}),e?storeCallback(e,Oe,Be):emptyCallback};function mergeCustomisations(Te,e){const t={...Te};for(const Oe in e){const ke=e[Oe],Be=typeof ke;Oe in defaultIconSizeCustomisations?(ke===null||ke&&(Be==="string"||Be==="number"))&&(t[Oe]=ke):Be===typeof t[Oe]&&(t[Oe]=Oe==="rotate"?ke%4:ke)}return t}const separator=/[\s,]+/;function flipFromString(Te,e){e.split(separator).forEach(t=>{switch(t.trim()){case"horizontal":Te.hFlip=!0;break;case"vertical":Te.vFlip=!0;break}})}function rotateFromString(Te,e=0){const t=Te.replace(/^-?[0-9.]*/,"");function Oe(ke){for(;ke<0;)ke+=4;return ke%4}if(t===""){const ke=parseInt(Te);return isNaN(ke)?0:Oe(ke)}else if(t!==Te){let ke=0;switch(t){case"%":ke=25;break;case"deg":ke=90}if(ke){let Be=parseFloat(Te.slice(0,Te.length-t.length));return isNaN(Be)?0:(Be=Be/ke,Be%1===0?Oe(Be):0)}}return e}function iconToHTML(Te,e){let t=Te.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const Oe in e)t+=" "+Oe+'="'+e[Oe]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+Te+"</svg>"}function encodeSVGforURL(Te){return Te.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function svgToData(Te){return"data:image/svg+xml,"+encodeSVGforURL(Te)}function svgToURL(Te){return'url("'+svgToData(Te)+'")'}const defaultExtendedIconCustomisations={...defaultIconCustomisations,inline:!1},svgDefaults={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},commonProps={display:"inline-block"},monotoneProps={backgroundColor:"currentColor"},coloredProps={backgroundColor:"transparent"},propsToAdd={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},propsToAddTo={webkitMask:monotoneProps,mask:monotoneProps,background:coloredProps};for(const Te in propsToAddTo){const e=propsToAddTo[Te];for(const t in propsToAdd)e[Te+t]=propsToAdd[t]}const customisationAliases={};["horizontal","vertical"].forEach(Te=>{const e=Te.slice(0,1)+"Flip";customisationAliases[Te+"-flip"]=e,customisationAliases[Te.slice(0,1)+"-flip"]=e,customisationAliases[Te+"Flip"]=e});function fixSize(Te){return Te+(Te.match(/^[-0-9.]+$/)?"px":"")}const render$2=(Te,e)=>{const t=mergeCustomisations(defaultExtendedIconCustomisations,e),Oe={...svgDefaults},ke=e.mode||"svg",Be={},Ue=e.style,He=typeof Ue=="object"&&!(Ue instanceof Array)?Ue:{};for(let Bn in e){const ti=e[Bn];if(ti!==void 0)switch(Bn){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[Bn]=ti===!0||ti==="true"||ti===1;break;case"flip":typeof ti=="string"&&flipFromString(t,ti);break;case"color":Be.color=ti;break;case"rotate":typeof ti=="string"?t[Bn]=rotateFromString(ti):typeof ti=="number"&&(t[Bn]=ti);break;case"ariaHidden":case"aria-hidden":ti!==!0&&ti!=="true"&&delete Oe["aria-hidden"];break;default:{const ni=customisationAliases[Bn];ni?(ti===!0||ti==="true"||ti===1)&&(t[ni]=!0):defaultExtendedIconCustomisations[Bn]===void 0&&(Oe[Bn]=ti)}}}const We=iconToSVG(Te,t),Cn=We.attributes;if(t.inline&&(Be.verticalAlign="-0.125em"),ke==="svg"){Oe.style={...Be,...He},Object.assign(Oe,Cn);let Bn=0,ti=e.id;return typeof ti=="string"&&(ti=ti.replace(/-/g,"_")),Oe.innerHTML=replaceIDs(We.body,ti?()=>ti+"ID"+Bn++:"iconifyVue"),h$1("svg",Oe)}const{body:An,width:En,height:Sn}=Te,Tn=ke==="mask"||(ke==="bg"?!1:An.indexOf("currentColor")!==-1),Ln=iconToHTML(An,{...Cn,width:En+"",height:Sn+""});return Oe.style={...Be,"--svg":svgToURL(Ln),width:fixSize(Cn.width),height:fixSize(Cn.height),...commonProps,...Tn?monotoneProps:coloredProps,...He},h$1("span",Oe)};allowSimpleNames(!0);setAPIModule("",fetchAPIModule);if(typeof document<"u"&&typeof window<"u"){const Te=window;if(Te.IconifyPreload!==void 0){const e=Te.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(Oe=>{try{(typeof Oe!="object"||Oe===null||Oe instanceof Array||typeof Oe.icons!="object"||typeof Oe.prefix!="string"||!addCollection(Oe))&&console.error(t)}catch{console.error(t)}})}if(Te.IconifyProviders!==void 0){const e=Te.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const Oe="IconifyProviders["+t+"] is invalid.";try{const ke=e[t];if(typeof ke!="object"||!ke||ke.resources===void 0)continue;addAPIProvider(t,ke)||console.error(Oe)}catch{console.error(Oe)}}}}const emptyIcon={...defaultIconProps,body:""},Icon$1=defineComponent({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(Te,e,t){if(typeof Te=="object"&&Te!==null&&typeof Te.body=="string")return this._name="",this.abortLoading(),{data:Te};let Oe;if(typeof Te!="string"||(Oe=stringToIcon(Te,!1,!0))===null)return this.abortLoading(),null;let ke=getIconData(Oe);if(!ke)return(!this._loadingIcon||this._loadingIcon.name!==Te)&&(this.abortLoading(),this._name="",ke!==null&&(this._loadingIcon={name:Te,abort:loadIcons([Oe],()=>{this.counter++})})),null;if(this.abortLoading(),this._name!==Te&&(this._name=Te,e&&e(Te)),t){ke=Object.assign({},ke);const Ue=t(ke.body,Oe.name,Oe.prefix,Oe.provider);typeof Ue=="string"&&(ke.body=Ue)}const Be=["iconify"];return Oe.prefix!==""&&Be.push("iconify--"+Oe.prefix),Oe.provider!==""&&Be.push("iconify--"+Oe.provider),{data:ke,classes:Be}}},render(){this.counter;const Te=this.$attrs,e=this.iconMounted||Te.ssr?this.getIcon(Te.icon,Te.onLoad,Te.customise):null;if(!e)return render$2(emptyIcon,Te);let t=Te;return e.classes&&(t={...Te,class:(typeof Te.class=="string"?Te.class+" ":"")+e.classes.join(" ")}),render$2({...defaultIconProps,...e.data},t)}}),rt$1=Symbol("accordions"),nt$1=Symbol("header"),Ke=Symbol("tabs"),ye$1=()=>{const Te=ref(),e=ref(!1),t=ref(!1),Oe=()=>{if(!Te.value)return;Te.value.style.setProperty("--collapser","none");const ke=Te.value.offsetHeight;Te.value.style.setProperty("--collapse",`${-ke}px`),Te.value.style.setProperty("--collapser","")};return{collapse:Te,collapsing:e,cssExpanded:t,doExpand:ke=>{Te.value&&(ke===!0&&Te.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,Oe(),window.requestAnimationFrame(()=>{t.value=ke})}))},adjust:Oe,onTransitionEnd:(ke,Be=!0)=>{var Ue,He;e.value=!1,Be&&((He=(Ue=Te.value)==null?void 0:Ue.querySelector("a"))==null||He.focus()),Te.value&&ke===!1&&Te.value.style.removeProperty("--collapse-max-height")}}},ba="(prefers-color-scheme: dark)",ha="vue-dsfr-scheme";let Ce;const Me="light",Se="dark",De="system",ot$1="data-fr-theme",Xe=Te=>{const e=Te??(localStorage.getItem(Ce)||De);return[Me,Se,De].includes(e)?e:De},it$1=(Te,e)=>(Te=Xe(Te),Te===De?e!=null&&e.matches?Se:Me:Te),ef=Te=>{if(typeof window>"u")return;Ce=ha;const e={scheme:localStorage.getItem(Ce)||De,dataThemeAttribute:ot$1,...Te},t=window.matchMedia&&window.matchMedia(ba),Oe=ref(Xe(e.scheme));localStorage.setItem(Ce,Oe.value);const ke=ref(it$1(Oe.value,t)),Be=ref(Oe.value!==De);watchEffect(()=>{var An;(An=document.body.parentElement)==null||An.setAttribute(e.dataThemeAttribute||ot$1,ke.value)}),t==null||t.addEventListener("change",An=>{Be.value||(An.matches?ke.value=Se:ke.value=Me)}),!Be.value&&t!=null&&t.matches&&(ke.value=Se);const Ue=An=>{if(Oe.value=Xe(An),localStorage.setItem(Ce,Oe.value),[Me,Se].includes(Oe.value)){ke.value=Oe.value,Be.value=!0;return}ke.value=it$1(Oe.value,t),Be.value=!1},He=document.documentElement,We={subtree:!1,childList:!1,attributes:!0},Cn=new MutationObserver(An=>{for(const En of An)if(En.type==="attributes"&&En.attributeName==="data-fr-theme"){const Sn=En.target.getAttribute(En.attributeName);Sn!==Oe.value&&Ue(Sn)}});return Cn.observe(He,We),window.addEventListener("unload",()=>Cn.disconnect()),Ue(Oe.value),{setScheme:Ue,theme:computed(()=>ke.value),scheme:computed(()=>Oe.value)}},x$3=(Te="",e="")=>(Te?`${Te}-`:"")+useId()+(e?`-${e}`:""),$a={class:"fr-accordion"},wa=["aria-expanded","aria-controls"],_a$1=["id"],Da=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>x$3("accordion")},selected:{type:Boolean},title:{default:"Sans intitulé"},titleTag:{default:"h3"}},setup(Te){const e=Te,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=ye$1(),He=ref(),We=inject(rt$1),{isActive:Cn,expand:An}=(We==null?void 0:We(toRef(()=>e.title)))??{isActive:He,expand:()=>He.value=!He.value};return onMounted(()=>{Cn.value&&Be(!0)}),watch(Cn,(En,Sn)=>{En!==Sn&&Be(En)}),(En,Sn)=>(openBlock(),createElementBlock("section",$a,[(openBlock(),createBlock(resolveDynamicComponent(En.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":unref(Cn),"aria-controls":En.id,type:"button",onClick:Sn[0]||(Sn[0]=Tn=>unref(An)())},[renderSlot(En.$slots,"title",{},()=>[createTextVNode(toDisplayString(En.title),1)])],8,wa)]),_:3})),createBaseVNode("div",{id:En.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),onTransitionend:Sn[1]||(Sn[1]=Tn=>unref(Ue)(unref(Cn),!1))},[renderSlot(En.$slots,"default")],42,_a$1)]))}}),Ia={class:"fr-accordions-group"},Ta=defineComponent({__name:"DsfrAccordionsGroup",props:{modelValue:{default:-1}},emits:["update:modelValue"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=computed({get:()=>t.modelValue,set(He){Oe("update:modelValue",He)}}),Be=ref(new Map),Ue=ref(0);return provide(rt$1,He=>{const We=Ue.value++;Be.value.set(We,He.value);const Cn=computed(()=>We===ke.value);watch(He,()=>{Be.value.set(We,He.value)});function An(){if(ke.value===We){ke.value=-1;return}ke.value=We}return onUnmounted(()=>{Be.value.delete(We)}),{isActive:Cn,expand:An}}),(He,We)=>(openBlock(),createElementBlock("div",Ia,[renderSlot(He.$slots,"default")]))}}),Ea=["id","role"],Ca=["title","aria-label"],Sa=defineComponent({__name:"DsfrAlert",props:{alert:{type:Boolean},closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>x$3("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=()=>Oe("close"),Be=computed(()=>[`fr-alert--${t.type}`,{"fr-alert--sm":t.small}]);return(Ue,He)=>Ue.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:Ue.id,class:normalizeClass(["fr-alert",Be.value]),role:Ue.alert?"alert":void 0},[Ue.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(Ue.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(Ue.title),1)]),_:1})),renderSlot(Ue.$slots,"default",{},()=>[createTextVNode(toDisplayString(Ue.description),1)]),Ue.closeable?(openBlock(),createElementBlock("button",{key:1,class:"fr-btn fr-btn--close",title:Ue.closeButtonLabel,"aria-label":Ue.closeButtonLabel,onClick:ke},null,8,Ca)):createCommentVNode("",!0)],10,Ea))}}),Va=defineComponent({__name:"VIcon",props:{name:{},scale:{default:1},verticalAlign:{default:"-0.2em"},animation:{},speed:{},flip:{},label:{},title:{},color:{},fill:{},inverse:{type:Boolean},ssr:{type:Boolean},display:{default:"inline-block"}},setup(Te){useCssVars(We=>({"177d0d84":He.value}));const e=Te,t=ref(null),Oe=computed(()=>`${+e.scale*1.2}rem`),ke=computed(()=>e.flip==="both"?"horizontal,vertical":e.flip);watch(()=>e.title,Be);async function Be(){var We,Cn,An,En;if(!((We=t.value)!=null&&We.$el))return;const Sn=!!((Cn=t.value)==null?void 0:Cn.$el).querySelector("title"),Tn=document.createElement("title");if(!e.title){Tn.remove();return}Tn.innerHTML=e.title,await nextTick(),Sn||(En=((An=t.value)==null?void 0:An.$el).firstChild)==null||En.before(Tn)}onMounted(Be);const Ue=computed(()=>{var We;return(We=e.name)!=null&&We.startsWith("vi-")?e.name.replace(/vi-(.*)/,"vscode-icons:$1"):e.name??""}),He=computed(()=>e.color??e.fill??"inherit");return(We,Cn)=>(openBlock(),createBlock(unref(Icon$1),{ref_key:"icon",ref:t,icon:Ue.value,style:normalizeStyle({fontSize:Oe.value,verticalAlign:We.verticalAlign,display:We.display}),"aria-label":We.label,class:normalizeClass(["vicon",{"vicon-spin":e.animation==="spin","vicon-wrench":e.animation==="wrench","vicon-pulse":e.animation==="pulse","vicon-spin-pulse":e.animation==="spin-pulse","vicon-flash":e.animation==="flash","vicon-float":e.animation==="float","vicon-ring":e.animation==="ring","vicon-slow":e.speed==="slow","vicon-fast":e.speed==="fast","vicon-inverse":e.inverse}]),flip:ke.value,ssr:We.ssr},null,8,["icon","style","aria-label","class","flip","ssr"]))}}),ie$1=(Te,e)=>{const t=Te.__vccOpts||Te;for(const[Oe,ke]of e)t[Oe]=ke;return t},ue$1=ie$1(Va,[["__scopeId","data-v-73a1cd7e"]]),ja=["title","disabled","aria-disabled"],Oa={key:1},Ha=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(Te,{expose:e}){const t=Te,Oe=computed(()=>["sm","small"].includes(t.size)),ke=computed(()=>["md","medium"].includes(t.size)),Be=computed(()=>["lg","large"].includes(t.size)),Ue=ref(null);e({focus:()=>{var An;(An=Ue.value)==null||An.focus()}});const He=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),We=computed(()=>t.iconOnly?1.25:.8325),Cn=computed(()=>typeof t.icon=="string"?{scale:We.value,name:t.icon}:{scale:We.value,...t.icon});return(An,En)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:Ue,class:normalizeClass(["fr-btn",{"fr-btn--secondary":An.secondary&&!An.tertiary,"fr-btn--tertiary":An.tertiary&&!An.secondary&&!An.noOutline,"fr-btn--tertiary-no-outline":An.tertiary&&!An.secondary&&An.noOutline,"fr-btn--sm":Oe.value,"fr-btn--md":ke.value,"fr-btn--lg":Be.value,"fr-btn--icon-right":!An.iconOnly&&He.value&&An.iconRight,"fr-btn--icon-left":!An.iconOnly&&He.value&&!An.iconRight,"inline-flex":!He.value,reverse:An.iconRight&&!He.value,"justify-center":!He.value&&An.iconOnly,[An.icon]:He.value}]),title:An.iconOnly?An.label:void 0,disabled:An.disabled,"aria-disabled":An.disabled,style:normalizeStyle(!He.value&&An.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:En[0]||(En[0]=Sn=>An.onClick?An.onClick(Sn):()=>{})},[An.icon&&!He.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Cn.value)),null,16)):createCommentVNode("",!0),An.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",Oa,[createTextVNode(toDisplayString(An.label)+" ",1),renderSlot(An.$slots,"default",{},void 0,!0)]))],14,ja))}}),Ie=ie$1(Ha,[["__scopeId","data-v-118397f5"]]),qe=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(Te){const e=Te,t=ref(null),Oe=computed(()=>["sm","small"].includes(e.size)),ke=computed(()=>["md","medium"].includes(e.size)),Be=computed(()=>["lg","large"].includes(e.size)),Ue=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),He=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),We=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),Cn=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),An=computed(()=>e.align==="center"),En=computed(()=>e.align==="right"),Sn=ref("auto"),Tn=computed(()=>`--equisized-width: ${Sn.value};`),Ln=async()=>{var Bn;let ti=0;await new Promise(ni=>setTimeout(ni,100)),(Bn=t.value)==null||Bn.querySelectorAll(".fr-btn").forEach(ni=>{const ii=ni,si=ii.offsetWidth,oi=window.getComputedStyle(ii),ci=+oi.marginLeft.replace("px",""),vi=+oi.marginRight.replace("px","");ii.style.width="var(--equisized-width)";const pi=si+ci+vi;pi>ti&&(ti=pi)}),Sn.value=`${ti}px`};return onMounted(async()=>{!t.value||!e.equisized||await Ln()}),(Bn,ti)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:t,style:normalizeStyle(Tn.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":Bn.equisized,"fr-btns-group--sm":Oe.value,"fr-btns-group--md":ke.value,"fr-btns-group--lg":Be.value,"fr-btns-group--inline-sm":Ue.value||He.value,"fr-btns-group--inline-md":Ue.value||We.value,"fr-btns-group--inline-lg":Ue.value||Cn.value,"fr-btns-group--center":An.value,"fr-btns-group--right":En.value,"fr-btns-group--icon-right":Bn.iconRight,"fr-btns-group--inline-reverse":Bn.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Bn.buttons,({onClick:ni,...ii},si)=>(openBlock(),createElementBlock("li",{key:si},[createVNode(Ie,mergeProps({ref_for:!0},ii,{onClick:ni}),null,16,["onClick"])]))),128)),renderSlot(Bn.$slots,"default")],6))}}),ls=["id","name","value","checked","required","data-testid","data-test","tabindex"],os=["for"],is={key:0,class:"required"},ds={key:0,class:"fr-hint-text"},us={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},fs=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:mergeModels({id:{default:()=>x$3("basic","checkbox")},name:{},required:{type:Boolean},value:{},checked:{type:Boolean},modelValue:{},small:{type:Boolean},inline:{type:Boolean},readonly:{type:Boolean},readonlyOpacity:{default:.75},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Te){useCssVars(Be=>({"5f542ece":Be.readonlyOpacity}));const e=Te,t=computed(()=>e.errorMessage||e.validMessage),Oe=computed(()=>e.errorMessage?"fr-error-text":"fr-valid-text"),ke=useModel(Te,"modelValue");return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Be.inline,readonly:Be.readonly}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":Be.errorMessage,"fr-checkbox-group--valid":!Be.errorMessage&&Be.validMessage,"fr-checkbox-group--sm":Be.small}])},[withDirectives(createBaseVNode("input",mergeProps({id:Be.id,"onUpdate:modelValue":Ue[0]||(Ue[0]=He=>ke.value=He),name:Be.name,type:"checkbox",value:Be.value,checked:ke.value===!0||Array.isArray(ke.value)&&ke.value.includes(Be.value),required:Be.required},Be.$attrs,{"data-testid":`input-checkbox-${Be.id}`,"data-test":`input-checkbox-${Be.id}`,tabindex:Be.readonly?-1:void 0}),null,16,ls),[[vModelCheckbox,ke.value]]),createBaseVNode("label",{for:Be.id,class:"fr-label"},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.required?(openBlock(),createElementBlock("span",is," *")):createCommentVNode("",!0)],!0)],!0),Be.hint?(openBlock(),createElementBlock("span",ds,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],8,os),t.value?(openBlock(),createElementBlock("div",us,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Oe.value])},toDisplayString(t.value),3)])):createCommentVNode("",!0)],2)],2))}}),lt$2=ie$1(fs,[["__scopeId","data-v-18fa6c7b"]]),hs={class:"fr-consent-banner__content"},ys={class:"fr-text--sm"},ks={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},$s=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(Te){const e=Te,t=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),Oe=computed(()=>e.url?t.value?"a":"RouterLink":"a"),ke=computed(()=>({[t.value?"href":"to"]:e.url}));return(Be,Ue)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",hs,[createBaseVNode("p",ys,[renderSlot(Be.$slots,"default",{},()=>[Ue[4]||(Ue[4]=createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page ")),(openBlock(),createBlock(resolveDynamicComponent(Oe.value),mergeProps(ke.value,{"data-testid":"link"}),{default:withCtx(()=>Ue[3]||(Ue[3]=[createTextVNode(" Données personnelles et cookies ")])),_:1},16)),Ue[5]||(Ue[5]=createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. "))])])]),createBaseVNode("ul",ks,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:Ue[0]||(Ue[0]=withModifiers(He=>Be.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:Ue[1]||(Ue[1]=withModifiers(He=>Be.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:Ue[2]||(Ue[2]=withModifiers(He=>Be.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),ut$1=1,St=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},title:{}},setup(Te){const e=Te,t=computed(()=>{var An;return(An=e.href)==null?void 0:An.startsWith("http")}),Oe=computed(()=>{var An;return(An=e.href)==null?void 0:An.startsWith("mailto")}),ke=computed(()=>e.button?"button":t.value||Oe.value?"a":"RouterLink"),Be=computed(()=>{if(!(!t.value&&!Oe.value))return e.href}),Ue=computed(()=>{if(!(t.value||Oe.value))return e.to}),He=computed(()=>Ue.value?{to:Ue.value}:{href:Be.value}),We=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Cn=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ut$1,...e.iconAttrs??{}}:{scale:ut$1,...e.icon??{},...e.iconAttrs??{}});return(An,En)=>(openBlock(),createBlock(resolveDynamicComponent(ke.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":We.value&&An.iconRight,"fr-btn--icon-left":We.value&&!An.iconRight,[String(An.icon)]:We.value}]},He.value,{target:An.target,onClick:withModifiers(An.onClick,["stop"])}),{default:withCtx(()=>{var Sn,Tn;return[!We.value&&(An.icon||(Sn=An.iconAttrs)!=null&&Sn.name)&&!An.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},Cn.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(An.label)+" ",1),!We.value&&(An.icon||(Tn=An.iconAttrs)!=null&&Tn.name)&&An.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},Cn.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Ur={class:"fr-footer__partners"},Yr={key:0,class:"fr-footer__partners-title"},Zr={class:"fr-footer__partners-logos"},Jr={key:0,class:"fr-footer__partners-main"},xr=["href"],en=["src","alt"],tn={class:"fr-footer__partners-sub"},an=["href"],sn=["src","alt"],At$2=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(Te){return(e,t)=>(openBlock(),createElementBlock("div",Ur,[e.title?(openBlock(),createElementBlock("h4",Yr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",Zr,[e.mainPartner?(openBlock(),createElementBlock("div",Jr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,en)],8,xr)])):createCommentVNode("",!0),createBaseVNode("div",tn,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(Oe,ke)=>(openBlock(),createElementBlock("li",{key:ke},[createBaseVNode("a",{class:"fr-footer__partners-link",href:Oe.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:Oe.logo,alt:Oe.name},null,8,sn)],8,an)]))),128))])])])]))}}),rn=["innerHTML"],Ne$1=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(Te){const e=Te,t=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(Oe,ke)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":Oe.small&&!Oe.large,"fr-logo--lg":Oe.large&&!Oe.small}]),innerHTML:t.value},null,10,rn))}}),nn={id:"footer",class:"fr-footer",role:"contentinfo"},ln$1={key:0,class:"fr-footer__top"},on$1={class:"fr-container"},dn={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},un={class:"fr-container"},fn={class:"fr-footer__body"},cn={key:0,class:"fr-footer__brand fr-enlarge-link"},pn=["href"],vn=["src","alt"],mn=["src","alt"],gn={key:1,class:"fr-footer__brand fr-enlarge-link"},bn={class:"fr-footer__content"},hn={class:"fr-footer__content-desc"},yn={class:"fr-footer__content-list"},kn=["href","title"],$n={class:"fr-footer__bottom"},wn={class:"fr-footer__bottom-list"},_n={key:0,class:"fr-footer__bottom-copy"},Dn=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:Te=>[{label:`Accessibilité : ${Te.a11yCompliance}`,to:Te.a11yComplianceLink},{label:"Mentions légales",to:Te.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:Te.personalDataLink},{label:"Gestion des cookies",to:Te.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"info.gouv.fr",href:"https://info.gouv.fr",title:"Informations gouvernementales, nouvelle fenêtre"},{label:"service-public.fr",href:"https://service-public.fr",title:"Informations et démarches administratives, nouvelle fenêtre"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr",title:"Service public de diffusion du droit, nouvelle fenêtre"},{label:"data.gouv.fr",href:"https://data.gouv.fr",title:"Plateforme des données publiques, nouvelle fenêtre"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous"},licenceName:{default:"licence etalab-2.0"}},setup(Te){const e=Te,t=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),Oe=useSlots(),ke=computed(()=>{var An;return(An=Oe["footer-link-lists"])==null?void 0:An.call(Oe)}),Be=computed(()=>{const An=e.licenceTo||e.licenceLinkProps.to;return An&&typeof An=="string"&&An.startsWith("http")}),Ue=computed(()=>{const{to:An,href:En,...Sn}=e.licenceLinkProps??{};return Sn}),He=computed(()=>Be.value?"":e.licenceTo),We=computed(()=>Be.value?e.licenceTo:""),Cn=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(An,En)=>{const Sn=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",nn,[ke.value?(openBlock(),createElementBlock("div",ln$1,[createBaseVNode("div",on$1,[createBaseVNode("div",dn,[renderSlot(An.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",un,[createBaseVNode("div",fn,[An.operatorImgSrc?(openBlock(),createElementBlock("div",cn,[createVNode(Ne$1,{"logo-text":An.logoText},null,8,["logo-text"]),Cn.value?(openBlock(),createElementBlock("a",{key:0,href:An.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(An.operatorImgStyle),src:An.operatorImgSrc,alt:An.operatorImgAlt},null,12,vn)],8,pn)):(openBlock(),createBlock(Sn,{key:1,class:"fr-footer__brand-link",to:An.homeLink,title:An.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(An.operatorImgStyle),src:An.operatorImgSrc,alt:An.operatorImgAlt},null,12,mn)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",gn,[createVNode(Sn,{to:An.homeLink,title:An.homeTitle},{default:withCtx(()=>[createVNode(Ne$1,{"logo-text":An.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",bn,[createBaseVNode("p",hn,[renderSlot(An.$slots,"description",{},()=>[createTextVNode(toDisplayString(An.descText),1)],!0)]),createBaseVNode("ul",yn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(An.ecosystemLinks,({href:Tn,label:Ln,title:Bn,...ti},ni)=>(openBlock(),createElementBlock("li",{key:ni,class:"fr-footer__content-item"},[createBaseVNode("a",mergeProps({class:"fr-footer__content-link",href:Tn,target:"_blank",rel:"noopener noreferrer",title:Bn,ref_for:!0},ti),toDisplayString(Ln),17,kn)]))),128))])])]),An.partners?(openBlock(),createBlock(At$2,normalizeProps(mergeProps({key:0},An.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",$n,[createBaseVNode("ul",wn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(Tn,Ln)=>(openBlock(),createElementBlock("li",{key:Ln,class:"fr-footer__bottom-item"},[createVNode(St,mergeProps({ref_for:!0},Tn),null,16)]))),128))]),An.licenceText?(openBlock(),createElementBlock("div",_n,[createBaseVNode("p",null,[createTextVNode(toDisplayString(An.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Be.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Be.value?void 0:He.value,href:Be.value?We.value:void 0,target:Be.value?"_blank":void 0,title:Be.value?`${An.licenceName} (nouvelle fenêtre)`:An.licenceName,rel:"noopener noreferrer"},Ue.value),{default:withCtx(()=>[createTextVNode(toDisplayString(An.licenceName),1)]),_:1},16,["to","href","target","title"]))])])):createCommentVNode("",!0)])])])}}}),In$2=ie$1(Dn,[["__scopeId","data-v-4030eed5"]]),Pn={role:"navigation",class:"fr-translate fr-nav"},Mn={class:"fr-nav__item"},Nn=["aria-controls","aria-expanded"],Fn={class:"fr-hidden-lg"},Rn=["id"],Vn={class:"fr-menu__list"},jn=["hreflang","lang","aria-current","href","onClick"],Ye=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>x$3("language-selector")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(Te,{emit:e}){const t=Te,Oe=e,{collapse:ke,collapsing:Be,cssExpanded:Ue,doExpand:He,onTransitionEnd:We}=ye$1(),Cn=ref(!1);function An(Sn){Cn.value=!1,Oe("select",Sn)}const En=computed(()=>t.languages.find(({codeIso:Sn})=>Sn===t.currentLanguage));return watch(Cn,(Sn,Tn)=>{Sn!==Tn&&He(Sn)}),(Sn,Tn)=>{var Ln,Bn;return openBlock(),createElementBlock("nav",Pn,[createBaseVNode("div",Mn,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":Sn.id,"aria-expanded":Cn.value,title:"Sélectionner une langue",type:"button",onClick:Tn[0]||(Tn[0]=withModifiers(ti=>Cn.value=!Cn.value,["prevent","stop"]))},[createTextVNode(toDisplayString((Ln=En.value)==null?void 0:Ln.codeIso.toUpperCase()),1),createBaseVNode("span",Fn," - "+toDisplayString((Bn=En.value)==null?void 0:Bn.label),1)],8,Nn),createBaseVNode("div",{id:Sn.id,ref_key:"collapse",ref:ke,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(Ue),"fr-collapsing":unref(Be)}]),onTransitionend:Tn[1]||(Tn[1]=ti=>unref(We)(Cn.value))},[createBaseVNode("ul",Vn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Sn.languages,(ti,ni)=>(openBlock(),createElementBlock("li",{key:ni},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:ti.codeIso,lang:ti.codeIso,"aria-current":Sn.currentLanguage===ti.codeIso?!0:void 0,href:`#${ti.codeIso}`,onClick:withModifiers(ii=>An(ti),["prevent","stop"])},toDisplayString(`${ti.codeIso.toUpperCase()} - ${ti.label}`),9,jn)]))),128))])],42,Rn)])])}}}),On=["for"],Hn={key:0,class:"required"},Kn={key:0,class:"fr-hint-text"},qn=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>x$3("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(Te,{expose:e}){const t=Te,Oe=useAttrs(),ke=ref(null),Be=()=>{var Cn;return(Cn=ke.value)==null?void 0:Cn.focus()},Ue=computed(()=>t.isTextarea?"textarea":"input"),He=computed(()=>t.isWithWrapper||Oe.type==="date"||!!t.wrapperClass),We=computed(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:Be}),(Cn,An)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(We.value),for:Cn.id},[renderSlot(Cn.$slots,"label",{},()=>[createTextVNode(toDisplayString(Cn.label)+" ",1),renderSlot(Cn.$slots,"required-tip",{},()=>["required"in Cn.$attrs&&Cn.$attrs.required!==!1?(openBlock(),createElementBlock("span",Hn,"*")):createCommentVNode("",!0)],!0)],!0),Cn.hint?(openBlock(),createElementBlock("span",Kn,toDisplayString(Cn.hint),1)):createCommentVNode("",!0)],10,On),He.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":Cn.isWithWrapper||Cn.$attrs.type==="date"},Cn.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({id:Cn.id},Cn.$attrs,{ref_key:"__input",ref:ke,class:["fr-input",{"fr-input--error":Cn.isInvalid,"fr-input--valid":Cn.isValid}],value:Cn.modelValue,"aria-describedby":Cn.descriptionId||void 0,onInput:An[1]||(An[1]=En=>Cn.$emit("update:modelValue",En.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({key:0,id:Cn.id},Cn.$attrs,{ref_key:"__input",ref:ke,class:["fr-input",{"fr-input--error":Cn.isInvalid,"fr-input--valid":Cn.isValid}],value:Cn.modelValue,"aria-describedby":Cn.descriptionId||void 0,onInput:An[0]||(An[0]=En=>Cn.$emit("update:modelValue",En.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),ze=ie$1(qn,[["__scopeId","data-v-7ca45de8"]]),Ze=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>x$3("search","input")},label:{default:""},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(Te,{emit:e}){const t=e;return(Oe,ke)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":Oe.large}]),role:"search"},[createVNode(ze,{id:Oe.id,type:"search",placeholder:Oe.placeholder,"model-value":Oe.modelValue,label:Oe.label,disabled:Oe.disabled,"aria-disabled":Oe.disabled,"onUpdate:modelValue":ke[0]||(ke[0]=Be=>t("update:modelValue",Be)),onKeydown:ke[1]||(ke[1]=withKeys(Be=>t("search",Oe.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label","disabled","aria-disabled"]),createVNode(Ie,{title:"Rechercher",disabled:Oe.disabled,"aria-disabled":Oe.disabled,onClick:ke[2]||(ke[2]=Be=>t("search",Oe.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(Oe.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),ft$1=1,Bt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},path:{default:""}},setup(Te){const e=Te,t=computed(()=>typeof e.path=="string"),Oe=computed(()=>{var En;return((En=e.href)==null?void 0:En.startsWith("http"))||t.value&&e.path.startsWith("http")||typeof e.to=="string"&&e.to.startsWith("http")}),ke=computed(()=>{var En;return((En=e.href)==null?void 0:En.startsWith("mailto"))||t.value&&e.path.startsWith("mailto")||typeof e.to=="string"&&e.to.startsWith("mailto")}),Be=computed(()=>e.button?"button":Oe.value||ke.value?"a":"RouterLink"),Ue=computed(()=>{if(!(!Oe.value&&!ke.value))return e.to??e.href??e.path}),He=computed(()=>{if(!(Oe.value||ke.value))return e.to??e.path}),We=computed(()=>He.value?{to:He.value}:{href:Ue.value}),Cn=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),An=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ft$1,...e.iconAttrs??{}}:{scale:ft$1,...e.icon??{},...e.iconAttrs??{}});return(En,Sn)=>(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":Cn.value&&En.iconRight,"fr-btn--icon-left":Cn.value&&!En.iconRight,[String(En.icon)]:Cn.value}]},We.value,{target:En.target,onClick:Sn[0]||(Sn[0]=withModifiers(Tn=>En.onClick(Tn),["stop"]))}),{default:withCtx(()=>{var Tn,Ln;return[!Cn.value&&(En.icon||(Tn=En.iconAttrs)!=null&&Tn.name)&&!En.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},An.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(En.label)+" ",1),!Cn.value&&(En.icon||(Ln=En.iconAttrs)!=null&&Ln.name)&&En.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},An.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target"]))}}),zn=["aria-label"],Qn={class:"fr-btns-group"},Je=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(Te,{emit:e}){const t=e;return(Oe,ke)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":Oe.navAriaLabel},[createBaseVNode("ul",Qn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.links,(Be,Ue)=>(openBlock(),createElementBlock("li",{key:Ue},[createVNode(Bt$1,mergeProps({ref_for:!0},Be,{"on-click":He=>{var We;t("linkClick",He),(We=Be.onClick)==null||We.call(Be,He)}}),null,16,["on-click"])]))),128))])],8,zn))}}),Wn={role:"banner",class:"fr-header"},Gn={class:"fr-header__body"},Xn$1={class:"fr-container width-inherit"},Un={class:"fr-header__body-row"},Yn$1={class:"fr-header__brand fr-enlarge-link"},Zn$1={class:"fr-header__brand-top"},Jn={class:"fr-header__logo"},xn={key:0,class:"fr-header__operator"},el=["src","alt"],tl={key:1,class:"fr-header__navbar"},al=["aria-label","title","data-fr-opened"],sl=["aria-label","title"],rl={key:0,class:"fr-header__service"},nl={class:"fr-header__service-title"},ll={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},ol$1={key:0,class:"fr-header__service-tagline"},il={key:1,class:"fr-header__service"},dl={class:"fr-header__tools"},ul={key:0,class:"fr-header__tools-links"},fl$1={key:1,class:"fr-header__search fr-modal"},cl=["aria-label"],pl={class:"fr-container"},vl={class:"fr-header__menu-links"},ml={key:1,class:"flex justify-center items-center"},gl={class:"fr-header__menu fr-modal"},bl={key:0,class:"fr-container"},hl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","languageSelect"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=useSlots(),Be=toRef(t,"languageSelector"),Ue=ref(!1),He=ref(!1),We=ref(!1),Cn=()=>{var ni;We.value=!1,Ue.value=!1,He.value=!1,(ni=document.getElementById("button-menu"))==null||ni.focus()},An=ni=>{ni.key==="Escape"&&Cn()};onMounted(()=>{document.addEventListener("keydown",An)}),onUnmounted(()=>{document.removeEventListener("keydown",An)});const En=()=>{We.value=!0,Ue.value=!0,He.value=!1,setTimeout(()=>{var ni;(ni=document.getElementById("close-button"))==null||ni.focus()})},Sn=()=>{We.value=!0,Ue.value=!1,He.value=!0},Tn=Cn,Ln=computed(()=>[t.homeLabel,t.serviceTitle].filter(ni=>ni).join(" - ")),Bn=computed(()=>!!ke.operator||!!t.operatorImgSrc),ti=computed(()=>!!ke.mainnav);return provide(nt$1,()=>Cn),(ni,ii)=>{var si,oi,ci;const vi=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",Wn,[createBaseVNode("div",Gn,[createBaseVNode("div",Xn$1,[createBaseVNode("div",Un,[createBaseVNode("div",Yn$1,[createBaseVNode("div",Zn$1,[createBaseVNode("div",Jn,[createVNode(vi,{to:ni.homeTo,title:Ln.value},{default:withCtx(()=>[createVNode(Ne$1,{"logo-text":ni.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),_:1},8,["to","title"])]),Bn.value?(openBlock(),createElementBlock("div",xn,[renderSlot(ni.$slots,"operator",{},()=>[ni.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:ni.operatorImgSrc,alt:ni.operatorImgAlt,style:normalizeStyle(ni.operatorImgStyle)},null,12,el)):createCommentVNode("",!0)])])):createCommentVNode("",!0),ni.showSearch||ti.value||(si=ni.quickLinks)!=null&&si.length?(openBlock(),createElementBlock("div",tl,[ni.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":ni.showSearchLabel,title:ni.showSearchLabel,"data-fr-opened":He.value,onClick:ii[0]||(ii[0]=withModifiers(pi=>Sn(),["prevent","stop"]))},null,8,al)):createCommentVNode("",!0),ti.value||(oi=ni.quickLinks)!=null&&oi.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":En,"aria-controls":"header-navigation","aria-haspopup":"dialog","aria-label":ni.menuLabel,title:ni.menuLabel,"data-testid":"open-menu-btn",onClick:ii[1]||(ii[1]=withModifiers(pi=>En(),["prevent","stop"]))},null,8,sl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),ni.serviceTitle?(openBlock(),createElementBlock("div",rl,[createVNode(vi,mergeProps({to:ni.homeTo,title:Ln.value},ni.$attrs),{default:withCtx(()=>[createBaseVNode("p",nl,[createTextVNode(toDisplayString(ni.serviceTitle)+" ",1),ni.showBeta?(openBlock(),createElementBlock("span",ll," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),ni.serviceDescription?(openBlock(),createElementBlock("p",ol$1,toDisplayString(ni.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!ni.serviceTitle&&ni.showBeta?(openBlock(),createElementBlock("div",il,ii[9]||(ii[9]=[createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1)]))):createCommentVNode("",!0)]),createBaseVNode("div",dl,[(ci=ni.quickLinks)!=null&&ci.length||Be.value?(openBlock(),createElementBlock("div",ul,[renderSlot(ni.$slots,"before-quick-links"),Ue.value?createCommentVNode("",!0):(openBlock(),createBlock(Je,{key:0,links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),renderSlot(ni.$slots,"after-quick-links"),Be.value?(openBlock(),createBlock(Ye,mergeProps({key:1},Be.value,{onSelect:ii[2]||(ii[2]=pi=>Oe("languageSelect",pi))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),ni.showSearch?(openBlock(),createElementBlock("div",fl$1,[createVNode(Ze,{id:ni.searchbarId,label:ni.searchLabel,"model-value":ni.modelValue,placeholder:ni.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":ii[3]||(ii[3]=pi=>Oe("update:modelValue",pi)),onSearch:ii[4]||(ii[4]=pi=>Oe("search",pi))},null,8,["id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),ni.showSearch||ti.value||ni.quickLinks&&ni.quickLinks.length||Be.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":We.value}]),"aria-label":ni.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",pl,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:ii[5]||(ii[5]=withModifiers(pi=>Cn(),["prevent","stop"]))},toDisplayString(ni.closeMenuModalLabel),1),createBaseVNode("div",vl,[Be.value?(openBlock(),createBlock(Ye,mergeProps({key:0},Be.value,{onSelect:ii[6]||(ii[6]=pi=>Be.value.currentLanguage=pi.codeIso)}),null,16)):createCommentVNode("",!0),renderSlot(ni.$slots,"before-quick-links"),Ue.value?(openBlock(),createBlock(Je,{key:1,role:"navigation",links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel,onLinkClick:unref(Tn)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0),renderSlot(ni.$slots,"after-quick-links")]),We.value?renderSlot(ni.$slots,"mainnav",{key:0,hidemodal:Cn}):createCommentVNode("",!0),He.value?(openBlock(),createElementBlock("div",ml,[createVNode(Ze,{"searchbar-id":ni.searchbarId,"model-value":ni.modelValue,placeholder:ni.placeholder,"onUpdate:modelValue":ii[7]||(ii[7]=pi=>Oe("update:modelValue",pi)),onSearch:ii[8]||(ii[8]=pi=>Oe("search",pi))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,cl)):createCommentVNode("",!0),renderSlot(ni.$slots,"default")])]),createBaseVNode("div",gl,[ti.value&&!We.value?(openBlock(),createElementBlock("div",bl,[renderSlot(ni.$slots,"mainnav",{hidemodal:Cn})])):createCommentVNode("",!0)])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Lt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fe=Lt$1.join(","),Pt$1=typeof Element>"u",we$1=Pt$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Re=!Pt$1&&Element.prototype.getRootNode?function(Te){var e;return Te==null||(e=Te.getRootNode)===null||e===void 0?void 0:e.call(Te)}:function(Te){return Te==null?void 0:Te.ownerDocument},Ve=function Te(e,t){var Oe;t===void 0&&(t=!0);var ke=e==null||(Oe=e.getAttribute)===null||Oe===void 0?void 0:Oe.call(e,"inert"),Be=ke===""||ke==="true",Ue=Be||t&&e&&Te(e.parentNode);return Ue},Tl=function(Te){var e,t=Te==null||(e=Te.getAttribute)===null||e===void 0?void 0:e.call(Te,"contenteditable");return t===""||t==="true"},Mt$1=function(Te,e,t){if(Ve(Te))return[];var Oe=Array.prototype.slice.apply(Te.querySelectorAll(Fe));return e&&we$1.call(Te,Fe)&&Oe.unshift(Te),Oe=Oe.filter(t),Oe},Nt$1=function Te(e,t,Oe){for(var ke=[],Be=Array.from(e);Be.length;){var Ue=Be.shift();if(!Ve(Ue,!1))if(Ue.tagName==="SLOT"){var He=Ue.assignedElements(),We=He.length?He:Ue.children,Cn=Te(We,!0,Oe);Oe.flatten?ke.push.apply(ke,Cn):ke.push({scopeParent:Ue,candidates:Cn})}else{var An=we$1.call(Ue,Fe);An&&Oe.filter(Ue)&&(t||!e.includes(Ue))&&ke.push(Ue);var En=Ue.shadowRoot||typeof Oe.getShadowRoot=="function"&&Oe.getShadowRoot(Ue),Sn=!Ve(En,!1)&&(!Oe.shadowRootFilter||Oe.shadowRootFilter(Ue));if(En&&Sn){var Tn=Te(En===!0?Ue.children:En.children,!0,Oe);Oe.flatten?ke.push.apply(ke,Tn):ke.push({scopeParent:Ue,candidates:Tn})}else Be.unshift.apply(Be,Ue.children)}}return ke},Ft$1=function(Te){return!isNaN(parseInt(Te.getAttribute("tabindex"),10))},$e=function(Te){if(!Te)throw new Error("No node provided");return Te.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(Te.tagName)||Tl(Te))&&!Ft$1(Te)?0:Te.tabIndex},El=function(Te,e){var t=$e(Te);return t<0&&e&&!Ft$1(Te)?0:t},Cl=function(Te,e){return Te.tabIndex===e.tabIndex?Te.documentOrder-e.documentOrder:Te.tabIndex-e.tabIndex},Rt$1=function(Te){return Te.tagName==="INPUT"},Sl=function(Te){return Rt$1(Te)&&Te.type==="hidden"},Al=function(Te){var e=Te.tagName==="DETAILS"&&Array.prototype.slice.apply(Te.children).some(function(t){return t.tagName==="SUMMARY"});return e},Bl=function(Te,e){for(var t=0;t<Te.length;t++)if(Te[t].checked&&Te[t].form===e)return Te[t]},Ll=function(Te){if(!Te.name)return!0;var e=Te.form||Re(Te),t=function(Be){return e.querySelectorAll('input[type="radio"][name="'+Be+'"]')},Oe;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Oe=t(window.CSS.escape(Te.name));else try{Oe=t(Te.name)}catch(Be){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Be.message),!1}var ke=Bl(Oe,Te.form);return!ke||ke===Te},Pl=function(Te){return Rt$1(Te)&&Te.type==="radio"},Ml=function(Te){return Pl(Te)&&!Ll(Te)},Nl=function(Te){var e,t=Te&&Re(Te),Oe=(e=t)===null||e===void 0?void 0:e.host,ke=!1;if(t&&t!==Te){var Be,Ue,He;for(ke=!!((Be=Oe)!==null&&Be!==void 0&&(Ue=Be.ownerDocument)!==null&&Ue!==void 0&&Ue.contains(Oe)||Te!=null&&(He=Te.ownerDocument)!==null&&He!==void 0&&He.contains(Te));!ke&&Oe;){var We,Cn,An;t=Re(Oe),Oe=(We=t)===null||We===void 0?void 0:We.host,ke=!!((Cn=Oe)!==null&&Cn!==void 0&&(An=Cn.ownerDocument)!==null&&An!==void 0&&An.contains(Oe))}}return ke},ct$1=function(Te){var e=Te.getBoundingClientRect(),t=e.width,Oe=e.height;return t===0&&Oe===0},Fl=function(Te,e){var t=e.displayCheck,Oe=e.getShadowRoot;if(getComputedStyle(Te).visibility==="hidden")return!0;var ke=we$1.call(Te,"details>summary:first-of-type"),Be=ke?Te.parentElement:Te;if(we$1.call(Be,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof Oe=="function"){for(var Ue=Te;Te;){var He=Te.parentElement,We=Re(Te);if(He&&!He.shadowRoot&&Oe(He)===!0)return ct$1(Te);Te.assignedSlot?Te=Te.assignedSlot:!He&&We!==Te.ownerDocument?Te=We.host:Te=He}Te=Ue}if(Nl(Te))return!Te.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return ct$1(Te);return!1},Rl=function(Te){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Te.tagName))for(var e=Te.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var Oe=e.children.item(t);if(Oe.tagName==="LEGEND")return we$1.call(e,"fieldset[disabled] *")?!0:!Oe.contains(Te)}return!0}e=e.parentElement}return!1},je=function(Te,e){return!(e.disabled||Ve(e)||Sl(e)||Fl(e,Te)||Al(e)||Rl(e))},xe=function(Te,e){return!(Ml(e)||$e(e)<0||!je(Te,e))},Vl=function(Te){var e=parseInt(Te.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},jl=function Te(e){var t=[],Oe=[];return e.forEach(function(ke,Be){var Ue=!!ke.scopeParent,He=Ue?ke.scopeParent:ke,We=El(He,Ue),Cn=Ue?Te(ke.candidates):He;We===0?Ue?t.push.apply(t,Cn):t.push(He):Oe.push({documentOrder:Be,tabIndex:We,item:ke,isScope:Ue,content:Cn})}),Oe.sort(Cl).reduce(function(ke,Be){return Be.isScope?ke.push.apply(ke,Be.content):ke.push(Be.content),ke},[]).concat(t)},Ol=function(Te,e){e=e||{};var t;return e.getShadowRoot?t=Nt$1([Te],e.includeContainer,{filter:xe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Vl}):t=Mt$1(Te,e.includeContainer,xe.bind(null,e)),jl(t)},Hl=function(Te,e){e=e||{};var t;return e.getShadowRoot?t=Nt$1([Te],e.includeContainer,{filter:je.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=Mt$1(Te,e.includeContainer,je.bind(null,e)),t},_e=function(Te,e){if(e=e||{},!Te)throw new Error("No node provided");return we$1.call(Te,Fe)===!1?!1:xe(e,Te)},Kl=Lt$1.concat("iframe").join(","),Ge=function(Te,e){if(e=e||{},!Te)throw new Error("No node provided");return we$1.call(Te,Kl)===!1?!1:je(e,Te)};/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function et$2(Te,e){(e==null||e>Te.length)&&(e=Te.length);for(var t=0,Oe=Array(e);t<e;t++)Oe[t]=Te[t];return Oe}function ql(Te){if(Array.isArray(Te))return et$2(Te)}function zl(Te,e,t){return(e=Ul(e))in Te?Object.defineProperty(Te,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Te[e]=t,Te}function Ql(Te){if(typeof Symbol<"u"&&Te[Symbol.iterator]!=null||Te["@@iterator"]!=null)return Array.from(Te)}function Wl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt$1(Te,e){var t=Object.keys(Te);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Te);e&&(Oe=Oe.filter(function(ke){return Object.getOwnPropertyDescriptor(Te,ke).enumerable})),t.push.apply(t,Oe)}return t}function vt$1(Te){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pt$1(Object(t),!0).forEach(function(Oe){zl(Te,Oe,t[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(t)):pt$1(Object(t)).forEach(function(Oe){Object.defineProperty(Te,Oe,Object.getOwnPropertyDescriptor(t,Oe))})}return Te}function Gl(Te){return ql(Te)||Ql(Te)||Yl(Te)||Wl()}function Xl(Te,e){if(typeof Te!="object"||!Te)return Te;var t=Te[Symbol.toPrimitive];if(t!==void 0){var Oe=t.call(Te,e);if(typeof Oe!="object")return Oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(Te)}function Ul(Te){var e=Xl(Te,"string");return typeof e=="symbol"?e:e+""}function Yl(Te,e){if(Te){if(typeof Te=="string")return et$2(Te,e);var t={}.toString.call(Te).slice(8,-1);return t==="Object"&&Te.constructor&&(t=Te.constructor.name),t==="Map"||t==="Set"?Array.from(Te):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?et$2(Te,e):void 0}}var mt$1={activateTrap:function(Te,e){if(Te.length>0){var t=Te[Te.length-1];t!==e&&t._setPausedState(!0)}var Oe=Te.indexOf(e);Oe===-1||Te.splice(Oe,1),Te.push(e)},deactivateTrap:function(Te,e){var t=Te.indexOf(e);t!==-1&&Te.splice(t,1),Te.length>0&&!Te[Te.length-1]._isManuallyPaused()&&Te[Te.length-1]._setPausedState(!1)}},Zl=function(Te){return Te.tagName&&Te.tagName.toLowerCase()==="input"&&typeof Te.select=="function"},Jl=function(Te){return(Te==null?void 0:Te.key)==="Escape"||(Te==null?void 0:Te.key)==="Esc"||(Te==null?void 0:Te.keyCode)===27},Ae=function(Te){return(Te==null?void 0:Te.key)==="Tab"||(Te==null?void 0:Te.keyCode)===9},xl=function(Te){return Ae(Te)&&!Te.shiftKey},eo=function(Te){return Ae(Te)&&Te.shiftKey},gt$2=function(Te){return setTimeout(Te,0)},Ee=function(Te){for(var e=arguments.length,t=new Array(e>1?e-1:0),Oe=1;Oe<e;Oe++)t[Oe-1]=arguments[Oe];return typeof Te=="function"?Te.apply(void 0,t):Te},Pe=function(Te){return Te.target.shadowRoot&&typeof Te.composedPath=="function"?Te.composedPath()[0]:Te.target},to=[],ao=function(Te,e){var t=(e==null?void 0:e.document)||document,Oe=(e==null?void 0:e.trapStack)||to,ke=vt$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:xl,isKeyBackward:eo},e),Be={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},Ue,He=function(ui,li,Ri){return ui&&ui[li]!==void 0?ui[li]:ke[Ri||li]},We=function(ui,li){var Ri=typeof(li==null?void 0:li.composedPath)=="function"?li.composedPath():void 0;return Be.containerGroups.findIndex(function(Pi){var Fi=Pi.container,Hi=Pi.tabbableNodes;return Fi.contains(ui)||(Ri==null?void 0:Ri.includes(Fi))||Hi.find(function(nr){return nr===ui})})},Cn=function(ui){var li=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ri=li.hasFallback,Pi=Ri===void 0?!1:Ri,Fi=li.params,Hi=Fi===void 0?[]:Fi,nr=ke[ui];if(typeof nr=="function"&&(nr=nr.apply(void 0,Gl(Hi))),nr===!0&&(nr=void 0),!nr){if(nr===void 0||nr===!1)return nr;throw new Error("`".concat(ui,"` was specified but was not a node, or did not return a node"))}var ar=nr;if(typeof nr=="string"){try{ar=t.querySelector(nr)}catch(cr){throw new Error("`".concat(ui,'` appears to be an invalid selector; error="').concat(cr.message,'"'))}if(!ar&&!Pi)throw new Error("`".concat(ui,"` as selector refers to no known node"))}return ar},An=function(){var ui=Cn("initialFocus",{hasFallback:!0});if(ui===!1)return!1;if(ui===void 0||ui&&!Ge(ui,ke.tabbableOptions))if(We(t.activeElement)>=0)ui=t.activeElement;else{var li=Be.tabbableGroups[0],Ri=li&&li.firstTabbableNode;ui=Ri||Cn("fallbackFocus")}else ui===null&&(ui=Cn("fallbackFocus"));if(!ui)throw new Error("Your focus-trap needs to have at least one focusable element");return ui},En=function(){if(Be.containerGroups=Be.containers.map(function(ui){var li=Ol(ui,ke.tabbableOptions),Ri=Hl(ui,ke.tabbableOptions),Pi=li.length>0?li[0]:void 0,Fi=li.length>0?li[li.length-1]:void 0,Hi=Ri.find(function(cr){return _e(cr)}),nr=Ri.slice().reverse().find(function(cr){return _e(cr)}),ar=!!li.find(function(cr){return $e(cr)>0});return{container:ui,tabbableNodes:li,focusableNodes:Ri,posTabIndexesFound:ar,firstTabbableNode:Pi,lastTabbableNode:Fi,firstDomTabbableNode:Hi,lastDomTabbableNode:nr,nextTabbableNode:function(cr){var sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,br=li.indexOf(cr);return br<0?sr?Ri.slice(Ri.indexOf(cr)+1).find(function(Ni){return _e(Ni)}):Ri.slice(0,Ri.indexOf(cr)).reverse().find(function(Ni){return _e(Ni)}):li[br+(sr?1:-1)]}}}),Be.tabbableGroups=Be.containerGroups.filter(function(ui){return ui.tabbableNodes.length>0}),Be.tabbableGroups.length<=0&&!Cn("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Be.containerGroups.find(function(ui){return ui.posTabIndexesFound})&&Be.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},Sn=function(ui){var li=ui.activeElement;if(li)return li.shadowRoot&&li.shadowRoot.activeElement!==null?Sn(li.shadowRoot):li},Tn=function(ui){if(ui!==!1&&ui!==Sn(document)){if(!ui||!ui.focus){Tn(An());return}ui.focus({preventScroll:!!ke.preventScroll}),Be.mostRecentlyFocusedNode=ui,Zl(ui)&&ui.select()}},Ln=function(ui){var li=Cn("setReturnFocus",{params:[ui]});return li||(li===!1?!1:ui)},Bn=function(ui){var li=ui.target,Ri=ui.event,Pi=ui.isBackward,Fi=Pi===void 0?!1:Pi;li=li||Pe(Ri),En();var Hi=null;if(Be.tabbableGroups.length>0){var nr=We(li,Ri),ar=nr>=0?Be.containerGroups[nr]:void 0;if(nr<0)Fi?Hi=Be.tabbableGroups[Be.tabbableGroups.length-1].lastTabbableNode:Hi=Be.tabbableGroups[0].firstTabbableNode;else if(Fi){var cr=Be.tabbableGroups.findIndex(function(fr){var mr=fr.firstTabbableNode;return li===mr});if(cr<0&&(ar.container===li||Ge(li,ke.tabbableOptions)&&!_e(li,ke.tabbableOptions)&&!ar.nextTabbableNode(li,!1))&&(cr=nr),cr>=0){var sr=cr===0?Be.tabbableGroups.length-1:cr-1,br=Be.tabbableGroups[sr];Hi=$e(li)>=0?br.lastTabbableNode:br.lastDomTabbableNode}else Ae(Ri)||(Hi=ar.nextTabbableNode(li,!1))}else{var Ni=Be.tabbableGroups.findIndex(function(fr){var mr=fr.lastTabbableNode;return li===mr});if(Ni<0&&(ar.container===li||Ge(li,ke.tabbableOptions)&&!_e(li,ke.tabbableOptions)&&!ar.nextTabbableNode(li))&&(Ni=nr),Ni>=0){var or=Ni===Be.tabbableGroups.length-1?0:Ni+1,er=Be.tabbableGroups[or];Hi=$e(li)>=0?er.firstTabbableNode:er.firstDomTabbableNode}else Ae(Ri)||(Hi=ar.nextTabbableNode(li))}}else Hi=Cn("fallbackFocus");return Hi},ti=function(ui){var li=Pe(ui);if(!(We(li,ui)>=0)){if(Ee(ke.clickOutsideDeactivates,ui)){Ue.deactivate({returnFocus:ke.returnFocusOnDeactivate});return}Ee(ke.allowOutsideClick,ui)||ui.preventDefault()}},ni=function(ui){var li=Pe(ui),Ri=We(li,ui)>=0;if(Ri||li instanceof Document)Ri&&(Be.mostRecentlyFocusedNode=li);else{ui.stopImmediatePropagation();var Pi,Fi=!0;if(Be.mostRecentlyFocusedNode)if($e(Be.mostRecentlyFocusedNode)>0){var Hi=We(Be.mostRecentlyFocusedNode),nr=Be.containerGroups[Hi].tabbableNodes;if(nr.length>0){var ar=nr.findIndex(function(cr){return cr===Be.mostRecentlyFocusedNode});ar>=0&&(ke.isKeyForward(Be.recentNavEvent)?ar+1<nr.length&&(Pi=nr[ar+1],Fi=!1):ar-1>=0&&(Pi=nr[ar-1],Fi=!1))}}else Be.containerGroups.some(function(cr){return cr.tabbableNodes.some(function(sr){return $e(sr)>0})})||(Fi=!1);else Fi=!1;Fi&&(Pi=Bn({target:Be.mostRecentlyFocusedNode,isBackward:ke.isKeyBackward(Be.recentNavEvent)})),Tn(Pi||Be.mostRecentlyFocusedNode||An())}Be.recentNavEvent=void 0},ii=function(ui){var li=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Be.recentNavEvent=ui;var Ri=Bn({event:ui,isBackward:li});Ri&&(Ae(ui)&&ui.preventDefault(),Tn(Ri))},si=function(ui){(ke.isKeyForward(ui)||ke.isKeyBackward(ui))&&ii(ui,ke.isKeyBackward(ui))},oi=function(ui){Jl(ui)&&Ee(ke.escapeDeactivates,ui)!==!1&&(ui.preventDefault(),Ue.deactivate())},ci=function(ui){var li=Pe(ui);We(li,ui)>=0||Ee(ke.clickOutsideDeactivates,ui)||Ee(ke.allowOutsideClick,ui)||(ui.preventDefault(),ui.stopImmediatePropagation())},vi=function(){if(Be.active)return mt$1.activateTrap(Oe,Ue),Be.delayInitialFocusTimer=ke.delayInitialFocus?gt$2(function(){Tn(An())}):Tn(An()),t.addEventListener("focusin",ni,!0),t.addEventListener("mousedown",ti,{capture:!0,passive:!1}),t.addEventListener("touchstart",ti,{capture:!0,passive:!1}),t.addEventListener("click",ci,{capture:!0,passive:!1}),t.addEventListener("keydown",si,{capture:!0,passive:!1}),t.addEventListener("keydown",oi),Ue},pi=function(){if(Be.active)return t.removeEventListener("focusin",ni,!0),t.removeEventListener("mousedown",ti,!0),t.removeEventListener("touchstart",ti,!0),t.removeEventListener("click",ci,!0),t.removeEventListener("keydown",si,!0),t.removeEventListener("keydown",oi),Ue},fi=function(ui){var li=ui.some(function(Ri){var Pi=Array.from(Ri.removedNodes);return Pi.some(function(Fi){return Fi===Be.mostRecentlyFocusedNode})});li&&Tn(An())},Mi=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(fi):void 0,Oi=function(){Mi&&(Mi.disconnect(),Be.active&&!Be.paused&&Be.containers.map(function(ui){Mi.observe(ui,{subtree:!0,childList:!0})}))};return Ue={get active(){return Be.active},get paused(){return Be.paused},activate:function(ui){if(Be.active)return this;var li=He(ui,"onActivate"),Ri=He(ui,"onPostActivate"),Pi=He(ui,"checkCanFocusTrap");Pi||En(),Be.active=!0,Be.paused=!1,Be.nodeFocusedBeforeActivation=t.activeElement,li==null||li();var Fi=function(){Pi&&En(),vi(),Oi(),Ri==null||Ri()};return Pi?(Pi(Be.containers.concat()).then(Fi,Fi),this):(Fi(),this)},deactivate:function(ui){if(!Be.active)return this;var li=vt$1({onDeactivate:ke.onDeactivate,onPostDeactivate:ke.onPostDeactivate,checkCanReturnFocus:ke.checkCanReturnFocus},ui);clearTimeout(Be.delayInitialFocusTimer),Be.delayInitialFocusTimer=void 0,pi(),Be.active=!1,Be.paused=!1,Oi(),mt$1.deactivateTrap(Oe,Ue);var Ri=He(li,"onDeactivate"),Pi=He(li,"onPostDeactivate"),Fi=He(li,"checkCanReturnFocus"),Hi=He(li,"returnFocus","returnFocusOnDeactivate");Ri==null||Ri();var nr=function(){gt$2(function(){Hi&&Tn(Ln(Be.nodeFocusedBeforeActivation)),Pi==null||Pi()})};return Hi&&Fi?(Fi(Ln(Be.nodeFocusedBeforeActivation)).then(nr,nr),this):(nr(),this)},pause:function(ui){return Be.active?(Be.manuallyPaused=!0,this._setPausedState(!0,ui)):this},unpause:function(ui){return Be.active?(Be.manuallyPaused=!1,Oe[Oe.length-1]!==this?this:this._setPausedState(!1,ui)):this},updateContainerElements:function(ui){var li=[].concat(ui).filter(Boolean);return Be.containers=li.map(function(Ri){return typeof Ri=="string"?t.querySelector(Ri):Ri}),Be.active&&En(),Oi(),this}},Object.defineProperties(Ue,{_isManuallyPaused:{value:function(){return Be.manuallyPaused}},_setPausedState:{value:function(ui,li){if(Be.paused===ui)return this;if(Be.paused=ui,ui){var Ri=He(li,"onPause"),Pi=He(li,"onPostPause");Ri==null||Ri(),pi(),Oi(),Pi==null||Pi()}else{var Fi=He(li,"onUnpause"),Hi=He(li,"onPostUnpause");Fi==null||Fi(),En(),vi(),Oi(),Hi==null||Hi()}return this}}}),Ue.updateContainerElements(Te),Ue};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const so={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},ro=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},so),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(Te,{slots:e,emit:t}){let Oe;const ke=ref(null),Be=computed(()=>{const He=ke.value;return He&&(He instanceof HTMLElement?He:He.$el)});function Ue(){return Oe||(Oe=ao(Be.value,{escapeDeactivates:Te.escapeDeactivates,allowOutsideClick:Te.allowOutsideClick,returnFocusOnDeactivate:Te.returnFocusOnDeactivate,clickOutsideDeactivates:Te.clickOutsideDeactivates,onActivate:()=>{t("update:active",!0),t("activate")},onDeactivate:()=>{t("update:active",!1),t("deactivate")},onPostActivate:()=>t("postActivate"),onPostDeactivate:()=>t("postDeactivate"),initialFocus:Te.initialFocus,fallbackFocus:Te.fallbackFocus,tabbableOptions:Te.tabbableOptions,delayInitialFocus:Te.delayInitialFocus,preventScroll:Te.preventScroll}))}return onMounted(()=>{watch(()=>Te.active,He=>{He&&Be.value?Ue().activate():Oe&&(Oe.deactivate(),(!Be.value||Be.value.nodeType===Node.COMMENT_NODE)&&(Oe=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{Oe&&Oe.deactivate(),Oe=null}),{activate(){Ue().activate()},deactivate(){Oe&&Oe.deactivate()},renderImpl(){if(!e.default)return null;const He=e.default().filter(We=>We.type!==Comment);return!He||!He.length||He.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),He):cloneVNode(He[0],{ref:ke})}}}}),no=["aria-labelledby","role","open"],lo={class:"fr-container fr-container--fluid fr-container-md"},oo={class:"fr-grid-row fr-grid-row--center"},io={class:"fr-modal__body"},uo={class:"fr-modal__header"},fo=["title"],co={class:"fr-modal__content"},po=["id"],vo={key:0,class:"fr-modal__footer"},bt$1=2,mo=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>x$3("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=Ln=>{Ln.key==="Escape"&&En()},Be=computed(()=>t.isAlert?"alertdialog":"dialog"),Ue=ref(null),He=ref();watch(()=>t.opened,Ln=>{var Bn,ti;Ln?((Bn=He.value)==null||Bn.showModal(),setTimeout(()=>{var ni;(ni=Ue.value)==null||ni.focus()},100)):(ti=He.value)==null||ti.close(),We(Ln)});function We(Ln){typeof window<"u"&&document.body.classList.toggle("modal-open",Ln)}onMounted(()=>{Cn(),We(t.opened)}),onBeforeUnmount(()=>{An(),We(!1)});function Cn(){document.addEventListener("keydown",ke)}function An(){document.removeEventListener("keydown",ke)}async function En(){var Ln;await nextTick(),(Ln=t.origin)==null||Ln.focus(),Oe("close")}const Sn=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),Tn=computed(()=>Sn.value?void 0:typeof t.icon=="string"?{name:t.icon,scale:bt$1}:{scale:bt$1,...t.icon??{}});return(Ln,Bn)=>Ln.opened?(openBlock(),createBlock(unref(ro),{key:0},{default:withCtx(()=>{var ti,ni;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:He,"aria-modal":"true","aria-labelledby":Ln.modalId,role:Be.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":Ln.opened}]),open:Ln.opened},[createBaseVNode("div",lo,[createBaseVNode("div",oo,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":Ln.size==="lg","fr-col-md-6":Ln.size==="md","fr-col-md-4":Ln.size==="sm"}])},[createBaseVNode("div",io,[createBaseVNode("div",uo,[createBaseVNode("button",{ref_key:"closeBtn",ref:Ue,class:"fr-btn fr-btn--close",title:Ln.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:Bn[0]||(Bn[0]=ii=>En())},[createBaseVNode("span",null,toDisplayString(Ln.closeButtonLabel),1)],8,fo)]),createBaseVNode("div",co,[createBaseVNode("h1",{id:Ln.modalId,class:"fr-modal__title"},[Sn.value||Tn.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(Ln.icon)]:Sn.value})},[Ln.icon&&Tn.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Tn.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Ln.title),1)],8,po),renderSlot(Ln.$slots,"default",{},void 0,!0)]),(ti=Ln.actions)!=null&&ti.length||Ln.$slots.footer?(openBlock(),createElementBlock("div",vo,[renderSlot(Ln.$slots,"footer",{},void 0,!0),(ni=Ln.actions)!=null&&ni.length?(openBlock(),createBlock(qe,{key:0,align:"right",buttons:Ln.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,no)]}),_:3})):createCommentVNode("",!0)}}),Vt$1=ie$1(mo,[["__scopeId","data-v-70fe954b"]]),So=["id","aria-current"],Ao=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>x$3("nav","item")},active:{type:Boolean}},setup(Te){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,So))}}),jt$1=ie$1(Ao,[["__scopeId","data-v-aa4076c4"]]),Bo=["href"],ht$1=2,Qe=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>x$3("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(Te){const e=Te,t=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),ke=computed(()=>Oe.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ht$1,name:e.icon}:{scale:ht$1,...e.icon||{}}),Be=hasInjectionContext()?inject(nt$1):void 0,Ue=(Be==null?void 0:Be())??(()=>{});return(He,We)=>{const Cn=resolveComponent("RouterLink");return t.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:He.to,onClick:We[0]||(We[0]=An=>{He.$emit("toggleId",He.id),He.onClick(An)})},toDisplayString(He.text),9,Bo)):(openBlock(),createBlock(Cn,{key:1,class:normalizeClass(["fr-nav__link",{[String(He.icon)]:Oe.value}]),"data-testid":"nav-router-link",to:He.to,onClick:We[1]||(We[1]=An=>{var En;unref(Ue)(),He.$emit("toggleId",He.id),(En=He.onClick)==null||En.call(He,An)})},{default:withCtx(()=>[He.icon&&ke.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},ke.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(He.text),1)]),_:1},8,["to","class"]))}}}),Lo={class:"fr-col-12 fr-col-lg-3"},Po={class:"fr-mega-menu__category"},Mo={class:"fr-mega-menu__list"},Ot$1=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(Te){return(e,t)=>(openBlock(),createElementBlock("div",Lo,[createBaseVNode("h5",Po,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Mo,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(Oe,ke)=>(openBlock(),createElementBlock("li",{key:ke,class:"fr-nav__link"},[createVNode(Qe,mergeProps({ref_for:!0},Oe),null,16)]))),128))])]))}}),No=["aria-expanded","aria-current","aria-controls"],Fo=["id"],Ro={class:"fr-container fr-container--fluid fr-container-lg"},Vo={class:"fr-grid-row fr-grid-row-lg--gutters"},jo={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Oo={class:"fr-mega-menu__leader"},Ho={class:"fr-h4 fr-mb-2v"},Ko={class:"fr-hidden fr-displayed-lg"},qo=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>x$3("mega-menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Te){const e=Te,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=ye$1(),He=computed(()=>e.id===e.expandedId);return watch(He,(We,Cn)=>{We!==Cn&&Be(We)}),onMounted(()=>{He.value&&Be(!0)}),(We,Cn)=>{const An=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":He.value,"aria-current":We.active||void 0,"aria-controls":We.id,onClick:Cn[0]||(Cn[0]=En=>We.$emit("toggleId",We.id))},toDisplayString(We.title),9,No),createBaseVNode("div",{id:We.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),tabindex:"-1",onTransitionend:Cn[2]||(Cn[2]=En=>unref(Ue)(He.value))},[createBaseVNode("div",Ro,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:Cn[1]||(Cn[1]=En=>We.$emit("toggleId",We.id))}," Fermer "),createBaseVNode("div",Vo,[createBaseVNode("div",jo,[createBaseVNode("div",Oo,[createBaseVNode("h4",Ho,toDisplayString(We.title),1),createBaseVNode("p",Ko,[createTextVNode(toDisplayString(We.description)+" ",1),renderSlot(We.$slots,"description",{},void 0,!0)]),createVNode(An,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:We.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(We.link.text),1)]),_:1},8,["to"])])]),renderSlot(We.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.menus,(En,Sn)=>(openBlock(),createBlock(Ot$1,mergeProps({key:Sn,ref_for:!0},En),null,16))),128))])])],42,Fo)],64)}}}),Ht$1=ie$1(qo,[["__scopeId","data-v-1e103394"]]),zo=["id","aria-current"],Kt$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>x$3("menu","item")},active:{type:Boolean}},setup(Te){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,zo))}}),Qo=["aria-expanded","aria-current","aria-controls"],Wo=["id"],Go={class:"fr-menu__list"},qt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>x$3("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Te){const e=Te,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=ye$1(),He=computed(()=>e.id===e.expandedId);return watch(He,(We,Cn)=>{We!==Cn&&Be(We)}),onMounted(()=>{He.value&&Be(!0)}),(We,Cn)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":He.value,"aria-current":We.active||void 0,"aria-controls":We.id,onClick:Cn[0]||(Cn[0]=An=>We.$emit("toggleId",We.id))},[createBaseVNode("span",null,toDisplayString(We.title),1)],8,Qo),createBaseVNode("div",{id:We.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),"data-testid":"navigation-menu",onTransitionend:Cn[2]||(Cn[2]=An=>unref(Ue)(He.value))},[createBaseVNode("ul",Go,[renderSlot(We.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.links,(An,En)=>(openBlock(),createBlock(Kt$1,{key:En},{default:withCtx(()=>[createVNode(Qe,mergeProps({ref_for:!0},An,{onToggleId:Cn[1]||(Cn[1]=Sn=>We.$emit("toggleId",We.expandedId))}),null,16)]),_:2},1024))),128))])],42,Wo)],64))}}),Xo=["id","aria-label"],Uo={class:"fr-nav__list"},Yo=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>x$3("nav")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(Te){const e=Te,t=ref(void 0),Oe=He=>{if(He===t.value){t.value=void 0;return}t.value=He},ke=He=>{if(He!==document.getElementById(e.id)){if(!(He!=null&&He.parentNode)){Oe(t.value);return}ke(He.parentNode)}},Be=He=>{ke(He.target)},Ue=He=>{He.key==="Escape"&&Oe(t.value)};return onMounted(()=>{document.addEventListener("click",Be),document.addEventListener("keydown",Ue)}),onUnmounted(()=>{document.removeEventListener("click",Be),document.removeEventListener("keydown",Ue)}),(He,We)=>(openBlock(),createElementBlock("nav",{id:He.id,class:"fr-nav",role:"navigation","aria-label":He.label},[createBaseVNode("ul",Uo,[renderSlot(He.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(He.navItems,(Cn,An)=>(openBlock(),createBlock(jt$1,{id:Cn.id,key:An},{default:withCtx(()=>[Cn.to&&Cn.text?(openBlock(),createBlock(Qe,mergeProps({key:0,ref_for:!0},Cn,{"expanded-id":t.value,onToggleId:We[0]||(We[0]=En=>Oe(En))}),null,16,["expanded-id"])):Cn.title&&Cn.links?(openBlock(),createBlock(qt$1,mergeProps({key:1,ref_for:!0},Cn,{"expanded-id":t.value,onToggleId:We[1]||(We[1]=En=>Oe(En))}),null,16,["expanded-id"])):Cn.title&&Cn.menus?(openBlock(),createBlock(Ht$1,mergeProps({key:2,ref_for:!0},Cn,{"expanded-id":t.value,onToggleId:We[2]||(We[2]=En=>Oe(En))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1032,["id"]))),128))])],8,Xo))}}),mi=["id","name","value","checked","disabled"],gi=["for"],bi={key:0,class:"required"},hi={key:0,class:"fr-hint-text"},yi={key:0,class:"fr-radio-rich__pictogram"},ki=["src","title"],$i={key:0},wi=["href"],_i=["href"],Di=["href"],zt$1=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>x$3("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},imgTitle:{},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(Te){const e=Te,t={viewBox:"0 0 80 80",width:"80px",height:"80px"},Oe=computed(()=>!!e.img||!!e.svgPath);return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":ke.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":Oe.value,"fr-radio-group--sm":ke.small}])},[createBaseVNode("input",mergeProps({id:ke.id,type:"radio",name:ke.name,value:ke.value,checked:ke.modelValue===ke.value,disabled:ke.disabled},ke.$attrs,{onClick:Be[0]||(Be[0]=Ue=>ke.$emit("update:modelValue",ke.value))}),null,16,mi),createBaseVNode("label",{for:ke.id,class:"fr-label"},[renderSlot(ke.$slots,"label",{},()=>[createTextVNode(toDisplayString(ke.label)+" ",1),renderSlot(ke.$slots,"required-tip",{},()=>[ke.$attrs.required?(openBlock(),createElementBlock("span",bi," *")):createCommentVNode("",!0)])]),ke.hint?(openBlock(),createElementBlock("span",hi,toDisplayString(ke.hint),1)):createCommentVNode("",!0)],8,gi),ke.img||ke.svgPath?(openBlock(),createElementBlock("div",yi,[ke.img?(openBlock(),createElementBlock("img",{key:0,src:ke.img,class:"fr-artwork",alt:"",title:ke.imgTitle},null,8,ki)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...t,...ke.svgAttrs}),[ke.imgTitle?(openBlock(),createElementBlock("title",$i,toDisplayString(ke.imgTitle),1)):createCommentVNode("",!0),createBaseVNode("use",{class:"fr-artwork-decorative",href:`${ke.svgPath}#artwork-decorative`},null,8,wi),createBaseVNode("use",{class:"fr-artwork-minor",href:`${ke.svgPath}#artwork-minor`},null,8,_i),createBaseVNode("use",{class:"fr-artwork-major",href:`${ke.svgPath}#artwork-major`},null,8,Di)],16))])):createCommentVNode("",!0)],2)],2))}}),Ii={class:"fr-form-group"},Ti=["disabled","aria-labelledby","aria-invalid","role"],Ei=["id"],Ci={key:0,class:"fr-hint-text"},Si={key:0,class:"required"},Ai=["id"],Bi=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>x$3("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=computed(()=>t.errorMessage||t.validMessage),Be=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),Ue=We=>{We!==t.modelValue&&Oe("update:modelValue",We)},He=computed(()=>ke.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(We,Cn)=>(openBlock(),createElementBlock("div",Ii,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":We.errorMessage,"fr-fieldset--valid":We.validMessage}]),disabled:We.disabled,"aria-labelledby":He.value,"aria-invalid":We.ariaInvalid,role:We.errorMessage||We.validMessage?"group":void 0},[We.legend||We.$slots.legend||We.hint||We.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:We.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(We.$slots,"legend",{},()=>[createTextVNode(toDisplayString(We.legend)+" ",1),We.hint||We.$slots.hint?(openBlock(),createElementBlock("span",Ci,[renderSlot(We.$slots,"hint",{},()=>[createTextVNode(toDisplayString(We.hint),1)])])):createCommentVNode("",!0),renderSlot(We.$slots,"required-tip",{},()=>[We.required?(openBlock(),createElementBlock("span",Si," *")):createCommentVNode("",!0)])])],8,Ei)):createCommentVNode("",!0),renderSlot(We.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(We.options,(An,En)=>(openBlock(),createBlock(zt$1,mergeProps({key:typeof An.value=="boolean"?En:An.value||En,name:We.name,"aria-disabled":An.disabled,ref_for:!0},An,{small:We.small,inline:We.inline,"model-value":We.modelValue,"onUpdate:modelValue":Cn[0]||(Cn[0]=Sn=>Ue(Sn))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),ke.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${We.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message fr-message--info flex items-center",Be.value])},toDisplayString(ke.value),3)],8,Ai)):createCommentVNode("",!0)],10,Ti)]))}}),qi={class:"fr-segmented__element"},zi=["id","name","value","checked","disabled","aria-disabled"],Qi=["for"],Wi={key:1},Qt$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>x$3("segmented")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(Te){const e=Te,t=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(ke,Be)=>(openBlock(),createElementBlock("div",qi,[createBaseVNode("input",mergeProps({id:ke.id,type:"radio",name:ke.name,value:ke.value,checked:ke.modelValue===ke.value,disabled:ke.disabled,"aria-disabled":ke.disabled},ke.$attrs,{onClick:Be[0]||(Be[0]=Ue=>ke.$emit("update:modelValue",ke.value))}),null,16,zi),createBaseVNode("label",{for:ke.id,class:normalizeClass(["fr-label",{[Oe.value]:Oe.value}])},[ke.icon&&!Oe.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},t.value)),null,16)):createCommentVNode("",!0),ke.icon?(openBlock(),createElementBlock("span",Wi," ")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(ke.label),1)],10,Qi)]))}}),Gi={class:"fr-form-group"},Xi=["disabled"],Ui=["id"],Yi={key:0,class:"fr-hint-text"},Zi={class:"fr-segmented__elements"},Ji=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>x$3("segmented-button","set")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:()=>x$3("segmented-button","set")},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=Be=>{Be!==t.modelValue&&Oe("update:modelValue",Be)};return(Be,Ue)=>(openBlock(),createElementBlock("div",Gi,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Be.small,"fr-segmented--no-legend":!Be.legend}]),disabled:Be.disabled},[Be.legend?(openBlock(),createElementBlock("legend",{key:0,id:Be.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Be.inline}])},[renderSlot(Be.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Be.legend),1)]),Be.hint?(openBlock(),createElementBlock("span",Yi,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],10,Ui)):createCommentVNode("",!0),createBaseVNode("div",Zi,[renderSlot(Be.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.options,(He,We)=>(openBlock(),createBlock(Qt$1,mergeProps({key:He.value||We,name:Be.name||He.name,ref_for:!0},{...He,disabled:Be.disabled||He.disabled},{"model-value":Be.modelValue,"onUpdate:modelValue":Ue[0]||(Ue[0]=Cn=>ke(Cn))}),null,16,["name","model-value"]))),128))])])],10,Xi)]))}}),xi=["for"],ed={key:0,class:"required"},td$1={key:0,class:"fr-hint-text"},ad=["id","name","disabled","aria-disabled","required"],sd=["selected"],rd=["selected","value","disabled","aria-disabled"],nd=["id"],ld=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>x$3("select")},name:{default:void 0},description:{default:void 0},hint:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Sélectionner une option"}},emits:["update:modelValue"],setup(Te){const e=Te;e.description&&console.warn("[DsfrSelect] : La prop `description` est dépréciée. Veuillez utiliser `hint` à la place.");const t=computed(()=>e.errorMessage||e.successMessage),Oe=computed(()=>e.errorMessage?"error":"valid");return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${Oe.value}`]:t.value}])},[createBaseVNode("label",{class:"fr-label",for:ke.selectId},[renderSlot(ke.$slots,"label",{},()=>[createTextVNode(toDisplayString(ke.label)+" ",1),renderSlot(ke.$slots,"required-tip",{},()=>[ke.required?(openBlock(),createElementBlock("span",ed," *")):createCommentVNode("",!0)])]),ke.hint??ke.description?(openBlock(),createElementBlock("span",td$1,toDisplayString(ke.hint??ke.description),1)):createCommentVNode("",!0)],8,xi),createBaseVNode("select",mergeProps({id:ke.selectId,class:[{[`fr-select--${Oe.value}`]:t.value},"fr-select"],name:ke.name||ke.selectId,disabled:ke.disabled,"aria-disabled":ke.disabled,required:ke.required},ke.$attrs,{onChange:Be[0]||(Be[0]=Ue=>{var He;return ke.$emit("update:modelValue",(He=Ue.target)==null?void 0:He.value)})}),[createBaseVNode("option",{selected:!ke.options.some(Ue=>typeof Ue!="object"||Ue===null?Ue===ke.modelValue:Ue.value===ke.modelValue),disabled:"",hidden:""},toDisplayString(ke.defaultUnselectedText),9,sd),(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.options,(Ue,He)=>(openBlock(),createElementBlock("option",{key:He,selected:ke.modelValue===Ue||typeof Ue=="object"&&Ue.value===ke.modelValue,value:typeof Ue=="object"?Ue.value:Ue,disabled:!!(typeof Ue=="object"&&Ue.disabled),"aria-disabled":!!(typeof Ue=="object"&&Ue.disabled)},toDisplayString(typeof Ue=="object"?Ue.text:Ue),9,rd))),128))],16,ad),t.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${Oe.value}-desc-${Oe.value}`,class:normalizeClass(`fr-${Oe.value}-text`)},toDisplayString(t.value),11,nd)):createCommentVNode("",!0)],2))}}),od={class:"fr-share"},id={class:"fr-share__title"},dd={class:"fr-btns-group"},ud=["title","href","onClick"],fd$1={key:0},cd=["href","title"],pd=["title"],vd=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(Te){const e=()=>{const Oe=window.location.href;navigator.clipboard.writeText(Oe)},t=({url:Oe,label:ke})=>{window.open(Oe,ke,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(Oe,ke)=>{var Be;return openBlock(),createElementBlock("div",od,[createBaseVNode("p",id,toDisplayString(Oe.title),1),createBaseVNode("ul",dd,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.networks,(Ue,He)=>(openBlock(),createElementBlock("li",{key:He},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${Ue.name}`),title:`${Ue.label} - nouvelle fenêtre`,href:Ue.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(We=>t(Ue),["prevent"])},toDisplayString(Ue.label),11,ud)]))),128)),(Be=Oe.mail)!=null&&Be.to?(openBlock(),createElementBlock("li",fd$1,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:Oe.mail.to,title:Oe.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(Oe.mail.label),9,cd)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:Oe.copyLabel,onClick:ke[0]||(ke[0]=Ue=>e())},toDisplayString(Oe.copyLabel),9,pd)])])])}}}),Hd=["id","aria-labelledby","tabindex"],Kd=defineComponent({__name:"DsfrTabContent",props:{panelId:{},tabId:{}},setup(Te){useCssVars(We=>({"7152af7e":Ue.value,"2a62e962":He.value}));const e=Te,t={true:"100%",false:"-100%"},Oe=inject(Ke),{isVisible:ke,asc:Be}=Oe(toRef(()=>e.tabId)),Ue=computed(()=>t[String(Be==null?void 0:Be.value)]),He=computed(()=>t[String(!(Be!=null&&Be.value))]);return(We,Cn)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:We.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":unref(ke)}]),role:"tabpanel","aria-labelledby":We.tabId,tabindex:unref(ke)?0:-1},[renderSlot(We.$slots,"default",{},void 0,!0)],10,Hd),[[vShow,unref(ke)]])]),_:3}))}}),Ut$1=ie$1(Kd,[["__scopeId","data-v-5774b16c"]]),qd={role:"presentation"},zd=["id","data-testid","tabindex","aria-selected","aria-controls"],Qd={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Yt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(Te,{emit:e}){const t=Te,Oe=e,ke=ref(null),Be={ArrowRight:"next",ArrowLeft:"previous",Home:"first",End:"last"};function Ue(An){const En=An==null?void 0:An.key,Sn=Be[En];Sn&&Oe(Sn)}const He=inject(Ke),{isVisible:We}=He(toRef(()=>t.tabId)),Cn=useTemplateRef("button");return watch(We,()=>{var An;We.value&&((An=Cn.value)==null||An.focus())}),(An,En)=>(openBlock(),createElementBlock("li",qd,[createBaseVNode("button",{id:An.tabId,ref_key:"button",ref:ke,"data-testid":`test-${An.tabId}`,class:"fr-tabs__tab",tabindex:unref(We)?0:-1,role:"tab",type:"button","aria-selected":unref(We),"aria-controls":An.panelId,onClick:En[0]||(En[0]=withModifiers(Sn=>An.$emit("click",An.tabId),["prevent"])),onKeydown:En[1]||(En[1]=Sn=>Ue(Sn))},[An.icon?(openBlock(),createElementBlock("span",Qd,[createVNode(ue$1,{name:An.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(An.$slots,"default")],40,zd)]))}}),lu=["aria-label"],ou=defineComponent({__name:"DsfrTabs",props:{modelValue:{default:0},tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]}},emits:["update:modelValue"],setup(Te,{expose:e,emit:t}){const Oe=Te,ke=t,Be=ref(!1),Ue=computed({get:()=>Oe.modelValue,set(oi){ke("update:modelValue",oi)}}),He=ref(new Map),We=ref(0);provide(Ke,oi=>{const ci=ref(!0);if(watch(Ue,(fi,Mi)=>{ci.value=fi>Mi}),[...He.value.values()].includes(oi.value))return{isVisible:computed(()=>He.value.get(Ue.value)===oi.value),asc:ci};const vi=We.value++;He.value.set(vi,oi.value);const pi=computed(()=>vi===Ue.value);return watch(oi,()=>{He.value.set(vi,oi.value)}),onUnmounted(()=>{He.value.delete(vi)}),{isVisible:pi}});const Cn=ref(null),An=ref(null),En=reactive({}),Sn=oi=>{if(En[oi])return En[oi];const ci=x$3("tab");return En[oi]=ci,ci},Tn=async()=>{const oi=Ue.value===0?Oe.tabTitles.length-1:Ue.value-1;Be.value=!1,Ue.value=oi},Ln=async()=>{const oi=Ue.value===Oe.tabTitles.length-1?0:Ue.value+1;Be.value=!0,Ue.value=oi},Bn=async()=>{Ue.value=0},ti=async()=>{Ue.value=Oe.tabTitles.length-1},ni=ref({"--tabs-height":"100px"}),ii=()=>{var oi;if(Ue.value<0||!An.value||!An.value.offsetHeight)return;const ci=An.value.offsetHeight,vi=(oi=Cn.value)==null?void 0:oi.querySelectorAll(".fr-tabs__panel")[Ue.value];if(!vi||!vi.offsetHeight)return;const pi=vi.offsetHeight;ni.value["--tabs-height"]=`${ci+pi}px`},si=ref(null);return onMounted(()=>{var oi;window.ResizeObserver&&(si.value=new window.ResizeObserver(()=>{ii()})),(oi=Cn.value)==null||oi.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var vi;ci&&((vi=si.value)==null||vi.observe(ci))})}),onUnmounted(()=>{var oi;(oi=Cn.value)==null||oi.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var vi;ci&&((vi=si.value)==null||vi.unobserve(ci))})}),e({renderTabs:ii,selectFirst:Bn,selectLast:ti}),(oi,ci)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:Cn,class:"fr-tabs",style:normalizeStyle(ni.value)},[createBaseVNode("ul",{ref_key:"tablist",ref:An,class:"fr-tabs__list",role:"tablist","aria-label":oi.tabListName},[renderSlot(oi.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(oi.tabTitles,(vi,pi)=>(openBlock(),createBlock(Yt$1,{key:pi,icon:vi.icon,"panel-id":vi.panelId||`${Sn(pi)}-panel`,"tab-id":vi.tabId||Sn(pi),onClick:fi=>Ue.value=pi,onNext:ci[0]||(ci[0]=fi=>Ln()),onPrevious:ci[1]||(ci[1]=fi=>Tn()),onFirst:ci[2]||(ci[2]=fi=>Bn()),onLast:ci[3]||(ci[3]=fi=>ti())},{default:withCtx(()=>[createTextVNode(toDisplayString(vi.title),1)]),_:2},1032,["icon","panel-id","tab-id","onClick"]))),128))])],8,lu),(openBlock(!0),createElementBlock(Fragment,null,renderList(oi.tabContents,(vi,pi)=>{var fi,Mi,Oi,ui;return openBlock(),createBlock(Ut$1,{key:pi,"panel-id":((Mi=(fi=oi.tabTitles)==null?void 0:fi[pi])==null?void 0:Mi.panelId)||`${Sn(pi)}-panel`,"tab-id":((ui=(Oi=oi.tabTitles)==null?void 0:Oi[pi])==null?void 0:ui.tabId)||Sn(pi)},{default:withCtx(()=>[createTextVNode(toDisplayString(vi),1)]),_:2},1032,["panel-id","tab-id"])}),128)),renderSlot(oi.$slots,"default")],4))}}),Tu=["id","disabled","aria-disabled","checked","data-testid","aria-describedby","name"],Eu=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Cu=["id"],Su=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>x$3("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activé"},inactiveText:{default:"Désactivé"},noText:{type:Boolean,default:!1},name:{default:void 0}},emits:["update:modelValue"],setup(Te){const e=Te,t=computed(()=>`${e.inputId}-hint-text`);return(Oe,ke)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":Oe.labelLeft,"fr-toggle--border-bottom":Oe.borderBottom}])},[createBaseVNode("input",{id:Oe.inputId,disabled:Oe.disabled,"aria-disabled":Oe.disabled,type:"checkbox",checked:Oe.modelValue,"data-testid":Oe.inputId,class:"fr-toggle__input","aria-describedby":t.value,name:Oe.name,onInput:ke[0]||(ke[0]=Be=>Oe.$emit("update:modelValue",Be.target.checked))},null,40,Tu),createBaseVNode("label",{id:t.value,class:"fr-toggle__label",for:Oe.inputId,"data-fr-checked-label":Oe.noText?void 0:Oe.activeText,"data-fr-unchecked-label":Oe.noText?void 0:Oe.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(Oe.label),9,Eu),Oe.hint?(openBlock(),createElementBlock("p",{key:0,id:`${Oe.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(Oe.hint),9,Cu)):createCommentVNode("",!0)],2))}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(Te){return typeof Te=="object"||"displayName"in Te||"props"in Te||"__vccOpts"in Te}function isESModule(Te){return Te.__esModule||Te[Symbol.toStringTag]==="Module"||Te.default&&isRouteComponent(Te.default)}const assign=Object.assign;function applyToParams(Te,e){const t={};for(const Oe in e){const ke=e[Oe];t[Oe]=isArray(ke)?ke.map(Te):Te(ke)}return t}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Te){return encodeURI(""+Te).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Te){return commonEncode(Te).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Te){return commonEncode(Te).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Te){return encodeQueryValue(Te).replace(EQUAL_RE,"%3D")}function encodePath(Te){return commonEncode(Te).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Te){return Te==null?"":encodePath(Te).replace(SLASH_RE,"%2F")}function decode$2(Te){try{return decodeURIComponent(""+Te)}catch{}return""+Te}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Te=>Te.replace(TRAILING_SLASH_RE,"");function parseURL(Te,e,t="/"){let Oe,ke={},Be="",Ue="";const He=e.indexOf("#");let We=e.indexOf("?");return He<We&&He>=0&&(We=-1),We>-1&&(Oe=e.slice(0,We),Be=e.slice(We+1,He>-1?He:e.length),ke=Te(Be)),He>-1&&(Oe=Oe||e.slice(0,He),Ue=e.slice(He,e.length)),Oe=resolveRelativePath(Oe??e,t),{fullPath:Oe+(Be&&"?")+Be+Ue,path:Oe,query:ke,hash:decode$2(Ue)}}function stringifyURL(Te,e){const t=e.query?Te(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(Te,e){return!e||!Te.toLowerCase().startsWith(e.toLowerCase())?Te:Te.slice(e.length)||"/"}function isSameRouteLocation(Te,e,t){const Oe=e.matched.length-1,ke=t.matched.length-1;return Oe>-1&&Oe===ke&&isSameRouteRecord(e.matched[Oe],t.matched[ke])&&isSameRouteLocationParams(e.params,t.params)&&Te(e.query)===Te(t.query)&&e.hash===t.hash}function isSameRouteRecord(Te,e){return(Te.aliasOf||Te)===(e.aliasOf||e)}function isSameRouteLocationParams(Te,e){if(Object.keys(Te).length!==Object.keys(e).length)return!1;for(const t in Te)if(!isSameRouteLocationParamsValue(Te[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(Te,e){return isArray(Te)?isEquivalentArray(Te,e):isArray(e)?isEquivalentArray(e,Te):Te===e}function isEquivalentArray(Te,e){return isArray(e)?Te.length===e.length&&Te.every((t,Oe)=>t===e[Oe]):Te.length===1&&Te[0]===e}function resolveRelativePath(Te,e){if(Te.startsWith("/"))return Te;if(!Te)return e;const t=e.split("/"),Oe=Te.split("/"),ke=Oe[Oe.length-1];(ke===".."||ke===".")&&Oe.push("");let Be=t.length-1,Ue,He;for(Ue=0;Ue<Oe.length;Ue++)if(He=Oe[Ue],He!==".")if(He==="..")Be>1&&Be--;else break;return t.slice(0,Be).join("/")+"/"+Oe.slice(Ue).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(Te){Te.pop="pop",Te.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Te){Te.back="back",Te.forward="forward",Te.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Te){if(!Te)if(isBrowser){const e=document.querySelector("base");Te=e&&e.getAttribute("href")||"/",Te=Te.replace(/^\w+:\/\/[^\/]+/,"")}else Te="/";return Te[0]!=="/"&&Te[0]!=="#"&&(Te="/"+Te),removeTrailingSlash(Te)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Te,e){return Te.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(Te,e){const t=document.documentElement.getBoundingClientRect(),Oe=Te.getBoundingClientRect();return{behavior:e.behavior,left:Oe.left-t.left-(e.left||0),top:Oe.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(Te){let e;if("el"in Te){const t=Te.el,Oe=typeof t=="string"&&t.startsWith("#"),ke=typeof t=="string"?Oe?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!ke)return;e=getElementPosition(ke,Te)}else e=Te;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(Te,e){return(history.state?history.state.position-e:-1)+Te}const scrollPositions=new Map;function saveScrollPosition(Te,e){scrollPositions.set(Te,e)}function getSavedScrollPosition(Te){const e=scrollPositions.get(Te);return scrollPositions.delete(Te),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(Te,e){const{pathname:t,search:Oe,hash:ke}=e,Be=Te.indexOf("#");if(Be>-1){let He=ke.includes(Te.slice(Be))?Te.slice(Be).length:1,We=ke.slice(He);return We[0]!=="/"&&(We="/"+We),stripBase(We,"")}return stripBase(t,Te)+Oe+ke}function useHistoryListeners(Te,e,t,Oe){let ke=[],Be=[],Ue=null;const He=({state:Sn})=>{const Tn=createCurrentLocation(Te,location),Ln=t.value,Bn=e.value;let ti=0;if(Sn){if(t.value=Tn,e.value=Sn,Ue&&Ue===Ln){Ue=null;return}ti=Bn?Sn.position-Bn.position:0}else Oe(Tn);ke.forEach(ni=>{ni(t.value,Ln,{delta:ti,type:NavigationType.pop,direction:ti?ti>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function We(){Ue=t.value}function Cn(Sn){ke.push(Sn);const Tn=()=>{const Ln=ke.indexOf(Sn);Ln>-1&&ke.splice(Ln,1)};return Be.push(Tn),Tn}function An(){const{history:Sn}=window;Sn.state&&Sn.replaceState(assign({},Sn.state,{scroll:computeScrollPosition()}),"")}function En(){for(const Sn of Be)Sn();Be=[],window.removeEventListener("popstate",He),window.removeEventListener("beforeunload",An)}return window.addEventListener("popstate",He),window.addEventListener("beforeunload",An,{passive:!0}),{pauseListeners:We,listen:Cn,destroy:En}}function buildState(Te,e,t,Oe=!1,ke=!1){return{back:Te,current:e,forward:t,replaced:Oe,position:window.history.length,scroll:ke?computeScrollPosition():null}}function useHistoryStateNavigation(Te){const{history:e,location:t}=window,Oe={value:createCurrentLocation(Te,t)},ke={value:e.state};ke.value||Be(Oe.value,{back:null,current:Oe.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Be(We,Cn,An){const En=Te.indexOf("#"),Sn=En>-1?(t.host&&document.querySelector("base")?Te:Te.slice(En))+We:createBaseLocation()+Te+We;try{e[An?"replaceState":"pushState"](Cn,"",Sn),ke.value=Cn}catch(Tn){console.error(Tn),t[An?"replace":"assign"](Sn)}}function Ue(We,Cn){const An=assign({},e.state,buildState(ke.value.back,We,ke.value.forward,!0),Cn,{position:ke.value.position});Be(We,An,!0),Oe.value=We}function He(We,Cn){const An=assign({},ke.value,e.state,{forward:We,scroll:computeScrollPosition()});Be(An.current,An,!0);const En=assign({},buildState(Oe.value,We,null),{position:An.position+1},Cn);Be(We,En,!1),Oe.value=We}return{location:Oe,state:ke,push:He,replace:Ue}}function createWebHistory(Te){Te=normalizeBase(Te);const e=useHistoryStateNavigation(Te),t=useHistoryListeners(Te,e.state,e.location,e.replace);function Oe(Be,Ue=!0){Ue||t.pauseListeners(),history.go(Be)}const ke=assign({location:"",base:Te,go:Oe,createHref:createHref.bind(null,Te)},e,t);return Object.defineProperty(ke,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(ke,"state",{enumerable:!0,get:()=>e.state.value}),ke}function isRouteLocation(Te){return typeof Te=="string"||Te&&typeof Te=="object"}function isRouteName(Te){return typeof Te=="string"||typeof Te=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Te){Te[Te.aborted=4]="aborted",Te[Te.cancelled=8]="cancelled",Te[Te.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Te,e){return assign(new Error,{type:Te,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(Te,e){return Te instanceof Error&&NavigationFailureSymbol in Te&&(e==null||!!(Te.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Te,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),Oe=[];let ke=t.start?"^":"";const Be=[];for(const Cn of Te){const An=Cn.length?[]:[90];t.strict&&!Cn.length&&(ke+="/");for(let En=0;En<Cn.length;En++){const Sn=Cn[En];let Tn=40+(t.sensitive?.25:0);if(Sn.type===0)En||(ke+="/"),ke+=Sn.value.replace(REGEX_CHARS_RE,"\\$&"),Tn+=40;else if(Sn.type===1){const{value:Ln,repeatable:Bn,optional:ti,regexp:ni}=Sn;Be.push({name:Ln,repeatable:Bn,optional:ti});const ii=ni||BASE_PARAM_PATTERN;if(ii!==BASE_PARAM_PATTERN){Tn+=10;try{new RegExp(`(${ii})`)}catch(oi){throw new Error(`Invalid custom RegExp for param "${Ln}" (${ii}): `+oi.message)}}let si=Bn?`((?:${ii})(?:/(?:${ii}))*)`:`(${ii})`;En||(si=ti&&Cn.length<2?`(?:/${si})`:"/"+si),ti&&(si+="?"),ke+=si,Tn+=20,ti&&(Tn+=-8),Bn&&(Tn+=-20),ii===".*"&&(Tn+=-50)}An.push(Tn)}Oe.push(An)}if(t.strict&&t.end){const Cn=Oe.length-1;Oe[Cn][Oe[Cn].length-1]+=.7000000000000001}t.strict||(ke+="/?"),t.end?ke+="$":t.strict&&!ke.endsWith("/")&&(ke+="(?:/|$)");const Ue=new RegExp(ke,t.sensitive?"":"i");function He(Cn){const An=Cn.match(Ue),En={};if(!An)return null;for(let Sn=1;Sn<An.length;Sn++){const Tn=An[Sn]||"",Ln=Be[Sn-1];En[Ln.name]=Tn&&Ln.repeatable?Tn.split("/"):Tn}return En}function We(Cn){let An="",En=!1;for(const Sn of Te){(!En||!An.endsWith("/"))&&(An+="/"),En=!1;for(const Tn of Sn)if(Tn.type===0)An+=Tn.value;else if(Tn.type===1){const{value:Ln,repeatable:Bn,optional:ti}=Tn,ni=Ln in Cn?Cn[Ln]:"";if(isArray(ni)&&!Bn)throw new Error(`Provided param "${Ln}" is an array but it is not repeatable (* or + modifiers)`);const ii=isArray(ni)?ni.join("/"):ni;if(!ii)if(ti)Sn.length<2&&(An.endsWith("/")?An=An.slice(0,-1):En=!0);else throw new Error(`Missing required param "${Ln}"`);An+=ii}}return An||"/"}return{re:Ue,score:Oe,keys:Be,parse:He,stringify:We}}function compareScoreArray(Te,e){let t=0;for(;t<Te.length&&t<e.length;){const Oe=e[t]-Te[t];if(Oe)return Oe;t++}return Te.length<e.length?Te.length===1&&Te[0]===80?-1:1:Te.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(Te,e){let t=0;const Oe=Te.score,ke=e.score;for(;t<Oe.length&&t<ke.length;){const Be=compareScoreArray(Oe[t],ke[t]);if(Be)return Be;t++}if(Math.abs(ke.length-Oe.length)===1){if(isLastScoreNegative(Oe))return 1;if(isLastScoreNegative(ke))return-1}return ke.length-Oe.length}function isLastScoreNegative(Te){const e=Te[Te.length-1];return Te.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Te){if(!Te)return[[]];if(Te==="/")return[[ROOT_TOKEN]];if(!Te.startsWith("/"))throw new Error(`Invalid path "${Te}"`);function e(Tn){throw new Error(`ERR (${t})/"${Cn}": ${Tn}`)}let t=0,Oe=t;const ke=[];let Be;function Ue(){Be&&ke.push(Be),Be=[]}let He=0,We,Cn="",An="";function En(){Cn&&(t===0?Be.push({type:0,value:Cn}):t===1||t===2||t===3?(Be.length>1&&(We==="*"||We==="+")&&e(`A repeatable param (${Cn}) must be alone in its segment. eg: '/:ids+.`),Be.push({type:1,value:Cn,regexp:An,repeatable:We==="*"||We==="+",optional:We==="*"||We==="?"})):e("Invalid state to consume buffer"),Cn="")}function Sn(){Cn+=We}for(;He<Te.length;){if(We=Te[He++],We==="\\"&&t!==2){Oe=t,t=4;continue}switch(t){case 0:We==="/"?(Cn&&En(),Ue()):We===":"?(En(),t=1):Sn();break;case 4:Sn(),t=Oe;break;case 1:We==="("?t=2:VALID_PARAM_RE.test(We)?Sn():(En(),t=0,We!=="*"&&We!=="?"&&We!=="+"&&He--);break;case 2:We===")"?An[An.length-1]=="\\"?An=An.slice(0,-1)+We:t=3:An+=We;break;case 3:En(),t=0,We!=="*"&&We!=="?"&&We!=="+"&&He--,An="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${Cn}"`),En(),Ue(),ke}function createRouteRecordMatcher(Te,e,t){const Oe=tokensToParser(tokenizePath(Te.path),t),ke=assign(Oe,{record:Te,parent:e,children:[],alias:[]});return e&&!ke.record.aliasOf==!e.record.aliasOf&&e.children.push(ke),ke}function createRouterMatcher(Te,e){const t=[],Oe=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function ke(En){return Oe.get(En)}function Be(En,Sn,Tn){const Ln=!Tn,Bn=normalizeRouteRecord(En);Bn.aliasOf=Tn&&Tn.record;const ti=mergeOptions(e,En),ni=[Bn];if("alias"in En){const oi=typeof En.alias=="string"?[En.alias]:En.alias;for(const ci of oi)ni.push(normalizeRouteRecord(assign({},Bn,{components:Tn?Tn.record.components:Bn.components,path:ci,aliasOf:Tn?Tn.record:Bn})))}let ii,si;for(const oi of ni){const{path:ci}=oi;if(Sn&&ci[0]!=="/"){const vi=Sn.record.path,pi=vi[vi.length-1]==="/"?"":"/";oi.path=Sn.record.path+(ci&&pi+ci)}if(ii=createRouteRecordMatcher(oi,Sn,ti),Tn?Tn.alias.push(ii):(si=si||ii,si!==ii&&si.alias.push(ii),Ln&&En.name&&!isAliasRecord(ii)&&Ue(En.name)),isMatchable(ii)&&We(ii),Bn.children){const vi=Bn.children;for(let pi=0;pi<vi.length;pi++)Be(vi[pi],ii,Tn&&Tn.children[pi])}Tn=Tn||ii}return si?()=>{Ue(si)}:noop$1}function Ue(En){if(isRouteName(En)){const Sn=Oe.get(En);Sn&&(Oe.delete(En),t.splice(t.indexOf(Sn),1),Sn.children.forEach(Ue),Sn.alias.forEach(Ue))}else{const Sn=t.indexOf(En);Sn>-1&&(t.splice(Sn,1),En.record.name&&Oe.delete(En.record.name),En.children.forEach(Ue),En.alias.forEach(Ue))}}function He(){return t}function We(En){const Sn=findInsertionIndex(En,t);t.splice(Sn,0,En),En.record.name&&!isAliasRecord(En)&&Oe.set(En.record.name,En)}function Cn(En,Sn){let Tn,Ln={},Bn,ti;if("name"in En&&En.name){if(Tn=Oe.get(En.name),!Tn)throw createRouterError(1,{location:En});ti=Tn.record.name,Ln=assign(paramsFromLocation(Sn.params,Tn.keys.filter(si=>!si.optional).concat(Tn.parent?Tn.parent.keys.filter(si=>si.optional):[]).map(si=>si.name)),En.params&&paramsFromLocation(En.params,Tn.keys.map(si=>si.name))),Bn=Tn.stringify(Ln)}else if(En.path!=null)Bn=En.path,Tn=t.find(si=>si.re.test(Bn)),Tn&&(Ln=Tn.parse(Bn),ti=Tn.record.name);else{if(Tn=Sn.name?Oe.get(Sn.name):t.find(si=>si.re.test(Sn.path)),!Tn)throw createRouterError(1,{location:En,currentLocation:Sn});ti=Tn.record.name,Ln=assign({},Sn.params,En.params),Bn=Tn.stringify(Ln)}const ni=[];let ii=Tn;for(;ii;)ni.unshift(ii.record),ii=ii.parent;return{name:ti,path:Bn,params:Ln,matched:ni,meta:mergeMetaFields(ni)}}Te.forEach(En=>Be(En));function An(){t.length=0,Oe.clear()}return{addRoute:Be,resolve:Cn,removeRoute:Ue,clearRoutes:An,getRoutes:He,getRecordMatcher:ke}}function paramsFromLocation(Te,e){const t={};for(const Oe of e)Oe in Te&&(t[Oe]=Te[Oe]);return t}function normalizeRouteRecord(Te){const e={path:Te.path,redirect:Te.redirect,name:Te.name,meta:Te.meta||{},aliasOf:Te.aliasOf,beforeEnter:Te.beforeEnter,props:normalizeRecordProps(Te),children:Te.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Te?Te.components||null:Te.component&&{default:Te.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(Te){const e={},t=Te.props||!1;if("component"in Te)e.default=t;else for(const Oe in Te.components)e[Oe]=typeof t=="object"?t[Oe]:t;return e}function isAliasRecord(Te){for(;Te;){if(Te.record.aliasOf)return!0;Te=Te.parent}return!1}function mergeMetaFields(Te){return Te.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(Te,e){const t={};for(const Oe in Te)t[Oe]=Oe in e?e[Oe]:Te[Oe];return t}function findInsertionIndex(Te,e){let t=0,Oe=e.length;for(;t!==Oe;){const Be=t+Oe>>1;comparePathParserScore(Te,e[Be])<0?Oe=Be:t=Be+1}const ke=getInsertionAncestor(Te);return ke&&(Oe=e.lastIndexOf(ke,Oe-1)),Oe}function getInsertionAncestor(Te){let e=Te;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(Te,e)===0)return e}function isMatchable({record:Te}){return!!(Te.name||Te.components&&Object.keys(Te.components).length||Te.redirect)}function parseQuery(Te){const e={};if(Te===""||Te==="?")return e;const Oe=(Te[0]==="?"?Te.slice(1):Te).split("&");for(let ke=0;ke<Oe.length;++ke){const Be=Oe[ke].replace(PLUS_RE," "),Ue=Be.indexOf("="),He=decode$2(Ue<0?Be:Be.slice(0,Ue)),We=Ue<0?null:decode$2(Be.slice(Ue+1));if(He in e){let Cn=e[He];isArray(Cn)||(Cn=e[He]=[Cn]),Cn.push(We)}else e[He]=We}return e}function stringifyQuery(Te){let e="";for(let t in Te){const Oe=Te[t];if(t=encodeQueryKey(t),Oe==null){Oe!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(Oe)?Oe.map(Be=>Be&&encodeQueryValue(Be)):[Oe&&encodeQueryValue(Oe)]).forEach(Be=>{Be!==void 0&&(e+=(e.length?"&":"")+t,Be!=null&&(e+="="+Be))})}return e}function normalizeQuery(Te){const e={};for(const t in Te){const Oe=Te[t];Oe!==void 0&&(e[t]=isArray(Oe)?Oe.map(ke=>ke==null?null:""+ke):Oe==null?Oe:""+Oe)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Te=[];function e(Oe){return Te.push(Oe),()=>{const ke=Te.indexOf(Oe);ke>-1&&Te.splice(ke,1)}}function t(){Te=[]}return{add:e,list:()=>Te.slice(),reset:t}}function guardToPromiseFn(Te,e,t,Oe,ke,Be=Ue=>Ue()){const Ue=Oe&&(Oe.enterCallbacks[ke]=Oe.enterCallbacks[ke]||[]);return()=>new Promise((He,We)=>{const Cn=Sn=>{Sn===!1?We(createRouterError(4,{from:t,to:e})):Sn instanceof Error?We(Sn):isRouteLocation(Sn)?We(createRouterError(2,{from:e,to:Sn})):(Ue&&Oe.enterCallbacks[ke]===Ue&&typeof Sn=="function"&&Ue.push(Sn),He())},An=Be(()=>Te.call(Oe&&Oe.instances[ke],e,t,Cn));let En=Promise.resolve(An);Te.length<3&&(En=En.then(Cn)),En.catch(Sn=>We(Sn))})}function extractComponentsGuards(Te,e,t,Oe,ke=Be=>Be()){const Be=[];for(const Ue of Te)for(const He in Ue.components){let We=Ue.components[He];if(!(e!=="beforeRouteEnter"&&!Ue.instances[He]))if(isRouteComponent(We)){const An=(We.__vccOpts||We)[e];An&&Be.push(guardToPromiseFn(An,t,Oe,Ue,He,ke))}else{let Cn=We();Be.push(()=>Cn.then(An=>{if(!An)throw new Error(`Couldn't resolve component "${He}" at "${Ue.path}"`);const En=isESModule(An)?An.default:An;Ue.mods[He]=An,Ue.components[He]=En;const Tn=(En.__vccOpts||En)[e];return Tn&&guardToPromiseFn(Tn,t,Oe,Ue,He,ke)()}))}}return Be}function useLink(Te){const e=inject(routerKey),t=inject(routeLocationKey),Oe=computed(()=>{const We=unref(Te.to);return e.resolve(We)}),ke=computed(()=>{const{matched:We}=Oe.value,{length:Cn}=We,An=We[Cn-1],En=t.matched;if(!An||!En.length)return-1;const Sn=En.findIndex(isSameRouteRecord.bind(null,An));if(Sn>-1)return Sn;const Tn=getOriginalPath(We[Cn-2]);return Cn>1&&getOriginalPath(An)===Tn&&En[En.length-1].path!==Tn?En.findIndex(isSameRouteRecord.bind(null,We[Cn-2])):Sn}),Be=computed(()=>ke.value>-1&&includesParams(t.params,Oe.value.params)),Ue=computed(()=>ke.value>-1&&ke.value===t.matched.length-1&&isSameRouteLocationParams(t.params,Oe.value.params));function He(We={}){if(guardEvent(We)){const Cn=e[unref(Te.replace)?"replace":"push"](unref(Te.to)).catch(noop$1);return Te.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>Cn),Cn}return Promise.resolve()}return{route:Oe,href:computed(()=>Oe.value.href),isActive:Be,isExactActive:Ue,navigate:He}}function preferSingleVNode(Te){return Te.length===1?Te[0]:Te}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Te,{slots:e}){const t=reactive(useLink(Te)),{options:Oe}=inject(routerKey),ke=computed(()=>({[getLinkClass(Te.activeClass,Oe.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(Te.exactActiveClass,Oe.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const Be=e.default&&preferSingleVNode(e.default(t));return Te.custom?Be:h$1("a",{"aria-current":t.isExactActive?Te.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:ke.value},Be)}}}),RouterLink=RouterLinkImpl;function guardEvent(Te){if(!(Te.metaKey||Te.altKey||Te.ctrlKey||Te.shiftKey)&&!Te.defaultPrevented&&!(Te.button!==void 0&&Te.button!==0)){if(Te.currentTarget&&Te.currentTarget.getAttribute){const e=Te.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return Te.preventDefault&&Te.preventDefault(),!0}}function includesParams(Te,e){for(const t in e){const Oe=e[t],ke=Te[t];if(typeof Oe=="string"){if(Oe!==ke)return!1}else if(!isArray(ke)||ke.length!==Oe.length||Oe.some((Be,Ue)=>Be!==ke[Ue]))return!1}return!0}function getOriginalPath(Te){return Te?Te.aliasOf?Te.aliasOf.path:Te.path:""}const getLinkClass=(Te,e,t)=>Te??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Te,{attrs:e,slots:t}){const Oe=inject(routerViewLocationKey),ke=computed(()=>Te.route||Oe.value),Be=inject(viewDepthKey,0),Ue=computed(()=>{let Cn=unref(Be);const{matched:An}=ke.value;let En;for(;(En=An[Cn])&&!En.components;)Cn++;return Cn}),He=computed(()=>ke.value.matched[Ue.value]);provide(viewDepthKey,computed(()=>Ue.value+1)),provide(matchedRouteKey,He),provide(routerViewLocationKey,ke);const We=ref();return watch(()=>[We.value,He.value,Te.name],([Cn,An,En],[Sn,Tn,Ln])=>{An&&(An.instances[En]=Cn,Tn&&Tn!==An&&Cn&&Cn===Sn&&(An.leaveGuards.size||(An.leaveGuards=Tn.leaveGuards),An.updateGuards.size||(An.updateGuards=Tn.updateGuards))),Cn&&An&&(!Tn||!isSameRouteRecord(An,Tn)||!Sn)&&(An.enterCallbacks[En]||[]).forEach(Bn=>Bn(Cn))},{flush:"post"}),()=>{const Cn=ke.value,An=Te.name,En=He.value,Sn=En&&En.components[An];if(!Sn)return normalizeSlot(t.default,{Component:Sn,route:Cn});const Tn=En.props[An],Ln=Tn?Tn===!0?Cn.params:typeof Tn=="function"?Tn(Cn):Tn:null,ti=h$1(Sn,assign({},Ln,e,{onVnodeUnmounted:ni=>{ni.component.isUnmounted&&(En.instances[An]=null)},ref:We}));return normalizeSlot(t.default,{Component:ti,route:Cn})||ti}}});function normalizeSlot(Te,e){if(!Te)return null;const t=Te(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(Te){const e=createRouterMatcher(Te.routes,Te),t=Te.parseQuery||parseQuery,Oe=Te.stringifyQuery||stringifyQuery,ke=Te.history,Be=useCallbacks(),Ue=useCallbacks(),He=useCallbacks(),We=shallowRef(START_LOCATION_NORMALIZED);let Cn=START_LOCATION_NORMALIZED;isBrowser&&Te.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const An=applyToParams.bind(null,hr=>""+hr),En=applyToParams.bind(null,encodeParam),Sn=applyToParams.bind(null,decode$2);function Tn(hr,vr){let _r,Ar;return isRouteName(hr)?(_r=e.getRecordMatcher(hr),Ar=vr):Ar=hr,e.addRoute(Ar,_r)}function Ln(hr){const vr=e.getRecordMatcher(hr);vr&&e.removeRoute(vr)}function Bn(){return e.getRoutes().map(hr=>hr.record)}function ti(hr){return!!e.getRecordMatcher(hr)}function ni(hr,vr){if(vr=assign({},vr||We.value),typeof hr=="string"){const pr=parseURL(t,hr,vr.path),ur=e.resolve({path:pr.path},vr),Ki=ke.createHref(pr.fullPath);return assign(pr,ur,{params:Sn(ur.params),hash:decode$2(pr.hash),redirectedFrom:void 0,href:Ki})}let _r;if(hr.path!=null)_r=assign({},hr,{path:parseURL(t,hr.path,vr.path).path});else{const pr=assign({},hr.params);for(const ur in pr)pr[ur]==null&&delete pr[ur];_r=assign({},hr,{params:En(pr)}),vr.params=En(vr.params)}const Ar=e.resolve(_r,vr),Vr=hr.hash||"";Ar.params=An(Sn(Ar.params));const Wr=stringifyURL(Oe,assign({},hr,{hash:encodeHash(Vr),path:Ar.path})),tr=ke.createHref(Wr);return assign({fullPath:Wr,hash:Vr,query:Oe===stringifyQuery?normalizeQuery(hr.query):hr.query||{}},Ar,{redirectedFrom:void 0,href:tr})}function ii(hr){return typeof hr=="string"?parseURL(t,hr,We.value.path):assign({},hr)}function si(hr,vr){if(Cn!==hr)return createRouterError(8,{from:vr,to:hr})}function oi(hr){return pi(hr)}function ci(hr){return oi(assign(ii(hr),{replace:!0}))}function vi(hr){const vr=hr.matched[hr.matched.length-1];if(vr&&vr.redirect){const{redirect:_r}=vr;let Ar=typeof _r=="function"?_r(hr):_r;return typeof Ar=="string"&&(Ar=Ar.includes("?")||Ar.includes("#")?Ar=ii(Ar):{path:Ar},Ar.params={}),assign({query:hr.query,hash:hr.hash,params:Ar.path!=null?{}:hr.params},Ar)}}function pi(hr,vr){const _r=Cn=ni(hr),Ar=We.value,Vr=hr.state,Wr=hr.force,tr=hr.replace===!0,pr=vi(_r);if(pr)return pi(assign(ii(pr),{state:typeof pr=="object"?assign({},Vr,pr.state):Vr,force:Wr,replace:tr}),vr||_r);const ur=_r;ur.redirectedFrom=vr;let Ki;return!Wr&&isSameRouteLocation(Oe,Ar,_r)&&(Ki=createRouterError(16,{to:ur,from:Ar}),br(Ar,Ar,!0,!1)),(Ki?Promise.resolve(Ki):Oi(ur,Ar)).catch(Nr=>isNavigationFailure(Nr)?isNavigationFailure(Nr,2)?Nr:sr(Nr):ar(Nr,ur,Ar)).then(Nr=>{if(Nr){if(isNavigationFailure(Nr,2))return pi(assign({replace:tr},ii(Nr.to),{state:typeof Nr.to=="object"?assign({},Vr,Nr.to.state):Vr,force:Wr}),vr||ur)}else Nr=li(ur,Ar,!0,tr,Vr);return ui(ur,Ar,Nr),Nr})}function fi(hr,vr){const _r=si(hr,vr);return _r?Promise.reject(_r):Promise.resolve()}function Mi(hr){const vr=er.values().next().value;return vr&&typeof vr.runWithContext=="function"?vr.runWithContext(hr):hr()}function Oi(hr,vr){let _r;const[Ar,Vr,Wr]=extractChangingRecords(hr,vr);_r=extractComponentsGuards(Ar.reverse(),"beforeRouteLeave",hr,vr);for(const pr of Ar)pr.leaveGuards.forEach(ur=>{_r.push(guardToPromiseFn(ur,hr,vr))});const tr=fi.bind(null,hr,vr);return _r.push(tr),mr(_r).then(()=>{_r=[];for(const pr of Be.list())_r.push(guardToPromiseFn(pr,hr,vr));return _r.push(tr),mr(_r)}).then(()=>{_r=extractComponentsGuards(Vr,"beforeRouteUpdate",hr,vr);for(const pr of Vr)pr.updateGuards.forEach(ur=>{_r.push(guardToPromiseFn(ur,hr,vr))});return _r.push(tr),mr(_r)}).then(()=>{_r=[];for(const pr of Wr)if(pr.beforeEnter)if(isArray(pr.beforeEnter))for(const ur of pr.beforeEnter)_r.push(guardToPromiseFn(ur,hr,vr));else _r.push(guardToPromiseFn(pr.beforeEnter,hr,vr));return _r.push(tr),mr(_r)}).then(()=>(hr.matched.forEach(pr=>pr.enterCallbacks={}),_r=extractComponentsGuards(Wr,"beforeRouteEnter",hr,vr,Mi),_r.push(tr),mr(_r))).then(()=>{_r=[];for(const pr of Ue.list())_r.push(guardToPromiseFn(pr,hr,vr));return _r.push(tr),mr(_r)}).catch(pr=>isNavigationFailure(pr,8)?pr:Promise.reject(pr))}function ui(hr,vr,_r){He.list().forEach(Ar=>Mi(()=>Ar(hr,vr,_r)))}function li(hr,vr,_r,Ar,Vr){const Wr=si(hr,vr);if(Wr)return Wr;const tr=vr===START_LOCATION_NORMALIZED,pr=isBrowser?history.state:{};_r&&(Ar||tr?ke.replace(hr.fullPath,assign({scroll:tr&&pr&&pr.scroll},Vr)):ke.push(hr.fullPath,Vr)),We.value=hr,br(hr,vr,_r,tr),sr()}let Ri;function Pi(){Ri||(Ri=ke.listen((hr,vr,_r)=>{if(!fr.listening)return;const Ar=ni(hr),Vr=vi(Ar);if(Vr){pi(assign(Vr,{replace:!0,force:!0}),Ar).catch(noop$1);return}Cn=Ar;const Wr=We.value;isBrowser&&saveScrollPosition(getScrollKey(Wr.fullPath,_r.delta),computeScrollPosition()),Oi(Ar,Wr).catch(tr=>isNavigationFailure(tr,12)?tr:isNavigationFailure(tr,2)?(pi(assign(ii(tr.to),{force:!0}),Ar).then(pr=>{isNavigationFailure(pr,20)&&!_r.delta&&_r.type===NavigationType.pop&&ke.go(-1,!1)}).catch(noop$1),Promise.reject()):(_r.delta&&ke.go(-_r.delta,!1),ar(tr,Ar,Wr))).then(tr=>{tr=tr||li(Ar,Wr,!1),tr&&(_r.delta&&!isNavigationFailure(tr,8)?ke.go(-_r.delta,!1):_r.type===NavigationType.pop&&isNavigationFailure(tr,20)&&ke.go(-1,!1)),ui(Ar,Wr,tr)}).catch(noop$1)}))}let Fi=useCallbacks(),Hi=useCallbacks(),nr;function ar(hr,vr,_r){sr(hr);const Ar=Hi.list();return Ar.length?Ar.forEach(Vr=>Vr(hr,vr,_r)):console.error(hr),Promise.reject(hr)}function cr(){return nr&&We.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((hr,vr)=>{Fi.add([hr,vr])})}function sr(hr){return nr||(nr=!hr,Pi(),Fi.list().forEach(([vr,_r])=>hr?_r(hr):vr()),Fi.reset()),hr}function br(hr,vr,_r,Ar){const{scrollBehavior:Vr}=Te;if(!isBrowser||!Vr)return Promise.resolve();const Wr=!_r&&getSavedScrollPosition(getScrollKey(hr.fullPath,0))||(Ar||!_r)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Vr(hr,vr,Wr)).then(tr=>tr&&scrollToPosition(tr)).catch(tr=>ar(tr,hr,vr))}const Ni=hr=>ke.go(hr);let or;const er=new Set,fr={currentRoute:We,listening:!0,addRoute:Tn,removeRoute:Ln,clearRoutes:e.clearRoutes,hasRoute:ti,getRoutes:Bn,resolve:ni,options:Te,push:oi,replace:ci,go:Ni,back:()=>Ni(-1),forward:()=>Ni(1),beforeEach:Be.add,beforeResolve:Ue.add,afterEach:He.add,onError:Hi.add,isReady:cr,install(hr){const vr=this;hr.component("RouterLink",RouterLink),hr.component("RouterView",RouterView),hr.config.globalProperties.$router=vr,Object.defineProperty(hr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(We)}),isBrowser&&!or&&We.value===START_LOCATION_NORMALIZED&&(or=!0,oi(ke.location).catch(Vr=>{}));const _r={};for(const Vr in START_LOCATION_NORMALIZED)Object.defineProperty(_r,Vr,{get:()=>We.value[Vr],enumerable:!0});hr.provide(routerKey,vr),hr.provide(routeLocationKey,shallowReactive(_r)),hr.provide(routerViewLocationKey,We);const Ar=hr.unmount;er.add(hr),hr.unmount=function(){er.delete(hr),er.size<1&&(Cn=START_LOCATION_NORMALIZED,Ri&&Ri(),Ri=null,We.value=START_LOCATION_NORMALIZED,or=!1,nr=!1),Ar()}}};function mr(hr){return hr.reduce((vr,_r)=>vr.then(()=>Mi(_r)),Promise.resolve())}return fr}function extractChangingRecords(Te,e){const t=[],Oe=[],ke=[],Be=Math.max(e.matched.length,Te.matched.length);for(let Ue=0;Ue<Be;Ue++){const He=e.matched[Ue];He&&(Te.matched.find(Cn=>isSameRouteRecord(Cn,He))?Oe.push(He):t.push(He));const We=Te.matched[Ue];We&&(e.matched.find(Cn=>isSameRouteRecord(Cn,We))||ke.push(We))}return[t,Oe,ke]}function useRouter(){return inject(routerKey)}function useRoute(Te){return inject(routeLocationKey)}function tryOnScopeDispose(Te){return getCurrentScope()?(onScopeDispose(Te),!0):!1}function toValue(Te){return typeof Te=="function"?Te():unref(Te)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$4=Object.prototype.toString,isObject=Te=>toString$4.call(Te)==="[object Object]",noop=()=>{};function createFilterWrapper(Te,e){function t(...Oe){return new Promise((ke,Be)=>{Promise.resolve(Te(()=>e.apply(this,Oe),{fn:e,thisArg:this,args:Oe})).then(ke).catch(Be)})}return t}const bypassFilter=Te=>Te();function pausableFilter(Te=bypassFilter){const e=ref(!0);function t(){e.value=!1}function Oe(){e.value=!0}const ke=(...Be)=>{e.value&&Te(...Be)};return{isActive:readonly(e),pause:t,resume:Oe,eventFilter:ke}}function createSingletonPromise(Te){let e;function t(){return e||(e=Te()),e}return t.reset=async()=>{const Oe=e;e=void 0,Oe&&await Oe},t}function getLifeCycleTarget(Te){return getCurrentInstance()}function watchWithFilter(Te,e,t={}){const{eventFilter:Oe=bypassFilter,...ke}=t;return watch(Te,createFilterWrapper(Oe,e),ke)}function watchPausable(Te,e,t={}){const{eventFilter:Oe,...ke}=t,{eventFilter:Be,pause:Ue,resume:He,isActive:We}=pausableFilter(Oe);return{stop:watchWithFilter(Te,e,{...ke,eventFilter:Be}),pause:Ue,resume:He,isActive:We}}function tryOnMounted(Te,e=!0,t){getLifeCycleTarget()?onMounted(Te,t):e?Te():nextTick(Te)}function useTimeoutFn(Te,e,t={}){const{immediate:Oe=!0}=t,ke=ref(!1);let Be=null;function Ue(){Be&&(clearTimeout(Be),Be=null)}function He(){ke.value=!1,Ue()}function We(...Cn){Ue(),ke.value=!0,Be=setTimeout(()=>{ke.value=!1,Be=null,Te(...Cn)},toValue(e))}return Oe&&(ke.value=!0,isClient&&We()),tryOnScopeDispose(He),{isPending:readonly(ke),start:We,stop:He}}function unrefElement(Te){var e;const t=toValue(Te);return(e=t==null?void 0:t.$el)!=null?e:t}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...Te){let e,t,Oe,ke;if(typeof Te[0]=="string"||Array.isArray(Te[0])?([t,Oe,ke]=Te,e=defaultWindow):[e,t,Oe,ke]=Te,!e)return noop;Array.isArray(t)||(t=[t]),Array.isArray(Oe)||(Oe=[Oe]);const Be=[],Ue=()=>{Be.forEach(An=>An()),Be.length=0},He=(An,En,Sn,Tn)=>(An.addEventListener(En,Sn,Tn),()=>An.removeEventListener(En,Sn,Tn)),We=watch(()=>[unrefElement(e),toValue(ke)],([An,En])=>{if(Ue(),!An)return;const Sn=isObject(En)?{...En}:En;Be.push(...t.flatMap(Tn=>Oe.map(Ln=>He(An,Tn,Ln,Sn))))},{immediate:!0,flush:"post"}),Cn=()=>{We(),Ue()};return tryOnScopeDispose(Cn),Cn}function useMounted(){const Te=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{Te.value=!0},e),Te}function useSupported(Te){const e=useMounted();return computed(()=>(e.value,!!Te()))}function useMediaQuery(Te,e={}){const{window:t=defaultWindow}=e,Oe=useSupported(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let ke;const Be=ref(!1),Ue=Cn=>{Be.value=Cn.matches},He=()=>{ke&&("removeEventListener"in ke?ke.removeEventListener("change",Ue):ke.removeListener(Ue))},We=watchEffect(()=>{Oe.value&&(He(),ke=t.matchMedia(toValue(Te)),"addEventListener"in ke?ke.addEventListener("change",Ue):ke.addListener(Ue),Be.value=ke.matches)});return tryOnScopeDispose(()=>{We(),He(),ke=void 0}),Be}function usePermission(Te,e={}){const{controls:t=!1,navigator:Oe=defaultNavigator}=e,ke=useSupported(()=>Oe&&"permissions"in Oe);let Be;const Ue=typeof Te=="string"?{name:Te}:Te,He=ref(),We=()=>{Be&&(He.value=Be.state)},Cn=createSingletonPromise(async()=>{if(ke.value){if(!Be)try{Be=await Oe.permissions.query(Ue),useEventListener(Be,"change",We),We()}catch{He.value="prompt"}return Be}});return Cn(),t?{state:He,isSupported:ke,query:Cn}:He}function useClipboard(Te={}){const{navigator:e=defaultNavigator,read:t=!1,source:Oe,copiedDuring:ke=1500,legacy:Be=!1}=Te,Ue=useSupported(()=>e&&"clipboard"in e),He=usePermission("clipboard-read"),We=usePermission("clipboard-write"),Cn=computed(()=>Ue.value||Be),An=ref(""),En=ref(!1),Sn=useTimeoutFn(()=>En.value=!1,ke);function Tn(){Ue.value&&ni(He.value)?e.clipboard.readText().then(ii=>{An.value=ii}):An.value=ti()}Cn.value&&t&&useEventListener(["copy","cut"],Tn);async function Ln(ii=toValue(Oe)){Cn.value&&ii!=null&&(Ue.value&&ni(We.value)?await e.clipboard.writeText(ii):Bn(ii),An.value=ii,En.value=!0,Sn.start())}function Bn(ii){const si=document.createElement("textarea");si.value=ii??"",si.style.position="absolute",si.style.opacity="0",document.body.appendChild(si),si.select(),document.execCommand("copy"),si.remove()}function ti(){var ii,si,oi;return(oi=(si=(ii=document==null?void 0:document.getSelection)==null?void 0:ii.call(document))==null?void 0:si.toString())!=null?oi:""}function ni(ii){return ii==="granted"||ii==="prompt"}return{isSupported:Cn,text:An,copied:En,copy:Ln}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(Te,e){return handlers[Te]||e}function guessSerializerType(Te){return Te==null?"any":Te instanceof Set?"set":Te instanceof Map?"map":Te instanceof Date?"date":typeof Te=="boolean"?"boolean":typeof Te=="string"?"string":typeof Te=="object"?"object":Number.isNaN(Te)?"any":"number"}const StorageSerializers={boolean:{read:Te=>Te==="true",write:Te=>String(Te)},object:{read:Te=>JSON.parse(Te),write:Te=>JSON.stringify(Te)},number:{read:Te=>Number.parseFloat(Te),write:Te=>String(Te)},any:{read:Te=>Te,write:Te=>String(Te)},string:{read:Te=>Te,write:Te=>String(Te)},map:{read:Te=>new Map(JSON.parse(Te)),write:Te=>JSON.stringify(Array.from(Te.entries()))},set:{read:Te=>new Set(JSON.parse(Te)),write:Te=>JSON.stringify(Array.from(Te))},date:{read:Te=>new Date(Te),write:Te=>Te.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(Te,e,t,Oe={}){var ke;const{flush:Be="pre",deep:Ue=!0,listenToStorageChanges:He=!0,writeDefaults:We=!0,mergeDefaults:Cn=!1,shallow:An,window:En=defaultWindow,eventFilter:Sn,onError:Tn=Oi=>{console.error(Oi)},initOnMounted:Ln}=Oe,Bn=(An?shallowRef:ref)(typeof e=="function"?e():e);if(!t)try{t=getSSRHandler("getDefaultStorage",()=>{var Oi;return(Oi=defaultWindow)==null?void 0:Oi.localStorage})()}catch(Oi){Tn(Oi)}if(!t)return Bn;const ti=toValue(e),ni=guessSerializerType(ti),ii=(ke=Oe.serializer)!=null?ke:StorageSerializers[ni],{pause:si,resume:oi}=watchPausable(Bn,()=>vi(Bn.value),{flush:Be,deep:Ue,eventFilter:Sn});En&&He&&tryOnMounted(()=>{useEventListener(En,"storage",fi),useEventListener(En,customStorageEventName,Mi),Ln&&fi()}),Ln||fi();function ci(Oi,ui){En&&En.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:Te,oldValue:Oi,newValue:ui,storageArea:t}}))}function vi(Oi){try{const ui=t.getItem(Te);if(Oi==null)ci(ui,null),t.removeItem(Te);else{const li=ii.write(Oi);ui!==li&&(t.setItem(Te,li),ci(ui,li))}}catch(ui){Tn(ui)}}function pi(Oi){const ui=Oi?Oi.newValue:t.getItem(Te);if(ui==null)return We&&ti!=null&&t.setItem(Te,ii.write(ti)),ti;if(!Oi&&Cn){const li=ii.read(ui);return typeof Cn=="function"?Cn(li,ti):ni==="object"&&!Array.isArray(li)?{...ti,...li}:li}else return typeof ui!="string"?ui:ii.read(ui)}function fi(Oi){if(!(Oi&&Oi.storageArea!==t)){if(Oi&&Oi.key==null){Bn.value=ti;return}if(!(Oi&&Oi.key!==Te)){si();try{(Oi==null?void 0:Oi.newValue)!==ii.write(Bn.value)&&(Bn.value=pi(Oi))}catch(ui){Tn(ui)}finally{Oi?nextTick(oi):oi()}}}}function Mi(Oi){fi(Oi.detail)}return Bn}function useResizeObserver(Te,e,t={}){const{window:Oe=defaultWindow,...ke}=t;let Be;const Ue=useSupported(()=>Oe&&"ResizeObserver"in Oe),He=()=>{Be&&(Be.disconnect(),Be=void 0)},We=computed(()=>Array.isArray(Te)?Te.map(En=>unrefElement(En)):[unrefElement(Te)]),Cn=watch(We,En=>{if(He(),Ue.value&&Oe){Be=new ResizeObserver(e);for(const Sn of En)Sn&&Be.observe(Sn,ke)}},{immediate:!0,flush:"post"}),An=()=>{He(),Cn()};return tryOnScopeDispose(An),{isSupported:Ue,stop:An}}function useElementSize(Te,e={width:0,height:0},t={}){const{window:Oe=defaultWindow,box:ke="content-box"}=t,Be=computed(()=>{var En,Sn;return(Sn=(En=unrefElement(Te))==null?void 0:En.namespaceURI)==null?void 0:Sn.includes("svg")}),Ue=ref(e.width),He=ref(e.height),{stop:We}=useResizeObserver(Te,([En])=>{const Sn=ke==="border-box"?En.borderBoxSize:ke==="content-box"?En.contentBoxSize:En.devicePixelContentBoxSize;if(Oe&&Be.value){const Tn=unrefElement(Te);if(Tn){const Ln=Tn.getBoundingClientRect();Ue.value=Ln.width,He.value=Ln.height}}else if(Sn){const Tn=Array.isArray(Sn)?Sn:[Sn];Ue.value=Tn.reduce((Ln,{inlineSize:Bn})=>Ln+Bn,0),He.value=Tn.reduce((Ln,{blockSize:Bn})=>Ln+Bn,0)}else Ue.value=En.contentRect.width,He.value=En.contentRect.height},t);tryOnMounted(()=>{const En=unrefElement(Te);En&&(Ue.value="offsetWidth"in En?En.offsetWidth:e.width,He.value="offsetHeight"in En?En.offsetHeight:e.height)});const Cn=watch(()=>unrefElement(Te),En=>{Ue.value=En?e.width:0,He.value=En?e.height:0});function An(){We(),Cn()}return{width:Ue,height:He,stop:An}}function useUrlSearchParams(Te="history",e={}){const{initialValue:t={},removeNullishValues:Oe=!0,removeFalsyValues:ke=!1,write:Be=!0,window:Ue=defaultWindow}=e;if(!Ue)return reactive(t);const He=reactive({});function We(){if(Te==="history")return Ue.location.search||"";if(Te==="hash"){const ni=Ue.location.hash||"",ii=ni.indexOf("?");return ii>0?ni.slice(ii):""}else return(Ue.location.hash||"").replace(/^#/,"")}function Cn(ni){const ii=ni.toString();if(Te==="history")return`${ii?`?${ii}`:""}${Ue.location.hash||""}`;if(Te==="hash-params")return`${Ue.location.search||""}${ii?`#${ii}`:""}`;const si=Ue.location.hash||"#",oi=si.indexOf("?");return oi>0?`${si.slice(0,oi)}${ii?`?${ii}`:""}`:`${si}${ii?`?${ii}`:""}`}function An(){return new URLSearchParams(We())}function En(ni){const ii=new Set(Object.keys(He));for(const si of ni.keys()){const oi=ni.getAll(si);He[si]=oi.length>1?oi:ni.get(si)||"",ii.delete(si)}Array.from(ii).forEach(si=>delete He[si])}const{pause:Sn,resume:Tn}=watchPausable(He,()=>{const ni=new URLSearchParams("");Object.keys(He).forEach(ii=>{const si=He[ii];Array.isArray(si)?si.forEach(oi=>ni.append(ii,oi)):Oe&&si==null||ke&&!si?ni.delete(ii):ni.set(ii,si)}),Ln(ni)},{deep:!0});function Ln(ni,ii){Sn(),ii&&En(ni),Ue.history.replaceState(Ue.history.state,Ue.document.title,Ue.location.pathname+Cn(ni)),Tn()}function Bn(){Be&&Ln(An(),!0)}useEventListener(Ue,"popstate",Bn,!1),Te!=="history"&&useEventListener(Ue,"hashchange",Bn,!1);const ti=An();return ti.keys().next().value?En(ti):Object.assign(He,t),He}function useMatchMedia(Te){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[Te]!==void 0){const t="(max-width: "+e[Te]+")";return useMediaQuery(t)}}function useMatchMediaHeight(Te){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const t="(max-height: "+e[Te]+")";return useMediaQuery(t)}}function useBaseUrl(){return"https://cartes.gouv.fr"}const headerParams=ref({});function useHeaderParams(){return headerParams.value={serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")},headerParams}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$l={},_sfc_main$R=Object.assign(__default__$l,{__name:"ModalConsent",setup(Te,{expose:e}){const t=useRouter(),Oe=useEulerian();var ke=Oe.hasKey();const Be=ref(!ke),Ue="Panneau de gestion des cookies",He="md",We=useBaseUrl()+"/donnees-personnelles",Cn=()=>{Be.value=!0,Oe.pause()},An=()=>{Be.value=!1,t.push({path:"/"}),Oe.resume()};e({openModalConsent:Cn,onModalConsentClose:An});const En=()=>{Oe.start(),An()},Sn=()=>{Oe.stop(),An()};return(Tn,Ln)=>{const Bn=$s,ti=Vt$1;return openBlock(),createBlock(ti,{opened:unref(Be),title:Ue,size:He,onClose:An},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(Bn,{onAcceptAll:Ln[0]||(Ln[0]=ni=>En()),onRefuseAll:Ln[1]||(Ln[1]=ni=>Sn())},{default:withCtx(()=>[Ln[2]||(Ln[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:We},"Données personnelles et cookies")]),_:1})]),Ln[3]||(Ln[3]=createBaseVNode("hr",null,null,-1)),Ln[4]||(Ln[4]=createBaseVNode("div",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title$1="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$Q={__name:"ModalTheme",setup(Te,{expose:e}){const t=useEulerian(),{setScheme:Oe,theme:ke,scheme:Be}=ef(),Ue=ref(Be.value);watch(Be,()=>{Ue.value=Be.value});const He=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],We=()=>{Oe(Ue.value)},Cn=ref(!1),An=()=>{Cn.value=!0,t.pause()},En=()=>{Cn.value=!1,t.resume()};return e({openModalTheme:An,onModalThemeClose:En}),(Sn,Tn)=>{const Ln=Bi,Bn=Vt$1;return openBlock(),createBlock(Bn,{ref:"modal",opened:unref(Cn),title:title$1,size,onClose:En},{default:withCtx(()=>[createVNode(Ln,{modelValue:unref(Ue),"onUpdate:modelValue":[Tn[0]||(Tn[0]=ti=>isRef(Ue)?Ue.value=ti:null),We],legend,name:"fr-radios-theme",options:He},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=ef(),NAMESPACE$1="cartes.gouv.fr",ns$1=Te=>NAMESPACE$1+"."+Te,VERSION="5",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var Te=useStorage(ns$1("version"),VERSION);Te.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),Te.value=VERSION),watch(Te,()=>{localStorage.setItem(ns$1("version"),Te.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),_hoisted_1$e={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$P=defineComponent({__name:"Main",setup(Te){useAppStore(),dist.useLogger(),useMatchMedia("LG");const e=useHeaderParams(),t=useFooterParams(),Oe=ref(null),ke=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:Oe.value?Oe.value.openModalTheme:null}]),Be=ref(null),Ue=computed(()=>t.mandatoryLinks.map(Ln=>(Ln.label==="Gestion des cookies"&&(delete Ln.href,Ln.onclick=Be.value?Be.value.openModalConsent:null,Ln.to="/"),Ln)));var He=inject("services"),We=ref(""),Cn=ref(!0),An=()=>{Cn.value=!0};He.isAccessValided().then(Ln=>{Ln==="login"&&He.getAccessToken().then(Bn=>{Bn&&He.getUserMe().then(ti=>{var ni=ti.last_name,ii=ti.first_name;e.value.quickLinks.forEach(si=>{si.label==="..."&&(si.label=`${ii} ${ni}`)})}).catch(ti=>{console.error(ti),We.value="Error to get user info : "+ti.message,Cn.value=!1})}).catch(Bn=>{console.error(Bn),We.value="Error to get token : "+Bn.message,Cn.value=!1})}).catch(Ln=>{console.error(Ln),We.value="Error during authentication : "+Ln.message,Cn.value=!1});const En=computed(()=>e.value.quickLinks.filter(Ln=>{if(He.authenticated&&Ln.label==="...")if(Object.keys(He.user).length){var Bn=He.user.last_name,ti=He.user.first_name;Ln.label=`${ti} ${Bn}`}else return!1;if(!Object.keys(Ln).includes("authenticated")||Ln.authenticated===He.authenticated)return!0})),Sn=useRoute(),Tn=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(Sn.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:"/",text:"Cartes"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(Sn.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}];return(Ln,Bn)=>{const ti=Yo,ni=hl,ii=Sa,si=resolveComponent("router-view"),oi=In$2;return openBlock(),createElementBlock(Fragment,null,[createVNode(ni,{modelValue:unref(e).serviceTitle,"onUpdate:modelValue":Bn[0]||(Bn[0]=ci=>unref(e).serviceTitle=ci),"service-title":unref(e).serviceTitle,"show-beta":!0,"service-description":unref(e).serviceDescription,"logo-text":unref(e).logoText,"quick-links":unref(En)},{mainnav:withCtx(()=>[createVNode(ti,{"nav-items":Tn})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createVNode(ii,{description:unref(We),type:"error",closed:unref(Cn),closeable:!0,onClose:Bn[1]||(Bn[1]=ci=>unref(An)())},null,8,["description","closed"]),createBaseVNode("div",null,[createVNode(si)]),Bn[2]||(Bn[2]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),Bn[3]||(Bn[3]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(oi,{"before-mandatory-links":unref(t).beforeMandatoryLinks,"after-mandatory-links":unref(ke),"logo-text":unref(t).logoText,"desc-text":unref(t).descText,"home-link":unref(t).homeLink,partners:unref(t).partners,"licence-text":unref(t).licenceText,"licence-to":unref(t).licenceTo,"licence-name":unref(t).licenceName,"licence-link-props":unref(t).licenceLinkProps,"ecosystem-links":unref(t).ecosystemLinks,"mandatory-links":unref(Ue)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$e,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:Oe},null,512),createVNode(_sfc_main$R,{ref_key:"refModalConsent",ref:Be},null,512)])],64)}}}),_sfc_main$O=defineComponent({__name:"App",setup(Te){return(e,t)=>(openBlock(),createBlock(_sfc_main$P))}}),version$2="1.0.0-beta.2-353",Pkg$1={version:version$2};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(Te,e,t){let Oe,ke;t=t||ascending;let Be=0,Ue=Te.length,He=!1;for(;Be<Ue;)Oe=Be+(Ue-Be>>1),ke=+t(Te[Oe],e),ke<0?Be=Oe+1:(Ue=Oe,He=!ke);return He?Be:~Be}function ascending(Te,e){return Te>e?1:Te<e?-1:0}function descending(Te,e){return Te<e?1:Te>e?-1:0}function linearFindNearest(Te,e,t){if(Te[0]<=e)return 0;const Oe=Te.length;if(e<=Te[Oe-1])return Oe-1;if(typeof t=="function"){for(let ke=1;ke<Oe;++ke){const Be=Te[ke];if(Be===e)return ke;if(Be<e)return t(e,Te[ke-1],Be)>0?ke-1:ke}return Oe-1}if(t>0){for(let ke=1;ke<Oe;++ke)if(Te[ke]<e)return ke-1;return Oe-1}if(t<0){for(let ke=1;ke<Oe;++ke)if(Te[ke]<=e)return ke;return Oe-1}for(let ke=1;ke<Oe;++ke){if(Te[ke]==e)return ke;if(Te[ke]<e)return Te[ke-1]-e<e-Te[ke]?ke-1:ke}return Oe-1}function reverseSubArray(Te,e,t){for(;e<t;){const Oe=Te[e];Te[e]=Te[t],Te[t]=Oe,++e,--t}}function extend$4(Te,e){const t=Array.isArray(e)?e:[e],Oe=t.length;for(let ke=0;ke<Oe;ke++)Te[Te.length]=t[ke]}function equals$2(Te,e){const t=Te.length;if(t!==e.length)return!1;for(let Oe=0;Oe<t;Oe++)if(Te[Oe]!==e[Oe])return!1;return!0}function isSorted(Te,e,t){const Oe=e||ascending;return Te.every(function(ke,Be){if(Be===0)return!0;const Ue=Oe(Te[Be-1],ke);return!(Ue>0||Ue===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(Te){let e,t,Oe;return function(){const ke=Array.prototype.slice.call(arguments);return(!t||this!==Oe||!equals$2(ke,t))&&(Oe=this,t=ke,e=Te.apply(this,arguments)),e}}function toPromise(Te){function e(){let t;try{t=Te()}catch(Oe){return Promise.reject(Oe)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(Te){for(const e in Te)delete Te[e]}function isEmpty$1(Te){let e;for(e in Te)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const Oe=this.listeners_||(this.listeners_={}),ke=Oe[e]||(Oe[e]=[]);ke.includes(t)||ke.push(t)}dispatchEvent(e){const t=typeof e=="string",Oe=t?e:e.type,ke=this.listeners_&&this.listeners_[Oe];if(!ke)return;const Be=t?new BaseEvent(e):e;Be.target||(Be.target=this.eventTarget_||this);const Ue=this.dispatching_||(this.dispatching_={}),He=this.pendingRemovals_||(this.pendingRemovals_={});Oe in Ue||(Ue[Oe]=0,He[Oe]=0),++Ue[Oe];let We;for(let Cn=0,An=ke.length;Cn<An;++Cn)if("handleEvent"in ke[Cn]?We=ke[Cn].handleEvent(Be):We=ke[Cn].call(this,Be),We===!1||Be.propagationStopped){We=!1;break}if(--Ue[Oe]===0){let Cn=He[Oe];for(delete He[Oe];Cn--;)this.removeEventListener(Oe,VOID);delete Ue[Oe]}return We}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const Oe=this.listeners_[e];if(!Oe)return;const ke=Oe.indexOf(t);ke!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(Oe[ke]=VOID,++this.pendingRemovals_[e]):(Oe.splice(ke,1),Oe.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(Te,e,t,Oe,ke){if(ke){const Ue=t;t=function(){Te.removeEventListener(e,t),Ue.apply(Oe??this,arguments)}}else Oe&&Oe!==Te&&(t=t.bind(Oe));const Be={target:Te,type:e,listener:t};return Te.addEventListener(e,t),Be}function listenOnce(Te,e,t,Oe){return listen(Te,e,t,Oe,!0)}function unlistenByKey(Te){Te&&Te.target&&(Te.target.removeEventListener(Te.type,Te.listener),clear$1(Te))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const Oe=e.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=listen(this,e[Be],t);return ke}return listen(this,e,t)}onceInternal(e,t){let Oe;if(Array.isArray(e)){const ke=e.length;Oe=new Array(ke);for(let Be=0;Be<ke;++Be)Oe[Be]=listenOnce(this,e[Be],t)}else Oe=listenOnce(this,e,t);return t.ol_key=Oe,Oe}unInternal(e,t){const Oe=t.ol_key;if(Oe)unByKey(Oe);else if(Array.isArray(e))for(let ke=0,Be=e.length;ke<Be;++ke)this.removeEventListener(e[ke],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(Te){if(Array.isArray(Te))for(let e=0,t=Te.length;e<t;++e)unlistenByKey(Te[e]);else unlistenByKey(Te)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(Te){return Te.ol_uid||(Te.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.key=t,this.oldValue=Oe}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let Oe;Oe=`change:${e}`,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,t)),Oe=ObjectEventType.PROPERTYCHANGE,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,Oe){const ke=this.values_||(this.values_={});if(Oe)ke[e]=t;else{const Be=ke[e];ke[e]=t,Be!==t&&this.notify(e,Be)}}setProperties(e,t){for(const Oe in e)this.set(Oe,e[Oe],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const Oe=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,Oe)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(Te){const e=Te.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let Oe=0,ke=fontRegExMatchIndex.length;Oe<ke;++Oe){const Be=e[Oe+1];Be!==void 0&&(t[fontRegExMatchIndex[Oe]]=Be)}return t.families=t.family.split(/,\s?/),t},Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(Te){const e=createEmpty();for(let t=0,Oe=Te.length;t<Oe;++t)extendCoordinate(e,Te[t]);return e}function _boundingExtentXYs(Te,e,t){const Oe=Math.min.apply(null,Te),ke=Math.min.apply(null,e),Be=Math.max.apply(null,Te),Ue=Math.max.apply(null,e);return createOrUpdate$2(Oe,ke,Be,Ue,t)}function buffer(Te,e,t){return t?(t[0]=Te[0]-e,t[1]=Te[1]-e,t[2]=Te[2]+e,t[3]=Te[3]+e,t):[Te[0]-e,Te[1]-e,Te[2]+e,Te[3]+e]}function clone$1(Te,e){return e?(e[0]=Te[0],e[1]=Te[1],e[2]=Te[2],e[3]=Te[3],e):Te.slice()}function closestSquaredDistanceXY(Te,e,t){let Oe,ke;return e<Te[0]?Oe=Te[0]-e:Te[2]<e?Oe=e-Te[2]:Oe=0,t<Te[1]?ke=Te[1]-t:Te[3]<t?ke=t-Te[3]:ke=0,Oe*Oe+ke*ke}function containsCoordinate(Te,e){return containsXY(Te,e[0],e[1])}function containsExtent(Te,e){return Te[0]<=e[0]&&e[2]<=Te[2]&&Te[1]<=e[1]&&e[3]<=Te[3]}function containsXY(Te,e,t){return Te[0]<=e&&e<=Te[2]&&Te[1]<=t&&t<=Te[3]}function coordinateRelationship(Te,e){const t=Te[0],Oe=Te[1],ke=Te[2],Be=Te[3],Ue=e[0],He=e[1];let We=Relationship.UNKNOWN;return Ue<t?We=We|Relationship.LEFT:Ue>ke&&(We=We|Relationship.RIGHT),He<Oe?We=We|Relationship.BELOW:He>Be&&(We=We|Relationship.ABOVE),We===Relationship.UNKNOWN&&(We=Relationship.INTERSECTING),We}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(Te,e,t,Oe,ke){return ke?(ke[0]=Te,ke[1]=e,ke[2]=t,ke[3]=Oe,ke):[Te,e,t,Oe]}function createOrUpdateEmpty(Te){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,Te)}function createOrUpdateFromCoordinate(Te,e){const t=Te[0],Oe=Te[1];return createOrUpdate$2(t,Oe,t,Oe,e)}function createOrUpdateFromFlatCoordinates(Te,e,t,Oe,ke){const Be=createOrUpdateEmpty(ke);return extendFlatCoordinates(Be,Te,e,t,Oe)}function equals$1(Te,e){return Te[0]==e[0]&&Te[2]==e[2]&&Te[1]==e[1]&&Te[3]==e[3]}function extend$3(Te,e){return e[0]<Te[0]&&(Te[0]=e[0]),e[2]>Te[2]&&(Te[2]=e[2]),e[1]<Te[1]&&(Te[1]=e[1]),e[3]>Te[3]&&(Te[3]=e[3]),Te}function extendCoordinate(Te,e){e[0]<Te[0]&&(Te[0]=e[0]),e[0]>Te[2]&&(Te[2]=e[0]),e[1]<Te[1]&&(Te[1]=e[1]),e[1]>Te[3]&&(Te[3]=e[1])}function extendFlatCoordinates(Te,e,t,Oe,ke){for(;t<Oe;t+=ke)extendXY(Te,e[t],e[t+1]);return Te}function extendXY(Te,e,t){Te[0]=Math.min(Te[0],e),Te[1]=Math.min(Te[1],t),Te[2]=Math.max(Te[2],e),Te[3]=Math.max(Te[3],t)}function forEachCorner(Te,e){let t;return t=e(getBottomLeft(Te)),t||(t=e(getBottomRight(Te)),t)||(t=e(getTopRight(Te)),t)||(t=e(getTopLeft(Te)),t)?t:!1}function getArea$1(Te){let e=0;return isEmpty(Te)||(e=getWidth(Te)*getHeight(Te)),e}function getBottomLeft(Te){return[Te[0],Te[1]]}function getBottomRight(Te){return[Te[2],Te[1]]}function getCenter(Te){return[(Te[0]+Te[2])/2,(Te[1]+Te[3])/2]}function getCorner(Te,e){let t;if(e==="bottom-left")t=getBottomLeft(Te);else if(e==="bottom-right")t=getBottomRight(Te);else if(e==="top-left")t=getTopLeft(Te);else if(e==="top-right")t=getTopRight(Te);else throw new Error("Invalid corner");return t}function getForViewAndSize(Te,e,t,Oe,ke){const[Be,Ue,He,We,Cn,An,En,Sn]=getRotatedViewport(Te,e,t,Oe);return createOrUpdate$2(Math.min(Be,He,Cn,En),Math.min(Ue,We,An,Sn),Math.max(Be,He,Cn,En),Math.max(Ue,We,An,Sn),ke)}function getRotatedViewport(Te,e,t,Oe){const ke=e*Oe[0]/2,Be=e*Oe[1]/2,Ue=Math.cos(t),He=Math.sin(t),We=ke*Ue,Cn=ke*He,An=Be*Ue,En=Be*He,Sn=Te[0],Tn=Te[1];return[Sn-We+En,Tn-Cn-An,Sn-We-En,Tn-Cn+An,Sn+We-En,Tn+Cn+An,Sn+We+En,Tn+Cn-An,Sn-We+En,Tn-Cn-An]}function getHeight(Te){return Te[3]-Te[1]}function getIntersection(Te,e,t){const Oe=t||createEmpty();return intersects$1(Te,e)?(Te[0]>e[0]?Oe[0]=Te[0]:Oe[0]=e[0],Te[1]>e[1]?Oe[1]=Te[1]:Oe[1]=e[1],Te[2]<e[2]?Oe[2]=Te[2]:Oe[2]=e[2],Te[3]<e[3]?Oe[3]=Te[3]:Oe[3]=e[3]):createOrUpdateEmpty(Oe),Oe}function getTopLeft(Te){return[Te[0],Te[3]]}function getTopRight(Te){return[Te[2],Te[3]]}function getWidth(Te){return Te[2]-Te[0]}function intersects$1(Te,e){return Te[0]<=e[2]&&Te[2]>=e[0]&&Te[1]<=e[3]&&Te[3]>=e[1]}function isEmpty(Te){return Te[2]<Te[0]||Te[3]<Te[1]}function returnOrUpdate(Te,e){return e?(e[0]=Te[0],e[1]=Te[1],e[2]=Te[2],e[3]=Te[3],e):Te}function scaleFromCenter(Te,e){const t=(Te[2]-Te[0])/2*(e-1),Oe=(Te[3]-Te[1])/2*(e-1);Te[0]-=t,Te[2]+=t,Te[1]-=Oe,Te[3]+=Oe}function intersectsSegment(Te,e,t){let Oe=!1;const ke=coordinateRelationship(Te,e),Be=coordinateRelationship(Te,t);if(ke===Relationship.INTERSECTING||Be===Relationship.INTERSECTING)Oe=!0;else{const Ue=Te[0],He=Te[1],We=Te[2],Cn=Te[3],An=e[0],En=e[1],Sn=t[0],Tn=t[1],Ln=(Tn-En)/(Sn-An);let Bn,ti;Be&Relationship.ABOVE&&!(ke&Relationship.ABOVE)&&(Bn=Sn-(Tn-Cn)/Ln,Oe=Bn>=Ue&&Bn<=We),!Oe&&Be&Relationship.RIGHT&&!(ke&Relationship.RIGHT)&&(ti=Tn-(Sn-We)*Ln,Oe=ti>=He&&ti<=Cn),!Oe&&Be&Relationship.BELOW&&!(ke&Relationship.BELOW)&&(Bn=Sn-(Tn-He)/Ln,Oe=Bn>=Ue&&Bn<=We),!Oe&&Be&Relationship.LEFT&&!(ke&Relationship.LEFT)&&(ti=Tn-(Sn-Ue)*Ln,Oe=ti>=He&&ti<=Cn)}return Oe}function applyTransform(Te,e,t,Oe){if(isEmpty(Te))return createOrUpdateEmpty(t);let ke=[];ke=[Te[0],Te[1],Te[2],Te[1],Te[2],Te[3],Te[0],Te[3]],e(ke,ke,2);const Be=[],Ue=[];for(let He=0,We=ke.length;He<We;He+=2)Be.push(ke[He]),Ue.push(ke[He+1]);return _boundingExtentXYs(Be,Ue,t)}function wrapX$2(Te,e){const t=e.getExtent(),Oe=getCenter(Te);if(e.canWrapX()&&(Oe[0]<t[0]||Oe[0]>=t[2])){const ke=getWidth(t),Ue=Math.floor((Oe[0]-t[0])/ke)*ke;Te[0]-=Ue,Te[2]-=Ue}return Te}function wrapAndSliceX(Te,e,t){if(e.canWrapX()){const Oe=e.getExtent();if(!isFinite(Te[0])||!isFinite(Te[2]))return[[Oe[0],Te[1],Oe[2],Te[3]]];wrapX$2(Te,e);const ke=getWidth(Oe);if(getWidth(Te)>ke&&!t)return[[Oe[0],Te[1],Oe[2],Te[3]]];if(Te[0]<Oe[0])return[[Te[0]+ke,Te[1],Oe[2],Te[3]],[Oe[0],Te[1],Te[2],Te[3]]];if(Te[2]>Oe[2])return[[Te[0],Te[1],Oe[2],Te[3]],[Oe[0],Te[1],Te[2]-ke,Te[3]]]}return[Te]}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let Te=!1;try{const e=Object.defineProperty({},"passive",{get:function(){Te=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return Te}();function createCanvasContext2D(Te,e,t,Oe){let ke;return t&&t.length?ke=t.shift():WORKER_OFFSCREEN_CANVAS?ke=new OffscreenCanvas(Te||300,e||300):ke=document.createElement("canvas"),Te&&(ke.width=Te),e&&(ke.height=e),ke.getContext("2d",Oe)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(Te){const e=Te.canvas;e.width=1,e.height=1,Te.clearRect(0,0,1,1)}function outerWidth(Te){let e=Te.offsetWidth;const t=getComputedStyle(Te);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(Te){let e=Te.offsetHeight;const t=getComputedStyle(Te);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(Te,e){const t=e.parentNode;t&&t.replaceChild(Te,e)}function removeChildren(Te){for(;Te.lastChild;)Te.lastChild.remove()}function replaceChildren(Te,e){const t=Te.childNodes;for(let Oe=0;;++Oe){const ke=t[Oe],Be=e[Oe];if(!ke&&!Be)break;if(ke!==Be){if(!ke){Te.appendChild(Be);continue}if(!Be){Te.removeChild(ke),--Oe;continue}Te.insertBefore(Be,ke)}}}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const Oe=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?Oe.insertBefore(this.element,Oe.childNodes[0]||null):Oe.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$3.POSITION))return;const Oe=this.getRect(t.getTargetElement(),t.getSize()),ke=this.getElement(),Be=this.getRect(ke,[outerWidth(ke),outerHeight(ke)]);e=e||{};const Ue=e.margin===void 0?20:e.margin;if(!containsExtent(Oe,Be)){const He=Be[0]-Oe[0],We=Oe[2]-Be[2],Cn=Be[1]-Oe[1],An=Oe[3]-Be[3],En=[0,0];if(He<0?En[0]=He-Ue:We<0&&(En[0]=Math.abs(We)+Ue),Cn<0?En[1]=Cn-Ue:An<0&&(En[1]=Math.abs(An)+Ue),En[0]!==0||En[1]!==0){const Sn=t.getView().getCenterInternal(),Tn=t.getPixelFromCoordinateInternal(Sn);if(!Tn)return;const Ln=[Tn[0]+En[0],Tn[1]+En[1]],Bn=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(Ln),duration:Bn.duration,easing:Bn.easing})}}}getRect(e,t){const Oe=e.getBoundingClientRect(),ke=Oe.left+window.pageXOffset,Be=Oe.top+window.pageYOffset;return[ke,Be,ke+t[0],Be+t[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const Oe=e.getPixelFromCoordinate(t),ke=e.getSize();this.updateRenderedPosition(Oe,ke)}updateRenderedPosition(e,t){const Oe=this.element.style,ke=this.getOffset(),Be=this.getPositioning();this.setVisible(!0);const Ue=Math.round(e[0]+ke[0])+"px",He=Math.round(e[1]+ke[1])+"px";let We="0%",Cn="0%";Be=="bottom-right"||Be=="center-right"||Be=="top-right"?We="-100%":(Be=="bottom-center"||Be=="center-center"||Be=="top-center")&&(We="-50%"),Be=="bottom-left"||Be=="bottom-center"||Be=="bottom-right"?Cn="-100%":(Be=="center-left"||Be=="center-center"||Be=="center-right")&&(Cn="-50%");const An=`translate(${We}, ${Cn}) translate(${Ue}, ${He})`;this.rendered.transform_!=An&&(this.rendered.transform_=An,Oe.transform=An)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(Te){return Math.pow(Te,3)}function easeOut(Te){return 1-easeIn(1-Te)}function inAndOut(Te){return 3*Te*Te-2*Te*Te*Te}function linear(Te){return Te}class Tile extends Target{constructor(e,t,Oe){super(),Oe=Oe||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=Oe.transition===void 0?250:Oe.transition,this.transitionStarts_={},this.interpolate=!!Oe.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let Oe=this.transitionStarts_[e];if(!Oe)Oe=t,this.transitionStarts_[e]=Oe;else if(Oe===-1)return 1;const ke=t-Oe+1e3/60;return ke>=this.transition_?1:easeIn(ke/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}let VectorTile$1=class extends Tile{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Ue),this.extent=null,this.format_=ke,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Be,this.url_=Oe,this.key=Oe}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};class TileRange{constructor(e,t,Oe,ke){this.minX=e,this.maxX=t,this.minY=Oe,this.maxY=ke}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(Te,e,t,Oe,ke){return ke!==void 0?(ke.minX=Te,ke.maxX=e,ke.minY=t,ke.maxY=Oe,ke):new TileRange(Te,e,t,Oe)}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function assert(Te,e){if(!Te)throw new Error(e)}function clamp(Te,e,t){return Math.min(Math.max(Te,e),t)}function squaredSegmentDistance(Te,e,t,Oe,ke,Be){const Ue=ke-t,He=Be-Oe;if(Ue!==0||He!==0){const We=((Te-t)*Ue+(e-Oe)*He)/(Ue*Ue+He*He);We>1?(t=ke,Oe=Be):We>0&&(t+=Ue*We,Oe+=He*We)}return squaredDistance$1(Te,e,t,Oe)}function squaredDistance$1(Te,e,t,Oe){const ke=t-Te,Be=Oe-e;return ke*ke+Be*Be}function solveLinearSystem(Te){const e=Te.length;for(let Oe=0;Oe<e;Oe++){let ke=Oe,Be=Math.abs(Te[Oe][Oe]);for(let He=Oe+1;He<e;He++){const We=Math.abs(Te[He][Oe]);We>Be&&(Be=We,ke=He)}if(Be===0)return null;const Ue=Te[ke];Te[ke]=Te[Oe],Te[Oe]=Ue;for(let He=Oe+1;He<e;He++){const We=-Te[He][Oe]/Te[Oe][Oe];for(let Cn=Oe;Cn<e+1;Cn++)Oe==Cn?Te[He][Cn]=0:Te[He][Cn]+=We*Te[Oe][Cn]}}const t=new Array(e);for(let Oe=e-1;Oe>=0;Oe--){t[Oe]=Te[Oe][e]/Te[Oe][Oe];for(let ke=Oe-1;ke>=0;ke--)Te[ke][e]-=Te[ke][Oe]*t[Oe]}return t}function toDegrees(Te){return Te*180/Math.PI}function toRadians(Te){return Te*Math.PI/180}function modulo(Te,e){const t=Te%e;return t*e<0?t+e:t}function lerp(Te,e,t){return Te+t*(e-Te)}function toFixed(Te,e){const t=Math.pow(10,e);return Math.round(Te*t)/t}function round(Te,e){return Math.round(toFixed(Te,e))}function floor(Te,e){return Math.floor(toFixed(Te,e))}function ceil(Te,e){return Math.ceil(toFixed(Te,e))}function wrap(Te,e,t){if(Te>=e&&Te<t)return Te;const Oe=t-e;return((Te-e)%Oe+Oe)%Oe+e}function createOrUpdate(Te,e,t,Oe){return Oe!==void 0?(Oe[0]=Te,Oe[1]=e,Oe[2]=t,Oe):[Te,e,t]}function getKeyZXY(Te,e,t){return Te+"/"+e+"/"+t}function hash(Te){return hashZXY(Te[0],Te[1],Te[2])}function hashZXY(Te,e,t){return(e<<Te)+t}function withinExtentAndZ(Te,e){const t=Te[0],Oe=Te[1],ke=Te[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const Be=e.getFullTileRange(t);return Be?Be.containsXY(Oe,ke):!0}function forEach(Te,e,t,Oe,ke){let Be;for(e+=Oe;e<t;e+=Oe)if(Be=ke(Te.slice(e-Oe,e),Te.slice(e,e+Oe)),Be)return Be;return!1}function linearRingContainsExtent(Te,e,t,Oe,ke){return!forEachCorner(ke,function(Ue){return!linearRingContainsXY(Te,e,t,Oe,Ue[0],Ue[1])})}function linearRingContainsXY(Te,e,t,Oe,ke,Be){let Ue=0,He=Te[t-Oe],We=Te[t-Oe+1];for(;e<t;e+=Oe){const Cn=Te[e],An=Te[e+1];We<=Be?An>Be&&(Cn-He)*(Be-We)-(ke-He)*(An-We)>0&&Ue++:An<=Be&&(Cn-He)*(Be-We)-(ke-He)*(An-We)<0&&Ue--,He=Cn,We=An}return Ue!==0}function linearRingsContainsXY(Te,e,t,Oe,ke,Be){if(t.length===0||!linearRingContainsXY(Te,e,t[0],Oe,ke,Be))return!1;for(let Ue=1,He=t.length;Ue<He;++Ue)if(linearRingContainsXY(Te,t[Ue-1],t[Ue],Oe,ke,Be))return!1;return!0}function linearRingssContainsXY(Te,e,t,Oe,ke,Be){if(t.length===0)return!1;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue];if(linearRingsContainsXY(Te,e,We,Oe,ke,Be))return!0;e=We[We.length-1]}return!1}function intersectsLineString(Te,e,t,Oe,ke){const Be=extendFlatCoordinates(createEmpty(),Te,e,t,Oe);return intersects$1(ke,Be)?containsExtent(ke,Be)||Be[0]>=ke[0]&&Be[2]<=ke[2]||Be[1]>=ke[1]&&Be[3]<=ke[3]?!0:forEach(Te,e,t,Oe,function(Ue,He){return intersectsSegment(ke,Ue,He)}):!1}function intersectsLineStringArray(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){if(intersectsLineString(Te,e,t[Be],Oe,ke))return!0;e=t[Be]}return!1}function intersectsLinearRing(Te,e,t,Oe,ke){return!!(intersectsLineString(Te,e,t,Oe,ke)||linearRingContainsXY(Te,e,t,Oe,ke[0],ke[1])||linearRingContainsXY(Te,e,t,Oe,ke[0],ke[3])||linearRingContainsXY(Te,e,t,Oe,ke[2],ke[1])||linearRingContainsXY(Te,e,t,Oe,ke[2],ke[3]))}function intersectsLinearRingArray(Te,e,t,Oe,ke){if(!intersectsLinearRing(Te,e,t[0],Oe,ke))return!1;if(t.length===1)return!0;for(let Be=1,Ue=t.length;Be<Ue;++Be)if(linearRingContainsExtent(Te,t[Be-1],t[Be],Oe,ke)&&!intersectsLineString(Te,t[Be-1],t[Be],Oe,ke))return!1;return!0}function intersectsLinearRingMultiArray(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];if(intersectsLinearRingArray(Te,e,He,Oe,ke))return!0;e=He[He.length-1]}return!1}function hasArea(Te){return Te[0]>0&&Te[1]>0}function scale$4(Te,e,t){return t===void 0&&(t=[0,0]),t[0]=Te[0]*e+.5|0,t[1]=Te[1]*e+.5|0,t}function toSize(Te,e){return Array.isArray(Te)?Te:(e===void 0?e=[Te,Te]:(e[0]=Te,e[1]=Te),e)}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(ke,Be)=>Be-ke),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let ke=0,Be=this.resolutions_.length-1;ke<Be;++ke)if(!t)t=this.resolutions_[ke]/this.resolutions_[ke+1];else if(this.resolutions_[ke]/this.resolutions_[ke+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const Oe=e.extent;Oe!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(Oe)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=Oe!==void 0?Oe:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((ke,Be)=>{const Ue=new TileRange(Math.min(0,ke[0]),Math.max(ke[0]-1,-1),Math.min(0,ke[1]),Math.max(ke[1]-1,-1));if(Oe){const He=this.getTileRangeForExtentAndZ(Oe,Be);Ue.minX=Math.max(He.minX,Ue.minX),Ue.maxX=Math.min(He.maxX,Ue.maxX),Ue.minY=Math.max(He.minY,Ue.minY),Ue.maxY=Math.min(He.maxY,Ue.maxY)}return Ue}):Oe&&this.calculateTileRanges_(Oe)}forEachTileCoord(e,t,Oe){const ke=this.getTileRangeForExtentAndZ(e,t);for(let Be=ke.minX,Ue=ke.maxX;Be<=Ue;++Be)for(let He=ke.minY,We=ke.maxY;He<=We;++He)Oe([t,Be,He])}forEachTileCoordParentTileRange(e,t,Oe,ke){let Be,Ue,He,We=null,Cn=e[0]-1;for(this.zoomFactor_===2?(Ue=e[1],He=e[2]):We=this.getTileCoordExtent(e,ke);Cn>=this.minZoom;){if(Ue!==void 0&&He!==void 0?(Ue=Math.floor(Ue/2),He=Math.floor(He/2),Be=createOrUpdate$1(Ue,Ue,He,He,Oe)):Be=this.getTileRangeForExtentAndZ(We,Cn,Oe),t(Cn,Be))return!0;--Cn}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,Oe){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Be=e[1]*2,Ue=e[2]*2;return createOrUpdate$1(Be,Be+1,Ue,Ue+1,t)}const ke=this.getTileCoordExtent(e,Oe||this.tmpExtent_);return this.getTileRangeForExtentAndZ(ke,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,Oe){if(t>this.maxZoom||t<this.minZoom)return null;const ke=e[0],Be=e[1],Ue=e[2];if(t===ke)return createOrUpdate$1(Be,Ue,Be,Ue,Oe);if(this.zoomFactor_){const We=Math.pow(this.zoomFactor_,t-ke),Cn=Math.floor(Be*We),An=Math.floor(Ue*We);if(t<ke)return createOrUpdate$1(Cn,Cn,An,An,Oe);const En=Math.floor(We*(Be+1))-1,Sn=Math.floor(We*(Ue+1))-1;return createOrUpdate$1(Cn,En,An,Sn,Oe)}const He=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(He,t,Oe)}getTileRangeForExtentAndZ(e,t,Oe){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const ke=tmpTileCoord[1],Be=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const Ue=tmpTileCoord[1],He=tmpTileCoord[2];return createOrUpdate$1(ke,Ue,Be,He,Oe)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),Oe=this.getResolution(e[0]),ke=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*ke[0]*Oe,t[1]-(e[2]+.5)*ke[1]*Oe]}getTileCoordExtent(e,t){const Oe=this.getOrigin(e[0]),ke=this.getResolution(e[0]),Be=toSize(this.getTileSize(e[0]),this.tmpSize_),Ue=Oe[0]+e[1]*Be[0]*ke,He=Oe[1]-(e[2]+1)*Be[1]*ke,We=Ue+Be[0]*ke,Cn=He+Be[1]*ke;return createOrUpdate$2(Ue,He,We,Cn,t)}getTileCoordForCoordAndResolution(e,t,Oe){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,Oe)}getTileCoordForXYAndResolution_(e,t,Oe,ke,Be){const Ue=this.getZForResolution(Oe),He=Oe/this.getResolution(Ue),We=this.getOrigin(Ue),Cn=toSize(this.getTileSize(Ue),this.tmpSize_);let An=He*(e-We[0])/Oe/Cn[0],En=He*(We[1]-t)/Oe/Cn[1];return ke?(An=ceil(An,DECIMALS$1)-1,En=ceil(En,DECIMALS$1)-1):(An=floor(An,DECIMALS$1),En=floor(En,DECIMALS$1)),createOrUpdate(Ue,An,En,Be)}getTileCoordForXYAndZ_(e,t,Oe,ke,Be){const Ue=this.getOrigin(Oe),He=this.getResolution(Oe),We=toSize(this.getTileSize(Oe),this.tmpSize_);let Cn=(e-Ue[0])/He/We[0],An=(Ue[1]-t)/He/We[1];return ke?(Cn=ceil(Cn,DECIMALS$1)-1,An=ceil(An,DECIMALS$1)-1):(Cn=floor(Cn,DECIMALS$1),An=floor(An,DECIMALS$1)),createOrUpdate(Oe,Cn,An,Be)}getTileCoordForCoordAndZ(e,t,Oe){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,Oe)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const Oe=linearFindNearest(this.resolutions_,e,t||0);return clamp(Oe,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,Oe=new Array(t);for(let ke=this.minZoom;ke<t;++ke)Oe[ke]=this.getTileRangeForExtentAndZ(e,ke);this.fullTileRanges_=Oe}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,Oe){return t/Math.cosh(Oe[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(Te,e,t,Oe){const ke=Te.length;t=t>1?t:2,Oe=Oe??t,e===void 0&&(t>2?e=Te.slice():e=new Array(ke));for(let Be=0;Be<ke;Be+=Oe){e[Be]=HALF_SIZE*Te[Be]/180;let Ue=RADIUS$1*Math.log(Math.tan(Math.PI*(+Te[Be+1]+90)/360));Ue>MAX_SAFE_Y?Ue=MAX_SAFE_Y:Ue<-MAX_SAFE_Y&&(Ue=-MAX_SAFE_Y),e[Be+1]=Ue}return e}function toEPSG4326(Te,e,t,Oe){const ke=Te.length;t=t>1?t:2,Oe=Oe??t,e===void 0&&(t>2?e=Te.slice():e=new Array(ke));for(let Be=0;Be<ke;Be+=Oe)e[Be]=180*Te[Be]/HALF_SIZE,e[Be+1]=360*Math.atan(Math.exp(Te[Be+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(Te){return cache$1[Te]||cache$1[Te.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(Te,e){cache$1[Te]=e}let transforms={};function add$2(Te,e,t){const Oe=Te.getCode(),ke=e.getCode();Oe in transforms||(transforms[Oe]={}),transforms[Oe][ke]=t}function get$4(Te,e){return Te in transforms&&e in transforms[Te]?transforms[Te][e]:null}function padNumber(Te,e,t){const Oe=""+Te;let ke=Oe.indexOf(".");return ke=ke===-1?Oe.length:ke,ke>e?Oe:new Array(1+e-ke).join("0")+Oe}function compareVersions(Te,e){const t=(""+Te).split("."),Oe=(""+e).split(".");for(let ke=0;ke<Math.max(t.length,Oe.length);ke++){const Be=parseInt(t[ke]||"0",10),Ue=parseInt(Oe[ke]||"0",10);if(Be>Ue)return 1;if(Ue>Be)return-1}return 0}function add$1(Te,e){return Te[0]+=+e[0],Te[1]+=+e[1],Te}function closestOnSegment(Te,e){const t=Te[0],Oe=Te[1],ke=e[0],Be=e[1],Ue=ke[0],He=ke[1],We=Be[0],Cn=Be[1],An=We-Ue,En=Cn-He,Sn=An===0&&En===0?0:(An*(t-Ue)+En*(Oe-He))/(An*An+En*En||0);let Tn,Ln;return Sn<=0?(Tn=Ue,Ln=He):Sn>=1?(Tn=We,Ln=Cn):(Tn=Ue+Sn*An,Ln=He+Sn*En),[Tn,Ln]}function equals(Te,e){let t=!0;for(let Oe=Te.length-1;Oe>=0;--Oe)if(Te[Oe]!=e[Oe]){t=!1;break}return t}function rotate$1(Te,e){const t=Math.cos(e),Oe=Math.sin(e),ke=Te[0]*t-Te[1]*Oe,Be=Te[1]*t+Te[0]*Oe;return Te[0]=ke,Te[1]=Be,Te}function scale$3(Te,e){return Te[0]*=e,Te[1]*=e,Te}function squaredDistance(Te,e){const t=Te[0]-e[0],Oe=Te[1]-e[1];return t*t+Oe*Oe}function distance(Te,e){return Math.sqrt(squaredDistance(Te,e))}function squaredDistanceToSegment(Te,e){return squaredDistance(Te,closestOnSegment(Te,e))}function wrapX$1(Te,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),Oe=getWorldsAway(Te,e,t);Oe&&(Te[0]-=Oe*t)}return Te}function getWorldsAway(Te,e,t){const Oe=e.getExtent();let ke=0;return e.canWrapX()&&(Te[0]<Oe[0]||Te[0]>Oe[2])&&(t=t||getWidth(Oe),ke=Math.floor((Te[0]-Oe[0])/t)),ke}const DEFAULT_RADIUS=63710088e-1;function getDistance(Te,e,t){t=t||DEFAULT_RADIUS;const Oe=toRadians(Te[1]),ke=toRadians(e[1]),Be=(ke-Oe)/2,Ue=toRadians(e[0]-Te[0])/2,He=Math.sin(Be)*Math.sin(Be)+Math.sin(Ue)*Math.sin(Ue)*Math.cos(Oe)*Math.cos(ke);return 2*t*Math.atan2(Math.sqrt(He),Math.sqrt(1-He))}function getAreaInternal(Te,e){let t=0;const Oe=Te.length;let ke=Te[Oe-1][0],Be=Te[Oe-1][1];for(let Ue=0;Ue<Oe;Ue++){const He=Te[Ue][0],We=Te[Ue][1];t+=toRadians(He-ke)*(2+Math.sin(toRadians(Be))+Math.sin(toRadians(We))),ke=He,Be=We}return t*e*e/2}function getArea(Te,e){e=e||{};const t=e.radius||DEFAULT_RADIUS,Oe=e.projection||"EPSG:3857",ke=Te.getType();ke!=="GeometryCollection"&&(Te=Te.clone().transform(Oe,"EPSG:4326"));let Be=0,Ue,He,We,Cn,An,En;switch(ke){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(Ue=Te.getCoordinates(),Be=Math.abs(getAreaInternal(Ue[0],t)),We=1,Cn=Ue.length;We<Cn;++We)Be-=Math.abs(getAreaInternal(Ue[We],t));break}case"MultiPolygon":{for(Ue=Te.getCoordinates(),We=0,Cn=Ue.length;We<Cn;++We)for(He=Ue[We],Be+=Math.abs(getAreaInternal(He[0],t)),An=1,En=He.length;An<En;++An)Be-=Math.abs(getAreaInternal(He[An],t));break}case"GeometryCollection":{const Sn=Te.getGeometries();for(We=0,Cn=Sn.length;We<Cn;++We)Be+=getArea(Sn[We],e);break}default:throw new Error("Unsupported geometry type: "+ke)}return Be}const K0=.9996,E$1=.00669438,E2=E$1*E$1,E3=E2*E$1,E_P2=E$1/(1-E$1),SQRT_E=Math.sqrt(1-E$1),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E$1/4-3*E2/64-5*E3/256,M2=3*E$1/8+3*E2/32+45*E3/1024,M3=15*E2/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R$2=6378137;function toLonLat$1(Te,e,t){const Oe=Te-5e5,Ue=(t.north?e:e-1e7)/K0/(R$2*M1),He=Ue+P2*Math.sin(2*Ue)+P3*Math.sin(4*Ue)+P4*Math.sin(6*Ue)+P5*Math.sin(8*Ue),We=Math.sin(He),Cn=We*We,An=Math.cos(He),En=We/An,Sn=En*En,Tn=Sn*Sn,Ln=1-E$1*Cn,Bn=Math.sqrt(1-E$1*Cn),ti=R$2/Bn,ni=(1-E$1)/Ln,ii=E_P2*An**2,si=ii*ii,oi=Oe/(ti*K0),ci=oi*oi,vi=ci*oi,pi=vi*oi,fi=pi*oi,Mi=fi*oi,Oi=He-En/ni*(ci/2-pi/24*(5+3*Sn+10*ii-4*si-9*E_P2))+Mi/720*(61+90*Sn+298*ii+45*Tn-252*E_P2-3*si);let ui=(oi-vi/6*(1+2*Sn+ii)+fi/120*(5-2*ii+28*Sn-3*si+8*E_P2+24*Tn))/An;return ui=wrap(ui+toRadians(zoneToCentralLongitude(t.number)),-Math.PI,Math.PI),[toDegrees(ui),toDegrees(Oi)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(Te,e,t){Te=wrap(Te,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const Oe=toRadians(e),ke=Math.sin(Oe),Be=Math.cos(Oe),Ue=ke/Be,He=Ue*Ue,We=He*He,Cn=toRadians(Te),An=zoneToCentralLongitude(t.number),En=toRadians(An),Sn=R$2/Math.sqrt(1-E$1*ke**2),Tn=E_P2*Be**2,Ln=Be*wrap(Cn-En,-Math.PI,Math.PI),Bn=Ln*Ln,ti=Bn*Ln,ni=ti*Ln,ii=ni*Ln,si=ii*Ln,oi=R$2*(M1*Oe-M2*Math.sin(2*Oe)+M3*Math.sin(4*Oe)-M4*Math.sin(6*Oe)),ci=K0*Sn*(Ln+ti/6*(1-He+Tn)+ii/120*(5-18*He+We+72*Tn-58*E_P2))+5e5;let vi=K0*(oi+Sn*Ue*(Bn/2+ni/24*(5-He+9*Tn+4*Tn**2)+si/720*(61-58*He+We+600*Tn-330*E_P2)));return t.north||(vi+=1e7),[ci,vi]}function zoneToCentralLongitude(Te){return(Te-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(Te){let e=0;for(const ke of epsgRegExes){const Be=Te.match(ke);if(Be){e=parseInt(Be[1]);break}}if(!e)return null;let t=0,Oe=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(Oe=!0,t=e-32600),t?{number:t,north:Oe}:null}function makeTransformFunction(Te,e){return function(t,Oe,ke,Be){const Ue=t.length;ke=ke>1?ke:2,Be=Be??ke,Oe||(ke>2?Oe=t.slice():Oe=new Array(Ue));for(let He=0;He<Ue;He+=Be){const We=t[He],Cn=t[He+1],An=Te(We,Cn,e);Oe[He]=An[0],Oe[He+1]=An[1]}return Oe}}function makeProjection(Te){return zoneFromCode(Te)?new Projection$1({code:Te,units:"m"}):null}function makeTransforms(Te){const e=zoneFromCode(Te.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat$1,e)}:null}function warn(...Te){console.warn(...Te)}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(Te){showCoordinateWarning=!1}function cloneTransform(Te,e){if(e!==void 0){for(let t=0,Oe=Te.length;t<Oe;++t)e[t]=Te[t];e=e}else e=Te.slice();return e}function addProjection(Te){add$3(Te.getCode(),Te),add$2(Te,Te,cloneTransform)}function addProjections(Te){Te.forEach(addProjection)}function get$3(Te){if(typeof Te!="string")return Te;const e=get$5(Te);if(e)return e;for(const t of projectionFactories){const Oe=t(Te);if(Oe)return Oe}return null}function getPointResolution(Te,e,t,Oe){Te=get$3(Te);let ke;const Be=Te.getPointResolutionFunc();if(Be){if(ke=Be(e,t),Oe&&Oe!==Te.getUnits()){const Ue=Te.getMetersPerUnit();Ue&&(ke=ke*Ue/METERS_PER_UNIT$1[Oe])}}else{const Ue=Te.getUnits();if(Ue=="degrees"&&!Oe||Oe=="degrees")ke=e;else{const He=getTransformFromProjections(Te,get$3("EPSG:4326"));if(!He&&Ue!=="degrees")ke=e*Te.getMetersPerUnit();else{let Cn=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];Cn=He(Cn,Cn,2);const An=getDistance(Cn.slice(0,2),Cn.slice(2,4)),En=getDistance(Cn.slice(4,6),Cn.slice(6,8));ke=(An+En)/2}const We=Oe?METERS_PER_UNIT$1[Oe]:Te.getMetersPerUnit();We!==void 0&&(ke/=We)}}return ke}function addEquivalentProjections(Te){addProjections(Te),Te.forEach(function(e){Te.forEach(function(t){e!==t&&add$2(e,t,cloneTransform)})})}function addEquivalentTransforms(Te,e,t,Oe){Te.forEach(function(ke){e.forEach(function(Be){add$2(ke,Be,t),add$2(Be,ke,Oe)})})}function createProjection(Te,e){return Te?typeof Te=="string"?get$3(Te):Te:get$3(e)}function createTransformFromCoordinateTransform(Te){return function(e,t,Oe,ke){const Be=e.length;Oe=Oe!==void 0?Oe:2,ke=ke??Oe,t=t!==void 0?t:new Array(Be);for(let Ue=0;Ue<Be;Ue+=ke){const He=Te(e.slice(Ue,Ue+Oe)),We=He.length;for(let Cn=0,An=ke;Cn<An;++Cn)t[Ue+Cn]=Cn>=We?e[Ue+Cn]:He[Cn]}return t}}function addCoordinateTransforms(Te,e,t,Oe){const ke=get$3(Te),Be=get$3(e);add$2(ke,Be,createTransformFromCoordinateTransform(t)),add$2(Be,ke,createTransformFromCoordinateTransform(Oe))}function fromLonLat(Te,e){return disableCoordinateWarning(),transform$1(Te,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(Te,e){const t=transform$1(Te,"EPSG:3857","EPSG:4326"),Oe=t[0];return(Oe<-180||Oe>180)&&(t[0]=modulo(Oe+180,360)-180),t}function equivalent(Te,e){if(Te===e)return!0;const t=Te.getUnits()===e.getUnits();return(Te.getCode()===e.getCode()||getTransformFromProjections(Te,e)===cloneTransform)&&t}function getTransformFromProjections(Te,e){const t=Te.getCode(),Oe=e.getCode();let ke=get$4(t,Oe);if(ke)return ke;let Be=null,Ue=null;for(const We of transformFactories)Be||(Be=We(Te)),Ue||(Ue=We(e));if(!Be&&!Ue)return null;const He="EPSG:4326";if(Ue)if(Be)ke=composeTransformFuncs(Be.inverse,Ue.forward);else{const We=get$4(t,He);We&&(ke=composeTransformFuncs(We,Ue.forward))}else{const We=get$4(He,Oe);We&&(ke=composeTransformFuncs(Be.inverse,We))}return ke&&(addProjection(Te),addProjection(e),add$2(Te,e,ke)),ke}function composeTransformFuncs(Te,e){return function(t,Oe,ke,Be){return Oe=Te(t,Oe,ke,Be),e(Oe,Oe,ke,Be)}}function getTransform(Te,e){const t=get$3(Te),Oe=get$3(e);return getTransformFromProjections(t,Oe)}function transform$1(Te,e,t){const Oe=getTransform(e,t);if(!Oe){const ke=get$3(e).getCode(),Be=get$3(t).getCode();throw new Error(`No transform available between ${ke} and ${Be}`)}return Oe(Te,void 0,Te.length)}function transformExtent(Te,e,t,Oe){const ke=getTransform(e,t);return applyTransform(Te,ke,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(Te,e){return Te}function fromUserCoordinate(Te,e){return showCoordinateWarning&&!equals(Te,[0,0])&&Te[0]>=-180&&Te[0]<=180&&Te[1]>=-90&&Te[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Te}function toUserExtent(Te,e){return Te}function fromUserExtent(Te,e){return Te}function fromUserResolution(Te,e){return Te}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(Oe,ke){t.viewResolver=Oe,t.viewRejector=ke})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(Te){return Te?typeof Te=="function"?Te:(Array.isArray(Te)||(Te=[Te]),e=>Te):null}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(Te){let e=Te.getDefaultTileGrid();return e||(e=createForProjection(Te),Te.setDefaultTileGrid(e)),e}function wrapX(Te,e,t){const Oe=e[0],ke=Te.getTileCoordCenter(e),Be=extentFromProjection(t);if(!containsCoordinate(Be,ke)){const Ue=getWidth(Be),He=Math.ceil((Be[0]-ke[0])/Ue);return ke[0]+=Ue*He,Te.getTileCoordForCoordAndZ(ke,Oe)}return e}function createForExtent(Te,e,t,Oe){Oe=Oe!==void 0?Oe:"top-left";const ke=resolutionsFromExtent(Te,e,t);return new TileGrid({extent:Te,origin:getCorner(Te,Oe),resolutions:ke,tileSize:t})}function createXYZ(Te){const e=Te||{},t=e.extent||get$3("EPSG:3857").getExtent(),Oe={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(Oe)}function resolutionsFromExtent(Te,e,t,Oe){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const ke=getHeight(Te),Be=getWidth(Te);Oe=Oe>0?Oe:Math.max(Be/t[0],ke/t[1]);const Ue=e+1,He=new Array(Ue);for(let We=0;We<Ue;++We)He[We]=Oe/Math.pow(2,We);return He}function createForProjection(Te,e,t,Oe){const ke=extentFromProjection(Te);return createForExtent(ke,e,t,Oe)}function extentFromProjection(Te){Te=get$3(Te);let e=Te.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/Te.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,Oe,ke,Be){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,Oe){const ke=this.getTileGridForProjection(Oe),Be=this.getTilePixelRatio(t),Ue=toSize(ke.getTileSize(e),this.tmpSize);return Be==1?Ue:scale$4(Ue,Be,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const Oe=t!==void 0?t:this.getProjection(),ke=t!==void 0?this.getTileGridForProjection(Oe):this.tileGrid||this.getTileGridForProjection(Oe);return this.getWrapX()&&Oe.isGlobal()&&(e=wrapX(ke,e,Oe)),withinExtentAndZ(e,ke)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}function appendParams(Te,e){const t=[];Object.keys(e).forEach(function(ke){e[ke]!==null&&e[ke]!==void 0&&t.push(ke+"="+encodeURIComponent(e[ke]))});const Oe=t.join("&");return Te=Te.replace(/[?&]$/,""),Te+=Te.includes("?")?"&":"?",Te+Oe}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(Te,e,t,Oe,ke){return Te.replace(zRegEx,e.toString()).replace(xRegEx,t.toString()).replace(yRegEx,Oe.toString()).replace(dashYRegEx,function(){if(ke===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(ke-Oe).toString()})}function expandUrl(Te){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(Te);if(t){const Oe=t[1].charCodeAt(0),ke=t[2].charCodeAt(0);let Be;for(Be=Oe;Be<=ke;++Be)e.push(Te.replace(t[0],String.fromCharCode(Be)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(Te),t){const Oe=parseInt(t[2],10);for(let ke=parseInt(t[1],10);ke<=Oe;ke++)e.push(Te.replace(t[0],ke.toString()));return e}return e.push(Te),e}function createFromTemplate(Te,e){return function(t,Oe,ke){if(!t)return;let Be;const Ue=t[0];if(e){const He=e.getFullTileRange(Ue);He&&(Be=He.getHeight()-1)}return renderXYZTemplate(Te,Ue,t[1],t[2],Be)}}function createFromTemplates(Te,e){const t=Te.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=createFromTemplate(Te[ke],e);return createFromTileUrlFunctions(Oe)}function createFromTileUrlFunctions(Te){return Te.length===1?Te[0]:function(e,t,Oe){if(!e)return;const ke=hash(e),Be=modulo(ke,Te.length);return Te[Be](e,t,Oe)}}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,Oe=getUid(t),ke=t.getState();let Be;ke==TileState.LOADING?(this.tileLoadingKeys_[Oe]=!0,Be=TileEventType.TILELOADSTART):Oe in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[Oe],Be=ke==TileState.ERROR?TileEventType.TILELOADERROR:ke==TileState.LOADED?TileEventType.TILELOADEND:void 0),Be!=null&&this.dispatchEvent(new TileSourceEvent(Be,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,Oe){}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,t,Oe,ke,Be){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=ke.bind(void 0,this),this.removeSourceTiles_=Be,this.wrappedTileCoord=Oe}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool$2)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool$2.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let withCredentials=!1;function loadFeaturesXhr(Te,e,t,Oe,ke,Be,Ue){const He=new XMLHttpRequest;He.open("GET",typeof Te=="function"?Te(t,Oe,ke):Te,!0),e.getType()=="arraybuffer"&&(He.responseType="arraybuffer"),He.withCredentials=withCredentials,He.onload=function(We){if(!He.status||He.status>=200&&He.status<300){const Cn=e.getType();try{let An;Cn=="text"||Cn=="json"?An=He.responseText:Cn=="xml"?An=He.responseXML||He.responseText:Cn=="arraybuffer"&&(An=He.response),An?Be(e.readFeatures(An,{extent:t,featureProjection:ke}),e.readProjection(An)):Ue()}catch{Ue()}}else Ue()},He.onerror=Ue,He.send()}function xhr(Te,e){return function(t,Oe,ke,Be,Ue){const He=this;loadFeaturesXhr(Te,e,t,Oe,ke,function(We,Cn){He.addFeatures(We),Be!==void 0&&Be(We)},Ue||VOID)}}class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",Oe=e.extent||extentFromProjection(t),ke=e.tileGrid||createXYZ({extent:Oe,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:ke,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,Oe){if(Oe.getState()===TileState.IDLE){Oe.setState(TileState.LOADING);const ke=Oe.wrappedTileCoord,Be=this.getTileGridForProjection(t),Ue=Be.getTileCoordExtent(ke),He=ke[0],We=Be.getResolution(He);buffer(Ue,-We,Ue);const Cn=this.tileGrid,An=Cn.getExtent();An&&getIntersection(Ue,An,Ue);const En=Cn.getZForResolution(We,this.zDirection);Cn.forEachTileCoord(Ue,En,Sn=>{const Tn=this.tileUrlFunction(Sn,e,t);this.sourceTiles_[Tn]||(this.sourceTiles_[Tn]=new this.tileClass(Sn,Tn?TileState.IDLE:TileState.EMPTY,Tn,this.format_,this.tileLoadFunction));const Ln=this.sourceTiles_[Tn];Oe.sourceTiles.push(Ln),this.tileKeysBySourceTileUrl_[Tn]||(this.tileKeysBySourceTileUrl_[Tn]=[]),this.tileKeysBySourceTileUrl_[Tn].push(Oe.getKey());const Bn=Ln.getState();if(Bn<TileState.LOADED){const ti=ni=>{this.handleTileChange(ni);const ii=Ln.getState();if(ii===TileState.LOADED||ii===TileState.ERROR){const si=Ln.getKey();si in Oe.errorTileKeys?Ln.getState()===TileState.LOADED&&delete Oe.errorTileKeys[si]:Oe.loadingSourceTiles--,ii===TileState.ERROR?Oe.errorTileKeys[si]=!0:Ln.removeEventListener(EventType.CHANGE,ti),Oe.loadingSourceTiles===0&&Oe.setState(isEmpty$1(Oe.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};Ln.addEventListener(EventType.CHANGE,ti),Oe.loadingSourceTiles++}Bn===TileState.IDLE&&(Ln.extent=Cn.getTileCoordExtent(Sn),Ln.projection=t,Ln.resolution=Cn.getResolution(Sn[0]),Ln.load())}),Oe.loadingSourceTiles||Oe.setState(Oe.sourceTiles.some(Sn=>Sn.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return Oe.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let Oe=0,ke=t.length;Oe<ke;++Oe){const Be=t[Oe].getTileUrl(),Ue=this.getKey();if(!this.tileKeysBySourceTileUrl_[Be])return;const He=this.tileKeysBySourceTileUrl_[Be][Ue];He!==-1&&(this.tileKeysBySourceTileUrl_[Be].splice(He,1),this.tileKeysBySourceTileUrl_[Be].length===0&&(delete this.tileKeysBySourceTileUrl_[Be],delete this.sourceTiles_[Be]))}}getTile(e,t,Oe,ke,Be){const Ue=[e,t,Oe];let He=this.getTileCoordForTileUrlFunction(Ue,Be);const We=this.getTileGrid().getExtent(),Cn=this.getTileGridForProjection(Be);if(He&&We){const Sn=Cn.getTileCoordExtent(He);buffer(Sn,-Cn.getResolution(e),Sn),intersects$1(We,Sn)||(He=null)}let An=!0;if(He!==null){const Sn=this.tileGrid,Tn=Cn.getResolution(e),Ln=Sn.getZForResolution(Tn,1),Bn=Cn.getTileCoordExtent(He);buffer(Bn,-Tn,Bn),Sn.forEachTileCoord(Bn,Ln,ti=>{An=An&&!this.tileUrlFunction(ti,ke,Be)})}const En=new VectorRenderTile(Ue,An?TileState.EMPTY:TileState.IDLE,He,this.getSourceTiles.bind(this,ke,Be),this.removeSourceTiles.bind(this));return En.key=this.getKey(),En}getTileGridForProjection(e){const t=e.getCode();let Oe=this.tileGrids_[t];if(!Oe){const ke=this.tileGrid,Be=ke.getResolutions().slice(),Ue=Be.map(function(Cn,An){return ke.getOrigin(An)}),He=Be.map(function(Cn,An){return ke.getTileSize(An)}),We=DEFAULT_MAX_ZOOM+1;for(let Cn=Be.length;Cn<We;++Cn)Be.push(Be[Cn-1]/2),Ue.push(Ue[Cn-1]),He.push(He[Cn-1]);Oe=new TileGrid({extent:ke.getExtent(),origins:Ue,resolutions:Be,tileSizes:He}),this.tileGrids_[t]=Oe}return Oe}getTilePixelRatio(e){return e}getTilePixelSize(e,t,Oe){const ke=this.getTileGridForProjection(Oe),Be=toSize(ke.getTileSize(e),this.tmpSize);return[Math.round(Be[0]*t),Math.round(Be[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(Te,e){Te.setLoader(function(t,Oe,ke){loadFeaturesXhr(e,Te.getFormat(),t,Oe,ke,Te.onLoad.bind(Te),Te.onError.bind(Te))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.element=t,this.index=Oe}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let Oe=0,ke=this.array_.length;Oe<ke;++Oe)this.assertUnique_(this.array_[Oe],Oe);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,Oe=e.length;t<Oe;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)e(t[Oe],Oe,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)if(t[Oe]===e)return this.removeAt(Oe)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const Oe=this.getLength();if(e>=Oe){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const ke=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,ke,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,t){for(let Oe=0,ke=this.array_.length;Oe<ke;++Oe)if(this.array_[Oe]===e&&Oe!==t)throw new Error("Duplicate item added to a unique collection")}}function quickselect(Te,e,t=0,Oe=Te.length-1,ke=defaultCompare){for(;Oe>t;){if(Oe-t>600){const We=Oe-t+1,Cn=e-t+1,An=Math.log(We),En=.5*Math.exp(2*An/3),Sn=.5*Math.sqrt(An*En*(We-En)/We)*(Cn-We/2<0?-1:1),Tn=Math.max(t,Math.floor(e-Cn*En/We+Sn)),Ln=Math.min(Oe,Math.floor(e+(We-Cn)*En/We+Sn));quickselect(Te,e,Tn,Ln,ke)}const Be=Te[e];let Ue=t,He=Oe;for(swap(Te,t,e),ke(Te[Oe],Be)>0&&swap(Te,t,Oe);Ue<He;){for(swap(Te,Ue,He),Ue++,He--;ke(Te[Ue],Be)<0;)Ue++;for(;ke(Te[He],Be)>0;)He--}ke(Te[t],Be)===0?swap(Te,t,He):(He++,swap(Te,He,Oe)),He<=e&&(t=He+1),e<=He&&(Oe=He-1)}}function swap(Te,e,t){const Oe=Te[e];Te[e]=Te[t],Te[t]=Oe}function defaultCompare(Te,e){return Te<e?-1:Te>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const Oe=[];if(!intersects(e,t))return Oe;const ke=this.toBBox,Be=[];for(;t;){for(let Ue=0;Ue<t.children.length;Ue++){const He=t.children[Ue],We=t.leaf?ke(He):He;intersects(e,We)&&(t.leaf?Oe.push(He):contains(e,We)?this._all(He,Oe):Be.push(He))}t=Be.pop()}return Oe}collides(e){let t=this.data;if(!intersects(e,t))return!1;const Oe=[];for(;t;){for(let ke=0;ke<t.children.length;ke++){const Be=t.children[ke],Ue=t.leaf?this.toBBox(Be):Be;if(intersects(e,Ue)){if(t.leaf||contains(e,Ue))return!0;Oe.push(Be)}}t=Oe.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let Oe=0;Oe<e.length;Oe++)this.insert(e[Oe]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const Oe=this.data;this.data=t,t=Oe}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let Oe=this.data;const ke=this.toBBox(e),Be=[],Ue=[];let He,We,Cn;for(;Oe||Be.length;){if(Oe||(Oe=Be.pop(),We=Be[Be.length-1],He=Ue.pop(),Cn=!0),Oe.leaf){const An=findItem(e,Oe.children,t);if(An!==-1)return Oe.children.splice(An,1),Be.push(Oe),this._condense(Be),this}!Cn&&!Oe.leaf&&contains(Oe,ke)?(Be.push(Oe),Ue.push(He),He=0,We=Oe,Oe=Oe.children[0]):We?(He++,Oe=We.children[He],Cn=!1):Oe=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const Oe=[];for(;e;)e.leaf?t.push(...e.children):Oe.push(...e.children),e=Oe.pop();return t}_build(e,t,Oe,ke){const Be=Oe-t+1;let Ue=this._maxEntries,He;if(Be<=Ue)return He=createNode(e.slice(t,Oe+1)),calcBBox(He,this.toBBox),He;ke||(ke=Math.ceil(Math.log(Be)/Math.log(Ue)),Ue=Math.ceil(Be/Math.pow(Ue,ke-1))),He=createNode([]),He.leaf=!1,He.height=ke;const We=Math.ceil(Be/Ue),Cn=We*Math.ceil(Math.sqrt(Ue));multiSelect(e,t,Oe,Cn,this.compareMinX);for(let An=t;An<=Oe;An+=Cn){const En=Math.min(An+Cn-1,Oe);multiSelect(e,An,En,We,this.compareMinY);for(let Sn=An;Sn<=En;Sn+=We){const Tn=Math.min(Sn+We-1,En);He.children.push(this._build(e,Sn,Tn,ke-1))}}return calcBBox(He,this.toBBox),He}_chooseSubtree(e,t,Oe,ke){for(;ke.push(t),!(t.leaf||ke.length-1===Oe);){let Be=1/0,Ue=1/0,He;for(let We=0;We<t.children.length;We++){const Cn=t.children[We],An=bboxArea(Cn),En=enlargedArea(e,Cn)-An;En<Ue?(Ue=En,Be=An<Be?An:Be,He=Cn):En===Ue&&An<Be&&(Be=An,He=Cn)}t=He||t.children[0]}return t}_insert(e,t,Oe){const ke=Oe?e:this.toBBox(e),Be=[],Ue=this._chooseSubtree(ke,this.data,t,Be);for(Ue.children.push(e),extend$2(Ue,ke);t>=0&&Be[t].children.length>this._maxEntries;)this._split(Be,t),t--;this._adjustParentBBoxes(ke,Be,t)}_split(e,t){const Oe=e[t],ke=Oe.children.length,Be=this._minEntries;this._chooseSplitAxis(Oe,Be,ke);const Ue=this._chooseSplitIndex(Oe,Be,ke),He=createNode(Oe.children.splice(Ue,Oe.children.length-Ue));He.height=Oe.height,He.leaf=Oe.leaf,calcBBox(Oe,this.toBBox),calcBBox(He,this.toBBox),t?e[t-1].children.push(He):this._splitRoot(Oe,He)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,Oe){let ke,Be=1/0,Ue=1/0;for(let He=t;He<=Oe-t;He++){const We=distBBox(e,0,He,this.toBBox),Cn=distBBox(e,He,Oe,this.toBBox),An=intersectionArea(We,Cn),En=bboxArea(We)+bboxArea(Cn);An<Be?(Be=An,ke=He,Ue=En<Ue?En:Ue):An===Be&&En<Ue&&(Ue=En,ke=He)}return ke||Oe-t}_chooseSplitAxis(e,t,Oe){const ke=e.leaf?this.compareMinX:compareNodeMinX,Be=e.leaf?this.compareMinY:compareNodeMinY,Ue=this._allDistMargin(e,t,Oe,ke),He=this._allDistMargin(e,t,Oe,Be);Ue<He&&e.children.sort(ke)}_allDistMargin(e,t,Oe,ke){e.children.sort(ke);const Be=this.toBBox,Ue=distBBox(e,0,t,Be),He=distBBox(e,Oe-t,Oe,Be);let We=bboxMargin(Ue)+bboxMargin(He);for(let Cn=t;Cn<Oe-t;Cn++){const An=e.children[Cn];extend$2(Ue,e.leaf?Be(An):An),We+=bboxMargin(Ue)}for(let Cn=Oe-t-1;Cn>=t;Cn--){const An=e.children[Cn];extend$2(He,e.leaf?Be(An):An),We+=bboxMargin(He)}return We}_adjustParentBBoxes(e,t,Oe){for(let ke=Oe;ke>=0;ke--)extend$2(t[ke],e)}_condense(e){for(let t=e.length-1,Oe;t>=0;t--)e[t].children.length===0?t>0?(Oe=e[t-1].children,Oe.splice(Oe.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(Te,e,t){if(!t)return e.indexOf(Te);for(let Oe=0;Oe<e.length;Oe++)if(t(Te,e[Oe]))return Oe;return-1}function calcBBox(Te,e){distBBox(Te,0,Te.children.length,e,Te)}function distBBox(Te,e,t,Oe,ke){ke||(ke=createNode(null)),ke.minX=1/0,ke.minY=1/0,ke.maxX=-1/0,ke.maxY=-1/0;for(let Be=e;Be<t;Be++){const Ue=Te.children[Be];extend$2(ke,Te.leaf?Oe(Ue):Ue)}return ke}function extend$2(Te,e){return Te.minX=Math.min(Te.minX,e.minX),Te.minY=Math.min(Te.minY,e.minY),Te.maxX=Math.max(Te.maxX,e.maxX),Te.maxY=Math.max(Te.maxY,e.maxY),Te}function compareNodeMinX(Te,e){return Te.minX-e.minX}function compareNodeMinY(Te,e){return Te.minY-e.minY}function bboxArea(Te){return(Te.maxX-Te.minX)*(Te.maxY-Te.minY)}function bboxMargin(Te){return Te.maxX-Te.minX+(Te.maxY-Te.minY)}function enlargedArea(Te,e){return(Math.max(e.maxX,Te.maxX)-Math.min(e.minX,Te.minX))*(Math.max(e.maxY,Te.maxY)-Math.min(e.minY,Te.minY))}function intersectionArea(Te,e){const t=Math.max(Te.minX,e.minX),Oe=Math.max(Te.minY,e.minY),ke=Math.min(Te.maxX,e.maxX),Be=Math.min(Te.maxY,e.maxY);return Math.max(0,ke-t)*Math.max(0,Be-Oe)}function contains(Te,e){return Te.minX<=e.minX&&Te.minY<=e.minY&&e.maxX<=Te.maxX&&e.maxY<=Te.maxY}function intersects(Te,e){return e.minX<=Te.maxX&&e.minY<=Te.maxY&&e.maxX>=Te.minX&&e.maxY>=Te.minY}function createNode(Te){return{children:Te,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(Te,e,t,Oe,ke){const Be=[e,t];for(;Be.length;){if(t=Be.pop(),e=Be.pop(),t-e<=Oe)continue;const Ue=e+Math.ceil((t-e)/Oe/2)*Oe;quickselect(Te,Ue,e,t,ke),Be.push(e,Ue,Ue,t)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const Oe={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(Oe),this.items_[getUid(t)]=Oe}load(e,t){const Oe=new Array(t.length);for(let ke=0,Be=t.length;ke<Be;ke++){const Ue=e[ke],He=t[ke],We={minX:Ue[0],minY:Ue[1],maxX:Ue[2],maxY:Ue[3],value:He};Oe[ke]=We,this.items_[getUid(He)]=We}this.rbush_.load(Oe)}remove(e){const t=getUid(e),Oe=this.items_[t];return delete this.items_[t],this.rbush_.remove(Oe)!==null}update(e,t){const Oe=this.items_[getUid(t)],ke=[Oe.minX,Oe.minY,Oe.maxX,Oe.maxY];equals$1(ke,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(ke){return ke.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let Oe;for(let ke=0,Be=e.length;ke<Be;ke++)if(Oe=t(e[ke]),Oe)return Oe;return Oe}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const Oe=this.getStyle();return Oe&&e.setStyle(Oe),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(Te){if(typeof Te=="function")return Te;let e;return Array.isArray(Te)?e=Te:(assert(typeof Te.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[Te]),function(){return e}}const tmp_=new Array(6);function create$1(){return[1,0,0,1,0,0]}function reset(Te){return set(Te,1,0,0,1,0,0)}function multiply(Te,e){const t=Te[0],Oe=Te[1],ke=Te[2],Be=Te[3],Ue=Te[4],He=Te[5],We=e[0],Cn=e[1],An=e[2],En=e[3],Sn=e[4],Tn=e[5];return Te[0]=t*We+ke*Cn,Te[1]=Oe*We+Be*Cn,Te[2]=t*An+ke*En,Te[3]=Oe*An+Be*En,Te[4]=t*Sn+ke*Tn+Ue,Te[5]=Oe*Sn+Be*Tn+He,Te}function set(Te,e,t,Oe,ke,Be,Ue){return Te[0]=e,Te[1]=t,Te[2]=Oe,Te[3]=ke,Te[4]=Be,Te[5]=Ue,Te}function setFromArray(Te,e){return Te[0]=e[0],Te[1]=e[1],Te[2]=e[2],Te[3]=e[3],Te[4]=e[4],Te[5]=e[5],Te}function apply(Te,e){const t=e[0],Oe=e[1];return e[0]=Te[0]*t+Te[2]*Oe+Te[4],e[1]=Te[1]*t+Te[3]*Oe+Te[5],e}function scale$2(Te,e,t){return multiply(Te,set(tmp_,e,0,0,t,0,0))}function translate$2(Te,e,t){return multiply(Te,set(tmp_,1,0,0,1,e,t))}function compose(Te,e,t,Oe,ke,Be,Ue,He){const We=Math.sin(Be),Cn=Math.cos(Be);return Te[0]=Oe*Cn,Te[1]=ke*We,Te[2]=-Oe*We,Te[3]=ke*Cn,Te[4]=Ue*Oe*Cn-He*Oe*We+e,Te[5]=Ue*ke*We+He*ke*Cn+t,Te}function makeInverse(Te,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const Oe=e[0],ke=e[1],Be=e[2],Ue=e[3],He=e[4],We=e[5];return Te[0]=Ue/t,Te[1]=-ke/t,Te[2]=-Be/t,Te[3]=Oe/t,Te[4]=(Be*We-Ue*He)/t,Te[5]=-(Oe*We-ke*He)/t,Te}function determinant(Te){return Te[0]*Te[3]-Te[1]*Te[2]}const matrixPrecision=[1e6,1e6,1e6,1e6,2,2];function toString$3(Te){return"matrix("+Te.map((t,Oe)=>Math.round(t*matrixPrecision[Oe])/matrixPrecision[Oe]).join(", ")+")"}function transform2D(Te,e,t,Oe,ke,Be,Ue){Be=Be||[],Ue=Ue||2;let He=0;for(let We=e;We<t;We+=Oe){const Cn=Te[We],An=Te[We+1];Be[He++]=ke[0]*Cn+ke[2]*An+ke[4],Be[He++]=ke[1]*Cn+ke[3]*An+ke[5];for(let En=2;En<Ue;En++)Be[He++]=Te[We+En]}return Be&&Be.length!=He&&(Be.length=He),Be}function rotate(Te,e,t,Oe,ke,Be,Ue){Ue=Ue||[];const He=Math.cos(ke),We=Math.sin(ke),Cn=Be[0],An=Be[1];let En=0;for(let Sn=e;Sn<t;Sn+=Oe){const Tn=Te[Sn]-Cn,Ln=Te[Sn+1]-An;Ue[En++]=Cn+Tn*He-Ln*We,Ue[En++]=An+Tn*We+Ln*He;for(let Bn=Sn+2;Bn<Sn+Oe;++Bn)Ue[En++]=Te[Bn]}return Ue&&Ue.length!=En&&(Ue.length=En),Ue}function scale$1(Te,e,t,Oe,ke,Be,Ue,He){He=He||[];const We=Ue[0],Cn=Ue[1];let An=0;for(let En=e;En<t;En+=Oe){const Sn=Te[En]-We,Tn=Te[En+1]-Cn;He[An++]=We+ke*Sn,He[An++]=Cn+Be*Tn;for(let Ln=En+2;Ln<En+Oe;++Ln)He[An++]=Te[Ln]}return He&&He.length!=An&&(He.length=An),He}function translate$1(Te,e,t,Oe,ke,Be,Ue){Ue=Ue||[];let He=0;for(let We=e;We<t;We+=Oe){Ue[He++]=Te[We]+ke,Ue[He++]=Te[We+1]+Be;for(let Cn=We+2;Cn<We+Oe;++Cn)Ue[He++]=Te[Cn]}return Ue&&Ue.length!=He&&(Ue.length=He),Ue}const tmpTransform$1=create$1();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,Oe)=>{if(!Oe)return this.getSimplifiedGeometry(t);const ke=this.clone();return ke.applyTransform(Oe),ke.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,Oe,ke){return abstract()}containsXY(e,t){const Oe=this.getClosestPoint([e,t]);return Oe[0]===e&&Oe[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,Oe){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const Oe=get$3(e),ke=Oe.getUnits()=="tile-pixels"?function(Be,Ue,He){const We=Oe.getExtent(),Cn=Oe.getWorldExtent(),An=getHeight(Cn)/getHeight(We);compose(tmpTransform$1,Cn[0],Cn[3],An,-An,0,0,0);const En=transform2D(Be,0,Be.length,He,tmpTransform$1,Ue),Sn=getTransform(Oe,t);return Sn?Sn(En,En,He):En}:getTransform(Oe,t);return this.applyTransform(ke),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,Oe){let ke;if(e)ke=getStrideForLayout(e);else{for(let Be=0;Be<Oe;++Be){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}ke=t.length,e=getLayoutForStride(ke)}this.layout=e,this.stride=ke}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const Oe=this.getFlatCoordinates();if(Oe){const ke=this.getStride();rotate(Oe,0,Oe.length,ke,e,t,Oe),this.changed()}}scale(e,t,Oe){t===void 0&&(t=e),Oe||(Oe=getCenter(this.getExtent()));const ke=this.getFlatCoordinates();if(ke){const Be=this.getStride();scale$1(ke,0,ke.length,Be,e,t,Oe,ke),this.changed()}}translate(e,t){const Oe=this.getFlatCoordinates();if(Oe){const ke=this.getStride();translate$1(Oe,0,Oe.length,ke,e,t,Oe),this.changed()}}}function getLayoutForStride(Te){let e;return Te==2?e="XY":Te==3?e="XYZ":Te==4&&(e="XYZM"),e}function getStrideForLayout(Te){let e;return Te=="XY"?e=2:Te=="XYZ"||Te=="XYM"?e=3:Te=="XYZM"&&(e=4),e}function transformGeom2D(Te,e,t){const Oe=Te.getFlatCoordinates();if(!Oe)return null;const ke=Te.getStride();return transform2D(Oe,0,Oe.length,ke,e,t)}function deflateCoordinate(Te,e,t,Oe){for(let ke=0,Be=t.length;ke<Be;++ke)Te[e++]=t[ke];return e}function deflateCoordinates(Te,e,t,Oe){for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=t[ke];for(let He=0;He<Oe;++He)Te[e++]=Ue[He]}return e}function deflateCoordinatesArray(Te,e,t,Oe,ke){ke=ke||[];let Be=0;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=deflateCoordinates(Te,e,t[Ue],Oe);ke[Be++]=We,e=We}return ke.length=Be,ke}function deflateMultiCoordinatesArray(Te,e,t,Oe,ke){ke=ke||[];let Be=0;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=deflateCoordinatesArray(Te,e,t[Ue],Oe,ke[Be]);We.length===0&&(We[0]=e),ke[Be++]=We,e=We[We.length-1]}return ke.length=Be,ke}class Circle extends SimpleGeometry{constructor(e,t,Oe){super(),Oe!==void 0&&t===void 0?this.setFlatCoordinates(Oe,e):(t=t||0,this.setCenterAndRadius(e,t,Oe))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){const Be=this.flatCoordinates,Ue=e-Be[0],He=t-Be[1],We=Ue*Ue+He*He;if(We<ke){if(We===0)for(let Cn=0;Cn<this.stride;++Cn)Oe[Cn]=Be[Cn];else{const Cn=this.getRadius()/Math.sqrt(We);Oe[0]=Be[0]+Cn*Ue,Oe[1]=Be[1]+Cn*He;for(let An=2;An<this.stride;++An)Oe[An]=Be[An]}return Oe.length=this.stride,We}return ke}containsXY(e,t){const Oe=this.flatCoordinates,ke=e-Oe[0],Be=t-Oe[1];return ke*ke+Be*Be<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,Oe=t[this.stride]-t[0];return createOrUpdate$2(t[0]-Oe,t[1]-Oe,t[0]+Oe,t[1]+Oe,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const Oe=this.getCenter();return e[0]<=Oe[0]&&e[2]>=Oe[0]||e[1]<=Oe[1]&&e[3]>=Oe[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,Oe=this.flatCoordinates[t]-this.flatCoordinates[0],ke=e.slice();ke[t]=ke[0]+Oe;for(let Be=1;Be<t;++Be)ke[t+Be]=e[Be];this.setFlatCoordinates(this.layout,ke),this.changed()}setCenterAndRadius(e,t,Oe){this.setLayout(Oe,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const ke=this.flatCoordinates;let Be=deflateCoordinate(ke,0,e,this.stride);ke[Be++]=ke[0]+t;for(let Ue=1,He=this.stride;Ue<He;++Ue)ke[Be++]=ke[Ue];ke.length=Be,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const Oe=this.getCenter(),ke=this.getStride();this.setCenter(rotate(Oe,0,Oe.length,ke,e,t,Oe)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,Oe=e.length;t<Oe;++t)this.changeEventsKeys_.push(listen(e[t],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){if(ke<closestSquaredDistanceXY(this.getExtent(),e,t))return ke;const Be=this.geometries_;for(let Ue=0,He=Be.length;Ue<He;++Ue)ke=Be[Ue].closestPointXY(e,t,Oe,ke);return ke}containsXY(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)if(Oe[ke].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)extend$3(e,t[Oe].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe].getType()===this.getType()?e=e.concat(t[Oe].getGeometriesArrayRecursive()):e.push(t[Oe]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],Oe=this.geometries_;let ke=!1;for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be],We=He.getSimplifiedGeometry(e);t.push(We),We!==He&&(ke=!0)}return ke?new GeometryCollection(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)if(t[Oe].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke].rotate(e,t);this.changed()}scale(e,t,Oe){Oe||(Oe=getCenter(this.getExtent()));const ke=this.geometries_;for(let Be=0,Ue=ke.length;Be<Ue;++Be)ke[Be].scale(e,t,Oe);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe].applyTransform(e);this.changed()}translate(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(Te){return Te.map(e=>e.clone())}function assignClosest(Te,e,t,Oe,ke,Be,Ue){const He=Te[e],We=Te[e+1],Cn=Te[t]-He,An=Te[t+1]-We;let En;if(Cn===0&&An===0)En=e;else{const Sn=((ke-He)*Cn+(Be-We)*An)/(Cn*Cn+An*An);if(Sn>1)En=t;else if(Sn>0){for(let Tn=0;Tn<Oe;++Tn)Ue[Tn]=lerp(Te[e+Tn],Te[t+Tn],Sn);Ue.length=Oe;return}else En=e}for(let Sn=0;Sn<Oe;++Sn)Ue[Sn]=Te[En+Sn];Ue.length=Oe}function maxSquaredDelta(Te,e,t,Oe,ke){let Be=Te[e],Ue=Te[e+1];for(e+=Oe;e<t;e+=Oe){const He=Te[e],We=Te[e+1],Cn=squaredDistance$1(Be,Ue,He,We);Cn>ke&&(ke=Cn),Be=He,Ue=We}return ke}function arrayMaxSquaredDelta(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];ke=maxSquaredDelta(Te,e,He,Oe,ke),e=He}return ke}function multiArrayMaxSquaredDelta(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];ke=arrayMaxSquaredDelta(Te,e,He,Oe,ke),e=He[He.length-1]}return ke}function assignClosestPoint(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An){if(e==t)return Cn;let En,Sn;if(ke===0){if(Sn=squaredDistance$1(Ue,He,Te[e],Te[e+1]),Sn<Cn){for(En=0;En<Oe;++En)We[En]=Te[e+En];return We.length=Oe,Sn}return Cn}An=An||[NaN,NaN];let Tn=e+Oe;for(;Tn<t;)if(assignClosest(Te,Tn-Oe,Tn,Oe,Ue,He,An),Sn=squaredDistance$1(Ue,He,An[0],An[1]),Sn<Cn){for(Cn=Sn,En=0;En<Oe;++En)We[En]=An[En];We.length=Oe,Tn+=Oe}else Tn+=Oe*Math.max((Math.sqrt(Sn)-Math.sqrt(Cn))/ke|0,1);if(Be&&(assignClosest(Te,t-Oe,e,Oe,Ue,He,An),Sn=squaredDistance$1(Ue,He,An[0],An[1]),Sn<Cn)){for(Cn=Sn,En=0;En<Oe;++En)We[En]=An[En];We.length=Oe}return Cn}function assignClosestArrayPoint(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An){An=An||[NaN,NaN];for(let En=0,Sn=t.length;En<Sn;++En){const Tn=t[En];Cn=assignClosestPoint(Te,e,Tn,Oe,ke,Be,Ue,He,We,Cn,An),e=Tn}return Cn}function assignClosestMultiArrayPoint(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An){An=An||[NaN,NaN];for(let En=0,Sn=t.length;En<Sn;++En){const Tn=t[En];Cn=assignClosestArrayPoint(Te,e,Tn,Oe,ke,Be,Ue,He,We,Cn,An),e=Tn[Tn.length-1]}return Cn}function douglasPeucker(Te,e,t,Oe,ke,Be,Ue){const He=(t-e)/Oe;if(He<3){for(;e<t;e+=Oe)Be[Ue++]=Te[e],Be[Ue++]=Te[e+1];return Ue}const We=new Array(He);We[0]=1,We[He-1]=1;const Cn=[e,t-Oe];let An=0;for(;Cn.length>0;){const En=Cn.pop(),Sn=Cn.pop();let Tn=0;const Ln=Te[Sn],Bn=Te[Sn+1],ti=Te[En],ni=Te[En+1];for(let ii=Sn+Oe;ii<En;ii+=Oe){const si=Te[ii],oi=Te[ii+1],ci=squaredSegmentDistance(si,oi,Ln,Bn,ti,ni);ci>Tn&&(An=ii,Tn=ci)}Tn>ke&&(We[(An-e)/Oe]=1,Sn+Oe<An&&Cn.push(Sn,An),An+Oe<En&&Cn.push(An,En))}for(let En=0;En<He;++En)We[En]&&(Be[Ue++]=Te[e+En*Oe],Be[Ue++]=Te[e+En*Oe+1]);return Ue}function douglasPeuckerArray(Te,e,t,Oe,ke,Be,Ue,He){for(let We=0,Cn=t.length;We<Cn;++We){const An=t[We];Ue=douglasPeucker(Te,e,An,Oe,ke,Be,Ue),He.push(Ue),e=An}return Ue}function snap(Te,e){return e*Math.round(Te/e)}function quantize(Te,e,t,Oe,ke,Be,Ue){if(e==t)return Ue;let He=snap(Te[e],ke),We=snap(Te[e+1],ke);e+=Oe,Be[Ue++]=He,Be[Ue++]=We;let Cn,An;do if(Cn=snap(Te[e],ke),An=snap(Te[e+1],ke),e+=Oe,e==t)return Be[Ue++]=Cn,Be[Ue++]=An,Ue;while(Cn==He&&An==We);for(;e<t;){const En=snap(Te[e],ke),Sn=snap(Te[e+1],ke);if(e+=Oe,En==Cn&&Sn==An)continue;const Tn=Cn-He,Ln=An-We,Bn=En-He,ti=Sn-We;if(Tn*ti==Ln*Bn&&(Tn<0&&Bn<Tn||Tn==Bn||Tn>0&&Bn>Tn)&&(Ln<0&&ti<Ln||Ln==ti||Ln>0&&ti>Ln)){Cn=En,An=Sn;continue}Be[Ue++]=Cn,Be[Ue++]=An,He=Cn,We=An,Cn=En,An=Sn}return Be[Ue++]=Cn,Be[Ue++]=An,Ue}function quantizeArray(Te,e,t,Oe,ke,Be,Ue,He){for(let We=0,Cn=t.length;We<Cn;++We){const An=t[We];Ue=quantize(Te,e,An,Oe,ke,Be,Ue),He.push(Ue),e=An}return Ue}function quantizeMultiArray(Te,e,t,Oe,ke,Be,Ue,He){for(let We=0,Cn=t.length;We<Cn;++We){const An=t[We],En=[];Ue=quantizeArray(Te,e,An,Oe,ke,Be,Ue,En),He.push(En),e=An[An.length-1]}return Ue}function inflateCoordinates(Te,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=e;Ue<t;Ue+=Oe)ke[Be++]=Te.slice(Ue,Ue+Oe);return ke.length=Be,ke}function inflateCoordinatesArray(Te,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue];ke[Be++]=inflateCoordinates(Te,e,We,Oe,ke[Be]),e=We}return ke.length=Be,ke}function inflateMultiCoordinatesArray(Te,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue];ke[Be++]=We.length===1&&We[0]===e?[]:inflateCoordinatesArray(Te,e,We,Oe,ke[Be]),e=We[We.length-1]}return ke.length=Be,ke}function linearRing(Te,e,t,Oe){let ke=0;const Be=Te[t-Oe],Ue=Te[t-Oe+1];let He=0,We=0;for(;e<t;e+=Oe){const Cn=Te[e]-Be,An=Te[e+1]-Ue;ke+=We*Cn-He*An,He=Cn,We=An}return ke/2}function linearRings(Te,e,t,Oe){let ke=0;for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];ke+=linearRing(Te,e,He,Oe),e=He}return ke}function linearRingss$1(Te,e,t,Oe){let ke=0;for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];ke+=linearRings(Te,e,He,Oe),e=He[He.length-1]}return ke}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function interpolatePoint(Te,e,t,Oe,ke,Be,Ue){let He,We;const Cn=(t-e)/Oe;if(Cn===1)He=e;else if(Cn===2)He=e,We=ke;else if(Cn!==0){let An=Te[e],En=Te[e+1],Sn=0;const Tn=[0];for(let ti=e+Oe;ti<t;ti+=Oe){const ni=Te[ti],ii=Te[ti+1];Sn+=Math.sqrt((ni-An)*(ni-An)+(ii-En)*(ii-En)),Tn.push(Sn),An=ni,En=ii}const Ln=ke*Sn,Bn=binarySearch$1(Tn,Ln);Bn<0?(We=(Ln-Tn[-Bn-2])/(Tn[-Bn-1]-Tn[-Bn-2]),He=e+(-Bn-2)*Oe):He=e+Bn*Oe}Ue=Ue>1?Ue:2,Be=Be||new Array(Ue);for(let An=0;An<Ue;++An)Be[An]=He===void 0?NaN:We===void 0?Te[He+An]:lerp(Te[He+An],Te[He+Oe+An],We);return Be}function lineStringCoordinateAtM(Te,e,t,Oe,ke,Be){if(t==e)return null;let Ue;if(ke<Te[e+Oe-1])return Be?(Ue=Te.slice(e,e+Oe),Ue[Oe-1]=ke,Ue):null;if(Te[t-1]<ke)return Be?(Ue=Te.slice(t-Oe,t),Ue[Oe-1]=ke,Ue):null;if(ke==Te[e+Oe-1])return Te.slice(e,e+Oe);let He=e/Oe,We=t/Oe;for(;He<We;){const Sn=He+We>>1;ke<Te[(Sn+1)*Oe-1]?We=Sn:He=Sn+1}const Cn=Te[He*Oe-1];if(ke==Cn)return Te.slice((He-1)*Oe,(He-1)*Oe+Oe);const An=Te[(He+1)*Oe-1],En=(ke-Cn)/(An-Cn);Ue=[];for(let Sn=0;Sn<Oe-1;++Sn)Ue.push(lerp(Te[(He-1)*Oe+Sn],Te[He*Oe+Sn],En));return Ue.push(ke),Ue}function lineStringsCoordinateAtM(Te,e,t,Oe,ke,Be,Ue){if(Ue)return lineStringCoordinateAtM(Te,e,t[t.length-1],Oe,ke,Be);let He;if(ke<Te[Oe-1])return Be?(He=Te.slice(0,Oe),He[Oe-1]=ke,He):null;if(Te[Te.length-1]<ke)return Be?(He=Te.slice(Te.length-Oe),He[Oe-1]=ke,He):null;for(let We=0,Cn=t.length;We<Cn;++We){const An=t[We];if(e!=An){if(ke<Te[e+Oe-1])return null;if(ke<=Te[An-1])return lineStringCoordinateAtM(Te,e,An,Oe,ke,!1);e=An}}return null}function lineStringLength(Te,e,t,Oe){let ke=Te[e],Be=Te[e+1],Ue=0;for(let He=e+Oe;He<t;He+=Oe){const We=Te[He],Cn=Te[He+1];Ue+=Math.sqrt((We-ke)*(We-ke)+(Cn-Be)*(Cn-Be)),ke=We,Be=Cn}return Ue}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,Oe,ke))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,Oe){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&Oe)this.setFlatCoordinates(t,e),this.ends_=Oe;else{const ke=e,Be=[],Ue=[];for(let We=0,Cn=ke.length;We<Cn;++We){const An=ke[We];extend$4(Be,An.getFlatCoordinates()),Ue.push(Be.length)}const He=ke.length===0?this.getLayout():ke[0].getLayout();this.setFlatCoordinates(He,Be),this.ends_=Ue}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,Oe,ke))}getCoordinateAtM(e,t,Oe){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,Oe=Oe!==void 0?Oe:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,Oe))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,Oe=this.layout,ke=[];let Be=0;for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue],Cn=new LineString(e.slice(Be,We),Oe);ke.push(Cn),Be=We}return ke}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let Oe=0;const ke=this.ends_,Be=this.stride;for(let Ue=0,He=ke.length;Ue<He;++Ue){const We=ke[Ue],Cn=interpolatePoint(t,Oe,We,Be,.5);extend$4(e,Cn),Oe=We}return e}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,Oe),new MultiLineString(t,"XY",Oe)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}let Point$1=class Gf extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Gf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){const Be=this.flatCoordinates,Ue=squaredDistance$1(e,t,Be[0],Be[1]);if(Ue<ke){const He=this.stride;for(let We=0;We<He;++We)Oe[We]=Be[We];return Oe.length=He,Ue}return ke}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){if(ke<closestSquaredDistanceXY(this.getExtent(),e,t))return ke;const Be=this.flatCoordinates,Ue=this.stride;for(let He=0,We=Be.length;He<We;He+=Ue){const Cn=squaredDistance$1(e,t,Be[He],Be[He+1]);if(Cn<ke){ke=Cn;for(let An=0;An<Ue;++An)Oe[An]=Be[He+An];Oe.length=Ue}}return ke}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,Oe=this.stride,ke=[];for(let Be=0,Ue=e.length;Be<Ue;Be+=Oe){const He=new Point$1(e.slice(Be,Be+Oe),t);ke.push(He)}return ke}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,Oe=this.stride;for(let ke=0,Be=t.length;ke<Be;ke+=Oe){const Ue=t[ke],He=t[ke+1];if(containsXY(e,Ue,He))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function getInteriorPointOfArray(Te,e,t,Oe,ke,Be,Ue){let He,We,Cn,An,En,Sn,Tn;const Ln=ke[Be+1],Bn=[];for(let ii=0,si=t.length;ii<si;++ii){const oi=t[ii];for(An=Te[oi-Oe],Sn=Te[oi-Oe+1],He=e;He<oi;He+=Oe)En=Te[He],Tn=Te[He+1],(Ln<=Sn&&Tn<=Ln||Sn<=Ln&&Ln<=Tn)&&(Cn=(Ln-Sn)/(Tn-Sn)*(En-An)+An,Bn.push(Cn)),An=En,Sn=Tn}let ti=NaN,ni=-1/0;for(Bn.sort(ascending),An=Bn[0],He=1,We=Bn.length;He<We;++He){En=Bn[He];const ii=Math.abs(En-An);ii>ni&&(Cn=(An+En)/2,linearRingsContainsXY(Te,e,t,Oe,Cn,Ln)&&(ti=Cn,ni=ii)),An=En}return isNaN(ti)&&(ti=ke[Be]),Ue?(Ue.push(ti,Ln,ni),Ue):[ti,Ln,ni]}function getInteriorPointsOfMultiArray(Te,e,t,Oe,ke){let Be=[];for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue];Be=getInteriorPointOfArray(Te,e,We,Oe,ke,2*Ue,Be),e=We[We.length-1]}return Be}function coordinates(Te,e,t,Oe){for(;e<t-Oe;){for(let ke=0;ke<Oe;++ke){const Be=Te[e+ke];Te[e+ke]=Te[t-Oe+ke],Te[t-Oe+ke]=Be}e+=Oe,t-=Oe}}function linearRingIsClockwise(Te,e,t,Oe){let ke=0,Be=Te[t-Oe],Ue=Te[t-Oe+1];for(;e<t;e+=Oe){const He=Te[e],We=Te[e+1];ke+=(He-Be)*(We+Ue),Be=He,Ue=We}return ke===0?void 0:ke>0}function linearRingsAreOriented(Te,e,t,Oe,ke){ke=ke!==void 0?ke:!1;for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be],We=linearRingIsClockwise(Te,e,He,Oe);if(Be===0){if(ke&&We||!ke&&!We)return!1}else if(ke&&!We||!ke&&We)return!1;e=He}return!0}function linearRingssAreOriented(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be];if(!linearRingsAreOriented(Te,e,He,Oe,ke))return!1;He.length&&(e=He[He.length-1])}return!0}function orientLinearRings(Te,e,t,Oe,ke){ke=ke!==void 0?ke:!1;for(let Be=0,Ue=t.length;Be<Ue;++Be){const He=t[Be],We=linearRingIsClockwise(Te,e,He,Oe);(Be===0?ke&&We||!ke&&!We:ke&&!We||!ke&&We)&&coordinates(Te,e,He,Oe),e=He}return e}function orientLinearRingsArray(Te,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be)e=orientLinearRings(Te,e,t[Be],Oe,ke);return e}function inflateEnds(Te,e){const t=[];let Oe=0,ke=0,Be;for(let Ue=0,He=e.length;Ue<He;++Ue){const We=e[Ue],Cn=linearRingIsClockwise(Te,Oe,We,2);if(Be===void 0&&(Be=Cn),Cn===Be)t.push(e.slice(ke,Ue+1));else{if(t.length===0)continue;t[t.length-1].push(e[ke])}ke=Ue+1,Oe=We}return t}class Polygon extends SimpleGeometry{constructor(e,t,Oe){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&Oe?(this.setFlatCoordinates(t,e),this.ends_=Oe):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,Oe=this.ends_,ke=[];let Be=0;for(let Ue=0,He=Oe.length;Ue<He;++Ue){const We=Oe[Ue],Cn=new LinearRing(t.slice(Be,We),e);ke.push(Cn),Be=We}return ke}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,Oe),new Polygon(t,"XY",Oe)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}function fromExtent(Te){if(isEmpty(Te))throw new Error("Cannot create polygon from empty extent");const e=Te[0],t=Te[1],Oe=Te[2],ke=Te[3],Be=[e,t,e,ke,Oe,ke,Oe,t,e,t];return new Polygon(Be,"XY",[Be.length])}function linearRingss(Te,e,t,Oe){const ke=[];let Be=createEmpty();for(let Ue=0,He=t.length;Ue<He;++Ue){const We=t[Ue];Be=createOrUpdateFromFlatCoordinates(Te,e,We[0],Oe),ke.push((Be[0]+Be[2])/2,(Be[1]+Be[3])/2),e=We[We.length-1]}return ke}class MultiPolygon extends SimpleGeometry{constructor(e,t,Oe){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!Oe&&!Array.isArray(e[0])){const ke=e,Be=[],Ue=[];for(let He=0,We=ke.length;He<We;++He){const Cn=ke[He],An=Be.length,En=Cn.getEnds();for(let Sn=0,Tn=En.length;Sn<Tn;++Sn)En[Sn]+=An;extend$4(Be,Cn.getFlatCoordinates()),Ue.push(En)}t=ke.length===0?this.getLayout():ke[0].getLayout(),e=Be,Oe=Ue}t!==void 0&&Oe?(this.setFlatCoordinates(t,e),this.endss_=Oe):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const Oe=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let ke=0,Be=t.length;ke<Be;++ke)t[ke]+=Oe}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let ke=0;ke<e;++ke)t[ke]=this.endss_[ke].slice();const Oe=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return Oe.applyProperties(this),Oe}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,Oe),new MultiPolygon(t,"XY",Oe)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const Be=this.endss_[e-1];t=Be[Be.length-1]}const Oe=this.endss_[e].slice(),ke=Oe[Oe.length-1];if(t!==0)for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be]-=t;return new Polygon(this.flatCoordinates.slice(t,ke),this.layout,Oe)}getPolygons(){const e=this.layout,t=this.flatCoordinates,Oe=this.endss_,ke=[];let Be=0;for(let Ue=0,He=Oe.length;Ue<He;++Ue){const We=Oe[Ue].slice(),Cn=We[We.length-1];if(Be!==0)for(let En=0,Sn=We.length;En<Sn;++En)We[En]-=Be;const An=new Polygon(t.slice(Be,Cn),e,We);ke.push(An),Be=Cn}return ke}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(Oe.length===0)this.flatCoordinates.length=0;else{const ke=Oe[Oe.length-1];this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1]}this.changed()}}const tmpTransform=create$1();class RenderFeature{constructor(e,t,Oe,ke,Be,Ue){this.styleFunction,this.extent_,this.id_=Ue,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=Oe||null,this.properties_=Be,this.squaredTolerance_,this.stride_=ke,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const Oe=this.ends_;for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],He=interpolatePoint(e,t,Ue,2,.5);extend$4(this.flatMidpoints_,He),t=Ue}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),Oe=e.getWorldExtent();if(t&&Oe){const ke=getHeight(Oe)/getHeight(t);compose(tmpTransform,Oe[0],Oe[3],ke,-ke,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const Oe=this.simplifiedGeometry_.getFlatCoordinates();let ke;switch(this.type_){case"LineString":Oe.length=douglasPeucker(Oe,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,Oe,0),ke=[Oe.length];break;case"MultiLineString":ke=[],Oe.length=douglasPeuckerArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,Oe,0,ke);break;case"Polygon":ke=[],Oe.length=quantizeArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),Oe,0,ke);break}return ke&&(this.simplifiedGeometry_=new RenderFeature(this.type_,Oe,ke,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(Te,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(Te,e){return[Te]}function tile(Te){return function(e,t,Oe){const ke=Te.getZForResolution(fromUserResolution(t)),Be=Te.getTileRangeForExtentAndZ(fromUserExtent(e),ke),Ue=[],He=[ke,0,0];for(He[1]=Be.minX;He[1]<=Be.maxX;++He[1])for(He[2]=Be.minY;He[2]<=Be.maxY;++He[2])Ue.push(toUserExtent(Te.getTileCoordExtent(He)));return Ue}}class VectorSourceEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.feature=t,this.features=Oe}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let Oe,ke;Array.isArray(e.features)?ke=e.features:e.features&&(Oe=e.features,ke=Oe.getArray()),!t&&Oe===void 0&&(Oe=new Collection(ke)),ke!==void 0&&this.addFeaturesInternal(ke),Oe!==void 0&&this.bindFeaturesCollection_(Oe)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const Oe=e.getGeometry();if(Oe){const ke=Oe.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(ke,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let Oe=!0;if(t.getId()!==void 0){const ke=String(t.getId());if(!(ke in this.idIndex_))this.idIndex_[ke]=t;else if(t instanceof RenderFeature){const Be=this.idIndex_[ke];Be instanceof RenderFeature?Array.isArray(Be)?Be.push(t):this.idIndex_[ke]=[Be,t]:Oe=!1}else Oe=!1}return Oe&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),Oe}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],Oe=[],ke=[];for(let Be=0,Ue=e.length;Be<Ue;Be++){const He=e[Be],We=getUid(He);this.addToIndex_(We,He)&&Oe.push(He)}for(let Be=0,Ue=Oe.length;Be<Ue;Be++){const He=Oe[Be],We=getUid(He);this.setupChangeEvents_(We,He);const Cn=He.getGeometry();if(Cn){const An=Cn.getExtent();t.push(An),ke.push(He)}else this.nullGeometryFeatures_[We]=He}if(this.featuresRtree_&&this.featuresRtree_.load(t,ke),this.hasListener(VectorEventType.ADDFEATURE))for(let Be=0,Ue=Oe.length;Be<Ue;Be++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,Oe[Be]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(Oe){t||(t=!0,e.push(Oe.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(Oe){t||(t=!0,e.remove(Oe.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,Oe=>{t||(t=!0,this.addFeature(Oe.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,Oe=>{t||(t=!0,this.removeFeature(Oe.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const Oe in this.featureChangeKeys_)this.featureChangeKeys_[Oe].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Oe=>{this.removeFeatureInternal(Oe)});for(const Oe in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Oe])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const Oe=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(Oe,function(ke){const Be=ke.getGeometry();if(Be instanceof RenderFeature||Be.intersectsCoordinate(e))return t(ke)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(Oe){const ke=Oe.getGeometry();if(ke instanceof RenderFeature||ke.intersectsExtent(e)){const Be=t(Oe);if(Be)return Be}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(Oe){t.push(Oe)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const ke=wrapAndSliceX(e,t);return[].concat(...ke.map(Be=>this.featuresRtree_.getInExtent(Be)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const Oe=e[0],ke=e[1];let Be=null;const Ue=[NaN,NaN];let He=1/0;const We=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(We,function(Cn){if(t(Cn)){const An=Cn.getGeometry(),En=He;if(He=An instanceof RenderFeature?0:An.closestPointXY(Oe,ke,Ue,He),He<En){Be=Cn;const Sn=Math.sqrt(He);We[0]=Oe-Sn,We[1]=ke-Sn,We[2]=Oe+Sn,We[3]=ke+Sn}}}),Be}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,Oe=getUid(t),ke=t.getGeometry();if(!ke)Oe in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[Oe]=t);else{const Ue=ke.getExtent();Oe in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[Oe],this.featuresRtree_&&this.featuresRtree_.insert(Ue,t)):this.featuresRtree_&&this.featuresRtree_.update(Ue,t)}const Be=t.getId();if(Be!==void 0){const Ue=Be.toString();this.idIndex_[Ue]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[Ue]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[Oe]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,Oe){const ke=this.loadedExtentsRtree_,Be=this.strategy_(e,t,Oe);for(let Ue=0,He=Be.length;Ue<He;++Ue){const We=Be[Ue];ke.forEachInExtent(We,function(An){return containsExtent(An.extent,We)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,We,t,Oe,An=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,An))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),ke.insert(We,{extent:We.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,Oe=t.forEachInExtent(e,function(ke){if(equals$1(ke.extent,e))return ke});Oe&&t.remove(Oe)}removeFeatures(e){let t=!1;for(let Oe=0,ke=e.length;Oe<ke;++Oe)t=this.removeFeatureInternal(e[Oe])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const Oe=this.featureChangeKeys_[t];Oe==null||Oe.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const ke=e.getId();if(ke!==void 0){const Be=ke.toString(),Ue=this.idIndex_[Be];Ue===e?delete this.idIndex_[Be]:Array.isArray(Ue)&&(Ue.splice(Ue.indexOf(e),1),Ue.length===1&&(this.idIndex_[Be]=Ue[0]))}return delete this.uidIndex_[t],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,t,Oe,ke){super(),this.extent=e,this.pixelRatio_=Oe,this.resolution=t,this.state=typeof ke=="function"?ImageState.IDLE:ke,this.image_=null,this.loader=typeof ke=="function"?ke:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(Oe=>{"image"in Oe&&(this.image_=Oe.image),"extent"in Oe&&(this.extent=Oe.extent),"resolution"in Oe&&(this.resolution=Oe.resolution),"pixelRatio"in Oe&&(this.pixelRatio_=Oe.pixelRatio),(Oe instanceof HTMLImageElement||Oe instanceof ImageBitmap||Oe instanceof HTMLCanvasElement||Oe instanceof HTMLVideoElement)&&(this.image_=Oe),this.state=ImageState.LOADED}).catch(Oe=>{this.state=ImageState.ERROR,console.error(Oe)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(Te,e,t){const Oe=Te;let ke=!0,Be=!1,Ue=!1;const He=[listenOnce(Oe,EventType.LOAD,function(){Ue=!0,Be||e()})];return Oe.src&&IMAGE_DECODE?(Be=!0,Oe.decode().then(function(){ke&&e()}).catch(function(We){ke&&(Ue?e():t())})):He.push(listenOnce(Oe,EventType.ERROR,t)),function(){ke=!1,He.forEach(unlistenByKey)}}function load(Te,e){return new Promise((t,Oe)=>{function ke(){Ue(),t(Te)}function Be(){Ue(),Oe(new Error("Image load error"))}function Ue(){Te.removeEventListener("load",ke),Te.removeEventListener("error",Be)}Te.addEventListener("load",ke),Te.addEventListener("error",Be)})}function decodeFallback(Te,e){return e&&(Te.src=e),Te.src&&IMAGE_DECODE?new Promise((t,Oe)=>Te.decode().then(()=>t(Te)).catch(ke=>Te.complete&&Te.width?t(Te):Oe(ke))):load(Te)}function decode$1(Te,e){return e&&(Te.src=e),Te.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?Te.decode().then(()=>createImageBitmap(Te)).catch(t=>{if(Te.complete&&Te.width)return Te;throw t}):decodeFallback(Te)}class ImageTile extends Tile{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Ue),this.crossOrigin_=ke,this.src_=Oe,this.key=Oe,this.image_=new Image,ke!==null&&(this.image_.crossOrigin=ke),this.unlisten_=null,this.tileLoadFunction_=Be}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const Te=createCanvasContext2D(1,1);return Te.fillStyle="rgba(0,0,0,0)",Te.fillRect(0,0,1,1),Te.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,Oe,ke,Be,Ue,He){this.sourceProj_=e,this.targetProj_=t;let We={};const Cn=He?createTransformFromCoordinateTransform(si=>apply(He,transform$1(si,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(si){const oi=si[0]+"/"+si[1];return We[oi]||(We[oi]=Cn(si)),We[oi]},this.maxSourceExtent_=ke,this.errorThresholdSquared_=Be*Be,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!ke&&!!this.sourceProj_.getExtent()&&getWidth(ke)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const An=getTopLeft(Oe),En=getTopRight(Oe),Sn=getBottomRight(Oe),Tn=getBottomLeft(Oe),Ln=this.transformInv_(An),Bn=this.transformInv_(En),ti=this.transformInv_(Sn),ni=this.transformInv_(Tn),ii=MAX_SUBDIVISION+(Ue?Math.max(0,Math.ceil(Math.log2(getArea$1(Oe)/(Ue*Ue*256*256)))):0);if(this.addQuad_(An,En,Sn,Tn,Ln,Bn,ti,ni,ii),this.wrapsXInSource_){let si=1/0;this.triangles_.forEach(function(oi,ci,vi){si=Math.min(si,oi.source[0][0],oi.source[1][0],oi.source[2][0])}),this.triangles_.forEach(oi=>{if(Math.max(oi.source[0][0],oi.source[1][0],oi.source[2][0])-si>this.sourceWorldWidth_/2){const ci=[[oi.source[0][0],oi.source[0][1]],[oi.source[1][0],oi.source[1][1]],[oi.source[2][0],oi.source[2][1]]];ci[0][0]-si>this.sourceWorldWidth_/2&&(ci[0][0]-=this.sourceWorldWidth_),ci[1][0]-si>this.sourceWorldWidth_/2&&(ci[1][0]-=this.sourceWorldWidth_),ci[2][0]-si>this.sourceWorldWidth_/2&&(ci[2][0]-=this.sourceWorldWidth_);const vi=Math.min(ci[0][0],ci[1][0],ci[2][0]);Math.max(ci[0][0],ci[1][0],ci[2][0])-vi<this.sourceWorldWidth_/2&&(oi.source=ci)}})}We={}}addTriangle_(e,t,Oe,ke,Be,Ue){this.triangles_.push({source:[ke,Be,Ue],target:[e,t,Oe]})}addQuad_(e,t,Oe,ke,Be,Ue,He,We,Cn){const An=boundingExtent([Be,Ue,He,We]),En=this.sourceWorldWidth_?getWidth(An)/this.sourceWorldWidth_:null,Sn=this.sourceWorldWidth_,Tn=this.sourceProj_.canWrapX()&&En>.5&&En<1;let Ln=!1;if(Cn>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const ti=boundingExtent([e,t,Oe,ke]);Ln=getWidth(ti)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||Ln}!Tn&&this.sourceProj_.isGlobal()&&En&&(Ln=En>MAX_TRIANGLE_WIDTH||Ln)}if(!Ln&&this.maxSourceExtent_&&isFinite(An[0])&&isFinite(An[1])&&isFinite(An[2])&&isFinite(An[3])&&!intersects$1(An,this.maxSourceExtent_))return;let Bn=0;if(!Ln&&(!isFinite(Be[0])||!isFinite(Be[1])||!isFinite(Ue[0])||!isFinite(Ue[1])||!isFinite(He[0])||!isFinite(He[1])||!isFinite(We[0])||!isFinite(We[1]))){if(Cn>0)Ln=!0;else if(Bn=(!isFinite(Be[0])||!isFinite(Be[1])?8:0)+(!isFinite(Ue[0])||!isFinite(Ue[1])?4:0)+(!isFinite(He[0])||!isFinite(He[1])?2:0)+(!isFinite(We[0])||!isFinite(We[1])?1:0),Bn!=1&&Bn!=2&&Bn!=4&&Bn!=8)return}if(Cn>0){if(!Ln){const ti=[(e[0]+Oe[0])/2,(e[1]+Oe[1])/2],ni=this.transformInv_(ti);let ii;Tn?ii=(modulo(Be[0],Sn)+modulo(He[0],Sn))/2-modulo(ni[0],Sn):ii=(Be[0]+He[0])/2-ni[0];const si=(Be[1]+He[1])/2-ni[1];Ln=ii*ii+si*si>this.errorThresholdSquared_}if(Ln){if(Math.abs(e[0]-Oe[0])<=Math.abs(e[1]-Oe[1])){const ti=[(t[0]+Oe[0])/2,(t[1]+Oe[1])/2],ni=this.transformInv_(ti),ii=[(ke[0]+e[0])/2,(ke[1]+e[1])/2],si=this.transformInv_(ii);this.addQuad_(e,t,ti,ii,Be,Ue,ni,si,Cn-1),this.addQuad_(ii,ti,Oe,ke,si,ni,He,We,Cn-1)}else{const ti=[(e[0]+t[0])/2,(e[1]+t[1])/2],ni=this.transformInv_(ti),ii=[(Oe[0]+ke[0])/2,(Oe[1]+ke[1])/2],si=this.transformInv_(ii);this.addQuad_(e,ti,ii,ke,Be,ni,si,We,Cn-1),this.addQuad_(ti,t,Oe,ii,ni,Ue,He,si,Cn-1)}return}}if(Tn){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}Bn&11||this.addTriangle_(e,Oe,ke,Be,He,We),Bn&14||this.addTriangle_(e,Oe,t,Be,He,Ue),Bn&&(Bn&13||this.addTriangle_(t,ke,e,Ue,We,Be),Bn&7||this.addTriangle_(t,ke,Oe,Ue,We,He))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,Oe,ke){const Be=t.source;extendCoordinate(e,Be[0]),extendCoordinate(e,Be[1]),extendCoordinate(e,Be[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(Te,e,t,Oe,ke){Te.beginPath(),Te.moveTo(0,0),Te.lineTo(e,t),Te.lineTo(Oe,ke),Te.closePath(),Te.save(),Te.clip(),Te.fillRect(0,0,Math.max(e,Oe)+1,Math.max(t,ke)),Te.restore()}function verifyBrokenDiagonalRendering(Te,e){return Math.abs(Te[e*4]-210)>2||Math.abs(Te[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const Te=createCanvasContext2D(6,6,canvasPool$1);Te.globalCompositeOperation="lighter",Te.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(Te,4,5,4,0),drawTestTriangle(Te,4,5,0,5);const e=Te.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(Te),canvasPool$1.push(Te.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(Te,e,t,Oe){const ke=transform$1(t,e,Te);let Be=getPointResolution(e,Oe,t);const Ue=e.getMetersPerUnit();Ue!==void 0&&(Be*=Ue);const He=Te.getMetersPerUnit();He!==void 0&&(Be/=He);const We=Te.getExtent();if(!We||containsCoordinate(We,ke)){const Cn=getPointResolution(Te,Be,ke)/Be;isFinite(Cn)&&Cn>0&&(Be/=Cn)}return Be}function calculateSourceExtentResolution(Te,e,t,Oe){const ke=getCenter(t);let Be=calculateSourceResolution(Te,e,ke,Oe);return(!isFinite(Be)||Be<=0)&&forEachCorner(t,function(Ue){return Be=calculateSourceResolution(Te,e,Ue,Oe),isFinite(Be)&&Be>0}),Be}function render$1(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn){const Ln=createCanvasContext2D(Math.round(t*Te),Math.round(t*e),canvasPool$1);if(En||(Ln.imageSmoothingEnabled=!1),We.length===0)return Ln.canvas;Ln.scale(t,t);function Bn(ci){return Math.round(ci*t)/t}Ln.globalCompositeOperation="lighter";const ti=createEmpty();We.forEach(function(ci,vi,pi){extend$3(ti,ci.extent)});let ni;const ii=t/Oe,si=(En?1:1+Math.pow(2,-24))/ii;(!Sn||We.length!==1||Cn!==0)&&(ni=createCanvasContext2D(Math.round(getWidth(ti)*ii),Math.round(getHeight(ti)*ii),canvasPool$1),En||(ni.imageSmoothingEnabled=!1),We.forEach(function(ci,vi,pi){if(ci.image.width>0&&ci.image.height>0){if(ci.clipExtent){ni.save();const li=(ci.clipExtent[0]-ti[0])*ii,Ri=-(ci.clipExtent[3]-ti[3])*ii,Pi=getWidth(ci.clipExtent)*ii,Fi=getHeight(ci.clipExtent)*ii;ni.rect(En?li:Math.round(li),En?Ri:Math.round(Ri),En?Pi:Math.round(li+Pi)-Math.round(li),En?Fi:Math.round(Ri+Fi)-Math.round(Ri)),ni.clip()}const fi=(ci.extent[0]-ti[0])*ii,Mi=-(ci.extent[3]-ti[3])*ii,Oi=getWidth(ci.extent)*ii,ui=getHeight(ci.extent)*ii;ni.drawImage(ci.image,Cn,Cn,ci.image.width-2*Cn,ci.image.height-2*Cn,En?fi:Math.round(fi),En?Mi:Math.round(Mi),En?Oi:Math.round(fi+Oi)-Math.round(fi),En?ui:Math.round(Mi+ui)-Math.round(Mi)),ci.clipExtent&&ni.restore()}}));const oi=getTopLeft(Ue);return He.getTriangles().forEach(function(ci,vi,pi){const fi=ci.source,Mi=ci.target;let Oi=fi[0][0],ui=fi[0][1],li=fi[1][0],Ri=fi[1][1],Pi=fi[2][0],Fi=fi[2][1];const Hi=Bn((Mi[0][0]-oi[0])/Be),nr=Bn(-(Mi[0][1]-oi[1])/Be),ar=Bn((Mi[1][0]-oi[0])/Be),cr=Bn(-(Mi[1][1]-oi[1])/Be),sr=Bn((Mi[2][0]-oi[0])/Be),br=Bn(-(Mi[2][1]-oi[1])/Be),Ni=Oi,or=ui;Oi=0,ui=0,li-=Ni,Ri-=or,Pi-=Ni,Fi-=or;const er=[[li,Ri,0,0,ar-Hi],[Pi,Fi,0,0,sr-Hi],[0,0,li,Ri,cr-nr],[0,0,Pi,Fi,br-nr]],fr=solveLinearSystem(er);if(!fr)return;if(Ln.save(),Ln.beginPath(),isBrokenDiagonalRendering()||!En){Ln.moveTo(ar,cr);const hr=4,vr=Hi-ar,_r=nr-cr;for(let Ar=0;Ar<hr;Ar++)Ln.lineTo(ar+Bn((Ar+1)*vr/hr),cr+Bn(Ar*_r/(hr-1))),Ar!=hr-1&&Ln.lineTo(ar+Bn((Ar+1)*vr/hr),cr+Bn((Ar+1)*_r/(hr-1)));Ln.lineTo(sr,br)}else Ln.moveTo(ar,cr),Ln.lineTo(Hi,nr),Ln.lineTo(sr,br);Ln.clip(),Ln.transform(fr[0],fr[2],fr[1],fr[3],Hi,nr),Ln.translate(ti[0]-Ni,ti[3]-or);let mr;if(ni)mr=ni.canvas,Ln.scale(si,-si);else{const hr=We[0],vr=hr.extent;mr=hr.image,Ln.scale(getWidth(vr)/mr.width,-getHeight(vr)/mr.height)}Ln.drawImage(mr,0,0),Ln.restore()}),ni&&(releaseCanvas(ni),canvasPool$1.push(ni.canvas)),An&&(Ln.save(),Ln.globalCompositeOperation="source-over",Ln.strokeStyle="black",Ln.lineWidth=1,He.getTriangles().forEach(function(ci,vi,pi){const fi=ci.target,Mi=(fi[0][0]-oi[0])/Be,Oi=-(fi[0][1]-oi[1])/Be,ui=(fi[1][0]-oi[0])/Be,li=-(fi[1][1]-oi[1])/Be,Ri=(fi[2][0]-oi[0])/Be,Pi=-(fi[2][1]-oi[1])/Be;Ln.beginPath(),Ln.moveTo(ui,li),Ln.lineTo(Mi,Oi),Ln.lineTo(Ri,Pi),Ln.closePath(),Ln.stroke()}),Ln.restore()),Ln.canvas}class ReprojTile extends Tile{constructor(e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn){super(Be,TileState.IDLE,Sn),this.renderEdges_=En!==void 0?En:!1,this.pixelRatio_=He,this.gutter_=We,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=ke,this.wrappedTileCoord_=Ue||Be,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const Tn=ke.getTileCoordExtent(this.wrappedTileCoord_),Ln=this.targetTileGrid_.getExtent();let Bn=this.sourceTileGrid_.getExtent();const ti=Ln?getIntersection(Tn,Ln):Tn;if(getArea$1(ti)===0){this.state=TileState.EMPTY;return}const ni=e.getExtent();ni&&(Bn?Bn=getIntersection(Bn,ni):Bn=ni);const ii=ke.getResolution(this.wrappedTileCoord_[0]),si=calculateSourceExtentResolution(e,Oe,ti,ii);if(!isFinite(si)||si<=0){this.state=TileState.EMPTY;return}const oi=An!==void 0?An:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,Oe,ti,Bn,si*oi,ii),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(si);let ci=this.triangulation_.calculateSourceExtent();if(Bn&&(e.canWrapX()?(ci[1]=clamp(ci[1],Bn[1],Bn[3]),ci[3]=clamp(ci[3],Bn[1],Bn[3])):ci=getIntersection(ci,Bn)),!getArea$1(ci))this.state=TileState.EMPTY;else{let vi=0,pi=0;e.canWrapX()&&(vi=getWidth(ni),pi=Math.floor((ci[0]-ni[0])/vi)),wrapAndSliceX(ci.slice(),e,!0).forEach(Mi=>{const Oi=t.getTileRangeForExtentAndZ(Mi,this.sourceZ_);for(let ui=Oi.minX;ui<=Oi.maxX;ui++)for(let li=Oi.minY;li<=Oi.maxY;li++){const Ri=Cn(this.sourceZ_,ui,li,He);if(Ri){const Pi=pi*vi;this.sourceTiles_.push({tile:Ri,offset:Pi})}}++pi}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var ke;const Oe=t.tile;if(Oe&&Oe.getState()==TileState.LOADED){const Be=this.sourceTileGrid_.getTileCoordExtent(Oe.tileCoord);Be[0]+=t.offset,Be[2]+=t.offset;const Ue=(ke=this.clipExtent_)==null?void 0:ke.slice();Ue&&(Ue[0]+=t.offset,Ue[2]+=t.offset),e.push({extent:Be,clipExtent:Ue,image:Oe.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],Oe=this.targetTileGrid_.getTileSize(t),ke=typeof Oe=="number"?Oe:Oe[0],Be=typeof Oe=="number"?Oe:Oe[1],Ue=this.targetTileGrid_.getResolution(t),He=this.sourceTileGrid_.getResolution(this.sourceZ_),We=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render$1(ke,Be,this.pixelRatio_,He,this.sourceTileGrid_.getExtent(),Ue,We,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const Oe=t.getState();if(Oe==TileState.IDLE||Oe==TileState.LOADING){e++;const ke=listen(t,EventType.CHANGE,Be=>{const Ue=t.getState();(Ue==TileState.LOADED||Ue==TileState.ERROR||Ue==TileState.EMPTY)&&(unlistenByKey(ke),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(ke)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},Oe,ke){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const Oe=getUid(e);return Oe in this.tileGridForProjection||(this.tileGridForProjection[Oe]=getForProjection(e)),this.tileGridForProjection[Oe]}createTile_(e,t,Oe,ke,Be,Ue){const He=[e,t,Oe],We=this.getTileCoordForTileUrlFunction(He,Be),Cn=We?this.tileUrlFunction(We,ke,Be):void 0,An=new this.tileClass(He,Cn!==void 0?TileState.IDLE:TileState.EMPTY,Cn!==void 0?Cn:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return An.key=Ue,An.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),An}getTile(e,t,Oe,ke,Be){const Ue=this.getProjection();if(!Ue||!Be||equivalent(Ue,Be))return this.getTileInternal(e,t,Oe,ke,Ue||Be);const He=[e,t,Oe],We=this.getKey(),Cn=this.getTileGridForProjection(Ue),An=this.getTileGridForProjection(Be),En=this.getTileCoordForTileUrlFunction(He,Be),Sn=new ReprojTile(Ue,Cn,Be,An,He,En,this.getTilePixelRatio(ke),this.getGutter(),(Tn,Ln,Bn,ti)=>this.getTileInternal(Tn,Ln,Bn,ti,Ue),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return Sn.key=We,Sn}getTileInternal(e,t,Oe,ke,Be){const Ue=this.getKey();return this.createTile_(e,t,Oe,ke,Be,Ue)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const Oe=get$3(e);if(Oe){const ke=getUid(Oe);ke in this.tileGridForProjection||(this.tileGridForProjection[ke]=t)}}}function defaultTileLoadFunction(Te,e){Te.getImage().src=e}const DECIMALS=4;function fromResolutionLike(Te){return Array.isArray(Te)?Math.min(...Te):Te}class ReprojImage extends ImageWrapper{constructor(e,t,Oe,ke,Be,Ue,He){let We=e.getExtent();We&&e.canWrapX()&&(We=We.slice(),We[0]=-1/0,We[2]=1/0);let Cn=t.getExtent();Cn&&t.canWrapX()&&(Cn=Cn.slice(),Cn[0]=-1/0,Cn[2]=1/0);const An=Cn?getIntersection(Oe,Cn):Oe,En=getCenter(An),Sn=calculateSourceResolution(e,t,En,ke),Tn=ERROR_THRESHOLD,Ln=new Triangulation(e,t,An,We,Sn*Tn,ke),Bn=Ln.calculateSourceExtent(),ti=isEmpty(Bn)?null:Ue(Bn,Sn,Be),ni=ti?ImageState.IDLE:ImageState.EMPTY,ii=ti?ti.getPixelRatio():1;super(Oe,ke,ii,ni),this.targetProj_=t,this.maxSourceExtent_=We,this.triangulation_=Ln,this.targetResolution_=ke,this.targetExtent_=Oe,this.sourceImage_=ti,this.sourcePixelRatio_=ii,this.interpolate_=He,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,Oe=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render$1(t,Oe,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,t=>{const Oe=this.sourceImage_.getState();(Oe==ImageState.LOADED||Oe==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e),this.image=t}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const Oe=linearFindNearest(t,e,0);e=t[Oe]}return e}getImage(e,t,Oe,ke){const Be=this.getProjection();if(!Be||!ke||equivalent(Be,ke))return Be&&(ke=Be),this.getImageInternal(e,t,Oe,ke);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),ke)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Be,ke,e,t,Oe,(Ue,He,We)=>this.getImageInternal(Ue,He,We,Be),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,Oe,ke){if(this.loader){const Be=getRequestExtent(e,t,Oe,1),Ue=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===ke&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Be)||containsExtent(this.image.getExtent(),Be))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===Ue||fromResolutionLike(this.image.getResolution())===Ue)))return this.image;this.wantedProjection_=ke,this.wantedExtent_=Be,this.wantedResolution_=Ue,this.image=new ImageWrapper(Be,Ue,Oe,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let Oe;switch(t.getState()){case ImageState.LOADING:this.loading=!0,Oe=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(Oe)&&this.dispatchEvent(new ImageSourceEvent(Oe,t))}}function defaultImageLoadFunction(Te,e){Te.getImage().src=e}function getRequestExtent(Te,e,t,Oe){const ke=e/t,Be=getCenter(Te),Ue=ceil(getWidth(Te)/ke,DECIMALS),He=ceil(getHeight(Te)/ke,DECIMALS),We=ceil((Oe-1)*Ue/2,DECIMALS),Cn=Ue+2*We,An=ceil((Oe-1)*He/2,DECIMALS),En=He+2*An;return getForViewAndSize(Be,ke,0,[Cn,En])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(Te,e,t,Oe,ke){ke.WIDTH=t[0],ke.HEIGHT=t[1];const Be=Oe.getAxisOrientation(),Ue=compareVersions(ke.VERSION,"1.3")>=0;ke[Ue?"CRS":"SRS"]=Oe.getCode();const He=Ue&&Be.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return ke.BBOX=He.join(","),appendParams(Te,ke)}function getImageSrc(Te,e,t,Oe,ke,Be,Ue){Be=Object.assign({REQUEST:"GetMap"},Be);const He=e/t,We=[round(getWidth(Te)/He,DECIMALS),round(getHeight(Te)/He,DECIMALS)];if(t!=1)switch(Ue){case"geoserver":const An=90*t+.5|0;"FORMAT_OPTIONS"in Be?Be.FORMAT_OPTIONS+=";dpi:"+An:Be.FORMAT_OPTIONS="dpi:"+An;break;case"mapserver":Be.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":Be.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(ke,Te,We,Oe,Be)}function getRequestParams(Te,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},Te)}function createLoader(Te){const e=Te.hidpi===void 0?!0:Te.hidpi,t=get$3(Te.projection||"EPSG:3857"),Oe=Te.ratio||1.5,ke=Te.load||decode$1,Be=Te.crossOrigin??null;return(Ue,He,We)=>{Ue=getRequestExtent(Ue,He,We,Oe),We!=1&&(!e||Te.serverType===void 0)&&(We=1);const Cn=getImageSrc(Ue,He,We,t,Te.url,getRequestParams(Te.params,"GetMap"),Te.serverType),An=new Image;return An.crossOrigin=Be,ke(An,Cn).then(En=>({image:En,extent:Ue,pixelRatio:We}))}}function getFeatureInfoUrl(Te,e,t){if(Te.url===void 0)return;const Oe=get$3(Te.projection||"EPSG:3857"),ke=getForViewAndSize(e,t,0,GETFEATUREINFO_IMAGE_SIZE),Be={QUERY_LAYERS:Te.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Be,getRequestParams(Te.params,"GetFeatureInfo"),Te.params);const Ue=floor((e[0]-ke[0])/t,DECIMALS),He=floor((ke[3]-e[1])/t,DECIMALS),We=compareVersions(Be.VERSION,"1.3")>=0;return Be[We?"I":"X"]=Ue,Be[We?"J":"Y"]=He,getRequestUrl(Te.url,ke,GETFEATUREINFO_IMAGE_SIZE,Oe,Be)}function getLegendUrl(Te,e){if(Te.url===void 0)return;const t={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const Oe=get$3(Te.projection||"EPSG:3857").getMetersPerUnit()||1,ke=28e-5;t.SCALE=e*Oe/ke}if(Object.assign(t,Te.params),Te.params!==void 0&&t.LAYER===void 0){const Oe=t.LAYERS;if(!(!Array.isArray(Oe)||Oe.length!==1))return;t.LAYER=Oe}return appendParams(Te.url,t)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,Oe,ke){const Be=get$3(Oe),Ue=this.getProjection()||Be;let He=this.getTileGrid();He||(He=this.getTileGridForProjection(Ue));const We=transform$1(e,Be,Ue),Cn=calculateSourceResolution(Ue,Be,e,t),An=He.getZForResolution(Cn,this.zDirection),En=He.getResolution(An),Sn=He.getTileCoordForCoordAndZ(We,An);if(He.getResolutions().length<=Sn[0])return;let Tn=He.getTileCoordExtent(Sn,this.tmpExtent_);const Ln=this.gutter_;Ln!==0&&(Tn=buffer(Tn,En*Ln,Tn));const Bn={QUERY_LAYERS:this.params_.LAYERS};Object.assign(Bn,getRequestParams(this.params_,"GetFeatureInfo"),ke);const ti=Math.floor((We[0]-Tn[0])/En),ni=Math.floor((Tn[3]-We[1])/En);return Bn[this.v13_?"I":"X"]=ti,Bn[this.v13_?"J":"Y"]=ni,this.getRequestUrl_(Sn,Tn,1,Ue||Be,Bn)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const Oe={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const ke=this.params_.LAYERS;if(!(!Array.isArray(ke)||ke.length===1))return;Oe.LAYER=ke}if(e!==void 0){const ke=this.getProjection()?this.getProjection().getMetersPerUnit():1,Be=28e-5;Oe.SCALE=e*ke/Be}return Object.assign(Oe,t),appendParams(this.urls[0],Oe)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,Oe,ke,Be){const Ue=this.urls;if(!Ue)return;let He;if(Ue.length==1)He=Ue[0];else{const We=modulo(hash(e),Ue.length);He=Ue[We]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(ke)).getResolution(e[0]),Oe,ke,He,Be,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const Oe in this.params_)t[e++]=Oe+"-"+this.params_[Oe];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,Oe){let ke=this.getTileGrid();if(ke||(ke=this.getTileGridForProjection(Oe)),ke.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const Be=ke.getResolution(e[0]);let Ue=ke.getTileCoordExtent(e,this.tmpExtent_);const He=this.gutter_;He!==0&&(Ue=buffer(Ue,Be*He,Ue));const We=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,Ue,t,Oe,We)}}let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",Oe=e.tileGrid;let ke=e.urls;ke===void 0&&e.url!==void 0&&(ke=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:Oe,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:ke,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),ke&&ke.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(ke.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,Oe={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(Oe,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,Oe):e.replace(/\{(\w+?)\}/g,function(Ue,He){return He.toLowerCase()in Oe?Oe[He.toLowerCase()]:Ue});const ke=this.tileGrid,Be=this.dimensions_;return function(Ue,He,We){if(!Ue)return;const Cn={TileMatrix:ke.getMatrixId(Ue[0]),TileCol:Ue[1],TileRow:Ue[2]};Object.assign(Cn,Be);let An=e;return t=="KVP"?An=appendParams(An,Cn):An=An.replace(/\{(\w+?)\}/g,function(En,Sn){return encodeURIComponent(Cn[Sn])}),An}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,Oe,ke){const Be=get$3(Oe),Ue=this.getProjection();Ue&&Ue!==Be&&(t=calculateSourceResolution(Ue,Be,e,t),e=transform$1(e,Be,Ue));const He={url:this.url_,params:{...this.params_,...ke},projection:Ue||Be};return getFeatureInfoUrl(He,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,Oe,ke){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==ke)&&(this.loaderProjection_=ke,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:ke,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Be,Ue)=>(this.image.setImage(Be),this.imageLoadFunction_(this.image,Ue),decode$1(Be))})),super.getImageInternal(e,t,Oe,ke))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(Te,e,t){const Oe=Te.getCenterInternal();if(Oe){const ke=[Oe[0]+e[0],Oe[1]+e[1]];Te.animateInternal({duration:t!==void 0?t:250,easing:linear,center:Te.getConstrainedCenter(ke)})}}function zoomByDelta(Te,e,t,Oe){const ke=Te.getZoom();if(ke===void 0)return;const Be=Te.getConstrainedZoom(ke+e),Ue=Te.getResolutionForZoom(Be);Te.getAnimating()&&Te.cancelAnimations(),Te.animate({resolution:Ue,anchor:t,duration:Oe!==void 0?Oe:250,easing:easeOut})}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const Oe=e.originalEvent,ke=e.map,Be=e.coordinate,Ue=Oe.shiftKey?-this.delta_:this.delta_,He=ke.getView();zoomByDelta(He,Ue,Be,this.duration_),Oe.preventDefault(),t=!0}return!t}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const Oe=this.handleUpEvent(e);this.handlingDownUpSequence=Oe&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const Oe=this.handleDownEvent(e);this.handlingDownUpSequence=Oe,t=this.stopDown(Oe)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(Te){const e=Te.length;let t=0,Oe=0;for(let ke=0;ke<e;ke++)t+=Te[ke].clientX,Oe+=Te[ke].clientY;return{clientX:t/e,clientY:Oe/e}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,Oe="px",ke=this.element_.style;ke.left=Math.min(e[0],t[0])+Oe,ke.top=Math.min(e[1],t[1])+Oe,ke.width=Math.abs(t[0]-e[0])+Oe,ke.height=Math.abs(t[1]-e[1])+Oe}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,ke=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);ke[4]=ke[0].slice(),this.geometry_?this.geometry_.setCoordinates([ke]):this.geometry_=new Polygon([ke])}getGeometry(){return this.geometry_}}function all(Te){const e=arguments;return function(t){let Oe=!0;for(let ke=0,Be=e.length;ke<Be&&(Oe=Oe&&e[ke](t),!!Oe);++ke);return Oe}}const altKeyOnly=function(Te){const e=Te.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(Te){const e=Te.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(Te){const e=Te.map.getTargetElement(),t=e.getRootNode(),Oe=Te.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(Oe):e.contains(Oe)},focusWithTabindex=function(Te){const e=Te.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?focus(Te):!0},always$1=TRUE,mouseActionButton=function(Te){const e=Te.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(Te){return Te.type=="pointermove"},singleClick=function(Te){return Te.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(Te){const e=Te.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(Te){const e=Te.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(Te){const e=Te.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(Te){const e=Te.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(Te){const e=Te.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(Te){const e=Te.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.coordinate=t,this.mapBrowserEvent=Oe}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,Oe){const ke=Oe[0]-t[0],Be=Oe[1]-t[1];return ke*ke+Be*Be>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const Oe=this.targetPointers,ke=t.getEventPixel(centroid(Oe));if(Oe.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(ke[0],ke[1]),this.lastCentroid){const Be=[this.lastCentroid[0]-ke[0],ke[1]-this.lastCentroid[1]],He=e.map.getView();scale$3(Be,He.getResolution()),rotate$1(Be,He.getRotation()),He.adjustCenterInternal(Be)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=ke,this.lastPointersCount_=Oe.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,Oe=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const ke=this.kinetic_.getDistance(),Be=this.kinetic_.getAngle(),Ue=Oe.getCenterInternal(),He=t.getPixelFromCoordinateInternal(Ue),We=t.getCoordinateFromPixelInternal([He[0]-ke*Math.cos(Be),He[1]-ke*Math.sin(Be)]);Oe.animateInternal({center:Oe.getConstrainedCenter(We),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,Oe.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const Oe=e.map.getView();return this.lastCentroid=null,Oe.getAnimating()&&Oe.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(Te){if(Te!==void 0)return 0}function none$1(Te){if(Te!==void 0)return Te}function createSnapToN(Te){const e=2*Math.PI/Te;return function(t,Oe){if(Oe)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(Te){const e=toRadians(5);return function(t,Oe){return Oe||t===void 0?t:Math.abs(t)<=e?0:t}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,Oe=t.getView();if(Oe.getConstraints().rotation===disable)return;const ke=t.getSize(),Be=e.pixel,Ue=Math.atan2(ke[1]/2-Be[1],Be[0]-ke[0]/2);if(this.lastAngle_!==void 0){const He=Ue-this.lastAngle_;Oe.adjustRotationInternal(-He)}this.lastAngle_=Ue}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const Oe=this.getMap().getView();let ke=this.getGeometry();if(this.out_){const Be=Oe.rotatedExtentForGeometry(ke),Ue=Oe.getResolutionForExtentInternal(Be),He=Oe.getResolution()/Ue;ke=ke.clone(),ke.scale(He*He)}Oe.fitInternal(ke,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.map=t,this.frameState=Oe!==void 0?Oe:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Be),this.originalEvent=Oe,this.pixel_=null,this.coordinate_=null,this.dragging=ke!==void 0?ke:!1,this.activePointers=Ue}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},Oe=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=Oe===void 0&&!t.managed?1/0:Oe,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(Te,e,t){return function(Oe,ke,Be,Ue,He){if(!Oe)return;if(!ke&&!e)return Oe;const We=e?0:Be[0]*ke,Cn=e?0:Be[1]*ke,An=He?He[0]:0,En=He?He[1]:0;let Sn=Te[0]+We/2+An,Tn=Te[2]-We/2+An,Ln=Te[1]+Cn/2+En,Bn=Te[3]-Cn/2+En;Sn>Tn&&(Sn=(Tn+Sn)/2,Tn=Sn),Ln>Bn&&(Ln=(Bn+Ln)/2,Bn=Ln);let ti=clamp(Oe[0],Sn,Tn),ni=clamp(Oe[1],Ln,Bn);if(Ue&&t&&ke){const ii=30*ke;ti+=-ii*Math.log(1+Math.max(0,Sn-Oe[0])/ii)+ii*Math.log(1+Math.max(0,Oe[0]-Tn)/ii),ni+=-ii*Math.log(1+Math.max(0,Ln-Oe[1])/ii)+ii*Math.log(1+Math.max(0,Oe[1]-Bn)/ii)}return[ti,ni]}}function none(Te){return Te}function getViewportClampedResolution(Te,e,t,Oe){const ke=getWidth(e)/t[0],Be=getHeight(e)/t[1];return Oe?Math.min(Te,Math.max(ke,Be)):Math.min(Te,Math.min(ke,Be))}function getSmoothClampedResolution(Te,e,t){let Oe=Math.min(Te,e);const ke=50;return Oe*=Math.log(1+ke*Math.max(0,Te/e-1))/ke+1,t&&(Oe=Math.max(Oe,t),Oe/=Math.log(1+ke*Math.max(0,t/Te-1))/ke+1),clamp(Oe,t/2,e*2)}function createSnapToResolutions(Te,e,t,Oe){return e=e!==void 0?e:!0,function(ke,Be,Ue,He){if(ke!==void 0){const We=Te[0],Cn=Te[Te.length-1],An=t?getViewportClampedResolution(We,t,Ue,Oe):We;if(He)return e?getSmoothClampedResolution(ke,An,Cn):clamp(ke,Cn,An);const En=Math.min(An,ke),Sn=Math.floor(linearFindNearest(Te,En,Be));return Te[Sn]>An&&Sn<Te.length-1?Te[Sn+1]:Te[Sn]}}}function createSnapToPower(Te,e,t,Oe,ke,Be){return Oe=Oe!==void 0?Oe:!0,t=t!==void 0?t:0,function(Ue,He,We,Cn){if(Ue!==void 0){const An=ke?getViewportClampedResolution(e,ke,We,Be):e;if(Cn)return Oe?getSmoothClampedResolution(Ue,An,t):clamp(Ue,t,An);const En=1e-9,Sn=Math.ceil(Math.log(e/An)/Math.log(Te)-En),Tn=-He*(.5-En)+.5,Ln=Math.min(An,Ue),Bn=Math.floor(Math.log(e/Ln)/Math.log(Te)+Tn),ti=Math.max(Sn,Bn),ni=e/Math.pow(Te,ti);return clamp(ni,t,An)}}}function createMinMaxResolution(Te,e,t,Oe,ke){return t=t!==void 0?t:!0,function(Be,Ue,He,We){if(Be!==void 0){const Cn=Oe?getViewportClampedResolution(Te,Oe,He,ke):Te;return!t||!We?clamp(Be,e,Cn):getSmoothClampedResolution(Be,Cn,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const He in ViewProperty)delete t[He];this.setProperties(t,!0);const Oe=createResolutionConstraint(e);this.maxResolution_=Oe.maxResolution,this.minResolution_=Oe.minResolution,this.zoomFactor_=Oe.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=Oe.minZoom;const ke=createCenterConstraint(e),Be=Oe.constraint,Ue=createRotationConstraint(e);this.constraints_={center:ke,resolution:Be,rotation:Ue},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const Oe=this.getCenterInternal();if(Oe){const ke=e||[0,0,0,0];t=t||[0,0,0,0];const Be=this.getResolution(),Ue=Be/2*(ke[3]-t[3]+t[1]-ke[1]),He=Be/2*(ke[0]-t[0]+t[2]-ke[2]);this.setCenterInternal([Oe[0]+Ue,Oe[1]-He])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let Oe=0;Oe<t.length;++Oe){let ke=arguments[Oe];ke.center&&(ke=Object.assign({},ke),ke.center=fromUserCoordinate(ke.center,this.getProjection())),ke.anchor&&(ke=Object.assign({},ke),ke.anchor=fromUserCoordinate(ke.anchor,this.getProjection())),t[Oe]=ke}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,Oe;t>1&&typeof arguments[t-1]=="function"&&(Oe=arguments[t-1],--t);let ke=0;for(;ke<t&&!this.isDef();++ke){const An=arguments[ke];An.center&&this.setCenterInternal(An.center),An.zoom!==void 0?this.setZoom(An.zoom):An.resolution&&this.setResolution(An.resolution),An.rotation!==void 0&&this.setRotation(An.rotation)}if(ke===t){Oe&&animationCallback(Oe,!0);return}let Be=Date.now(),Ue=this.targetCenter_.slice(),He=this.targetResolution_,We=this.targetRotation_;const Cn=[];for(;ke<t;++ke){const An=arguments[ke],En={start:Be,complete:!1,anchor:An.anchor,duration:An.duration!==void 0?An.duration:1e3,easing:An.easing||inAndOut,callback:Oe};if(An.center&&(En.sourceCenter=Ue,En.targetCenter=An.center.slice(),Ue=En.targetCenter),An.zoom!==void 0?(En.sourceResolution=He,En.targetResolution=this.getResolutionForZoom(An.zoom),He=En.targetResolution):An.resolution&&(En.sourceResolution=He,En.targetResolution=An.resolution,He=En.targetResolution),An.rotation!==void 0){En.sourceRotation=We;const Sn=modulo(An.rotation-We+Math.PI,2*Math.PI)-Math.PI;En.targetRotation=We+Sn,We=En.targetRotation}isNoopAnimation(En)?En.complete=!0:Be+=En.duration,Cn.push(En)}this.animations_.push(Cn),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,Oe=this.animations_.length;t<Oe;++t){const ke=this.animations_[t];if(ke[0].callback&&animationCallback(ke[0].callback,!1),!e)for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be];if(!He.complete){e=He.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let Oe=this.animations_.length-1;Oe>=0;--Oe){const ke=this.animations_[Oe];let Be=!0;for(let Ue=0,He=ke.length;Ue<He;++Ue){const We=ke[Ue];if(We.complete)continue;const Cn=e-We.start;let An=We.duration>0?Cn/We.duration:1;An>=1?(We.complete=!0,An=1):Be=!1;const En=We.easing(An);if(We.sourceCenter){const Sn=We.sourceCenter[0],Tn=We.sourceCenter[1],Ln=We.targetCenter[0],Bn=We.targetCenter[1];this.nextCenter_=We.targetCenter;const ti=Sn+En*(Ln-Sn),ni=Tn+En*(Bn-Tn);this.targetCenter_=[ti,ni]}if(We.sourceResolution&&We.targetResolution){const Sn=En===1?We.targetResolution:We.sourceResolution+En*(We.targetResolution-We.sourceResolution);if(We.anchor){const Tn=this.getViewportSize_(this.getRotation()),Ln=this.constraints_.resolution(Sn,0,Tn,!0);this.targetCenter_=this.calculateCenterZoom(Ln,We.anchor)}this.nextResolution_=We.targetResolution,this.targetResolution_=Sn,this.applyTargetState_(!0)}if(We.sourceRotation!==void 0&&We.targetRotation!==void 0){const Sn=En===1?modulo(We.targetRotation+Math.PI,2*Math.PI)-Math.PI:We.sourceRotation+En*(We.targetRotation-We.sourceRotation);if(We.anchor){const Tn=this.constraints_.rotation(Sn,!0);this.targetCenter_=this.calculateCenterRotate(Tn,We.anchor)}this.nextRotation_=We.targetRotation,this.targetRotation_=Sn}if(this.applyTargetState_(!0),t=!0,!We.complete)break}if(Be){this.animations_[Oe]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Ue=ke[0].callback;Ue&&animationCallback(Ue,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let Oe;const ke=this.getCenterInternal();return ke!==void 0&&(Oe=[ke[0]-t[0],ke[1]-t[1]],rotate$1(Oe,e-this.getRotation()),add$1(Oe,t)),Oe}calculateCenterZoom(e,t){let Oe;const ke=this.getCenterInternal(),Be=this.getResolution();if(ke!==void 0&&Be!==void 0){const Ue=t[0]-e*(t[0]-ke[0])/Be,He=t[1]-e*(t[1]-ke[1])/Be;Oe=[Ue,He]}return Oe}getViewportSize_(e){const t=this.viewportSize_;if(e){const Oe=t[0],ke=t[1];return[Math.abs(Oe*Math.cos(e))+Math.abs(ke*Math.sin(e)),Math.abs(Oe*Math.sin(e))+Math.abs(ke*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const Oe=this.getResolution();assert(Oe!==void 0,"The view resolution is not defined");const ke=this.getRotation();return assert(ke!==void 0,"The view rotation is not defined"),getForViewAndSize(t,Oe,ke,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const Oe=getWidth(e)/t[0],ke=getHeight(e)/t[1];return Math.max(Oe,ke)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),Oe=this.minResolution_,ke=Math.log(t/Oe)/Math.log(e);return function(Be){return t/Math.pow(e,Be*ke)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),Oe=this.getConstrainedResolution(this.maxResolution_),ke=this.minResolution_,Be=Math.log(Oe/ke)/t;return function(Ue){return Math.log(Oe/Ue)/t/Be}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const Oe=this.padding_;return Oe&&(t=[t[0]-Oe[1]-Oe[3],t[1]-Oe[0]-Oe[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),Oe=this.getRotation();let ke=this.getCenterInternal();const Be=this.padding_;if(Be){const Ue=this.getViewportSizeMinusPadding_();ke=calculateCenterOn(ke,this.getViewportSize_(),[Ue[0]/2+Be[3],Ue[1]/2+Be[0]],t,Oe)}return{center:ke.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:Oe,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,Oe,ke;if(this.resolutions_){const Be=linearFindNearest(this.resolutions_,e,1);t=Be,Oe=this.resolutions_[Be],Be==this.resolutions_.length-1?ke=2:ke=Oe/this.resolutions_[Be+1]}else Oe=this.maxResolution_,ke=this.zoomFactor_;return t+Math.log(Oe/e)/Math.log(ke)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const Oe=clamp(Math.floor(e),0,this.resolutions_.length-2),ke=this.resolutions_[Oe]/this.resolutions_[Oe+1];return this.resolutions_[Oe]/Math.pow(ke,clamp(e-Oe,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let Oe;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const ke=fromUserExtent(e,this.getProjection());Oe=fromExtent(ke)}else if(e.getType()==="Circle"){const ke=fromUserExtent(e.getExtent(),this.getProjection());Oe=fromExtent(ke),Oe.rotate(this.getRotation(),getCenter(ke))}else Oe=e;this.fitInternal(Oe,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),Oe=Math.cos(t),ke=Math.sin(-t),Be=e.getFlatCoordinates(),Ue=e.getStride();let He=1/0,We=1/0,Cn=-1/0,An=-1/0;for(let En=0,Sn=Be.length;En<Sn;En+=Ue){const Tn=Be[En]*Oe-Be[En+1]*ke,Ln=Be[En]*ke+Be[En+1]*Oe;He=Math.min(He,Tn),We=Math.min(We,Ln),Cn=Math.max(Cn,Tn),An=Math.max(An,Ln)}return[He,We,Cn,An]}fitInternal(e,t){t=t||{};let Oe=t.size;Oe||(Oe=this.getViewportSizeMinusPadding_());const ke=t.padding!==void 0?t.padding:[0,0,0,0],Be=t.nearest!==void 0?t.nearest:!1;let Ue;t.minResolution!==void 0?Ue=t.minResolution:t.maxZoom!==void 0?Ue=this.getResolutionForZoom(t.maxZoom):Ue=0;const He=this.rotatedExtentForGeometry(e);let We=this.getResolutionForExtentInternal(He,[Oe[0]-ke[1]-ke[3],Oe[1]-ke[0]-ke[2]]);We=isNaN(We)?Ue:Math.max(We,Ue),We=this.getConstrainedResolution(We,Be?0:1);const Cn=this.getRotation(),An=Math.sin(Cn),En=Math.cos(Cn),Sn=getCenter(He);Sn[0]+=(ke[1]-ke[3])/2*We,Sn[1]+=(ke[0]-ke[2])/2*We;const Tn=Sn[0]*En-Sn[1]*An,Ln=Sn[1]*En+Sn[0]*An,Bn=this.getConstrainedCenter([Tn,Ln],We),ti=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:We,center:Bn,duration:t.duration,easing:t.easing},ti):(this.targetResolution_=We,this.targetCenter_=Bn,this.applyTargetState_(!1,!0),animationCallback(ti,!0))}centerOn(e,t,Oe){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,Oe)}centerOnInternal(e,t,Oe){this.setCenterInternal(calculateCenterOn(e,t,Oe,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,Oe,ke){let Be;const Ue=this.padding_;if(Ue&&e){const He=this.getViewportSizeMinusPadding_(-Oe),We=calculateCenterOn(e,ke,[He[0]/2+Ue[3],He[1]/2+Ue[0]],t,Oe);Be=[e[0]-We[0],e[1]-We[1]]}return Be}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const Oe=this.getAnimating()||this.getInteracting(),ke=this.getViewportSize_(this.getRotation()),Be=this.constraints_.resolution(this.targetResolution_*e,0,ke,Oe);t&&(this.targetCenter_=this.calculateCenterZoom(Be,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const Oe=this.getAnimating()||this.getInteracting(),ke=this.constraints_.rotation(this.targetRotation_+e,Oe);t&&(this.targetCenter_=this.calculateCenterRotate(ke,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const Oe=this.getAnimating()||this.getInteracting()||t,ke=this.constraints_.rotation(this.targetRotation_,Oe),Be=this.getViewportSize_(ke),Ue=this.constraints_.resolution(this.targetResolution_,0,Be,Oe),He=this.constraints_.center(this.targetCenter_,Ue,Be,Oe,this.calculateCenterShift(this.targetCenter_,Ue,ke,Be));this.get(ViewProperty.ROTATION)!==ke&&this.set(ViewProperty.ROTATION,ke),this.get(ViewProperty.RESOLUTION)!==Ue&&(this.set(ViewProperty.RESOLUTION,Ue),this.set("zoom",this.getZoom(),!0)),(!He||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),He))&&this.set(ViewProperty.CENTER,He),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,Oe){e=e!==void 0?e:200;const ke=t||0,Be=this.constraints_.rotation(this.targetRotation_),Ue=this.getViewportSize_(Be),He=this.constraints_.resolution(this.targetResolution_,ke,Ue),We=this.constraints_.center(this.targetCenter_,He,Ue,!1,this.calculateCenterShift(this.targetCenter_,He,Be,Ue));if(e===0&&!this.cancelAnchor_){this.targetResolution_=He,this.targetRotation_=Be,this.targetCenter_=We,this.applyTargetState_();return}Oe=Oe||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==He||this.getRotation()!==Be||!this.getCenterInternal()||!equals(this.getCenterInternal(),We))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Be,center:We,resolution:He,duration:e,easing:easeOut,anchor:Oe}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,Oe){Oe=Oe&&fromUserCoordinate(Oe,this.getProjection()),this.endInteractionInternal(e,t,Oe)}endInteractionInternal(e,t,Oe){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,Oe))}getConstrainedCenter(e,t){const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),Oe)}getConstrainedZoom(e,t){const Oe=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(Oe,t))}getConstrainedResolution(e,t){t=t||0;const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,Oe)}}function animationCallback(Te,e){setTimeout(function(){Te(e)},0)}function createCenterConstraint(Te){if(Te.extent!==void 0){const t=Te.smoothExtentConstraint!==void 0?Te.smoothExtentConstraint:!0;return createExtent(Te.extent,Te.constrainOnlyCenter,t)}const e=createProjection(Te.projection,"EPSG:3857");if(Te.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none}function createResolutionConstraint(Te){let e,t,Oe,Ue=Te.minZoom!==void 0?Te.minZoom:DEFAULT_MIN_ZOOM,He=Te.maxZoom!==void 0?Te.maxZoom:28;const We=Te.zoomFactor!==void 0?Te.zoomFactor:2,Cn=Te.multiWorld!==void 0?Te.multiWorld:!1,An=Te.smoothResolutionConstraint!==void 0?Te.smoothResolutionConstraint:!0,En=Te.showFullExtent!==void 0?Te.showFullExtent:!1,Sn=createProjection(Te.projection,"EPSG:3857"),Tn=Sn.getExtent();let Ln=Te.constrainOnlyCenter,Bn=Te.extent;if(!Cn&&!Bn&&Sn.isGlobal()&&(Ln=!1,Bn=Tn),Te.resolutions!==void 0){const ti=Te.resolutions;t=ti[Ue],Oe=ti[He]!==void 0?ti[He]:ti[ti.length-1],Te.constrainResolution?e=createSnapToResolutions(ti,An,!Ln&&Bn,En):e=createMinMaxResolution(t,Oe,An,!Ln&&Bn,En)}else{const ni=(Tn?Math.max(getWidth(Tn),getHeight(Tn)):360*METERS_PER_UNIT$1.degrees/Sn.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),ii=ni/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=Te.maxResolution,t!==void 0?Ue=0:t=ni/Math.pow(We,Ue),Oe=Te.minResolution,Oe===void 0&&(Te.maxZoom!==void 0?Te.maxResolution!==void 0?Oe=t/Math.pow(We,He):Oe=ni/Math.pow(We,He):Oe=ii),He=Ue+Math.floor(Math.log(t/Oe)/Math.log(We)),Oe=t/Math.pow(We,He-Ue),Te.constrainResolution?e=createSnapToPower(We,t,Oe,An,!Ln&&Bn,En):e=createMinMaxResolution(t,Oe,An,!Ln&&Bn,En)}return{constraint:e,maxResolution:t,minResolution:Oe,minZoom:Ue,zoomFactor:We}}function createRotationConstraint(Te){if(Te.enableRotation!==void 0?Te.enableRotation:!0){const t=Te.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none$1:typeof t=="number"?createSnapToN(t):none$1}return disable}function isNoopAnimation(Te){return!(Te.sourceCenter&&Te.targetCenter&&!equals(Te.sourceCenter,Te.targetCenter)||Te.sourceResolution!==Te.targetResolution||Te.sourceRotation!==Te.targetRotation)}function calculateCenterOn(Te,e,t,Oe,ke){const Be=Math.cos(-ke);let Ue=Math.sin(-ke),He=Te[0]*Be-Te[1]*Ue,We=Te[1]*Be+Te[0]*Ue;He+=(e[0]/2-t[0])*Oe,We+=(t[1]-e[1]/2)*Oe,Ue=-Ue;const Cn=He*Be-We*Ue,An=We*Be+He*Ue;return[Cn,An]}let Layer$1=class extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const Oe=e.source?e.source:null;this.setSource(Oe)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const Oe=this.getMapInternal();!e&&Oe&&(e=Oe.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&Oe&&(t.layerStatesArray=Oe.getLayerGroup().getLayerStatesArray());let ke;if(t.layerStatesArray){if(ke=t.layerStatesArray.find(Ue=>Ue.layer===this),!ke)return!1}else ke=this.getLayerState();const Be=this.getExtent();return inView(ke,t.viewState)&&(!Be||intersects$1(Be,t.extent))}getAttributions(e){var Be;if(!this.isVisible(e))return[];const t=(Be=this.getSource())==null?void 0:Be.getAttributions();if(!t)return[];const Oe=e instanceof View?e.getViewStateAndExtent():e;let ke=t(Oe);return Array.isArray(ke)||(ke=[ke]),ke}render(e,t){const Oe=this.getRenderer();return Oe.prepareFrame(e)?(this.rendered=!0,Oe.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,Oe=this.getLayerState(!1);assert(!t.some(ke=>ke.layer===Oe.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(Oe)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function inView(Te,e){if(!Te.visible)return!1;const t=e.resolution;if(t<Te.minResolution||t>=Te.maxResolution)return!1;const Oe=e.zoom;return Oe>Te.minZoom&&Oe<=Te.maxZoom}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(Te,e){e=e||xyz.whitepoint[2].E;var t=Te[0]/e[0],Oe=Te[1]/e[1],ke=Te[2]/e[2],Be,Ue,He;return Be=t*3.240969941904521+Oe*-1.537383177570093+ke*-.498610760293,Ue=t*-.96924363628087+Oe*1.87596750150772+ke*.041555057407175,He=t*.055630079696993+Oe*-.20397695888897+ke*1.056971514242878,Be=Be>.0031308?1.055*Math.pow(Be,1/2.4)-.055:Be=Be*12.92,Ue=Ue>.0031308?1.055*Math.pow(Ue,1/2.4)-.055:Ue=Ue*12.92,He=He>.0031308?1.055*Math.pow(He,1/2.4)-.055:He=He*12.92,Be=Math.min(Math.max(0,Be),1),Ue=Math.min(Math.max(0,Ue),1),He=Math.min(Math.max(0,He),1),[Be*255,Ue*255,He*255]};rgb.xyz=function(Te,e){var t=Te[0]/255,Oe=Te[1]/255,ke=Te[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,Oe=Oe>.04045?Math.pow((Oe+.055)/1.055,2.4):Oe/12.92,ke=ke>.04045?Math.pow((ke+.055)/1.055,2.4):ke/12.92;var Be=t*.41239079926595+Oe*.35758433938387+ke*.18048078840183,Ue=t*.21263900587151+Oe*.71516867876775+ke*.072192315360733,He=t*.019330818715591+Oe*.11919477979462+ke*.95053215224966;return e=e||xyz.whitepoint[2].E,[Be*e[0],Ue*e[1],He*e[2]]};var luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(Te,e,t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn;if(Be=Te[0],Ue=Te[1],He=Te[2],Be===0)return[0,0,0];var ti=.0011070564598794539;return e=e||"D65",t=t||2,En=xyz.whitepoint[t][e][0],Sn=xyz.whitepoint[t][e][1],Tn=xyz.whitepoint[t][e][2],Ln=4*En/(En+15*Sn+3*Tn),Bn=9*Sn/(En+15*Sn+3*Tn),Oe=Ue/(13*Be)+Ln||0,ke=He/(13*Be)+Bn||0,Cn=Be>8?Sn*Math.pow((Be+16)/116,3):Sn*Be*ti,We=Cn*9*Oe/(4*ke)||0,An=Cn*(12-3*Oe-20*ke)/(4*ke)||0,[We,Cn,An]}};xyz.luv=function(Te,e,t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti=.008856451679035631,ni=903.2962962962961;e=e||"D65",t=t||2,En=xyz.whitepoint[t][e][0],Sn=xyz.whitepoint[t][e][1],Tn=xyz.whitepoint[t][e][2],Ln=4*En/(En+15*Sn+3*Tn),Bn=9*Sn/(En+15*Sn+3*Tn),We=Te[0],Cn=Te[1],An=Te[2],Oe=4*We/(We+15*Cn+3*An)||0,ke=9*Cn/(We+15*Cn+3*An)||0;var ii=Cn/Sn;return Be=ii<=ti?ni*ii:116*Math.pow(ii,1/3)-16,Ue=13*Be*(Oe-Ln),He=13*Be*(ke-Bn),[Be,Ue,He]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(Te){var e=Te[0],t=Te[1],Oe=Te[2],ke,Be,Ue;return Ue=Oe/360*2*Math.PI,ke=t*Math.cos(Ue),Be=t*Math.sin(Ue),[e,ke,Be]},xyz:function(Te){return luv.xyz(lchuv.luv(Te))}};luv.lchuv=function(Te){var e=Te[0],t=Te[1],Oe=Te[2],ke=Math.sqrt(t*t+Oe*Oe),Be=Math.atan2(Oe,t),Ue=Be*360/2/Math.PI;return Ue<0&&(Ue+=360),[e,ke,Ue]};xyz.lchuv=function(Te){return luv.lchuv(xyz.luv(Te))};const names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(Te){var An,En;var e,t=[],Oe=1,ke;if(typeof Te=="number")return{space:"rgb",values:[Te>>>16,(Te&65280)>>>8,Te&255],alpha:1};if(typeof Te=="number")return{space:"rgb",values:[Te>>>16,(Te&65280)>>>8,Te&255],alpha:1};if(Te=String(Te).toLowerCase(),names$y[Te])t=names$y[Te].slice(),ke="rgb";else if(Te==="transparent")Oe=0,ke="rgb",t=[0,0,0];else if(Te[0]==="#"){var Be=Te.slice(1),Ue=Be.length,He=Ue<=4;Oe=1,He?(t=[parseInt(Be[0]+Be[0],16),parseInt(Be[1]+Be[1],16),parseInt(Be[2]+Be[2],16)],Ue===4&&(Oe=parseInt(Be[3]+Be[3],16)/255)):(t=[parseInt(Be[0]+Be[1],16),parseInt(Be[2]+Be[3],16),parseInt(Be[4]+Be[5],16)],Ue===8&&(Oe=parseInt(Be[6]+Be[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),ke="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(Te)){var We=e[1];ke=We.replace(/a$/,"");var Cn=ke==="cmyk"?4:ke==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),ke==="color"&&(ke=t.shift()),t=t.map(function(Sn,Tn){if(Sn[Sn.length-1]==="%")return Sn=parseFloat(Sn)/100,Tn===3?Sn:ke==="rgb"?Sn*255:ke[0]==="h"||ke[0]==="l"&&!Tn?Sn*100:ke==="lab"?Sn*125:ke==="lch"?Tn<2?Sn*150:Sn*360:ke[0]==="o"&&!Tn?Sn:ke==="oklab"?Sn*.4:ke==="oklch"?Tn<2?Sn*.4:Sn*360:Sn;if(ke[Tn]==="h"||Tn===2&&ke[ke.length-1]==="h"){if(baseHues[Sn]!==void 0)return baseHues[Sn];if(Sn.endsWith("deg"))return parseFloat(Sn);if(Sn.endsWith("turn"))return parseFloat(Sn)*360;if(Sn.endsWith("grad"))return parseFloat(Sn)*360/400;if(Sn.endsWith("rad"))return parseFloat(Sn)*180/Math.PI}return Sn==="none"?0:parseFloat(Sn)}),Oe=t.length>Cn?t.pop():1}else/[0-9](?:\s|\/|,)/.test(Te)&&(t=Te.match(/([0-9]+)/g).map(function(Sn){return parseFloat(Sn)}),ke=((En=(An=Te.match(/([a-z])/ig))==null?void 0:An.join(""))==null?void 0:En.toLowerCase())||"rgb");return{space:ke,values:t,alpha:Oe}}var hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(Te){var e=Te[0]/360,t=Te[1]/100,Oe=Te[2]/100,ke,Be,Ue,He,We,Cn=0;if(t===0)return We=Oe*255,[We,We,We];for(Be=Oe<.5?Oe*(1+t):Oe+t-Oe*t,ke=2*Oe-Be,He=[0,0,0];Cn<3;)Ue=e+1/3*-(Cn-1),Ue<0?Ue++:Ue>1&&Ue--,We=6*Ue<1?ke+(Be-ke)*6*Ue:2*Ue<1?Be:3*Ue<2?ke+(Be-ke)*(2/3-Ue)*6:ke,He[Cn++]=We*255;return He}};rgb.hsl=function(Te){var e=Te[0]/255,t=Te[1]/255,Oe=Te[2]/255,ke=Math.min(e,t,Oe),Be=Math.max(e,t,Oe),Ue=Be-ke,He,We,Cn;return Be===ke?He=0:e===Be?He=(t-Oe)/Ue:t===Be?He=2+(Oe-e)/Ue:Oe===Be&&(He=4+(e-t)/Ue),He=Math.min(He*60,360),He<0&&(He+=360),Cn=(ke+Be)/2,Be===ke?We=0:Cn<=.5?We=Ue/(Be+ke):We=Ue/(2-Be-ke),[He,We*100,Cn*100]};function rgba$1(Te){Array.isArray(Te)&&Te.raw&&(Te=String.raw(...arguments)),Te instanceof Number&&(Te=+Te);var e,t=parse$3(Te);if(!t.space)return[];const Oe=t.space[0]==="h"?hsl.min:rgb.min,ke=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],Oe[0]),ke[0]),e[1]=Math.min(Math.max(t.values[1],Oe[1]),ke[1]),e[2]=Math.min(Math.max(t.values[2],Oe[2]),ke[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const NO_COLOR=[NaN,NaN,NaN,0];function asString(Te){return typeof Te=="string"?Te:toString$2(Te)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(Te){if(Te.length===4)return Te;const e=Te.slice();return e[3]=1,e}function rgbaToLcha(Te){const e=xyz.lchuv(rgb.xyz(Te));return e[3]=Te[3],e}function lchaToRgba(Te){const e=xyz.rgb(lchuv.xyz(Te));return e[3]=Te[3],e}function fromString(Te){if(Te==="none")return NO_COLOR;if(cache.hasOwnProperty(Te))return cache[Te];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const Oe in cache)t++&3||(delete cache[Oe],--cacheSize)}const e=rgba$1(Te);if(e.length!==4)throw new Error('failed to parse "'+Te+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+Te+'" as color');return normalize(e),cache[Te]=e,++cacheSize,e}function asArray(Te){return Array.isArray(Te)?Te:fromString(Te)}function normalize(Te){return Te[0]=clamp(Te[0]+.5|0,0,255),Te[1]=clamp(Te[1]+.5|0,0,255),Te[2]=clamp(Te[2]+.5|0,0,255),Te[3]=clamp(Te[3],0,1),Te}function toString$2(Te){let e=Te[0];e!=(e|0)&&(e=e+.5|0);let t=Te[1];t!=(t|0)&&(t=t+.5|0);let Oe=Te[2];Oe!=(Oe|0)&&(Oe=Oe+.5|0);const ke=Te[3]===void 0?1:Math.round(Te[3]*1e3)/1e3;return"rgba("+e+","+t+","+Oe+","+ke+")"}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const Oe=this.cache_[t];!(e++&3)&&!Oe.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,Oe){const ke=getCacheKey$1(e,t,Oe);return ke in this.cache_?this.cache_[ke]:null}getPattern(e,t,Oe){const ke=getCacheKey$1(e,t,Oe);return ke in this.patternCache_?this.patternCache_[ke]:null}set(e,t,Oe,ke,Be){const Ue=getCacheKey$1(e,t,Oe),He=Ue in this.cache_;this.cache_[Ue]=ke,Be&&(ke.getImageState()===ImageState.IDLE&&ke.load(),ke.getImageState()===ImageState.LOADING?ke.ready().then(()=>{this.patternCache_[Ue]=getSharedCanvasContext2D().createPattern(ke.getImage(1),"repeat")}):this.patternCache_[Ue]=getSharedCanvasContext2D().createPattern(ke.getImage(1),"repeat")),He||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(Te,e,t){const Oe=t?asArray(t):"null";return e+":"+Te+":"+Oe}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,t,Oe,ke,Be){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=Oe,this.canvas_={},this.color_=Be,this.imageState_=ke===void 0?ImageState.IDLE:ke,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],Oe=createCanvasContext2D(e,t);Oe.fillRect(0,0,e,t),this.hitDetectionImage_=Oe.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,Oe=createCanvasContext2D(Math.ceil(t.width*e),Math.ceil(t.height*e)),ke=Oe.canvas;Oe.scale(e,e),Oe.drawImage(t,0,0),Oe.globalCompositeOperation="multiply",Oe.fillStyle=asString(this.color_),Oe.fillRect(0,0,ke.width/e,ke.height/e),Oe.globalCompositeOperation="destination-in",Oe.drawImage(t,0,0),this.canvas_[e]=ke}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const t=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,t),e())};this.addEventListener(EventType.CHANGE,t)}})),this.ready_}}function get$2(Te,e,t,Oe,ke,Be){let Ue=e===void 0?void 0:shared.get(e,t,ke);return Ue||(Ue=new IconImage(Te,Te&&"src"in Te?Te.src||void 0:e,t,Oe,ke),shared.set(e,t,ke,Ue,Be)),Be&&Ue&&!shared.getPattern(e,t,ke)&&shared.set(e,t,ke,Ue,Be),Ue}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}function asColorLike(Te){return Te?Array.isArray(Te)?toString$2(Te):typeof Te=="object"&&"src"in Te?asCanvasPattern(Te):Te:null}function asCanvasPattern(Te){if(!Te.offset||!Te.size)return shared.getPattern(Te.src,"anonymous",Te.color);const e=Te.src+":"+Te.offset,t=shared.getPattern(e,void 0,Te.color);if(t)return t;const Oe=shared.get(Te.src,"anonymous",null);if(Oe.getImageState()!==ImageState.LOADED)return null;const ke=createCanvasContext2D(Te.size[0],Te.size[1]);return ke.drawImage(Oe.getImage(1),Te.offset[0],Te.offset[1],Te.size[0],Te.size[1],0,0,Te.size[0],Te.size[1]),get$2(ke.canvas,e,void 0,ImageState.LOADED,Te.color,!0),shared.getPattern(e,void 0,Te.color)}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],Oe=t.length,ke="wmytzilWMYTZIL@#/&?$%10";let Be,Ue;function He(Cn,An,En){let Sn=!0;for(let Tn=0;Tn<Oe;++Tn){const Ln=t[Tn];if(Ue=measureTextWidth(Cn+" "+An+" "+e+Ln,ke),En!=Ln){const Bn=measureTextWidth(Cn+" "+An+" "+e+En+","+Ln,ke);Sn=Sn&&Bn!=Ue}}return!!Sn}function We(){let Cn=!0;const An=checkedFonts.getKeys();for(let En=0,Sn=An.length;En<Sn;++En){const Tn=An[En];if(checkedFonts.get(Tn)<100){const[Ln,Bn,ti]=Tn.split(`
`);He(Ln,Bn,ti)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(Tn,100)):(checkedFonts.set(Tn,checkedFonts.get(Tn)+1,!0),Cn=!1)}}Cn&&(clearInterval(Be),Be=void 0)}return function(Cn){const An=getFontParameters(Cn);if(!An)return;const En=An.families;for(let Sn=0,Tn=En.length;Sn<Tn;++Sn){const Ln=En[Sn],Bn=An.style+`
`+An.weight+`
`+Ln;checkedFonts.get(Bn)===void 0&&(checkedFonts.set(Bn,100,!0),He(An.style,An.weight,Ln)||(checkedFonts.set(Bn,0,!0),Be===void 0&&(Be=setInterval(We,32))))}}}(),measureTextHeight=function(){let Te;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const Oe=getFontParameters(e),ke=measureText$1(e,"Žg");t=(isNaN(Number(Oe.lineHeight))?1.2:Number(Oe.lineHeight))*(ke.actualBoundingBoxAscent+ke.actualBoundingBoxDescent)}else Te||(Te=document.createElement("div"),Te.innerHTML="M",Te.style.minHeight="0",Te.style.maxHeight="none",Te.style.height="auto",Te.style.padding="0",Te.style.border="none",Te.style.position="absolute",Te.style.display="block",Te.style.left="-99999px"),Te.style.font=e,document.body.appendChild(Te),t=Te.offsetHeight,document.body.removeChild(Te);textHeights[e]=t}return t}}();function measureText$1(Te,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),Te!=measureFont&&(measureContext$1.font=Te,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(Te,e){return measureText$1(Te,e).width}function measureAndCacheTextWidth(Te,e,t){if(e in t)return t[e];const Oe=e.split(`
`).reduce((ke,Be)=>Math.max(ke,measureTextWidth(Te,Be)),0);return t[e]=Oe,Oe}function getTextDimensions(Te,e){const t=[],Oe=[],ke=[];let Be=0,Ue=0,He=0,We=0;for(let Cn=0,An=e.length;Cn<=An;Cn+=2){const En=e[Cn];if(En===`
`||Cn===An){Be=Math.max(Be,Ue),ke.push(Ue),Ue=0,He+=We,We=0;continue}const Sn=e[Cn+1]||Te.font,Tn=measureTextWidth(Sn,En);t.push(Tn),Ue+=Tn;const Ln=measureTextHeight(Sn);Oe.push(Ln),We=Math.max(We,Ln)}return{width:Be,height:He,widths:t,heights:Oe,lineWidths:ke}}function drawImageOrLabel(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An){Te.save(),t!==1&&(Te.globalAlpha===void 0?Te.globalAlpha=En=>En.globalAlpha*=t:Te.globalAlpha*=t),e&&Te.transform.apply(Te,e),Oe.contextInstructions?(Te.translate(We,Cn),Te.scale(An[0],An[1]),executeLabelInstructions(Oe,Te)):An[0]<0||An[1]<0?(Te.translate(We,Cn),Te.scale(An[0],An[1]),Te.drawImage(Oe,ke,Be,Ue,He,0,0,Ue,He)):Te.drawImage(Oe,ke,Be,Ue,He,We,Cn,Ue*An[0],He*An[1]),Te.restore()}function executeLabelInstructions(Te,e){const t=Te.contextInstructions;for(let Oe=0,ke=t.length;Oe<ke;Oe+=2)Array.isArray(t[Oe+1])?e[t[Oe]].apply(e,t[Oe+1]):e[t[Oe]]=t[Oe+1]}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]/2-t[0]/Oe[0],e[1]/2+t[1]/Oe[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var Be,Ue;const t=(Be=this.fill_)==null?void 0:Be.getKey(),Oe=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let ke=(Ue=shared.get(Oe,null,null))==null?void 0:Ue.getImage(1);if(!ke){const He=this.renderOptions_,We=Math.ceil(He.size*e),Cn=createCanvasContext2D(We,We);this.draw_(He,Cn,e),ke=Cn.canvas,shared.set(Oe,null,null,new IconImage(ke,void 0,null,ImageState.LOADED,null))}return ke}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,Oe){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let ke=this.radius,Be=this.radius2_===void 0?ke:this.radius2_;if(ke<Be){const vi=ke;ke=Be,Be=vi}const Ue=this.radius2_===void 0?this.points_:this.points_*2,He=2*Math.PI/Ue,We=Be*Math.sin(He),Cn=Math.sqrt(Be*Be-We*We),An=ke-Cn,En=Math.sqrt(We*We+An*An),Sn=En/We;if(e==="miter"&&Sn<=Oe)return Sn*t;const Tn=t/2/Sn,Ln=t/2*(An/En),ti=Math.sqrt((ke+Tn)*(ke+Tn)+Ln*Ln)-ke;if(this.radius2_===void 0||e==="bevel")return ti*2;const ni=ke*Math.sin(He),ii=Math.sqrt(ke*ke-ni*ni),si=Be-ii,ci=Math.sqrt(ni*ni+si*si)/ni;if(ci<=Oe){const vi=ci*t/2-Be-ke;return 2*Math.max(ti,vi)}return ti*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,Oe=0,ke=null,Be=0,Ue,He=0;this.stroke_&&(Ue=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),He=this.stroke_.getWidth()??defaultLineWidth,ke=this.stroke_.getLineDash(),Be=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,Oe=this.stroke_.getMiterLimit()??defaultMiterLimit);const We=this.calculateLineJoinSize_(t,He,Oe),Cn=Math.max(this.radius,this.radius2_||0),An=Math.ceil(2*Cn+We);return{strokeStyle:Ue,strokeWidth:He,size:An,lineCap:e,lineDash:ke,lineDashOffset:Be,lineJoin:t,miterLimit:Oe}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,Oe){if(t.scale(Oe,Oe),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let ke=this.fill_.getColor();ke===null&&(ke=defaultFillStyle),t.fillStyle=asColorLike(ke),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let Oe=this.fill_.getColor(),ke=0;typeof Oe=="string"&&(Oe=asArray(Oe)),Oe===null?ke=1:Array.isArray(Oe)&&(ke=Oe.length===4?Oe[3]:1),ke===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const Oe=this.radius;if(t===1/0)e.arc(0,0,Oe,0,2*Math.PI);else{const ke=this.radius2_===void 0?Oe:this.radius2_;this.radius2_!==void 0&&(t*=2);const Be=this.angle_-Math.PI/2,Ue=2*Math.PI/t;for(let He=0;He<t;He++){const We=Be+He*Ue,Cn=He%2===0?Oe:ke;e.lineTo(Cn*Math.cos(We),Cn*Math.sin(We))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ImageState.IDLE&&t.load(),t.getImageState()===ImageState.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Ff{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ff({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(Te){let e;if(typeof Te=="function")e=Te;else{let t;Array.isArray(Te)?t=Te:(assert(typeof Te.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[Te]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(Te,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),Oe=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:t,stroke:Oe,radius:5}),fill:t,stroke:Oe})]}return defaultStyles}function createEditingStyle(){const Te={},e=[255,255,255,1],t=[0,153,255,1],Oe=3;return Te.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],Te.MultiPolygon=Te.Polygon,Te.LineString=[new Style$1({stroke:new Stroke({color:e,width:Oe+2})}),new Style$1({stroke:new Stroke({color:t,width:Oe})})],Te.MultiLineString=Te.LineString,Te.Circle=Te.Polygon.concat(Te.LineString),Te.Point=[new Style$1({image:new CircleStyle({radius:Oe*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:Oe/2})}),zIndex:1/0})],Te.MultiPoint=Te.Point,Te.GeometryCollection=Te.Polygon.concat(Te.LineString,Te.Point),Te}function defaultGeometryFunction(Te){return Te.getGeometry()}function calculateScale(Te,e,t,Oe){return t!==void 0&&Oe!==void 0?[t/Te,Oe/e]:t!==void 0?t/Te:Oe!==void 0?Oe/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,Oe=e.rotation!==void 0?e.rotation:0,ke=e.scale!==void 0?e.scale:1,Be=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:Oe,scale:ke,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Be,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const Ue=e.img!==void 0?e.img:null;let He=e.src;assert(!(He!==void 0&&Ue),"`image` and `src` cannot be provided at the same time"),(He===void 0||He.length===0)&&Ue&&(He=Ue.src||getUid(Ue)),assert(He!==void 0&&He.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let We;if(e.src!==void 0?We=ImageState.IDLE:Ue!==void 0&&("complete"in Ue?Ue.complete?We=Ue.src?ImageState.LOADED:ImageState.IDLE:We=ImageState.LOADING:We=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(Ue,He,this.crossOrigin_,We,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let Cn,An;if(e.size)[Cn,An]=e.size;else{const En=this.getImage(1);if(En.width&&En.height)Cn=En.width,An=En.height;else if(En instanceof HTMLImageElement){this.initialOptions_=e;const Sn=()=>{if(this.unlistenImageChange(Sn),!this.initialOptions_)return;const Tn=this.iconImage_.getSize();this.setScale(calculateScale(Tn[0],Tn[1],e.width,e.height))};this.listenImageChange(Sn);return}}Cn!==void 0&&this.setScale(calculateScale(Cn,An,e.width,e.height))}}clone(){let e,t,Oe;return this.initialOptions_?(t=this.initialOptions_.width,Oe=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:Oe,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const ke=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!ke)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=ke[0]),this.anchorYUnits_=="fraction"&&(e[1]*=ke[1])}if(this.anchorOrigin_!="top-left"){if(!ke)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+ke[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+ke[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]-t[0]/Oe[0],e[1]+t[1]/Oe[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),Oe=this.iconImage_.getSize();if(!t||!Oe)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=Oe[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=Oe[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(Te){return Te in typeNames}function typeName(Te){const e=[];for(const t of namedTypes)includesType(Te,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(Te,e){return(Te&e)===e}function isType(Te,e){return Te===e}class LiteralExpression{constructor(e,t){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=t}}class CallExpression{constructor(e,t,...Oe){this.type=e,this.operator=t,this.args=Oe}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function parse$2(Te,e,t){switch(typeof Te){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Te?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,Te)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(Te));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Te);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Te.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,Te)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(Te));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Te);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,Te)}}if(!Array.isArray(Te))throw new Error("expression must be an array or a primitive value");if(Te.length===0)throw new Error("empty expression");if(typeof Te[0]=="string")return parseCallExpression(Te,e,t);for(const Oe of Te)if(typeof Oe!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(Te.length!==2)throw new Error(`expected an array of two values for a size, got ${Te.length}`);return new LiteralExpression(SizeType,Te)}if(isType(e,ColorType$1)){if(Te.length===3)return new LiteralExpression(ColorType$1,[...Te,1]);if(Te.length===4)return new LiteralExpression(ColorType$1,Te);throw new Error(`expected an array of 3 or 4 values for a color, got ${Te.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,Te)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(withNoArgs),[Ops.Zoom]:createCallExpressionParser(withNoArgs),[Ops.Time]:createCallExpressionParser(withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(Te,e,t){const Oe=Te.length-1,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be){const Ue=Te[Be+1];switch(typeof Ue){case"number":{ke[Be]=new LiteralExpression(NumberType$1,Ue);break}case"string":{ke[Be]=new LiteralExpression(StringType$1,Ue);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${Ue}`)}Be===0&&t.properties.add(String(Ue))}return ke}function withVarArgs(Te,e,t){const Oe=Te[1];if(typeof Oe!="string")throw new Error("expected a string argument for var operation");return t.variables.add(Oe),[new LiteralExpression(StringType$1,Oe)]}function usesFeatureId(Te,e,t){t.featureId=!0}function usesGeometryType(Te,e,t){t.geometryType=!0}function withNoArgs(Te,e,t){const Oe=Te[0];if(Te.length!==1)throw new Error(`expected no arguments for ${Oe} operation`);return[]}function hasArgsCount(Te,e){return function(t,Oe,ke){const Be=t[0],Ue=t.length-1;if(Te===e){if(Ue!==Te){const He=Te===1?"":"s";throw new Error(`expected ${Te} argument${He} for ${Be}, got ${Ue}`)}}else if(Ue<Te||Ue>e){const He=e===1/0?`${Te} or more`:`${Te} to ${e}`;throw new Error(`expected ${He} arguments for ${Be}, got ${Ue}`)}}}function withArgsOfReturnType(Te,e,t){const Oe=Te.length-1,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be){const Ue=parse$2(Te[Be+1],e,t);ke[Be]=Ue}return ke}function withArgsOfType(Te){return function(e,t,Oe){const ke=e.length-1,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue){const He=parse$2(e[Ue+1],Te,Oe);Be[Ue]=He}return Be}}function hasOddArgs(Te,e,t){const Oe=Te[0],ke=Te.length-1;if(ke%2===0)throw new Error(`expected an odd number of arguments for ${Oe}, got ${ke} instead`)}function hasEvenArgs(Te,e,t){const Oe=Te[0],ke=Te.length-1;if(ke%2===1)throw new Error(`expected an even number of arguments for operation ${Oe}, got ${ke} instead`)}function withMatchArgs(Te,e,t){const Oe=Te.length-1,ke=StringType$1|NumberType$1|BooleanType$1,Be=parse$2(Te[1],ke,t),Ue=parse$2(Te[Te.length-1],e,t),He=new Array(Oe-2);for(let We=0;We<Oe-2;We+=2){try{const Cn=parse$2(Te[We+2],Be.type,t);He[We]=Cn}catch(Cn){throw new Error(`failed to parse argument ${We+1} of match expression: ${Cn.message}`)}try{const Cn=parse$2(Te[We+3],Ue.type,t);He[We+1]=Cn}catch(Cn){throw new Error(`failed to parse argument ${We+2} of match expression: ${Cn.message}`)}}return[Be,...He,Ue]}function withInterpolateArgs(Te,e,t){const Oe=Te[1];let ke;switch(Oe[0]){case"linear":ke=1;break;case"exponential":const We=Oe[1];if(typeof We!="number"||We<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(We)} instead`);ke=We;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(Oe)}`)}const Be=new LiteralExpression(NumberType$1,ke);let Ue;try{Ue=parse$2(Te[2],NumberType$1,t)}catch(We){throw new Error(`failed to parse argument 1 in interpolate expression: ${We.message}`)}const He=new Array(Te.length-3);for(let We=0;We<He.length;We+=2){try{const Cn=parse$2(Te[We+3],NumberType$1,t);He[We]=Cn}catch(Cn){throw new Error(`failed to parse argument ${We+2} for interpolate expression: ${Cn.message}`)}try{const Cn=parse$2(Te[We+4],e,t);He[We+1]=Cn}catch(Cn){throw new Error(`failed to parse argument ${We+3} for interpolate expression: ${Cn.message}`)}}return[Be,Ue,...He]}function withCaseArgs(Te,e,t){const Oe=parse$2(Te[Te.length-1],e,t),ke=new Array(Te.length-1);for(let Be=0;Be<ke.length-1;Be+=2){try{const Ue=parse$2(Te[Be+1],BooleanType$1,t);ke[Be]=Ue}catch(Ue){throw new Error(`failed to parse argument ${Be} of case expression: ${Ue.message}`)}try{const Ue=parse$2(Te[Be+2],Oe.type,t);ke[Be+1]=Ue}catch(Ue){throw new Error(`failed to parse argument ${Be+1} of case expression: ${Ue.message}`)}}return ke[ke.length-1]=Oe,ke}function withInArgs(Te,e,t){let Oe=Te[2];if(!Array.isArray(Oe))throw new Error('the second argument for the "in" operator must be an array');let ke;if(typeof Oe[0]=="string"){if(Oe[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(Oe[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');Oe=Oe[1],ke=StringType$1}else ke=NumberType$1;const Be=new Array(Oe.length);for(let He=0;He<Be.length;He++)try{const We=parse$2(Oe[He],ke,t);Be[He]=We}catch(We){throw new Error(`failed to parse haystack item ${He} for "in" expression: ${We.message}`)}return[parse$2(Te[1],ke,t),...Be]}function withPaletteArgs(Te,e,t){let Oe;try{Oe=parse$2(Te[1],NumberType$1,t)}catch(Ue){throw new Error(`failed to parse first argument in palette expression: ${Ue.message}`)}const ke=Te[2];if(!Array.isArray(ke))throw new Error("the second argument of palette must be an array");const Be=new Array(ke.length);for(let Ue=0;Ue<Be.length;Ue++){let He;try{He=parse$2(ke[Ue],ColorType$1,t)}catch(We){throw new Error(`failed to parse color at index ${Ue} in palette expression: ${We.message}`)}if(!(He instanceof LiteralExpression))throw new Error(`the palette color at index ${Ue} must be a literal value`);Be[Ue]=He}return[Oe,...Be]}function createCallExpressionParser(...Te){return function(e,t,Oe){const ke=e[0];let Be;for(let Ue=0;Ue<Te.length;Ue++){const He=Te[Ue](e,t,Oe);if(Ue==Te.length-1){if(!He)throw new Error("expected last argument validator to return the parsed args");Be=He}}return new CallExpression(t,ke,...Be)}}function parseCallExpression(Te,e,t){const Oe=Te[0],ke=parsers[Oe];if(!ke)throw new Error(`unknown operator: ${Oe}`);return ke(Te,e,t)}function computeGeometryType(Te){if(!Te)return"";const e=Te.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(Te.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(Te,e,t){const Oe=parse$2(Te,e,t);return compileExpression(Oe)}function compileExpression(Te,e){if(Te instanceof LiteralExpression){if(Te.type===ColorType$1&&typeof Te.value=="string"){const Oe=fromString(Te.value);return function(){return Oe}}return function(){return Te.value}}const t=Te.operator;switch(t){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(Te);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(Te);case Ops.Id:return Oe=>Oe.featureId;case Ops.GeometryType:return Oe=>Oe.geometryType;case Ops.Concat:{const Oe=Te.args.map(ke=>compileExpression(ke));return ke=>"".concat(...Oe.map(Be=>Be(ke).toString()))}case Ops.Resolution:return Oe=>Oe.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(Te);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(Te);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(Te);case Ops.Case:return compileCaseExpression(Te);case Ops.Match:return compileMatchExpression(Te);case Ops.Interpolate:return compileInterpolateExpression(Te);case Ops.ToString:return compileConvertExpression(Te);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(Te,e){const t=Te.operator,Oe=Te.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Te.args[Be]);switch(t){case Ops.Coalesce:return Be=>{for(let Ue=0;Ue<Oe;++Ue){const He=ke[Ue](Be);if(typeof He<"u"&&He!==null)return He}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return Be=>{for(let Ue=0;Ue<Oe;++Ue){const He=ke[Ue](Be);if(typeof He===t)return He}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(Te,e){const Oe=Te.args[0].value;switch(Te.operator){case Ops.Get:return ke=>{const Be=Te.args;let Ue=ke.properties[Oe];for(let He=1,We=Be.length;He<We;++He){const An=Be[He].value;Ue=Ue[An]}return Ue};case Ops.Var:return ke=>ke.variables[Oe];case Ops.Has:return ke=>{const Be=Te.args;if(!(Oe in ke.properties))return!1;let Ue=ke.properties[Oe];for(let He=1,We=Be.length;He<We;++He){const An=Be[He].value;if(!Ue||!Object.hasOwn(Ue,An))return!1;Ue=Ue[An]}return!0};default:throw new Error(`Unsupported accessor operator ${Te.operator}`)}}function compileComparisonExpression(Te,e){const t=Te.operator,Oe=compileExpression(Te.args[0]),ke=compileExpression(Te.args[1]);switch(t){case Ops.Equal:return Be=>Oe(Be)===ke(Be);case Ops.NotEqual:return Be=>Oe(Be)!==ke(Be);case Ops.LessThan:return Be=>Oe(Be)<ke(Be);case Ops.LessThanOrEqualTo:return Be=>Oe(Be)<=ke(Be);case Ops.GreaterThan:return Be=>Oe(Be)>ke(Be);case Ops.GreaterThanOrEqualTo:return Be=>Oe(Be)>=ke(Be);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(Te,e){const t=Te.operator,Oe=Te.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Te.args[Be]);switch(t){case Ops.Any:return Be=>{for(let Ue=0;Ue<Oe;++Ue)if(ke[Ue](Be))return!0;return!1};case Ops.All:return Be=>{for(let Ue=0;Ue<Oe;++Ue)if(!ke[Ue](Be))return!1;return!0};case Ops.Between:return Be=>{const Ue=ke[0](Be),He=ke[1](Be),We=ke[2](Be);return Ue>=He&&Ue<=We};case Ops.In:return Be=>{const Ue=ke[0](Be);for(let He=1;He<Oe;++He)if(Ue===ke[He](Be))return!0;return!1};case Ops.Not:return Be=>!ke[0](Be);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(Te,e){const t=Te.operator,Oe=Te.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Te.args[Be]);switch(t){case Ops.Multiply:return Be=>{let Ue=1;for(let He=0;He<Oe;++He)Ue*=ke[He](Be);return Ue};case Ops.Divide:return Be=>ke[0](Be)/ke[1](Be);case Ops.Add:return Be=>{let Ue=0;for(let He=0;He<Oe;++He)Ue+=ke[He](Be);return Ue};case Ops.Subtract:return Be=>ke[0](Be)-ke[1](Be);case Ops.Clamp:return Be=>{const Ue=ke[0](Be),He=ke[1](Be);if(Ue<He)return He;const We=ke[2](Be);return Ue>We?We:Ue};case Ops.Mod:return Be=>ke[0](Be)%ke[1](Be);case Ops.Pow:return Be=>Math.pow(ke[0](Be),ke[1](Be));case Ops.Abs:return Be=>Math.abs(ke[0](Be));case Ops.Floor:return Be=>Math.floor(ke[0](Be));case Ops.Ceil:return Be=>Math.ceil(ke[0](Be));case Ops.Round:return Be=>Math.round(ke[0](Be));case Ops.Sin:return Be=>Math.sin(ke[0](Be));case Ops.Cos:return Be=>Math.cos(ke[0](Be));case Ops.Atan:return Oe===2?Be=>Math.atan2(ke[0](Be),ke[1](Be)):Be=>Math.atan(ke[0](Be));case Ops.Sqrt:return Be=>Math.sqrt(ke[0](Be));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileCaseExpression(Te,e){const t=Te.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Te.args[ke]);return ke=>{for(let Be=0;Be<t-1;Be+=2)if(Oe[Be](ke))return Oe[Be+1](ke);return Oe[t-1](ke)}}function compileMatchExpression(Te,e){const t=Te.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Te.args[ke]);return ke=>{const Be=Oe[0](ke);for(let Ue=1;Ue<t;Ue+=2)if(Be===Oe[Ue](ke))return Oe[Ue+1](ke);return Oe[t-1](ke)}}function compileInterpolateExpression(Te,e){const t=Te.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Te.args[ke]);return ke=>{const Be=Oe[0](ke),Ue=Oe[1](ke);let He,We;for(let Cn=2;Cn<t;Cn+=2){const An=Oe[Cn](ke);let En=Oe[Cn+1](ke);const Sn=Array.isArray(En);if(Sn&&(En=withAlpha(En)),An>=Ue)return Cn===2?En:Sn?interpolateColor(Be,Ue,He,We,An,En):interpolateNumber(Be,Ue,He,We,An,En);He=An,We=En}return We}}function compileConvertExpression(Te,e){const t=Te.operator,Oe=Te.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Te.args[Be]);switch(t){case Ops.ToString:return Be=>{const Ue=ke[0](Be);return Te.args[0].type===ColorType$1?toString$2(Ue):Ue.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function interpolateNumber(Te,e,t,Oe,ke,Be){const Ue=ke-t;if(Ue===0)return Oe;const He=e-t,We=Te===1?He/Ue:(Math.pow(Te,He)-1)/(Math.pow(Te,Ue)-1);return Oe+We*(Be-Oe)}function interpolateColor(Te,e,t,Oe,ke,Be){if(ke-t===0)return Oe;const He=rgbaToLcha(Oe),We=rgbaToLcha(Be);let Cn=We[2]-He[2];Cn>180?Cn-=360:Cn<-180&&(Cn+=360);const An=[interpolateNumber(Te,e,t,He[0],ke,We[0]),interpolateNumber(Te,e,t,He[1],ke,We[1]),He[2]+interpolateNumber(Te,e,t,0,ke,Cn),interpolateNumber(Te,e,t,Oe[3],ke,Be[3])];return normalize(lchaToRgba(An))}function always(Te){return!0}function rulesToStyleFunction(Te){const e=newParsingContext(),t=buildRuleSet(Te,e),Oe=newEvaluationContext();return function(ke,Be){if(Oe.properties=ke.getPropertiesInternal(),Oe.resolution=Be,e.featureId){const Ue=ke.getId();Ue!==void 0?Oe.featureId=Ue:Oe.featureId=null}return e.geometryType&&(Oe.geometryType=computeGeometryType(ke.getGeometry())),t(Oe)}}function flatStylesToStyleFunction(Te){const e=newParsingContext(),t=Te.length,Oe=new Array(t);for(let Ue=0;Ue<t;++Ue)Oe[Ue]=buildStyle(Te[Ue],e);const ke=newEvaluationContext(),Be=new Array(t);return function(Ue,He){if(ke.properties=Ue.getPropertiesInternal(),ke.resolution=He,e.featureId){const Cn=Ue.getId();Cn!==void 0?ke.featureId=Cn:ke.featureId=null}let We=0;for(let Cn=0;Cn<t;++Cn){const An=Oe[Cn](ke);An&&(Be[We]=An,We+=1)}return Be.length=We,Be}}function buildRuleSet(Te,e){const t=Te.length,Oe=new Array(t);for(let ke=0;ke<t;++ke){const Be=Te[ke],Ue="filter"in Be?buildExpression(Be.filter,BooleanType$1,e):always;let He;if(Array.isArray(Be.style)){const We=Be.style.length;He=new Array(We);for(let Cn=0;Cn<We;++Cn)He[Cn]=buildStyle(Be.style[Cn],e)}else He=[buildStyle(Be.style,e)];Oe[ke]={filter:Ue,styles:He}}return function(ke){const Be=[];let Ue=!1;for(let He=0;He<t;++He){const We=Oe[He].filter;if(We(ke)&&!(Te[He].else&&Ue)){Ue=!0;for(const Cn of Oe[He].styles){const An=Cn(ke);An&&Be.push(An)}}}return Be}}function buildStyle(Te,e){const t=buildFill(Te,"",e),Oe=buildStroke(Te,"",e),ke=buildText(Te,e),Be=buildImage(Te,e),Ue=numberEvaluator(Te,"z-index",e);if(!t&&!Oe&&!ke&&!Be&&!isEmpty$1(Te))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(Te));const He=new Style$1;return function(We){let Cn=!0;if(t){const An=t(We);An&&(Cn=!1),He.setFill(An)}if(Oe){const An=Oe(We);An&&(Cn=!1),He.setStroke(An)}if(ke){const An=ke(We);An&&(Cn=!1),He.setText(An)}if(Be){const An=Be(We);An&&(Cn=!1),He.setImage(An)}return Ue&&He.setZIndex(Ue(We)),Cn?null:He}}function buildFill(Te,e,t){let Oe;if(e+"fill-pattern-src"in Te)Oe=patternEvaluator(Te,e+"fill-",t);else{if(Te[e+"fill-color"]==="none")return Be=>null;Oe=colorLikeEvaluator(Te,e+"fill-color",t)}if(!Oe)return null;const ke=new Fill;return function(Be){const Ue=Oe(Be);return Ue===NO_COLOR?null:(ke.setColor(Ue),ke)}}function buildStroke(Te,e,t){const Oe=numberEvaluator(Te,e+"stroke-width",t),ke=colorLikeEvaluator(Te,e+"stroke-color",t);if(!Oe&&!ke)return null;const Be=stringEvaluator(Te,e+"stroke-line-cap",t),Ue=stringEvaluator(Te,e+"stroke-line-join",t),He=numberArrayEvaluator(Te,e+"stroke-line-dash",t),We=numberEvaluator(Te,e+"stroke-line-dash-offset",t),Cn=numberEvaluator(Te,e+"stroke-miter-limit",t),An=new Stroke;return function(En){if(ke){const Sn=ke(En);if(Sn===NO_COLOR)return null;An.setColor(Sn)}if(Oe&&An.setWidth(Oe(En)),Be){const Sn=Be(En);if(Sn!=="butt"&&Sn!=="round"&&Sn!=="square")throw new Error("Expected butt, round, or square line cap");An.setLineCap(Sn)}if(Ue){const Sn=Ue(En);if(Sn!=="bevel"&&Sn!=="round"&&Sn!=="miter")throw new Error("Expected bevel, round, or miter line join");An.setLineJoin(Sn)}return He&&An.setLineDash(He(En)),We&&An.setLineDashOffset(We(En)),Cn&&An.setMiterLimit(Cn(En)),An}}function buildText(Te,e){const t="text-",Oe=stringEvaluator(Te,t+"value",e);if(!Oe)return null;const ke=buildFill(Te,t,e),Be=buildFill(Te,t+"background-",e),Ue=buildStroke(Te,t,e),He=buildStroke(Te,t+"background-",e),We=stringEvaluator(Te,t+"font",e),Cn=numberEvaluator(Te,t+"max-angle",e),An=numberEvaluator(Te,t+"offset-x",e),En=numberEvaluator(Te,t+"offset-y",e),Sn=booleanEvaluator(Te,t+"overflow",e),Tn=stringEvaluator(Te,t+"placement",e),Ln=numberEvaluator(Te,t+"repeat",e),Bn=sizeLikeEvaluator(Te,t+"scale",e),ti=booleanEvaluator(Te,t+"rotate-with-view",e),ni=numberEvaluator(Te,t+"rotation",e),ii=stringEvaluator(Te,t+"align",e),si=stringEvaluator(Te,t+"justify",e),oi=stringEvaluator(Te,t+"baseline",e),ci=booleanEvaluator(Te,t+"keep-upright",e),vi=numberArrayEvaluator(Te,t+"padding",e),pi=optionalDeclutterMode(Te,t+"declutter-mode"),fi=new Text({declutterMode:pi});return function(Mi){if(fi.setText(Oe(Mi)),ke&&fi.setFill(ke(Mi)),Be&&fi.setBackgroundFill(Be(Mi)),Ue&&fi.setStroke(Ue(Mi)),He&&fi.setBackgroundStroke(He(Mi)),We&&fi.setFont(We(Mi)),Cn&&fi.setMaxAngle(Cn(Mi)),An&&fi.setOffsetX(An(Mi)),En&&fi.setOffsetY(En(Mi)),Sn&&fi.setOverflow(Sn(Mi)),Tn){const Oi=Tn(Mi);if(Oi!=="point"&&Oi!=="line")throw new Error("Expected point or line for text-placement");fi.setPlacement(Oi)}if(Ln&&fi.setRepeat(Ln(Mi)),Bn&&fi.setScale(Bn(Mi)),ti&&fi.setRotateWithView(ti(Mi)),ni&&fi.setRotation(ni(Mi)),ii){const Oi=ii(Mi);if(Oi!=="left"&&Oi!=="center"&&Oi!=="right"&&Oi!=="end"&&Oi!=="start")throw new Error("Expected left, right, center, start, or end for text-align");fi.setTextAlign(Oi)}if(si){const Oi=si(Mi);if(Oi!=="left"&&Oi!=="right"&&Oi!=="center")throw new Error("Expected left, right, or center for text-justify");fi.setJustify(Oi)}if(oi){const Oi=oi(Mi);if(Oi!=="bottom"&&Oi!=="top"&&Oi!=="middle"&&Oi!=="alphabetic"&&Oi!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");fi.setTextBaseline(Oi)}return vi&&fi.setPadding(vi(Mi)),ci&&fi.setKeepUpright(ci(Mi)),fi}}function buildImage(Te,e){return"icon-src"in Te?buildIcon(Te,e):"shape-points"in Te?buildShape(Te,e):"circle-radius"in Te?buildCircle(Te,e):null}function buildIcon(Te,e){const t="icon-",Oe=t+"src",ke=requireString(Te[Oe],Oe),Be=coordinateEvaluator(Te,t+"anchor",e),Ue=sizeLikeEvaluator(Te,t+"scale",e),He=numberEvaluator(Te,t+"opacity",e),We=coordinateEvaluator(Te,t+"displacement",e),Cn=numberEvaluator(Te,t+"rotation",e),An=booleanEvaluator(Te,t+"rotate-with-view",e),En=optionalIconOrigin(Te,t+"anchor-origin"),Sn=optionalIconAnchorUnits(Te,t+"anchor-x-units"),Tn=optionalIconAnchorUnits(Te,t+"anchor-y-units"),Ln=optionalColorLike(Te,t+"color"),Bn=optionalString(Te,t+"cross-origin"),ti=optionalNumberArray(Te,t+"offset"),ni=optionalIconOrigin(Te,t+"offset-origin"),ii=optionalNumber(Te,t+"width"),si=optionalNumber(Te,t+"height"),oi=optionalSize(Te,t+"size"),ci=optionalDeclutterMode(Te,t+"declutter-mode"),vi=new Icon({src:ke,anchorOrigin:En,anchorXUnits:Sn,anchorYUnits:Tn,color:Ln,crossOrigin:Bn,offset:ti,offsetOrigin:ni,height:si,width:ii,size:oi,declutterMode:ci});return function(pi){return He&&vi.setOpacity(He(pi)),We&&vi.setDisplacement(We(pi)),Cn&&vi.setRotation(Cn(pi)),An&&vi.setRotateWithView(An(pi)),Ue&&vi.setScale(Ue(pi)),Be&&vi.setAnchor(Be(pi)),vi}}function buildShape(Te,e){const t="shape-",Oe=t+"points",ke=t+"radius",Be=requireNumber(Te[Oe],Oe),Ue=requireNumber(Te[ke],ke),He=buildFill(Te,t,e),We=buildStroke(Te,t,e),Cn=sizeLikeEvaluator(Te,t+"scale",e),An=coordinateEvaluator(Te,t+"displacement",e),En=numberEvaluator(Te,t+"rotation",e),Sn=booleanEvaluator(Te,t+"rotate-with-view",e),Tn=optionalNumber(Te,t+"radius2"),Ln=optionalNumber(Te,t+"angle"),Bn=optionalDeclutterMode(Te,t+"declutter-mode"),ti=new RegularShape({points:Be,radius:Ue,radius2:Tn,angle:Ln,declutterMode:Bn});return function(ni){return He&&ti.setFill(He(ni)),We&&ti.setStroke(We(ni)),An&&ti.setDisplacement(An(ni)),En&&ti.setRotation(En(ni)),Sn&&ti.setRotateWithView(Sn(ni)),Cn&&ti.setScale(Cn(ni)),ti}}function buildCircle(Te,e){const t="circle-",Oe=buildFill(Te,t,e),ke=buildStroke(Te,t,e),Be=numberEvaluator(Te,t+"radius",e),Ue=sizeLikeEvaluator(Te,t+"scale",e),He=coordinateEvaluator(Te,t+"displacement",e),We=numberEvaluator(Te,t+"rotation",e),Cn=booleanEvaluator(Te,t+"rotate-with-view",e),An=optionalDeclutterMode(Te,t+"declutter-mode"),En=new CircleStyle({radius:5,declutterMode:An});return function(Sn){return Be&&En.setRadius(Be(Sn)),Oe&&En.setFill(Oe(Sn)),ke&&En.setStroke(ke(Sn)),He&&En.setDisplacement(He(Sn)),We&&En.setRotation(We(Sn)),Cn&&En.setRotateWithView(Cn(Sn)),Ue&&En.setScale(Ue(Sn)),En}}function numberEvaluator(Te,e,t){if(!(e in Te))return;const Oe=buildExpression(Te[e],NumberType$1,t);return function(ke){return requireNumber(Oe(ke),e)}}function stringEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],StringType$1,t);return function(ke){return requireString(Oe(ke),e)}}function patternEvaluator(Te,e,t){const Oe=stringEvaluator(Te,e+"pattern-src",t),ke=sizeEvaluator(Te,e+"pattern-offset",t),Be=sizeEvaluator(Te,e+"pattern-size",t),Ue=colorLikeEvaluator(Te,e+"color",t);return function(He){return{src:Oe(He),offset:ke&&ke(He),size:Be&&Be(He),color:Ue&&Ue(He)}}}function booleanEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],BooleanType$1,t);return function(ke){const Be=Oe(ke);if(typeof Be!="boolean")throw new Error(`Expected a boolean for ${e}`);return Be}}function colorLikeEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],ColorType$1,t);return function(ke){return requireColorLike(Oe(ke),e)}}function numberArrayEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],NumberArrayType,t);return function(ke){return requireNumberArray(Oe(ke),e)}}function coordinateEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],NumberArrayType,t);return function(ke){const Be=requireNumberArray(Oe(ke),e);if(Be.length!==2)throw new Error(`Expected two numbers for ${e}`);return Be}}function sizeEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],NumberArrayType,t);return function(ke){return requireSize(Oe(ke),e)}}function sizeLikeEvaluator(Te,e,t){if(!(e in Te))return null;const Oe=buildExpression(Te[e],NumberArrayType|NumberType$1,t);return function(ke){return requireSizeLike(Oe(ke),e)}}function optionalNumber(Te,e){const t=Te[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(Te,e){const t=Te[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(Te,e){const t=Te[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(Te,e){const t=Te[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(Te,e){const t=Te[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(Te,e){const t=Te[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(Te,e){const t=Te[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(Te,e){const t=Te[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(Te,e){if(!Array.isArray(Te))throw new Error(`Expected an array for ${e}`);const t=Te.length;for(let Oe=0;Oe<t;++Oe)if(typeof Te[Oe]!="number")throw new Error(`Expected an array of numbers for ${e}`);return Te}function requireString(Te,e){if(typeof Te!="string")throw new Error(`Expected a string for ${e}`);return Te}function requireNumber(Te,e){if(typeof Te!="number")throw new Error(`Expected a number for ${e}`);return Te}function requireColorLike(Te,e){if(typeof Te=="string")return Te;const t=requireNumberArray(Te,e),Oe=t.length;if(Oe<3||Oe>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSize(Te,e){const t=requireNumberArray(Te,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function requireSizeLike(Te,e){return typeof Te=="number"?Te:requireSize(Te,e)}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const Oe=this.getDeclutter();Oe in e.declutter||(e.declutter[Oe]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const t=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(Te){if(Te===void 0)return createDefaultStyle;if(!Te)return null;if(typeof Te=="function"||Te instanceof Style$1)return Te;if(!Array.isArray(Te))return flatStylesToStyleFunction([Te]);if(Te.length===0)return[];const e=Te.length,t=Te[0];if(t instanceof Style$1){const ke=new Array(e);for(let Be=0;Be<e;++Be){const Ue=Te[Be];if(!(Ue instanceof Style$1))throw new Error("Expected a list of style instances");ke[Be]=Ue}return ke}if("style"in t){const ke=new Array(e);for(let Be=0;Be<e;++Be){const Ue=Te[Be];if(!("style"in Ue))throw new Error("Expected a list of rules with a style property");ke[Be]=Ue}return rulesToStyleFunction(ke)}return flatStylesToStyleFunction(Te)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,t,Oe,ke,Be){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,Oe){}drawFeature(e,t,Oe){}drawGeometryCollection(e,t,Oe){}drawLineString(e,t,Oe){}drawMultiLineString(e,t,Oe){}drawMultiPoint(e,t,Oe){}drawMultiPolygon(e,t,Oe){}drawPoint(e,t,Oe){}drawPolygon(e,t,Oe){}drawText(e,t,Oe){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class CanvasBuilder extends VectorContext{constructor(e,t,Oe,ke){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=ke,this.maxLineWidth=0,this.resolution=Oe,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(Oe){return Oe*t})}appendFlatPointCoordinates(e,t){const Oe=this.getBufferedMaxExtent(),ke=this.tmpCoordinate_,Be=this.coordinates;let Ue=Be.length;for(let He=0,We=e.length;He<We;He+=t)ke[0]=e[He],ke[1]=e[He+1],containsCoordinate(Oe,ke)&&(Be[Ue++]=ke[0],Be[Ue++]=ke[1]);return Ue}appendFlatLineCoordinates(e,t,Oe,ke,Be,Ue){const He=this.coordinates;let We=He.length;const Cn=this.getBufferedMaxExtent();Ue&&(t+=ke);let An=e[t],En=e[t+1];const Sn=this.tmpCoordinate_;let Tn=!0,Ln,Bn,ti;for(Ln=t+ke;Ln<Oe;Ln+=ke)Sn[0]=e[Ln],Sn[1]=e[Ln+1],ti=coordinateRelationship(Cn,Sn),ti!==Bn?(Tn&&(He[We++]=An,He[We++]=En,Tn=!1),He[We++]=Sn[0],He[We++]=Sn[1]):ti===Relationship.INTERSECTING?(He[We++]=Sn[0],He[We++]=Sn[1],Tn=!1):Tn=!0,An=Sn[0],En=Sn[1],Bn=ti;return(Be&&Tn||Ln===t+ke)&&(He[We++]=An,He[We++]=En),We}drawCustomCoordinates_(e,t,Oe,ke,Be){for(let Ue=0,He=Oe.length;Ue<He;++Ue){const We=Oe[Ue],Cn=this.appendFlatLineCoordinates(e,t,We,ke,!1,!1);Be.push(Cn),t=We}return t}drawCustom(e,t,Oe,ke,Be){this.beginGeometry(e,t,Be);const Ue=e.getType(),He=e.getStride(),We=this.coordinates.length;let Cn,An,En,Sn,Tn;switch(Ue){case"MultiPolygon":Cn=e.getOrientedFlatCoordinates(),Sn=[];const Ln=e.getEndss();Tn=0;for(let Bn=0,ti=Ln.length;Bn<ti;++Bn){const ni=[];Tn=this.drawCustomCoordinates_(Cn,Tn,Ln[Bn],He,ni),Sn.push(ni)}this.instructions.push([Instruction.CUSTOM,We,Sn,e,Oe,inflateMultiCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,Sn,e,ke||Oe,inflateMultiCoordinatesArray,Be]);break;case"Polygon":case"MultiLineString":En=[],Cn=Ue=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),Tn=this.drawCustomCoordinates_(Cn,0,e.getEnds(),He,En),this.instructions.push([Instruction.CUSTOM,We,En,e,Oe,inflateCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,En,e,ke||Oe,inflateCoordinatesArray,Be]);break;case"LineString":case"Circle":Cn=e.getFlatCoordinates(),An=this.appendFlatLineCoordinates(Cn,0,Cn.length,He,!1,!1),this.instructions.push([Instruction.CUSTOM,We,An,e,Oe,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,An,e,ke||Oe,inflateCoordinates,Be]);break;case"MultiPoint":Cn=e.getFlatCoordinates(),An=this.appendFlatPointCoordinates(Cn,He),An>We&&(this.instructions.push([Instruction.CUSTOM,We,An,e,Oe,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,An,e,ke||Oe,inflateCoordinates,Be]));break;case"Point":Cn=e.getFlatCoordinates(),this.coordinates.push(Cn[0],Cn[1]),An=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,We,An,e,Oe,void 0,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,An,e,ke||Oe,void 0,Be]);break}this.endGeometry(t)}beginGeometry(e,t,Oe){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e,Oe],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e,Oe],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const Oe=e.length;let ke,Be,Ue=-1;for(t=0;t<Oe;++t)ke=e[t],Be=ke[0],Be==Instruction.END_GEOMETRY?Ue=t:Be==Instruction.BEGIN_GEOMETRY&&(ke[2]=t,reverseSubArray(this.hitDetectionInstructions,Ue,t),Ue=-1)}setFillStrokeStyle(e,t){const Oe=this.state;if(e){const ke=e.getColor();Oe.fillPatternScale=ke&&typeof ke=="object"&&"src"in ke?this.pixelRatio:1,Oe.fillStyle=asColorLike(ke||defaultFillStyle)}else Oe.fillStyle=void 0;if(t){const ke=t.getColor();Oe.strokeStyle=asColorLike(ke||defaultStrokeStyle);const Be=t.getLineCap();Oe.lineCap=Be!==void 0?Be:defaultLineCap;const Ue=t.getLineDash();Oe.lineDash=Ue?Ue.slice():defaultLineDash;const He=t.getLineDashOffset();Oe.lineDashOffset=He||defaultLineDashOffset;const We=t.getLineJoin();Oe.lineJoin=We!==void 0?We:defaultLineJoin;const Cn=t.getWidth();Oe.lineWidth=Cn!==void 0?Cn:defaultLineWidth;const An=t.getMiterLimit();Oe.miterLimit=An!==void 0?An:defaultMiterLimit,Oe.lineWidth>this.maxLineWidth&&(this.maxLineWidth=Oe.lineWidth,this.bufferedMaxExtent_=null)}else Oe.strokeStyle=void 0,Oe.lineCap=void 0,Oe.lineDash=null,Oe.lineDashOffset=void 0,Oe.lineJoin=void 0,Oe.lineWidth=void 0,Oe.miterLimit=void 0}createFill(e){const t=e.fillStyle,Oe=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&Oe.push(e.fillPatternScale),Oe}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const Oe=e.fillStyle;(typeof Oe!="string"||e.currentFillStyle!=Oe)&&(Oe!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=Oe)}updateStrokeStyle(e,t){const Oe=e.strokeStyle,ke=e.lineCap,Be=e.lineDash,Ue=e.lineDashOffset,He=e.lineJoin,We=e.lineWidth,Cn=e.miterLimit;(e.currentStrokeStyle!=Oe||e.currentLineCap!=ke||Be!=e.currentLineDash&&!equals$2(e.currentLineDash,Be)||e.currentLineDashOffset!=Ue||e.currentLineJoin!=He||e.currentLineWidth!=We||e.currentMiterLimit!=Cn)&&(Oe!==void 0&&t.call(this,e),e.currentStrokeStyle=Oe,e.currentLineCap=ke,e.currentLineDash=Be,e.currentLineDashOffset=Ue,e.currentLineJoin=He,e.currentLineWidth=We,e.currentMiterLimit=Cn)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,Oe){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,Oe);const ke=e.getFlatCoordinates(),Be=e.getStride(),Ue=this.coordinates.length,He=this.appendFlatPointCoordinates(ke,Be);this.instructions.push([Instruction.DRAW_IMAGE,Ue,He,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ue,He,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,Oe){if(!this.image_)return;this.beginGeometry(e,t,Oe);const ke=e.getFlatCoordinates(),Be=[];for(let We=0,Cn=ke.length;We<Cn;We+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,ke.slice(We,We+2)))&&Be.push(ke[We],ke[We+1]);const Ue=this.coordinates.length,He=this.appendFlatPointCoordinates(Be,2);this.instructions.push([Instruction.DRAW_IMAGE,Ue,He,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ue,He,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const Oe=e.getAnchor(),ke=e.getSize(),Be=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=Oe[0],this.anchorY_=Oe[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=ke[1],this.opacity_=e.getOpacity(),this.originX_=Be[0],this.originY_=Be[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=ke[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke)}drawFlatCoordinates_(e,t,Oe,ke){const Be=this.coordinates.length,Ue=this.appendFlatLineCoordinates(e,t,Oe,ke,!1,!1),He=[Instruction.MOVE_TO_LINE_TO,Be,Ue];return this.instructions.push(He),this.hitDetectionInstructions.push(He),Oe}drawLineString(e,t,Oe){const ke=this.state,Be=ke.strokeStyle,Ue=ke.lineWidth;if(Be===void 0||Ue===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const He=e.getFlatCoordinates(),We=e.getStride();this.drawFlatCoordinates_(He,0,He.length,We),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t,Oe){const ke=this.state,Be=ke.strokeStyle,Ue=ke.lineWidth;if(Be===void 0||Ue===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const He=e.getEnds(),We=e.getFlatCoordinates(),Cn=e.getStride();let An=0;for(let En=0,Sn=He.length;En<Sn;++En)An=this.drawFlatCoordinates_(We,An,He[En],Cn);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke)}drawFlatCoordinatess_(e,t,Oe,ke){const Be=this.state,Ue=Be.fillStyle!==void 0,He=Be.strokeStyle!==void 0,We=Oe.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let Cn=0;Cn<We;++Cn){const An=Oe[Cn],En=this.coordinates.length,Sn=this.appendFlatLineCoordinates(e,t,An,ke,!0,!He),Tn=[Instruction.MOVE_TO_LINE_TO,En,Sn];this.instructions.push(Tn),this.hitDetectionInstructions.push(Tn),He&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=An}return Ue&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),He&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const He=e.getFlatCoordinates(),We=e.getStride(),Cn=this.coordinates.length;this.appendFlatLineCoordinates(He,0,He.length,We,!1,!1);const An=[Instruction.CIRCLE,Cn];this.instructions.push(beginPathInstruction,An),this.hitDetectionInstructions.push(beginPathInstruction,An),ke.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),ke.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const He=e.getEnds(),We=e.getOrientedFlatCoordinates(),Cn=e.getStride();this.drawFlatCoordinatess_(We,0,He,Cn),this.endGeometry(t)}drawMultiPolygon(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const He=e.getEndss(),We=e.getOrientedFlatCoordinates(),Cn=e.getStride();let An=0;for(let En=0,Sn=He.length;En<Sn;++En)An=this.drawFlatCoordinatess_(We,An,He[En],Cn);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe]=snap(t[Oe],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(Te,e,t,Oe,ke){const Be=[];let Ue=t,He=0,We=e.slice(t,2);for(;He<Te&&Ue+ke<Oe;){const[Cn,An]=We.slice(-2),En=e[Ue+ke],Sn=e[Ue+ke+1],Tn=Math.sqrt((En-Cn)*(En-Cn)+(Sn-An)*(Sn-An));if(He+=Tn,He>=Te){const Ln=(Te-He+Tn)/Tn,Bn=lerp(Cn,En,Ln),ti=lerp(An,Sn,Ln);We.push(Bn,ti),Be.push(We),We=[Bn,ti],He==Te&&(Ue+=ke),He=0}else if(He<Te)We.push(e[Ue+ke],e[Ue+ke+1]),Ue+=ke;else{const Ln=Tn-He,Bn=lerp(Cn,En,Ln/Tn),ti=lerp(An,Sn,Ln/Tn);We.push(Bn,ti),Be.push(We),We=[Bn,ti],He=0,Ue+=ke}}return He>0&&Be.push(We),Be}function matchingChunk(Te,e,t,Oe,ke){let Be=t,Ue=t,He=0,We=0,Cn=t,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si;for(En=t;En<Oe;En+=ke){const oi=e[En],ci=e[En+1];Ln!==void 0&&(ii=oi-Ln,si=ci-Bn,Tn=Math.sqrt(ii*ii+si*si),ti!==void 0&&(We+=Sn,An=Math.acos((ti*ii+ni*si)/(Sn*Tn)),An>Te&&(We>He&&(He=We,Be=Cn,Ue=En),We=0,Cn=En-ke)),Sn=Tn,ti=ii,ni=si),Ln=oi,Bn=ci}return We+=Tn,We>He?[Cn,En]:[Be,Ue]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,Oe){const ke=this.textFillState_,Be=this.textStrokeState_,Ue=this.textState_;if(this.text_===""||!Ue||!ke&&!Be)return;const He=this.coordinates;let We=He.length;const Cn=e.getType();let An=null,En=e.getStride();if(Ue.placement==="line"&&(Cn=="LineString"||Cn=="MultiLineString"||Cn=="Polygon"||Cn=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let Sn;if(An=e.getFlatCoordinates(),Cn=="LineString")Sn=[An.length];else if(Cn=="MultiLineString")Sn=e.getEnds();else if(Cn=="Polygon")Sn=e.getEnds().slice(0,1);else if(Cn=="MultiPolygon"){const ti=e.getEndss();Sn=[];for(let ni=0,ii=ti.length;ni<ii;++ni)Sn.push(ti[ni][0])}this.beginGeometry(e,t,Oe);const Tn=Ue.repeat,Ln=Tn?void 0:Ue.textAlign;let Bn=0;for(let ti=0,ni=Sn.length;ti<ni;++ti){let ii;Tn?ii=lineChunk(Tn*this.resolution,An,Bn,Sn[ti],En):ii=[An.slice(Bn,Sn[ti])];for(let si=0,oi=ii.length;si<oi;++si){const ci=ii[si];let vi=0,pi=ci.length;if(Ln==null){const Mi=matchingChunk(Ue.maxAngle,ci,0,ci.length,2);vi=Mi[0],pi=Mi[1]}for(let Mi=vi;Mi<pi;Mi+=En)He.push(ci[Mi],ci[Mi+1]);const fi=He.length;Bn=Sn[ti],this.drawChars_(We,fi),We=fi}}this.endGeometry(t)}else{let Sn=Ue.overflow?null:[];switch(Cn){case"Point":case"MultiPoint":An=e.getFlatCoordinates();break;case"LineString":An=e.getFlatMidpoint();break;case"Circle":An=e.getCenter();break;case"MultiLineString":An=e.getFlatMidpoints(),En=2;break;case"Polygon":An=e.getFlatInteriorPoint(),Ue.overflow||Sn.push(An[2]/this.resolution),En=3;break;case"MultiPolygon":const ii=e.getFlatInteriorPoints();An=[];for(let si=0,oi=ii.length;si<oi;si+=3)Ue.overflow||Sn.push(ii[si+2]/this.resolution),An.push(ii[si],ii[si+1]);if(An.length===0)return;En=2;break}const Tn=this.appendFlatPointCoordinates(An,En);if(Tn===We)return;if(Sn&&(Tn-We)/2!==An.length/En){let ii=We/2;Sn=Sn.filter((si,oi)=>{const ci=He[(ii+oi)*2]===An[oi*En]&&He[(ii+oi)*2+1]===An[oi*En+1];return ci||--ii,ci})}this.saveTextStates_(),(Ue.backgroundFill||Ue.backgroundStroke)&&(this.setFillStrokeStyle(Ue.backgroundFill,Ue.backgroundStroke),Ue.backgroundFill&&this.updateFillStyle(this.state,this.createFill),Ue.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,Oe);let Ln=Ue.padding;if(Ln!=defaultPadding&&(Ue.scale[0]<0||Ue.scale[1]<0)){let ii=Ue.padding[0],si=Ue.padding[1],oi=Ue.padding[2],ci=Ue.padding[3];Ue.scale[0]<0&&(si=-si,ci=-ci),Ue.scale[1]<0&&(ii=-ii,oi=-oi),Ln=[ii,si,oi,ci]}const Bn=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,We,Tn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,Ln==defaultPadding?defaultPadding:Ln.map(function(ii){return ii*Bn}),!!Ue.backgroundFill,!!Ue.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,Sn]);const ti=1/Bn,ni=this.state.fillStyle;Ue.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,We,Tn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[ti,ti],NaN,this.declutterMode_,this.declutterImageWithText_,Ln,!!Ue.backgroundFill,!!Ue.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,Sn]),Ue.backgroundFill&&(this.state.fillStyle=ni,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,Oe=this.textFillState_,ke=this.strokeKey_;e&&(ke in this.strokeStates||(this.strokeStates[ke]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Be=this.textKey_;Be in this.textStates||(this.textStates[Be]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const Ue=this.fillKey_;Oe&&(Ue in this.fillStates||(this.fillStates[Ue]={fillStyle:Oe.fillStyle}))}drawChars_(e,t){const Oe=this.textStrokeState_,ke=this.textState_,Be=this.strokeKey_,Ue=this.textKey_,He=this.fillKey_;this.saveTextStates_();const We=this.pixelRatio,Cn=TEXT_ALIGN[ke.textBaseline],An=this.textOffsetY_*We,En=this.text_,Sn=Oe?Oe.lineWidth*Math.abs(ke.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,Cn,ke.overflow,He,ke.maxAngle,We,An,Be,Sn*We,En,Ue,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,Cn,ke.overflow,He&&defaultFillStyle,ke.maxAngle,We,An,Be,Sn*We,En,Ue,1/We,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let Oe,ke,Be;if(!e)this.text_="";else{const Ue=e.getFill();Ue?(ke=this.textFillState_,ke||(ke={},this.textFillState_=ke),ke.fillStyle=asColorLike(Ue.getColor()||defaultFillStyle)):(ke=null,this.textFillState_=ke);const He=e.getStroke();if(!He)Be=null,this.textStrokeState_=Be;else{Be=this.textStrokeState_,Be||(Be={},this.textStrokeState_=Be);const Bn=He.getLineDash(),ti=He.getLineDashOffset(),ni=He.getWidth(),ii=He.getMiterLimit();Be.lineCap=He.getLineCap()||defaultLineCap,Be.lineDash=Bn?Bn.slice():defaultLineDash,Be.lineDashOffset=ti===void 0?defaultLineDashOffset:ti,Be.lineJoin=He.getLineJoin()||defaultLineJoin,Be.lineWidth=ni===void 0?defaultLineWidth:ni,Be.miterLimit=ii===void 0?defaultMiterLimit:ii,Be.strokeStyle=asColorLike(He.getColor()||defaultStrokeStyle)}Oe=this.textState_;const We=e.getFont()||defaultFont;registerFont(We);const Cn=e.getScaleArray();Oe.overflow=e.getOverflow(),Oe.font=We,Oe.maxAngle=e.getMaxAngle(),Oe.placement=e.getPlacement(),Oe.textAlign=e.getTextAlign(),Oe.repeat=e.getRepeat(),Oe.justify=e.getJustify(),Oe.textBaseline=e.getTextBaseline()||defaultTextBaseline,Oe.backgroundFill=e.getBackgroundFill(),Oe.backgroundStroke=e.getBackgroundStroke(),Oe.padding=e.getPadding()||defaultPadding,Oe.scale=Cn===void 0?[1,1]:Cn;const An=e.getOffsetX(),En=e.getOffsetY(),Sn=e.getRotateWithView(),Tn=e.getKeepUpright(),Ln=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=An===void 0?0:An,this.textOffsetY_=En===void 0?0:En,this.textRotateWithView_=Sn===void 0?!1:Sn,this.textKeepUpright_=Tn===void 0?!0:Tn,this.textRotation_=Ln===void 0?0:Ln,this.strokeKey_=Be?(typeof Be.strokeStyle=="string"?Be.strokeStyle:getUid(Be.strokeStyle))+Be.lineCap+Be.lineDashOffset+"|"+Be.lineWidth+Be.lineJoin+Be.miterLimit+"["+Be.lineDash.join()+"]":"",this.textKey_=Oe.font+Oe.scale+(Oe.textAlign||"?")+(Oe.repeat||"?")+(Oe.justify||"?")+(Oe.textBaseline||"?"),this.fillKey_=ke&&ke.fillStyle?typeof ke.fillStyle=="string"?ke.fillStyle:"|"+getUid(ke.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,Oe,ke){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=ke,this.resolution_=Oe,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const Oe=this.buildersByZIndex_[t];for(const ke in Oe){const Be=Oe[ke].finish();e[t][ke]=Be}}return e}getBuilder(e,t){const Oe=e!==void 0?e.toString():"0";let ke=this.buildersByZIndex_[Oe];ke===void 0&&(ke={},this.buildersByZIndex_[Oe]=ke);let Be=ke[t];if(Be===void 0){const Ue=BATCH_CONSTRUCTORS[t];Be=new Ue(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),ke[t]=Be}return Be}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,t,Oe,ke){super(e),this.inversePixelTransform=t,this.frameState=Oe,this.context=ke}}class ZIndexContext{constructor(){Tc(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,t)=>{if(typeof getSharedCanvasContext2D()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,Oe)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,Oe),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let Oe=0,ke=t.length;Oe<ke;++Oe){const Be=t[Oe];if(typeof Be=="function"){Be(e);continue}const Ue=t[++Oe];if(typeof e[Be]=="function")e[Be](...Ue);else{if(typeof Ue=="function"){e[Be]=Ue(e);continue}e[Be]=Ue}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create$1(),this.pixelTransform=create$1(),this.inversePixelTransform=create$1(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,Oe){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let ke;try{pixelContext.drawImage(e,t,Oe,1,1,0,0,1,1),ke=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return ke}getBackground(e){let Oe=this.getLayer().getBackground();return typeof Oe=="function"&&(Oe=Oe(e.viewState.resolution)),Oe||void 0}useContainer(e,t,Oe){const ke=this.getLayer().getClassName();let Be,Ue;if(e&&e.className===ke&&(!Oe||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(Oe)))){const He=e.firstElementChild;He instanceof HTMLCanvasElement&&(Ue=He.getContext("2d"))}if(Ue&&Ue.canvas.style.transform===t?(this.container=e,this.context=Ue,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Be=document.createElement("div"),Be.className=ke;let He=Be.style;He.position="absolute",He.width="100%",He.height="100%",Ue=createCanvasContext2D();const We=Ue.canvas;Be.appendChild(We),He=We.style,He.position="absolute",He.left="0",He.transformOrigin="top left",this.container=Be,this.context=Ue}!this.containerReused&&Oe&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=Oe)}clipUnrotated(e,t,Oe){const ke=getTopLeft(Oe),Be=getTopRight(Oe),Ue=getBottomRight(Oe),He=getBottomLeft(Oe);apply(t.coordinateToPixelTransform,ke),apply(t.coordinateToPixelTransform,Be),apply(t.coordinateToPixelTransform,Ue),apply(t.coordinateToPixelTransform,He);const We=this.inversePixelTransform;apply(We,ke),apply(We,Be),apply(We,Ue),apply(We,He),e.save(),e.beginPath(),e.moveTo(Math.round(ke[0]),Math.round(ke[1])),e.lineTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(Ue[0]),Math.round(Ue[1])),e.lineTo(Math.round(He[0]),Math.round(He[1])),e.clip()}prepareContainer(e,t){const Oe=e.extent,ke=e.viewState.resolution,Be=e.viewState.rotation,Ue=e.pixelRatio,He=Math.round(getWidth(Oe)/ke*Ue),We=Math.round(getHeight(Oe)/ke*Ue);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/Ue,1/Ue,Be,-He/2,-We/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const Cn=toString$3(this.pixelTransform);if(this.useContainer(t,Cn,this.getBackground(e)),!this.containerReused){const An=this.context.canvas;An.width!=He||An.height!=We?(An.width=He,An.height=We):this.context.clearRect(0,0,He,We),Cn!==An.style.transform&&(An.style.transform=Cn)}}dispatchRenderEvent_(e,t,Oe){const ke=this.getLayer();if(ke.hasListener(e)){const Be=new RenderEvent(e,this.inversePixelTransform,Oe,t);ke.dispatchEvent(Be)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,t,Oe,ke,Be,Ue,He){const We=Be/2,Cn=Ue/2,An=ke/t,En=-An,Sn=-e[0]+He,Tn=-e[1];return compose(this.tempTransform,We,Cn,An,En,-Oe,Sn,Tn)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn=!0){let Tn=Te[e],Ln=Te[e+1],Bn=0,ti=0,ni=0,ii=0;function si(){Bn=Tn,ti=Ln,e+=Oe,Tn=Te[e],Ln=Te[e+1],ii+=ni,ni=Math.sqrt((Tn-Bn)*(Tn-Bn)+(Ln-ti)*(Ln-ti))}do si();while(e<t-Oe&&ii+ni<Be);let oi=ni===0?0:(Be-ii)/ni;const ci=lerp(Bn,Tn,oi),vi=lerp(ti,Ln,oi),pi=e-Oe,fi=ii,Mi=Be+He*We(Cn,ke,An);for(;e<t-Oe&&ii+ni<Mi;)si();oi=ni===0?0:(Mi-ii)/ni;const Oi=lerp(Bn,Tn,oi),ui=lerp(ti,Ln,oi);let li=!1;if(Sn)if(En){const nr=[ci,vi,Oi,ui];rotate(nr,0,4,2,En,nr,nr),li=nr[0]>nr[2]}else li=ci>Oi;const Ri=Math.PI,Pi=[],Fi=pi+Oe===e;e=pi,ni=0,ii=fi,Tn=Te[e],Ln=Te[e+1];let Hi;if(Fi){si(),Hi=Math.atan2(Ln-ti,Tn-Bn),li&&(Hi+=Hi>0?-Ri:Ri);const nr=(Oi+ci)/2,ar=(ui+vi)/2;return Pi[0]=[nr,ar,(Mi-Be)/2,Hi,ke],Pi}ke=ke.replace(/\n/g," ");for(let nr=0,ar=ke.length;nr<ar;){si();let cr=Math.atan2(Ln-ti,Tn-Bn);if(li&&(cr+=cr>0?-Ri:Ri),Hi!==void 0){let fr=cr-Hi;if(fr+=fr>Ri?-2*Ri:fr<-Ri?2*Ri:0,Math.abs(fr)>Ue)return null}Hi=cr;const sr=nr;let br=0;for(;nr<ar;++nr){const fr=li?ar-nr-1:nr,mr=He*We(Cn,ke[fr],An);if(e+Oe<t&&ii+ni<Be+br+mr/2)break;br+=mr}if(nr===sr)continue;const Ni=li?ke.substring(ar-sr,ar-nr):ke.substring(sr,nr);oi=ni===0?0:(Be+br/2-ii)/ni;const or=lerp(Bn,Tn,oi),er=lerp(ti,Ln,oi);Pi.push([or,er,br/2,cr,Ni]),Be+=br}return Pi}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(Te){return Te[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(Te,e){return e==="start"?e=rtlRegEx.test(Te)?"right":"left":e==="end"&&(e=rtlRegEx.test(Te)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(Te,e,t){return t>0&&Te.push(`
`,""),Te.push(e,""),Te}class Executor{constructor(e,t,Oe,ke,Be){this.overlaps=Oe,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=ke.instructions,this.coordinates=ke.coordinates,this.coordinateCache_={},this.renderedTransform_=create$1(),this.hitDetectionInstructions=ke.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=ke.fillStates||{},this.strokeStates=ke.strokeStates||{},this.textStates=ke.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Be?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,Oe,ke){const Be=e+t+Oe+ke;if(this.labels_[Be])return this.labels_[Be];const Ue=ke?this.strokeStates[ke]:null,He=Oe?this.fillStates[Oe]:null,We=this.textStates[t],Cn=this.pixelRatio,An=[We.scale[0]*Cn,We.scale[1]*Cn],En=We.justify?TEXT_ALIGN[We.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,We.textAlign||defaultTextAlign),Sn=ke&&Ue.lineWidth?Ue.lineWidth:0,Tn=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:Ln,height:Bn,widths:ti,heights:ni,lineWidths:ii}=getTextDimensions(We,Tn),si=Ln+Sn,oi=[],ci=(si+2)*An[0],vi=(Bn+Sn)*An[1],pi={width:ci<0?Math.floor(ci):Math.ceil(ci),height:vi<0?Math.floor(vi):Math.ceil(vi),contextInstructions:oi};(An[0]!=1||An[1]!=1)&&oi.push("scale",An),ke&&(oi.push("strokeStyle",Ue.strokeStyle),oi.push("lineWidth",Sn),oi.push("lineCap",Ue.lineCap),oi.push("lineJoin",Ue.lineJoin),oi.push("miterLimit",Ue.miterLimit),oi.push("setLineDash",[Ue.lineDash]),oi.push("lineDashOffset",Ue.lineDashOffset)),Oe&&oi.push("fillStyle",He.fillStyle),oi.push("textBaseline","middle"),oi.push("textAlign","center");const fi=.5-En;let Mi=En*si+fi*Sn;const Oi=[],ui=[];let li=0,Ri=0,Pi=0,Fi=0,Hi;for(let nr=0,ar=Tn.length;nr<ar;nr+=2){const cr=Tn[nr];if(cr===`
`){Ri+=li,li=0,Mi=En*si+fi*Sn,++Fi;continue}const sr=Tn[nr+1]||We.font;sr!==Hi&&(ke&&Oi.push("font",sr),Oe&&ui.push("font",sr),Hi=sr),li=Math.max(li,ni[Pi]);const br=[cr,Mi+fi*ti[Pi]+En*(ti[Pi]-ii[Fi]),.5*(Sn+li)+Ri];Mi+=ti[Pi],ke&&Oi.push("strokeText",br),Oe&&ui.push("fillText",br),++Pi}return Array.prototype.push.apply(oi,Oi),Array.prototype.push.apply(oi,ui),this.labels_[Be]=pi,pi}replayTextBackground_(e,t,Oe,ke,Be,Ue,He){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,Oe),e.lineTo.apply(e,ke),e.lineTo.apply(e,Be),e.lineTo.apply(e,t),Ue&&(this.alignAndScaleFill_=Ue[2],this.fill_(e)),He&&(this.setStrokeStyle_(e,He),e.stroke())}calculateImageOrLabelDimensions_(e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti){He*=Sn[0],We*=Sn[1];let ni=Oe-He,ii=ke-We;const si=Be+Cn>e?e-Cn:Be,oi=Ue+An>t?t-An:Ue,ci=Ln[3]+si*Sn[0]+Ln[1],vi=Ln[0]+oi*Sn[1]+Ln[2],pi=ni-Ln[3],fi=ii-Ln[0];(Bn||En!==0)&&(p1[0]=pi,p4[0]=pi,p1[1]=fi,p2[1]=fi,p2[0]=pi+ci,p3[0]=p2[0],p3[1]=fi+vi,p4[1]=p3[1]);let Mi;return En!==0?(Mi=compose(create$1(),Oe,ke,1,1,En,-Oe,-ke),apply(Mi,p1),apply(Mi,p2),apply(Mi,p3),apply(Mi,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(pi,pi+ci),Math.min(fi,fi+vi),Math.max(pi,pi+ci),Math.max(fi,fi+vi),tmpExtent),Tn&&(ni=Math.round(ni),ii=Math.round(ii)),{drawImageX:ni,drawImageY:ii,drawImageW:si,drawImageH:oi,originX:Cn,originY:An,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:ti},canvasTransform:Mi,scale:Sn}}replayImageOrLabel_(e,t,Oe,ke,Be,Ue,He){const We=!!(Ue||He),Cn=ke.declutterBox,An=He?He[2]*ke.scale[0]/2:0;return Cn.minX-An<=t[0]&&Cn.maxX+An>=0&&Cn.minY-An<=t[1]&&Cn.maxY+An>=0&&(We&&this.replayTextBackground_(e,p1,p2,p3,p4,Ue,He),drawImageOrLabel(e,ke.canvasTransform,Be,Oe,ke.originX,ke.originY,ke.drawImageW,ke.drawImageH,ke.drawImageX,ke.drawImageY,ke.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const Oe=apply(this.renderedTransform_,[0,0]),ke=512*this.pixelRatio;e.save(),e.translate(Oe[0]%ke,Oe[1]%ke),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,Oe,ke){const Be=this.textStates[t],Ue=this.createLabel(e,t,ke,Oe),He=this.strokeStates[Oe],We=this.pixelRatio,Cn=horizontalTextAlign(Array.isArray(e)?e[0]:e,Be.textAlign||defaultTextAlign),An=TEXT_ALIGN[Be.textBaseline||defaultTextBaseline],En=He&&He.lineWidth?He.lineWidth:0,Sn=Ue.width/We-2*Be.scale[0],Tn=Cn*Sn+2*(.5-Cn)*En,Ln=An*Ue.height/We+2*(.5-An)*En;return{label:Ue,anchorX:Tn,anchorY:Ln}}execute_(e,t,Oe,ke,Be,Ue,He,We){const Cn=this.zIndexContext_;let An;this.pixelCoordinates_&&equals$2(Oe,this.renderedTransform_)?An=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),An=transform2D(this.coordinates,0,this.coordinates.length,2,Oe,this.pixelCoordinates_),setFromArray(this.renderedTransform_,Oe));let En=0;const Sn=ke.length;let Tn=0,Ln,Bn,ti,ni,ii,si,oi,ci,vi,pi,fi,Mi,Oi,ui=0,li=0,Ri=null,Pi=null;const Fi=this.coordinateCache_,Hi=this.viewRotation_,nr=Math.round(Math.atan2(-Oe[1],Oe[0])*1e12)/1e12,ar={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Hi},cr=this.instructions!=ke||this.overlaps?0:200;let sr,br,Ni,or;for(;En<Sn;){const er=ke[En];switch(er[0]){case Instruction.BEGIN_GEOMETRY:sr=er[1],or=er[3],sr.getGeometry()?He!==void 0&&!intersects$1(He,or.getExtent())?En=er[2]+1:++En:En=er[2],Cn&&(Cn.zIndex=er[4]);break;case Instruction.BEGIN_PATH:ui>cr&&(this.fill_(e),ui=0),li>cr&&(e.stroke(),li=0),!ui&&!li&&(e.beginPath(),ii=NaN,si=NaN),++En;break;case Instruction.CIRCLE:Tn=er[1];const mr=An[Tn],hr=An[Tn+1],vr=An[Tn+2],_r=An[Tn+3],Ar=vr-mr,Vr=_r-hr,Wr=Math.sqrt(Ar*Ar+Vr*Vr);e.moveTo(mr+Wr,hr),e.arc(mr,hr,Wr,0,2*Math.PI,!0),++En;break;case Instruction.CLOSE_PATH:e.closePath(),++En;break;case Instruction.CUSTOM:Tn=er[1],Ln=er[2];const tr=er[3],pr=er[4],ur=er[5];ar.geometry=tr,ar.feature=sr,En in Fi||(Fi[En]=[]);const Ki=Fi[En];ur?ur(An,Tn,Ln,2,Ki):(Ki[0]=An[Tn],Ki[1]=An[Tn+1],Ki.length=2),Cn&&(Cn.zIndex=er[6]),pr(Ki,ar),++En;break;case Instruction.DRAW_IMAGE:Tn=er[1],Ln=er[2],vi=er[3],Bn=er[4],ti=er[5];let Nr=er[6];const Or=er[7],Ir=er[8],Mr=er[9],Tr=er[10];let wr=er[11];const Cr=er[12];let Er=er[13];ni=er[14]||"declutter";const Sr=er[15];if(!vi&&er.length>=20){pi=er[19],fi=er[20],Mi=er[21],Oi=er[22];const qs=this.drawLabelWithPointPlacement_(pi,fi,Mi,Oi);vi=qs.label,er[3]=vi;const $o=er[23];Bn=(qs.anchorX-$o)*this.pixelRatio,er[4]=Bn;const Ts=er[24];ti=(qs.anchorY-Ts)*this.pixelRatio,er[5]=ti,Nr=vi.height,er[6]=Nr,Er=vi.width,er[13]=Er}let Gr;er.length>25&&(Gr=er[25]);let zr,$r,Hr;er.length>17?(zr=er[16],$r=er[17],Hr=er[18]):(zr=defaultPadding,$r=!1,Hr=!1),Tr&&nr?wr+=Hi:!Tr&&!nr&&(wr-=Hi);let as=0;for(;Tn<Ln;Tn+=2){if(Gr&&Gr[as++]<Er/this.pixelRatio)continue;const qs=this.calculateImageOrLabelDimensions_(vi.width,vi.height,An[Tn],An[Tn+1],Er,Nr,Bn,ti,Ir,Mr,wr,Cr,Be,zr,$r||Hr,sr),$o=[e,t,vi,qs,Or,$r?Ri:null,Hr?Pi:null];if(We){let Ts,Cs,ho;if(Sr){const Os=Ln-Tn;if(!Sr[Os]){Sr[Os]={args:$o,declutterMode:ni};continue}const Us=Sr[Os];Ts=Us.args,Cs=Us.declutterMode,delete Sr[Os],ho=getDeclutterBox(Ts)}let Co,Js;if(Ts&&(Cs!=="declutter"||!We.collides(ho))&&(Co=!0),(ni!=="declutter"||!We.collides(qs.declutterBox))&&(Js=!0),Cs==="declutter"&&ni==="declutter"){const Os=Co&&Js;Co=Os,Js=Os}Co&&(Cs!=="none"&&We.insert(ho),this.replayImageOrLabel_.apply(this,Ts)),Js&&(ni!=="none"&&We.insert(qs.declutterBox),this.replayImageOrLabel_.apply(this,$o))}else this.replayImageOrLabel_.apply(this,$o)}++En;break;case Instruction.DRAW_CHARS:const Kr=er[1],Ss=er[2],ms=er[3],Rs=er[4];Oi=er[5];const Ps=er[6],ps=er[7],Is=er[8];Mi=er[9];const As=er[10];pi=er[11],fi=er[12];const Fs=[er[13],er[13]];ni=er[14]||"declutter";const xs=er[15],Zs=this.textStates[fi],_o=Zs.font,Ls=[Zs.scale[0]*ps,Zs.scale[1]*ps];let Es;_o in this.widths_?Es=this.widths_[_o]:(Es={},this.widths_[_o]=Es);const Ms=lineStringLength(An,Kr,Ss,2),za=Math.abs(Ls[0])*measureAndCacheTextWidth(_o,pi,Es);if(Rs||za<=Ms){const qs=this.textStates[fi].textAlign,$o=(Ms-za)*horizontalTextAlign(pi,qs),Ts=drawTextOnPath(An,Kr,Ss,2,pi,$o,Ps,Math.abs(Ls[0]),measureAndCacheTextWidth,_o,Es,nr?0:this.viewRotation_,xs);e:if(Ts){const Cs=[];let ho,Co,Js,Os,Us;if(Mi)for(ho=0,Co=Ts.length;ho<Co;++ho){Us=Ts[ho],Js=Us[4],Os=this.createLabel(Js,fi,"",Mi),Bn=Us[2]+(Ls[0]<0?-As:As),ti=ms*Os.height+(.5-ms)*2*As*Ls[1]/Ls[0]-Is;const Vs=this.calculateImageOrLabelDimensions_(Os.width,Os.height,Us[0],Us[1],Os.width,Os.height,Bn,ti,0,0,Us[3],Fs,!1,defaultPadding,!1,sr);if(We&&ni==="declutter"&&We.collides(Vs.declutterBox))break e;Cs.push([e,t,Os,Vs,1,null,null])}if(Oi)for(ho=0,Co=Ts.length;ho<Co;++ho){Us=Ts[ho],Js=Us[4],Os=this.createLabel(Js,fi,Oi,""),Bn=Us[2],ti=ms*Os.height-Is;const Vs=this.calculateImageOrLabelDimensions_(Os.width,Os.height,Us[0],Us[1],Os.width,Os.height,Bn,ti,0,0,Us[3],Fs,!1,defaultPadding,!1,sr);if(We&&ni==="declutter"&&We.collides(Vs.declutterBox))break e;Cs.push([e,t,Os,Vs,1,null,null])}We&&ni!=="none"&&We.load(Cs.map(getDeclutterBox));for(let Vs=0,ya=Cs.length;Vs<ya;++Vs)this.replayImageOrLabel_.apply(this,Cs[Vs])}}++En;break;case Instruction.END_GEOMETRY:if(Ue!==void 0){sr=er[1];const qs=Ue(sr,or,ni);if(qs)return qs}++En;break;case Instruction.FILL:cr?ui++:this.fill_(e),++En;break;case Instruction.MOVE_TO_LINE_TO:for(Tn=er[1],Ln=er[2],br=An[Tn],Ni=An[Tn+1],e.moveTo(br,Ni),ii=br+.5|0,si=Ni+.5|0,Tn+=2;Tn<Ln;Tn+=2)br=An[Tn],Ni=An[Tn+1],oi=br+.5|0,ci=Ni+.5|0,(Tn==Ln-2||oi!==ii||ci!==si)&&(e.lineTo(br,Ni),ii=oi,si=ci);++En;break;case Instruction.SET_FILL_STYLE:Ri=er,this.alignAndScaleFill_=er[2],ui&&(this.fill_(e),ui=0,li&&(e.stroke(),li=0)),e.fillStyle=er[1],++En;break;case Instruction.SET_STROKE_STYLE:Pi=er,li&&(e.stroke(),li=0),this.setStrokeStyle_(e,er),++En;break;case Instruction.STROKE:cr?li++:e.stroke(),++En;break;default:++En;break}}ui&&this.fill_(e),li&&e.stroke()}execute(e,t,Oe,ke,Be,Ue){this.viewRotation_=ke,this.execute_(e,t,Oe,this.instructions,Be,void 0,void 0,Ue)}executeHitDetection(e,t,Oe,ke,Be){return this.viewRotation_=Oe,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,ke,Be)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(Te=>!DECLUTTER.includes(Te));class ExecutorGroup{constructor(e,t,Oe,ke,Be,Ue,He){this.maxExtent_=e,this.overlaps_=ke,this.pixelRatio_=Oe,this.resolution_=t,this.renderBuffer_=Ue,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create$1(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Be,He)}clip(e,t){const Oe=this.getClipCoords(t);e.beginPath(),e.moveTo(Oe[0],Oe[1]),e.lineTo(Oe[2],Oe[3]),e.lineTo(Oe[4],Oe[5]),e.lineTo(Oe[6],Oe[7]),e.clip()}createExecutors_(e,t){for(const Oe in e){let ke=this.executorsByZIndex_[Oe];ke===void 0&&(ke={},this.executorsByZIndex_[Oe]=ke);const Be=e[Oe];for(const Ue in Be){const He=Be[Ue];ke[Ue]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,He,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const Oe=this.executorsByZIndex_[t];for(let ke=0,Be=e.length;ke<Be;++ke)if(e[ke]in Oe)return!0}return!1}forEachFeatureAtCoordinate(e,t,Oe,ke,Be,Ue){ke=Math.round(ke);const He=ke*2+1,We=compose(this.hitDetectionTransform_,ke+.5,ke+.5,1/t,-1/t,-Oe,-e[0],-e[1]),Cn=!this.hitDetectionContext_;Cn&&(this.hitDetectionContext_=createCanvasContext2D(He,He,void 0,{willReadFrequently:!0}));const An=this.hitDetectionContext_;An.canvas.width!==He||An.canvas.height!==He?(An.canvas.width=He,An.canvas.height=He):Cn||An.clearRect(0,0,He,He);let En;this.renderBuffer_!==void 0&&(En=createEmpty(),extendCoordinate(En,e),buffer(En,t*(this.renderBuffer_+ke),En));const Sn=getPixelIndexArray(ke);let Tn;function Ln(ci,vi,pi){const fi=An.getImageData(0,0,He,He).data;for(let Mi=0,Oi=Sn.length;Mi<Oi;Mi++)if(fi[Sn[Mi]]>0){if(!Ue||pi==="none"||Tn!=="Image"&&Tn!=="Text"||Ue.includes(ci)){const ui=(Sn[Mi]-3)/4,li=ke-ui%He,Ri=ke-(ui/He|0),Pi=Be(ci,vi,li*li+Ri*Ri);if(Pi)return Pi}An.clearRect(0,0,He,He);break}}const Bn=Object.keys(this.executorsByZIndex_).map(Number);Bn.sort(ascending);let ti,ni,ii,si,oi;for(ti=Bn.length-1;ti>=0;--ti){const ci=Bn[ti].toString();for(ii=this.executorsByZIndex_[ci],ni=ALL.length-1;ni>=0;--ni)if(Tn=ALL[ni],si=ii[Tn],si!==void 0&&(oi=si.executeHitDetection(An,We,Oe,Ln,En),oi))return oi}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],He=[Oe,ke,Oe,Ue,Be,Ue,Be,ke];return transform2D(He,0,8,2,e,He),He}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,Oe,ke,Be,Ue,He){const We=Object.keys(this.executorsByZIndex_).map(Number);We.sort(He?descending:ascending),Ue=Ue||ALL;const Cn=ALL.length;for(let An=0,En=We.length;An<En;++An){const Sn=We[An].toString(),Tn=this.executorsByZIndex_[Sn];for(let Ln=0,Bn=Ue.length;Ln<Bn;++Ln){const ti=Ue[Ln],ni=Tn[ti];if(ni!==void 0){const ii=He===null?void 0:ni.getZIndexContext(),si=ii?ii.getContext():e,oi=this.maxExtent_&&ti!=="Image"&&ti!=="Text";if(oi&&(si.save(),this.clip(si,Oe)),!ii||ti==="Text"||ti==="Image"?ni.execute(si,t,Oe,ke,Be,He):ii.pushFunction(ci=>ni.execute(ci,t,Oe,ke,Be,He)),oi&&si.restore(),ii){ii.offset();const ci=We[An]*Cn+Ln;this.deferredZIndexContexts_[ci]||(this.deferredZIndexContexts_[ci]=[]),this.deferredZIndexContexts_[ci].push(ii)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ascending);for(let Oe=0,ke=t.length;Oe<ke;++Oe)e[t[Oe]].forEach(Be=>{Be.draw(this.renderedContext_),Be.clear()}),e[t[Oe]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(Te){if(circlePixelIndexArrayCache[Te]!==void 0)return circlePixelIndexArrayCache[Te];const e=Te*2+1,t=Te*Te,Oe=new Array(t+1);for(let Be=0;Be<=Te;++Be)for(let Ue=0;Ue<=Te;++Ue){const He=Be*Be+Ue*Ue;if(He>t)break;let We=Oe[He];We||(We=[],Oe[He]=We),We.push(((Te+Be)*e+(Te+Ue))*4+3),Be>0&&We.push(((Te-Be)*e+(Te+Ue))*4+3),Ue>0&&(We.push(((Te+Be)*e+(Te-Ue))*4+3),Be>0&&We.push(((Te-Be)*e+(Te-Ue))*4+3))}const ke=[];for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be]&&ke.push(...Oe[Be]);return circlePixelIndexArrayCache[Te]=ke,ke}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,Oe,ke,Be,Ue,He){super(),this.context_=e,this.pixelRatio_=t,this.extent_=Oe,this.transform_=ke,this.transformRotation_=ke?toFixed(Math.atan2(ke[1],ke[0]),10):0,this.viewRotation_=Be,this.squaredTolerance_=Ue,this.userTransform_=He,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create$1()}drawImages_(e,t,Oe,ke){if(!this.image_)return;const Be=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_),Ue=this.context_,He=this.tmpLocalTransform_,We=Ue.globalAlpha;this.imageOpacity_!=1&&(Ue.globalAlpha=We*this.imageOpacity_);let Cn=this.imageRotation_;this.transformRotation_===0&&(Cn-=this.viewRotation_),this.imageRotateWithView_&&(Cn+=this.viewRotation_);for(let An=0,En=Be.length;An<En;An+=2){const Sn=Be[An]-this.imageAnchorX_,Tn=Be[An+1]-this.imageAnchorY_;if(Cn!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const Ln=Sn+this.imageAnchorX_,Bn=Tn+this.imageAnchorY_;compose(He,Ln,Bn,1,1,Cn,-Ln,-Bn),Ue.save(),Ue.transform.apply(Ue,He),Ue.translate(Ln,Bn),Ue.scale(this.imageScale_[0],this.imageScale_[1]),Ue.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),Ue.restore()}else Ue.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,Sn,Tn,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(Ue.globalAlpha=We)}drawText_(e,t,Oe,ke){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Be=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_),Ue=this.context_;let He=this.textRotation_;for(this.transformRotation_===0&&(He-=this.viewRotation_),this.textRotateWithView_&&(He+=this.viewRotation_);t<Oe;t+=ke){const We=Be[t]+this.textOffsetX_,Cn=Be[t+1]+this.textOffsetY_;He!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(Ue.save(),Ue.translate(We-this.textOffsetX_,Cn-this.textOffsetY_),Ue.rotate(He),Ue.translate(this.textOffsetX_,this.textOffsetY_),Ue.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&Ue.strokeText(this.text_,0,0),this.textFillState_&&Ue.fillText(this.text_,0,0),Ue.restore()):(this.textStrokeState_&&Ue.strokeText(this.text_,We,Cn),this.textFillState_&&Ue.fillText(this.text_,We,Cn))}}moveToLineTo_(e,t,Oe,ke,Be){const Ue=this.context_,He=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_);Ue.moveTo(He[0],He[1]);let We=He.length;Be&&(We-=2);for(let Cn=2;Cn<We;Cn+=2)Ue.lineTo(He[Cn],He[Cn+1]);return Be&&Ue.closePath(),Oe}drawRings_(e,t,Oe,ke){for(let Be=0,Ue=Oe.length;Be<Ue;++Be)t=this.moveToLineTo_(e,t,Oe[Be],ke,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),Oe=t[2]-t[0],ke=t[3]-t[1],Be=Math.sqrt(Oe*Oe+ke*ke),Ue=this.context_;Ue.beginPath(),Ue.arc(t[0],t[1],Be,0,2*Math.PI),this.fillState_&&Ue.fill(),this.strokeState_&&Ue.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const Oe=t.getGeometryFunction()(e);Oe&&(this.setStyle(t),this.drawGeometry(Oe))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let Oe=0,ke=t.length;Oe<ke;++Oe)this.drawGeometry(t[Oe])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(t,0,t.length,Oe),this.text_!==""&&this.drawText_(t,0,t.length,Oe)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(t,0,t.length,Oe),this.text_!==""&&this.drawText_(t,0,t.length,Oe)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,Oe=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(Oe,0,Oe.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const Oe=this.context_,ke=e.getFlatCoordinates();let Be=0;const Ue=e.getEnds(),He=e.getStride();Oe.beginPath();for(let We=0,Cn=Ue.length;We<Cn;++We)Be=this.moveToLineTo_(ke,Be,Ue[We],He,!1);Oe.stroke()}if(this.text_!==""){const Oe=e.getFlatMidpoints();this.drawText_(Oe,0,Oe.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,Oe=e.getOrientedFlatCoordinates();let ke=0;const Be=e.getEndss(),Ue=e.getStride();t.beginPath();for(let He=0,We=Be.length;He<We;++He){const Cn=Be[He];ke=this.drawRings_(Oe,ke,Cn,Ue)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,Oe=this.contextFillState_;Oe?Oe.fillStyle!=e.fillStyle&&(Oe.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,Oe=this.contextStrokeState_;Oe?(Oe.lineCap!=e.lineCap&&(Oe.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(Oe.lineDash,e.lineDash)||t.setLineDash(Oe.lineDash=e.lineDash),Oe.lineDashOffset!=e.lineDashOffset&&(Oe.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),Oe.lineJoin!=e.lineJoin&&(Oe.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),Oe.lineWidth!=e.lineWidth&&(Oe.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),Oe.miterLimit!=e.miterLimit&&(Oe.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),Oe.strokeStyle!=e.strokeStyle&&(Oe.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,Oe=this.contextTextState_,ke=e.textAlign?e.textAlign:defaultTextAlign;Oe?(Oe.font!=e.font&&(Oe.font=e.font,t.font=e.font),Oe.textAlign!=ke&&(Oe.textAlign=ke,t.textAlign=ke),Oe.textBaseline!=e.textBaseline&&(Oe.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=ke,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:ke,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const Oe=e.getColor();this.fillState_={fillStyle:asColorLike(Oe||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const Oe=t.getColor(),ke=t.getLineCap(),Be=t.getLineDash(),Ue=t.getLineDashOffset(),He=t.getLineJoin(),We=t.getWidth(),Cn=t.getMiterLimit(),An=Be||defaultLineDash;this.strokeState_={lineCap:ke!==void 0?ke:defaultLineCap,lineDash:this.pixelRatio_===1?An:An.map(En=>En*this.pixelRatio_),lineDashOffset:(Ue||defaultLineDashOffset)*this.pixelRatio_,lineJoin:He!==void 0?He:defaultLineJoin,lineWidth:(We!==void 0?We:defaultLineWidth)*this.pixelRatio_,miterLimit:Cn!==void 0?Cn:defaultMiterLimit,strokeStyle:asColorLike(Oe||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const Oe=e.getPixelRatio(this.pixelRatio_),ke=e.getAnchor(),Be=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=ke[0]*Oe,this.imageAnchorY_=ke[1]*Oe,this.imageHeight_=t[1]*Oe,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Be[0],this.imageOriginY_=Be[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const Ue=e.getScaleArray();this.imageScale_=[Ue[0]*this.pixelRatio_/Oe,Ue[1]*this.pixelRatio_/Oe],this.imageWidth_=t[0]*Oe}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const Tn=t.getColor();this.textFillState_={fillStyle:asColorLike(Tn||defaultFillStyle)}}const Oe=e.getStroke();if(!Oe)this.textStrokeState_=null;else{const Tn=Oe.getColor(),Ln=Oe.getLineCap(),Bn=Oe.getLineDash(),ti=Oe.getLineDashOffset(),ni=Oe.getLineJoin(),ii=Oe.getWidth(),si=Oe.getMiterLimit();this.textStrokeState_={lineCap:Ln!==void 0?Ln:defaultLineCap,lineDash:Bn||defaultLineDash,lineDashOffset:ti||defaultLineDashOffset,lineJoin:ni!==void 0?ni:defaultLineJoin,lineWidth:ii!==void 0?ii:defaultLineWidth,miterLimit:si!==void 0?si:defaultMiterLimit,strokeStyle:asColorLike(Tn||defaultStrokeStyle)}}const ke=e.getFont(),Be=e.getOffsetX(),Ue=e.getOffsetY(),He=e.getRotateWithView(),We=e.getRotation(),Cn=e.getScaleArray(),An=e.getText(),En=e.getTextAlign(),Sn=e.getTextBaseline();this.textState_={font:ke!==void 0?ke:defaultFont,textAlign:En!==void 0?En:defaultTextAlign,textBaseline:Sn!==void 0?Sn:defaultTextBaseline},this.text_=An!==void 0?Array.isArray(An)?An.reduce((Tn,Ln,Bn)=>Tn+=Bn%2?" ":Ln,""):An:"",this.textOffsetX_=Be!==void 0?this.pixelRatio_*Be:0,this.textOffsetY_=Ue!==void 0?this.pixelRatio_*Ue:0,this.textRotateWithView_=He!==void 0?He:!1,this.textRotation_=We!==void 0?We:0,this.textScale_=[this.pixelRatio_*Cn[0],this.pixelRatio_*Cn[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(Te,e,t,Oe,ke,Be,Ue,He,We){const Cn=We?toUserExtent(ke):ke,An=Te[0]*HIT_DETECT_RESOLUTION,En=Te[1]*HIT_DETECT_RESOLUTION,Sn=createCanvasContext2D(An,En);Sn.imageSmoothingEnabled=!1;const Tn=Sn.canvas,Ln=new CanvasImmediateRenderer(Sn,HIT_DETECT_RESOLUTION,ke,null,Ue,He,We?getTransformFromProjections(getUserProjection(),We):null),Bn=t.length,ti=Math.floor((256*256*256-1)/Bn),ni={};for(let si=1;si<=Bn;++si){const oi=t[si-1],ci=oi.getStyleFunction()||Oe;if(!ci)continue;let vi=ci(oi,Be);if(!vi)continue;Array.isArray(vi)||(vi=[vi]);const fi=(si*ti).toString(16).padStart(7,"#00000");for(let Mi=0,Oi=vi.length;Mi<Oi;++Mi){const ui=vi[Mi],li=ui.getGeometryFunction()(oi);if(!li||!intersects$1(Cn,li.getExtent()))continue;const Ri=ui.clone(),Pi=Ri.getFill();Pi&&Pi.setColor(fi);const Fi=Ri.getStroke();Fi&&(Fi.setColor(fi),Fi.setLineDash(null)),Ri.setText(void 0);const Hi=ui.getImage();if(Hi){const sr=Hi.getImageSize();if(!sr)continue;const br=createCanvasContext2D(sr[0],sr[1],void 0,{alpha:!1}),Ni=br.canvas;br.fillStyle=fi,br.fillRect(0,0,Ni.width,Ni.height),Ri.setImage(new Icon({img:Ni,anchor:Hi.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Hi.getOrigin(),opacity:1,size:Hi.getSize(),scale:Hi.getScale(),rotation:Hi.getRotation(),rotateWithView:Hi.getRotateWithView()}))}const nr=Ri.getZIndex()||0;let ar=ni[nr];ar||(ar={},ni[nr]=ar,ar.Polygon=[],ar.Circle=[],ar.LineString=[],ar.Point=[]);const cr=li.getType();if(cr==="GeometryCollection"){const sr=li.getGeometriesArrayRecursive();for(let br=0,Ni=sr.length;br<Ni;++br){const or=sr[br];ar[or.getType().replace("Multi","")].push(or,Ri)}}else ar[cr.replace("Multi","")].push(li,Ri)}}const ii=Object.keys(ni).map(Number).sort(ascending);for(let si=0,oi=ii.length;si<oi;++si){const ci=ni[ii[si]];for(const vi in ci){const pi=ci[vi];for(let fi=0,Mi=pi.length;fi<Mi;fi+=2){Ln.setStyle(pi[fi+1]);for(let Oi=0,ui=e.length;Oi<ui;++Oi)Ln.setTransform(e[Oi]),Ln.drawGeometry(pi[fi])}}}return Sn.getImageData(0,0,Tn.width,Tn.height)}function hitDetect(Te,e,t){const Oe=[];if(t){const ke=Math.floor(Math.round(Te[0])*HIT_DETECT_RESOLUTION),Be=Math.floor(Math.round(Te[1])*HIT_DETECT_RESOLUTION),Ue=(clamp(ke,0,t.width-1)+clamp(Be,0,t.height-1)*t.width)*4,He=t.data[Ue],We=t.data[Ue+1],An=t.data[Ue+2]+256*(We+256*He),En=Math.floor((256*256*256-1)/e.length);An&&An%En===0&&Oe.push(e[An/En-1])}return Oe}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(Te,e){return parseInt(getUid(Te),10)-parseInt(getUid(e),10)}function getSquaredTolerance(Te,e){const t=getTolerance(Te,e);return t*t}function getTolerance(Te,e){return SIMPLIFY_TOLERANCE*Te/e}function renderCircleGeometry(Te,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Be||Ue){const We=Te.getBuilder(t.getZIndex(),"Circle");We.setFillStrokeStyle(Be,Ue),We.drawCircle(e,Oe,ke)}const He=t.getText();if(He&&He.getText()){const We=Te.getBuilder(t.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,Oe)}}function renderFeature$1(Te,e,t,Oe,ke,Be,Ue,He){const We=[],Cn=t.getImage();if(Cn){let Sn=!0;const Tn=Cn.getImageState();Tn==ImageState.LOADED||Tn==ImageState.ERROR?Sn=!1:Tn==ImageState.IDLE&&Cn.load(),Sn&&We.push(Cn.ready())}const An=t.getFill();An&&An.loading()&&We.push(An.ready());const En=We.length>0;return En&&Promise.all(We).then(()=>ke(null)),renderFeatureInternal(Te,e,t,Oe,Be,Ue,He),En}function renderFeatureInternal(Te,e,t,Oe,ke,Be,Ue){const He=t.getGeometryFunction()(e);if(!He)return;const We=He.simplifyTransformed(Oe,ke);if(t.getRenderer())renderGeometry(Te,We,t,e,Ue);else{const An=GEOMETRY_RENDERERS[We.getType()];An(Te,We,t,e,Ue,Be)}}function renderGeometry(Te,e,t,Oe,ke){if(e.getType()=="GeometryCollection"){const Ue=e.getGeometries();for(let He=0,We=Ue.length;He<We;++He)renderGeometry(Te,Ue[He],t,Oe,ke);return}Te.getBuilder(t.getZIndex(),"Default").drawCustom(e,Oe,t.getRenderer(),t.getHitDetectionRenderer(),ke)}function renderGeometryCollectionGeometry(Te,e,t,Oe,ke,Be){const Ue=e.getGeometriesArray();let He,We;for(He=0,We=Ue.length;He<We;++He){const Cn=GEOMETRY_RENDERERS[Ue[He].getType()];Cn(Te,Ue[He],t,Oe,ke,Be)}}function renderLineStringGeometry(Te,e,t,Oe,ke){const Be=t.getStroke();if(Be){const He=Te.getBuilder(t.getZIndex(),"LineString");He.setFillStrokeStyle(null,Be),He.drawLineString(e,Oe,ke)}const Ue=t.getText();if(Ue&&Ue.getText()){const He=Te.getBuilder(t.getZIndex(),"Text");He.setTextStyle(Ue),He.drawText(e,Oe,ke)}}function renderMultiLineStringGeometry(Te,e,t,Oe,ke){const Be=t.getStroke();if(Be){const He=Te.getBuilder(t.getZIndex(),"LineString");He.setFillStrokeStyle(null,Be),He.drawMultiLineString(e,Oe,ke)}const Ue=t.getText();if(Ue&&Ue.getText()){const He=Te.getBuilder(t.getZIndex(),"Text");He.setTextStyle(Ue),He.drawText(e,Oe,ke)}}function renderMultiPolygonGeometry(Te,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Ue||Be){const We=Te.getBuilder(t.getZIndex(),"Polygon");We.setFillStrokeStyle(Be,Ue),We.drawMultiPolygon(e,Oe,ke)}const He=t.getText();if(He&&He.getText()){const We=Te.getBuilder(t.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,Oe,ke)}}function renderPointGeometry(Te,e,t,Oe,ke,Be){const Ue=t.getImage(),He=t.getText(),We=He&&He.getText(),Cn=Be&&Ue&&We?{}:void 0;if(Ue){if(Ue.getImageState()!=ImageState.LOADED)return;const An=Te.getBuilder(t.getZIndex(),"Image");An.setImageStyle(Ue,Cn),An.drawPoint(e,Oe,ke)}if(We){const An=Te.getBuilder(t.getZIndex(),"Text");An.setTextStyle(He,Cn),An.drawText(e,Oe,ke)}}function renderMultiPointGeometry(Te,e,t,Oe,ke,Be){const Ue=t.getImage(),He=Ue&&Ue.getOpacity()!==0,We=t.getText(),Cn=We&&We.getText(),An=Be&&He&&Cn?{}:void 0;if(He){if(Ue.getImageState()!=ImageState.LOADED)return;const En=Te.getBuilder(t.getZIndex(),"Image");En.setImageStyle(Ue,An),En.drawMultiPoint(e,Oe,ke)}if(Cn){const En=Te.getBuilder(t.getZIndex(),"Text");En.setTextStyle(We,An),En.drawText(e,Oe,ke)}}function renderPolygonGeometry(Te,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Be||Ue){const We=Te.getBuilder(t.getZIndex(),"Polygon");We.setFillStrokeStyle(Be,Ue),We.drawPolygon(e,Oe,ke)}const He=t.getText();if(He&&He.getText()){const We=Te.getBuilder(t.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,Oe,ke)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,Oe){const ke=t.extent,Be=t.viewState,Ue=Be.center,He=Be.resolution,We=Be.projection,Cn=Be.rotation,An=We.getExtent(),En=this.getLayer().getSource(),Sn=this.getLayer().getDeclutter(),Tn=t.pixelRatio,Ln=t.viewHints,Bn=!(Ln[ViewHint.ANIMATING]||Ln[ViewHint.INTERACTING]),ti=this.context,ni=Math.round(getWidth(ke)/He*Tn),ii=Math.round(getHeight(ke)/He*Tn),si=En.getWrapX()&&We.canWrapX(),oi=si?getWidth(An):null,ci=si?Math.ceil((ke[2]-An[2])/oi)+1:1;let vi=si?Math.floor((ke[0]-An[0])/oi):0;do{let pi=this.getRenderTransform(Ue,He,0,Tn,ni,ii,vi*oi);t.declutter&&(pi=pi.slice(0)),e.execute(ti,[ti.canvas.width,ti.canvas.height],pi,Cn,Bn,Oe===void 0?ALL:Oe?DECLUTTER:NON_DECLUTTER,Oe?Sn&&t.declutter[Sn]:void 0)}while(++vi<ci)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const Oe=e.layerStatesArray[e.layerIndex];this.opacity_=Oe.opacity;const ke=e.viewState;this.prepareContainer(e,t);const Be=this.context,Ue=this.replayGroup_;let He=Ue&&!Ue.isEmpty();if(!He&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(Be,e),ke.projection,this.clipped_=!1,He&&Oe.extent&&this.clipping){const We=fromUserExtent(Oe.extent);He=intersects$1(We,e.extent),this.clipped_=He&&!containsExtent(We,e.extent),this.clipped_&&this.clipUnrotated(Be,e,We)}return He&&this.renderWorlds(Ue,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&Be.restore(),this.postRender(Be,e),this.renderedRotation_!==ke.rotation&&(this.renderedRotation_=ke.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const Oe=this.frameState.size.slice(),ke=this.renderedCenter_,Be=this.renderedResolution_,Ue=this.renderedRotation_,He=this.renderedProjection_,We=this.wrappedRenderedExtent_,Cn=this.getLayer(),An=[],En=Oe[0]*HIT_DETECT_RESOLUTION,Sn=Oe[1]*HIT_DETECT_RESOLUTION;An.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,En,Sn,0).slice());const Tn=Cn.getSource(),Ln=He.getExtent();if(Tn.getWrapX()&&He.canWrapX()&&!containsExtent(Ln,We)){let Bn=We[0];const ti=getWidth(Ln);let ni=0,ii;for(;Bn<Ln[0];)--ni,ii=ti*ni,An.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,En,Sn,ii).slice()),Bn+=ti;for(ni=0,Bn=We[2];Bn>Ln[2];)++ni,ii=ti*ni,An.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,En,Sn,ii).slice()),Bn-=ti}this.hitDetectionImageData_=createHitDetectionImageData(Oe,An,this.renderedFeatures_,Cn.getStyleFunction(),We,Be,Ue,getSquaredTolerance(Be,this.renderedPixelRatio_),null)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){if(!this.replayGroup_)return;const Ue=t.viewState.resolution,He=t.viewState.rotation,We=this.getLayer(),Cn={},An=function(Sn,Tn,Ln){const Bn=getUid(Sn),ti=Cn[Bn];if(ti){if(ti!==!0&&Ln<ti.distanceSq){if(Ln===0)return Cn[Bn]=!0,Be.splice(Be.lastIndexOf(ti),1),ke(Sn,We,Tn);ti.geometry=Tn,ti.distanceSq=Ln}}else{if(Ln===0)return Cn[Bn]=!0,ke(Sn,We,Tn);Be.push(Cn[Bn]={feature:Sn,layer:We,geometry:Tn,distanceSq:Ln,callback:ke})}},En=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,Ue,He,Oe,An,En?t.declutter[En].all().map(Sn=>Sn.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),Oe=t.getSource();if(!Oe)return!1;const ke=e.viewHints[ViewHint.ANIMATING],Be=e.viewHints[ViewHint.INTERACTING],Ue=t.getUpdateWhileAnimating(),He=t.getUpdateWhileInteracting();if(this.ready&&!Ue&&ke||!He&&Be)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const We=e.extent,Cn=e.viewState,An=Cn.projection,En=Cn.resolution,Sn=e.pixelRatio,Tn=t.getRevision(),Ln=t.getRenderBuffer();let Bn=t.getRenderOrder();Bn===void 0&&(Bn=defaultOrder);const ti=Cn.center.slice(),ni=buffer(We,Ln*En),ii=ni.slice(),si=[ni.slice()],oi=An.getExtent();if(Oe.getWrapX()&&An.canWrapX()&&!containsExtent(oi,e.extent)){const Pi=getWidth(oi),Fi=Math.max(getWidth(ni)/2,Pi);ni[0]=oi[0]-Fi,ni[2]=oi[2]+Fi,wrapX$1(ti,An);const Hi=wrapX$2(si[0],An);Hi[0]<oi[0]&&Hi[2]<oi[2]?si.push([Hi[0]+Pi,Hi[1],Hi[2]+Pi,Hi[3]]):Hi[0]>oi[0]&&Hi[2]>oi[2]&&si.push([Hi[0]-Pi,Hi[1],Hi[2]-Pi,Hi[3]])}if(this.ready&&this.renderedResolution_==En&&this.renderedRevision_==Tn&&this.renderedRenderOrder_==Bn&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,ni))return equals$2(this.renderedExtent_,ii)||(this.hitDetectionImageData_=null,this.renderedExtent_=ii),this.renderedCenter_=ti,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ci=new BuilderGroup(getTolerance(En,Sn),ni,En,Sn);let vi;for(let Pi=0,Fi=si.length;Pi<Fi;++Pi)Oe.loadFeatures(si[Pi],En,An);const pi=getSquaredTolerance(En,Sn);let fi=!0;const Mi=(Pi,Fi)=>{let Hi;const nr=Pi.getStyleFunction()||t.getStyleFunction();if(nr&&(Hi=nr(Pi,En)),Hi){const ar=this.renderFeature(Pi,pi,Hi,ci,vi,this.getLayer().getDeclutter(),Fi);fi=fi&&!ar}},Oi=toUserExtent(ni),ui=Oe.getFeaturesInExtent(Oi);Bn&&ui.sort(Bn);for(let Pi=0,Fi=ui.length;Pi<Fi;++Pi)Mi(ui[Pi],Pi);this.renderedFeatures_=ui,this.ready=fi;const li=ci.finish(),Ri=new ExecutorGroup(ni,En,Sn,Oe.getOverlaps(),li,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=En,this.renderedRevision_=Tn,this.renderedRenderOrder_=Bn,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=ii,this.wrappedRenderedExtent_=ni,this.renderedCenter_=ti,this.renderedProjection_=An,this.renderedPixelRatio_=Sn,this.replayGroup_=Ri,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,Oe,ke,Be,Ue,He){if(!Oe)return!1;let We=!1;if(Array.isArray(Oe))for(let Cn=0,An=Oe.length;Cn<An;++Cn)We=renderFeature$1(ke,e,Oe[Cn],t,this.boundHandleStyleImageChange_,Be,Ue,He)||We;else We=renderFeature$1(ke,e,Oe,t,this.boundHandleStyleImageChange_,Be,Ue,He);return We}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(Te,e){const t=[];for(let Oe=0;Oe<e.length;++Oe){const Be=e[Oe].getGeometry();appendGeometryTraceTargets(Te,Be,t)}return t}function getSquaredDistance(Te,e){return squaredDistance$1(Te[0],Te[1],e[0],e[1])}function getCoordinate(Te,e){const t=Te.length;return e<0?Te[e+t]:e>=t?Te[e-t]:Te[e]}function getCumulativeSquaredDistance(Te,e,t){let Oe,ke;e<t?(Oe=e,ke=t):(Oe=t,ke=e);const Be=Math.ceil(Oe),Ue=Math.floor(ke);if(Be>Ue){const We=interpolateCoordinate(Te,Oe),Cn=interpolateCoordinate(Te,ke);return getSquaredDistance(We,Cn)}let He=0;if(Oe<Be){const We=interpolateCoordinate(Te,Oe),Cn=getCoordinate(Te,Be);He+=getSquaredDistance(We,Cn)}if(Ue<ke){const We=getCoordinate(Te,Ue),Cn=interpolateCoordinate(Te,ke);He+=getSquaredDistance(We,Cn)}for(let We=Be;We<Ue-1;++We){const Cn=getCoordinate(Te,We),An=getCoordinate(Te,We+1);He+=getSquaredDistance(Cn,An)}return He}function appendGeometryTraceTargets(Te,e,t){if(e instanceof LineString){appendTraceTarget(Te,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke)appendTraceTarget(Te,Oe[ke],!1,t);return}if(e instanceof Polygon){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke)appendTraceTarget(Te,Oe[ke],!0,t);return}if(e instanceof MultiPolygon){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let He=0,We=Ue.length;He<We;++He)appendTraceTarget(Te,Ue[He],!0,t)}return}if(e instanceof GeometryCollection){const Oe=e.getGeometries();for(let ke=0;ke<Oe.length;++ke)appendGeometryTraceTargets(Te,Oe[ke],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(Te,e,t,Oe){const ke=Te[0],Be=Te[1];let Ue=1/0,He=-1,We=NaN;for(let En=0;En<e.targets.length;++En){const Sn=e.targets[En],Tn=Sn.coordinates;let Ln=1/0,Bn;for(let ti=0;ti<Tn.length-1;++ti){const ni=Tn[ti],ii=Tn[ti+1],si=getPointSegmentRelationship(ke,Be,ni,ii);si.squaredDistance<Ln&&(Ln=si.squaredDistance,Bn=ti+si.along)}Ln<Ue&&(Ue=Ln,Sn.ring&&e.targetIndex===En&&(Sn.endIndex>Sn.startIndex?Bn<Sn.startIndex&&(Bn+=Tn.length):Sn.endIndex<Sn.startIndex&&Bn>Sn.startIndex&&(Bn-=Tn.length)),We=Bn,He=En)}const Cn=e.targets[He];let An=Cn.ring;if(e.targetIndex===He&&An){const En=interpolateCoordinate(Cn.coordinates,We),Sn=t.getPixelFromCoordinate(En);distance(Sn,e.startPx)>Oe&&(An=!1)}if(An){const En=Cn.coordinates,Sn=En.length,Tn=Cn.startIndex,Ln=We;if(Tn<Ln){const Bn=getCumulativeSquaredDistance(En,Tn,Ln);getCumulativeSquaredDistance(En,Tn,Ln-Sn)<Bn&&(We-=Sn)}else{const Bn=getCumulativeSquaredDistance(En,Tn,Ln);getCumulativeSquaredDistance(En,Tn,Ln+Sn)<Bn&&(We+=Sn)}}return sharedUpdateInfo.index=He,sharedUpdateInfo.endIndex=We,sharedUpdateInfo}function appendTraceTarget(Te,e,t,Oe){const ke=Te[0],Be=Te[1];for(let Ue=0,He=e.length-1;Ue<He;++Ue){const We=e[Ue],Cn=e[Ue+1],An=getPointSegmentRelationship(ke,Be,We,Cn);if(An.squaredDistance===0){const En=Ue+An.along;Oe.push({coordinates:e,ring:t,startIndex:En,endIndex:En});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(Te,e,t,Oe){const ke=t[0],Be=t[1],Ue=Oe[0],He=Oe[1],We=Ue-ke,Cn=He-Be;let An=0,En=ke,Sn=Be;return(We!==0||Cn!==0)&&(An=clamp(((Te-ke)*We+(e-Be)*Cn)/(We*We+Cn*Cn),0,1),En+=We*An,Sn+=Cn*An),sharedRel.along=An,sharedRel.squaredDistance=toFixed(squaredDistance$1(Te,e,En,Sn),10),sharedRel}function interpolateCoordinate(Te,e){const t=Te.length;let Oe=Math.floor(e);const ke=e-Oe;Oe>=t?Oe-=t:Oe<0&&(Oe+=t);let Be=Oe+1;Be>=t&&(Be-=t);const Ue=Te[Oe],He=Ue[0],We=Ue[1],Cn=Te[Be],An=Cn[0]-He,En=Cn[1]-We;return[He+An*ke,We+En*ke]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let Oe=e.geometryFunction;if(!Oe){const ke=this.mode_;if(ke==="Circle")Oe=(Be,Ue,He)=>{const We=Ue||new Circle([NaN,NaN]),Cn=fromUserCoordinate(Be[0]),An=squaredDistance(Cn,fromUserCoordinate(Be[Be.length-1]));return We.setCenterAndRadius(Cn,Math.sqrt(An),this.geometryLayout_),We};else{let Be;ke==="Point"?Be=Point$1:ke==="LineString"?Be=LineString:ke==="Polygon"&&(Be=Polygon),Oe=(Ue,He,We)=>(He?ke==="Polygon"?Ue[0].length?He.setCoordinates([Ue[0].concat([Ue[0][0]])],this.geometryLayout_):He.setCoordinates([],this.geometryLayout_):He.setCoordinates(Ue,this.geometryLayout_):He=new Be(Ue,this.geometryLayout_),He)}}this.geometryFunction_=Oe,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always$1:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,Oe=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),Oe=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?Oe=!1:t&&this.getPointerCount()<2?(Oe=e.type===MapBrowserEventType.POINTERMOVE,Oe&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(Oe=!1),super.handleEvent(e)&&Oe}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),Oe=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),ke=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Be=boundingExtent([Oe,ke]),Ue=this.traceSource_.getFeaturesInExtent(Be);if(Ue.length===0)return;const He=getTraceTargets(e.coordinate,Ue);He.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:He,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const Oe=e.startIndex<=e.endIndex,ke=e.startIndex<=t;Oe===ke?Oe&&t>e.endIndex||!Oe&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(Oe&&t<e.endIndex||!Oe&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let Oe=0;if(e<t){const ke=Math.ceil(e);let Be=Math.floor(t);Be===t&&(Be-=1),Oe=Be-ke+1}else{const ke=Math.floor(e);let Be=Math.ceil(t);Be===t&&(Be+=1),Oe=ke-Be+1}Oe>0&&this.removeLastPoints_(Oe)}addTracedCoordinates_(e,t,Oe){if(t===Oe)return;const ke=[];if(t<Oe){const Be=Math.ceil(t);let Ue=Math.floor(Oe);Ue===Oe&&(Ue-=1);for(let He=Be;He<=Ue;++He)ke.push(getCoordinate(e.coordinates,He))}else{const Be=Math.floor(t);let Ue=Math.ceil(Oe);Ue===Oe&&(Ue+=1);for(let He=Be;He>=Ue;--He)ke.push(getCoordinate(e.coordinates,He))}ke.length&&this.appendCoordinates(ke)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const Oe=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==Oe.index){if(t.targetIndex!==-1){const We=t.targets[t.targetIndex];this.removeTracedCoordinates_(We.startIndex,We.endIndex)}const He=t.targets[Oe.index];this.addTracedCoordinates_(He,He.startIndex,Oe.endIndex)}else{const He=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(He,Oe.endIndex)}t.targetIndex=Oe.index;const ke=t.targets[t.targetIndex];ke.endIndex=Oe.endIndex;const Be=interpolateCoordinate(ke.coordinates,ke.endIndex),Ue=this.getMap().getPixelFromCoordinate(Be);e.coordinate=Be,e.pixel=[Math.round(Ue[0]),Math.round(Ue[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const Oe=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const ke=!this.finishCoordinate_;ke&&this.startDrawing_(e.coordinate),!ke&&this.freehand_?this.finishDrawing():!this.freehand_&&(!ke||this.mode_==="Point")&&(this.atFinish_(e.pixel,Oe)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,Oe=e.pixel,ke=t[0]-Oe[0],Be=t[1]-Oe[1],Ue=ke*ke+Be*Be;if(this.shouldHandle_=this.freehand_?Ue>this.squaredClickTolerance_:Ue<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let Oe=!1;if(this.sketchFeature_){let ke=!1,Be=[this.finishCoordinate_];const Ue=this.mode_;if(Ue==="Point")Oe=!0;else if(Ue==="Circle")Oe=this.sketchCoords_.length===2;else if(Ue==="LineString")ke=!t&&this.sketchCoords_.length>this.minPoints_;else if(Ue==="Polygon"){const He=this.sketchCoords_;ke=He[0].length>this.minPoints_,Be=[He[0][0],He[0][He[0].length-2]],t?Be=[He[0][0]]:Be=[He[0][0],He[0][He[0].length-2]]}if(ke){const He=this.getMap();for(let We=0,Cn=Be.length;We<Cn;We++){const An=Be[We],En=He.getPixelFromCoordinate(An),Sn=e[0]-En[0],Tn=e[1]-En[1],Ln=this.freehand_?1:this.snapTolerance_;if(Oe=Math.sqrt(Sn*Sn+Tn*Tn)<=Ln,Oe){this.finishCoordinate_=An;break}}}}return Oe}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let Oe=this.sketchLine_.getGeometry();Oe?(Oe.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),Oe.changed()):(Oe=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(Oe))}startDrawing_(e){const t=this.getMap().getView().getProjection(),Oe=getStrideForLayout(this.geometryLayout_);for(;e.length<Oe;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const ke=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(ke),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),Oe=this.sketchFeature_.getGeometry(),ke=t.getView().getProjection(),Be=getStrideForLayout(this.geometryLayout_);let Ue,He;for(;e.length<Be;)e.push(0);this.mode_==="Point"?He=this.sketchCoords_:this.mode_==="Polygon"?(Ue=this.sketchCoords_[0],He=Ue[Ue.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(Ue=this.sketchCoords_,He=Ue[Ue.length-1]),He[0]=e[0],He[1]=e[1],this.geometryFunction_(this.sketchCoords_,Oe,ke),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),Oe.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(Oe):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection();let ke,Be;const Ue=this.mode_;return Ue==="LineString"||Ue==="Circle"?(this.finishCoordinate_=e.slice(),Be=this.sketchCoords_,Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():ke=!0),Be.push(e.slice()),this.geometryFunction_(Be,t,Oe)):Ue==="Polygon"&&(Be=this.sketchCoords_[0],Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():ke=!0),Be.push(e.slice()),ke&&(this.finishCoordinate_=Be[0]),this.geometryFunction_(this.sketchCoords_,t,Oe)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),ke?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection(),ke=this.mode_;for(let Be=0;Be<e;++Be){let Ue;if(ke==="LineString"||ke==="Circle"){if(Ue=this.sketchCoords_,Ue.splice(-2,1),Ue.length>=2){this.finishCoordinate_=Ue[Ue.length-2].slice();const He=this.finishCoordinate_.slice();Ue[Ue.length-1]=He,this.createOrUpdateSketchPoint_(He)}this.geometryFunction_(Ue,t,Oe),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(ke==="Polygon"){Ue=this.sketchCoords_[0],Ue.splice(-2,1);const He=this.sketchLine_.getGeometry();if(Ue.length>=2){const We=Ue[Ue.length-2].slice();Ue[Ue.length-1]=We,this.createOrUpdateSketchPoint_(We)}He.setCoordinates(Ue),this.geometryFunction_(this.sketchCoords_,t,Oe)}if(Ue.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const Oe=e.getGeometry(),ke=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,Oe,ke)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,Oe,ke),t=Oe.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,Oe=!this.sketchFeature_;Oe&&this.startDrawing_(e[0]);let ke;if(t==="LineString"||t==="Circle")ke=this.sketchCoords_;else if(t==="Polygon")ke=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;Oe&&ke.shift(),ke.pop();for(let Ue=0;Ue<e.length;Ue++)this.addToDrawing_(e[Ue]);const Be=e[e.length-1];this.sketchFeature_=this.addToDrawing_(Be),this.modifyDrawing_(Be)}extend(e){const Oe=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=Oe.getCoordinates();const ke=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=ke.slice(),this.sketchCoords_.push(ke.slice()),this.sketchPoint_=new Feature(new Point$1(ke)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const Te=createEditingStyle();return function(e,t){return Te[e.getGeometry().getType()]}}function getMode(Te){switch(Te){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+Te)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const Oe=e.originalEvent,ke=Oe.key;if(this.condition_(e)&&(ke==Key.DOWN||ke==Key.LEFT||ke==Key.RIGHT||ke==Key.UP)){const Ue=e.map.getView(),He=Ue.getResolution()*this.pixelDelta_;let We=0,Cn=0;ke==Key.DOWN?Cn=-He:ke==Key.LEFT?We=-He:ke==Key.RIGHT?We=He:Cn=He;const An=[We,Cn];rotate$1(An,Ue.getRotation()),pan(Ue,An,this.duration_),Oe.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const Oe=e.originalEvent,ke=Oe.key;if(this.condition_(e)&&(ke==="+"||ke==="-")){const Be=e.map,Ue=ke==="+"?this.delta_:-this.delta_,He=Be.getView();zoomByDelta(He,Ue,void 0,this.duration_),Oe.preventDefault(),t=!0}}return!t}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.features=t,this.mapBrowserEvent=Oe}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(Oe){return altKeyOnly(Oe)&&singleClick(Oe)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const ke=this.SEGMENT_WRITERS_[t.getType()];ke&&ke(e,t)}const Oe=this.getMap();Oe&&Oe.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(Oe.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const Oe=this.featuresBeingModified_.getArray();for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=t[ke].feature;Ue&&!Oe.includes(Ue)&&this.featuresBeingModified_.push(Ue)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,Oe=[];t.forEach(function(ke){e===ke.feature&&Oe.push(ke)});for(let ke=Oe.length-1;ke>=0;--ke){const Be=Oe[ke];for(let Ue=this.dragSegments_.length-1;Ue>=0;--Ue)this.dragSegments_[Ue][0]===Be&&this.dragSegments_.splice(Ue,1);t.remove(Be)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const Oe=t.getCoordinates(),ke={feature:e,geometry:t,segment:[Oe,Oe]};this.rBush_.insert(t.getExtent(),ke)}writeMultiPointGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],He={feature:e,geometry:t,depth:[ke],index:ke,segment:[Ue,Ue]};this.rBush_.insert(t.getExtent(),He)}}writeLineStringGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length-1;ke<Be;++ke){const Ue=Oe.slice(ke,ke+2),He={feature:e,geometry:t,index:ke,segment:Ue};this.rBush_.insert(boundingExtent(Ue),He)}}writeMultiLineStringGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let He=0,We=Ue.length-1;He<We;++He){const Cn=Ue.slice(He,He+2),An={feature:e,geometry:t,depth:[ke],index:He,segment:Cn};this.rBush_.insert(boundingExtent(Cn),An)}}}writePolygonGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let He=0,We=Ue.length-1;He<We;++He){const Cn=Ue.slice(He,He+2),An={feature:e,geometry:t,depth:[ke],index:He,segment:Cn};this.rBush_.insert(boundingExtent(Cn),An)}}}writeMultiPolygonGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let He=0,We=Ue.length;He<We;++He){const Cn=Ue[He];for(let An=0,En=Cn.length-1;An<En;++An){const Sn=Cn.slice(An,An+2),Tn={feature:e,geometry:t,depth:[He,ke],index:An,segment:Sn};this.rBush_.insert(boundingExtent(Sn),Tn)}}}}writeCircleGeometry_(e,t){const Oe=t.getCenter(),ke={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[Oe,Oe]},Be={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[Oe,Oe]},Ue=[ke,Be];ke.featureSegments=Ue,Be.featureSegments=Ue,this.rBush_.insert(createOrUpdateFromCoordinate(Oe),ke);let He=t;this.rBush_.insert(He.getExtent(),Be)}writeGeometryCollectionGeometry_(e,t){const Oe=t.getGeometriesArray();for(let ke=0;ke<Oe.length;++ke){const Be=Oe[ke],Ue=this.SEGMENT_WRITERS_[Be.getType()];Ue(e,Be)}}createOrUpdateVertexFeature_(e,t,Oe,ke){let Be=this.vertexFeature_;return Be?Be.getGeometry().setCoordinates(e):(Be=new Feature(new Point$1(e)),this.vertexFeature_=Be,this.overlay_.getSource().addFeature(Be)),Be.set("features",t),Be.set("geometries",Oe),Be.set("existing",ke),Be}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const Oe=[],ke=t.getGeometry().getCoordinates(),Be=boundingExtent([ke]),Ue=this.rBush_.getInExtent(Be),He={};Ue.sort(compareIndexes);for(let We=0,Cn=Ue.length;We<Cn;++We){const An=Ue[We],En=An.segment;let Sn=getUid(An.geometry);const Tn=An.depth;if(Tn&&(Sn+="-"+Tn.join("-")),He[Sn]||(He[Sn]=new Array(2)),An.geometry.getType()==="Circle"&&An.index===CIRCLE_CIRCUMFERENCE_INDEX){const Ln=closestOnSegmentData(e,An);equals(Ln,ke)&&!He[Sn][0]&&(this.dragSegments_.push([An,0]),He[Sn][0]=An);continue}if(equals(En[0],ke)&&!He[Sn][0]){this.dragSegments_.push([An,0]),He[Sn][0]=An;continue}if(equals(En[1],ke)&&!He[Sn][1]){if(He[Sn][0]&&He[Sn][0].index===0){let Ln=An.geometry.getCoordinates();switch(An.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":Ln=Ln[Tn[1]];case"Polygon":if(An.index!==Ln[Tn[0]].length-2)continue;break}}this.dragSegments_.push([An,1]),He[Sn][1]=An;continue}getUid(En)in this.vertexSegments_&&!He[Sn][0]&&!He[Sn][1]&&Oe.push(An)}return Oe}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([Be])=>Be));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],Oe=[],ke=[];for(let Be=0,Ue=this.dragSegments_.length;Be<Ue;++Be){const He=this.dragSegments_[Be],We=He[0],Cn=We.feature;Oe.includes(Cn)||Oe.push(Cn);const An=We.geometry;ke.includes(An)||ke.push(An);const En=We.depth;let Sn;const Tn=We.segment,Ln=He[1];for(;t.length<An.getStride();)t.push(Tn[Ln][t.length]);switch(An.getType()){case"Point":Sn=t,Tn[0]=t,Tn[1]=t;break;case"MultiPoint":Sn=An.getCoordinates(),Sn[We.index]=t,Tn[0]=t,Tn[1]=t;break;case"LineString":Sn=An.getCoordinates(),Sn[We.index+Ln]=t,Tn[Ln]=t;break;case"MultiLineString":Sn=An.getCoordinates(),Sn[En[0]][We.index+Ln]=t,Tn[Ln]=t;break;case"Polygon":Sn=An.getCoordinates(),Sn[En[0]][We.index+Ln]=t,Tn[Ln]=t;break;case"MultiPolygon":Sn=An.getCoordinates(),Sn[En[1]][En[0]][We.index+Ln]=t,Tn[Ln]=t;break;case"Circle":const Bn=An;if(Tn[0]=t,Tn[1]=t,We.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,Bn.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let ti=distance(fromUserCoordinate(Bn.getCenter()),fromUserCoordinate(t));Bn.setRadius(ti),this.changingFeature_=!1}break}Sn&&this.setGeometryCoordinates_(An,Sn)}this.createOrUpdateVertexFeature_(t,Oe,ke,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,Oe=this.findInsertVerticesAndUpdateDragSegments_(t);if(Oe!=null&&Oe.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,Oe),this.vertexFeature_)){const ke=this.vertexFeature_.getGeometry().getCoordinates();for(let Be=Oe.length-1;Be>=0;--Be)this.insertVertex_(Oe[Be],ke);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const Oe=this.dragSegments_[t][0],ke=Oe.geometry;if(ke.getType()==="Circle"){const Be=ke,Ue=Be.getCenter(),He=Oe.featureSegments[0],We=Oe.featureSegments[1];He.segment[0]=Ue,He.segment[1]=Ue,We.segment[0]=Ue,We.segment[1]=Ue,this.rBush_.update(createOrUpdateFromCoordinate(Ue),He);let Cn=Be;this.rBush_.update(Cn.getExtent(),We)}else this.rBush_.update(boundingExtent(Oe.segment),Oe)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),Oe=t.getPixelFromCoordinate(e);t.getView().getProjection();const ke=function(He,We){return projectedDistanceToSegmentDataSquared(e,He)-projectedDistanceToSegmentDataSquared(e,We)};let Be,Ue;if(this.hitDetection_){const He=typeof this.hitDetection_=="object"?We=>We===this.hitDetection_:void 0;t.forEachFeatureAtPixel(Oe,(We,Cn,An)=>{An&&An.getType()==="Point"&&(An=new Point$1(toUserCoordinate(An.getCoordinates())));const En=An||We.getGeometry();if(En&&En.getType()==="Point"&&We instanceof Feature&&this.features_.getArray().includes(We)){Ue=En;const Sn=We.getGeometry().getFlatCoordinates().slice(0,2);Be=[{feature:We,geometry:Ue,segment:[Sn,Sn]}]}return!0},{layerFilter:He})}if(!Be){const He=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),We=t.getView().getResolution()*this.pixelTolerance_,Cn=toUserExtent(buffer(He,We,tempExtent));Be=this.rBush_.getInExtent(Cn)}if(Be&&Be.length>0){const He=Be.sort(ke)[0],We=He.segment;let Cn=closestOnSegmentData(e,He);const An=t.getPixelFromCoordinate(Cn);let En=distance(Oe,An);if(Ue||En<=this.pixelTolerance_){const Sn={};if(Sn[getUid(We)]=!0,this.snapToPointer_||(this.delta_[0]=Cn[0]-e[0],this.delta_[1]=Cn[1]-e[1]),He.geometry.getType()==="Circle"&&He.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(Cn,[He.feature],[He.geometry],this.snappedToVertex_);else{const Tn=t.getPixelFromCoordinate(We[0]),Ln=t.getPixelFromCoordinate(We[1]),Bn=squaredDistance(An,Tn),ti=squaredDistance(An,Ln);En=Math.sqrt(Math.min(Bn,ti)),this.snappedToVertex_=En<=this.pixelTolerance_,this.snappedToVertex_&&(Cn=Bn>ti?We[1]:We[0]),this.createOrUpdateVertexFeature_(Cn,[He.feature],[He.geometry],this.snappedToVertex_);const ni={};ni[getUid(He.geometry)]=!0;for(let ii=1,si=Be.length;ii<si;++ii){const oi=Be[ii].segment;if(equals(We[0],oi[0])&&equals(We[1],oi[1])||equals(We[0],oi[1])&&equals(We[1],oi[0])){const ci=getUid(Be[ii].geometry);ci in ni||(ni[ci]=!0,Sn[getUid(oi)]=!0)}else break}}this.vertexSegments_=Sn;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const Oe=e.segment,ke=e.feature,Be=e.geometry,Ue=e.depth,He=e.index;let We;for(;t.length<Be.getStride();)t.push(0);switch(Be.getType()){case"MultiLineString":We=Be.getCoordinates(),We[Ue[0]].splice(He+1,0,t);break;case"Polygon":We=Be.getCoordinates(),We[Ue[0]].splice(He+1,0,t);break;case"MultiPolygon":We=Be.getCoordinates(),We[Ue[1]][Ue[0]].splice(He+1,0,t);break;case"LineString":We=Be.getCoordinates(),We.splice(He+1,0,t);break;default:return!1}this.setGeometryCoordinates_(Be,We);const Cn=this.rBush_;Cn.remove(e),this.updateSegmentIndices_(Be,He,Ue,1);const An={segment:[Oe[0],t],feature:ke,geometry:Be,depth:Ue,index:He};Cn.insert(boundingExtent(An.segment),An),this.dragSegments_.push([An,1]);const En={segment:[t,Oe[1]],feature:ke,geometry:Be,depth:Ue,index:He+1};return Cn.insert(boundingExtent(En.segment),En),this.dragSegments_.push([En,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>equals(Oe[0],e)||equals(Oe[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([ke])=>ke));const Oe=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,Oe}return!1}removeVertex_(){const e=this.dragSegments_,t={};let Oe=!1,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln;for(We=e.length-1;We>=0;--We)Ue=e[We],Tn=Ue[0],Ln=getUid(Tn.feature),Tn.depth&&(Ln+="-"+Tn.depth.join("-")),Ln in t||(t[Ln]={}),Ue[1]===0?(t[Ln].right=Tn,t[Ln].index=Tn.index):Ue[1]==1&&(t[Ln].left=Tn,t[Ln].index=Tn.index+1);for(Ln in t){switch(Sn=t[Ln].right,An=t[Ln].left,Cn=t[Ln].index,En=Cn-1,An!==void 0?Tn=An:Tn=Sn,En<0&&(En=0),He=Tn.geometry,Be=He.getCoordinates(),ke=Be,Oe=!1,He.getType()){case"MultiLineString":Be[Tn.depth[0]].length>2&&(Be[Tn.depth[0]].splice(Cn,1),Oe=!0);break;case"LineString":Be.length>2&&(Be.splice(Cn,1),Oe=!0);break;case"MultiPolygon":ke=ke[Tn.depth[1]];case"Polygon":ke=ke[Tn.depth[0]],ke.length>4&&(Cn==ke.length-1&&(Cn=0),ke.splice(Cn,1),Oe=!0,Cn===0&&(ke.pop(),ke.push(ke[0]),En=ke.length-1));break}if(Oe){this.setGeometryCoordinates_(He,Be);const Bn=[];if(An!==void 0&&(this.rBush_.remove(An),Bn.push(An.segment[0])),Sn!==void 0&&(this.rBush_.remove(Sn),Bn.push(Sn.segment[1])),An!==void 0&&Sn!==void 0){const ti={depth:Tn.depth,feature:Tn.feature,geometry:Tn.geometry,index:En,segment:Bn};this.rBush_.insert(boundingExtent(ti.segment),ti)}this.updateSegmentIndices_(He,Cn,Tn.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return Oe}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>!(equals(Oe[0],e)||equals(Oe[1],e)))}insertPoint(e){var ke;const t=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(ke=this.vertexFeature_)==null?void 0:ke.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((Be,Ue)=>Be||this.insertVertex_(Ue,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,Oe,ke){this.rBush_.forEachInExtent(e.getExtent(),function(Be){Be.geometry===e&&(Oe===void 0||Be.depth===void 0||equals$2(Be.depth,Oe))&&Be.index>t&&(Be.index+=ke)})}}function compareIndexes(Te,e){return Te.index-e.index}function projectedDistanceToSegmentDataSquared(Te,e,t){const Oe=e.geometry;if(Oe.getType()==="Circle"){let Be=Oe;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const Ue=squaredDistance(Be.getCenter(),fromUserCoordinate(Te)),He=Math.sqrt(Ue)-Be.getRadius();return He*He}}const ke=fromUserCoordinate(Te);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(ke,tempSegment)}function closestOnSegmentData(Te,e,t){const Oe=e.geometry;if(Oe.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(Oe.getClosestPoint(fromUserCoordinate(Te)));const ke=fromUserCoordinate(Te);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(ke,tempSegment))}function getDefaultStyleFunction$1(){const Te=createEditingStyle();return function(e,t){return Te.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const Oe=e.map,ke=e.originalEvent;ke.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let Be;if(e.type==EventType.WHEEL&&(Be=ke.deltaY,FIREFOX&&ke.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Be/=DEVICE_PIXEL_RATIO),ke.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Be*=40)),Be===0)return!1;this.lastDelta_=Be;const Ue=Date.now();this.startTime_===void 0&&(this.startTime_=Ue),(!this.mode_||Ue-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Be)<4?"trackpad":"wheel");const He=Oe.getView();if(this.mode_==="trackpad"&&!(He.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(He.getAnimating()&&He.cancelAnimations(),He.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),He.adjustZoom(-Be/this.deltaPerZoom_,this.lastAnchor_?Oe.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=Ue,!1;this.totalDelta_+=Be;const We=Math.max(this.timeout_-(Ue-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,Oe),We),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let Oe=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(Oe=Oe?Oe>0?1:-1:0),zoomByDelta(t,Oe,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const Oe=this.targetPointers[0],ke=this.targetPointers[1],Be=Math.atan2(ke.clientY-Oe.clientY,ke.clientX-Oe.clientX);if(this.lastAngle_!==void 0){const We=Be-this.lastAngle_;this.rotationDelta_+=We,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=We}this.lastAngle_=Be;const Ue=e.map,He=Ue.getView();He.getConstraints().rotation!==disable&&(this.anchor_=Ue.getCoordinateFromPixelInternal(Ue.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(Ue.render(),He.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const Oe=this.targetPointers[0],ke=this.targetPointers[1],Be=Oe.clientX-ke.clientX,Ue=Oe.clientY-ke.clientY,He=Math.sqrt(Be*Be+Ue*Ue);this.lastDistance_!==void 0&&(t=this.lastDistance_/He),this.lastDistance_=He;const We=e.map,Cn=We.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=We.getCoordinateFromPixelInternal(We.getEventPixel(centroid(this.targetPointers))),We.render(),Cn.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const Oe=e.map.getView(),ke=this.lastScaleDelta_>1?1:-1;return Oe.endInteraction(this.duration_,ke),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,Oe,ke){super(e),this.selected=t,this.deselected=Oe,this.mapBrowserEvent=ke}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const Oe=e.layers;t=function(ke){return Oe.includes(ke)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const Oe=this.getMap().getAllLayers().find(function(ke){if(ke instanceof VectorLayer&&ke.getSource()&&ke.getSource().hasFeature(t))return ke});Oe&&this.addFeatureLayerAssociation_(t,Oe)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let ke=t.length-1;ke>=0;--ke){const Be=t[ke];if(Be!==this&&Be instanceof Select&&Be.getStyle()&&Be.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Be.getStyle());return}}const Oe=getUid(e);e.setStyle(originalFeatureStyles[Oe]),delete originalFeatureStyles[Oe]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),Oe=this.removeCondition_(e),ke=this.toggleCondition_(e),Be=!t&&!Oe&&!ke,Ue=e.map,He=this.getFeatures(),We=[],Cn=[];if(Be){clear$1(this.featureLayerAssociation_),Ue.forEachFeatureAtPixel(e.pixel,(An,En)=>{if(!(!(An instanceof Feature)||!this.filter_(An,En)))return this.addFeatureLayerAssociation_(An,En),Cn.push(An),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let An=He.getLength()-1;An>=0;--An){const En=He.item(An),Sn=Cn.indexOf(En);Sn>-1?Cn.splice(Sn,1):(He.remove(En),We.push(En))}Cn.length!==0&&He.extend(Cn)}else{Ue.forEachFeatureAtPixel(e.pixel,(An,En)=>{if(!(!(An instanceof Feature)||!this.filter_(An,En)))return(t||ke)&&!He.getArray().includes(An)?(this.addFeatureLayerAssociation_(An,En),Cn.push(An)):(Oe||ke)&&He.getArray().includes(An)&&(We.push(An),this.removeFeatureLayerAssociation_(An)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let An=We.length-1;An>=0;--An)He.remove(We[An]);He.extend(Cn)}return(Cn.length>0||We.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,Cn,We,e)),!0}}function getDefaultStyleFunction(){const Te=createEditingStyle();return extend$4(Te.Polygon,Te.LineString),extend$4(Te.GeometryCollection,Te.LineString),function(e){return e.getGeometry()?Te[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,t,Oe){this.decay_=e,this.minVelocity_=t,this.delay_=Oe,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let Oe=t-3;for(;Oe>0&&this.points_[Oe+2]>e;)Oe-=3;const ke=this.points_[t+2]-this.points_[Oe+2];if(ke<1e3/60)return!1;const Be=this.points_[t]-this.points_[Oe],Ue=this.points_[t+1]-this.points_[Oe+1];return this.angle_=Math.atan2(Ue,Be),this.initialVelocity_=Math.sqrt(Be*Be+Ue*Ue)/ke,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(Te){Te=Te||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(Te.altShiftDragRotate!==void 0?Te.altShiftDragRotate:!0)&&e.push(new DragRotate),(Te.doubleClickZoom!==void 0?Te.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:Te.zoomDelta,duration:Te.zoomDuration})),(Te.dragPan!==void 0?Te.dragPan:!0)&&e.push(new DragPan({onFocusOnly:Te.onFocusOnly,kinetic:t})),(Te.pinchRotate!==void 0?Te.pinchRotate:!0)&&e.push(new PinchRotate),(Te.pinchZoom!==void 0?Te.pinchZoom:!0)&&e.push(new PinchZoom({duration:Te.zoomDuration})),(Te.keyboard!==void 0?Te.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:Te.zoomDelta,duration:Te.zoomDuration}))),(Te.mouseWheelZoom!==void 0?Te.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:Te.onFocusOnly,duration:Te.zoomDuration})),(Te.shiftDragZoom!==void 0?Te.shiftDragZoom:!0)&&e.push(new DragZoom({duration:Te.zoomDuration})),e}var loglevel={exports:{}};(function(Te){(function(e,t){Te.exports?Te.exports=t():e.log=t()})(commonjsGlobal,function(){var e=function(){},t="undefined",Oe=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),ke=["trace","debug","info","warn","error"],Be={},Ue=null;function He(Bn,ti){var ni=Bn[ti];if(typeof ni.bind=="function")return ni.bind(Bn);try{return Function.prototype.bind.call(ni,Bn)}catch{return function(){return Function.prototype.apply.apply(ni,[Bn,arguments])}}}function We(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function Cn(Bn){return Bn==="debug"&&(Bn="log"),typeof console===t?!1:Bn==="trace"&&Oe?We:console[Bn]!==void 0?He(console,Bn):console.log!==void 0?He(console,"log"):e}function An(){for(var Bn=this.getLevel(),ti=0;ti<ke.length;ti++){var ni=ke[ti];this[ni]=ti<Bn?e:this.methodFactory(ni,Bn,this.name)}if(this.log=this.debug,typeof console===t&&Bn<this.levels.SILENT)return"No console available for logging"}function En(Bn){return function(){typeof console!==t&&(An.call(this),this[Bn].apply(this,arguments))}}function Sn(Bn,ti,ni){return Cn(Bn)||En.apply(this,arguments)}function Tn(Bn,ti){var ni=this,ii,si,oi,ci="loglevel";typeof Bn=="string"?ci+=":"+Bn:typeof Bn=="symbol"&&(ci=void 0);function vi(ui){var li=(ke[ui]||"silent").toUpperCase();if(!(typeof window===t||!ci)){try{window.localStorage[ci]=li;return}catch{}try{window.document.cookie=encodeURIComponent(ci)+"="+li+";"}catch{}}}function pi(){var ui;if(!(typeof window===t||!ci)){try{ui=window.localStorage[ci]}catch{}if(typeof ui===t)try{var li=window.document.cookie,Ri=encodeURIComponent(ci),Pi=li.indexOf(Ri+"=");Pi!==-1&&(ui=/^([^;]+)/.exec(li.slice(Pi+Ri.length+1))[1])}catch{}return ni.levels[ui]===void 0&&(ui=void 0),ui}}function fi(){if(!(typeof window===t||!ci)){try{window.localStorage.removeItem(ci)}catch{}try{window.document.cookie=encodeURIComponent(ci)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Mi(ui){var li=ui;if(typeof li=="string"&&ni.levels[li.toUpperCase()]!==void 0&&(li=ni.levels[li.toUpperCase()]),typeof li=="number"&&li>=0&&li<=ni.levels.SILENT)return li;throw new TypeError("log.setLevel() called with invalid level: "+ui)}ni.name=Bn,ni.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ni.methodFactory=ti||Sn,ni.getLevel=function(){return oi??si??ii},ni.setLevel=function(ui,li){return oi=Mi(ui),li!==!1&&vi(oi),An.call(ni)},ni.setDefaultLevel=function(ui){si=Mi(ui),pi()||ni.setLevel(ui,!1)},ni.resetLevel=function(){oi=null,fi(),An.call(ni)},ni.enableAll=function(ui){ni.setLevel(ni.levels.TRACE,ui)},ni.disableAll=function(ui){ni.setLevel(ni.levels.SILENT,ui)},ni.rebuild=function(){if(Ue!==ni&&(ii=Mi(Ue.getLevel())),An.call(ni),Ue===ni)for(var ui in Be)Be[ui].rebuild()},ii=Mi(Ue?Ue.getLevel():"WARN");var Oi=pi();Oi!=null&&(oi=Mi(Oi)),An.call(ni)}Ue=new Tn,Ue.getLogger=function(ti){if(typeof ti!="symbol"&&typeof ti!="string"||ti==="")throw new TypeError("You must supply a name when creating a logger.");var ni=Be[ti];return ni||(ni=Be[ti]=new Tn(ti,Ue.methodFactory)),ni};var Ln=typeof window!==t?window.log:void 0;return Ue.noConflict=function(){return typeof window!==t&&window.log===Ue&&(window.log=Ln),Ue},Ue.getLoggers=function(){return Be},Ue.default=Ue,Ue})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(Te){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Te||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(Te,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),Oe=t.shift(),ke=t,Be=this[Oe];try{Array.isArray(ke)&&ke.length>0?Be=Be.replace("%var%",ke.join(" - ")):Be=Be.replace("%var%","%var% (not specified)")}catch{}return Be}},Helper$1={normalyzeParameters:function(Te){var e=null;if(Te){var t=[];for(var Oe in Te)if(Te.hasOwnProperty(Oe)){var ke=Te[Oe];ke||(ke=""),t.push(Oe+"="+ke)}e=t.join("&")}return e},normalyzeUrl:function(Te,e,t){var Oe=Te;if(Te){if(Te.split("?").length-1>=2){var ke=Te.search(/\?/)+1;Oe=Te.substring(0,ke)+Te.slice(ke).replace(/\?/g,"&")}var Be=Te.indexOf("?");Be===-1&&(Oe+="?"),Be!==-1&&Be!==Te.length-1&&(Oe+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),Oe+=e):Oe+=this.normalyzeParameters(e)),t&&(Oe=encodeURIComponent(Oe)),Oe},indent:function(Te,e){var t=Te||0;return new Array(t+1).join("	")+e}};function commonjsRequire(Te){throw new Error('Could not dynamically require "'+Te+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(Te,e){(function(t,Oe){Te.exports=Oe()})(commonjsGlobal,function(){function t(Cr){var Er=typeof Cr;return Cr!==null&&(Er==="object"||Er==="function")}function Oe(Cr){return typeof Cr=="function"}var ke=void 0;Array.isArray?ke=Array.isArray:ke=function(Cr){return Object.prototype.toString.call(Cr)==="[object Array]"};var Be=ke,Ue=0,He=void 0,We=void 0,Cn=function(Er,Sr){vi[Ue]=Er,vi[Ue+1]=Sr,Ue+=2,Ue===2&&(We?We(pi):Mi())};function An(Cr){We=Cr}function En(Cr){Cn=Cr}var Sn=typeof window<"u"?window:void 0,Tn=Sn||{},Ln=Tn.MutationObserver||Tn.WebKitMutationObserver,Bn=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ni(){return function(){return process.nextTick(pi)}}function ii(){return typeof He<"u"?function(){He(pi)}:ci()}function si(){var Cr=0,Er=new Ln(pi),Sr=document.createTextNode("");return Er.observe(Sr,{characterData:!0}),function(){Sr.data=Cr=++Cr%2}}function oi(){var Cr=new MessageChannel;return Cr.port1.onmessage=pi,function(){return Cr.port2.postMessage(0)}}function ci(){var Cr=setTimeout;return function(){return Cr(pi,1)}}var vi=new Array(1e3);function pi(){for(var Cr=0;Cr<Ue;Cr+=2){var Er=vi[Cr],Sr=vi[Cr+1];Er(Sr),vi[Cr]=void 0,vi[Cr+1]=void 0}Ue=0}function fi(){try{var Cr=Function("return this")().require("vertx");return He=Cr.runOnLoop||Cr.runOnContext,ii()}catch{return ci()}}var Mi=void 0;Bn?Mi=ni():Ln?Mi=si():ti?Mi=oi():Sn===void 0&&typeof commonjsRequire=="function"?Mi=fi():Mi=ci();function Oi(Cr,Er){var Sr=this,Gr=new this.constructor(Ri);Gr[li]===void 0&&tr(Gr);var zr=Sr._state;if(zr){var $r=arguments[zr-1];Cn(function(){return _r(zr,Gr,$r,Sr._result)})}else hr(Sr,Gr,Cr,Er);return Gr}function ui(Cr){var Er=this;if(Cr&&typeof Cr=="object"&&Cr.constructor===Er)return Cr;var Sr=new Er(Ri);return or(Sr,Cr),Sr}var li=Math.random().toString(36).substring(2);function Ri(){}var Pi=void 0,Fi=1,Hi=2;function nr(){return new TypeError("You cannot resolve a promise with itself")}function ar(){return new TypeError("A promises callback cannot return that same promise.")}function cr(Cr,Er,Sr,Gr){try{Cr.call(Er,Sr,Gr)}catch(zr){return zr}}function sr(Cr,Er,Sr){Cn(function(Gr){var zr=!1,$r=cr(Sr,Er,function(Hr){zr||(zr=!0,Er!==Hr?or(Gr,Hr):fr(Gr,Hr))},function(Hr){zr||(zr=!0,mr(Gr,Hr))},"Settle: "+(Gr._label||" unknown promise"));!zr&&$r&&(zr=!0,mr(Gr,$r))},Cr)}function br(Cr,Er){Er._state===Fi?fr(Cr,Er._result):Er._state===Hi?mr(Cr,Er._result):hr(Er,void 0,function(Sr){return or(Cr,Sr)},function(Sr){return mr(Cr,Sr)})}function Ni(Cr,Er,Sr){Er.constructor===Cr.constructor&&Sr===Oi&&Er.constructor.resolve===ui?br(Cr,Er):Sr===void 0?fr(Cr,Er):Oe(Sr)?sr(Cr,Er,Sr):fr(Cr,Er)}function or(Cr,Er){if(Cr===Er)mr(Cr,nr());else if(t(Er)){var Sr=void 0;try{Sr=Er.then}catch(Gr){mr(Cr,Gr);return}Ni(Cr,Er,Sr)}else fr(Cr,Er)}function er(Cr){Cr._onerror&&Cr._onerror(Cr._result),vr(Cr)}function fr(Cr,Er){Cr._state===Pi&&(Cr._result=Er,Cr._state=Fi,Cr._subscribers.length!==0&&Cn(vr,Cr))}function mr(Cr,Er){Cr._state===Pi&&(Cr._state=Hi,Cr._result=Er,Cn(er,Cr))}function hr(Cr,Er,Sr,Gr){var zr=Cr._subscribers,$r=zr.length;Cr._onerror=null,zr[$r]=Er,zr[$r+Fi]=Sr,zr[$r+Hi]=Gr,$r===0&&Cr._state&&Cn(vr,Cr)}function vr(Cr){var Er=Cr._subscribers,Sr=Cr._state;if(Er.length!==0){for(var Gr=void 0,zr=void 0,$r=Cr._result,Hr=0;Hr<Er.length;Hr+=3)Gr=Er[Hr],zr=Er[Hr+Sr],Gr?_r(Sr,Gr,zr,$r):zr($r);Cr._subscribers.length=0}}function _r(Cr,Er,Sr,Gr){var zr=Oe(Sr),$r=void 0,Hr=void 0,as=!0;if(zr){try{$r=Sr(Gr)}catch(Kr){as=!1,Hr=Kr}if(Er===$r){mr(Er,ar());return}}else $r=Gr;Er._state!==Pi||(zr&&as?or(Er,$r):as===!1?mr(Er,Hr):Cr===Fi?fr(Er,$r):Cr===Hi&&mr(Er,$r))}function Ar(Cr,Er){try{Er(function(Gr){or(Cr,Gr)},function(Gr){mr(Cr,Gr)})}catch(Sr){mr(Cr,Sr)}}var Vr=0;function Wr(){return Vr++}function tr(Cr){Cr[li]=Vr++,Cr._state=void 0,Cr._result=void 0,Cr._subscribers=[]}function pr(){return new Error("Array Methods must be provided an Array")}var ur=function(){function Cr(Er,Sr){this._instanceConstructor=Er,this.promise=new Er(Ri),this.promise[li]||tr(this.promise),Be(Sr)?(this.length=Sr.length,this._remaining=Sr.length,this._result=new Array(this.length),this.length===0?fr(this.promise,this._result):(this.length=this.length||0,this._enumerate(Sr),this._remaining===0&&fr(this.promise,this._result))):mr(this.promise,pr())}return Cr.prototype._enumerate=function(Sr){for(var Gr=0;this._state===Pi&&Gr<Sr.length;Gr++)this._eachEntry(Sr[Gr],Gr)},Cr.prototype._eachEntry=function(Sr,Gr){var zr=this._instanceConstructor,$r=zr.resolve;if($r===ui){var Hr=void 0,as=void 0,Kr=!1;try{Hr=Sr.then}catch(ms){Kr=!0,as=ms}if(Hr===Oi&&Sr._state!==Pi)this._settledAt(Sr._state,Gr,Sr._result);else if(typeof Hr!="function")this._remaining--,this._result[Gr]=Sr;else if(zr===Tr){var Ss=new zr(Ri);Kr?mr(Ss,as):Ni(Ss,Sr,Hr),this._willSettleAt(Ss,Gr)}else this._willSettleAt(new zr(function(ms){return ms(Sr)}),Gr)}else this._willSettleAt($r(Sr),Gr)},Cr.prototype._settledAt=function(Sr,Gr,zr){var $r=this.promise;$r._state===Pi&&(this._remaining--,Sr===Hi?mr($r,zr):this._result[Gr]=zr),this._remaining===0&&fr($r,this._result)},Cr.prototype._willSettleAt=function(Sr,Gr){var zr=this;hr(Sr,void 0,function($r){return zr._settledAt(Fi,Gr,$r)},function($r){return zr._settledAt(Hi,Gr,$r)})},Cr}();function Ki(Cr){return new ur(this,Cr).promise}function Nr(Cr){var Er=this;return Be(Cr)?new Er(function(Sr,Gr){for(var zr=Cr.length,$r=0;$r<zr;$r++)Er.resolve(Cr[$r]).then(Sr,Gr)}):new Er(function(Sr,Gr){return Gr(new TypeError("You must pass an array to race."))})}function Or(Cr){var Er=this,Sr=new Er(Ri);return mr(Sr,Cr),Sr}function Ir(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Mr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Tr=function(){function Cr(Er){this[li]=Wr(),this._result=this._state=void 0,this._subscribers=[],Ri!==Er&&(typeof Er!="function"&&Ir(),this instanceof Cr?Ar(this,Er):Mr())}return Cr.prototype.catch=function(Sr){return this.then(null,Sr)},Cr.prototype.finally=function(Sr){var Gr=this,zr=Gr.constructor;return Oe(Sr)?Gr.then(function($r){return zr.resolve(Sr()).then(function(){return $r})},function($r){return zr.resolve(Sr()).then(function(){throw $r})}):Gr.then(Sr,Sr)},Cr}();Tr.prototype.then=Oi,Tr.all=Ki,Tr.race=Nr,Tr.resolve=ui,Tr.reject=Or,Tr._setScheduler=An,Tr._setAsap=En,Tr._asap=Cn;function wr(){var Cr=void 0;if(typeof commonjsGlobal<"u")Cr=commonjsGlobal;else if(typeof self<"u")Cr=self;else try{Cr=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Er=Cr.Promise;if(Er){var Sr=null;try{Sr=Object.prototype.toString.call(Er.resolve())}catch{}if(Sr==="[object Promise]"&&!Er.cast)return}Cr.Promise=Tr}return Tr.polyfill=wr,Tr.Promise=Tr,Tr})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(Te){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!Te.url)throw new Error("missing parameter : url is not defined !");if(!Te.method)throw new Error("missing parameter : method is not defined !");Te.format||(Te.format="text");var t={};switch(t.url=Te.url,t.data=Te.data?Te.data:null,t.method=Te.method,t.timeOut=Te.timeOut||0,t.scope=Te.scope||this,t.proxy=Te.proxy||null,t.content=Te.content||null,t.headers=Te.headers||{referer:"http://localhost"},Te.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=Te.content?Te.content:"application/x-www-form-urlencoded",t.headers=Te.headers?Te.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(Te.format){case"text":this.__call(t).then(function(Oe){e.trace(Oe),Te.onResponse.call(this,Oe)}).catch(function(Oe){Te.onFailure.call(this,Oe)});break;case"json":this.__callJSON(t).then(function(Oe){e.trace(Oe),Te.onResponse.call(this,Oe)}).catch(function(Oe){Te.onFailure.call(this,Oe)});break;case"xml":this.__callXML(t).then(function(Oe){e.trace(Oe),Te.onResponse.call(this,Oe)}).catch(function(Oe){Te.onFailure.call(this,Oe)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(Te){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(Oe,ke){var Be=Te.method==="POST"||Te.method==="PUT"?1:0;Te.data&&(typeof Te.data=="object"&&Object.keys(Te.data).length||typeof Te.data=="string"&&Te.data.length)&&!Be&&(Te.url=Helper$1.normalyzeUrl(Te.url,Te.data)),e.trace("URL = ",Te.url);var Ue=null;if(typeof window>"u"){var He=require("node-fetch"),We={headers:{Referer:"https://localhost"}};return Te.data&&typeof Te.data=="string"&&Be&&(We={method:Te.method,body:Te.data,headers:{"Content-Type":Te.content,Referer:"https://localhost"}}),He(Te.url,We).then(function(Sn){if(Sn.ok)Oe(Sn.text());else{var Tn="Errors Occured on Http Request (status : '"+Sn.statusText+"' | url : '"+Sn.url+"')",Ln=Sn.status;ke({message:Tn,status:Ln})}}).catch(function(Sn){ke({message:Sn,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),Ue=new XMLHttpRequest,Ue.open(Te.method,Te.url,!0),Ue.overrideMimeType=Te.content;var Cn=null;Te.timeOut>0&&(e.trace("XHR - TimeOut actif !"),Cn=window.setTimeout(function(){var Sn="TimeOut Occured on Http Request with XMLHttpRequest !";ke({message:Sn,status:-1})},Te.timeOut)),Be&&(e.trace("data = ",Te.data),Ue.setRequestHeader("Content-type",Te.content)),Ue.onerror=function(Sn){console.log(Sn),ke(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Ue.ontimeout=function(Sn){console.log(Sn),ke(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Ue.onreadystatechange=function(Sn){if(Ue.readyState===4)if(Ue.status===200)window.clearTimeout(Cn),Oe(Ue.response);else{var Tn="Errors Occured on Http Request (status : '"+Sn.target.statusText+"' | url : '"+Sn.target.responseURL+"' | response : '"+Sn.target.response+"')",Ln=Sn.target.status;ke({message:Tn,status:Ln})}};var An=Te.data&&Be?Te.data:null;Ue.send(An)}else if(window.XDomainRequest){e.trace("XDomainRequest"),Ue=new XDomainRequest,Ue.open(Te.method,Te.url),Ue.overrideMimeType=Te.content,Te.timeOut>0&&(Ue.timeout=Te.timeout,e.trace("XHR - TimeOut actif !")),Be&&Ue.setRequestHeader("Content-type",Te.content),Ue.onerror=function(){ke(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Ue.ontimeout=function(){ke(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Ue.onload=function(Sn){if(Ue.status===200)Oe(Ue.responseText);else{var Tn="Errors Occured on Http Request (status : '"+Sn.target.statusText+"' | url : '"+Sn.target.responseURL+"')",Ln=Sn.target.status;ke({message:Tn,status:Ln})}};var En=Te.data&&Be?Te.data:null;Ue.send(En)}else throw new Error("CORS not supported")});return t},__callJSON:function(Te){return this.__call(Te).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",Te.url,e)})},__callXML:function(Te){return this.__call(Te).then(function(e){var t;if(typeof window>"u"){var Oe=require("@xmldom/xmldom").DOMParser;t=new Oe().parseFromString(e,"text/xml")}else if(window.DOMParser){var ke=new window.DOMParser;t=ke.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",Te.url,e)})}},JSONP={uuid:function(){var Te=Math.floor(Date.now());return function(){return Te++}}(),call:function(Te){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!Te)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!Te.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(Te.timeOut||(e.info("setting 'options.timeOut' default value"),Te.timeOut=0),!Te.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof Te.callbackSuffix=="string"?Te.callbackSuffix:this.uuid(),Oe=!1,ke=!1,Be=Te.url.indexOf("callback=");if(Be!==-1){Oe=!0;var Ue=Te.url.indexOf("&",Be);Ue===-1&&(Ue=Te.url.length);var He=Te.url.substring(Be+9,Ue);He&&(ke=!0,Te.callbackName=He,e.info("setting 'options.callbackName' value ("+Te.callbackName+") from 'options.url' parameter"))}if(!Oe){var We=Te.url.indexOf("?");We===-1?Te.url=Te.url+"?callback=":We===Te.url.length?Te.url=Te.url+"callback=":Te.url=Te.url+"&callback=",e.info("setting callback default key in 'options.url' : "+Te.url)}var Cn=Te.callbackName?!0:ke;if(ke||(Te.callbackName||(e.info("setting 'options.callbackName' default value"),Te.callbackName="callback",(t||t==="")&&(Te.callbackName+=t)),Te.url=Te.url.replace("callback=","callback="+Te.callbackName),e.info("setting callback function name in 'options.url' : "+Te.url)),Te.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),Te.onTimeOut=function(){console.log("TimeOut while invoking url : "+Te.url)}),!Cn){var An=this,En=null;Te.timeOut>0&&(En=window.setTimeout(function(){window[Te.callbackName]=function(){},Te.onTimeOut(),An._deleteScript(t)},Te.timeOut)),window[Te.callbackName]=function(Sn){window.clearTimeout(En),Te.onResponse(Sn),An._deleteScript(t)}}this._createScript(t,Te.url)},_createScript:function(Te,e){var t,Oe=document.getElementById("results"+Te);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+Te),t.setAttribute("async","true");var ke=document.documentElement||document.getElementsByTagName("head")[0];Oe===null?ke.appendChild(t):ke.replaceChild(t,Oe)},_deleteScript:function(Te){var e=document.getElementById("results"+Te);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(Te){var e=Te||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&Te.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(Te.protocol==="XHR"||Te.format==="json"?e.wrap=!1:Te.protocol==="JSONP"&&Te.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper$1.normalyzeUrl(Te.url,t)}switch(e.protocol){case"XHR":Te.method==="GET"&&Te.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(Te){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=Te;typeof Te=="string"||Te instanceof String?(this.message=Te,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$1="3.4.6",date="19/12/2024",Pkg={version:version$1,date};function CommonService(Te){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(Oe){console.log("onSuccess - la reponse est la suivante : ",Oe)},onFailure:function(Oe){Oe.status===200||!Oe.status?console.log("onFailure : ",Oe.message):console.log("onFailure - Erreur (",Oe.status,") : ",Oe.message)}};for(var e in Te)Te.hasOwnProperty(e)&&(this.options[e]=Te[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(Oe){console.log("onSuccess - la réponse brute du service est la suivante : ",Oe)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof Te.httpMethod=="string"?Te.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof Te.protocol=="string"?Te.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=Te.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var Te=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(Te,Be,t)}e.call(Te);function t(Ue){this.logger.trace("CommonService::onBuildRequest : ",Ue),this.callService.call(Te,Be,Oe)}function Oe(Ue){this.logger.trace("CommonService::onCallService : ",Ue),this.analyzeResponse.call(Te,Be,ke)}function ke(Ue){if(this.logger.trace("CommonService::onAnalyzeResponse : ",Ue),Ue)this.options.onSuccess.call(this,Ue);else return Be.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function Be(Ue){this.logger.trace("CommonService::onError()");var He=Ue;He instanceof ErrorService||(He=new ErrorService(Ue.message)),this.options.onFailure.call(this,He)}},buildRequest:function(Te,e){this.logger.error("overwritten method !"),Te&&Te.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(Te,e){var t=null,Oe=this.request,ke=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Be={"gp-access-lib":Pkg.version};this.options.apiKey&&(Be.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Be,!1),ke&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),Oe=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),Oe=this.request));var Ue=this,He={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:Oe,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(We){Ue.logger.trace("callService::onResponse()");var Cn=null;if(Ue.options.protocol==="XHR"&&(Ue.logger.trace("Response XHR",We),Cn=We),Ue.options.protocol==="JSONP")if(Ue.logger.trace("Response JSON",We),We)if(We.http)if(We.http.status!==200){Te.call(Ue,new ErrorService({status:We.http.status,message:We.http.error,type:ErrorService.TYPE_SRVERR}));return}else Cn=We.xml,Ue.options.rawResponse&&(Cn=We);else Cn=We;else{Te.call(Ue,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof Ue.options.onBeforeParse=="function"){var An=Ue.options.onBeforeParse(Cn);typeof An=="string"&&(Cn=An)}Ue.response=Cn,e.call(Ue,Cn)},onFailure:function(We){Ue.logger.trace("callService::onFailure()"),We.type=ErrorService.TYPE_SRVERR,Te.call(Ue,new ErrorService(We))},onTimeOut:function(){Ue.logger.trace("callService::onTimeOut()"),Te.call(Ue,new ErrorService("TimeOut!"))}};Protocol.send(He)},analyzeResponse:function(Te,e){this.logger.error("overwritten method !"),Te&&Te.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(Te){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+Te},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(Te){Array.isArray(Te)||(Te=Te.split(","));for(var e=[],t=0;t<Te.length;t++)e[t]=this._key+Te[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(Te){if(Te)return!!this.generalOptions.apiKeys[Te]},getLayersId:function(Te){return this.generalOptions.apiKeys[Te]},getLayerId:function(Te,e){if(!(!Te||!e)){var t=null;if(this.layers){var Oe=this.layers;for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=ke.split("$");if(Te===Be[0]&&Be[1]){var Ue=Be[1].split(":"),He=Be[1].split(";");if(He[1]===e.toUpperCase()){t=ke;break}if(Ue[2]===e.toUpperCase()){t=ke;break}}}}if(t)return t}},getLayersConf:function(Te){var e={},t=this.getLayersId(Te);if(t)for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];e[ke]=this.layers[ke]}return e},getLayerConf:function(Te){if(this.layers)return this.layers[Te]},getLayerParams:function(Te,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var Oe=this.getLayerId(Te,e);if(Oe){var ke=this.getLayerConf(Oe),Be=this.getLayerKey(Oe);if(Be.length===0)return;for(var Ue=0;Ue<Be.length;Ue++)ke.serviceParams.serverUrl[Be[Ue]]&&(t.url=ke.serviceParams.serverUrl[Be[Ue]]);if(e!=="WFS"&&(/\/v\//.test(t.url)?t.styles=" ":t.styles=ke.styles[0].name),t.version=ke.serviceParams.version,t.format=ke.formats&&ke.formats.length?ke.formats[0].name:"",t.projection=ke.defaultProjection,t.minScale=ke.globalConstraint.minScaleDenominator,t.maxScale=ke.globalConstraint.maxScaleDenominator,t.extent=ke.globalConstraint.bbox,t.legends=ke.legends,t.title=ke.title,t.description=ke.description,e==="WMS"&&(t.metadata=ke.metadata),ke.wmtsOptions){t.tileMatrixSetLimits=ke.wmtsOptions.tileMatrixSetLimits;var He=ke.wmtsOptions.tileMatrixSetLink;if(He){t.TMSLink=He;var We=this.getTMSConf(He);t.matrixIds=Object.keys(We.tileMatrices),t.tileMatrices=We.tileMatrices,t.nativeResolutions=We.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(Te){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var Oe in t){var ke=t[Oe];ke.forEach(function(Be){Be===Te&&e.push(Oe)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(Te){if(this.tileMatrixSets)return this.tileMatrixSets[Te]},getGlobalConstraints:function(Te){var e={};if(Te){var t=this.getLayerConf(Te);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config$1(Te){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=Te.onSuccess!==null&&typeof Te.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!Te.apiKey&&!Te.customConfigFile&&(Te.apiKey="full"),this.options={},this.options.onSuccess=Te.onSuccess,this.options.onFailure=Te.onFailure,this.options.sync=Te.sync||!1,this.options.listConfigUrls=Te.customConfigFile?[Te.customConfigFile]:Array.isArray(Te.apiKey)?DefaultUrlService.Config.url(Te.apiKey):DefaultUrlService.Config.url(Te.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(Te,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){Te.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(Te,e){this.options.sync?__callServiceSync.call(this,Te,e):__callService.call(this,Te,e)};var __callService=function(Te,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var Oe=require("node-fetch");t=Oe}else t=window.fetch;var ke=Ue=>t(Ue,{credentials:"same-origin"}).then(He=>{if(He.ok)return He.json().then(We=>We).catch(We=>{throw new Error("Exception Json : "+We)});throw new Error("Exception HTTP : "+He.status+" (status code) !")}).catch(He=>new Promise((We,Cn)=>{Cn(He)})),Be=[];for(let Ue=0;Ue<this.listConfigUrls.length;Ue++){const He=this.listConfigUrls[Ue];Be.push(ke(He))}Promise.all(Be).then(Ue=>{if(!Ue)throw new Error("results config empty !?");Ue.forEach(He=>{this.listConfigResults.push(He)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(Ue=>{Te.call(this,Ue)})},__callServiceSync=function(Te,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const ke=this.listConfigUrls[t],Be=new XMLHttpRequest;if(Be.open("GET",ke,!1),Be.send(null),Be.status===200){var Oe=JSON.parse(Be.responseText);this.listConfigResults.push(Oe)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):Te.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(Te,e){var t=function(He){for(var We={},Cn={},An={},En=0;En<He.length;En++){if(!He[En].generalOptions||!He[En].layers)return;Cn={...Cn,...He[En].generalOptions.apiKeys},We={...We,...He[En].layers},An={...An,...He[En].tileMatrixSets}}var Sn={generalOptions:{apiKeys:Cn},layers:We,tileMatrixSets:An};return Sn},Oe=t(this.listConfigResults);if(!Oe){Te.call(this,new Error("configuration structure not conforme !"));return}var ke=new ConfigInterface;Object.assign(ke,Oe);var Be=typeof window<"u"?window:{};if(Be.Gp||(Be.Gp={}),Be.Gp.Config){Object.assign(Be.Gp.Config,ke);for(var Ue in ke)Be.Gp.Config[Ue]=ke[Ue]}else Be.Gp.Config=ke;e.call(this,Be.Gp.Config)};function AltiRequest(Te){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=Te||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(Te){for(var e=[],t=0;t<Te.length;t++){var Oe=Te[t];Oe.lon&&Oe.lat&&e.push(Oe)}this.positions=e},getPositions:function(Te){if(!Te)return this.positions;var e=this.positions.length-1;return Te>e||Te<e?(this.logger.warn("index out of range !"),this.positions):this.positions[Te]},addPositions:function(Te){for(var e=0;e<Te.length;e++){var t=Te[e];t.lon&&t.lat&&this.positions.push(Te[e])}},getLon:function(){for(var Te=[],e=0;e<this.positions.length;e++)Te.push(this.positions[e].lon);return this.logger.trace(Te),Te.join(this.delimiter)},getLat:function(){for(var Te=[],e=0;e<this.positions.length;e++)Te.push(this.positions[e].lat);return this.logger.trace(Te),Te.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var Te=[];return Te.push({k:"lon",v:this.getLon()}),Te.push({k:"lat",v:this.getLat()}),Te.push({k:"delimiter",v:this.delimiter}),Te.push({k:"indent",v:this.indent}),Te.push({k:"crs",v:this.crs}),Te.push({k:"format",v:this.format}),Te};function AltiElevationRequest(Te){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(Te){this._zonly=Te}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var Te=[];return Te.push({k:"lon",v:this.getLon()}),Te.push({k:"lat",v:this.getLat()}),Te.push({k:"indent",v:this.indent}),Te.push({k:"crs",v:this.crs}),Te.push({k:"zonly",v:this.zonly}),Te.push({k:"format",v:this.format}),Te.push({k:"resource",v:this.resource}),Te};function AltiProfilRequest(Te){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(Te){this._sampling=Te}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var Te=[];return Te.push({k:"lon",v:this.getLon()}),Te.push({k:"lat",v:this.getLat()}),Te.push({k:"indent",v:this.indent}),Te.push({k:"crs",v:this.crs}),Te.push({k:"sampling",v:this.sampling}),Te.push({k:"format",v:this.format}),Te.push({k:"resource",v:this.resource}),Te};function AltiRequestREST(Te){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=Te||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var Te="";return this.method==="POST"?Te=this.template.post.value:this.method==="GET"&&(Te=this.template.get.value),Te=Te.replace(/__LON__/g,this.DataObject.getLon()),Te=Te.replace(/__LAT__/g,this.DataObject.getLat()),Te=Te.replace(/__INDENT__/g,this.DataObject.indent),Te=Te.replace(/__CRS__/g,this.DataObject.crs),Te=Te.replace(/__RESOURCE__/g,this.DataObject.resource),Te=Te.replace(/__MEASURES__/g,this.DataObject.measures),Te=Te+this.__addDataInputs(),this.logger.trace("traduction tmpl",Te),this.requestString=Te,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var Te;if(this.method==="POST")Te=this.template.post;else if(this.method==="GET")Te=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=Te.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=Te.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(Te){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=Te||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var Te=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return Te.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var Te="";if(this.method==="POST")Te=this.template.post.value;else if(this.method==="GET")Te=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return Te=Te.replace(/__SERVICE__/g,this.paramservice),Te=Te.replace(/__VERSION__/g,this.paramversion),Te=Te.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),Te=Te.replace(/__IDENTIFIER__/g,this.paramidentifier),Te=Te.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(Te=Te.replace(/__NAMESPACE__/g,this.namespaceByDefault),Te=Te.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),Te=Te.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),Te?(this.requestString=Te,this.logger.trace("traduction tmpl",Te),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var Te=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",Oe=this,ke=this.DataObject.getData(),Be=0;Be<ke.length;Be++)(function(Ue){e&&(e=Ue===ke.length-1?"":";"),t=t.concat(Oe.__addDataInput(Te,ke[Ue].k,ke[Ue].v),e)})(Be);return t},__addDataInput:function(Te,e,t){var Oe=Te;return Oe=Oe.replace(/__KEY__/g,e),Oe=Oe.replace(/__DATA__/g,t),Oe},setMethod:function(Te){Te==="GET"||Te==="POST"?this.method=Te:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(Te){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!Te)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!Te.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(Te.type){case"Elevation":Te.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(Te.param);break;case"Profil":Te.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(Te.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var Oe={data:t,method:Te.method,param:Te.wps},ke=new WPS(Oe);if(!ke.processRequestString())throw new Error("Enable to process request !");return ke.requestString}},AltiRequestFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,Oe={type:Te.sampling?"Profil":"Elevation",method:Te.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};Oe.param.positions=Te.positions,Oe.param.format=Te.outputFormat,Oe.param.sampling=Te.sampling,Oe.param.zonly=Te.zonly,Oe.param.measures=Te.measures,Oe.param.resource=Te.resource;var ke=Te.onError!==null&&typeof Te.onError=="function",Be=Te.onSuccess!==null&&typeof Te.onSuccess=="function",Ue=null;switch(Te.api){case"REST":var He=new AltiRequestREST(Oe);if(!He.processRequestString()){if(Ue="Error in process request (rest) !",ke){Te.onError.call(Te.scope,new ErrorService(Ue));return}throw new Error(Ue)}t=He.requestString;break;case"WPS":if(Oe.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(Oe),!t){if(Ue="Error in process request (wps) !",ke){Te.onError.call(Te.scope,new ErrorService(Ue));return}throw new Error(Ue)}break;default:if(Ue="Type of API is not supported by service (REST or WPS) !",ke){Te.onError.call(Te.scope,new ErrorService(Ue));return}throw new Error(Ue)}return Be&&Te.onSuccess.call(Te.scope,t),t}};function XML$1(Te){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,Te&&(Te.xmlString&&typeof Te.xmlString=="string"&&(this.xmlString=Te.xmlString,this.xmlDoc=__getXMLDOC(Te.xmlString)),Te.reader&&this.setReader(Te.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(Te){Te&&typeof Te=="string"&&(this.xmlString=Te,this.xmlDoc=__getXMLDOC(Te))},getReader:function(){return this.reader},setReader:function(Te){Te&&Te.read&&typeof Te.read=="function"&&(this.reader=Te)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(Te){this.xmlDoc=Te},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var Te=__getRootNode(this.xmlDoc);if(Te){var e;return this.reader&&this.reader.read?e=this.reader.read(Te):(e={},e[Te.nodeName]=__readDefault(Te)),e}else return{}}}};function __getXMLDOC(Te){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(Te,"text/xml")}else{var t,Oe,ke="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){Oe=new window.ActiveXObject("Microsoft.XMLDOM"),Oe.async=!1,Oe.loadXML(Te);var Be=Oe.parseError;if(Be.errorCode)throw Be.line&&Be.linepos&&(ke+="( ligne "+Be.line+", colonne "+Be.linepos),Be.reason&&(ke+=":  "+Be.reason+")"),new Error(ke);return Oe}else if(window.DOMParser){t=new window.DOMParser;try{Oe=t.parseFromString(Te,"text/xml")}catch(Cn){throw Cn.message==="SyntaxError"?new Error(ke):new Error("Erreur lors du parsing de la réponse du service : "+Cn.message)}if(Oe.getElementsByTagName("parsererror").length>0)for(var Ue=Oe.getElementsByTagName("parsererror"),He=0;He<Ue.length;He++){var We=Ue[He].innerHTML;if(We.indexOf("Huge input lookup")===-1)throw ke+="("+We+")",new Error(ke)}else if(!Oe.documentElement)throw new Error(ke);return Oe}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(Te){var e;return Te.nodeType===9?e=Te.documentElement:Te.nodeType===1&&(e=Te),e}function __readDefault(Te){var e={};if(Te.attributes.length>0){var t=__getAttributes(Te);e.attributes=t}if(Te.hasChildNodes()){for(var Oe={},ke,Be=Te.childNodes,Ue=0;Ue<Be.length;Ue++)if(ke=Be[Ue],ke.nodeType===3)e.textContent=ke.nodeValue;else if(ke.nodeType===1)if(Oe=__readDefault(ke),!e[ke.nodeName])e[ke.nodeName]=Oe;else{if(!Array.isArray(e[ke.nodeName])){var He=e[ke.nodeName];e[ke.nodeName]=[],e[ke.nodeName].push(He)}e[ke.nodeName].push(Oe)}}return e}function __getAttributes(Te){if(Te.attributes.length>0){for(var e={},t=Te.attributes,Oe=0;Oe<t.length;Oe++){var ke=t[Oe];e[ke.nodeName]=ke.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(Te){var e=new AltiResponse;if(Te.hasChildNodes())for(var t=Te.childNodes,Oe,ke,Be=0;Be<t.length;Be++)Oe=t[Be],AltiResponseReader.READERS[Oe.nodeName]&&(ke=AltiResponseReader.READERS[Oe.nodeName](Oe),e.elevations.push(ke));return e},elevation:function(Te){var e=new Elevation;if(Te.hasChildNodes())for(var t=Te.childNodes,Oe,ke=0;ke<t.length;ke++)Oe=t[ke],AltiResponseReader.READERS[Oe.nodeName]&&AltiResponseReader.READERS[Oe.nodeName](Oe,e);return e},lat:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(Te,e){var t=Te.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(Te,e){e.measures=[];var t;if(Te.hasChildNodes())for(var Oe=Te.childNodes,ke,Be,Ue=0;Ue<Oe.length;Ue++){t=new Measure,ke=Oe[Ue],Be=ke.childNodes;for(var He=0;He<Be.length;He++)if(AltiResponseReader.READERS[Be[He].nodeName])AltiResponseReader.READERS[Be[He].nodeName](Be[He],t);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(Te){var e={};if(Te.hasChildNodes())for(var t=Te.childNodes,Oe,ke=0;ke<t.length;ke++)Oe=t[ke],Oe.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(Oe));return e},exception:function(Te){var e={},t=Te.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var Oe=Te.firstChild;return Oe&&Oe.nodeType===3&&(e.exception=Oe.nodeValue),e},error:function(Te){var e={error:{}};if(Te.hasChildNodes())for(var t=Te.childNodes,Oe,ke=0;ke<t.length;ke++){Oe=t[ke];var Be;Oe.nodeType===1&&Oe.nodeName==="code"&&(Be=Oe.firstChild,Be&&Be.nodeType===3&&(e.error.code=Be.nodeValue)),Oe.nodeType===1&&Oe.nodeName==="description"&&(Be=Oe.firstChild,Be&&Be.nodeType===3&&(e.error.description=Be.nodeValue))}return e}};AltiResponseReader.read=function(Te){if(Te.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(Te);return e}else if(Te.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(Te);return t}else if(Te.nodeName==="error"){var Oe=AltiResponseReader.READERS.error(Te);return Oe}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(Te.response)if(Te.rawResponse)e.trace("analyze response : raw"),t=Te.response;else{switch(Te.outputFormat){case"xml":e.trace("analyze response : xml");try{var Oe=new XML$1({reader:AltiResponseReader});if(typeof Te.response=="string"?Oe.setXMLString(Te.response):Oe.setXMLDoc(Te.response),t=Oe.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(En){var ke=En.message;Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof Te.response);var Be=null;if(typeof Te.response=="string"?Be=JSON.parse(Te.response):Be=Te.response,Be&&Be.error){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Be.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Be){var Ue=Be.elevations,He=new AltiResponse,We;if(Array.isArray(Ue)&&Ue.length)for(var Cn=0;Cn<Ue.length;Cn++)We=new Elevation,typeof Ue[Cn]=="object"?(Ue[Cn].lon&&(We.lon=Ue[Cn].lon),Ue[Cn].lat&&(We.lat=Ue[Cn].lat),Ue[Cn].z&&(We.z=Ue[Cn].z),Ue[Cn].acc&&(We.acc=Ue[Cn].acc),Ue[Cn].measures&&(We.measures=Ue[Cn].measures)):typeof Ue[Cn]=="number"&&(We.z=Ue[Cn]),Array.isArray(He.elevations)&&He.elevations.push(We);t=He}if(!t){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var An=t.error.description;Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",An),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Te.onSuccess.call(Te.scope,t)}};function Alti(Te){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!Te.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(Te.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=Te.positions,this.options.outputFormat=typeof Te.outputFormat=="string"?Te.outputFormat.toLowerCase():"xml",this.options.resource=Te.resource||"ign_rge_alti_wld",this.options.sampling=Te.sampling||null,this.options.api=typeof Te.api=="string"?Te.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=Te.zonly||!1,this.options.measures=Te.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var Oe=(Te.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[Oe];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var ke=this.options.serverUrl.lastIndexOf(".");if(ke!==-1){var Be=this.options.serverUrl.substring(ke+1);if(Be&&Be.length<5)switch(this.logger.trace("Server Extension URL : "+Be),Be.toLowerCase()){case"json":case"xml":this.options.outputFormat=Be.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(Te,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(Oe){this.request=Oe,e.call(this,this.request)},onError:Te,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(Te,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Te,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(Te){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=Te||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var Te={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(Te[e]=this.filters[e]);return Te},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var Te=[];this.geocodeMethod==="search"&&Te.push({k:"q",v:this.query}),this.index&&Te.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&Te.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(Te.push({k:"lon",v:this.lon}),Te.push({k:"lat",v:this.lat})),this.maxResp&&Te.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&Te.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)Te.push({k:t,v:e[t]});return Te};function GeocodeRequestREST(Te){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!Te)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Te}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var Te="";const t=new GeocodeParamREST(this.settings).getParams();for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];Te&&(Te+="&"),Te+=ke.k+"="+ke.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+Te,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=Te||{},Oe=new GeocodeRequestREST(t);if(!Oe.processRequestString())throw new Error("Error process request (rest) !");var ke=Oe.requestString;return e.trace(ke),ke}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(Te){var e=new GeocodeResponse;const t=JSON.parse(Te);if(t.type==="FeatureCollection")for(var Oe=0;Oe<t.features.length;++Oe)_parseFeature(t.features[Oe],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var ke=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:ke,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(Te,e){var t=new GeocodedLocation;if(Te.geometry&&Te.geometry.type==="Point"&&(t.position={lon:Te.geometry.coordinates[0],lat:Te.geometry.coordinates[1]}),Te.properties){for(var Oe in Te.properties)Oe==="score"?t.accuracy=Te.properties[Oe]:Oe==="_type"?Te.properties[Oe]==="address"?t.type="StreetAddress":Te.properties[Oe]==="poi"?t.type="PositionOfInterest":(Te.properties[Oe]==="parcel"||Te.properties[Oe]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[Oe]=Te.properties[Oe];Te.properties._type==="address"&&(t.matchType=Te.properties.number!==void 0&&Te.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(Te){return{exceptionReport:Te}}var GeocodeReponseFactory={build:function(Te){var e=null;if(Te.response)if(Te.rawResponse)e=Te.response;else{try{if(e=new GeocodeResponseParser().parse(Te.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(Oe){var t=Oe.message;typeof Te.response=="string"?t+="('"+Te.response+"')":t+="('"+Te.response.documentElement.innerHTML+"')",Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}Te.onSuccess.call(Te.scope,e)}};function Geocode(Te){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(Te);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),Oe=0;Oe<t.length;Oe++){var ke=t[Oe];(typeof e.filters[ke]>"u"||typeof e.filters[ke]=="object"&&Object.keys(e.filters[ke]).length===0||typeof e.filters[ke]=="string"&&e.filters[ke].length===0||Array.isArray(e.filters[ke])&&e.filters[ke].length===0)&&delete this.options.filters[ke]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(Te){const e=Te;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(Te,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(Te,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Te,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(Te){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(Te);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),Oe=0;Oe<t.length;Oe++){var ke=t[Oe];(typeof e.filters[ke]>"u"||typeof e.filters[ke]=="object"&&Object.keys(e.filters[ke]).length===0||typeof e.filters[ke]=="string"&&e.filters[ke].length===0||Array.isArray(e.filters[ke])&&e.filters[ke].length===0)&&delete this.options.filters[ke]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(Te){var e=Te;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(Te,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(Te,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Te,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(Te){return{type:"Polygon",coordinates:[[[Te.left,Te.top],[Te.right,Te.top],[Te.right,Te.bottom],[Te.left,Te.bottom],[Te.left,Te.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(Te){return{type:"Circle",radius:Te.radius,coordinates:[Te.x,Te.y]}};ReverseGeocode$1.prototype.polygon2Json=function(Te){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<Te.length;++t)e.coordinates[0].push([Te[t].x,Te[t].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(Te.response)if(Te.rawResponse)e.trace("analyze response : raw"),t=Te.response;else{var Oe=null;if(typeof Te.response=="string"?Oe=JSON.parse(Te.response):Oe=Te.response,Oe){if(Oe.error){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.error.description),status:Oe.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,Oe.results&&Array.isArray(Oe.results))for(var ke=null,Be=0;Be<Oe.results.length;Be++){var Ue=Oe.results[Be];ke=new SuggestedLocation,Ue&&(Ue.country==="StreetAddress"?(ke.street=Ue.street,ke.type="StreetAddress"):Ue.country==="PositionOfInterest"&&(ke.poi=Ue.street,ke.type="PositionOfInterest",ke.poiType=Ue.poiType),ke.position&&(ke.position.x=Ue.x,ke.position.y=Ue.y),ke.kind=Ue.kind,ke.commune=Ue.city,ke.fullText=Ue.fulltext,ke.postalCode=Ue.zipcode,ke.classification=Ue.classification),t.suggestedLocations.push(ke)}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Te.onSuccess.call(Te.scope,t)}};function AutoComplete(Te){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(Te);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(Te){const e=Te;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(Te,e){var t="";this.options.territory&&(t=this.options.territory);var Oe="";this.options.type&&(Oe=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:Oe,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(Te,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:Te,scope:this};AutoCompleteResponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(Te){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=Te||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var Te=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];Te.push(t.x+","+t.y)}return Te.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var Te=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Te.push(JSON.stringify(this.constraints[e]));return Te.join("|")}};RouteParamREST.prototype.getParams=function(){var Te=[];return Te.push({k:"resource",v:this.resource}),Te.push({k:"start",v:this.start}),Te.push({k:"end",v:this.end}),Te.push({k:"geometryFormat",v:"geojson"}),this.optimization&&Te.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&Te.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&Te.push({k:"profile",v:this.getProfile()}),this.constraints&&Te.push({k:"constraints",v:this.getConstraints()}),this.crs&&Te.push({k:"crs",v:this.crs}),this.distanceUnit&&Te.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&Te.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&Te.push({k:"waysAttributes",v:this.getWaysAttributes()}),Te};function RouteRequestREST(Te){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!Te)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Te}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var Te=new RouteParamREST(this.settings),e=Te.getParams(),t="",Oe=0;Oe<e.length;Oe++){var ke=e[Oe];t&&(t+="&"),t+=ke.k+"="+ke.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,Oe=Te||{},ke=Te.onError!==null&&typeof Te.onError=="function",Be=null,Ue=new RouteRequestREST(Oe);if(!Ue.processRequestString()){if(Be="Error process request (rest) !",ke){Te.onError.call(Te.scope,new ErrorService(Be));return}throw new Error(Be)}return t=Ue.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(Te.response)if(Te.rawResponse)e.trace("analyze response : raw"),t=Te.response;else{e.trace("analyze response : json");var Oe;if(typeof Te.response=="string"?Oe=JSON.parse(Te.response):Oe=Te.response,Oe){if(Oe.message){Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.message)));return}var ke=[],Be=[],Ue=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(Oe.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(Oe.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(Oe.bbox[0]),t.bbox.bottom=parseFloat(Oe.bbox[1]),t.bbox.right=parseFloat(Oe.bbox[2]),t.bbox.top=parseFloat(Oe.bbox[3])),t.hasOwnProperty("routeGeometry")&&!Te.geometryInInstructions&&(t.routeGeometry=Oe.geometry),t.hasOwnProperty("routeInstructions")&&Te.geometryInInstructions){var He=Oe.portions,We;if(Array.isArray(He)&&He.length)for(We=0;We<He.length;We++)ke.push(He[We]);if(ke.length)for(We=0;We<ke.length;We++)Be.push(ke[We].steps);if(Be.length)for(We=0;We<Be.length;We++)Ue=Ue.concat(Be[We]);Ue.forEach(function(Cn){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=Cn.duration,t.routeInstructions[t.routeInstructions.length-1].distance=Cn.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=Cn.geometry,Cn.name==="Valeur non renseignée"&&(Cn.name=""),Cn.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Départ";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+Cn.instruction.type+"?";break}if(Cn.instruction.modifier)switch(Cn.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+Cn.instruction.modifier+"?";break}Cn.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${Cn.instruction.exit}e sortie`),Cn.attributes.name&&((Cn.attributes.name.nom_1_droite||Cn.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),Cn.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Cn.attributes.name.nom_1_droite}`),Cn.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Cn.attributes.name.toponyme}`))})}}if(!t){Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Te.onSuccess.call(Te.scope,t)}};function Route$1(Te){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!Te.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(Te.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(Te.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!Te.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(Te.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(Te.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(Te.outputFormat&&Te.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=Te.resource||"bdtopo-osrm",this.options.startPoint=Te.startPoint,this.options.endPoint=Te.endPoint,this.options.viaPoints=Te.viaPoints||[],this.options.routePreference=Te.routePreference||"fastest",Te.graph?(Te.graph==="Voiture"&&(this.options.graph="car"),Te.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Te.constraints)if(Array.isArray(Te.constraints))for(var e=0;e<Te.constraints.length;e++)this.options.constraints.push(Te.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},Oe={},ke={};if(Te.exclusions&&Te.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Te.exclusions.length;Be++){if(typeof Te.exclusions[Be]=="string")Te.exclusions[Be]=Te.exclusions[Be].toLowerCase();else continue;Te.exclusions[Be]==="toll"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="autoroute",this.options.constraints.push(ke)),Te.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Te.exclusions[Be]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.geometryInInstructions=Te.geometryInInstructions||!1,this.options.provideBbox=Te.provideBbox||!0,this.options.distanceUnit=Te.distanceUnit||"m",this.options.timeUnit=Te.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=Te.srs||"EPSG:4326",this.options.waysAttributes=Te.waysAttributes||[],!this.options.serverUrl){var Ue=DefaultUrlService.Route.newUrl();if(!Ue)throw new Error("Url by default not found !");this.options.serverUrl=Ue,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(Te,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(Te,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Te,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(Te){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=Te||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var Te=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Te.push(JSON.stringify(this.constraints[e]));return Te.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var Te=[];return Te.push({k:"resource",v:this.resource}),Te.push({k:"point",v:this.getLocation()}),Te.push({k:"direction",v:this.getDirection()}),Te.push({k:"costType",v:this.costType}),Te.push({k:"costValue",v:this.costValue}),Te.push({k:"profile",v:this.profile}),Te.push({k:"timeUnit",v:this.timeUnit}),Te.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&Te.push({k:"crs",v:this.crs}),this.constraints&&Te.push({k:"constraints",v:this.getConstraints()}),Te};function ProcessIsoCurveRequest(Te){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!Te)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Te,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var Te="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),Oe=t.getParams();for(e=0;e<Oe.length;e++){var ke=Oe[e];Te&&(Te+="&"),Te+=ke.k+"="+ke.v}break;case"POST":this.logger.trace("Process POST Request");var Be={};Be.resource=this.settings.resource,Be.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Be.costType="distance",Be.costValue=this.settings.distance):(Be.costType="time",Be.costValue=this.settings.time),Be.profile=this.settings.graph,this.settings.reverse?Be.direction="arrival":Be.direction="departure",Be.constraints=this.settings.constraints,Be.distanceUnit=this.settings.distanceUnit,Be.timeUnit=this.settings.timeUnit,Be.crs=this.settings.srs,Te=JSON.stringify(Be);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(Te),this.requestString=Te,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(Te){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(Te.response)if(Te.rawResponse)e.trace("analyze response : raw"),t=Te.response;else{e.trace("analyze response : json");var Oe;if(typeof Te.response=="string"?Oe=JSON.parse(Te.response):Oe=Te.response,t=new ProcessIsoCurveResponse,Oe){Oe.costType==="distance"?(t.time="",t.distance=Oe.costValue):(t.time=Oe.costValue,t.distance=""),t.message="",t.id="",t.srs=Oe.crs,t.geometry=Oe.geometry;var ke=Oe.point.split(",");t.location&&(t.location.x=ke[0],t.location.y=ke[1])}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Te.response)));return}if(t.exceptionReport){Te.onError.call(Te.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Te.onError.call(Te.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Te.onSuccess.call(Te.scope,t)}};function ProcessIsoCurve(Te){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!Te.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(Te.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(Te.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!Te.time&&!Te.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!Te.time&&Te.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),Te.time&&!Te.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=Te.resource||"bdtopo-valhalla",this.options.exclusions=Te.exclusions||[],this.options.reverse=Te.reverse||!1,this.options.srs=Te.srs||"EPSG:4326",this.options.distanceUnit=Te.distanceUnit||"m",this.options.timeUnit=Te.timeUnit||"second",Te.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,Te.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,Te.graph?(Te.graph==="Voiture"&&(this.options.graph="car"),Te.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Te.constraints)if(Array.isArray(Te.constraints))for(var e=0;e<Te.constraints.length;e++)this.options.constraints.push(Te.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},Oe={},ke={};if(Te.exclusions&&Te.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Te.exclusions.length;Be++){if(typeof Te.exclusions[Be]=="string")Te.exclusions[Be]=Te.exclusions[Be].toLowerCase();else continue;Te.exclusions[Be]==="toll"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="autoroute",this.options.constraints.push(ke)),Te.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Te.exclusions[Be]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.outputFormat=typeof Te.outputFormat=="string"?Te.outputFormat.toLowerCase():"json",Te.outputFormat&&Te.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var Ue=DefaultUrlService.ProcessIsoCurve.newUrl();if(!Ue)throw new Error("Url by default not found !");this.options.serverUrl=Ue,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(Te,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(Oe){Te.call(this,new ErrorService(Oe.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(Te,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:Te,scope:this};ProcessIsoCurveResponseFactory.build(t)}else Te.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(Te){var e=new Config$1(Te);e.call()},getAltitude:function(Te){var e=new Alti(Te);e.call()},geocode:function(Te){var e=new Geocode(Te);e.call()},reverseGeocode:function(Te){var e=new ReverseGeocode$1(Te);e.call()},autoComplete:function(Te){var e=new AutoComplete(Te);e.call()},route:function(Te){var e=new Route$1(Te);e.call()},isoCurve:function(Te){var e=new ProcessIsoCurve(Te);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(Te){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Te||"default";return loglevelExports.getLogger(t)},disableAll:function(){var Te=loglevelExports.getLoggers();for(const e in Te)Object.hasOwnProperty.call(Te,e)&&Te[e].disableAll()},enableAll:function(){var Te=loglevelExports.getLoggers();for(const e in Te)Object.hasOwnProperty.call(Te,e)&&Te[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(Te,e){var t=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return Te;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var Oe in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[Oe]),Te.indexOf(e.noProxyDomains[Oe])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+Te+" found in noProxyDomains list ("+e.noProxyDomains[Oe]+")."),Te}return e.proxyUrl+encodeURIComponent(Te)}},logger$F=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(Te){var e=typeof Te.getType=="function"?Te.getType():null,t=Te.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof TileWMS||t instanceof ImageWMS)return"wms";if(t instanceof WMTS$1)return"wmts";if(t instanceof VectorSource||t instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(Te,e,t,Oe,ke){if(logger$F.trace("[Gfi] : displayInfo..."),Oe||(Oe="text/html"),t!==null){var Be=null,Ue=null,He=t;He=He.replace(/\n/g,""),He=He.replace(/(>)\s*(<)/g,"$1$2");var We=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Cn=require("@xmldom/xmldom").DOMParser;Ue=new Cn,Be=Ue.parseFromString(He,Oe)}else if(We.DOMParser)Ue=new We.DOMParser,Be=Ue.parseFromString(He,Oe);else if(We.ActiveXObject)Be=new We.ActiveXObject("Microsoft.XMLDOM"),Be.async=!1,Be.loadXML(He);else return logger$F.log("Incompatible environment for DOM Parser !"),!1;var An=Be.getElementsByTagName("body");if(An&&An.length===1&&!An[0].hasChildNodes())return!1;var En=document.createElement("div");En.className="gp-feature-info-div";var Sn=document.createElement("button");Sn.className="gp-styling-button closer",Sn.onclick=function(){return Te.featuresOverlay&&(Te.removeOverlay(Te.featuresOverlay),Te.featuresOverlay=null),!1};var Tn=document.createElement("div");return Tn.className="gp-features-content-div",Tn.innerHTML=t,En.appendChild(Tn),En.appendChild(Sn),Te.featuresOverlay&&(Te.removeOverlay(Te.featuresOverlay),Te.featuresOverlay=null),Te.featuresOverlay=new Overlay({element:En,autoPan:ke.autoPan,autoPanAnimation:ke.autoPanAnimation,autoPanMargin:ke.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),Te.addOverlay(Te.featuresOverlay),Te.featuresOverlay.setPosition(e),Te.featuresOverlay.render(),!0}},features2html:function(Te,e){var t=document.createElement("div");return e.forEach(function(Oe){var ke=Oe.getProperties();if(ke.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",ke.render);else{if(ke.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",ke.name),t.appendChild(Be)}if(ke.hasOwnProperty("description")){var Ue=document.createElement("div");Ue.className="gp-att-description-div",Ue.insertAdjacentHTML("afterbegin",ke.description),t.appendChild(Ue)}var He=null,We=!1,Cn=null,An=null,En=null,Sn=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(He in ke)if(ke[He]!==void 0&&Sn.indexOf(He)===-1){We||(Cn=document.createElement("div"),Cn.className="gp-att-others-div",An=document.createElement("ul"),We=!0),En=document.createElement("li");var Tn=document.createElement("span");Tn.className="gp-attname-others-span",Tn.appendChild(document.createTextNode(He+" : ")),En.appendChild(Tn),En.appendChild(document.createTextNode(ke[He])),An.appendChild(En)}An&&(Cn.appendChild(An),t.appendChild(Cn))}},Te),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(Te,e,t){var Oe=Te.getPixelFromCoordinate(t);return Te.hasFeatureAtPixel(Oe,function(ke){return ke===e})},displayVectorFeatureInfo:function(Te,e,t,Oe){var ke=Te.getPixelFromCoordinate(e),Be=[];if(Te.forEachFeatureAtPixel(ke,function(He,We){(!t||t.indexOf(We)>-1)&&Be.push(He)}),Be.length===0)return!1;var Ue=this.features2html(Te,Be);return Ue===null?!1:(this.displayInfo(Te,e,Ue.innerHTML,"text/html",Oe),!0)},displayFeatureInfo:function(Te,e,t,Oe,ke){for(var Be={},Ue=0;Ue<t.length;Ue++){var He=t[Ue],We=He.obj.getZIndex();Be[We]||(Be[We]=[]),Be[We].push(He)}var Cn=[],An=Object.keys(Be);An.sort(function(pi,fi){return fi-pi});for(var En=0;En<An.length;En++)for(var Sn=An[En],Tn=0;Tn<Be[Sn].length;++Tn){var Ln=Be[Sn][Tn].obj,Bn=Be[Sn][Tn].infoFormat||"text/html",ti=!0;if(Ln.minResolution&&Ln.minResolution>Te.getResolution()&&(ti=!1),ti&&Ln.maxResolution&&Ln.maxResolution<Te.getResolution()&&(ti=!1),Ln.getVisible()&&ti){var ni=this.getLayerFormat(Ln);if(ni==="vector"){this.layerGetFeatureAtCoordinates(Te,Ln,e)&&Cn.push({format:ni,scope:this,coordinate:e});continue}else if(ni!=="wms"&&ni!=="wmts"){logger$F.log("[ERROR] DisplayFeatureInfo - layer format '"+ni+"' not allowed");continue}var ii=Te.getView().getResolution(),si=null;ni==="wmts"?si=Ln.getSource().getFeatureInfoUrl.call(Ln.getSource(),e,ii,Te.getView().getProjection(),{INFOFORMAT:Bn}):si=Ln.getSource().getFeatureInfoUrl.call(Ln.getSource(),e,ii,Te.getView().getProjection(),{INFO_FORMAT:Bn}),Cn.push({format:Bn,url:ProxyUtils.proxifyUrl(si,Oe),scope:this,coordinate:e})}}var oi=null;function ci(pi,fi,Mi){if(pi.length===0)return;var Oi=0;function ui(li){Oi++,li||Oi===pi.length?Mi():fi(pi[Oi],ui)}fi(pi[0],ui)}var vi=this;ci(Cn,function(pi,fi){if(pi.format==="vector"){if(!oi){oi=[];for(var Mi=0;Mi<An.length;Mi++)for(var Oi=An[Mi],ui=0;ui<Be[Oi].length;++ui)oi.push(Be[Oi][ui].obj)}fi(pi.scope.displayVectorFeatureInfo(Te,pi.coordinate,oi,ke))}else Gp.Protocols.XHR.call({url:pi.url,method:"GET",scope:pi.scope,onResponse:function(li){var Ri=!1;(li.trim().length===0||li.indexOf("ServiceExceptionReport")!==-1||li.indexOf("java.lang.NullPointerException")!==-1||li.indexOf("java.lang.OutOfMemoryError")!==-1||li.indexOf("not queryable")!==-1)&&(Ri=!0);var Pi=!Ri&&vi.displayInfo(Te,pi.coordinate,li,"text/html",ke);fi(Pi)},onFailure:function(li){logger$F.log(li),fi(!1)}})},function(){logger$F.trace("Finish sync to GFI !")})},getPosition:function(Te,e){if(Te.coordinate)return Te.coordinate;var t=[0,0];if(Te.offsetX||Te.offsetY)t[0]=Te.offsetX,t[1]=Te.offsetY;else if(Te.pointerType==="touch"){var Oe=Te.pointers[0];t[0]=Oe.pageX,t[1]=Oe.pageY}var ke=e.getCoordinateFromPixel(t);return ke},onDisplayFeatureInfo:function(Te,e){if(e.isActive()){logger$F.trace(Te);var t=e.getMap();if(Te.type==="contextmenu"||Te.type==="dblclick")Te.preventDefault();else if(Te.type==="singleclick"){for(var Oe=t.getInteractions().getArray(),ke=0;ke<Oe.length;ke++)if(Oe[ke].getActive()&&(Oe[ke]instanceof Select||Oe[ke]instanceof Modify||Oe[ke]instanceof Draw))return}var Be={};e._proxyUrl&&(Be.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Be.noProxyDomains=e._noProxyDomains);var Ue={};e._autoPan&&(Ue.autoPan=e._autoPan),e._autoPanAnimation&&(Ue.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(Ue.autoPanMargin=e._autoPanMargin);for(var He=[],We=0;We<e._layers.length;++We){var Cn=e._layers[We].event?e._layers[We].event:e._defaultEvent;if(Cn===Te.type){var An=He.push(e._layers[We])-1;He[An].infoFormat||(He[An].infoFormat=e._defaultInfoFormat)}}var En=this.getPosition(Te,t);this.displayFeatureInfo(t,En,He,Be,Ue)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let Oe=0,ke=this.listenerKeys.length;Oe<ke;++Oe)unlistenByKey(this.listenerKeys[Oe]);if(this.listenerKeys.length=0,this.map_=e,e){const Oe=this.target_??e.getOverlayContainerStopEvent();this.element&&Oe.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var Te=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(Te=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(Te=!0),Te},assign:function(Te,e){Te=Te||{};for(var t in e)e.hasOwnProperty(t)&&(Te[t]=e[t]);return Te},mergeParams:function(Te,e,t){if(!(typeof Te>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var Oe in e)e.hasOwnProperty(Oe)&&(typeof e[Oe]=="object"?Te.hasOwnProperty(Oe)?this.mergeParams(Te[Oe],e[Oe],t):Te[Oe]=e[Oe]:Te.hasOwnProperty(Oe)?t&&(Te[Oe]=e[Oe]):Te[Oe]=e[Oe])}}},logger$E=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(Te,e){logger$E.trace("unset()");var t={};Helper.mergeParams(t,this._options),Helper.mergeParams(t,e);for(var Oe=Te.getInteractions().getArray(),ke=0;ke<Oe.length;ke++)if(Oe[ke].getActive()&&(Oe[ke]instanceof Draw||Oe[ke]instanceof Select||Oe[ke]instanceof Modify)){var Be=Oe[ke].getProperties(),Ue=Be.name;if(typeof Ue<"u"&&this._extensions.indexOf(Ue)>-1){if(t.current&&t.current===Ue)continue;Oe[ke].setActive(!1);var He=Be.source;if(typeof He<"u"&&He instanceof Control){for(var We in t)if(t.hasOwnProperty(We)){if(We==="current")continue;if(typeof He[We]=="function"){var Cn=Array.isArray(t[We])?t[We]:[t[We]];He[We].apply(He,Cn)}}}}else Oe[ke].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let Oe=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&Oe&&Oe.getUnits()==="tile-pixels"&&(Oe=get$3(Oe),Oe.setWorldExtent(t.extent)),t={dataProjection:Oe,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(Te,e,t){const Oe=t?get$3(t.featureProjection):null,ke=t?get$3(t.dataProjection):null;let Be=Te;if(Oe&&ke&&!equivalent(Oe,ke)){e&&(Be=Te.clone());const Ue=e?Oe:ke,He=e?ke:Oe;Ue.getUnits()==="tile-pixels"?Be.transform(Ue,He):Be.applyTransform(getTransform(Ue,He))}if(e&&t&&t.decimals!==void 0){const Ue=Math.pow(10,t.decimals),He=function(We){for(let Cn=0,An=We.length;Cn<An;++Cn)We[Cn]=Math.round(We[Cn]*Ue)/Ue;return We};Be===Te&&(Be=Te.clone()),Be.applyTransform(He)}return Be}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(Te,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(Te,0,e,t)||(Te=Te.slice(),orientLinearRingsArray(Te,0,e,t)),Te):(linearRingsAreOriented(Te,0,e,t)||(Te=Te.slice(),orientLinearRings(Te,0,e,t)),Te)}function createRenderFeature(Te,e){var Be;const t=Te.geometry;if(!t)return[];if(Array.isArray(t))return t.map(Ue=>createRenderFeature({...Te,geometry:Ue})).flat();const Oe=t.type==="MultiPolygon"?"Polygon":t.type;if(Oe==="GeometryCollection"||Oe==="Circle")throw new Error("Unsupported geometry type: "+Oe);const ke=t.layout.length;return transformGeometryWithOptions(new RenderFeature(Oe,Oe==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,ke):t.flatCoordinates,(Be=t.ends)==null?void 0:Be.flat(),ke,Te.properties||{},Te.id).enableSimplifyTransformed(),!1,e)}function createGeometry(Te,e){if(!Te)return null;if(Array.isArray(Te)){const Oe=Te.map(ke=>createGeometry(ke,e));return new GeometryCollection(Oe)}const t=GeometryConstructor[Te.type];return transformGeometryWithOptions(new t(Te.flatCoordinates,Te.layout,Te.ends),!1,e)}const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(Te,e){return getDocument().createElementNS(Te,e)}function getAllTextContent(Te,e){return getAllTextContent_(Te,e,[]).join("")}function getAllTextContent_(Te,e,t){if(Te.nodeType==Node.CDATA_SECTION_NODE||Te.nodeType==Node.TEXT_NODE)t.push(Te.nodeValue);else{let Oe;for(Oe=Te.firstChild;Oe;Oe=Oe.nextSibling)getAllTextContent_(Oe,e,t)}return t}function isDocument(Te){return"documentElement"in Te}function parse$1(Te){return new DOMParser().parseFromString(Te,"application/xml")}function makeArrayExtender(Te,e){return function(t,Oe){const ke=Te.call(e??this,t,Oe);if(ke!==void 0){const Be=Oe[Oe.length-1];extend$4(Be,ke)}}}function makeArrayPusher(Te,e){return function(t,Oe){const ke=Te.call(e??this,t,Oe);ke!==void 0&&Oe[Oe.length-1].push(ke)}}function makeReplacer(Te,e){return function(t,Oe){const ke=Te.call(this,t,Oe);ke!==void 0&&(Oe[Oe.length-1]=ke)}}function makeObjectPropertyPusher(Te,e,t){return function(Oe,ke){const Be=Te.call(this,Oe,ke);if(Be!==void 0){const Ue=ke[ke.length-1],He=Oe.localName;let We;He in Ue?We=Ue[He]:(We=[],Ue[He]=We),We.push(Be)}}}function makeObjectPropertySetter(Te,e,t){return function(Oe,ke){const Be=Te.call(this,Oe,ke);if(Be!==void 0){const Ue=ke[ke.length-1],He=e!==void 0?e:Oe.localName;Ue[He]=Be}}}function makeChildAppender(Te,e){return function(t,Oe,ke){Te.call(this,t,Oe,ke),ke[ke.length-1].node.appendChild(t)}}function makeArraySerializer(Te,e){let t,Oe;return function(ke,Be,Ue){if(t===void 0){t={};const He={};He[ke.localName]=Te,t[ke.namespaceURI]=He,Oe=makeSimpleNodeFactory(ke.localName)}serialize(t,Oe,Be,Ue)}}function makeSimpleNodeFactory(Te,e){return function(t,Oe,ke){const Ue=Oe[Oe.length-1].node;let He=Te;He===void 0&&(He=ke);const We=Ue.namespaceURI;return createElementNS(We,He)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(Te,e){const t=e.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=Te[e[ke]];return Oe}function makeStructureNS(Te,e,t){t=t!==void 0?t:{};let Oe,ke;for(Oe=0,ke=Te.length;Oe<ke;++Oe)t[Te[Oe]]=e;return t}function parseNode(Te,e,t,Oe){let ke;for(ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Be=Te[ke.namespaceURI];if(Be!==void 0){const Ue=Be[ke.localName];Ue!==void 0&&Ue.call(Oe,ke,t)}}}function pushParseAndPop(Te,e,t,Oe,ke){return Oe.push(Te),parseNode(e,t,Oe,ke),Oe.pop()}function serialize(Te,e,t,Oe,ke,Be){const Ue=(ke!==void 0?ke:t).length;let He,We;for(let Cn=0;Cn<Ue;++Cn)He=t[Cn],He!==void 0&&(We=e.call(Be,He,Oe,ke!==void 0?ke[Cn]:void 0),We!==void 0&&Te[We.namespaceURI][We.localName].call(Be,We,He,Oe))}function pushSerializeAndPop(Te,e,t,Oe,ke,Be,Ue){return ke.push(Te),serialize(e,t,Oe,ke,Be,Ue),ke.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readFeatureFromDocument(Oe,t)}return isDocument(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const Oe=this.readFeaturesFromDocument(e,t);return Oe.length>0?Oe[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const Oe=parse$1(e);return this.readFeaturesFromDocument(Oe,t)}return isDocument(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const Oe=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(Oe,this.readFeaturesFromNode(ke,t));return Oe}readFeaturesFromNode(e,t){return abstract()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readGeometryFromDocument(Oe,t)}return isDocument(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readProjectionFromDocument(t)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const Oe=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const Oe=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const Oe=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeGeometryNode(e,t){return null}}function readBoolean(Te){const e=getAllTextContent(Te,!1);return readBooleanString(e)}function readBooleanString(Te){const e=/^\s*(true|1)|(false|0)\s*$/.exec(Te);if(e)return e[1]!==void 0||!1}function readDateTime(Te){const e=getAllTextContent(Te,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function readDecimal(Te){const e=getAllTextContent(Te,!1);return readDecimalString(e)}function readDecimalString(Te){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(Te);if(e)return parseFloat(e[1])}function readPositiveInteger(Te){const e=getAllTextContent(Te,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(Te){const e=/^\s*(\d+)\s*$/.exec(Te);if(e)return parseInt(e[1],10)}function readString(Te){return getAllTextContent(Te,!1).trim()}function writeBooleanTextNode(Te,e){writeStringTextNode(Te,e?"1":"0")}function writeCDATASection(Te,e){Te.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(Te,e){const t=new Date(e*1e3),Oe=t.getUTCFullYear()+"-"+padNumber(t.getUTCMonth()+1,2)+"-"+padNumber(t.getUTCDate(),2)+"T"+padNumber(t.getUTCHours(),2)+":"+padNumber(t.getUTCMinutes(),2)+":"+padNumber(t.getUTCSeconds(),2)+"Z";Te.appendChild(getDocument().createTextNode(Oe))}function writeDecimalTextNode(Te,e){const t=e.toPrecision();Te.appendChild(getDocument().createTextNode(t))}function writeNonNegativeIntegerTextNode(Te,e){const t=e.toString();Te.appendChild(getDocument().createTextNode(t))}function writeStringTextNode(Te,e){Te.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(Te){return 32/Math.min(Te[0],Te[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE]}let TEXTAREA;function defaultIconUrlFunction(Te){return Te}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const Oe=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),ke=pushParseAndPop([],Oe,e,t,this);if(ke)return ke}readPlacemark_(e,t){const Oe=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,t,this);if(!Oe)return;const ke=new Feature,Be=e.getAttribute("id");Be!==null&&ke.setId(Be);const Ue=t[0],He=Oe.geometry;if(He&&transformGeometryWithOptions(He,!1,Ue),ke.setGeometry(He),delete Oe.geometry,this.extractStyles_){const We=Oe.Style,Cn=Oe.styleUrl,An=createFeatureStyleFunction(We,Cn,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);ke.setStyle(An)}return delete Oe.Style,ke.setProperties(Oe,!0),ke}readSharedStyle_(e,t){const Oe=e.getAttribute("id");if(Oe!==null){const ke=readStyle$2.call(this,e,t);if(ke){let Be,Ue=e.baseURI;(!Ue||Ue=="about:blank")&&(Ue=window.location.href),Ue?Be=new URL("#"+Oe,Ue).href:Be="#"+Oe,this.sharedStyles_[Be]=ke}}}readSharedStyleMap_(e,t){const Oe=e.getAttribute("id");if(Oe===null)return;const ke=readStyleMapValue.call(this,e,t);if(!ke)return;let Be,Ue=e.baseURI;(!Ue||Ue=="about:blank")&&(Ue=window.location.href),Ue?Be=new URL("#"+Oe,Ue).href:Be="#"+Oe,this.sharedStyles_[Be]=ke}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const Oe=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Oe||null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let Oe;const ke=e.localName;if(ke=="Document"||ke=="Folder")return Oe=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),Oe||[];if(ke=="Placemark"){const Be=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Be?[Be]:[]}if(ke=="kml"){Oe=[];for(let Be=e.firstElementChild;Be;Be=Be.nextElementSibling){const Ue=this.readFeaturesFromNode(Be,t);Ue&&extend$4(Oe,Ue)}return Oe}return[]}readName(e){if(e){if(typeof e=="string"){const t=parse$1(e);return this.readNameFromDocument(t)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const Oe=this.readNameFromNode(t);if(Oe)return Oe}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&t.localName=="name")return readString(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const Oe=t.localName;if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&(Oe=="Document"||Oe=="Folder"||Oe=="Placemark"||Oe=="kml")){const ke=this.readNameFromNode(t);if(ke)return ke}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readNetworkLinksFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readNetworkLinksFromDocument(e)):extend$4(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readNetworkLinksFromNode(Oe));return t}readNetworkLinksFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="NetworkLink"){const ke=pushParseAndPop({},NETWORK_LINK_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="kml")&&extend$4(t,this.readNetworkLinksFromNode(Oe))}return t}readRegion(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readRegionFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readRegionFromDocument(e)):extend$4(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readRegionFromNode(Oe));return t}readRegionFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="Region"){const ke=pushParseAndPop({},REGION_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="kml")&&extend$4(t,this.readRegionFromNode(Oe))}return t}readCamera(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readCameraFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readCameraFromDocument(e)):extend$4(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType===Node.ELEMENT_NODE&&extend$4(t,this.readCameraFromNode(Oe));return t}readCameraFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName==="Camera"){const ke=pushParseAndPop({},CAMERA_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke==="Document"||ke==="Folder"||ke==="Placemark"||ke==="kml")&&extend$4(t,this.readCameraFromNode(Oe))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const Oe=createElementNS(NAMESPACE_URIS$4[4],"kml"),ke="http://www.w3.org/2000/xmlns/";Oe.setAttributeNS(ke,"xmlns:gx",GX_NAMESPACE_URIS[0]),Oe.setAttributeNS(ke,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Be={node:Oe},Ue={};e.length>1?Ue.Document=e:e.length==1&&(Ue.Placemark=e[0]);const He=KML_SEQUENCE[Oe.namespaceURI],We=makeSequence(Ue,He);return pushSerializeAndPop(Be,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,[t],He,this),Oe}};function createNameStyleFunction(Te,e){const t=[0,0];let Oe="start";const ke=Te.getImage();if(ke){const He=ke.getSize();if(He&&He.length==2){const We=ke.getScaleArray(),Cn=ke.getAnchor();t[0]=We[0]*(He[0]-Cn[0]),t[1]=We[1]*(He[1]/2-Cn[1]),Oe="left"}}let Be=Te.getText();return Be?(Be=Be.clone(),Be.setFont(Be.getFont()||DEFAULT_TEXT_STYLE.getFont()),Be.setScale(Be.getScale()||DEFAULT_TEXT_STYLE.getScale()),Be.setFill(Be.getFill()||DEFAULT_TEXT_STYLE.getFill()),Be.setStroke(Be.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Be=DEFAULT_TEXT_STYLE.clone(),Be.setText(e),Be.setOffsetX(t[0]),Be.setOffsetY(t[1]),Be.setTextAlign(Oe),new Style$1({image:ke,text:Be})}function createFeatureStyleFunction(Te,e,t,Oe,ke){return function(Be,Ue){let He=ke,We="",Cn=[];if(He){const En=Be.getGeometry();if(En)if(En instanceof GeometryCollection)Cn=En.getGeometriesArrayRecursive().filter(function(Sn){const Tn=Sn.getType();return Tn==="Point"||Tn==="MultiPoint"}),He=Cn.length>0;else{const Sn=En.getType();He=Sn==="Point"||Sn==="MultiPoint"}}He&&(We=Be.get("name"),He=He&&!!We,He&&/&[^&]+;/.test(We)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=We,We=TEXTAREA.value));let An=t;if(Te?An=Te:e&&(An=findStyle(e,t,Oe)),He){const En=createNameStyleFunction(An[0],We);if(Cn.length>0){En.setGeometry(new GeometryCollection(Cn));const Sn=new Style$1({geometry:An[0].getGeometry(),image:null,fill:An[0].getFill(),stroke:An[0].getStroke(),text:null});return[En,Sn].concat(An.slice(1))}return En}return An}}function findStyle(Te,e,t){return Array.isArray(Te)?Te:typeof Te=="string"?findStyle(t[Te],e,t):e}function readColor(Te){const e=getAllTextContent(Te,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const Oe=t[1];return[parseInt(Oe.substr(6,2),16),parseInt(Oe.substr(4,2),16),parseInt(Oe.substr(2,2),16),parseInt(Oe.substr(0,2),16)/255]}}function readFlatCoordinates(Te){let e=getAllTextContent(Te,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const Oe=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let ke;for(;ke=Oe.exec(e);){const Be=parseFloat(ke[1]),Ue=parseFloat(ke[2]),He=ke[3]?parseFloat(ke[3]):0;t.push(Be,Ue,He),e=e.substr(ke[0].length)}if(e==="")return t}function readURI(Te){const e=getAllTextContent(Te,!1).trim();let t=Te.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readStyleURL(Te){const e=getAllTextContent(Te,!1).trim().replace(/^(?!.*#)/,"#");let t=Te.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readVec2(Te){const e=Te.getAttribute("xunits"),t=Te.getAttribute("yunits");let Oe;return e!=="insetPixels"?t!=="insetPixels"?Oe="bottom-left":Oe="top-left":t!=="insetPixels"?Oe="bottom-right":Oe="top-right",{x:parseFloat(Te.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(Te.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[t],origin:Oe}}function readScale(Te){return readDecimal(Te)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(Te,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,Te,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(Te,e){const t=pushParseAndPop({},ICON_STYLE_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1],ke="Icon"in t?t.Icon:{},Be=!("Icon"in t)||Object.keys(ke).length>0;let Ue;const He=ke.href;He?Ue=He:Be&&(Ue=DEFAULT_IMAGE_STYLE_SRC);let We,Cn,An,En="bottom-left";const Sn=t.hotSpot;Sn?(We=[Sn.x,Sn.y],Cn=Sn.xunits,An=Sn.yunits,En=Sn.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(Ue)&&(Ue.includes("pushpin")?(We=DEFAULT_IMAGE_STYLE_ANCHOR,Cn=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Ue.includes("arrow-reverse")?(We=[54,42],Cn=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Ue.includes("paddle")&&(We=[32,1],Cn=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let Tn;const Ln=ke.x,Bn=ke.y;Ln!==void 0&&Bn!==void 0&&(Tn=[Ln,Bn]);let ti;const ni=ke.w,ii=ke.h;ni!==void 0&&ii!==void 0&&(ti=[ni,ii]);let si;const oi=t.heading;oi!==void 0&&(si=toRadians(oi));const ci=t.scale,vi=t.color;if(Be){Ue==DEFAULT_IMAGE_STYLE_SRC&&(ti=DEFAULT_IMAGE_STYLE_SIZE);const pi=new Icon({anchor:We,anchorOrigin:En,anchorXUnits:Cn,anchorYUnits:An,crossOrigin:this.crossOrigin_,offset:Tn,offsetOrigin:"bottom-left",rotation:si,scale:ci,size:ti,src:this.iconUrlFunction_(Ue),color:vi}),fi=pi.getScaleArray()[0],Mi=pi.getSize();if(Mi===null){const Oi=pi.getImageState();if(Oi===ImageState.IDLE||Oi===ImageState.LOADING){const ui=function(){const li=pi.getImageState();if(!(li===ImageState.IDLE||li===ImageState.LOADING)){const Ri=pi.getSize();if(Ri&&Ri.length==2){const Pi=scaleForSize(Ri);pi.setScale(fi*Pi)}pi.unlistenImageChange(ui)}};pi.listenImageChange(ui),Oi===ImageState.IDLE&&pi.load()}}else if(Mi.length==2){const Oi=scaleForSize(Mi);pi.setScale(fi*Oi)}Oe.imageStyle=pi}else Oe.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(Te,e){const t=pushParseAndPop({},LABEL_STYLE_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1],ke=new Text({fill:new Fill({color:"color"in t?t.color:DEFAULT_COLOR}),scale:t.scale});Oe.textStyle=ke}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(Te,e){const t=pushParseAndPop({},LINE_STYLE_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1],ke=new Stroke({color:"color"in t?t.color:DEFAULT_COLOR,width:"width"in t?t.width:1});Oe.strokeStyle=ke}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(Te,e){const t=pushParseAndPop({},POLY_STYLE_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1],ke=new Fill({color:"color"in t?t.color:DEFAULT_COLOR});Oe.fillStyle=ke;const Be=t.fill;Be!==void 0&&(Oe.fill=Be);const Ue=t.outline;Ue!==void 0&&(Oe.outline=Ue)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(Te,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,Te,e)}function gxCoordParser(Te,e){const Oe=e[e.length-1].coordinates,ke=getAllTextContent(Te,!1),Ue=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(ke);if(Ue){const He=parseFloat(Ue[1]),We=parseFloat(Ue[2]),Cn=parseFloat(Ue[3]);Oe.push([He,We,Cn])}else Oe.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(Te,e){const t=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,Te,e);if(t)return new MultiLineString(t)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(Te,e){const t=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,Te,e);if(!t)return;const Oe=[],ke=t.coordinates,Be=t.whens;for(let Ue=0,He=Math.min(ke.length,Be.length);Ue<He;++Ue)ke[Ue].length==3&&Oe.push(ke[Ue][0],ke[Ue][1],ke[Ue][2],Be[Ue]);return new LineString(Oe,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(Te,e){const t=pushParseAndPop({},ICON_PARSERS,Te,e);return t||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(Te,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,Te,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(Te,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Te,e),Oe=readFlatCoordinatesFromNode(Te,e);if(Oe){const ke=new LineString(Oe,"XYZ");return ke.setProperties(t,!0),ke}}function readLinearRing(Te,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Te,e),Oe=readFlatCoordinatesFromNode(Te,e);if(Oe){const ke=new Polygon(Oe,"XYZ",[Oe.length]);return ke.setProperties(t,!0),ke}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(Te,e){const t=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,Te,e);if(!t)return null;if(t.length===0)return new GeometryCollection(t);let Oe,ke=!0;const Be=t[0].getType();let Ue;for(let He=1,We=t.length;He<We;++He)if(Ue=t[He],Ue.getType()!=Be){ke=!1;break}if(ke){let He,We;if(Be=="Point"){const Cn=t[0];He=Cn.getLayout(),We=Cn.getFlatCoordinates();for(let An=1,En=t.length;An<En;++An)Ue=t[An],extend$4(We,Ue.getFlatCoordinates());Oe=new MultiPoint(We,He),setCommonGeometryProperties(Oe,t)}else if(Be=="LineString")Oe=new MultiLineString(t),setCommonGeometryProperties(Oe,t);else if(Be=="Polygon")Oe=new MultiPolygon(t),setCommonGeometryProperties(Oe,t);else if(Be=="GeometryCollection"||Be.startsWith("Multi"))Oe=new GeometryCollection(t);else throw new Error("Unknown geometry type found")}else Oe=new GeometryCollection(t);return Oe}function readPoint(Te,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Te,e),Oe=readFlatCoordinatesFromNode(Te,e);if(Oe){const ke=new Point$1(Oe,"XYZ");return ke.setProperties(t,!0),ke}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(Te,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Te,e),Oe=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,Te,e);if(Oe&&Oe[0]){const ke=Oe[0],Be=[ke.length];for(let He=1,We=Oe.length;He<We;++He)extend$4(ke,Oe[He]),Be.push(ke.length);const Ue=new Polygon(ke,"XYZ",Be);return Ue.setProperties(t,!0),Ue}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(Te,e){const t=pushParseAndPop({},STYLE_PARSERS$2,Te,e,this);if(!t)return null;let Oe="fillStyle"in t?t.fillStyle:DEFAULT_FILL_STYLE;const ke=t.fill;ke!==void 0&&!ke&&(Oe=null);let Be;"imageStyle"in t?t.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Be=t.imageStyle):Be=DEFAULT_IMAGE_STYLE;const Ue="textStyle"in t?t.textStyle:DEFAULT_TEXT_STYLE,He="strokeStyle"in t?t.strokeStyle:DEFAULT_STROKE_STYLE,We=t.outline;return We!==void 0&&!We?[new Style$1({geometry:function(Cn){const An=Cn.getGeometry(),En=An.getType();if(En==="GeometryCollection"){const Sn=An;return new GeometryCollection(Sn.getGeometriesArrayRecursive().filter(function(Tn){const Ln=Tn.getType();return Ln!=="Polygon"&&Ln!=="MultiPolygon"}))}if(En!=="Polygon"&&En!=="MultiPolygon")return An},fill:Oe,image:Be,stroke:He,text:Ue,zIndex:void 0}),new Style$1({geometry:function(Cn){const An=Cn.getGeometry(),En=An.getType();if(En==="GeometryCollection"){const Sn=An;return new GeometryCollection(Sn.getGeometriesArrayRecursive().filter(function(Tn){const Ln=Tn.getType();return Ln==="Polygon"||Ln==="MultiPolygon"}))}if(En==="Polygon"||En==="MultiPolygon")return An},fill:Oe,stroke:null,zIndex:void 0})]:[new Style$1({fill:Oe,image:Be,stroke:He,text:Ue,zIndex:void 0})]}function setCommonGeometryProperties(Te,e){const t=e.length,Oe=new Array(e.length),ke=new Array(e.length),Be=new Array(e.length);let Ue,He,We;Ue=!1,He=!1,We=!1;for(let Cn=0;Cn<t;++Cn){const An=e[Cn];Oe[Cn]=An.get("extrude"),ke[Cn]=An.get("tessellate"),Be[Cn]=An.get("altitudeMode"),Ue=Ue||Oe[Cn]!==void 0,He=He||ke[Cn]!==void 0,We=We||Be[Cn]}Ue&&Te.set("extrude",Oe),He&&Te.set("tessellate",ke),We&&Te.set("altitudeMode",Be)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(Te,e){const t=Te.getAttribute("name");parseNode(DATA_PARSERS,Te,e);const Oe=e[e.length-1];t&&Oe.displayName?Oe[t]={value:Oe.value,displayName:Oe.displayName,toString:function(){return Oe.value}}:t!==null?Oe[t]=Oe.value:Oe.displayName!==null&&(Oe[Oe.displayName]=Oe.value),delete Oe.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(Te,e){parseNode(EXTENDED_DATA_PARSERS,Te,e)}function regionParser(Te,e){parseNode(REGION_PARSERS,Te,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(Te,e){const t=pushParseAndPop({},PAIR_PARSERS,Te,e,this);if(!t)return;const Oe=t.key;if(Oe&&Oe=="normal"){const ke=t.styleUrl;ke&&(e[e.length-1]=ke);const Be=t.Style;Be&&(e[e.length-1]=Be)}}function placemarkStyleMapParser(Te,e){const t=readStyleMapValue.call(this,Te,e);if(!t)return;const Oe=e[e.length-1];if(Array.isArray(t))Oe.Style=t;else if(typeof t=="string")Oe.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(Te,e){parseNode(SCHEMA_DATA_PARSERS,Te,e)}function simpleDataParser(Te,e){const t=Te.getAttribute("name");if(t!==null){const Oe=readString(Te),ke=e[e.length-1];ke[t]=Oe}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(Te,e){const t=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1],ke=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];Oe.extent=ke,Oe.altitudeMode=t.altitudeMode,Oe.minAltitude=parseFloat(t.minAltitude),Oe.maxAltitude=parseFloat(t.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(Te,e){const t=pushParseAndPop({},LOD_PARSERS,Te,e);if(!t)return;const Oe=e[e.length-1];Oe.minLodPixels=parseFloat(t.minLodPixels),Oe.maxLodPixels=parseFloat(t.maxLodPixels),Oe.minFadeExtent=parseFloat(t.minFadeExtent),Oe.maxFadeExtent=parseFloat(t.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(Te,e){const t=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,Te,e);t.length>0&&e[e.length-1].push(...t)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(Te,e){const t=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,Te,e);if(t){const Oe=e[e.length-1];Oe[0]=t}}function linkParser(Te,e){parseNode(LINK_PARSERS$1,Te,e)}function whenParser(Te,e){const Oe=e[e.length-1].whens,ke=getAllTextContent(Te,!1),Be=Date.parse(ke);Oe.push(isNaN(Be)?0:Be)}function writeColorTextNode(Te,e){const t=asArray(e),ke=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let Be=0;Be<4;++Be){const Ue=Math.floor(ke[Be]).toString(16);ke[Be]=Ue.length==1?"0"+Ue:Ue}writeStringTextNode(Te,ke.join(""))}function writeCoordinatesTextNode(Te,e,t){const Oe=t[t.length-1],ke=Oe.layout,Be=Oe.stride;let Ue;if(ke=="XY"||ke=="XYM")Ue=2;else if(ke=="XYZ"||ke=="XYZM")Ue=3;else throw new Error("Invalid geometry layout");const He=e.length;let We="";if(He>0){We+=e[0];for(let Cn=1;Cn<Ue;++Cn)We+=","+e[Cn];for(let Cn=Be;Cn<He;Cn+=Be){We+=" "+e[Cn];for(let An=1;An<Ue;++An)We+=","+e[Cn+An]}}writeStringTextNode(Te,We)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(Te,e,t){Te.setAttribute("name",e.name);const Oe={node:Te},ke=e.value;typeof ke=="object"?(ke!==null&&ke.displayName&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke.displayName],t,["displayName"]),ke!==null&&ke.value&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke.value],t,["value"])):pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke],t,["value"])}function writeDataNodeName(Te,e){writeCDATASection(Te,e)}function writeDataNodeValue(Te,e){writeStringTextNode(Te,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(Te,e,t){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,"Placemark")};function writeDocument(Te,e,t){pushSerializeAndPop({node:Te},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,t,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(Te,e,t){const Oe={node:Te},ke=e.names,Be=e.values,Ue=ke.length;for(let He=0;He<Ue;He++)pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:ke[He],value:Be[He]}],t)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(Te,e,t){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+t)};function writeIcon(Te,e,t){const Oe={node:Te},ke=t[t.length-1].node;let Be=ICON_SEQUENCE[ke.namespaceURI],Ue=makeSequence(e,Be);pushSerializeAndPop(Oe,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ue,t,Be),Be=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],Ue=makeSequence(e,Be),pushSerializeAndPop(Oe,ICON_SERIALIZERS,GX_NODE_FACTORY,Ue,t,Be)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(Te,e,t){const Oe={node:Te},ke={},Be=e.getSrc(),Ue=e.getSize(),He=e.getImageSize(),We={href:Be};if(Ue){We.w=Ue[0],We.h=Ue[1];const ti=e.getAnchor(),ni=e.getOrigin();if(ni&&He&&ni[0]!==0&&ni[1]!==Ue[1]&&(We.x=ni[0],We.y=He[1]-(ni[1]+Ue[1])),ti&&(ti[0]!==Ue[0]/2||ti[1]!==Ue[1]/2)){const ii={x:ti[0],xunits:"pixels",y:Ue[1]-ti[1],yunits:"pixels"};ke.hotSpot=ii}}ke.Icon=We;let Cn=e.getScaleArray()[0],An=Ue;if(An===null&&(An=DEFAULT_IMAGE_STYLE_SIZE),An.length==2){const ti=scaleForSize(An);Cn=Cn/ti}Cn!==1&&(ke.scale=Cn);const En=e.getRotation();En!==0&&(ke.heading=En);const Sn=e.getColor();Sn&&(ke.color=Sn);const Tn=t[t.length-1].node,Ln=ICON_STYLE_SEQUENCE[Tn.namespaceURI],Bn=makeSequence(ke,Ln);pushSerializeAndPop(Oe,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Bn,t,Ln)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(Te,e,t){const Oe={node:Te},ke={},Be=e.getFill();Be&&(ke.color=Be.getColor());const Ue=e.getScale();Ue&&Ue!==1&&(ke.scale=Ue);const He=t[t.length-1].node,We=LABEL_STYLE_SEQUENCE[He.namespaceURI],Cn=makeSequence(ke,We);pushSerializeAndPop(Oe,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,We)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(Te,e,t){const Oe={node:Te},ke={color:e.getColor(),width:Number(e.getWidth())||1},Be=t[t.length-1].node,Ue=LINE_STYLE_SEQUENCE[Be.namespaceURI],He=makeSequence(ke,Ue);pushSerializeAndPop(Oe,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,He,t,Ue)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(Te,e,t){if(Te){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[Te.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(Te,e,t){const Oe={node:Te},ke=e.getType();let Be=[],Ue;if(ke==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(He){const We=He.getType();if(We==="MultiPoint")Be=Be.concat(He.getPoints());else if(We==="MultiLineString")Be=Be.concat(He.getLineStrings());else if(We==="MultiPolygon")Be=Be.concat(He.getPolygons());else if(We==="Point"||We==="LineString"||We==="Polygon")Be.push(He);else throw new Error("Unknown geometry type")}),Ue=GEOMETRY_NODE_FACTORY;else if(ke==="MultiPoint")Be=e.getPoints(),Ue=POINT_NODE_FACTORY;else if(ke==="MultiLineString")Be=e.getLineStrings(),Ue=LINE_STRING_NODE_FACTORY;else if(ke==="MultiPolygon")Be=e.getPolygons(),Ue=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(Oe,MULTI_GEOMETRY_SERIALIZERS,Ue,Be,t)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(Te,e,t){pushSerializeAndPop({node:Te},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],t)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(Te,e,t){const Oe={node:Te};e.getId()&&Te.setAttribute("id",e.getId());const ke=e.getProperties(),Be={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Be[e.getGeometryName()]=1;const Ue=Object.keys(ke||{}).sort().filter(function(Tn){return!Be[Tn]}),He=e.getStyleFunction();if(He){const Tn=He(e,0);if(Tn){const Ln=Array.isArray(Tn)?Tn:[Tn];let Bn=Ln;if(e.getGeometry()&&(Bn=Ln.filter(function(ti){const ni=ti.getGeometryFunction()(e);if(ni){const ii=ni.getType();return ii==="GeometryCollection"?ni.getGeometriesArrayRecursive().filter(function(si){const oi=si.getType();return oi==="Point"||oi==="MultiPoint"}).length:ii==="Point"||ii==="MultiPoint"}})),this.writeStyles_){let ti=Ln,ni=Ln;e.getGeometry()&&(ti=Ln.filter(function(ii){const si=ii.getGeometryFunction()(e);if(si){const oi=si.getType();return oi==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(ci){const vi=ci.getType();return vi==="LineString"||vi==="MultiLineString"}).length:oi==="LineString"||oi==="MultiLineString"}}),ni=Ln.filter(function(ii){const si=ii.getGeometryFunction()(e);if(si){const oi=si.getType();return oi==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(ci){const vi=ci.getType();return vi==="Polygon"||vi==="MultiPolygon"}).length:oi==="Polygon"||oi==="MultiPolygon"}})),ke.Style={pointStyles:Bn,lineStyles:ti,polyStyles:ni}}if(Bn.length&&ke.name===void 0){const ti=Bn[0].getText();ti&&(ke.name=ti.getText())}}}const We=t[t.length-1].node,Cn=PLACEMARK_SEQUENCE[We.namespaceURI],An=makeSequence(ke,Cn);if(pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,t,Cn),Ue.length>0){const Tn=makeSequence(ke,Ue);pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:Ue,values:Tn}],t)}const En=t[0];let Sn=e.getGeometry();Sn&&(Sn=transformGeometryWithOptions(Sn,!0,En)),pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[Sn],t)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(Te,e,t){const Oe=e.getFlatCoordinates(),ke={node:Te};ke.layout=e.getLayout(),ke.stride=e.getStride();const Be=e.getProperties();Be.coordinates=Oe;const Ue=t[t.length-1].node,He=PRIMITIVE_GEOMETRY_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,He);pushSerializeAndPop(ke,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,t,He)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(Te,e,t){const Oe=e.getLinearRings(),ke=Oe.shift(),Be={node:Te};pushSerializeAndPop(Be,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,Oe,t),pushSerializeAndPop(Be,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[ke],t)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(Te,e,t){const Oe={node:Te},ke=e.getFill(),Be=e.getStroke(),Ue={color:ke?ke.getColor():void 0,fill:ke?void 0:!1,outline:Be?void 0:!1},He=t[t.length-1].node,We=POLY_STYLE_SEQUENCE[He.namespaceURI],Cn=makeSequence(Ue,We);pushSerializeAndPop(Oe,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,We)}function writeScaleTextNode(Te,e){writeDecimalTextNode(Te,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(Te,e,t){const Oe={node:Te},ke={};if(e.pointStyles.length){const We=e.pointStyles[0].getText();We&&(ke.LabelStyle=We);const Cn=e.pointStyles[0].getImage();Cn&&typeof Cn.getSrc=="function"&&(ke.IconStyle=Cn)}if(e.lineStyles.length){const We=e.lineStyles[0].getStroke();We&&(ke.LineStyle=We)}if(e.polyStyles.length){const We=e.polyStyles[0].getStroke();We&&!ke.LineStyle&&(ke.LineStyle=We),ke.PolyStyle=e.polyStyles[0]}const Be=t[t.length-1].node,Ue=STYLE_SEQUENCE[Be.namespaceURI],He=makeSequence(ke,Ue);pushSerializeAndPop(Oe,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,He,t,Ue)}function writeVec2(Te,e){Te.setAttribute("x",String(e.x)),Te.setAttribute("y",String(e.y)),Te.setAttribute("xunits",e.xunits),Te.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(Te){if(Te>255)throw new Error("'"+Te+"'' is greater than 255(0xff);");var e=Number(Te).toString(16);return("0"+e).slice(-2)},num:function(Te){return parseInt(Te,16)},arrayToRgba:function(Te){if(!Array.isArray(Te))throw new Error("Not an array !");var e=Te[0],t=Te[1],Oe=Te[2],ke=Te[3]||1,Be="rgba("+e+", "+t+", "+Oe+", "+parseFloat(ke)+")";return Be},arrayToHex:function(Te){if(!Array.isArray(Te))throw new Error("Not an array !");var e=Te[0],t=Te[1],Oe=Te[2],ke=Te[3],Be=[this.hex(e),this.hex(t),this.hex(Oe)],Ue={};return Ue.hex="#"+Be.join(""),ke&&(Ue.opacity=parseFloat(ke)),Ue},rgbaToHex:function(Te){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Te);if(!t)throw new Error("Invalid format: "+Te);var Oe=t[1],ke=t[2],Be=t[3],Ue=t[4],He=[this.hex(Oe),this.hex(ke),this.hex(Be)],We={};return We.hex="#"+He.join(""),Ue&&(We.opacity=parseFloat(Ue)),We},hexToRgba:function(Te,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!Te)throw new Error("Invalid format");Te=Te.replace(t,function(Be,Ue,He,We){return Ue+Ue+He+He+We+We});var Oe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Te);Oe=Oe?{r:parseInt(Oe[1],16),g:parseInt(Oe[2],16),b:parseInt(Oe[3],16)}:null;var ke=Oe?"rgba("+Oe.r+", "+Oe.g+", "+Oe.b+", "+e+")":null;return ke},isHex:function(Te){if(!Te||Te.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(Te);return!!t},isRGB:function(Te){if(!Te)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Te);return!!t}},logger$D=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var Te=this.getStyle();if(Te&&!(Array.isArray(Te)&&Te.length===0)){var e=Te.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(ColorUtils.isRGB(t)){var ke=ColorUtils.rgbaToHex(t);this.set("fill",ke.hex),this.set("fill-opacity",ke.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var Te=this.getStyle();if(Te&&!(Array.isArray(Te)&&Te.length===0)){var e=Te.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(ColorUtils.isRGB(t)){var ke=ColorUtils.rgbaToHex(t);this.set("stroke",ke.hex),this.set("stroke-opacity",ke.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var Te=this.getStyle();if(Te&&!(Array.isArray(Te)&&Te.length===0)){var e=this.get("name")!==void 0,t=Te.getText();if(t&&e){var Oe=Te.getText().getFill();if(Oe){var ke=Oe.getColor();if(Array.isArray(ke)){var Be="rgba(";Be+=ke[0]+",",Be+=ke[1]+",",Be+=ke[2]+",",Be+=ke[3]+")",ke=Be}if(ColorUtils.isRGB(ke)){var Ue=ColorUtils.rgbaToHex(ke);this.set("label-fill",Ue.hex),this.set("label-fill-opacity",Ue.opacity)}else this.set("label-fill",ke),this.set("label-fill-opacity",1)}var He=Te.getText().getStroke();if(He){var We=He.getColor();if(Array.isArray(We)){var Cn="rgba(";Cn+=We[0]+",",Cn+=We[1]+",",Cn+=We[2]+",",Cn+=We[3]+")",We=Cn}if(ColorUtils.isRGB(We)){var An=ColorUtils.rgbaToHex(We);this.set("label-stroke",An.hex),this.set("label-stroke-opacity",An.opacity)}else this.set("label-stroke",We),this.set("label-stroke-opacity",1);this.set("label-stroke-width",He.getWidth())}this.set("label-font",Te.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",Te.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var Te=this.getStyle();if(Te&&!(Array.isArray(Te)&&Te.length===0)){var e=Te.getImage();if(e)if(e instanceof Icon){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(t){var ke=ColorUtils.rgbaToHex(t);this.set("marker-color",ke.hex)}var Be=e.getScale();switch(Math.round(Be*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var Ue=e.getSrc();Ue&&this.set("marker-symbol",Ue),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var He=e.getFill();if(He){var We=He.getColor();if(Array.isArray(We)){var Cn="rgba(";Cn+=We[0]+",",Cn+=We[1]+",",Cn+=We[2]+",",Cn+=We[3]+")",We=Cn}if(ColorUtils.isRGB(We)){var An=ColorUtils.rgbaToHex(We);this.set("circle-fill",An.hex),this.set("circle-fill-opacity",An.opacity)}else this.set("circle-fill",We),this.set("circle-fill-opacity",1)}var En=e.getStroke();if(En){var Sn=En.getColor();if(Array.isArray(Sn)){var Tn="rgba(";Tn+=Sn[0]+",",Tn+=Sn[1]+",",Tn+=Sn[2]+",",Tn+=Sn[3]+")",Sn=Tn}if(ColorUtils.isRGB(Sn)){var Ln=ColorUtils.rgbaToHex(Sn);this.set("circle-stroke",Ln.hex),this.set("circle-stroke-opacity",Ln.opacity)}else this.set("circle-stroke",Sn),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",En.getWidth())}var Bn=e.getRadius();this.set("circle-radius",Bn)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(Te){var e=null,t={},Oe=null;if(Te.get("marker-color")||Te.get("marker-size")||Te.get("marker-symbol")){Oe={},Oe.src=this.DEFAULT_ICON.src,Oe.anchor=this.DEFAULT_ICON.anchor;var ke=Te.get("marker-symbol");ke&&ke.search("data:image/png;base64")!==-1&&(Oe.src=ke);var Be=Te.get("marker-color");ColorUtils.isHex(Be)&&(Oe.color=ColorUtils.hexToRgba(Be,1));var Ue=Te.get("marker-size");if(Ue)switch(Ue){case"small":Oe.scale=.5;break;case"medium":Oe.scale=1;break;case"large":Oe.scale=1.5;break;default:Oe.scale=this.DEFAULT_ICON.scale;break}}var He=null;(Te.get("stroke")||Te.get("stroke-opacity")||Te.get("stroke-width"))&&(He={},He.color=ColorUtils.hexToRgba(Te.get("stroke"),+Te.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),He.width=+Te.get("stroke-width")||this.DEFAULT_STROKE.width);var We=null;(Te.get("fill")||Te.get("fill-opacity"))&&(We={},We.color=ColorUtils.hexToRgba(Te.get("fill"),+Te.get("fill-opacity")||this.DEFAULT_FILL.opacity));var Cn=null,An=null,En=Te.get("name")!=="";En&&((Te.get("label-fill")||Te.get("label-fill-opacity"))&&(An={},An.color=ColorUtils.hexToRgba(Te.get("label-fill"),+Te.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(Te.get("label-stroke")||Te.get("label-stroke-opacity")||Te.get("label-stroke-width"))&&(Cn={},Cn.color=ColorUtils.hexToRgba(Te.get("label-stroke"),+Te.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),Cn.width=+Te.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var Sn=Te.get("circle-radius")||this.DEFAULT_CIRCLE.radius,Tn=null;(Te.get("circle-stroke")||Te.get("circle-stroke-opacity")||Te.get("circle-stroke-width"))&&(Tn={},Tn.color=ColorUtils.hexToRgba(Te.get("circle-stroke"),+Te.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),Tn.width=+Te.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var Ln=null;if((Te.get("circle-fill")||Te.get("circle-fill-opacity"))&&(Ln={},Ln.color=ColorUtils.hexToRgba(Te.get("circle-fill"),+Te.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),Te.getGeometry()){var Bn=Te.getGeometry().getType();switch(Bn){case"Circle":case"Point":case"MultiPoint":var ti=!1,ni={};if(Tn&&(ni.stroke=new Stroke(Tn)),Ln&&(ni.fill=new Fill(Ln)),Object.keys(ni).length!==0&&(ti=!0,ni.radius=+Sn,t.image=new CircleStyle(ni)),Oe&&(t.image=new Icon(Oe)),En){var ii={};if(Cn&&(ii.stroke=new Stroke(Cn)),An&&(ii.fill=new Fill(An)),Object.keys(ii).length!==0)ii.text=Te.get("name"),ii.textAlign=Te.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,ii.font=Te.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Text(Object.assign({},this.DEFAULT_TEXT,ii));else if(Oe||ti){var si=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(si){var oi=si.clone();oi.setText(Te.get("name")),t.text=oi}}}break;case"Polygon":case"MultiPolygon":He&&(t.stroke=new Stroke(He)),We&&(t.fill=new Fill(We));break;case"LineString":case"MultiLineString":if(He&&(t.stroke=new Stroke(He)),this.APPLY_CONVERT_GEOM_GPX&&We){var ci=Te.get("type");if(ci&&(ci==="Polygon"||ci==="MultiPolygon")){t.fill=new Fill(We);var vi=Te.clone(),pi=Bn==="LineString"?Polygon:MultiPolygon;Te.setGeometry(new pi([vi.getGeometry().getCoordinates()]))}}break}}return Object.keys(t).length!==0&&(e=new Style$1(t)),e},defineStyleFunctionByDefault:function(Te){if(!Te)return[];if(Object.keys(Te).length===0)return[];var e=(t,Oe)=>{if(t.getGeometry()){var ke=null,Be=t.getGeometry().getType();switch(Be){case"Point":case"MultiPoint":var Ue={};if(Te.getImage()&&(Ue.image=Te.getImage()),Te.getText()&&t.get("name")){var He=Te.getText().clone();He.setText(t.get("name")),Ue.text=He}ke=new Style$1(Ue);break;case"Circle":var We={},Cn={};if(Te.getFill()&&(Cn.fill=Te.getFill()),Te.getStroke()&&(Cn.stroke=Te.getStroke()),Te.getText()&&t.get("name")){var An=Te.getText().clone();An.setText(t.get("name")),We.text=An}Object.keys(Cn).length!==0&&(Cn.radius=3,We.image=new CircleStyle(Cn)),ke=new Style$1(We);break;case"Polygon":case"MultiPolygon":var En={};Te.getFill()&&(En.fill=Te.getFill()),Te.getStroke()&&(En.stroke=Te.getStroke()),ke=new Style$1(En);break;case"LineString":case"LinearRing":case"MultiLineString":var Sn={};Te.getStroke()&&(Sn.stroke=Te.getStroke()),ke=new Style$1(Sn);break}return[ke]}};return e},definePropertiesFromStyleByType:function(Te){if(Te.getGeometry()){var e=Te.getGeometry().getType();switch(e){case"Point":case"MultiPoint":Te.setPropertyMarker(),Te.setPropertyLabel();break;case"LineString":case"MultiLineString":Te.setPropertyStroke();break;case"Polygon":case"MultiPolygon":Te.setPropertyStroke(),Te.setPropertyFill();break}}},definePropertiesFromStyle:function(Te){var e=Te.getStyle()||Te.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,Te,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,Te.setStyle(e);else return}this.definePropertiesFromStyleByType(Te)}},defineTagFromStyle:function(Te,e){return logger$D.trace("todo..."),null}},logger$C=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(Te){var e=null,t=null,Oe=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var ke=require("@xmldom/xmldom").DOMParser;t=new ke,e=t.parseFromString(Te,"text/xml")}else Oe.DOMParser?(t=new Oe.DOMParser,e=t.parseFromString(Te,"text/xml")):Oe.ActiveXObject?(e=new Oe.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(Te)):logger$C.log("Incompatible environment for DOM Parser !");var Be=e.querySelector("parsererror");return Be?(console.error(Be),null):(logger$C.trace(e),e)},toString:function(Te){var e=new XMLSerializer,t=e.serializeToString(Te);return logger$C.trace(t),t},format:function(Te){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,Oe=/(<.+>)(.+\n)/g;Te=Te.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(Oe,`$1
$2`);for(var ke="",Be=Te.split(`
`),Ue=0,He="other",We={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},Cn=0;Cn<Be.length;Cn++){var An=Be[Cn],En=!!An.match(/<.+\/>/),Sn=!!An.match(/<\/.+>/),Tn=!!An.match(/<[^!].*>/),Ln=En?"single":Sn?"closing":Tn?"opening":"other",Bn=He+"->"+Ln;He=Ln;var ti="";Ue+=We[Bn];for(var ni=0;ni<Ue;ni++)ti+="	";Bn==="opening->closing"?ke=ke.substr(0,ke.length-1)+An+`
`:ke+=ti+An+`
`}return logger$C.trace(ke),ke}},logger$B=LoggerByDefault.getLogger("extended KML format"),KML=class Bf extends KML$1{constructor(e){if(super(e),!(this instanceof Bf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,Oe){for(var ke=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Be=ke,Ue=0;Ue<ke.length;Ue++){const hr=ke[Ue];if(hr.nodeName==="Document"){Be=hr.childNodes;break}if(hr.nodeName==="Placemark"){Be=[hr];break}}for(var He={},We=-1,Cn=0;Cn<Be.length;Cn++){var An=Be[Cn];switch(An.nodeName){case"Style":var En=An.attributes[0];if(En&&En.nodeName==="id"){var Sn=En.nodeValue,Tn=An;He[Sn]=Tn}break;case"Placemark":We++;for(var Ln=An.childNodes,Bn=!1,ti=!1,ni=!1,ii=null,si=null,oi=null,ci=An,vi=0;vi<Ln.length;vi++)switch(Ln[vi].nodeName){case"Polygon":ni=!0;break;case"LineString":ti=!0;break;case"Point":Bn=!0;break;case"Style":si=Ln[vi],ii=Ln[vi].childNodes;break;case"styleUrl":var pi=Ln[vi].textContent.slice(1);He[pi]&&(ii=He[pi].childNodes);break;case"ExtendedData":oi=Ln[vi].childNodes;break;case"name":ci=null;break}if(oi){logger$B.log("ExtendedData :",oi);var fi=Oe.extendedData;fi&&typeof fi=="function"&&fi(t[We],oi)}if(ci){logger$B.log("Name :",ci);var Mi=Oe.nameData;Mi&&typeof Mi=="function"&&Mi(t[We],ci)}if(Bn&&ii&&ii.length!==0){for(var Oi=null,ui=null,li=0;li<ii.length;li++)switch(ii[li].nodeName){case"LabelStyle":Oi=ii[li];break;case"IconStyle":ui=ii[li];break}var Ri=t[We].getProperties().name,Pi=t[We].getProperties().description,Fi=Ri||Pi;if(logger$B.trace(Fi),!ui&&Oi){var Hi=Oe.labelStyle;Hi&&typeof Hi=="function"&&Hi(t[We],Oi)}else if(ui&&!Oi){var nr=Oe.iconStyle;nr&&typeof nr=="function"&&nr(t[We],ui)}else if(ui&&Oi){var ar=Oe.iconLabelStyle;ar&&typeof ar=="function"&&ar(t[We],ui,Oi)}}else{var cr=t[We],sr=cr.getStyle();if(sr&&typeof sr=="function"){var br=sr.call(this,cr,0);br&&br.length!==0&&(sr=br[0])}if(ni){var Ni=Oe.polygonStyle;Ni&&typeof Ni=="function"&&Ni(t[We],ii)}if(ti){var or=Oe.lineStringStyle;or&&typeof or=="function"&&or(t[We],ii)}if(Bn&&sr){var er=sr.getImage();if(er&&er instanceof CircleStyle){var fr=Oe.circleStyle;fr&&typeof fr=="function"&&fr(t[We],si)}else if(er&&er instanceof Icon){var mr=Oe.pointStyle;mr&&typeof mr=="function"&&mr(t[We],si)}}}break;default:logger$B.trace("tag is not processing !")}}}writeFeatures(e,t){logger$B.log("overload : ol.format.KML.writeFeatures");var Oe=super.writeFeaturesNode(e,t);if(Oe===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(Oe,this.extensions);var ke=this._writeExtendStylesFeatures(Oe,e,t),Be=Parser$1.format(ke);return Be===""?null:Be}_writeExtendStylesFeatures(e,t,Oe){function ke(Tn,Ln){var Bn=Tn.toString(16);Bn.charAt(0)==="#"&&(Bn=Bn.slice(1)),Ln=Ln||1,Ln=parseInt(Ln*255,10),Ln=Ln.toString(16);var ti=Ln;return ti=ti+Bn.substr(4,2),ti=ti+Bn.substr(2,2),ti=ti+Bn.substr(0,2),ti.toLowerCase()}var Be=function(Tn,Ln){if(logger$B.trace("label with style :",Ln),!!Tn&&Tn.getStyle()instanceof Style$1){var Bn=Tn.getStyle().getText();if(!Bn)return;var ti="Sans",ni="16px",ii=Bn.getFont();if(ii){var si=ii.split(" ",2);ni=si[0],ti=si[1]}var oi=Tn.getStyle().getText().getStroke();if(!oi)return;if(oi instanceof Stroke){var ci=ke("#FFFFFF"),vi=oi.getColor();if(Array.isArray(vi)){var pi="rgba(";pi+=vi[0]+",",pi+=vi[1]+",",pi+=vi[2]+",",pi+=vi[3]+")",vi=pi}if(ColorUtils.isRGB(vi)){var fi=ColorUtils.rgbaToHex(vi);ci=ke(fi.hex,fi.opacity)}else ci=ke(vi);var Mi=oi.getWidth()||"0",Oi="1";if(Ln&&Ln.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var ui=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");ui.setAttribute("fontSize",ni),ui.setAttribute("fontFamily",ti),ui.setAttribute("haloColor",ci),ui.setAttribute("haloRadius",Mi),ui.setAttribute("haloOpacity",Oi),Ln.appendChild(ui)}}var li=Tn.getStyle().getImage();if(!li)return;if(li instanceof CircleStyle){var Ri=null,Pi=null;if(li.getStroke()){if(Pi=li.getStroke().getWidth(),Ri=li.getStroke().getColor(),Array.isArray(Ri)){var Fi="rgba(";Fi+=Ri[0]+",",Fi+=Ri[1]+",",Fi+=Ri[2]+",",Fi+=Ri[3]+")",Ri=Fi}if(ColorUtils.isRGB(Ri)){var Hi=ColorUtils.rgbaToHex(Ri);Ri=ke(Hi.hex,Hi.opacity)}else Ri=ke(Ri)}var nr=null;if(li.getFill()){if(nr=li.getFill().getColor(),Array.isArray(nr)){var ar="rgba(";ar+=nr[0]+",",ar+=nr[1]+",",ar+=nr[2]+",",ar+=nr[3]+")",nr=ar}if(ColorUtils.isRGB(nr)){var cr=ColorUtils.rgbaToHex(nr);nr=ke(cr.hex,cr.opacity)}else nr=ke(nr)}if(Ln&&Ln.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var sr=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");sr.setAttribute("type","circle"),sr.setAttribute("radius",li.getRadius()),sr.setAttribute("fillColor",nr),sr.setAttribute("strokeColor",Ri),sr.setAttribute("strokeWidth",Pi),Ln.appendChild(sr)}}}},Ue=function(Tn,Ln){if(logger$B.trace("marker with style (hotspot):",Ln),!!Tn&&Tn.getStyle()instanceof Style$1){var Bn=Tn.getStyle().getImage();if(!Bn)return;if(Bn instanceof Icon){var ti=0,ni=0,ii="pixels",si="pixels",oi=Bn.getSize(),ci=Bn.getAnchor();if(ci.length&&(ti=ci[0],ni=ci[1],si==="fraction"?ni=ni===1?0:1-ni:ni=si==="pixels"&&ni===oi[1]?0:oi[1]-ni),Ln&&Ln.getElementsByTagName("hotSpot").length===0){var vi=document.createElementNS(e.namespaceURI,"hotSpot");vi.setAttribute("x",ti),vi.setAttribute("y",ni),vi.setAttribute("xunits",ii),vi.setAttribute("yunits",si),Ln.appendChild(vi)}}}},He=function(Tn,Ln){if(Tn&&Tn.getStyle()instanceof Style$1){var Bn=Tn.getStyle().getImage();if(!Bn)return;if(Bn instanceof CircleStyle){var ti=null,ni=null;if(Bn.getStroke()){if(ni=Bn.getStroke().getWidth(),ti=Bn.getStroke().getColor(),Array.isArray(ti)){var ii="rgba(";ii+=ti[0]+",",ii+=ti[1]+",",ii+=ti[2]+",",ii+=ti[3]+")",ti=ii}if(ColorUtils.isRGB(ti)){var si=ColorUtils.rgbaToHex(ti);ti=ke(si.hex,si.opacity)}else ti=ke(ti)}var oi=null;if(Bn.getFill()){if(oi=Bn.getFill().getColor(),Array.isArray(oi)){var ci="rgba(";ci+=oi[0]+",",ci+=oi[1]+",",ci+=oi[2]+",",ci+=oi[3]+")",oi=ci}if(ColorUtils.isRGB(oi)){var vi=ColorUtils.rgbaToHex(oi);oi=ke(vi.hex,vi.opacity)}else oi=ke(oi)}if(Ln&&Ln.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var pi=document.createElementNS(e.namespaceURI,"LabelStyle"),fi=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");fi.setAttribute("type","circle"),fi.setAttribute("radius",Bn.getRadius()),fi.setAttribute("fillColor",oi),fi.setAttribute("strokeColor",ti),fi.setAttribute("strokeWidth",ni),pi.appendChild(fi),Ln.appendChild(pi)}}}},We=function(Tn,Ln){},Cn=function(Tn,Ln,Bn){logger$B.trace("write an icon with a label"),Ue(Tn,Ln),Be(Tn,Bn)},An=function(Tn,Ln){for(var Bn=0;Bn<Ln.length;Bn++){var ti=Ln[Bn];if(ti.nodeName==="name")return}var ni=Tn.getProperties().name;if(ni){var ii=document.createElement("name");ii.innerHTML=ni,Ln.appendChild(ii)}},En=function(Tn,Ln){if(Ln&&Ln.length){for(var Bn=[],ti=0;ti<Ln.length;ti++){const ii=Ln[ti];if(ii.nodeName==="Data"){var ni=ii.getAttribute("name");Styling.getListTags().includes(ni)&&Bn.push(ii)}}Bn&&Bn.length&&Bn.forEach(ii=>{ii.remove()})}};this._processKml(e,t,{labelStyle:Be,iconStyle:Ue,iconLabelStyle:Cn,circleStyle:He,pointStyle:We,nameData:An,extendedData:En});var Sn=Parser$1.toString(e);return Sn||null}_writeRootExtensions(e,t){var Oe=document.createElementNS(e.namespaceURI,"ExtendedData");for(const He in t)if(Object.hasOwnProperty.call(t,He)){const We=t[He];var ke=document.createElementNS(e.namespaceURI,"Data");ke.setAttribute("name",He);var Be=document.createTextNode(JSON.stringify(We));ke.appendChild(Be),Oe.appendChild(ke)}var Ue=e.firstChild;e.insertBefore(Oe,Ue)}readFeatures(e,t){logger$B.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Oe=this._readExtendStylesFeatures(e,t);return logger$B.trace("Styles étendus",Oe),Oe.forEach(ke=>{Styling.definePropertiesFromStyle(ke)}),Oe}_readExtendStylesFeatures(e,t){var Oe=super.readFeatures(e,t),ke=null,Be="";if(typeof e=="string"?Be=e:Be=e.documentElement.outerHTML,Be=Be.replace(/\n/g,""),Be=Be.replace(/(>)\s*(<)/g,"$1$2"),ke=Parser$1.parse(Be),ke===null)return Oe;function Ue(Sn){var Tn="";Tn=Tn+Sn.substr(6,2),Tn=Tn+Sn.substr(4,2),Tn=Tn+Sn.substr(2,2);for(var Ln=parseInt(Tn,16).toString(16),Bn="",ti=Ln.length||0,ni=0;ni<6-ti;ni++)Bn+="0";return Ln="#"+Bn+Ln,Ln}var He=function(Sn,Tn){if(logger$B.trace("label with style :",Tn),!!Sn){for(var Ln=Sn.getProperties().name,Bn=Ue("ff000000"),ti="#FFFFFF",ni=0,ii="Sans",si="16px",oi=null,ci=5,vi="#000000",pi="#ffffff",fi=1,Mi=!1,Oi=!1,ui=Tn.childNodes,li=0;li<ui.length;li++)switch(ui[li].nodeName){case"scale":break;case"colorMode":break;case"color":Bn=Ue(ui[li].textContent);break;case"LabelStyleSimpleExtensionGroup":Mi=!0;for(var Ri=ui[li].attributes,Pi=0;Pi<Ri.length;Pi++)switch(Ri[Pi].nodeName){case"fontFamily":ii=Ri[Pi].nodeValue;break;case"fontSize":si=Ri[Pi].nodeValue;break;case"haloColor":ti=Ue(Ri[Pi].nodeValue);break;case"haloRadius":ni=parseInt(Ri[Pi].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Oi=!0;for(var Fi=ui[li].attributes,Hi=0;Hi<Fi.length;Hi++)switch(Fi[Hi].nodeName){case"type":oi=Fi[Hi].nodeValue;break;case"radius":ci=parseInt(Fi[Hi].nodeValue,10);break;case"fillColor":var nr=Fi[Hi].nodeValue,ar=Math.round(ColorUtils.num(nr.substr(0,2))/255*10)/10,cr=Ue(nr);vi=ColorUtils.hexToRgba(cr,ar);break;case"strokeColor":var sr=Fi[Hi].nodeValue,br=Math.round(ColorUtils.num(sr.substr(0,2))/255*10)/10,Ni=Ue(sr);pi=ColorUtils.hexToRgba(Ni,br);break;case"strokeWidth":fi=parseInt(Fi[Hi].nodeValue,10);break}break}var or=null;Oi&&oi==="circle"?or=new CircleStyle({radius:ci,fill:new Fill({color:vi}),stroke:new Stroke({color:pi,width:fi})}):Mi&&(or=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),Sn.setStyle(new Style$1({image:or,text:new Text({font:si+" "+ii,textAlign:"left",text:Ln,fill:new Fill({color:Bn}),stroke:new Stroke({color:ti,width:ni})})}))}},We=function(Sn,Tn){logger$B.trace("hotspot :",Tn);for(var Ln=null,Bn=null,ti=Ue("ffffffff"),ni=!1,ii=51,si=38,oi=!1,ci=25.5,vi="pixels",pi=38,fi="pixels",Mi=Tn.childNodes,Oi=!1,ui=0;ui<Mi.length;ui++)switch(Mi[ui].nodeName){case"Icon":Oi=!0;for(var li=Mi[ui].childNodes,Ri=0;Ri<li.length;Ri++)switch(li[Ri].nodeName){case"href":Ln=li[Ri].textContent;break;case"gx:w":ni=!0,ii=parseFloat(li[Ri].textContent);break;case"gx:h":ni=!0,si=parseFloat(li[Ri].textContent);break}break;case"hotSpot":oi=!0;for(var Pi=Mi[ui].attributes,Fi=0;Fi<Pi.length;Fi++)switch(Pi[Fi].nodeName){case"x":ci=parseFloat(Pi[Fi].nodeValue);break;case"y":pi=parseFloat(Pi[Fi].nodeValue);break;case"yunits":vi=Pi[Fi].nodeValue;break;case"xunits":fi=Pi[Fi].nodeValue;break}break;case"scale":Bn=parseFloat(Mi[ui].textContent);break;case"color":ti=Ue(Mi[ui].textContent);break}var Hi=null;if(Oi){var nr={src:Ln||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:ti,crossOrigin:"anonymous",scale:Bn||1};ni&&Helper.mergeParams(nr,{size:[ii,si]}),oi&&Helper.mergeParams(nr,{anchor:[ci,pi],anchorOrigin:"bottom-left",anchorXUnits:vi||"pixels",anchorYUnits:fi||"pixels"}),Hi=new Icon(nr)}var ar=Sn.getStyleFunction();if(ar){var cr=ar(Sn,0);if(cr&&!Array.isArray(cr)&&(cr=[cr]),cr&&cr.length!==0){var sr=cr.length===1?cr[0]:cr[cr.length-1];Sn.setStyle(new Style$1({image:Hi,text:sr.getText()}))}}},Cn=function(Sn,Tn){if(logger$B.trace("extendData :",Tn),!!Sn){for(var Ln={},Bn=Sn.get("name")||"",ti=Sn.get("description")||"",ni=null,ii=0;ii<Tn.length;ii++){var si=Tn[ii],oi=si.attributes[0],ci=si.childNodes;if(oi.nodeName==="name")switch(oi.nodeValue){case"label":Bn=si.textContent,Ln.name=Bn;break;case"title":case"attributetitle":for(var vi=0;vi<ci.length;vi++)ci[vi].nodeName==="value"&&(ni=ci[vi].textContent);break;default:Ln[oi.nodeValue]=si.textContent;break}}ni&&(ti=ti?ni+" : "+ti:ni,Ln.description=ti),Object.keys(Ln).length&&Sn.setProperties(Ln,!0)}},An=function(Sn,Tn,Ln){logger$B.trace("display icon and label"),He(Sn,Ln),We(Sn,Tn)},En=function(Sn,Tn){};return this._processKml(ke,Oe,{lineStringStyle:En,polygonStyle:En,pointStyle:En,labelStyle:this.showPointNames_?He:null,iconStyle:We,iconLabelStyle:this.showPointNames_?An:We,extendedData:Cn}),Oe}readRootExtensions(e){for(var t={},Oe=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,ke=Oe.childNodes,Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.nodeName==="ExtendedData")for(var He=Ue.childNodes,We=0;We<He.length;We++){var Cn=He[We];if(Cn.nodeName==="Data"){var An=Cn.attributes[0];if(An&&An.nodeName==="name"&&An.nodeValue===e){t=JSON.parse(Cn.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),AUTHOR_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),email:parseEmail,link:parseLink}),METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),author:makeObjectPropertySetter(readAuthor),copyright:makeObjectPropertySetter(readCopyright),link:parseLink,time:makeObjectPropertySetter(readDateTime),keywords:makeObjectPropertySetter(readString),bounds:parseBounds,extensions:parseExtensions}),COPYRIGHT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{year:makeObjectPropertySetter(readPositiveInteger),license:makeObjectPropertySetter(readString)}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];if(this.readExtensions_){const Be=ke.get("extensionsNode_")||null;this.readExtensions_(ke,Be)}ke.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(parse$1(e)):isDocument(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const Oe=this.readMetadataFromNode(t);if(Oe)return Oe}return null}readMetadataFromNode(e){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$3.includes(t.namespaceURI)&&t.localName==="metadata")return pushParseAndPop({},METADATA_PARSERS,t,[]);return null}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const Oe=FEATURE_READER[e.localName];if(!Oe)return null;const ke=Oe(e,[this.getReadOptions(e,t)]);return ke?(this.handleReadExtensions_([ke]),ke):null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const Oe=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,t)]);return Oe?(this.handleReadExtensions_(Oe),Oe):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const Oe=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return Oe.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),Oe.setAttribute("version","1.1"),Oe.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:Oe},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[t]),Oe}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(Te,e,t){const Oe=Te.getGeometry();if(Oe){const ke=GEOMETRY_TYPE_TO_NODENAME[Oe.getType()];if(ke){const Be=e[e.length-1].node;return createElementNS(Be.namespaceURI,ke)}}}function appendCoordinate(Te,e,t,Oe){return Te.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in Oe?(Te.push(Oe.ele),delete Oe.ele,e.hasZ=!0):Te.push(0),"time"in Oe?(Te.push(Oe.time),delete Oe.time,e.hasM=!0):Te.push(0),Te}function applyLayoutOptions(Te,e,t){let Oe="XY",ke=2;if(Te.hasZ&&Te.hasM?(Oe="XYZM",ke=4):Te.hasZ?(Oe="XYZ",ke=3):Te.hasM&&(Oe="XYM",ke=3),ke!==4){for(let Be=0,Ue=e.length/4;Be<Ue;Be++)e[Be*ke]=e[Be*4],e[Be*ke+1]=e[Be*4+1],Te.hasZ&&(e[Be*ke+2]=e[Be*4+2]),Te.hasM&&(e[Be*ke+2]=e[Be*4+3]);if(e.length=e.length/4*ke,t)for(let Be=0,Ue=t.length;Be<Ue;Be++)t[Be]=t[Be]/4*ke}return Oe}function readAuthor(Te,e){const t=pushParseAndPop({},AUTHOR_PARSERS,Te,e);if(t)return t}function readCopyright(Te,e){const t=pushParseAndPop({},COPYRIGHT_PARSERS,Te,e);if(t){const Oe=Te.getAttribute("author");return Oe!==null&&(t.author=Oe),t}}function parseBounds(Te,e){const t=e[e.length-1],Oe=Te.getAttribute("minlat"),ke=Te.getAttribute("minlon"),Be=Te.getAttribute("maxlat"),Ue=Te.getAttribute("maxlon");ke!==null&&Oe!==null&&Ue!==null&&Be!==null&&(t.bounds=[[parseFloat(ke),parseFloat(Oe)],[parseFloat(Ue),parseFloat(Be)]])}function parseEmail(Te,e){const t=e[e.length-1],Oe=Te.getAttribute("id"),ke=Te.getAttribute("domain");Oe!==null&&ke!==null&&(t.email=`${Oe}@${ke}`)}function parseLink(Te,e){const t=e[e.length-1],Oe=Te.getAttribute("href");Oe!==null&&(t.link=Oe),parseNode(LINK_PARSERS,Te,e)}function parseExtensions(Te,e){const t=e[e.length-1];t.extensionsNode_=Te}function parseRtePt(Te,e){const t=pushParseAndPop({},RTEPT_PARSERS,Te,e);if(t){const Oe=e[e.length-1],ke=Oe.flatCoordinates,Be=Oe.layoutOptions;appendCoordinate(ke,Be,Te,t)}}function parseTrkPt(Te,e){const t=pushParseAndPop({},TRKPT_PARSERS,Te,e);if(t){const Oe=e[e.length-1],ke=Oe.flatCoordinates,Be=Oe.layoutOptions;appendCoordinate(ke,Be,Te,t)}}function parseTrkSeg(Te,e){const t=e[e.length-1];parseNode(TRKSEG_PARSERS,Te,e);const Oe=t.flatCoordinates;t.ends.push(Oe.length)}function readRte(Te,e){const t=e[0],Oe=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,Te,e);if(!Oe)return;const ke=Oe.flatCoordinates;delete Oe.flatCoordinates;const Be=Oe.layoutOptions;delete Oe.layoutOptions;const Ue=applyLayoutOptions(Be,ke),He=new LineString(ke,Ue);transformGeometryWithOptions(He,!1,t);const We=new Feature(He);return We.setProperties(Oe,!0),We}function readTrk(Te,e){const t=e[0],Oe=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,Te,e);if(!Oe)return;const ke=Oe.flatCoordinates;delete Oe.flatCoordinates;const Be=Oe.ends;delete Oe.ends;const Ue=Oe.layoutOptions;delete Oe.layoutOptions;const He=applyLayoutOptions(Ue,ke,Be),We=new MultiLineString(ke,He,Be);transformGeometryWithOptions(We,!1,t);const Cn=new Feature(We);return Cn.setProperties(Oe,!0),Cn}function readWpt(Te,e){const t=e[0],Oe=pushParseAndPop({},WPT_PARSERS,Te,e);if(!Oe)return;const ke={},Be=appendCoordinate([],ke,Te,Oe),Ue=applyLayoutOptions(ke,Be),He=new Point$1(Be,Ue);transformGeometryWithOptions(He,!1,t);const We=new Feature(He);return We.setProperties(Oe,!0),We}function writeLink(Te,e,t){Te.setAttribute("href",e);const ke=t[t.length-1].properties,Be=[ke.linkText,ke.linkType];pushSerializeAndPop({node:Te},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Be,t,LINK_SEQUENCE)}function writeWptType(Te,e,t){const Oe=t[t.length-1],Be=Oe.node.namespaceURI,Ue=Oe.properties;switch(Te.setAttributeNS(null,"lat",String(e[1])),Te.setAttributeNS(null,"lon",String(e[0])),Oe.geometryLayout){case"XYZM":e[3]!==0&&(Ue.time=e[3]);case"XYZ":e[2]!==0&&(Ue.ele=e[2]);break;case"XYM":e[2]!==0&&(Ue.time=e[2]);break}const We=Te.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Be]:WPT_TYPE_SEQUENCE[Be],Cn=makeSequence(Ue,We);pushSerializeAndPop({node:Te,properties:Ue},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,We)}function writeRte(Te,e,t){const Oe=t[0],ke=e.getProperties(),Be={node:Te};Be.properties=ke;const Ue=e.getGeometry();if(Ue.getType()=="LineString"){const An=transformGeometryWithOptions(Ue,!0,Oe);Be.geometryLayout=An.getLayout(),ke.rtept=An.getCoordinates()}const He=t[t.length-1].node,We=RTE_SEQUENCE[He.namespaceURI],Cn=makeSequence(ke,We);pushSerializeAndPop(Be,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,We)}function writeTrk(Te,e,t){const Oe=t[0],ke=e.getProperties(),Be={node:Te};Be.properties=ke;const Ue=e.getGeometry();if(Ue.getType()=="MultiLineString"){const An=transformGeometryWithOptions(Ue,!0,Oe);ke.trkseg=An.getLineStrings()}const He=t[t.length-1].node,We=TRK_SEQUENCE[He.namespaceURI],Cn=makeSequence(ke,We);pushSerializeAndPop(Be,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,We)}function writeTrkSeg(Te,e,t){const Oe={node:Te};Oe.geometryLayout=e.getLayout(),Oe.properties={},pushSerializeAndPop(Oe,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),t)}function writeWpt(Te,e,t){const Oe=t[0],ke=t[t.length-1];ke.properties=e.getProperties();const Be=e.getGeometry();if(Be.getType()=="Point"){const Ue=transformGeometryWithOptions(Be,!0,Oe);ke.geometryLayout=Ue.getLayout(),writeWptType(Te,Ue.getCoordinates(),t)}}var GPX=class Uf extends GPX$1{constructor(e){if(super(e),!(this instanceof Uf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(Oe,ke){this.readExtensions(Oe,ke),t.call(this,Oe,ke)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var Oe=super.readFeatures(e,t);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var ke=this;return Oe.forEach(function(Be,Ue,He){Be.setId(Ue+1);var We=Be.getProperties().desc;We&&Be.setProperties({description:We});var Cn=Be.getStyleFunction();if(!Cn){var An=Styling.defineStyleFunctionByDefault(ke.options.defaultStyle);An&&Be.setStyle(An)}}),Oe}writeFeatures(e,t){if(e.forEach(function(We,Cn,An){var En=We.getProperties().description;En&&We.setProperties({desc:En}),Styling.definePropertiesFromStyle(We);var Sn=We.getGeometry().getType();if(Sn==="Polygon"){var Tn=We.clone();Tn.set("type",Sn),Tn.setGeometry(new LineString(We.getGeometry().getCoordinates())),e.push(Tn),An.splice(Cn,1)}else if(Sn==="MultiPolygon"){var Ln=We.clone();Ln.set("type",Sn),Ln.setGeometry(new MultiLineString(We.getGeometry().getCoordinates())),e.push(Ln),An.splice(Cn,1)}}),this.options.orderBy!==void 0){var Oe=this.options.orderBy;if(Oe){var ke=function(We,Cn){var An=We.get(Oe)||0,En=Cn.get(Oe)||0;return An.toString().localeCompare(En.toString(),void 0,{numeric:!0})};e.sort(ke)}}var Be=super.writeFeaturesNode(e,t);if(Be===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Be,this.options.extensions),this.processExtensions_(Be,e,{extensions:this.writeExtensions_});var Ue=Parser$1.toString(Be);if(!Ue)return null;var He=Parser$1.format(Ue);return He===""?null:He}readExtensions(e,t){var Oe=t;if(!t){var ke=e.getProperties();for(const We in ke)if(Object.hasOwnProperty.call(ke,We)){const Cn=ke[We];if(Cn instanceof Node){Oe=Cn;break}}}if(!Oe){console.warn("node not found !");return}for(var Be=0;Be<Oe.childNodes.length;Be++){var Ue=Oe.childNodes[Be];Ue.nodeType===1&&e.set(Ue.nodeName,Ue.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var He=Styling.defineStyleFromProperties(e);He&&e.setStyle(He)}readRootExtensions(e){for(var t={},Oe=this.source.childNodes[0],ke=Oe.childNodes,Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.nodeName==="metadata")for(var He=Ue.childNodes,We=0;We<He.length;We++){var Cn=He[We];if(Cn.nodeName==="extensions")for(var An=Cn.childNodes,En=0;En<An.length;En++){var Sn=An[En];if(Sn.nodeName==="data"){var Tn=Sn.attributes[0];if(Tn&&Tn.nodeName==="name"&&Tn.nodeValue===e){t=JSON.parse(Sn.textContent);break}}}}}return t}writeRootExtensions_(e,t,Oe){var ke=document.createElement("metadata"),Be=document.createElement("extensions");function Ue(An,En){for(const ii in En)if(Object.hasOwnProperty.call(En,ii)){var Sn=En[ii]||"",Tn=document.createElement(ii);if(typeof Sn=="string"||typeof Sn=="number")Tn.innerHTML=Sn,An.appendChild(Tn);else if(Sn instanceof Array){Tn.setAttribute("type","array"),Tn.setAttribute("index",Sn.length);for(let si=0;si<Sn.length;si++){var Ln=Sn[si]||"",Bn=document.createElement("value");if(typeof Ln=="string"||typeof Ln=="number")Bn.innerHTML=Ln,Tn.appendChild(Bn);else if(Ln instanceof Array){Bn.setAttribute("type","array"),Bn.setAttribute("index",Ln.length);for(let oi=0;oi<Ln.length;oi++){var ti=Ln[oi]||"",ni=document.createElement("value");(typeof ti=="string"||typeof ti=="number")&&(ni.innerHTML=ti,Bn.appendChild(ni))}Tn.appendChild(Bn)}else Ln instanceof Object&&Tn.appendChild(Ue(Bn,Ln))}An.appendChild(Tn)}else Sn instanceof Object&&An.appendChild(Ue(Tn,Sn))}return An}if(Oe)Ue(Be,t);else for(const An in t)if(Object.hasOwnProperty.call(t,An)){const En=t[An];var He=document.createElement("data");He.setAttribute("name",An);var We=document.createTextNode(JSON.stringify(En));He.appendChild(We),Be.appendChild(He)}ke.appendChild(Be);var Cn=e.firstChild;e.insertBefore(ke,Cn)}writeExtensions_(e,t){var Oe=document.createElementNS(t.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(ke=>{if(e.get(ke)){var Be=document.createElementNS(t.parentNode.namespaceURI,ke);Be.innerHTML=e.get(ke),Oe.appendChild(Be)}}),t.appendChild(Oe)}processExtensions_(e,t,Oe){for(var ke=-1,Be=e.childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];switch(He.nodeName){case"wpt":case"rte":case"trk":ke++;var We=t[ke],Cn=We.getStyle();if(Cn){var An=Oe.extensions;An&&typeof An=="function"&&An(We,He)}break;case"metadata":break;default:console.warn("nodename unknown :",He.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(Te){if(typeof Te=="string"){const e=JSON.parse(Te);return e||null}return Te!==null?Te:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let Oe=null;e.type==="Feature"?Oe=e:Oe={type:"Feature",geometry:e,properties:null};const ke=readGeometryInternal(Oe.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:ke,id:Oe.id,properties:Oe.properties},t);const Be=new Feature;return this.geometryName_?Be.setGeometryName(this.geometryName_):this.extractGeometryName_&&Oe.geometry_name&&Be.setGeometryName(Oe.geometry_name),Be.setGeometry(createGeometry(ke,t)),"id"in Oe&&Be.setId(Oe.id),Oe.properties&&Be.setProperties(Oe.properties,!0),Be}readFeaturesFromObject(e,t){const Oe=e;let ke=null;if(Oe.type==="FeatureCollection"){const Be=e;ke=[];const Ue=Be.features;for(let He=0,We=Ue.length;He<We;++He){const Cn=this.readFeatureFromObject(Ue[He],t);Cn&&ke.push(Cn)}}else ke=[this.readFeatureFromObject(e,t)];return ke.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let Oe;if(t)if(t.type=="name")Oe=get$3(t.properties.name);else if(t.type==="EPSG")Oe=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else Oe=this.dataProjection;return Oe}writeFeatureObject(e,t){t=this.adaptOptions(t);const Oe={type:"Feature",geometry:null,properties:null},ke=e.getId();if(ke!==void 0&&(Oe.id=ke),!e.hasProperties())return Oe;const Be=e.getProperties(),Ue=e.getGeometry();return Ue&&(Oe.geometry=writeGeometry(Ue,t),delete Be[e.getGeometryName()]),isEmpty$1(Be)||(Oe.properties=Be),Oe}writeFeaturesObject(e,t){t=this.adaptOptions(t);const Oe=[];for(let ke=0,Be=e.length;ke<Be;++ke)Oe.push(this.writeFeatureObject(e[ke],t));return{type:"FeatureCollection",features:Oe}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}};function readGeometryInternal(Te,e){if(!Te)return null;let t;switch(Te.type){case"Point":{t=readPointGeometry(Te);break}case"LineString":{t=readLineStringGeometry(Te);break}case"Polygon":{t=readPolygonGeometry(Te);break}case"MultiPoint":{t=readMultiPointGeometry(Te);break}case"MultiLineString":{t=readMultiLineStringGeometry(Te);break}case"MultiPolygon":{t=readMultiPolygonGeometry(Te);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(Te);break}default:throw new Error("Unsupported GeoJSON type: "+Te.type)}return t}function readGeometry(Te,e){const t=readGeometryInternal(Te);return createGeometry(t,e)}function readGeometryCollectionGeometry(Te,e){return Te.geometries.map(function(Oe){return readGeometryInternal(Oe)})}function readPointGeometry(Te){const e=Te.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(Te){var Oe;const e=Te.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(((Oe=e[0])==null?void 0:Oe.length)||2)}}function readMultiLineStringGeometry(Te){var Be,Ue;const e=Te.coordinates,t=((Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue.length)||2,Oe=[],ke=deflateCoordinatesArray(Oe,0,e,t);return{type:"MultiLineString",flatCoordinates:Oe,ends:ke,layout:getLayoutForStride(t)}}function readMultiPointGeometry(Te){var t;const e=Te.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((t=e[0])==null?void 0:t.length)||2)}}function readMultiPolygonGeometry(Te){var Be,Ue;const e=Te.coordinates,t=[],Oe=((Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue[0].length)||2,ke=deflateMultiCoordinatesArray(t,0,e,Oe);return{type:"MultiPolygon",flatCoordinates:t,ends:ke,layout:getLayoutForStride(Oe)}}function readPolygonGeometry(Te){var Be,Ue;const e=Te.coordinates,t=[],Oe=(Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue.length,ke=deflateCoordinatesArray(t,0,e,Oe);return{type:"Polygon",flatCoordinates:t,ends:ke,layout:getLayoutForStride(Oe)}}function writeGeometry(Te,e){Te=transformGeometryWithOptions(Te,!0,e);const t=Te.getType();let Oe;switch(t){case"Point":{Oe=writePointGeometry(Te);break}case"LineString":{Oe=writeLineStringGeometry(Te);break}case"Polygon":{Oe=writePolygonGeometry(Te,e);break}case"MultiPoint":{Oe=writeMultiPointGeometry(Te);break}case"MultiLineString":{Oe=writeMultiLineStringGeometry(Te);break}case"MultiPolygon":{Oe=writeMultiPolygonGeometry(Te,e);break}case"GeometryCollection":{Oe=writeGeometryCollectionGeometry(Te,e);break}case"Circle":{Oe={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return Oe}function writeGeometryCollectionGeometry(Te,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:Te.getGeometriesArray().map(function(Oe){return writeGeometry(Oe,e)})}}function writeLineStringGeometry(Te,e){return{type:"LineString",coordinates:Te.getCoordinates()}}function writeMultiLineStringGeometry(Te,e){return{type:"MultiLineString",coordinates:Te.getCoordinates()}}function writeMultiPointGeometry(Te,e){return{type:"MultiPoint",coordinates:Te.getCoordinates()}}function writeMultiPolygonGeometry(Te,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:Te.getCoordinates(t)}}function writePointGeometry(Te,e){return{type:"Point",coordinates:Te.getCoordinates()}}function writePolygonGeometry(Te,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:Te.getCoordinates(t)}}var GeoJSON=class jf extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var Oe=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),Oe.forEach(ke=>{var Be=ke.getStyleFunction();if(Be){var Ue=Be.call(this,ke,0);Ue&&Ue.length!==0&&ke.setStyle(Ue[0])}else{var He=Styling.defineStyleFromProperties(ke);if(He)ke.setStyle(He);else{var We=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);We&&(ke.setStyle(We),Styling.definePropertiesFromStyle(ke))}}}),Oe}writeFeatures(e,t){e.forEach(function(ke){Styling.definePropertiesFromStyle(ke)});var Oe=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(Oe,this.options.extensions),JSON.stringify(Oe)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,Oe,ke){var Be=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,Ue=this.tileGrid,He=this.tileGrid.getTileCoordForCoordAndResolution(e,t),We=function(si,oi,ci){var vi=[0,0,0],pi=createEmpty(),fi=si[1],Mi=si[2],Oi=oi.getTileCoordExtent(si),ui=ci.getExtent();if(ui!=null&&ci.isGlobal()){var li=Math.ceil(getWidth(ui)/getWidth(Oi));fi=fi%li,vi[0]=si[0],vi[1]=fi,vi[2]=si[2],Oi=oi.getTileCoordExtent(vi,pi)}return intersects$1(Oi,ui)?[si[0],fi,Mi]:null},Cn=Ue.getTileCoordExtent(He),An=We(He,Ue,Oe);if(!(Ue.getResolutions().length<=He[0])){var En=Ue.getResolution(He[0]),Sn=Ue.getMatrixIds()[He[0]],Tn={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:An[1],TILEROW:An[2],TILEMATRIX:Sn,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(Tn,ke);var Ln=Math.floor((e[0]-Cn[0])/(En/Be)),Bn=Math.floor((Cn[3]-e[1])/(En/Be)),ti=Ue.getTileSize(He[0]);Ln=Math.min(Ln,(ti[0]|ti)-1),Bn=Math.max(Bn,0),Tn.I=Ln,Tn.J=Bn;var ni=this.urls[0],ii=Gp.Helper.normalyzeUrl(ni,Tn);return ii}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(Te,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var Oe=Te*28e-5;for(var ke in t)if(t.hasOwnProperty(ke)&&t[ke]<=Oe)return ke=parseInt(ke,10),ke;return 0},getAttributions:function(Te){var e=Te.zoom,t=[];if(Te.originators!=null&&Te.visibility)for(var Oe,ke=0,Be=Te.originators.length;ke<Be;ke++){Oe=!0;for(var Ue=Te.originators[ke],He=Te.originators[ke].constraints||[],We=0,Cn=He.length;We<Cn;We++){var An=He[We];Oe=!0;var En=this.getZoomLevelFromScaleDenominator(An.maxScaleDenominator,Te.crs),Sn=this.getZoomLevelFromScaleDenominator(An.minScaleDenominator,Te.crs)||21;En&&En>e&&(Oe=!1),Oe&&Sn&&Sn<e&&(Oe=!1);var Tn=An.bbox;if(Oe&&Tn){Oe=!1;var Ln=Te.extent;if(Ln){var Bn=[Tn.top,Tn.left,Tn.bottom,Tn.right];if(this.intersects(Ln,Bn)){Oe=!0;break}}}}if(Oe){var ti=Ue.logo,ni=Ue.url,ii=Ue.name?Ue.name:"",si=Ue.attribution,oi=document.createElement("div");oi.className="gp-control-attribution";var ci=null;ci=document.createElement("a"),ci.className="gp-control-attribution-link",ci.target="_blank",oi.appendChild(ci),ni&&(ci.href=ni);var vi=!!ti,pi=null;vi?(pi=document.createElement("img"),ci?(pi.className="gp-control-attribution-image",ci.appendChild(pi)):(pi.className="",oi.appendChild(pi)),pi.src=ti,pi.title=si||ii,pi.style.height="30px",pi.style.width="30px"):ii?ci.textContent=ii:si?ci.textContent=si:ni?ci.textContent=ni:ci.textContent="",t.push(oi.innerHTML+" ")}}return t},intersects:function(Te,e){var t=Te[1]<=e[3]&&e[1]<=Te[3],Oe=Te[2]<=e[0]&&e[2]<=Te[0];return t&&Oe}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var Te=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return Te.Gp&&Te.Gp.Config&&Te.Gp.Config.layers&&Object.keys(Te.Gp.Config.layers).length!==0?(this.configuration=Te.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMTS");if(!Be)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMTS")}var Ue=e.ssl===!1?"http://":"https://",He={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");He.apikey=We}var Cn={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),He,!1),version:Oe.version,style:Oe.styles,format:Oe.format,projection:Oe.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(Oe.minScale),layer:e.layer,matrixSet:Oe.TMSLink,tileGrid:new WMTSTileGrid({resolutions:Oe.nativeResolutions,matrixIds:Oe.matrixIds,origin:[Object.values(Oe.tileMatrices)[0].topLeftCorner.x,Object.values(Oe.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(Cn,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(Cn),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._description=e.description||Oe.description,this._title=e.title||Oe.title,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMS");if(!Be)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMS")}var Ue=e.ssl===!1?"http://":"https://",He={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");He.apikey=We}var Cn={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),He,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:Oe.version,STYLES:Oe.styles,FORMAT:Oe.format},crossOrigin:"anonymous"};return Helper.mergeParams(Cn,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(Cn),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WFS");if(!Be)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WFS")}var Ue=e.ssl===!1?"http://":"https://",He={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");He.apikey=We}var Cn=(En,Sn,Tn,Ln)=>{const Bn=new XMLHttpRequest;Bn.open("GET",Sn);const ti=function(){En.removeLoadedExtent(extent),Ln()};Bn.onerror=ti,Bn.onload=function(){if(Bn.status==200){var ni=JSON.parse(Bn.responseText);const ii=En.getFormat().readFeatures(ni);if(En.addFeatures(ii),Tn(ii),ni.links)for(let si=0;si<ni.links.length;si++){const oi=ni.links[si];oi.rel==="next"&&Cn(En,oi.href,Tn,Ln)}}else ti()},Bn.send()},An={format:new GeoJSON$1,loader:function(En,Sn,Tn,Ln,Bn){var ti=this;const ni=e.maxFeatures,ii=e.layer,si=Tn.getCode(),oi=Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),He,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+ii+"&outputFormat=application/json&srsname="+si+"&bbox="+En.join(",")+","+si+"&maxFeatures="+ni+"&count="+ni+"&startIndex=0";Cn(ti,oi,Ln,Bn)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(An,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(An),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e),Oe=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=Oe,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function asImageLike(Te){return Te instanceof Image||Te instanceof HTMLCanvasElement||Te instanceof HTMLVideoElement||Te instanceof ImageBitmap?Te:null}function asArrayLike(Te){return Te instanceof Uint8Array||Te instanceof Uint8ClampedArray||Te instanceof Float32Array||Te instanceof DataView?Te:null}const disposedError=new Error("disposed");let sharedContext=null;function toArray(Te){sharedContext||(sharedContext=createCanvasContext2D(Te.width,Te.height,void 0,{willReadFrequently:!0}));const e=sharedContext.canvas,t=Te.width;e.width!==t&&(e.width=t);const Oe=Te.height;return e.height!==Oe&&(e.height=Oe),sharedContext.clearRect(0,0,t,Oe),sharedContext.drawImage(Te,0,0),sharedContext.getImageData(0,0,t,Oe).data}const defaultSize=[256,256];class DataTile extends Tile{constructor(e){const t=TileState.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=TileState.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const Oe=this.entries_[e];return assert(Oe!==void 0,"Tried to get a value for a key that does not exist in the cache"),Oe===this.newest_||(Oe===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(Oe.newer.older=Oe.older,Oe.older.newer=Oe.newer),Oe.newer=null,Oe.older=this.newest_,this.newest_.newer=Oe,this.newest_=Oe),Oe.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[t++]=Oe.key_;return e}getValues(){const e=new Array(this.count_);let t=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[t++]=Oe.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const Oe={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=Oe:this.oldest_=Oe,this.newest_=Oe,this.entries_[e]=Oe,++this.count_}setSize(e){this.highWaterMark=e}}function create(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function orthographic(Te,e,t,Oe,ke,Be,Ue){Ue=Ue??create();const He=1/(Te-e),We=1/(t-Oe),Cn=1/(ke-Be);return Ue[0]=-2*He,Ue[1]=0,Ue[2]=0,Ue[3]=0,Ue[4]=0,Ue[5]=-2*We,Ue[6]=0,Ue[7]=0,Ue[8]=0,Ue[9]=0,Ue[10]=2*Cn,Ue[11]=0,Ue[12]=(Te+e)*He,Ue[13]=(Oe+t)*We,Ue[14]=(Be+ke)*Cn,Ue[15]=1,Ue}function scale(Te,e,t,Oe,ke){return ke=ke??create(),ke[0]=Te[0]*e,ke[1]=Te[1]*e,ke[2]=Te[2]*e,ke[3]=Te[3]*e,ke[4]=Te[4]*t,ke[5]=Te[5]*t,ke[6]=Te[6]*t,ke[7]=Te[7]*t,ke[8]=Te[8]*Oe,ke[9]=Te[9]*Oe,ke[10]=Te[10]*Oe,ke[11]=Te[11]*Oe,ke[12]=Te[12],ke[13]=Te[13],ke[14]=Te[14],ke[15]=Te[15],ke}function translate(Te,e,t,Oe,ke){ke=ke??create();let Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti;return Te===ke?(ke[12]=Te[0]*e+Te[4]*t+Te[8]*Oe+Te[12],ke[13]=Te[1]*e+Te[5]*t+Te[9]*Oe+Te[13],ke[14]=Te[2]*e+Te[6]*t+Te[10]*Oe+Te[14],ke[15]=Te[3]*e+Te[7]*t+Te[11]*Oe+Te[15]):(Be=Te[0],Ue=Te[1],He=Te[2],We=Te[3],Cn=Te[4],An=Te[5],En=Te[6],Sn=Te[7],Tn=Te[8],Ln=Te[9],Bn=Te[10],ti=Te[11],ke[0]=Be,ke[1]=Ue,ke[2]=He,ke[3]=We,ke[4]=Cn,ke[5]=An,ke[6]=En,ke[7]=Sn,ke[8]=Tn,ke[9]=Ln,ke[10]=Bn,ke[11]=ti,ke[12]=Be*e+Cn*t+Tn*Oe+Te[12],ke[13]=Ue*e+An*t+Ln*Oe+Te[13],ke[14]=He*e+En*t+Bn*Oe+Te[14],ke[15]=We*e+Sn*t+ti*Oe+Te[15]),ke}function translation(Te,e,t,Oe){return Oe=Oe??create(),Oe[0]=1,Oe[1]=0,Oe[2]=0,Oe[3]=0,Oe[4]=0,Oe[5]=1,Oe[6]=0,Oe[7]=0,Oe[8]=0,Oe[9]=0,Oe[10]=1,Oe[11]=0,Oe[12]=Te,Oe[13]=e,Oe[14]=t,Oe[15]=1,Oe}const VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Canvas{constructor(e){this.gl_=e,this.program_=createProgram(e,FRAGMENT_SHADER,VERTEX_SHADER),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn){const Ln=this.gl_;We===void 0&&(We=ke),Cn===void 0&&(Cn=Be),Ue===void 0&&(Ue=t),He===void 0&&(He=Oe),An===void 0&&(An=Ue),En===void 0&&(En=He),Sn===void 0&&(Sn=Ln.canvas.width),Tn===void 0&&(Tn=Ln.canvas.height),Ln.bindTexture(Ln.TEXTURE_2D,e),Ln.useProgram(this.program_),Ln.bindBuffer(Ln.ARRAY_BUFFER,this.positionBuffer),Ln.enableVertexAttribArray(this.positionLocation),Ln.vertexAttribPointer(this.positionLocation,2,Ln.FLOAT,!1,0,0),Ln.bindBuffer(Ln.ARRAY_BUFFER,this.texcoordBuffer),Ln.enableVertexAttribArray(this.texcoordLocation),Ln.vertexAttribPointer(this.texcoordLocation,2,Ln.FLOAT,!1,0,0);let Bn=orthographic(0,Sn,0,Tn,-1,1);Bn=translate(Bn,We,Cn,0),Bn=scale(Bn,An,En,1),Ln.uniformMatrix4fv(this.matrixLocation,!1,Bn);let ti=translation(ke/t,Be/Oe,0);ti=scale(ti,Ue/t,He/Oe,1),Ln.uniformMatrix4fv(this.textureMatrixLocation,!1,ti),Ln.uniform1i(this.textureLocation,0),Ln.drawArrays(Ln.TRIANGLES,0,this.positions.length/2)}}function createShader(Te,e,t){const Oe=Te.createShader(e);if(Oe===null)throw new Error("Shader compilation failed");if(Te.shaderSource(Oe,t),Te.compileShader(Oe),!Te.getShaderParameter(Oe,Te.COMPILE_STATUS)){const ke=Te.getShaderInfoLog(Oe);throw ke===null?new Error("Shader info log creation failed"):new Error(ke)}return Oe}function createProgram(Te,e,t){const Oe=Te.createProgram(),ke=createShader(Te,Te.VERTEX_SHADER,t),Be=createShader(Te,Te.FRAGMENT_SHADER,e);if(Oe===null)throw new Error("Program creation failed");if(Te.attachShader(Oe,ke),Te.attachShader(Oe,Be),Te.linkProgram(Oe),!Te.getProgramParameter(Oe,Te.LINK_STATUS))throw Te.getProgramInfoLog(Oe)===null?new Error("Program info log creation failed"):new Error;return Oe}const EDGE_VERTEX_SHADER=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,EDGE_FRAGMENT_SHADER=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,TRIANGLE_VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,TRIANGLE_FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function createCanvasContextWebGL(Te,e,t,Oe){let ke;return t&&t.length?ke=t.shift():WORKER_OFFSCREEN_CANVAS?ke=new OffscreenCanvas(Te||300,e||300):ke=document.createElement("canvas"),Te&&(ke.width=Te),e&&(ke.height=e),ke.getContext("webgl",Oe)}function releaseGLCanvas(Te){const e=Te.canvas;e.width=1,e.height=1,Te.clear(Te.COLOR_BUFFER_BIT|Te.DEPTH_BUFFER_BIT|Te.STENCIL_BUFFER_BIT)}const canvasGLPool=[];function render(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn){const Ln=Math.round(Oe*e),Bn=Math.round(Oe*t);Te.canvas.width=Ln,Te.canvas.height=Bn;let ti,ni;if(ni=Te.createTexture(),Te.bindTexture(Te.TEXTURE_2D,ni),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Sn?(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR)):(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.NEAREST),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.NEAREST)),Te.texImage2D(Te.TEXTURE_2D,0,Te.RGBA,Ln,Bn,0,Te.RGBA,An,null),ti=Te.createFramebuffer(),Te.bindFramebuffer(Te.FRAMEBUFFER,ti),Te.framebufferTexture2D(Te.FRAMEBUFFER,Te.COLOR_ATTACHMENT0,Te.TEXTURE_2D,ni,0),ti===null)throw new Error("Could not create framebuffer");if(ni===null)throw new Error("Could not create texture");if(We.length===0)return{width:Ln,height:Bn,framebuffer:ti,texture:ni};const ii=createEmpty();We.forEach(function(Oi,ui,li){extend$3(ii,Oi.extent)});let si,oi,ci;const vi=1/ke;{if(si=Te.createTexture(),ni===null)throw new Error("Could not create texture");oi=Math.round(getWidth(ii)*vi),ci=Math.round(getHeight(ii)*vi);const Oi=Te.getParameter(Te.MAX_TEXTURE_SIZE),ui=Math.max(oi,ci),li=ui>Oi?Oi/ui:1,Ri=Math.round(oi*li),Pi=Math.round(ci*li);Te.bindTexture(Te.TEXTURE_2D,si),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Sn?(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR)):(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.NEAREST),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.NEAREST)),Te.texImage2D(Te.TEXTURE_2D,0,Te.RGBA,Ri,Pi,0,Te.RGBA,An,null);const Fi=Te.createFramebuffer();Te.bindFramebuffer(Te.FRAMEBUFFER,Fi),Te.framebufferTexture2D(Te.FRAMEBUFFER,Te.COLOR_ATTACHMENT0,Te.TEXTURE_2D,si,0);const Hi=new Canvas(Te);We.forEach(function(nr,ar,cr){const sr=(nr.extent[0]-ii[0])*vi*li,br=-(nr.extent[3]-ii[3])*vi*li,Ni=getWidth(nr.extent)*vi*li,or=getHeight(nr.extent)*vi*li;if(Te.bindFramebuffer(Te.FRAMEBUFFER,Fi),Te.viewport(0,0,Ri,Pi),nr.clipExtent){const er=(nr.clipExtent[0]-ii[0])*vi*li,fr=-(nr.clipExtent[3]-ii[3])*vi*li,mr=getWidth(nr.clipExtent)*vi*li,hr=getHeight(nr.clipExtent)*vi*li;Te.enable(Te.SCISSOR_TEST),Te.scissor(Sn?er:Math.round(er),Sn?fr:Math.round(fr),Sn?mr:Math.round(er+mr)-Math.round(er),Sn?hr:Math.round(fr+hr)-Math.round(fr))}Hi.drawImage(nr.texture,nr.width,nr.height,Cn,Cn,nr.width-2*Cn,nr.height-2*Cn,Sn?sr:Math.round(sr),Sn?br:Math.round(br),Sn?Ni:Math.round(sr+Ni)-Math.round(sr),Sn?or:Math.round(br+or)-Math.round(br),Ri,Pi),Te.disable(Te.SCISSOR_TEST)}),Te.deleteFramebuffer(Fi)}const pi=getTopLeft(Ue),fi=getTopLeft(ii),Mi=Oi=>{const ui=(Oi[0][0]-pi[0])/Be*Oe,li=-(Oi[0][1]-pi[1])/Be*Oe,Ri=(Oi[1][0]-pi[0])/Be*Oe,Pi=-(Oi[1][1]-pi[1])/Be*Oe,Fi=(Oi[2][0]-pi[0])/Be*Oe,Hi=-(Oi[2][1]-pi[1])/Be*Oe;return{u1:Ri,v1:Pi,u0:ui,v0:li,u2:Fi,v2:Hi}};Te.bindFramebuffer(Te.FRAMEBUFFER,ti),Te.viewport(0,0,Ln,Bn);{const Oi=[],ui=[],li=createProgram(Te,TRIANGLE_FRAGMENT_SHADER,TRIANGLE_VERTEX_SHADER);Te.useProgram(li);const Ri=Te.getUniformLocation(li,"u_texture");Te.bindTexture(Te.TEXTURE_2D,si),Te.uniform1i(Ri,0),He.getTriangles().forEach(function(sr,br,Ni){const or=sr.source,er=sr.target,{u1:fr,v1:mr,u0:hr,v0:vr,u2:_r,v2:Ar}=Mi(er),Vr=(or[0][0]-fi[0])/ke/oi,Wr=-(or[0][1]-fi[1])/ke/ci,tr=(or[1][0]-fi[0])/ke/oi,pr=-(or[1][1]-fi[1])/ke/ci,ur=(or[2][0]-fi[0])/ke/oi,Ki=-(or[2][1]-fi[1])/ke/ci;Oi.push(fr,mr,hr,vr,_r,Ar),ui.push(tr,pr,Vr,Wr,ur,Ki)});const Pi=orthographic(0,Ln,Bn,0,-1,1),Fi=Te.getUniformLocation(li,"u_matrix");Te.uniformMatrix4fv(Fi,!1,Pi);const Hi=Te.getAttribLocation(li,"a_position"),nr=Te.createBuffer();Te.bindBuffer(Te.ARRAY_BUFFER,nr),Te.bufferData(Te.ARRAY_BUFFER,new Float32Array(Oi),Te.STATIC_DRAW),Te.vertexAttribPointer(Hi,2,Te.FLOAT,!1,0,0),Te.enableVertexAttribArray(Hi);const ar=Te.getAttribLocation(li,"a_texcoord"),cr=Te.createBuffer();Te.bindBuffer(Te.ARRAY_BUFFER,cr),Te.bufferData(Te.ARRAY_BUFFER,new Float32Array(ui),Te.STATIC_DRAW),Te.vertexAttribPointer(ar,2,Te.FLOAT,!1,0,0),Te.enableVertexAttribArray(ar),Te.drawArrays(Te.TRIANGLES,0,Oi.length/2)}if(En){const Oi=createProgram(Te,EDGE_FRAGMENT_SHADER,EDGE_VERTEX_SHADER);Te.useProgram(Oi);const ui=orthographic(0,Ln,Bn,0,-1,1),li=Te.getUniformLocation(Oi,"u_matrix");Te.uniformMatrix4fv(li,!1,ui);const Ri=Array.isArray(En)?En:[0,0,0,255],Pi=Te.getUniformLocation(Oi,"u_val");Te.uniform4fv(Pi,Ri);const Fi=Te.getAttribLocation(Oi,"a_position"),Hi=Te.createBuffer();Te.bindBuffer(Te.ARRAY_BUFFER,Hi),Te.vertexAttribPointer(Fi,2,Te.FLOAT,!1,0,0),Te.enableVertexAttribArray(Fi);const nr=He.getTriangles().reduce(function(ar,cr){const sr=cr.target,{u1:br,v1:Ni,u0:or,v0:er,u2:fr,v2:mr}=Mi(sr);return ar.concat([br,Ni,or,er,or,er,fr,mr,fr,mr,br,Ni])},[]);Te.bufferData(Te.ARRAY_BUFFER,new Float32Array(nr),Te.STATIC_DRAW),Te.drawArrays(Te.LINES,0,nr.length/2)}return{width:Ln,height:Bn,framebuffer:ti,texture:ni}}class ReprojDataTile extends DataTile{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,Oe=t.getExtent(),ke=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?ke?getIntersection(Oe,ke):Oe:ke;const Be=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),Ue=this.targetTileGrid_.getExtent();let He=this.sourceTileGrid_.getExtent();const We=Ue?getIntersection(Be,Ue):Be;if(getArea$1(We)===0){this.state=TileState.EMPTY;return}Oe&&(He?He=getIntersection(He,Oe):He=Oe);const Cn=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),An=e.targetProj,En=calculateSourceExtentResolution(t,An,We,Cn);if(!isFinite(En)||En<=0){this.state=TileState.EMPTY;return}const Sn=e.errorThreshold!==void 0?e.errorThreshold:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(t,An,We,He,En*Sn,Cn,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(En);let Tn=this.triangulation_.calculateSourceExtent();if(He&&(t.canWrapX()?(Tn[1]=clamp(Tn[1],He[1],He[3]),Tn[3]=clamp(Tn[3],He[1],He[3])):Tn=getIntersection(Tn,He)),!getArea$1(Tn))this.state=TileState.EMPTY;else{let Ln=0,Bn=0;t.canWrapX()&&(Ln=getWidth(Oe),Bn=Math.floor((Tn[0]-Oe[0])/Ln)),wrapAndSliceX(Tn.slice(),t,!0).forEach(ni=>{const ii=this.sourceTileGrid_.getTileRangeForExtentAndZ(ni,this.sourceZ_),si=e.getTileFunction;for(let oi=ii.minX;oi<=ii.maxX;oi++)for(let ci=ii.minY;ci<=ii.maxY;ci++){const vi=si(this.sourceZ_,oi,ci,this.pixelRatio_);if(vi){const pi=Bn*Ln;this.sourceTiles_.push({tile:vi,offset:pi})}}++Bn}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(oi=>{var br;const ci=oi.tile;if(!ci||ci.getState()!==TileState.LOADED)return;const vi=ci.getSize(),pi=this.gutter_;let fi;const Mi=asArrayLike(ci.getData());Mi?fi=Mi:(t=!0,fi=toArray(asImageLike(ci.getData())));const Oi=[vi[0]+2*pi,vi[1]+2*pi],ui=fi instanceof Float32Array,li=Oi[0]*Oi[1],Ri=ui?Float32Array:Uint8ClampedArray,Pi=new Ri(fi.buffer),Fi=Ri.BYTES_PER_ELEMENT,Hi=Fi*Pi.length/li,nr=Pi.byteLength/Oi[1],ar=Math.floor(nr/Fi/Oi[0]),cr=this.sourceTileGrid_.getTileCoordExtent(ci.tileCoord);cr[0]+=oi.offset,cr[2]+=oi.offset;const sr=(br=this.clipExtent_)==null?void 0:br.slice();sr&&(sr[0]+=oi.offset,sr[2]+=oi.offset),e.push({extent:cr,clipExtent:sr,data:Pi,dataType:Ri,bytesPerPixel:Hi,pixelSize:Oi,bandCount:ar})}),this.sourceTiles_.length=0,e.length===0){this.state=TileState.ERROR,this.changed();return}const Oe=this.wrappedTileCoord_[0],ke=this.targetTileGrid_.getTileSize(Oe),Be=typeof ke=="number"?ke:ke[0],Ue=typeof ke=="number"?ke:ke[1],He=Be*this.pixelRatio_,We=Ue*this.pixelRatio_,Cn=this.targetTileGrid_.getResolution(Oe),An=this.sourceTileGrid_.getResolution(this.sourceZ_),En=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),Sn=e[0].bandCount,Tn=new e[0].dataType(Sn*He*We),Ln=createCanvasContextWebGL(He,We,canvasGLPool,{premultipliedAlpha:!1,antialias:!1});let Bn;const ti=Ln.RGBA;let ni;e[0].dataType==Float32Array?(ni=Ln.FLOAT,Ln.getExtension("WEBGL_color_buffer_float"),Ln.getExtension("OES_texture_float"),Ln.getExtension("EXT_float_blend"),Bn=Ln.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(ni=Ln.UNSIGNED_BYTE,Bn=this.interpolate);const ii=4,si=Math.ceil(Sn/ii);for(let oi=si-1;oi>=0;--oi){const ci=[];for(let Ri=0,Pi=e.length;Ri<Pi;++Ri){const Fi=e[Ri],Hi=Fi.pixelSize,nr=Hi[0],ar=Hi[1],cr=new Fi.dataType(ii*nr*ar),sr=Fi.data;let br=oi*ii;for(let or=0,er=cr.length;or<er;or+=ii)cr[or]=sr[br],cr[or+1]=sr[br+1],cr[or+2]=sr[br+2],cr[or+3]=sr[br+3],br+=Sn;const Ni=Ln.createTexture();Ln.bindTexture(Ln.TEXTURE_2D,Ni),Bn?(Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MIN_FILTER,Ln.LINEAR),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MAG_FILTER,Ln.LINEAR)):(Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MIN_FILTER,Ln.NEAREST),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MAG_FILTER,Ln.NEAREST)),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_WRAP_S,Ln.CLAMP_TO_EDGE),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_WRAP_T,Ln.CLAMP_TO_EDGE),Ln.texImage2D(Ln.TEXTURE_2D,0,ti,nr,ar,0,ti,ni,cr),ci.push({extent:Fi.extent,clipExtent:Fi.clipExtent,texture:Ni,width:nr,height:ar})}const{framebuffer:vi,width:pi,height:fi}=render(Ln,Be,Ue,this.pixelRatio_,An,Cn,En,this.triangulation_,ci,this.gutter_,ni,this.renderEdges_,Bn),Mi=pi,Oi=fi*ii,ui=new e[0].dataType(Mi*Oi);Ln.bindFramebuffer(Ln.FRAMEBUFFER,vi),Ln.readPixels(0,0,pi,fi,Ln.RGBA,ni,ui);let li=oi*ii;for(let Ri=0,Pi=ui.length;Ri<Pi;Ri+=ii){const Fi=(Mi-1-(Ri/Oi|0))*Oi+Ri%Oi;Tn[li]=ui[Fi],Tn[li+1]=ui[Fi+1],Tn[li+2]=ui[Fi+2],Tn[li+3]=ui[Fi+3],li+=Sn}}if(releaseGLCanvas(Ln),canvasGLPool.push(Ln.canvas),t){const oi=createCanvasContext2D(Be,Ue),ci=new ImageData(Tn,Be);oi.putImageData(ci,0,0),this.reprojData_=oi.canvas}else this.reprojData_=Tn;this.reprojSize_=[Math.round(He),Math.round(We)],this.state=TileState.LOADED,this.changed()}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const Oe=t.getState();if(Oe!==TileState.IDLE&&Oe!==TileState.LOADING)return;e++;const ke=listen(t,EventType.CHANGE,()=>{const Be=t.getState();(Be==TileState.LOADED||Be==TileState.ERROR||Be==TileState.EMPTY)&&(unlistenByKey(ke),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(ke)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==TileState.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}}function getCacheKey(Te,e,t,Oe){return`${Te},${getKeyZXY(e,t,Oe)}`}function addTileToLookup(Te,e,t){if(!(t in Te))return Te[t]=new Set([e]),!0;const Oe=Te[t],ke=Oe.has(e);return ke||Oe.add(e),!ke}function removeTileFromLookup(Te,e,t){const Oe=Te[t];return Oe?Oe.delete(e):!1}function getRenderExtent(Te,e){const t=Te.layerStatesArray[Te.layerIndex];t.extent&&(e=getIntersection(e,fromUserExtent(t.extent,Te.viewState.projection)));const Oe=t.layer.getRenderSource();if(!Oe.getWrapX()){const ke=Oe.getTileGridForProjection(Te.viewState.projection).getExtent();ke&&(e=getIntersection(e,ke))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const Oe=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new LRUCache(Oe),this.maxStaleKeys=Oe*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,Oe,ke){const Be=this.tileCache_,He=this.getLayer().getSource(),We=getCacheKey(He.getKey(),e,t,Oe);let Cn;if(Be.containsKey(We))Cn=Be.get(We);else{if(Cn=He.getTile(e,t,Oe,ke.pixelRatio,ke.viewState.projection),!Cn)return null;Be.set(We,Cn)}return Cn}getTile(e,t,Oe,ke){const Be=this.getOrCreateTile(e,t,Oe,ke);return Be||null}getData(e){const t=this.frameState;if(!t)return null;const Oe=this.getLayer(),ke=apply(t.pixelToCoordinateTransform,e.slice()),Be=Oe.getExtent();if(Be&&!containsCoordinate(Be,ke))return null;const Ue=t.viewState,He=Oe.getRenderSource(),We=He.getTileGridForProjection(Ue.projection),Cn=He.getTilePixelRatio(t.pixelRatio);for(let An=We.getZForResolution(Ue.resolution);An>=We.getMinZoom();--An){const En=We.getTileCoordForCoordAndZ(ke,An),Sn=this.getTile(An,En[1],En[2],t);if(!Sn||Sn.getState()!==TileState.LOADED)continue;const Tn=We.getOrigin(An),Ln=toSize(We.getTileSize(An)),Bn=We.getResolution(An);let ti;if(Sn instanceof ImageTile||Sn instanceof ReprojTile)ti=Sn.getImage();else if(Sn instanceof DataTile){if(ti=asImageLike(Sn.getData()),!ti)continue}else continue;const ni=Math.floor(Cn*((ke[0]-Tn[0])/Bn-En[1]*Ln[0])),ii=Math.floor(Cn*((Tn[1]-ke[1])/Bn-En[2]*Ln[1])),si=Math.round(Cn*He.getGutterForProjection(Ue.projection));return this.getImageData(ti,ni+si,ii+si)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const Oe=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==Oe&&(this.renderedRevision_=Oe,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=Oe,!0}enqueueTiles(e,t,Oe,ke,Be){const Ue=e.viewState,He=this.getLayer(),We=He.getRenderSource(),Cn=We.getTileGridForProjection(Ue.projection),An=getUid(We);An in e.wantedTiles||(e.wantedTiles[An]={});const En=e.wantedTiles[An],Sn=He.getMapInternal(),Tn=Math.max(Oe-Be,Cn.getMinZoom(),Cn.getZForResolution(Math.min(He.getMaxResolution(),Sn?Sn.getView().getResolutionForZoom(Math.max(He.getMinZoom(),0)):Cn.getResolution(0)),We.zDirection));for(let Ln=Oe;Ln>=Tn;--Ln){const Bn=Cn.getTileRangeForExtentAndZ(t,Ln,this.tempTileRange_),ti=Cn.getResolution(Ln);for(let ni=Bn.minX;ni<=Bn.maxX;++ni)for(let ii=Bn.minY;ii<=Bn.maxY;++ii){const si=this.getTile(Ln,ni,ii,e);if(!si||!addTileToLookup(ke,si,Ln))continue;const ci=si.getKey();if(En[ci]=!0,si.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(ci)){const vi=createOrUpdate(Ln,ni,ii,this.tempTileCoord_);e.tileQueue.enqueue([si,An,Cn.getTileCoordCenter(vi),ti])}}}}findStaleTile_(e,t){const Oe=this.tileCache_,ke=e[0],Be=e[1],Ue=e[2],He=this.getStaleKeys();for(let We=0;We<He.length;++We){const Cn=getCacheKey(He[We],ke,Be,Ue);if(Oe.containsKey(Cn)){const An=Oe.get(Cn);if(An.getState()===TileState.LOADED)return An.endTransition(getUid(this)),addTileToLookup(t,An,ke),!0}}return!1}findAltTiles_(e,t,Oe,ke){const Be=e.getTileRangeForTileCoordAndZ(t,Oe,this.tempTileRange_);if(!Be)return!1;let Ue=!0;const He=this.tileCache_,Cn=this.getLayer().getRenderSource().getKey();for(let An=Be.minX;An<=Be.maxX;++An)for(let En=Be.minY;En<=Be.maxY;++En){const Sn=getCacheKey(Cn,Oe,An,En);let Tn=!1;if(He.containsKey(Sn)){const Ln=He.get(Sn);Ln.getState()===TileState.LOADED&&(addTileToLookup(ke,Ln,Oe),Tn=!0)}Tn||(Ue=!1)}return Ue}renderFrame(e,t){let Oe=!0;this.renderComplete=!0;const ke=e.layerStatesArray[e.layerIndex],Be=e.viewState,Ue=Be.projection,He=Be.resolution,We=Be.center,Cn=e.pixelRatio,An=this.getLayer(),En=An.getSource(),Sn=En.getRevision(),Tn=En.getTileGridForProjection(Ue),Ln=Tn.getZForResolution(He,En.zDirection),Bn=Tn.getResolution(Ln),ti=En.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==ti&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=ti):this.renderedSourceKey_=ti;let ni=e.extent;const ii=En.getTilePixelRatio(Cn);this.prepareContainer(e,t);const si=this.context.canvas.width,oi=this.context.canvas.height,ci=ke.extent&&fromUserExtent(ke.extent);ci&&(ni=getIntersection(ni,fromUserExtent(ke.extent)));const vi=Bn*si/2/ii,pi=Bn*oi/2/ii,fi=[We[0]-vi,We[1]-pi,We[0]+vi,We[1]+pi],Mi={};this.renderedTiles.length=0;const Oi=An.getPreload();if(e.nextExtent){const sr=Tn.getZForResolution(Be.nextResolution,En.zDirection),br=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,br,sr,Mi,Oi)}const ui=getRenderExtent(e,ni);if(this.enqueueTiles(e,ui,Ln,Mi,0),Oi>0&&setTimeout(()=>{this.enqueueTiles(e,ui,Ln-1,Mi,Oi-1)},0),!(Ln in Mi))return this.container;const li=getUid(this),Ri=e.time;for(const sr of Mi[Ln]){const br=sr.getState();if((sr instanceof ReprojTile||sr instanceof ReprojDataTile)&&br===TileState.EMPTY)continue;const Ni=sr.tileCoord;if(br===TileState.LOADED&&sr.getAlpha(li,Ri)===1){sr.endTransition(li);continue}if(br!==TileState.IDLE&&(Oe=!1),br!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ni,Mi)){removeTileFromLookup(Mi,sr,Ln),e.animate=!0;continue}if(this.findAltTiles_(Tn,Ni,Ln+1,Mi))continue;const fr=Tn.getMinZoom();for(let mr=Ln-1;mr>=fr&&!this.findAltTiles_(Tn,Ni,mr,Mi);--mr);}const Pi=Bn/He*Cn/ii,Fi=this.getRenderContext(e);compose(this.tempTransform,si/2,oi/2,Pi,Pi,0,-si/2,-oi/2),ke.extent&&this.clipUnrotated(Fi,e,ci),En.getInterpolate()||(Fi.imageSmoothingEnabled=!1),this.preRender(Fi,e);const Hi=Object.keys(Mi).map(Number);Hi.sort(ascending);let nr;const ar=[],cr=[];for(let sr=Hi.length-1;sr>=0;--sr){const br=Hi[sr],Ni=En.getTilePixelSize(br,Cn,Ue),er=Tn.getResolution(br)/Bn,fr=Ni[0]*er*Pi,mr=Ni[1]*er*Pi,hr=Tn.getTileCoordForCoordAndZ(getTopLeft(fi),br),vr=Tn.getTileCoordExtent(hr),_r=apply(this.tempTransform,[ii*(vr[0]-fi[0])/Bn,ii*(fi[3]-vr[3])/Bn]),Ar=ii*En.getGutterForProjection(Ue);for(const Vr of Mi[br]){if(Vr.getState()!==TileState.LOADED)continue;const Wr=Vr.tileCoord,tr=hr[1]-Wr[1],pr=Math.round(_r[0]-(tr-1)*fr),ur=hr[2]-Wr[2],Ki=Math.round(_r[1]-(ur-1)*mr),Nr=Math.round(_r[0]-tr*fr),Or=Math.round(_r[1]-ur*mr),Ir=pr-Nr,Mr=Ki-Or,Tr=Hi.length===1;let wr=!1;nr=[Nr,Or,Nr+Ir,Or,Nr+Ir,Or+Mr,Nr,Or+Mr];for(let Cr=0,Er=ar.length;Cr<Er;++Cr)if(!Tr&&br<cr[Cr]){const Sr=ar[Cr];intersects$1([Nr,Or,Nr+Ir,Or+Mr],[Sr[0],Sr[3],Sr[4],Sr[7]])&&(wr||(Fi.save(),wr=!0),Fi.beginPath(),Fi.moveTo(nr[0],nr[1]),Fi.lineTo(nr[2],nr[3]),Fi.lineTo(nr[4],nr[5]),Fi.lineTo(nr[6],nr[7]),Fi.moveTo(Sr[6],Sr[7]),Fi.lineTo(Sr[4],Sr[5]),Fi.lineTo(Sr[2],Sr[3]),Fi.lineTo(Sr[0],Sr[1]),Fi.clip())}ar.push(nr),cr.push(br),this.drawTile(Vr,e,Nr,Or,Ir,Mr,Ar,Tr),wr&&Fi.restore(),this.renderedTiles.unshift(Vr),this.updateUsedTiles(e.usedTiles,En,Vr)}}if(this.renderedRevision=Sn,this.renderedResolution=Bn,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,fi),this.renderedExtent_=fi,this.renderedPixelRatio=Cn,this.postRender(this.context,e),ke.extent&&Fi.restore(),Fi.imageSmoothingEnabled=!0,this.renderComplete){const sr=(br,Ni)=>{const or=getUid(En),er=Ni.wantedTiles[or],fr=er?Object.keys(er).length:0;this.updateCacheSize(fr),this.tileCache_.expireCache()};e.postRenderFunctions.push(sr)}return!this.renderComplete&&!Oe&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,Oe,ke,Be,Ue,He,We){let Cn;if(e instanceof DataTile){if(Cn=asImageLike(e.getData()),!Cn)throw new Error("Rendering array data is not yet supported")}else Cn=this.getTileImage(e);if(!Cn)return;const An=this.getRenderContext(t),En=getUid(this),Sn=t.layerStatesArray[t.layerIndex],Tn=Sn.opacity*(We?e.getAlpha(En,t.time):1),Ln=Tn!==An.globalAlpha;Ln&&(An.save(),An.globalAlpha=Tn),An.drawImage(Cn,He,He,Cn.width-2*He,Cn.height-2*He,Oe,ke,Be,Ue),Ln&&An.restore(),Tn!==Sn.opacity?t.animate=!0:We&&e.endTransition(En)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,Oe){const ke=getUid(t);ke in e||(e[ke]={}),e[ke][Oe.getKey()]=!0}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMTS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:ke}),Ue={source:Be};if(Be.getLayer()!==void 0&&t.globalConstrainWFSts&&t.globalConstraints.projection){var He;typeof t.globalConstraints.projection=="string"&&(He=get$3(t.globalConstraints.projection)),He&&He.getUnits()&&(He.getUnits()==="m"?(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5,Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):He.getUnits()==="degrees"&&(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WMTS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:ke}),Ue={source:Be};if(Be.getParams().LAYERS!==void 0&&ke&&ke.projection){var He=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];Ue.extent=transformExtent(He,"EPSG:4326",ke.projection);var We;typeof ke.projection=="string"?We=get$3(ke.projection):typeof ke.projection=="object"&&ke.projection.getCode()&&(We=get$3(ke.projection.getCode())),We&&We.getUnits()&&(We.getUnits()==="m"?(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5,Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):We.getUnits()==="degrees"&&(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WMS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WFS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:ke||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),Ue={source:Be};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WFS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create$1(),this.tileClipContexts_=null}drawTile(e,t,Oe,ke,Be,Ue,He,We){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,Oe,ke,Be,Ue,He,We)}getTile(e,t,Oe,ke){const Be=this.getOrCreateTile(e,t,Oe,ke);if(!Be)return null;const He=ke.viewState.resolution,We=ke.viewHints;return(!(We[ViewHint.ANIMATING]||We[ViewHint.INTERACTING])||!Be.wantedResolution)&&(Be.wantedResolution=He),Be}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,Oe){const ke=this.getLayer(),Be=ke.getRevision(),Ue=ke.getRenderOrder()||null,He=e.wantedResolution,We=e.getReplayState(ke);if(!We.dirty&&We.renderedResolution===He&&We.renderedRevision==Be&&We.renderedRenderOrder==Ue)return;const Cn=ke.getSource(),An=!!ke.getDeclutter(),En=Cn.getTileGrid(),Tn=Cn.getTileGridForProjection(Oe).getTileCoordExtent(e.wrappedTileCoord),Ln=Cn.getSourceTiles(t,Oe,e),Bn=getUid(ke);delete e.hitDetectionImageData[Bn],e.executorGroups[Bn]=[],We.dirty=!1;for(let ti=0,ni=Ln.length;ti<ni;++ti){const ii=Ln[ti];if(ii.getState()!=TileState.LOADED)continue;const si=ii.tileCoord,oi=En.getTileCoordExtent(si),ci=getIntersection(Tn,oi),vi=buffer(ci,ke.getRenderBuffer()*He,this.tempExtent),pi=equals$1(oi,ci)?null:vi,fi=new BuilderGroup(0,ci,He,t),Mi=getSquaredTolerance(He,t),Oi=function(Fi,Hi){let nr;const ar=Fi.getStyleFunction()||ke.getStyleFunction();if(ar&&(nr=ar(Fi,He)),nr){const cr=this.renderFeature(Fi,Mi,nr,fi,An,Hi);We.dirty=We.dirty||cr}},ui=ii.getFeatures();Ue&&Ue!==We.renderedRenderOrder&&ui.sort(Ue);for(let Fi=0,Hi=ui.length;Fi<Hi;++Fi){const nr=ui[Fi];(!pi||intersects$1(pi,nr.getGeometry().getExtent()))&&Oi.call(this,nr,Fi)}const li=fi.finish(),Ri=ke.getRenderMode()!=="vector"&&An&&Ln.length===1?null:ci,Pi=new ExecutorGroup(Ri,He,t,Cn.getOverlaps(),li,ke.getRenderBuffer(),!0);e.executorGroups[Bn].push(Pi)}We.renderedRevision=Be,We.renderedRenderOrder=Ue,We.renderedResolution=He}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){const Ue=t.viewState.resolution,He=t.viewState.rotation;Oe=Oe??0;const We=this.getLayer(),An=We.getSource().getTileGridForProjection(t.viewState.projection),En=boundingExtent([e]);buffer(En,Ue*Oe,En);const Sn={},Tn=function(si,oi,ci){let vi=si.getId();vi===void 0&&(vi=getUid(si));const pi=Sn[vi];if(pi){if(pi!==!0&&ci<pi.distanceSq){if(ci===0)return Sn[vi]=!0,Be.splice(Be.lastIndexOf(pi),1),ke(si,We,oi);pi.geometry=oi,pi.distanceSq=ci}}else{if(ci===0)return Sn[vi]=!0,ke(si,We,oi);Be.push(Sn[vi]={feature:si,layer:We,geometry:oi,distanceSq:ci,callback:ke})}},Ln=this.renderedTiles,Bn=getUid(We),ti=We.getDeclutter(),ni=ti?t.declutter[ti].all().map(si=>si.value):null;let ii;e:for(let si=0,oi=Ln.length;si<oi;++si){const ci=Ln[si],vi=An.getTileCoordExtent(ci.wrappedTileCoord);if(!intersects$1(vi,En))continue;const pi=ci.executorGroups[Bn];for(let fi=0,Mi=pi.length;fi<Mi;++fi)if(ii=pi[fi].forEachFeatureAtCoordinate(e,Ue,He,Oe,Tn,ni),ii)break e}return ii}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,Oe)=>{const ke=this.getLayer(),Be=ke.getSource(),Ue=this.renderedProjection,He=Ue.getExtent(),We=this.renderedResolution,Cn=Be.getTileGridForProjection(Ue),An=apply(this.renderedPixelToCoordinateTransform_,e.slice()),En=Cn.getTileCoordForCoordAndResolution(An,We).toString(),Sn=this.renderedTiles.find(si=>si.tileCoord.toString()===En&&si.getState()===TileState.LOADED);if(!Sn||Sn.loadingSourceTiles>0){t([]);return}Be.getWrapX()&&Ue.canWrapX()&&!containsExtent(He,Cn.getTileCoordExtent(Sn.tileCoord))&&wrapX$1(An,Ue);const Tn=getUid(ke),Ln=Cn.getTileCoordExtent(Sn.wrappedTileCoord),Bn=getTopLeft(Ln),ti=[(An[0]-Bn[0])/We,(Bn[1]-An[1])/We],ni=Sn.getSourceTiles().reduce((si,oi)=>si.concat(oi.getFeatures()),[]);let ii=Sn.hitDetectionImageData[Tn];if(!ii){const si=toSize(Cn.getTileSize(Cn.getZForResolution(We,Be.zDirection))),oi=this.renderedRotation_,ci=[this.getRenderTransform(Cn.getTileCoordCenter(Sn.wrappedTileCoord),We,0,HIT_DETECT_RESOLUTION,si[0]*HIT_DETECT_RESOLUTION,si[1]*HIT_DETECT_RESOLUTION,0)];ii=createHitDetectionImageData(si,ci,ni,ke.getStyleFunction(),Cn.getTileCoordExtent(Sn.wrappedTileCoord),Sn.getReplayState(ke).renderedResolution,oi),Sn.hitDetectionImageData[Tn]=ii}t(hitDetect(ti,ni,ii))})}getFeaturesInExtent(e){const t=[],Oe=this.getTileCache();if(Oe.getCount()===0)return t;const Be=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),Ue=Be.getZForResolution(this.renderedResolution),He={};return Oe.forEach(We=>{if(We.tileCoord[0]!==Ue||We.getState()!==TileState.LOADED)return;const Cn=We.getSourceTiles();for(let An=0,En=Cn.length;An<En;++An){const Sn=Cn[An],Tn=Sn.getKey();if(Tn in He)continue;He[Tn]=!0;const Ln=Sn.tileCoord;if(intersects$1(e,Be.getTileCoordExtent(Ln))){const Bn=Sn.getFeatures();if(Bn)for(let ti=0,ni=Bn.length;ti<ni;++ti){const ii=Bn[ti],si=ii.getGeometry();intersects$1(e,si.getExtent())&&t.push(ii)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const Oe=this.context,ke=Oe.globalAlpha;Oe.globalAlpha=t.opacity;const Be=e.viewHints,Ue=!(Be[ViewHint.ANIMATING]||Be[ViewHint.INTERACTING]),He=[this.context.canvas.width,this.context.canvas.height],We=this.getLayer().getDeclutter(),Cn=We?e.declutter[We]:void 0,An=getUid(this.getLayer()),En=this.renderedTiles;for(let Sn=0,Tn=En.length;Sn<Tn;++Sn){const Ln=En[Sn],Bn=Ln.executorGroups[An];if(Bn)for(let ti=Bn.length-1;ti>=0;--ti)Bn[ti].execute(this.context,He,this.getTileRenderTransform(Ln,e),e.viewState.rotation,Ue,DECLUTTER,Cn)}Oe.globalAlpha=ke}renderDeferredInternal(e){const t=this.renderedTiles,Oe=getUid(this.getLayer()),ke=t.reduce((We,Cn,An)=>(Cn.executorGroups[Oe].forEach(En=>We.push({executorGroup:En,index:An})),We),[]),Be=ke.map(({executorGroup:We})=>We.getDeferredZIndexContexts()),Ue={};for(let We=0,Cn=ke.length;We<Cn;++We){const An=ke[We].executorGroup.getDeferredZIndexContexts();for(const En in An)Ue[En]=!0}Object.keys(Ue).map(Number).sort(ascending).forEach(We=>{Be.forEach((Cn,An)=>{Cn[We]&&(Cn[We].forEach(En=>{const{executorGroup:Sn,index:Tn}=ke[An],Ln=Sn.getRenderedContext(),Bn=Ln.globalAlpha;Ln.globalAlpha=this.renderedOpacity_;const ti=this.tileClipContexts_[Tn];ti&&ti.draw(Ln),En.draw(Ln),ti&&Ln.restore(),Ln.globalAlpha=Bn,En.clear()}),Cn[We].length=0)})})}getTileRenderTransform(e,t){const Oe=t.pixelRatio,ke=t.viewState,Be=ke.center,Ue=ke.resolution,He=ke.rotation,We=t.size,Cn=Math.round(We[0]*Oe),An=Math.round(We[1]*Oe),Sn=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),Tn=e.tileCoord,Ln=Sn.getTileCoordExtent(e.wrappedTileCoord),Bn=Sn.getTileCoordExtent(Tn,this.tempExtent)[0]-Ln[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/Oe,1/Oe),this.getRenderTransform(Be,Ue,He,Oe,Cn,An,Bn))}postRender(e,t){var ci;const Oe=t.viewHints,ke=!(Oe[ViewHint.ANIMATING]||Oe[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const Be=this.getLayer(),Ue=Be.getRenderMode(),He=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const We=Be.getDeclutter(),Cn=We?VECTOR_REPLAYS[Ue].filter(vi=>!DECLUTTER.includes(vi)):VECTOR_REPLAYS[Ue],An=t.viewState,En=An.rotation,Sn=Be.getSource(),Ln=Sn.getTileGridForProjection(An.projection).getZForResolution(An.resolution,Sn.zDirection),Bn=this.renderedTiles,ti=[],ni=[],ii=[],si=getUid(Be);let oi=!0;for(let vi=Bn.length-1;vi>=0;--vi){const pi=Bn[vi];oi=oi&&!pi.getReplayState(Be).dirty;const fi=pi.executorGroups[si].filter(Fi=>Fi.hasExecutors(Cn));if(fi.length===0)continue;const Mi=this.getTileRenderTransform(pi,t),Oi=pi.tileCoord[0];let ui=!1;const li=fi[0].getClipCoords(Mi);let Ri=e,Pi;if(li){Pi=new ZIndexContext,Ri=Pi.getContext();for(let Fi=0,Hi=ti.length;Fi<Hi;++Fi)if(Ln!==Oi&&Oi<ni[Fi]){const nr=ti[Fi];intersects$1([li[0],li[3],li[4],li[7]],[nr[0],nr[3],nr[4],nr[7]])&&(ui||(Ri.save(),ui=!0),Ri.beginPath(),Ri.moveTo(li[0],li[1]),Ri.lineTo(li[2],li[3]),Ri.lineTo(li[4],li[5]),Ri.lineTo(li[6],li[7]),Ri.moveTo(nr[6],nr[7]),Ri.lineTo(nr[4],nr[5]),Ri.lineTo(nr[2],nr[3]),Ri.lineTo(nr[0],nr[1]),Ri.clip())}ti.push(li),ni.push(Oi)}for(let Fi=0,Hi=fi.length;Fi<Hi;++Fi)fi[Fi].execute(e,[e.canvas.width,e.canvas.height],Mi,En,ke,Cn,(ci=t.declutter)==null?void 0:ci[We]);ui&&(Ri===e?Ri.restore():ii[vi]=Pi)}e.globalAlpha=He,this.ready=oi,this.tileClipContexts_=ii,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,Oe,ke,Be,Ue){if(!Oe)return!1;let He=!1;if(Array.isArray(Oe))for(let We=0,Cn=Oe.length;We<Cn;++We)He=renderFeature$1(ke,e,Oe[We],t,this.boundHandleStyleImageChange_,void 0,Be,Ue)||He;else He=renderFeature$1(ke,e,Oe,t,this.boundHandleStyleImageChange_,void 0,Be,Ue);return He}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const Oe=e.getReplayState(t),ke=t.getRevision(),Be=e.wantedResolution;return Oe.renderedTileResolution!==Be||Oe.renderedTileRevision!==ke}renderTileImage_(e,t){const Oe=this.getLayer(),ke=e.getReplayState(Oe),Be=Oe.getRevision(),Ue=e.executorGroups[getUid(Oe)];ke.renderedTileRevision=Be;const He=e.wrappedTileCoord,We=He[0],Cn=Oe.getSource();let An=t.pixelRatio;const Sn=t.viewState.projection,Tn=Cn.getTileGridForProjection(Sn),Ln=Tn.getResolution(e.tileCoord[0]),Bn=t.pixelRatio/e.wantedResolution*Ln,ti=Tn.getResolution(We),ni=e.getContext();An=Math.round(Math.max(An,Bn/An));const ii=Cn.getTilePixelSize(We,An,Sn);ni.canvas.width=ii[0],ni.canvas.height=ii[1];const si=An/Bn;if(si!==1){const pi=reset(this.tmpTransform_);scale$2(pi,si,si),ni.setTransform.apply(ni,pi)}const oi=Tn.getTileCoordExtent(He,this.tempExtent),ci=Bn/ti,vi=reset(this.tmpTransform_);scale$2(vi,ci,-ci),translate$2(vi,-oi[0],-oi[3]);for(let pi=0,fi=Ue.length;pi<fi;++pi)Ue[pi].execute(ni,[ni.canvas.width*si,ni.canvas.height*si],vi,0,!0,IMAGE_REPLAYS[Oe.getRenderMode()],null);ke.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const Oe=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=Oe;const ke=e.renderMode||"hybrid";assert(ke=="hybrid"||ke=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=ke,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(Te,e,t,Oe){const ke=document.createElement("script"),Be="olc_"+getUid(e);function Ue(){delete window[Be],ke.parentNode.removeChild(ke)}ke.async=!0,ke.src=Te+(Te.includes("?")?"&":"?")+"callback="+Be;const He=setTimeout(function(){Ue(),t&&t()},1e4);window[Be]=function(We){clearTimeout(He),Ue(),e(We)},document.head.appendChild(ke)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let Oe;try{Oe=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(Oe)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),Oe=this.getProjection();let ke;if(e.bounds!==void 0){const Cn=getTransformFromProjections(t,Oe);ke=applyTransform(e.bounds,Cn)}const Be=extentFromProjection(Oe),Ue=e.minzoom||0,He=e.maxzoom||22,We=createXYZ({extent:Be,maxZoom:He,minZoom:Ue,tileSize:this.tileSize_});if(this.tileGrid=We,this.tileUrlFunction=createFromTemplates(e.tiles,We),e.attribution&&!this.getAttributions()){const Cn=ke!==void 0?ke:Be;this.setAttributions(function(An){return intersects$1(Cn,An.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,Oe=this.length){for(;this.pos<Oe;){const ke=this.readVarint(),Be=ke>>3,Ue=this.pos;this.type=ke&7,e(Be,t,this),this.pos===Ue&&this.skip(ke)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let Oe,ke;return ke=t[this.pos++],Oe=ke&127,ke<128||(ke=t[this.pos++],Oe|=(ke&127)<<7,ke<128)||(ke=t[this.pos++],Oe|=(ke&127)<<14,ke<128)||(ke=t[this.pos++],Oe|=(ke&127)<<21,ke<128)?Oe:(ke=t[this.pos],Oe|=(ke&15)<<28,readVarintRemainder(Oe,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(t,e)):readUtf8(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const Oe=this.readPackedEnd();for(;this.pos<Oe;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(t===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(t===PBF_FIXED32)this.pos+=4;else if(t===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const Oe=new Uint8Array(t);Oe.set(this.buf),this.buf=Oe,this.dataView=new DataView(Oe.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const Oe=this.pos-t;Oe>=128&&makeRoomForExtraLength(t,Oe,this),this.pos=t-1,this.writeVarint(Oe),this.pos+=Oe}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let Oe=0;Oe<t;Oe++)this.buf[this.pos++]=e[Oe]}writeRawMessage(e,t){this.pos++;const Oe=this.pos;e(t,this);const ke=this.pos-Oe;ke>=128&&makeRoomForExtraLength(Oe,ke,this),this.pos=Oe-1,this.writeVarint(ke),this.pos+=ke}writeMessage(e,t,Oe){this.writeTag(e,PBF_BYTES),this.writeRawMessage(t,Oe)}writePackedVarint(e,t){t.length&&this.writeMessage(e,writePackedVarint,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,writePackedSVarint,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,writePackedBoolean,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,writePackedFloat,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,writePackedDouble,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,writePackedFixed32,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,writePackedSFixed32,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,writePackedFixed64,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,writePackedSFixed64,t)}writeBytesField(e,t){this.writeTag(e,PBF_BYTES),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,PBF_BYTES),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,PBF_FIXED32),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,PBF_FIXED64),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function readVarintRemainder(Te,e,t){const Oe=t.buf;let ke,Be;if(Be=Oe[t.pos++],ke=(Be&112)>>4,Be<128||(Be=Oe[t.pos++],ke|=(Be&127)<<3,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<10,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<17,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<24,Be<128)||(Be=Oe[t.pos++],ke|=(Be&1)<<31,Be<128))return toNum(Te,ke,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(Te,e,t){return t?e*4294967296+(Te>>>0):(e>>>0)*4294967296+(Te>>>0)}function writeBigVarint(Te,e){let t,Oe;if(Te>=0?(t=Te%4294967296|0,Oe=Te/4294967296|0):(t=~(-Te%4294967296),Oe=~(-Te/4294967296),t^4294967295?t=t+1|0:(t=0,Oe=Oe+1|0)),Te>=18446744073709552e3||Te<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,Oe,e),writeBigVarintHigh(Oe,e)}function writeBigVarintLow(Te,e,t){t.buf[t.pos++]=Te&127|128,Te>>>=7,t.buf[t.pos++]=Te&127|128,Te>>>=7,t.buf[t.pos++]=Te&127|128,Te>>>=7,t.buf[t.pos++]=Te&127|128,Te>>>=7,t.buf[t.pos]=Te&127}function writeBigVarintHigh(Te,e){const t=(Te&7)<<4;e.buf[e.pos++]|=t|((Te>>>=3)?128:0),Te&&(e.buf[e.pos++]=Te&127|((Te>>>=7)?128:0),Te&&(e.buf[e.pos++]=Te&127|((Te>>>=7)?128:0),Te&&(e.buf[e.pos++]=Te&127|((Te>>>=7)?128:0),Te&&(e.buf[e.pos++]=Te&127|((Te>>>=7)?128:0),Te&&(e.buf[e.pos++]=Te&127)))))}function makeRoomForExtraLength(Te,e,t){const Oe=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(Oe);for(let ke=t.pos-1;ke>=Te;ke--)t.buf[ke+Oe]=t.buf[ke]}function writePackedVarint(Te,e){for(let t=0;t<Te.length;t++)e.writeVarint(Te[t])}function writePackedSVarint(Te,e){for(let t=0;t<Te.length;t++)e.writeSVarint(Te[t])}function writePackedFloat(Te,e){for(let t=0;t<Te.length;t++)e.writeFloat(Te[t])}function writePackedDouble(Te,e){for(let t=0;t<Te.length;t++)e.writeDouble(Te[t])}function writePackedBoolean(Te,e){for(let t=0;t<Te.length;t++)e.writeBoolean(Te[t])}function writePackedFixed32(Te,e){for(let t=0;t<Te.length;t++)e.writeFixed32(Te[t])}function writePackedSFixed32(Te,e){for(let t=0;t<Te.length;t++)e.writeSFixed32(Te[t])}function writePackedFixed64(Te,e){for(let t=0;t<Te.length;t++)e.writeFixed64(Te[t])}function writePackedSFixed64(Te,e){for(let t=0;t<Te.length;t++)e.writeSFixed64(Te[t])}function readUtf8(Te,e,t){let Oe="",ke=e;for(;ke<t;){const Be=Te[ke];let Ue=null,He=Be>239?4:Be>223?3:Be>191?2:1;if(ke+He>t)break;let We,Cn,An;He===1?Be<128&&(Ue=Be):He===2?(We=Te[ke+1],(We&192)===128&&(Ue=(Be&31)<<6|We&63,Ue<=127&&(Ue=null))):He===3?(We=Te[ke+1],Cn=Te[ke+2],(We&192)===128&&(Cn&192)===128&&(Ue=(Be&15)<<12|(We&63)<<6|Cn&63,(Ue<=2047||Ue>=55296&&Ue<=57343)&&(Ue=null))):He===4&&(We=Te[ke+1],Cn=Te[ke+2],An=Te[ke+3],(We&192)===128&&(Cn&192)===128&&(An&192)===128&&(Ue=(Be&15)<<18|(We&63)<<12|(Cn&63)<<6|An&63,(Ue<=65535||Ue>=1114112)&&(Ue=null))),Ue===null?(Ue=65533,He=1):Ue>65535&&(Ue-=65536,Oe+=String.fromCharCode(Ue>>>10&1023|55296),Ue=56320|Ue&1023),Oe+=String.fromCharCode(Ue),ke+=He}return Oe}function writeUtf8(Te,e,t){for(let Oe=0,ke,Be;Oe<e.length;Oe++){if(ke=e.charCodeAt(Oe),ke>55295&&ke<57344)if(Be)if(ke<56320){Te[t++]=239,Te[t++]=191,Te[t++]=189,Be=ke;continue}else ke=Be-55296<<10|ke-56320|65536,Be=null;else{ke>56319||Oe+1===e.length?(Te[t++]=239,Te[t++]=191,Te[t++]=189):Be=ke;continue}else Be&&(Te[t++]=239,Te[t++]=191,Te[t++]=189,Be=null);ke<128?Te[t++]=ke:(ke<2048?Te[t++]=ke>>6|192:(ke<65536?Te[t++]=ke>>12|224:(Te[t++]=ke>>18|240,Te[t++]=ke>>12&63|128),Te[t++]=ke>>6&63|128),Te[t++]=ke&63|128)}return t}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,Oe,ke){e.pos=t.geometry;const Be=e.readVarint()+e.pos;let Ue=1,He=0,We=0,Cn=0,An=0,En=0;for(;e.pos<Be;){if(!He){const Sn=e.readVarint();Ue=Sn&7,He=Sn>>3}if(He--,Ue===1||Ue===2)We+=e.readSVarint(),Cn+=e.readSVarint(),Ue===1&&An>En&&(ke.push(An),En=An),Oe.push(We,Cn),An+=2;else if(Ue===7)An>En&&(Oe.push(Oe[En],Oe[En+1]),An+=2);else throw new Error("Invalid command found in the PBF")}An>En&&(ke.push(An),En=An)}createFeature_(e,t,Oe){const ke=t.type;if(ke===0)return null;let Be;const Ue=t.properties;let He;this.idProperty_?(He=Ue[this.idProperty_],delete Ue[this.idProperty_]):He=t.id,Ue[this.layerName_]=t.layer.name;const We=[],Cn=[];this.readRawGeometry_(e,t,We,Cn);const An=getGeometryType(ke,Cn.length);if(this.featureClass===RenderFeature)Be=new this.featureClass(An,We,Cn,2,Ue,He),Be.transform(Oe.dataProjection);else{let En;if(An=="Polygon"){const Ln=inflateEnds(We,Cn);En=Ln.length>1?new MultiPolygon(We,"XY",Ln):new Polygon(We,"XY",Cn)}else En=An==="Point"?new Point$1(We,"XY"):An==="LineString"?new LineString(We,"XY"):An==="MultiPoint"?new MultiPoint(We,"XY"):An==="MultiLineString"?new MultiLineString(We,"XY",Cn):null;const Sn=this.featureClass;Be=new Sn,this.geometryName_&&Be.setGeometryName(this.geometryName_);const Tn=transformGeometryWithOptions(En,!1,Oe);Be.setGeometry(Tn),He!==void 0&&Be.setId(He),Be.setProperties(Ue,!0)}return Be}getType(){return"arraybuffer"}readFeatures(e,t){const Oe=this.layers_;t=this.adaptOptions(t);const ke=get$3(t.dataProjection);ke.setWorldExtent(t.extent),t.dataProjection=ke;const Be=new Pbf(e),Ue=Be.readFields(layersPBFReader,{}),He=[];for(const We in Ue){if(Oe&&!Oe.includes(We))continue;const Cn=Ue[We],An=Cn?[0,0,Cn.extent,Cn.extent]:null;ke.setExtent(An);for(let En=0,Sn=Cn.length;En<Sn;++En){const Tn=readRawFeature(Be,Cn,En),Ln=this.createFeature_(Be,Tn,t);Ln!==null&&He.push(Ln)}}return He}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(Te,e,t){if(Te===3){const Oe={keys:[],values:[],features:[]},ke=t.readVarint()+t.pos;t.readFields(layerPBFReader,Oe,ke),Oe.length=Oe.features.length,Oe.length&&(e[Oe.name]=Oe)}}function layerPBFReader(Te,e,t){if(Te===15)e.version=t.readVarint();else if(Te===1)e.name=t.readString();else if(Te===5)e.extent=t.readVarint();else if(Te===2)e.features.push(t.pos);else if(Te===3)e.keys.push(t.readString());else if(Te===4){let Oe=null;const ke=t.readVarint()+t.pos;for(;t.pos<ke;)Te=t.readVarint()>>3,Oe=Te===1?t.readString():Te===2?t.readFloat():Te===3?t.readDouble():Te===4?t.readVarint64():Te===5?t.readVarint():Te===6?t.readSVarint():Te===7?t.readBoolean():null;e.values.push(Oe)}}function featurePBFReader(Te,e,t){if(Te==1)e.id=t.readVarint();else if(Te==2){const Oe=t.readVarint()+t.pos;for(;t.pos<Oe;){const ke=e.layer.keys[t.readVarint()],Be=e.layer.values[t.readVarint()];e.properties[ke]=Be}}else Te==3?e.type=t.readVarint():Te==4&&(e.geometry=t.pos)}function readRawFeature(Te,e,t){Te.pos=e.features[t];const Oe=Te.readVarint()+Te.pos,ke={layer:e,type:0,properties:{}};return Te.readFields(featurePBFReader,ke,Oe),ke}function getGeometryType(Te,e){let t;return Te===1?t=e===1?"Point":"MultiPoint":Te===2?t=e===1?"LineString":"MultiLineString":Te===3&&(t="Polygon"),t}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,Oe=e.coordinateToPixelTransform,ke=e.pixelToCoordinateTransform;compose(Oe,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(ke,Oe)}forEachFeatureAtCoordinate(e,t,Oe,ke,Be,Ue,He,We){let Cn;const An=t.viewState;function En(oi,ci,vi,pi){return Be.call(Ue,ci,oi?vi:null,pi)}const Sn=An.projection,Tn=wrapX$1(e.slice(),Sn),Ln=[[0,0]];if(Sn.canWrapX()&&ke){const oi=Sn.getExtent(),ci=getWidth(oi);Ln.push([-ci,0],[ci,0])}const Bn=t.layerStatesArray,ti=Bn.length,ni=[],ii=[];for(let oi=0;oi<Ln.length;oi++)for(let ci=ti-1;ci>=0;--ci){const vi=Bn[ci],pi=vi.layer;if(pi.hasRenderer()&&inView(vi,An)&&He.call(We,pi)){const fi=pi.getRenderer(),Mi=pi.getSource();if(fi&&Mi){const Oi=Mi.getWrapX()?Tn:e,ui=En.bind(null,vi.managed);ii[0]=Oi[0]+Ln[oi][0],ii[1]=Oi[1]+Ln[oi][1],Cn=fi.forEachFeatureAtCoordinate(ii,t,Oe,ui,ni)}if(Cn)return Cn}}if(ni.length===0)return;const si=1/ni.length;return ni.forEach((oi,ci)=>oi.distanceSq+=ci*si),ni.sort((oi,ci)=>oi.distanceSq-ci.distanceSq),ni.some(oi=>Cn=oi.callback(oi.feature,oi.layer,oi.geometry)),Cn}hasFeatureAtCoordinate(e,t,Oe,ke,Be,Ue){return this.forEachFeatureAtCoordinate(e,t,Oe,ke,TRUE,this,Be,Ue)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(Te,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const Oe=e.getViewport();Oe.insertBefore(this.element_,Oe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const Oe=this.getMap();if(Oe.hasListener(e)){const ke=new RenderEvent(e,void 0,t);Oe.dispatchEvent(ke)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort((He,We)=>He.zIndex-We.zIndex);t.some(He=>He.layer instanceof BaseVectorLayer&&He.layer.getDeclutter())&&(e.declutter={});const ke=e.viewState;this.children_.length=0;const Be=[];let Ue=null;for(let He=0,We=t.length;He<We;++He){const Cn=t[He];e.layerIndex=He;const An=Cn.layer,En=An.getSourceState();if(!inView(Cn,ke)||En!="ready"&&En!="undefined"){An.unrender();continue}const Sn=An.render(e,Ue);Sn&&(Sn!==Ue&&(this.children_.push(Sn),Ue=Sn),Be.push(Cn))}this.declutter(e,Be),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let Oe=t.length-1;Oe>=0;--Oe){const ke=t[Oe],Be=ke.layer;Be.getDeclutter()&&Be.renderDeclutter(e,ke)}t.forEach(Oe=>Oe.layer.renderDeferred(e))}}}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let Oe=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),Oe?Array.isArray(Oe)?Oe=new Collection(Oe.slice(),{unique:!0}):assert(typeof Oe.getArray=="function","Expected `layers` to be an array or a `Collection`"):Oe=new Collection(void 0,{unique:!0}),this.setLayers(Oe)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const Oe in this.listenerKeys_)this.listenerKeys_[Oe].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let Oe=0,ke=t.length;Oe<ke;Oe++){const Be=t[Oe];this.registerLayerListeners_(Be),this.dispatchEvent(new GroupEvent("addlayer",Be))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,Oe=getUid(t);this.listenerKeys_[Oe].forEach(unlistenByKey),delete this.listenerKeys_[Oe],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const Oe=t.getArray();for(let ke=0,Be=Oe.length;ke<Be;++ke)this.dispatchEvent(new GroupEvent("removelayer",Oe[ke]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],Oe=t.length;this.getLayers().forEach(function(Ue){Ue.getLayerStatesArray(t)});const ke=this.getLayerState();let Be=ke.zIndex;!e&&ke.zIndex===void 0&&(Be=0);for(let Ue=Oe,He=t.length;Ue<He;Ue++){const We=t[Ue];We.opacity*=ke.opacity,We.visible=We.visible&&ke.visible,We.maxResolution=Math.min(We.maxResolution,ke.maxResolution),We.minResolution=Math.max(We.minResolution,ke.minResolution),We.minZoom=Math.max(We.minZoom,ke.minZoom),We.maxZoom=Math.min(We.maxZoom,ke.maxZoom),ke.extent!==void 0&&(We.extent!==void 0?We.extent=getIntersection(We.extent,ke.extent):We.extent=ke.extent),We.zIndex===void 0&&(We.zIndex=Be)}return t}getSourceState(){return"ready"}}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const Oe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Oe,this.pointerdownListenerKey_=listen(Oe,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(Oe,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Oe=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(Oe)},250)}updateActivePointers_(e){const t=e,Oe=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[Oe];for(const ke in this.trackedTouches_)if(this.trackedTouches_[ke].target!==t.target){delete this.trackedTouches_[ke];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[Oe]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const Oe=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(Oe,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(Oe,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Oe&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,Oe=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const ke=this.keyFunction_(Oe);return delete this.queuedElements_[ke],Oe}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,Oe=this.priorities_,ke=t.length,Be=t[e],Ue=Oe[e],He=e;for(;e<ke>>1;){const We=this.getLeftChildIndex_(e),Cn=this.getRightChildIndex_(e),An=Cn<ke&&Oe[Cn]<Oe[We]?Cn:We;t[e]=t[An],Oe[e]=Oe[An],e=An}t[e]=Be,Oe[e]=Ue,this.siftDown_(He,e)}siftDown_(e,t){const Oe=this.elements_,ke=this.priorities_,Be=Oe[t],Ue=ke[t];for(;t>e;){const He=this.getParentIndex_(t);if(ke[He]>Ue)Oe[t]=Oe[He],ke[t]=ke[He],t=He;else break}Oe[t]=Be,ke[t]=Ue}reprioritize(){const e=this.priorityFunction_,t=this.elements_,Oe=this.priorities_;let ke=0;const Be=t.length;let Ue,He,We;for(He=0;He<Be;++He)Ue=t[He],We=e(Ue),We==DROP?delete this.queuedElements_[this.keyFunction_(Ue)]:(Oe[ke]=We,t[ke++]=Ue);t.length=ke,Oe.length=ke,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,t){super(function(Oe){return e.apply(null,Oe)},function(Oe){return Oe[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,Oe=t.getState();if(Oe===TileState.LOADED||Oe===TileState.ERROR||Oe===TileState.EMPTY){Oe!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const ke=t.getKey();ke in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[ke],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let Oe=0;for(;this.tilesLoading_<e&&Oe<t&&this.getCount()>0;){const ke=this.dequeue()[0],Be=ke.getKey();ke.getState()===TileState.IDLE&&!(Be in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Be]=!0,++this.tilesLoading_,++Oe,ke.load())}}}function getTilePriority(Te,e,t,Oe,ke){if(!Te||!(t in Te.wantedTiles)||!Te.wantedTiles[t][e.getKey()])return DROP;const Be=Te.viewState.center,Ue=Oe[0]-Be[0],He=Oe[1]-Be[1];return 65536*Math.log(ke)+Math.sqrt(Ue*Ue+He*He)/ke}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",Oe=e.tipLabel!==void 0?e.tipLabel:"Attributions",ke=e.expandClassName!==void 0?e.expandClassName:t+"-expand",Be=e.collapseLabel!==void 0?e.collapseLabel:"›",Ue=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof Be=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Be,this.collapseLabel_.className=Ue):this.collapseLabel_=Be;const He=e.label!==void 0?e.label:"i";typeof He=="string"?(this.label_=document.createElement("span"),this.label_.textContent=He,this.label_.className=ke):this.label_=He;const We=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=Oe,this.toggleButton_.appendChild(We),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Cn=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),An=this.element;An.className=Cn,An.appendChild(this.toggleButton_),An.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),Oe=new Set(t.flatMap(ke=>ke.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(ke=>Oe.add(ke)):Oe.add(this.attributions_)),!this.overrideCollapsible_){const ke=!t.some(Be=>{var Ue;return((Ue=Be.getSource())==null?void 0:Ue.getAttributionsCollapsible())===!1});this.setCollapsible(ke)}return Array.from(Oe)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(ke=>toPromise(()=>ke))),Oe=t.length>0;if(this.renderedVisible_!=Oe&&(this.element.style.display=Oe?"":"none",this.renderedVisible_=Oe),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=document.createElement("li");Ue.innerHTML=t[ke],this.ulElement_.appendChild(Ue)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",Oe=e.label!==void 0?e.label:"⇧",ke=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof Oe=="string"?(this.label_=document.createElement("span"),this.label_.className=ke,this.label_.textContent=Oe):(this.label_=Oe,this.label_.classList.add(ke));const Be=e.tipLabel?e.tipLabel:"Reset rotation",Ue=document.createElement("button");Ue.className=t+"-reset",Ue.setAttribute("type","button"),Ue.title=Be,Ue.appendChild(this.label_),Ue.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const He=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,We=this.element;We.className=He,We.appendChild(Ue),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const Oe=t.getRotation();Oe!==void 0&&(this.duration_>0&&Oe%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const Oe=t.viewState.rotation;if(Oe!=this.rotation_){const ke="rotate("+Oe+"rad)";if(this.autoHide_){const Be=this.element.classList.contains(CLASS_HIDDEN);!Be&&Oe===0?this.element.classList.add(CLASS_HIDDEN):Be&&Oe!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=ke}this.rotation_=Oe}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",Oe=e.delta!==void 0?e.delta:1,ke=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",Be=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",Ue=e.zoomInLabel!==void 0?e.zoomInLabel:"+",He=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",We=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",Cn=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",An=document.createElement("button");An.className=ke,An.setAttribute("type","button"),An.title=We,An.appendChild(typeof Ue=="string"?document.createTextNode(Ue):Ue),An.addEventListener(EventType.CLICK,this.handleClick_.bind(this,Oe),!1);const En=document.createElement("button");En.className=Be,En.setAttribute("type","button"),En.title=Cn,En.appendChild(typeof He=="string"?document.createTextNode(He):He),En.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-Oe),!1);const Sn=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Tn=this.element;Tn.className=Sn,Tn.appendChild(An),Tn.appendChild(En),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const Oe=this.getMap().getView();if(!Oe)return;const ke=Oe.getZoom();if(ke!==void 0){const Be=Oe.getConstrainedZoom(ke+e);this.duration_>0?(Oe.getAnimating()&&Oe.cancelAnimations(),Oe.animate({zoom:Be,duration:this.duration_,easing:easeOut})):Oe.setZoom(Be)}}}function defaults$1(Te){Te=Te||{};const e=new Collection;return(Te.zoom!==void 0?Te.zoom:!0)&&e.push(new Zoom(Te.zoomOptions)),(Te.rotate!==void 0?Te.rotate:!0)&&e.push(new Rotate(Te.rotateOptions)),(Te.attribution!==void 0?Te.attribution:!0)&&e.push(new Attribution(Te.attributionOptions)),e}function removeLayerMapProperty(Te){if(Te instanceof Layer$1){Te.setMapInternal(null);return}Te instanceof LayerGroup&&Te.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(Te,e){if(Te instanceof Layer$1){Te.setMapInternal(e);return}if(Te instanceof LayerGroup){const t=Te.getLayers().getArray();for(let Oe=0,ke=t.length;Oe<ke;++Oe)setLayerMapProperty(t[Oe],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create$1(),this.pixelToCoordinateTransform_=create$1(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$1(),this.interactions=t.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const Oe=this;e.view&&!(e.view instanceof View)&&e.view.then(function(ke){Oe.setView(new View(ke))}),this.controls.addEventListener(CollectionEventType.ADD,ke=>{ke.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,ke=>{ke.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,ke=>{ke.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,ke=>{ke.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,ke=>{this.addOverlayInternal_(ke.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,ke=>{const Be=ke.element.getId();Be!==void 0&&delete this.overlayIdIndex_[Be.toString()],ke.element.setMap(null)}),this.controls.forEach(ke=>{ke.setMap(this)}),this.interactions.forEach(ke=>{ke.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,Oe){if(!this.frameState_||!this.renderer_)return;const ke=this.getCoordinateFromPixelInternal(e);Oe=Oe!==void 0?Oe:{};const Be=Oe.hitTolerance!==void 0?Oe.hitTolerance:0,Ue=Oe.layerFilter!==void 0?Oe.layerFilter:TRUE,He=Oe.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(ke,this.frameState_,Be,He,t,null,Ue,null)}getFeaturesAtPixel(e,t){const Oe=[];return this.forEachFeatureAtPixel(e,function(ke){Oe.push(ke)},t),Oe}getAllLayers(){const e=[];function t(Oe){Oe.forEach(function(ke){ke instanceof LayerGroup?t(ke.getLayers()):e.push(ke)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const Oe=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const ke=t.layerFilter!==void 0?t.layerFilter:TRUE,Be=t.hitTolerance!==void 0?t.hitTolerance:0,Ue=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(Oe,this.frameState_,Be,Ue,ke,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const Oe=this.viewport_.getBoundingClientRect(),ke=this.getSize(),Be=Oe.width/ke[0],Ue=Oe.height/ke[1],He="changedTouches"in e?e.changedTouches[0]:e;return[(He.clientX-Oe.left)/Be,(He.clientY-Oe.top)/Ue]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const Oe=t.getLayers();Oe.clear(),Oe.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];if(!ke.visible)continue;const Be=ke.layer.getRenderer();if(Be&&!Be.ready)return!0;const Ue=ke.layer.getSource();if(Ue&&Ue.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,Oe,ke){return getTilePriority(this.frameState_,e,t,Oe,ke)}handleBrowserEvent(e,t){t=t||e.type;const Oe=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(Oe)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,Oe=t.type;if(Oe===PointerEventType.POINTERDOWN||Oe===EventType.WHEEL||Oe===EventType.KEYDOWN){const ke=this.getOwnerDocument(),Be=this.viewport_.getRootNode?this.viewport_.getRootNode():ke,Ue=t.target,He=Be instanceof ShadowRoot?Be.host===Ue?Be.host.ownerDocument:Be:Be===ke?ke.documentElement:Be;if(this.overlayContainerStopEvent_.contains(Ue)||!He.contains(Ue))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const ke=this.getInteractions().getArray().slice();for(let Be=ke.length-1;Be>=0;Be--){const Ue=ke[Be];if(Ue.getMap()!==this||!Ue.getActive()||!this.getTargetElement())continue;if(!Ue.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let ke=this.maxTilesLoading_,Be=ke;if(e){const Ue=e.viewHints;if(Ue[ViewHint.ANIMATING]||Ue[ViewHint.INTERACTING]){const He=Date.now()-e.time>8;ke=He?0:8,Be=He?0:2}}t.getTilesLoading()<ke&&(t.reprioritize(),t.loadMoreTiles(ke,Be))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const Oe=this.postRenderFunctions_;if(e)for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke](this,e);Oe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Oe=0,ke=this.targetChangeHandlerKeys_.length;Oe<ke;++Oe)unlistenByKey(this.targetChangeHandlerKeys_[Oe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Oe=this.targetElement_.getRootNode();Oe instanceof ShadowRoot&&this.resizeObserver_.unobserve(Oe.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Be in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Be],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let Oe;if(this.keyboardEventTarget_)Oe=this.keyboardEventTarget_;else{const Be=t.getRootNode();Oe=Be instanceof ShadowRoot?Be.host:t}this.targetChangeHandlerKeys_=[listen(Oe,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(Oe,EventType.KEYPRESS,this.handleBrowserEvent,this)];const ke=t.getRootNode();ke instanceof ShadowRoot&&this.resizeObserver_.observe(ke.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t].layer;ke.hasRenderer()&&ke.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),Oe=this.getView(),ke=this.frameState_;let Be=null;if(t!==void 0&&hasArea(t)&&Oe&&Oe.isDef()){const Ue=Oe.getHints(this.frameState_?this.frameState_.viewHints:void 0),He=Oe.getState();if(Be={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(He.center,He.resolution,He.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:He,viewHints:Ue,wantedTiles:{},mapId:getUid(this),renderTargets:{}},He.nextCenter&&He.nextResolution){const We=isNaN(He.nextRotation)?He.rotation:He.nextRotation;Be.nextExtent=getForViewAndSize(He.nextCenter,He.nextResolution,We,t)}}this.frameState_=Be,this.renderer_.renderFrame(Be),Be&&(Be.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Be.postRenderFunctions),ke&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Be.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,ke)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Be.viewHints[ViewHint.ANIMATING]&&!Be.viewHints[ViewHint.INTERACTING]&&!equals$1(Be.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Be)),clone$1(Be.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Be)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(Oe){t.setView(new View(Oe))})}updateSize(){const e=this.getTargetElement();let t;if(e){const ke=getComputedStyle(e),Be=e.offsetWidth-parseFloat(ke.borderLeftWidth)-parseFloat(ke.paddingLeft)-parseFloat(ke.paddingRight)-parseFloat(ke.borderRightWidth),Ue=e.offsetHeight-parseFloat(ke.borderTopWidth)-parseFloat(ke.paddingTop)-parseFloat(ke.paddingBottom)-parseFloat(ke.borderBottomWidth);!isNaN(Be)&&!isNaN(Ue)&&(t=[Math.max(0,Be),Math.max(0,Ue)],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const Oe=this.getSize();t&&(!Oe||!equals$2(t,Oe))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(Te){let e=null;Te.keyboardEventTarget!==void 0&&(e=typeof Te.keyboardEventTarget=="string"?document.getElementById(Te.keyboardEventTarget):Te.keyboardEventTarget);const t={},Oe=Te.layers&&typeof Te.layers.getLayers=="function"?Te.layers:new LayerGroup({layers:Te.layers});t[MapProperty.LAYERGROUP]=Oe,t[MapProperty.TARGET]=Te.target,t[MapProperty.VIEW]=Te.view instanceof View?Te.view:new View;let ke;Te.controls!==void 0&&(Array.isArray(Te.controls)?ke=new Collection(Te.controls.slice()):(assert(typeof Te.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),ke=Te.controls));let Be;Te.interactions!==void 0&&(Array.isArray(Te.interactions)?Be=new Collection(Te.interactions.slice()):(assert(typeof Te.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Be=Te.interactions));let Ue;return Te.overlays!==void 0?Array.isArray(Te.overlays)?Ue=new Collection(Te.overlays.slice()):(assert(typeof Te.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),Ue=Te.overlays):Ue=new Collection,{controls:ke,interactions:Be,keyboardEventTarget:e,overlays:Ue,values:t}}function getDefaultExportFromCjs(Te){return Te&&Te.__esModule&&Object.prototype.hasOwnProperty.call(Te,"default")?Te.default:Te}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(Te){return Te=Math.round(Te),Te<0?0:Te>255?255:Te}function clamp_css_float(Te){return Te<0?0:Te>1?1:Te}function parse_css_int(Te){return Te[Te.length-1]==="%"?clamp_css_byte(parseFloat(Te)/100*255):clamp_css_byte(parseInt(Te))}function parse_css_float(Te){return Te[Te.length-1]==="%"?clamp_css_float(parseFloat(Te)/100):clamp_css_float(parseFloat(Te))}function css_hue_to_rgb(Te,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?Te+(e-Te)*t*6:t*2<1?e:t*3<2?Te+(e-Te)*(2/3-t)*6:Te}function parseCSSColor(Te){var e=Te.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var Oe=e.indexOf("("),ke=e.indexOf(")");if(Oe!==-1&&ke+1===e.length){var Be=e.substr(0,Oe),Ue=e.substr(Oe+1,ke-(Oe+1)).split(","),He=1;switch(Be){case"rgba":if(Ue.length!==4)return null;He=parse_css_float(Ue.pop());case"rgb":return Ue.length!==3?null:[parse_css_int(Ue[0]),parse_css_int(Ue[1]),parse_css_int(Ue[2]),He];case"hsla":if(Ue.length!==4)return null;He=parse_css_float(Ue.pop());case"hsl":if(Ue.length!==3)return null;var We=(parseFloat(Ue[0])%360+360)%360/360,Cn=parse_css_float(Ue[1]),An=parse_css_float(Ue[2]),En=An<=.5?An*(Cn+1):An+Cn-An*Cn,Sn=An*2-En;return[clamp_css_byte(css_hue_to_rgb(Sn,En,We+1/3)*255),clamp_css_byte(css_hue_to_rgb(Sn,En,We)*255),clamp_css_byte(css_hue_to_rgb(Sn,En,We-1/3)*255),He];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,t,Oe,ke=1){this.r=e,this.g=t,this.b=Oe,this.a=ke}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCSSColor_1(e);if(t)return new Color(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,Oe,ke]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(Oe)},${ke})`}toArray(){const{r:e,g:t,b:Oe,a:ke}=this;return ke===0?[0,0,0,0]:[e*255/ke,t*255/ke,Oe*255/ke,ke]}toArray01(){const{r:e,g:t,b:Oe,a:ke}=this;return ke===0?[0,0,0,0]:[e/ke,t/ke,Oe/ke,ke]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:Oe,a:ke}=this;return[e,t,Oe,ke]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(Te){return typeof Te=="object"?["literal",Te]:Te}function convertFunction(Te,e){let t=Te.stops;if(!t)return convertIdentityFunction(Te,e);const Oe=t&&typeof t[0][0]=="object",ke=Oe||Te.property!==void 0,Be=Oe||!ke;return t=t.map(Ue=>!ke&&e.tokens&&typeof Ue[1]=="string"?[Ue[0],convertTokenString(Ue[1])]:[Ue[0],convertLiteral(Ue[1])]),Oe?convertZoomAndPropertyFunction(Te,e,t):Be?convertZoomFunction(Te,e,t):convertPropertyFunction(Te,e,t)}function convertIdentityFunction(Te,e){const t=["get",Te.property];if(Te.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,Te.default];{const Oe=[e.type==="color"?"to-color":e.type,t,convertLiteral(Te.default)];return e.type==="array"&&Oe.splice(1,0,e.value,e.length||null),Oe}}function getInterpolateOperator(Te){switch(Te.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(Te,e,t){const Oe={},ke={},Be=[];for(let He=0;He<t.length;He++){const We=t[He],Cn=We[0].zoom;Oe[Cn]===void 0&&(Oe[Cn]={zoom:Cn,type:Te.type,property:Te.property,default:Te.default},ke[Cn]=[],Be.push(Cn)),ke[Cn].push([We[0].value,We[1]])}if(getFunctionType({},e)==="exponential"){const He=[getInterpolateOperator(Te),["linear"],["zoom"]];for(const We of Be){const Cn=convertPropertyFunction(Oe[We],e,ke[We]);appendStopPair(He,We,Cn,!1)}return He}else{const He=["step",["zoom"]];for(const We of Be){const Cn=convertPropertyFunction(Oe[We],e,ke[We]);appendStopPair(He,We,Cn,!0)}return fixupDegenerateStepCurve(He),He}}function coalesce(Te,e){if(Te!==void 0)return Te;if(e!==void 0)return e}function getFallback(Te,e){const t=convertLiteral(coalesce(Te.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(Te,e,t){const Oe=getFunctionType(Te,e),ke=["get",Te.property];if(Oe==="categorical"&&typeof t[0][0]=="boolean"){const Be=["case"];for(const Ue of t)Be.push(["==",ke,Ue[0]],Ue[1]);return Be.push(getFallback(Te,e)),Be}else if(Oe==="categorical"){const Be=["match",ke];for(const Ue of t)appendStopPair(Be,Ue[0],Ue[1],!1);return Be.push(getFallback(Te,e)),Be}else if(Oe==="interval"){const Be=["step",["number",ke]];for(const Ue of t)appendStopPair(Be,Ue[0],Ue[1],!0);return fixupDegenerateStepCurve(Be),Te.default===void 0?Be:["case",["==",["typeof",ke],"number"],Be,convertLiteral(Te.default)]}else if(Oe==="exponential"){const Be=Te.base!==void 0?Te.base:1,Ue=[getInterpolateOperator(Te),Be===1?["linear"]:["exponential",Be],["number",ke]];for(const He of t)appendStopPair(Ue,He[0],He[1],!1);return Te.default===void 0?Ue:["case",["==",["typeof",ke],"number"],Ue,convertLiteral(Te.default)]}else throw new Error(`Unknown property function type ${Oe}`)}function convertZoomFunction(Te,e,t,Oe=["zoom"]){const ke=getFunctionType(Te,e);let Be,Ue=!1;if(ke==="interval")Be=["step",Oe],Ue=!0;else if(ke==="exponential"){const He=Te.base!==void 0?Te.base:1;Be=[getInterpolateOperator(Te),He===1?["linear"]:["exponential",He],Oe]}else throw new Error(`Unknown zoom function type "${ke}"`);for(const He of t)appendStopPair(Be,He[0],He[1],Ue);return fixupDegenerateStepCurve(Be),Be}function fixupDegenerateStepCurve(Te){Te[0]==="step"&&Te.length===3&&(Te.push(0),Te.push(Te[3]))}function appendStopPair(Te,e,t,Oe){Te.length>3&&e===Te[Te.length-2]||(Oe&&Te.length===2||Te.push(e),Te.push(t))}function getFunctionType(Te,e){return Te.type?Te.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(Te){const e=["concat"],t=/{([^{}]+)}/g;let Oe=0;for(let ke=t.exec(Te);ke!==null;ke=t.exec(Te)){const Be=Te.slice(Oe,t.lastIndex-ke[0].length);Oe=t.lastIndex,Be.length>0&&e.push(Be),e.push(["get",ke[1]])}if(e.length===1)return Te;if(Oe<Te.length)e.push(Te.slice(Oe));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[Oe,ke]of t)this.bindings[Oe]=ke}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(Te,e){return{kind:"array",itemType:Te,N:e}}function toString$1(Te){if(Te.kind==="array"){const e=toString$1(Te.itemType);return typeof Te.N=="number"?`array<${e}, ${Te.N}>`:Te.itemType.kind==="value"?"array":`array<${e}>`}else return Te.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(Te,e){if(e.kind==="error")return null;if(Te.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(Te.itemType,e.itemType))&&(typeof Te.N!="number"||Te.N===e.N))return null}else{if(Te.kind===e.kind)return null;if(Te.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${toString$1(Te)} but found ${toString$1(e)} instead.`}function isValidType(Te,e){return e.some(t=>t.kind===Te.kind)}function isValidNativeType(Te,e){return e.some(t=>t==="null"?Te===null:t==="array"?Array.isArray(Te):t==="object"?Te&&!Array.isArray(Te)&&typeof Te=="object":t===typeof Te)}class Collator{constructor(e,t,Oe){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=Oe,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,t,Oe,ke,Be){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=Oe,this.fontStack=ke,this.textColor=Be}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const Oe={};t.fontStack&&(Oe["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(Oe["font-scale"]=t.scale),t.textColor&&(Oe["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(Oe)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(Te,e,t,Oe){return typeof Te=="number"&&Te>=0&&Te<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof Oe>"u"||typeof Oe=="number"&&Oe>=0&&Oe<=1?null:`Invalid rgba value [${[Te,e,t,Oe].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof Oe=="number"?[Te,e,t,Oe]:[Te,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(Te){if(Te===null)return!0;if(typeof Te=="string")return!0;if(typeof Te=="boolean")return!0;if(typeof Te=="number")return!0;if(Te instanceof Color$1)return!0;if(Te instanceof Collator)return!0;if(Te instanceof Formatted)return!0;if(Te instanceof ResolvedImage)return!0;if(Array.isArray(Te)){for(const e of Te)if(!isValue(e))return!1;return!0}else if(typeof Te=="object"){for(const e in Te)if(!isValue(Te[e]))return!1;return!0}else return!1}function typeOf(Te){if(Te===null)return NullType;if(typeof Te=="string")return StringType;if(typeof Te=="boolean")return BooleanType;if(typeof Te=="number")return NumberType;if(Te instanceof Color$1)return ColorType;if(Te instanceof Collator)return CollatorType;if(Te instanceof Formatted)return FormattedType;if(Te instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(Te)){const e=Te.length;let t;for(const Oe of Te){const ke=typeOf(Oe);if(!t)t=ke;else{if(t===ke)continue;t=ValueType;break}}return array$1(t||ValueType,e)}else return ObjectType}function toString(Te){const e=typeof Te;return Te===null?"":e==="string"||e==="number"||e==="boolean"?String(Te):Te instanceof Color$1||Te instanceof Formatted||Te instanceof ResolvedImage?Te.toString():JSON.stringify(Te)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const Oe=e[1];let ke=typeOf(Oe);const Be=t.expectedType;return ke.kind==="array"&&ke.N===0&&Be&&Be.kind==="array"&&(typeof Be.N!="number"||Be.N===0)&&(ke=Be),new Literal(ke,Oe)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let Oe=1,ke;const Be=e[0];if(Be==="array"){let He;if(e.length>2){const Cn=e[1];if(typeof Cn!="string"||!(Cn in types$2)||Cn==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);He=types$2[Cn],Oe++}else He=ValueType;let We;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);We=e[2],Oe++}ke=array$1(He,We)}else ke=types$2[Be];const Ue=[];for(;Oe<e.length;Oe++){const He=t.parse(e[Oe],Oe,ValueType);if(!He)return null;Ue.push(He)}return new Assertion(ke,Ue)}evaluate(e){for(let t=0;t<this.args.length;t++){const Oe=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(Oe))){if(t===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(Oe))} instead.`)}else return Oe}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const Oe=e.itemType;if(Oe.kind==="string"||Oe.kind==="number"||Oe.kind==="boolean"){t.push(Oe.kind);const ke=e.N;(typeof ke=="number"||this.args.length>1)&&t.push(ke)}}return t.concat(this.args.map(Oe=>Oe.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const Oe=e[1];if(!Array.isArray(Oe)&&typeof Oe=="object")return t.error("First argument must be an image or text section.");const ke=[];let Be=!1;for(let Ue=1;Ue<=e.length-1;++Ue){const He=e[Ue];if(Be&&typeof He=="object"&&!Array.isArray(He)){Be=!1;let We=null;if(He["font-scale"]&&(We=t.parse(He["font-scale"],1,NumberType),!We))return null;let Cn=null;if(He["text-font"]&&(Cn=t.parse(He["text-font"],1,array$1(StringType)),!Cn))return null;let An=null;if(He["text-color"]&&(An=t.parse(He["text-color"],1,ColorType),!An))return null;const En=ke[ke.length-1];En.scale=We,En.font=Cn,En.textColor=An}else{const We=t.parse(e[Ue],1,ValueType);if(!We)return null;const Cn=We.type.kind;if(Cn!=="string"&&Cn!=="value"&&Cn!=="null"&&Cn!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Be=!0,ke.push({content:We,scale:null,font:null,textColor:null})}}return new FormatExpression(ke)}evaluate(e){const t=Oe=>{const ke=Oe.content.evaluate(e);return typeOf(ke)===ResolvedImageType?new FormattedSection("",ke,null,null,null):new FormattedSection(toString(ke),null,Oe.scale?Oe.scale.evaluate(e):null,Oe.font?Oe.font.evaluate(e).join(","):null,Oe.textColor?Oe.textColor.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const Oe={};t.scale&&(Oe["font-scale"]=t.scale.serialize()),t.font&&(Oe["text-font"]=t.font.serialize()),t.textColor&&(Oe["text-color"]=t.textColor.serialize()),e.push(Oe)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const Oe=t.parse(e[1],1,StringType);return Oe?new ImageExpression(Oe):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),Oe=ResolvedImage.fromString(t);return Oe&&e.availableImages&&(Oe.available=e.availableImages.indexOf(t)>-1),Oe}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const Oe=e[0];if((Oe==="to-boolean"||Oe==="to-string")&&e.length!==2)return t.error("Expected one argument.");const ke=types$1[Oe],Be=[];for(let Ue=1;Ue<e.length;Ue++){const He=t.parse(e[Ue],Ue,ValueType);if(!He)return null;Be.push(He)}return new Coercion(ke,Be)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,Oe;for(const ke of this.args){if(t=ke.evaluate(e),Oe=null,t instanceof Color$1)return t;if(typeof t=="string"){const Be=e.parseColor(t);if(Be)return Be}else if(Array.isArray(t)&&(t.length<3||t.length>4?Oe=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Oe=validateRGBA(t[0],t[1],t[2],t[3]),!Oe))return new Color$1(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError$1(Oe||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const Oe of this.args){if(t=Oe.evaluate(e),t===null)return 0;const ke=Number(t);if(!isNaN(ke))return ke}throw new RuntimeError$1(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:Oe,y:ke}=this.featureTileCoord,Be=Oe*t-e[0],Ue=ke*t-e[1],He=this.featureDistanceData.bearing[0],We=this.featureDistanceData.bearing[1];return He*Be+We*Ue}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color$1.parse(e)),t}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,t,Oe,ke){this.name=e,this.type=t,this._evaluate=Oe,this.args=ke}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const Oe=e[0],ke=CompoundExpression.definitions[Oe];if(!ke)return t.error(`Unknown expression "${Oe}". If you wanted a literal array, use ["literal", [...]].`,0);const Be=Array.isArray(ke)?ke[0]:ke.type,Ue=Array.isArray(ke)?[[ke[1],ke[2]]]:ke.overloads,He=Ue.filter(([Cn])=>!Array.isArray(Cn)||Cn.length===e.length-1);let We=null;for(const[Cn,An]of He){We=new ParsingContext$1(t.registry,t.path,null,t.scope);const En=[];let Sn=!1;for(let Tn=1;Tn<e.length;Tn++){const Ln=e[Tn],Bn=Array.isArray(Cn)?Cn[Tn-1]:Cn.type,ti=We.parse(Ln,1+En.length,Bn);if(!ti){Sn=!0;break}En.push(ti)}if(!Sn){if(Array.isArray(Cn)&&Cn.length!==En.length){We.error(`Expected ${Cn.length} arguments, but found ${En.length} instead.`);continue}for(let Tn=0;Tn<En.length;Tn++){const Ln=Array.isArray(Cn)?Cn[Tn]:Cn.type,Bn=En[Tn];We.concat(Tn+1).checkSubtype(Ln,Bn.type)}if(We.errors.length===0)return new CompoundExpression(Oe,Be,An,En)}}if(He.length===1)t.errors.push(...We.errors);else{const An=(He.length?He:Ue).map(([Sn])=>stringifySignature(Sn)).join(" | "),En=[];for(let Sn=1;Sn<e.length;Sn++){const Tn=t.parse(e[Sn],1+En.length);if(!Tn)return null;En.push(toString$1(Tn.type))}t.error(`Expected arguments of type ${An}, but found (${En.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const Oe in t)e[Oe]=CompoundExpression}}function stringifySignature(Te){return Array.isArray(Te)?`(${Te.map(toString$1).join(", ")})`:`(${toString$1(Te.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,t,Oe){this.type=CollatorType,this.locale=Oe,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const Oe=e[1];if(typeof Oe!="object"||Array.isArray(Oe))return t.error("Collator options argument must be an object.");const ke=t.parse(Oe["case-sensitive"]===void 0?!1:Oe["case-sensitive"],1,BooleanType);if(!ke)return null;const Be=t.parse(Oe["diacritic-sensitive"]===void 0?!1:Oe["diacritic-sensitive"],1,BooleanType);if(!Be)return null;let Ue=null;return Oe.locale&&(Ue=t.parse(Oe.locale,1,StringType),!Ue)?null:new CollatorExpression(ke,Be,Ue)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(Te,e){Te[0]=Math.min(Te[0],e[0]),Te[1]=Math.min(Te[1],e[1]),Te[2]=Math.max(Te[2],e[0]),Te[3]=Math.max(Te[3],e[1])}function mercatorXfromLng(Te){return(180+Te)/360}function mercatorYfromLat(Te){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Te*Math.PI/360)))/360}function boxWithinBox(Te,e){return!(Te[0]<=e[0]||Te[2]>=e[2]||Te[1]<=e[1]||Te[3]>=e[3])}function getTileCoordinates(Te,e){const t=mercatorXfromLng(Te[0]),Oe=mercatorYfromLat(Te[1]),ke=Math.pow(2,e.z);return[Math.round(t*ke*EXTENT),Math.round(Oe*ke*EXTENT)]}function onBoundary(Te,e,t){const Oe=Te[0]-e[0],ke=Te[1]-e[1],Be=Te[0]-t[0],Ue=Te[1]-t[1];return Oe*Ue-Be*ke===0&&Oe*Be<=0&&ke*Ue<=0}function rayIntersect(Te,e,t){return e[1]>Te[1]!=t[1]>Te[1]&&Te[0]<(t[0]-e[0])*(Te[1]-e[1])/(t[1]-e[1])+e[0]}function pointWithinPolygon(Te,e){let t=!1;for(let Oe=0,ke=e.length;Oe<ke;Oe++){const Be=e[Oe];for(let Ue=0,He=Be.length;Ue<He-1;Ue++){if(onBoundary(Te,Be[Ue],Be[Ue+1]))return!1;rayIntersect(Te,Be[Ue],Be[Ue+1])&&(t=!t)}}return t}function pointWithinPolygons(Te,e){for(let t=0;t<e.length;t++)if(pointWithinPolygon(Te,e[t]))return!0;return!1}function perp(Te,e){return Te[0]*e[1]-Te[1]*e[0]}function twoSided(Te,e,t,Oe){const ke=Te[0]-t[0],Be=Te[1]-t[1],Ue=e[0]-t[0],He=e[1]-t[1],We=Oe[0]-t[0],Cn=Oe[1]-t[1],An=ke*Cn-We*Be,En=Ue*Cn-We*He;return An>0&&En<0||An<0&&En>0}function lineIntersectLine(Te,e,t,Oe){const ke=[e[0]-Te[0],e[1]-Te[1]],Be=[Oe[0]-t[0],Oe[1]-t[1]];return perp(Be,ke)===0?!1:!!(twoSided(Te,e,t,Oe)&&twoSided(t,Oe,Te,e))}function lineIntersectPolygon(Te,e,t){for(const Oe of t)for(let ke=0;ke<Oe.length-1;++ke)if(lineIntersectLine(Te,e,Oe[ke],Oe[ke+1]))return!0;return!1}function lineStringWithinPolygon(Te,e){for(let t=0;t<Te.length;++t)if(!pointWithinPolygon(Te[t],e))return!1;for(let t=0;t<Te.length-1;++t)if(lineIntersectPolygon(Te[t],Te[t+1],e))return!1;return!0}function lineStringWithinPolygons(Te,e){for(let t=0;t<e.length;t++)if(lineStringWithinPolygon(Te,e[t]))return!0;return!1}function getTilePolygon(Te,e,t){const Oe=[];for(let ke=0;ke<Te.length;ke++){const Be=[];for(let Ue=0;Ue<Te[ke].length;Ue++){const He=getTileCoordinates(Te[ke][Ue],t);updateBBox(e,He),Be.push(He)}Oe.push(Be)}return Oe}function getTilePolygons(Te,e,t){const Oe=[];for(let ke=0;ke<Te.length;ke++){const Be=getTilePolygon(Te[ke],e,t);Oe.push(Be)}return Oe}function updatePoint(Te,e,t,Oe){if(Te[0]<t[0]||Te[0]>t[2]){const ke=Oe*.5;let Be=Te[0]-t[0]>ke?-Oe:t[0]-Te[0]>ke?Oe:0;Be===0&&(Be=Te[0]-t[2]>ke?-Oe:t[2]-Te[0]>ke?Oe:0),Te[0]+=Be}updateBBox(e,Te)}function resetBBox(Te){Te[0]=Te[1]=1/0,Te[2]=Te[3]=-1/0}function getTilePoints(Te,e,t,Oe){const ke=Math.pow(2,Oe.z)*EXTENT,Be=[Oe.x*EXTENT,Oe.y*EXTENT],Ue=[];if(!Te)return Ue;for(const He of Te)for(const We of He){const Cn=[We.x+Be[0],We.y+Be[1]];updatePoint(Cn,e,t,ke),Ue.push(Cn)}return Ue}function getTileLines(Te,e,t,Oe){const ke=Math.pow(2,Oe.z)*EXTENT,Be=[Oe.x*EXTENT,Oe.y*EXTENT],Ue=[];if(!Te)return Ue;for(const He of Te){const We=[];for(const Cn of He){const An=[Cn.x+Be[0],Cn.y+Be[1]];updateBBox(e,An),We.push(An)}Ue.push(We)}if(e[2]-e[0]<=ke/2){resetBBox(e);for(const He of Ue)for(const We of He)updatePoint(We,e,t,ke)}return Ue}function pointsWithinPolygons(Te,e){const t=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],ke=Te.canonicalID();if(!ke)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,Oe,ke),Ue=getTilePoints(Te.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const He of Ue)if(!pointWithinPolygon(He,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,Oe,ke),Ue=getTilePoints(Te.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const He of Ue)if(!pointWithinPolygons(He,Be))return!1}return!0}function linesWithinPolygons(Te,e){const t=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],ke=Te.canonicalID();if(!ke)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,Oe,ke),Ue=getTileLines(Te.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const He of Ue)if(!lineStringWithinPolygon(He,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,Oe,ke),Ue=getTileLines(Te.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const He of Ue)if(!lineStringWithinPolygons(He,Be))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const Oe=e[1];if(Oe.type==="FeatureCollection")for(let ke=0;ke<Oe.features.length;++ke){const Be=Oe.features[ke].geometry.type;if(Be==="Polygon"||Be==="MultiPolygon")return new Within(Oe,Oe.features[ke].geometry)}else if(Oe.type==="Feature"){const ke=Oe.geometry.type;if(ke==="Polygon"||ke==="MultiPolygon")return new Within(Oe,Oe.geometry)}else if(Oe.type==="Polygon"||Oe.type==="MultiPolygon")return new Within(Oe,Oe)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(Te){if(Te instanceof CompoundExpression$1){if(Te.name==="get"&&Te.args.length===1)return!1;if(Te.name==="feature-state")return!1;if(Te.name==="has"&&Te.args.length===1)return!1;if(Te.name==="properties"||Te.name==="geometry-type"||Te.name==="id")return!1;if(/^filter-/.test(Te.name))return!1}if(Te instanceof Within$1)return!1;let e=!0;return Te.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(Te){if(Te instanceof CompoundExpression$1&&Te.name==="feature-state")return!1;let e=!0;return Te.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(Te,e){if(Te instanceof CompoundExpression$1&&e.indexOf(Te.name)>=0)return!1;let t=!0;return Te.eachChild(Oe=>{t&&!isGlobalPropertyConstant(Oe,e)&&(t=!1)}),t}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const Oe=e[1];return t.scope.has(Oe)?new Var(Oe,t.scope.get(Oe)):t.error(`Unknown variable "${Oe}". Make sure "${Oe}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,t=[],Oe,ke=new Scope$1,Be=[]){this.registry=e,this.path=t,this.key=t.map(Ue=>`[${Ue}]`).join(""),this.scope=ke,this.errors=Be,this.expectedType=Oe}parse(e,t,Oe,ke,Be={}){return t?this.concat(t,Oe,ke)._parse(e,Be):this._parse(e,Be)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function Oe(ke,Be,Ue){return Ue==="assert"?new Assertion$1(Be,[ke]):Ue==="coerce"?new Coercion$1(Be,[ke]):ke}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ke=e[0];if(typeof ke!="string")return this.error(`Expression name must be a string, but found ${typeof ke} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Be=this.registry[ke];if(Be){let Ue=Be.parse(e,this);if(!Ue)return null;if(this.expectedType){const He=this.expectedType,We=Ue.type;if((He.kind==="string"||He.kind==="number"||He.kind==="boolean"||He.kind==="object"||He.kind==="array")&&We.kind==="value")Ue=Oe(Ue,He,t.typeAnnotation||"assert");else if((He.kind==="color"||He.kind==="formatted"||He.kind==="resolvedImage")&&(We.kind==="value"||We.kind==="string"))Ue=Oe(Ue,He,t.typeAnnotation||"coerce");else if(this.checkSubtype(He,We))return null}if(!(Ue instanceof Literal$1)&&Ue.type.kind!=="resolvedImage"&&isConstant(Ue)){const He=new EvaluationContext$1;try{Ue=new Literal$1(Ue.type,Ue.evaluate(He))}catch(We){return this.error(We.message),null}}return Ue}return this.error(`Unknown expression "${ke}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,Oe){const ke=typeof e=="number"?this.path.concat(e):this.path,Be=Oe?this.scope.concat(Oe):this.scope;return new ParsingContext(this.registry,ke,t||null,Be,this.errors)}error(e,...t){const Oe=`${this.key}${t.map(ke=>`[${ke}]`).join("")}`;this.errors.push(new ParsingError$1(Oe,e))}checkSubtype(e,t){const Oe=checkSubtype(e,t);return Oe&&this.error(Oe),Oe}}var ParsingContext$1=ParsingContext;function isConstant(Te){if(Te instanceof Var$1)return isConstant(Te.boundExpression);if(Te instanceof CompoundExpression$1&&Te.name==="error")return!1;if(Te instanceof CollatorExpression)return!1;if(Te instanceof Within$1)return!1;const e=Te instanceof Coercion$1||Te instanceof Assertion$1;let t=!0;return Te.eachChild(Oe=>{e?t=t&&isConstant(Oe):t=t&&Oe instanceof Literal$1}),t?isFeatureConstant(Te)&&isGlobalPropertyConstant(Te,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(Te,e){const t=Te.length-1;let Oe=0,ke=t,Be=0,Ue,He;for(;Oe<=ke;)if(Be=Math.floor((Oe+ke)/2),Ue=Te[Be],He=Te[Be+1],Ue<=e){if(Be===t||e<He)return Be;Oe=Be+1}else if(Ue>e)ke=Be-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,t,Oe){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[ke,Be]of Oe)this.labels.push(ke),this.outputs.push(Be)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const Oe=t.parse(e[1],1,NumberType);if(!Oe)return null;const ke=[];let Be=null;t.expectedType&&t.expectedType.kind!=="value"&&(Be=t.expectedType);for(let Ue=1;Ue<e.length;Ue+=2){const He=Ue===1?-1/0:e[Ue],We=e[Ue+1],Cn=Ue,An=Ue+1;if(typeof He!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Cn);if(ke.length&&ke[ke.length-1][0]>=He)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Cn);const En=t.parse(We,An,Be);if(!En)return null;Be=Be||En.type,ke.push([He,En])}return new Step(Be,Oe,ke)}evaluate(e){const t=this.labels,Oe=this.outputs;if(t.length===1)return Oe[0].evaluate(e);const ke=this.input.evaluate(e);if(ke<=t[0])return Oe[0].evaluate(e);const Be=t.length;if(ke>=t[Be-1])return Oe[Be-1].evaluate(e);const Ue=findStopLessThanOrEqualTo(t,ke);return Oe[Ue].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(Te,e,t,Oe){this.cx=3*Te,this.bx=3*(t-Te)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(Oe-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=Te,this.p1y=Oe,this.p2x=t,this.p2y=Oe}UnitBezier.prototype.sampleCurveX=function(Te){return((this.ax*Te+this.bx)*Te+this.cx)*Te};UnitBezier.prototype.sampleCurveY=function(Te){return((this.ay*Te+this.by)*Te+this.cy)*Te};UnitBezier.prototype.sampleCurveDerivativeX=function(Te){return(3*this.ax*Te+2*this.bx)*Te+this.cx};UnitBezier.prototype.solveCurveX=function(Te,e){typeof e>"u"&&(e=1e-6);var t,Oe,ke,Be,Ue;for(ke=Te,Ue=0;Ue<8;Ue++){if(Be=this.sampleCurveX(ke)-Te,Math.abs(Be)<e)return ke;var He=this.sampleCurveDerivativeX(ke);if(Math.abs(He)<1e-6)break;ke=ke-Be/He}if(t=0,Oe=1,ke=Te,ke<t)return t;if(ke>Oe)return Oe;for(;t<Oe;){if(Be=this.sampleCurveX(ke),Math.abs(Be-Te)<e)return ke;Te>Be?t=ke:Oe=ke,ke=(Oe-t)*.5+t}return ke};UnitBezier.prototype.solve=function(Te,e){return this.sampleCurveY(this.solveCurveX(Te,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(Te,e,t){return Te*(1-t)+e*t}function color(Te,e,t){return new Color$1(number(Te.r,e.r,t),number(Te.g,e.g,t),number(Te.b,e.b,t),number(Te.a,e.a,t))}function array(Te,e,t){return Te.map((Oe,ke)=>number(Oe,e[ke],t))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(Te){return Te>t3?Math.pow(Te,1/3):Te/t2+t0}function lab2xyz(Te){return Te>t1?Te*Te*Te:t2*(Te-t0)}function xyz2rgb(Te){return 255*(Te<=.0031308?12.92*Te:1.055*Math.pow(Te,1/2.4)-.055)}function rgb2xyz(Te){return Te/=255,Te<=.04045?Te/12.92:Math.pow((Te+.055)/1.055,2.4)}function rgbToLab(Te){const e=rgb2xyz(Te.r),t=rgb2xyz(Te.g),Oe=rgb2xyz(Te.b),ke=xyz2lab((.4124564*e+.3575761*t+.1804375*Oe)/Xn),Be=xyz2lab((.2126729*e+.7151522*t+.072175*Oe)/Yn),Ue=xyz2lab((.0193339*e+.119192*t+.9503041*Oe)/Zn);return{l:116*Be-16,a:500*(ke-Be),b:200*(Be-Ue),alpha:Te.a}}function labToRgb(Te){let e=(Te.l+16)/116,t=isNaN(Te.a)?e:e+Te.a/500,Oe=isNaN(Te.b)?e:e-Te.b/200;return e=Yn*lab2xyz(e),t=Xn*lab2xyz(t),Oe=Zn*lab2xyz(Oe),new Color$1(xyz2rgb(3.2404542*t-1.5371385*e-.4985314*Oe),xyz2rgb(-.969266*t+1.8760108*e+.041556*Oe),xyz2rgb(.0556434*t-.2040259*e+1.0572252*Oe),Te.alpha)}function interpolateLab(Te,e,t){return{l:number(Te.l,e.l,t),a:number(Te.a,e.a,t),b:number(Te.b,e.b,t),alpha:number(Te.alpha,e.alpha,t)}}function rgbToHcl(Te){const{l:e,a:t,b:Oe}=rgbToLab(Te),ke=Math.atan2(Oe,t)*rad2deg;return{h:ke<0?ke+360:ke,c:Math.sqrt(t*t+Oe*Oe),l:e,alpha:Te.a}}function hclToRgb(Te){const e=Te.h*deg2rad$1,t=Te.c,Oe=Te.l;return labToRgb({l:Oe,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:Te.alpha})}function interpolateHue(Te,e,t){const Oe=e-Te;return Te+t*(Oe>180||Oe<-180?Oe-360*Math.round(Oe/360):Oe)}function interpolateHcl(Te,e,t){return{h:interpolateHue(Te.h,e.h,t),c:number(Te.c,e.c,t),l:number(Te.l,e.l,t),alpha:number(Te.alpha,e.alpha,t)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,t,Oe,ke,Be){this.type=e,this.operator=t,this.interpolation=Oe,this.input=ke,this.labels=[],this.outputs=[];for(const[Ue,He]of Be)this.labels.push(Ue),this.outputs.push(He)}static interpolationFactor(e,t,Oe,ke){let Be=0;if(e.name==="exponential")Be=exponentialInterpolation(t,e.base,Oe,ke);else if(e.name==="linear")Be=exponentialInterpolation(t,1,Oe,ke);else if(e.name==="cubic-bezier"){const Ue=e.controlPoints;Be=new UnitBezier$1(Ue[0],Ue[1],Ue[2],Ue[3]).solve(exponentialInterpolation(t,1,Oe,ke))}return Be}static parse(e,t){let[Oe,ke,Be,...Ue]=e;if(!Array.isArray(ke)||ke.length===0)return t.error("Expected an interpolation type expression.",1);if(ke[0]==="linear")ke={name:"linear"};else if(ke[0]==="exponential"){const Cn=ke[1];if(typeof Cn!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);ke={name:"exponential",base:Cn}}else if(ke[0]==="cubic-bezier"){const Cn=ke.slice(1);if(Cn.length!==4||Cn.some(An=>typeof An!="number"||An<0||An>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ke={name:"cubic-bezier",controlPoints:Cn}}else return t.error(`Unknown interpolation type ${String(ke[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(Be=t.parse(Be,2,NumberType),!Be)return null;const He=[];let We=null;Oe==="interpolate-hcl"||Oe==="interpolate-lab"?We=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(We=t.expectedType);for(let Cn=0;Cn<Ue.length;Cn+=2){const An=Ue[Cn],En=Ue[Cn+1],Sn=Cn+3,Tn=Cn+4;if(typeof An!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Sn);if(He.length&&He[He.length-1][0]>=An)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Sn);const Ln=t.parse(En,Tn,We);if(!Ln)return null;We=We||Ln.type,He.push([An,Ln])}return We.kind!=="number"&&We.kind!=="color"&&!(We.kind==="array"&&We.itemType.kind==="number"&&typeof We.N=="number")?t.error(`Type ${toString$1(We)} is not interpolatable.`):new Interpolate(We,Oe,ke,Be,He)}evaluate(e){const t=this.labels,Oe=this.outputs;if(t.length===1)return Oe[0].evaluate(e);const ke=this.input.evaluate(e);if(ke<=t[0])return Oe[0].evaluate(e);const Be=t.length;if(ke>=t[Be-1])return Oe[Be-1].evaluate(e);const Ue=findStopLessThanOrEqualTo(t,ke),He=t[Ue],We=t[Ue+1],Cn=Interpolate.interpolationFactor(this.interpolation,ke,He,We),An=Oe[Ue].evaluate(e),En=Oe[Ue+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](An,En,Cn):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(An),hcl.forward(En),Cn)):lab.reverse(lab.interpolate(lab.forward(An),lab.forward(En),Cn))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let Oe=0;Oe<this.labels.length;Oe++)t.push(this.labels[Oe],this.outputs[Oe].serialize());return t}}function exponentialInterpolation(Te,e,t,Oe){const ke=Oe-t,Be=Te-t;return ke===0?0:e===1?Be/ke:(Math.pow(e,Be)-1)/(Math.pow(e,ke)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let Oe=null;const ke=t.expectedType;ke&&ke.kind!=="value"&&(Oe=ke);const Be=[];for(const He of e.slice(1)){const We=t.parse(He,1+Be.length,Oe,void 0,{typeAnnotation:"omit"});if(!We)return null;Oe=Oe||We.type,Be.push(We)}return ke&&Be.some(He=>checkSubtype(ke,He.type))?new Coalesce(ValueType,Be):new Coalesce(Oe,Be)}evaluate(e){let t=null,Oe=0,ke;for(const Be of this.args){if(Oe++,t=Be.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(ke||(ke=t),t=null,Oe===this.args.length))return ke;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const Oe=[];for(let Be=1;Be<e.length-1;Be+=2){const Ue=e[Be];if(typeof Ue!="string")return t.error(`Expected string, but found ${typeof Ue} instead.`,Be);if(/[^a-zA-Z0-9_]/.test(Ue))return t.error("Variable names must contain only alphanumeric characters or '_'.",Be);const He=t.parse(e[Be+1],Be+1);if(!He)return null;Oe.push([Ue,He])}const ke=t.parse(e[e.length-1],e.length-1,t.expectedType,Oe);return ke?new Let(Oe,ke):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,Oe]of this.bindings)e.push(t,Oe.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;let At$1=class Vf{constructor(e,t,Oe){this.type=e,this.index=t,this.input=Oe}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,NumberType),ke=t.parse(e[2],2,array$1(t.expectedType||ValueType));if(!Oe||!ke)return null;const Be=ke.type;return new Vf(Be.itemType,Oe,ke)}evaluate(e){const t=this.index.evaluate(e),Oe=this.input.evaluate(e);if(t<0)throw new RuntimeError$1(`Array index out of bounds: ${t} < 0.`);if(t>=Oe.length)throw new RuntimeError$1(`Array index out of bounds: ${t} > ${Oe.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError$1(`Array index must be an integer, but found ${t} instead.`);return Oe[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}};var At$1$1=At$1;class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,ValueType);return!Oe||!ke?null:isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(Oe,ke):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(Oe.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(Oe==null)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(Oe,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(Oe))} instead.`);return Oe.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,t,Oe){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=Oe}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,ValueType);if(!Oe||!ke)return null;if(!isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(Oe.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new IndexOf(Oe,ke,Be):null}else return new IndexOf(Oe,ke)}evaluate(e){const t=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(Oe,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(Oe))} instead.`);if(this.fromIndex){const ke=this.fromIndex.evaluate(e);return Oe.indexOf(t,ke)}return Oe.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,t,Oe,ke,Be,Ue){this.inputType=e,this.type=t,this.input=Oe,this.cases=ke,this.outputs=Be,this.otherwise=Ue}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let Oe,ke;t.expectedType&&t.expectedType.kind!=="value"&&(ke=t.expectedType);const Be={},Ue=[];for(let Cn=2;Cn<e.length-1;Cn+=2){let An=e[Cn];const En=e[Cn+1];Array.isArray(An)||(An=[An]);const Sn=t.concat(Cn);if(An.length===0)return Sn.error("Expected at least one branch label.");for(const Ln of An){if(typeof Ln!="number"&&typeof Ln!="string")return Sn.error("Branch labels must be numbers or strings.");if(typeof Ln=="number"&&Math.abs(Ln)>Number.MAX_SAFE_INTEGER)return Sn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ln=="number"&&Math.floor(Ln)!==Ln)return Sn.error("Numeric branch labels must be integer values.");if(!Oe)Oe=typeOf(Ln);else if(Sn.checkSubtype(Oe,typeOf(Ln)))return null;if(typeof Be[String(Ln)]<"u")return Sn.error("Branch labels must be unique.");Be[String(Ln)]=Ue.length}const Tn=t.parse(En,Cn,ke);if(!Tn)return null;ke=ke||Tn.type,Ue.push(Tn)}const He=t.parse(e[1],1,ValueType);if(!He)return null;const We=t.parse(e[e.length-1],e.length-1,ke);return!We||He.type.kind!=="value"&&t.concat(1).checkSubtype(Oe,He.type)?null:new Match(Oe,ke,He,Be,Ue,We)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),Oe=[],ke={};for(const Ue of t){const He=ke[this.cases[Ue]];He===void 0?(ke[this.cases[Ue]]=Oe.length,Oe.push([this.cases[Ue],[Ue]])):Oe[He][1].push(Ue)}const Be=Ue=>this.inputType.kind==="number"?Number(Ue):Ue;for(const[Ue,He]of Oe)He.length===1?e.push(Be(He[0])):e.push(He.map(Be)),e.push(this.outputs[Ue].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,t,Oe){this.type=e,this.branches=t,this.otherwise=Oe}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let Oe;t.expectedType&&t.expectedType.kind!=="value"&&(Oe=t.expectedType);const ke=[];for(let Ue=1;Ue<e.length-1;Ue+=2){const He=t.parse(e[Ue],Ue,BooleanType);if(!He)return null;const We=t.parse(e[Ue+1],Ue+1,Oe);if(!We)return null;ke.push([He,We]),Oe=Oe||We.type}const Be=t.parse(e[e.length-1],e.length-1,Oe);return Be?new Case(Oe,ke,Be):null}evaluate(e){for(const[t,Oe]of this.branches)if(t.evaluate(e))return Oe.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,Oe]of this.branches)e(t),e(Oe);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,t,Oe,ke){this.type=e,this.input=t,this.beginIndex=Oe,this.endIndex=ke}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,NumberType);if(!Oe||!ke)return null;if(!isValidType(Oe.type,[array$1(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${toString$1(Oe.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new Slice(Oe.type,Oe,ke,Be):null}else return new Slice(Oe.type,Oe,ke)}evaluate(e){const t=this.input.evaluate(e),Oe=this.beginIndex.evaluate(e);if(!isValidNativeType(t,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(t))} instead.`);if(this.endIndex){const ke=this.endIndex.evaluate(e);return t.slice(Oe,ke)}return t.slice(Oe)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(Te,e){return Te==="=="||Te==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(Te,e,t){return e===t}function neq(Te,e,t){return e!==t}function lt$1(Te,e,t){return e<t}function gt$1(Te,e,t){return e>t}function lteq(Te,e,t){return e<=t}function gteq(Te,e,t){return e>=t}function eqCollate(Te,e,t,Oe){return Oe.compare(e,t)===0}function neqCollate(Te,e,t,Oe){return!eqCollate(Te,e,t,Oe)}function ltCollate(Te,e,t,Oe){return Oe.compare(e,t)<0}function gtCollate(Te,e,t,Oe){return Oe.compare(e,t)>0}function lteqCollate(Te,e,t,Oe){return Oe.compare(e,t)<=0}function gteqCollate(Te,e,t,Oe){return Oe.compare(e,t)>=0}function makeComparison(Te,e,t){const Oe=Te!=="=="&&Te!=="!=";return class zf{constructor(Be,Ue,He){this.type=BooleanType,this.lhs=Be,this.rhs=Ue,this.collator=He,this.hasUntypedArgument=Be.type.kind==="value"||Ue.type.kind==="value"}static parse(Be,Ue){if(Be.length!==3&&Be.length!==4)return Ue.error("Expected two or three arguments.");const He=Be[0];let We=Ue.parse(Be[1],1,ValueType);if(!We)return null;if(!isComparableType(He,We.type))return Ue.concat(1).error(`"${He}" comparisons are not supported for type '${toString$1(We.type)}'.`);let Cn=Ue.parse(Be[2],2,ValueType);if(!Cn)return null;if(!isComparableType(He,Cn.type))return Ue.concat(2).error(`"${He}" comparisons are not supported for type '${toString$1(Cn.type)}'.`);if(We.type.kind!==Cn.type.kind&&We.type.kind!=="value"&&Cn.type.kind!=="value")return Ue.error(`Cannot compare types '${toString$1(We.type)}' and '${toString$1(Cn.type)}'.`);Oe&&(We.type.kind==="value"&&Cn.type.kind!=="value"?We=new Assertion$1(Cn.type,[We]):We.type.kind!=="value"&&Cn.type.kind==="value"&&(Cn=new Assertion$1(We.type,[Cn])));let An=null;if(Be.length===4){if(We.type.kind!=="string"&&Cn.type.kind!=="string"&&We.type.kind!=="value"&&Cn.type.kind!=="value")return Ue.error("Cannot use collator to compare non-string types.");if(An=Ue.parse(Be[3],3,CollatorType),!An)return null}return new zf(We,Cn,An)}evaluate(Be){const Ue=this.lhs.evaluate(Be),He=this.rhs.evaluate(Be);if(Oe&&this.hasUntypedArgument){const We=typeOf(Ue),Cn=typeOf(He);if(We.kind!==Cn.kind||!(We.kind==="string"||We.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${Te}" to be (string, string) or (number, number), but found (${We.kind}, ${Cn.kind}) instead.`)}if(this.collator&&!Oe&&this.hasUntypedArgument){const We=typeOf(Ue),Cn=typeOf(He);if(We.kind!=="string"||Cn.kind!=="string")return e(Be,Ue,He)}return this.collator?t(Be,Ue,He,this.collator.evaluate(Be)):e(Be,Ue,He)}eachChild(Be){Be(this.lhs),Be(this.rhs),this.collator&&Be(this.collator)}outputDefined(){return!0}serialize(){const Be=[Te];return this.eachChild(Ue=>{Be.push(Ue.serialize())}),Be}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,t,Oe,ke,Be,Ue){this.type=StringType,this.number=e,this.locale=t,this.currency=Oe,this.unit=ke,this.minFractionDigits=Be,this.maxFractionDigits=Ue}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const Oe=t.parse(e[1],1,NumberType);if(!Oe)return null;const ke=e[2];if(typeof ke!="object"||Array.isArray(ke))return t.error("NumberFormat options argument must be an object.");let Be=null;if(ke.locale&&(Be=t.parse(ke.locale,1,StringType),!Be))return null;let Ue=null;if(ke.currency&&(Ue=t.parse(ke.currency,1,StringType),!Ue))return null;let He=null;if(ke.unit&&(He=t.parse(ke.unit,1,StringType),!He))return null;let We=null;if(ke["min-fraction-digits"]&&(We=t.parse(ke["min-fraction-digits"],1,NumberType),!We))return null;let Cn=null;return ke["max-fraction-digits"]&&(Cn=t.parse(ke["max-fraction-digits"],1,NumberType),!Cn)?null:new NumberFormat(Oe,Be,Ue,He,We,Cn)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1);return Oe?Oe.type.kind!=="array"&&Oe.type.kind!=="string"&&Oe.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${toString$1(Oe.type)} instead.`):new Length(Oe):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(Te,[e,t,Oe,ke]){e=e.evaluate(Te),t=t.evaluate(Te),Oe=Oe.evaluate(Te);const Be=ke?ke.evaluate(Te):1,Ue=validateRGBA(e,t,Oe,Be);if(Ue)throw new RuntimeError$1(Ue);return new Color$1(e/255*Be,t/255*Be,Oe/255*Be,Be)}function has(Te,e){return Te in e}function get$1(Te,e){const t=e[Te];return typeof t>"u"?null:t}function binarySearch(Te,e,t,Oe){for(;t<=Oe;){const ke=t+Oe>>1;if(e[ke]===Te)return!0;e[ke]>Te?Oe=ke-1:t=ke+1}return!1}function varargs(Te){return{type:Te}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(Te,[e])=>{throw new RuntimeError$1(e.evaluate(Te))}],typeof:[StringType,[ValueType],(Te,[e])=>toString$1(typeOf(e.evaluate(Te)))],"to-rgba":[array$1(NumberType,4),[ColorType],(Te,[e])=>e.evaluate(Te).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(Te,[e])=>has(e.evaluate(Te),Te.properties())],[[StringType,ObjectType],(Te,[e,t])=>has(e.evaluate(Te),t.evaluate(Te))]]},get:{type:ValueType,overloads:[[[StringType],(Te,[e])=>get$1(e.evaluate(Te),Te.properties())],[[StringType,ObjectType],(Te,[e,t])=>get$1(e.evaluate(Te),t.evaluate(Te))]]},"feature-state":[ValueType,[StringType],(Te,[e])=>get$1(e.evaluate(Te),Te.featureState||{})],properties:[ObjectType,[],Te=>Te.properties()],"geometry-type":[StringType,[],Te=>Te.geometryType()],id:[ValueType,[],Te=>Te.id()],zoom:[NumberType,[],Te=>Te.globals.zoom],pitch:[NumberType,[],Te=>Te.globals.pitch||0],"distance-from-center":[NumberType,[],Te=>Te.distanceFromCenter()],"heatmap-density":[NumberType,[],Te=>Te.globals.heatmapDensity||0],"line-progress":[NumberType,[],Te=>Te.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],Te=>Te.globals.skyRadialProgress||0],accumulated:[ValueType,[],Te=>Te.globals.accumulated===void 0?null:Te.globals.accumulated],"+":[NumberType,varargs(NumberType),(Te,e)=>{let t=0;for(const Oe of e)t+=Oe.evaluate(Te);return t}],"*":[NumberType,varargs(NumberType),(Te,e)=>{let t=1;for(const Oe of e)t*=Oe.evaluate(Te);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(Te,[e,t])=>e.evaluate(Te)-t.evaluate(Te)],[[NumberType],(Te,[e])=>-e.evaluate(Te)]]},"/":[NumberType,[NumberType,NumberType],(Te,[e,t])=>e.evaluate(Te)/t.evaluate(Te)],"%":[NumberType,[NumberType,NumberType],(Te,[e,t])=>e.evaluate(Te)%t.evaluate(Te)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(Te,[e,t])=>Math.pow(e.evaluate(Te),t.evaluate(Te))],sqrt:[NumberType,[NumberType],(Te,[e])=>Math.sqrt(e.evaluate(Te))],log10:[NumberType,[NumberType],(Te,[e])=>Math.log(e.evaluate(Te))/Math.LN10],ln:[NumberType,[NumberType],(Te,[e])=>Math.log(e.evaluate(Te))],log2:[NumberType,[NumberType],(Te,[e])=>Math.log(e.evaluate(Te))/Math.LN2],sin:[NumberType,[NumberType],(Te,[e])=>Math.sin(e.evaluate(Te))],cos:[NumberType,[NumberType],(Te,[e])=>Math.cos(e.evaluate(Te))],tan:[NumberType,[NumberType],(Te,[e])=>Math.tan(e.evaluate(Te))],asin:[NumberType,[NumberType],(Te,[e])=>Math.asin(e.evaluate(Te))],acos:[NumberType,[NumberType],(Te,[e])=>Math.acos(e.evaluate(Te))],atan:[NumberType,[NumberType],(Te,[e])=>Math.atan(e.evaluate(Te))],min:[NumberType,varargs(NumberType),(Te,e)=>Math.min(...e.map(t=>t.evaluate(Te)))],max:[NumberType,varargs(NumberType),(Te,e)=>Math.max(...e.map(t=>t.evaluate(Te)))],abs:[NumberType,[NumberType],(Te,[e])=>Math.abs(e.evaluate(Te))],round:[NumberType,[NumberType],(Te,[e])=>{const t=e.evaluate(Te);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(Te,[e])=>Math.floor(e.evaluate(Te))],ceil:[NumberType,[NumberType],(Te,[e])=>Math.ceil(e.evaluate(Te))],"filter-==":[BooleanType,[StringType,ValueType],(Te,[e,t])=>Te.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(Te,[e])=>Te.id()===e.value],"filter-type-==":[BooleanType,[StringType],(Te,[e])=>Te.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(Te,[e,t])=>{const Oe=Te.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe<ke}],"filter-id-<":[BooleanType,[ValueType],(Te,[e])=>{const t=Te.id(),Oe=e.value;return typeof t==typeof Oe&&t<Oe}],"filter->":[BooleanType,[StringType,ValueType],(Te,[e,t])=>{const Oe=Te.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe>ke}],"filter-id->":[BooleanType,[ValueType],(Te,[e])=>{const t=Te.id(),Oe=e.value;return typeof t==typeof Oe&&t>Oe}],"filter-<=":[BooleanType,[StringType,ValueType],(Te,[e,t])=>{const Oe=Te.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe<=ke}],"filter-id-<=":[BooleanType,[ValueType],(Te,[e])=>{const t=Te.id(),Oe=e.value;return typeof t==typeof Oe&&t<=Oe}],"filter->=":[BooleanType,[StringType,ValueType],(Te,[e,t])=>{const Oe=Te.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe>=ke}],"filter-id->=":[BooleanType,[ValueType],(Te,[e])=>{const t=Te.id(),Oe=e.value;return typeof t==typeof Oe&&t>=Oe}],"filter-has":[BooleanType,[ValueType],(Te,[e])=>e.value in Te.properties()],"filter-has-id":[BooleanType,[],Te=>Te.id()!==null&&Te.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(Te,[e])=>e.value.indexOf(Te.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(Te,[e])=>e.value.indexOf(Te.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(Te,[e,t])=>t.value.indexOf(Te.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(Te,[e,t])=>binarySearch(Te.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Te,[e,t])=>e.evaluate(Te)&&t.evaluate(Te)],[varargs(BooleanType),(Te,e)=>{for(const t of e)if(!t.evaluate(Te))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Te,[e,t])=>e.evaluate(Te)||t.evaluate(Te)],[varargs(BooleanType),(Te,e)=>{for(const t of e)if(t.evaluate(Te))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(Te,[e])=>!e.evaluate(Te)],"is-supported-script":[BooleanType,[StringType],(Te,[e])=>{const t=Te.globals&&Te.globals.isSupportedScript;return t?t(e.evaluate(Te)):!0}],upcase:[StringType,[StringType],(Te,[e])=>e.evaluate(Te).toUpperCase()],downcase:[StringType,[StringType],(Te,[e])=>e.evaluate(Te).toLowerCase()],concat:[StringType,varargs(ValueType),(Te,e)=>e.map(t=>toString(t.evaluate(Te))).join("")],"resolved-locale":[StringType,[CollatorType],(Te,[e])=>e.evaluate(Te).resolvedLocale()]});var definitions=expressions;function success(Te){return{result:"success",value:Te}}function error(Te){return{result:"error",value:Te}}function supportsPropertyExpression(Te){return Te["property-type"]==="data-driven"}function supportsZoomExpression(Te){return!!Te.expression&&Te.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(Te){return!!Te.expression&&Te.expression.interpolated}function isFunction(Te){return typeof Te=="object"&&Te!==null&&!Array.isArray(Te)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue,He,We){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=Oe,this._evaluator.canonical=ke||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=Ue,this._evaluator.featureTileCoord=He||null,this._evaluator.featureDistanceData=We||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,Oe,ke,Be,Ue,He,We){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=Oe||null,this._evaluator.canonical=ke||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=Ue||null,this._evaluator.featureTileCoord=He||null,this._evaluator.featureDistanceData=We||null;try{const Cn=this.expression.evaluate(this._evaluator);if(Cn==null||typeof Cn=="number"&&Cn!==Cn)return this._defaultValue;if(this._enumValues&&!(Cn in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(An=>JSON.stringify(An)).join(", ")}, but found ${JSON.stringify(Cn)} instead.`);return Cn}catch(Cn){return this._warningHistory[Cn.message]||(this._warningHistory[Cn.message]=!0,typeof console<"u"&&console.warn(Cn.message)),this._defaultValue}}}function isExpression(Te){return Array.isArray(Te)&&Te.length>0&&typeof Te[0]=="string"&&Te[0]in definitions}function createExpression(Te,e){const t=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),Oe=t.parse(Te,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return Oe?success(new StyleExpression(Oe,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue)}evaluate(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluate(e,t,Oe,ke,Be,Ue)}}class ZoomDependentExpression{constructor(e,t,Oe,ke){this.kind=e,this.zoomStops=Oe,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=ke}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue)}evaluate(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluate(e,t,Oe,ke,Be,Ue)}interpolationFactor(e,t,Oe){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,t,Oe):0}}function createPropertyExpression(Te,e){if(Te=createExpression(Te,e),Te.result==="error")return Te;const t=Te.value.expression,Oe=isFeatureConstant(t);if(!Oe&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const ke=isGlobalPropertyConstant(t,["zoom","pitch","distance-from-center"]);if(!ke&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const Be=findZoomCurve(t);if(!Be&&!ke)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Be instanceof ParsingError$1)return error([Be]);if(Be instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!Be)return success(Oe?new ZoomConstantExpression("constant",Te.value):new ZoomConstantExpression("source",Te.value));const Ue=Be instanceof Interpolate$1?Be.interpolation:void 0;return success(Oe?new ZoomDependentExpression("camera",Te.value,Be.labels,Ue):new ZoomDependentExpression("composite",Te.value,Be.labels,Ue))}function findZoomCurve(Te){let e=null;if(Te instanceof Let$1)e=findZoomCurve(Te.result);else if(Te instanceof Coalesce$1){for(const t of Te.args)if(e=findZoomCurve(t),e)break}else(Te instanceof Step$1||Te instanceof Interpolate$1)&&Te.input instanceof CompoundExpression$1&&Te.input.name==="zoom"&&(e=Te);return e instanceof ParsingError$1||Te.eachChild(t=>{const Oe=findZoomCurve(t);Oe instanceof ParsingError$1?e=Oe:!e&&Oe?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&Oe&&e!==Oe&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(Te){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return Te.type==="array"?array$1(e[Te.value]||ValueType,Te.length):e[Te.type]}function getDefaultValue(Te){return Te.type==="color"&&(isFunction(Te.default)||Array.isArray(Te.default))?new Color$1(0,0,0,0):Te.type==="color"?Color$1.parse(Te.default)||null:Te.default===void 0?null:Te.default}function unbundle(Te){return Te instanceof Number||Te instanceof String||Te instanceof Boolean?Te.valueOf():Te}function deepUnbundle(Te){if(Array.isArray(Te))return Te.map(deepUnbundle);if(Te instanceof Object&&!(Te instanceof Number||Te instanceof String||Te instanceof Boolean)){const e={};for(const t in Te)e[t]=deepUnbundle(Te[t]);return e}return unbundle(Te)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(Te){if(Te===!0||Te===!1)return!0;if(!Array.isArray(Te)||Te.length===0)return!1;switch(Te[0]){case"has":return Te.length>=2&&Te[1]!=="$id"&&Te[1]!=="$type";case"in":return Te.length>=3&&(typeof Te[1]!="string"||Array.isArray(Te[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return Te.length!==3||Array.isArray(Te[1])||Array.isArray(Te[2]);case"any":case"all":for(const e of Te.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(Te,e="fill"){if(Te==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(Te)||(Te=convertFilter(Te));const t=Te;let Oe=!0;try{Oe=extractStaticFilter(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const ke=spec[`filter_${e}`],Be=createExpression(Oe,ke);let Ue=null;if(Be.result==="error")throw new Error(Be.value.map(An=>`${An.key}: ${An.message}`).join(", "));Ue=(An,En,Sn)=>Be.value.evaluate(An,En,{},Sn);let He=null,We=null;if(Oe!==t){const An=createExpression(t,ke);if(An.result==="error")throw new Error(An.value.map(En=>`${En.key}: ${En.message}`).join(", "));He=(En,Sn,Tn,Ln,Bn)=>An.value.evaluate(En,Sn,{},Tn,void 0,void 0,Ln,Bn),We=!isFeatureConstant(An.value.expression)}Ue=Ue;const Cn=geometryNeeded(Oe);return{filter:Ue,dynamicFilter:He||void 0,needGeometry:Cn,needFeature:!!We}}function extractStaticFilter(Te){if(!isDynamicFilter(Te))return Te;let e=deepUnbundle(Te);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(Te){if(!Array.isArray(Te))return Te;const e=collapsedExpression(Te);return e===!0?e:e.map(t=>collapseDynamicBooleanExpressions(t))}function unionDynamicBranches(Te){let e=!1;const t=[];if(Te[0]==="case"){for(let Oe=1;Oe<Te.length-1;Oe+=2)e=e||isDynamicFilter(Te[Oe]),t.push(Te[Oe+1]);t.push(Te[Te.length-1])}else if(Te[0]==="match"){e=e||isDynamicFilter(Te[1]);for(let Oe=2;Oe<Te.length-1;Oe+=2)t.push(Te[Oe+1]);t.push(Te[Te.length-1])}else if(Te[0]==="step"){e=e||isDynamicFilter(Te[1]);for(let Oe=1;Oe<Te.length-1;Oe+=2)t.push(Te[Oe+1])}e&&(Te.length=0,Te.push("any",...t));for(let Oe=1;Oe<Te.length;Oe++)unionDynamicBranches(Te[Oe])}function isDynamicFilter(Te){if(!Array.isArray(Te))return!1;if(isRootExpressionDynamic(Te[0]))return!0;for(let e=1;e<Te.length;e++){const t=Te[e];if(isDynamicFilter(t))return!0}return!1}function isRootExpressionDynamic(Te){return Te==="pitch"||Te==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(Te){if(dynamicConditionExpressions.has(Te[0]))for(let e=1;e<Te.length;e++){const t=Te[e];if(isDynamicFilter(t))return!0}return Te}function compare(Te,e){return Te<e?-1:Te>e?1:0}function geometryNeeded(Te){if(!Array.isArray(Te))return!1;if(Te[0]==="within")return!0;for(let e=1;e<Te.length;e++)if(geometryNeeded(Te[e]))return!0;return!1}function convertFilter(Te){if(!Te)return!0;const e=Te[0];return Te.length<=1?e!=="any":e==="=="?convertComparisonOp(Te[1],Te[2],"=="):e==="!="?convertNegation(convertComparisonOp(Te[1],Te[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(Te[1],Te[2],e):e==="any"?convertDisjunctionOp(Te.slice(1)):e==="all"?["all"].concat(Te.slice(1).map(convertFilter)):e==="none"?["all"].concat(Te.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(Te[1],Te.slice(2)):e==="!in"?convertNegation(convertInOp(Te[1],Te.slice(2))):e==="has"?convertHasOp(Te[1]):e==="!has"?convertNegation(convertHasOp(Te[1])):e==="within"?Te:!0}function convertComparisonOp(Te,e,t){switch(Te){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,Te,e]}}function convertDisjunctionOp(Te){return["any"].concat(Te.map(convertFilter))}function convertInOp(Te,e){if(e.length===0)return!1;switch(Te){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",Te,["literal",e.sort(compare)]]:["filter-in-small",Te,["literal",e]]}}function convertHasOp(Te){switch(Te){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",Te]}}function convertNegation(Te){return["!",Te]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(Te,e){const t={};for(const Oe in Te)Oe!=="ref"&&(t[Oe]=Te[Oe]);return refProperties.forEach(Oe=>{Oe in e&&(t[Oe]=e[Oe])}),t}function derefLayers(Te){Te=Te.slice();const e=Object.create(null);for(let t=0;t<Te.length;t++)e[Te[t].id]=Te[t];for(let t=0;t<Te.length;t++)"ref"in Te[t]&&(Te[t]=deref(Te[t],e[Te[t].ref]));return Te}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(Te,e,t){var Oe=fontCache[Te];if(!Oe){Array.isArray(Te)||(Te=[Te]);for(var ke=400,Be="normal",Ue=[],He,We,Cn=0,An=Te.length;Cn<An;++Cn){var En=Te[Cn],Sn=En.split(" "),Tn=Sn[Sn.length-1].toLowerCase();Tn=="normal"||Tn=="italic"||Tn=="oblique"?(Be=We?Be:Tn,We=!0,Sn.pop(),Tn=Sn[Sn.length-1].toLowerCase()):italicRE.test(Tn)&&(Tn=Tn.replace(italicRE,""),Be=We?Be:Sn[Sn.length-1].replace(Tn,""),We=!0);for(var Ln in fontWeights){var Bn=Sn.length>1?Sn[Sn.length-2].toLowerCase():"";if(Tn==Ln||Tn==Ln.replace("-","")||Bn+"-"+Tn==Ln){ke=He?ke:fontWeights[Ln],Sn.pop(),Bn&&Ln.startsWith(Bn)&&Sn.pop();break}}!He&&typeof Tn=="number"&&(ke=Tn,He=!0);var ti=Sn.join(sp).replace("Klokantech Noto Sans","Noto Sans");ti.indexOf(sp)!==-1&&(ti='"'+ti+'"'),Ue.push(ti)}Oe=fontCache[Te]=[Be,ke,Ue]}return Oe[0]+sp+Oe[1]+sp+e+"px"+(t?"/"+t:"")+sp+Oe[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(Te){const e="mapbox://";return Te.indexOf(e)!==0?"":Te.slice(e.length)}function normalizeSpriteUrl(Te,e,t){const Oe=getMapboxPath(Te);if(!Oe)return decodeURI(new URL(Te,t).href);const ke="sprites/";if(Oe.indexOf(ke)!==0)throw new Error(`unexpected sprites url: ${Te}`);const Be=Oe.slice(ke.length);return`${mapboxBaseUrl}/styles/v1/${Be}/sprite?access_token=${e}`}function normalizeStyleUrl(Te,e){const t=getMapboxPath(Te);if(!t)return decodeURI(new URL(Te,location.href).href);const Oe="styles/";if(t.indexOf(Oe)!==0)throw new Error(`unexpected style url: ${Te}`);const ke=t.slice(Oe.length);return`${mapboxBaseUrl}/styles/v1/${ke}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(Te,e,t,Oe){const ke=new URL(Te,Oe),Be=getMapboxPath(Te);if(!Be)return e?(ke.searchParams.has(t)||ke.searchParams.set(t,e),[decodeURI(ke.href)]):[decodeURI(ke.href)];if(Be==="mapbox.satellite"){const Ue=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${Be}/{z}/{x}/{y}${Ue}.webp?access_token=${e}`]}return mapboxSubdomains.map(Ue=>`https://${Ue}.tiles.mapbox.com/v4/${Be}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(Te){return Te.id||(Te.id=styleId++),Te.id}function getStyleFunctionKey(Te,e){return getStyleId(Te)+"."+getUid(e)}function getFunctionCache(Te){let e=functionCacheByStyleId[Te.id];return e||(e={},functionCacheByStyleId[getStyleId(Te)]=e),e}function getFilterCache(Te){let e=filterCacheByStyleId[Te.id];return e||(e={},filterCacheByStyleId[getStyleId(Te)]=e),e}function deg2rad(Te){return Te*Math.PI/180}const defaultResolutions=function(){const Te=[];for(let e=78271.51696402048;Te.length<=24;e/=2)Te.push(e);return Te}();function createCanvas(Te,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(Te,e);const t=document.createElement("canvas");return t.width=Te,t.height=e,t}function getZoomForResolution(Te,e){let t=0;const Oe=e.length;for(;t<Oe;++t)if(e[t]<Te&&t+1<Oe){const Be=e[t]/e[t+1];return t+Math.log(e[t]/Te)/Math.log(Be)}return Oe-1}function getResolutionForZoom(Te,e){const t=Math.floor(Te),Oe=Math.pow(2,Te-t);return e[t]/Oe}const pendingRequests={};function fetchResource(Te,e,t={},Oe){if(e in pendingRequests)return Oe&&(Oe.request=pendingRequests[e][0]),pendingRequests[e][1];const ke=t.transformRequest&&t.transformRequest(e,Te)||e,Be=toPromise(()=>ke).then(Ue=>(Ue instanceof Request||(Ue=new Request(Ue)),Ue.headers.get("Accept")||Ue.headers.set("Accept","application/json"),Oe&&(Oe.request=Ue),fetch(Ue).then(function(He){return delete pendingRequests[e],He.ok?He.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(He){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[ke,Be],Be}function getGlStyle(Te,e){if(typeof Te=="string")if(Te.trim().startsWith("{"))try{const t=JSON.parse(Te);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return Te=normalizeStyleUrl(Te,e.accessToken),fetchResource("Style",Te,e);else return Promise.resolve(Te)}const tilejsonCache={};function getTileJson(Te,e,t={}){const Oe=[e,JSON.stringify(Te)].toString();let ke=tilejsonCache[Oe];if(!ke||t.transformRequest){let Be;t.transformRequest&&(Be=(He,We)=>{const Cn=t.transformRequest&&t.transformRequest(We,"Tiles")||We;if(He instanceof VectorTile$1)He.setLoader((An,En,Sn)=>{toPromise(()=>Cn).then(Tn=>{fetch(Tn).then(Ln=>Ln.arrayBuffer()).then(Ln=>{const ti=He.getFormat().readFeatures(Ln,{extent:An,featureProjection:Sn});He.setFeatures(ti)}).catch(Ln=>He.setState(TileState.ERROR))})});else{const An=He.getImage();toPromise(()=>Cn).then(En=>{En instanceof Request?fetch(En).then(Sn=>Sn.blob()).then(Sn=>{const Tn=URL.createObjectURL(Sn);An.addEventListener("load",()=>URL.revokeObjectURL(Tn)),An.addEventListener("error",()=>URL.revokeObjectURL(Tn)),An.src=Tn}).catch(Sn=>He.setState(TileState.ERROR)):An.src=En})}});const Ue=Te.url;if(Ue&&!Te.tiles){const He=normalizeSourceUrl(Ue,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(Ue.startsWith("mapbox://"))ke=Promise.resolve({tileJson:Object.assign({},Te,{url:void 0,tiles:He}),tileLoadFunction:Be});else{const We={};ke=fetchResource("Source",He[0],t,We).then(function(Cn){return Cn.tiles=Cn.tiles.map(function(An){return Cn.scheme==="tms"&&(An=An.replace("{y}","{-y}")),normalizeSourceUrl(An,t.accessToken,t.accessTokenParam||"access_token",We.request.url)[0]}),Promise.resolve({tileJson:Cn,tileLoadFunction:Be})})}}else Te=Object.assign({},Te,{tiles:Te.tiles.map(function(He){return Te.scheme==="tms"&&(He=He.replace("{y}","{-y}")),normalizeSourceUrl(He,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),ke=Promise.resolve({tileJson:Object.assign({},Te),tileLoadFunction:Be});tilejsonCache[Oe]=ke}return ke}function drawIconHalo(Te,e,t,Oe){const ke=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],Be=createCanvas(ke[0],ke[1]),Ue=Be.getContext("2d");Ue.drawImage(Te,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const He=Ue.getImageData(0,0,ke[0],ke[1]);Ue.globalCompositeOperation="destination-over",Ue.fillStyle=`rgba(${Oe.r*255},${Oe.g*255},${Oe.b*255},${Oe.a})`;const We=He.data;for(let Cn=0,An=He.width;Cn<An;++Cn)for(let En=0,Sn=He.height;En<Sn;++En){const Tn=(En*An+Cn)*4;We[Tn+3]>0&&Ue.arc(Cn,En,t*e.pixelRatio,0,2*Math.PI)}return Ue.fill(),Be}function smoothstep(Te,e,t){const Oe=Math.max(0,Math.min(1,(t-Te)/(e-Te)));return Oe*Oe*(3-2*Oe)}function drawSDF(Te,e,t){const Oe=createCanvas(e.width,e.height),ke=Oe.getContext("2d");ke.drawImage(Te,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Be=ke.getImageData(0,0,e.width,e.height),Ue=Be.data;for(let He=0,We=Be.width;He<We;++He)for(let Cn=0,An=Be.height;Cn<An;++Cn){const En=(Cn*We+He)*4,Sn=Ue[En+3]/255,Tn=.75,Ln=.1,Bn=smoothstep(Tn-Ln,Tn+Ln,Sn);Bn>0?(Ue[En+0]=Math.round(255*t.r*Bn),Ue[En+1]=Math.round(255*t.g*Bn),Ue[En+2]=Math.round(255*t.b*Bn),Ue[En+3]=Math.round(255*Bn)):Ue[En+3]=0}return ke.putImageData(Be,0,0),Oe}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(Te,e){if(e>=.05){let t="";const Oe=Te.split(`
`),ke=hairSpacePool.slice(0,Math.round(e/.1));for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Be>0&&(t+=`
`),t+=Oe[Be].split("").join(ke);return t}return Te}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(Te,e){return getMeasureContext().measureText(Te).width+(Te.length-1)*e}const measureCache={};function wrapText(Te,e,t,Oe){if(Te.indexOf(`
`)!==-1){const Ue=Te.split(`
`),He=[];for(let We=0,Cn=Ue.length;We<Cn;++We)He.push(wrapText(Ue[We],e,t,Oe));return He.join(`
`)}const ke=t+","+e+","+Te+","+Oe;let Be=measureCache[ke];if(!Be){const Ue=Te.split(" ");if(Ue.length>1){const He=getMeasureContext();He.font=e;const Cn=He.measureText("M").width*t;let An="";const En=[];for(let Sn=0,Tn=Ue.length;Sn<Tn;++Sn){const Ln=Ue[Sn],Bn=An+(An?" ":"")+Ln;measureText(Bn,Oe)<=Cn?An=Bn:(An&&En.push(An),An=Ln)}An&&En.push(An);for(let Sn=0,Tn=En.length;Sn<Tn&&Tn>1;++Sn){const Ln=En[Sn];if(measureText(Ln,Oe)<Cn*.35){const Bn=Sn>0?measureText(En[Sn-1],Oe):1/0,ti=Sn<Tn-1?measureText(En[Sn+1],Oe):1/0;En.splice(Sn,1),Tn-=1,Bn<ti?(En[Sn-1]+=" "+Ln,Sn-=1):En[Sn]=Ln+" "+En[Sn]}}for(let Sn=0,Tn=En.length-1;Sn<Tn;++Sn){const Ln=En[Sn],Bn=En[Sn+1];if(measureText(Ln,Oe)>Cn*.7&&measureText(Bn,Oe)<Cn*.6){const ti=Ln.split(" "),ni=ti.pop();measureText(ni,Oe)<Cn*.2&&(En[Sn]=ti.join(" "),En[Sn+1]=ni+" "+Bn),Tn-=1}}Be=En.join(`
`)}else Be=Te;Be=applyLetterSpacing(Be,Oe),measureCache[ke]=Be}return Be}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(Te){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];try{const Be=ke.rules||ke.cssRules;if(Be)for(let Ue=0,He=Be.length;Ue<He;++Ue){const We=Be[Ue];if(We.type==5){const Cn=We.cssText.match(fontFamilyRegEx);loadedFontFamilies[Cn[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return Te in loadedFontFamilies}const processedFontFamilies={};function getFonts(Te,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=Te.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const Oe=[];for(let ke=0,Be=Te.length;ke<Be;++ke){Te[ke]=Te[ke].replace("Arial Unicode MS","Arial");const Ue=Te[ke],He=mb2css(Ue,1);registerFont(He);const We=He.split(" ");Oe.push([We.slice(3).join(" ").replace(/"/g,""),We[1],We[0]])}for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],He=Ue[0];if(!hasFontFamily(He)&&checkedFonts.get(`${Ue[2]}
${Ue[1]} 
${He}`)!==100){const We=e.replace("{font-family}",He.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",He.replace(/ /g,"+")).replace("{fontweight}",Ue[1]).replace("{-fontstyle}",Ue[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",Ue[2]);if(!document.querySelector('link[href="'+We+'"]')){const Cn=document.createElement("link");Cn.href=We,Cn.rel="stylesheet",document.head.appendChild(Cn)}}}return processedFontFamilies[t]=Te,Te}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(Te,e){const t=createPropertyExpression(Te,e);if(t.result==="error")throw new Error(t.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));return t.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(Te,e,t,Oe,ke,Be,Ue){const He=Te.id;Be||(Be={},console.warn("No functionCache provided to getValue()")),Be[He]||(Be[He]={});const We=Be[He];if(!We[t]){let Cn=(Te[e]||emptyObj$1)[t];const An=spec[`${e}_${Te.type}`][t];Cn===void 0&&(Cn=An.default);let En=isExpression(Cn);if(!En&&isFunction(Cn)&&(Cn=convertFunction(Cn,An),En=!0),En){const Sn=expressionData(Cn,An);We[t]=Sn.evaluate.bind(Sn)}else An.type=="color"&&(Cn=Color$1.parse(Cn)),We[t]=function(){return Cn}}return zoomObj.zoom=Oe,We[t](zoomObj,ke,Ue)}function getDeclutterMode(Te,e,t,Oe,ke){return getValue(Te,"layout",`${Oe}-allow-overlap`,e,t,ke)?getValue(Te,"layout",`${Oe}-ignore-placement`,e,t,ke)?"none":"obstacle":"declutter"}function evaluateFilter(Te,e,t,Oe,ke){return ke||console.warn("No filterCache provided to evaluateFilter()"),Te in ke||(ke[Te]=createFilter(e).filter),zoomObj.zoom=Oe,ke[Te](zoomObj,t)}function colorWithOpacity(Te,e){if(Te){if(Te.a===0||e===0)return;const t=Te.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(Te.r*255/t)+","+Math.round(Te.g*255/t)+","+Math.round(Te.b*255/t)+","+t*e+")"}return Te}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(Te,e){return Te.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(Te,e,t,Oe=defaultResolutions,ke=void 0,Be=void 0,Ue=void 0,He=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,Te)]=Array.from(arguments);let We,Cn,An;if(Be){if(typeof Image<"u"){const pi=new Image;let fi;toPromise(()=>Be).then(Mi=>{Mi instanceof Request?fetch(Mi).then(Oi=>Oi.blob()).then(Oi=>{fi=URL.createObjectURL(Oi),pi.src=fi}).catch(()=>{}):(pi.crossOrigin="anonymous",pi.src=Mi,fi&&URL.revokeObjectURL(fi))}),pi.onload=function(){We=pi,Cn=[pi.width,pi.height],Te.changed(),pi.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const pi=self;pi.postMessage({action:"loadImage",src:Be}),pi.addEventListener("message",function(Mi){Mi.data.action==="imageLoaded"&&Mi.data.src===Be&&(We=Mi.data.image,Cn=[We.width,We.height])})}}const En=derefLayers(e.layers),Sn={},Tn=[],Ln={},Bn={},ti=getFunctionCache(e),ni=getFilterCache(e);let ii;for(let pi=0,fi=En.length;pi<fi;++pi){const Mi=En[pi],Oi=Mi.id;if(typeof t=="string"&&Mi.source==t||Array.isArray(t)&&t.indexOf(Oi)!==-1){const ui=Mi["source-layer"];if(ii){if(Mi.source!==ii)throw new Error(`Layer "${Oi}" does not use source "${ii}`)}else{ii=Mi.source;const Ri=e.sources[ii];if(!Ri)throw new Error(`Source "${ii}" is not defined`);const Pi=Ri.type;if(Pi!=="vector"&&Pi!=="geojson")throw new Error(`Source "${ii}" is not of type "vector" or "geojson", but "${Pi}"`)}let li=Sn[ui];li||(li=[],Sn[ui]=li),li.push({layer:Mi,index:pi}),Tn.push(Oi)}}const si=new Stroke,oi=new Fill,ci=[],vi=function(pi,fi,Mi){const Oi=pi.getProperties(),ui=Sn[Oi.layer];if(!ui)return;let li=Oe.indexOf(fi);li==-1&&(li=getZoomForResolution(fi,Oe));const Ri=types[pi.getGeometry().getType()],Pi={id:pi.getId(),properties:Oi,type:Ri},Fi=Te.get("mapbox-featurestate")[pi.getId()];let Hi=-1;for(let nr=0,ar=ui.length;nr<ar;++nr){const cr=ui[nr],sr=cr.layer,br=sr.id;if(Mi!==void 0&&Mi!==br)continue;const Ni=sr.layout||emptyObj$1,or=sr.paint||emptyObj$1;if(Ni.visibility==="none"||"minzoom"in sr&&li<sr.minzoom||"maxzoom"in sr&&li>=sr.maxzoom)continue;const er=sr.filter;if(!er||evaluateFilter(br,er,Pi,li,ni)){let fr,mr,hr,vr,_r,Ar;const Vr=cr.index;if(Ri==3&&(sr.type=="fill"||sr.type=="fill-extrusion"))if(mr=getValue(sr,"paint",sr.type+"-opacity",li,Pi,ti,Fi),sr.type+"-pattern"in or){const Er=getValue(sr,"paint",sr.type+"-pattern",li,Pi,ti,Fi);if(Er){const Sr=typeof Er=="string"?fromTemplate(Er,Oi):Er.toString();if(We&&ke&&ke[Sr]){++Hi,Ar=ci[Hi],(!Ar||!Ar.getFill()||Ar.getStroke()||Ar.getText())&&(Ar=new Style$1({fill:new Fill}),ci[Hi]=Ar),hr=Ar.getFill(),Ar.setZIndex(Vr);const Gr=Sr+"."+mr;let zr=Bn[Gr];if(!zr){const $r=ke[Sr],Hr=createCanvas($r.width,$r.height),as=Hr.getContext("2d");as.globalAlpha=mr,as.drawImage(We,$r.x,$r.y,$r.width,$r.height,0,0,$r.width,$r.height),zr=as.createPattern(Hr,"repeat"),Bn[Gr]=zr}hr.setColor(zr)}}}else fr=colorWithOpacity(getValue(sr,"paint",sr.type+"-color",li,Pi,ti,Fi),mr),sr.type+"-outline-color"in or&&(_r=colorWithOpacity(getValue(sr,"paint",sr.type+"-outline-color",li,Pi,ti,Fi),mr)),_r||(_r=fr),(fr||_r)&&(++Hi,Ar=ci[Hi],(!Ar||fr&&!Ar.getFill()||!fr&&Ar.getFill()||_r&&!Ar.getStroke()||!_r&&Ar.getStroke()||Ar.getText())&&(Ar=new Style$1({fill:fr?new Fill:void 0,stroke:_r?new Stroke:void 0}),ci[Hi]=Ar),fr&&(hr=Ar.getFill(),hr.setColor(fr)),_r&&(vr=Ar.getStroke(),vr.setColor(_r),vr.setWidth(.5)),Ar.setZIndex(Vr));if(Ri!=1&&sr.type=="line"){"line-pattern"in or?fr=void 0:fr=colorWithOpacity(getValue(sr,"paint","line-color",li,Pi,ti,Fi),getValue(sr,"paint","line-opacity",li,Pi,ti,Fi));const Er=getValue(sr,"paint","line-width",li,Pi,ti,Fi);fr&&Er>0&&(++Hi,Ar=ci[Hi],(!Ar||!Ar.getStroke()||Ar.getFill()||Ar.getText())&&(Ar=new Style$1({stroke:new Stroke}),ci[Hi]=Ar),vr=Ar.getStroke(),vr.setLineCap(getValue(sr,"layout","line-cap",li,Pi,ti,Fi)),vr.setLineJoin(getValue(sr,"layout","line-join",li,Pi,ti,Fi)),vr.setMiterLimit(getValue(sr,"layout","line-miter-limit",li,Pi,ti,Fi)),vr.setColor(fr),vr.setWidth(Er),vr.setLineDash(or["line-dasharray"]?getValue(sr,"paint","line-dasharray",li,Pi,ti,Fi).map(function(Sr){return Sr*Er}):null),Ar.setZIndex(Vr))}let Wr=!1,tr=null,pr=0,ur,Ki,Nr;if((Ri==1||Ri==2)&&"icon-image"in Ni){const Er=getValue(sr,"layout","icon-image",li,Pi,ti,Fi);if(Er){ur=typeof Er=="string"?fromTemplate(Er,Oi):Er.toString();let Sr;const Gr=He?He(Te,ur):void 0;if(We&&ke&&ke[ur]||Gr){const zr=getValue(sr,"layout","icon-rotation-alignment",li,Pi,ti,Fi);if(Ri==2){const $r=pi.getGeometry();if($r.getFlatMidpoint||$r.getFlatMidpoints){const Hr=$r.getExtent();if(Math.sqrt(Math.max(Math.pow((Hr[2]-Hr[0])/fi,2),Math.pow((Hr[3]-Hr[1])/fi,2)))>150){const Kr=$r.getType()==="MultiLineString"?$r.getFlatMidpoints():$r.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),Sr=renderFeature,renderFeatureCoordinates[0]=Kr[0],renderFeatureCoordinates[1]=Kr[1],getValue(sr,"layout","symbol-placement",li,Pi,ti,Fi)==="line"&&zr==="map"){const ms=$r.getStride(),Rs=$r.getFlatCoordinates();for(let Ps=0,ps=Rs.length-ms;Ps<ps;Ps+=ms){const Is=Rs[Ps],As=Rs[Ps+1],Fs=Rs[Ps+ms],xs=Rs[Ps+ms+1],Zs=Math.min(Is,Fs),_o=Math.max(Is,Fs),Ls=Kr[0],Es=Kr[1],Ms=(xs-As)*(Ls-Is)-(Fs-Is)*(Es-As);if(Math.abs(Ms)<.001&&Ls<=_o&&Ls>=Zs){pr=Math.atan2(As-xs,Fs-Is);break}}}}}}if(Ri!==2||Sr){const $r=getValue(sr,"layout","icon-size",li,Pi,ti,Fi),Hr=or["icon-color"]!==void 0?getValue(sr,"paint","icon-color",li,Pi,ti,Fi):null;if(!Hr||Hr.a!==0){const as=getValue(sr,"paint","icon-halo-color",li,Pi,ti,Fi),Kr=getValue(sr,"paint","icon-halo-width",li,Pi,ti,Fi);let Ss=`${ur}.${$r}.${Kr}.${as}`;if(Hr!==null&&(Ss+=`.${Hr}`),Ki=Ln[Ss],!Ki){const ms=getDeclutterMode(sr,li,Pi,"icon",ti);let Rs;"icon-offset"in Ni&&(Rs=getValue(sr,"layout","icon-offset",li,Pi,ti,Fi).slice(0),Rs[0]*=$r,Rs[1]*=-$r);let Ps=Hr?[Hr.r*255,Hr.g*255,Hr.b*255,Hr.a]:void 0;if(Gr){const ps={color:Ps,rotateWithView:zr==="map",displacement:Rs,declutterMode:ms,scale:$r};typeof Gr=="string"?ps.src=Gr:(ps.img=Gr,ps.imgSize=[Gr.width,Gr.height]),Ki=new Icon(ps)}else{const ps=ke[ur];let Is,As,Fs;Kr?ps.sdf?(Is=drawIconHalo(drawSDF(We,ps,Hr||[0,0,0,1]),{x:0,y:0,width:ps.width,height:ps.height,pixelRatio:ps.pixelRatio},Kr,as),Ps=void 0):Is=drawIconHalo(We,ps,Kr,as):(ps.sdf?(An||(An=drawSDF(We,{x:0,y:0,width:Cn[0],height:Cn[1]},{r:1,g:1,b:1})),Is=An):Is=We,As=[ps.width,ps.height],Fs=[ps.x,ps.y]),Ki=new Icon({color:Ps,img:Is,imgSize:Cn,size:As,offset:Fs,rotateWithView:zr==="map",scale:$r/ps.pixelRatio,displacement:Rs,declutterMode:ms})}Ln[Ss]=Ki}}Ki&&(++Hi,Ar=ci[Hi],(!Ar||!Ar.getImage()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[Hi]=Ar),Ar.setGeometry(Sr),Ki.setRotation(pr+deg2rad(getValue(sr,"layout","icon-rotate",li,Pi,ti,Fi))),Ki.setOpacity(getValue(sr,"paint","icon-opacity",li,Pi,ti,Fi)),Ki.setAnchor(anchor[getValue(sr,"layout","icon-anchor",li,Pi,ti,Fi)]),Ar.setImage(Ki),tr=Ar.getText(),Ar.setText(void 0),Ar.setZIndex(Vr),Wr=!0,Nr=!1)}else Nr=!0}}}if(Ri==1&&sr.type==="circle"){++Hi,Ar=ci[Hi],(!Ar||!Ar.getImage()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[Hi]=Ar);const Er="circle-radius"in or?getValue(sr,"paint","circle-radius",li,Pi,ti,Fi):5,Sr=colorWithOpacity(getValue(sr,"paint","circle-stroke-color",li,Pi,ti,Fi),getValue(sr,"paint","circle-stroke-opacity",li,Pi,ti,Fi)),Gr=getValue(sr,"paint","circle-translate",li,Pi,ti,Fi),zr=colorWithOpacity(getValue(sr,"paint","circle-color",li,Pi,ti,Fi),getValue(sr,"paint","circle-opacity",li,Pi,ti,Fi)),$r=getValue(sr,"paint","circle-stroke-width",li,Pi,ti,Fi),Hr=Er+"."+Sr+"."+zr+"."+$r+"."+Gr[0]+"."+Gr[1];Ki=Ln[Hr],Ki||(Ki=new CircleStyle({radius:Er,displacement:[Gr[0],-Gr[1]],stroke:Sr&&$r>0?new Stroke({width:$r,color:Sr}):void 0,fill:zr?new Fill({color:zr}):void 0,declutterMode:"none"}),Ln[Hr]=Ki),Ar.setImage(Ki),tr=Ar.getText(),Ar.setText(void 0),Ar.setGeometry(void 0),Ar.setZIndex(Vr),Wr=!0}let Or,Ir,Mr,Tr,wr,Cr;if("text-field"in Ni){Tr=Math.round(getValue(sr,"layout","text-size",li,Pi,ti,Fi));const Er=getValue(sr,"layout","text-font",li,Pi,ti,Fi);Mr=getValue(sr,"layout","text-line-height",li,Pi,ti,Fi),Ir=mb2css(Ue?Ue(Er,e.metadata?e.metadata["ol:webfonts"]:void 0):Er,Tr,Mr),Ir.includes("sans-serif")||(Ir+=",sans-serif"),wr=getValue(sr,"layout","text-letter-spacing",li,Pi,ti,Fi),Cr=getValue(sr,"layout","text-max-width",li,Pi,ti,Fi);const Sr=getValue(sr,"layout","text-field",li,Pi,ti,Fi);typeof Sr=="object"&&Sr.sections?Sr.sections.length===1?Or=Sr.toString():Or=Sr.sections.reduce((Gr,zr,$r)=>{const Hr=zr.fontStack?zr.fontStack.split(","):Er,as=mb2css(Ue?Ue(Hr):Hr,Tr*(zr.scale||1),Mr);let Kr=zr.text;if(Kr===`
`)return Gr.push(`
`,""),Gr;if(Ri==2)return Gr.push(applyLetterSpacing(Kr,wr),as),Gr;Kr=wrapText(Kr,as,Cr,wr).split(`
`);for(let Ss=0,ms=Kr.length;Ss<ms;++Ss)Ss>0&&Gr.push(`
`,""),Gr.push(Kr[Ss],as);return Gr},[]):Or=fromTemplate(Sr,Oi).trim(),mr=getValue(sr,"paint","text-opacity",li,Pi,ti,Fi)}if(Or&&mr&&!Nr){Wr||(++Hi,Ar=ci[Hi],(!Ar||!Ar.getText()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[Hi]=Ar),Ar.setImage(void 0),Ar.setGeometry(void 0));const Er=getDeclutterMode(sr,li,Pi,"text",ti);Ar.getText()||Ar.setText(tr),tr=Ar.getText(),(!tr||"getDeclutterMode"in tr&&tr.getDeclutterMode()!==Er)&&(tr=new Text({padding:[2,2,2,2],declutterMode:Er}),Ar.setText(tr));const Sr=getValue(sr,"layout","text-transform",li,Pi,ti,Fi);Sr=="uppercase"?Or=Array.isArray(Or)?Or.map((xs,Zs)=>Zs%2?xs:xs.toUpperCase()):Or.toUpperCase():Sr=="lowercase"&&(Or=Array.isArray(Or)?Or.map((xs,Zs)=>Zs%2?xs:xs.toLowerCase()):Or.toLowerCase());const Gr=Array.isArray(Or)?Or:Ri==2?applyLetterSpacing(Or,wr):wrapText(Or,Ir,Cr,wr);if(tr.setText(Gr),tr.setFont(Ir),tr.setRotation(deg2rad(getValue(sr,"layout","text-rotate",li,Pi,ti,Fi))),typeof tr.setKeepUpright=="function"){const xs=getValue(sr,"layout","text-keep-upright",li,Pi,ti,Fi);tr.setKeepUpright(xs)}const zr=getValue(sr,"layout","text-anchor",li,Pi,ti,Fi),$r=Wr||Ri==1?"point":getValue(sr,"layout","symbol-placement",li,Pi,ti,Fi);let Hr;if($r==="line-center"?(tr.setPlacement("line"),Hr="center"):tr.setPlacement($r),$r==="line"&&typeof tr.setRepeat=="function"){const xs=getValue(sr,"layout","symbol-spacing",li,Pi,ti,Fi);tr.setRepeat(xs*2)}tr.setOverflow($r==="point");let as=getValue(sr,"paint","text-halo-width",li,Pi,ti,Fi);const Kr=getValue(sr,"layout","text-offset",li,Pi,ti,Fi),Ss=getValue(sr,"paint","text-translate",li,Pi,ti,Fi);let ms=0,Rs=0;if($r=="point"){Hr="center",zr.indexOf("left")!==-1?(Hr="left",Rs=as):zr.indexOf("right")!==-1&&(Hr="right",Rs=-as);const xs=getValue(sr,"layout","text-rotation-alignment",li,Pi,ti,Fi);tr.setRotateWithView(xs=="map")}else tr.setMaxAngle(deg2rad(getValue(sr,"layout","text-max-angle",li,Pi,ti,Fi))*Or.length/Gr.length),tr.setRotateWithView(!1);tr.setTextAlign(Hr);let Ps="middle";zr.indexOf("bottom")==0?(Ps="bottom",ms=-as-.5*(Mr-1)*Tr):zr.indexOf("top")==0&&(Ps="top",ms=as+.5*(Mr-1)*Tr),tr.setTextBaseline(Ps);const ps=getValue(sr,"layout","text-justify",li,Pi,ti,Fi);tr.setJustify(ps==="auto"?void 0:ps),tr.setOffsetX(Kr[0]*Tr+Rs+Ss[0]),tr.setOffsetY(Kr[1]*Tr+ms+Ss[1]),oi.setColor(colorWithOpacity(getValue(sr,"paint","text-color",li,Pi,ti,Fi),mr)),tr.setFill(oi);const Is=colorWithOpacity(getValue(sr,"paint","text-halo-color",li,Pi,ti,Fi),mr);if(Is&&as>0){si.setColor(Is),as*=2;const xs=.5*Tr;si.setWidth(as<=xs?as:xs),tr.setStroke(si)}else tr.setStroke(void 0);const As=getValue(sr,"layout","text-padding",li,Pi,ti,Fi),Fs=tr.getPadding();As!==Fs[0]&&(Fs[0]=As,Fs[1]=As,Fs[2]=As,Fs[3]=As),Ar.setZIndex(Vr)}}}if(Hi>-1)return ci.length=Hi+1,ci};return Te.setStyle(vi),Te.set("mapbox-source",ii),Te.set("mapbox-layers",Tn),Te.set("mapbox-featurestate",Te.get("mapbox-featurestate")||{}),vi}function getTileResolutions(Te,e=512){return Te.getExtent()?createXYZ({extent:Te.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(Te,e){return e.accessToken||(e=Object.assign({},e),new URL(Te).searchParams.forEach((Oe,ke)=>{e.accessToken=Oe,e.accessTokenParam=ke})),e}function applyStyle(Te,e,t="",Oe={},ke=void 0){let Be,Ue,He,We,Cn=!0;return typeof t!="string"&&!Array.isArray(t)?(He=t,We=He.source||He.layers,Oe=He):We=t,typeof Oe=="string"?(Be=Oe,He={}):(Be=Oe.styleUrl,He=Oe),He.updateSource===!1&&(Cn=!1),ke||(ke=He.resolutions),!Be&&typeof e=="string"&&!e.trim().startsWith("{")&&(Be=e),Be&&(Be=Be.startsWith("data:")?location.href:normalizeStyleUrl(Be,He.accessToken),He=completeOptions(Be,He)),new Promise(function(An,En){getGlStyle(e,He).then(function(Sn){if(Sn.version!=8)return En(new Error("glStyle version 8 required."));if(!(Te instanceof VectorLayer||Te instanceof VectorTileLayer))return En(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Tn=Te instanceof VectorTileLayer?"vector":"geojson";if(We?Array.isArray(We)?Ue=Sn.layers.find(function(oi){return oi.id===We[0]}).source:Ue=We:(Ue=Object.keys(Sn.sources).find(function(oi){return Sn.sources[oi].type===Tn}),We=Ue),!Ue)return En(new Error(`No ${Tn} source found in the glStyle.`));function Ln(){if(!Cn)return Promise.resolve();if(Te instanceof VectorTileLayer)return setupVectorSource(Sn.sources[Ue],Be,He).then(function(pi){const fi=Te.getSource();fi?pi!==fi&&(fi.setTileUrlFunction(pi.getTileUrlFunction()),typeof fi.setUrls=="function"&&typeof pi.getUrls=="function"&&fi.setUrls(pi.getUrls()),fi.format_||(fi.format_=pi.format_),fi.getAttributions()||fi.setAttributions(pi.getAttributions()),fi.getTileLoadFunction()===defaultLoadFunction&&fi.setTileLoadFunction(pi.getTileLoadFunction()),equivalent(fi.getProjection(),pi.getProjection())&&(fi.tileGrid=pi.getTileGrid())):Te.setSource(pi);const Mi=Te.getSource().getTileGrid();!isFinite(Te.getMaxResolution())&&!isFinite(Te.getMinZoom())&&Mi.getMinZoom()>0&&Te.setMaxResolution(getResolutionForZoom(Math.max(0,Mi.getMinZoom()-1e-12),Mi.getResolutions()))});const oi=Sn.sources[Ue];let ci=Te.getSource();(!ci||ci.get("mapbox-source")!==oi)&&(ci=setupGeoJSONSource(oi,Be,He));const vi=Te.getSource();return vi?ci!==vi&&(vi.getAttributions()||vi.setAttributions(ci.getAttributions()),vi.format_||(vi.format_=ci.getFormat()),vi.url_=ci.getUrl()):Te.setSource(ci),Promise.resolve()}let Bn,ti,ni,ii;function si(){if(!ii&&(!Sn.sprite||ti)){if(He.projection&&!ke){const ci=get$3(He.projection).getUnits();ci!=="m"&&(ke=defaultResolutions.map(vi=>vi/METERS_PER_UNIT$1[ci]))}ii=stylefunction(Te,Sn,We,ke,ti,ni,(oi,ci=He.webfonts)=>getFonts(oi,ci),He.getImage),Te.getStyle()?Ln().then(An).catch(En):En(new Error(`Nothing to show for source [${Ue}]`))}else ii?(Te.setStyle(ii),Ln().then(An).catch(En)):En(new Error("Something went wrong trying to apply style."))}if(Sn.sprite){const oi=new URL(normalizeSpriteUrl(Sn.sprite,He.accessToken,Be||location.href));Bn=window.devicePixelRatio>=1.5?.5:1;const ci=Bn==.5?"@2x":"";let vi=oi.origin+oi.pathname+ci+".json"+oi.search;new Promise(function(pi,fi){fetchResource("Sprite",vi,He).then(pi).catch(function(Mi){vi=oi.origin+oi.pathname+".json"+oi.search,fetchResource("Sprite",vi,He).then(pi).catch(fi)})}).then(function(pi){if(pi===void 0&&En(new Error("No sprites found.")),ti=pi,ni=oi.origin+oi.pathname+ci+".png"+oi.search,He.transformRequest){const fi=He.transformRequest(ni,"SpriteImage")||ni;(fi instanceof Request||fi instanceof Promise)&&(ni=fi)}si()}).catch(function(pi){En(new Error(`Sprites cannot be loaded: ${vi}: ${pi.message}`))})}else si()}).catch(En)})}function extentFromTileJSON(Te,e){const t=Te.bounds;if(t){const Oe=fromLonLat([t[0],t[1]],e),ke=fromLonLat([t[2],t[3]],e);return[Oe[0],Oe[1],ke[0],ke[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(Te,e,t){const Oe=new TileJSON({tileJSON:e,tileSize:Te.tileSize||e.tileSize||512}),ke=Oe.getTileJSON(),Be=Oe.getTileGrid(),Ue=get$3(t.projection||"EPSG:3857"),He=extentFromTileJSON(ke,Ue),We=Ue.getExtent(),Cn=ke.minzoom||0,An=ke.maxzoom||22,En={attributions:Oe.getAttributions(),projection:Ue,tileGrid:new TileGrid({origin:We?getTopLeft(We):Be.getOrigin(0),extent:He||Be.getExtent(),minZoom:Cn,resolutions:getTileResolutions(Ue,e.tileSize).slice(0,An+1),tileSize:Be.getTileSize(0)})};return Array.isArray(ke.tiles)?En.urls=ke.tiles:En.url=ke.tiles,En}function setupVectorSource(Te,e,t){return new Promise(function(Oe,ke){getTileJson(Te,e,t).then(function({tileJson:Be,tileLoadFunction:Ue}){const He=sourceOptionsFromTileJSON(Te,Be,t);He.tileLoadFunction=Ue,He.format=new MVT,Oe(new VectorTile(He))}).catch(ke)})}function getBboxTemplate(Te){return`{bbox-${(Te?Te.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(Te,e,t){const Oe=t.projection?new GeoJSON$1({dataProjection:t.projection}):new GeoJSON$1,ke=Te.data,Be={};if(typeof ke=="string"){const[He]=normalizeSourceUrl(ke,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(He)){const Cn=(En,Sn,Tn)=>{const Ln=getBboxTemplate(Tn);return He.replace(Ln,`${En.join(",")}`)},An=new VectorSource({attributions:Te.attribution,format:Oe,loader:(En,Sn,Tn,Ln,Bn)=>{const ti=typeof Cn=="function"?Cn(En,Sn,Tn):Cn;fetchResource("GeoJSON",ti,t).then(ni=>{const ii=An.getFormat().readFeatures(ni,{featureProjection:Tn});An.addFeatures(ii),Ln(ii)}).catch(ni=>{An.removeLoadedExtent(En),Bn()})},strategy:bbox});return An.set("mapbox-source",Te),An}const We=new VectorSource({attributions:Te.attribution,format:Oe,url:He,loader:(Cn,An,En,Sn,Tn)=>{fetchResource("GeoJSON",He,t).then(Ln=>{const Bn=We.getFormat().readFeatures(Ln,{featureProjection:En});We.addFeatures(Bn),Sn(Bn)}).catch(Ln=>{We.removeLoadedExtent(Cn),Tn()})}});return We}Be.features=Oe.readFeatures(ke,{featureProjection:"EPSG:3857"});const Ue=new VectorSource(Object.assign({attributions:Te.attribution,format:Oe},Be));return Ue.set("mapbox-source",Te),Ue}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Oe=e.ssl===!1?"http://":"https://",ke=e.configuration;if(!ke){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=e.layer+"$GEOPORTAIL:GPP:TMS";if(ke=Config.configuration.getLayerConf(Be),!ke)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var Ue=null,He="",We=e.style,Cn=0;Cn<ke.styles.length;Cn++){var An=ke.styles[Cn];if(We&&An.name===We){Ue=An.url,He=An.title;break}else if(!We&&An.current){We=An.name,Ue=An.url,He=An.title;break}}if(!Ue)throw new Error("ERROR : Style URL not found !?");Ue.replace(/(http|https):\/\//,Oe);var En=new VectorTile({state:"loading",format:new MVT});En._originators=ke.originators,En._legends=ke.legends,En._metadata=ke.metadata,En._description=ke.description,En._title=ke.title+" ("+He+")",En._quicklookUrl=ke.quicklookUrl;var Sn={source:En};return Helper.mergeParams(Sn,t),e.olParams&&!ke.originators&&(En._originators=e.olParams.attributions),super(Sn),this.name=e.layer,this.service="TMS",this.protocol=Oe,this.sourceId=e.source,this.styleUrl=Ue,this.config=ke,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(Oe){e.onStyleMapBoxLoad(Oe)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var Oe=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var ke=new TileJSON({url:t.url}),Be=this,Ue=ke.on("change",function(){if(ke.getState()==="ready"){var We=ke.getTileJSON();if(!We)return;Be.set("mapbox-extensions",We);for(var Cn=Array.isArray(We.tiles)?We.tiles:[We.tiles],An=0;An<t.tiles.length;An++)Cn[An].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(Cn),unByKey(Ue)}})}if(t.tiles){for(var He=0;He<t.tiles.length;He++)t.tiles[He].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{Oe.setState("ready"),this.set("mapbox-styles",e)}).catch(We=>{this.onStyleMapBoxError(We)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(Te,e){var t=[...exceptions,e],Oe=[];if(Te&&Te.includes("left")){var ke=document.getElementById("position-container-bottom-left"),Be=document.getElementById("position-container-top-left");Oe=[...ke.children,...Be.children]}if(Te&&Te.includes("right")){var Ue=document.getElementById("position-container-bottom-right"),He=document.getElementById("position-container-top-right");Oe=[...Ue.children,...He.children]}return Oe.filter(We=>{var Cn=We.id.match(/(\w+)-[0-9]+/)[1],An=t.includes(Cn),En=We.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(En==="true"&&!An)return We})}var PanelManager=function(Te,e){var t=getSameSideOpenedPanel(Te,e);t.length>0&&t[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var Te=getComputedStyle(document.documentElement),e=Te.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Qa,$f,md,sf;class PositionFactory{constructor(e){hd(this,Qa);return this.caller=e,this.container=null,pc(this,Qa,md).call(this,"top-left"),pc(this,Qa,md).call(this,"top-right"),pc(this,Qa,md).call(this,"bottom-left"),pc(this,Qa,md).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(pc(this,Qa,sf).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&pc(this,Qa,sf).call(this,e,!0)}}Qa=new WeakSet,$f=function(e){var t=this.container.children["position-container-"+e];return!!t},md=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!pc(this,Qa,$f).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},sf=function(e,t){var Oe=this;const ke=An=>{var En=Oe.container.children["position-container-"+An];return En.children.length},Be=An=>{var En=Oe.container.children["position-container-"+An],Sn=En.offsetWidth;return Sn},Ue=An=>{var En=Oe.container.children["position-container-"+An],Sn=En.offsetHeight;if(t){An.includes("top")&&(Sn=0);for(let Tn=0;Tn<En.children.length;Tn++){if(En.children[Tn].id===Oe.caller.element.id){Sn=An.includes("bottom")?Sn-Oe.caller.element.offsetHeight:Sn*-1;break}Sn-=En.children[Tn].offsetHeight}}return Sn},He=An=>{An.style.top="unset",An.style.bottom="unset",An.style.left="unset",An.style.right="unset"};He(this.caller.element),this.caller.element.style.position="unset";var We=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(We.length!==0){var Cn=0;We.forEach(An=>{if(An.nodeName.toLowerCase()==="dialog"){switch(He(An),e.toLowerCase()){case"top-left":checkDsfr()?An.style.top="0px":An.style.top=ke(e)?Ue(e)+"px":"0px",An.style.left=Be(e)+Cn+"px";break;case"bottom-left":checkDsfr()?An.style.top="0px":An.style.bottom=ke(e)?Ue(e)+"px":"0px",An.style.left=Be(e)+Cn+"px";break;case"top-right":checkDsfr()?An.style.top="0px":An.style.top=ke(e)?Ue(e)+"px":"0px",An.style.right=Be(e)+Cn+"px";break;case"bottom-right":checkDsfr()?An.style.top="0px":An.style.bottom=ke(e)?Ue(e)+"px":"0px",An.style.right=Be(e)+Cn+"px";break}Cn+=An.offsetWidth}})}};var SelectorID={generate:function(){var Te=Math.floor(Date.now());return function(){return Te++}}(),name:function(Te){var e=null,t=Te.lastIndexOf("-");return t===-1?e=Te:e=Te.substring(0,t),e},index:function(Te){var e=null,t=this.name(Te),Oe=t.lastIndexOf("_");return Oe!==-1&&(e=t.substring(Oe+1)),e},uuid:function(Te){var e=null,t=Te.lastIndexOf("-");return t!==-1&&(e=parseInt(Te.substring(t+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(Te,e){var t=Object.keys(Te);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Te);e&&(Oe=Oe.filter(function(ke){return Object.getOwnPropertyDescriptor(Te,ke).enumerable})),t.push.apply(t,Oe)}return t}function _objectSpread2(Te){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(Oe){_defineProperty(Te,Oe,t[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(Oe){Object.defineProperty(Te,Oe,Object.getOwnPropertyDescriptor(t,Oe))})}return Te}function _typeof$1(Te){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(Te)}function _defineProperty(Te,e,t){return e in Te?Object.defineProperty(Te,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Te[e]=t,Te}function _extends(){return _extends=Object.assign||function(Te){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Oe in t)Object.prototype.hasOwnProperty.call(t,Oe)&&(Te[Oe]=t[Oe])}return Te},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(Te,e){if(Te==null)return{};var t={},Oe=Object.keys(Te),ke,Be;for(Be=0;Be<Oe.length;Be++)ke=Oe[Be],!(e.indexOf(ke)>=0)&&(t[ke]=Te[ke]);return t}function _objectWithoutProperties(Te,e){if(Te==null)return{};var t=_objectWithoutPropertiesLoose(Te,e),Oe,ke;if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Te);for(ke=0;ke<Be.length;ke++)Oe=Be[ke],!(e.indexOf(Oe)>=0)&&Object.prototype.propertyIsEnumerable.call(Te,Oe)&&(t[Oe]=Te[Oe])}return t}var version="1.15.3";function userAgent(Te){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(Te)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(Te,e,t){Te.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(Te,e,t){Te.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(Te,e){if(e){if(e[0]===">"&&(e=e.substring(1)),Te)try{if(Te.matches)return Te.matches(e);if(Te.msMatchesSelector)return Te.msMatchesSelector(e);if(Te.webkitMatchesSelector)return Te.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(Te){return Te.host&&Te!==document&&Te.host.nodeType?Te.host:Te.parentNode}function closest(Te,e,t,Oe){if(Te){t=t||document;do{if(e!=null&&(e[0]===">"?Te.parentNode===t&&matches(Te,e):matches(Te,e))||Oe&&Te===t)return Te;if(Te===t)break}while(Te=getParentOrHost(Te))}return null}var R_SPACE=/\s+/g;function toggleClass(Te,e,t){if(Te&&e)if(Te.classList)Te.classList[t?"add":"remove"](e);else{var Oe=(" "+Te.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");Te.className=(Oe+(t?" "+e:"")).replace(R_SPACE," ")}}function css(Te,e,t){var Oe=Te&&Te.style;if(Oe){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(Te,""):Te.currentStyle&&(t=Te.currentStyle),e===void 0?t:t[e];!(e in Oe)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),Oe[e]=t+(typeof t=="string"?"":"px")}}function matrix(Te,e){var t="";if(typeof Te=="string")t=Te;else do{var Oe=css(Te,"transform");Oe&&Oe!=="none"&&(t=Oe+" "+t)}while(!e&&(Te=Te.parentNode));var ke=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return ke&&new ke(t)}function find(Te,e,t){if(Te){var Oe=Te.getElementsByTagName(e),ke=0,Be=Oe.length;if(t)for(;ke<Be;ke++)t(Oe[ke],ke);return Oe}return[]}function getWindowScrollingElement(){var Te=document.scrollingElement;return Te||document.documentElement}function getRect(Te,e,t,Oe,ke){if(!(!Te.getBoundingClientRect&&Te!==window)){var Be,Ue,He,We,Cn,An,En;if(Te!==window&&Te.parentNode&&Te!==getWindowScrollingElement()?(Be=Te.getBoundingClientRect(),Ue=Be.top,He=Be.left,We=Be.bottom,Cn=Be.right,An=Be.height,En=Be.width):(Ue=0,He=0,We=window.innerHeight,Cn=window.innerWidth,An=window.innerHeight,En=window.innerWidth),(e||t)&&Te!==window&&(ke=ke||Te.parentNode,!IE11OrLess))do if(ke&&ke.getBoundingClientRect&&(css(ke,"transform")!=="none"||t&&css(ke,"position")!=="static")){var Sn=ke.getBoundingClientRect();Ue-=Sn.top+parseInt(css(ke,"border-top-width")),He-=Sn.left+parseInt(css(ke,"border-left-width")),We=Ue+Be.height,Cn=He+Be.width;break}while(ke=ke.parentNode);if(Oe&&Te!==window){var Tn=matrix(ke||Te),Ln=Tn&&Tn.a,Bn=Tn&&Tn.d;Tn&&(Ue/=Bn,He/=Ln,En/=Ln,An/=Bn,We=Ue+An,Cn=He+En)}return{top:Ue,left:He,bottom:We,right:Cn,width:En,height:An}}}function isScrolledPast(Te,e,t){for(var Oe=getParentAutoScrollElement(Te,!0),ke=getRect(Te)[e];Oe;){var Be=getRect(Oe)[t],Ue=void 0;if(Ue=ke>=Be,!Ue)return Oe;if(Oe===getWindowScrollingElement())break;Oe=getParentAutoScrollElement(Oe,!1)}return!1}function getChild(Te,e,t,Oe){for(var ke=0,Be=0,Ue=Te.children;Be<Ue.length;){if(Ue[Be].style.display!=="none"&&Ue[Be]!==Sortable.ghost&&(Oe||Ue[Be]!==Sortable.dragged)&&closest(Ue[Be],t.draggable,Te,!1)){if(ke===e)return Ue[Be];ke++}Be++}return null}function lastChild(Te,e){for(var t=Te.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(Te,e){var t=0;if(!Te||!Te.parentNode)return-1;for(;Te=Te.previousElementSibling;)Te.nodeName.toUpperCase()!=="TEMPLATE"&&Te!==Sortable.clone&&(!e||matches(Te,e))&&t++;return t}function getRelativeScrollOffset(Te){var e=0,t=0,Oe=getWindowScrollingElement();if(Te)do{var ke=matrix(Te),Be=ke.a,Ue=ke.d;e+=Te.scrollLeft*Be,t+=Te.scrollTop*Ue}while(Te!==Oe&&(Te=Te.parentNode));return[e,t]}function indexOfObject(Te,e){for(var t in Te)if(Te.hasOwnProperty(t)){for(var Oe in e)if(e.hasOwnProperty(Oe)&&e[Oe]===Te[t][Oe])return Number(t)}return-1}function getParentAutoScrollElement(Te,e){if(!Te||!Te.getBoundingClientRect)return getWindowScrollingElement();var t=Te,Oe=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var ke=css(t);if(t.clientWidth<t.scrollWidth&&(ke.overflowX=="auto"||ke.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(ke.overflowY=="auto"||ke.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(Oe||e)return t;Oe=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(Te,e){if(Te&&e)for(var t in e)e.hasOwnProperty(t)&&(Te[t]=e[t]);return Te}function isRectEqual(Te,e){return Math.round(Te.top)===Math.round(e.top)&&Math.round(Te.left)===Math.round(e.left)&&Math.round(Te.height)===Math.round(e.height)&&Math.round(Te.width)===Math.round(e.width)}var _throttleTimeout;function throttle(Te,e){return function(){if(!_throttleTimeout){var t=arguments,Oe=this;t.length===1?Te.call(Oe,t[0]):Te.apply(Oe,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(Te,e,t){Te.scrollLeft+=e,Te.scrollTop+=t}function clone(Te){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(Te).cloneNode(!0):t?t(Te).clone(!0)[0]:Te.cloneNode(!0)}function getChildContainingRectFromElement(Te,e,t){var Oe={};return Array.from(Te.children).forEach(function(ke){var Be,Ue,He,We;if(!(!closest(ke,e.draggable,Te,!1)||ke.animated||ke===t)){var Cn=getRect(ke);Oe.left=Math.min((Be=Oe.left)!==null&&Be!==void 0?Be:1/0,Cn.left),Oe.top=Math.min((Ue=Oe.top)!==null&&Ue!==void 0?Ue:1/0,Cn.top),Oe.right=Math.max((He=Oe.right)!==null&&He!==void 0?He:-1/0,Cn.right),Oe.bottom=Math.max((We=Oe.bottom)!==null&&We!==void 0?We:-1/0,Cn.bottom)}}),Oe.width=Oe.right-Oe.left,Oe.height=Oe.bottom-Oe.top,Oe.x=Oe.left,Oe.y=Oe.top,Oe}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var Te=[],e;return{captureAnimationState:function(){if(Te=[],!!this.options.animation){var Oe=[].slice.call(this.el.children);Oe.forEach(function(ke){if(!(css(ke,"display")==="none"||ke===Sortable.ghost)){Te.push({target:ke,rect:getRect(ke)});var Be=_objectSpread2({},Te[Te.length-1].rect);if(ke.thisAnimationDuration){var Ue=matrix(ke,!0);Ue&&(Be.top-=Ue.f,Be.left-=Ue.e)}ke.fromRect=Be}})}},addAnimationState:function(Oe){Te.push(Oe)},removeAnimationState:function(Oe){Te.splice(indexOfObject(Te,{target:Oe}),1)},animateAll:function(Oe){var ke=this;if(!this.options.animation){clearTimeout(e),typeof Oe=="function"&&Oe();return}var Be=!1,Ue=0;Te.forEach(function(He){var We=0,Cn=He.target,An=Cn.fromRect,En=getRect(Cn),Sn=Cn.prevFromRect,Tn=Cn.prevToRect,Ln=He.rect,Bn=matrix(Cn,!0);Bn&&(En.top-=Bn.f,En.left-=Bn.e),Cn.toRect=En,Cn.thisAnimationDuration&&isRectEqual(Sn,En)&&!isRectEqual(An,En)&&(Ln.top-En.top)/(Ln.left-En.left)===(An.top-En.top)/(An.left-En.left)&&(We=calculateRealTime(Ln,Sn,Tn,ke.options)),isRectEqual(En,An)||(Cn.prevFromRect=An,Cn.prevToRect=En,We||(We=ke.options.animation),ke.animate(Cn,Ln,En,We)),We&&(Be=!0,Ue=Math.max(Ue,We),clearTimeout(Cn.animationResetTimer),Cn.animationResetTimer=setTimeout(function(){Cn.animationTime=0,Cn.prevFromRect=null,Cn.fromRect=null,Cn.prevToRect=null,Cn.thisAnimationDuration=null},We),Cn.thisAnimationDuration=We)}),clearTimeout(e),Be?e=setTimeout(function(){typeof Oe=="function"&&Oe()},Ue):typeof Oe=="function"&&Oe(),Te=[]},animate:function(Oe,ke,Be,Ue){if(Ue){css(Oe,"transition",""),css(Oe,"transform","");var He=matrix(this.el),We=He&&He.a,Cn=He&&He.d,An=(ke.left-Be.left)/(We||1),En=(ke.top-Be.top)/(Cn||1);Oe.animatingX=!!An,Oe.animatingY=!!En,css(Oe,"transform","translate3d("+An+"px,"+En+"px,0)"),this.forRepaintDummy=repaint(Oe),css(Oe,"transition","transform "+Ue+"ms"+(this.options.easing?" "+this.options.easing:"")),css(Oe,"transform","translate3d(0,0,0)"),typeof Oe.animated=="number"&&clearTimeout(Oe.animated),Oe.animated=setTimeout(function(){css(Oe,"transition",""),css(Oe,"transform",""),Oe.animated=!1,Oe.animatingX=!1,Oe.animatingY=!1},Ue)}}}}function repaint(Te){return Te.offsetWidth}function calculateRealTime(Te,e,t,Oe){return Math.sqrt(Math.pow(e.top-Te.top,2)+Math.pow(e.left-Te.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*Oe.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(Oe){if(Oe.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,Oe){var ke=this;this.eventCanceled=!1,Oe.cancel=function(){ke.eventCanceled=!0};var Be=e+"Global";plugins.forEach(function(Ue){t[Ue.pluginName]&&(t[Ue.pluginName][Be]&&t[Ue.pluginName][Be](_objectSpread2({sortable:t},Oe)),t.options[Ue.pluginName]&&t[Ue.pluginName][e]&&t[Ue.pluginName][e](_objectSpread2({sortable:t},Oe)))})},initializePlugins:function(e,t,Oe,ke){plugins.forEach(function(He){var We=He.pluginName;if(!(!e.options[We]&&!He.initializeByDefault)){var Cn=new He(e,t,e.options);Cn.sortable=e,Cn.options=e.options,e[We]=Cn,_extends(Oe,Cn.defaults)}});for(var Be in e.options)if(e.options.hasOwnProperty(Be)){var Ue=this.modifyOption(e,Be,e.options[Be]);typeof Ue<"u"&&(e.options[Be]=Ue)}},getEventProperties:function(e,t){var Oe={};return plugins.forEach(function(ke){typeof ke.eventProperties=="function"&&_extends(Oe,ke.eventProperties.call(t[ke.pluginName],e))}),Oe},modifyOption:function(e,t,Oe){var ke;return plugins.forEach(function(Be){e[Be.pluginName]&&Be.optionListeners&&typeof Be.optionListeners[t]=="function"&&(ke=Be.optionListeners[t].call(e[Be.pluginName],Oe))}),ke}};function dispatchEvent(Te){var e=Te.sortable,t=Te.rootEl,Oe=Te.name,ke=Te.targetEl,Be=Te.cloneEl,Ue=Te.toEl,He=Te.fromEl,We=Te.oldIndex,Cn=Te.newIndex,An=Te.oldDraggableIndex,En=Te.newDraggableIndex,Sn=Te.originalEvent,Tn=Te.putSortable,Ln=Te.extraEventProperties;if(e=e||t&&t[expando],!!e){var Bn,ti=e.options,ni="on"+Oe.charAt(0).toUpperCase()+Oe.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?Bn=new CustomEvent(Oe,{bubbles:!0,cancelable:!0}):(Bn=document.createEvent("Event"),Bn.initEvent(Oe,!0,!0)),Bn.to=Ue||t,Bn.from=He||t,Bn.item=ke||t,Bn.clone=Be,Bn.oldIndex=We,Bn.newIndex=Cn,Bn.oldDraggableIndex=An,Bn.newDraggableIndex=En,Bn.originalEvent=Sn,Bn.pullMode=Tn?Tn.lastPutMode:void 0;var ii=_objectSpread2(_objectSpread2({},Ln),PluginManager.getEventProperties(Oe,e));for(var si in ii)Bn[si]=ii[si];t&&t.dispatchEvent(Bn),ti[ni]&&ti[ni].call(e,Bn)}}var _excluded=["evt"],pluginEvent=function(e,t){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=Oe.evt,Be=_objectWithoutProperties(Oe,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:ke,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(He){_dispatchEvent({sortable:t,name:He,originalEvent:ke})}},Be))};function _dispatchEvent(Te){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},Te))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var Te=document.createElement("x");return Te.style.cssText="pointer-events:auto",Te.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var Oe=css(e),ke=parseInt(Oe.width)-parseInt(Oe.paddingLeft)-parseInt(Oe.paddingRight)-parseInt(Oe.borderLeftWidth)-parseInt(Oe.borderRightWidth),Be=getChild(e,0,t),Ue=getChild(e,1,t),He=Be&&css(Be),We=Ue&&css(Ue),Cn=He&&parseInt(He.marginLeft)+parseInt(He.marginRight)+getRect(Be).width,An=We&&parseInt(We.marginLeft)+parseInt(We.marginRight)+getRect(Ue).width;if(Oe.display==="flex")return Oe.flexDirection==="column"||Oe.flexDirection==="column-reverse"?"vertical":"horizontal";if(Oe.display==="grid")return Oe.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Be&&He.float&&He.float!=="none"){var En=He.float==="left"?"left":"right";return Ue&&(We.clear==="both"||We.clear===En)?"vertical":"horizontal"}return Be&&(He.display==="block"||He.display==="flex"||He.display==="table"||He.display==="grid"||Cn>=ke&&Oe[CSSFloatProperty]==="none"||Ue&&Oe[CSSFloatProperty]==="none"&&Cn+An>ke)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,Oe){var ke=Oe?e.left:e.top,Be=Oe?e.right:e.bottom,Ue=Oe?e.width:e.height,He=Oe?t.left:t.top,We=Oe?t.right:t.bottom,Cn=Oe?t.width:t.height;return ke===He||Be===We||ke+Ue/2===He+Cn/2},_detectNearestEmptySortable=function(e,t){var Oe;return sortables.some(function(ke){var Be=ke[expando].options.emptyInsertThreshold;if(!(!Be||lastChild(ke))){var Ue=getRect(ke),He=e>=Ue.left-Be&&e<=Ue.right+Be,We=t>=Ue.top-Be&&t<=Ue.bottom+Be;if(He&&We)return Oe=ke}}),Oe},_prepareGroup=function(e){function t(Be,Ue){return function(He,We,Cn,An){var En=He.options.group.name&&We.options.group.name&&He.options.group.name===We.options.group.name;if(Be==null&&(Ue||En))return!0;if(Be==null||Be===!1)return!1;if(Ue&&Be==="clone")return Be;if(typeof Be=="function")return t(Be(He,We,Cn,An),Ue)(He,We,Cn,An);var Sn=(Ue?He:We).options.group.name;return Be===!0||typeof Be=="string"&&Be===Sn||Be.join&&Be.indexOf(Sn)>-1}}var Oe={},ke=e.group;(!ke||_typeof$1(ke)!="object")&&(ke={name:ke}),Oe.name=ke.name,Oe.checkPull=t(ke.pull,!0),Oe.checkPut=t(ke.put),Oe.revertClone=ke.revertClone,e.group=Oe},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(Te){if(ignoreNextClick)return Te.preventDefault(),Te.stopPropagation&&Te.stopPropagation(),Te.stopImmediatePropagation&&Te.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var Oe={};for(var ke in e)e.hasOwnProperty(ke)&&(Oe[ke]=e[ke]);Oe.target=Oe.rootEl=t,Oe.preventDefault=void 0,Oe.stopPropagation=void 0,t[expando]._onDragOver(Oe)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(Te,e){if(!(Te&&Te.nodeType&&Te.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(Te));this.el=Te,this.options=e=_extends({},e),Te[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(Te.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(Te,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Ue,He){Ue.setData("Text",He.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,Te,t);for(var Oe in t)!(Oe in e)&&(e[Oe]=t[Oe]);_prepareGroup(e);for(var ke in this)ke.charAt(0)==="_"&&typeof this[ke]=="function"&&(this[ke]=this[ke].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(Te,"pointerdown",this._onTapStart):(on(Te,"mousedown",this._onTapStart),on(Te,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(Te,"dragover",this),on(Te,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,Oe=this.el,ke=this.options,Be=ke.preventOnFilter,Ue=e.type,He=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,We=(He||e).target,Cn=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||We,An=ke.filter;if(_saveInputCheckedState(Oe),!dragEl&&!(/mousedown|pointerdown/.test(Ue)&&e.button!==0||ke.disabled)&&!Cn.isContentEditable&&!(!this.nativeDraggable&&Safari&&We&&We.tagName.toUpperCase()==="SELECT")&&(We=closest(We,ke.draggable,Oe,!1),!(We&&We.animated)&&lastDownEl!==We)){if(oldIndex=index(We),oldDraggableIndex=index(We,ke.draggable),typeof An=="function"){if(An.call(this,e,We,this)){_dispatchEvent({sortable:t,rootEl:Cn,name:"filter",targetEl:We,toEl:Oe,fromEl:Oe}),pluginEvent("filter",t,{evt:e}),Be&&e.cancelable&&e.preventDefault();return}}else if(An&&(An=An.split(",").some(function(En){if(En=closest(Cn,En.trim(),Oe,!1),En)return _dispatchEvent({sortable:t,rootEl:En,name:"filter",targetEl:We,fromEl:Oe,toEl:Oe}),pluginEvent("filter",t,{evt:e}),!0}),An)){Be&&e.cancelable&&e.preventDefault();return}ke.handle&&!closest(Cn,ke.handle,Oe,!1)||this._prepareDragStart(e,He,We)}}},_prepareDragStart:function(e,t,Oe){var ke=this,Be=ke.el,Ue=ke.options,He=Be.ownerDocument,We;if(Oe&&!dragEl&&Oe.parentNode===Be){var Cn=getRect(Oe);if(rootEl=Be,dragEl=Oe,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=Oe,activeGroup=Ue.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-Cn.left,tapDistanceTop=tapEvt.clientY-Cn.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",We=function(){if(pluginEvent("delayEnded",ke,{evt:e}),Sortable.eventCanceled){ke._onDrop();return}ke._disableDelayedDragEvents(),!FireFox&&ke.nativeDraggable&&(dragEl.draggable=!0),ke._triggerDragStart(e,t),_dispatchEvent({sortable:ke,name:"choose",originalEvent:e}),toggleClass(dragEl,Ue.chosenClass,!0)},Ue.ignore.split(",").forEach(function(An){find(dragEl,An.trim(),_disableDraggable)}),on(He,"dragover",nearestEmptyInsertDetectEvent),on(He,"mousemove",nearestEmptyInsertDetectEvent),on(He,"touchmove",nearestEmptyInsertDetectEvent),on(He,"mouseup",ke._onDrop),on(He,"touchend",ke._onDrop),on(He,"touchcancel",ke._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),Ue.delay&&(!Ue.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(He,"mouseup",ke._disableDelayedDrag),on(He,"touchend",ke._disableDelayedDrag),on(He,"touchcancel",ke._disableDelayedDrag),on(He,"mousemove",ke._delayedDragTouchMoveHandler),on(He,"touchmove",ke._delayedDragTouchMoveHandler),Ue.supportPointer&&on(He,"pointermove",ke._delayedDragTouchMoveHandler),ke._dragStartTimer=setTimeout(We,Ue.delay)}else We()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var Oe=this.options;!e&&toggleClass(dragEl,Oe.dragClass,!1),toggleClass(dragEl,Oe.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var Oe=void 0;if(Oe=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),Oe&&!this.options.dragoverBubble)break}e=t}while(t=getParentOrHost(t));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,Oe=t.fallbackTolerance,ke=t.fallbackOffset,Be=e.touches?e.touches[0]:e,Ue=ghostEl&&matrix(ghostEl,!0),He=ghostEl&&Ue&&Ue.a,We=ghostEl&&Ue&&Ue.d,Cn=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),An=(Be.clientX-tapEvt.clientX+ke.x)/(He||1)+(Cn?Cn[0]-ghostRelativeParentInitialScroll[0]:0)/(He||1),En=(Be.clientY-tapEvt.clientY+ke.y)/(We||1)+(Cn?Cn[1]-ghostRelativeParentInitialScroll[1]:0)/(We||1);if(!Sortable.active&&!awaitingDragStarted){if(Oe&&Math.max(Math.abs(Be.clientX-this._lastX),Math.abs(Be.clientY-this._lastY))<Oe)return;this._onDragStart(e,!0)}if(ghostEl){Ue?(Ue.e+=An-(lastDx||0),Ue.f+=En-(lastDy||0)):Ue={a:1,b:0,c:0,d:1,e:An,f:En};var Sn="matrix(".concat(Ue.a,",").concat(Ue.b,",").concat(Ue.c,",").concat(Ue.d,",").concat(Ue.e,",").concat(Ue.f,")");css(ghostEl,"webkitTransform",Sn),css(ghostEl,"mozTransform",Sn),css(ghostEl,"msTransform",Sn),css(ghostEl,"transform",Sn),lastDx=An,lastDy=En,touchEvt=Be}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),Oe=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,Oe.ghostClass,!1),toggleClass(ghostEl,Oe.fallbackClass,!0),toggleClass(ghostEl,Oe.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var Oe=this,ke=e.dataTransfer,Be=Oe.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),Oe.cloneId=_nextTick(function(){pluginEvent("clone",Oe),!Sortable.eventCanceled&&(Oe.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),Oe._hideClone(),_dispatchEvent({sortable:Oe,name:"clone"}))}),!t&&toggleClass(dragEl,Be.dragClass,!0),t?(ignoreNextClick=!0,Oe._loopId=setInterval(Oe._emulateDragOver,50)):(off(document,"mouseup",Oe._onDrop),off(document,"touchend",Oe._onDrop),off(document,"touchcancel",Oe._onDrop),ke&&(ke.effectAllowed="move",Be.setData&&Be.setData.call(Oe,ke,dragEl)),on(document,"drop",Oe),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,Oe._dragStartId=_nextTick(Oe._dragStarted.bind(Oe,t,e)),on(document,"selectstart",Oe),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,Oe=e.target,ke,Be,Ue,He=this.options,We=He.group,Cn=Sortable.active,An=activeGroup===We,En=He.sort,Sn=putSortable||Cn,Tn,Ln=this,Bn=!1;if(_silent)return;function ti(ar,cr){pluginEvent(ar,Ln,_objectSpread2({evt:e,isOwner:An,axis:Tn?"vertical":"horizontal",revert:Ue,dragRect:ke,targetRect:Be,canSort:En,fromSortable:Sn,target:Oe,completed:ii,onMove:function(br,Ni){return _onMove(rootEl,t,dragEl,ke,br,getRect(br),e,Ni)},changed:si},cr))}function ni(){ti("dragOverAnimationCapture"),Ln.captureAnimationState(),Ln!==Sn&&Sn.captureAnimationState()}function ii(ar){return ti("dragOverCompleted",{insertion:ar}),ar&&(An?Cn._hideClone():Cn._showClone(Ln),Ln!==Sn&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:Cn.options.ghostClass,!1),toggleClass(dragEl,He.ghostClass,!0)),putSortable!==Ln&&Ln!==Sortable.active?putSortable=Ln:Ln===Sortable.active&&putSortable&&(putSortable=null),Sn===Ln&&(Ln._ignoreWhileAnimating=Oe),Ln.animateAll(function(){ti("dragOverAnimationComplete"),Ln._ignoreWhileAnimating=null}),Ln!==Sn&&(Sn.animateAll(),Sn._ignoreWhileAnimating=null)),(Oe===dragEl&&!dragEl.animated||Oe===t&&!Oe.animated)&&(lastTarget=null),!He.dragoverBubble&&!e.rootEl&&Oe!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!ar&&nearestEmptyInsertDetectEvent(e)),!He.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),Bn=!0}function si(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,He.draggable),_dispatchEvent({sortable:Ln,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),Oe=closest(Oe,He.draggable,t,!0),ti("dragOver"),Sortable.eventCanceled)return Bn;if(dragEl.contains(e.target)||Oe.animated&&Oe.animatingX&&Oe.animatingY||Ln._ignoreWhileAnimating===Oe)return ii(!1);if(ignoreNextClick=!1,Cn&&!He.disabled&&(An?En||(Ue=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,Cn,dragEl,e))&&We.checkPut(this,Cn,dragEl,e))){if(Tn=this._getDirection(e,Oe)==="vertical",ke=getRect(dragEl),ti("dragOverValid"),Sortable.eventCanceled)return Bn;if(Ue)return parentEl=rootEl,ni(),this._hideClone(),ti("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),ii(!0);var oi=lastChild(t,He.draggable);if(!oi||_ghostIsLast(e,Tn,this)&&!oi.animated){if(oi===dragEl)return ii(!1);if(oi&&t===e.target&&(Oe=oi),Oe&&(Be=getRect(Oe)),_onMove(rootEl,t,dragEl,ke,Oe,Be,e,!!Oe)!==!1)return ni(),oi&&oi.nextSibling?t.insertBefore(dragEl,oi.nextSibling):t.appendChild(dragEl),parentEl=t,si(),ii(!0)}else if(oi&&_ghostIsFirst(e,Tn,this)){var ci=getChild(t,0,He,!0);if(ci===dragEl)return ii(!1);if(Oe=ci,Be=getRect(Oe),_onMove(rootEl,t,dragEl,ke,Oe,Be,e,!1)!==!1)return ni(),t.insertBefore(dragEl,ci),parentEl=t,si(),ii(!0)}else if(Oe.parentNode===t){Be=getRect(Oe);var vi=0,pi,fi=dragEl.parentNode!==t,Mi=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||ke,Oe.animated&&Oe.toRect||Be,Tn),Oi=Tn?"top":"left",ui=isScrolledPast(Oe,"top","top")||isScrolledPast(dragEl,"top","top"),li=ui?ui.scrollTop:void 0;lastTarget!==Oe&&(pi=Be[Oi],pastFirstInvertThresh=!1,isCircumstantialInvert=!Mi&&He.invertSwap||fi),vi=_getSwapDirection(e,Oe,Be,Tn,Mi?1:He.swapThreshold,He.invertedSwapThreshold==null?He.swapThreshold:He.invertedSwapThreshold,isCircumstantialInvert,lastTarget===Oe);var Ri;if(vi!==0){var Pi=index(dragEl);do Pi-=vi,Ri=parentEl.children[Pi];while(Ri&&(css(Ri,"display")==="none"||Ri===ghostEl))}if(vi===0||Ri===Oe)return ii(!1);lastTarget=Oe,lastDirection=vi;var Fi=Oe.nextElementSibling,Hi=!1;Hi=vi===1;var nr=_onMove(rootEl,t,dragEl,ke,Oe,Be,e,Hi);if(nr!==!1)return(nr===1||nr===-1)&&(Hi=nr===1),_silent=!0,setTimeout(_unsilent,30),ni(),Hi&&!Fi?t.appendChild(dragEl):Oe.parentNode.insertBefore(dragEl,Hi?Fi:Oe),ui&&scrollBy(ui,0,li-ui.scrollTop),parentEl=dragEl.parentNode,pi!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(pi-getRect(Oe)[Oi])),si(),ii(!0)}if(t.contains(dragEl))return ii(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,Oe=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!Oe.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,Oe=this.el.children,ke=0,Be=Oe.length,Ue=this.options;ke<Be;ke++)t=Oe[ke],closest(t,Ue.draggable,this.el,!1)&&e.push(t.getAttribute(Ue.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var Oe={},ke=this.el;this.toArray().forEach(function(Be,Ue){var He=ke.children[Ue];closest(He,this.options.draggable,ke,!1)&&(Oe[Be]=He)},this),t&&this.captureAnimationState(),e.forEach(function(Be){Oe[Be]&&(ke.removeChild(Oe[Be]),ke.appendChild(Oe[Be]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var Oe=this.options;if(t===void 0)return Oe[e];var ke=PluginManager.modifyOption(this,e,t);typeof ke<"u"?Oe[e]=ke:Oe[e]=t,e==="group"&&_prepareGroup(Oe)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(Te){Te.dataTransfer&&(Te.dataTransfer.dropEffect="move"),Te.cancelable&&Te.preventDefault()}function _onMove(Te,e,t,Oe,ke,Be,Ue,He){var We,Cn=Te[expando],An=Cn.options.onMove,En;return window.CustomEvent&&!IE11OrLess&&!Edge?We=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(We=document.createEvent("Event"),We.initEvent("move",!0,!0)),We.to=e,We.from=Te,We.dragged=t,We.draggedRect=Oe,We.related=ke||e,We.relatedRect=Be||getRect(e),We.willInsertAfter=He,We.originalEvent=Ue,Te.dispatchEvent(We),An&&(En=An.call(Cn,We,Ue)),En}function _disableDraggable(Te){Te.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(Te,e,t){var Oe=getRect(getChild(t.el,0,t.options,!0)),ke=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Te.clientX<ke.left-Be||Te.clientY<Oe.top&&Te.clientX<Oe.right:Te.clientY<ke.top-Be||Te.clientY<Oe.bottom&&Te.clientX<Oe.left}function _ghostIsLast(Te,e,t){var Oe=getRect(lastChild(t.el,t.options.draggable)),ke=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Te.clientX>ke.right+Be||Te.clientY>Oe.bottom&&Te.clientX>Oe.left:Te.clientY>ke.bottom+Be||Te.clientX>Oe.right&&Te.clientY>Oe.top}function _getSwapDirection(Te,e,t,Oe,ke,Be,Ue,He){var We=Oe?Te.clientY:Te.clientX,Cn=Oe?t.height:t.width,An=Oe?t.top:t.left,En=Oe?t.bottom:t.right,Sn=!1;if(!Ue){if(He&&targetMoveDistance<Cn*ke){if(!pastFirstInvertThresh&&(lastDirection===1?We>An+Cn*Be/2:We<En-Cn*Be/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)Sn=!0;else if(lastDirection===1?We<An+targetMoveDistance:We>En-targetMoveDistance)return-lastDirection}else if(We>An+Cn*(1-ke)/2&&We<En-Cn*(1-ke)/2)return _getInsertDirection(e)}return Sn=Sn||Ue,Sn&&(We<An+Cn*Be/2||We>En-Cn*Be/2)?We>An+Cn/2?1:-1:0}function _getInsertDirection(Te){return index(dragEl)<index(Te)?1:-1}function _generateId(Te){for(var e=Te.tagName+Te.className+Te.src+Te.href+Te.textContent,t=e.length,Oe=0;t--;)Oe+=e.charCodeAt(t);return Oe.toString(36)}function _saveInputCheckedState(Te){savedInputChecked.length=0;for(var e=Te.getElementsByTagName("input"),t=e.length;t--;){var Oe=e[t];Oe.checked&&savedInputChecked.push(Oe)}}function _nextTick(Te){return setTimeout(Te,0)}function _cancelNextTick(Te){return clearTimeout(Te)}documentExists&&on(document,"touchmove",function(Te){(Sortable.active||awaitingDragStarted)&&Te.cancelable&&Te.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(Te){return Te[expando]};Sortable.mount=function(){for(var Te=arguments.length,e=new Array(Te),t=0;t<Te;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(Oe){if(!Oe.prototype||!Oe.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Oe));Oe.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),Oe.utils)),PluginManager.mount(Oe)})};Sortable.create=function(Te,e){return new Sortable(Te,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function Te(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return Te.prototype={dragStarted:function(t){var Oe=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):Oe.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var Oe=t.originalEvent;!this.options.dragOverBubble&&!Oe.rootEl&&this._handleAutoScroll(Oe)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,Oe){var ke=this,Be=(t.touches?t.touches[0]:t).clientX,Ue=(t.touches?t.touches[0]:t).clientY,He=document.elementFromPoint(Be,Ue);if(touchEvt$1=t,Oe||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,He,Oe);var We=getParentAutoScrollElement(He,!0);scrolling&&(!pointerElemChangedInterval||Be!==lastAutoScrollX||Ue!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var Cn=getParentAutoScrollElement(document.elementFromPoint(Be,Ue),!0);Cn!==We&&(We=Cn,clearAutoScrolls()),autoScroll(t,ke.options,Cn,Oe)},10),lastAutoScrollX=Be,lastAutoScrollY=Ue)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(He,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(He,!1),!1)}}},_extends(Te,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(Te){clearInterval(Te.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(Te,e,t,Oe){if(e.scroll){var ke=(Te.touches?Te.touches[0]:Te).clientX,Be=(Te.touches?Te.touches[0]:Te).clientY,Ue=e.scrollSensitivity,He=e.scrollSpeed,We=getWindowScrollingElement(),Cn=!1,An;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,An=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var En=0,Sn=scrollEl;do{var Tn=Sn,Ln=getRect(Tn),Bn=Ln.top,ti=Ln.bottom,ni=Ln.left,ii=Ln.right,si=Ln.width,oi=Ln.height,ci=void 0,vi=void 0,pi=Tn.scrollWidth,fi=Tn.scrollHeight,Mi=css(Tn),Oi=Tn.scrollLeft,ui=Tn.scrollTop;Tn===We?(ci=si<pi&&(Mi.overflowX==="auto"||Mi.overflowX==="scroll"||Mi.overflowX==="visible"),vi=oi<fi&&(Mi.overflowY==="auto"||Mi.overflowY==="scroll"||Mi.overflowY==="visible")):(ci=si<pi&&(Mi.overflowX==="auto"||Mi.overflowX==="scroll"),vi=oi<fi&&(Mi.overflowY==="auto"||Mi.overflowY==="scroll"));var li=ci&&(Math.abs(ii-ke)<=Ue&&Oi+si<pi)-(Math.abs(ni-ke)<=Ue&&!!Oi),Ri=vi&&(Math.abs(ti-Be)<=Ue&&ui+oi<fi)-(Math.abs(Bn-Be)<=Ue&&!!ui);if(!autoScrolls[En])for(var Pi=0;Pi<=En;Pi++)autoScrolls[Pi]||(autoScrolls[Pi]={});(autoScrolls[En].vx!=li||autoScrolls[En].vy!=Ri||autoScrolls[En].el!==Tn)&&(autoScrolls[En].el=Tn,autoScrolls[En].vx=li,autoScrolls[En].vy=Ri,clearInterval(autoScrolls[En].pid),(li!=0||Ri!=0)&&(Cn=!0,autoScrolls[En].pid=setInterval((function(){Oe&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Fi=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*He:0,Hi=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*He:0;typeof An=="function"&&An.call(Sortable.dragged.parentNode[expando],Hi,Fi,Te,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Hi,Fi)}).bind({layer:En}),24))),En++}while(e.bubbleScroll&&Sn!==We&&(Sn=getParentAutoScrollElement(Sn,!1)));scrolling=Cn}},30),drop=function(e){var t=e.originalEvent,Oe=e.putSortable,ke=e.dragEl,Be=e.activeSortable,Ue=e.dispatchSortableEvent,He=e.hideGhostForTarget,We=e.unhideGhostForTarget;if(t){var Cn=Oe||Be;He();var An=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,En=document.elementFromPoint(An.clientX,An.clientY);We(),Cn&&!Cn.el.contains(En)&&(Ue("spill"),this.onSpill({dragEl:ke,putSortable:Oe}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,Oe=e.putSortable;this.sortable.captureAnimationState(),Oe&&Oe.captureAnimationState();var ke=getChild(this.sortable.el,this.startIndex,this.options);ke?this.sortable.el.insertBefore(t,ke):this.sortable.el.appendChild(t),this.sortable.animateAll(),Oe&&Oe.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,Oe=e.putSortable,ke=Oe||this.sortable;ke.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),ke.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(Te,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(Te,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}}):Sortable.create(Te,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}})},_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPlayerSwitcher"),Te.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",Te},_createMainLayersShowElement:function(){var Te=document.createElement("input");return Te.id=this._addUID("GPshowLayersList"),Te.type="checkbox",Te},_createMainLayersElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPlayersList"),Te.className="GPpanel gpf-panel fr-modal",Te},_createMainLayersDivElement:function(){var Te=document.createElement("div");return Te.className="GPpanelBody gpf-panel__body_ls fr-modal__body",Te},_createMainPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),document.getElementById(Te._addUID("GPshowLayersList")).checked=ke,document.getElementById(Te._addUID("GPshowLayersList")).checked&&(document.getElementById(Te._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Te._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Te.onShowLayerSwitcherClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),document.getElementById(Te._addUID("GPshowLayersList")).checked&&(document.getElementById(Te._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Te._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Te.onShowLayerSwitcherClick(Oe)}),e},_createMainCounterLayersElement:function(){var Te=document.createElement("span");return Te.id=this._addUID("GPlayerCounter"),Te.className="GPlayerCounter",Te.innerHTML="0",Te},_createMainInfoElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPlayerInfoPanel"),Te.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",Te},_createMainInfoDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createLayersPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader gpf-panel__header_ls",Te},_createLayersPanelIconElement:function(){var Te=document.createElement("label");return Te.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",Te.title="Couches de données",Te},_createLayersPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="GPpanelTitle gpf-panel__title_ls",Te.id=this._addUID("GPlayersHeaderTitle"),Te.innerHTML="Couches de données",Te},_createLayersPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible fr-mx-1w",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(Te){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+Te.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(Te)),e.appendChild(this._createAdvancedToolShowElement(Te)),e.appendChild(this._createAdvancedToolElement(Te)),e},_createBasicToolElement:function(Te){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+Te.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(Te)),e.appendChild(this._createBasicToolVisibilityElement(Te)),e.appendChild(this._createBasicToolDragNDropElement(Te)),e},_createBasicToolDragNDropElement:function(Te){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+Te.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var t=this;return e.addEventListener?e.addEventListener("click",function(Oe){t._onStartDragAndDropLayerClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){t._onStartDragAndDropLayerClick(Oe)}),e},_createBasicToolNameElement:function(Te){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+Te.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=Te.description||Te.title,e.innerHTML=Te.title,e},_createBasicToolVisibilityElement:function(Te){var e=typeof Te.visibility<"u"?Te.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+Te.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onVisibilityLayerClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onVisibilityLayerClick(ke)}),t},_createAdvancedToolShowElement:function(Te){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+Te.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke);var Be=document.getElementById(t._addUID("GPadvancedTools_ID_"+Te.id));ke?(Be.classList.replace("GPelementVisible","GPelementHidden"),Be.classList.replace("gpf-visible","gpf-hidden")):(Be.classList.replace("GPelementHidden","GPelementVisible"),Be.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(Te){var e=document.createElement("div");e.id=this._addUID("GPadvancedTools_ID_"+Te.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(Te)),checkDsfr()&&e.appendChild(this._createAdvancedToolEditionElement(Te)),e.appendChild(this._createAdvancedToolInformationElement(Te));for(var t=this._createAdvancedToolOpacityElement(Te),Oe=0;Oe<t.length;Oe++)e.appendChild(t[Oe]);if(e.appendChild(this._createAdvancedToolExtentElement(Te)),checkDsfr()){var ke=document.createElement("button");ke.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",ke.setAttribute("aria-pressed",!1),ke.addEventListener?ke.addEventListener("click",function(Ue){var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He)}):ke.attachEvent&&ke.attachEvent("onclick",function(Ue){var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He)});var Be=document.createElement("div");Be.appendChild(this._createAdvancedToolDeleteElement(Te,!0)),Be.appendChild(this._createAdvancedToolInformationElement(Te,!0)),Be.appendChild(this._createAdvancedToolExtentElement(Te,!0)),e.appendChild(ke),e.appendChild(Be)}return e},_createAdvancedToolDeleteElement:function(Te,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPremoveContextual_ID_"+Te.id):t.id=this._addUID("GPremove_ID_"+Te.id),t.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Supprimer la couche",t.layerId=Te.id,e&&(t.innerText="Supprimer"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){Oe._onDropLayerClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){Oe._onDropLayerClick(ke)}),t},_createAdvancedToolEditionElement:function(Te){var e=document.createElement("button");e.id=this._addUID("GPedit_ID_"+Te.id),e.className="GPlayerEdit gpf-btn gpf-btn-icon gpf-btn-icon-ls-edit fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Editer la couche",e.layerId=Te.id,e.setAttribute("tabindex","0"),e.setAttribute("type","button"),Te.type!=="feature"&&(e.style.opacity="0",e.style.visibility="hidden");var t=this;return e.addEventListener?e.addEventListener("click",function(Oe){t._onEditLayerClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){t._onEditLayerClick(Oe)}),e},_createAdvancedToolInformationElement:function(Te,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPinfoContextual_ID_"+Te.id):t.id=this._addUID("GPinfo_ID_"+Te.id),t.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!Te.title||!Te.description)&&(t.style.opacity="0",t.style.visibility="hidden",e&&(t.style.display="none")),t.title="Informations/légende",t.layerId=Te.id,e&&(t.innerText="Informations"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){Oe._onOpenLayerInfoClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){Oe._onOpenLayerInfoClick(ke)}),t},_createAdvancedToolOpacityElement:function(Te){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+Te.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.title="Opacité";var Oe=typeof Te.opacity<"u"?Te.opacity:1;Oe=Math.round(Oe*100),t.style.setProperty("--progress-right",Oe+"%");var ke=document.createElement("input");ke.id=this._addUID("GPopacityValueDiv_ID_"+Te.id),ke.type="range",ke.value=Oe,ke.ariaLabel="Opacité";var Be=this;ke.addEventListener?ke.addEventListener("change",function(We){Be._onChangeLayerOpacity(We)}):ke.attachEvent&&ke.attachEvent("onchange",function(We){Be._onChangeLayerOpacity(We)}),ke.addEventListener?ke.addEventListener("input",function(We){Be._onChangeLayerOpacity(We)}):ke.attachEvent&&ke.attachEvent("oninput",function(We){Be._onChangeLayerOpacity(We)}),t.appendChild(ke);var Ue=document.createElement("div");Ue.id=this._addUID("GPopacityValueDiv_ID_"+Te.id),Ue.className="GPlayerOpacityValue";var He=document.createElement("span");return He.id=this._addUID("GPopacityValue_ID_"+Te.id),He.className="gpf-range__output fr-range__output gpf-visible",He.innerHTML=Oe+"%",Ue.appendChild(He),e.push(t),e.push(Ue),e},_createAdvancedToolExtentElement:function(Te,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPextentContextual_ID_"+Te.id):t.id=this._addUID("GPextent_ID_"+Te.id),t.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Zoomer dans l'étendue",t.layerId=Te.id,e&&(t.innerText="Zoomer"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onZoomToExtentClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onZoomToExtentClick(ke)}),t},_createContainerLayerInfoElement:function(Te){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var Oe=document.createElement("label");Oe.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",Oe.title="Informations",t.appendChild(Oe);var ke=document.createElement("div");ke.id=this._addUID("GPlayerInfoTitle"),ke.innerHTML=Te.title,ke.className="gpf-panel__title_ls",t.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPlayerInfoClose"),Be.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer la fenêtre";var Ue=this,He=function(){document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Te.id).classList.add("GPlayerInfoClosed"),document.getElementById(Te.id).classList.remove("GPlayerInfoOpened")};Be.addEventListener?Be.addEventListener("click",He):Be.attachEvent&&Be.attachEvent("onclick",He),this.addEventListener("layerswitcher:remove",Ri=>{parseInt(Te.id.split("-")[0].split("GPinfo_ID_")[1])===Ri.layer.id&&(document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),t.appendChild(Be),e.appendChild(t);var We=document.createElement("div");if(We.id=this._addUID("GPlayerInfoContent"),We.className="gpf-panel__content fr-modal__content",e.appendChild(We),Te.quicklookUrl){var Cn=document.createElement("div");Cn.id=this._addUID("GPlayerInfoQuicklook"),Cn.title="Afficher un aperçu de la couche";var An=document.createElement("a");An.href=Te.quicklookUrl,An.appendChild(Cn),We.appendChild(An)}var En=document.createElement("div");if(En.id=this._addUID("GPlayerInfoDescription"),En.innerHTML=Te.description,We.appendChild(En),Te.metadata){var Sn=document.createElement("div");Sn.id=this._addUID("GPlayerInfoMetadata");var Tn=document.createElement("div");Tn.className="GPlayerInfoSubtitle",Tn.innerHTML="Métadonnées",Sn.appendChild(Tn);for(var Ln=0;Ln<Te.metadata.length;Ln++){var Bn=Te.metadata[Ln].url,ti=document.createElement("div");ti.className="GPlayerInfoLink";var ni=document.createElement("a");ni.href=Bn,ni.innerHTML=Bn,ti.appendChild(ni),Sn.appendChild(ti)}Te.metadata.length!==0&&We.appendChild(Sn)}if(Te.legends){var ii=document.createElement("div");ii.id=this._addUID("GPlayerInfoLegend");var si=document.createElement("div");si.className="GPlayerInfoSubtitle",si.innerHTML="Légende",ii.appendChild(si);for(var oi={},ci=Te.maxScaleDenominator||56e7,vi=0;vi<Te.legends.length;vi++){var pi=Te.legends[vi].minScaleDenominator;if(pi){var fi=pi.toString();pi=Math.round(parseInt(fi.substring(0,3),10)/10)*Math.pow(10,fi.length-2)}else pi=270;oi[pi]=Te.legends[vi]}for(var Mi in oi)if(oi.hasOwnProperty(Mi)){var Oi=oi[Mi].url;if(typeof Oi=="string"&&Oi.toLowerCase().indexOf("nolegend.jpg")===-1){var ui=document.createElement("div");ui.className="GPlayerInfoLink",ci=oi[Mi].maxScaleDenominator||ci;var li=document.createElement("a");li.className="fr-link",li.href=Oi,li.target="_blank",li.innerHTML="Du 1/"+Mi+" au 1/"+ci,ui.appendChild(li),ii.appendChild(ui)}else delete oi[Mi]}Object.keys(oi).length!==0&&We.appendChild(ii)}return e}},logger$A=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class Hf extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},Oe=e.layers||[];if(super(t),!(this instanceof Hf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(Oe))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,Oe),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",Oe=>{var ke=Oe.element,Be;ke.hasOwnProperty("gpLayerId")?Be=ke.gpLayerId:(Be=this._layerId,ke.gpLayerId=Be,this._layerId++),this._layers[Be]||this.addLayer(ke)}),this._listeners.onRemoveListener=e.getLayers().on("remove",Oe=>{var ke=Oe.element,Be=ke.gpLayerId;this._layers[Be]&&this.removeLayer(ke)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,t){var Oe=this.getMap();if(t=t||{},!e){logger$A.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var ke=e.gpLayerId;if(typeof ke>"u"){logger$A.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Be=!1;if(Oe.getLayers().forEach(ti=>{ti.gpLayerId===ke&&(Be=!0)}),!Be){logger$A.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[ke]){for(var Sn in t)t.hasOwnProperty(Sn)&&(this._layers[ke][Sn]=t[Sn]);if(t.title){var Tn=document.getElementById(this._addUID("GPname_ID_"+ke));Tn&&(Tn.innerHTML=t.title,Tn.title=t.description||t.title)}var Ln=document.getElementById(this._addUID("GPinfo_ID_"+ke));if(!document.getElementById(this._addUID("GPinfo_ID_"+ke))&&t.description){var Bn=document.getElementById(this._addUID("GPadvancedTools_ID_"+ke));Bn&&Bn.appendChild(this._createAdvancedToolInformationElement({id:ke}))}Ln&&Ln.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var Ue=this.getLayerInfo(e)||{},He=e.getOpacity(),We=e.getVisible(),Cn=this.isInRange(e,Oe),An={layer:e,id:ke,name:e.name,service:e.service,opacity:He??1,visibility:We??!0,inRange:Cn??!0,title:t.title!=null?t.title:Ue._title||ke,description:t.description||Ue._description||null,legends:t.legends||Ue._legends||[],metadata:t.metadata||Ue._metadata||[],quicklookUrl:t.quicklookUrl||Ue._quicklookUrl||null};this._layers[ke]=An;var En=this._createLayerDiv(An);this._layers[ke].div=En,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(An),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(En,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners.updateLayerVisibility=e.on("change:visible",ti=>this._updateLayerVisibility(ti)),this._layers[ke].onZIndexChangeEvent==null&&(this._layers[ke].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[ke]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$A.trace(e);var t=e.gpLayerId,Oe=document.getElementById(this._addUID("GPinfo_ID_"+t));Oe&&Oe.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var ke=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));ke&&this._layerListContainer.removeChild(ke);var Be=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Be,1),this._lastZIndex--;for(var Ue=this._layersOrder,He=0;He<Ue.length;He++)Ue[He].layer.setZIndex(this._lastZIndex-He);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$A.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var Oe=e.gpLayerId;if(Oe==null){logger$A.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var ke=document.getElementById(this._addUID("GPremove_ID_"+Oe));ke&&(t===!1?ke.style.display="none":t===!0&&(ke.style.display="block"))}}getContainer(){return this.container}_initialize(e,t){this.options={id:"",collapsed:!0,draggable:!1,counter:!1,panel:!1,gutter:!1,allowEdit:!1},Helper.assign(this.options,e),this.options.layers=t,this._uid=this.options.id||SelectorID.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=this.options.collapsed!==void 0?this.options.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe].layer;if(ke){var Be;ke.hasOwnProperty("gpLayerId")?Be=ke.gpLayerId:(Be=this._layerId,ke.gpLayerId=Be,this._layerId++);var Ue=t[Oe].config||{},He=ke.getOpacity(),We=ke.getVisible(),Cn={layer:ke,id:Be,name:ke.name,service:ke.service,opacity:He??1,visibility:We??!0,title:Ue.title!=null?Ue.title:Ue.id?Ue.id:Be,description:Ue.description||null,legends:Ue.legends||[],metadata:Ue.metadata||[],quicklookUrl:Ue.quicklookUrl||null};this._layers[Be]=Cn}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var Oe=this,ke=function(Bn){this.collapsed=!Bn.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(Bn){ke.call(Oe,Bn)});var Be=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Be),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var Ue=this._layerSwitcherCounter=this._createMainCounterLayersElement();Be.appendChild(Ue)}var He=this._createMainLayersElement();if(e.appendChild(He),this.options.panel){var We=this._createLayersPanelHeaderElement();He.appendChild(We);var Cn=this._createLayersPanelIconElement();We.appendChild(Cn);var An=this._createLayersPanelTitleElement();We.appendChild(An);var En=this._createLayersPanelCloseElement();We.appendChild(En)}var Sn=this._layerListContainer=this._createMainLayersDivElement();He.appendChild(Sn),this._createDraggableElement(Sn,this);var Tn=this._createMainInfoElement(),Ln=this._createMainInfoDivElement();return Tn.appendChild(Ln),e.appendChild(Tn),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(We=>{var Cn=null;We.hasOwnProperty("gpLayerId")?Cn=We.gpLayerId:(Cn=this._layerId,We.gpLayerId=Cn,this._layerId++);var An=this.getLayerInfo(We)||{};if(this._layers[Cn])this._layers[Cn].opacity=We.getOpacity(),this._layers[Cn].visibility=We.getVisible(),this._layers[Cn].inRange=this.isInRange(We,e);else{var En=We.getOpacity(),Sn=We.getVisible(),Tn=this.isInRange(We,e),Ln={layer:We,id:Cn,name:We.name,service:We.service,opacity:En??1,visibility:Sn??!0,inRange:Tn??!0,title:An._title||Cn,description:An._description||null,legends:An._legends||[],metadata:An._metadata||[],quicklookUrl:An._quicklookUrl||null};this._layers[Cn]=Ln}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=We.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners._updateLayerVisibility=We.on("change:visible",ti=>this._updateLayerVisibility(ti)),We.getZIndex!==void 0){var Bn=We.getZIndex()||0;(!this._layersIndex[Bn]||!Array.isArray(this._layersIndex[Bn]))&&(this._layersIndex[Bn]=[]),this._layersIndex[Bn].push(this._layers[Cn])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var Oe=this._layersIndex[t],ke=0;ke<Oe.length;ke++)this._layersOrder.unshift(Oe[ke]),this._lastZIndex++,Oe[ke].layer.setZIndex(this._lastZIndex),this._layers[Oe[ke].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Oe[ke].layer.gpLayerId].onZIndexChangeEvent=Oe[ke].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Be=0;Be<this._layersOrder.length;Be++){var Ue=this._layersOrder[Be],He=this._createLayerDiv(Ue);this._layerListContainer.querySelector("#"+He.id)||this._layerListContainer.appendChild(He),this._layers[Ue.id].div=He}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,Oe=e.metadata&&e.metadata.length!==0,ke=e.quicklookUrl;(t||Oe||ke)&&(e.displayInformationElement=!0),e.type="",this.options.allowEdit&&(e.layer instanceof VectorLayer||e.layer instanceof VectorTileLayer)&&(e.type="feature");var Be=this._createContainerLayerElement(e);return e.inRange||Be.classList.add("outOfRange"),Be}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this._showLayerSwitcherButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer,Be=e.target.value,Ue=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));Ue.innerHTML=Be+"%",ke.setOpacity(Be/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var Oe=e.target.gpLayerId,ke=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+Oe));ke&&(ke.value=Math.round(t*100));var Be=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));Be&&(Be.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[Oe]})}_onVisibilityLayerClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer;ke.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),Oe=e.target.gpLayerId,ke=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+Oe));ke&&(ke.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[Oe]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,Oe;e.getLayers().forEach(Cn=>{Oe=Cn.gpLayerId,unByKey(this._layers[Oe].onZIndexChangeEvent),this._layers[Oe].onZIndexChangeEvent=null,t=null,Cn.getZIndex!==void 0&&(t=Cn.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[Oe]))}),this._lastZIndex=0,this._layersOrder=[];for(var ke in this._layersIndex)if(this._layersIndex.hasOwnProperty(ke))for(var Be=this._layersIndex[ke],Ue=0;Ue<Be.length;Ue++)this._layersOrder.unshift(Be[Ue]),this._lastZIndex++,this._layers[Be[Ue].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Be[Ue].layer.gpLayerId].onZIndexChangeEvent=Be[Ue].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let Cn=0;Cn<this._layerListContainer.childNodes.length;Cn++){const An=this._layerListContainer.childNodes[Cn];An.id!==""&&An.remove()}for(var He=0;He<this._layersOrder.length;He++){var We=this._layersOrder[He];this._layerListContainer.appendChild(We.div)}}else logger$A.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe],Be,Ue,He=document.getElementById(e.target.id);if(He.classList.contains("GPlayerInfoOpened")){He.classList.remove("GPlayerInfoOpened"),He.classList.add("GPlayerInfoClosed"),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Be.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),Ue=document.getElementById(this._addUID("GPlayerInfoContent")),Ue&&Ue.parentNode.remove();return}He.classList.contains("GPlayerInfoClosed")&&(He.classList.remove("GPlayerInfoClosed"),He.classList.add("GPlayerInfoOpened")),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Be.classList.add("GPlayerInfoPanelOpened","gpf-visible"),Ue=document.getElementById(this._addUID("GPlayerInfoContent")),Ue&&Ue.parentNode.remove();var We={id:t,title:ke.title,description:ke.description,quicklookUrl:ke.quicklookUrl,metadata:ke.metadata,legends:ke.legends},Cn=ke.layer.getMaxResolution();Cn===1/0?We._maxScaleDenominator=56e7:We._maxScaleDenominator=Math.round(Cn/28e-5);var An=this._createContainerLayerInfoElement(We);Be.firstChild.appendChild(An)}_onDropLayerClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer;this.getMap().getLayers().remove(ke)}_onEditLayerClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe],Be=this._layers[Oe].layer;this.dispatchEvent({type:"layerswitcher:edit",layer:Be,options:ke})}_onEndDragAndDropLayerClick(e){logger$A.trace(e);var t=this.getMap(),Oe=document.querySelectorAll("div.GPlayerSwitcher_layer"),ke=Oe.length;this._layersOrder=[];for(var Be=0;Be<Oe.length;Be++){var Ue=Oe[Be].id,He=SelectorID.index(Ue),We=this._layers[He].layer;unByKey(this._layers[He].onZIndexChangeEvent),this._layers[He].onZIndexChangeEvent=null,We.setZIndex&&(We.setZIndex(ke),this._layersOrder.push(this._layers[He]),ke--),this._layers[He].onZIndexChangeEvent==null&&(this._layers[He].onZIndexChangeEvent=We.on("change:zIndex",()=>this._updateLayersOrder()))}t.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$A.debug(e)}_onZoomToExtentClick(e){logger$A.debug(e);var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe],Be=null,Ue=null,He=this.getMap();if(ke.layer.hasOwnProperty("gpResultLayerId")&&(ke.layer.gpResultLayerId.split(":")[0]==="layerimport"||ke.layer.gpResultLayerId.split(":")[0]==="drawing"||ke.layer.gpResultLayerId.split(":")[0]==="compute"||ke.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(He.getView()&&He.getSize()){var We=ke.layer.getExtent();if(!We){var Cn=ke.layer.getSource();Cn&&Cn.getExtent?We=Cn.getExtent():We=Cn.getTileGrid().getExtent()}We&&We[0]!==1/0&&He.getView().fit(We,He.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var An=ke.layer.name||ke.layer.getSource().name,En=ke.layer.service||ke.layer.getSource().service,Sn=Config.configuration.getLayerId(An,En);if(!Sn)throw"ERROR : Layer ID not found into the catalogue !?";var Tn=Config.configuration.getGlobalConstraints(Sn);if(Tn){if(!He||!He.getView())return;var Ln=He.getView(),Bn=Ln.getProjection(),ti=[Tn.extent.left,Tn.extent.bottom,Tn.extent.right,Tn.extent.top],ni=Tn.crs;ni||(ni="EPSG:4326"),Be=transformExtent(ti,ni,Bn),Be&&Ln.fit(Be)}}catch(ii){Ue=ii}this.dispatchEvent({type:"layerswitcher:extent",extent:Be,layer:ke,error:Ue})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var Oe=t.gpLayerId;if(this._layers[Oe]){var ke=this._layers[Oe],Be;this.isInRange(t,e)&&!ke.inRange?(ke.inRange=!0,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Be.classList.remove("outOfRange")):!this.isInRange(t,e)&&ke.inRange&&(ke.inRange=!1,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Be.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(Oe=>{Oe===e&&(t=Oe.hasOwnProperty("gpLayerId")?Oe.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var Oe=t.getView().getResolution();if(Oe>e.getMaxResolution()||Oe<e.getMinResolution())return!1;var ke=t.getView().calculateExtent(t.getSize()),Be=e.getExtent();return!(Be&&!intersects$1(ke,Be))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var Oe=e.getProperties(),ke=Oe.source;ke&&(t._title=ke._title||Oe.title||Oe.id||"",t._description=ke._description||Oe.description||"",t._quicklookUrl=ke._quicklookUrl||Oe.quicklookUrl||"",t._metadata=ke._metadata||Oe.metadata||[],t._legends=ke._legends||Oe.legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(Te,e,t){let Oe=0,ke=0,Be=0,Ue=0,He=0,We=0;e?e.addEventListener("mousedown",En,!0):Te.addEventListener("mousedown",En,!0);var Cn,An={bottom:0,left:0,right:0,top:0};function En(Ln){Ln=Ln||window.event,Ln.preventDefault(),Oe=Ln.clientX,ke=Ln.clientY,Cn=Te.getBoundingClientRect();const Bn=t.getBoundingClientRect();An={bottom:Bn.bottom,left:Bn.left,right:Bn.right,top:Bn.top},document.addEventListener("mouseup",Sn,!0),document.addEventListener("mousemove",Tn,!0)}function Sn(){He-=Be,We-=Ue,document.removeEventListener("mouseup",Sn,!0),document.removeEventListener("mousemove",Tn,!0)}function Tn(Ln){Ln=Ln||window.event;let Bn=Ln.clientX,ti=Ln.clientY,ni=Be,ii=Ue;Be=Oe-Bn,Ue=ke-ti;var si=Cn.left-Be,oi=Cn.top-Ue;if(si<An.left||oi<An.top||si+Cn.width>An.right||oi+Cn.height>An.bottom)Be=ni,Ue=ii;else{let ci=He-Be,vi=We-Ue;Te.style.transform="translate("+ci+"px,"+vi+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,t){this.data[e]=t;const Oe=this.subscribers.map(async ke=>{await ke(e,t)});await Promise.allSettled(Oe)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e},stringToHTML:function(Te){var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,Oe=t.parseFromString(Te,"text/html");return Oe.body}var ke=document.createElement("div");return ke.innerHTML=Te,ke},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPgetFeatureInfo"),Te.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowGetFeatureInfoPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/désactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowGetFeatureInfoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowGetFeatureInfoClick(Oe)}),e},_createGetFeatureInfoPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPgetFeatureInfoPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createGetFeatureInfoPanelDivElement:function(){var Te=document.createElement("div");return Te.className="GPpanelBody gpf-panel__body fr-modal__body",Te},_createGetFeatureInfoPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader gpf-panel__header fr-modal__header",Te},_createGetFeatureInfoPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="GetFeatureInfo",Te},_createGetFeatureInfoPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(Oe){e.setAttribute("aria-pressed",!1),Te.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(Oe){e.setAttribute("aria-pressed",!1),Te.onCloseGetFeatureInfoClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createGetFeatureInfoWaitingDiv:function(){var Te=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return Te},_createGetFeatureInfoAccordionGroup:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPgetFeatureInfoAccordionGroup"),Te.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",Te},_createGetFeatureInfoLayerAccordion:function(Te){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${Te}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${Te}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${Te}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),t=e.firstChild,Oe=t.querySelector("button, button.fr-accordion__btn");return Oe.addEventListener("click",ke=>{ke.currentTarget.ariaExpanded=ke.currentTarget.ariaExpanded!=="true";var Be=document.getElementById(ke.currentTarget.getAttribute("aria-controls"));ke.currentTarget.ariaExpanded==="true"?(Be.classList.add("fr-collapse--expanded"),Be.classList.remove("GPelementHidden")):(Be.classList.remove("fr-collapse--expanded"),Be.classList.add("GPelementHidden"))}),t}},logger$z=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(t);var Oe=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),ke=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();Oe.appendChild(ke);var Be=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),Ue=this._createGetFeatureInfoPanelTitleElement();Be.appendChild(Ue);var He=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Be.appendChild(He),ke.appendChild(Be);var We=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return ke.appendChild(We),e.appendChild(Oe),logger$z.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners.singleclick=function(Oe){logger$z.trace(Oe),t.onMapClick(Oe)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.layers=e.map.getLayers().getArray().filter(Oe=>{if(Oe.isVisible(e.map.getView())&&Oe.getOpacity()>0)return Oe}).sort((Oe,ke)=>ke.getZIndex()-Oe.getZIndex()),this.layers.length>0){var t=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(t),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else return}getGetFeatureInfoLayer(e){var t={};let Oe=this.getLayerFormat(e);if(t={format:Oe,layer:e},Oe==="wmts"){let ke=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});t={...t,url:ke}}if(Oe==="wms"){let ke=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});t={...t,url:ke}}return t}getFeaturesAtClick(e){var t=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(Oe,ke){e==ke&&t.push(Oe)}),t}async getGetFeatureInfoContent(e){var t=null;if(e.format==="vector"){var Oe=this.getFeaturesAtClick(e.layer);return Oe&&(t=this.features2html(Oe)),t}else return fetch(e.url).then(ke=>ke.text()).then(ke=>{var Be=!1;if((ke.trim().length===0||ke.indexOf("ServiceExceptionReport")!==-1||ke.indexOf("java.lang.NullPointerException")!==-1||ke.indexOf("java.lang.OutOfMemoryError")!==-1||ke.indexOf("not queryable")!==-1||ke.indexOf("No data")!==-1||ke.indexOf("non interrogeable")!==-1)&&(Be=!0),Be)return null;var Ue=this.stringToHTML(ke);return Ue&&Ue.innerHTML&&Ue.innerHTML.trim().length>0?ke:null}).catch(ke=>(logger$z.log(ke),ke))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var t=e.layer.getProperties(),Oe=t.source,ke="";Oe&&(ke=Oe._title||Oe.name||t.title||t.name||Oe.url_||"Couche de données")}return ke}displayGetFeatureInfo(){var e=this.layers.map(Oe=>this.getGetFeatureInfoLayer(Oe)),t=e.map(Oe=>{var ke=this.getLayerTitle(Oe),Be=null,Ue=this._createGetFeatureInfoLayerAccordion(ke);Ue.style.display="none";var He=!0;return new AsyncData({...Oe,layername:ke,content:Be,contentDiv:Ue,pending:He})});for(let Oe=0;Oe<t.length;Oe++)this.getFeatureInfoAccordionGroup.append(t[Oe].data.contentDiv);t.forEach(Oe=>{Oe.subscribe((ke,Be)=>{ke=="content"&&(Oe.set("pending",!1),Oe.get("content")?(Oe.get("contentDiv").querySelector("div.fr-collapse").innerHTML=Oe.get("content"),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),Oe.get("contentDiv").style.display="block"):Oe.get("contentDiv").remove(),t.filter(Ue=>Ue.get("pending")===!0).length==0&&t.filter(Ue=>Ue.get("content")).length==0&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1))})}),t.forEach(Oe=>{this.getGetFeatureInfoContent(Oe.data).then(ke=>{Oe.set("content",ke)})})}getLayerFormat(e){var t=typeof e.getType=="function"?e.getType():null,Oe=e.getSource();if(t){if(t==="VECTOR"||t==="VECTOR_TILE")return"vector";if(t==="TILE")return Oe.tileGrid?"wmts":"wms";if(t==="IMAGE")return"wms"}else{if(Oe instanceof TileWMS||Oe instanceof ImageWMS)return"wms";if(Oe instanceof WMTS$1)return"wmts";if(Oe instanceof VectorSource||Oe instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var t=document.createElement("div");return e.forEach(function(Oe){var ke=Oe.getProperties();if(ke.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",ke.render);else{if(ke.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",ke.name),t.appendChild(Be)}if(ke.hasOwnProperty("description")){var Ue=document.createElement("div");Ue.className="gp-att-description-div",Ue.insertAdjacentHTML("afterbegin",ke.description),t.appendChild(Ue)}var He=null,We=!1,Cn=null,An=null,En=null,Sn=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(He in ke)if(ke[He]!==void 0&&Sn.indexOf(He)===-1){We||(Cn=document.createElement("div"),Cn.className="gp-att-others-div",An=document.createElement("ul"),We=!0),En=document.createElement("li");var Tn=document.createElement("span");Tn.className="gp-attname-others-span",Tn.appendChild(document.createTextNode(He+" : ")),En.appendChild(Tn),En.appendChild(document.createTextNode(ke[He])),An.appendChild(En)}An&&(Cn.appendChild(An),t.appendChild(Cn))}}),t.hasChildNodes()?t=t.innerHTML:t="",t}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$z.trace(e)}onCloseGetFeatureInfoClick(e){logger$z.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$z.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(Te,e){var t=Te%e;return t*e<0?t+e:t},decimalToDMS:function(Te,e,t){var Oe=this.modulo(Te+180,360)-180,ke=Math.abs(3600*Oe),Be=t||0,Ue=Math.pow(10,Be),He=Math.floor(ke/3600),We=Math.floor((ke-He*3600)/60),Cn=ke-He*3600-We*60;Cn=Math.ceil(Cn*Ue)/Ue,Cn>=60&&(Cn=0,We+=1),We>=60&&(We=0,He+=1);var An=e.charAt(Oe<0?1:0);return{d:He,m:We,s:Cn,direction:An}},dmsToDecimal(Te,e,t,Oe){var ke=Te+e/60+t/3600;return(Oe=="S"||Oe=="O")&&(ke=ke*-1),ke},coordinateToDecimal(Te){var e={};return e.lat=Te[1].toFixed(6),e.lng=Te[0].toFixed(6),e.unit="°",e},coordinateToDMS(Te){return{lng:MathUtils.decimalToDMS(Te[0],"EO",2),lat:MathUtils.decimalToDMS(Te[1],"NS",2),unit:"DMS"}},coordinateToRad(Te){var e={},t=.017453292519943295;return e.lng=Te[0]*t,e.lng=e.lng.toFixed(8),e.lat=Te[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(Te){var e={},t=1.1111111111111112;return e.lng=Te[0]*t,e.lng=e.lng.toFixed(8),e.lat=Te[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(Te){var e={};return e.x=Te[0].toFixed(2),e.y=Te[1].toFixed(2),e.unit="m",e},coordinateToKMeter(Te){var e={};return e.x=(Te[0]/1e3).toFixed(2),e.y=(Te[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(Te,e){var t=e||10,Oe=parseInt(Te,t);return!isNaN(Oe)&&isFinite(Oe)?Oe:null},isInteger:function(Te){if(isNaN(Te))return!1;var e=parseFloat(Te);return(e|0)===e},toFloat:function(Te){var e=parseFloat(Te);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(Te){var e=15,t=Te.service,Oe=Te.fields,ke=Te.type,Be={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&ke==="PositionOfInterest"&&(e=Be[Oe.classification]),t==="GeocodedLocation"&&ke==="PositionOfInterest"&&(e=Be[Oe.importance]||14),ke==="StreetAddress"&&(e=17),ke==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(Te){var e=Te.placeAttributes;if(e.label)return e.label;if(Te.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return Te.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:Te.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(Te){if(Te.fullText)return Te.fullText;var e=[];return e.push(Te.street||""),e.push(Te.postalCode||""),e.push(Te.commune||""),Te.type==="PositionOfInterest"&&(e.push(Te.poi||""),e.push(Te.kind||"")),e.join(" - ")}};function globals(Te){Te("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),Te("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),Te("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)Te("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),Te("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");Te.WGS84=Te["EPSG:4326"],Te["EPSG:3785"]=Te["EPSG:3857"],Te.GOOGLE=Te["EPSG:3857"],Te["EPSG:900913"]=Te["EPSG:3857"],Te["EPSG:102113"]=Te["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(Te,e){if(Te[e])return Te[e];for(var t=Object.keys(Te),Oe=e.toLowerCase().replace(ignoredChar,""),ke=-1,Be,Ue;++ke<t.length;)if(Be=t[ke],Ue=Be.toLowerCase().replace(ignoredChar,""),Ue===Oe)return Te[Be]}function projStr(Te){var e={},t=Te.split("+").map(function(He){return He.trim()}).filter(function(He){return He}).reduce(function(He,We){var Cn=We.split("=");return Cn.push(!0),He[Cn[0].toLowerCase()]=Cn[1],He},{}),Oe,ke,Be,Ue={proj:"projName",datum:"datumCode",rf:function(He){e.rf=parseFloat(He)},lat_0:function(He){e.lat0=He*D2R$1},lat_1:function(He){e.lat1=He*D2R$1},lat_2:function(He){e.lat2=He*D2R$1},lat_ts:function(He){e.lat_ts=He*D2R$1},lon_0:function(He){e.long0=He*D2R$1},lon_1:function(He){e.long1=He*D2R$1},lon_2:function(He){e.long2=He*D2R$1},alpha:function(He){e.alpha=parseFloat(He)*D2R$1},gamma:function(He){e.rectified_grid_angle=parseFloat(He)},lonc:function(He){e.longc=He*D2R$1},x_0:function(He){e.x0=parseFloat(He)},y_0:function(He){e.y0=parseFloat(He)},k_0:function(He){e.k0=parseFloat(He)},k:function(He){e.k0=parseFloat(He)},a:function(He){e.a=parseFloat(He)},b:function(He){e.b=parseFloat(He)},r:function(He){e.a=e.b=parseFloat(He)},r_a:function(){e.R_A=!0},zone:function(He){e.zone=parseInt(He,10)},south:function(){e.utmSouth=!0},towgs84:function(He){e.datum_params=He.split(",").map(function(We){return parseFloat(We)})},to_meter:function(He){e.to_meter=parseFloat(He)},units:function(He){e.units=He;var We=match(units,He);We&&(e.to_meter=We.to_meter)},from_greenwich:function(He){e.from_greenwich=He*D2R$1},pm:function(He){var We=match(exports$2,He);e.from_greenwich=(We||parseFloat(He))*D2R$1},nadgrids:function(He){He==="@null"?e.datumCode="none":e.nadgrids=He},axis:function(He){var We="ewnsud";He.length===3&&We.indexOf(He.substr(0,1))!==-1&&We.indexOf(He.substr(1,1))!==-1&&We.indexOf(He.substr(2,1))!==-1&&(e.axis=He)},approx:function(){e.approx=!0}};for(Oe in t)ke=t[Oe],Oe in Ue?(Be=Ue[Oe],typeof Be=="function"?Be(ke):e[Be]=ke):e[Oe]=ke;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(Te){if(typeof Te!="string")throw new Error("not a string");this.text=Te.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var Te=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(Te);){if(this.place>=this.text.length)return;Te=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(Te);case KEYWORD:return this.keyword(Te);case QUOTED:return this.quoted(Te);case AFTERQUOTE:return this.afterquote(Te);case NUMBER:return this.number(Te);case ENDED:return}};Parser.prototype.afterquote=function(Te){if(Te==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(Te)){this.word=this.word.trim(),this.afterItem(Te);return}throw new Error(`havn't handled "`+Te+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(Te){if(Te===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(Te==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(Te){if(digets.test(Te)){this.word+=Te;return}if(endThings.test(Te)){this.word=parseFloat(this.word),this.afterItem(Te);return}throw new Error(`havn't handled "`+Te+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(Te){if(Te==='"'){this.state=AFTERQUOTE;return}this.word+=Te};Parser.prototype.keyword=function(Te){if(keyword.test(Te)){this.word+=Te;return}if(Te==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(Te)){this.afterItem(Te);return}throw new Error(`havn't handled "`+Te+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(Te){if(latin.test(Te)){this.word=Te,this.state=KEYWORD;return}if(Te==='"'){this.word="",this.state=QUOTED;return}if(digets.test(Te)){this.word=Te,this.state=NUMBER;return}if(endThings.test(Te)){this.afterItem(Te);return}throw new Error(`havn't handled "`+Te+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(Te){var e=new Parser(Te);return e.output()}function mapit(Te,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var Oe=e?{}:Te,ke=t.reduce(function(Be,Ue){return sExpr(Ue,Be),Be},Oe);e&&(Te[e]=ke)}function sExpr(Te,e){if(!Array.isArray(Te)){e[Te]=!0;return}var t=Te.shift();if(t==="PARAMETER"&&(t=Te.shift()),Te.length===1){if(Array.isArray(Te[0])){e[t]={},sExpr(Te[0],e[t]);return}e[t]=Te[0];return}if(!Te.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=Te;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(Te);return}Array.isArray(t)||(e[t]={});var Oe;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:Te[0].toLowerCase(),convert:Te[1]},Te.length===3&&sExpr(Te[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:Te[0],a:Te[1],rf:Te[2]},Te.length===4&&sExpr(Te[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":Te[0]=["name",Te[0]],mapit(e,t,Te);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":Te[0]=["name",Te[0]],mapit(e,t,Te),e[t].type=t;return;default:for(Oe=-1;++Oe<Te.length;)if(!Array.isArray(Te[Oe]))return sExpr(Te,e[t]);return mapit(e,t,Te)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(Te,e){var t=e[0],Oe=e[1];!(t in Te)&&Oe in Te&&(Te[t]=Te[Oe],e.length===3&&(Te[t]=e[2](Te[t])))}function d2r(Te){return Te*D2R}function cleanWKT(Te){for(var e=Object.keys(Te),t=0,Oe=e.length;t<Oe;++t){var ke=e[t];knownTypes.indexOf(ke)!==-1&&setPropertiesFromWkt(Te[ke]),typeof Te[ke]=="object"&&cleanWKT(Te[ke])}}function setPropertiesFromWkt(Te){if(Te.AUTHORITY){var e=Object.keys(Te.AUTHORITY)[0];e&&e in Te.AUTHORITY&&(Te.title=e+":"+Te.AUTHORITY[e])}if(Te.type==="GEOGCS"?Te.projName="longlat":Te.type==="LOCAL_CS"?(Te.projName="identity",Te.local=!0):typeof Te.PROJECTION=="object"?Te.projName=Object.keys(Te.PROJECTION)[0]:Te.projName=Te.PROJECTION,Te.AXIS){for(var t="",Oe=0,ke=Te.AXIS.length;Oe<ke;++Oe){var Be=[Te.AXIS[Oe][0].toLowerCase(),Te.AXIS[Oe][1].toLowerCase()];Be[0].indexOf("north")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="north"?t+="n":Be[0].indexOf("south")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="south"?t+="s":Be[0].indexOf("east")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="east"?t+="e":(Be[0].indexOf("west")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(Te.axis=t)}Te.UNIT&&(Te.units=Te.UNIT.name.toLowerCase(),Te.units==="metre"&&(Te.units="meter"),Te.UNIT.convert&&(Te.type==="GEOGCS"?Te.DATUM&&Te.DATUM.SPHEROID&&(Te.to_meter=Te.UNIT.convert*Te.DATUM.SPHEROID.a):Te.to_meter=Te.UNIT.convert));var Ue=Te.GEOGCS;Te.type==="GEOGCS"&&(Ue=Te),Ue&&(Ue.DATUM?Te.datumCode=Ue.DATUM.name.toLowerCase():Te.datumCode=Ue.name.toLowerCase(),Te.datumCode.slice(0,2)==="d_"&&(Te.datumCode=Te.datumCode.slice(2)),Te.datumCode==="new_zealand_1949"&&(Te.datumCode="nzgd49"),(Te.datumCode==="wgs_1984"||Te.datumCode==="world_geodetic_system_1984")&&(Te.PROJECTION==="Mercator_Auxiliary_Sphere"&&(Te.sphere=!0),Te.datumCode="wgs84"),Te.datumCode==="belge_1972"&&(Te.datumCode="rnb72"),Ue.DATUM&&Ue.DATUM.SPHEROID&&(Te.ellps=Ue.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),Te.ellps.toLowerCase().slice(0,13)==="international"&&(Te.ellps="intl"),Te.a=Ue.DATUM.SPHEROID.a,Te.rf=parseFloat(Ue.DATUM.SPHEROID.rf,10)),Ue.DATUM&&Ue.DATUM.TOWGS84&&(Te.datum_params=Ue.DATUM.TOWGS84),~Te.datumCode.indexOf("osgb_1936")&&(Te.datumCode="osgb36"),~Te.datumCode.indexOf("osni_1952")&&(Te.datumCode="osni52"),(~Te.datumCode.indexOf("tm65")||~Te.datumCode.indexOf("geodetic_datum_of_1965"))&&(Te.datumCode="ire65"),Te.datumCode==="ch1903+"&&(Te.datumCode="ch1903"),~Te.datumCode.indexOf("israel")&&(Te.datumCode="isr93")),Te.b&&!isFinite(Te.b)&&(Te.b=Te.a);function He(An){var En=Te.to_meter||1;return An*En}var We=function(An){return rename(Te,An)},Cn=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",He],["y0","false_northing",He],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];Cn.forEach(We),!Te.long0&&Te.longc&&(Te.projName==="Albers_Conic_Equal_Area"||Te.projName==="Lambert_Azimuthal_Equal_Area")&&(Te.long0=Te.longc),!Te.lat_ts&&Te.lat1&&(Te.projName==="Stereographic_South_Pole"||Te.projName==="Polar Stereographic (variant B)")?(Te.lat0=d2r(Te.lat1>0?90:-90),Te.lat_ts=Te.lat1):!Te.lat_ts&&Te.lat0&&Te.projName==="Polar_Stereographic"&&(Te.lat_ts=Te.lat0,Te.lat0=d2r(Te.lat0>0?90:-90))}function wkt(Te){var e=parseString(Te),t=e[0],Oe={};return sExpr(e,Oe),cleanWKT(Oe),Oe[t]}function defs(Te){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[Te]=projStr(arguments[1]):defs[Te]=wkt(arguments[1]):defs[Te]=t}else if(arguments.length===1){if(Array.isArray(Te))return Te.map(function(Oe){Array.isArray(Oe)?defs.apply(e,Oe):defs(Oe)});if(typeof Te=="string"){if(Te in defs)return defs[Te]}else"EPSG"in Te?defs["EPSG:"+Te.EPSG]=Te:"ESRI"in Te?defs["ESRI:"+Te.ESRI]=Te:"IAU2000"in Te?defs["IAU2000:"+Te.IAU2000]=Te:console.log(Te);return}}globals(defs);function testObj(Te){return typeof Te=="string"}function testDef(Te){return Te in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(Te){return codeWords.some(function(e){return Te.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(Te){var e=match(Te,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(Te){var e=match(Te,"extension");if(e)return match(e,"proj4")}function testProj(Te){return Te[0]==="+"}function parse(Te){if(testObj(Te)){if(testDef(Te))return defs[Te];if(testWKT(Te)){var e=wkt(Te);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(Te))return projStr(Te)}else return Te}function extend(Te,e){Te=Te||{};var t,Oe;if(!e)return Te;for(Oe in e)t=e[Oe],t!==void 0&&(Te[Oe]=t);return Te}function msfnz(Te,e,t){var Oe=Te*e;return t/Math.sqrt(1-Oe*Oe)}function sign(Te){return Te<0?-1:1}function adjust_lon(Te){return Math.abs(Te)<=SPI?Te:Te-sign(Te)*TWO_PI}function tsfnz(Te,e,t){var Oe=Te*t,ke=.5*Te;return Oe=Math.pow((1-Oe)/(1+Oe),ke),Math.tan(.5*(HALF_PI-e))/Oe}function phi2z(Te,e){for(var t=.5*Te,Oe,ke,Be=HALF_PI-2*Math.atan(e),Ue=0;Ue<=15;Ue++)if(Oe=Te*Math.sin(Be),ke=HALF_PI-2*Math.atan(e*Math.pow((1-Oe)/(1+Oe),t))-Be,Be+=ke,Math.abs(ke)<=1e-10)return Be;return-9999}function init$x(){var Te=this.b/this.a;this.es=1-Te*Te,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(Te){var e=Te.x,t=Te.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var Oe,ke;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),ke=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var Be=Math.sin(t),Ue=tsfnz(this.e,t,Be);Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),ke=this.y0-this.a*this.k0*Math.log(Ue)}return Te.x=Oe,Te.y=ke,Te}function inverse$v(Te){var e=Te.x-this.x0,t=Te.y-this.y0,Oe,ke;if(this.sphere)ke=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var Be=Math.exp(-t/(this.a*this.k0));if(ke=phi2z(this.e,Be),ke===-9999)return null}return Oe=adjust_lon(this.long0+e/(this.a*this.k0)),Te.x=Oe,Te.y=ke,Te}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(Te){return Te}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(Te,e){var t=projStore.length;return Te.names?(projStore[t]=Te,Te.names.forEach(function(Oe){names$v[Oe.toLowerCase()]=t}),this):(console.log(e),!0)}function get(Te){if(!Te)return!1;var e=Te.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(Te,e,t,Oe){var ke=Te*Te,Be=e*e,Ue=(ke-Be)/ke,He=0;Oe?(Te*=1-Ue*(SIXTH+Ue*(RA4+Ue*RA6)),ke=Te*Te,Ue=0):He=Math.sqrt(Ue);var We=(ke-Be)/Be;return{es:Ue,e:He,ep2:We}}function sphere(Te,e,t,Oe,ke){if(!Te){var Be=match(exports$1,Oe);Be||(Be=WGS84),Te=Be.a,e=Be.b,t=Be.rf}return t&&!e&&(e=(1-1/t)*Te),(t===0||Math.abs(Te-e)<EPSLN)&&(ke=!0,e=Te),{a:Te,b:e,rf:t,sphere:ke}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(Te,e,t,Oe,ke,Be,Ue){var He={};return Te===void 0||Te==="none"?He.datum_type=PJD_NODATUM:He.datum_type=PJD_WGS84,e&&(He.datum_params=e.map(parseFloat),(He.datum_params[0]!==0||He.datum_params[1]!==0||He.datum_params[2]!==0)&&(He.datum_type=PJD_3PARAM),He.datum_params.length>3&&(He.datum_params[3]!==0||He.datum_params[4]!==0||He.datum_params[5]!==0||He.datum_params[6]!==0)&&(He.datum_type=PJD_7PARAM,He.datum_params[3]*=SEC_TO_RAD,He.datum_params[4]*=SEC_TO_RAD,He.datum_params[5]*=SEC_TO_RAD,He.datum_params[6]=He.datum_params[6]/1e6+1)),Ue&&(He.datum_type=PJD_GRIDSHIFT,He.grids=Ue),He.a=t,He.b=Oe,He.es=ke,He.ep2=Be,He}var loadedNadgrids={};function nadgrid(Te,e){var t=new DataView(e),Oe=detectLittleEndian(t),ke=readHeader(t,Oe),Be=readSubgrids(t,ke,Oe),Ue={header:ke,subgrids:Be};return loadedNadgrids[Te]=Ue,Ue}function getNadgrids(Te){if(Te===void 0)return null;var e=Te.split(",");return e.map(parseNadgridString)}function parseNadgridString(Te){if(Te.length===0)return null;var e=Te[0]==="@";return e&&(Te=Te.slice(1)),Te==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:Te,mandatory:!e,grid:loadedNadgrids[Te]||null,isNull:!1}}function secondsToRadians(Te){return Te/3600*Math.PI/180}function detectLittleEndian(Te){var e=Te.getInt32(8,!1);return e===11?!1:(e=Te.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(Te,e){return{nFields:Te.getInt32(8,e),nSubgridFields:Te.getInt32(24,e),nSubgrids:Te.getInt32(40,e),shiftType:decodeString(Te,56,64).trim(),fromSemiMajorAxis:Te.getFloat64(120,e),fromSemiMinorAxis:Te.getFloat64(136,e),toSemiMajorAxis:Te.getFloat64(152,e),toSemiMinorAxis:Te.getFloat64(168,e)}}function decodeString(Te,e,t){return String.fromCharCode.apply(null,new Uint8Array(Te.buffer.slice(e,t)))}function readSubgrids(Te,e,t){for(var Oe=176,ke=[],Be=0;Be<e.nSubgrids;Be++){var Ue=readGridHeader(Te,Oe,t),He=readGridNodes(Te,Oe,Ue,t),We=Math.round(1+(Ue.upperLongitude-Ue.lowerLongitude)/Ue.longitudeInterval),Cn=Math.round(1+(Ue.upperLatitude-Ue.lowerLatitude)/Ue.latitudeInterval);ke.push({ll:[secondsToRadians(Ue.lowerLongitude),secondsToRadians(Ue.lowerLatitude)],del:[secondsToRadians(Ue.longitudeInterval),secondsToRadians(Ue.latitudeInterval)],lim:[We,Cn],count:Ue.gridNodeCount,cvs:mapNodes(He)}),Oe+=176+Ue.gridNodeCount*16}return ke}function mapNodes(Te){return Te.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(Te,e,t){return{name:decodeString(Te,e+8,e+16).trim(),parent:decodeString(Te,e+24,e+24+8).trim(),lowerLatitude:Te.getFloat64(e+72,t),upperLatitude:Te.getFloat64(e+88,t),lowerLongitude:Te.getFloat64(e+104,t),upperLongitude:Te.getFloat64(e+120,t),latitudeInterval:Te.getFloat64(e+136,t),longitudeInterval:Te.getFloat64(e+152,t),gridNodeCount:Te.getInt32(e+168,t)}}function readGridNodes(Te,e,t,Oe){for(var ke=e+176,Be=16,Ue=[],He=0;He<t.gridNodeCount;He++){var We={latitudeShift:Te.getFloat32(ke+He*Be,Oe),longitudeShift:Te.getFloat32(ke+He*Be+4,Oe),latitudeAccuracy:Te.getFloat32(ke+He*Be+8,Oe),longitudeAccuracy:Te.getFloat32(ke+He*Be+12,Oe)};Ue.push(We)}return Ue}function Projection(Te,e){if(!(this instanceof Projection))return new Projection(Te);e=e||function(Cn){if(Cn)throw Cn};var t=parse(Te);if(typeof t!="object"){e("Could not parse to valid json: "+Te);return}var Oe=Projection.projections.get(t.projName);if(!Oe){e("Could not get projection name from: "+Te);return}if(t.datumCode&&t.datumCode!=="none"){var ke=match(datums,t.datumCode);ke&&(t.datum_params=t.datum_params||(ke.towgs84?ke.towgs84.split(","):null),t.ellps=ke.ellipse,t.datumName=ke.datumName?ke.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var Be=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),Ue=eccentricity(Be.a,Be.b,Be.rf,t.R_A),He=getNadgrids(t.nadgrids),We=t.datum||datum(t.datumCode,t.datum_params,Be.a,Be.b,Ue.es,Ue.ep2,He);extend(this,t),extend(this,Oe),this.a=Be.a,this.b=Be.b,this.rf=Be.rf,this.sphere=Be.sphere,this.es=Ue.es,this.e=Ue.e,this.ep2=Ue.ep2,this.datum=We,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(Te,e){return Te.datum_type!==e.datum_type||Te.a!==e.a||Math.abs(Te.es-e.es)>5e-11?!1:Te.datum_type===PJD_3PARAM?Te.datum_params[0]===e.datum_params[0]&&Te.datum_params[1]===e.datum_params[1]&&Te.datum_params[2]===e.datum_params[2]:Te.datum_type===PJD_7PARAM?Te.datum_params[0]===e.datum_params[0]&&Te.datum_params[1]===e.datum_params[1]&&Te.datum_params[2]===e.datum_params[2]&&Te.datum_params[3]===e.datum_params[3]&&Te.datum_params[4]===e.datum_params[4]&&Te.datum_params[5]===e.datum_params[5]&&Te.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(Te,e,t){var Oe=Te.x,ke=Te.y,Be=Te.z?Te.z:0,Ue,He,We,Cn;if(ke<-HALF_PI&&ke>-1.001*HALF_PI)ke=-HALF_PI;else if(ke>HALF_PI&&ke<1.001*HALF_PI)ke=HALF_PI;else{if(ke<-HALF_PI)return{x:-1/0,y:-1/0,z:Te.z};if(ke>HALF_PI)return{x:1/0,y:1/0,z:Te.z}}return Oe>Math.PI&&(Oe-=2*Math.PI),He=Math.sin(ke),Cn=Math.cos(ke),We=He*He,Ue=t/Math.sqrt(1-e*We),{x:(Ue+Be)*Cn*Math.cos(Oe),y:(Ue+Be)*Cn*Math.sin(Oe),z:(Ue*(1-e)+Be)*He}}function geocentricToGeodetic(Te,e,t,Oe){var ke=1e-12,Be=ke*ke,Ue=30,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si,oi=Te.x,ci=Te.y,vi=Te.z?Te.z:0,pi,fi,Mi;if(He=Math.sqrt(oi*oi+ci*ci),We=Math.sqrt(oi*oi+ci*ci+vi*vi),He/t<ke){if(pi=0,We/t<ke)return fi=HALF_PI,Mi=-Oe,{x:Te.x,y:Te.y,z:Te.z}}else pi=Math.atan2(ci,oi);Cn=vi/We,An=He/We,En=1/Math.sqrt(1-e*(2-e)*An*An),Ln=An*(1-e)*En,Bn=Cn*En,si=0;do si++,Tn=t/Math.sqrt(1-e*Bn*Bn),Mi=He*Ln+vi*Bn-Tn*(1-e*Bn*Bn),Sn=e*Tn/(Tn+Mi),En=1/Math.sqrt(1-Sn*(2-Sn)*An*An),ti=An*(1-Sn)*En,ni=Cn*En,ii=ni*Ln-ti*Bn,Ln=ti,Bn=ni;while(ii*ii>Be&&si<Ue);return fi=Math.atan(ni/Math.abs(ti)),{x:pi,y:fi,z:Mi}}function geocentricToWgs84(Te,e,t){if(e===PJD_3PARAM)return{x:Te.x+t[0],y:Te.y+t[1],z:Te.z+t[2]};if(e===PJD_7PARAM){var Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],He=t[4],We=t[5],Cn=t[6];return{x:Cn*(Te.x-We*Te.y+He*Te.z)+Oe,y:Cn*(We*Te.x+Te.y-Ue*Te.z)+ke,z:Cn*(-He*Te.x+Ue*Te.y+Te.z)+Be}}}function geocentricFromWgs84(Te,e,t){if(e===PJD_3PARAM)return{x:Te.x-t[0],y:Te.y-t[1],z:Te.z-t[2]};if(e===PJD_7PARAM){var Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],He=t[4],We=t[5],Cn=t[6],An=(Te.x-Oe)/Cn,En=(Te.y-ke)/Cn,Sn=(Te.z-Be)/Cn;return{x:An+We*En-He*Sn,y:-We*An+En+Ue*Sn,z:He*An-Ue*En+Sn}}}function checkParams(Te){return Te===PJD_3PARAM||Te===PJD_7PARAM}function datum_transform(Te,e,t){if(compareDatums(Te,e)||Te.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var Oe=Te.a,ke=Te.es;if(Te.datum_type===PJD_GRIDSHIFT){var Be=applyGridShift(Te,!1,t);if(Be!==0)return;Oe=SRS_WGS84_SEMIMAJOR,ke=SRS_WGS84_ESQUARED}var Ue=e.a,He=e.b,We=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(Ue=SRS_WGS84_SEMIMAJOR,He=SRS_WGS84_SEMIMINOR,We=SRS_WGS84_ESQUARED),ke===We&&Oe===Ue&&!checkParams(Te.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,ke,Oe),checkParams(Te.datum_type)&&(t=geocentricToWgs84(t,Te.datum_type,Te.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,We,Ue,He),e.datum_type===PJD_GRIDSHIFT){var Cn=applyGridShift(e,!0,t);if(Cn!==0)return}return t}function applyGridShift(Te,e,t){if(Te.grids===null||Te.grids.length===0)return console.log("Grid shift grids not found"),-1;var Oe={x:-t.x,y:t.y},ke={x:Number.NaN,y:Number.NaN},Be=[];e:for(var Ue=0;Ue<Te.grids.length;Ue++){var He=Te.grids[Ue];if(Be.push(He.name),He.isNull){ke=Oe;break}if(He.mandatory,He.grid===null){if(He.mandatory)return console.log("Unable to find mandatory grid '"+He.name+"'"),-1;continue}for(var We=He.grid.subgrids,Cn=0,An=We.length;Cn<An;Cn++){var En=We[Cn],Sn=(Math.abs(En.del[1])+Math.abs(En.del[0]))/1e4,Tn=En.ll[0]-Sn,Ln=En.ll[1]-Sn,Bn=En.ll[0]+(En.lim[0]-1)*En.del[0]+Sn,ti=En.ll[1]+(En.lim[1]-1)*En.del[1]+Sn;if(!(Ln>Oe.y||Tn>Oe.x||ti<Oe.y||Bn<Oe.x)&&(ke=applySubgridShift(Oe,e,En),!isNaN(ke.x)))break e}}return isNaN(ke.x)?(console.log("Failed to find a grid shift table for location '"+-Oe.x*R2D+" "+Oe.y*R2D+" tried: '"+Be+"'"),-1):(t.x=-ke.x,t.y=ke.y,0)}function applySubgridShift(Te,e,t){var Oe={x:Number.NaN,y:Number.NaN};if(isNaN(Te.x))return Oe;var ke={x:Te.x,y:Te.y};ke.x-=t.ll[0],ke.y-=t.ll[1],ke.x=adjust_lon(ke.x-Math.PI)+Math.PI;var Be=nadInterpolate(ke,t);if(e){if(isNaN(Be.x))return Oe;Be.x=ke.x-Be.x,Be.y=ke.y-Be.y;var Ue=9,He=1e-12,We,Cn;do{if(Cn=nadInterpolate(Be,t),isNaN(Cn.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}We={x:ke.x-(Cn.x+Be.x),y:ke.y-(Cn.y+Be.y)},Be.x+=We.x,Be.y+=We.y}while(Ue--&&Math.abs(We.x)>He&&Math.abs(We.y)>He);if(Ue<0)return console.log("Inverse grid shift iterator failed to converge."),Oe;Oe.x=adjust_lon(Be.x+t.ll[0]),Oe.y=Be.y+t.ll[1]}else isNaN(Be.x)||(Oe.x=Te.x+Be.x,Oe.y=Te.y+Be.y);return Oe}function nadInterpolate(Te,e){var t={x:Te.x/e.del[0],y:Te.y/e.del[1]},Oe={x:Math.floor(t.x),y:Math.floor(t.y)},ke={x:t.x-1*Oe.x,y:t.y-1*Oe.y},Be={x:Number.NaN,y:Number.NaN},Ue;if(Oe.x<0||Oe.x>=e.lim[0]||Oe.y<0||Oe.y>=e.lim[1])return Be;Ue=Oe.y*e.lim[0]+Oe.x;var He={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue++;var We={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue+=e.lim[0];var Cn={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue--;var An={x:e.cvs[Ue][0],y:e.cvs[Ue][1]},En=ke.x*ke.y,Sn=ke.x*(1-ke.y),Tn=(1-ke.x)*(1-ke.y),Ln=(1-ke.x)*ke.y;return Be.x=Tn*He.x+Sn*We.x+Ln*An.x+En*Cn.x,Be.y=Tn*He.y+Sn*We.y+Ln*An.y+En*Cn.y,Be}function adjust_axis(Te,e,t){var Oe=t.x,ke=t.y,Be=t.z||0,Ue,He,We,Cn={};for(We=0;We<3;We++)if(!(e&&We===2&&t.z===void 0))switch(We===0?(Ue=Oe,"ew".indexOf(Te.axis[We])!==-1?He="x":He="y"):We===1?(Ue=ke,"ns".indexOf(Te.axis[We])!==-1?He="y":He="x"):(Ue=Be,He="z"),Te.axis[We]){case"e":Cn[He]=Ue;break;case"w":Cn[He]=-Ue;break;case"n":Cn[He]=Ue;break;case"s":Cn[He]=-Ue;break;case"u":t[He]!==void 0&&(Cn.z=Ue);break;case"d":t[He]!==void 0&&(Cn.z=-Ue);break;default:return null}return Cn}function common(Te){var e={x:Te[0],y:Te[1]};return Te.length>2&&(e.z=Te[2]),Te.length>3&&(e.m=Te[3]),e}function checkSanity(Te){checkCoord(Te.x),checkCoord(Te.y)}function checkCoord(Te){if(typeof Number.isFinite=="function"){if(Number.isFinite(Te))return;throw new TypeError("coordinates must be finite numbers")}if(typeof Te!="number"||Te!==Te||!isFinite(Te))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(Te,e){return(Te.datum.datum_type===PJD_3PARAM||Te.datum.datum_type===PJD_7PARAM||Te.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&Te.datumCode!=="WGS84"}function transform(Te,e,t,Oe){var ke;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var Be=t.z!==void 0;if(checkSanity(t),Te.datum&&e.datum&&checkNotWGS(Te,e)&&(ke=new Projection("WGS84"),t=transform(Te,ke,t,Oe),Te=ke),Oe&&Te.axis!=="enu"&&(t=adjust_axis(Te,!1,t)),Te.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(Te.to_meter&&(t={x:t.x*Te.to_meter,y:t.y*Te.to_meter,z:t.z||0}),t=Te.inverse(t),!t)return;if(Te.from_greenwich&&(t.x+=Te.from_greenwich),t=datum_transform(Te.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),Oe&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!Be&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(Te,e,t,Oe){var ke,Be,Ue;return Array.isArray(t)?(ke=transform(Te,e,t,Oe)||{x:NaN,y:NaN},t.length>2?typeof Te.name<"u"&&Te.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof ke.z=="number"?[ke.x,ke.y,ke.z].concat(t.slice(3)):[ke.x,ke.y,t[2]].concat(t.slice(3)):[ke.x,ke.y].concat(t.slice(2)):[ke.x,ke.y]):(Be=transform(Te,e,t,Oe),Ue=Object.keys(t),Ue.length===2||Ue.forEach(function(He){if(typeof Te.name<"u"&&Te.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(He==="x"||He==="y"||He==="z")return}else if(He==="x"||He==="y")return;Be[He]=t[He]}),Be)}function checkProj(Te){return Te instanceof Projection?Te:Te.oProj?Te.oProj:Projection(Te)}function proj4(Te,e,t){Te=checkProj(Te);var Oe=!1,ke;return typeof e>"u"?(e=Te,Te=wgs84,Oe=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=Te,Te=wgs84,Oe=!0),e=checkProj(e),t?transformer(Te,e,t):(ke={forward:function(Be,Ue){return transformer(Te,e,Be,Ue)},inverse:function(Be,Ue){return transformer(e,Te,Be,Ue)}},Oe&&(ke.oProj=e),ke)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$2=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(Te,e){return e=e||5,encode(LLtoUTM({lat:Te[1],lon:Te[0]}),e)}function inverse$u(Te){var e=UTMtoLL(decode(Te.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(Te){var e=UTMtoLL(decode(Te.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(Te){return Te*(Math.PI/180)}function radToDeg(Te){return 180*(Te/Math.PI)}function LLtoUTM(Te){var e=Te.lat,t=Te.lon,Oe=6378137,ke=.00669438,Be=.9996,Ue,He,We,Cn,An,En,Sn,Tn=degToRad(e),Ln=degToRad(t),Bn,ti;ti=Math.floor((t+180)/6)+1,t===180&&(ti=60),e>=56&&e<64&&t>=3&&t<12&&(ti=32),e>=72&&e<84&&(t>=0&&t<9?ti=31:t>=9&&t<21?ti=33:t>=21&&t<33?ti=35:t>=33&&t<42&&(ti=37)),Ue=(ti-1)*6-180+3,Bn=degToRad(Ue),He=ke/(1-ke),We=Oe/Math.sqrt(1-ke*Math.sin(Tn)*Math.sin(Tn)),Cn=Math.tan(Tn)*Math.tan(Tn),An=He*Math.cos(Tn)*Math.cos(Tn),En=Math.cos(Tn)*(Ln-Bn),Sn=Oe*((1-ke/4-3*ke*ke/64-5*ke*ke*ke/256)*Tn-(3*ke/8+3*ke*ke/32+45*ke*ke*ke/1024)*Math.sin(2*Tn)+(15*ke*ke/256+45*ke*ke*ke/1024)*Math.sin(4*Tn)-35*ke*ke*ke/3072*Math.sin(6*Tn));var ni=Be*We*(En+(1-Cn+An)*En*En*En/6+(5-18*Cn+Cn*Cn+72*An-58*He)*En*En*En*En*En/120)+5e5,ii=Be*(Sn+We*Math.tan(Tn)*(En*En/2+(5-Cn+9*An+4*An*An)*En*En*En*En/24+(61-58*Cn+Cn*Cn+600*An-330*He)*En*En*En*En*En*En/720));return e<0&&(ii+=1e7),{northing:Math.round(ii),easting:Math.round(ni),zoneNumber:ti,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(Te){var e=Te.northing,t=Te.easting,Oe=Te.zoneLetter,ke=Te.zoneNumber;if(ke<0||ke>60)return null;var Be=.9996,Ue=6378137,He=.00669438,We,Cn=(1-Math.sqrt(1-He))/(1+Math.sqrt(1-He)),An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si=t-5e5,oi=e;Oe<"N"&&(oi-=1e7),ti=(ke-1)*6-180+3,We=He/(1-He),Bn=oi/Be,ni=Bn/(Ue*(1-He/4-3*He*He/64-5*He*He*He/256)),ii=ni+(3*Cn/2-27*Cn*Cn*Cn/32)*Math.sin(2*ni)+(21*Cn*Cn/16-55*Cn*Cn*Cn*Cn/32)*Math.sin(4*ni)+151*Cn*Cn*Cn/96*Math.sin(6*ni),An=Ue/Math.sqrt(1-He*Math.sin(ii)*Math.sin(ii)),En=Math.tan(ii)*Math.tan(ii),Sn=We*Math.cos(ii)*Math.cos(ii),Tn=Ue*(1-He)/Math.pow(1-He*Math.sin(ii)*Math.sin(ii),1.5),Ln=si/(An*Be);var ci=ii-An*Math.tan(ii)/Tn*(Ln*Ln/2-(5+3*En+10*Sn-4*Sn*Sn-9*We)*Ln*Ln*Ln*Ln/24+(61+90*En+298*Sn+45*En*En-252*We-3*Sn*Sn)*Ln*Ln*Ln*Ln*Ln*Ln/720);ci=radToDeg(ci);var vi=(Ln-(1+2*En+Sn)*Ln*Ln*Ln/6+(5-2*Sn+28*En-3*Sn*Sn+8*We+24*En*En)*Ln*Ln*Ln*Ln*Ln/120)/Math.cos(ii);vi=ti+radToDeg(vi);var pi;if(Te.accuracy){var fi=UTMtoLL({northing:Te.northing+Te.accuracy,easting:Te.easting+Te.accuracy,zoneLetter:Te.zoneLetter,zoneNumber:Te.zoneNumber});pi={top:fi.lat,right:fi.lon,bottom:ci,left:vi}}else pi={lat:ci,lon:vi};return pi}function getLetterDesignator(Te){var e="Z";return 84>=Te&&Te>=72?e="X":72>Te&&Te>=64?e="W":64>Te&&Te>=56?e="V":56>Te&&Te>=48?e="U":48>Te&&Te>=40?e="T":40>Te&&Te>=32?e="S":32>Te&&Te>=24?e="R":24>Te&&Te>=16?e="Q":16>Te&&Te>=8?e="P":8>Te&&Te>=0?e="N":0>Te&&Te>=-8?e="M":-8>Te&&Te>=-16?e="L":-16>Te&&Te>=-24?e="K":-24>Te&&Te>=-32?e="J":-32>Te&&Te>=-40?e="H":-40>Te&&Te>=-48?e="G":-48>Te&&Te>=-56?e="F":-56>Te&&Te>=-64?e="E":-64>Te&&Te>=-72?e="D":-72>Te&&Te>=-80&&(e="C"),e}function encode(Te,e){var t="00000"+Te.easting,Oe="00000"+Te.northing;return Te.zoneNumber+Te.zoneLetter+get100kID(Te.easting,Te.northing,Te.zoneNumber)+t.substr(t.length-5,e)+Oe.substr(Oe.length-5,e)}function get100kID(Te,e,t){var Oe=get100kSetForZone(t),ke=Math.floor(Te/1e5),Be=Math.floor(e/1e5)%20;return getLetter100kID(ke,Be,Oe)}function get100kSetForZone(Te){var e=Te%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(Te,e,t){var Oe=t-1,ke=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(Oe),Be=SET_ORIGIN_ROW_LETTERS.charCodeAt(Oe),Ue=ke+Te-1,He=Be+e,We=!1;Ue>Z$1&&(Ue=Ue-Z$1+A$1-1,We=!0),(Ue===I$2||ke<I$2&&Ue>I$2||(Ue>I$2||ke<I$2)&&We)&&Ue++,(Ue===O$1||ke<O$1&&Ue>O$1||(Ue>O$1||ke<O$1)&&We)&&(Ue++,Ue===I$2&&Ue++),Ue>Z$1&&(Ue=Ue-Z$1+A$1-1),He>V$1?(He=He-V$1+A$1-1,We=!0):We=!1,(He===I$2||Be<I$2&&He>I$2||(He>I$2||Be<I$2)&&We)&&He++,(He===O$1||Be<O$1&&He>O$1||(He>O$1||Be<O$1)&&We)&&(He++,He===I$2&&He++),He>V$1&&(He=He-V$1+A$1-1);var Cn=String.fromCharCode(Ue)+String.fromCharCode(He);return Cn}function decode(Te){if(Te&&Te.length===0)throw"MGRSPoint coverting from nothing";for(var e=Te.length,t=null,Oe="",ke,Be=0;!/[A-Z]/.test(ke=Te.charAt(Be));){if(Be>=2)throw"MGRSPoint bad conversion from: "+Te;Oe+=ke,Be++}var Ue=parseInt(Oe,10);if(Be===0||Be+3>e)throw"MGRSPoint bad conversion from: "+Te;var He=Te.charAt(Be++);if(He<="A"||He==="B"||He==="Y"||He>="Z"||He==="I"||He==="O")throw"MGRSPoint zone letter "+He+" not handled: "+Te;t=Te.substring(Be,Be+=2);for(var We=get100kSetForZone(Ue),Cn=getEastingFromChar(t.charAt(0),We),An=getNorthingFromChar(t.charAt(1),We);An<getMinNorthing(He);)An+=2e6;var En=e-Be;if(En%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+Te;var Sn=En/2,Tn=0,Ln=0,Bn,ti,ni,ii,si;return Sn>0&&(Bn=1e5/Math.pow(10,Sn),ti=Te.substring(Be,Be+Sn),Tn=parseFloat(ti)*Bn,ni=Te.substring(Be+Sn),Ln=parseFloat(ni)*Bn),ii=Tn+Cn,si=Ln+An,{easting:ii,northing:si,zoneLetter:He,zoneNumber:Ue,accuracy:Bn}}function getEastingFromChar(Te,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),Oe=1e5,ke=!1;t!==Te.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>Z$1){if(ke)throw"Bad character: "+Te;t=A$1,ke=!0}Oe+=1e5}return Oe}function getNorthingFromChar(Te,e){if(Te>"V")throw"MGRSPoint given invalid Northing "+Te;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),Oe=0,ke=!1;t!==Te.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>V$1){if(ke)throw"Bad character: "+Te;t=A$1,ke=!0}Oe+=1e5}return Oe}function getMinNorthing(Te){var e;switch(Te){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+Te}function Point(Te,e,t){if(!(this instanceof Point))return new Point(Te,e,t);if(Array.isArray(Te))this.x=Te[0],this.y=Te[1],this.z=Te[2]||0;else if(typeof Te=="object")this.x=Te.x,this.y=Te.y,this.z=Te.z||0;else if(typeof Te=="string"&&typeof e>"u"){var Oe=Te.split(",");this.x=parseFloat(Oe[0],10),this.y=parseFloat(Oe[1],10),this.z=parseFloat(Oe[2],10)||0}else this.x=Te,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(Te){return new Point(toPoint(Te))};Point.prototype.toMGRS=function(Te){return forward$u([this.x,this.y],Te)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(Te){var e=[];e[0]=C00-Te*(C02+Te*(C04+Te*(C06+Te*C08))),e[1]=Te*(C22-Te*(C04+Te*(C06+Te*C08)));var t=Te*Te;return e[2]=t*(C44-Te*(C46+Te*C48)),t*=Te,e[3]=t*(C66-Te*C68),e[4]=t*Te*C88,e}function pj_mlfn(Te,e,t,Oe){return t*=e,e*=e,Oe[0]*Te-t*(Oe[1]+e*(Oe[2]+e*(Oe[3]+e*Oe[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(Te,e,t){for(var Oe=1/(1-e),ke=Te,Be=MAX_ITER$3;Be;--Be){var Ue=Math.sin(ke),He=1-e*Ue*Ue;if(He=(pj_mlfn(ke,Ue,Math.cos(ke),t)-Te)*(He*Math.sqrt(He))*Oe,ke-=He,Math.abs(He)<EPSLN)return ke}return ke}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(Te){var e=Te.x,t=Te.y,Oe=adjust_lon(e-this.long0),ke,Be,Ue,He=Math.sin(t),We=Math.cos(t);if(this.es){var An=We*Oe,En=Math.pow(An,2),Sn=this.ep2*Math.pow(We,2),Tn=Math.pow(Sn,2),Ln=Math.abs(We)>EPSLN?Math.tan(t):0,Bn=Math.pow(Ln,2),ti=Math.pow(Bn,2);ke=1-this.es*Math.pow(He,2),An=An/Math.sqrt(ke);var ni=pj_mlfn(t,He,We,this.en);Be=this.a*(this.k0*An*(1+En/6*(1-Bn+Sn+En/20*(5-18*Bn+ti+14*Sn-58*Bn*Sn+En/42*(61+179*ti-ti*Bn-479*Bn)))))+this.x0,Ue=this.a*(this.k0*(ni-this.ml0+He*Oe*An/2*(1+En/12*(5-Bn+9*Sn+4*Tn+En/30*(61+ti-58*Bn+270*Sn-330*Bn*Sn+En/56*(1385+543*ti-ti*Bn-3111*Bn))))))+this.y0}else{var Cn=We*Math.sin(Oe);if(Math.abs(Math.abs(Cn)-1)<EPSLN)return 93;if(Be=.5*this.a*this.k0*Math.log((1+Cn)/(1-Cn))+this.x0,Ue=We*Math.cos(Oe)/Math.sqrt(1-Math.pow(Cn,2)),Cn=Math.abs(Ue),Cn>=1){if(Cn-1>EPSLN)return 93;Ue=0}else Ue=Math.acos(Ue);t<0&&(Ue=-Ue),Ue=this.a*this.k0*(Ue-this.lat0)+this.y0}return Te.x=Be,Te.y=Ue,Te}function inverse$t(Te){var e,t,Oe,ke,Be=(Te.x-this.x0)*(1/this.a),Ue=(Te.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+Ue/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var En=Math.sin(t),Sn=Math.cos(t),Tn=Math.abs(Sn)>EPSLN?Math.tan(t):0,Ln=this.ep2*Math.pow(Sn,2),Bn=Math.pow(Ln,2),ti=Math.pow(Tn,2),ni=Math.pow(ti,2);e=1-this.es*Math.pow(En,2);var ii=Be*Math.sqrt(e)/this.k0,si=Math.pow(ii,2);e=e*Tn,Oe=t-e*si/(1-this.es)*.5*(1-si/12*(5+3*ti-9*Ln*ti+Ln-4*Bn-si/30*(61+90*ti-252*Ln*ti+45*ni+46*Ln-si/56*(1385+3633*ti+4095*ni+1574*ni*ti)))),ke=adjust_lon(this.long0+ii*(1-si/6*(1+2*ti+Ln-si/20*(5+28*ti+24*ni+8*Ln*ti+6*Ln-si/42*(61+662*ti+1320*ni+720*ni*ti))))/Sn)}else Oe=HALF_PI*sign(Ue),ke=0;else{var He=Math.exp(Be/this.k0),We=.5*(He-1/He),Cn=this.lat0+Ue/this.k0,An=Math.cos(Cn);e=Math.sqrt((1-Math.pow(An,2))/(1+Math.pow(We,2))),Oe=Math.asin(e),Ue<0&&(Oe=-Oe),We===0&&An===0?ke=0:ke=adjust_lon(Math.atan2(We,An)+this.long0)}return Te.x=ke,Te.y=Oe,Te}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(Te){var e=Math.exp(Te);return e=(e-1/e)/2,e}function hypot(Te,e){Te=Math.abs(Te),e=Math.abs(e);var t=Math.max(Te,e),Oe=Math.min(Te,e)/(t||1);return t*Math.sqrt(1+Math.pow(Oe,2))}function log1py(Te){var e=1+Te,t=e-1;return t===0?Te:Te*Math.log(e)/t}function asinhy(Te){var e=Math.abs(Te);return e=log1py(e*(1+e/(hypot(1,e)+1))),Te<0?-e:e}function gatg(Te,e){for(var t=2*Math.cos(2*e),Oe=Te.length-1,ke=Te[Oe],Be=0,Ue;--Oe>=0;)Ue=-Be+t*ke+Te[Oe],Be=ke,ke=Ue;return e+Ue*Math.sin(2*e)}function clens(Te,e){for(var t=2*Math.cos(e),Oe=Te.length-1,ke=Te[Oe],Be=0,Ue;--Oe>=0;)Ue=-Be+t*ke+Te[Oe],Be=ke,ke=Ue;return Math.sin(e)*Ue}function cosh(Te){var e=Math.exp(Te);return e=(e+1/e)/2,e}function clens_cmplx(Te,e,t){for(var Oe=Math.sin(e),ke=Math.cos(e),Be=sinh(t),Ue=cosh(t),He=2*ke*Ue,We=-2*Oe*Be,Cn=Te.length-1,An=Te[Cn],En=0,Sn=0,Tn=0,Ln,Bn;--Cn>=0;)Ln=Sn,Bn=En,Sn=An,En=Tn,An=-Ln+He*Sn-We*En+Te[Cn],Tn=-Bn+We*Sn+He*En;return He=Oe*Ue,We=ke*Be,[He*An-We*Tn,He*Tn+We*An]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var Te=this.es/(1+Math.sqrt(1-this.es)),e=Te/(2-Te),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var Oe=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(Oe+clens(this.gtu,2*Oe))}function forward$s(Te){var e=adjust_lon(Te.x-this.long0),t=Te.y;t=gatg(this.cbg,t);var Oe=Math.sin(t),ke=Math.cos(t),Be=Math.sin(e),Ue=Math.cos(e);t=Math.atan2(Oe,Ue*ke),e=Math.atan2(Be*ke,hypot(Oe,ke*Ue)),e=asinhy(Math.tan(e));var He=clens_cmplx(this.gtu,2*t,2*e);t=t+He[0],e=e+He[1];var We,Cn;return Math.abs(e)<=2.623395162778?(We=this.a*(this.Qn*e)+this.x0,Cn=this.a*(this.Qn*t+this.Zb)+this.y0):(We=1/0,Cn=1/0),Te.x=We,Te.y=Cn,Te}function inverse$s(Te){var e=(Te.x-this.x0)*(1/this.a),t=(Te.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var Oe,ke;if(Math.abs(e)<=2.623395162778){var Be=clens_cmplx(this.utg,2*t,2*e);t=t+Be[0],e=e+Be[1],e=Math.atan(sinh(e));var Ue=Math.sin(t),He=Math.cos(t),We=Math.sin(e),Cn=Math.cos(e);t=Math.atan2(Ue*Cn,hypot(We,Cn*He)),e=Math.atan2(We,Cn*He),Oe=adjust_lon(e+this.long0),ke=gatg(this.cgb,t)}else Oe=1/0,ke=1/0;return Te.x=Oe,Te.y=ke,Te}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(Te,e){if(Te===void 0){if(Te=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,Te<0)return 0;if(Te>60)return 60}return Te}var dependsOn="etmerc";function init$t(){var Te=adjust_zone(this.zone,this.long0);if(Te===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(Te)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(Te,e){return Math.pow((1-Te)/(1+Te),e)}var MAX_ITER$2=20;function init$s(){var Te=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*Te*Te),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(Te/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*Te,this.ratexp))}function forward$r(Te){var e=Te.x,t=Te.y;return Te.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,Te.x=this.C*e,Te}function inverse$r(Te){for(var e=1e-14,t=Te.x/this.C,Oe=Te.y,ke=Math.pow(Math.tan(.5*Oe+FORTPI)/this.K,1/this.C),Be=MAX_ITER$2;Be>0&&(Oe=2*Math.atan(ke*srat(this.e*Math.sin(Te.y),-.5*this.e))-HALF_PI,!(Math.abs(Oe-Te.y)<e));--Be)Te.y=Oe;return Be?(Te.x=t,Te.y=Oe,Te):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(Te){var e,t,Oe,ke;return Te.x=adjust_lon(Te.x-this.long0),gauss.forward.apply(this,[Te]),e=Math.sin(Te.y),t=Math.cos(Te.y),Oe=Math.cos(Te.x),ke=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*Oe),Te.x=ke*t*Math.sin(Te.x),Te.y=ke*(this.cosc0*e-this.sinc0*t*Oe),Te.x=this.a*Te.x+this.x0,Te.y=this.a*Te.y+this.y0,Te}function inverse$q(Te){var e,t,Oe,ke,Be;if(Te.x=(Te.x-this.x0)/this.a,Te.y=(Te.y-this.y0)/this.a,Te.x/=this.k0,Te.y/=this.k0,Be=hypot(Te.x,Te.y)){var Ue=2*Math.atan2(Be,this.R2);e=Math.sin(Ue),t=Math.cos(Ue),ke=Math.asin(t*this.sinc0+Te.y*e*this.cosc0/Be),Oe=Math.atan2(Te.x*e,Be*this.cosc0*t-Te.y*this.sinc0*e)}else ke=this.phic0,Oe=0;return Te.x=Oe,Te.y=ke,gauss.inverse.apply(this,[Te]),Te.x=adjust_lon(Te.x+this.long0),Te}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(Te,e,t){return e*=t,Math.tan(.5*(HALF_PI+Te))*Math.pow((1-e)/(1+e),.5*t)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(Te){var e=Te.x,t=Te.y,Oe=Math.sin(t),ke=Math.cos(t),Be,Ue,He,We,Cn,An,En=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(Te.x=NaN,Te.y=NaN,Te):this.sphere?(Be=2*this.k0/(1+this.sinlat0*Oe+this.coslat0*ke*Math.cos(En)),Te.x=this.a*Be*ke*Math.sin(En)+this.x0,Te.y=this.a*Be*(this.coslat0*Oe-this.sinlat0*ke*Math.cos(En))+this.y0,Te):(Ue=2*Math.atan(this.ssfn_(t,Oe,this.e))-HALF_PI,We=Math.cos(Ue),He=Math.sin(Ue),Math.abs(this.coslat0)<=EPSLN?(Cn=tsfnz(this.e,t*this.con,this.con*Oe),An=2*this.a*this.k0*Cn/this.cons,Te.x=this.x0+An*Math.sin(e-this.long0),Te.y=this.y0-this.con*An*Math.cos(e-this.long0),Te):(Math.abs(this.sinlat0)<EPSLN?(Be=2*this.a*this.k0/(1+We*Math.cos(En)),Te.y=Be*He):(Be=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*He+this.cosX0*We*Math.cos(En))),Te.y=Be*(this.cosX0*He-this.sinX0*We*Math.cos(En))+this.y0),Te.x=Be*We*Math.sin(En)+this.x0,Te))}function inverse$p(Te){Te.x-=this.x0,Te.y-=this.y0;var e,t,Oe,ke,Be,Ue=Math.sqrt(Te.x*Te.x+Te.y*Te.y);if(this.sphere){var He=2*Math.atan(Ue/(2*this.a*this.k0));return e=this.long0,t=this.lat0,Ue<=EPSLN?(Te.x=e,Te.y=t,Te):(t=Math.asin(Math.cos(He)*this.sinlat0+Te.y*Math.sin(He)*this.coslat0/Ue),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(Te.x,-1*Te.y)):e=adjust_lon(this.long0+Math.atan2(Te.x,Te.y)):e=adjust_lon(this.long0+Math.atan2(Te.x*Math.sin(He),Ue*this.coslat0*Math.cos(He)-Te.y*this.sinlat0*Math.sin(He))),Te.x=e,Te.y=t,Te)}else if(Math.abs(this.coslat0)<=EPSLN){if(Ue<=EPSLN)return t=this.lat0,e=this.long0,Te.x=e,Te.y=t,Te;Te.x*=this.con,Te.y*=this.con,Oe=Ue*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,Oe),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(Te.x,-1*Te.y))}else ke=2*Math.atan(Ue*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,Ue<=EPSLN?Be=this.X0:(Be=Math.asin(Math.cos(ke)*this.sinX0+Te.y*Math.sin(ke)*this.cosX0/Ue),e=adjust_lon(this.long0+Math.atan2(Te.x*Math.sin(ke),Ue*this.cosX0*Math.cos(ke)-Te.y*this.sinX0*Math.sin(ke)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Be)));return Te.x=e,Te.y=t,Te}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var Te=this.lat0;this.lambda0=this.long0;var e=Math.sin(Te),t=this.a,Oe=this.rf,ke=1/Oe,Be=2*ke-Math.pow(ke,2),Ue=this.e=Math.sqrt(Be);this.R=this.k0*t*Math.sqrt(1-Be)/(1-Be*Math.pow(e,2)),this.alpha=Math.sqrt(1+Be/(1-Be)*Math.pow(Math.cos(Te),4)),this.b0=Math.asin(e/this.alpha);var He=Math.log(Math.tan(Math.PI/4+this.b0/2)),We=Math.log(Math.tan(Math.PI/4+Te/2)),Cn=Math.log((1+Ue*e)/(1-Ue*e));this.K=He-this.alpha*We+this.alpha*Ue/2*Cn}function forward$o(Te){var e=Math.log(Math.tan(Math.PI/4-Te.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(Te.y))/(1-this.e*Math.sin(Te.y))),Oe=-this.alpha*(e+t)+this.K,ke=2*(Math.atan(Math.exp(Oe))-Math.PI/4),Be=this.alpha*(Te.x-this.lambda0),Ue=Math.atan(Math.sin(Be)/(Math.sin(this.b0)*Math.tan(ke)+Math.cos(this.b0)*Math.cos(Be))),He=Math.asin(Math.cos(this.b0)*Math.sin(ke)-Math.sin(this.b0)*Math.cos(ke)*Math.cos(Be));return Te.y=this.R/2*Math.log((1+Math.sin(He))/(1-Math.sin(He)))+this.y0,Te.x=this.R*Ue+this.x0,Te}function inverse$o(Te){for(var e=Te.x-this.x0,t=Te.y-this.y0,Oe=e/this.R,ke=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),Be=Math.asin(Math.cos(this.b0)*Math.sin(ke)+Math.sin(this.b0)*Math.cos(ke)*Math.cos(Oe)),Ue=Math.atan(Math.sin(Oe)/(Math.cos(this.b0)*Math.cos(Oe)-Math.sin(this.b0)*Math.tan(ke))),He=this.lambda0+Ue/this.alpha,We=0,Cn=Be,An=-1e3,En=0;Math.abs(Cn-An)>1e-7;){if(++En>20)return;We=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Be/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Cn))/2)),An=Cn,Cn=2*Math.atan(Math.exp(We))-Math.PI/2}return Te.x=He,Te.y=Cn,Te}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(Te){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof Te.PROJECTION=="object"?Object.keys(Te.PROJECTION)[0]:Te.PROJECTION;return"no_uoff"in Te||"no_off"in Te||e.indexOf(t)!==-1}function init$o(){var Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An=0,En,Sn=0,Tn=0,Ln=0,Bn=0,ti=0,ni=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var ii=!1;"alpha"in this&&(ii=!0);var si=!1;if("rectified_grid_angle"in this&&(si=!0),ii&&(ni=this.alpha),si&&(An=this.rectified_grid_angle*D2R$1),ii||si)Sn=this.longc;else if(Tn=this.long1,Bn=this.lat1,Ln=this.long2,ti=this.lat2,Math.abs(Bn-ti)<=TOL||(Te=Math.abs(Bn))<=TOL||Math.abs(Te-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(ti)-HALF_PI)<=TOL)throw new Error;var oi=1-this.es;e=Math.sqrt(oi),Math.abs(this.lat0)>EPSLN?(He=Math.sin(this.lat0),t=Math.cos(this.lat0),Te=1-this.es*He*He,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/oi),this.A=this.B*this.k0*e/Te,Oe=this.B*e/(t*Math.sqrt(Te)),ke=Oe*Oe-1,ke<=0?ke=0:(ke=Math.sqrt(ke),this.lat0<0&&(ke=-ke)),this.E=ke+=Oe,this.E*=Math.pow(tsfnz(this.e,this.lat0,He),this.B)):(this.B=1/e,this.A=this.k0,this.E=Oe=ke=1),ii||si?(ii?(En=Math.asin(Math.sin(ni)/Oe),si||(An=ni)):(En=An,ni=Math.asin(Oe*Math.sin(En))),this.lam0=Sn-Math.asin(.5*(ke-1/ke)*Math.tan(En))/this.B):(Be=Math.pow(tsfnz(this.e,Bn,Math.sin(Bn)),this.B),Ue=Math.pow(tsfnz(this.e,ti,Math.sin(ti)),this.B),ke=this.E/Be,We=(Ue-Be)/(Ue+Be),Cn=this.E*this.E,Cn=(Cn-Ue*Be)/(Cn+Ue*Be),Te=Tn-Ln,Te<-Math.pi?Ln-=TWO_PI:Te>Math.pi&&(Ln+=TWO_PI),this.lam0=adjust_lon(.5*(Tn+Ln)-Math.atan(Cn*Math.tan(.5*this.B*(Tn-Ln))/We)/this.B),En=Math.atan(2*Math.sin(this.B*adjust_lon(Tn-this.lam0))/(ke-1/ke)),An=ni=Math.asin(Oe*Math.sin(En))),this.singam=Math.sin(En),this.cosgam=Math.cos(En),this.sinrot=Math.sin(An),this.cosrot=Math.cos(An),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(Oe*Oe-1)/Math.cos(ni))),this.lat0<0&&(this.u_0=-this.u_0)),ke=.5*En,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-ke)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+ke))}function forward$n(Te){var e={},t,Oe,ke,Be,Ue,He,We,Cn;if(Te.x=Te.x-this.lam0,Math.abs(Math.abs(Te.y)-HALF_PI)>EPSLN){if(Ue=this.E/Math.pow(tsfnz(this.e,Te.y,Math.sin(Te.y)),this.B),He=1/Ue,t=.5*(Ue-He),Oe=.5*(Ue+He),Be=Math.sin(this.B*Te.x),ke=(t*this.singam-Be*this.cosgam)/Oe,Math.abs(Math.abs(ke)-1)<EPSLN)throw new Error;Cn=.5*this.ArB*Math.log((1-ke)/(1+ke)),He=Math.cos(this.B*Te.x),Math.abs(He)<TOL?We=this.A*Te.x:We=this.ArB*Math.atan2(t*this.cosgam+Be*this.singam,He)}else Cn=Te.y>0?this.v_pole_n:this.v_pole_s,We=this.ArB*Te.y;return this.no_rot?(e.x=We,e.y=Cn):(We-=this.u_0,e.x=Cn*this.cosrot+We*this.sinrot,e.y=We*this.cosrot-Cn*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(Te){var e,t,Oe,ke,Be,Ue,He,We={};if(Te.x=(Te.x-this.x0)*(1/this.a),Te.y=(Te.y-this.y0)*(1/this.a),this.no_rot?(t=Te.y,e=Te.x):(t=Te.x*this.cosrot-Te.y*this.sinrot,e=Te.y*this.cosrot+Te.x*this.sinrot+this.u_0),Oe=Math.exp(-this.BrA*t),ke=.5*(Oe-1/Oe),Be=.5*(Oe+1/Oe),Ue=Math.sin(this.BrA*e),He=(Ue*this.cosgam+ke*this.singam)/Be,Math.abs(Math.abs(He)-1)<EPSLN)We.x=0,We.y=He<0?-HALF_PI:HALF_PI;else{if(We.y=this.E/Math.sqrt((1+He)/(1-He)),We.y=phi2z(this.e,Math.pow(We.y,1/this.B)),We.y===1/0)throw new Error;We.x=-this.rB*Math.atan2(ke*this.cosgam-Ue*this.singam,Math.cos(this.BrA*e))}return We.x+=this.lam0,We}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var Te=this.b/this.a;this.e=Math.sqrt(1-Te*Te);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),Oe=msfnz(this.e,e,t),ke=tsfnz(this.e,this.lat1,e),Be=Math.sin(this.lat2),Ue=Math.cos(this.lat2),He=msfnz(this.e,Be,Ue),We=tsfnz(this.e,this.lat2,Be),Cn=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(Oe/He)/Math.log(ke/We):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=Oe/(this.ns*Math.pow(ke,this.ns)),this.rh=this.a*this.f0*Math.pow(Cn,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(Te){var e=Te.x,t=Te.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var Oe=Math.abs(Math.abs(t)-HALF_PI),ke,Be;if(Oe>EPSLN)ke=tsfnz(this.e,t,Math.sin(t)),Be=this.a*this.f0*Math.pow(ke,this.ns);else{if(Oe=t*this.ns,Oe<=0)return null;Be=0}var Ue=this.ns*adjust_lon(e-this.long0);return Te.x=this.k0*(Be*Math.sin(Ue))+this.x0,Te.y=this.k0*(this.rh-Be*Math.cos(Ue))+this.y0,Te}function inverse$m(Te){var e,t,Oe,ke,Be,Ue=(Te.x-this.x0)/this.k0,He=this.rh-(Te.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(Ue*Ue+He*He),t=1):(e=-Math.sqrt(Ue*Ue+He*He),t=-1);var We=0;if(e!==0&&(We=Math.atan2(t*Ue,t*He)),e!==0||this.ns>0){if(t=1/this.ns,Oe=Math.pow(e/(this.a*this.f0),t),ke=phi2z(this.e,Oe),ke===-9999)return null}else ke=-HALF_PI;return Be=adjust_lon(We/this.ns+this.long0),Te.x=Be,Te.y=ke,Te}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(Te){var e,t,Oe,ke,Be,Ue,He,We=Te.x,Cn=Te.y,An=adjust_lon(We-this.long0);return e=Math.pow((1+this.e*Math.sin(Cn))/(1-this.e*Math.sin(Cn)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(Cn/2+this.s45),this.alfa)/e)-this.s45),Oe=-An*this.alfa,ke=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(Oe)),Be=Math.asin(Math.cos(t)*Math.sin(Oe)/Math.cos(ke)),Ue=this.n*Be,He=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(ke/2+this.s45),this.n),Te.y=He*Math.cos(Ue)/1,Te.x=He*Math.sin(Ue)/1,this.czech||(Te.y*=-1,Te.x*=-1),Te}function inverse$l(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn=Te.x;Te.x=Te.y,Te.y=Cn,this.czech||(Te.y*=-1,Te.x*=-1),Ue=Math.sqrt(Te.x*Te.x+Te.y*Te.y),Be=Math.atan2(Te.y,Te.x),ke=Be/Math.sin(this.s0),Oe=2*(Math.atan(Math.pow(this.ro0/Ue,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(Oe)-Math.sin(this.ad)*Math.cos(Oe)*Math.cos(ke)),t=Math.asin(Math.cos(Oe)*Math.sin(ke)/Math.cos(e)),Te.x=this.long0-t/this.alfa,He=e,We=0;var An=0;do Te.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(He))/(1-this.e*Math.sin(He)),this.e/2))-this.s45),Math.abs(He-Te.y)<1e-10&&(We=1),He=Te.y,An+=1;while(We===0&&An<15);return An>=15?null:Te}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(Te,e,t,Oe,ke){return Te*ke-e*Math.sin(2*ke)+t*Math.sin(4*ke)-Oe*Math.sin(6*ke)}function e0fn(Te){return 1-.25*Te*(1+Te/16*(3+1.25*Te))}function e1fn(Te){return .375*Te*(1+.25*Te*(1+.46875*Te))}function e2fn(Te){return .05859375*Te*Te*(1+.75*Te)}function e3fn(Te){return Te*Te*Te*(35/3072)}function gN(Te,e,t){var Oe=e*t;return Te/Math.sqrt(1-Oe*Oe)}function adjust_lat(Te){return Math.abs(Te)<HALF_PI?Te:Te-sign(Te)*Math.PI}function imlfn(Te,e,t,Oe,ke){var Be,Ue;Be=Te/e;for(var He=0;He<15;He++)if(Ue=(Te-(e*Be-t*Math.sin(2*Be)+Oe*Math.sin(4*Be)-ke*Math.sin(6*Be)))/(e-2*t*Math.cos(2*Be)+4*Oe*Math.cos(4*Be)-6*ke*Math.cos(6*Be)),Be+=Ue,Math.abs(Ue)<=1e-10)return Be;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(Te){var e,t,Oe=Te.x,ke=Te.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(ke)*Math.sin(Oe)),t=this.a*(Math.atan2(Math.tan(ke),Math.cos(Oe))-this.lat0);else{var Be=Math.sin(ke),Ue=Math.cos(ke),He=gN(this.a,this.e,Be),We=Math.tan(ke)*Math.tan(ke),Cn=Oe*Math.cos(ke),An=Cn*Cn,En=this.es*Ue*Ue/(1-this.es),Sn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,ke);e=He*Cn*(1-An*We*(1/6-(8-We+8*En)*An/120)),t=Sn-this.ml0+He*Be/Ue*An*(.5+(5-We+6*En)*An/24)}return Te.x=e+this.x0,Te.y=t+this.y0,Te}function inverse$k(Te){Te.x-=this.x0,Te.y-=this.y0;var e=Te.x/this.a,t=Te.y/this.a,Oe,ke;if(this.sphere){var Be=t+this.lat0;Oe=Math.asin(Math.sin(Be)*Math.cos(e)),ke=Math.atan2(Math.tan(e),Math.cos(Be))}else{var Ue=this.ml0/this.a+t,He=imlfn(Ue,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(He)-HALF_PI)<=EPSLN)return Te.x=this.long0,Te.y=HALF_PI,t<0&&(Te.y*=-1),Te;var We=gN(this.a,this.e,Math.sin(He)),Cn=We*We*We/this.a/this.a*(1-this.es),An=Math.pow(Math.tan(He),2),En=e*this.a/We,Sn=En*En;Oe=He-We*Math.tan(He)/Cn*En*En*(.5-(1+3*An)*En*En/24),ke=En*(1-Sn*(An/3+(1+3*An)*An*Sn/15))/Math.cos(He)}return Te.x=adjust_lon(ke+this.long0),Te.y=adjust_lat(Oe),Te}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(Te,e){var t;return Te>1e-7?(t=Te*e,(1-Te*Te)*(e/(1-t*t)-.5/Te*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var Te=Math.abs(this.lat0);if(Math.abs(Te-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(Te)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn,An,En=Te.x,Sn=Te.y;if(En=adjust_lon(En-this.long0),this.sphere){if(Be=Math.sin(Sn),An=Math.cos(Sn),Oe=Math.cos(En),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+An*Oe:1+this.sinph0*Be+this.cosph0*An*Oe,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*An*Math.sin(En),t*=this.mode===this.EQUIT?Be:this.cosph0*Be-this.sinph0*An*Oe}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Oe=-Oe),Math.abs(Sn+this.lat0)<EPSLN)return null;t=FORTPI-Sn*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(En),t*=Oe}}else{switch(He=0,We=0,Cn=0,Oe=Math.cos(En),ke=Math.sin(En),Be=Math.sin(Sn),Ue=qsfnz(this.e,Be),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(He=Ue/this.qp,We=Math.sqrt(1-He*He)),this.mode){case this.OBLIQ:Cn=1+this.sinb1*He+this.cosb1*We*Oe;break;case this.EQUIT:Cn=1+We*Oe;break;case this.N_POLE:Cn=HALF_PI+Sn,Ue=this.qp-Ue;break;case this.S_POLE:Cn=Sn-HALF_PI,Ue=this.qp+Ue;break}if(Math.abs(Cn)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Cn=Math.sqrt(2/Cn),this.mode===this.OBLIQ?t=this.ymf*Cn*(this.cosb1*He-this.sinb1*We*Oe):t=(Cn=Math.sqrt(2/(1+We*Oe)))*He*this.ymf,e=this.xmf*Cn*We*ke;break;case this.N_POLE:case this.S_POLE:Ue>=0?(e=(Cn=Math.sqrt(Ue))*ke,t=Oe*(this.mode===this.S_POLE?Cn:-Cn)):e=t=0;break}}return Te.x=this.a*e+this.x0,Te.y=this.a*t+this.y0,Te}function inverse$j(Te){Te.x-=this.x0,Te.y-=this.y0;var e=Te.x/this.a,t=Te.y/this.a,Oe,ke,Be,Ue,He,We,Cn;if(this.sphere){var An=0,En,Sn=0;if(En=Math.sqrt(e*e+t*t),ke=En*.5,ke>1)return null;switch(ke=2*Math.asin(ke),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Sn=Math.sin(ke),An=Math.cos(ke)),this.mode){case this.EQUIT:ke=Math.abs(En)<=EPSLN?0:Math.asin(t*Sn/En),e*=Sn,t=An*En;break;case this.OBLIQ:ke=Math.abs(En)<=EPSLN?this.lat0:Math.asin(An*this.sinph0+t*Sn*this.cosph0/En),e*=Sn*this.cosph0,t=(An-Math.sin(ke)*this.sinph0)*En;break;case this.N_POLE:t=-t,ke=HALF_PI-ke;break;case this.S_POLE:ke-=HALF_PI;break}Oe=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(Cn=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,We=Math.sqrt(e*e+t*t),We<EPSLN)return Te.x=this.long0,Te.y=this.lat0,Te;Ue=2*Math.asin(.5*We/this.rq),Be=Math.cos(Ue),e*=Ue=Math.sin(Ue),this.mode===this.OBLIQ?(Cn=Be*this.sinb1+t*Ue*this.cosb1/We,He=this.qp*Cn,t=We*this.cosb1*Be-t*this.sinb1*Ue):(Cn=t*Ue/We,He=this.qp*Cn,t=We*Be)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),He=e*e+t*t,!He)return Te.x=this.long0,Te.y=this.lat0,Te;Cn=1-He/this.qp,this.mode===this.S_POLE&&(Cn=-Cn)}Oe=Math.atan2(e,t),ke=authlat(Math.asin(Cn),this.apa)}return Te.x=adjust_lon(this.long0+Oe),Te.y=ke,Te}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(Te){var e,t=[];return t[0]=Te*P00,e=Te*Te,t[0]+=e*P01,t[1]=e*P10,e*=Te,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(Te,e){var t=Te+Te;return Te+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(Te){return Math.abs(Te)>1&&(Te=Te>1?1:-1),Math.asin(Te)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(Te){var e=Te.x,t=Te.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var Oe=qsfnz(this.e3,this.sin_phi),ke=this.a*Math.sqrt(this.c-this.ns0*Oe)/this.ns0,Be=this.ns0*adjust_lon(e-this.long0),Ue=ke*Math.sin(Be)+this.x0,He=this.rh-ke*Math.cos(Be)+this.y0;return Te.x=Ue,Te.y=He,Te}function inverse$i(Te){var e,t,Oe,ke,Be,Ue;return Te.x-=this.x0,Te.y=this.rh-Te.y+this.y0,this.ns0>=0?(e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),Oe=1):(e=-Math.sqrt(Te.x*Te.x+Te.y*Te.y),Oe=-1),ke=0,e!==0&&(ke=Math.atan2(Oe*Te.x,Oe*Te.y)),Oe=e*this.ns0/this.a,this.sphere?Ue=Math.asin((this.c-Oe*Oe)/(2*this.ns0)):(t=(this.c-Oe*Oe)/this.ns0,Ue=this.phi1z(this.e3,t)),Be=adjust_lon(ke/this.ns0+this.long0),Te.x=Be,Te.y=Ue,Te}function phi1z(Te,e){var t,Oe,ke,Be,Ue,He=asinz(.5*e);if(Te<EPSLN)return He;for(var We=Te*Te,Cn=1;Cn<=25;Cn++)if(t=Math.sin(He),Oe=Math.cos(He),ke=Te*t,Be=1-ke*ke,Ue=.5*Be*Be/Oe*(e/(1-We)-t/Be+.5/Te*Math.log((1-ke)/(1+ke))),He=He+Ue,Math.abs(Ue)<=1e-7)return He;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn=Te.x,An=Te.y;return Oe=adjust_lon(Cn-this.long0),e=Math.sin(An),t=Math.cos(An),ke=Math.cos(Oe),Ue=this.sin_p14*e+this.cos_p14*t*ke,Be=1,Ue>0||Math.abs(Ue)<=EPSLN?(He=this.x0+this.a*Be*t*Math.sin(Oe)/Ue,We=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*ke)/Ue):(He=this.x0+this.infinity_dist*t*Math.sin(Oe),We=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*ke)),Te.x=He,Te.y=We,Te}function inverse$h(Te){var e,t,Oe,ke,Be,Ue;return Te.x=(Te.x-this.x0)/this.a,Te.y=(Te.y-this.y0)/this.a,Te.x/=this.k0,Te.y/=this.k0,(e=Math.sqrt(Te.x*Te.x+Te.y*Te.y))?(ke=Math.atan2(e,this.rc),t=Math.sin(ke),Oe=Math.cos(ke),Ue=asinz(Oe*this.sin_p14+Te.y*t*this.cos_p14/e),Be=Math.atan2(Te.x*t,e*this.cos_p14*Oe-Te.y*this.sin_p14*t),Be=adjust_lon(this.long0+Be)):(Ue=this.phic0,Be=0),Te.x=Be,Te.y=Ue,Te}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(Te,e){var t=1-(1-Te*Te)/(2*Te)*Math.log((1-Te)/(1+Te));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var Oe=Math.asin(.5*e),ke,Be,Ue,He,We=0;We<30;We++)if(Be=Math.sin(Oe),Ue=Math.cos(Oe),He=Te*Be,ke=Math.pow(1-He*He,2)/(2*Ue)*(e/(1-Te*Te)-Be/(1-He*He)+.5/Te*Math.log((1-He)/(1+He))),Oe+=ke,Math.abs(ke)<=1e-10)return Oe;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(Te){var e=Te.x,t=Te.y,Oe,ke,Be=adjust_lon(e-this.long0);if(this.sphere)Oe=this.x0+this.a*Be*Math.cos(this.lat_ts),ke=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var Ue=qsfnz(this.e,Math.sin(t));Oe=this.x0+this.a*this.k0*Be,ke=this.y0+this.a*Ue*.5/this.k0}return Te.x=Oe,Te.y=ke,Te}function inverse$g(Te){Te.x-=this.x0,Te.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+Te.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(Te.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*Te.y*this.k0/this.a),e=adjust_lon(this.long0+Te.x/(this.a*this.k0))),Te.x=e,Te.y=t,Te}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(Te){var e=Te.x,t=Te.y,Oe=adjust_lon(e-this.long0),ke=adjust_lat(t-this.lat0);return Te.x=this.x0+this.a*Oe*this.rc,Te.y=this.y0+this.a*ke,Te}function inverse$f(Te){var e=Te.x,t=Te.y;return Te.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),Te.y=adjust_lat(this.lat0+(t-this.y0)/this.a),Te}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(Te){var e=Te.x,t=Te.y,Oe,ke,Be,Ue=adjust_lon(e-this.long0);if(Be=Ue*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(Oe=this.a*Ue,ke=-1*this.a*this.lat0):(Oe=this.a*Math.sin(Be)/Math.tan(t),ke=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(Be))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)Oe=this.a*Ue,ke=-1*this.ml0;else{var He=gN(this.a,this.e,Math.sin(t))/Math.tan(t);Oe=He*Math.sin(Be),ke=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+He*(1-Math.cos(Be))}return Te.x=Oe+this.x0,Te.y=ke+this.y0,Te}function inverse$e(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn;if(Oe=Te.x-this.x0,ke=Te.y-this.y0,this.sphere)if(Math.abs(ke+this.a*this.lat0)<=EPSLN)e=adjust_lon(Oe/this.a+this.long0),t=0;else{Ue=this.lat0+ke/this.a,He=Oe*Oe/this.a/this.a+Ue*Ue,We=Ue;var An;for(Be=MAX_ITER$1;Be;--Be)if(An=Math.tan(We),Cn=-1*(Ue*(We*An+1)-We-.5*(We*We+He)*An)/((We-Ue)/An-1),We+=Cn,Math.abs(Cn)<=EPSLN){t=We;break}e=adjust_lon(this.long0+Math.asin(Oe*Math.tan(We)/this.a)/Math.sin(t))}else if(Math.abs(ke+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+Oe/this.a);else{Ue=(this.ml0+ke)/this.a,He=Oe*Oe/this.a/this.a+Ue*Ue,We=Ue;var En,Sn,Tn,Ln,Bn;for(Be=MAX_ITER$1;Be;--Be)if(Bn=this.e*Math.sin(We),En=Math.sqrt(1-Bn*Bn)*Math.tan(We),Sn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,We),Tn=this.e0-2*this.e1*Math.cos(2*We)+4*this.e2*Math.cos(4*We)-6*this.e3*Math.cos(6*We),Ln=Sn/this.a,Cn=(Ue*(En*Ln+1)-Ln-.5*En*(Ln*Ln+He))/(this.es*Math.sin(2*We)*(Ln*Ln+He-2*Ue*Ln)/(4*En)+(Ue-Ln)*(En*Tn-2/Math.sin(2*We))-Tn),We-=Cn,Math.abs(Cn)<=EPSLN){t=We;break}En=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(Oe*En/this.a)/Math.sin(t))}return Te.x=e,Te.y=t,Te}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(Te){var e,t=Te.x,Oe=Te.y,ke=Oe-this.lat0,Be=t-this.long0,Ue=ke/SEC_TO_RAD*1e-5,He=Be,We=1,Cn=0;for(e=1;e<=10;e++)We=We*Ue,Cn=Cn+this.A[e]*We;var An=Cn,En=He,Sn=1,Tn=0,Ln,Bn,ti=0,ni=0;for(e=1;e<=6;e++)Ln=Sn*An-Tn*En,Bn=Tn*An+Sn*En,Sn=Ln,Tn=Bn,ti=ti+this.B_re[e]*Sn-this.B_im[e]*Tn,ni=ni+this.B_im[e]*Sn+this.B_re[e]*Tn;return Te.x=ni*this.a+this.x0,Te.y=ti*this.a+this.y0,Te}function inverse$d(Te){var e,t=Te.x,Oe=Te.y,ke=t-this.x0,Be=Oe-this.y0,Ue=Be/this.a,He=ke/this.a,We=1,Cn=0,An,En,Sn=0,Tn=0;for(e=1;e<=6;e++)An=We*Ue-Cn*He,En=Cn*Ue+We*He,We=An,Cn=En,Sn=Sn+this.C_re[e]*We-this.C_im[e]*Cn,Tn=Tn+this.C_im[e]*We+this.C_re[e]*Cn;for(var Ln=0;Ln<this.iterations;Ln++){var Bn=Sn,ti=Tn,ni,ii,si=Ue,oi=He;for(e=2;e<=6;e++)ni=Bn*Sn-ti*Tn,ii=ti*Sn+Bn*Tn,Bn=ni,ti=ii,si=si+(e-1)*(this.B_re[e]*Bn-this.B_im[e]*ti),oi=oi+(e-1)*(this.B_im[e]*Bn+this.B_re[e]*ti);Bn=1,ti=0;var ci=this.B_re[1],vi=this.B_im[1];for(e=2;e<=6;e++)ni=Bn*Sn-ti*Tn,ii=ti*Sn+Bn*Tn,Bn=ni,ti=ii,ci=ci+e*(this.B_re[e]*Bn-this.B_im[e]*ti),vi=vi+e*(this.B_im[e]*Bn+this.B_re[e]*ti);var pi=ci*ci+vi*vi;Sn=(si*ci+oi*vi)/pi,Tn=(oi*ci-si*vi)/pi}var fi=Sn,Mi=Tn,Oi=1,ui=0;for(e=1;e<=9;e++)Oi=Oi*fi,ui=ui+this.D[e]*Oi;var li=this.lat0+ui*SEC_TO_RAD*1e5,Ri=this.long0+Mi;return Te.x=Ri,Te.y=li,Te}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(Te){var e=Te.x,t=Te.y,Oe=adjust_lon(e-this.long0),ke=this.x0+this.a*Oe,Be=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return Te.x=ke,Te.y=Be,Te}function inverse$c(Te){Te.x-=this.x0,Te.y-=this.y0;var e=adjust_lon(this.long0+Te.x/this.a),t=2.5*(Math.atan(Math.exp(.8*Te.y/this.a))-Math.PI/4);return Te.x=e,Te.y=t,Te}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(Te){var e,t,Oe=Te.x,ke=Te.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere){if(!this.m)ke=this.n!==1?Math.asin(this.n*Math.sin(ke)):ke;else for(var Be=this.n*Math.sin(ke),Ue=MAX_ITER;Ue;--Ue){var He=(this.m*ke+Math.sin(ke)-Be)/(this.m+Math.cos(ke));if(ke-=He,Math.abs(He)<EPSLN)break}e=this.a*this.C_x*Oe*(this.m+Math.cos(ke)),t=this.a*this.C_y*ke}else{var We=Math.sin(ke),Cn=Math.cos(ke);t=this.a*pj_mlfn(ke,We,Cn,this.en),e=this.a*Oe*Cn/Math.sqrt(1-this.es*We*We)}return Te.x=e,Te.y=t,Te}function inverse$b(Te){var e,t,Oe,ke;return Te.x-=this.x0,Oe=Te.x/this.a,Te.y-=this.y0,e=Te.y/this.a,this.sphere?(e/=this.C_y,Oe=Oe/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),Oe=adjust_lon(Oe+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(Te.y/this.a,this.es,this.en),ke=Math.abs(e),ke<HALF_PI?(ke=Math.sin(e),t=this.long0+Te.x*Math.sqrt(1-this.es*ke*ke)/(this.a*Math.cos(e)),Oe=adjust_lon(t)):ke-EPSLN<HALF_PI&&(Oe=this.long0)),Te.x=Oe,Te.y=e,Te}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(Te){for(var e=Te.x,t=Te.y,Oe=adjust_lon(e-this.long0),ke=t,Be=Math.PI*Math.sin(t);;){var Ue=-(ke+Math.sin(ke)-Be)/(1+Math.cos(ke));if(ke+=Ue,Math.abs(Ue)<EPSLN)break}ke/=2,Math.PI/2-Math.abs(t)<EPSLN&&(Oe=0);var He=.900316316158*this.a*Oe*Math.cos(ke)+this.x0,We=1.4142135623731*this.a*Math.sin(ke)+this.y0;return Te.x=He,Te.y=We,Te}function inverse$a(Te){var e,t;Te.x-=this.x0,Te.y-=this.y0,t=Te.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var Oe=adjust_lon(this.long0+Te.x/(.900316316158*this.a*Math.cos(e)));Oe<-Math.PI&&(Oe=-Math.PI),Oe>Math.PI&&(Oe=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var ke=Math.asin(t);return Te.x=Oe,Te.y=ke,Te}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(Te){var e=Te.x,t=Te.y,Oe;if(this.sphere)Oe=this.a*(this.g-t);else{var ke=mlfn(this.e0,this.e1,this.e2,this.e3,t);Oe=this.a*(this.g-ke)}var Be=this.ns*adjust_lon(e-this.long0),Ue=this.x0+Oe*Math.sin(Be),He=this.y0+this.rh-Oe*Math.cos(Be);return Te.x=Ue,Te.y=He,Te}function inverse$9(Te){Te.x-=this.x0,Te.y=this.rh-Te.y+this.y0;var e,t,Oe,ke;this.ns>=0?(t=Math.sqrt(Te.x*Te.x+Te.y*Te.y),e=1):(t=-Math.sqrt(Te.x*Te.x+Te.y*Te.y),e=-1);var Be=0;if(t!==0&&(Be=Math.atan2(e*Te.x,e*Te.y)),this.sphere)return ke=adjust_lon(this.long0+Be/this.ns),Oe=adjust_lat(this.g-t/this.a),Te.x=ke,Te.y=Oe,Te;var Ue=this.g-t/this.a;return Oe=imlfn(Ue,this.e0,this.e1,this.e2,this.e3),ke=adjust_lon(this.long0+Be/this.ns),Te.x=ke,Te.y=Oe,Te}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(Te){var e=Te.x,t=Te.y,Oe=adjust_lon(e-this.long0),ke,Be;Math.abs(t)<=EPSLN&&(ke=this.x0+this.R*Oe,Be=this.y0);var Ue=asinz(2*Math.abs(t/Math.PI));(Math.abs(Oe)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(ke=this.x0,t>=0?Be=this.y0+Math.PI*this.R*Math.tan(.5*Ue):Be=this.y0+Math.PI*this.R*-Math.tan(.5*Ue));var He=.5*Math.abs(Math.PI/Oe-Oe/Math.PI),We=He*He,Cn=Math.sin(Ue),An=Math.cos(Ue),En=An/(Cn+An-1),Sn=En*En,Tn=En*(2/Cn-1),Ln=Tn*Tn,Bn=Math.PI*this.R*(He*(En-Ln)+Math.sqrt(We*(En-Ln)*(En-Ln)-(Ln+We)*(Sn-Ln)))/(Ln+We);Oe<0&&(Bn=-Bn),ke=this.x0+Bn;var ti=We+En;return Bn=Math.PI*this.R*(Tn*ti-He*Math.sqrt((Ln+We)*(We+1)-ti*ti))/(Ln+We),t>=0?Be=this.y0+Bn:Be=this.y0-Bn,Te.x=ke,Te.y=Be,Te}function inverse$8(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn;return Te.x-=this.x0,Te.y-=this.y0,En=Math.PI*this.R,Oe=Te.x/En,ke=Te.y/En,Be=Oe*Oe+ke*ke,Ue=-Math.abs(ke)*(1+Be),He=Ue-2*ke*ke+Oe*Oe,We=-2*Ue+1+2*ke*ke+Be*Be,Tn=ke*ke/We+(2*He*He*He/We/We/We-9*Ue*He/We/We)/27,Cn=(Ue-He*He/3/We)/We,An=2*Math.sqrt(-Cn/3),En=3*Tn/Cn/An,Math.abs(En)>1&&(En>=0?En=1:En=-1),Sn=Math.acos(En)/3,Te.y>=0?t=(-An*Math.cos(Sn+Math.PI/3)-He/3/We)*Math.PI:t=-(-An*Math.cos(Sn+Math.PI/3)-He/3/We)*Math.PI,Math.abs(Oe)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Be-1+Math.sqrt(1+2*(Oe*Oe-ke*ke)+Be*Be))/2/Oe),Te.x=e,Te.y=t,Te}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(Te){var e=Te.x,t=Te.y,Oe=Math.sin(Te.y),ke=Math.cos(Te.y),Be=adjust_lon(e-this.long0),Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si,oi,ci,vi,pi,fi,Mi,Oi,ui,li;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(Te.x=this.x0+this.a*(HALF_PI-t)*Math.sin(Be),Te.y=this.y0-this.a*(HALF_PI-t)*Math.cos(Be),Te):Math.abs(this.sin_p12+1)<=EPSLN?(Te.x=this.x0+this.a*(HALF_PI+t)*Math.sin(Be),Te.y=this.y0+this.a*(HALF_PI+t)*Math.cos(Be),Te):(pi=this.sin_p12*Oe+this.cos_p12*ke*Math.cos(Be),ci=Math.acos(pi),vi=ci?ci/Math.sin(ci):1,Te.x=this.x0+this.a*vi*ke*Math.sin(Be),Te.y=this.y0+this.a*vi*(this.cos_p12*Oe-this.sin_p12*ke*Math.cos(Be)),Te):(Ue=e0fn(this.es),He=e1fn(this.es),We=e2fn(this.es),Cn=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(An=this.a*mlfn(Ue,He,We,Cn,HALF_PI),En=this.a*mlfn(Ue,He,We,Cn,t),Te.x=this.x0+(An-En)*Math.sin(Be),Te.y=this.y0-(An-En)*Math.cos(Be),Te):Math.abs(this.sin_p12+1)<=EPSLN?(An=this.a*mlfn(Ue,He,We,Cn,HALF_PI),En=this.a*mlfn(Ue,He,We,Cn,t),Te.x=this.x0+(An+En)*Math.sin(Be),Te.y=this.y0+(An+En)*Math.cos(Be),Te):(Sn=Oe/ke,Tn=gN(this.a,this.e,this.sin_p12),Ln=gN(this.a,this.e,Oe),Bn=Math.atan((1-this.es)*Sn+this.es*Tn*this.sin_p12/(Ln*ke)),ti=Math.atan2(Math.sin(Be),this.cos_p12*Math.tan(Bn)-this.sin_p12*Math.cos(Be)),ti===0?fi=Math.asin(this.cos_p12*Math.sin(Bn)-this.sin_p12*Math.cos(Bn)):Math.abs(Math.abs(ti)-Math.PI)<=EPSLN?fi=-Math.asin(this.cos_p12*Math.sin(Bn)-this.sin_p12*Math.cos(Bn)):fi=Math.asin(Math.sin(Be)*Math.cos(Bn)/Math.sin(ti)),ni=this.e*this.sin_p12/Math.sqrt(1-this.es),ii=this.e*this.cos_p12*Math.cos(ti)/Math.sqrt(1-this.es),si=ni*ii,oi=ii*ii,Mi=fi*fi,Oi=Mi*fi,ui=Oi*fi,li=ui*fi,ci=Tn*fi*(1-Mi*oi*(1-oi)/6+Oi/8*si*(1-2*oi)+ui/120*(oi*(4-7*oi)-3*ni*ni*(1-7*oi))-li/48*si),Te.x=this.x0+ci*Math.sin(ti),Te.y=this.y0+ci*Math.cos(ti),Te))}function inverse$7(Te){Te.x-=this.x0,Te.y-=this.y0;var e,t,Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si,oi,ci,vi,pi,fi;return this.sphere?(e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,Oe=Math.sin(t),ke=Math.cos(t),Be=this.long0,Math.abs(e)<=EPSLN?Ue=this.lat0:(Ue=asinz(ke*this.sin_p12+Te.y*Oe*this.cos_p12/e),He=Math.abs(this.lat0)-HALF_PI,Math.abs(He)<=EPSLN?this.lat0>=0?Be=adjust_lon(this.long0+Math.atan2(Te.x,-Te.y)):Be=adjust_lon(this.long0-Math.atan2(-Te.x,Te.y)):Be=adjust_lon(this.long0+Math.atan2(Te.x*Oe,e*this.cos_p12*ke-Te.y*this.sin_p12*Oe))),Te.x=Be,Te.y=Ue,Te)):(We=e0fn(this.es),Cn=e1fn(this.es),An=e2fn(this.es),En=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Sn=this.a*mlfn(We,Cn,An,En,HALF_PI),e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),Tn=Sn-e,Ue=imlfn(Tn/this.a,We,Cn,An,En),Be=adjust_lon(this.long0+Math.atan2(Te.x,-1*Te.y)),Te.x=Be,Te.y=Ue,Te):Math.abs(this.sin_p12+1)<=EPSLN?(Sn=this.a*mlfn(We,Cn,An,En,HALF_PI),e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),Tn=e-Sn,Ue=imlfn(Tn/this.a,We,Cn,An,En),Be=adjust_lon(this.long0+Math.atan2(Te.x,Te.y)),Te.x=Be,Te.y=Ue,Te):(e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),ti=Math.atan2(Te.x,Te.y),Ln=gN(this.a,this.e,this.sin_p12),ni=Math.cos(ti),ii=this.e*this.cos_p12*ni,si=-ii*ii/(1-this.es),oi=3*this.es*(1-si)*this.sin_p12*this.cos_p12*ni/(1-this.es),ci=e/Ln,vi=ci-si*(1+si)*Math.pow(ci,3)/6-oi*(1+3*si)*Math.pow(ci,4)/24,pi=1-si*vi*vi/2-ci*vi*vi*vi/6,Bn=Math.asin(this.sin_p12*Math.cos(vi)+this.cos_p12*Math.sin(vi)*ni),Be=adjust_lon(this.long0+Math.asin(Math.sin(ti)*Math.sin(vi)/Math.cos(Bn))),fi=Math.sin(Bn),Ue=Math.atan2((fi-this.es*pi*this.sin_p12)*Math.tan(Bn),fi*(1-this.es)),Te.x=Be,Te.y=Ue,Te))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn=Te.x,An=Te.y;return Oe=adjust_lon(Cn-this.long0),e=Math.sin(An),t=Math.cos(An),ke=Math.cos(Oe),Ue=this.sin_p14*e+this.cos_p14*t*ke,Be=1,(Ue>0||Math.abs(Ue)<=EPSLN)&&(He=this.a*Be*t*Math.sin(Oe),We=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*ke)),Te.x=He,Te.y=We,Te}function inverse$6(Te){var e,t,Oe,ke,Be,Ue,He;return Te.x-=this.x0,Te.y-=this.y0,e=Math.sqrt(Te.x*Te.x+Te.y*Te.y),t=asinz(e/this.a),Oe=Math.sin(t),ke=Math.cos(t),Ue=this.long0,Math.abs(e)<=EPSLN?(He=this.lat0,Te.x=Ue,Te.y=He,Te):(He=asinz(ke*this.sin_p14+Te.y*Oe*this.cos_p14/e),Be=Math.abs(this.lat0)-HALF_PI,Math.abs(Be)<=EPSLN?(this.lat0>=0?Ue=adjust_lon(this.long0+Math.atan2(Te.x,-Te.y)):Ue=adjust_lon(this.long0-Math.atan2(-Te.x,Te.y)),Te.x=Ue,Te.y=He,Te):(Ue=adjust_lon(this.long0+Math.atan2(Te.x*Oe,e*this.cos_p14*ke-Te.y*this.sin_p14*Oe)),Te.x=Ue,Te.y=He,Te))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(Te){var e={x:0,y:0},t,Oe,ke,Be,Ue,He,We={value:0};if(Te.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(Te.y)):t=Te.y,Oe=Te.x,this.face===FACE_ENUM.TOP)Be=HALF_PI-t,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(We.value=AREA_ENUM.AREA_0,ke=Oe-HALF_PI):Oe>HALF_PI+FORTPI||Oe<=-(HALF_PI+FORTPI)?(We.value=AREA_ENUM.AREA_1,ke=Oe>0?Oe-SPI:Oe+SPI):Oe>-(HALF_PI+FORTPI)&&Oe<=-FORTPI?(We.value=AREA_ENUM.AREA_2,ke=Oe+HALF_PI):(We.value=AREA_ENUM.AREA_3,ke=Oe);else if(this.face===FACE_ENUM.BOTTOM)Be=HALF_PI+t,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(We.value=AREA_ENUM.AREA_0,ke=-Oe+HALF_PI):Oe<FORTPI&&Oe>=-FORTPI?(We.value=AREA_ENUM.AREA_1,ke=-Oe):Oe<-FORTPI&&Oe>=-(HALF_PI+FORTPI)?(We.value=AREA_ENUM.AREA_2,ke=-Oe-HALF_PI):(We.value=AREA_ENUM.AREA_3,ke=Oe>0?-Oe+SPI:-Oe-SPI);else{var Cn,An,En,Sn,Tn,Ln,Bn;this.face===FACE_ENUM.RIGHT?Oe=qsc_shift_lon_origin(Oe,+HALF_PI):this.face===FACE_ENUM.BACK?Oe=qsc_shift_lon_origin(Oe,3.14159265359):this.face===FACE_ENUM.LEFT&&(Oe=qsc_shift_lon_origin(Oe,-HALF_PI)),Sn=Math.sin(t),Tn=Math.cos(t),Ln=Math.sin(Oe),Bn=Math.cos(Oe),Cn=Tn*Bn,An=Tn*Ln,En=Sn,this.face===FACE_ENUM.FRONT?(Be=Math.acos(Cn),ke=qsc_fwd_equat_face_theta(Be,En,An,We)):this.face===FACE_ENUM.RIGHT?(Be=Math.acos(An),ke=qsc_fwd_equat_face_theta(Be,En,-Cn,We)):this.face===FACE_ENUM.BACK?(Be=Math.acos(-Cn),ke=qsc_fwd_equat_face_theta(Be,En,-An,We)):this.face===FACE_ENUM.LEFT?(Be=Math.acos(-An),ke=qsc_fwd_equat_face_theta(Be,En,Cn,We)):(Be=ke=0,We.value=AREA_ENUM.AREA_0)}return He=Math.atan(12/SPI*(ke+Math.acos(Math.sin(ke)*Math.cos(FORTPI))-HALF_PI)),Ue=Math.sqrt((1-Math.cos(Be))/(Math.cos(He)*Math.cos(He))/(1-Math.cos(Math.atan(1/Math.cos(ke))))),We.value===AREA_ENUM.AREA_1?He+=HALF_PI:We.value===AREA_ENUM.AREA_2?He+=SPI:We.value===AREA_ENUM.AREA_3&&(He+=1.5*SPI),e.x=Ue*Math.cos(He),e.y=Ue*Math.sin(He),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,Te.x=e.x,Te.y=e.y,Te}function inverse$5(Te){var e={lam:0,phi:0},t,Oe,ke,Be,Ue,He,We,Cn,An,En={value:0};if(Te.x=(Te.x-this.x0)/this.a,Te.y=(Te.y-this.y0)/this.a,Oe=Math.atan(Math.sqrt(Te.x*Te.x+Te.y*Te.y)),t=Math.atan2(Te.y,Te.x),Te.x>=0&&Te.x>=Math.abs(Te.y)?En.value=AREA_ENUM.AREA_0:Te.y>=0&&Te.y>=Math.abs(Te.x)?(En.value=AREA_ENUM.AREA_1,t-=HALF_PI):Te.x<0&&-Te.x>=Math.abs(Te.y)?(En.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(En.value=AREA_ENUM.AREA_3,t+=HALF_PI),An=SPI/12*Math.tan(t),Ue=Math.sin(An)/(Math.cos(An)-1/Math.sqrt(2)),He=Math.atan(Ue),ke=Math.cos(t),Be=Math.tan(Oe),We=1-ke*ke*Be*Be*(1-Math.cos(Math.atan(1/Math.cos(He)))),We<-1?We=-1:We>1&&(We=1),this.face===FACE_ENUM.TOP)Cn=Math.acos(We),e.phi=HALF_PI-Cn,En.value===AREA_ENUM.AREA_0?e.lam=He+HALF_PI:En.value===AREA_ENUM.AREA_1?e.lam=He<0?He+SPI:He-SPI:En.value===AREA_ENUM.AREA_2?e.lam=He-HALF_PI:e.lam=He;else if(this.face===FACE_ENUM.BOTTOM)Cn=Math.acos(We),e.phi=Cn-HALF_PI,En.value===AREA_ENUM.AREA_0?e.lam=-He+HALF_PI:En.value===AREA_ENUM.AREA_1?e.lam=-He:En.value===AREA_ENUM.AREA_2?e.lam=-He-HALF_PI:e.lam=He<0?-He-SPI:-He+SPI;else{var Sn,Tn,Ln;Sn=We,An=Sn*Sn,An>=1?Ln=0:Ln=Math.sqrt(1-An)*Math.sin(He),An+=Ln*Ln,An>=1?Tn=0:Tn=Math.sqrt(1-An),En.value===AREA_ENUM.AREA_1?(An=Tn,Tn=-Ln,Ln=An):En.value===AREA_ENUM.AREA_2?(Tn=-Tn,Ln=-Ln):En.value===AREA_ENUM.AREA_3&&(An=Tn,Tn=Ln,Ln=-An),this.face===FACE_ENUM.RIGHT?(An=Sn,Sn=-Tn,Tn=An):this.face===FACE_ENUM.BACK?(Sn=-Sn,Tn=-Tn):this.face===FACE_ENUM.LEFT&&(An=Sn,Sn=Tn,Tn=-An),e.phi=Math.acos(-Ln)-HALF_PI,e.lam=Math.atan2(Tn,Sn),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var Bn,ti,ni;Bn=e.phi<0?1:0,ti=Math.tan(e.phi),ni=this.b/Math.sqrt(ti*ti+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-ni*ni)/(this.one_minus_f*ni)),Bn&&(e.phi=-e.phi)}return e.lam+=this.long0,Te.x=e.lam,Te.y=e.phi,Te}function qsc_fwd_equat_face_theta(Te,e,t,Oe){var ke;return Te<EPSLN?(Oe.value=AREA_ENUM.AREA_0,ke=0):(ke=Math.atan2(e,t),Math.abs(ke)<=FORTPI?Oe.value=AREA_ENUM.AREA_0:ke>FORTPI&&ke<=HALF_PI+FORTPI?(Oe.value=AREA_ENUM.AREA_1,ke-=HALF_PI):ke>HALF_PI+FORTPI||ke<=-(HALF_PI+FORTPI)?(Oe.value=AREA_ENUM.AREA_2,ke=ke>=0?ke-SPI:ke+SPI):(Oe.value=AREA_ENUM.AREA_3,ke+=HALF_PI)),ke}function qsc_shift_lon_origin(Te,e){var t=Te+e;return t<-3.14159265359?t+=TWO_PI:t>3.14159265359&&(t-=TWO_PI),t}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(Te,e){return Te[0]+e*(Te[1]+e*(Te[2]+e*Te[3]))},poly3_der=function(Te,e){return Te[1]+e*(2*Te[2]+e*3*Te[3])};function newton_rapshon(Te,e,t,Oe){for(var ke=e;Oe;--Oe){var Be=Te(ke);if(ke-=Be,Math.abs(Be)<t)break}return ke}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(Te){var e=adjust_lon(Te.x-this.long0),t=Math.abs(Te.y),Oe=Math.floor(t*C1);Oe<0?Oe=0:Oe>=NODES&&(Oe=NODES-1),t=R2D*(t-RC1*Oe);var ke={x:poly3_val(COEFS_X[Oe],t)*e,y:poly3_val(COEFS_Y[Oe],t)};return Te.y<0&&(ke.y=-ke.y),ke.x=ke.x*this.a*FXC+this.x0,ke.y=ke.y*this.a*FYC+this.y0,ke}function inverse$4(Te){var e={x:(Te.x-this.x0)/(this.a*FXC),y:Math.abs(Te.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=Te.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var Oe=COEFS_Y[t],ke=5*(e.y-Oe[0])/(COEFS_Y[t+1][0]-Oe[0]);ke=newton_rapshon(function(Be){return(poly3_val(Oe,Be)-e.y)/poly3_der(Oe,Be)},ke,EPSLN,100),e.x/=poly3_val(COEFS_X[t],ke),e.y=(5*t+ke)*D2R$1,Te.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(Te){var e=geodeticToGeocentric(Te,this.es,this.a);return e}function inverse$3(Te){var e=geocentricToGeodetic(Te,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var Te=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(Te),this.sw=Math.sin(Te)}function forward$2(Te){Te.x-=this.long0;var e=Math.sin(Te.y),t=Math.cos(Te.y),Oe=Math.cos(Te.x),ke,Be;switch(this.mode){case mode.OBLIQ:Be=this.sinph0*e+this.cosph0*t*Oe;break;case mode.EQUIT:Be=t*Oe;break;case mode.S_POLE:Be=-e;break;case mode.N_POLE:Be=e;break}switch(Be=this.pn1/(this.p-Be),ke=Be*t*Math.sin(Te.x),this.mode){case mode.OBLIQ:Be*=this.cosph0*e-this.sinph0*t*Oe;break;case mode.EQUIT:Be*=e;break;case mode.N_POLE:Be*=-(t*Oe);break;case mode.S_POLE:Be*=t*Oe;break}var Ue,He;return Ue=Be*this.cg+ke*this.sg,He=1/(Ue*this.sw*this.h1+this.cw),ke=(ke*this.cg-Be*this.sg)*this.cw*He,Be=Ue*He,Te.x=ke*this.a,Te.y=Be*this.a,Te}function inverse$2(Te){Te.x/=this.a,Te.y/=this.a;var e={x:Te.x,y:Te.y},t,Oe,ke;ke=1/(this.pn1-Te.y*this.sw),t=this.pn1*Te.x*ke,Oe=this.pn1*Te.y*this.cw*ke,Te.x=t*this.cg+Oe*this.sg,Te.y=Oe*this.cg-t*this.sg;var Be=hypot(Te.x,Te.y);if(Math.abs(Be)<EPSLN)e.x=0,e.y=Te.y;else{var Ue,He;switch(He=1-Be*Be*this.pfact,He=(this.p-Math.sqrt(He))/(this.pn1/Be+Be/this.pn1),Ue=Math.sqrt(1-He*He),this.mode){case mode.OBLIQ:e.y=Math.asin(Ue*this.sinph0+Te.y*He*this.cosph0/Be),Te.y=(Ue-this.sinph0*Math.sin(e.y))*Be,Te.x*=He*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(Te.y*He/Be),Te.y=Ue*Be,Te.x*=He;break;case mode.N_POLE:e.y=Math.asin(Ue),Te.y=-Te.y;break;case mode.S_POLE:e.y=-Math.asin(Ue);break}e.x=Math.atan2(Te.x,Te.y)}return Te.x=e.x+this.long0,Te.y=e.y,Te}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var Te=1-this.es,e=1/Te;this.radius_p=Math.sqrt(Te),this.radius_p2=Te,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(Te){var e=Te.x,t=Te.y,Oe,ke,Be,Ue;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var He=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(ke=He*Math.cos(e)*Math.cos(t),Be=He*Math.sin(e)*Math.cos(t),Ue=He*Math.sin(t),(this.radius_g-ke)*ke-Be*Be-Ue*Ue*this.radius_p_inv2<0)return Te.x=Number.NaN,Te.y=Number.NaN,Te;Oe=this.radius_g-ke,this.flip_axis?(Te.x=this.radius_g_1*Math.atan(Be/hypot(Ue,Oe)),Te.y=this.radius_g_1*Math.atan(Ue/Oe)):(Te.x=this.radius_g_1*Math.atan(Be/Oe),Te.y=this.radius_g_1*Math.atan(Ue/hypot(Be,Oe)))}else this.shape==="sphere"&&(Oe=Math.cos(t),ke=Math.cos(e)*Oe,Be=Math.sin(e)*Oe,Ue=Math.sin(t),Oe=this.radius_g-ke,this.flip_axis?(Te.x=this.radius_g_1*Math.atan(Be/hypot(Ue,Oe)),Te.y=this.radius_g_1*Math.atan(Ue/Oe)):(Te.x=this.radius_g_1*Math.atan(Be/Oe),Te.y=this.radius_g_1*Math.atan(Ue/hypot(Be,Oe))));return Te.x=Te.x*this.a,Te.y=Te.y*this.a,Te}function inverse$1(Te){var e=-1,t=0,Oe=0,ke,Be,Ue,He;if(Te.x=Te.x/this.a,Te.y=Te.y/this.a,this.shape==="ellipse"){this.flip_axis?(Oe=Math.tan(Te.y/this.radius_g_1),t=Math.tan(Te.x/this.radius_g_1)*hypot(1,Oe)):(t=Math.tan(Te.x/this.radius_g_1),Oe=Math.tan(Te.y/this.radius_g_1)*hypot(1,t));var We=Oe/this.radius_p;if(ke=t*t+We*We+e*e,Be=2*this.radius_g*e,Ue=Be*Be-4*ke*this.C,Ue<0)return Te.x=Number.NaN,Te.y=Number.NaN,Te;He=(-Be-Math.sqrt(Ue))/(2*ke),e=this.radius_g+He*e,t*=He,Oe*=He,Te.x=Math.atan2(t,e),Te.y=Math.atan(Oe*Math.cos(Te.x)/e),Te.y=Math.atan(this.radius_p_inv2*Math.tan(Te.y))}else if(this.shape==="sphere"){if(this.flip_axis?(Oe=Math.tan(Te.y/this.radius_g_1),t=Math.tan(Te.x/this.radius_g_1)*Math.sqrt(1+Oe*Oe)):(t=Math.tan(Te.x/this.radius_g_1),Oe=Math.tan(Te.y/this.radius_g_1)*Math.sqrt(1+t*t)),ke=t*t+Oe*Oe+e*e,Be=2*this.radius_g*e,Ue=Be*Be-4*ke*this.C,Ue<0)return Te.x=Number.NaN,Te.y=Number.NaN,Te;He=(-Be-Math.sqrt(Ue))/(2*ke),e=this.radius_g+He*e,t*=He,Oe*=He,Te.x=Math.atan2(t,e),Te.y=Math.atan(Oe*Math.cos(Te.x)/e)}return Te.x=Te.x+this.long0,Te}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$2=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(Te){var e=adjust_lon(Te.x-this.long0),t=Te.y,Oe=Math.asin(M$2*Math.sin(t)),ke=Oe*Oe,Be=ke*ke*ke;return Te.x=e*Math.cos(Oe)/(M$2*(A1+3*A2*ke+Be*(7*A3+9*A4*ke))),Te.y=Oe*(A1+A2*ke+Be*(A3+A4*ke)),Te.x=this.a*Te.x+this.x0,Te.y=this.a*Te.y+this.y0,Te}function inverse(Te){Te.x=(Te.x-this.x0)/this.a,Te.y=(Te.y-this.y0)/this.a;var e=1e-9,t=12,Oe=Te.y,ke,Be,Ue,He,We,Cn;for(Cn=0;Cn<t&&(ke=Oe*Oe,Be=ke*ke*ke,Ue=Oe*(A1+A2*ke+Be*(A3+A4*ke))-Te.y,He=A1+3*A2*ke+Be*(7*A3+9*A4*ke),Oe-=We=Ue/He,!(Math.abs(We)<e));++Cn);return ke=Oe*Oe,Be=ke*ke*ke,Te.x=M$2*Te.x*(A1+3*A2*ke+Be*(7*A3+9*A4*ke))/Math.cos(Oe),Te.y=Math.asin(Math.sin(Oe)/M$2),Te.x=adjust_lon(Te.x+this.long0),Te}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var Te;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),Te=Math.cos(this.phi1),this.en),this.am1=Te/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(Te){var e=adjust_lon(Te.x-(this.long0||0)),t=Te.y,Oe,ke,Be;return Oe=this.am1+this.m1-pj_mlfn(t,ke=Math.sin(t),Be=Math.cos(t),this.en),ke=Be*e/(Oe*Math.sqrt(1-this.es*ke*ke)),Te.x=Oe*Math.sin(ke),Te.y=this.am1-Oe*Math.cos(ke),Te.x=this.a*Te.x+(this.x0||0),Te.y=this.a*Te.y+(this.y0||0),Te}function e_inv(Te){Te.x=(Te.x-(this.x0||0))/this.a,Te.y=(Te.y-(this.y0||0))/this.a;var e,t,Oe,ke;if(t=hypot(Te.x,Te.y=this.am1-Te.y),ke=pj_inv_mlfn(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(ke))<HALF_PI)e=Math.sin(ke),Oe=t*Math.atan2(Te.x,Te.y)*Math.sqrt(1-this.es*e*e)/Math.cos(ke);else if(Math.abs(e-HALF_PI)<=EPS10)Oe=0;else throw new Error;return Te.x=adjust_lon(Oe+(this.long0||0)),Te.y=adjust_lat(ke),Te}function s_fwd(Te){var e=adjust_lon(Te.x-(this.long0||0)),t=Te.y,Oe,ke;return ke=this.cphi1+this.phi1-t,Math.abs(ke)>EPS10?(Te.x=ke*Math.sin(Oe=e*Math.cos(t)/ke),Te.y=this.cphi1-ke*Math.cos(Oe)):Te.x=Te.y=0,Te.x=this.a*Te.x+(this.x0||0),Te.y=this.a*Te.y+(this.y0||0),Te}function s_inv(Te){Te.x=(Te.x-(this.x0||0))/this.a,Te.y=(Te.y-(this.y0||0))/this.a;var e,t,Oe=hypot(Te.x,Te.y=this.cphi1-Te.y);if(t=this.cphi1+this.phi1-Oe,Math.abs(t)>HALF_PI)throw new Error;return Math.abs(Math.abs(t)-HALF_PI)<=EPS10?e=0:e=Oe*Math.atan2(Te.x,Te.y)/Math.cos(t),Te.x=adjust_lon(e+(this.long0||0)),Te.y=adjust_lat(t),Te}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(Te){Te.Proj.projections.add(tmerc),Te.Proj.projections.add(etmerc),Te.Proj.projections.add(utm),Te.Proj.projections.add(sterea),Te.Proj.projections.add(stere),Te.Proj.projections.add(somerc),Te.Proj.projections.add(omerc),Te.Proj.projections.add(lcc),Te.Proj.projections.add(krovak),Te.Proj.projections.add(cass),Te.Proj.projections.add(laea),Te.Proj.projections.add(aea),Te.Proj.projections.add(gnom),Te.Proj.projections.add(cea),Te.Proj.projections.add(eqc),Te.Proj.projections.add(poly),Te.Proj.projections.add(nzmg),Te.Proj.projections.add(mill),Te.Proj.projections.add(sinu),Te.Proj.projections.add(moll),Te.Proj.projections.add(eqdc),Te.Proj.projections.add(vandg),Te.Proj.projections.add(aeqd),Te.Proj.projections.add(ortho),Te.Proj.projections.add(qsc),Te.Proj.projections.add(robin),Te.Proj.projections.add(geocent),Te.Proj.projections.add(tpers),Te.Proj.projections.add(geos),Te.Proj.projections.add(eqearth),Te.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$y=LoggerByDefault.getLogger("CRS");function register(Te){const e=Object.keys(Te.defs);logger$y.trace("proj. codes :",e);const t=e.length;let Oe,ke;for(Oe=0;Oe<t;++Oe){const Be=e[Oe];if(!get$3(Be)){const Ue=Te.defs(Be);addProjection(new Projection$1({code:Be,axisOrientation:Ue.axis,metersPerUnit:Ue.to_meter,units:Ue.units}))}}for(Oe=0;Oe<t;++Oe){const Be=e[Oe],Ue=get$3(Be);for(ke=0;ke<t;++ke){const He=e[ke],We=get$3(He);if(!get$4(Be,He))if(Te.defs[Be]===Te.defs[He])addEquivalentProjections([Ue,We]);else{const Cn=Te(Be,He);addCoordinateTransforms(Ue,We,Cn.forward,Cn.inverse)}}}}var Register={isLoaded:!1,get:function(Te){if(!(Te===""||Te===null||typeof Te>"u")){var e=Te.split(":");if(e.length===2){var t=e[0],Oe=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(Oe))return this[t][Oe]}}},exist:function(Te){if(Te===""||Te===null||typeof Te>"u")return!1;var e=Te.split(":");if(e.length!==2)return!1;var t=e[0],Oe=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(Oe))},load:function(Te){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var Oe=e[t],ke=this[Oe];for(var Be in ke)if(ke.hasOwnProperty(Be)){var Ue=Oe+":"+Be;Te.defs(Ue,this.get(Ue))}}this.isLoaded=!0}},loadByDefault:function(Te){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var Oe=e[t];for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=t+":"+ke;Te.defs(Be,Oe[ke])}}},loadByName:function(Te,e){if(!this.exist(e))return!1;try{Te.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$x=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$x.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Te){logger$x.error(Te)}}},loadByDefault:function(){if(logger$x.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Te){logger$x.error(Te)}}},loadByName:function(Te){if(logger$x.trace("Loading a custom definition projection : ",Te),!Register.isLoaded){Register.loadByName(proj4,Te);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$x.error(e)}}},overload:function(){logger$x.trace("Loading projections aera (extent)");for(var Te in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(Te)){var e=this.projectionsExtent[Te],t=get$3(Te),Oe=getTransform("EPSG:4326",t),ke=applyTransform([e.bottom,e.right,e.top,e.left],Oe);t.setExtent(ke),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async Te=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:Te,fields:m_fields,size:m_size};Object.keys(t).forEach(We=>e.searchParams.append(We,t[We]));var Oe=await fetch(e,{}),ke=await Oe.json();if(Oe.status!==200)throw new Error(Oe.message);if(!(!ke||ke.length===0)){for(let We=0;We<ke.length;We++){const Cn=ke[We];m_filterByLayerPriority.findIndex(En=>En.includes(Cn.source.layer_name))>=0&&(ke[We].score+=100)}ke.sort((We,Cn)=>Cn.score-We.score);var Be=null;m_filterWMTSPriority&&(Be=inventory(ke));for(let We=0;We<ke.length;We++){const Cn=ke[We];var Ue=m_filterByService.length===0||m_filterByService.includes(Cn.source.type);if(Ue){if(unique().length>=m_maximumResponses)break;var He={attribution:Cn.source.attribution||{},srs:Cn.source.srs||[],keywords:Cn.source.keywords||[],extent:Cn.source.extent||{},metadata:Cn.source.metadata_urls||[],name:Cn.source.layer_name||"",title:Cn.source.title||"",description:Cn.source.description,service:Cn.source.type||"",url:Cn.source.url||"",tech:Cn.source.tech||{},tags:Cn.source.tags||{},theme:Cn.source.theme||"",producer:Cn.source.producer||""};if(m_filterByTMS.length&&(He.service==="WMTS"&&m_filterByTMS.includes(He.name)||He.service==="TMS"&&!m_filterByTMS.includes(He.name))||m_filterByProjection.length&&m_filterByProjection.includes(He.srs[0])||Be&&Be[He.name]&&He.service==="WMS")continue;m_suggestions.push(He)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((Te,e,t)=>e===t.findIndex(Oe=>Oe.service===Te.service&&Oe.name===Te.name&&Oe.title===Te.title&&Oe.description===Te.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=Te=>{var e={};for(let t=0;t<Te.length;t++){const Oe=Te[t].source.type,ke=Te[t].source.layer_name;(Oe==="WMTS"||Oe==="WMS")&&(e[ke]===void 0&&(e[ke]=Oe==="WMTS"),e[ke]||(e[ke]=Oe==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(Te=>Te.name),getTitles=()=>unique().map(Te=>Te.title),setIndex=Te=>{m_index=Te},setFields=Te=>{m_fields=Te},setSuggestions=Te=>{m_suggestions=Te},setSize=Te=>{m_size=parseInt(Te)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=Te=>{m_maximumResponses=parseInt(Te)},setFiltersByService=Te=>{m_filterByService=Te===""?[]:Te.split(",")},setFiltersByProjection=Te=>{m_filterByProjection=Te===""?[]:Te.split(",")},setFiltersByLayerPriority=Te=>{m_filterByLayerPriority=Te===""?[]:Te.split(",")},setFilterWMTSPriority=Te=>{m_filterWMTSPriority=Te},setFiltersByTMS=Te=>{m_filterByTMS=Te===""?[]:Te.split(",")},updateFilterByTMS=async Te=>{var e=Te;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const t=await fetch(e),Oe=await t.json();if(t.status!==200)throw new Error(t.message);if(!Oe)throw new Error("Liste vide !");var ke=Object.keys(Oe.layers).map(Be=>Be.split("$")[0]);return ke&&setFiltersByTMS(ke.toString()),m_filterByTMS},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSuggestions,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority};var SearchEngineDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPsearchEngine"),Te.className="GPwidget gpf-widget",Te},_createSearchDivElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPshowSearchDiv"),Te},_createShowSearchEnginePictoElement:function(Te){var e=this;checkDsfr()&&(Te=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!Te),t.disabled=!Te,t.setAttribute("type","button"),t.addEventListener("click",function(Oe){if(checkDsfr()){var ke=document.getElementById(e._addUID("GPautocompleteResults")),Be=ke.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Ue=ke.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),He=Ue.length;if(!He)return;var We=null;Be.length?We=Be[0]:(We=Ue[0],We.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",We.style.color="#000000",We.style["background-color"]="#CEDBEF"),We.click();return}var Cn=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Cn),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var An=document.getElementById(e._addUID("GPshowAdvancedSearch"));An&&(An.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var En=document.getElementById(e._addUID("GPshowGeolocate"));En&&(En.style.display=null);var Sn=document.getElementById(e._addUID("GPshowSearchByCoordinate"));Sn&&(Sn.style.display=null);var Tn="#GPsearchInput-"+e._uid;document.querySelector(Tn+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(Oe)}),t},_createSearchInputElement:function(Te){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(ke){return ke.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(ke)),!1});var Oe=document.createElement("input");return Oe.id=this._addUID("GPsearchInputText"),Oe.className="GPsearchInputText gpf-input fr-input",Oe.type="text",Oe.placeholder=Te,Oe.autocomplete="off",Oe.addEventListener("keyup",function(ke){var Be=ke.which||ke.keyCode;Be===13||Be===10||Be===38||Be===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Oe.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(ke))}),Oe.addEventListener("keydown",function(ke){var Be=ke.which||ke.keyCode;Be===13&&ke.preventDefault();var Ue=document.getElementById(e._addUID("GPautocompleteResults"));if(Ue){var He=Ue.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),We=Ue.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),Cn=We.length;if(Cn){var An=null;if(He.length)An=He[0];else if(An=We[0],An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",An.style.color="#000000",An.style["background-color"]="#CEDBEF",Be!==13)return;var En=parseInt(SelectorID.index(An.id),10),Sn=En===Cn-1?We[0]:We[En+1],Tn=En===0?We[Cn-1]:We[En-1];switch(An.style["background-color"]="",An.style.color="",Tn.style["background-color"]="",Tn.style.color="",Sn.style["background-color"]="",Sn.style.color="",Be){case 38:An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Tn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Tn.style.color="#000000",Tn.style["background-color"]="#CEDBEF",An.scrollIntoView();break;case 40:An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Sn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Sn.style.color="#000000",Sn.style["background-color"]="#CEDBEF",An.scrollIntoView();break;case 13:ke.preventDefault(),An.click(ke);break}An.focus()}}}),t.appendChild(Oe),t},_createSearchResetElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(Te._addUID("GPsearchInputText")).value="",document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Te.onSearchResetClick()}),e},_createButtonsElement:function(){var Te=document.createElement("div");return Te.className="GPbuttonsContainer",Te},_createFirstLineWrapper:function(){var Te=document.createElement("div");return Te.className="GPsearchFirstLineWrapper",Te},_createRadioContainer:function(){var Te=document.createElement("div");return Te.className="GPsearchRadioContainer",Te},_createRadioElements:function(){var Te=document.createElement("div");Te.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var Oe=document.createElement("label");Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GPsearchSplitLocations"),Oe.title="Adresses",Oe.innerHTML="Adresses",e.appendChild(Oe),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var ke=document.createElement("div");ke.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GPsearchSplitData"),Be.type="radio",Be.name="GPsearchSplit",Be.value="data",ke.appendChild(Be);var Ue=document.createElement("label");return Ue.className="gpf-label fr-label",Ue.htmlFor=this._addUID("GPsearchSplitData"),Ue.title="Cartes et données",Ue.innerHTML="Cartes et données",ke.appendChild(Ue),Be.addEventListener?Be.addEventListener("change",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Be.attachEvent&&Be.attachEvent("onchange",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),Te.appendChild(e),Te.appendChild(ke),[Te,t,Be]},_createShowAdvancedSearchElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowAdvancedSearch GPshowOpen gpf-btn gpf-btn-icon-search-advanced fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe);var ke="#GPsearchInput-"+Te._uid;Oe?(document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(ke+" input").disabled=!1,document.querySelector(ke+" .GPsearchInputReset")&&(document.querySelector(ke+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1)):(document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(ke+" input").disabled=!0,document.querySelector(ke+" .GPsearchInputReset")&&(document.querySelector(ke+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!0)),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Te.onShowSearchGeolocateClick(t)}),e},_createShowSearchByCoordinateElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe);var ke="#GPsearchInput-"+Te._uid;Oe?(document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(ke+" input").disabled=!1,document.querySelector(ke+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1)):(document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(ke+" input").disabled=!0,document.querySelector(ke+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!0)),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPadvancedSearchPanel"),Te.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Te},_createAdvancedSearchPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createGeocodeResultsElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPgeocodeResultsList"),Te.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Te.appendChild(this._createGeocodeResultsHeaderElement()),Te},_createGeocodeResultsDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createAutoCompleteElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPautoCompleteList"),Te.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",Te},_createCoordinateSearchPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPcoordinateSearchPanel"),Te.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Te},_createCoordinateSearchPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createAutoCompleteListElement:function(){var Te=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var Te=document.createElement("div");return Te.id=this._addUID("GPautocompleteResultsLocation"),Te.className="GPelementHidden gpf-hidden gpf-select",Te.size=20,Te.autofocus=!0,Te},_createAutoCompletedLocationTitleElement(){var Te=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-loc",e.innerHTML="Lieux et adresses",Te.appendChild(e)},_createAutoCompletedLocationElement:function(Te,e){var t=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsLocation")),ke=document.createElement("p");ke.id=this._addUID("AutoCompletedLocation_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Be=GeocodeUtils.getSuggestedLocationFreeform(Te);ke.innerHTML=Be,ke.title=Be,ke.addEventListener?ke.addEventListener("click",function(Ue){t.onAutoCompletedResultsItemClick(Ue)},!1):ke.attachEvent&&ke.attachEvent("onclick",function(Ue){t.onAutoCompletedResultsItemClick(Ue)}),Oe.appendChild(ke)},_createSearchedSuggestContainer(){var Te=document.createElement("div");return Te.id=this._addUID("GPautocompleteResultsSuggest"),Te.className="GPelementHidden gpf-hidden gpf-select",Te.size=6,Te.autofocus=!0,Te},_createSearchedSuggestTitleElement(){var Te=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-data",e.innerHTML="Cartes et données",Te.appendChild(e)},_createSearchedSuggestElement:function(Te,e){var t=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),ke=document.createElement("p");ke.id=this._addUID("AutoCompletedSuggest_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",ke.innerHTML=Te.title+" ("+Te.service+")",ke.dataset.layer=Te.name,ke.title=`${Te.description} (nom technique : ${Te.name})`,ke.addEventListener?ke.addEventListener("click",function(Be){t.onSearchedResultsItemClick(Be)},!1):ke.attachEvent&&ke.attachEvent("onclick",function(Be){t.onSearchedResultsItemClick(Be)}),Oe.appendChild(ke)},_createAdvancedSearchPanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avancée",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPadvancedSearchClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche avancée",Oe.addEventListener?Oe.addEventListener("click",function(){var Be="#GPsearchInput-"+Te._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Te._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Te._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createAdvancedSearchPanelFormElement:function(Te){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(Ue){Ue.preventDefault();for(var He=[],We="#GPadvancedSearchFilters-"+e._uid,Cn=document.querySelectorAll(We+" > div > div > input,select#category"),An=0;An<Cn.length;An++){var En=Cn[An];He.push({key:En.name,value:En.value})}return e.onGeocodingAdvancedSearchSubmit(Ue,He),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var Oe=document.createElement("div");Oe.className="GPflexInput gpf-flex-column ";var ke=document.createElement("label");ke.className="GPadvancedSearchCodeLabel gpf-label fr-label",ke.innerHTML="Recherche par",Oe.appendChild(ke);var Be=this._createAdvancedSearchFormCodeElement(Te);return Oe.appendChild(Be),t.appendChild(Oe),t},_createAdvancedSearchFormCodeElement:function(Te){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(Be){e.onGeocodingAdvancedSearchCodeChange(Be)},!1),Te||(Te=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var Oe=0;Oe<Te.length;Oe++){var ke=document.createElement("option");ke.value=Te[Oe].id,ke.text=Te[Oe].title,t.appendChild(ke)}return t},_createAdvancedSearchFormInputElement:function(){var Te=document.createElement("input");return Te.type="submit",Te.id=this._addUID("GPadvancedSearchSubmit"),Te.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Te.value="Chercher",Te},_createAdvancedSearchFormFiltersElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPadvancedSearchFilters"),Te},_createAdvancedSearchFiltersTableElement:function(Te,e){var t=document.createElement("div");return t.id=this._addUID(Te),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(Te){var e=null,t=Te.name,Oe=Te.title,ke=Te.description,Be=Te.code,Ue=Te.value,He=document.createElement("div");He.className="GPflexInput gpf-flex-column ";var We=document.createElement("label");if(We.className="GPadvancedSearchFilterLabel gpf-label fr-label",We.htmlFor=t,We.title=ke||Oe,We.innerHTML=Oe,He.appendChild(We),t==="category"){var Cn=document.createElement("select");if(Cn.id=t,Cn.name=t,Cn.title=Oe,Cn.className="GPadvancedSearchFilterInput gpf-select fr-select",Ue&&Array.isArray(Ue))for(var An=0;An<Ue.length;An++){var En=document.createElement("option");En.value=Ue[An],En.text=Ue[An],Cn.appendChild(En)}He.appendChild(Cn)}else{var Sn=document.createElement("input");if(Sn.id=t,Sn.className="GPadvancedSearchFilterInput gpf-input fr-input",Sn.type="text",Sn.name=t,Ue)if(Array.isArray(Ue)){var Tn=t+"_list";Sn.setAttribute("list",Tn);var Ln=document.createElement("datalist");Ln.id=Tn;for(var An=0;An<Ue.length;++An){var En=document.createElement("option");En.value=Ue[An],Ln.appendChild(En)}He.appendChild(Ln)}else Sn.value=Ue;He.appendChild(Sn)}return e=document.getElementById(this._addUID(Be)),e?e.appendChild(He):e=He,e},_createGeocodeResultsHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Résultats de la recherche",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPgeocodeResultsClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la fenêtre de résultats",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createGeocodeResultsListElement:function(){var Te=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Te.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Te.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(Te,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),Oe=document.createElement("div");Oe.id=this._addUID("GeocodedLocation_"+e),Oe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof Te=="string"?Oe.innerHTML=Te:Oe.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(Te),t.appendChild(Oe)},_createCoordinateSearchPanelHeaderElement(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnées",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPcoordinateSearchClose"),Oe.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche par coordonnées",Oe.addEventListener?Oe.addEventListener("click",function(){var Be="#GPsearchInput-"+Te._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1),document.getElementById(Te._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Te.onCoordinateSearchClose()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Te._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Te._uid).disabled=!1),document.getElementById(Te._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Te.onCoordinateSearchClose()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createCoordinateSearchPanelFormElement(){var Te=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Te.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var Te=document.createElement("div");return Te.className="GPflexInput gpf-flex-column ",Te},_createCoordinateSearchSystemsLabelElement(){var Te=document.createElement("label");return Te.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",Te.innerHTML="Système de référence",Te},_setCoordinateSearchSystemsSelectElement(Te){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un système de réference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onCoordinateSearchSystemChange(Ue)});for(var Oe=0;Oe<Te.length;Oe++){var ke=Te[Oe],Be=document.createElement("option");Be.value=ke.code,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_createCoordinateSearchUnitsLabelElement(){var Te=document.createElement("label");return Te.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",Te.innerHTML="Unités",Te},_setCoordinateSearchUnitsSelectElement(Te){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unité",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onCoordinateSearchUnitsChange(Ue)});for(var Oe=0;Oe<Te.length;Oe++){var ke=Te[Oe],Be=document.createElement("option");Be.value=ke.code?ke.code:Oe,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_setCoordinateSearchLngLabelElement(Te){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=Te==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(Te){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",Te){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var Te=document.createElement("div");return Te.id=this._addUID("GPcoordinateSearchLngDMS"),Te.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,Te},_setCoordinateSearchLatLabelElement(Te){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=Te==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(Te){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",Te){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var Te=document.createElement("div");return Te.id=this._addUID("GPcoordinateSearchLatDMS"),Te.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,Te},_createCoordinateSearchSubmitElement(){var Te=document.createElement("input");return Te.type="submit",Te.id=this._addUID("GPcoordinateSearchSubmit"),Te.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Te.value="Chercher",Te}},logger$w=LoggerByDefault.getLogger("searchengine"),SearchEngine=class Wf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Wf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$w.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!1},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterProjections&&Search$1.setFiltersByProjection(this.options.searchOptions.filterProjections),this.options.searchOptions.filterVectortiles&&Search$1.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search$1.updateFilterByTMS()),Search$1.target.addEventListener("suggest",ke=>{logger$w.debug(ke);let Be=ke.detail;Be=this._filterResultsFromConfigLayers(Be),this._fillSearchedSuggestListContainer(Be)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle,Oe=this.options.markerUrl;Oe?this._markerUrl=Oe:this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var Oe=e.resources.geocode;if(Oe)if(Array.isArray(Oe)){var ke=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<Oe.length;t++)ke.indexOf(Oe[t])===-1&&logger$w.log("[SearchEngine] options.resources.geocode : "+Oe[t]+" is not a resource for geocode")}else logger$w.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),Oe=null;var Be=e.resources.autocomplete;if(Be)if(Array.isArray(Be)){var Ue=["StreetAddress","PositionOfInterest"];for(t=0;t<Be.length;t++)Ue.indexOf(Be[t])===-1&&logger$w.log("[SearchEngine] options.resources.autocomplete : "+Be[t]+" is not a resource for autocomplete")}else logger$w.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Be=null}else logger$w.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$w.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$w.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];this._setSystem(ke)}if(this._coordinateSearchSystems.length===0)for(var Be=0;Be<e.length;Be++)this._setSystem(e[Be])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var ke=!1,Be=0;Be<e[Oe].length;Be++)for(var Ue=e[Oe][Be],He=0;He<t.length;He++){var We=t[He];Ue.code===We&&(ke=!0,this._coordinateSearchUnits[Oe]||(this._coordinateSearchUnits[Oe]=[]),this._coordinateSearchUnits[Oe].push(Ue))}ke||(this._coordinateSearchUnits[Oe]=e[Oe])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div gpf-widget-color";var Oe=document.createElement("button");return Oe.title="Fermer la pop-up",Oe.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(Oe),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),Oe=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(Oe),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var ke=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&ke.appendChild(this._createSearchResetElement());var Be=this;ke.addEventListener?ke.addEventListener("click",function(){Be.onAutoCompleteInputClick()}):ke.attachEvent&&ke.attachEvent("onclick",function(){Be.onAutoCompleteInputClick()}),t.appendChild(ke);var Ue=this._createButtonsElement(),He=this._createFirstLineWrapper();if(He.appendChild(t),He.appendChild(Ue),e.appendChild(He),checkDsfr()&&this.options.splitResults){var We=this._createRadioContainer();e.appendChild(We)}if(checkDsfr()&&this.options.splitResults){var Cn;[Cn,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),We.appendChild(Cn)}if(this.options.displayButtonGeolocate){var An=this._createShowGeolocateElement();Ue.appendChild(An)}if(this.options.displayButtonCoordinateSearch){var En=this._createShowSearchByCoordinateElement();Ue.appendChild(En);var Sn=this._createCoordinateSearchPanelElement(),Tn=this._createCoordinateSearchPanelDivElement(),Ln=this._createCoordinateSearchPanelHeaderElement(),Bn=this._createCoordinateSearchPanelFormElement(),ti=null;ti=this._containerSystems=this.__createCoordinateSearchDivElement(),Bn.appendChild(ti);var ni=this._createCoordinateSearchSystemsLabelElement(),ii=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);ti.appendChild(ni),ti.appendChild(ii),ti=this._containerUnits=this.__createCoordinateSearchDivElement(),Bn.appendChild(ti);var si=this._createCoordinateSearchUnitsLabelElement(),oi=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);ti.appendChild(si),ti.appendChild(oi),ti=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),Bn.appendChild(ti);var ci=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),vi=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);ti.appendChild(ci),ti.appendChild(vi),ti=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),Bn.appendChild(ti);var pi=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),fi=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);ti.appendChild(pi),ti.appendChild(fi);var Mi=this._createCoordinateSearchSubmitElement();Bn.appendChild(Mi),Tn.appendChild(Ln),Tn.appendChild(Bn),Sn.appendChild(Tn),e.appendChild(Sn)}if(this.options.displayButtonAdvancedSearch){var Oi=this._createShowAdvancedSearchElement();Ue.appendChild(Oi);var ui=this._createAdvancedSearchPanelElement(),li=this._createAdvancedSearchPanelDivElement(),Ri=this._createAdvancedSearchPanelHeaderElement(),Pi=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),Fi=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var Hi=this._createAdvancedSearchFormInputElement();Pi.appendChild(Fi),Pi.appendChild(Hi),li.appendChild(Ri),li.appendChild(Pi),ui.appendChild(li),e.appendChild(ui)}var nr=this._autocompleteContainer=this._createAutoCompleteElement(),ar=this._createAutoCompleteListElement(),cr=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),sr=this._containerResultsSuggest=this._createSearchedSuggestContainer();ar.appendChild(cr),ar.appendChild(sr),nr.appendChild(ar),e.appendChild(nr);var br=this._createGeocodeResultsElement(),Ni=this._createGeocodeResultsDivElement();br.appendChild(Ni);var or=this._geocodedContainer=this._createGeocodeResultsListElement();return Ni.appendChild(or),e.appendChild(br),e}_setFilter(e){for(var t=this._filterContainer,Oe=!1,ke=0;ke<this._advancedSearchCodes.length;ke++)if(this._advancedSearchCodes[ke].id===e){Oe=!0;break}if(!Oe){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var Be=this._advancedSearchFilters[e];if(!(!Be||Be.length===0)){for(var Ue=this._createAdvancedSearchFiltersTableElement(e,!0),He=0;He<Be.length;He++){var We=this._createAdvancedSearchFiltersAttributElement(Be[He]);Ue.appendChild(We)}return t.appendChild(Ue),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$w.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions.serviceOptions),Helper.assign(t,e);var Oe=this.options.resources.autocomplete;Oe&&Array.isArray(Oe)&&(t.type||(t.type=Oe)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var Oe=0;Oe<e.length;Oe++)this._createAutoCompletedLocationElement(e[Oe],Oe)}}}_fillSearchedSuggestListContainer(e){var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let Oe=0;Oe<e.length;Oe++){const ke=e[Oe];this._createSearchedSuggestElement(ke,Oe)}}}_filterResultsFromConfigLayers(e){var t=[];if(this.options.searchOptions.filterLayers)t=this.options.searchOptions.filterLayers;else{var Oe=window.Gp.Config.layers;for(let Be in Oe)Oe.hasOwnProperty(Be)&&t.push(Oe[Be].name)}let ke=e.length;for(;ke--;)t.includes(e[ke].name)||e.splice(ke,1);return Search$1.setSuggestions(e),e}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$w.log(e);var t={};Helper.assign(t,this.options.geocodeOptions.serviceOptions),Helper.assign(t,e);var Oe=this,ke=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Be=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Be){var Ue=function(Cn){e.onSuccess.call(Oe,Cn),Oe.options.geocodeOptions.serviceOptions.onSuccess.call(Oe,Cn)};t.onSuccess=Ue}if(ke){var He=function(Cn){e.onFailure.call(Oe,Cn),Oe.options.geocodeOptions.serviceOptions.onFailure.call(Oe,Cn)};t.onFailure=He}var We=this.options.resources.geocode;We&&(t.index||(t.index=We)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=0;Oe<e.length;Oe++)logger$w.log(e[Oe]),this._createGeocodedLocationElement(e[Oe],Oe);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var Oe=this.getMap().getView();Oe.setCenter(e),Oe.setZoom(t)}_setMarker(e,t){var Oe=this.getMap(),ke=this;if(this._marker!=null&&(Oe.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,Be.addEventListener?Be.addEventListener("click",function(){ke._onResultMarkerSelect(t)}):Be.attachEvent&&Be.attachEvent("onclick",function(){ke._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Be,stopEvent:!1}),Oe.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),Oe=this.options.zoomTo,ke=null;if(typeof Oe=="function"&&(logger$w.trace("zoom function"),ke=Oe.call(this,e)),typeof Oe=="number"&&(logger$w.trace("zoom level"),ke=Oe),typeof Oe=="string")if(Oe==="auto")logger$w.trace("zoom auto"),ke=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$w.trace("zoom level parsing");var Be=parseInt(Oe,10);isNaN(Be)||(logger$w.trace("zoom parsing"),ke=Be)}Number.isInteger=Number.isInteger||function(We){return typeof We=="number"&&isFinite(We)&&Math.floor(We)===We},(!ke||ke===""||!Number.isInteger(ke))&&(logger$w.trace("zoom not found, current zoom..."),ke=t.getView().getZoom());var Ue=t.minZoom,He=t.maxZoom;return ke<Ue&&(logger$w.trace("zoom level min..."),ke=Ue),ke>He&&(logger$w.trace("zoom level max..."),ke=He),logger$w.trace("zoom",ke),ke}_onResultMarkerSelect(e){var t=this.getMap(),Oe="";if(typeof e!="string")if(e.service==="GeocodedLocation"){Oe="<ul>";var ke=e.location.placeAttributes;for(var Be in ke)ke.hasOwnProperty(Be)&&Be!=="trueGeometry"&&Be!=="extraFields"&&Be!=="houseNumberInfos"&&Be!=="_count"&&(Oe+="<li>",Oe+='<span class="gp-attname-others-span">'+Be.toUpperCase()+" : </span>",Oe+=ke[Be],Oe+=" </li>");Oe+=" </ul>"}else e.service==="SuggestedLocation"?Oe=GeocodeUtils.getSuggestedLocationFreeform(e.location):Oe="sans informations.";else Oe=e;this._popupContent.innerHTML=Oe,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$w.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$w.error("crs not defined !");return}if(e.label||(logger$w.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$w.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$w.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var Oe=this._coordinateSearchSystems[t];e.crs===Oe.crs&&logger$w.info("crs '{}' already configured",Oe.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showSearchEngineButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),Oe=t.getProjection().getCode(),ke=[e.coords.longitude,e.coords.latitude],Be;if(Oe!=="EPSG:4326"?Be=transform$1(ke,"EPSG:4326",Oe):Be=ke,isNaN(Be[0])||isNaN(Be[1])){this._setMarker();return}if(this._setPosition(Be,15),this._displayMarker){var Ue="<h6> Ma position </h6> longitude : "+ke[0]+"<br/> latitude : "+ke[1];this._setMarker(Be,Ue)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Be})})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var Oe=[e,t],ke=this.getMap().getView(),Be=ke.getProjection().getCode();if(Be!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",Be)),isNaN(Oe[0])||isNaN(Oe[1])){this._setMarker();return}this._setPosition(Oe,10),this._displayMarker&&this._setMarker(Oe,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:Oe})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var Oe=MathUtils.toInteger(t[0].value),ke=MathUtils.toInteger(t[1].value),Be=MathUtils.toInteger(t[2].value),Ue=t[3].options[t[3].selectedIndex].text;return!Oe||!ke||!Be||!Ue?void 0:MathUtils.dmsToDecimal(Oe,ke,Be,Ue)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var Oe=this.options.autocompleteOptions.triggerGeocode,ke=this.options.autocompleteOptions.triggerDelay,Be=this.options.autocompleteOptions.maximumEntries,Ue=this.options.autocompleteOptions.prettifyResults,He=this;this._requestAutoComplete({text:t,onSuccess:function(Cn){if(logger$w.log("request from AutoComplete",Cn),Cn){He._suggestedLocations=Cn.suggestedLocations,He._locationsToBeDisplayed=[];for(var An=0;An<He._suggestedLocations.length;An++){var En=He._suggestedLocations[An];En.position&&En.position.x===0&&En.position.y===0&&En.fullText?He._getGeocodeCoordinatesFromFullText(En,An):He._locationsToBeDisplayed.push(En)}Ue===!0&&He._prettifyAutocompleteResults(He._locationsToBeDisplayed),Be&&(He._locationsToBeDisplayed=He._locationsToBeDisplayed.slice(0,Be)),He._fillAutoCompletedLocationListContainer(He._locationsToBeDisplayed),He._triggerHandler&&(clearTimeout(He._triggerHandler),He._triggerHandler=null,logger$w.warn("Cancel a geocode request !"))}},onFailure:function(Cn){He._clearSuggestedLocation(),logger$w.log(Cn.message),Cn.message==="No suggestion matching the search"&&Oe&&(He._triggerHandler&&(clearTimeout(He._triggerHandler),logger$w.warn("Cancel the last geocode request !")),He._triggerHandler=setTimeout(function(){logger$w.warn("Launch a geocode request !"),He._requestGeocoding({location:t,onSuccess:function(An){if(logger$w.log("request from Geocoding",An),An){He._locationsToBeDisplayed=[];for(var En=An.locations,Sn=0;Sn<En.length;Sn++){var Tn=En[Sn];Tn.fullText=GeocodeUtils.getGeocodedLocationFreeform(Tn),Tn.position={x:Tn.position.lon,y:Tn.position.lat},He._locationsToBeDisplayed.push(Tn)}He._fillAutoCompletedLocationListContainer(En)}},onFailure:function(An){logger$w.log(An.message)}})},ke))}}),this.options.resources.search&&Search$1.suggest(t);var We=this.getMap();We.on("click",this._hideSuggestedLocation,this),We.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var Oe=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(ke){logger$w.log("request from Geocoding (coordinates null)",ke),ke.locations&&ke.locations.length!==0&&ke.locations[0].position&&Oe._suggestedLocations&&Oe._suggestedLocations[t]&&(Oe._suggestedLocations[t].position={lon:ke.locations[0].position.y,lat:ke.locations[0].position.x},Oe._locationsToBeDisplayed.unshift(Oe._suggestedLocations[t]),Oe._fillAutoCompletedLocationListContainer(Oe._locationsToBeDisplayed))},onFailure:function(){Oe._suggestedLocations&&Oe._suggestedLocations[t]&&Oe._createAutoCompletedLocationElement(Oe._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger$w.log(t),logger$w.log(this._locationsToBeDisplayed[t]),!!t){var Oe=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],ke={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(Be),this._currentGeocodingLocation=Be;var Ue=this.getMap().getView(),He=Ue.getProjection().getCode();He!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",He));var We=this._getZoom(ke);this._setPosition(Oe,We),this._displayMarker&&this._setMarker(Oe,ke),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),Oe=null;try{var ke=Search$1.getSuggestions()[t];if(!ke)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Be=ke.service,Ue=ke.name,He=null;switch(Be){case"WMS":He=new LayerWMS({layer:Ue});break;case"WMTS":He=new LayerWMTS({layer:Ue});break;case"WFS":He=new LayerWFS({layer:Ue});break;case"TMS":He=new LayerMapBox({layer:Ue},{declutter:!0});default:break}if(He){var We=this.getMap();We.addLayer(He)}}}catch(Cn){Oe=Cn}this.dispatchEvent({type:"searchengine:search:click",suggest:ke,error:Oe})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var Oe=this;this._requestGeocoding({query:t,onSuccess:function(ke){if(logger$w.log("request from Geocoding",ke),ke){var Be=ke.locations;Oe._fillGeocodedLocationListContainer(Be)}},onFailure:function(ke){Oe._clearGeocodedLocation(),logger$w.log(ke.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var Oe=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],ke={service:"GeocodedLocation",location:this._geocodedLocations[t]},Be=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(Be);var Ue=this.getMap().getView(),He=Ue.getProjection().getCode();He!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",He));var We=this._getZoom(this.options.zoomTo);this._setPosition(Oe,We),this._displayMarker&&this._setMarker(Oe,ke),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger$w.log(e);var t=e.target.selectedIndex,Oe=e.target.options[t].value;Oe&&this._setFilter(Oe)}onGeocodingAdvancedSearchSubmit(e,t){if(logger$w.log(t),!(!t||t.length===0)){for(var Oe,ke={},Be=0;Be<t.length;Be++){var Ue=t[Be];Ue.value&&(Ue.key==="section"&&(Ue.value=Ue.value.toUpperCase()),ke[Ue.key]=Ue.value)}var He=document.getElementById("GPsearchInputText-"+this._uid);Oe=He.value,this._currentGeocodingCode==="CadastralParcel"&&(Oe="");var We=this;this._requestGeocoding({query:Oe,index:this._currentGeocodingCode,filters:ke,onSuccess:function(Cn){if(logger$w.log(Cn),Cn){var An=Cn.locations;We._fillGeocodedLocationListContainer(An)}},onFailure:function(Cn){We._clearGeocodedLocation(),logger$w.log(Cn.message)}})}}_getCadastralParcelRequestParams(e){var t="",Oe,ke=e.department;ke?(Oe=ke.length,Oe===2?t=ke:Oe===1?t="0"+ke:t=ke.substring(0,2)):t="__";var Be=e.commune;Be?(Oe=Be.length,Oe===3?t+=Be:Oe===2?t+="_"+Be:Oe===1?t+="__"+Be:t+=Be.substring(0,3)):t+="___";var Ue=e.insee;Ue&&Ue.length===5&&(t=Ue);var He=e.absorbedCity;He?(Oe=He.length,Oe===3?t+=He:Oe<3?Oe===2?t+="_"+He:Oe===1&&(t+="__"+He):t+=He.substring(0,3)):t+="___";var We=e.section;We?(Oe=We.length,Oe===2?t+=We:Oe===1?t+="_"+We:t+=We.substring(0,2)):t+="__";var Cn=e.number;return Cn?(Oe=Cn.length,Oe===4?t+=Cn:Oe===3?t+="_"+Cn:Oe===2?t+="__"+Cn:Oe===1?t+="___"+Cn:t+=Cn.substring(0,4)):t+="___",logger$w.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var ke=null,Be=0;Be<this._coordinateSearchSystems.length;++Be)if(this._coordinateSearchSystems[Be].code===Number(Oe)){ke=this._coordinateSearchSystems[Be].type;break}if(!ke){logger$w.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(Oe)],ke!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=ke,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[ke][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[ke])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=Oe,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var t=e.length-1;t>=0;t--){var Oe=e[t];(Oe.type==="StreetAddress"&&Oe.kind==="municipality"||Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="lieu-dit habité"&&Oe.poiType[1]==="zone d'habitation")&&e.splice(t,1),Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="administratif"&&(Oe.poiType[1]==="département"||Oe.poiType[1]==="région")&&(Oe.fullText=Oe.fullText+", "+Oe.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPmousePosition"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowMousePositionPictoElement:function(Te){var e=this,t=document.createElement("button"),Oe=document.createElement("span");return t.appendChild(Oe),t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Afficher les coordonnées du curseur"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(ke)}),t},_createMousePositionPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPmousePositionPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createMousePositionPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createMapCenter:function(){var Te=document.createElement("div");return Te.id="GPmapCenter",Te.className="",Te},_createMousePositionPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.id=this._addUID("GPmousePositionHeaderTitle"),Te.innerHTML="Coordonnées",Te},_createMousePositionPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader gpf-panel__header fr-modal__header",Te},_createMousePositionPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(Te._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(Te._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(Te,e,t,Oe){Te=typeof Te>"u"?!0:Te,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var ke=document.createElement("div");return ke.id=this._addUID("GPmousePositionBasicPanel"),ke.classList.add("fr-mx-1w"),ke.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,Oe)),ke.appendChild(this._createMousePositionPanelEditToolsElement(t)),ke.appendChild(this._createMousePositionPanelBasicAltitudeElement(Te)),ke},_createCoordinateElement:function(Te,e){var t=this;if(["Lon","Lat"].indexOf(Te)===-1)return[];var Oe=[],ke=document.createElement("input");ke.id=this._addUID("GPmousePosition"+Te),ke.title=e===!0?"Cliquer pour saisir des coordonnées":"",ke.readOnly=!0,e&&(ke.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),ke.addEventListener("change",function(Ue){this.classList.remove("error");var He=t.validateExtentCoordinate(Te,this.value,Ue);He?this.classList.remove("error"):this.classList.add("error")})),Oe.push(ke);var Be=document.createElement("span");return Be.className="GPmousePositionUnits",Oe.push(Be),Oe},_createDMSCoordinateElement:function(Te,e){if(["Lon","Lat"].indexOf(Te)===-1)return[];var t=this,Oe=[],ke=document.createElement("input");ke.id=this._addUID("GPmousePosition"+Te+"Degrees"),ke.className="GPSexagesimal",ke.setAttribute("name","degrees"),ke.title=e===!0?"Cliquer pour saisir des coordonnées":"",ke.readOnly=!0,ke.dataset.min=0,ke.dataset.max=Te==="Lon"?180:90,e&&(ke.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),ke.addEventListener("change",function(){this.classList.remove("error");var Tn=t._checkDMSDegrees(Te,this);Tn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(ke);var Be=document.createElement("span");Be.className="GPmousePositionSexagesimalLabel",Be.innerHTML="°",Oe.push(Be);var Ue=document.createElement("input");Ue.id=this._addUID("GPmousePosition"+Te+"Minutes"),Ue.className="GPSexagesimal",Ue.setAttribute("name","minutes"),Ue.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ue.readOnly=!0,Ue.dataset.min=0,Ue.dataset.max=59,e&&(Ue.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ue.addEventListener("change",function(){this.classList.remove("error");var Tn=t._checkDMSElement(this);Tn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(Ue);var He=document.createElement("span");He.className="GPmousePositionSexagesimalLabel",He.innerHTML="'",Oe.push(He);var We=document.createElement("input");We.id=this._addUID("GPmousePosition"+Te+"Seconds"),We.className="GPSexagesimalsec",We.setAttribute("name","seconds"),We.title=e===!0?"Cliquer pour saisir des coordonnées":"",We.readOnly=!0,We.dataset.min=0,We.dataset.max=59,e&&(We.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),We.addEventListener("change",function(){this.classList.remove("error");var Tn=t._checkDMSElement(this,!0);Tn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(We);var Cn=document.createElement("span");Cn.className="GPmousePositionSexagesimalLabel",Cn.innerHTML="''",Oe.push(Cn);var An=document.createElement("select");An.id=this._addUID("GPmousePosition"+Te+"Direction"),An.className="GPmousePositionDirection",An.setAttribute("name","direction"),An.disabled=!0;var En=document.createElement("option");En.value=Te==="Lon"?"E":"N",En.innerHTML=Te==="Lon"?"E":"N",An.appendChild(En);var Sn=document.createElement("option");return Sn.value=Te==="Lon"?"O":"S",Sn.innerHTML=Te==="Lon"?"O":"S",An.appendChild(Sn),Oe.push(An),Oe},_createMousePositionPanelBasicCoordinateElement:function(Te,e,t){var Oe=document.createElement("div");Oe.id=this._addUID("GPmousePositionCoordinate"),Oe.style.display=Te?"block":"none";var ke=document.createElement("div");ke.classList.add("fr-mb-1w");var Be=document.createElement("span");Be.className="GPmousePositionLabel",Be.id=this._addUID("GPmousePositionLatLabel"),Be.innerHTML="Latitude : ",ke.appendChild(Be);var Ue=document.createElement("span");Ue.id=this._addUID("GPmousePositionLatCoordinate");var He;t==="DMS"?He=this._createDMSCoordinateElement("Lat",e):He=this._createCoordinateElement("Lat",e);for(var We=0;We<He.length;We++)Ue.appendChild(He[We]);ke.appendChild(Ue),Oe.appendChild(ke);var Cn=document.createElement("div");Cn.classList.add("fr-mb-1w");var An=document.createElement("span");An.className="GPmousePositionLabel",An.id=this._addUID("GPmousePositionLonLabel"),An.innerHTML="Longitude : ",Cn.appendChild(An);var En=document.createElement("span");En.id=this._addUID("GPmousePositionLonCoordinate");var Sn;t==="DMS"?Sn=this._createDMSCoordinateElement("Lon",e):Sn=this._createCoordinateElement("Lon",e);for(var Tn=0;Tn<Sn.length;Tn++)En.appendChild(Sn[Tn]);return Cn.appendChild(En),Oe.appendChild(Cn),Oe},_createMousePositionPanelBasicAltitudeElement:function(Te){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=Te?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var Oe=document.createElement("span");Oe.className="GPmousePositionCoords",Oe.id=this._addUID("GPmousePositionAlt"),Oe.innerHTML="...",e.appendChild(Oe);var ke=document.createElement("span");return ke.className="GPmousePositionAltitudeUnits",ke.innerHTML="m",e.appendChild(ke),e},_createMousePositionPanelEditToolsElement:function(Te){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),Te||(t.style.display="none");var Oe=document.createElement("span");Oe.className="GPmousePositionEditTool",Oe.id=this._addUID("GPmousePositionLocate"),Oe.title=Te===!0?"Cliquer pour saisir des coordonnées":"",Te&&Oe.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(Oe);var ke=document.createElement("span");return ke.className="GPmousePositionEditTool",ke.id=this._addUID("GPmousePositionCloseEdit"),ke.title="Quitter la saisie des coordonnées",ke.style.display="none",Te&&ke.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(ke),t},_createShowMousePositionSettingsElement:function(Te){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",t.title="Réglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.addEventListener?t.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),e.onShowMousePositionSettingsClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),e.onShowMousePositionSettingsClick(Oe)}),t},_createMousePositionSettingsElement:function(Te){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=Te===void 0||Te?"block":"none",e.classList.add("fr-m-1w");var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Système de référence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(Te){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",t.addEventListener("change",function(Ue){e.onMousePositionProjectionSystemChange(Ue)}),t.addEventListener("mouseover",function(Ue){Ue.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(Ue)}),t.title="Type de système";for(var Oe=0;Oe<Te.length;Oe++){var ke=Te[Oe],Be=document.createElement("option");Be.value=ke.code,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_createMousePositionSettingsUnitsElement:function(Te){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onMousePositionProjectionUnitsChange(Ue)}),t.title="Unités du système";for(var Oe=0;Oe<Te.length;Oe++){var ke=Te[Oe],Be=document.createElement("option");Be.value=ke.code?ke.code:Oe,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_resetLabelElements:function(Te){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=Te==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=Te==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(Te){var e="";(Te==="M"||Te==="KM")&&(e=Te.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),Oe=0;Oe<t.length;Oe++)t[Oe].innerHTML=e},_resetCoordinateElements:function(Te,e,t){for(var Oe=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));Oe.firstChild;)Oe.removeChild(Oe.firstChild);var ke;t==="DMS"?ke=this._createDMSCoordinateElement("Lat",Te):ke=this._createCoordinateElement("Lat",Te);for(var Be=0;Be<ke.length;Be++)Oe.appendChild(ke[Be]);for(var Ue=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));Ue.firstChild;)Ue.removeChild(Ue.firstChild);var He;t==="DMS"?He=this._createDMSCoordinateElement("Lon",Te):He=this._createCoordinateElement("Lon",Te);for(var We=0;We<He.length;We++)Ue.appendChild(He[We])},_setEditMode:function(Te){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=Te?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=Te?"inline-block":"none";for(var Oe="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",ke=document.querySelectorAll(Oe+" input"),Be=0;Be<ke.length;Be++)ke[Be].readOnly=!Te,Te&&(ke[Be].value="",ke[Be].classList.remove("error"));for(var Ue=document.querySelectorAll(Oe+" select"),He=0;He<Ue.length;He++)Ue[He].disabled=!Te},_checkDMSElement:function(Te,e){var t=e!==void 0,Oe=Te.value;if(t&&(Oe=Oe.replace(",",".")),isNaN(Oe))return!1;var ke=parseFloat(Oe);if(!t&&(ke|0)!==ke)return!1;var Be=Number(Te.dataset.min),Ue=Number(Te.dataset.max);return ke>=Be&&ke<=Ue},_checkDMSDegrees:function(Te,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var Oe=Number(e.dataset.min),ke=Number(e.dataset.max);if(t<Oe||t>ke)return!1;var Be=document.getElementById(this._addUID("GPmousePosition"+Te+"Minutes")),Ue=document.getElementById(this._addUID("GPmousePosition"+Te+"Seconds"));return t>=ke?(Be.dataset.max=0,Ue.dataset.max=0):(Be.dataset.max=59,Ue.dataset.max=59.9999),!0},GPdisplayCoords:function(Te){if(Te){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(Te.x||Te.y?(t.innerHTML="X : ",e.innerHTML="Y : "):Te.e||Te.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof Te.lat=="object"&&typeof Te.lng=="object"){var Oe={lng:"Lon",lat:"Lat"},ke=["Degrees","Minutes","Seconds"];for(var Be in Oe)for(var Ue=0;Ue<ke.length;++Ue){var He="GPmousePosition"+Oe[Be]+ke[Ue],We=document.getElementById(this._addUID(He)),Cn=ke[Ue].charAt(0).toLowerCase();We.value=Te[Be][Cn]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=Te.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=Te.lat.direction}else{var An=document.getElementById(this._addUID("GPmousePositionLat")),En=document.getElementById(this._addUID("GPmousePositionLon"));An.value=Te.x||Te.lat||Te.e||"0",En.value=Te.y||Te.lng||Te.lon||Te.n||"0",An.title="Latitude",En.title="Longitude",An.type="text",En.type="text";for(var Sn=Te.unit===void 0?"":Te.unit,Tn=document.getElementsByClassName("GPmousePositionUnits"),Ln=0;Ln<Tn.length;++Ln)Tn[Ln].innerHTML=Sn}}},GPdisplayElevation:function(Te,e,t,Oe){var ke=this,Be;e||(e=500),clearTimeout(Be),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),Oe==null&&(Oe=99980);var Ue=t+Oe,He=t-Oe;Te&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Be=setTimeout(function(){ke.onRequestAltitude(Te,function(We){He<We&&We<Ue?ke.GPresetElevation():document.getElementById(ke._addUID("GPmousePositionAlt")).innerHTML=We})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$v=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Yf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Yf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var t=this;if(e){var Oe=this._createMapCenter();if(e.getViewport().appendChild(Oe),!this.collapsed&&!this._isDesktop&&(Oe.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",Ue=>{this.onMouseMove(Ue)}):this.listenerKey=e.on("moveend",Ue=>this.onMapMove(Ue)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var ke=document.createElement("img");ke.id=this._addUID("GPmousePositionMarker"),ke.src=this._markerUrl,ke.title="Cliquer pour supprimer",ke.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:ke,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Be=document.getElementById("GPshowMousePosition-"+this._uid);Be.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var Oe=this._projectionSystems[t];e.crs===Oe.crs&&logger$v.info("crs '{}' already configured",Oe.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var ke=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(ke){var Be=document.createElement("option");Be.value=e.code,Be.text=e.label,ke.appendChild(Be)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$v.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){logger$v.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),Oe=null,ke=0;ke<this._projectionSystems.length;ke++){var Be=this._projectionSystems[ke];if(e===Be.crs){Oe=Be.code,this._projectionSystems.splice(ke,1);break}}if(Oe==null){logger$v.log("[WARN] MousePosition:removeSystem - system not found");return}for(var Ue=[],He=0;He<this._projectionSystems.length;He++)Ue[Number(this._projectionSystems[He].code)]=He,this._projectionSystems[He].code=He;for(var We=null,Cn=0;Cn<t.childNodes.length;Cn++){if(Oe===t.childNodes[He].value){We=Cn;continue}t.childNodes[He].value=Ue[Number(t.childNodes[He].value)]}We!=null&&t.removeChild(t.childNodes[We]),this._currentProjectionSystems.code===Number(Oe)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$v.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[t]!==void 0?Marker[t]:Marker.lightOrange:this._markerUrl=t:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,Oe=0;Oe<t.length;Oe++){var ke=t[Oe];this.addSystem(ke)}if(this._projectionSystems.length===0)for(var Be=0;Be<e.length;Be++)this.addSystem(e[Be])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.units;for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var ke=!1,Be=0;Be<e[Oe].length;Be++)for(var Ue=e[Oe][Be],He=0;He<t.length;He++){var We=t[He];Ue.code===We&&(ke=!0,this._projectionUnits[Oe]||(this._projectionUnits[Oe]=[]),this._projectionUnits[Oe].push(Ue))}ke||(this._projectionUnits[Oe]=e[Oe])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],Oe=0;Oe<t.length;++Oe)if(t[Oe].code===this._currentProjectionUnits){e.push(t[Oe].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var Oe=this._panelMousePositionContainer=this._createMousePositionPanelElement(),ke=this._createMousePositionPanelDivElement();Oe.appendChild(ke);var Be=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),Ue=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Be.appendChild(Ue);var He=this._panelCloseButton=this._createMousePositionPanelCloseElement();Be.appendChild(He),ke.appendChild(Be);var We=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);ke.appendChild(We);var Cn=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);ke.appendChild(Cn);var An=this._createMousePositionSettingsElement(),En=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),Sn=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return An.appendChild(En),An.appendChild(Sn),ke.appendChild(An),e.appendChild(Oe),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),Oe=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",Oe.style.display=""):(t.style.display="none",Oe.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=this._projectionUnits[e],ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code?Be.code:ke,Ue.text=Be.label||ke,t.appendChild(Ue)}var He=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||He==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,He),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(He),this._currentProjectionUnits=He}_setCoordinate(e,t){var Oe={},ke=this._currentProjectionSystems.crs;if(!ke){logger$v.log("ERROR : system crs not found");return}e=transform$1(e,t,ke);for(var Be=this._currentProjectionSystems.type,Ue=null,He=this._projectionUnits[Be],We=0;We<He.length;We++)if(He[We].code===this._currentProjectionUnits){Ue=He[We].format;break}if(!Ue||typeof Ue!="function"){logger$v.log("WARNING : coordinates format function not found");return}else Oe=Ue(e);!Oe||Object.keys(Oe).length===0||this.GPdisplayCoords(Oe)}_setElevation(e){var t=this.options.altitude.responseDelay,Oe=this.options.altitude.noDataValue,ke=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,Oe,ke)}onMoveStopped(e,t){var Oe=transform$1(e,t,"EPSG:4326");this._setElevation(Oe)}onMouseMove(e){var t=this,Oe=e.coordinate;if(!(!e.map||!e.map.getView())){var ke=e.map.getView().getProjection();this._setCoordinate(Oe,ke),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(Oe,ke)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var Oe=t.getView(),ke=Oe.getCenter(),Be=Oe.getProjection();this._setCoordinate(ke,Be),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(ke,Be)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var Oe=this.options.altitude.serviceOptions||{},ke=Oe.protocol||"XHR",Be=Oe.timeOut||0;ke==="JSONP"&&Be===0&&(Be=15e3);var Ue=Oe.outputFormat||"json",He=!0,He;Oe.zonly===!1?He=Oe.zonly:He=!0;var We=Oe.measures||!1,Cn=[{lon:e[0],lat:e[1]}],An=Oe.resource,En=this,Sn=Oe.rawResponse||!1,Tn=Oe.onSuccess||null,Ln=null,Bn=null;Sn?Ln=function(ii){Tn&&Tn.call(this,ii),logger$v.log("alti service raw response : ",ii)}:Ln=function(ii){ii&&Object.keys(ii).length&&(Tn&&Tn.call(this,ii),t.call(this,ii.elevations[0].z))},Bn=function(ii){logger$v.log("[getAltitude] ERROR : "+ii.message)};var ti=Oe.apiKey||this.options.apiKey;typeof Oe.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Oe.ssl=this.options.ssl:Oe.ssl=!0);var ni=Oe.ssl;Gp.Services.getAltitude({apiKey:ti,protocol:ke,ssl:ni,timeOut:Be,scope:En,outputFormat:Ue,rawResponse:Sn,onSuccess:Ln,onFailure:Bn,zonly:He,measures:We,resource:An,positions:Cn})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showMousePositionButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),Oe==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=t.on("pointermove",ke=>{this.onMouseMove(ke)}):(this.listenerKey=t.on("moveend",ke=>this.onMapMove(ke)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("pointermove",Oe=>{this.onMouseMove(Oe)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("moveend",Oe=>this.onMapMove(Oe)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),Oe=t.value;if(!Oe||(Oe=Oe.replace(",","."),!MathUtils.isInteger(Oe)))return null;var ke=MathUtils.toInteger(Oe);if(ke<Number(t.dataset.min)||ke>Number(t.dataset.max))return null;var Be=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,Ue=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),He=Ue.value;if(He&&(He=He.replace(",","."),MathUtils.isInteger(He))){var We=MathUtils.toInteger(He);We>=Number(Ue.dataset.min)&&We<=Number(Ue.dataset.max)&&(ke+=We/60)}var Cn=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),An=Cn.value;if(An){An=An.replace(",",".");var En=MathUtils.toFloat(An);En&&En>=Number(Cn.dataset.min)&&En<=Number(Cn.dataset.max)&&(ke+=En/3600)}return(Be==="O"||Be==="S")&&(ke=-ke),ke}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){logger$v.log("ERROR : system crs not found");return}var Oe=this.getMap().getView(),ke=transform$1(e,t,Oe.getProjection());Oe.setCenter(ke),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(ke)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=MathUtils.toFloat(t),t!==null){var Oe=this._currentProjectionSystems.crs;if(!Oe){logger$v.log("ERROR : system crs not found");return}var ke;this._currentProjectionSystems.type==="Geographical"?ke=[this.convert(e),this.convert(t)]:ke=[this.convert(t),this.convert(e)];var Be=transform$1(ke,this._currentProjectionSystems.crs,"EPSG:4326"),Ue=this._currentProjectionSystems.geoBBox;if(Ue){var He=[Ue.left,Ue.bottom,Ue.right,Ue.top];if(Be[0]<He[0]||Be[0]>He[2]||Be[1]<He[1]||Be[1]>He[3])return}var We=this.getMap().getView(),Cn=transform$1(ke,Oe,We.getProjection());We.setCenter(Cn),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Cn)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),Oe=t.getCenter();e.call(this,Oe)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._setCurrentSystem(Oe)}_setCurrentSystem(e){for(var t=null,Oe=0;Oe<this._projectionSystems.length;++Oe)if(this._projectionSystems[Oe].code===Number(e)){t=this._projectionSystems[Oe].type;break}if(!t){logger$v.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$v.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var Oe=t.getView(),ke=Oe.getProjection(),Be=Oe.calculateExtent(t.getSize());Be=transformExtent(Be,ke,"EPSG:4326");var Ue=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));Ue.innerHTML="";for(var He=0;He<this._projectionSystems.length;He++){var We=this._projectionSystems[He],Cn=null;if(We.geoBBox&&(Be[0]>We.geoBBox.right||Be[1]>We.geoBBox.top||Be[2]<We.geoBBox.left||Be[3]<We.geoBBox.bottom)){We===this._currentProjectionSystems&&(Cn=document.createElement("option"),Cn.value=We.code,Cn.text=We.label||He,Cn.setAttribute("selected","selected"),Cn.setAttribute("disabled","disabled"),Ue.appendChild(Cn));continue}var An=document.createElement("option");An.value=We.code,An.text=We.label||He,We===this._currentProjectionSystems&&An.setAttribute("selected","selected"),Ue.appendChild(An)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value,ke=this._currentProjectionUnits;this._currentProjectionUnits=Oe,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(ke==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var Oe=(180/Math.PI).toFixed(20);t=(e*Oe).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var ke=.9.toFixed(20);t=(e*ke).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var Oe=t.replace(",",".");if(Oe=MathUtils.toFloat(Oe),Oe===null)return!1;Oe=this.convert(Oe);var ke=this._currentProjectionSystems.geoBBox;if(ke===void 0)return!0;var Be=[ke.left,ke.bottom,ke.right,ke.top];return Be=transformExtent(Be,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(Oe<Be[0]||Oe>Be[2])||e==="Lon"&&(Oe<Be[1]||Oe>Be[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$u=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPdrawing"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowDrawingPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowDrawingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowDrawingClick(Oe)}),e},_createDrawingPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPdrawingPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createDrawingPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createDrawingToolsDivSections:function(){var Te=document.createElement("div");return Te.className="gpf-panel__content fr-px-3w fr-modal__content",Te},_createDrawingButtonsPluginDiv:function(){var Te=document.createElement("div");return Te.className="container-buttons-plugin fr-mx-2w",Te},_createDrawingPanelHeaderElement:function(){var Te=document.createElement("div");Te.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",Te.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var Oe=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",t.appendChild(ke),Te.appendChild(t),Te},_createDrawingToolsSections:function(){var Te=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&Te.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&Te.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&Te.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),Te},_createDrawingToolSection:function(Te,e){var t=document.createElement("div");t.className="drawing-tool-section fr-mx-2w";var Oe=document.createElement("p");Oe.className="drawing-tool-section-title",Oe.innerHTML=Te,t.appendChild(Oe);var ke=document.createElement("div");ke.className="drawing-tools-flex-display";var Be=this;function Ue(Cn){Be._handleDOMToolClick(Cn,this.id,Be),Be._handleToolClick(Cn,this.id,Be)}for(var He in this.dtOptions)if(this.dtOptions[He].panel===e){var We=document.createElement("button");We.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",We.id=this._addUID("drawing-tool-"+this.dtOptions[He].id),We.title=this.dtOptions[He].label,We.addEventListener("click",Ue),ke.appendChild(We)}return t.appendChild(ke),t},_createSavingSection:function(Te,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var Oe=document.createElement("button");Oe.title=e,Oe.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",Oe.id=this._addUID("drawing-export"),Oe.setAttribute("type","button"),Oe.textContent=Te;var ke=this;return Oe.onclick=function(){ke.onExportFeatureClick()},t.appendChild(Oe),t},_createMarkersChooser:function(Te){var e=document.createElement("div");e.className=Te.className;var t=document.createElement("input");t.type="checkbox",t.className="gpf-custom-dropdown-toggle",t.id=this._addUID("gpf-custom-dropdown-toggle"),e.appendChild(t);var Oe=document.createElement("span");Oe.innerText="Sélectionner le pictogramme :",e.appendChild(Oe);for(var ke=0;ke<this.options.markersList.length;ke++){var Be=document.createElement("input");Be.type="radio",Be.name="gpf-dropdown-radio-style",Be.value=this.options.markersList[ke].src,Be.className="gpf-custom-dropdown-display",Be.id=this._addUID(`gpf-custom-dropdown-display-${ke}`),e.appendChild(Be),ke===0&&(Be.checked=!0);var Ue=document.createElement("label");Ue.htmlFor=this._addUID("gpf-custom-dropdown-toggle"),Ue.className="fr-select GPselect gpf-select",e.appendChild(Ue);var He=document.createElement("img");He.src=this.options.markersList[ke].src,He.alt=`Option ${ke+1}`,Ue.appendChild(He)}var We=document.createElement("div");We.className="gpf-custom-dropdown-options",e.append(We);for(var ke=0;ke<this.options.markersList.length;ke++){var Cn=document.createElement("label");Cn.htmlFor=this._addUID(`gpf-custom-dropdown-display-${ke}`),Cn.className="gpf-custom-dropdown-option",We.appendChild(Cn);var An=document.createElement("img");An.src=this.options.markersList[ke].src,An.alt=`Option ${ke+1}`,Cn.appendChild(An),Cn.addEventListener("click",()=>{t.click()})}return e},_createStylingElement:function(Te){var e=document.createElement("div");e.className=Te.className;var t=document.createTextNode(Te.label);e.appendChild(t);var Oe=document.createElement("input");try{Oe.type=Te.type}catch{Oe.type="text"}if(Te.type==="range"){e.dataset.frJsRange="true",e.title=Te.label;var ke=Te.defaultValue;ke=Math.round((ke-Te.min)/(Te.max-Te.min)*100),e.style.setProperty("--progress-right",ke+"%"),Oe.addEventListener("change",Be=>{Be.target.parentNode.style.setProperty("--progress-right",`${(Be.target.value-Te.min)/(Te.max-Te.min)*100}%`)})}return Oe.id=Te.id,Oe.value=Te.defaultValue,Te.title&&(Oe.title=Te.title),Te.checked!==void 0&&(Oe.checked=Te.checked),Te.min!==void 0&&(Oe.min=Te.min),Te.max!==void 0&&(Oe.max=Te.max),Te.step!==void 0&&(Oe.step=Te.step),e.appendChild(Oe),e},_createStylingDiv:function(Te){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Modifier le style",Oe.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Te.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Te.applyFunc.call(this,"cancel")});var Ue=document.createElement("span");Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),Oe.appendChild(Be),t.appendChild(Oe)}var He=document.createElement("div");He.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(He);var We=document.createElement("div"),Cn=null,An=Te.geomType.toLowerCase();switch(An){case"point&text":case"point":Cn=this._createMarkersChooser({className:"gp-styling-option",defaultValue:Te.initValues.markerSrc}),We.appendChild(Cn),Cn=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:Te.initValues.markerSize*10}),We.appendChild(Cn),Te.initValues.markerCustom,An==="point&text"&&(Cn=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:Te.initValues.labelDisplay,defaultValue:Te.initValues.labelDisplay}),We.appendChild(Cn));break;case"text":Cn=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Te.initValues.fillColor}),We.appendChild(Cn),Cn=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Te.initValues.strokeColor}),We.appendChild(Cn),Cn=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Te.initValues.strokeWidth}),We.appendChild(Cn);break;case"line":Cn=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Te.initValues.strokeColor}),We.appendChild(Cn),Cn=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Te.initValues.strokeWidth}),We.appendChild(Cn);break;case"polygon":Cn=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Te.initValues.strokeColor}),We.appendChild(Cn),Cn=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Te.initValues.strokeWidth}),We.appendChild(Cn),Cn=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Te.initValues.fillColor}),We.appendChild(Cn),Cn=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:Te.initValues.fillOpacity*10}),We.appendChild(Cn);break;default:logger$u.log("Unhandled geometry type for styling.")}He.appendChild(We);var En=document.createElement("div");En.className="gpf-flex-row",He.appendChild(En);var Sn=document.createElement("input");Sn.type="button",Sn.className="gp-styling-button fr-btn fr-btn--secondary",Sn.value=this.options.labels.applyToObject,Sn.onclick=function(){Te.applyFunc.call(this,"apply")};var Tn=document.createElement("input");Tn.type="button",Tn.value=this.options.labels.setAsDefault,Tn.className="gp-styling-button fr-btn fr-btn--tertiary",Tn.onclick=function(){Te.applyFunc.call(this,"default")},En.appendChild(Tn),En.appendChild(Sn);var Ln=document.createElement("input");return Ln.type="button",Ln.className="gp-styling-button closer",Ln.onclick=function(){Te.applyFunc.call(this,"cancel")},He.appendChild(Ln),e},_createLabelDiv:function(Te){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Ajouter une description",Te.geomType==="Text"&&(ke.innerHTML="Texte de l'annotation"),Oe.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Te.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Te.applyFunc.call(this,"cancel")});var Ue=document.createElement("span");Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),Oe.appendChild(Be),t.appendChild(Oe)}var He=document.createElement("div");He.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(He);var We=null;if(Te.geomType==="Text"?(We=document.createElement("input"),We.type="text",We.className="gp-input-label-style fr-input fr-mb-3w"):(We=document.createElement("textArea"),We.rows=2,We.cols=40,We.className="gp-textarea-att-label-style fr-input"),Te.text&&(We.value=Te.text),We.autocomplete="off",We.placeholder=Te.placeholder,We.id=Te.inputId,He.appendChild(We),We.onkeyup=function(Sn){Te.geomType==="Text"&&Sn.keyCode===13&&Te.applyFunc.call(this,Te.key,We.value,!0),Sn.keyCode===27&&Te.applyFunc.call(this,Te.key,We.value,!1)},Te.measure&&Te.geomType!=="Text"){var Cn=document.createElement("input");Cn.type="text",Cn.readonly=!0,Cn.className="gp-input-measure-style",Cn.value=Te.measure,He.appendChild(Cn)}var An=document.createElement("input");An.type="button",An.className="gp-styling-button fr-btn fr-btn--tertiary",An.value=this.options.labels.saveDescription,An.onclick=function(){Te.applyFunc.call(this,Te.key,We.value,!0)},He.appendChild(An);var En=document.createElement("input");return En.type="button",En.className="gp-styling-button closer",En.onclick=function(){Te.applyFunc.call(this,Te.key,We.value,!1)},He.appendChild(En),e},_handleDOMToolClick:function(Te,e,t){for(var Oe in t.dtOptions){var ke=t._addUID("drawing-tool-"+t.dtOptions[Oe].id),Be=document.getElementById(ke);if(ke!==e){Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[Oe].active=!1;continue}t.dtOptions[Oe].active?Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary":Be.className="drawing-tool drawing-tool-active fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[Oe].active=!t.dtOptions[Oe].active}}},logger$t=LoggerByDefault.getLogger("Drawing"),Do,Drawing=(Do=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Do))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$t.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$t.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$t.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new KML({writeStyles:!0});break;case"GPX":t=new GPX({});break;case"GEOJSON":t=new GeoJSON({});break}if(!t)return logger$t.log("Impossible to export : format unknown !?"),e;var Oe=this.layer.getSource().getProjection();return Oe=Oe||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:Oe}),e}setCollapsed(e){if(e===void 0){logger$t.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$t.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var Oe=!1;t.forEach(ke=>{ke===e&&(logger$t.trace("layer already in map. Not adding."),Oe=!0)}),Oe||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(ke=>{var Be=ke.getStyle();if(typeof Be=="function"){var Ue=ke.getStyleFunction();if(Ue){var He=Ue.call(this,ke,0);He&&He.length!==0&&ke.setStyle(Array.isArray(He)?He[0]:He)}}}),this.layer=e,this.getMap().getControls().forEach(ke=>{if(ke instanceof LayerSwitcher){var Be=this.layer.gpLayerId;ke._layers[Be].title===Be&&ke.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,Oe=0;Oe<this.options.markersList.length;Oe++)if(e&&this.options.markersList[Oe].src===e)return t=this.options.markersList[Oe],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(Oe=>{switch(Oe){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[Oe]=e[Oe];break}}),t}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Do.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=Do.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Do.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=Do.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Do.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=Do.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Do.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=Do.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=Do.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var Oe=parseInt(e.defaultStyles[t],10);if(isNaN(Oe)||Oe<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=Do.DefaultStyles[t];return}this.options.defaultStyles[t]=Oe}if(t==="markerSize"){var ke=parseFloat(e.defaultStyles[t]);if(isNaN(ke)||ke<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=Do.DefaultStyles[t];return}this.options.defaultStyles[t]=ke}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.tooltipOvl=null,this.tooltipElem=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,t=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var Oe=this._drawingPanel=this._createDrawingPanelElement(),ke=this._createDrawingPanelDivElement();Oe.appendChild(ke);var Be=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();ke.appendChild(Be);var Ue=this._createDrawingToolsDivSections();ke.appendChild(Ue);for(var He=this._createDrawingToolsSections(),We=0;We<He.length;We++)Ue.appendChild(He[We]);var Cn=this._createDrawingButtonsPluginDiv();return Ue.appendChild(Cn),e.appendChild(Oe),e}_drawEndFeature(e,t){var Oe=null;switch(t){case"Point":Oe=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":Oe=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":Oe=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(Oe),this._updateMeasure(e,t),this.options.popup.display){var ke=this,Be=function(An,En,Sn){if(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null,Sn&&En&&En.trim().length>0){var Tn={};Tn[An]=En.replace(/\n/g,"<br>"),e.setProperties(Tn)}},Ue=null,He=!0,We=this.options.popup.function;We&&typeof We=="function"&&(Ue=We.call(ke,{feature:e,geomType:t,closeFunc:function(){Be(null,!1)},saveFunc:function(An){Be(An,!0)}}),Ue&&(He=!1,Ue.tabIndex=-1,Ue.onblur=function(){ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null})),He&&(Ue=this._createLabelDiv({applyFunc:Be,inputId:this._addUID("att-input"),placeholder:"Saisir une description... (facultatif)",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:Ue,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var Cn=e.getGeometry().getExtent();this.popupOvl.setPosition([(Cn[0]+Cn[2])/2,(Cn[1]+Cn[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var Oe=null,ke=null,Be=null,Ue=null,He={},We=t.selected[0].getGeometry(),Cn=t.selected[0].getStyle();if(We instanceof Point$1||We instanceof MultiPoint){if(Cn&&Cn.getImage()&&typeof Cn.getImage().getSrc=="function"&&Cn.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(Ue="Point",typeof Cn.getImage().getSrc=="function"?(He.markerSrc=Cn.getImage().getSrc(),He.markerSize=Cn.getImage().getScale()||1,He.markerAnchor=Cn.getImage().getAnchor(),Cn.getImage().getColor()?(Oe=Cn.getImage().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.markerColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.markerColor=ke.hex,He.markerOpacity=ke.opacity):He.markerColor=this.options.markersList[0].color||"#ffffff"):(He.markerSrc=this.options.markersList[0].src,He.markerSize=this.options.markersList[0].scale||1,He.markerColor=this.options.markersList[0].color||"#ffffff",He.markerAnchor=this.options.markersList[0].anchor),He.markerCustom=!this._getsMarkersOptionsFromSrc(He.markerSrc)),Cn&&Cn.getText()){var An=t.selected[0].getProperties().name;if(An&&(Ue=Ue==="Point"?"Point&Text":"Text",Cn.getText().getStroke()&&Cn.getText().getStroke().getColor()&&(Oe=Cn.getText().getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.strokeColor=ke.hex,He.strokeOpacity=ke.opacity),Cn.getText().getStroke()&&Cn.getText().getStroke().getWidth()&&(He.strokeWidth=Cn.getText().getStroke().getWidth()),Cn.getText().getFill()&&Cn.getText().getFill().getColor()&&(Oe=Cn.getText().getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.fillColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.fillColor=ke.hex,He.fillOpacity=ke.opacity),He.strokeColor=He.hasOwnProperty("strokeColor")?He.strokeColor:this.options.defaultStyles.textStrokeColor,He.strokeWidth=He.hasOwnProperty("strokeWidth")?He.strokeWidth:this.options.defaultStyles.textStrokeWidth,He.fillColor=He.hasOwnProperty("fillColor")?He.fillColor:this.options.defaultStyles.textFillColor,Ue==="Point&Text")){var En=Cn.getText().getText();En||Cn.getText().setText(An);var Sn=t.selected[0].get("checked");He.labelDisplay=Sn===void 0?this.options.defaultStyles.labelDisplay:Sn}}}else We instanceof LineString||We instanceof MultiLineString?(Ue="Line",Cn&&Cn.getStroke()&&(Cn.getStroke().getWidth()&&(He.strokeWidth=Cn.getStroke().getWidth()),Cn.getStroke().getColor()&&(Oe=Cn.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.strokeColor=ke.hex,He.strokeOpacity=ke.opacity)),He.strokeWidth=He.hasOwnProperty("strokeWidth")?He.strokeWidth:this.options.defaultStyles.strokeWidth,He.strokeColor=He.hasOwnProperty("strokeColor")?He.strokeColor:this.options.defaultStyles.strokeColor):(We instanceof Polygon||We instanceof MultiPolygon)&&(Ue="Polygon",Cn&&Cn.getStroke()&&(Cn.getStroke().getWidth()&&(He.strokeWidth=Cn.getStroke().getWidth()),Cn.getStroke().getColor()&&(Oe=Cn.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.strokeColor=ke.hex,He.strokeOpacity=ke.opacity)),Cn&&Cn.getFill()&&Cn.getFill().getColor()&&(Oe=Cn.getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":He.fillColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},He.fillColor=ke.hex,He.fillOpacity=ke.opacity),He.strokeWidth=He.hasOwnProperty("strokeWidth")?He.strokeWidth:this.options.defaultStyles.polyStrokeWidth,He.strokeColor=He.hasOwnProperty("strokeColor")?He.strokeColor:this.options.defaultStyles.polyStrokeColor,He.fillColor=He.hasOwnProperty("fillColor")?He.fillColor:this.options.defaultStyles.polyFillColor,He.fillOpacity=He.hasOwnProperty("fillOpacity")?He.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!Ue){logger$t.log("Unhandled geometry type for styling.");return}var Tn=this,Ln=function(ti){if(ti==="cancel"){Tn.getMap().removeOverlay(Be);return}var ni=ti!=="apply",ii=document.getElementById(Tn._addUID("fillColor")),si=document.getElementById(Tn._addUID("fillOpacity")),oi=document.getElementById(Tn._addUID("strokeColor")),ci=document.getElementById(Tn._addUID("strokeWidth")),vi=document.getElementById(Tn._addUID("markerSize"));switch(Ue.toLowerCase()){case"text":ni?(Tn.options.defaultStyles.textStrokeColor=oi.value,Tn.options.defaultStyles.textStrokeWidth=ci.value,Tn.options.defaultStyles.textFillColor=ii.value):t.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:Cn.getText().getText(),fill:new Fill({color:ii.value}),stroke:new Stroke({color:oi.value,width:parseInt(ci.value,10)})})}));break;case"point&text":case"point":var pi=document.querySelector("input[type='checkbox']"),fi=null,Mi=parseInt(vi.value,10)/10,Oi=document.querySelector("input[name='gpf-dropdown-radio-style']:checked");if(Oi&&(fi=Tn._getsMarkersOptionsFromSrc(Oi.value),fi.scale=Mi),ni){if(Tn.options.defaultStyles.markerSize=Mi,Tn.options.markersList.length>1){var ui=Tn.options.markersList.findIndex(function(Pi){return Pi===fi});ui>0&&(Tn.options.markersList.splice(ui,1),Tn.options.markersList.splice(0,0,fi))}Ue.toLowerCase()==="point&text"&&(Tn.options.defaultStyles.textStrokeColor=He.strokeColor,Tn.options.defaultStyles.textStrokeWidth=He.strokeWidth,Tn.options.defaultStyles.textFillColor=He.fillColor,Tn.options.defaultStyles.labelDisplay=He.labelDisplay)}else{var li={};Ue.toLowerCase()==="point&text"&&(t.selected[0].set("checked",pi.checked),li={text:new Text({font:"16px sans",textAlign:"left",text:pi.checked?t.selected[0].get("name"):"",fill:new Fill({color:He.fillColor}),stroke:new Stroke({color:He.strokeColor,width:parseInt(He.strokeWidth,10)})})}),fi?t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(Tn._getIconStyleOptions(fi))},li))):t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:He.markerSrc,anchor:He.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Mi})},li)))}break;case"line":ni?(Tn.options.defaultStyles.strokeColor=oi.value,Tn.options.defaultStyles.strokeWidth=parseInt(ci.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:oi.value})}));break;case"polygon":var Ri=parseInt(si.value,10)/10;ni?(Tn.options.defaultStyles.polyStrokeColor=oi.value,Tn.options.defaultStyles.polyFillColor=ii.value,Tn.options.defaultStyles.polyFillOpacity=Ri,Tn.options.defaultStyles.polyStrokeWidth=parseInt(ci.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:oi.value}),fill:new Fill({color:ColorUtils.hexToRgba(ii.value,Ri)})}));break}ni||Tn.getMap().removeOverlay(Be)},Bn=this._createStylingDiv({geomType:Ue,initValues:He,applyFunc:Ln});Be=new Overlay({element:Bn,positioning:"top-center"}),this.getMap().addOverlay(Be),Be.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=Be,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var Oe=null,ke=null,Be=null,Ue=null,He=t.selected[0].getGeometry(),We=t.selected[0].getStyle();if(He instanceof Point$1||He instanceof MultiPoint){var Cn=t.selected[0].getProperties().name;We&&We.getText()&&Cn?ke="Text":We&&We.getImage()&&(ke="Point")}else if(He instanceof LineString||He instanceof MultiLineString)ke="Line";else if(He instanceof Polygon||He instanceof MultiPolygon)ke="Polygon";else{logger$t.log("Geometry type for styling not supported .");return}if(!ke){logger$t.log("Unhandled geometry type for styling.");return}if(ke==="Text")Be=We.getText().getText();else{var An=t.selected[0].getProperties();An&&(An.hasOwnProperty("description")||An.hasOwnProperty("desc"))&&(Be=An.description||An.desc),An&&An.hasOwnProperty("measure")&&(Ue=An.measure)}var En=this,Sn=function(Ln,Bn,ti){if(En.getMap().removeOverlay(Oe),!!ti){var ni=t.selected[0];if(ke==="Text"){var ii=ni.getStyle();ii.getText().setText(Bn),ni.setProperties({name:Bn}),ni.setStyle(ii);return}var si={};si[Ln]=Bn.replace(/\n/g,"<br>"),ni.setProperties(si)}},Tn=this._createLabelDiv({applyFunc:Sn,inputId:this._addUID("label-input"),placeholder:ke==="Text"?"Saisir un label...":"Saisir une description... (facultatif)",text:Be,key:"description",measure:this.options.tools.measure?Ue:null,geomType:ke});Oe=new Overlay({element:Tn,positioning:"top-center"}),this.getMap().addOverlay(Oe),Oe.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=Oe,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){logger$t.log(e);var Oe=null,ke=this.getMap().getView().getProjection();function Be(ci,vi){vi=vi||2;var pi=Math.pow(10,vi);return Math.round(ci*pi)/pi}var Ue=t||e.getProperties().type;switch(Ue){case"Point":var He=e.getGeometry().getCoordinates(),We=transform$1(He,ke,"EPSG:4326");Oe="lon : ",Oe+=Be(We[0],4)+"°",Oe+=" / ",Oe+="lat : ",Oe+=Be(We[1],4)+"°";break;case"LineString":for(var Cn=0,An=e.getGeometry().getCoordinates(),En=0,Sn=An.length-1;En<Sn;++En){var Tn=transform$1(An[En],ke,"EPSG:4326"),Ln=transform$1(An[En+1],ke,"EPSG:4326");Cn+=getDistance(Tn,Ln)}Oe=Cn>1e3?Be(Cn/1e3,3)+" km":Be(Cn,3)+" m";break;case"Polygon":var Bn=0,ti=e.getGeometry().clone(),ni=ti.getLinearRing(0).getCoordinates();Bn=Math.abs(getArea(new Polygon([ni])));var ii=ti.getLinearRings();if(ii.length>1)for(var si=1;si<ii.length;si++){var oi=ii[si].getCoordinates();Bn-=Math.abs(getArea(new Polygon([oi])))}Oe=Bn>1e6?Be(Bn/1e6,3)+" km^2":Be(Bn,2)+" m^2";break}e.setProperties({measure:Oe,type:Ue})}_handleToolClick(e,t,Oe){var ke=Oe.getMap();if(!ke){logger$t.trace("Drawing control not attached to any map.");return}Interactions.unset(ke,{current:"Drawing"}),Oe.interactionCurrent&&(ke.removeInteraction(Oe.interactionCurrent),Oe.interactionCurrent=null),Oe.interactionSelectEdit&&(ke.removeInteraction(Oe.interactionSelectEdit),Oe.interactionSelectEdit=null),Oe.popupOvl&&(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null),Oe.stylingOvl&&(Oe.getMap().removeOverlay(Oe.stylingOvl),Oe.stylingOvl=null),Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null),this.layer||this._createEmptyLayer();const Be=He=>{if(He.dragging||!Oe.tooltipOvl)return;const We=He.coordinate;Oe.tooltipOvl.setPosition(We)},Ue=()=>{Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null)};switch(t){case this._addUID("drawing-tool-point"):Oe.dtOptions.points.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),Oe.interactionCurrent.on("drawend",function(He){Oe._drawEndFeature(He.feature,"Point")},Oe));break;case this._addUID("drawing-tool-line"):Oe.dtOptions.lines.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString",handleMoveEvent:Be}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(He){Oe._drawEndFeature(He.feature,"LineString"),Ue()},Oe),Oe.interactionCurrent.on("drawabort",Ue,Oe));break;case this._addUID("drawing-tool-polygon"):Oe.dtOptions.polygons.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon",handleMoveEvent:Be}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(He){Oe._drawEndFeature(He.feature,"Polygon"),Ue()},Oe),Oe.interactionCurrent.on("drawabort",Ue,Oe));break;case this._addUID("drawing-tool-holes"):Oe.dtOptions.holes.active&&(Oe.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),ke.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),Oe.interactionCurrent.on("drawstart",function(He){},Oe),Oe.interactionCurrent.on("drawend",function(He){var We=Oe.interactionSelectEdit.getFeatures();if(We.getLength()){for(var Cn=We.item(0),An=He.feature.getGeometry().getCoordinates()[0],En=!0,Sn=0;Sn<An.length;Sn++)if(!Cn.getGeometry().intersectsCoordinate(An[Sn])){En=!1;break}if(!En)return;Cn.getGeometry().appendLinearRing(new LinearRing(An)),He.feature=Cn,Oe._drawEndFeature(He.feature,"Polygon")}},Oe));break;case this._addUID("drawing-tool-text"):Oe.dtOptions.text.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),Oe.interactionCurrent.on("drawend",He=>{var We=function(An,En,Sn){if(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null,!Sn||!En){Oe.layer.getSource().removeFeature(He.feature);return}var Tn={};Tn[An]=En,He.feature.setProperties(Tn),He.feature.setStyle(new Style$1({image:new Icon(Oe._getIconStyleOptions(Oe.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:En,fill:new Fill({color:Oe.options.defaultStyles.textFillColor}),stroke:new Stroke({color:Oe.options.defaultStyles.textStrokeColor,width:3})})}))},Cn=this._createLabelDiv({applyFunc:We,inputId:Oe._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});Oe.popupOvl&&Oe.popupOvl.element.querySelector(".gp-styling-button.closer").click(),Oe.popupOvl=new Overlay({element:Cn,positioning:"top-center"}),Oe.getMap().addOverlay(Oe.popupOvl),Oe.popupOvl.setPosition(He.feature.getGeometry().getCoordinates()),document.getElementById(Oe._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):Oe.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,Oe.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),Oe.interactionSelectEdit.on("select",He=>{}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),ke.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),Oe.interactionCurrent.on("modifyend",He=>{var We=He.features.item(0);Oe._updateMeasure(We)}));break;case this._addUID("drawing-tool-display"):Oe.dtOptions.display.active&&(Oe.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):Oe.dtOptions.tooltip.active&&(Oe.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):Oe.dtOptions.remove.active&&(Oe.interactionCurrent=Oe._createRemoveInteraction());break;default:logger$t.trace("unhandled tool type")}Oe.interactionCurrent&&(Oe.interactionCurrent.setProperties({name:"Drawing",source:this}),ke.addInteraction(Oe.interactionCurrent),Oe.tooltipOvl&&ke.addOverlay(Oe.tooltipOvl)),logger$t.log("interactions",ke.getInteractions())}onShowDrawingClick(e){var t=this._showDrawingButton.ariaPressed;t==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position);for(var ke in this.dtOptions)if(this.dtOptions.hasOwnProperty(ke)&&this.dtOptions[ke].active){var Be=this._addUID("drawing-tool-"+this.dtOptions[ke].id);document.getElementById(Be).className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[ke].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),Oe="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+Oe+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var ke=document.createEvent("MouseEvents");ke.initEvent("click",!0,!0),t.dispatchEvent(ke)}else t.click()}}},Tc(Do,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Tc(Do,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Créer",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Éditer",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Tc(Do,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#000091",polyFillOpacity:.7,polyStrokeColor:"#000091",polyStrokeWidth:4,strokeColor:"#FF7F00",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Tc(Do,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Do);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$s=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.className=this._addUID("GPlocationPoint"),Te.className+=" GPwidget gpf-widget ",Te},_createLocationPointElement:function(Te,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+Te),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(Te,e){var t=this,Oe=document.createElement("button");return Oe.id=this._addUID("GPlocationOriginLabel_"+Te),Oe.innerHTML=e,Oe.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",Oe.setAttribute("type","button"),Oe.addEventListener("click",function(ke){for(var Be=SelectorID.index(this.id),Ue=document.getElementsByClassName(t._addUID("GPlocationPoint")),He=0;He<Ue.length;He++){var We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We);document.getElementById(t._addUID("GPlocationPoint_"+Cn)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+Be)).value="",document.getElementById(t._addUID("GPlocationPoint_"+Be)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+Be)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),t.onLocationClearPointClick(ke)}),Oe},_createLocationAutoCompleteteInputElement:function(Te){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+Te),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse, un lieu...",t.autocomplete="off",t.addEventListener("keyup",function(Oe){var ke=Oe.which||Oe.keyCode;if(!(ke===13||ke===10||ke===38||ke===40)){var Be=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Be)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Oe)}}),t.addEventListener("keydown",function(Oe){var ke=Oe.which||Oe.keyCode,Be=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+Te));if(Be){var Ue=Be.getElementsByClassName("GPautoCompleteProposal current"),He=Be.getElementsByClassName("GPautoCompleteProposal"),We=He.length;if(We){var Cn=null;if(Ue.length)Cn=Ue[0];else{Cn=He[0],Cn.className="GPautoCompleteProposal current",Cn.style.color="#000000",Cn.style["background-color"]="#CEDBEF";return}var An=parseInt(SelectorID.index(Cn.id),10),En=An===We-1?He[0]:He[An+1],Sn=An===0?He[We-1]:He[An-1];switch(Cn.style["background-color"]="",Cn.style.color="",Sn.style["background-color"]="",Sn.style.color="",En.style["background-color"]="",En.style.color="",ke){case 38:logger$s.log("arrow up"),Cn.className="GPautoCompleteProposal",Sn.className="GPautoCompleteProposal current",Sn.style.color="#000000",Sn.style["background-color"]="#CEDBEF";break;case 40:logger$s.log("arrow down"),Cn.className="GPautoCompleteProposal",En.className="GPautoCompleteProposal current",En.style.color="#000000",En.style["background-color"]="#CEDBEF";break;case 13:logger$s.log("enter"),Cn.click(Oe);break}Cn.focus()}}}),t},_createLocationCoordinateInputElement:function(Te){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+Te),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var Oe=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+Oe)).click()}),t},_createLocationPointerShowInputElement:function(Te){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+Te),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(Te){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+Te),t.htmlFor=this._addUID("GPlocationOriginPointer_"+Te),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",t.title="Pointer un lieu sur la carte",t.setAttribute("type","button"),t.addEventListener("click",function(Oe){Oe.preventDefault(),Oe.stopPropagation();var ke=SelectorID.index(this.id),Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),Ue,He,We;for(Ue=0;Ue<Be.length;Ue++)He=Be[Ue].childNodes[0].id,We=SelectorID.index(He),ke!==We&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+We)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+We)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).value="",Ue=0;Ue<Be.length;Ue++)He=Be[Ue].childNodes[0].id,We=SelectorID.index(He),document.getElementById(e._addUID("GPlocationPoint_"+We)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+ke))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+ke)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+ke)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).value="Pointer un lieu sur la carte",Ue=0;Ue<Be.length;Ue++)He=Be[Ue].childNodes[0].id,We=SelectorID.index(He),ke===We?document.getElementById(e._addUID("GPlocationPoint_"+We)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+We)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+ke))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+ke)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+ke)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).disabled=!0}e.onActivateMapPointClick(Oe)}),t},_createLocationRemovePointElement:function(Te){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+Te),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",t.title="Supprimer l'étape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke);var Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),Ue=Be.length-1,He=Be[0].childNodes[0].id,We=Be[Ue].childNodes[0].id,Cn=SelectorID.index(He),An=SelectorID.index(We);if(Te!==Cn&&Te!==An){var En=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+En)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+En)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+En)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+En)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+En)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+En)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(Oe)}}),t},_createLocationAddPointElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(t){for(var Oe=1,ke=0,Be=document.getElementsByClassName(Te._addUID("GPlocationPoint")),Ue=1;Ue<Be.length-1;Ue++){var He=Be[Ue].childNodes[0].id,We=SelectorID.index(He);document.getElementById(Te._addUID("GPlocationPoint_"+We))&&(document.getElementById(Te._addUID("GPlocationPoint_"+We)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?Oe===1&&(Oe=We):ke++)}Oe<Be.length&&(document.getElementById(Te._addUID("GPlocationPoint_"+Oe)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(Te._addUID("GPlocationPoint_"+Oe)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),ke===4&&(document.getElementById(Te._addUID("GPlocationStageAdd")).style.display="none");var Cn=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Cn),Te.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(Te){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+Te),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(Te){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+Te),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Te)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Te)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Te)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Te)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(Te,e,t){var Oe=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+Te)),ke=document.createElement("div");ke.id=this._addUID("AutoCompletedLocation_"+t),ke.className="GPautoCompleteProposal gpf-panel__items",ke.title=GeocodeUtils.getSuggestedLocationFreeform(e),ke.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),Oe.appendChild(ke)},GPdisplayCoordinate:function(Te){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var Oe=e[t].childNodes[0].id,ke=SelectorID.index(Oe);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+ke)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)).value=Te,document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)).disabled=!1;for(var Be=0;Be<e.length;Be++){Oe=e[Be].childNodes[0].id;var Ue=SelectorID.index(Oe);document.getElementById(this._addUID("GPlocationPoint_"+Ue)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+Ue))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+Ue)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+ke)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$r=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Xf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$r.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var Oe=this.getMap(),ke=Oe.getView().getProjection().getCode();t||(t=ke),this._setCoordinate(e,t),e=transform$1(e,t,ke),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),Oe=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(Oe);var ke=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);Oe.appendChild(ke);var Be=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Be.addEventListener?Be.addEventListener("click",()=>this.onAutoCompleteInputClick()):Be.attachEvent&&Be.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),Oe.appendChild(Be);var Ue=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);Oe.appendChild(Ue);var He=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);Oe.appendChild(He);var We=this._inputShowPointer=this._createLocationPointerInputElement(e);if(Oe.appendChild(We),this.options.tag.addOption){var Cn=this._addPointElement=this._createLocationAddPointElement();Oe.appendChild(Cn)}if(this.options.tag.removeOption){var An=this._removePointElement=this._createLocationRemovePointElement(e);Oe.appendChild(An)}var En=this._suggestedContainer=this._createLocationAutoCompleteElement(e),Sn=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return En.appendChild(Sn),t.appendChild(En),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var Oe=this.options.autocompleteOptions||{},ke=Oe.onSuccess||null,Be=Oe.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var Ue=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(We){if(We){var Cn=We.suggestedLocations;Ue._fillAutoCompletedLocationListContainer(Cn),ke&&ke.call(this,We)}},onFailure:function(We){Ue._clearSuggestedLocation(),logger$r.log(We.message),Be&&Be.call(this,We)}});var He=this.getMap();He.on("click",()=>this._hideSuggestedLocation()),He.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var Oe=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=Oe;var ke={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(Be);var Ue=this.getMap().getView(),He=Ue.getProjection().getCode();He!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",He)),this._setPosition(Oe),this._setMarker(Oe,ke,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$r.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var Oe=e.map.getView().getProjection();this._setCoordinate(t,Oe),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),Oe=t.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}_setCoordinate(e,t){this._coordinate=transform$1(e,t,"EPSG:4326");var Oe=this._coordinate[0].toFixed(4),ke=this._coordinate[1].toFixed(4),Be=ke+" / "+Oe;this.GPdisplayCoordinate(Be)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,Oe){var ke=this.getMap();if(this._marker!=null&&(ke.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Be,stopEvent:!1}),ke.addOverlay(this._marker),Oe&&logger$r.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$r.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$r.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions),Helper.assign(t,e);var Oe=this._resources.AutoCompletion||null;Oe&&Array.isArray(Oe)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=Oe),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$r.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=0;Oe<e.length;Oe++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[Oe],Oe);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e}},logger$q=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{layer:null,control:null,target:null,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:""},callback:null},logger$q.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:null}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.inputName=null,this.inputDesc=null,this.menu=null,this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer(),t=e.querySelector(".container-buttons-plugin");this.options.target=t||e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options={layer:null,control:null,target:null,download:!0,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:"export"},callback:null};var t=Helper.assign(this.options.icons,e.icons);Helper.assign(this.options,e),Helper.assign(this.options.icons,t),logger$q.debug(this.options),this.options.layer,this.options.control,this.options.target;var Oe=this.options.format;Oe?this.setFormat(Oe):this.setFormat(""),this.options.name||this.setName("export"),this.options.description||this.setDescription("export"),this.options.title||this.setTitle("Exporter"),this.options.kind||this.setKind("secondary"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.options.icons.menu+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer gpf-export-menu-container gpf-export-menu-container-row",this.options.direction==="column"&&t.classList.replace("gpf-export-menu-container-row","gpf-export-menu-container-column");var Oe=this.stringToHTML(`
            <div class="GPexportMenuHidden gpf-accordion fr-accordion ${this.menuClassHidden}">
                <h3 class="gpf-accordion__title fr-accordion__title">
                    <button type="button" 
                        id="GPexportBtnMenuContent-${this.uid}"
                        class="gpf-accordion__btn fr-accordion__btn" 
                        aria-expanded="false" aria-controls="GPexportMenuContent-${this.uid}">options</button>
                </h3>
                <div id="GPexportMenuContent-${this.uid}"
                    class="GPexportMenuContent fr-collapse fr-mx-2w">
                    <div id="GPexportMenuName-${this.uid}" 
                        class="GPexportMenuName">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputName-${this.uid}" title="Nom">Nom</label>
                        <input type="text" id="GPexportMenuInputName-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuDesc-${this.uid}"
                        class="GPexportMenuDesc">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputDesc-${this.uid}" title="Description">Description</label>
                        <input type="text" id="GPexportMenuInputDesc-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuFormat-${this.uid}">
                        <label class="GPlabel gpf-label fr-label" title="Formats">Formats</label>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGeojson-${this.uid}"
                                name="format" 
                                value="geojson">
                            <label class="fr-label container" for="GPmenuFormatGeojson-${this.uid}">GeoJSON
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatKml-${this.uid}"
                                name="format" 
                                value="kml">
                            <label class="fr-label container" for="GPmenuFormatKml-${this.uid}">KML
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGpx-${this.uid}"
                                name="format" 
                                value="gpx">
                            <label class="fr-label container" for="GPmenuFormatGpx-${this.uid}">GPX
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        `);if(this.menu=Oe.firstChild,this.menu){if(this.options.menu){var ke=this.menu.className;this.menu.className=ke.replace(this.menuClassHidden,"")}var Be=this.options.format.toUpperCase(),Ue=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let An=0;An<Ue.length;An++){var He=Ue[An];He.id.toUpperCase().includes(Be)&&(He.checked=!0),He.addEventListener("change",En=>this.onChangeRadioFormat(En))}var We=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid);We&&We.addEventListener("click",An=>this.onClickButtonToggleOptions(An)),this.inputName=this.menu.querySelector("#GPexportMenuInputName-"+this.uid),this.inputDesc=this.menu.querySelector("#GPexportMenuInputDesc-"+this.uid),this.inputName.addEventListener("change",An=>this.onChangeInputName(An)),this.inputDesc.addEventListener("change",An=>this.onChangeInputDesc(An))}t.appendChild(this.menu);var Cn=this.stringToHTML(`
            <button 
                type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPexportButtonExportIcon GPsubmit gpf-btn gpf-btn-icon-export-submit fr-btn fr-m-1w">
                ${e}
            </button>
        `);switch(this.button=Cn.firstChild,this.button&&this.button.addEventListener("click",An=>this.onClickButtonExport(An)),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}if(!this.options.icons.button)this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");else switch(this.options.icons.button){case"export":break;case"save":this.button.classList.replace("GPexportButtonExportIcon","GPexportButtonSaveIcon"),this.button.classList.replace("gpf-btn-icon-export-submit","gpf-btn-icon-save-submit");break;default:this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");break}t.appendChild(this.button),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var Oe=new DOMParser,ke=Oe.parseFromString(e,"text/html");return ke.body}var Be=document.createElement("div");return Be.innerHTML=e,Be}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,Oe){var ke=null;if(!e)return logger$q.warn("Impossible to export : no layer is hosting features."),ke;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$q.warn("Impossible to export : no features found."),ke;e.getSource().getFeatures().forEach(An=>{var En=An.getStyle();!En&&this.options.control&&typeof this.options.control.getStyle=="function"&&An.setStyle(this.options.control.getStyle())});var Be={defaultStyle:Oe,extensions:{}};t&&(Be.extensions={"geoportail:compute":t}),this.options.description&&(Be.extensions.description=this.inputDesc&&this.inputDesc.value?this.inputDesc.value:this.options.description);var Ue=null;switch(this.options.format.toUpperCase()){case"KML":Be.writeStyles=!0,Be.showPointNames=!0,Ue=new KML(Be);break;case"GPX":Ue=new GPX(Be);break;case"GEOJSON":Ue=new GeoJSON(Be);break}if(!Ue)return logger$q.warn("Impossible to export : format unknown !?"),ke;var He=e.getSource().getProjection(),We=this.getMap();We&&(He=He||We.getView().getProjection());var Cn=e.getSource().getFeatures();return ke=Ue.writeFeatures(Cn,{dataProjection:"EPSG:4326",featureProjection:He||"EPSG:3857"}),ke}onClickButtonExport(e){this.isPluggableControl()||logger$q.warn("Componant not pluggable with the control !");var t=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getLayer():this.options.layer,Oe=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},ke=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Be=this.exportFeatures(t,Oe,ke);if(!(!Be||Be==="null")){if(this.dispatchEvent({type:"button:clicked",content:Be,name:this.options.name,description:this.options.description,format:this.options.format,layer:t}),this.options.download){var Ue=document.createElement("a"),He="utf-8";if(Ue.setAttribute("href","data:"+this.mimeType+";charset="+He+","+encodeURIComponent(Be)),Ue.setAttribute("download",this.options.name+this.extension),document.createEvent){var We=document.createEvent("MouseEvents");We.initEvent("click",!0,!0),Ue.dispatchEvent(We)}else Ue.click()}this.options.callback&&typeof this.options.callback=="function"&&this.options.callback(Be,t)}}onChangeRadioFormat(e){this.setFormat(e.target.value)}onChangeInputName(e){this.setName(e.target.value)}onChangeInputDesc(e){this.setDescription(e.target.value)}onClickButtonToggleOptions(e){e.target.ariaExpanded=e.target.ariaExpanded!=="true";var t=this.menu.querySelector("#"+e.target.getAttribute("aria-controls"));t&&(e.target.ariaExpanded==="true"?(t.classList.add("fr-collapse--expanded"),this.menu.classList.add("gpf-full-container"),this.menu.classList.add("gpf-accordion--opened"),t.classList.remove("GPelementHidden")):(t.classList.remove("fr-collapse--expanded"),this.menu.classList.remove("gpf-full-container"),this.menu.classList.remove("gpf-accordion--opened"),t.classList.add("GPelementHidden")))}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setDescription(e){this.options.description=e}setTitle(e){this.options.title=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+e:e)}setKind(e){if(this.options.kind=e,this.button)switch(this.button.classList.remove("fr-btn--tertiary","gpf-btn--tertiary"),this.button.classList.remove("fr-btn--secondary","gpf-btn--secondary"),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}}setMenu(e){if(this.options.menu=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var Oe=this.options.format.toUpperCase(),ke=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let Ue=0;Ue<ke.length;Ue++){var Be=ke[Ue];Be.id.toUpperCase().includes(Oe)&&(Be.checked=!0)}}}setLayer(e){this.options.layer=e}setDownload(e){this.options.download=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$p=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GProute"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowRoutePictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinéraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowRoutePanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowRoutePanelClick(Oe)}),e},_createRoutePanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GProutePanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createRoutePanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createDrawingButtonsPluginDiv:function(){var Te=document.createElement("div");return Te.className="container-buttons-plugin fr-mx-2w",Te},_createRoutePanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'itinéraire",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GProutePanelClose"),Oe.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Masquer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowRoutePicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowRoutePicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createRoutePanelFooterElement:function(){var Te=document.createElement("div");return Te.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Te},_createRoutePanelFormPointLabel:function(Te,e=!0){var t=document.createElement("p");t.innerHTML=Te;var Oe=e?"":" GPelementHidden gpf-hidden";return t.className="GProutePointLabelP gpf-label fr-label"+Oe,t},_createRoutePanelFormElement:function(){var Te=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){logger$p.log(t),t.preventDefault();var Oe=document.getElementsByClassName(Te._addUID("GPlocationPoint")),ke=Oe[0].childNodes[0].id,Be=Oe[Oe.length-1].childNodes[0].id,Ue=SelectorID.index(ke),He=SelectorID.index(Be);if(document.getElementById(Te._addUID("GPlocationOrigin_"+Ue)).value===""&&document.getElementById(Te._addUID("GPlocationOriginCoords_"+Ue)).value===""||document.getElementById(Te._addUID("GPlocationOrigin_"+He)).value===""&&document.getElementById(Te._addUID("GPlocationOriginCoords_"+He)).value==="")return!1;Te._addRouteResultsStagesValuesElement(Oe);var We=null;document.getElementById(Te._addUID("GProuteComputationChoice"))&&(document.getElementById(Te._addUID("GProuteComputationFastest"))&&document.getElementById(Te._addUID("GProuteComputationFastest")).checked&&(We=document.getElementById(Te._addUID("GProuteComputationFastest")).value),document.getElementById(Te._addUID("GProuteComputationShortest"))&&document.getElementById(Te._addUID("GProuteComputationShortest")).checked&&(We=document.getElementById(Te._addUID("GProuteComputationShortest")).value));var Cn=null;document.getElementById(Te._addUID("GProuteTransportCar"))&&document.getElementById(Te._addUID("GProuteTransportCar")).checked&&(Cn=document.getElementById(Te._addUID("GProuteTransportCar")).value),document.getElementById(Te._addUID("GProuteTransportPedestrian"))&&document.getElementById(Te._addUID("GProuteTransportPedestrian")).checked&&(Cn=document.getElementById(Te._addUID("GProuteTransportPedestrian")).value);for(var An=[],En=document.getElementsByClassName("GProuteExclusionsOption"),Sn=0;Sn<En.length;Sn++){var Tn=En[Sn].htmlFor,Ln=document.getElementById(Tn);Ln.checked||An.push(Ln.value)}return Te.onRouteComputationSubmit({computation:We,transport:Cn,exclusions:An}),!1}),e},_createRoutePanelResultsElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GProuteResultsPanel"),Te.className="GPelementHidden gpf-hidden",Te.appendChild(this._createRouteResultsStagesElement()),Te.appendChild(this._createRouteResultsElement()),Te.appendChild(this._createRouteShowResultsDetailsElement()),Te.appendChild(this._createRouteResultsDetailsElement()),Te},_createRouteWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GProuteCalcWaitingContainer"),Te.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createRouteResultsStagesElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GProuteResultsStages"),Te},_addRouteResultsStagesValuesElement:function(Te){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<Te.length;e++){var t=Te[e].childNodes[0].id,Oe=SelectorID.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+Oe)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var ke=document.createElement("div");ke.className="GProuteResultsStages";var Be=document.createElement("div");Be.className="GProuteResultStageLabel",Be.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+Oe)).innerHTML+" :",ke.appendChild(Be);var Ue=document.createElement("div");Ue.className="GProuteResultStageValue";var He=document.getElementById(this._addUID("GPlocationOriginCoords_"+Oe)),We=He.value,Cn=He.className==="GPelementVisible gpf-visible";We!==null&&We!==""&&Cn?Ue.innerHTML=We:Ue.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+Oe)).value,ke.appendChild(Ue),Ue.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(ke)}}},_createRouteResultsElement:function(){var Te=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var Oe=document.createElement("div");Oe.id=this._addUID("GProuteResultsMode");var ke=document.createElement("select");ke.id=this._addUID("GProuteResultsComputationSelect"),ke.className="GPselect gpf-select fr-select",ke.addEventListener("change",function(Cn){Te.onRouteModeComputationChangeAndRun(Cn)});for(var Be=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],Ue=0;Ue<Be.length;Ue++){var He=document.createElement("option");He.value=Be[Ue].code,He.text=Be[Ue].label,ke.appendChild(He)}Oe.appendChild(ke),e.appendChild(Oe);var We=document.createElement("div");return We.id=this._addUID("GProuteResultsNew"),We.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",We.title="Modifier le calcul",We.addEventListener("click",function(Cn){document.getElementById(Te._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(Te._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",Te.onShowRouteResultsNewClick(Cn)}),e.appendChild(We),e},_addRouteResultsValuesElement:function(Te,e,t){var Oe=document.getElementById(this._addUID("GProuteResultsValues"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);var ke=document.createElement("div");ke.className="GProuteResultsValue";var Be=document.createElement("label");Be.className="GProuteResultsValueLabel",Be.innerHTML="Distance :",ke.appendChild(Be);var Ue=0,He=parseInt(Te/1e3,10);if(!He)Ue=Math.round(Te)+" m";else{var We=Math.round(Te);We=We/1e3,Ue=We+" km"}var Cn=document.createElement("div");Cn.id=this._addUID("GProuteResultsValueDist"),Cn.innerHTML=Ue,ke.appendChild(Cn),Oe.appendChild(ke);var An=document.createElement("div");An.className="GProuteResultsValue";var En=document.createElement("label");En.className="GProuteResultsValueLabel",En.innerHTML="Durée :",An.appendChild(En);var Sn=document.createElement("div");return Sn.id=this._addUID("GProuteResultsValueDist"),Sn.innerHTML=t(e),An.appendChild(Sn),Oe.appendChild(An),Oe},_createRouteShowResultsDetailsElement:function(){var Te=document.createElement("div");if(Te.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",Te.appendChild(e)}var t=document.createElement("input");t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",Te.appendChild(t);var Oe=document.createElement("label");if(Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GProuteResultsShowDetails"),Oe.innerHTML="Afficher le détail",Te.appendChild(Oe),!checkDsfr()){var ke=document.createElement("label");ke.htmlFor=this._addUID("GProuteResultsShowDetails"),ke.innerHTML="Masquer le détail",Te.appendChild(ke);var Be=document.createElement("div");Be.className="GPfakeBorder",Te.appendChild(Be)}return Te},_createRouteResultsDetailsElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GProuteResultsDetails"),Te},_addRouteResultsDetailsElement:function(Te,e){var t=this,Oe=document.getElementById(this._addUID("GProuteResultsDetails"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);for(var ke=0,Be=0,Ue=0;Ue<Te.length;Ue++){var He=Ue+1,We=Te[Ue],Cn=document.createElement("div");Cn.className="GProuteResultsDetailsNumber",Cn.innerHTML=He+".",Oe.appendChild(Cn),Be+=parseFloat(We.duration),ke+=parseFloat(We.distance);var An=0,En=parseInt(ke/1e3,10);if(!En)An=Math.round(ke)+" m";else{var Sn=Math.round(ke);Sn=Sn/1e3,An=Sn+" km"}var Tn=document.createElement("div");Tn.className="GProuteResultsDetailsInstruction",Tn.id=this._addUID("GProuteResultsDetailsInstruction_"+He),Tn.title="distance : "+An+" / temps : "+e(Be),Tn.innerHTML=We.instruction,Tn.addEventListener("mouseover",function(Ln){t.onRouteResultsDetailsMouseOver(Ln)}),Tn.addEventListener("mouseout",function(Ln){t.onRouteResultsDetailsMouseOut(Ln)}),Tn.addEventListener("click",function(Ln){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(Ln)}),Oe.appendChild(Tn)}return Oe},_createRoutePanelFormPointElement:function(Te,e,t){var Oe=this,ke=document.createElement("div");ke.id="GProutePoint"+Te,ke.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Be=document.createElement("label");Be.id="GProuteOriginLabel"+Te,Be.htmlFor="GProuteOrigin"+Te,Be.innerHTML=e,Be.addEventListener("click",function(){var An=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+An).value="";for(var En=1;En<8;En++)document.getElementById("GProutePoint"+En).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+An).checked=!1,document.getElementById("GProuteOrigin"+An).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+An).className="GPelementHidden gpf-hidden"}),ke.appendChild(Be);var Ue=document.createElement("input");Ue.id="GProuteOrigin"+Te,Ue.className="GPelementVisible gpf-visible",Ue.type="text",Ue.placeholder="Saisir une adresse, un lieu...",Ue.addEventListener("keyup",function(An){var En=An.which||An.keyCode;if(!(En===13||En===10)){var Sn=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+Sn).value.length>2?document.getElementById("GProuteAutoCompleteList"+Sn).style.display="block":document.getElementById("GProuteAutoCompleteList"+Sn).style.display="none",Oe.onAutoCompleteSearchText(An)}}),Ue.addEventListener("blur",function(){var An=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+An).style.display="none"}),ke.appendChild(Ue);var He=document.createElement("input");He.id="GProuteOriginCoords"+Te,He.className="GPelementHidden gpf-hidden",He.type="text",He.disabled=!0,ke.appendChild(He);var We=document.createElement("input");We.id="GProuteOriginPointer"+Te,We.type="checkbox",ke.appendChild(We);var Cn=document.createElement("label");return Cn.id="GProuteOriginPointerImg"+Te,Cn.htmlFor="GProuteOriginPointer"+Te,Cn.className="GProuteOriginPointerImg",Cn.title="Pointer un lieu sur la carte",Cn.addEventListener("click",function(An){An.preventDefault(),An.stopPropagation();var En=this.id.charAt(this.id.length-1),Sn;for(Sn=1;Sn<8;Sn++)En!==Sn&&(document.getElementById("GProuteOriginPointer"+Sn).checked=!1,document.getElementById("GProuteOriginCoords"+Sn).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+Sn).value="",document.getElementById("GProuteOrigin"+Sn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Sn).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+En).checked){for(document.getElementById("GProuteOriginCoords"+En).value="",Sn=1;Sn<8;Sn++)document.getElementById("GProutePoint"+Sn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+En).checked=!1,document.getElementById("GProuteOrigin"+En).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+En).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+En).value="Pointer un lieu sur la carte",Sn=1;Sn<8;Sn++)En===Sn?document.getElementById("GProutePoint"+Sn).style.display="flex":document.getElementById("GProutePoint"+Sn).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+En).checked=!0,document.getElementById("GProuteOrigin"+En).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+En).className="GPelementVisible gpf-visible"}Oe.onRouteMapPointClick(An)}),ke.appendChild(Cn),ke},_createRoutePanelFormRemoveStageElement:function(Te){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+Te,t.className="GProuteStageRemove",t.title="Supprimer l'étape",Te!==1&&Te!==7&&t.addEventListener("click",function(Oe){var ke=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+ke).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+ke).value="",document.getElementById("GProuteOrigin"+ke).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+ke).value="",document.getElementById("GProuteOriginCoords"+ke).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(Oe)}),t},_createRoutePanelFormAddStageElement:function(){var Te=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(t){for(var Oe=1,ke=0,Be=2;Be<7;Be++)document.getElementById("GProutePoint"+Be).className==="GPflexInput GProuteStageFlexInputHidden"?Oe===1&&(Oe=Be):ke++;Oe<7&&(document.getElementById("GProutePoint"+Oe).className="GPflexInput GProuteStageFlexInput"),ke===4&&(document.getElementById("GProuteStageAdd").style.display="none"),Te.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(Te){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+Te,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+Te).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+Te).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(Te,e,t){var Oe=document.getElementById("GProuteAutoCompleteList"+e),ke=document.createElement("div");ke.id="AutoCompletedLocation"+t,ke.className="GPautoCompleteProposal",ke.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(Te),Oe.appendChild(ke)},_createRoutePanelFormModeChoiceTransportElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var Oe=document.createElement("label");Oe.className="GProuteModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de déplacement",t.appendChild(Oe);var ke=document.createElement("div");ke.className="gpf-radio-btn-group";for(var Be=0;Be<Te.length;Be++){var Ue=Te[Be],He=document.createElement("div");if(He.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",Ue==="Voiture"){var We=document.createElement("input");We.id=this._addUID("GProuteTransportCar"),We.type="radio",We.name="GProuteTransport",We.value="Voiture",Be===0&&(We.checked=!0),We.addEventListener?We.addEventListener("change",function(Sn){e.onRouteModeTransportChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onRouteModeTransportChange(Sn)}),He.appendChild(We);var Cn=document.createElement("label");Cn.className="GProuteTransportImg gpf-label fr-label",Cn.htmlFor=this._addUID("GProuteTransportCar"),Cn.title="Voiture",Cn.innerHTML="Voiture",He.appendChild(Cn)}if(Ue==="Pieton"){var An=document.createElement("input");An.id=this._addUID("GProuteTransportPedestrian"),An.type="radio",An.name="GProuteTransport",An.value="Pieton",Be===0&&(An.checked=!0),An.addEventListener?An.addEventListener("change",function(Sn){e.onRouteModeTransportChange(Sn)}):An.attachEvent&&An.attachEvent("onchange",function(Sn){e.onRouteModeTransportChange(Sn)}),He.appendChild(An);var En=document.createElement("label");En.className="GProuteTransportImg gpf-label fr-label",En.htmlFor=this._addUID("GProuteTransportPedestrian"),En.title="Piéton",En.innerHTML="Piéton",He.appendChild(En)}ke.appendChild(He)}return t.appendChild(ke),t},_createRoutePanelFormModeChoiceComputeElement:function(){var Te=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var t=document.createElement("label");t.className="GProuteComputationLabel gpf-label fr-label",t.innerHTML="Mode de calcul",e.appendChild(t);var Oe=document.createElement("div");Oe.className="gpf-radio-btn-group";var ke=document.createElement("div");ke.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GProuteComputationFastest"),Be.type="radio",Be.name="GProuteComputation",Be.value="fastest",Be.checked=!0,Be.addEventListener?Be.addEventListener("change",function(An){Te.onRouteModeComputationChange(An)}):Be.attachEvent&&Be.attachEvent("onchange",function(An){Te.onRouteModeComputationChange(An)}),ke.appendChild(Be);var Ue=document.createElement("label");Ue.className="gpf-label fr-label",Ue.htmlFor=this._addUID("GProuteComputationFastest"),Ue.title="Plus rapide",Ue.innerHTML="Plus rapide",ke.appendChild(Ue),Oe.appendChild(ke);var He=document.createElement("div");He.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var We=document.createElement("input");We.id=this._addUID("GProuteComputationShortest"),We.type="radio",We.name="GProuteComputation",We.value="shortest",We.addEventListener?We.addEventListener("change",function(An){Te.onRouteModeComputationChange(An)}):We.attachEvent&&We.attachEvent("onchange",function(An){Te.onRouteModeComputationChange(An)}),He.appendChild(We);var Cn=document.createElement("label");return Cn.className="gpf-label fr-label",Cn.htmlFor=this._addUID("GProuteComputationShortest"),Cn.title="Plus court",Cn.innerHTML="Plus court",He.appendChild(Cn),Oe.appendChild(He),e.appendChild(Oe),e},_createShowRouteExclusionsPictoElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowRouteExclusionsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowRouteExclusionsClick(Oe)}),e},_createRoutePanelFormExclusionsElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GProuteExclusions"),Te.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autorisés",Te.appendChild(e),Te},_createRoutePanelFormExclusionOptionsElement:function(Te){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in Te)if(Te.hasOwnProperty(Oe)){var ke=Te[Oe];switch(Oe){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GProuteExclusionsToll"),Be.type="checkbox",Be.value="Toll",Be.name="Peage",Be.checked=!ke,Be.addEventListener?Be.addEventListener("change",function(En){e.onRouteExclusionsChange(En)}):Be.attachEvent&&Be.attachEvent("onchange",function(En){e.onRouteExclusionsChange(En)}),t.appendChild(Be);var Ue=document.createElement("label");Ue.className="GProuteExclusionsOption",Ue.htmlFor=this._addUID("GProuteExclusionsToll"),Ue.innerHTML="Péages",t.appendChild(Ue);break;case"tunnel":var He=document.createElement("input");He.id=this._addUID("GProuteExclusionsTunnel"),He.type="checkbox",He.value="Tunnel",He.name="Tunnel",He.checked=!ke,He.addEventListener?He.addEventListener("change",function(En){e.onRouteExclusionsChange(En)}):He.attachEvent&&He.attachEvent("onchange",function(En){e.onRouteExclusionsChange(En)}),t.appendChild(He);var We=document.createElement("label");We.className="GProuteExclusionsOption",We.htmlFor=this._addUID("GProuteExclusionsTunnel"),We.innerHTML="Tunnels",t.appendChild(We);break;case"bridge":var Cn=document.createElement("input");Cn.id=this._addUID("GProuteExclusionsBridge"),Cn.type="checkbox",Cn.value="Bridge",Cn.name="Ponts",Cn.checked=!ke,Cn.addEventListener?Cn.addEventListener("change",function(En){e.onRouteExclusionsChange(En)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(En){e.onRouteExclusionsChange(En)}),t.appendChild(Cn);var An=document.createElement("label");An.className="GProuteExclusionsOption",An.htmlFor=this._addUID("GProuteExclusionsBridge"),An.innerHTML="Ponts",t.appendChild(An);break}}return t},_createRouteSubmitFormElement:function(){var Te=document.createElement("input");return Te.id=this._addUID("GProuteSubmit"),Te.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",Te.type="submit",Te.value="Calculer l'itinéraire",Te},_createRouteFormResetElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Te.onRouteResetClick(t)}),e}},logger$o=LoggerByDefault.getLogger("route"),Route=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$o.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$o.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$o.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let Oe=0;Oe<this._currentPoints.length;Oe++){const ke=this._currentPoints[Oe];e.push(ke.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<e.points.length;t++){const He=e.points[t];He&&this._currentPoints[t].setCoordinate(He,"EPSG:4326")}for(var Oe=0;Oe<this._currentPoints.length;Oe++){var ke=this._currentPoints[Oe];if(ke.getCoordinate()){var Be=Oe+1+"-"+this._uid,Ue=ke.getCoordinate()[1].toFixed(4)+" / "+ke.getCoordinate()[0].toFixed(4);document.getElementById("GPlocationOriginCoords_"+Be).value=Ue,document.getElementById("GPlocationOrigin_"+Be).value=Ue,Oe>0&&Oe<6&&(document.getElementById("GPlocationPoint_"+Be).className="GPflexInput GPelementHidden gpf-flex gpf-hidden ")}}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let Tn=0;Tn<this._currentPoints.length;Tn++){const Ln=this._currentPoints[Tn];var e=Tn+1,t=Ln.getCoordinate();if(t){var Oe=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);Oe.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),Tn>0&&Tn<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var ke=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(ke);var Be;this._currentTransport==="Pieton"?(Be=document.getElementById("GProuteTransportPedestrian-"+this._uid),Be&&(Be.checked="true")):(Be=document.getElementById("GProuteTransportCar-"+this._uid),Be&&(Be.checked="true"));var Ue=document.getElementById("GProuteComputationSelect-"+this._uid);Ue&&(Ue.value=this._currentComputation);var He=document.getElementById("GProuteExclusionsToll-"+this._uid);He&&(this._currentExclusions.indexOf("toll")!==-1?He.checked=!1:He.checked=!0);var We=document.getElementById("GProuteExclusionsTunnel-"+this._uid);We&&(this._currentExclusions.indexOf("tunnel")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GProuteExclusionsBridge-"+this._uid);Cn&&(this._currentExclusions.indexOf("bridge")!==-1?Cn.checked=!1:Cn.checked=!0);var An=this._currentRouteInformations.totalDistance,En=this._currentRouteInformations.totalTime,Sn=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);Sn&&this._fillRouteResultsDetailsContainer(An,En,Sn),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var t={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(logger$o.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else logger$o.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var Oe=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(Oe);var ke=this._panelRouteContainer=this._createRoutePanelElement(),Be=this._createRoutePanelDivElement();ke.appendChild(Be);var Ue=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Be.appendChild(Ue);var He=this._formRouteContainer=this._createRoutePanelFormElement();He.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var We=this._createRoutePanelFormPointsElement(e),Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn]);He.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),He.appendChild(this._showRouteExclusionsElement);var An=this._createRoutePanelFormExclusionsElement();An.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),He.appendChild(An);var En=this._createRoutePanelFooterElement();if(He.appendChild(En),!checkDsfr()){var Sn=this._createRouteFormResetElement();En.appendChild(Sn)}var Tn=this._createRouteSubmitFormElement();En.appendChild(Tn),Be.appendChild(He);var Ln=this._resultsRouteContainer=this._createRoutePanelResultsElement();Be.appendChild(Ln);var Bn=this._createDrawingButtonsPluginDiv();Be.appendChild(Bn);var ti=this._waitingContainer=this._createRouteWaitingElement();return Be.appendChild(ti),t.appendChild(ke),t.addEventListener&&t.addEventListener("click",ni=>this._hideRouteSuggestedLocations(ni)),t}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var Oe=this.options.routeOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(Oe),t}_createRoutePanelFormPointsElement(e){var t=[],Oe=1,ke=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(ke.setMap(e),this._addFormPointsEventListeners(ke),t.push(this._createRoutePanelFormPointLabel("Départ")),t.push(ke._container),this._currentPoints.push(ke),Oe=2;Oe<7;Oe++){var Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Be.setMap(e),this._addFormPointsEventListeners(Be),t.push(this._createRoutePanelFormPointLabel("Étape",!1)),t.push(Be._container),this._currentPoints.push(Be)}var Ue=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return Ue.setMap(e),this._addFormPointsEventListeners(Ue),t.push(this._createRoutePanelFormPointLabel("Arrivée")),t.push(Ue._container),this._currentPoints.push(Ue),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{logger$o.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{logger$o.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){logger$o.log("onRouteComputationSubmit",e);var t=this._currentPoints,Oe;if(t[0]&&t[0].getCoordinate){var ke=t[0].getCoordinate();Oe={x:ke[0],y:ke[1]},logger$o.log("start",Oe)}var Be,Ue=t[t.length-1];if(Ue&&Ue.getCoordinate){var He=Ue.getCoordinate();Be={x:He[0],y:He[1]},logger$o.log("end",Be)}for(var We=[],Cn=1;Cn<t.length-1;Cn++)if(t[Cn]&&t[Cn].getCoordinate){var An=t[Cn].getCoordinate();if(An){var En={x:An[0],y:An[1]};logger$o.log("step",En),We.push(En)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var Sn=this.options.routeOptions,Tn;Sn.resource?Tn=Sn.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(Tn="bdtopo-valhalla");var Ln=Sn.protocol||"XHR",Bn=Sn.timeOut||0;Ln==="JSONP"&&Bn===0&&(Bn=15e3);var ti=Sn.onFailure!==null&&typeof Sn.onFailure=="function",ni=Sn.onSuccess!==null&&typeof Sn.onSuccess=="function",ii=this;this._requestRouting({startPoint:Oe,endPoint:Be,viaPoints:We,graph:Sn.graph||this._currentTransport,routePreference:Sn.routePreference||this._currentComputation,exclusions:Sn.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:Bn,protocol:Ln,resource:Tn,onSuccess:function(si){logger$o.log(si),si&&ii._fillRouteResultsDetails(si),ni&&Sn.onSuccess.call(ii,si)},onFailure:function(si){ii._hideWaitingContainer(),ii._clearRouteResultsDetails(),logger$o.log(si.message),ti&&Sn.onFailure.call(ii,si)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var Oe=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=Oe.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){var t=this._showRouteButton.ariaPressed;t==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),!this._geojsonSections&&!this._waiting&&this._clear(),this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var t=e.target.value;t&&(logger$o.log(t),this._currentComputation=t)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){logger$o.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,Oe=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var ke=!1,Be=null,Ue=0;Ue<this._currentExclusions.length;Ue++)this._currentExclusions[Ue]===t&&(Be=Ue,ke=!0);!ke&&!Oe&&this._currentExclusions.push(t),ke&&Oe&&this._currentExclusions.splice(Be,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.dispatchEvent("route:newresults")}onRouteResultsDetailsMouseOver(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var ke=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));ke.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var ke=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));ke.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$o.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,Oe=e.totalTime,ke=this._simplifiedInstructions(e.routeInstructions);ke&&this._fillRouteResultsDetailsContainer(t,Oe,ke);var Be=e.routeGeometry;Be&&this._fillRouteResultsDetailsGeometry(Be,this._defaultFeatureStyle),ke&&ke[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(ke,this._defaultFeatureStyle);var Ue=e.bbox;if(Ue){var He=this.getMap(),We=[Ue.left,Ue.bottom,Ue.right,Ue.top],Cn=He.getView().getProjection().getCode();Cn!=="EPSG:4326"&&(We=transformExtent(We,"EPSG:4326",Cn)),He.getView().fit(We,He.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,Oe){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(Oe,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var Oe=this.getMap();if(e){var ke={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Be=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),Ue=Be.readFeatures(ke,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:Ue}),style:t,title:"Mon Itinéraire"}),Oe.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var Oe=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var ke=0;ke<e.length;ke++){for(var Be=e[ke],Ue=ke+1,He=Be.geometry.coordinates,We=0;We<He.length;We++)typeof He[We][0]=="string"&&(He[We][0]=parseFloat(He[We][0]),He[We][1]=parseFloat(He[We][1]));this._geojsonObject.features.push({type:"Feature",geometry:Be.geometry,properties:{popupContent:"("+Ue+") distance : "+this._convertDistance(Be.distance)+" / temps : "+this._convertSecondsToTime(Be.duration)},id:Ue})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var Cn=1;Cn<this._currentPoints.length-1;Cn++)if(this._currentPoints[Cn]&&this._currentPoints[Cn].getCoordinate){var An=this._currentPoints[Cn].getCoordinate();An&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:An},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var En=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),Sn=this.getMap().getView().getProjection().getCode(),Tn=En.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Sn});this._geojsonSections=new VectorLayer({source:new VectorSource({features:Tn}),style:t,opacity:.9,title:"Mon Itinéraire"});var Ln;this._currentTransport==="Pieton"?(Ln="piéton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(Ln="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),Oe.addLayer(this._geojsonSections),Oe.getControls().forEach(Bn=>{if(Bn instanceof LayerSwitcher){var ti=this._geojsonSections.gpLayerId;Bn._layers[ti].title===ti&&Bn.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+Ln+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",Bn=>this._onResultsFeatureMouseOver(Bn)),Oe.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",Bn=>this._onResultsFeatureSelect(Bn)),Oe.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],Oe=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var ke=e.deselected[0],Be=document.getElementById("GProuteResultsDetailsInstruction_"+ke.getId()+"-"+this._uid);Be&&Be.classList&&Be.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var Oe=document.getElementById("GProuteExclusionsToll-"+this._uid);Oe&&(this._currentExclusions.indexOf("toll")!==-1?Oe.checked=!1:Oe.checked=!0);var ke=document.getElementById("GProuteExclusionsTunnel-"+this._uid);ke&&(this._currentExclusions.indexOf("tunnel")!==-1?ke.checked=!1:ke.checked=!0);var Be=document.getElementById("GProuteExclusionsBridge-"+this._uid);Be&&(this._currentExclusions.indexOf("bridge")!==-1?Be.checked=!1:Be.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],Oe=0;Oe<e.length;Oe++)e[Oe].id.indexOf(this._uid)!==-1&&t.push(e[Oe]);for(var ke=1;ke<t.length-1;ke++){var Be=t[ke].classList;if(Be.length!==0)for(var Ue=0;Ue<Be.length;Ue++)Be[Ue]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(ke+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,Oe=0;Oe<this._currentPoints.length;Oe++)Oe!==parseInt(t,10)&&this._currentPoints[Oe]._hideSuggestedLocation();else for(var ke=0;ke<this._currentPoints.length;ke++)this._currentPoints[ke]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],Oe=e[0];e.length===1&&t.push(Oe);for(var ke=1;ke<e.length;ke++){var Be=e[ke];if(Be.instruction===Oe.instruction){Oe.distance=(parseFloat(Be.distance)+parseFloat(Oe.distance)).toString(),Oe.duration=(parseFloat(Be.duration)+parseFloat(Oe.duration)).toString();for(var Ue=1;Ue<Be.geometry.coordinates.length;Ue++)Oe.geometry.coordinates.push(Be.geometry.coordinates[Ue])}else t.push(Oe),Oe=Be,ke===e.length-1&&(t.push(Be),Oe=null)}return logger$o.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var Oe=Math.floor(e/(60*60)),ke=e%(60*60),Be=Math.floor(ke/60);return Oe&&(t=Oe+"h "),t+=Be+" min",t}_convertDistance(e){var t="",Oe=parseInt(e/1e3,10);return Oe?t=Oe+" km":t=parseInt(e,10)+" m",t}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPisochron"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowIsoPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowIsoPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowIsoPanelClick(Oe)}),e},_createIsoPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPisochronPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createIsoPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createDrawingButtonsPluginDiv:function(){var Te=document.createElement("div");return Te.className="container-buttons-plugin fr-mx-2w",Te},_createIsoPanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPisochronPanelClose"),Oe.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowIsochronPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowIsochronPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createIsoPanelFormElement:function(){var Te=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Te.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPisochronCalcWaitingContainer"),Te.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createIsoPanelFooterElement:function(){var Te=document.createElement("div");return Te.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Te},_createIsoPanelFormPointLabel:function(){var Te=document.createElement("p");return Te.id=this._addUID("GPisochronPointLabelP"),Te.className="gpf-label fr-label",Te.innerHTML="Départ",Te},_createIsoPanelFormTypeChoiceElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPisochronChoice"),Te.className="fr-mt-2w",Te},_createIsoPanelFormTypeChoiceChronElement:function(Te){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltChron"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!Te,Oe.addEventListener?Oe.addEventListener("change",function(Ue){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(Ue)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),Oe.value="isochron",t.appendChild(Oe);var ke=document.createElement("label");ke.className="GPisochronChoiceAltImg gpf-label fr-label",ke.htmlFor=this._addUID("GPisochronChoiceAltChron"),ke.innerHTML="Durée",ke.title="Durée",t.appendChild(ke);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltChronTxt"),Be.className="gpf-hidden",Be.innerHTML="Durée",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(Be),t},_createIsoPanelFormTypeChoiceDistElement:function(Te){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltDist"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!Te,Oe.addEventListener?Oe.addEventListener("change",function(Ue){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(Ue)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),Oe.value="isodistance",t.appendChild(Oe);var ke=document.createElement("label");ke.className="GPisochronChoiceAltImg gpf-label fr-label",ke.htmlFor=this._addUID("GPisochronChoiceAltDist"),ke.innerHTML="Distance",ke.title="Distance",t.appendChild(ke);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltDistTxt"),Be.className="gpf-hidden",Be.innerHTML="Distance",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(Be),t},_createIsoPanelFormLabelIsochronElement:function(Te){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=Te?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=Te?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueChronInput1"),Oe.className="gpf-input fr-input",Oe.min="0",Oe.step="1",Oe.value="0",Oe.type="number",Oe.title="Temps",Oe.addEventListener?Oe.addEventListener("change",function(He){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(He)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(He){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(He)}),t.appendChild(Oe);var ke=document.createElement("label");ke.innerHTML="h",ke.className="gpf-label fr-label",t.appendChild(ke);var Be=document.createElement("input");Be.id=this._addUID("GPisochronValueChronInput2"),Be.className="gpf-input fr-input",Be.min="0",Be.max="59",Be.step="1",Be.value="0",Be.type="number",Be.title="Heures",Be.addEventListener?Be.addEventListener("change",function(He){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(He)}):Be.attachEvent&&Be.attachEvent("onchange",function(He){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(He)}),t.appendChild(Be);var Ue=document.createElement("label");return Ue.innerHTML="min",Ue.className="gpf-label fr-label",t.appendChild(Ue),t},_createIsoPanelFormLabelIsodistanceElement:function(Te){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=Te?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=Te?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueDistInput"),Oe.className="gpf-input fr-input fr-ml-1w",Oe.min="0",Oe.step="any",Oe.value="0",Oe.type="number",Oe.title="Distance",Oe.addEventListener?Oe.addEventListener("change",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}),t.appendChild(Oe);var ke=document.createElement("label");return ke.innerHTML="km",ke.className="gpf-label fr-label",t.appendChild(ke),t},_createIsoPanelFormModeChoiceTransportElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var Oe=document.createElement("label");Oe.className="GPisochronModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de déplacement",t.appendChild(Oe);for(var ke=document.createElement("div"),Be=0;Be<Te.length;Be++){var Ue=Te[Be],He=document.createElement("div");if(He.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",Ue==="Voiture"){var We=document.createElement("input");We.id=this._addUID("GPisochronTransportCar"),We.type="radio",We.name="GPisochronTransport",Be===0&&(We.checked=!0),We.addEventListener?We.addEventListener("change",function(Sn){e.onIsoModeTransportChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onIsoModeTransportChange(Sn)}),We.value="Voiture",He.appendChild(We);var Cn=document.createElement("label");Cn.className="GPisochronTransportImg gpf-label fr-label",Cn.htmlFor=this._addUID("GPisochronTransportCar"),Cn.title="Voiture",Cn.innerHTML="Voiture",He.appendChild(Cn)}if(Ue==="Pieton"){var An=document.createElement("input");An.id=this._addUID("GPisochronTransportPedestrian"),An.type="radio",An.name="GPisochronTransport",Be===0&&(An.checked=!0),An.addEventListener?An.addEventListener("change",function(Sn){e.onIsoModeTransportChange(Sn)}):An.attachEvent&&An.attachEvent("onchange",function(Sn){e.onIsoModeTransportChange(Sn)}),An.value="Pieton",He.appendChild(An);var En=document.createElement("label");En.className="GPisochronTransportImg gpf-label fr-label",En.htmlFor=this._addUID("GPisochronTransportPedestrian"),En.title="Piéton",En.innerHTML="Piéton",He.appendChild(En)}ke.appendChild(He)}return t.appendChild(ke),t},_createIsoPanelFormModeChoiceDirectionElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice"),t.className="fr-my-2w";var Oe=document.createElement("label");Oe.innerHTML="Définir un sens de parcours",Oe.className="fr-label",t.appendChild(Oe);var ke=document.createElement("select");ke.id=this._addUID("GPisochronDirectionSelect"),ke.className="GPselect gpf-select fr-select",ke.title="Sens de parcours",ke.addEventListener("change",function(Cn){e.onIsoModeDirectionChange(Cn)});for(var Be=0;Be<Te.length;Be++){var Ue=Te[Be];if(Ue.toLowerCase()==="departure"){var He=document.createElement("option");Be===0&&(He.selected="selected"),He.value="departure",He.text="Départ",ke.appendChild(He)}if(Ue.toLowerCase()==="arrival"){var We=document.createElement("option");Be===0&&(We.selected="selected"),We.value="arrival",We.text="Arrivée",ke.appendChild(We)}}return t.appendChild(ke),t},_createShowIsoExclusionsPictoElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowIsoSettingsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowIsoSettingsClick(Oe)}),e},_createIsoPanelFormExclusionsElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",Te.appendChild(e),Te},_createIsoPanelFormExclusionOptionsElement:function(Te){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in Te)if(Te.hasOwnProperty(Oe)){var ke=Te[Oe];switch(Oe){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GPisoExclusionsToll"),Be.type="checkbox",Be.name="Péages",Be.checked=!ke,Be.addEventListener?Be.addEventListener("change",function(En){e.onIsoExclusionsChange(En)}):Be.attachEvent&&Be.attachEvent("onchange",function(En){e.onIsoExclusionsChange(En)}),Be.value="Toll",t.appendChild(Be);var Ue=document.createElement("label");Ue.className="GPisoExclusionsOption",Ue.htmlFor=this._addUID("GPisoExclusionsToll"),Ue.innerHTML="Péages",t.appendChild(Ue);break;case"tunnel":var He=document.createElement("input");He.id=this._addUID("GPisoExclusionsTunnel"),He.type="checkbox",He.name="Tunnel",He.checked=!ke,He.addEventListener?He.addEventListener("change",function(En){e.onIsoExclusionsChange(En)}):He.attachEvent&&He.attachEvent("onchange",function(En){e.onIsoExclusionsChange(En)}),He.value="Tunnel",t.appendChild(He);var We=document.createElement("label");We.className="GPisoExclusionsOption",We.htmlFor=this._addUID("GPisoExclusionsTunnel"),We.innerHTML="Tunnels",t.appendChild(We);break;case"bridge":var Cn=document.createElement("input");Cn.id=this._addUID("GPisoExclusionsBridge"),Cn.type="checkbox",Cn.name="Ponts",Cn.checked=!ke,Cn.addEventListener?Cn.addEventListener("change",function(En){e.onIsoExclusionsChange(En)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(En){e.onIsoExclusionsChange(En)}),Cn.value="Bridge",t.appendChild(Cn);var An=document.createElement("label");An.className="GPisoExclusionsOption",An.htmlFor=this._addUID("GPisoExclusionsBridge"),An.innerHTML="Ponts",t.appendChild(An);break}}return t},_createIsoSubmitFormElement:function(){var Te=document.createElement("input");return Te.id=this._addUID("GPisochronSubmit"),Te.className="GPsubmit gpf-btn fr-btn",Te.type="submit",Te.value="Calculer l'isochrone",Te},_createIsoFormResetElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Te.onIsoResetClick(t)}),e}},logger$n=LoggerByDefault.getLogger("isocurve"),Isocurve=class Zf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$n.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var Oe=document.getElementById("GPlocationOrigin_1-"+this._uid),ke=document.getElementById("GPlocationOriginCoords_1-"+this._uid);ke.value=e.point,Oe.value=e.point[1].toFixed(4)+" / "+e.point[0].toFixed(4),this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,Oe){this._clear();var ke=this._pictoIsoButton.ariaPressed;ke!=="true"&&this._pictoIsoButton.click();var Be=this.getMap();if(Be){var Ue={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(Ue,Oe),this._originPoint.setCoordinate(e);var He=this._originPoint.getCoordinate(),We=document.getElementById("GPlocationOrigin_1-"+this._uid);if(We.value=He[0].toFixed(4)+" / "+He[1].toFixed(4),this._currentTransport=Ue.transport,Ue.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=Ue.exclusions,this._currentComputation=Ue.method,Ue.method==="time"){var Cn=t.split(".");this._currentTimeHour=Cn[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Cn[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=Ue.direction,Ue.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var Oe=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(Oe/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((Oe/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$n.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?logger$n.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$n.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piéton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var Oe=this.options.isocurveOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var Oe=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(Oe);var ke=this._IsoPanelContainer=this._createIsoPanelElement(),Be=this._createIsoPanelDivElement();ke.appendChild(Be);var Ue=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Be.appendChild(Ue);var He=this._formContainer=this._createIsoPanelFormElement();He.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),He.appendChild(this._createIsoPanelFormPointLabel());var We=this._createIsoPanelFormPointElement(e);He.appendChild(We);for(var Cn=!1,An=!1,En=this._createIsoPanelFormTypeChoiceElement(),Sn=0;Sn<this.options.methods.length;Sn++)this.options.methods[Sn]==="time"&&(Cn=Sn===0,En.appendChild(this._createIsoPanelFormTypeChoiceChronElement(Cn))),this.options.methods[Sn]==="distance"&&(An=Sn===0,En.appendChild(this._createIsoPanelFormTypeChoiceDistElement(An)));if(He.appendChild(En),He.appendChild(this._createIsoPanelFormLabelIsochronElement(Cn)),He.appendChild(this._createIsoPanelFormValueIsochronElement(Cn)),He.appendChild(this._createIsoPanelFormLabelIsodistanceElement(An)),He.appendChild(this._createIsoPanelFormValueIsodistanceElement(An)),He.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){He.appendChild(this._createShowIsoExclusionsPictoElement());var Tn=this._createIsoPanelFormExclusionsElement();Tn.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),He.appendChild(Tn)}var Ln=this._createIsoPanelFooterElement();if(He.appendChild(Ln),!checkDsfr()){var Bn=this._createIsoFormResetElement();Ln.appendChild(Bn)}var ti=this._submitContainer=this._createIsoSubmitFormElement();Ln.appendChild(ti),Be.appendChild(He);var ni=this._createDrawingButtonsPluginDiv();Be.appendChild(ni);var ii=this._waitingContainer=this._createIsoWaitingElement();return ke.appendChild(ii),t.appendChild(ke),t.addEventListener&&t.addEventListener("click",si=>this._hideIsoSuggestedLocations(si)),t}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var Oe=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=Oe.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$n.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};logger$n.log("origin : ",t);var Oe,ke;if(this._currentComputation.toLowerCase()==="time"){var Be=document.getElementById("GPisochronValueChronInput1-"+this._uid),Ue=parseInt(Be.value,10);isNaN&&isNaN(Ue)&&(Ue=0);var He=document.getElementById("GPisochronValueChronInput2-"+this._uid),We=parseInt(He.value,10);isNaN&&isNaN(We)&&(We=0),Oe=Ue*3600+We*60,logger$n.log("time : "+Oe)}if(this._currentComputation.toLowerCase()==="distance"){var Cn=document.getElementById("GPisochronValueDistInput-"+this._uid);ke=parseFloat(Cn.value)*1e3,logger$n.log("distance : "+ke)}if(!Oe&&!ke){logger$n.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var An=this.options.isocurveOptions||{},En=An.protocol||"XHR",Sn=An.timeOut||0;En==="JSONP"&&Sn===0&&(Sn=15e3);var Tn=An.onFailure!==null&&typeof An.onFailure=="function",Ln=An.onSuccess!==null&&typeof An.onSuccess=="function",Bn=this,ti={position:t,graph:An.graph||this._currentTransport,exclusions:An.exclusions||this._currentExclusions,method:An.method||this._currentComputation,smoothing:An.smoothing||!0,timeOut:Sn,protocol:En,resource:An.resource,onSuccess:function(ni){logger$n.log(ni),ni&&Bn._drawIsoResults(ni),Ln&&An.onSuccess.call(Bn,ni)},onFailure:function(ni){Bn._hideWaitingContainer(),logger$n.log(ni.message),Tn&&An.onFailure.call(Bn,ni)}};(this._currentDirection.toLowerCase()==="arrival"||An.reverse)&&(ti.reverse=!0),Oe&&(ti.time=Oe),ke&&(ti.distance=ke),this._requestIsoCurve(ti)}onShowIsoPanelClick(e){var t=this._pictoIsoButton.ariaPressed;t==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,Oe=e.target.checked;if(t){for(var ke=!1,Be=null,Ue=0;Ue<this._currentExclusions.length;Ue++)deepEqual(this._currentExclusions[Ue],t.toLowerCase())&&(Be=Ue,ke=!0);!ke&&!Oe&&this._currentExclusions.push(t.toLowerCase()),ke&&Oe&&(this._currentExclusions[Be]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var Oe=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),ke=t.getView().getProjection().getCode(),Be=Oe.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:ke}),We=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Be}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+We});var Ue;if(this._currentTransport==="Pieton"?(Ue="piéton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(Ue="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Be[0]&&Be[0].getGeometry()&&Be[0].getGeometry().getExtent()){var He=Be[0].getGeometry().getExtent();t.getView().fit(He,t.getSize())}var We=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(Cn=>{if(Cn instanceof LayerSwitcher){var An=this._geojsonLayer.gpLayerId;Cn._layers[An].title===An&&Cn.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+We+"/"+Ue+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var Oe=document.getElementById("GPisochronValueDistInput-"+this._uid);Oe&&(Oe.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var ke;this._currentTransport==="Pieton"?(ke=document.getElementById("GPisochronTransportPedestrian-"+this._uid),ke&&(ke.checked="true")):(ke=document.getElementById("GPisochronTransportCar-"+this._uid),ke&&(ke.checked="true"));var Be;this._currentComputation.toLowerCase()==="distance"?(Be=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Be=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var Ue=document.getElementById("GPisochronDirectionSelect-"+this._uid);Ue&&(Ue.value=this._currentDirection),Ue.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var He=document.getElementById("GPisoExclusionsToll-"+this._uid);He&&(this._currentExclusions.indexOf("toll")!==-1?He.checked=!1:He.checked=!0);var We=document.getElementById("GPisoExclusionsTunnel-"+this._uid);We&&(this._currentExclusions.indexOf("tunnel")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GPisoExclusionsBridge-"+this._uid);Cn&&(this._currentExclusions.indexOf("bridge")!==-1?Cn.checked=!1:Cn.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(Te,e){if(Te===e)return!0;if(typeof Te=="object"&&Te!=null&&typeof e=="object"&&e!=null){if(Object.keys(Te).length!==Object.keys(e).length)return!1;for(var t in Te)if(e.hasOwnProperty(t)){if(!deepEqual(Te[t],e[t]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPreverseGeocoding"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowReverseGeocodingPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowReverseGeocodingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowReverseGeocodingClick(Oe)}),e},_createReverseGeocodingWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),Te.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createReverseGeocodingResultsPanelElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPreverseGeocodingResultsPanel"),Te.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",Te},_createReverseGeocodingResultsListElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPreverseGeocodingResultsList"),Te.className="gpf-panel__list",Te.setAttribute("tabindex","0"),Te},_createReverseGeocodingResultElement:function(Te,e){var t=this,Oe=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),ke=document.createElement("div");ke.id=this._addUID("GPreverseGeocodedLocation_"+e),ke.setAttribute("tabindex","0"),ke.className="GPautoCompleteProposal gpf-panel__items",ke.innerHTML=Te,ke.title=Te,ke.addEventListener?(ke.addEventListener("mouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.addEventListener("focus",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.addEventListener("mouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.addEventListener("blur",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.addEventListener("click",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})):ke.attachEvent&&(ke.attachEvent("onmouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.attachEvent("onmouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.attachEvent("onclick",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})),Oe.appendChild(ke)},_createReverseGeocodingPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPreverseGeocodingPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createReverseGeocodingPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createReverseGeocodingPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader gpf-panel__header fr-modal__header",Te},_createReverseGeocodingPanelReturnPictoElement:function(){var Te=this,e=document.createElement("button");if(e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPimportPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline fr-m-1w",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden gpf-visible",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(Te._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Te._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Te._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Te._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Te._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Te.onGPreverseGeocodingReturnPictoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(Te._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Te._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Te._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Te._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Te._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Te.onGPreverseGeocodingReturnPictoClick(Oe)}),e},_createReverseGeocodingPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.id=this._addUID("GPreverseGeocodingHeaderTitle"),Te.innerHTML="Recherche inverse",Te},_createReverseGeocodingPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(Te._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(Te._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var Te=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Te.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Te.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(Te){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var Oe=document.createElement("label");Oe.id="label-recherche-par",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Recherche par",Oe.title="Recherche par",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby","label-recherche-par"),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(Cn){e.onReverseGeocodingTypeChange(Cn)}):ke.attachEvent&&ke.attachEvent("onchange",function(Cn){e.onReverseGeocodingTypeChange(Cn)}),(!Te||!Array.isArray(Te))&&(Te=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Be=0;Be<Te.length;Be++)switch(Te[Be]){case"PositionOfInterest":var Ue=document.createElement("option");Ue.value="PositionOfInterest",Ue.text="Lieux/toponymes",ke.appendChild(Ue);break;case"StreetAddress":var He=document.createElement("option");He.value="StreetAddress",He.text="Adresses",ke.appendChild(He);break;case"CadastralParcel":var We=document.createElement("option");We.value="CadastralParcel",We.text="Parcelles cadastrales",ke.appendChild(We);break}return t.appendChild(ke),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(Te){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var Oe=document.createElement("label");Oe.id="label-delimitation",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Délimitation",Oe.title="Délimitation",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby","label-delimitation"),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(Cn){e.onReverseGeocodingDelimitationChange(Cn)}):ke.attachEvent&&ke.attachEvent("onchange",function(Cn){e.onReverseGeocodingDelimitationChange(Cn)}),(!Te||!Array.isArray(Te))&&(Te=["Point","Circle","Extent"]);for(var Be=0;Be<Te.length;Be++)switch(Te[Be].toLowerCase()){case"point":var Ue=document.createElement("option");Ue.value="point",Ue.text="Pointer un lieu",ke.appendChild(Ue);break;case"circle":var He=document.createElement("option");He.value="circle",He.text="Dessiner un cercle",ke.appendChild(He);break;case"extent":var We=document.createElement("option");We.value="extent",We.text="Dessiner une emprise",ke.appendChild(We);break}return t.appendChild(ke),t},_createReverseGeocodingSubmitFormElement:function(){var Te=document.createElement("input");return Te.id=this._addUID("GPreverseGeocodingSubmit"),Te.className="GPsubmit gpf-btn fr-btn",Te.type="submit",Te.value="Rechercher",Te}},logger$m=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,Oe;if(e.resources){var ke=e.resources;if(Array.isArray(ke)){var Be=["StreetAddress","PositionOfInterest","CadastralParcel"],Ue=[];for(t=0;t<ke.length;t++)Be.indexOf(ke[t])===-1&&(Ue.push(t),logger$m.log("[ReverseGeocode] options.resources : "+ke[t]+" is not a resource for reverse geocode"));if(Ue.length!==0)for(Oe=0;Oe<Ue.length;Oe++)ke.splice(Ue[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.resources' parameter should be an array"),ke=null}if(e.delimitations){var He=e.delimitations;if(Array.isArray(He)){var We=["Circle","Point","Extent"],Cn=[];for(t=0;t<He.length;t++)We.indexOf(He[t])===-1&&(Cn.push(t),logger$m.log("[ReverseGeocode] options.delimitations : "+He[t]+" is not a delimitation for reverse geocode"));if(Cn.length!==0)for(Oe=0;Oe<Cn.length;Oe++)He.splice(Cn[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),He=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(Oe),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var Oe=this._panelContainer=this._createReverseGeocodingPanelElement(),ke=this._createReverseGeocodingPanelDivElement();Oe.appendChild(ke);var Be=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),Ue=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Be.appendChild(Ue);var He=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Be.appendChild(He);var We=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Be.appendChild(We),ke.appendChild(Be);var Cn=this._formContainer=this._createReverseGeocodingPanelFormElement();Cn.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),Cn.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var An=this._createReverseGeocodingSubmitFormElement();Cn.appendChild(An),ke.appendChild(Cn);var En=this._waitingContainer=this._createReverseGeocodingWaitingElement();ke.appendChild(En);var Sn=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),Tn=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return Sn.appendChild(Tn),ke.appendChild(Sn),e.appendChild(Oe),logger$m.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(Oe=>{if(Oe instanceof LayerSwitcher){var ke=this._inputFeaturesLayer.gpLayerId;Oe._layers[ke].title===ke&&(Oe.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),Oe.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource,geometryFunction:function(t,Oe){const ke=t[0],Be=t[t.length-1],Ue=ke[0]-Be[0],He=ke[1]-Be[1],Cn=Math.min(Math.sqrt(Ue*Ue+He*He),500);return Oe?Oe.setCenterAndRadius(ke,Cn):Oe=new ol.geom.Circle(ke,Cn),Oe}}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry){var Oe=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=Oe,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$m.log("circle radius : ",Oe)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(Oe,ke){ke||(ke=new Polygon([]));var Be=Oe[0],Ue=Oe[1];const He=Be[0]-Ue[0],We=Be[1]-Ue[1],Cn=1e3,An=Math.max(-1e3,Math.min(He,Cn)),En=Math.max(-1e3,Math.min(We,Cn));return ke.setCoordinates([[Be,[Be[0],Be[1]-En],[Be[0]-An,Be[1]-En],[Be[0]-An,Be[1]],Be]]),ke};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",Oe=>{logger$m.log("on drawstart",Oe),this._inputFeatures.clear(),this._onDrawStart(Oe,"polygon")}),this._mapInteraction.on("drawend",Oe=>{logger$m.log("on drawend",Oe),this._onBoxDrawEnd(Oe)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var Oe;if(e.feature&&e.feature.getGeometry){var ke=e.feature.getGeometry();t==="point"&&(Oe=ke.getCoordinates()),t==="circle"&&(Oe=ke.getCenter()),t==="polygon"&&(Oe=ke.getFirstCoordinate())}if(Oe){var Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var Ue=this.getMap();if(!Ue||!Ue.getView())return;Be=Ue.getView().getProjection()}var He=transform$1(Oe,Be,"EPSG:4326");this._requestPosition={lon:He[0],lat:He[1]},logger$m.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],Oe=t[0],ke=t[2],Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var Ue=this.getMap();if(!Ue||!Ue.getView())return;Be=Ue.getView().getProjection()}var He=transform$1(Oe,Be,"EPSG:4326"),We=transform$1(ke,Be,"EPSG:4326"),Cn={};He[0]<We[0]?(Cn.left=He[0],Cn.right=We[0]):(Cn.left=We[0],Cn.right=He[0]),He[1]<We[1]?(Cn.bottom=He[1],Cn.top=We[1]):(Cn.bottom=We[1],Cn.top=He[1]),this._requestGeom={type:"Polygon",coordinates:[[[Cn.left,Cn.top],[Cn.left,Cn.bottom],[Cn.right,Cn.bottom],[Cn.right,Cn.top],[Cn.left,Cn.top]]]},logger$m.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var Oe=t.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,Oe=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var ke=t.onFailure!==null&&typeof t.onFailure=="function",Be=t.onSuccess!==null&&typeof t.onSuccess=="function",Ue={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(He){He.locations&&(logger$m.log("reverseGeocode results : ",He.locations),Oe._displayGeocodedLocations(He.locations)),Be&&t.onSuccess.call(Oe,He.locations)},onFailure:function(He){Oe._hideWaitingContainer(),Oe._clearResults(),Oe._clearInputFeatures(),Oe._activateMapInteraction(e),logger$m.log(He.message),ke&&t.onFailure.call(Oe,He)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$m.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),Ue.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?Ue.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(Ue.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},Ue.maximumResponses=1):Ue.searchGeometry=this._requestGeom),logger$m.log("reverseGeocode request options : ",Ue),Ue}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var Oe=e[t];logger$m.log(Oe);var ke=this._fillGeocodedLocationDescription(Oe);ke&&ke.length!==0&&this._createReverseGeocodingResultElement(ke,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,Oe="";switch(e.type){case"StreetAddress":t.street&&(Oe+=t.housenumber?t.housenumber+" ":"",Oe+=t.street+", "),Oe+=t.postcode+" "+t.city;break;case"PositionOfInterest":Oe+=t.toponym,t.postcode&&t.postcode.length===1&&(Oe+=", "+t.postcode[0]),Oe+=" ("+t.category.join(",")+")";break;case"CadastralParcel":Oe+=t.id,Oe+=t.city?" ("+t.city+")":"";break;default:Oe+=t.city?t.city:"";break}return Oe}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var Oe=0;Oe<e.length;Oe++)this._addResultFeature(e[Oe],Oe);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var ke=this._resultsFeaturesSource.getExtent();t.getView().fit(ke,t.getSize())}}else{var Be=this._resultsFeatures.item(0),Ue=Be.getGeometry().getCoordinates();t.getView().setCenter(Ue),t.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",We=>this._onResultsFeatureMouseOver(We)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",We=>this._onResultsFeatureSelect(We)),t.addInteraction(this._resultsSelectInteraction);var He="";switch(this._currentGeocodingType){case"StreetAddress":He="adresses";break;case"PositionOfInterest":He="toponymes";break;case"CadastralParcel":He="parcelles cadastrales";break}t.getControls().forEach(We=>{if(We instanceof LayerSwitcher){var Cn=this._resultsFeaturesLayer.gpLayerId;We._layers[Cn].title===Cn&&(We.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+He}),We.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var Oe=this.getMap(),ke=[e.position.lon,e.position.lat];if(ke.length!==0){var Be=Oe.getView(),Ue=Be.getProjection().getCode();Ue!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ue));var He=new Feature({geometry:new Point$1(ke)});He.setStyle(this._resultsDefaultStyle),He.setId(t),He.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(He)}}_fillPopupContent(e){var t="<ul>",Oe=e.placeAttributes;for(var ke in Oe)Oe.hasOwnProperty(ke)&&ke!=="trueGeometry"&&ke!=="extraFields"&&ke!=="houseNumberInfos"&&ke!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+ke.toUpperCase()+" : </span>",t+=Oe[ke],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var Oe=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var ke=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:Oe.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();if(t){Interactions.unset(t);var Oe=this._showReverseGeocodingButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;Oe&&(logger$m.log(Oe),this._currentGeocodingType=Oe)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;if(Oe){logger$m.log(Oe),this._currentGeocodingDelimitation=Oe;var ke=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(ke),this._activateMapInteraction(ke)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$m.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1),ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:ke.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));ke.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));ke.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(Te){return Te.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"];function isV13(Te){return compareVersions(Te[0].version,"1.3")>=0}const PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),COMMON_CAPABILITY_PARSERS={Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)},CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_CAPABILITY_PARSERS,UserDefinedSymbolization:makeObjectPropertySetter(readUserDefinedSymbolization)}),CAPABILITY_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,COMMON_CAPABILITY_PARSERS);class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return t||null}}const COMMON_SERVICE_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString)},SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,COMMON_SERVICE_PARSERS),SERVICE_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_SERVICE_PARSERS,LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),COMMON_LAYER_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),Layer:makeObjectPropertyPusher(readLayer$1)},LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,SRS:makeObjectPropertyPusher(readString),Extent:makeObjectPropertySetter(readExtent),ScaleHint:makeObjectPropertyPusher(readScaleHint),LatLonBoundingBox:makeObjectPropertySetter((Te,e)=>readBoundingBox$1(Te,e,!1)),Layer:makeObjectPropertyPusher(readLayer$1)}),LAYER_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(Te,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,Te,e)}function readUserDefinedSymbolization(Te,e){return{SupportSLD:!!readBooleanString(Te.getAttribute("UserDefinedSymbolization")),UserLayer:!!readBooleanString(Te.getAttribute("UserLayer")),UserStyle:!!readBooleanString(Te.getAttribute("UserStyle")),RemoteWFS:!!readBooleanString(Te.getAttribute("RemoteWFS"))}}function readBoundingBox$1(Te,e,t=!0){const Oe=[readDecimalString(Te.getAttribute("minx")),readDecimalString(Te.getAttribute("miny")),readDecimalString(Te.getAttribute("maxx")),readDecimalString(Te.getAttribute("maxy"))],ke=[readDecimalString(Te.getAttribute("resx")),readDecimalString(Te.getAttribute("resy"))],Be={extent:Oe,res:ke};return t&&(isV13(e)?Be.crs=Te.getAttribute("CRS"):Be.srs=Te.getAttribute("SRS")),Be}function readEXGeographicBoundingBox(Te,e){const t=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,Te,e);if(!t)return;const Oe=t.westBoundLongitude,ke=t.southBoundLatitude,Be=t.eastBoundLongitude,Ue=t.northBoundLatitude;if(!(Oe===void 0||ke===void 0||Be===void 0||Ue===void 0))return[Oe,ke,Be,Ue]}function readCapability(Te,e){return pushParseAndPop({},isV13(e)?CAPABILITY_PARSERS_V13:CAPABILITY_PARSERS,Te,e)}function readService(Te,e){return pushParseAndPop({},isV13(e)?SERVICE_PARSERS_V13:SERVICE_PARSERS,Te,e)}function readContactInformation(Te,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,Te,e)}function readContactPersonPrimary(Te,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,Te,e)}function readContactAddress(Te,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,Te,e)}function readException(Te,e){return pushParseAndPop([],EXCEPTION_PARSERS,Te,e)}function readCapabilityLayer(Te,e){const t=pushParseAndPop({},isV13(e)?LAYER_PARSERS_V13:LAYER_PARSERS$1,Te,e);return t.Layer===void 0?Object.assign(t,readLayer$1(Te,e)):t}function readLayer$1(Te,e){const t=isV13(e),Oe=e[e.length-1],ke=pushParseAndPop({},t?LAYER_PARSERS_V13:LAYER_PARSERS$1,Te,e);if(!ke)return;let Be=readBooleanString(Te.getAttribute("queryable"));Be===void 0&&(Be=Oe.queryable),ke.queryable=Be!==void 0?Be:!1;let Ue=readNonNegativeIntegerString(Te.getAttribute("cascaded"));Ue===void 0&&(Ue=Oe.cascaded),ke.cascaded=Ue;let He=readBooleanString(Te.getAttribute("opaque"));He===void 0&&(He=Oe.opaque),ke.opaque=He!==void 0?He:!1;let We=readBooleanString(Te.getAttribute("noSubsets"));We===void 0&&(We=Oe.noSubsets),ke.noSubsets=We!==void 0?We:!1;let Cn=readDecimalString(Te.getAttribute("fixedWidth"));Cn||(Cn=Oe.fixedWidth),ke.fixedWidth=Cn;let An=readDecimalString(Te.getAttribute("fixedHeight"));An||(An=Oe.fixedHeight),ke.fixedHeight=An;const En=["Style","AuthorityURL"];t?En.push("CRS"):En.push("SRS","Dimension"),En.forEach(function(Tn){if(Tn in Oe){const Ln=ke[Tn]||[];ke[Tn]=Ln.concat(Oe[Tn])}});const Sn=["BoundingBox","Attribution"];return t?Sn.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):Sn.push("LatLonBoundingBox","ScaleHint","Extent"),Sn.forEach(function(Tn){if(!(Tn in ke)){const Ln=Oe[Tn];ke[Tn]=Ln}}),ke}function readDimension(Te,e){const t={name:Te.getAttribute("name"),units:Te.getAttribute("units"),unitSymbol:Te.getAttribute("unitSymbol")};return isV13(e)&&Object.assign(t,{default:Te.getAttribute("default"),multipleValues:readBooleanString(Te.getAttribute("multipleValues")),nearestValue:readBooleanString(Te.getAttribute("nearestValue")),current:readBooleanString(Te.getAttribute("current")),values:readString(Te)}),t}function readExtent(Te,e){return{name:Te.getAttribute("name"),default:Te.getAttribute("default"),nearestValue:readBooleanString(Te.getAttribute("nearestValue"))}}function readScaleHint(Te,e){return{min:readDecimalString(Te.getAttribute("min")),max:readDecimalString(Te.getAttribute("max"))}}function readFormatOnlineresource(Te,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,Te,e)}function readRequest(Te,e){return pushParseAndPop({},REQUEST_PARSERS,Te,e)}function readDCPType(Te,e){return pushParseAndPop({},DCPTYPE_PARSERS,Te,e)}function readHTTP(Te,e){return pushParseAndPop({},HTTP_PARSERS$1,Te,e)}function readOperationType(Te,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,Te,e)}function readSizedFormatOnlineresource(Te,e){const t=readFormatOnlineresource(Te,e);if(t){const Oe=[readNonNegativeIntegerString(Te.getAttribute("width")),readNonNegativeIntegerString(Te.getAttribute("height"))];return t.size=Oe,t}}function readAuthorityURL(Te,e){const t=readFormatOnlineresource(Te,e);if(t)return t.name=Te.getAttribute("name"),t}function readMetadataURL(Te,e){const t=readFormatOnlineresource(Te,e);if(t)return t.type=Te.getAttribute("type"),t}function readStyle$1(Te,e){return pushParseAndPop({},STYLE_PARSERS$1,Te,e)}function readKeywordList(Te,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,Te,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(Te,e){return pushParseAndPop({},ADDRESS_PARSERS,Te,e)}function readAllowedValues(Te,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,Te,e)}function readConstraint(Te,e){const t=Te.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,Te,e)}function readContactInfo(Te,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,Te,e)}function readDcp(Te,e){return pushParseAndPop({},DCP_PARSERS,Te,e)}function readGet(Te,e){const t=readHref(Te);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,Te,e)}function readHttp(Te,e){return pushParseAndPop({},HTTP_PARSERS,Te,e)}function readOperation(Te,e){const t=Te.getAttribute("name"),Oe=pushParseAndPop({},OPERATION_PARSERS,Te,e);if(!Oe)return;const ke=e[e.length-1];ke[t]=Oe}function readOperationsMetadata(Te,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,Te,e)}function readPhone(Te,e){return pushParseAndPop({},PHONE_PARSERS,Te,e)}function readServiceIdentification(Te,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,Te,e)}function readServiceContact(Te,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,Te,e)}function readServiceProvider(Te,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,Te,e)}function readValue(Te,e){return readString(Te)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let Oe=this.owsParser_.readFromNode(e);return Oe?(Oe.version=t,Oe=pushParseAndPop(Oe,PARSERS,e,[]),Oe||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(Te,e){return pushParseAndPop({},CONTENTS_PARSERS,Te,e)}function readLayer(Te,e){return pushParseAndPop({},LAYER_PARSERS,Te,e)}function readTileMatrixSet(Te,e){return pushParseAndPop({},TMS_PARSERS,Te,e)}function readStyle(Te,e){const t=pushParseAndPop({},STYLE_PARSERS,Te,e);if(!t)return;const Oe=Te.getAttribute("isDefault")==="true";return t.isDefault=Oe,t}function readTileMatrixSetLink(Te,e){return pushParseAndPop({},TMS_LINKS_PARSERS,Te,e)}function readDimensions(Te,e){return pushParseAndPop({},DIMENSION_PARSERS,Te,e)}function readResourceUrl(Te,e){const t=Te.getAttribute("format"),Oe=Te.getAttribute("template"),ke=Te.getAttribute("resourceType"),Be={};return t&&(Be.format=t),Oe&&(Be.template=Oe),ke&&(Be.resourceType=ke),Be}function readBoundingBox(Te,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,Te,e);if(t.length==2)return boundingExtent(t)}function readBoundingBoxWithCrs(Te,e){const t=Te.getAttribute("crs"),Oe=pushParseAndPop([],WGS84_BBOX_READERS,Te,e);if(Oe.length==2)return{extent:boundingExtent(Oe),crs:t}}function readLegendUrl(Te,e){const t={};return t.format=Te.getAttribute("format"),t.href=readHref(Te),t}function readCoordinates(Te,e){const t=readString(Te).split(/\s+/);if(!t||t.length!=2)return;const Oe=+t[0],ke=+t[1];if(!(isNaN(Oe)||isNaN(ke)))return[Oe,ke]}function readTileMatrix(Te,e){return pushParseAndPop({},TM_PARSERS,Te,e)}function readTileMatrixLimitsList(Te,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,Te,e)}function readTileMatrixLimits(Te,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,Te,e)}var eventbus_min={exports:{}};(function(Te,e){(function(t,Oe){Te.exports=Oe()})(commonjsGlobal,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(ke,Be,Ue){for(var He=[],We=arguments.length,Cn=0;Cn<We;Cn++)He.push(arguments[Cn]);He=He.length>3?He.splice(3,He.length-1):[],typeof this.listeners[ke]<"u"?this.listeners[ke].push({scope:Ue,callback:Be,args:He}):this.listeners[ke]=[{scope:Ue,callback:Be,args:He}]},removeEventListener:function(ke,Be,Ue){if(typeof this.listeners[ke]<"u"){for(var He=this.listeners[ke].length,We=[],Cn=0;Cn<He;Cn++){var An=this.listeners[ke][Cn];An.scope==Ue&&An.callback==Be||We.push(An)}this.listeners[ke]=We}},hasEventListener:function(ke,Be,Ue){if(typeof this.listeners[ke]<"u"){var He=this.listeners[ke].length;if(Be===void 0&&Ue===void 0)return He>0;for(var We=0;We<He;We++){var Cn=this.listeners[ke][We];if((!Ue||Cn.scope==Ue)&&Cn.callback==Be)return!0}}return!1},dispatch:function(ke,Be){for(var Ue={type:ke,target:Be},He=[],We=arguments.length,Cn=0;Cn<We;Cn++)He.push(arguments[Cn]);if(He=He.length>2?He.splice(2,He.length-1):[],He=[Ue].concat(He),typeof this.listeners[ke]<"u")for(var An=this.listeners[ke].slice(),En=An.length,Cn=0;Cn<En;Cn++){var Sn=An[Cn];if(Sn&&Sn.callback){var Tn=He.concat(Sn.args);Sn.callback.apply(Sn.scope,Tn)}}},getEvents:function(){var ke="";for(var Be in this.listeners)for(var Ue=this.listeners[Be].length,He=0;He<Ue;He++){var We=this.listeners[Be][He];ke+=We.scope&&We.scope.className?We.scope.className:"anonymous",ke+=" listen for '"+Be+`'
`}return ke}};var Oe=new t;return Oe})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$l=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$l.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,Oe=JSON.parse(JSON.stringify(this.options.obj)),ke={};Oe.paint&&(t=!0,ke.paint=Oe.paint,Object.keys(Oe.paint).length===0&&logger$l.info("tag 'paint' is empty !")),Oe.layout&&(t=!0,ke.layout=Oe.layout,Oe.layout.visibility&&delete ke.visibility,Object.keys(Oe.layout).length===0&&logger$l.info("tag 'layout' is empty !"));var Be=document.createElement("div");Be.className=this.name.container;var Ue=null;if(t){var He=JSON.stringify(ke,null,4);Ue=this._syntaxHighlight(He)}var We=document.createElement("div");We.className=this.name.containerjson;var Cn=document.createElement("label");Cn.className=this.name.jsonlabel,Cn.innerHTML=this.options.title,We.appendChild(Cn);var An=document.createElement("pre");An.className=this.name.jsondisplay,An.innerHTML=Ue,An.addEventListener?An.addEventListener("click",function(En){e.options.tools.edition&&e.onEditJsonStyleMapBox(En)}):An.attachEvent&&An.attachEvent("onclick",function(En){e.options.tools.edition&&e.onEditJsonStyleMapBox(En)}),We.appendChild(An),Be.appendChild(We),this.options.tools.scale&&Be.appendChild(this._createElementToolsScale({min:ke.layout?ke.layout.minzoom:0,max:ke.layout?ke.layout.maxzoom:21})),this.options.tools.edition&&Be.appendChild(this._createElementToolsEdition()),this.container=Be}_createElementToolsScale(e){logger$l.trace("_createElementToolsScale");var t=this,Oe=this.options.obj,ke=document.createElement("div");ke.className=this.name.containertoolsscale;var Be=document.createElement("div");Be.className=this.name.containertoolsminscale;var Ue=document.createElement("label");Ue.className=this.name.scalelabelmin,Ue.innerHTML="min :",Be.appendChild(Ue);var He=document.createElement("input");He.className=this.name.scaleinputmin,He.type="range",He.value=e.min||0,He.title=e.min||0,He.disabled=!1,He.min=0,He.max=21,He.data=Oe,He.addEventListener?He.addEventListener("change",function(En){t.onChangeStyleScaleMinMapBox(En)}):He.appendChild&&He.appendChild("onchange",function(En){t.onChangeStyleScaleMinMapBox(En)}),Be.appendChild(He),ke.appendChild(Be);var We=document.createElement("div");We.className=this.name.containertoolsmaxscale;var Cn=document.createElement("label");Cn.className=this.name.scalelabelmax,Cn.innerHTML="max :",We.appendChild(Cn);var An=document.createElement("input");return An.className=this.name.scaleinputmin,An.type="range",An.value=e.max||21,An.title=e.max||21,An.disabled=!1,An.min=0,An.max=21,An.data=Oe,An.addEventListener?An.addEventListener("change",function(En){t.onChangeStyleScaleMaxMapBox(En)}):An.appendChild&&An.appendChild("onchange",function(En){t.onChangeStyleScaleMaxMapBox(En)}),We.appendChild(An),ke.appendChild(We),ke}_createElementToolsEdition(){logger$l.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var Oe="gp-json-number";return/^"/.test(t)?/:$/.test(t)?Oe="gp-json-key":Oe="gp-json-string":/true|false/.test(t)?Oe="gp-json-boolean":/null/.test(t)&&(Oe="gp-json-null"),"<span class='"+Oe+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$l.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$l.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$l.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$l.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$k=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$k.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,Oe=this.id||SelectorID.generate(),ke=document.createElement("div");ke.className=this.name.container,ke.title=t.themesSummary||"";var Be=t.themes;if(Be)for(var Ue=0;Ue<Be.length;Ue++){var He=Be[Ue],We=document.createElement("div");We.id=this.name.containerthemeID+Ue+"_"+Oe,We.className=this.name.containertheme,We.tabIndex=Ue;var Cn=He.url,An=He.selected||!1;if(Cn){var En=this.options.tools.button;if(En.visible){var Sn=En.type==="checkbox"?"checkbox":"radio",Tn=document.createElement("input");Tn.type=Sn,Tn.id=this.name.inputID+Ue+"_"+Oe,Tn.className=this.name.input,Tn.name=Oe,Tn.checked=An,Tn.data=Cn,Tn.addEventListener?Tn.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):Tn.attachEvent&&Tn.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)}),We.appendChild(Tn)}if(this.options.tools.thumbnails&&He.thumbnail){var Ln=document.createElement("img");Ln.id=this.name.imageID+Ue+"_"+Oe,Ln.className=this.name.image,Ln.src=He.thumbnail,Ln.alt=He.thumbnail,Ln.title=He.description||"",Ln.data=Cn,Ln.addEventListener?Ln.addEventListener("click",function(ni){e.onClickThemeImageMapBox(ni);var ii=ni.target.parentElement.childNodes;if(ii){var si=ii[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}):Ln.attachEvent&&Ln.attachEvent("onclick",function(ni){e.onClickThemeImageMapBox(ni);var ii=ni.target.parentElement.childNodes;if(ii){var si=ii[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}),We.appendChild(Ln)}if(He.name){var Bn=document.createElement("label");Bn.id=this.name.labelID+Ue+"_"+Oe,this.options.tools.button.visible&&(Bn.htmlFor=Tn.id),Bn.className=this.name.label,Bn.innerHTML=He.name,Bn.title=He.description||"",Bn.data=Cn,this.options.tools.button.visible||(Bn.addEventListener?Bn.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):Bn.attachEvent&&Bn.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)})),We.appendChild(Bn)}}else{var ti=document.createElement("label");ti.className=this.name.message,ti.innerHTML="Thème non disponible...",We.appendChild(ti)}ke.appendChild(We)}this.container=ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$k.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),ke=0;ke<Oe.length;ke++){var Be=Oe[ke];if(Be.id!==e.target.previousSibling.id){var Ue=Be.id.substring(Be.id.lastIndexOf("_")+1);Ue===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$k.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),ke=0;ke<Oe.length;ke++){var Be=Oe[ke];if(Be.id!==e.target.id){var Ue=Be.id.substring(Be.id.lastIndexOf("_")+1);Ue===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$j=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$j.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,Oe=JSON.parse(JSON.stringify(this.options.obj));Oe.filter&&(t=!0,Oe.filter.length===0&&logger$j.info("tag 'filter' is empty !"));var ke=document.createElement("div");ke.className=this.name.container;var Be=null;t&&(Be=JSON.stringify(Oe.filter,null,4));var Ue=document.createElement("div");Ue.className=this.name.containerjson;var He=document.createElement("label");He.className=this.name.jsonlabel,He.innerHTML=this.options.title,Ue.appendChild(He);var We=document.createElement("pre");if(We.className=this.name.jsondisplay,We.innerHTML=Be,We.addEventListener?We.addEventListener("click",function(An){e.options.tools.edition&&e.onEditJsonFilterMapBox(An)}):We.attachEvent&&We.attachEvent("onclick",function(An){e.options.tools.edition&&e.onEditJsonFilterMapBox(An)}),Ue.appendChild(We),ke.appendChild(Ue),this.options.tools.edition){var Cn=document.createElement("div");Cn.className=this.name.containertoolsedit,ke.appendChild(Cn)}this.container=ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$j.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$i=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$i.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var Oe=Object.assign({},e.paint,e.layout),ke=Object.keys(Oe);if(ke.length===0){logger$i.info("tag 'paint' or 'layout' is empty !");return}for(var Be={},Ue=!1,He=0;He<ke.length;He++){var We=ke[He];if(/fill-/.test(We)||/line-/.test(We)||/circle-/.test(We)||/background-/.test(We)||/text-/.test(We)||/icon-/.test(We)){Ue=!0;var Cn=e.title||"",An=We.split("-")[0];(An==="text"||An==="icon")&&(An="symbol"),this.legendRender=this._getProperties(An,Oe),Be={edit:this.editable,title:Cn,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be));break}}Ue||(Be={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be)),logger$i.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Be),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var Oe=t["text-field"],ke=t["icon-image"];if(e=Oe&&ke?"icon":Oe?"text":ke?"icon":"unknow",e==="unknow"){logger$i.warn("type unknow !?");return}}var Be={};for(const Cn in t)if(Object.hasOwnProperty.call(t,Cn)){const An=t[Cn];if(Legend.PROPERTIES[e].includes(Cn)){var Ue=Cn.replace(e,"").slice(1),He=this._getValue(An);if(He){if((Ue==="pattern"||Ue==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[He])){var We=e+":"+Ue;logger$i.warn("sprites mandatory for key ",We);break}Be[Ue]=He}}else logger$i.warn("property not supported : ",Cn)}return{type:e,values:Be}}_renderThumbnail(e,t){var Oe=this.rendercontainer;if(!Oe)return!1;var ke=null,Be=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var Ue="font-size: 5em;font-weight: bold;";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",Ue);break;case"icon":if(t.image)ke="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=ke;else{var He="fill: transparent;stroke-width: 10;";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%style%",He)}break;case"line":var We=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",We).replace("%stroke-width%",(t.width||0)*Be);break;case"circle":var Cn=t["stroke-color"]||"#FFFFFF";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Cn.indexOf("rgb")===0?Cn:ColorUtils.hexToRgba(Cn,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*Be);break;case"background":case"fill":if(t.pattern)ke="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=ke;else{var An=t["outline-color"]||"#FFFFFF";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",An.indexOf("rgb")===0?An:ColorUtils.hexToRgba(An,1))}break;default:return logger$i.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var Oe=!0;e.forEach(Be=>{typeof Be!="number"&&(Oe=!1)}),Oe&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((Be,Ue)=>{var He=Be[0],We=Ue[0];return He>We?-1:He<We?1:0});var ke=e.stops.slice(-1);t=ke[0][1]}}else logger$i.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,Oe=document.createElement("div");Oe.className=this.name.containerlegendrender;var ke=this.rendercontainer=document.createElement("div");ke.className=this.name.legendrender,e.edit&&(ke.className+=" ",ke.className+=this.name.legendeditable,ke.addEventListener?ke.addEventListener("click",function(He){t.onEditionLegendMapBox(He)}):ke.attachEvent&&ke.attachEvent("onclick",function(He){t.onEditionLegendMapBox(He)}));var Be=e.type;this._renderThumbnail(Be,e.values)?ke.className+=e.edit?" legend-"+Be:" legend-"+Be+"-not-editable":ke.className+=" legend-unknow",Oe.appendChild(ke);var Ue=document.createElement("span");return Ue.className=this.name.legendtitle,Ue.innerHTML=e.title||"",Oe.appendChild(Ue),Oe}_createElementEditionLegend(e){var t=this,Oe=document.createElement("div");if(Oe.className=this.name.containerlegendtools,!e.edit)return Oe;switch(e.type){case"line":ke.call(t),Be.call(t),Ue.call(t);break;case"background":case"fill":He.call(t),We.call(t);break}function ke(){var Cn=document.createElement("div");Cn.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-color-"+this.id:"line-color",An.innerHTML=this.labels["line-color"];var En=document.createElement("input");En.className="legend-styling",En.id=this.id?"line-color-"+this.id:"line-color",En.title="Selectionner une couleur de trait",En.type="color",En.value=e.values.color,En.setAttribute("data-id","line-color"),En.addEventListener?En.addEventListener("change",function(Sn){t._renderThumbnail(e.type,Object.assign(e.values,{color:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){t._renderThumbnail(e.type,Object.assign(e.values,{color:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}),Cn.appendChild(An),Cn.appendChild(En),Oe.appendChild(Cn)}function Be(){var Cn=document.createElement("div");Cn.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-width-"+this.id:"line-width",An.innerHTML=this.labels["line-width"];var En=document.createElement("input");En.className="legend-styling",En.id=this.id?"line-width-"+this.id:"line-width",En.title=e.values.width,En.type="range",En.min="0",En.max="10",En.step="1",En.defaultValue=e.values.width,En.setAttribute("data-id","line-width"),En.addEventListener?En.addEventListener("change",function(Sn){logger$i.trace(Sn),Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){logger$i.trace(Sn),Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}),Cn.appendChild(An),Cn.appendChild(En),Oe.appendChild(Cn)}function Ue(){var Cn=document.createElement("div");Cn.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",An.innerHTML=this.labels["line-opacity"];var En=document.createElement("input");En.className="legend-styling",En.id=this.id?"line-opacity-"+this.id:"line-opacity",En.title=e.values.opacity,En.type="range",En.min="0",En.max="1",En.step="0.1",En.defaultValue=e.values.opacity,En.setAttribute("data-id","line-opacity"),En.addEventListener?En.addEventListener("change",function(Sn){logger$i.trace(Sn),Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){logger$i.trace(Sn),Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}),Cn.appendChild(An),Cn.appendChild(En),Oe.appendChild(Cn)}function He(){var Cn=document.createElement("div");Cn.className="legend-styling-div";var An=document.createElement("label");An.className="legend-fill",An.htmlFor=this.id?"fill-color-"+this.id:"fill-color",An.innerHTML=this.labels["fill-color"];var En=document.createElement("input");En.className="legend-styling",En.id=this.id?"fill-color-"+this.id:"fill-color",En.title="Selectionner une couleur de remplissage",En.type="color",En.value=e.values.color,En.setAttribute("data-id","fill-color"),En.addEventListener?En.addEventListener("change",function(Sn){t._renderThumbnail(e.type,Object.assign(e.values,{color:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){t._renderThumbnail(e.type,Object.assign(e.values,{color:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}),Cn.appendChild(An),Cn.appendChild(En),Oe.appendChild(Cn)}function We(){var Cn=document.createElement("div");Cn.className="legend-styling-div";var An=document.createElement("label");An.className="legend-fill",An.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",An.innerHTML=this.labels["fill-opacity"];var En=document.createElement("input");En.className="legend-styling",En.id=this.id?"fill-opacity-"+this.id:"fill-opacity",En.title=e.values.opacity,En.type="range",En.min="0",En.max="1",En.step="0.1",En.defaultValue=e.values.opacity,En.setAttribute("data-id","fill-opacity"),En.addEventListener?En.addEventListener("change",function(Sn){Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){Sn.target.title=Sn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:Sn.target.value})),t.onChangeValueLegendMapBox(Sn)}),Cn.appendChild(An),Cn.appendChild(En),Oe.appendChild(Cn)}return Oe}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$i.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$i.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$h=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$h.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Helper.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,Oe=document.createElement("div");Oe.className=this.name.container;var ke=document.createElement("div");if(ke.id=this.name.containertitle+"-"+this.options.position,ke.className=this.name.containertitle,this.options.tools.pin){var Be=document.createElement("input");Be.id=this.name.imagelabelinput+"-"+this.options.position,Be.className=this.name.imagelabelinput,Be.type="checkbox",ke.appendChild(Be);var Ue=document.createElement("label");Ue.className=this.name.imagelabel,Ue.htmlFor=Be.id,Ue.addEventListener?Ue.addEventListener("click",function(Sn){e.onClickLayerMapBox(Sn)}):Ue.attachEvent&&Ue.attachEvent("onclick",function(Sn){e.onClickLayerMapBox(Sn)}),ke.appendChild(Ue)}var He=function(){var Sn=document.createElement("div");if(Sn.id=this.name.containertools+"-"+this.options.position,Sn.className=this.name.containertools,this.options.tools.visibility){var Tn=document.createElement("input");Tn.id=this.name.visibilityinput+"-"+this.options.position,Tn.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,Tn.type="checkbox",Tn.checked="checked",Tn.addEventListener?Tn.addEventListener("click",function(Bn){e.onVisibilityLayerMapBox(Bn)}):Tn.attachEvent&&Tn.attachEvent("onclick",function(Bn){e.onVisibilityLayerMapBox(Bn)}),Sn.appendChild(Tn),this.DomVisibility=Tn;var Ln=document.createElement("label");Ln.htmlFor=this.name.visibilityinput+"-"+this.options.position,Ln.id=this.name.visibilitylabel+"-"+this.options.position,Ln.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,Ln.title="Afficher/masquer la couche",Sn.appendChild(Ln),Oe.appendChild(Sn)}this.options.tools.clone&&logger$h.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$h.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&He.apply(this),this.options.tools.type&&t.type){var We=document.createElement("img");switch(We.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":We.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":We.style["background-position"]="-194px 0";break;case"SYMBOL":We.style["background-position"]="-84px 0";break;case"LINE":We.style["background-position"]="-28px 0";break;case"FILL":We.style["background-position"]="-56px 0";break;case"BACKGROUND":We.style["background-position"]="-140px 0";break;case"CIRCLE":We.style["background-position"]="-168px 0";break;default:We.style["background-position"]="-112px 0"}ke.appendChild(We)}var Cn=document.createElement("div");Cn.id=this.name.containerlegend+"-"+this.options.position,Cn.className=this.name.containerlegend,ke.appendChild(Cn);var An=document.createElement("input");An.id=this.name.titleinput+"-"+this.options.position,An.className=this.name.titleinput,An.type="checkbox",ke.appendChild(An);var En=document.createElement("label");En.className=this.name.titlelabel,En.htmlFor=An.id,En.innerHTML=t.id||t["source-layer"]||t.source,En.title=t["source-layer"]||t.source||t.id,En.addEventListener?En.addEventListener("click",function(Sn){e.onClickLayerMapBox(Sn)}):En.attachEvent&&En.attachEvent("onclick",function(Sn){e.onClickLayerMapBox(Sn)}),ke.appendChild(En),this.DomToggle=En,Oe.appendChild(ke),this.options.tools.icon.anchor==="end"&&He.apply(this),this.container=Oe}add(){if(logger$h.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$h.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$h.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$h.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,Oe=this.container.childNodes;if(Oe.length)for(var ke=this.options.tools.icon.anchor==="start"?1:0,Be=Oe[ke].childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];He.id.indexOf(this.name.containerlegend)!==-1&&(t=He)}if(t){var We=e.getRenderContainer();We&&(t.appendChild(We),this.bSlotLegend=!0)}}}visibility(e){if(logger$h.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$h.trace("collapse()"),this.DomToggle.click()}visible(){logger$h.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$h.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return logger$h.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$h.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),Oe=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!Oe),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!Oe),this.oStyle&&this.oStyle.display(!Oe),this.oFilter&&this.oFilter.display(!Oe),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!Oe)}onVisibilityLayerMapBox(e){logger$h.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$h.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$h.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$g=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$g.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var Oe=document.createElement("summary");Oe.className=this.name.summary,Oe.innerHTML=this.options.title,t.appendChild(Oe),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$g.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$f=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$f.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$f.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$f.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$f.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e}},logger$e=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$e.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$e.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$e.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$e.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$e.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$e.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var Oe in t)if(t.hasOwnProperty(Oe)){var ke=t[Oe];ke&&(EventBus.hasEventListener(Oe,ke,e)||EventBus.addEventListener(Oe,ke,e))}}}_initContainer(){logger$e.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var Oe=document.createElement("div");Oe.id=this.name.titleThemesID+this.id,Oe.className=this.name.titleThemes,Oe.innerHTML="Liste des 'thèmes'",e.appendChild(Oe)}var ke=new Themes({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});ke.add()}if(this.options.tools.search){var Be=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Be.add()}for(var Ue in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(Ue)){if(this.options.tools.layers){var He=Object.keys(this.mapbox.sources).length>1?1:0;if(He){var We=document.createElement("hr");We.className=this.name.sep,e.appendChild(We)}if(this.options.tools.title){var Cn=document.createElement("div");Cn.id=this.name.titleLayersID+this.id,Cn.className=this.name.titleLayers,Cn.innerHTML=He?"Liste des 'couches' ("+Ue+")":"Liste des 'couches'",e.appendChild(Cn)}}var An=this.mapbox.layers.slice();if(An.forEach(function(ar,cr){var sr=ar.metadata;sr?sr["geoportail:order"]=cr:ar.metadata={"geoportail:order":cr}}),this.options.tools.sort){var En=this.options.tools.sortBy,Sn=this.options.tools.sortOrder,Tn=function(ar,cr){var sr=0;if(ar.metadata&&ar.metadata["geoportail:group"]&&cr.metadata&&cr.metadata["geoportail:group"]){var br=null,Ni=null;br=ar.metadata["geoportail:group"],Ni=cr.metadata["geoportail:group"],sr=br.localeCompare(Ni)}else switch(En){case"geom":sr=Sn==="asc"?ar.type.localeCompare(cr.type)||ar.id.localeCompare(cr.id):cr.type.localeCompare(ar.type)||cr.id.localeCompare(ar.id);break;case"class":sr=Sn==="asc"?ar["source-layer"].localeCompare(cr["source-layer"])||ar.id.localeCompare(cr.id):cr["source-layer"].localeCompare(ar["source-layer"])||cr.id.localeCompare(ar.id);break;case"id":default:sr=Sn==="asc"?ar.id.localeCompare(cr.id):cr.id.localeCompare(ar.id);break}return sr};An.sort(Tn)}logger$e.trace("Layers : ",An);var Ln=this.options.tools.sortBy,Bn=this.options.tools.groupAuto,ti={};An.forEach(function(ar){var cr=ar.metadata;if(cr&&cr["geoportail:group"]){var sr=cr["geoportail:group"];ti[sr]=ti[sr]?ti[sr]+1:1}else{var br=null;switch(Ln){case"class":br=ar["source-layer"];break;case"geom":br=ar.type;break;case"id":default:br=ar.id;break}var Ni=br;if(Bn){var or=/_|-|:|=/,er=br.search(or);Ni=er!==-1?br.substring(0,er).trim():br}ti[Ni]=ti[Ni]?ti[Ni]+1:1,cr?cr["geoportail:group"]=Ni:ar.metadata={"geoportail:group":Ni}}}),logger$e.trace("Groups : ",ti);var ni=document.createElement("div");ni.className=this.name.containerLayers,e.appendChild(ni);var ii;if(this.options.tools.collapse!==void 0){ii=document.createElement("details"),ii.className="",ii.open=!this.options.tools.collapse,ni.appendChild(ii);var si=document.createElement("summary");si.className="",si.innerHTML="",ii.appendChild(si)}for(var oi=this.options.tools.collapse!==void 0?ii:ni,ci=-1,vi=0;vi<An.length;vi++){var pi=An[vi];if(ci++,pi.source===Ue){if(this.options.tools.group&&this.options.tools.sort){var fi=pi.metadata;if(fi){var Mi=pi.metadata["geoportail:group"];if(Mi)if(ti[Mi]>1){ti[Mi]=-1;var Oi=new Group({id:this.id,target:this.options.tools.collapse!==void 0?ii:ni,title:Mi,collapse:!0});Oi.add(),oi=Oi.getContainer()}else ti[Mi]===1&&(oi=this.options.tools.collapse!==void 0?ii:ni);else oi=this.options.tools.collapse!==void 0?ii:ni}else oi=this.options.tools.collapse!==void 0?ii:ni}if(this.options.tools.layers){var ui=new Layer({id:this.id,target:oi,position:ci+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:pi.id,type:pi.type,source:pi.source,"source-layer":pi["source-layer"]}});ui.add(),pi.layout&&pi.layout.visibility&&pi.layout.visibility==="none"&&ui.visibility(!1),this.layers.push(ui)}if(this.options.tools.legend){var li=this.options.tools.editable;typeof li>"u"&&(li=pi.editable);var Ri=new Legend({id:this.id,target:oi,sprites:this.sprites,obj:{id:pi.id,source:pi.source,title:pi.id,editable:typeof li<"u"?li:!1,paint:pi.paint,layout:pi.layout}});Ri.add(),Ri.display(!1),ui&&(ui.addLegend(Ri),ui.slotLegend())}if(this.options.tools.style){var Pi=new Style({id:this.id,target:oi,position:ci+"_"+this.id,obj:{id:pi.id,source:pi.source,layout:pi.layout,paint:pi.paint}});Pi.add(),Pi.display(!1),ui&&ui.addStyle(Pi),pi.layout&&pi.layout.visibility&&pi.layout.visibility==="none"&&ui.visibility(!1)}if(this.options.tools.filter){var Fi=new Filter({id:this.id,target:oi,position:ci+"_"+this.id,obj:{id:pi.id,source:pi.source,filter:pi.Filter}});Fi.add(),Fi.display(!1),ui&&ui.addFilter(Fi)}}else ci>=0&&ci--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var Hi=document.createElement("div");Hi.id=this.name.target;var nr=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;nr.appendChild(Hi)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((Be,Ue)=>{logger$e.error("Protocole mapbox:// non géré !"),Be(t)});if(!e)return new Promise((Be,Ue)=>{logger$e.error("Auncun sprites disponibles !"),Be(t)});var Oe=function(){var Be=e+".png";return fetch(Be,{credentials:"same-origin"}).then(function(Ue){if(Ue.ok)return Ue.blob().then(function(We){t.sprites.url=Be;var Cn=new Image;return Cn.src=Be,Cn.decode().then(function(){t.sprites.size={},t.sprites.size.h=Cn.height,t.sprites.size.w=Cn.width})}).catch(We=>{logger$e.warn("fetch image sprites exception :",We)});var He=new Error("HTTP status code: "+Ue.status);throw He}).catch(Ue=>new Promise((He,We)=>{logger$e.error("fetch image sprites exception :",Ue),We(Ue)}))},ke=function(){var Be=e+".json";return fetch(Be,{credentials:"same-origin"}).then(function(Ue){if(Ue.ok)return Ue.json().then(function(We){t.sprites.json=We}).catch(We=>{logger$e.warn("fetch json sprites exception :",We)});var He=new Error("HTTP status code: "+Ue.status);throw He}).catch(Ue=>new Promise((He,We)=>{logger$e.error("fetch json sprites exception :",Ue),We(Ue)}))};return Promise.all([Oe(),ke()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{logger$e.warn("fetch sprites exception :",t)}):new Promise((t,Oe)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(Oe=>{e.mapbox=Oe}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(Oe=>{logger$e.warn("fetch sprites exception :",Oe)}):new Promise((Oe,ke)=>{e._initContainer(),Oe(e)})}).catch(Oe=>{logger$e.error("json exception :",Oe)})).catch(t=>{logger$e.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,Oe=this.getLayer(e),ke=Oe.options.obj.id,Be=0;Be<this.mapbox.layers.length;Be++){var Ue=this.mapbox.layers[Be];if(Ue.id===ke){t=Ue;break}}return t}getLayerFromStyle(e){for(var t=null,Oe=this.mapbox.layers[e],ke=0;ke<this.getLayers().length;ke++){var Be=this.getLayer(ke);if(Oe.id===Be.options.obj.id){t=Be;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createLoadingElement:function(){var Te=document.createElement("div");return Te.id="GPmapLoading",Te.className="",Te},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimport"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowImportPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te._onShowImportClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te._onShowImportClick(Oe)}),e},_createImportPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPimportPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createImportPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createImportPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",Te},_createImportPanelReturnPictoElement:function(){var Te=this,e=document.createElement("button");if(e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline",checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(Te._addUID("GPshowImportPicto")).click(),Te._onReturnPictoClick(Oe),document.getElementById(Te._addUID("GPshowImportPicto")).click()}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(Te._addUID("GPshowImportPicto")).click(),Te._onReturnPictoClick(Oe),document.getElementById(Te._addUID("GPshowImportPicto")).click()}),e},_createImportPanelTitleElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportHeaderTitle"),Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Import de données",Te},_createImportPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var Te=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Te._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Te._onImportSubmit()}),e},_createImportTypeLineElement:function(Te){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var Oe=document.createElement("label");Oe.id=this._addUID("GPimportTypeLabel"),Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Type de donnée",Oe.title="Type de donnée",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(He){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(He)}):ke.attachEvent&&ke.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),ke.id=this._addUID("GPimportTypeSelect"),(!Te||!Array.isArray(Te))&&(Te=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Be,Ue=0;Ue<Te.length;Ue++)Be=document.createElement("option"),Be.value=Te[Ue],Be.text=Te[Ue]==="MAPBOX"?"Tuiles vectorielles":Te[Ue],ke.appendChild(Be);return t.appendChild(ke),t},_createImportWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPimportWaitingContainer"),Te.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createImportStaticParamsContainer:function(Te){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),Te==="KML"||Te==="GPX"||Te==="GeoJSON"||Te==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var Te=document.createElement("div");Te.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",Te.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",Te.appendChild(t),Te},_createStaticModeChoiceDiv:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportChoice"),Te.className="fr-my-1w",Te},_createStaticLocalChoiceDiv:function(){var Te=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(ke){document.getElementById(Te._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Te._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Te._onStaticImportTypeChange(ke)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Te._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Te._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Te._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltLocal"),Oe.innerHTML="par fichier local",Oe.title="par fichier local",e.appendChild(Oe),e},_createStaticUrlChoiceDiv:function(){var Te=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(ke){document.getElementById(Te._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Te._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Te._onStaticImportTypeChange(ke)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Te._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Te._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Te._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltUrl"),Oe.innerHTML="par URL",Oe.title="par URL",e.appendChild(Oe),e},_createStaticLocalInputDiv:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportValueLocal"),Te.className="GPimportInputLine",Te},_createStaticLocalInputLabel:function(){var Te=document.createElement("label");return Te.className="GPlabel gpf-label fr-label fr-mb-1w",Te.htmlFor=this._addUID("GPimportFile"),Te.innerHTML="Fichier local",Te.title="Fichier local",Te},_createStaticLocalInput:function(){var Te=document.createElement("input");return Te.type="file",Te.id=this._addUID("GPimportFile"),Te.className="GPimportInputFile gpf-upload fr-upload",Te},_createStaticUrlInputDiv:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportValueUrl"),Te.className="GPelementHidden gpf-hidden",Te},_createStaticUrlInputLabel:function(){var Te=document.createElement("label");return Te.className="GPlabel gpf-label fr-label",Te.htmlFor=this._addUID("GPimportUrl"),Te.innerHTML="URL",Te.title="URL",Te},_createStaticUrlInput:function(){var Te=document.createElement("input");return Te.type="text",Te.id=this._addUID("GPimportUrl"),Te.className="GPinput gpf-input fr-input",Te},_createServiceParamsContainer:function(Te){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),Te==="WMS"||Te==="WMTS"||Te==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var Te=document.createElement("div");return Te.className="GPimportInputLine",Te},_createServiceUrlInputLabel:function(){var Te=document.createElement("label");return Te.className="GPlabel gpf-label fr-label",Te.htmlFor=this._addUID("GPimportServiceUrl"),Te.innerHTML="URL du service",Te.title="URL du service",Te},_createServiceUrlInput:function(){var Te=document.createElement("input");return Te.type="text",Te.id=this._addUID("GPimportServiceUrl"),Te.className="GPinput gpf-input fr-input",Te},_createImportSubmitFormElement:function(){var Te=document.createElement("input");return Te.id=this._addUID("GPimportSubmit"),Te.className="GPsubmit gpf-btn fr-btn",Te.type="submit",Te.value="Importer",Te},_createImportGetCapPanelElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportGetCapPanel"),Te.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Te},_createImportGetCapPanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var Oe=document.createElement("button");Oe.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.id=this._addUID("GPimportGetCapPanelClose"),Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click(),document.getElementById(Te._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Te._onGetCapPanelClose()}):Oe.attachEvent&&Oe.attachEvent("click",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click(),document.getElementById(Te._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Te._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Te._onGetCapPanelClose()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createImportGetCapResultsContainer:function(){var Te=document.createElement("div");return Te.className="GPimportGetCapRoot gpf-panel__list",Te.id=this._addUID("GPimportGetCapResults"),Te},_addImportGetCapResultListRubrique:function(Te,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=Te,e.appendChild(t),e},_addImportGetCapResultRubrique:function(Te,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var Oe=document.createElement("input");Oe.id="GPimportGetCapRubrique-"+SelectorID.generate(),Oe.className="GPimportGetCapRubrique",Oe.type="checkbox",t.appendChild(Oe);var ke=document.createElement("label");return ke.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",ke.htmlFor=Oe.id,ke.innerHTML=Te,ke.title=Te,t.appendChild(ke),e.appendChild(t),e},_addImportGetCapResultListLayer:function(Te){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",Te.appendChild(e),Te},_addImportGetCapResultLayer:function(Te,e,t){var Oe=document.createElement("li");Oe.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",Oe.innerHTML=Te.content,Oe.title=Te.title,Oe.id="GPimportGetCapProposal_"+e;var ke=this;return Oe.addEventListener?Oe.addEventListener("click",function(Be){ke._onGetCapResponseLayerClick(Be)}):Oe.attachEvent&&Oe.attachEvent("onclick",function(){ke._onGetCapResponseLayerClick()}),t.appendChild(Oe),t},_createImportMapBoxPanelElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPimportMapBoxPanel"),Te.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Te},_createImportMapBoxPanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Nouvel import",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",t.addEventListener?t.addEventListener("click",function(Ue){document.getElementById(Te._addUID("GPshowImportPicto")).click(),Te._onMapBoxReturnPictoClick(Ue)}):t.attachEvent&&t.attachEvent("onclick",function(Ue){document.getElementById(Te._addUID("GPshowImportPicto")).click(),Te._onMapBoxReturnPictoClick(Ue)}),e.appendChild(t);var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Edition des styles",Oe.title="Edition des styles",e.appendChild(Oe);var ke=document.createElement("button");ke.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.id=this._addUID("GPimportMapBoxPanelClose"),ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click(),document.getElementById(Te._addUID("GPimportMapBoxPanel")).style.display="none",Te._onMapBoxPanelClose()}):ke.attachEvent&&ke.attachEvent("click",function(){document.getElementById(Te._addUID("GPshowImportPicto")).click(),document.getElementById(Te._addUID("GPimportMapBoxPanel")).style.display="none",Te._onMapBoxPanelClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createImportMapBoxResultsContainer:function(){var Te=document.createElement("div");return Te.className="GPimportMapBoxpRoot",Te.id=this._addUID("GPimportMapBoxResults"),Te}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(Te){return Te?this._toolboxId+"-"+Te:this._toolboxId},getButtonID:function(Te){return Te?this._buttonId+"-"+Te:this._buttonId},getWidgetID:function(Te){return Te?this._widgetId+"-"+Te:this._widgetId},_createToolBoxContainerElement:function(Te){var e=document.createElement("div");e.id=this.getToolBoxID(Te),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(Te),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var Oe=this;t.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),this.blur();var He=document.getElementById(Oe.getWidgetID(Te));He.style.display==="block"?He.style.display="none":He.style.display="block"}),e.appendChild(t);var ke=document.createElement("div");return ke.id=this.getWidgetID(Te),ke.addEventListener("click",function(){},!1),e.appendChild(ke),e}},logger$d=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(Te,e){if(logger$d.trace("ToolBox.add()",e),!Te){logger$d.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var Oe=Te.getTargetElement(),ke=Oe.ownerDocument,Be=Oe.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Be]=SelectorID.generate()):this._toolbox[Be]||(this._toolbox[Be]=SelectorID.generate());var Ue=this._toolbox[Be];if(!ke.getElementById(this.getToolBoxID(Ue))){logger$d.trace("create toolbox !");var He=this._createToolBoxContainerElement(Ue);He.style.pointerEvents="auto";var We=Oe.getElementsByClassName("ol-overlaycontainer-stopevent");We[0].appendChild(He)}var Cn=ke.getElementById(this.getWidgetID(Ue));e.setTarget(Cn),t&&(t.gpShareMeasureToolBox=this._toolbox),logger$d.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$c=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var Te=this.CLASSNAME;logger$c.trace("["+Te+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(Te){if(!Te.dragging){var e=Te.coordinate;if(this.sketch){var t,Oe=this.sketch.getGeometry();if(t=this.format(Oe),Oe.getType()==="LineString")e=Oe.getLastCoordinate();else if(Oe.getType()==="Polygon")e=Oe.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(Te,e){Te.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap(),Oe=t.getTargetElement().id,ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(this.tools=ke.gpShareMeasures||{});var Be=this.CLASSNAME;for(var Ue in this.tools)if(this.tools.hasOwnProperty(Ue))for(var He=this.tools[Ue],We=0;We<He.length;We++){var Cn=He[We];Cn&&Cn.active&&Ue!==Be&&Cn.map.id===Oe&&(Cn.active=!1,Cn.instance!==null&&Cn.instance.clean())}Interactions.unset(t,{current:"Measures"});var An=this._pictoContainer.ariaPressed;if(An==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var En=0;En<this.tools[Be].length;En++)this.tools[Be][En].map.id===Oe&&(this.tools[Be][En].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var Sn=0;Sn<this.tools[Be].length;Sn++)this.tools[Be][Sn].map.id===Oe&&(this.tools[Be][Sn].active=!1)}},clearMeasureToolTip:function(){var Te=this.getMap();if(Te)for(var e=Te.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),Oe=0;Oe<t.length;Oe++){for(var ke=t[Oe],Be=ke.children.length,Ue=[],He=0;He<Be;He++){var We=ke.children[He];if(We.children.length!==0){var Cn=We.children[0];(Cn.className==="GPmeasureTooltip GPmeasureTooltip-static"||Cn.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&Ue.push(We)}}for(var An=0;An<Ue.length;An++)ke.removeChild(Ue[An])}},clearMeasure:function(){var Te=this.getMap();this.measureVector&&(Te.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(Te.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(Te){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),Te.addOverlay(this.measureTooltip)},createHelpTooltip:function(Te){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),Te.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(Te){this.options.styles=Te||{},logger$c.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$c.trace("style finish",this.options.styles.finish);var t={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(t)},addMeasureInteraction:function(Te){var e=this.getMap(),t=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(Oe){return Oe.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:Te,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",Oe=>{t.sketch=Oe.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var Oe,ke,Be=t.sketch.getGeometry();if(Oe=t.format(Be),Be.getType()==="LineString")ke=Be.getLastCoordinate();else if(Be.getType()==="Polygon")ke=Be.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=Oe,t.measureTooltip.setPosition(ke)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var Te=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",Te.addLayer(this.measureVector),Te.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPelevationPath"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowElevationPathPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimétrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowElevationPathClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowElevationPathClick(Oe)}),e},_createElevationPathPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPelevationPathPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createElevationPathPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createDrawingButtonsPluginDiv:function(){var Te=document.createElement("div");return Te.className="container-buttons-plugin fr-mx-2w",Te},_createElevationPathPanelHeaderElement:function(){var Te=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){Te.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){Te.onOpenElevationPathInfoClick()}),e.appendChild(t)}var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Profil Altimétrique",e.appendChild(Oe);var ke=document.createElement("button");ke.id=this._addUID("GPelevationPathPanelReduce"),ke.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",ke.title="Masquer le panneau",ke.addEventListener?ke.addEventListener("click",function(He){typeof Te.onReduceElevationPathPanelClick=="function"&&Te.onReduceElevationPathPanelClick()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(He){typeof Te.onReduceElevationPathPanelClick=="function"&&Te.onReduceElevationPathPanelClick()}),e.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPelevationPathPanelClose"),Be.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowElevationPathPicto")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowElevationPathPicto")).click()});var Ue=document.createElement("span");return Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),e.appendChild(Be),e},_createElevationPathPanelProfilElement:function(){var Te=document.createElement("div");Te.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",Te.appendChild(e),Te},_createElevationPathWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPelevationPathCalcWaitingContainer"),Te.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createElevationPathInformationsElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(Te.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",Te.appendChild(e),Te},_addElevationPathInformationsItem:function(Te,e){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var Oe=document.createElement("p");Oe.className="GPelevationPathInformations";var ke=document.createElement("span");ke.innerText=Te;var Be=document.createElement("span");Be.innerText=e,Oe.appendChild(ke),Oe.appendChild(Be),t.appendChild(Oe)}return t}},ProfileElevationPathDOM={_getCssProperty:function(Te,e){return window.getComputedStyle(Te,null).getPropertyValue(e)},_getTextWidth:function(Te,e,t=null){var Oe=this.canvas||(this.canvas=document.createElement("canvas")),ke=Oe.getContext("2d");t===null?ke.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:ke.font=t;var Be=ke.measureText(Te);return Be.width},_dataZToSvgY:function(Te,e,t,Oe){return e-(Te-t)*Oe-.5},_dataDistToSvgX:function(Te,e,t,Oe){return e-t+Te*Oe},_svgXToDataDist:function(Te,e,t,Oe){return(Te+t-e)/Oe},_arrayBisect:function(Te,e){let t;if(Te.length===0)return 0;for(t=0;t<Te.length;t++)if(e<Te[t].dist)return t;return t-1},displayProfileByDefault:function(Te,e,t,Oe){var ke=t;if(!e||!Te)return;const Be={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Be.fontFamily="Marianne",Be.strokeColor="#2F4077",Be.fillColor="#2F4077",Be.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const Ue={top:25,right:15,bottom:10,left:10};var He=ke.options.displayProfileOptions,We=Te.points,Cn=JSON.parse(JSON.stringify(We));Cn.sort(function(Ts,Cs){return Ts.z-Cs.z});var An=Cn[0].z,En=Cn[Cn.length-1].z,Sn=Te.distance;let Tn="m";const Ln=document.createElement("div");Ln.id="profileElevationByDefault",e.appendChild(Ln);var Bn=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),ti=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const ni=ti-Ue.top-Ue.bottom,ii=Bn-Ue.left-Ue.right,si=17,oi=this._getTextWidth(Math.round(En).toLocaleString()+",88",e,`400 10 ${Be.fontFamily}`),ci=17,vi=15,pi=15,fi=this._getTextWidth(Math.round(Sn).toLocaleString()+",5",e),Mi=1,Oi=ni-ci-vi,ui=ii-si-oi,li=document.createElementNS("http://www.w3.org/2000/svg","svg");li.id="profileElevationByDefaultSvg",li.setAttribute("style","display: block; margin: auto; overflow: visible;"),li.setAttribute("viewBox",`0 0 ${Bn} ${ti}`),li.setAttribute("width","100%"),li.setAttribute("height","100%");const Ri=Math.floor(Oi/pi);let Pi;En===An?Pi=.1:Pi=Math.pow(10,Math.ceil(Math.log((En-An)/Ri)/Math.log(10)))/2;let Fi=Math.floor(An/Pi)*Pi,Hi=Math.ceil(En/Pi)*Pi;Hi===En&&(Hi+=Pi),Fi=Math.round(Fi*100)/100,Hi=Math.round(Hi*100)/100;let nr=Math.round((Hi-Fi)/Pi);nr+1>Ri&&(Pi=Math.pow(10,Math.ceil(Math.log((En-An)/Ri)/Math.log(10))),Fi=Math.floor(An/Pi)*Pi,Hi=Math.ceil(En/Pi)*Pi,Hi===En&&(Hi+=Pi),Fi=Math.round(Fi*100)/100,Hi=Math.round(Hi*100)/100,nr=Math.floor((Hi-Fi)/Pi)),nr=Math.max(Math.round(nr),1);const ar=document.createElementNS("http://www.w3.org/2000/svg","g");ar.setAttribute("class","profile-z-vertical");const cr=document.createElementNS("http://www.w3.org/2000/svg","g"),sr=Oi/nr;let br;En===An?br=Oi/.2:br=Oi/(Hi-Fi);let Ni,or,er,fr,mr,hr;for(let Ts=0;Ts<=nr;Ts++)Ni=document.createElementNS("http://www.w3.org/2000/svg","text"),Ni.setAttribute("class","profile-z-graduation"),Ni.setAttribute("font-family",Be.fontFamily),Ni.setAttribute("font-size","10px"),Ni.setAttribute("fill","#5E5E5E"),Ni.textContent=(Math.round(100*(Fi+Ts*Pi))/100).toLocaleString(),or=Oi-Ts*sr,Ni.setAttribute("transform",`translate(${si+oi-8}, ${or+5})`),Ni.setAttribute("text-anchor","end"),ar.appendChild(Ni),er=Math.round(or)-.5,fr=document.createElementNS("http://www.w3.org/2000/svg","g"),mr=document.createElementNS("http://www.w3.org/2000/svg","path"),mr.setAttribute("cs","100,100"),mr.setAttribute("stroke-width","1"),Ts!==0?mr.setAttribute("stroke-opacity","0.2"):mr.setAttribute("stroke-opacity","1"),mr.setAttribute("stroke","#000000"),mr.setAttribute("fill","none"),mr.setAttribute("d",`M${si+oi},${er} L${ui+si+oi},${er}`),hr=document.createElementNS("http://www.w3.org/2000/svg","path"),hr.setAttribute("cs","100,100"),hr.setAttribute("stroke-width","1"),hr.setAttribute("stroke-opacity","1"),hr.setAttribute("stroke","#000000"),hr.setAttribute("fill","none"),hr.setAttribute("d",`M${si+oi},${er} L${si+oi+5},${er}`),hr.setAttribute("transform","translate(-5, 0)"),fr.appendChild(hr),fr.appendChild(mr),cr.appendChild(fr);var vr=document.createElementNS("http://www.w3.org/2000/svg","text");vr.setAttribute("class","profile-z-legend"),vr.setAttribute("font-family",Be.fontFamily),vr.setAttribute("font-size","11px"),vr.setAttribute("fill","#5E5E5E"),vr.textContent="Altitude (m)",vr.setAttribute("transform",`translate(${si-8}, ${Math.round(Oi/2)}) rotate(-90)`),vr.setAttribute("text-anchor","middle"),ar.appendChild(vr),li.appendChild(ar),li.appendChild(cr),Sn>2e3&&(Sn/=1e3,Tn="km");const _r=Math.floor(ui/fi);let Ar=Math.pow(10,Math.ceil(Math.log(Sn/_r)/Math.log(10)))/2;const Vr=Sn;let Wr=Math.floor(Vr/Ar);Wr>_r?(Ar=Math.pow(10,Math.ceil(Math.log(Sn/_r)/Math.log(10))),Wr=Math.floor(Vr/Ar)):Wr<Mi&&(Ar=Math.pow(10,Math.ceil(Math.log(Sn/_r)/Math.log(10))-1),Wr=Math.floor(Vr/Ar)),Wr=Math.max(Wr,1);const tr=Ar*Wr,pr=document.createElementNS("http://www.w3.org/2000/svg","g");pr.setAttribute("class","profile-x-vertical");const ur=document.createElementNS("http://www.w3.org/2000/svg","g"),Ki=ui/Vr,Nr=(Vr-tr)*Ki,Or=Math.round((ui-Nr)/Wr);let Ir,Mr,Tr,wr,Cr,Er;for(let Ts=0;Ts<=Wr+1;Ts++)Ir=document.createElementNS("http://www.w3.org/2000/svg","text"),Ir.setAttribute("class","profile-x-graduation"),Ir.setAttribute("font-family",Be.fontFamily),Ir.setAttribute("font-size","10px"),Ir.setAttribute("fill","#5E5E5E"),Ts!==Wr+1&&(Ir.textContent=(Math.round(100*Ts*Ar)/100).toLocaleString()),Mr=si+oi+Ts*Or,Ts===Wr+1&&(Mr=si+oi+ui),Ir.setAttribute("transform",`translate(${Mr}, ${Oi+vi+5})`),Ir.setAttribute("text-anchor","middle"),pr.appendChild(Ir),Tr=Mr-.5,wr=document.createElementNS("http://www.w3.org/2000/svg","g"),Cr=document.createElementNS("http://www.w3.org/2000/svg","path"),Cr.setAttribute("cs","100,100"),Cr.setAttribute("stroke-width","1"),Ts!==0?Cr.setAttribute("stroke-opacity","0.2"):Cr.setAttribute("stroke-opacity","1"),Cr.setAttribute("stroke","#000000"),Cr.setAttribute("fill","none"),Cr.setAttribute("d",`M${Tr},${Oi} L${Tr},0`),Er=document.createElementNS("http://www.w3.org/2000/svg","path"),Er.setAttribute("cs","100,100"),Er.setAttribute("stroke-width","1"),Er.setAttribute("stroke-opacity","1"),Er.setAttribute("stroke","#000000"),Er.setAttribute("fill","none"),Er.setAttribute("d",`M${Tr},${Oi} L${Tr},${Oi-5}`),Er.setAttribute("transform","translate(0, 5)"),wr.appendChild(Er),wr.appendChild(Cr),ur.appendChild(wr);var Sr=document.createElementNS("http://www.w3.org/2000/svg","text");Sr.setAttribute("class","profile-x-legend"),Sr.setAttribute("font-family",Be.fontFamily),Sr.setAttribute("font-size","11px"),Sr.setAttribute("fill","#5E5E5E"),Sr.textContent=`Distance (${Tn})`,Sr.setAttribute("transform",`translate(${si+oi+ui/2}, ${Oi+vi+ci+3})`),Sr.setAttribute("text-anchor","middle"),pr.appendChild(Sr),li.appendChild(pr),li.appendChild(ur);const Gr=document.createElementNS("http://www.w3.org/2000/svg","g");let zr=1;Tn==="km"&&(zr=1e3);let $r=this._dataDistToSvgX(We[0].dist/zr,ii,ui,Ki),Hr=this._dataZToSvgY(We[0].z,Oi,Fi,br),as=`M${$r},${Hr}`;for(let Ts=1;Ts<We.length;Ts++)$r=this._dataDistToSvgX(We[Ts].dist/zr,ii,ui,Ki),Hr=this._dataZToSvgY(We[Ts].z,Oi,Fi,br),as+=` L${$r},${Hr}`;const Kr=document.createElementNS("http://www.w3.org/2000/svg","path");Kr.setAttribute("cs","100,100"),Kr.setAttribute("stroke-width","1"),Kr.setAttribute("stroke-opacity","1"),Kr.setAttribute("stroke",Be.strokeColor),Kr.setAttribute("fill","none"),Kr.setAttribute("d",as),as+=` L${$r},${Oi}`,as+=` L${ii-ui},${Oi}`;const Ss=document.createElementNS("http://www.w3.org/2000/svg","path");Ss.setAttribute("cs","100,100"),Ss.setAttribute("stroke-width","1"),Ss.setAttribute("stroke-opacity","0"),Ss.setAttribute("stroke","#000000"),Ss.setAttribute("fill",Be.fillColor),Ss.setAttribute("fill-opacity","0.2"),Ss.setAttribute("d",as),Gr.appendChild(Kr),Gr.appendChild(Ss),li.appendChild(Gr);const ms=document.createElementNS("http://www.w3.org/2000/svg","g"),Rs=document.createElementNS("http://www.w3.org/2000/svg","rect");Rs.setAttribute("width",ui),Rs.setAttribute("height",Oi),Rs.setAttribute("transform",`translate(${ii-ui},0)`),Rs.setAttribute("visibility","hidden"),Rs.setAttribute("pointer-events","all");const Ps=JSON.parse(JSON.stringify(We));Ps.sort(function(Ts,Cs){return Ts.dist-Cs.dist});const ps=document.createElementNS("http://www.w3.org/2000/svg","line");ps.setAttribute("id","focusLineX"),ps.setAttribute("class","focusLine-default"),ps.setAttribute("fill","none"),ps.setAttribute("stroke",Be.focusLineColor),ps.setAttribute("stroke-width","0.5px"),ps.setAttribute("visibility","hidden");const Is=document.createElementNS("http://www.w3.org/2000/svg","line");Is.setAttribute("id","focusLineY"),Is.setAttribute("class","focusLine-default"),Is.setAttribute("fill","none"),Is.setAttribute("stroke",Be.focusLineColor),Is.setAttribute("stroke-width","0.5px"),Is.setAttribute("visibility","hidden");const As=document.createElementNS("http://www.w3.org/2000/svg","circle");As.setAttribute("id","focusCircle"),As.setAttribute("r",4),As.setAttribute("class","circle-default focusCircle-default"),As.setAttribute("fill",Be.focusLineColor),As.setAttribute("visibility","hidden"),ms.appendChild(As),ms.appendChild(ps),ms.appendChild(Is);const Fs=document.createElementNS("http://www.w3.org/2000/svg","text"),xs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Zs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),_o=document.createElementNS("http://www.w3.org/2000/svg","tspan");Fs.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Be.fontFamily}; z-index:50;`),Fs.style.pointerEvents="none",Fs.style.position="fixed",Fs.setAttribute("class","tooltipInit"),Fs.setAttribute("text-anchor","middle"),Ln.appendChild(Fs),xs.setAttribute("class","altiPathValue"),xs.setAttribute("x","0"),xs.setAttribute("dy","-.7em"),Zs.setAttribute("class","altiPathValue"),Zs.setAttribute("x","0"),Zs.setAttribute("dy","1em"),_o.setAttribute("class","altiPathCoords"),_o.setAttribute("x","0"),_o.setAttribute("dy","1em"),Fs.appendChild(xs),He.currentSlope&&Fs.appendChild(Zs),Fs.appendChild(_o);const Ls=document.createElementNS("http://www.w3.org/2000/svg","g");ms.appendChild(Ls);const Es=document.createElementNS("http://www.w3.org/2000/svg","path");Es.setAttribute("cs","100,100"),Es.setAttribute("fill","#FFFFFF"),Es.setAttribute("stroke","#CCCCCC"),Es.setAttribute("fill-opacity","0.8"),Es.setAttribute("stroke-width","1"),Es.setAttribute("stroke-opacity","1");const Ms=document.createElementNS("http://www.w3.org/2000/svg","path");Ms.setAttribute("cs","100,100"),Ms.setAttribute("fill","#FFFFFF"),Ms.setAttribute("stroke","#000000"),Ms.setAttribute("fill-opacity","0"),Ms.setAttribute("stroke-width","1"),Ms.setAttribute("stroke-opacity","0.4"),Ms.setAttribute("transform","translate(1,1)"),Ls.appendChild(Ms),Ls.appendChild(Es),Ls.appendChild(Fs),Ls.setAttribute("class","tooltipInit"),Ls.style.pointerEvents="none";function za(){ps.setAttribute("visibility","visible"),Is.setAttribute("visibility","visible"),As.setAttribute("visibility","visible"),Oe.__createProfileMarker(ke,We[0]),Fs.classList.remove("tooltipInit"),Ls.classList.remove("tooltipInit"),Fs.classList.remove("tooltipFadeOut"),Ls.classList.remove("tooltipFadeOut"),Fs.classList.add("tooltipFadeIn"),Ls.classList.add("tooltipFadeIn")}function qs(){ps.setAttribute("visibility","hidden"),Is.setAttribute("visibility","hidden"),As.setAttribute("visibility","hidden"),Oe.__removeProfileMarker(ke),Fs.classList.remove("tooltipFadeIn"),Ls.classList.remove("tooltipFadeIn"),Fs.classList.add("tooltipFadeOut"),Ls.classList.add("tooltipFadeOut")}function $o(Ts){const Cs=li.createSVGPoint();Cs.x=Ts.clientX,Cs.y=Ts.clientY;const ho=Cs.matrixTransform(li.getScreenCTM().inverse()),Co=this._svgXToDataDist(ho.x,ii,ui,Ki)*zr,Js=Math.max(1,this._arrayBisect(Ps,Co)),Os=We[Js-1],Us=We[Js];let Vs=Os;Co-Os.dist>Us.dist-Co&&(Vs=Us);const ya=this._dataDistToSvgX(Vs.dist/zr,ii,ui,Ki),pa=this._dataZToSvgY(Vs.z,Oi,Fi,br);As.setAttribute("cx",ya),As.setAttribute("cy",pa),ps.setAttribute("x1",ya),ps.setAttribute("y1",Oi),ps.setAttribute("x2",ya),ps.setAttribute("y2",0),Is.setAttribute("x1",si+oi),Is.setAttribute("y1",pa),Is.setAttribute("x2",ui+si+oi),Is.setAttribute("y2",pa),Oe.__updateProfileMarker(ke,Vs);const Aa=`Altitude : ${Vs.z.toLocaleString()} m`,ka=`Pente : ${Vs.slope} %`,Pa=`(lat : ${Vs.lat.toLocaleString()} / lon : ${Vs.lon.toLocaleString()})`;xs.innerHTML=Aa,Zs.innerHTML=ka,_o.innerHTML=Pa;const sa=Math.max(this._getTextWidth(Pa,_o),this._getTextWidth(Aa,xs));let oa;Vs.dist>Sn*zr/2?(oa=`M -0.5 -0.5 l -6 6 l 0 16 l -${sa+10} 0 l 0 -44 l ${sa+10} 0 l 0 16 l 6 6`,Fs.setAttribute("transform",`translate(${-(sa/2+12)},0)`)):Vs.dist<=Sn*zr/2&&(oa=`M -0.5 -0.5 l 6 6 l 0 16 l ${sa+10} 0 l 0 -44 l -${sa+10} 0 l 0 16 l -6 6`,Fs.setAttribute("transform",`translate(${sa/2+12},0)`)),Es.setAttribute("d",oa),Ms.setAttribute("d",oa),Ls.setAttribute("transform",`translate(${ya},${pa})`),Ls.style.transform=`translate(${ya}px,${pa}px)`}return Rs.addEventListener("pointerover",za),Rs.addEventListener("pointerout",qs),Rs.addEventListener("pointermove",$o.bind(this)),ms.appendChild(Rs),li.appendChild(ms),Ln.appendChild(li),e},displayProfileRaw:function(Te,e,t,Oe){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var ke=Te&&Te.points?Te.points:{},Be=document.createElement("textarea");return Be.id="profilElevationResults",Be.rows=10,Be.cols=50,Be.style.width="100%",Be.innerHTML=JSON.stringify(ke,void 0,4),Be.addEventListener("mouseover",function(Ue){Oe.__customRawProfileMouseOverEvent(t,Ue)}),e.appendChild(Be),e}},displayProfileLibD3:function(Te,e,t,Oe){var ke=t;if(e&&Te){for(;e.firstChild;)e.removeChild(e.firstChild);var Be=Te.points;if(Te.distance>2e3){Te.unit="km";for(let fi=0;fi<Be.length;fi++)Be[fi].dist/=1e3}var Ue=ke.options.displayProfileOptions,He={top:20,right:20,bottom:30,left:40},We=window.getComputedStyle(e).getPropertyValue("width"),Cn=window.getComputedStyle(e).getPropertyValue("height"),An=We.replace(/px/,"")-He.left-He.right,En=Cn.replace(/px/,"")-He.top-He.bottom,Sn=d3.scale.linear().range([0,An]),Tn=d3.scale.linear().range([En,0]),Ln=d3.svg.axis().scale(Sn).orient("bottom").ticks(5),Bn=d3.svg.axis().scale(Tn).orient("left").ticks(5),ti=d3.svg.line().interpolate("basis").x(function(fi){return Sn(fi.dist)}).y(function(fi){return Tn(fi.z)}),ni=d3.svg.area().interpolate("basis").x(function(fi){return Sn(fi.dist)}).y0(En).y1(function(fi){return Tn(fi.z)}),ii=d3.select(e).append("svg").attr("width",An+He.left+He.right).attr("height",En+He.top+He.bottom).append("g").attr("transform","translate("+He.left+","+He.top+")"),si=d3.extent(Be,function(fi){return fi.dist});Sn.domain(si);var oi=[0,d3.max(Be,function(fi){return fi.z})];Tn.domain(oi),ii.append("path").datum(Be).attr("class","area-d3").attr("d",ni),ii.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+En+")").call(Ln).append("text").attr("y",-15).attr("dy",".71em").attr("x",An).text("Distance ("+Te.unit+")"),ii.append("g").attr("class","y axis-d3").call(Bn).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),ii.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+En+")").call(Ln.orient("bottom").tickSize(-En,0,0).tickFormat("")),ii.append("g").attr("class","grid-d3 horizontal").call(Bn.orient("left").tickSize(-An,0,0).tickFormat("")),ii.append("path").datum(Be).attr("class","line-d3").attr("d",ti),ii.selectAll("circle").data(Be).enter().append("circle").attr("cx",function(fi){return Sn(fi.dist)}).attr("cy",function(fi){return Tn(fi.z)}).attr("r",0).attr("class","circle-d3");var ci=ii.append("g").style("display","none");ci.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),ci.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),ci.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var vi=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),pi=d3.bisector(function(fi){return fi.dist}).left;return ii.append("rect").attr("class","overlay-d3").attr("width",An).attr("height",En).on("mouseover",function(){ci.style("display",null),Oe.__createProfileMarker(ke,Be[0])}).on("mouseout",function(){ci.style("display","none"),Oe.__removeProfileMarker(ke),vi.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var fi=d3.mouse(this),Mi=Sn.invert(fi[0]),Oi=Math.max(1,pi(Be,Mi)),ui=Be[Oi-1],li=Be[Oi],Ri=Mi-ui[0]>li[0]-Mi?li:ui,Pi=Sn(Ri.dist),Fi=Tn(Ri.z);ci.select("#focusCircle").attr("cx",Pi).attr("cy",Fi),ci.select("#focusLineX").attr("x1",Pi).attr("y1",Tn(oi[0])).attr("x2",Pi).attr("y2",Tn(oi[1])),ci.select("#focusLineY").attr("x1",Sn(si[0])).attr("y1",Fi).attr("x2",Sn(si[1])).attr("y2",Fi),Oe.__updateProfileMarker(ke,Ri),vi.transition().duration(200).style("opacity",.9);var Hi="";Hi+=" Altitude : "+Ri.z+" m",Ue.currentSlope&&(Hi+="<br/> Pente : "+Ri.slope+" %"),Hi+="<br/> (Lat : "+Ri.lat+"/ Lon : "+Ri.lon+")",vi.html(Hi).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),ii}},displayProfileLibAmCharts:function(Te,e,t,Oe){var ke=t;if(e&&Te){var Be=Te.points,Ue="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",He=ke.options.displayProfileOptions.currentSlope;if(He&&(Ue+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),Ue+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),Te.distance>2e3){Te.unit="km";for(let Sn=0;Sn<Be.length;Sn++)Be[Sn].dist/=1e3}for(let Sn=0;Sn<Be.length;Sn++){var We=Be[Sn].dist,Cn=100;We>100?Cn=1:We>10&&(Cn=10),We=Math.round(We*Cn)/Cn,Be[Sn].dist=We}var An={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+Te.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:Ue,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Be},En=AmCharts.makeChart(e,An);return En.addListener("changed",function(Sn){var Tn=Sn.chart.dataProvider[Sn.index];Oe.__updateProfileMarker(ke,Tn)}),En}}},logger$b=LoggerByDefault.getLogger("elevationpath"),ca,ElevationPath=(ca=class extends ControlExtended{constructor(e){if(logger$b.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof ca))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var Oe=e;Oe._marker&&(Oe._measureSource.removeFeature(Oe._marker),Oe._marker=null);var ke=Oe.getMap(),Be=ke.getView().getProjection(),Ue=transform$1([t.lon,t.lat],"EPSG:4326",Be),He=Oe._measureSource.getFeatures()[0].getGeometry().getClosestPoint(Ue),We=new Point$1(He);Oe._marker=new Feature({geometry:We}),logger$b.trace(We),Oe._marker.setStyle(Oe._markerStyle),Oe._measureSource.addFeature(Oe._marker)}static __updateProfileMarker(e,t){var Oe=e;ca.__removeProfileMarker(Oe),ca.__createProfileMarker(Oe,t)}static __customRawProfileOperation(e,t){logger$b.log("__customRawProfileOperation");for(var Oe=e,ke=t.points,Be=Oe.getMap().getView().getProjection(),Ue=0;Ue<ke.length;Ue++){var He=ke[Ue],We=transform$1([He.lon,He.lat],"EPSG:4326",Be),Cn=new Point$1(We);Oe._marker=new Feature({geometry:Cn}),logger$b.trace(Cn);var An=ca.DEFAULT_STYLES.RESULTS,En=new CircleStyle({radius:An.imageRadius,stroke:new Stroke({color:An.imageStrokeColor,width:An.imageStrokeWidth}),fill:new Fill({color:An.imageFillColor})});Oe._marker.setStyle(new Style$1({image:En})),Oe._measureSource.addFeature(Oe._marker)}}static __customRawProfileMouseOverEvent(e,t){logger$b.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$b.log("Lib. AmCharts is not loaded !");return}var ke=ProfileElevationPathDOM.displayProfileLibAmCharts(e,t,Oe,ca);ke&&(this._profile=ke)}static DISPLAY_PROFILE_LIB_D3(e,t,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$b.log("Lib. D3 is not loaded !");return}var ke=ProfileElevationPathDOM.displayProfileLibD3(e,t,Oe,ca);ke&&(this._profile=ke)}static DISPLAY_PROFILE_RAW(e,t,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_RAW");var ke=ProfileElevationPathDOM.displayProfileRaw(e,t,Oe,ca);ke&&(this._profile=ke)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var ke=ProfileElevationPathDOM.displayProfileByDefault(e,t,Oe,ca);ke&&(this._profile=ke)}setMap(e){if(logger$b.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$b.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$b.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$b.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new GeoJSON({defaultStyle:this._drawStyleFinish}),Oe=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return Oe}getStyle(){return this._drawStyleFinish}clean(e){logger$b.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$b.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var Oe=t.apply;this.options.displayProfileOptions.apply=typeof Oe=="function"?Oe:ca.DISPLAY_PROFILE_BY_DEFAULT;var ke=t.target;this.options.displayProfileOptions.target=typeof ke<"u"?ke:null;var Be=e.stylesOptions||{};this.options.stylesOptions.draw=Be.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Be.marker||{},this._createStylingMarker()}_initializeContainer(){logger$b.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var Oe=this._panelContainer=this._createElevationPathPanelElement(),ke=this._createElevationPathPanelDivElement();Oe.appendChild(ke);var Be=this._createElevationPathPanelHeaderElement();ke.appendChild(Be);var Ue=this._createElevationPathPanelProfilElement();this._profileContainer=Ue.firstChild,ke.appendChild(Ue);var He=this._waitingContainer=this._createElevationPathWaitingElement();ke.appendChild(He);var We=this._infoContainer=this._createElevationPathInformationsElement();ke.appendChild(We);var Cn=this._createDrawingButtonsPluginDiv();return ke.appendChild(Cn),this.options.displayProfileOptions.target===null&&e.appendChild(Oe),e}_createStylingMarker(){logger$b.trace("ElevationPath::_createStylingMarker ");var e=ca.DEFAULT_STYLES.MARKER;logger$b.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$b.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$b.trace("style start",e.start);var t={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(t.stroke=e.start),this._drawStyleStart=new Style$1(t),logger$b.trace("style finish",e.finish);var Oe={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(Oe.stroke=e.finish),this._drawStyleFinish=new Style$1(Oe)}_createStylingProfile(){logger$b.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$b.trace("style profile",e);var t=ca.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(Oe=>{if(!e.hasOwnProperty(Oe))e[Oe]=t[Oe];else{var ke=t[Oe];typeof ke=="object"&&(Helper.mergeParams(ke,e[Oe]),e[Oe]=ke)}})}_initMeasureInteraction(e){logger$b.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof LayerSwitcher){var Oe=this._measureVector.gpLayerId;t._layers[Oe].title===Oe&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$b.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{logger$b.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var Oe=this._measureSource.getFeatures(),ke=0;ke<Oe.length;ke++)this._measureSource.removeFeature(Oe[ke]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{logger$b.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){logger$b.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),Oe=t.getView().getProjection(),ke="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0;Ue<Be.length;Ue++){var He=Be[Ue],We=He;Oe!==ke&&(We=transform$1(He,Oe,ke)),e.push({lon:Math.round(We[0]*1e8)/1e8,lat:Math.round(We[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),Oe=t.getView().getProjection(),ke="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0,He=Be.length-1;Ue<He;++Ue){var We=transform$1(Be[Ue],Oe,ke),Cn=transform$1(Be[Ue+1],Oe,ke);We[0]=Math.round(We[0]*1e8)/1e8,We[1]=Math.round(We[1]*1e8)/1e8,Cn[0]=Math.round(Cn[0]*1e8)/1e8,Cn[1]=Math.round(Cn[1]*1e8)/1e8,e+=getDistance(We,Cn)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),Oe="EPSG:4326",ke=[],Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0;Ue<Be.length;Ue++){var He=transform$1(Be[Ue],t,Oe);He[0]=Math.round(He[0]*1e8)/1e8,He[1]=Math.round(He[1]*1e8)/1e8,ke.push(He)}return ke}_requestService(){logger$b.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$b.trace("geometry",e),!e){logger$b.warn("missing geometry !?");return}var t={};Helper.mergeParams(t,this.options.elevationOptions),Helper.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),Helper.mergeParams(t,{ssl:t.ssl});var Oe=this,ke=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Be=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",Ue=function(Cn){logger$b.trace(Cn),Cn&&(Oe._panelContainer.style.display="block",Oe._data&&(Oe._data={}),Oe._data=Oe._computeElevationMeasure(Cn.elevations),Oe._displayProfile(Oe._data),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0)),Be&&Oe.options.elevationOptions.onSuccess.call(Oe,Oe.getData())},He=function(Cn){Oe._panelContainer.style.display="none",logger$b.error(Cn.message),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0),ke&&Oe.options.elevationOptions.onFailure.call(Oe,Cn)};Helper.mergeParams(t,{onSuccess:Ue,onFailure:He});var We=t.sampling||200;We>0&&Helper.mergeParams(t,{sampling:We}),Helper.mergeParams(t,{positions:e}),logger$b.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(t)}_computeElevationMeasure(e){logger$b.trace("ElevationPath::_computeElevationMeasure",e);var t=e,Oe="m",ke=this._getSketchCoords();if(ke){t[0].dist=0,t[0].slope=0,t[0].oldlat=t[0].lat,t[0].oldlon=t[0].lon,t[0].lat=Math.round(t[0].lat*1e5)/1e5,t[0].lon=Math.round(t[0].lon*1e5)/1e5;var Be=0,Ue=0,He=0,We=0,Cn=0,An=0,En=[];console.log(t);for(var Sn=1;Sn<t.length;Sn++){var Tn=[t[Sn].lon,t[Sn].lat],Ln=getDistance(Tn,[t[Sn-1].oldlon,t[Sn-1].oldlat]),Bn=Ln+Cn,ti=t[Sn].z,ni=t[Sn-1].z;ti<0&&(ti=0),ni<0&&(ni=0);var ii=ti-ni;ii<0?(Be+=Ln,We+=ii):ii>0&&(Ue+=Ln,He+=ii),Cn=Bn,t[Sn].dist=Bn,En.push(Cn),An+=ii?Math.abs(Math.round(ii/Bn*100)):0,t[Sn].slope=ii?Math.abs(Math.round(ii/Bn*100)):0;var si=t[Sn].slope;si>15&&si<30?t[Sn].color="#005b4c":si>30&&si<45?t[Sn].color="#00362d":si>45?t[Sn].color="#00120f":t[Sn].color="#00B798",t[Sn].oldlat=t[Sn].lat,t[Sn].oldlon=t[Sn].lon,t[Sn].lat=Math.round(t[Sn].lat*1e5)/1e5,t[Sn].lon=Math.round(t[Sn].lon*1e5)/1e5}logger$b.trace("List Distances",En);for(var oi=t[0].z,ci=t[0].z,vi=t[0].slope,pi=0;pi<t.length;pi++){var fi=t[pi];fi.z<-100&&(fi.z=0),fi.z>ci&&(ci=fi.z),fi.z<oi&&(oi=fi.z),fi.slope>vi&&(vi=fi.slope)}return{greaterSlope:vi,meanSlope:Math.round(An/t.length),distancePlus:Ue,distanceMinus:Be,ascendingElevation:He,descendingElevation:We,altMin:oi.toLocaleString(),altMax:ci.toLocaleString(),distance:this._getLength(),unit:Oe,points:t}}}_displayProfile(e){logger$b.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var Oe=this,ke=this.options.displayProfileOptions.apply;ke.call(this,e,t,Oe);var Be=this.options.displayProfileOptions,Ue=document.getElementById("GPelevationPathPanelInfo-"+this._uid);Ue&&(Be.totalDistance||Be.greaterSlope||Be.meanSlope||Be.ascendingElevation||Be.descendingElevation)&&(Ue.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$b.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,Oe=this.options.displayProfileOptions.greaterSlope,ke=this.options.displayProfileOptions.ascendingElevation,Be=this.options.displayProfileOptions.descendingElevation,Ue=this._infoContainer;if(Ue.childElementCount)for(;Ue.firstChild;)Ue.removeChild(Ue.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : ",Math.round(this._data.distance).toLocaleString()+" m"),ke&&this._addElevationPathInformationsItem("Dénivelé positif : ",this._data.ascendingElevation.toLocaleString()+" m"),Be&&this._addElevationPathInformationsItem("Dénivelé négatif : ",this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : ",this._data.meanSlope.toLocaleString()+" %"),Oe&&this._addElevationPathInformationsItem("Plus forte pente : ",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){var t=this._pictoButton.ariaPressed;t==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe,{current:"ElevationPath"}),t==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(Oe),this._addMeasureInteraction(Oe)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(Oe,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(Oe,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Tc(ca,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),ca);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$a=LoggerByDefault.getLogger("layerimport"),bo,LayerImport=(bo=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof bo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(Oe){Oe.element.gpResultLayerId==="layerimport:MAPBOX"&&Oe.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(Oe.element.gpEditorId),t._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),t._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},t),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$a.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:bo.DefaultStyles.image,stroke:bo.DefaultStyles.stroke,fill:bo.DefaultStyles.fill,text:bo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:bo.DefaultStyles.image,stroke:bo.DefaultStyles.stroke,fill:bo.DefaultStyles.fill,text:bo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:bo.DefaultStyles.image,stroke:bo.DefaultStyles.stroke,fill:bo.DefaultStyles.fill,text:bo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:bo.DefaultStyles.image,stroke:bo.DefaultStyles.stroke,fill:bo.DefaultStyles.fill,text:bo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],Oe=0;Oe<e.layerTypes.length;Oe++)t.push(e.layerTypes[Oe]);this.options.layerTypes=t}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))logger$a.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var Oe=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],ke=[],Be=0;Be<t.length;Be++)typeof t[Be]!="string"?(ke.push(Be),logger$a.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[Be]+")")):(t[Be]=t[Be].toUpperCase(),Oe.indexOf(t[Be])===-1&&(ke.push(Be),logger$a.log("[ol.control.LayerImport] options.layerTypes : "+t[Be]+" is not a supported type")),t[Be]==="GEOJSON"&&(t[Be]="GeoJSON"),t[Be]==="MAPBOX"&&(t[Be]="MAPBOX"));if(ke.length!==0)for(var Ue=ke.length-1;Ue>=0;Ue--)t.splice(ke[Ue],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var Oe=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:Oe.image,stroke:Oe.stroke,fill:Oe.fill,text:Oe.text});var ke=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:ke.image,stroke:ke.stroke,fill:ke.fill,text:ke.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var Oe=this._importPanel=this._createImportPanelElement(),ke=this._createImportPanelDivElement();Oe.appendChild(ke);var Be=this._importPanelHeader=this._createImportPanelHeaderElement(),Ue=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Be.appendChild(Ue);var He=this._importPanelTitle=this._createImportPanelTitleElement();Be.appendChild(He);var We=this._panelCloseButton=this._createImportPanelCloseElement();Be.appendChild(We),ke.appendChild(Be);var Cn=this._formContainer=this._initInputFormElement();ke.appendChild(Cn);var An=this._getCapPanel=this._createImportGetCapPanelElement(),En=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();An.appendChild(En),ke.appendChild(An);var Sn=this._mapBoxPanel=this._createImportMapBoxPanelElement(),Tn=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();Sn.appendChild(Tn);var Ln=this._loadingContainer=this._createLoadingElement();Sn.appendChild(Ln),ke.appendChild(Sn);var Bn=this._waitingContainer=this._createImportWaitingElement();return ke.appendChild(Bn),e.appendChild(Oe),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var Oe=this._createImportStaticParamsContainer(this.options.layerTypes[0]),ke=this._createStaticNameLabel();Oe.appendChild(ke);var Be=this._createStaticModeChoiceDiv(),Ue=this._createStaticLocalChoiceDiv();Be.appendChild(Ue);var He=this._createStaticUrlChoiceDiv();Be.appendChild(He),Oe.appendChild(Be);var We=this._createStaticLocalInputDiv();We.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),We.appendChild(this._staticLocalImportInput),Oe.appendChild(We);var Cn=this._createStaticUrlInputDiv();Cn.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),Cn.appendChild(this._staticUrlImportInput),Oe.appendChild(Cn),e.appendChild(Oe);var An=this._createServiceParamsContainer(this.options.layerTypes[0]),En=this._createServiceUrlDiv();En.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),En.appendChild(this._serviceUrlImportInput),An.appendChild(En),e.appendChild(An);var Sn=this._createImportSubmitFormElement();return e.appendChild(Sn),e}_onShowImportClick(e){var t=this._showImportButton.ariaPressed;t==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._onGetCapPanelClose(),this._onMapBoxPanelClose(),this._loadingContainer.className=""}_onImportSubmit(){logger$a.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",logger$a.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$a.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$a.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(logger$a.log("url : ",t),t.length===0){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=ProxyUtils.proxifyUrl(t,this.options.webServicesOptions));var Oe=this;Gp.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(ke){Oe._hideWaitingContainer(),Oe._addFeaturesFromImportStaticLayer(ke,e)},onFailure:function(ke){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",ke)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){logger$a.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var Oe=new FileReader,ke=this;Oe.onerror=Be=>{ke._hideWaitingContainer(),logger$a.error("error fileReader : ",Be)},Oe.onprogress=()=>{logger$a.log("onprogress")},Oe.onloadstart=()=>{ke._displayWaitingContainer(),logger$a.log("onloadstart")},Oe.onabort=()=>{ke._hideWaitingContainer(),logger$a.log("onabort")},Oe.onloadend=Be=>{logger$a.log("onloadend : ",Be)},Oe.onload=Be=>{logger$a.log("fileReader onload - file content : ",Be.target.result),ke._hideWaitingContainer(),ke._addFeaturesFromImportStaticLayer(Be.target.result,e)},Oe.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var Oe=this.getMap();if(!(!Oe||!e)){var ke=null,Be=null,Ue=null,He=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var We=this,Cn=JSON.parse(e),An=Cn.sources,En=Object.keys(An).length>1?1:0;for(var Sn in An)if(An.hasOwnProperty(Sn)){var Tn="",Ln="",Bn=null,ti=null,ni=null,ii=null;if(Cn.metadata){for(var si in Cn.metadata)if(Cn.metadata.hasOwnProperty(si)){var oi=si.split(":");if(oi[0]==="geoportail"){var ci=oi[1];if(ci==="title"){Tn=Cn.metadata[si];continue}if(ci==="description"){Ln=Cn.metadata[si];continue}if(ci==="quicklookUrl"){Bn=Cn.metadata[si];continue}if(ci==="legends"){ti=Cn.metadata[si];continue}if(ci==="metadata"){ni=Cn.metadata[si];continue}if(ci==="originators"){ii=Cn.metadata[si];continue}}}}Tn||(Tn="Couche MapBox"),Ln||(Ln="Couche MapBox"),Tn=En?Tn+"("+Sn+")":Tn;var vi=An[Sn],pi=vi.type;if(pi==="vector"){var fi=vi.url,Mi=vi.tiles,Oi=Cn.sprite;if(fi&&fi.indexOf("mapbox://")===0){var ui=this._url;if(ui){if(Mi=["a","b","c","d"].map(function(ur){var Ki=fi.replace("mapbox://",""),Nr=ui.split("?")[1];return"https://"+ur+".tiles.mapbox.com/v4/"+Ki+"/{z}/{x}/{y}.vector.pbf?"+Nr}),Oi.indexOf("mapbox://")===0){var li=ui.split("?");Cn.sprite=li[0]+"/sprite?"+li[1]}}else logger$a.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Mi)Ue=new MVT({featureClass:Feature}),Be=new VectorTile({attributions:vi.attribution,format:Ue,urls:Mi}),Be._title=Tn,Be._description=Ln,Be._quicklookUrl=Bn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,Be.on("tileloadstart",function(ur){We._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(ur){We._loadingContainer.className=""}),Be.on("tileloaderror",function(ur){We._loadingContainer.className=""}),ke=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),ke.id=Sn,ke.gpResultLayerId="layerimport:"+this._currentImportType;else if(fi){Ue=new MVT({featureClass:Feature}),ke=new VectorTileLayer({visible:!1,declutter:!0}),ke.id=Sn,ke.gpResultLayerId="layerimport:"+this._currentImportType;var Ri=new TileJSON({url:fi}),Pi=Ri.on("change",function(){if(Ri.getState()==="ready"){for(var ur=Ri.getTileJSON(),Ki=Array.isArray(ur.tiles)?ur.tiles:[ur.tiles],Nr=0;Nr<Ki.length;Nr++){var Or=Ki[Nr];Or.indexOf("http")!==0&&(Ki[Nr]=fi+Or)}Be=new VectorTile({attributions:Ri.getAttributions()||ur.attribution,format:Ue,urls:Ki}),Be._title=Tn,Be._description=Ln,Be._quicklookUrl=Bn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,Be.on("tileloadstart",function(Ir){We._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(Ir){We._loadingContainer.className=""}),ke.setSource(Be),ke.set("mapbox-extension",ur.vector_layers),unByKey(Pi)}})}}else if(pi==="geojson"){var Fi=vi.data;Ue=new GeoJSON,Be=new VectorTile({attributions:vi.attribution,format:Ue,url:Fi}),Be._title=Tn,Be._description=Ln,Be._quicklookUrl=Bn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,ke=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),ke.id=Sn,ke.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$a.warn("Type MapBox format unknown !");return}var Hi=JSON.parse(JSON.stringify(Cn));if(En){for(var nr=Hi.layers,ar=0;ar<nr.length;ar++){var cr=nr[ar];if(cr.source!==Sn){nr.splice(ar,1);continue}}for(var sr in Hi.sources)Hi.sources.hasOwnProperty(sr)&&sr!==Sn&&delete Hi.sources[sr]}var br={id:Sn,styles:Hi,layer:ke,options:{title:t||Tn,description:Ln,quicklookUrl:Bn,metadata:ni,legends:ti,originators:ii}};(function(ur){var Ki=()=>{applyStyle(ur.layer,ur.styles,{source:ur.id}).then(function(){var Ir=!0;ur.layer.setVisible(Ir);var Mr=1;ur.layer.setOpacity(Mr)}).then(function(){var Ir=Oe.getView().getProjection().getCode();Oe.getView()&&ur.styles.center&&ur.styles.center.length&&Oe.getView().setCenter(transform$1(ur.styles.center,"EPSG:4326",Ir)),Oe.getView()&&(ur.styles.zoom||ur.styles.zoom===0)&&Oe.getView().setZoom(ur.styles.zoom);var Mr=ur.layer.getSource();if(Oe.getView()&&Oe.getSize()){var Tr=null;Mr&&Mr.getExtent?Tr=Mr.getExtent():Tr=Mr.getTileGrid().getExtent(),Tr&&Tr[0]!==1/0&&Oe.getView().fit(Tr,Oe.getSize())}}).then(function(){We._hideFormContainer(),We._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),We._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),We._importPanelTitle.innerHTML="Edition des styles";var Ir=new Editor({target:We._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(ur.styles)),scope:this,events:{"editor:onloaded":We._onLoadedMapBox,"editor:layer:onclickvisibility":We._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":We._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":We._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":We._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":We._onDisplayLayerSourceMapBox},tools:We.options.vectorStyleOptions.MapBox.editor});return Ir.setContext("map",Oe),Ir.setContext("layer",ur.layer),Ir.createElement().then(function(){if(Ir.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){We.options.vectorStyleOptions.MapBox.display&&(We._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),We._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),We._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),We._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),We._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),We._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var Mr=We._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Tr=0;Tr<Mr.length;Tr++){const wr=Mr[Tr];wr.textContent==="bckgrd"&&(wr.textContent="Couleur de remplissage")}}).then(function(){ur.layer.set("mapbox-editor",Ir.getID()),setTimeout(function(){Oe.dispatchEvent({id:Ir.getID(),type:"editor:loaded",style:ur.styles,layer:ur.layer})},100)}).catch(function(Mr){throw Mr})}).then(function(){Oe.dispatchEvent({id:ur.id,type:"render:success",style:ur.styles})}).catch(function(Ir){logger$a.error(Ir),Oe.dispatchEvent({id:ur.id,type:"render:failure",error:Ir})})};logger$a.warn(ur.layer);var Nr=Oe.get("mapbox-styles")||{},Or=ur.id;Nr[Or]=ur.styles,Oe.set("mapbox-styles",Nr),ur.layer.set("mapbox-styles",ur.styles),Oe.addLayer(ur.layer),We.dispatchEvent({type:"layerimport:mapbox:added",name:t,data:e,layer:ur.layer,format:We._currentImportType.toLowerCase()||"mapbox"}),ur.layer.getSource()?Ki():ur.layer.once("change:source",Ki),Oe.getControls().forEach(Ir=>{Ir instanceof LayerSwitcher&&Ir.addLayer(ur.layer,ur.options)})})(br)}}else{this._currentImportType==="KML"?(He=this.options.vectorStyleOptions.KML.defaultStyle,Ue=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[He]})):this._currentImportType==="GPX"?(He=this.options.vectorStyleOptions.GPX.defaultStyle,Ue=new GPX({defaultStyle:He})):this._currentImportType==="GeoJSON"&&(He=this.options.vectorStyleOptions.GeoJSON.defaultStyle,Ue=new GeoJSON({defaultStyle:He}));var Ni=Ue.readProjection(e),or=this._getMapProjectionCode(),er=null;er=Ue.readFeatures(e,{dataProjection:Ni,featureProjection:or}),logger$a.log("loaded features : ",er),Be=new VectorSource({features:new Collection}),Be.addFeatures(er),logger$a.trace(Be),Be._title=Be._description=t,ke=new VectorLayer({source:Be,style:He}),ke.gpResultLayerId="layerimport:"+this._currentImportType;var fr=Ue.readRootExtensions("geoportail:compute");if(fr&&Object.keys(fr).length!==0){var mr={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},hr=fr.type,vr=fr.transport;if(hr){var _r=mr[hr].name,Ar=vr?_r+" ("+vr+")":_r,Vr=mr[hr].class;if(Vr){ke.gpResultLayerId="layerimport:COMPUTE",ke.set("control",hr),ke.set("name",_r),ke.set("graph",vr),ke.set("data",fr),ke.set("title",Ar);var Wr=new GeoJSON({defaultStyle:He}),tr=Wr.writeFeatures(er,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});ke.set("geojson",tr),this.getMap().getControls().forEach(ur=>{ur instanceof Vr&&(ur.setData(fr),ur.setLayer(ke),ur.init())})}}}if(Oe.addLayer(ke),Oe.getView()&&Oe.getSize()&&Be.getExtent){var pr=Be.getExtent();pr&&pr[0]!==1/0&&Oe.getView().fit(pr,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,data:e,layer:ke,format:this._currentImportType.toLowerCase()})}}}_addFeaturesFromImportStaticLayerUrl(e,t){var Oe=this.getMap();if(!(!Oe||!e)){var ke,Be,Ue;if(this._currentImportType==="MAPBOX"?logger$a.trace("Not yet implemented !"):(this._currentImportType==="KML"?Ue=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?Ue=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(Ue=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),ke=new VectorSource({url:e,format:Ue}),this._currentImportType==="GPX"&&ke.forEachFeature(function(We){We.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GPX feature"),We.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&ke.forEachFeature(function(We){We.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GeoJSON feature"),We.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),ke._title=ke._description=t,Be=new VectorLayer({source:ke})),Be.gpResultLayerId="layerimport:"+this._currentImportType,Oe.addLayer(Be),Oe.getView()&&Oe.getSize()&&ke.getExtent){var He=ke.getExtent();He&&He[0]!==1/0&&Oe.getView().fit(He,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,url:e,layer:Be,format:this._currentImportType.toLowerCase()})}}_onLoadedMapBox(e){var t=e.target.data.obj,Oe=this.getContext("layer");Oe.get("mapbox-source")===t.source&&(Oe.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,He=0;He<Ue.length;He++)if(Ue[He].id===t.id){var We=Ue[He].layout;We?We.visibility=Oe.checked?"visible":"none":Ue[He].layout={visibility:Oe.checked?"visible":"none"};break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(Cn){logger$a.error(Cn)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,He=0;He<Ue.length;He++)if(Ue[He].id===t.id){Ue[He].minzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(We){logger$a.error(We)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,He=0;He<Ue.length;He++)if(Ue[He].id===t.id){Ue[He].maxzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(We){logger$a.error(We)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,He=0;He<Ue.length;He++)if(Ue[He].id===t.id){var We=Ue[He].paint;We&&(We[Oe.dataset.id]=Oe.value);break}applyStyle(ke,Be,{source:t.source,updateSource:!0}).then(function(){}).catch(function(Cn){logger$a.error(Cn)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){var ke=e.target.currentTarget.parentNode.id,Be=ke.substring(ke.indexOf("-")+1,ke.indexOf("_")),Ue=this.getLayer(Be);Ue.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$a.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$a.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var Oe=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(ke){Oe._hideWaitingContainer(),Oe._displayGetCapResponseLayers(ke)},onFailure:function(ke){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] getCapabilities request failed : ",ke)}})}_displayGetCapResponseLayers(e){var t,Oe,ke={content:null,title:null},Be;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){t=new WMSCapabilities;var Ue=this._getCapResponseWMS=t.read(e);if(logger$a.log("getCapabilities response : ",Ue),Ue&&Ue.Capability&&Ue.Capability.Layer){var He=Ue.Capability.Layer;if(Array.isArray(He))for(var We=0;We<He.length;We++)this._displayGetCapResponseWMSLayer(He[We]);else this._displayGetCapResponseWMSLayer(He)}}else if(this._currentImportType==="WMTS"){t=new WMTSCapabilities;var Cn=this._getCapResponseWMTS=t.read(e);if(logger$a.log("getCapabilities response : ",Cn),Cn&&Cn.Contents&&Cn.Contents.Layer&&(Oe=Cn.Contents.Layer,Array.isArray(Oe))){this._getCapResponseWMTSLayers=Oe;for(var An=0;An<Oe.length;An++)if(Be=this._getWMTSLayerProjection(Oe[An],Cn),Be&&typeof Be=="string")if(get$3(Be)||get$3(Be.toUpperCase()))ke={content:Oe[An].Title,title:Oe[An].Abstract||Oe[An].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(ke,An,this._getCapResultsListContainer);else{logger$a.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",Oe[An]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){logger$a.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$a.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var Oe=this._getMapProjectionCode(),ke,Be={content:null,title:null};if(t){var Ue,He,We=["CRS","Style"];for(He=0;He<We.length;He++)if(Ue=We[He],Array.isArray(t[Ue])&&t[Ue].length!==0)if(Array.isArray(e[Ue])&&e[Ue].length!==0)for(var Cn=0;Cn<t[Ue].length;Cn++)e[Ue].indexOf(t[Ue][Cn])===-1&&e[Ue].push(t[Ue][Cn]);else e[Ue]=t[Ue];var An=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(He=0;He<An.length;He++)Ue=An[He],t[Ue]&&!e[Ue]&&(e[Ue]=t[Ue])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var En=e?e._container:t._container,Sn=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(Sn,En).lastChild;for(var Tn=0;Tn<e.Layer.length;Tn++){for(var Ln=!1,Bn=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),ti=0;ti<Bn.length;ti++)Bn[ti].title===e.Title&&(Ln=!0,e.Layer[Tn]._container=Bn[ti].parentElement);Ln||(e.Layer[Tn]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[Tn],e)}}}else{var ni=this._getCapResponseWMSLayers.length;if(ke=this._getWMSLayerProjection(e,Oe),!ke)logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=ke,Be={content:e.Title,title:e.Abstract||e.Title};var ii=e._container;ii.localName==="ul"&&(ii=ii.lastChild),this._addImportGetCapResultLayer(Be,ni,ii),this._getCapResponseWMSLayers[ni]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var Oe;this._currentImportType==="WMS"?(Oe=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(Oe)):this._currentImportType==="WMTS"&&(Oe=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(Oe))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var Oe=this._getMapProjectionCode(),ke={},Be=this._getWMSLayerGetMapUrl();if(Be)ke.url=Be;else{var Ue=this._getCapRequestUrl.indexOf("?");Ue!==-1?ke.url=this._getCapRequestUrl.substring(0,Ue):ke.url=this._getCapRequestUrl}if(ke.params={},e.Name)ke.params.LAYERS=e.Name;else{logger$a.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}ke.params.SERVICE="WMS",this._getCapResponseWMS.version&&(ke.params.VERSION=this._getCapResponseWMS.version);var He=e._projection;if(He)He!==Oe&&(ke.projection=He);else{logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var We;if(e.Style&&Array.isArray(e.Style)){var Cn=e.Style[0];ke.params.STYLES=Cn.Name,Cn.LegendURL&&Array.isArray(Cn.LegendURL)&&Cn.LegendURL.length!==0&&(We=Cn.LegendURL[0].OnlineResource)}var An=new TileWMS(ke);this._getWMSLayerInfoForLayerSwitcher(e,We,An);var En={};En.source=An,this._getWMSLayerMinMaxResolution(e,Oe,En),this._getWMSLayerExtent(e,Oe,En);var Sn=new TileLayer(En);if(Sn.setExtent(En.extent),Sn.gpResultLayerId="layerimport:WMS",e.queryable&&(Sn.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(Sn.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(Sn),t.getView()&&t.getSize()&&Sn.getExtent){var Tn=Sn.getExtent();Tn&&Tn[0]!==1/0&&t.getView().fit(Tn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Name,data:e,layer:Sn,format:"wms"})}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var Oe=t.DCPType[0];Oe&&Oe.HTTP&&Oe.HTTP.Get&&(e=Oe.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}var ke=e.CRS;if(Array.isArray(ke)){if(ke.includes(t))return Oe=t,Oe;var Be,Ue;for(Ue=0;Ue<ke.length;Ue++)if(Be=ke[Ue],Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase())))return Oe=Be,Oe}return Oe}_getWMSLayerMinMaxResolution(e,t,Oe){var ke=get$3(t).getUnits();if(ke==="m")e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*28e-5);else if(ke==="degrees"){var Be=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*Be),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*Be)}}_getWMSLayerExtent(e,t,Oe){if(!e){logger$a.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var ke=e.EX_GeographicBoundingBox,Be=e.BoundingBox;if(ke&&Array.isArray(ke))t==="EPSG:4326"?Oe.extent=ke:Oe.extent=transformExtent(ke,"EPSG:4326",t);else if(Be&&Array.isArray(Be)){for(var Ue,He,We=0;We<Be.length;We++)if(Ue=Be[We].crs,He=Be[We].extent,Ue){if(Ue===t){Oe.extent=He;break}else if(typeof Ue=="string"){var Cn=get$3(Ue)?get$3(Ue):get$3(Ue.toUpperCase());if(Cn){if(Cn.getUnits()==="degrees"&&Ue.toUpperCase().indexOf("EPSG")===0){var An=[He[1],He[0],He[3],He[2]];Oe.extent=transformExtent(An,Cn,t)}else Oe.extent=transformExtent(He,Cn,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,Oe){if(e.Title?(Oe._title=e.Title,Oe._description=e.Abstract?e.Abstract:e.Title):(Oe._title=e.Name,Oe._description=e.Abstract?e.Abstract:e.Name),t&&(Oe._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){Oe._metadata=[];for(var ke=0;ke<e.MetadataURL.length;ke++){var Be=e.MetadataURL[ke].OnlineResource;Be&&Oe._metadata.push({url:Be})}}if(e.Attribution){var Ue=e.Attribution;Oe._originators={},Ue.OnlineResource&&(Oe._originators.url=Ue.OnlineResource),Ue.Title&&(Oe._originators.name=Oe._originators.attribution=Ue.Title),Ue.LogoURL&&Ue.LogoURL.OnlineResource&&(Oe._originators.logo=Ue.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$a.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var Oe={};Oe.layer=e.Identifier,this._getCapResponseWMTS.version&&(Oe.version=this._getCapResponseWMTS.version);var ke=this._getWMTSLayerGetTileUrl();if(ke)Oe.url=ke;else{var Be=this._getCapRequestUrl.indexOf("?");Be!==-1?Oe.url=this._getCapRequestUrl.substring(0,Be):Oe.url=this._getCapRequestUrl}var Ue=this._getTMSParams(e);Oe.matrixSet=Ue.tms,Oe.projection=Ue.projCode,Oe.tileGrid=new WMTSTileGrid({resolutions:Ue.resolutions,matrixIds:Ue.matrixIds,origin:Ue.origin});var He,We;if(e.Style&&Array.isArray(e.Style))for(var Cn,An=0;An<e.Style.length&&(Cn=e.Style[An],He=Cn.Identifier,!Cn.isDefault);An++)Cn.LegendURL&&Array.isArray(Cn.LegendURL)&&Cn.LegendURL.length!==0&&(We=Cn.LegendURL[0].href);He==null&&logger$a.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),Oe.style=He;var En;e.Format&&Array.isArray(e.Format)&&(En=e.Format[0]),En==null&&logger$a.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),Oe.format=En;var Sn=new WMTS$1(Oe);e.Title?(Sn._title=e.Title,Sn._description=e.Abstract?e.Abstract:e.Title):(Sn._title=e.Identifier,Sn._description=e.Abstract?e.Abstract:e.Identifier),We&&(Sn._legends=[{url:We}]);var Tn={};Tn.source=Sn,Tn.extent=this._getWMTSLayerExtent(e);var Ln;try{Ln=new TileLayer(Tn),Ln.setExtent(Tn.extent)}catch(ti){logger$a.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",ti);return}if(Ln.gpResultLayerId="layerimport:WMTS",t.addLayer(Ln),t.getView()&&t.getSize()&&Ln.getExtent){var Bn=Ln.getExtent();Bn&&Bn[0]!==1/0&&t.getView().fit(Bn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Identifier,data:e,layer:Ln,format:"wmts"})}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){logger$a.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var ke=e.TileMatrixSetLink[0].TileMatrixSet,Be;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var Ue=t.Contents.TileMatrixSet,He=0;He<Ue.length;He++)if(Ue[He].Identifier===ke&&Ue[He].TileMatrix){var We=Ue[He];Be=We.SupportedCRS,Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase()))&&(Oe=Be);break}}}return Oe}_getTMSParams(e){var t={},Oe=[],ke=[],Be=[],Ue,He,We,Cn=this.getMap();if(Cn){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(Ue=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var An=this._getCapResponseWMTS.Contents.TileMatrixSet,En=0;En<An.length;En++)if(An[En].Identifier===Ue&&An[En].TileMatrix){var Sn=An[En],Tn,Ln,Bn,ti,ni;if(Sn.SupportedCRS&&(He=Sn.SupportedCRS,We=get$3(He)),We&&We.getUnits&&(ni=We.getUnits()),Array.isArray(Sn.TileMatrix))for(var ii=0;ii<Sn.TileMatrix.length;ii++)Tn=Sn.TileMatrix[ii],Tn.Identifier!=null&&(Ln=parseInt(Tn.Identifier,10),Oe.push(Ln)),Bn=Tn.ScaleDenominator,ni==="degrees"?ti=Bn*28e-5*180/(Math.PI*6378137):ti=Bn*28e-5,ke.push(ti),Be=Tn.TopLeftCorner;ke.sort!==void 0&&ke.sort(function(si,oi){return oi-si}),Oe.sort!==void 0&&Oe.sort(function(si,oi){return si-oi})}}else logger$a.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=Ue,t.projCode=He,t.matrixIds=Oe,t.resolutions=ke,t.origin=Be,t}}_getWMTSLayerExtent(e){var t,Oe=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=transformExtent(e.WGS84BoundingBox,"EPSG:4326",Oe)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$a.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de données"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let Oe=0;Oe<t.length;Oe++){const ke=t[Oe];ke.id==="GPEditorMapBoxContainer_ID_"+e&&ke.remove()}}}},Tc(bo,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),bo);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$9=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class of extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof of))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(Oe=>{if(!(Oe instanceof of)&&Oe){for(var ke=Oe.element.classList,Be=0;Be<ke.length;Be++)if(ke[Be]==="ol-attribution"){t.remove(Oe);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},Oe=e.getView(),ke=Oe.calculateExtent(e.getSize()),Be=Oe.getProjection().getCode(),Ue=transformExtent(ke,Be,"EPSG:4326"),He=[Ue[3],Ue[0],Ue[1],Ue[2]],We=Oe.getZoom(),Cn=e.getLayers().getArray(),An=0;An<Cn.length;An++)if(Cn[An].getSource)this._updateLayerAttributions(Cn[An],t,He,Be,We);else if(Cn[An].getLayers){var En=Cn[An].getLayers();En.forEach(Sn=>{Sn.getSource?this._updateLayerAttributions(Sn,t,He,Be,We):logger$9.log("cannot find layer source in layergroup ",Cn[An])})}}_updateLayerAttributions(e,t,Oe,ke,Be){if(!e){logger$9.trace("layer is null !?");return}var Ue=e.getSource();if(!Ue){logger$9.trace("source is not yet loaded !");return}t||(t={});var He=[],We=e.getVisible(),Cn=Ue._originators;if(typeof Cn<"u"&&Ue.setAttributions(),Cn&&We){for(var An=LayerUtils.getAttributions({extent:Oe,crs:ke,zoom:Be,visibility:We,originators:Cn}),En=0;En<An.length;En++){var Sn=An[En];t.hasOwnProperty(Sn)||(He.push(Sn),t[Sn]=!0)}He.length!==0&&(Ue.setAttributions(He),this.dispatchEvent({type:"attributions:update",attributions:He}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPmeasureLength"),Te.className="GPwidget gpf-widget gpf-widget-button",Te},_createShowMeasureLengthPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureLengthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureLengthClick(Oe)}),e}},logger$8=LoggerByDefault.getLogger("measurelength"),MeasureLength=class Qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$8.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$8.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.unit=typeof e.unit<"u"?e.unit:null,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$8.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$8.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$8.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$8.trace("call MeasureLength::format()");var t=this.getMap(),Oe;if(this.options.geodesic){var ke=e.getCoordinates();Oe=0;for(var Be=t.getView().getProjection(),Ue=0,He=ke.length-1;Ue<He;++Ue){var We=transform$1(ke[Ue],Be,"EPSG:4326"),Cn=transform$1(ke[Ue+1],Be,"EPSG:4326");Oe+=getDistance(We,Cn)}}else Oe=Math.round(e.getLength()*100)/100;var An;return this.options.unit==="km"?An=Math.round(Oe/1e3*100)/100+" km":this.options.unit==="m"?An=Math.round(Oe*100)/100+" m":Oe>1e3?An=Math.round(Oe/1e3*100)/100+" km":An=Math.round(Oe*100)/100+" m",An}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$8.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPmeasureArea"),Te.className="GPwidget gpf-widget gpf-widget-button",Te},_createShowMeasureAreaPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureAreaClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureAreaClick(Oe)}),e}},logger$7=LoggerByDefault.getLogger("measurearea"),MeasureArea=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$7.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var Oe=e.clone(),ke=Oe.getLinearRing(0).getCoordinates();t=Math.abs(getArea(new Polygon([ke])))}else t=e.getArea();var Be;return t>1e6?Be=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?Be=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?Be=Math.round(t/10)*10+" m<sup>2</sup>":Be=Math.round(t*100)/100+" m<sup>2</sup>",Be}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPmeasureAzimuth"),Te.className="GPwidget gpf-widget gpf-widget-button",Te},_createShowMeasureAzimuthPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureAzimuthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowMeasureAzimuthClick(Oe)}),e}},logger$6=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$6.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureAzimuth::format()");var t=this.getMap(),Oe=t.getView().getProjection(),ke=transform$1(e.getFirstCoordinate(),Oe,"EPSG:4326"),Be=transform$1(e.getLastCoordinate(),Oe,"EPSG:4326");if(!this.options.geodesic){var Ue=getDistance(ke,Be);if(logger$6.trace("measure between 2 points with geodesic method",Ue),Ue>500){var He=500/Ue;logger$6.trace("%",He),Be=transform$1(e.getCoordinateAt(He),Oe,"EPSG:4326")}}var We=Math.PI/180,Cn=180/Math.PI,An=We*ke[0],En=We*Be[0],Sn=We*ke[1],Tn=We*Be[1],Ln=Math.sin(En-An)*Math.cos(Tn),Bn=Math.cos(Sn)*Math.sin(Tn)-Math.sin(Sn)*Math.cos(Tn)*Math.cos(En-An),ti=Math.atan2(Ln,Bn),ni=Cn*ti;logger$6.trace("azimut",ni),ni<0&&(ni+=360);var ii=Math.round(ni*100)/100+" °";return ii}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let ke=0;ke<t.length;ke++){const Be=t[ke];if(Be.classList.contains(this.options.className+"-in")){Be.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomIn",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Zoomer");var Oe=document.createElement("span");Be.appendChild(Oe),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Be.classList.contains(this.options.className+"-out")){Be.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomOut",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Dézoomer");var Oe=document.createElement("span");Be.appendChild(Oe),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(Oe=>{Oe.element.classList.contains("ol-zoom")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const Oe=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof Oe=="string"?document.createTextNode(Oe):Oe;const ke=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=ke,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let Oe;this.source_?Oe=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:Oe=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(Oe):requestFullScreen(Oe)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let Oe=0,ke=e.length;Oe<ke;++Oe)unlistenByKey(e[Oe]);e.length=0;const t=this.getMap();if(t){const Oe=t.getOwnerDocument();isFullScreenSupported(Oe)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let ke=0,Be=events.length;ke<Be;++ke)e.push(listen(Oe,events[ke],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(Te){const e=Te.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&Te.fullscreenEnabled)}function isFullScreen(Te){return!!(Te.webkitIsFullScreen||Te.fullscreenElement)}function requestFullScreen(Te){Te.requestFullscreen?Te.requestFullscreen():Te.webkitRequestFullscreen&&Te.webkitRequestFullscreen()}function requestFullScreenWithKeys(Te){Te.webkitRequestFullscreen?Te.webkitRequestFullscreen():requestFullScreen(Te)}function exitFullScreen(Te){Te.exitFullscreen?Te.exitFullscreen():Te.webkitExitFullscreen&&Te.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],t=document.createElement("span");e.appendChild(t),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(Oe=>{Oe.element.classList.contains("ol-full-screen")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",Oe=e.tipLabel!==void 0?e.tipLabel:"Overview map",ke=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof ke=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=ke):this.collapseLabel_=ke;const Be=e.label!==void 0?e.label:"›";typeof Be=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Be):this.label_=Be;const Ue=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,He=document.createElement("button");He.setAttribute("type","button"),He.title=Oe,He.appendChild(Ue),He.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const We=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=We,e.layers&&e.layers.forEach(function(ii){We.addLayer(ii)});const Cn=document.createElement("div");Cn.className="ol-overviewmap-box",Cn.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:Cn}),this.ovmap_.addOverlay(this.boxOverlay_);const An=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),En=this.element;En.className=An,En.appendChild(this.ovmapDiv_),En.appendChild(He);const Sn=this,Tn=this.boxOverlay_,Ln=this.boxOverlay_.getElement(),Bn=function(ii){return{clientX:ii.clientX,clientY:ii.clientY}},ti=function(ii){const si=Bn(ii),oi=We.getEventCoordinate(si);Tn.setPosition(oi)},ni=function(ii){const si=We.getEventCoordinateInternal(ii);Sn.getMap().getView().setCenterInternal(si),window.removeEventListener("pointermove",ti),window.removeEventListener("pointerup",ni)};this.ovmapDiv_.addEventListener("pointerdown",function(){event.target===Ln&&window.addEventListener("pointermove",ti),window.addEventListener("pointerup",ni)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const Oe=t.getView();Oe&&this.unbindView_(Oe),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const Oe=e.getView();Oe&&this.bindView_(Oe),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const Oe=this.getMap().getView();this.bindView_(Oe)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const Oe=e.getSize(),Be=e.getView().calculateExtentInternal(Oe);if(this.viewExtent_&&equals$1(Be,this.viewExtent_))return;this.viewExtent_=Be;const Ue=t.getSize(),We=t.getView().calculateExtentInternal(Ue),Cn=t.getPixelFromCoordinateInternal(getTopLeft(Be)),An=t.getPixelFromCoordinateInternal(getBottomRight(Be)),En=Math.abs(Cn[0]-An[0]),Sn=Math.abs(Cn[1]-An[1]),Tn=Ue[0],Ln=Ue[1];En<Tn*MIN_RATIO||Sn<Ln*MIN_RATIO||En>Tn*MAX_RATIO||Sn>Ln*MAX_RATIO?this.resetExtent_():containsExtent(We,Be)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,Oe=e.getSize(),Be=e.getView().calculateExtentInternal(Oe),Ue=t.getView(),He=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,We=1/(Math.pow(2,He/2)*MIN_RATIO);scaleFromCenter(Be,We),Ue.fitInternal(fromExtent(Be))}recenter_(){const e=this.getMap(),t=this.ovmap_,Oe=e.getView();t.getView().setCenterInternal(Oe.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const Oe=e.getSize(),ke=e.getView(),Be=t.getView(),Ue=this.rotateWithView_?0:-ke.getRotation(),He=this.boxOverlay_,We=this.boxOverlay_.getElement(),Cn=ke.getCenter(),An=ke.getResolution(),En=Be.getResolution(),Sn=Oe[0]*An/En,Tn=Oe[1]*An/En;if(He.setPosition(Cn),We){We.style.width=Sn+"px",We.style.height=Tn+"px";const Ln="rotate("+Ue+"rad)";We.style.transform=Ln}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const t={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var Oe="ol-overviewmap";e.className=e.className||Oe,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:t})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,t=e[1];t.id="GPshowOverviewMap-"+this._uid,t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!this.options.collapsed),t.setAttribute("type","button"),t.removeAttribute("title"),t.setAttribute("aria-label",this.options.tipLabel);var Oe=this;t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.dispatchEvent({type:"overviewmap:toggle",status:Be})}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.dispatchEvent({type:"overviewmap:toggle",status:Be})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPlegends"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowLegendsPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les légendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowLegendsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowLegendsClick(Oe)}),e},_createLegendsPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPlegendsPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createLegendsPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__legends",Te},_createLegendsPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__header_legends",Te},_createLegendsPanelIconElement:function(){var Te=document.createElement("label");return Te.className="gpf-btn-header-legends gpf-btn-icon-header-legends",Te.title="Légendes",Te},_createLegendsPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__title_legends",Te.innerHTML="Légendes",Te},_createLegendsPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var Te=document.createElement("div");return Te.className="legends-entries gpf-panel__body fr-modal__body",Te},_createLegendEntry:function(Te){const e=Be=>{var Ue=function(){if(!window.DOMParser)return!1;var An=new DOMParser;try{An.parseFromString("x","text/html")}catch{return!1}return!0};if(Ue()){var He=new DOMParser,We=He.parseFromString(Be,"text/html");return We.body}var Cn=document.createElement("div");return Cn.innerHTML=Be,Cn};if(Te&&Te.legends&&Te.legends.length){var t=Te.legends[0].url,Oe=e(`
                    <div
                        id="${Te.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${Te.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${Te.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${Te.id}" class="legend-entry-image gpf-hidden">
                            <img src="${t}" alt="${Te.desc}">
                        </div>
                    </div>
                `),ke=Oe.firstChild.querySelector("button");return ke&&ke.addEventListener("click",Be=>{var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue);var He=document.getElementById("GPlegend_ID_"+Te.id);Ue?He.classList.replace("gpf-visible","gpf-hidden"):He.classList.replace("gpf-hidden","gpf-visible")}),Oe.firstChild}}},logger$5=LoggerByDefault.getLogger("legends"),Legends=class np extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof np))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var t=this;e.getLayers().forEach(Oe=>{t.add(Oe)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let t=0;t<e.length;t++)this.add(layer)}add(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return this.exist(t)?!1:(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}remove(e){var t=!1;if(e)for(let Oe=0;Oe<this.legends.length;Oe++){const ke=this.legends[Oe];if(e.name===ke.obj.name&&e.service===ke.obj.service){ke.dom&&this.legends[Oe].dom.remove(),this.legends.splice(Oe,1),t=!0;break}}return t}exist(e){var t=!1;for(let Oe=0;Oe<this.legends.length;Oe++)if(this.legends[Oe].dom.id===e.id){t=!0;break}return t}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var Oe=this.panelLegendsContainer=this._createLegendsPanelElement(),ke=this._createLegendsPanelDivElement();Oe.appendChild(ke);var Be=this.panelLegendsEntriesContainer=this._createLegendElement();if(Oe.appendChild(Be),this.options.panel){var Ue=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),He=this._createLegendsPanelIconElement();Ue.appendChild(He);var We=this._createLegendsPanelTitleElement();Ue.appendChild(We);var Cn=this.buttonLegendsClose=this._createLegendsPanelCloseElement();Ue.appendChild(Cn),ke.appendChild(Ue)}return e.appendChild(Oe),logger$5.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners["layer:add"]=function(Oe){if(logger$5.trace(Oe),!t.add(Oe.element)){logger$5.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(Oe){if(logger$5.trace(Oe),!t.remove(Oe.element)){logger$5.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(Oe){logger$5.trace(Oe)},this.eventsListeners["view:change:resolution"]=function(Oe){logger$5.trace(Oe);var ke=t.getMap();for(let Sn=0;Sn<t.legends.length;Sn++){const Tn=t.legends[Sn];var Be=t.getMetaInformations(Tn.obj);if(Be){var Ue=ke.getView().getResolution()||ke.getView().getResolutionForZoom(ke.getZoom()),He=Ue*3570,We=Be.legends.slice(),Cn=We[0];for(let Ln=0;Ln<We.length;++Ln){const Bn=We[Ln];Bn.minScaleDenominator||(Bn.minScaleDenominator=0),(He>Cn.minScaleDenominator&&Bn.minScaleDenominator>Cn.minScaleDenominator&&Bn.minScaleDenominator<He||He<Cn.minScaleDenominator&&Bn.minScaleDenominator<Cn.minScaleDenominator)&&(Cn=Bn)}if(Be.legends[0]!==Cn){Be.legends=[],Be.legends.push(Cn);var An=t._createLegendEntry(Be),En=Tn.dom;En.replaceWith(An),Tn.dom=An}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=Te=>{var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,Oe=t.parseFromString(Te,"text/html");return Oe.body}var ke=document.createElement("div");return ke.innerHTML=Te,ke};var CatalogDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPcatalog"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowCatalogPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowCatalogClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowCatalogClick(Oe)}),e},_createCatalogPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPcatalogPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createCatalogPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createCatalogPanelContentDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__content fr-modal__content",Te},_createCatalogPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpanelHeader gpf-panel__header fr-modal__header",Te},_createCatalogPanelTitleElement:function(Te){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=Te,e},_createCatalogPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowCatalogPicto")).click(),Te.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowCatalogPicto")).click(),Te.onCloseCatalogClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createCatalogContentDivElement:function(){var Te=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return Te.firstChild},_createCatalogContentTitleElement:function(Te){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${Te}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var Te=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(Te);const t=e.attachShadow({mode:"open"});t.innerHTML=Te.trim();var Oe=t.getElementById("search-button");Oe&&Oe.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var ke=t.getElementById("search-input");return ke&&ke.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),t},_createCatalogWaitingElement:function(){var Te=document.createElement("div");Te.id=this._addUID("GPcatalogCalcWaitingContainer"),Te.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Te.appendChild(e),Te},_createCatalogContentCategoriesTabs:function(Te){var e="",t=(Bn,ti,ni,ii)=>{var si="GPtabButton fr-tabs__tab",oi="false",ci=-1;return ii&&(si="GPtabButton GPtabButtonActive fr-tabs__tab",oi="true",ci=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${Bn}_${ti}" class="${si}" tabindex="${ci}" role="tabbutton" aria-selected="${oi}" aria-controls="tabpanel-${Bn}-panel_${ti}">${ni}</button>
            </li>
            `},Oe="",ke=Bn=>{var ti=Bn.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${Bn.id}" name="radio-inline" ${ti} aria-controls="tabcontent-${Bn.id}">
                    <label class="fr-label" for="radio-inline_${Bn.id}">
                        ${Bn.title}
                    </label>
                </div>
            </div>
            `},Be=(Bn,ti)=>{var ni="";for(let si=0;si<ti.length;si++){const oi=ti[si];Oe+=ke(oi);var ii="";oi.default||(ii="GPelementHidden gpf-hidden"),ni+=`<div class="tabcontent ${ii}" role="tabpanel-section" id="tabcontent-${oi.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${Bn}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${Oe}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${ni}
            `},Ue="",He=(Bn,ti,ni,ii)=>{var si="GPtabContent fr-tabs__panel",oi=-1;ni&&(si="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",oi=0);var ci='<div class="tabcontent"></div>';return ii&&(ci=Be(ti,ii)),`
            <!-- panneaux -->
            <div id="tabpanel-${Bn}-panel_${ti}" class="${si}" role="tabpanel" aria-labelledby="tabbutton-${Bn}_${ti}" tabindex="${oi}" style="max-height: 250px;overflow-y: auto;">
                ${ci}
            </div>
            `};for(let Bn=0;Bn<Te.length;Bn++){const ti=Te[Bn];e+=t(Bn,ti.id,ti.title,ti.default),Ue+=He(Bn,ti.id,ti.default,ti.items)}var We=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${Ue}
            </div>
        </div>
        `,Cn=stringToHTML(We.trim());const An=Cn.attachShadow({mode:"open"});An.innerHTML=We.trim();var En=An.querySelectorAll('[role="tabpanel-section"]'),Sn=An.querySelectorAll('[name="radio-inline"]');Sn&&Sn.forEach(Bn=>{Bn.addEventListener("change",ti=>{for(let ii=0;ii<En.length;ii++){const si=En[ii];si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden")})});var Tn=An.querySelectorAll('[role="tabpanel"]'),Ln=An.querySelectorAll('[role="tabbutton"]');return Ln&&Ln.forEach(Bn=>{Bn.addEventListener("click",ti=>{for(let ii=0;ii<Ln.length;ii++){const si=Ln[ii];si.setAttribute("tabindex",-1),si.ariaSelected=!1,si.classList.remove("GPtabButtonActive")}ti.target.setAttribute("tabindex",0),ti.target.ariaSelected=!0,ti.target.classList.add("GPtabButtonActive");for(let ii=0;ii<Tn.length;ii++){const si=Tn[ii];si.setAttribute("tabindex",-1),si.classList.remove("fr-tabs__panel--selected"),si.classList.remove("GPtabContentSelected"),si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.setAttribute("tabindex",0),ni.classList.add("fr-tabs__panel--selected"),ni.classList.add("GPtabContentSelected"),ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(ti)})}),An},_createCatalogContentCategoryTabContent:function(Te,e){var t=Object.values(e),Oe="",ke=(si,oi,ci,vi,pi)=>`
            <div class="fr-fieldset__element" id="fieldset-${pi}_${oi}-${vi}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${pi}"
                        id="checkboxes-${pi}-${si}_${oi}-${vi}"
                        type="checkbox"
                        data-layer="${oi}:${vi}"
                        aria-describedby="checkboxes-messages-${pi}-${si}_${oi}-${vi}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${pi}-${si}_${oi}-${vi}" title="nom technique : ${oi}">
                        ${ci} (${vi})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${pi}-${si}_${oi}-${vi}" aria-live="assertive"></div>
                </div>
            </div>
            `,Be=(si,oi,ci,vi,pi)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${oi}" aria-expanded="false" aria-controls="accordion-${si}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${oi}"></span>${ci}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${si}">
                    ${pi}
                </div>
            </section>
            `,Ue=Te.section;Ue&&(t=t.sort((si,oi)=>si[Te.filter.field].localeCompare(oi[Te.filter.field])));var He={};for(let si=0;si<t.length;si++){const oi=t[si];if(Ue){var We=oi[Te.filter.field];We&&(He.hasOwnProperty(We)||(He[We]=""),He[We]+=ke(si,oi.name,oi.title,oi.service,Te.id))}else Oe+=ke(si,oi.name,oi.title,oi.service,Te.id)}if(Ue){for(const si in He)if(Object.prototype.hasOwnProperty.call(He,si)){const oi=He[si];var Cn=[...oi.matchAll(/fr-fieldset__element/g)].length,An=Math.abs(Array.from(si).reduce((ci,vi)=>Math.imul(31,ci)+vi.charCodeAt(0)|0,0));Oe+=Be(An,Te.id,si,Cn,oi)}}var En=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${Te.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${Oe}
            </fieldset>
        `,Sn=stringToHTML(En);const Tn=Sn.attachShadow({mode:"open"});Tn.innerHTML=En.trim();var Ln=`checkboxes-${Te.id}`,Bn=Tn.querySelectorAll('[name="'+Ln+'"]');Bn&&Bn.forEach(si=>{si.addEventListener("click",oi=>{this.onSelectCatalogEntryClick(oi)})});var ti=`button-collapse-${Te.id}`,ni=Tn.querySelectorAll('[role="'+ti+'"]');ni&&ni.forEach(si=>{si.addEventListener("click",oi=>{oi.target.ariaExpanded=oi.target.ariaExpanded!=="true";var ci=document.getElementById(oi.target.getAttribute("aria-controls"));ci&&(oi.target.ariaExpanded==="true"?(ci.classList.add("fr-collapse--expanded"),ci.classList.remove("GPelementHidden")):(ci.classList.remove("fr-collapse--expanded"),ci.classList.add("GPelementHidden")))},!1)}),`${Te.id}`;var ii=Tn.querySelectorAll('[role="'+ti+'"]');return ii&&ii.forEach(si=>{si.addEventListener("click",oi=>{oi.target.parentElement.click()})}),Tn}},logger$4=LoggerByDefault.getLogger("widget"),Catalog=class ip extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ip))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(t=>{logger$4.trace(this,t),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:t})}).catch(t=>{this.hideWaiting(),logger$4.error(t)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(t=>{var Oe=t.items;return t.items&&(Oe=t.items.map(ke=>({title:ke.title,id:ke.id||Math.abs(Array.from(ke.title).reduce((Be,Ue)=>Math.imul(31,Be)+Ue.charCodeAt(0)|0,0)),section:ke.hasOwnProperty("section")?ke.section:!1,default:ke.hasOwnProperty("default")?ke.default:!1,filter:ke.filter||null}))),{title:t.title,id:t.id||Math.abs(Array.from(t.title).reduce((ke,Be)=>Math.imul(31,ke)+Be.charCodeAt(0)|0,0)),default:t.hasOwnProperty("default")?t.default:!1,filter:t.filter||null,items:Oe||null}}),this.categoryId=(()=>{var t=this.categories.findIndex(Oe=>Oe.default);return t===-1&&(t=0,this.categories[t].default=!0),this.categories[t].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),t=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(t);var Oe=this.panelCatalogContainer=this._createCatalogPanelElement(),ke=this._createCatalogPanelDivElement();Oe.appendChild(ke);var Be=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),Ue=this._createCatalogPanelTitleElement(this.options.titlePrimary);Be.appendChild(Ue);var He=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Be.appendChild(He),ke.appendChild(Be);var We=this._createCatalogPanelContentDivElement(),Cn=this.contentCatalogContainer=this._createCatalogContentDivElement();Cn.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&Cn.appendChild(this._createCatalogContentSearchElement());var An=this.waitingContainer=this._createCatalogWaitingElement();return Cn.appendChild(An),We.appendChild(Cn),ke.appendChild(We),e.appendChild(Oe),e}initMapLayers(){var e=this.getMap();if(e){var t=e.getLayers();t.forEach(Oe=>{if(Oe.name&&Oe.service){this.layersListOnMap[Oe.name+":"+Oe.service]=Oe;var ke=document.querySelectorAll(`input[data-layer="${Oe.name}:${Oe.service}"]`);ke&&ke.forEach(Be=>{Be.checked=!0})}})}}async initLayersList(){var e=null,t=this;const Oe=Cn=>{var An=t.contentCatalogContainer,En=t._createCatalogContentCategoriesTabs(this.categories);An.appendChild(En);var Sn=[];t.categories.forEach(Bn=>{if(Bn.items)for(let ti=0;ti<Bn.items.length;ti++){const ni=Bn.items[ti];Sn.push(ni)}else Sn.push(Bn)});var Tn=An.querySelectorAll(".tabcontent");for(let Bn=0;Bn<Tn.length;Bn++){const ti=Tn[Bn];var Ln=ke(Sn[Bn],Cn);ti.appendChild(t._createCatalogContentCategoryTabContent(Sn[Bn],Ln))}},ke=(Cn,An)=>{var En=An,Sn=Cn.filter;if(Sn){En={};for(const Ln in An)if(Object.prototype.hasOwnProperty.call(An,Ln)){const Bn=An[Ln];if(Bn[Sn.field]){var Tn=Array.isArray(Sn.value)?Sn.value.includes(Bn[Sn.field].toString()):Sn.value==="*"||Bn[Sn.field].toString()===Sn.value;Tn&&(En[Ln]=Bn,this.layersList[Ln].categories.push(Cn.id))}}}return En},Be=(Cn,An)=>An;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Cn in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Cn)){const An=e.layers[Cn];var Ue=An.serviceParams.id.split(":").slice(-1)[0];An.service=Ue,An.categories=[]}var He=Be(this.options.layerFilter,e.layers);return this.layersList=He,Oe(He),new Promise((Cn,An)=>{Cn(e)})}if(this.options.configuration.urls){var We=[];for(let Cn=0;Cn<this.options.configuration.urls.length;Cn++){const An=this.options.configuration.urls[Cn],En=function(){return fetch(An,{}).then(function(Sn){if(Sn.ok)return Sn.json().then(function(Ln){return Ln}).catch(Ln=>{logger$4.warn("fetch json exception :",Ln)});var Tn=new Error("HTTP status code: "+Sn.status);throw Tn}).catch(Sn=>new Promise((Tn,Ln)=>{logger$4.error("fetch json exception :",Sn),Ln(Sn)}))};We.push(En())}try{const Cn=await Promise.all(We);e=Cn[0];for(let En=1;En<Cn.length;En++){const Sn=Cn[En];Helper.mergeParams(e,Sn)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const En in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,En)){const Sn=e.layers[En];var Ue=Sn.serviceParams.id.split(":").slice(-1)[0];Sn.service=Ue,Sn.categories=[]}var He=Be(this.options.layerFilter,e.layers);return this.layersList=He,Oe(He),await new Promise((En,Sn)=>{En(e)})}catch(Cn){return await new Promise((An,En)=>{En(Cn)})}}}addEventsListeners(e){var t=this;this.eventsListeners["map:add"]=function(Oe){logger$4.trace(Oe);var ke=Oe.element.name,Be=Oe.element.service;t.layersListOnMap[ke+":"+Be]=Oe.element;var Ue=document.querySelectorAll(`input[data-layer="${ke}:${Be}"]`);Ue&&Ue.forEach(He=>{He.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(Oe){logger$4.trace(Oe);var ke=Oe.element.name,Be=Oe.element.service;delete t.layersListOnMap[ke+":"+Be];var Ue=document.querySelectorAll(`input[data-layer="${ke}:${Be}"]`);Ue&&Ue.forEach(He=>{He.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,t){var Oe=null,ke=null;switch(t){case"WMS":ke=new LayerWMS({layer:e});break;case"WMTS":ke=new LayerWMTS({layer:e});break;case"TMS":ke=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":ke=new LayerWFS({layer:e});break}if(ke){var Be=this.getMap();Be.addLayer(ke),this.layersListOnMap[e+":"+t]=ke,Oe=ke.getConfiguration()}return Oe}removeLayer(e,t){var Oe=null,ke=this.layersListOnMap[e+":"+t];if(ke){Oe=ke.getConfiguration();var Be=this.getMap();Be.removeLayer(ke),delete this.layersListOnMap[e+":"+t]}return Oe}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const t=this.layersList[e];t.hidden=!1,this.updateFilteredLayersListDOM(t.name,t.service,t.hidden)}}setFilteredLayersList(e){var t=this.options.search.criteria;for(const ke in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,ke)){const Be=this.layersList[ke];var Oe="";for(let Ue=0;Ue<t.length;Ue++){const He=t[Ue];Be[He]&&(Oe+=Be[He].toLowerCase())}Be.hidden=!Oe.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Be.name,Be.service,Be.hidden)}}updateFilteredLayersListDOM(e,t,Oe){var ke=[];this.categories.forEach(Ue=>{if(Ue.items)for(let He=0;He<Ue.items.length;He++){const We=Ue.items[He];ke.push(We.id)}else ke.push(Ue.id)});for(let Ue=0;Ue<ke.length;Ue++){const He=ke[Ue];var Be=document.getElementById(`fieldset-${He}_${e}-${t}`);Be&&(Oe?(Be.classList.add("gpf-hidden"),Be.classList.add("GPelementHidden")):(Be.classList.remove("gpf-hidden"),Be.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e)}onCloseCatalogClick(e){logger$4.trace(e)}onSelectCatalogTabClick(e){logger$4.trace(e);var t=e.target.id,Oe=t.split("_")[1];this.categoryId=Oe}onSelectCatalogEntryClick(e){logger$4.trace(e);var t=e.target.dataset.layer,Oe=t.substring(0,t.lastIndexOf(":")),ke=t.substring(t.lastIndexOf(":")+1),Be={};e.target.checked?(this.options.addToMap&&(Be=this.addLayer(Oe,ke)),this.dispatchEvent({type:"catalog:layer:add",name:Oe,service:ke,layer:Be})):(this.options.addToMap&&(Be=this.removeLayer(Oe,ke)),this.dispatchEvent({type:"catalog:layer:remove",name:Oe,service:ke,layer:Be}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France métropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Réunion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Calédonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPterritories"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowTerritoriesPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Sélecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowTerritoriesClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowTerritoriesClick(Oe)}),e},_createTerritoriesPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPterritoriesPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createTerritoriesPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__territories",Te},_createTerritoriesPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__header_territories",Te},_createTerritoriesPanelIconElement:function(){var Te=document.createElement("label");return Te.className="gpf-btn-header-territories gpf-btn-icon-header-territories",Te.title="Selecteur de territoires",Te},_createTerritoriesPanelTitleElement:function(Te){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=Te,e},_createTerritoriesPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowTerritoriesPicto")).click(),Te.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowTerritoriesPicto")).click(),Te.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var Te=document.createElement("div");return Te.className="territories-entries gpf-panel__body_territories fr-modal__body",Te},_createTerritoryEntry:function(Te){var e=this;const t=Cn=>{var An=function(){if(!window.DOMParser)return!1;var Ln=new DOMParser;try{Ln.parseFromString("x","text/html")}catch{return!1}return!0};if(An()){var En=new DOMParser,Sn=En.parseFromString(Cn,"text/html");return Sn.body}var Tn=document.createElement("div");return Tn.innerHTML=Cn,Tn};if(Te){var Oe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",ke=Te.thumbnail||Oe,Be=Te.icon||Oe,Ue=Te.id.toLowerCase(),He=t(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${Te.description}">${Te.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${Te.id}" src="${ke}" width="100%" height="100%" title="${Te.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${Ue}">
                        <svg>       
                            <image id="icon-${Te.id}" xlink:href="${Be}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),We=He.firstChild;return We&&We.addEventListener("click",Cn=>{e.onImageTerritoriesClick(Cn,Te.id)}),He.firstChild}}},logger$3=LoggerByDefault.getLogger("territories"),Territories=class rp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof rp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let t=0;t<TerritoriesJson.length;t++){const Oe=TerritoriesJson[t];this.setTerritory(Oe)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var t=this.territories.some(ke=>ke.data.id===e.id);if(e&&!t){var Oe=this._createTerritoryEntry(e);if(Oe)return this.panelTerritoriesEntriesContainer.appendChild(Oe),this.territories.push({data:e,dom:Oe}),!0}return!1}removeTerritory(e){var t=!1;if(e){for(let Oe=0;Oe<this.territories.length;Oe++)if(this.territories[Oe].data.id===e){this.territories[Oe].dom.remove(),this.territories.splice(Oe,1),t=!0;break}}return t}setCollapse(e){if(e===void 0){logger$3.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var Oe=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();Oe.classList.add("tiles-direction"),Oe.classList.add("tiles-"+this.options.tiles);var ke=this._createTerritoriesPanelDivElement();Oe.appendChild(ke);var Be=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Be.classList.add("tiles-direction"),Be.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Be.classList.add("tiles-reduce"),this.options.thumbnail?Be.classList.add("tiles-thumbnail"):Be.classList.add("tiles-icon"),Oe.appendChild(Be),this.options.panel){var Ue=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),He=this._createTerritoriesPanelIconElement();Ue.appendChild(He);var We=this._createTerritoriesPanelTitleElement(this.options.title);Ue.appendChild(We);var Cn=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();Ue.appendChild(Cn),ke.appendChild(Ue)}return e.appendChild(Oe),logger$3.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$3.trace(e)}onImageTerritoriesClick(e,t){logger$3.trace(e,t);var Oe=this.territories.find(Cn=>Cn.data.id===t);if(Oe){var ke=Oe.data.zoom,Be=Oe.data.bbox||[];if(!Be.length)return;var Ue=this.getMap(),He=Ue.getView().getProjection().getCode(),We=transformExtent(Be,"EPSG:4326",He);Ue.getView().fit(We,Ue.getSize()),ke&&Ue.getView().setZoom(ke),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:Oe})}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(Te){var e=this._uid?Te+"-"+this._uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPcontrolList"),Te.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Te},_createShowControlListPictoElement:function(){var Te=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),t.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowControlListPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Te.onShowControlListPanelClick(Oe)}),e},_createControlListPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPcontrolListPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createControlListPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__body fr-modal__body",Te},_createControlListPanelHeaderElement:function(){var Te=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Mes outils",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPcontrolListPanelClose"),Oe.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowControlListPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowControlListPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createControlListPanelContentElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__content fr-modal__content",Te},_createControlListPanelFooterElement:function(Te){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var t=document.createElement("button");return t.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),t.innerText="+ Ajouter plus d'outils",t.addEventListener("click",function(){Te.click()}),e.appendChild(t),e},_createControlListPanelControl:function(Te){let e;try{e=Te.getContainer()}catch{e=Te.container}var t=document.createElement("div"),Oe=e.querySelector(".GPshowOpen").cloneNode();Oe.id=Oe.id+"-controllist",Oe.classList.add("inside-control-list"),t.appendChild(Oe);var ke=document.createElement("div"),Be=document.createElement("span");if(ke.appendChild(Be),e.querySelector(".GPshowOpen").ariaLabel?Be.innerText=e.querySelector(".GPshowOpen").ariaLabel:e.querySelector(".GPpanelTitle")?Be.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")&&(Be.innerText=e.querySelector("[class^='gpf-btn-header-']").title),Te.description){var Ue=document.createElement("span");Ue.innerText=Te.description,ke.appendChild(Ue)}return t.appendChild(ke),t.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),t}},logger$2=LoggerByDefault.getLogger("controlList"),ControlList=class op extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof op))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$2.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),t=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(t);var Oe=this._ControlListPanelContainer=this._createControlListPanelElement(),ke=this._createControlListPanelDivElement();Oe.appendChild(ke);var Be=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();ke.appendChild(Be);var Ue=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(ke.appendChild(Ue),this.controlCatalogElement){var He=this._createControlListPanelFooterElement(this.controlCatalogElement);ke.appendChild(He)}return e.appendChild(Oe),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._pictoControlListButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Be=>{if(Be.listable){let Ue=this._createControlListPanelControl(Be);this._ControlListPanelContentContainer.appendChild(Ue)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);var OGCRequest={computeGenericGPFWFS:async function(Te,e,t=0,Oe="geom",ke="",Be=4326,Ue=!1,He,We){let Cn=We,An=He;Be!==4326&&([Cn,An]=proj4(proj4.defs("EPSG:4326"),proj4.defs(`EPSG:${Be}`),[We,He]));let En=`INTERSECTS(${Oe},Point(${Cn}%20${An}))`;t>0&&(En=`DWITHIN(${Oe},Point(${Cn}%20${An}),${t},kilometers)`),ke&&(En+=` ${ke}`);const Tn=await(await fetch(`https://data.geopf.fr/wfs/ows?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename=${Te}&outputFormat=json&count=50&CQL_FILTER=${En}`)).json(),Ln=[];return Tn.features.forEach(Bn=>{const ti=[];e.forEach(ni=>{ti.push(Bn.properties[ni])}),Ue&&ti.push(Bn.geometry),e.length===1&&ti[0]!==null&&!Ue?Ln.push(ti[0]):(e.length>1||Ue)&&Ln.push(ti)}),Ln}},title="contextMenu",ContextMenuDOM={_addUID:function(Te){var e=this.uid?Te+"-"+this.uid:Te;return e},_createMainContainerElement:function(){var Te=document.createElement("div");return Te.id=this._addUID("GPpointInfo"),Te.className="GPpointInfo GPwidget gpf-widget",Te},_createShowPointInfoPictoElement:function(){var Te=this,e=document.createElement("button");return e.id=this._addUID("GPshowPointInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowPointInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-widget fr-btn",e.title=`${title}`,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Te.onShowPointInfoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Te.onShowPointInfoClick(t)}),e},_createPointInfoPanelElement:function(){var Te=document.createElement("dialog");return Te.id=this._addUID("GPpointInfoPanel"),Te.className="GPpanel gpf-panel fr-modal",Te},_createPointInfoPanelDivElement:function(){var Te=document.createElement("div");return Te.className="gpf-panel__pointInfo",Te},_createPointInfoPanelHeaderElement:function(){var Te=document.createElement("div");return Te.className="GPpointInfoHeader gpf-panel__header_pointInfo",Te},_createPointInfoPanelIconElement:function(){var Te=document.createElement("label");return Te.className="GPpanelHeader gpf-btn-header-pointInfo gpf-btn-icon-header-pointInfo",Te.title="Adresse et coordonnées",Te},_createPointInfoPanelTitleElement:function(){var Te=document.createElement("div");return Te.className="GPpanelTitle gpf-panel__title_pointInfo fr-pt-4w",Te.innerHTML="Adresse et coordonnées",Te},_createPointInfoPanelCloseElement:function(){var Te=this,e=document.createElement("button");e.className="GPpanelClose GPpointInfoPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Te._addUID("GPshowPointInfoPicto")).click(),Te.onClosePointInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Te._addUID("GPshowPointInfoPicto")).click(),Te.onClosePointInfoClick()}),e},_createEntriesElement:function(){var Te=document.createElement("div");Te.className="point-info-content gpf-panel__body fr-modal__body";var e=document.createElement("div");return Te.appendChild(e),Te},_createPinDOMOverlay:function(Te){var e=document.createElement("div"),t=document.createElement("img");return t.src=Te,e.appendChild(t),e}};/*!
  * ol-contextmenu - v5.5.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Wed Aug 07 2024 12:29:18 GMT+0000 (Coordinated Universal Time)
  */var k$1=Object.defineProperty,I$1=(Te,e,t)=>e in Te?k$1(Te,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Te[e]=t,a$1=(Te,e,t)=>I$1(Te,typeof e!="symbol"?e+"":e,t),S$1={exports:{}};function x$2(){}x$2.prototype={on:function(Te,e,t){var Oe=this.e||(this.e={});return(Oe[Te]||(Oe[Te]=[])).push({fn:e,ctx:t}),this},once:function(Te,e,t){var Oe=this;function ke(){Oe.off(Te,ke),e.apply(t,arguments)}return ke._=e,this.on(Te,ke,t)},emit:function(Te){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[Te]||[]).slice(),Oe=0,ke=t.length;for(Oe;Oe<ke;Oe++)t[Oe].fn.apply(t[Oe].ctx,e);return this},off:function(Te,e){var t=this.e||(this.e={}),Oe=t[Te],ke=[];if(Oe&&e)for(var Be=0,Ue=Oe.length;Be<Ue;Be++)Oe[Be].fn!==e&&Oe[Be].fn._!==e&&ke.push(Oe[Be]);return ke.length?t[Te]=ke:delete t[Te],this}};S$1.exports=x$2;var _$1=S$1.exports.TinyEmitter=x$2,L$1=(Te=>(Te.CONTEXTMENU="contextmenu",Te.CLICK="click",Te.DBLCLICK="dblclick",Te))(L$1||{}),p$1=(Te=>(Te.BEFOREOPEN="beforeopen",Te.OPEN="open",Te.CLOSE="close",Te.ADD_MENU_ENTRY="add-menu-entry",Te))(p$1||{});let w$1=class extends MapBrowserEvent{constructor(e){super(e.type,e.map,e.originalEvent)}};const z$1={width:150,scrollAt:4,eventType:L$1.CONTEXTMENU,defaultItems:!0,items:[]},d$1="ol-ctx-menu",r={container:`${d$1}-container`,separator:`${d$1}-separator`,submenu:`${d$1}-submenu`,hidden:`${d$1}-hidden`,icon:`${d$1}-icon`,zoomIn:`${d$1}-zoom-in`,zoomOut:`${d$1}-zoom-out`,unselectable:"ol-unselectable"},C$1=[{text:"Zoom In",classname:`${r.zoomIn} ${r.icon}`,callback:(Te,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())+1,duration:700,center:Te.coordinate})}},{text:"Zoom Out",classname:`${r.zoomOut} ${r.icon}`,callback:(Te,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())-1,duration:700,center:Te.coordinate})}}];function y$1(Te){const e=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=Te;t.firstChild;)e.append(t.firstChild);return e}function P$1(Te){var We,Cn;const e=document.importNode(Te),t=Te.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${t}px`;const Oe=y$1("<span>Foo</span>"),ke=y$1("<span>Foo</span>"),Be=document.createElement("li"),Ue=document.createElement("li");Be.append(Oe),Ue.append(ke),e.append(Be),e.append(Ue),(We=Te.parentNode)==null||We.append(e);const He=e.offsetHeight/2;return(Cn=Te.parentNode)==null||Cn.removeChild(e),He}function N$1({parentNode:Te,item:e,isSubmenu:t=!1,isInsideSubmenu:Oe=!1,emitter:ke}){const Be=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const An=`<span>${e.text}</span>`,En=y$1(An),Sn=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=r.icon:e.classname.includes(r.icon)===!1&&(e.classname+=` ${r.icon}`),Sn.setAttribute("style",`background-image:url(${e.icon})`)),Sn.id=Be,Sn.className=e.classname,Sn.append(En),Te.append(Sn);const Tn={id:Be,isSubmenu:t,isInsideSubmenu:Oe,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return ke.emit(p$1.ADD_MENU_ENTRY,Tn,Sn),Sn}const Ue=`<li id="${Be}" class="${r.separator}"><hr></li>`,He=y$1(Ue);Te.append(He);const We=Te.lastChild,Cn={id:Be,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return ke.emit(p$1.ADD_MENU_ENTRY,Cn,We),We}function M$1({container:Te,items:e,menuWidth:t,isInsideSubmenu:Oe,emitter:ke}){e.forEach(Be=>{if(typeof Be!="string"&&"items"in Be&&Array.isArray(Be.items)){const Ue=N$1({parentNode:Te,item:Be,isSubmenu:!0,emitter:ke});Ue.classList.add(r.submenu);const He=document.createElement("ul");He.classList.add(r.container),He.style.width=`${t}px`,Ue.append(He),M$1({emitter:ke,menuWidth:t,container:He,items:Be.items,isInsideSubmenu:!0})}else N$1({parentNode:Te,item:Be,isSubmenu:!1,isInsideSubmenu:Oe,emitter:ke})})}function b$1(Te,e){if(!Te)throw new Error(e)}let R$1=class extends Control{constructor(e={}){b$1(typeof e=="object","@param `opts` should be object type!");const t=document.createElement("div");super({element:t}),a$1(this,"map"),a$1(this,"emitter",new _$1),a$1(this,"container"),a$1(this,"coordinate",[]),a$1(this,"pixel",[]),a$1(this,"contextMenuEventListener"),a$1(this,"entryCallbackEventListener"),a$1(this,"mapMoveListener"),a$1(this,"lineHeight",0),a$1(this,"disabled"),a$1(this,"opened"),a$1(this,"items",[]),a$1(this,"menuEntries",new Map),a$1(this,"options"),this.options={...z$1,...e};const Oe=document.createElement("ul");t.append(Oe),t.style.width=`${this.options.width}px`,t.classList.add(r.container,r.unselectable,r.hidden),this.container=t,this.contextMenuEventListener=ke=>{this.handleContextMenu(ke)},this.entryCallbackEventListener=ke=>{this.handleEntryCallback(ke)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return C$1}countItems(){return this.menuEntries.size}extend(e){b$1(Array.isArray(e),"@param `items` should be an Array."),M$1({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(r.hidden),this.dispatchEvent(p$1.CLOSE)}isOpen(){return this.opened}updatePosition(e){b$1(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(p$1.ADD_MENU_ENTRY,(Oe,ke)=>{this.handleAddMenuEntry(Oe,ke)},this),this.items=this.options.defaultItems?this.options.items.concat(C$1):this.options.items,M$1({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const t=this.getMenuEntriesLength();this.lineHeight=t>0?this.container.offsetHeight/t:P$1(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(p$1.ADD_MENU_ENTRY)}removeMenuEntry(e){let t=document.getElementById(e);t==null||t.remove(),t=null,this.menuEntries.delete(e)}handleContextMenu(e){var t;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.BEFOREOPEN})),!this.disabled&&(this.options.eventType===L$1.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(t=e.target)==null||t.addEventListener("pointerdown",Oe=>{this.opened&&(Oe.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(r.hidden),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],t={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},Oe=this.getMenuEntriesLength(),ke={w:this.container.offsetWidth,h:Math.round(this.lineHeight*Oe)},Be=t.w>=ke.w?this.pixel[0]+5:this.pixel[0]-ke.w;this.container.style.left=`${Be}px`,this.container.style.top=t.h>=ke.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-ke.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",t.w-=ke.w;const Ue=Cn=>Array.from(Cn.children).filter(An=>An.tagName==="LI"&&An.classList.contains(r.submenu));let He=0;const We=(Cn,An)=>{He+=1,Ue(Cn).forEach(En=>{const Sn=An>=ke.w?ke.w-8:(ke.w+8)*-1,Tn=En.querySelector(`ul.${r.container}`),Ln=Math.round(this.lineHeight*Array.from(Tn.children).filter(Bn=>Bn.tagName==="LI").length);Tn.style.left=`${Sn}px`,Tn.style.right="auto",Tn.style.top=t.h>=Ln+ke.h?"0":`-${Tn.offsetHeight-25}px`,Tn.style.bottom="auto",Tn.style.zIndex=String(He),Ue(Tn).length>0&&We(Tn,An-ke.w)})};We(this.container.firstElementChild,t.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var Be;e.preventDefault(),e.stopPropagation();const t=e.currentTarget,Oe=this.menuEntries.get(t.id);if(!Oe)return;const ke={data:Oe.data,coordinate:this.coordinate};this.closeMenu(),(Be=Oe.callback)==null||Be.call(Oe,ke,this.map)}handleAddMenuEntry(e,t){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&t.addEventListener("click",this.entryCallbackEventListener,!1)}};var logger$1=LoggerByDefault.getLogger("contextMenu"),ContextMenu=class ap extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof ap))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ContextMenu",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(e.addControl(this.contextmenu),e.addOverlay(this._marker),this.auto&&this.addEventsListeners()):this.auto&&this.removeEventsListeners(),super.setMap(e)}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!0,contextMenuItemsOptions:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonContextMenuShow=null,this.panelContextMenuContainer=null,this.panelContextMenuHeaderContainer=null,this.buttonContextMenuClose=null,this.panelContextMenuEntriesContainer=null,this.eventsListeners=[],this.controlList=[],this.itiPoints=new Array(7),this._marker=new Overlay({element:this._createPinDOMOverlay(Marker.lightOrange),stopEvent:!1,offset:Marker.defaultOffset});var t=this.getAvailableContextMenuControls.call(this);this.contextMenuItemsOptions=[],e.contextMenuItemsOptions instanceof Array&&e.contextMenuItemsOptions&&e.contextMenuItemsOptions.length>0&&(this.contextMenuItemsOptions=e.contextMenuItemsOptions.map(Oe=>({...Oe,classname:"ol-context-menu-custom fr-text--md"}))),this.contextmenu=new R$1({defaultItems:!1,width:250,items:t})}initContainer(){var e=this._createMainContainerElement(),t=this.buttonPointInfoShow=this._createShowPointInfoPictoElement();e.appendChild(t);var Oe=this.panelPointInfoContainer=this._createPointInfoPanelElement(),ke=this._createPointInfoPanelDivElement();Oe.appendChild(ke);var Be=this.panelPointInfoEntriesContainer=this._createEntriesElement();Oe.appendChild(Be);var Ue=this.panelPointInfoHeaderContainer=this._createPointInfoPanelHeaderElement(),He=this._createPointInfoPanelIconElement();Ue.appendChild(He);var We=this._createPointInfoPanelTitleElement();Ue.appendChild(We);var Cn=this.buttonPointInfoClose=this._createPointInfoPanelCloseElement();return Ue.appendChild(Cn),ke.appendChild(Ue),e.appendChild(Oe),logger$1.log(e),e}addEventsListeners(){this.contextmenu.on("open",e=>{e.this=this,this.onOpenContextMenu(e)}),this.contextmenu.on("close",e=>{e.this=this,this.onCloseContextMenu(e)})}removeEventsListeners(){}getAvailableContextMenuControls(){var e=[{text:"Adresse / Coordonnées",classname:"ol-context-menu-custom fr-text--md",callback:this.displayAdressAndCoordinate.bind(this),control_CLASSNAME:"ContextMenu"},{text:"Itinéraire depuis ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineStartPoint.bind(this),control_CLASSNAME:"Route"},{text:"Itinéraire vers ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineEndPoint.bind(this),control_CLASSNAME:"Route"},{text:"Isochrone - à proximité",classname:"ol-context-menu-custom fr-text--md",callback:this.computeIsochrone.bind(this),control_CLASSNAME:"Isocurve"},{text:"Ajouter des cartes / données",classname:"ol-context-menu-custom fr-text--md",callback:this.openCatalogue.bind(this),control_CLASSNAME:"Catalog"},"separator",{text:"Afficher la légende",classname:"ol-context-menu-custom fr-text--md",callback:this.displayLegend.bind(this),control_CLASSNAME:"Legends"}],t=this.getMap(),Oe=[];t&&(Oe=t.getControls().getArray());var ke=e.filter(Be=>{if(Oe.filter(He=>He.CLASSNAME&&He.CLASSNAME==Be.control_CLASSNAME).length>0||Be=="separator")return Be});return Array.prototype.push.apply(ke,this.contextMenuItemsOptions),ke}defineStartPoint(e){let t=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[0]=t,Oe.setData({points:this.itiPoints})}defineEndPoint(e){let t=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[6]=t,Oe.setData({points:this.itiPoints})}to4326(e){return transform$1([parseFloat(e[0]),parseFloat(e[1])],"EPSG:3857","EPSG:4326")}computeIsochrone(e){var t=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Isocurve")[0];t._pictoIsoButton.click(),t._pictoIsoButton.setAttribute("aria-pressed",!0);let Oe=this.to4326(e.coordinate);var ke=t.getData();ke.point=Oe,t.setData(ke)}displayLegend(e){var t=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Legends")[0];t.buttonLegendsShow.click(),t.buttonLegendsShow.setAttribute("aria-pressed",!0)}openCatalogue(e){var t=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Catalog")[0];t.buttonCatalogShow.click(),t.buttonCatalogShow.setAttribute("aria-pressed",!0)}displayAdressAndCoordinate(e){let t=this.to4326(e.coordinate);this.panelPointInfoEntriesContainer.innerHTML="",this._marker.setPosition(fromLonLat(t)),this.buttonPointInfoShow.click(),this.buttonPointInfoShow.setAttribute("aria-pressed",!0);var Oe=document.createElement("div");Oe.innerHTML=t[0].toFixed(6)+", "+t[1].toFixed(6);var ke=document.createElement("div"),Be=document.createElement("div"),Ue=document.createElement("div");this.panelPointInfoEntriesContainer.appendChild(Oe),this.panelPointInfoEntriesContainer.appendChild(ke),this.panelPointInfoEntriesContainer.appendChild(Be),this.panelPointInfoEntriesContainer.appendChild(Ue);var He={rawResponse:!1,scope:null,onSuccess:function(En){En.elevations.length>0&&En.elevations[0].z&&(Ue.innerHTML="Altitude : "+En.elevations[0].z+"m")},onFailure:function(En){},positions:[{lon:t[0],lat:t[1]}],outputFormat:"json"};Gp.Services.getAltitude(He);var We={onSuccess:function(En){En.locations.length>0&&(Be.innerHTML="Parcelle : "+En.locations[0].placeAttributes.districtcode+" / "+En.locations[0].placeAttributes.section+" / "+En.locations[0].placeAttributes.number)},onFailure:function(En){},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"CadastralParcel",maximumResponses:1};Gp.Services.reverseGeocode(We);var Cn=async function(){let En={layer:"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune",attributes:["nom"]};const Sn=await OGCRequest.computeGenericGPFWFS(En.layer,En.attributes,En.around||0,En.geom_name||"geom",En.additional_cql||"",En.epsg||4326,En.get_geom||!1,t[0],t[1]);Sn.length&&(ke.innerHTML=Sn[0])},An={onSuccess:function(En){En.locations.length>0?ke.innerHTML=En.locations[0].placeAttributes.label:Cn()},onFailure:function(En){Cn()},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"StreetAddress",maximumResponses:1};Gp.Services.reverseGeocode(An)}onShowPointInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$1.trace(e);var t=this.buttonPointInfoShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onClosePointInfoClick(e){logger$1.trace(e),this._marker.setPosition(void 0)}onCloseContextMenu(e){e.target.clear()}onOpenContextMenu(e){var t=()=>{e.this.controlList=[];var ke=e.this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route");ke.length>0&&ke[0].on("route:newresults",()=>{e.this.itiPoints=new Array(7)})},Oe=e.this.getAvailableContextMenuControls();e.target.clear(),e.target.extend(Oe),t()}};Object.assign(ContextMenu.prototype,ContextMenuDOM);Object.assign(ContextMenu.prototype,ContextMenu);Object.assign(ContextMenu.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ContextMenu=ContextMenu);function useUrlParams(){var Te={};const e=useUrlSearchParams("history");if(e){const ke=Object.keys(e);for(let Be=0;Be<ke.length;Be++){const Ue=ke[Be];switch(Ue){case"c":var t=e[Ue].split(",");Te.lon=t[0],Te.lat=t[1];var Oe=fromLonLat(t);Te.x=Oe[0],Te.y=Oe[1],Te.center=[Te.lon,Te.lat];break;case"l":Te.layers=e[Ue];break;case"w":Te.controls=e[Ue];break;case"z":Te.zoom=parseInt(e[Ue],10);break}}}return Te}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!0,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!0,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0},ContextMenu:{id:"ContextMenu",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var Te=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&Te.push(useControls[e].id);return Te}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnées",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimétrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimétrique",disabled:useControls.ElevationPath.disable},{label:"Importer des données",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de données",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplémentaires non affichés",disabled:useControls.ControlList.disable},{label:"Menu contextuel",id:"contextMenu",name:useControls.ContextMenu.id,hint:"Menu contextuel au clic droit sur la carte",disabled:useControls.ContextMenu.disable}].filter(Te=>Object.keys(useControls).includes(Te.name)).filter(Te=>!Te.disabled)}function useControlsExtensionPosition(){return{shareOptions:"top-left",printOptions:"top-right",territoriesOptions:"bottom-left",layerSwitcherOptions:"top-right",legendsOptions:"top-right",getFeatureInfoOptions:"bottom-left",overviewMapOptions:"bottom-left",zoomOptions:"bottom-right",controlListOptions:"top-right",isocurveOptions:"top-right",routeOptions:"top-right",reverseGeocodeOptions:"top-right",fullscreenOptions:"bottom-right",measureLengthOptions:"top-right",measureAreaOptions:"top-right",measureAzimuthOptions:"top-right",elevationPathOptions:"top-right",layerImportOptions:"top-right",mousePositionOptions:"top-right"}}function useControlsPosition(){let Te=[],e=[];return useControlsExtensionPosition().shareOptions.includes("left")&&Te.push(useControls.Share.id),useControlsExtensionPosition().shareOptions.includes("right")&&e.push(useControls.Share.id),useControlsExtensionPosition().printOptions.includes("left")&&Te.push(useControls.Print.id),useControlsExtensionPosition().printOptions.includes("right")&&e.push(useControls.Print.id),useControlsExtensionPosition().layerSwitcherOptions.includes("left")&&Te.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().layerSwitcherOptions.includes("right")&&e.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().legendsOptions.includes("left")&&Te.push(useControls.Legends.id),useControlsExtensionPosition().legendsOptions.includes("right")&&e.push(useControls.Legends.id),useControlsExtensionPosition().routeOptions.includes("left")&&Te.push(useControls.Route.id),useControlsExtensionPosition().routeOptions.includes("right")&&e.push(useControls.Route.id),useControlsExtensionPosition().isocurveOptions.includes("left")&&Te.push(useControls.Isocurve.id),useControlsExtensionPosition().isocurveOptions.includes("right")&&e.push(useControls.Isocurve.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("left")&&Te.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("right")&&e.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("left")&&Te.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("right")&&e.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().territoriesOptions.includes("left")&&Te.push(useControls.Territories.id),useControlsExtensionPosition().territoriesOptions.includes("right")&&e.push(useControls.Territories.id),useControlsExtensionPosition().measureLengthOptions.includes("left")&&Te.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureLengthOptions.includes("right")&&e.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureAreaOptions.includes("left")&&Te.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAreaOptions.includes("right")&&e.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAzimuthOptions.includes("left")&&Te.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().measureAzimuthOptions.includes("right")&&e.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().mousePositionOptions.includes("left")&&Te.push(useControls.MousePosition.id),useControlsExtensionPosition().mousePositionOptions.includes("right")&&e.push(useControls.MousePosition.id),useControlsExtensionPosition().elevationPathOptions.includes("left")&&Te.push(useControls.ElevationPath.id),useControlsExtensionPosition().elevationPathOptions.includes("right")&&e.push(useControls.ElevationPath.id),useControlsExtensionPosition().layerImportOptions.includes("left")&&Te.push(useControls.LayerImport.id),useControlsExtensionPosition().layerImportOptions.includes("right")&&e.push(useControls.LayerImport.id),useControlsExtensionPosition().controlListOptions.includes("left")&&Te.push(useControls.ControlList.id),useControlsExtensionPosition().controlListOptions.includes("right")&&e.push(useControls.ControlList.id),{left:Te,right:e}}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=Te=>NAMESPACE+"."+Te,useMapStore=defineStore("map",()=>{const Te=ref({});var e=useUrlParams(),t=DEFAULT.CONTROLS.split(",");for(const cr in e)if(Object.prototype.hasOwnProperty.call(e,cr)){if(cr==="controls"){var Oe=e[cr].split(",");t.forEach(function(br){Oe.includes(br)||(e[cr]=e[cr]+","+br)})}const sr=e[cr];localStorage.setItem(ns(cr),sr)}var ke=useStorage(ns("zoom"),DEFAULT.ZOOM),Be=useStorage(ns("x"),DEFAULT.X),Ue=useStorage(ns("y"),DEFAULT.Y),He=useStorage(ns("lon"),DEFAULT.LON),We=useStorage(ns("lat"),DEFAULT.LAT),Cn=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),An=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),En=ref();function Sn(){return En.value}function Tn(cr){En.value=cr}var Ln=computed(()=>{var cr=location.pathname.slice(-1),sr=cr==="/"?location.pathname.slice(0,-1):location.pathname,br=location.origin+sr.replace("/embed","");return`${br}?c=${ti.value}&z=${Math.round(ke.value)}&l=${ni.value}&w=${oi.value}&permalink=yes`}),Bn=computed(()=>{var cr=location.pathname.slice(-1),sr=cr==="/"?location.pathname.slice(0,-1):location.pathname,br=location.origin+(sr.includes("/embed")?sr:sr+"/embed");return`${br}?c=${ti.value}&z=${Math.round(ke.value)}&l=${ni.value}&permalink=yes`}),ti=computed(()=>[He.value,We.value]),ni=useStorage(ns("layers"),DEFAULT.LAYERS);if(!ni.value){var ii=DEFAULT.LAYERS.split(",").filter(function(cr){return!!cr});for(let cr=0;cr<ii.length;cr++){var si=ii[cr].replace(/\(.*\)/,"");si&&Oi(si)}}var oi=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!oi.value){var ci=DEFAULT.CONTROLS.split(",").filter(function(cr){return!!cr});for(let cr=0;cr<ci.length;cr++)nr(ci[cr])}localStorage.setItem(ns("center"),ti.value),localStorage.setItem(ns("permalink"),Ln.value),localStorage.setItem(ns("permalinkShare"),Bn.value),watch(ke,()=>{localStorage.setItem(ns("zoom"),Math.round(ke.value))}),watch(Be,()=>{localStorage.setItem(ns("x"),Be.value)}),watch(Ue,()=>{localStorage.setItem(ns("y"),Ue.value)}),watch(He,()=>{localStorage.setItem(ns("lon"),He.value)}),watch(We,()=>{localStorage.setItem(ns("lat"),We.value)}),watch(ni,()=>{localStorage.setItem(ns("layers"),ni.value.toString())}),watch(Ln,()=>{localStorage.setItem(ns("permalink"),Ln.value.toString())}),watch(Bn,()=>{localStorage.setItem(ns("permalinkShare"),Bn.value.toString())}),watch(ti,()=>{localStorage.setItem(ns("center"),ti.value.toString())}),watch(Cn,()=>{localStorage.setItem(ns("firstVisit"),Cn.value)}),watch(An,()=>{localStorage.setItem(ns("noInformation"),An.value)}),watch(oi,()=>{localStorage.setItem(ns("controls"),oi.value.toString())});function vi(){return Te.value}function pi(cr){Te.value=cr}function fi(){return ni.value.split(",").map(function(cr){const sr=/\(.*\)/gm;return cr.replace(sr,"")}).filter(cr=>cr!="")}function Mi(){ni.value=""}function Oi(cr){if(cr&&!fi().includes(cr)){var sr=ni.value===""?[]:ni.value.split(",");sr.push(cr+"(1;1;0)"),ni.value=sr.toString()}}function ui(cr){const sr=fi().indexOf(cr);if(sr!==-1){var br=ni.value.split(",");br.splice(sr,1),ni.value=br.toString()}}function li(cr,sr){const br=fi().indexOf(cr);if(br!==-1){var Ni=ni.value.split(","),or=Ni[br],er=or.substring(or.indexOf("(")+1,or.indexOf(")")),fr=er.split(";");for(const mr in sr)if(Object.prototype.hasOwnProperty.call(sr,mr)){const hr=sr[mr];mr==="opacity"&&(fr[0]=hr),mr==="visible"&&(fr[1]=+hr),mr==="gray"&&(fr[2]=+hr)}ni.value=ni.value.replace(Ni[br],cr+"("+fr.join(";")+")")}}function Ri(cr){if(cr){var sr=[];for(let Ni=0;Ni<cr.length;Ni++){const or=cr[Ni],er=fi().indexOf(or);if(er!==-1){var br=ni.value.split(",")[er];sr.push(br)}}ni.value=sr.join(",")}}function Pi(cr){const sr=fi().indexOf(cr);if(sr!==-1){var br=ni.value.split(","),Ni=br[sr],or=Ni.substring(Ni.indexOf("(")+1,Ni.indexOf(")")),er=or.split(";");return{opacity:Number(er[0]),visible:!!Number(er[1]),gray:!!Number(er[2])}}}function Fi(){return oi.value.split(",").filter(function(cr){return!!cr})}function Hi(){oi.value=""}function nr(cr){if(!Fi().includes(cr)){var sr=oi.value===""?[]:oi.value.split(",");sr.push(cr),oi.value=sr.toString()}}function ar(cr){const sr=Fi().indexOf(cr);if(sr!==-1){var br=oi.value.split(",");br.splice(sr,1),oi.value=br.toString()}}return{map:Te,zoom:ke,center:ti,x:Be,y:Ue,lon:He,lat:We,firstVisit:Cn,noInformation:An,permalink:Ln,permalinkShare:Bn,menuCatalogueButton:En,getMap:vi,setMap:pi,getmenuCatalogueButton:Sn,setmenuCatalogueButton:Tn,getLayers:fi,cleanLayers:Mi,addLayer:Oi,removeLayer:ui,updateLayerProperty:li,updateLayerPosition:Ri,getLayerProperty:Pi,getControls:Fi,cleanControls:Hi,addControl:nr,removeControl:ar}}),mainMap="mainMap",printMap="printMap",_hoisted_1$d=["id"],__default__$k={name:"Map"},_sfc_main$N=Object.assign(__default__$k,{props:{mapId:String},setup(Te,{expose:e}){const t=useMapStore(),Oe=Te,ke=ref(null),Be=new Map$1({target:Oe.mapId,controls:[]});provide(Oe.mapId,Be),onMounted(()=>{CRS.load(),Be.setTarget(ke.value);const We=ke.value.getElementsByTagName("canvas");We.length&&(We[0].tabIndex=0),Oe.mapId==mainMap&&t.setMap(Be)});const Ue=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&ke.value.focus()};return e({mapRef:ke,updateSize:()=>{Be.updateSize()}}),(We,Cn)=>(openBlock(),createElementBlock("div",{id:Te.mapId,ref_key:"mapRef",ref:ke,tabindex:"0",onMouseover:Ue},[renderSlot(We.$slots,"default")],40,_hoisted_1$d))}}),__default__$j={name:"View"},_sfc_main$M=Object.assign(__default__$j,{props:{zoom:Number,center:Array,mapId:String},setup(Te){const e=useMapStore(),t=Te,Oe=inject(t.mapId),ke=new View({zoom:t.zoom,center:fromLonLat(t.center)});return ke.on("change:center",Be=>{if(t.mapId==mainMap){e.x=Be.target.getCenter()[0],e.y=Be.target.getCenter()[1];var Ue=toLonLat(Be.target.getCenter());e.lon=Ue[0],e.lat=Ue[1]}}),ke.on("change:resolution",Be=>{e.zoom=ke.getZoom()}),onMounted(()=>{Oe&&Oe.setView(ke)}),(Be,Ue)=>null}}),_sfc_main$L={__name:"FullScreen",props:{mapId:String,visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&t.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(Oe.value):t.removeControl(Oe.value)}),(ke,Be)=>null}},useDataStore=defineStore("data",()=>{const Te=ref({}),e=ref([]),t=ref({}),Oe=ref({}),ke=ref({}),Be=ref({}),Ue=ref([]),He=ref([]),We=ref(!1),Cn=ref("");async function An(){try{const Ri="https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/layers.json",Pi="https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/edito.json",Fi="https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/private.json",Hi=await fetch(Pi),nr=await fetch(Ri),ar=await fetch(Fi),cr=await nr.json(),sr=await Hi.json(),br=await ar.json(),Ni=Object.fromEntries(Object.keys(sr.layers).map(er=>[er,{...cr.layers[er],...br.layers[er],...sr.layers[er]}])),or={...cr.layers,...br.layers,...Ni};return Object.keys(or).map(er=>{or[er].key=er;let fr={};return fr[er]=or[er],fr}),Ue.value=sr.territories,Be.value=sr.contacts,Te.value=sr.informations,e.value=sr.thematics,He.value=sr.featured||[],t.value=or,Oe.value.apiKeys={...cr.generalOptions.apiKeys,...br.generalOptions.apiKeys},ke.value=cr.tileMatrixSets,this.isLoaded=!0,or}catch(Ri){console.log(Ri),this.isLoaded=!1,Cn.value=Ri.message}}function En(){return Ue.value}function Sn(){return Be.value}function Tn(){return Te.value}function Ln(){return e.value}function Bn(){return He.value}function ti(){return t.value}function ni(){return Object.values(t.value).map(Ri=>Ri.name)}function ii(Ri,Pi){for(const Fi in t.value)if(Object.hasOwnProperty.call(t.value,Fi)){const Hi=t.value[Fi];if(Hi.name===Ri&&Hi.serviceParams.id.split(":")[1]===Pi)return Hi.name+"$GEOPORTAIL:"+Hi.serviceParams.id}}function si(Ri,Pi){const Fi=this.getLayerIdByName(Ri,Pi);return this.getLayerByID(Fi)}function oi(Ri){return t.value[Ri]}function ci(Ri){return Object.values(t.value).filter(Pi=>{if(Ri&&Pi.title==Ri)return Pi})}function vi(Ri){var Pi=[],Fi=Oe.value.apiKeys;for(var Hi in Fi){var nr=Fi[Hi];nr.forEach(function(ar){ar===Ri&&Pi.push(Hi)})}return Pi}function pi(Ri,Pi){var Fi=null;if((Pi==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var Hi=this.getLayerIdByName(Ri,Pi);Fi=this.getLayerParamsByID(Hi)}return Fi}function fi(Ri){var Pi=null;if(Ri){Pi={};var Fi=this.getLayerByID(Ri),Hi=this.getLayerKeysByID(Ri);if(Hi.length===0)return;for(var nr=0;nr<Hi.length;nr++)Fi.serviceParams.serverUrl[Hi[nr]]&&(Pi.url=Fi.serviceParams.serverUrl[Hi[nr]]);if(/\/v\//.test(Pi.url)?Pi.styles=" ":Pi.styles=Fi.styles[0].name,Pi.version=Fi.serviceParams.version,Pi.format=Fi.formats[0].name,Pi.projection=Fi.defaultProjection,Pi.minScale=Fi.globalConstraint.minScaleDenominator,Pi.maxScale=Fi.globalConstraint.maxScaleDenominator,Pi.extent=Fi.globalConstraint.bbox,Pi.legends=Fi.legends,Pi.title=Fi.title,Pi.description=Fi.description,Fi.wmtsOptions){Pi.tileMatrixSetLimits=Fi.wmtsOptions.tileMatrixSetLimits;var ar=Fi.wmtsOptions.tileMatrixSetLink;if(ar){Pi.TMSLink=ar;var cr=this.getTileMatrixSetByID(ar);Pi.matrixIds=Object.keys(cr.tileMatrices),Pi.tileMatrices=cr.tileMatrices,Pi.nativeResolutions=cr.nativeResolutions}}}return Pi}function Mi(Ri){var Pi=null;if(Ri){var Fi=this.getLayerByID(Ri);Pi={},Pi.projection=Fi.defaultProjection,Pi.minScale=Fi.globalConstraint.minScaleDenominator,Pi.maxScale=Fi.globalConstraint.maxScaleDenominator,Pi.extent=Fi.globalConstraint.bbox}return Pi}function Oi(Ri,Pi){var Fi=this.getLayerIdByName(Ri,Pi);return this.getGlobalConstraintsByID(Fi)}function ui(){return ke.value}function li(Ri){return ke.value[Ri]}return{error:Cn,isLoaded:We,fetchData:An,getTerritories:En,getContacts:Sn,getInformations:Tn,getThematics:Ln,getFeatured:Bn,getLayers:ti,getLayersNames:ni,getLayerKeysByID:vi,getLayerIdByName:ii,getLayerByName:si,getLayerByID:oi,getLayerByTitle:ci,getTileMatrixSets:ui,getTileMatrixSetByID:li,getLayerParamsByName:pi,getLayerParamsByID:fi,getGlobalConstraintsByID:Mi,getGlobalConstraintsByName:Oi}});function useActionButtonEulerian(Te){Te.setAttribute("data-fr-analytics-action",Te.title),Te.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$K={__name:"ReverseGeocode",props:{mapId:String,visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(Te){const e=Te,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("reverseGeocode:onclickresult",Be),ke.value.on("reverseGeocode:compute",Ue),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(He)}});const Be=He=>{t.debug(He)},Ue=He=>{t.debug(He)};return(He,We)=>null}},IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",_sfc_main$J={__name:"SearchEngine",props:{mapId:String,visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=useMapStore(),ke=useDataStore(),Be=inject(e.mapId),Ue=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(Be.addControl(Ue.value),Ue.value.on("searchengine:search:click",He),Ue.value.on("searchengine:autocomplete:click",We),Ue.value.on("searchengine:geocode:click",Cn),Ue.value.on("searchengine:coordinates:click",An),Ue.value.on("searchengine:geolocation:click",En))}),onBeforeUpdate(()=>{e.visibility||Be.removeControl(Ue.value)}),onUpdated(()=>{e.visibility&&Be.addControl(Ue.value)}),onUnmounted(()=>{});const He=Sn=>{var Tn=ke.getLayerIdByName(Sn.suggest.name,Sn.suggest.service);t.debug("onClickSearch",Tn),Oe.addLayer(Tn)},We=Sn=>{},Cn=Sn=>{},An=Sn=>{},En=Sn=>{};return(Sn,Tn)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const Oe=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=Oe+"-inner",this.element.className=Oe+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,Oe=e.projection,ke=this.getUnits(),Be=ke=="degrees"?"degrees":"m";let Ue=getPointResolution(Oe,e.resolution,t,Be);const He=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,We=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let Cn=He*Ue,An="";if(ke=="degrees"){const si=METERS_PER_UNIT$1.degrees;Cn*=si,Cn<si/60?(An="″",Ue*=3600):Cn<si?(An="′",Ue*=60):An="°"}else if(ke=="imperial")Cn<.9144?(An="in",Ue/=.0254):Cn<1609.344?(An="ft",Ue/=.3048):(An="mi",Ue/=1609.344);else if(ke=="nautical")Ue/=1852,An="NM";else if(ke=="metric")Cn<1e-6?(An="nm",Ue*=1e9):Cn<.001?(An="μm",Ue*=1e6):Cn<1?(An="mm",Ue*=1e3):Cn<1e3?An="m":(An="km",Ue/=1e3);else if(ke=="us")Cn<.9144?(An="in",Ue*=39.37):Cn<1609.344?(An="ft",Ue/=.30480061):(An="mi",Ue/=1609.3472);else throw new Error("Invalid units");let En=3*Math.floor(Math.log(He*Ue)/Math.log(10)),Sn,Tn,Ln,Bn,ti,ni;for(;;){Ln=Math.floor(En/3);const si=Math.pow(10,Ln);if(Sn=LEADING_DIGITS[(En%3+3)%3]*si,Tn=Math.round(Sn/Ue),isNaN(Tn)){this.element.style.display="none",this.renderedVisible_=!1;return}if(We!==void 0&&Tn>=We){Sn=Bn,Tn=ti,Ln=ni;break}else if(Tn>=He)break;Bn=Sn,ti=Tn,ni=Ln,++En}const ii=this.scaleBar_?this.createScaleBar(Tn,Sn,An):Sn.toFixed(Ln<0?-Ln:0)+" "+An;this.renderedHTML_!=ii&&(this.innerElement_.innerHTML=ii,this.renderedHTML_=ii),this.renderedWidth_!=Tn&&(this.innerElement_.style.width=Tn+"px",this.renderedWidth_=Tn),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,Oe){const ke=this.getScaleForResolution(),Be=ke<1?Math.round(1/ke).toLocaleString()+" : 1":"1 : "+Math.round(ke).toLocaleString(),Ue=this.scaleBarSteps_,He=e/Ue,We=[this.createMarker("absolute")];for(let An=0;An<Ue;++An){const En=An%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";We.push(`<div><div class="ol-scale-singlebar ${En}" style="width: ${He}px;"></div>`+this.createMarker("relative")+(An%2===0||Ue===2?this.createStepText(An,e,!1,t,Oe):"")+"</div>")}return We.push(this.createStepText(Ue,e,!0,t,Oe)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Be+"</div>":"")+We.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,Oe,ke,Be){const He=(e===0?0:Math.round(ke/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Be),We=e===0?-3:t/this.scaleBarSteps_*-1,Cn=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${We}px;text-align: ${e===0?"left":"center"};min-width: ${Cn}px;left: ${Oe?t+"px":"unset"};">`+He+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,Oe=1e3/25.4;return e*Oe*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$I={__name:"ScaleLine",props:{mapId:String,visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&t.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(Oe.value)}),onUpdated(()=>{e.visibility&&t.addControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$H={__name:"OverviewMap",props:{mapId:String,visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var He=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(He)}}else Oe.removeControl(ke.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(Oe.addControl(ke.value),ke.value.on("overviewmap:toggle",Ue),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var He=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(He)}}else Oe.removeControl(ke.value)});function Ue(He){t.debug(He)}return(He,We)=>null}},_sfc_main$G={__name:"Zoom",props:{mapId:String,visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(Oe.addControl(ke.value),ke.value.on("zoom:in",Be),ke.value.on("zoom:out",Ue))}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{e.visibility&&Oe.addControl(ke.value)});function Be(He){t.debug(He)}function Ue(He){t.debug(He)}return(He,We)=>null}},_sfc_main$F={__name:"LayerSwitcher",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=useMapStore(),ke=useDataStore(),Be=inject(e.mapId),Ue=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(Be.addControl(Ue.value),e.analytic){var Tn=Ue.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(Tn)}Ue.value.on("layerswitcher:add",He),Ue.value.on("layerswitcher:remove",We),Ue.value.on("layerswitcher:extent",Cn),Ue.value.on("layerswitcher:change:opacity",An),Ue.value.on("layerswitcher:change:visibility",En),Ue.value.on("layerswitcher:change:position",Sn)}}),onBeforeUpdate(()=>{if(!e.visibility&&(Be.removeControl(Ue.value),e.analytic)){var Tn=Ue.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(Tn)}}),onUpdated(()=>{e.visibility&&Be.addControl(Ue.value)});const He=Tn=>{var Ln=ke.getLayerIdByName(Tn.layer.name,Tn.layer.service);t.debug("onAddLayer",Ln),Ln&&Oe.addLayer(Ln)},We=Tn=>{var Ln=ke.getLayerIdByName(Tn.layer.name,Tn.layer.service);t.debug("onRemoveLayer",Ln),Ln&&Oe.removeLayer(Ln)},Cn=Tn=>{if(t.debug("onZoomToExtentLayer",Tn),Tn.error){var Ln=ke.getGlobalConstraintsByName(Tn.layer.name,Tn.layer.service);if(Ln){var Bn=Be.getView(),ti=Bn.getProjection(),ni=[Ln.extent.left,Ln.extent.bottom,Ln.extent.right,Ln.extent.top],ii=Ln.crs;ii||(ii="EPSG:4326");var si=transformExtent(ni,ii,ti);si&&Bn.fit(si)}}},An=Tn=>{var Ln=ke.getLayerIdByName(Tn.layer.name,Tn.layer.service);t.debug("onChangeOpacityLayer",Tn),Oe.updateLayerProperty(Ln,{opacity:Tn.opacity})},En=Tn=>{var Ln=ke.getLayerIdByName(Tn.layer.name,Tn.layer.service);t.debug("onChangeVisibilityLayer",Tn),Oe.updateLayerProperty(Ln,{visible:Tn.visibility})},Sn=Tn=>{t.debug("onChangePositionLayer",Tn),Oe.updateLayerPosition(Tn.layers.reverse().map(Ln=>{if(Ln.name&&Ln.service)return ke.getLayerIdByName(Ln.name,Ln.service)}))};return(Tn,Ln)=>null}},_sfc_main$E={__name:"Legends",props:{mapId:String,visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$D={__name:"Drawing",props:{mapId:String,visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new Drawing(e.drawingOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$C={__name:"Isocurve",props:{mapId:String,visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(Te){const e=Te,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new Isocurve(e.isocurveOptions));onMounted(()=>{if(e.visibility){if(Oe.addControl(ke.value),e.analytic){var We=ke.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(We)}ke.value.on("isocurve:drawstart",Be),ke.value.on("socurve:drawend",Ue),ke.value.on("isocurve:compute",He)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},He=We=>{t.debug(We)};return(We,Cn)=>null}},_sfc_main$B={__name:"Route",props:{mapId:String,visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(Te){const e=Te,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new Route(e.routeOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("route:drawstart",Be),ke.value.on("route:drawend",Ue),ke.value.on("route:compute",He),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},He=We=>{t.debug(We)};return(We,Cn)=>null}},_sfc_main$A={__name:"MeasureLength",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$z={__name:"MeasureArea",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$y={__name:"MeasureAzimuth",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(Te){const e=Te,t=inject(e.mapId),Oe=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$x={__name:"MousePosition",props:{mapId:String,visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(Te){const e=Te;dist.useLogger();const t=inject(e.mapId),Oe=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{e.visibility||t.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(ke)}}),(ke,Be)=>null}},_sfc_main$w={__name:"ElevationPath",props:{mapId:String,visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new ElevationPath(e.elevationPathOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("elevationpath:drawstart",Be),ke.value.on("elevationpath:drawend",Ue),ke.value.on("elevationpath:compute",He),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},He=We=>{t.debug(We)};return(We,Cn)=>null}},_sfc_main$v={__name:"Territories",props:{mapId:String,visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(Te){const e=Te;dist.useLogger();const t=useDataStore(),Oe=inject(e.mapId),ke=ref(new Territories(e.territoriesOptions));function Be(){var Ue=t.getTerritories();for(let He=0;He<Ue.length;He++){const We=Ue[He];ke.value.setTerritory(We)}}return onMounted(()=>{if(e.visibility&&(Be(),Oe.addControl(ke.value),e.analytic)){var Ue=ke.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Ue)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Be(),Oe.addControl(ke.value),e.analytic)){var Ue=ke.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Ue)}}),(Ue,He)=>null}},_sfc_main$u={__name:"GetFeatureInfo",props:{mapId:String,visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var He=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(He)}}else Oe.removeControl(ke.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(Oe.addControl(ke.value),ke.value.on("GetFeatureInfo:toggle",Ue),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var He=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(He)}}else Oe.removeControl(ke.value)});function Ue(He){t.debug(He)}return(He,We)=>null}},_sfc_main$t={__name:"LayerImport",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new LayerImport(e.layerImportOptions));return onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){t.debug(ke.value.element);var Be=ke.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),(Be,Ue)=>null}},selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$s={__name:"ControlList",props:{mapId:String,visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(Te){const e=Te,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new ControlList(e.controlListOptions)),Be=useMatchMedia("SM"),Ue=useMatchMediaHeight("XS");return watch(Be,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(Ue,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(Oe.removeControl(ke.value),e.visibility){if(Oe.addControl(ke.value),e.analytic){t.debug(ke.value.element);var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){t.debug(ke.value.element);var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),(He,We)=>null}},_sfc_main$r={__name:"ContextMenu",props:{mapId:String,visibility:Boolean,analytic:Boolean,contextMenuOptions:Object},setup(Te){const e=useMatchMedia("SM"),t=Te,Oe=inject(t.mapId),ke=ref(new ContextMenu(t.contextMenuOptions));return onMounted(()=>{t.visibility&&!e.value&&Oe.addControl(ke.value)}),onBeforeUpdate(()=>{t.visibility&&!e.value?Oe.addControl(ke.value):Oe.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$q={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(Te){const e=Te,t=dist.useLogger();t.debug(e.layerOptions);const Oe=useDataStore(),ke=inject(e.mapId);var Be=null;return onMounted(()=>{var Ue=Oe.getLayerByName(e.layerOptions.name,e.layerOptions.service),He=Oe.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);Ue.params=He,t.debug("layer to add",Ue);var We=e.layerOptions.service,Cn=e.layerOptions.name,An={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},En={preload:1/0,cacheSize:1024};switch(We){case"WMS":Be=new LayerWMS({layer:Cn,configuration:Ue,apiKey:"ign_scan_ws",olParams:Object.assign(An,En)});break;case"WMTS":Be=new LayerWMTS({layer:Cn,configuration:Ue,apiKey:"ign_scan_ws",olParams:Object.assign(An,En)});break;case"TMS":An.declutter=!0,Be=new LayerMapBox({layer:Cn,configuration:Ue,apiKey:"ign_scan_ws"},An);break}Be&&ke.addLayer(Be)}),onUnmounted(()=>{ke.removeLayer(Be)}),(Ue,He)=>(openBlock(),createElementBlock("div",null,[renderSlot(Ue.$slots,"default")]))}},_sfc_main$p={__name:"Layers",props:{selectedLayers:Object,mapId:String},setup(Te){const e=Te;dist.useLogger();var t=computed(()=>toRaw(e.selectedLayers).map(Oe=>({name:Oe.name,service:Oe.serviceParams.id.split(":")[1],key:Oe.key,opacity:Oe.hasOwnProperty("opacity")?Oe.opacity:1,visible:Oe.hasOwnProperty("visible")?Oe.visible:!0,gray:Oe.hasOwnProperty("gray")?Oe.gray:!0})));return(Oe,ke)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Be=>(openBlock(),createBlock(_sfc_main$q,{key:Be.key,"layer-options":Be,"map-id":Te.mapId},null,8,["layer-options","map-id"]))),128))}};function _typeof(Te){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Te)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Te,e){for(var t=new u16(31),Oe=0;Oe<31;++Oe)t[Oe]=e+=1<<Te[Oe-1];for(var ke=new i32(t[30]),Oe=1;Oe<30;++Oe)for(var Be=t[Oe];Be<t[Oe+1];++Be)ke[Be]=Be-t[Oe]<<5|Oe;return{b:t,r:ke}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(Te,e,t){for(var Oe=Te.length,ke=0,Be=new u16(e);ke<Oe;++ke)Te[ke]&&++Be[Te[ke]-1];var Ue=new u16(e);for(ke=1;ke<e;++ke)Ue[ke]=Ue[ke-1]+Be[ke-1]<<1;var He;if(t){He=new u16(1<<e);var We=15-e;for(ke=0;ke<Oe;++ke)if(Te[ke])for(var Cn=ke<<4|Te[ke],An=e-Te[ke],En=Ue[Te[ke]-1]++<<An,Sn=En|(1<<An)-1;En<=Sn;++En)He[rev[En]>>We]=Cn}else for(He=new u16(Oe),ke=0;ke<Oe;++ke)Te[ke]&&(He[ke]=rev[Ue[Te[ke]-1]++]>>15-Te[ke]);return He},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Te){for(var e=Te[0],t=1;t<Te.length;++t)Te[t]>e&&(e=Te[t]);return e},bits=function(Te,e,t){var Oe=e/8|0;return(Te[Oe]|Te[Oe+1]<<8)>>(e&7)&t},bits16=function(Te,e){var t=e/8|0;return(Te[t]|Te[t+1]<<8|Te[t+2]<<16)>>(e&7)},shft=function(Te){return(Te+7)/8|0},slc=function(Te,e,t){return(t==null||t>Te.length)&&(t=Te.length),new u8(Te.subarray(e,t))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Te,e,t){var Oe=new Error(e||ec[Te]);if(Oe.code=Te,Error.captureStackTrace&&Error.captureStackTrace(Oe,err),!t)throw Oe;return Oe},inflt=function(Te,e,t,Oe){var ke=Te.length,Be=0;if(!ke||e.f&&!e.l)return t||new u8(0);var Ue=!t,He=Ue||e.i!=2,We=e.i;Ue&&(t=new u8(ke*3));var Cn=function(Vr){var Wr=t.length;if(Vr>Wr){var tr=new u8(Math.max(Wr*2,Vr));tr.set(t),t=tr}},An=e.f||0,En=e.p||0,Sn=e.b||0,Tn=e.l,Ln=e.d,Bn=e.m,ti=e.n,ni=ke*8;do{if(!Tn){An=bits(Te,En,1);var ii=bits(Te,En+1,3);if(En+=3,ii)if(ii==1)Tn=flrm,Ln=fdrm,Bn=9,ti=5;else if(ii==2){var vi=bits(Te,En,31)+257,pi=bits(Te,En+10,15)+4,fi=vi+bits(Te,En+5,31)+1;En+=14;for(var Mi=new u8(fi),Oi=new u8(19),ui=0;ui<pi;++ui)Oi[clim[ui]]=bits(Te,En+ui*3,7);En+=pi*3;for(var li=max(Oi),Ri=(1<<li)-1,Pi=hMap(Oi,li,1),ui=0;ui<fi;){var Fi=Pi[bits(Te,En,Ri)];En+=Fi&15;var si=Fi>>4;if(si<16)Mi[ui++]=si;else{var Hi=0,nr=0;for(si==16?(nr=3+bits(Te,En,3),En+=2,Hi=Mi[ui-1]):si==17?(nr=3+bits(Te,En,7),En+=3):si==18&&(nr=11+bits(Te,En,127),En+=7);nr--;)Mi[ui++]=Hi}}var ar=Mi.subarray(0,vi),cr=Mi.subarray(vi);Bn=max(ar),ti=max(cr),Tn=hMap(ar,Bn,1),Ln=hMap(cr,ti,1)}else err(1);else{var si=shft(En)+4,oi=Te[si-4]|Te[si-3]<<8,ci=si+oi;if(ci>ke){We&&err(0);break}He&&Cn(Sn+oi),t.set(Te.subarray(si,ci),Sn),e.b=Sn+=oi,e.p=En=ci*8,e.f=An;continue}if(En>ni){We&&err(0);break}}He&&Cn(Sn+131072);for(var sr=(1<<Bn)-1,br=(1<<ti)-1,Ni=En;;Ni=En){var Hi=Tn[bits16(Te,En)&sr],or=Hi>>4;if(En+=Hi&15,En>ni){We&&err(0);break}if(Hi||err(2),or<256)t[Sn++]=or;else if(or==256){Ni=En,Tn=null;break}else{var er=or-254;if(or>264){var ui=or-257,fr=fleb[ui];er=bits(Te,En,(1<<fr)-1)+fl[ui],En+=fr}var mr=Ln[bits16(Te,En)&br],hr=mr>>4;mr||err(3),En+=mr&15;var cr=fd[hr];if(hr>3){var fr=fdeb[hr];cr+=bits16(Te,En)&(1<<fr)-1,En+=fr}if(En>ni){We&&err(0);break}He&&Cn(Sn+131072);var vr=Sn+er;if(Sn<cr){var _r=Be-cr,Ar=Math.min(cr,vr);for(_r+Sn<0&&err(3);Sn<Ar;++Sn)t[Sn]=Oe[_r+Sn]}for(;Sn<vr;++Sn)t[Sn]=t[Sn-cr]}}e.l=Tn,e.p=Ni,e.b=Sn,e.f=An,Tn&&(An=1,e.m=Bn,e.d=Ln,e.n=ti)}while(!An);return Sn!=t.length&&Ue?slc(t,0,Sn):t.subarray(0,Sn)},wbits=function(Te,e,t){t<<=e&7;var Oe=e/8|0;Te[Oe]|=t,Te[Oe+1]|=t>>8},wbits16=function(Te,e,t){t<<=e&7;var Oe=e/8|0;Te[Oe]|=t,Te[Oe+1]|=t>>8,Te[Oe+2]|=t>>16},hTree=function(Te,e){for(var t=[],Oe=0;Oe<Te.length;++Oe)Te[Oe]&&t.push({s:Oe,f:Te[Oe]});var ke=t.length,Be=t.slice();if(!ke)return{t:et$1,l:0};if(ke==1){var Ue=new u8(t[0].s+1);return Ue[t[0].s]=1,{t:Ue,l:1}}t.sort(function(ci,vi){return ci.f-vi.f}),t.push({s:-1,f:25001});var He=t[0],We=t[1],Cn=0,An=1,En=2;for(t[0]={s:-1,f:He.f+We.f,l:He,r:We};An!=ke-1;)He=t[t[Cn].f<t[En].f?Cn++:En++],We=t[Cn!=An&&t[Cn].f<t[En].f?Cn++:En++],t[An++]={s:-1,f:He.f+We.f,l:He,r:We};for(var Sn=Be[0].s,Oe=1;Oe<ke;++Oe)Be[Oe].s>Sn&&(Sn=Be[Oe].s);var Tn=new u16(Sn+1),Ln=ln(t[An-1],Tn,0);if(Ln>e){var Oe=0,Bn=0,ti=Ln-e,ni=1<<ti;for(Be.sort(function(vi,pi){return Tn[pi.s]-Tn[vi.s]||vi.f-pi.f});Oe<ke;++Oe){var ii=Be[Oe].s;if(Tn[ii]>e)Bn+=ni-(1<<Ln-Tn[ii]),Tn[ii]=e;else break}for(Bn>>=ti;Bn>0;){var si=Be[Oe].s;Tn[si]<e?Bn-=1<<e-Tn[si]++-1:++Oe}for(;Oe>=0&&Bn;--Oe){var oi=Be[Oe].s;Tn[oi]==e&&(--Tn[oi],++Bn)}Ln=e}return{t:new u8(Tn),l:Ln}},ln=function(Te,e,t){return Te.s==-1?Math.max(ln(Te.l,e,t+1),ln(Te.r,e,t+1)):e[Te.s]=t},lc=function(Te){for(var e=Te.length;e&&!Te[--e];);for(var t=new u16(++e),Oe=0,ke=Te[0],Be=1,Ue=function(We){t[Oe++]=We},He=1;He<=e;++He)if(Te[He]==ke&&He!=e)++Be;else{if(!ke&&Be>2){for(;Be>138;Be-=138)Ue(32754);Be>2&&(Ue(Be>10?Be-11<<5|28690:Be-3<<5|12305),Be=0)}else if(Be>3){for(Ue(ke),--Be;Be>6;Be-=6)Ue(8304);Be>2&&(Ue(Be-3<<5|8208),Be=0)}for(;Be--;)Ue(ke);Be=1,ke=Te[He]}return{c:t.subarray(0,Oe),n:e}},clen=function(Te,e){for(var t=0,Oe=0;Oe<e.length;++Oe)t+=Te[Oe]*e[Oe];return t},wfblk=function(Te,e,t){var Oe=t.length,ke=shft(e+2);Te[ke]=Oe&255,Te[ke+1]=Oe>>8,Te[ke+2]=Te[ke]^255,Te[ke+3]=Te[ke+1]^255;for(var Be=0;Be<Oe;++Be)Te[ke+Be+4]=t[Be];return(ke+4+Oe)*8},wblk=function(Te,e,t,Oe,ke,Be,Ue,He,We,Cn,An){wbits(e,An++,t),++ke[256];for(var En=hTree(ke,15),Sn=En.t,Tn=En.l,Ln=hTree(Be,15),Bn=Ln.t,ti=Ln.l,ni=lc(Sn),ii=ni.c,si=ni.n,oi=lc(Bn),ci=oi.c,vi=oi.n,pi=new u16(19),fi=0;fi<ii.length;++fi)++pi[ii[fi]&31];for(var fi=0;fi<ci.length;++fi)++pi[ci[fi]&31];for(var Mi=hTree(pi,7),Oi=Mi.t,ui=Mi.l,li=19;li>4&&!Oi[clim[li-1]];--li);var Ri=Cn+5<<3,Pi=clen(ke,flt)+clen(Be,fdt)+Ue,Fi=clen(ke,Sn)+clen(Be,Bn)+Ue+14+3*li+clen(pi,Oi)+2*pi[16]+3*pi[17]+7*pi[18];if(We>=0&&Ri<=Pi&&Ri<=Fi)return wfblk(e,An,Te.subarray(We,We+Cn));var Hi,nr,ar,cr;if(wbits(e,An,1+(Fi<Pi)),An+=2,Fi<Pi){Hi=hMap(Sn,Tn,0),nr=Sn,ar=hMap(Bn,ti,0),cr=Bn;var sr=hMap(Oi,ui,0);wbits(e,An,si-257),wbits(e,An+5,vi-1),wbits(e,An+10,li-4),An+=14;for(var fi=0;fi<li;++fi)wbits(e,An+3*fi,Oi[clim[fi]]);An+=3*li;for(var br=[ii,ci],Ni=0;Ni<2;++Ni)for(var or=br[Ni],fi=0;fi<or.length;++fi){var er=or[fi]&31;wbits(e,An,sr[er]),An+=Oi[er],er>15&&(wbits(e,An,or[fi]>>5&127),An+=or[fi]>>12)}}else Hi=flm,nr=flt,ar=fdm,cr=fdt;for(var fi=0;fi<He;++fi){var fr=Oe[fi];if(fr>255){var er=fr>>18&31;wbits16(e,An,Hi[er+257]),An+=nr[er+257],er>7&&(wbits(e,An,fr>>23&31),An+=fleb[er]);var mr=fr&31;wbits16(e,An,ar[mr]),An+=cr[mr],mr>3&&(wbits16(e,An,fr>>5&8191),An+=fdeb[mr])}else wbits16(e,An,Hi[fr]),An+=nr[fr]}return wbits16(e,An,Hi[256]),An+nr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Te,e,t,Oe,ke,Be){var Ue=Be.z||Te.length,He=new u8(Oe+Ue+5*(1+Math.ceil(Ue/7e3))+ke),We=He.subarray(Oe,He.length-ke),Cn=Be.l,An=(Be.r||0)&7;if(e){An&&(We[0]=Be.r>>3);for(var En=deo[e-1],Sn=En>>13,Tn=En&8191,Ln=(1<<t)-1,Bn=Be.p||new u16(32768),ti=Be.h||new u16(Ln+1),ni=Math.ceil(t/3),ii=2*ni,si=function(pr){return(Te[pr]^Te[pr+1]<<ni^Te[pr+2]<<ii)&Ln},oi=new i32(25e3),ci=new u16(288),vi=new u16(32),pi=0,fi=0,Mi=Be.i||0,Oi=0,ui=Be.w||0,li=0;Mi+2<Ue;++Mi){var Ri=si(Mi),Pi=Mi&32767,Fi=ti[Ri];if(Bn[Pi]=Fi,ti[Ri]=Pi,ui<=Mi){var Hi=Ue-Mi;if((pi>7e3||Oi>24576)&&(Hi>423||!Cn)){An=wblk(Te,We,0,oi,ci,vi,fi,Oi,li,Mi-li,An),Oi=pi=fi=0,li=Mi;for(var nr=0;nr<286;++nr)ci[nr]=0;for(var nr=0;nr<30;++nr)vi[nr]=0}var ar=2,cr=0,sr=Tn,br=Pi-Fi&32767;if(Hi>2&&Ri==si(Mi-br))for(var Ni=Math.min(Sn,Hi)-1,or=Math.min(32767,Mi),er=Math.min(258,Hi);br<=or&&--sr&&Pi!=Fi;){if(Te[Mi+ar]==Te[Mi+ar-br]){for(var fr=0;fr<er&&Te[Mi+fr]==Te[Mi+fr-br];++fr);if(fr>ar){if(ar=fr,cr=br,fr>Ni)break;for(var mr=Math.min(br,fr-2),hr=0,nr=0;nr<mr;++nr){var vr=Mi-br+nr&32767,_r=Bn[vr],Ar=vr-_r&32767;Ar>hr&&(hr=Ar,Fi=vr)}}}Pi=Fi,Fi=Bn[Pi],br+=Pi-Fi&32767}if(cr){oi[Oi++]=268435456|revfl[ar]<<18|revfd[cr];var Vr=revfl[ar]&31,Wr=revfd[cr]&31;fi+=fleb[Vr]+fdeb[Wr],++ci[257+Vr],++vi[Wr],ui=Mi+ar,++pi}else oi[Oi++]=Te[Mi],++ci[Te[Mi]]}}for(Mi=Math.max(Mi,ui);Mi<Ue;++Mi)oi[Oi++]=Te[Mi],++ci[Te[Mi]];An=wblk(Te,We,Cn,oi,ci,vi,fi,Oi,li,Mi-li,An),Cn||(Be.r=An&7|We[An/8|0]<<3,An-=7,Be.h=ti,Be.p=Bn,Be.i=Mi,Be.w=ui)}else{for(var Mi=Be.w||0;Mi<Ue+Cn;Mi+=65535){var tr=Mi+65535;tr>=Ue&&(We[An/8|0]=Cn,tr=Ue),An=wfblk(We,An+1,Te.subarray(Mi,tr))}Be.i=Ue}return slc(He,0,Oe+shft(An)+ke)},adler=function(){var Te=1,e=0;return{p:function(t){for(var Oe=Te,ke=e,Be=t.length|0,Ue=0;Ue!=Be;){for(var He=Math.min(Ue+2655,Be);Ue<He;++Ue)ke+=Oe+=t[Ue];Oe=(Oe&65535)+15*(Oe>>16),ke=(ke&65535)+15*(ke>>16)}Te=Oe,e=ke},d:function(){return Te%=65521,e%=65521,(Te&255)<<24|(Te&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(Te,e,t,Oe,ke){if(!ke&&(ke={l:1},e.dictionary)){var Be=e.dictionary.subarray(-32768),Ue=new u8(Be.length+Te.length);Ue.set(Be),Ue.set(Te,Be.length),Te=Ue,ke.w=Be.length}return dflt(Te,e.level==null?6:e.level,e.mem==null?ke.l?Math.ceil(Math.max(8,Math.min(13,Math.log(Te.length)))*1.5):20:12+e.mem,t,Oe,ke)},wbytes=function(Te,e,t){for(;t;++e)Te[e]=t,t>>>=8},zlh=function(Te,e){var t=e.level,Oe=t==0?0:t<6?1:t==9?3:2;if(Te[0]=120,Te[1]=Oe<<6|(e.dictionary&&32),Te[1]|=31-(Te[0]<<8|Te[1])%31,e.dictionary){var ke=adler();ke.p(e.dictionary),wbytes(Te,2,ke.d())}},zls=function(Te,e){return((Te[0]&15)!=8||Te[0]>>4>7||(Te[0]<<8|Te[1])%31)&&err(6,"invalid zlib data"),(Te[1]>>5&1)==1&&err(6,"invalid zlib data: "+(Te[1]&32?"need":"unexpected")+" dictionary"),(Te[1]>>3&4)+2};function zlibSync(Te,e){e||(e={});var t=adler();t.p(Te);var Oe=dopt(Te,e,e.dictionary?6:2,4);return zlh(Oe,e),wbytes(Oe,Oe.length-4,t.d()),Oe}function unzlibSync(Te,e){return inflt(Te.subarray(zls(Te),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(Te){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Te){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Te){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Te))}};function o(Te,e,t){var Oe=new XMLHttpRequest;Oe.open("GET",Te),Oe.responseType="blob",Oe.onload=function(){l(Oe.response,e,t)},Oe.onerror=function(){a.error("could not download file")},Oe.send()}function s(Te){var e=new XMLHttpRequest;e.open("HEAD",Te,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(Te){try{Te.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Te.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Te,e,t){var Oe=n.URL||n.webkitURL,ke=document.createElement("a");e=e||Te.name||"download",ke.download=e,ke.rel="noopener",typeof Te=="string"?(ke.href=Te,ke.origin!==location.origin?s(ke.href)?o(Te,e,t):c(ke,ke.target="_blank"):c(ke)):(ke.href=Oe.createObjectURL(Te),setTimeout(function(){Oe.revokeObjectURL(ke.href)},4e4),setTimeout(function(){c(ke)},0))}:"msSaveOrOpenBlob"in navigator?function(Te,e,t){if(e=e||Te.name||"download",typeof Te=="string")if(s(Te))o(Te,e,t);else{var Oe=document.createElement("a");Oe.href=Te,Oe.target="_blank",setTimeout(function(){c(Oe)})}else navigator.msSaveOrOpenBlob(function(ke,Be){return Be===void 0?Be={autoBom:!1}:_typeof(Be)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Be={autoBom:!Be}),Be.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ke.type)?new Blob(["\uFEFF",ke],{type:ke.type}):ke}(Te,t),e)}:function(Te,e,t,Oe){if((Oe=Oe||open("","_blank"))&&(Oe.document.title=Oe.document.body.innerText="downloading..."),typeof Te=="string")return o(Te,e,t);var ke=Te.type==="application/octet-stream",Be=/constructor/i.test(n.HTMLElement)||n.safari,Ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ue||ke&&Be)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var He=new FileReader;He.onloadend=function(){var An=He.result;An=Ue?An:An.replace(/^data:[^;]*;/,"data:attachment/file;"),Oe?Oe.location.href=An:location=An,Oe=null},He.readAsDataURL(Te)}else{var We=n.URL||n.webkitURL,Cn=We.createObjectURL(Te);Oe?Oe.location=Cn:location.href=Cn,Oe=null,setTimeout(function(){We.revokeObjectURL(Cn)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Te){var e;Te=Te||"",this.ok=!1,Te.charAt(0)=="#"&&(Te=Te.substr(1,6)),Te={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Te=(Te=Te.replace(/ /g,"")).toLowerCase()]||Te;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(He){return[parseInt(He[1]),parseInt(He[2]),parseInt(He[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(He){return[parseInt(He[1],16),parseInt(He[2],16),parseInt(He[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(He){return[parseInt(He[1]+He[1],16),parseInt(He[2]+He[2],16),parseInt(He[3]+He[3],16)]}}],Oe=0;Oe<t.length;Oe++){var ke=t[Oe].re,Be=t[Oe].process,Ue=ke.exec(Te);Ue&&(e=Be(Ue),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var He=this.r.toString(16),We=this.g.toString(16),Cn=this.b.toString(16);return He.length==1&&(He="0"+He),We.length==1&&(We="0"+We),Cn.length==1&&(Cn="0"+Cn),"#"+He+We+Cn}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Te,e){var t=Te[0],Oe=Te[1],ke=Te[2],Be=Te[3];t=g(t,Oe,ke,Be,e[0],7,-680876936),Be=g(Be,t,Oe,ke,e[1],12,-389564586),ke=g(ke,Be,t,Oe,e[2],17,606105819),Oe=g(Oe,ke,Be,t,e[3],22,-1044525330),t=g(t,Oe,ke,Be,e[4],7,-176418897),Be=g(Be,t,Oe,ke,e[5],12,1200080426),ke=g(ke,Be,t,Oe,e[6],17,-1473231341),Oe=g(Oe,ke,Be,t,e[7],22,-45705983),t=g(t,Oe,ke,Be,e[8],7,1770035416),Be=g(Be,t,Oe,ke,e[9],12,-1958414417),ke=g(ke,Be,t,Oe,e[10],17,-42063),Oe=g(Oe,ke,Be,t,e[11],22,-1990404162),t=g(t,Oe,ke,Be,e[12],7,1804603682),Be=g(Be,t,Oe,ke,e[13],12,-40341101),ke=g(ke,Be,t,Oe,e[14],17,-1502002290),t=m(t,Oe=g(Oe,ke,Be,t,e[15],22,1236535329),ke,Be,e[1],5,-165796510),Be=m(Be,t,Oe,ke,e[6],9,-1069501632),ke=m(ke,Be,t,Oe,e[11],14,643717713),Oe=m(Oe,ke,Be,t,e[0],20,-373897302),t=m(t,Oe,ke,Be,e[5],5,-701558691),Be=m(Be,t,Oe,ke,e[10],9,38016083),ke=m(ke,Be,t,Oe,e[15],14,-660478335),Oe=m(Oe,ke,Be,t,e[4],20,-405537848),t=m(t,Oe,ke,Be,e[9],5,568446438),Be=m(Be,t,Oe,ke,e[14],9,-1019803690),ke=m(ke,Be,t,Oe,e[3],14,-187363961),Oe=m(Oe,ke,Be,t,e[8],20,1163531501),t=m(t,Oe,ke,Be,e[13],5,-1444681467),Be=m(Be,t,Oe,ke,e[2],9,-51403784),ke=m(ke,Be,t,Oe,e[7],14,1735328473),t=v(t,Oe=m(Oe,ke,Be,t,e[12],20,-1926607734),ke,Be,e[5],4,-378558),Be=v(Be,t,Oe,ke,e[8],11,-2022574463),ke=v(ke,Be,t,Oe,e[11],16,1839030562),Oe=v(Oe,ke,Be,t,e[14],23,-35309556),t=v(t,Oe,ke,Be,e[1],4,-1530992060),Be=v(Be,t,Oe,ke,e[4],11,1272893353),ke=v(ke,Be,t,Oe,e[7],16,-155497632),Oe=v(Oe,ke,Be,t,e[10],23,-1094730640),t=v(t,Oe,ke,Be,e[13],4,681279174),Be=v(Be,t,Oe,ke,e[0],11,-358537222),ke=v(ke,Be,t,Oe,e[3],16,-722521979),Oe=v(Oe,ke,Be,t,e[6],23,76029189),t=v(t,Oe,ke,Be,e[9],4,-640364487),Be=v(Be,t,Oe,ke,e[12],11,-421815835),ke=v(ke,Be,t,Oe,e[15],16,530742520),t=b(t,Oe=v(Oe,ke,Be,t,e[2],23,-995338651),ke,Be,e[0],6,-198630844),Be=b(Be,t,Oe,ke,e[7],10,1126891415),ke=b(ke,Be,t,Oe,e[14],15,-1416354905),Oe=b(Oe,ke,Be,t,e[5],21,-57434055),t=b(t,Oe,ke,Be,e[12],6,1700485571),Be=b(Be,t,Oe,ke,e[3],10,-1894986606),ke=b(ke,Be,t,Oe,e[10],15,-1051523),Oe=b(Oe,ke,Be,t,e[1],21,-2054922799),t=b(t,Oe,ke,Be,e[8],6,1873313359),Be=b(Be,t,Oe,ke,e[15],10,-30611744),ke=b(ke,Be,t,Oe,e[6],15,-1560198380),Oe=b(Oe,ke,Be,t,e[13],21,1309151649),t=b(t,Oe,ke,Be,e[4],6,-145523070),Be=b(Be,t,Oe,ke,e[11],10,-1120210379),ke=b(ke,Be,t,Oe,e[2],15,718787259),Oe=b(Oe,ke,Be,t,e[9],21,-343485551),Te[0]=_(t,Te[0]),Te[1]=_(Oe,Te[1]),Te[2]=_(ke,Te[2]),Te[3]=_(Be,Te[3])}function p(Te,e,t,Oe,ke,Be){return e=_(_(e,Te),_(Oe,Be)),_(e<<ke|e>>>32-ke,t)}function g(Te,e,t,Oe,ke,Be,Ue){return p(e&t|~e&Oe,Te,e,ke,Be,Ue)}function m(Te,e,t,Oe,ke,Be,Ue){return p(e&Oe|t&~Oe,Te,e,ke,Be,Ue)}function v(Te,e,t,Oe,ke,Be,Ue){return p(e^t^Oe,Te,e,ke,Be,Ue)}function b(Te,e,t,Oe,ke,Be,Ue){return p(t^(e|~Oe),Te,e,ke,Be,Ue)}function y(Te){var e,t=Te.length,Oe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=Te.length;e+=64)d(Oe,w(Te.substring(e-64,e)));Te=Te.substring(e-64);var ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<Te.length;e++)ke[e>>2]|=Te.charCodeAt(e)<<(e%4<<3);if(ke[e>>2]|=128<<(e%4<<3),e>55)for(d(Oe,ke),e=0;e<16;e++)ke[e]=0;return ke[14]=8*t,d(Oe,ke),Oe}function w(Te){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=Te.charCodeAt(e)+(Te.charCodeAt(e+1)<<8)+(Te.charCodeAt(e+2)<<16)+(Te.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Te){for(var e="",t=0;t<4;t++)e+=N[Te>>8*t+4&15]+N[Te>>8*t&15];return e}function A(Te){return String.fromCharCode((255&Te)>>0,(65280&Te)>>8,(16711680&Te)>>16,(4278190080&Te)>>24)}function x(Te){return y(Te).map(A).join("")}var S=function(Te){for(var e=0;e<Te.length;e++)Te[e]=L(Te[e]);return Te.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Te,e){if(S){var t=(65535&Te)+(65535&e);return(Te>>16)+(e>>16)+(t>>16)<<16|65535&t}return Te+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Te,e){var t,Oe,ke,Be;if(Te!==t){for(var Ue=(ke=Te,Be=1+(256/Te.length>>0),new Array(Be+1).join(ke)),He=[],We=0;We<256;We++)He[We]=We;var Cn=0;for(We=0;We<256;We++){var An=He[We];Cn=(Cn+An+Ue.charCodeAt(We))%256,He[We]=He[Cn],He[Cn]=An}t=Te,Oe=He}else He=Oe;var En=e.length,Sn=0,Tn=0,Ln="";for(We=0;We<En;We++)Tn=(Tn+(An=He[Sn=(Sn+1)%256]))%256,He[Sn]=He[Tn],He[Tn]=An,Ue=He[(He[Sn]+He[Tn])%256],Ln+=String.fromCharCode(e.charCodeAt(We)^Ue);return Ln}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Te,e,t,Oe){this.v=1,this.r=2;var ke=192;Te.forEach(function(He){if(k.perm!==void 0)throw new Error("Invalid permission: "+He);ke+=k[He]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Be=(e+this.padding).substr(0,32),Ue=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Be,Ue),this.P=-(1+(255^ke)),this.encryptionKey=x(Be+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Oe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Te){if(/[^\u0000-\u00ff]/.test(Te))throw new Error("Invalid PDF Name Object: "+Te+", Only accept ASCII characters.");for(var e="",t=Te.length,Oe=0;Oe<t;Oe++){var ke=Te.charCodeAt(Oe);ke<33||ke===35||ke===37||ke===40||ke===41||ke===47||ke===60||ke===62||ke===91||ke===93||ke===123||ke===125||ke>126?e+="#"+("0"+ke.toString(16)).slice(-2):e+=Te[Oe]}return e}function C(Te){if(_typeof(Te)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,Oe,ke){if(ke=ke||!1,typeof t!="string"||typeof Oe!="function"||typeof ke!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Be=Math.random().toString(35);return e[t][Be]=[Oe,!!ke],Be},this.unsubscribe=function(t){for(var Oe in e)if(e[Oe][t])return delete e[Oe][t],Object.keys(e[Oe]).length===0&&delete e[Oe],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var Oe=Array.prototype.slice.call(arguments,1),ke=[];for(var Be in e[t]){var Ue=e[t][Be];try{Ue[0].apply(Te,Oe)}catch(He){n.console&&a.error("jsPDF PubSub Error",He.message,He)}Ue[1]&&ke.push(Be)}ke.length&&ke.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(Te){if(!(this instanceof j))return new j(Te);var e="opacity,stroke-opacity".split(",");for(var t in Te)Te.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=Te[t]);this.id="",this.objectNumber=-1}function O(Te,e){this.gState=Te,this.matrix=e,this.id="",this.objectNumber=-1}function B(Te,e,t,Oe,ke){if(!(this instanceof B))return new B(Te,e,t,Oe,ke);this.type=Te==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,Oe,ke)}function M(Te,e,t,Oe,ke){if(!(this instanceof M))return new M(Te,e,t,Oe,ke);this.boundingBox=Te,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,Oe,ke)}function E(Te){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",Oe=arguments[1],ke=arguments[2],Be=arguments[3],Ue=[],He=1,We=16,Cn="S",An=null;_typeof(Te=Te||{})==="object"&&(t=Te.orientation,Oe=Te.unit||Oe,ke=Te.format||ke,Be=Te.compress||Te.compressPdf||Be,(An=Te.encryption||null)!==null&&(An.userPassword=An.userPassword||"",An.ownerPassword=An.ownerPassword||"",An.userPermissions=An.userPermissions||[]),He=typeof Te.userUnit=="number"?Math.abs(Te.userUnit):1,Te.precision!==void 0&&(e=Te.precision),Te.floatPrecision!==void 0&&(We=Te.floatPrecision),Cn=Te.defaultPathOperation||"S"),Ue=Te.filters||(Be===!0?["FlateEncode"]:Ue),Oe=Oe||"mm",t=(""+(t||"P")).toLowerCase();var En=Te.putOnlyUsedFonts||!1,Sn={},Tn={internal:{},__private__:{}};Tn.__private__.PubSub=C;var Ln="1.3",Bn=Tn.__private__.getPdfVersion=function(){return Ln};Tn.__private__.setPdfVersion=function(ai){Ln=ai};var ti={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Tn.__private__.getPageFormats=function(){return ti};var ni=Tn.__private__.getPageFormat=function(ai){return ti[ai]};ke=ke||"a4";var ii={COMPAT:"compat",ADVANCED:"advanced"},si=ii.COMPAT;function oi(){this.saveGraphicsState(),Ki(new Cs(Kr,0,0,-Kr,0,vc()*Kr).toString()+" cm"),this.setFontSize(this.getFontSize()/Kr),Cn="n",si=ii.ADVANCED}function ci(){this.restoreGraphicsState(),Cn="S",si=ii.COMPAT}var vi=Tn.__private__.combineFontStyleAndFontWeight=function(ai,Vi){if(ai=="bold"&&Vi=="normal"||ai=="bold"&&Vi==400||ai=="normal"&&Vi=="italic"||ai=="bold"&&Vi=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Vi&&(ai=Vi==400||Vi==="normal"?ai==="italic"?"italic":"normal":Vi!=700&&Vi!=="bold"||ai!=="normal"?(Vi==700?"bold":Vi)+""+ai:"bold"),ai};Tn.advancedAPI=function(ai){var Vi=si===ii.COMPAT;return Vi&&oi.call(this),typeof ai!="function"||(ai(this),Vi&&ci.call(this)),this},Tn.compatAPI=function(ai){var Vi=si===ii.ADVANCED;return Vi&&ci.call(this),typeof ai!="function"||(ai(this),Vi&&oi.call(this)),this},Tn.isAdvancedAPI=function(){return si===ii.ADVANCED};var pi,fi=function(ai){if(si!==ii.ADVANCED)throw new Error(ai+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Mi=Tn.roundToPrecision=Tn.__private__.roundToPrecision=function(ai,Vi){var yr=e||Vi;if(isNaN(ai)||isNaN(yr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ai.toFixed(yr).replace(/0+$/,"")};pi=Tn.hpf=Tn.__private__.hpf=typeof We=="number"?function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(ai,We)}:We==="smart"?function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(ai,ai>-1&&ai<1?16:5)}:function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(ai,16)};var Oi=Tn.f2=Tn.__private__.f2=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.f2");return Mi(ai,2)},ui=Tn.__private__.f3=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.f3");return Mi(ai,3)},li=Tn.scale=Tn.__private__.scale=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.scale");return si===ii.COMPAT?ai*Kr:si===ii.ADVANCED?ai:void 0},Ri=function(ai){return si===ii.COMPAT?vc()-ai:si===ii.ADVANCED?ai:void 0},Pi=function(ai){return li(Ri(ai))};Tn.__private__.setPrecision=Tn.setPrecision=function(ai){typeof parseInt(ai,10)=="number"&&(e=parseInt(ai,10))};var Fi,Hi="00000000000000000000000000000000",nr=Tn.__private__.getFileId=function(){return Hi},ar=Tn.__private__.setFileId=function(ai){return Hi=ai!==void 0&&/^[a-fA-F0-9]{32}$/.test(ai)?ai.toUpperCase():Hi.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),An!==null&&(da=new I(An.userPermissions,An.userPassword,An.ownerPassword,Hi)),Hi};Tn.setFileId=function(ai){return ar(ai),this},Tn.getFileId=function(){return nr()};var cr=Tn.__private__.convertDateToPDFDate=function(ai){var Vi=ai.getTimezoneOffset(),yr=Vi<0?"+":"-",Pr=Math.floor(Math.abs(Vi/60)),Fr=Math.abs(Vi%60),Xr=[yr,er(Pr),"'",er(Fr),"'"].join("");return["D:",ai.getFullYear(),er(ai.getMonth()+1),er(ai.getDate()),er(ai.getHours()),er(ai.getMinutes()),er(ai.getSeconds()),Xr].join("")},sr=Tn.__private__.convertPDFDateToDate=function(ai){var Vi=parseInt(ai.substr(2,4),10),yr=parseInt(ai.substr(6,2),10)-1,Pr=parseInt(ai.substr(8,2),10),Fr=parseInt(ai.substr(10,2),10),Xr=parseInt(ai.substr(12,2),10),ss=parseInt(ai.substr(14,2),10);return new Date(Vi,yr,Pr,Fr,Xr,ss,0)},br=Tn.__private__.setCreationDate=function(ai){var Vi;if(ai===void 0&&(ai=new Date),ai instanceof Date)Vi=cr(ai);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ai))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Vi=ai}return Fi=Vi},Ni=Tn.__private__.getCreationDate=function(ai){var Vi=Fi;return ai==="jsDate"&&(Vi=sr(Fi)),Vi};Tn.setCreationDate=function(ai){return br(ai),this},Tn.getCreationDate=function(ai){return Ni(ai)};var or,er=Tn.__private__.padd2=function(ai){return("0"+parseInt(ai)).slice(-2)},fr=Tn.__private__.padd2Hex=function(ai){return("00"+(ai=ai.toString())).substr(ai.length)},mr=0,hr=[],vr=[],_r=0,Ar=[],Vr=[],Wr=!1,tr=vr,pr=function(){mr=0,_r=0,vr=[],hr=[],Ar=[],pa=Us(),Aa=Us()};Tn.__private__.setCustomOutputDestination=function(ai){Wr=!0,tr=ai};var ur=function(ai){Wr||(tr=ai)};Tn.__private__.resetCustomOutputDestination=function(){Wr=!1,tr=vr};var Ki=Tn.__private__.out=function(ai){return ai=ai.toString(),_r+=ai.length+1,tr.push(ai),tr},Nr=Tn.__private__.write=function(ai){return Ki(arguments.length===1?ai.toString():Array.prototype.join.call(arguments," "))},Or=Tn.__private__.getArrayBuffer=function(ai){for(var Vi=ai.length,yr=new ArrayBuffer(Vi),Pr=new Uint8Array(yr);Vi--;)Pr[Vi]=ai.charCodeAt(Vi);return yr},Ir=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Tn.__private__.getStandardFonts=function(){return Ir};var Mr=Te.fontSize||16;Tn.__private__.setFontSize=Tn.setFontSize=function(ai){return Mr=si===ii.ADVANCED?ai/Kr:ai,this};var Tr,wr=Tn.__private__.getFontSize=Tn.getFontSize=function(){return si===ii.COMPAT?Mr:Mr*Kr},Cr=Te.R2L||!1;Tn.__private__.setR2L=Tn.setR2L=function(ai){return Cr=ai,this},Tn.__private__.getR2L=Tn.getR2L=function(){return Cr};var Er,Sr=Tn.__private__.setZoomMode=function(ai){var Vi=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ai))Tr=ai;else if(isNaN(ai)){if(Vi.indexOf(ai)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ai+'" is not recognized.');Tr=ai}else Tr=parseInt(ai,10)};Tn.__private__.getZoomMode=function(){return Tr};var Gr,zr=Tn.__private__.setPageMode=function(ai){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ai)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ai+'" is not recognized.');Er=ai};Tn.__private__.getPageMode=function(){return Er};var $r=Tn.__private__.setLayoutMode=function(ai){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ai)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ai+'" is not recognized.');Gr=ai};Tn.__private__.getLayoutMode=function(){return Gr},Tn.__private__.setDisplayMode=Tn.setDisplayMode=function(ai,Vi,yr){return Sr(ai),$r(Vi),zr(yr),this};var Hr={title:"",subject:"",author:"",keywords:"",creator:""};Tn.__private__.getDocumentProperty=function(ai){if(Object.keys(Hr).indexOf(ai)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Hr[ai]},Tn.__private__.getDocumentProperties=function(){return Hr},Tn.__private__.setDocumentProperties=Tn.setProperties=Tn.setDocumentProperties=function(ai){for(var Vi in Hr)Hr.hasOwnProperty(Vi)&&ai[Vi]&&(Hr[Vi]=ai[Vi]);return this},Tn.__private__.setDocumentProperty=function(ai,Vi){if(Object.keys(Hr).indexOf(ai)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Hr[ai]=Vi};var as,Kr,Ss,ms,Rs,Ps={},ps={},Is=[],As={},Fs={},xs={},Zs={},_o=null,Ls=0,Es=[],Ms=new C(Tn),za=Te.hotfixes||[],qs={},$o={},Ts=[],Cs=function ai(Vi,yr,Pr,Fr,Xr,ss){if(!(this instanceof ai))return new ai(Vi,yr,Pr,Fr,Xr,ss);isNaN(Vi)&&(Vi=1),isNaN(yr)&&(yr=0),isNaN(Pr)&&(Pr=0),isNaN(Fr)&&(Fr=1),isNaN(Xr)&&(Xr=0),isNaN(ss)&&(ss=0),this._matrix=[Vi,yr,Pr,Fr,Xr,ss]};Object.defineProperty(Cs.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ai){this._matrix[0]=ai}}),Object.defineProperty(Cs.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ai){this._matrix[1]=ai}}),Object.defineProperty(Cs.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ai){this._matrix[2]=ai}}),Object.defineProperty(Cs.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ai){this._matrix[3]=ai}}),Object.defineProperty(Cs.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ai){this._matrix[4]=ai}}),Object.defineProperty(Cs.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ai){this._matrix[5]=ai}}),Object.defineProperty(Cs.prototype,"a",{get:function(){return this._matrix[0]},set:function(ai){this._matrix[0]=ai}}),Object.defineProperty(Cs.prototype,"b",{get:function(){return this._matrix[1]},set:function(ai){this._matrix[1]=ai}}),Object.defineProperty(Cs.prototype,"c",{get:function(){return this._matrix[2]},set:function(ai){this._matrix[2]=ai}}),Object.defineProperty(Cs.prototype,"d",{get:function(){return this._matrix[3]},set:function(ai){this._matrix[3]=ai}}),Object.defineProperty(Cs.prototype,"e",{get:function(){return this._matrix[4]},set:function(ai){this._matrix[4]=ai}}),Object.defineProperty(Cs.prototype,"f",{get:function(){return this._matrix[5]},set:function(ai){this._matrix[5]=ai}}),Object.defineProperty(Cs.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Cs.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Cs.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Cs.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Cs.prototype.join=function(ai){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pi).join(ai)},Cs.prototype.multiply=function(ai){var Vi=ai.sx*this.sx+ai.shy*this.shx,yr=ai.sx*this.shy+ai.shy*this.sy,Pr=ai.shx*this.sx+ai.sy*this.shx,Fr=ai.shx*this.shy+ai.sy*this.sy,Xr=ai.tx*this.sx+ai.ty*this.shx+this.tx,ss=ai.tx*this.shy+ai.ty*this.sy+this.ty;return new Cs(Vi,yr,Pr,Fr,Xr,ss)},Cs.prototype.decompose=function(){var ai=this.sx,Vi=this.shy,yr=this.shx,Pr=this.sy,Fr=this.tx,Xr=this.ty,ss=Math.sqrt(ai*ai+Vi*Vi),vs=(ai/=ss)*yr+(Vi/=ss)*Pr;yr-=ai*vs,Pr-=Vi*vs;var bs=Math.sqrt(yr*yr+Pr*Pr);return vs/=bs,ai*(Pr/=bs)<Vi*(yr/=bs)&&(ai=-ai,Vi=-Vi,vs=-vs,ss=-ss),{scale:new Cs(ss,0,0,bs,0,0),translate:new Cs(1,0,0,1,Fr,Xr),rotate:new Cs(ai,Vi,-Vi,ai,0,0),skew:new Cs(1,0,vs,1,0,0)}},Cs.prototype.toString=function(ai){return this.join(" ")},Cs.prototype.inversed=function(){var ai=this.sx,Vi=this.shy,yr=this.shx,Pr=this.sy,Fr=this.tx,Xr=this.ty,ss=1/(ai*Pr-Vi*yr),vs=Pr*ss,bs=-Vi*ss,Gs=-yr*ss,Ds=ai*ss;return new Cs(vs,bs,Gs,Ds,-vs*Fr-Gs*Xr,-bs*Fr-Ds*Xr)},Cs.prototype.applyToPoint=function(ai){var Vi=ai.x*this.sx+ai.y*this.shx+this.tx,yr=ai.x*this.shy+ai.y*this.sy+this.ty;return new eu(Vi,yr)},Cs.prototype.applyToRectangle=function(ai){var Vi=this.applyToPoint(ai),yr=this.applyToPoint(new eu(ai.x+ai.w,ai.y+ai.h));return new Ou(Vi.x,Vi.y,yr.x-Vi.x,yr.y-Vi.y)},Cs.prototype.clone=function(){var ai=this.sx,Vi=this.shy,yr=this.shx,Pr=this.sy,Fr=this.tx,Xr=this.ty;return new Cs(ai,Vi,yr,Pr,Fr,Xr)},Tn.Matrix=Cs;var ho=Tn.matrixMult=function(ai,Vi){return Vi.multiply(ai)},Co=new Cs(1,0,0,1,0,0);Tn.unitMatrix=Tn.identityMatrix=Co;var Js=function(ai,Vi){if(!Fs[ai]){var yr=(Vi instanceof B?"Sh":"P")+(Object.keys(As).length+1).toString(10);Vi.id=yr,Fs[ai]=yr,As[yr]=Vi,Ms.publish("addPattern",Vi)}};Tn.ShadingPattern=B,Tn.TilingPattern=M,Tn.addShadingPattern=function(ai,Vi){return fi("addShadingPattern()"),Js(ai,Vi),this},Tn.beginTilingPattern=function(ai){fi("beginTilingPattern()"),Dd(ai.boundingBox[0],ai.boundingBox[1],ai.boundingBox[2]-ai.boundingBox[0],ai.boundingBox[3]-ai.boundingBox[1],ai.matrix)},Tn.endTilingPattern=function(ai,Vi){fi("endTilingPattern()"),Vi.stream=Vr[or].join(`
`),Js(ai,Vi),Ms.publish("endTilingPattern",Vi),Ts.pop().restore()};var Os=Tn.__private__.newObject=function(){var ai=Us();return Vs(ai,!0),ai},Us=Tn.__private__.newObjectDeferred=function(){return mr++,hr[mr]=function(){return _r},mr},Vs=function(ai,Vi){return Vi=typeof Vi=="boolean"&&Vi,hr[ai]=_r,Vi&&Ki(ai+" 0 obj"),ai},ya=Tn.__private__.newAdditionalObject=function(){var ai={objId:Us(),content:""};return Ar.push(ai),ai},pa=Us(),Aa=Us(),ka=Tn.__private__.decodeColorString=function(ai){var Vi=ai.split(" ");if(Vi.length!==2||Vi[1]!=="g"&&Vi[1]!=="G")Vi.length===5&&(Vi[4]==="k"||Vi[4]==="K")&&(Vi=[(1-Vi[0])*(1-Vi[3]),(1-Vi[1])*(1-Vi[3]),(1-Vi[2])*(1-Vi[3]),"r"]);else{var yr=parseFloat(Vi[0]);Vi=[yr,yr,yr,"r"]}for(var Pr="#",Fr=0;Fr<3;Fr++)Pr+=("0"+Math.floor(255*parseFloat(Vi[Fr])).toString(16)).slice(-2);return Pr},Pa=Tn.__private__.encodeColorString=function(ai){var Vi;typeof ai=="string"&&(ai={ch1:ai});var yr=ai.ch1,Pr=ai.ch2,Fr=ai.ch3,Xr=ai.ch4,ss=ai.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof yr=="string"&&yr.charAt(0)!=="#"){var vs=new f(yr);if(vs.ok)yr=vs.toHex();else if(!/^\d*\.?\d*$/.test(yr))throw new Error('Invalid color "'+yr+'" passed to jsPDF.encodeColorString.')}if(typeof yr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(yr)&&(yr="#"+yr[1]+yr[1]+yr[2]+yr[2]+yr[3]+yr[3]),typeof yr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(yr)){var bs=parseInt(yr.substr(1),16);yr=bs>>16&255,Pr=bs>>8&255,Fr=255&bs}if(Pr===void 0||Xr===void 0&&yr===Pr&&Pr===Fr)if(typeof yr=="string")Vi=yr+" "+ss[0];else switch(ai.precision){case 2:Vi=Oi(yr/255)+" "+ss[0];break;case 3:default:Vi=ui(yr/255)+" "+ss[0]}else if(Xr===void 0||_typeof(Xr)==="object"){if(Xr&&!isNaN(Xr.a)&&Xr.a===0)return Vi=["1.","1.","1.",ss[1]].join(" ");if(typeof yr=="string")Vi=[yr,Pr,Fr,ss[1]].join(" ");else switch(ai.precision){case 2:Vi=[Oi(yr/255),Oi(Pr/255),Oi(Fr/255),ss[1]].join(" ");break;default:case 3:Vi=[ui(yr/255),ui(Pr/255),ui(Fr/255),ss[1]].join(" ")}}else if(typeof yr=="string")Vi=[yr,Pr,Fr,Xr,ss[2]].join(" ");else switch(ai.precision){case 2:Vi=[Oi(yr),Oi(Pr),Oi(Fr),Oi(Xr),ss[2]].join(" ");break;case 3:default:Vi=[ui(yr),ui(Pr),ui(Fr),ui(Xr),ss[2]].join(" ")}return Vi},sa=Tn.__private__.getFilters=function(){return Ue},oa=Tn.__private__.putStream=function(ai){var Vi=(ai=ai||{}).data||"",yr=ai.filters||sa(),Pr=ai.alreadyAppliedFilters||[],Fr=ai.addLength1||!1,Xr=Vi.length,ss=ai.objectId,vs=function(fa){return fa};if(An!==null&&ss===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");An!==null&&(vs=da.encryptor(ss,0));var bs={};yr===!0&&(yr=["FlateEncode"]);var Gs=ai.additionalKeyValues||[],Ds=(bs=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Vi,yr):{data:Vi,reverseChain:[]}).reverseChain+(Array.isArray(Pr)?Pr.join(" "):Pr.toString());if(bs.data.length!==0&&(Gs.push({key:"Length",value:bs.data.length}),Fr===!0&&Gs.push({key:"Length1",value:Xr})),Ds.length!=0)if(Ds.split("/").length-1==1)Gs.push({key:"Filter",value:Ds});else{Gs.push({key:"Filter",value:"["+Ds+"]"});for(var zs=0;zs<Gs.length;zs+=1)if(Gs[zs].key==="DecodeParms"){for(var Eo=[],Io=0;Io<bs.reverseChain.split("/").length-1;Io+=1)Eo.push("null");Eo.push(Gs[zs].value),Gs[zs].value="["+Eo.join(" ")+"]"}}Ki("<<");for(var Zo=0;Zo<Gs.length;Zo++)Ki("/"+Gs[Zo].key+" "+Gs[Zo].value);Ki(">>"),bs.data.length!==0&&(Ki("stream"),Ki(vs(bs.data)),Ki("endstream"))},Dl=Tn.__private__.putPage=function(ai){var Vi=ai.number,yr=ai.data,Pr=ai.objId,Fr=ai.contentsObjId;Vs(Pr,!0),Ki("<</Type /Page"),Ki("/Parent "+ai.rootDictionaryObjId+" 0 R"),Ki("/Resources "+ai.resourceDictionaryObjId+" 0 R"),Ki("/MediaBox ["+parseFloat(pi(ai.mediaBox.bottomLeftX))+" "+parseFloat(pi(ai.mediaBox.bottomLeftY))+" "+pi(ai.mediaBox.topRightX)+" "+pi(ai.mediaBox.topRightY)+"]"),ai.cropBox!==null&&Ki("/CropBox ["+pi(ai.cropBox.bottomLeftX)+" "+pi(ai.cropBox.bottomLeftY)+" "+pi(ai.cropBox.topRightX)+" "+pi(ai.cropBox.topRightY)+"]"),ai.bleedBox!==null&&Ki("/BleedBox ["+pi(ai.bleedBox.bottomLeftX)+" "+pi(ai.bleedBox.bottomLeftY)+" "+pi(ai.bleedBox.topRightX)+" "+pi(ai.bleedBox.topRightY)+"]"),ai.trimBox!==null&&Ki("/TrimBox ["+pi(ai.trimBox.bottomLeftX)+" "+pi(ai.trimBox.bottomLeftY)+" "+pi(ai.trimBox.topRightX)+" "+pi(ai.trimBox.topRightY)+"]"),ai.artBox!==null&&Ki("/ArtBox ["+pi(ai.artBox.bottomLeftX)+" "+pi(ai.artBox.bottomLeftY)+" "+pi(ai.artBox.topRightX)+" "+pi(ai.artBox.topRightY)+"]"),typeof ai.userUnit=="number"&&ai.userUnit!==1&&Ki("/UserUnit "+ai.userUnit),Ms.publish("putPage",{objId:Pr,pageContext:Es[Vi],pageNumber:Vi,page:yr}),Ki("/Contents "+Fr+" 0 R"),Ki(">>"),Ki("endobj");var Xr=yr.join(`
`);return si===ii.ADVANCED&&(Xr+=`
Q`),Vs(Fr,!0),oa({data:Xr,filters:sa(),objectId:Fr}),Ki("endobj"),Pr},Rc=Tn.__private__.putPages=function(){var ai,Vi,yr=[];for(ai=1;ai<=Ls;ai++)Es[ai].objId=Us(),Es[ai].contentsObjId=Us();for(ai=1;ai<=Ls;ai++)yr.push(Dl({number:ai,data:Vr[ai],objId:Es[ai].objId,contentsObjId:Es[ai].contentsObjId,mediaBox:Es[ai].mediaBox,cropBox:Es[ai].cropBox,bleedBox:Es[ai].bleedBox,trimBox:Es[ai].trimBox,artBox:Es[ai].artBox,userUnit:Es[ai].userUnit,rootDictionaryObjId:pa,resourceDictionaryObjId:Aa}));Vs(pa,!0),Ki("<</Type /Pages");var Pr="/Kids [";for(Vi=0;Vi<Ls;Vi++)Pr+=yr[Vi]+" 0 R ";Ki(Pr+"]"),Ki("/Count "+Ls),Ki(">>"),Ki("endobj"),Ms.publish("postPutPages")},Vc=function(ai){Ms.publish("putFont",{font:ai,out:Ki,newObject:Os,putStream:oa}),ai.isAlreadyPutted!==!0&&(ai.objectNumber=Os(),Ki("<<"),Ki("/Type /Font"),Ki("/BaseFont /"+F(ai.postScriptName)),Ki("/Subtype /Type1"),typeof ai.encoding=="string"&&Ki("/Encoding /"+ai.encoding),Ki("/FirstChar 32"),Ki("/LastChar 255"),Ki(">>"),Ki("endobj"))},zc=function(){for(var ai in Ps)Ps.hasOwnProperty(ai)&&(En===!1||En===!0&&Sn.hasOwnProperty(ai))&&Vc(Ps[ai])},$c=function(ai){ai.objectNumber=Os();var Vi=[];Vi.push({key:"Type",value:"/XObject"}),Vi.push({key:"Subtype",value:"/Form"}),Vi.push({key:"BBox",value:"["+[pi(ai.x),pi(ai.y),pi(ai.x+ai.width),pi(ai.y+ai.height)].join(" ")+"]"}),Vi.push({key:"Matrix",value:"["+ai.matrix.toString()+"]"});var yr=ai.pages[1].join(`
`);oa({data:yr,additionalKeyValues:Vi,objectId:ai.objectNumber}),Ki("endobj")},Hc=function(){for(var ai in qs)qs.hasOwnProperty(ai)&&$c(qs[ai])},yd=function(ai,Vi){var yr,Pr=[],Fr=1/(Vi-1);for(yr=0;yr<1;yr+=Fr)Pr.push(yr);if(Pr.push(1),ai[0].offset!=0){var Xr={offset:0,color:ai[0].color};ai.unshift(Xr)}if(ai[ai.length-1].offset!=1){var ss={offset:1,color:ai[ai.length-1].color};ai.push(ss)}for(var vs="",bs=0,Gs=0;Gs<Pr.length;Gs++){for(yr=Pr[Gs];yr>ai[bs+1].offset;)bs++;var Ds=ai[bs].offset,zs=(yr-Ds)/(ai[bs+1].offset-Ds),Eo=ai[bs].color,Io=ai[bs+1].color;vs+=fr(Math.round((1-zs)*Eo[0]+zs*Io[0]).toString(16))+fr(Math.round((1-zs)*Eo[1]+zs*Io[1]).toString(16))+fr(Math.round((1-zs)*Eo[2]+zs*Io[2]).toString(16))}return vs.trim()},ph=function(ai,Vi){Vi||(Vi=21);var yr=Os(),Pr=yd(ai.colors,Vi),Fr=[];Fr.push({key:"FunctionType",value:"0"}),Fr.push({key:"Domain",value:"[0.0 1.0]"}),Fr.push({key:"Size",value:"["+Vi+"]"}),Fr.push({key:"BitsPerSample",value:"8"}),Fr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oa({data:Pr,additionalKeyValues:Fr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:yr}),Ki("endobj"),ai.objectNumber=Os(),Ki("<< /ShadingType "+ai.type),Ki("/ColorSpace /DeviceRGB");var Xr="/Coords ["+pi(parseFloat(ai.coords[0]))+" "+pi(parseFloat(ai.coords[1]))+" ";ai.type===2?Xr+=pi(parseFloat(ai.coords[2]))+" "+pi(parseFloat(ai.coords[3])):Xr+=pi(parseFloat(ai.coords[2]))+" "+pi(parseFloat(ai.coords[3]))+" "+pi(parseFloat(ai.coords[4]))+" "+pi(parseFloat(ai.coords[5])),Ki(Xr+="]"),ai.matrix&&Ki("/Matrix ["+ai.matrix.toString()+"]"),Ki("/Function "+yr+" 0 R"),Ki("/Extend [true true]"),Ki(">>"),Ki("endobj")},gh=function(ai,Vi){var yr=Us(),Pr=Os();Vi.push({resourcesOid:yr,objectOid:Pr}),ai.objectNumber=Pr;var Fr=[];Fr.push({key:"Type",value:"/Pattern"}),Fr.push({key:"PatternType",value:"1"}),Fr.push({key:"PaintType",value:"1"}),Fr.push({key:"TilingType",value:"1"}),Fr.push({key:"BBox",value:"["+ai.boundingBox.map(pi).join(" ")+"]"}),Fr.push({key:"XStep",value:pi(ai.xStep)}),Fr.push({key:"YStep",value:pi(ai.yStep)}),Fr.push({key:"Resources",value:yr+" 0 R"}),ai.matrix&&Fr.push({key:"Matrix",value:"["+ai.matrix.toString()+"]"}),oa({data:ai.stream,additionalKeyValues:Fr,objectId:ai.objectNumber}),Ki("endobj")},qc=function(ai){var Vi;for(Vi in As)As.hasOwnProperty(Vi)&&(As[Vi]instanceof B?ph(As[Vi]):As[Vi]instanceof M&&gh(As[Vi],ai))},_d=function(ai){for(var Vi in ai.objectNumber=Os(),Ki("<<"),ai)switch(Vi){case"opacity":Ki("/ca "+Oi(ai[Vi]));break;case"stroke-opacity":Ki("/CA "+Oi(ai[Vi]))}Ki(">>"),Ki("endobj")},mh=function(){var ai;for(ai in xs)xs.hasOwnProperty(ai)&&_d(xs[ai])},_u=function(){for(var ai in Ki("/XObject <<"),qs)qs.hasOwnProperty(ai)&&qs[ai].objectNumber>=0&&Ki("/"+ai+" "+qs[ai].objectNumber+" 0 R");Ms.publish("putXobjectDict"),Ki(">>")},vh=function(){da.oid=Os(),Ki("<<"),Ki("/Filter /Standard"),Ki("/V "+da.v),Ki("/R "+da.r),Ki("/U <"+da.toHexString(da.U)+">"),Ki("/O <"+da.toHexString(da.O)+">"),Ki("/P "+da.P),Ki(">>"),Ki("endobj")},Cd=function(){for(var ai in Ki("/Font <<"),Ps)Ps.hasOwnProperty(ai)&&(En===!1||En===!0&&Sn.hasOwnProperty(ai))&&Ki("/"+ai+" "+Ps[ai].objectNumber+" 0 R");Ki(">>")},yh=function(){if(Object.keys(As).length>0){for(var ai in Ki("/Shading <<"),As)As.hasOwnProperty(ai)&&As[ai]instanceof B&&As[ai].objectNumber>=0&&Ki("/"+ai+" "+As[ai].objectNumber+" 0 R");Ms.publish("putShadingPatternDict"),Ki(">>")}},Wc=function(ai){if(Object.keys(As).length>0){for(var Vi in Ki("/Pattern <<"),As)As.hasOwnProperty(Vi)&&As[Vi]instanceof Tn.TilingPattern&&As[Vi].objectNumber>=0&&As[Vi].objectNumber<ai&&Ki("/"+Vi+" "+As[Vi].objectNumber+" 0 R");Ms.publish("putTilingPatternDict"),Ki(">>")}},_h=function(){if(Object.keys(xs).length>0){var ai;for(ai in Ki("/ExtGState <<"),xs)xs.hasOwnProperty(ai)&&xs[ai].objectNumber>=0&&Ki("/"+ai+" "+xs[ai].objectNumber+" 0 R");Ms.publish("putGStateDict"),Ki(">>")}},xo=function(ai){Vs(ai.resourcesOid,!0),Ki("<<"),Ki("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Cd(),yh(),Wc(ai.objectOid),_h(),_u(),Ki(">>"),Ki("endobj")},Ad=function(){var ai=[];zc(),mh(),Hc(),qc(ai),Ms.publish("putResources"),ai.forEach(xo),xo({resourcesOid:Aa,objectOid:Number.MAX_SAFE_INTEGER}),Ms.publish("postPutResources")},Ed=function(){Ms.publish("putAdditionalObjects");for(var ai=0;ai<Ar.length;ai++){var Vi=Ar[ai];Vs(Vi.objId,!0),Ki(Vi.content),Ki("endobj")}Ms.publish("postPutAdditionalObjects")},Sd=function(ai){ps[ai.fontName]=ps[ai.fontName]||{},ps[ai.fontName][ai.fontStyle]=ai.id},Au=function(ai,Vi,yr,Pr,Fr){var Xr={id:"F"+(Object.keys(Ps).length+1).toString(10),postScriptName:ai,fontName:Vi,fontStyle:yr,encoding:Pr,isStandardFont:Fr||!1,metadata:{}};return Ms.publish("addFont",{font:Xr,instance:this}),Ps[Xr.id]=Xr,Sd(Xr),Xr.id},Ch=function(ai){for(var Vi=0,yr=Ir.length;Vi<yr;Vi++){var Pr=Au.call(this,ai[Vi][0],ai[Vi][1],ai[Vi][2],Ir[Vi][3],!0);En===!1&&(Sn[Pr]=!0);var Fr=ai[Vi][0].split("-");Sd({id:Pr,fontName:Fr[0],fontStyle:Fr[1]||""})}Ms.publish("addFonts",{fonts:Ps,dictionary:ps})},yl=function(ai){return ai.foo=function(){try{return ai.apply(this,arguments)}catch(Pr){var Vi=Pr.stack||"";~Vi.indexOf(" at ")&&(Vi=Vi.split(" at ")[1]);var yr="Error in function "+Vi.split(`
`)[0].split("<")[0]+": "+Pr.message;if(!n.console)throw new Error(yr);n.console.error(yr,Pr),n.alert&&alert(yr)}},ai.foo.bar=ai,ai.foo},Yc=function(ai,Vi){var yr,Pr,Fr,Xr,ss,vs,bs,Gs,Ds;if(Fr=(Vi=Vi||{}).sourceEncoding||"Unicode",ss=Vi.outputEncoding,(Vi.autoencode||ss)&&Ps[as].metadata&&Ps[as].metadata[Fr]&&Ps[as].metadata[Fr].encoding&&(Xr=Ps[as].metadata[Fr].encoding,!ss&&Ps[as].encoding&&(ss=Ps[as].encoding),!ss&&Xr.codePages&&(ss=Xr.codePages[0]),typeof ss=="string"&&(ss=Xr[ss]),ss)){for(bs=!1,vs=[],yr=0,Pr=ai.length;yr<Pr;yr++)(Gs=ss[ai.charCodeAt(yr)])?vs.push(String.fromCharCode(Gs)):vs.push(ai[yr]),vs[yr].charCodeAt(0)>>8&&(bs=!0);ai=vs.join("")}for(yr=ai.length;bs===void 0&&yr!==0;)ai.charCodeAt(yr-1)>>8&&(bs=!0),yr--;if(!bs)return ai;for(vs=Vi.noBOM?[]:[254,255],yr=0,Pr=ai.length;yr<Pr;yr++){if((Ds=(Gs=ai.charCodeAt(yr))>>8)>>8)throw new Error("Character at position "+yr+" of string '"+ai+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vs.push(Ds),vs.push(Gs-(Ds<<8))}return String.fromCharCode.apply(void 0,vs)},xa=Tn.__private__.pdfEscape=Tn.pdfEscape=function(ai,Vi){return Yc(ai,Vi).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bu=Tn.__private__.beginPage=function(ai){Vr[++Ls]=[],Es[Ls]={objId:0,contentsObjId:0,userUnit:Number(He),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ai[0]),topRightY:Number(ai[1])}},Id(Ls),ur(Vr[or])},bd=function(ai,Vi){var yr,Pr,Fr;switch(t=Vi||t,typeof ai=="string"&&(yr=ni(ai.toLowerCase()),Array.isArray(yr)&&(Pr=yr[0],Fr=yr[1])),Array.isArray(ai)&&(Pr=ai[0]*Kr,Fr=ai[1]*Kr),isNaN(Pr)&&(Pr=ke[0],Fr=ke[1]),(Pr>14400||Fr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pr=Math.min(14400,Pr),Fr=Math.min(14400,Fr)),ke=[Pr,Fr],t.substr(0,1)){case"l":Fr>Pr&&(ke=[Fr,Pr]);break;case"p":Pr>Fr&&(ke=[Fr,Pr])}bu(ke),Rd(xu),Ki(_l),Ru!==0&&Ki(Ru+" J"),Mu!==0&&Ki(Mu+" j"),Ms.publish("addPage",{pageNumber:Ls})},Ah=function(ai){ai>0&&ai<=Ls&&(Vr.splice(ai,1),Es.splice(ai,1),Ls--,or>Ls&&(or=Ls),this.setPage(or))},Id=function(ai){ai>0&&ai<=Ls&&(or=ai)},Eh=Tn.__private__.getNumberOfPages=Tn.getNumberOfPages=function(){return Vr.length-1},wd=function(ai,Vi,yr){var Pr,Fr=void 0;return yr=yr||{},ai=ai!==void 0?ai:Ps[as].fontName,Vi=Vi!==void 0?Vi:Ps[as].fontStyle,Pr=ai.toLowerCase(),ps[Pr]!==void 0&&ps[Pr][Vi]!==void 0?Fr=ps[Pr][Vi]:ps[ai]!==void 0&&ps[ai][Vi]!==void 0?Fr=ps[ai][Vi]:yr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+ai+"', '"+Vi+"'. Refer to getFontList() for available fonts."),Fr||yr.noFallback||(Fr=ps.times[Vi])==null&&(Fr=ps.times.normal),Fr},Sh=Tn.__private__.putInfo=function(){var ai=Os(),Vi=function(Pr){return Pr};for(var yr in An!==null&&(Vi=da.encryptor(ai,0)),Ki("<<"),Ki("/Producer ("+xa(Vi("jsPDF "+E.version))+")"),Hr)Hr.hasOwnProperty(yr)&&Hr[yr]&&Ki("/"+yr.substr(0,1).toUpperCase()+yr.substr(1)+" ("+xa(Vi(Hr[yr]))+")");Ki("/CreationDate ("+xa(Vi(Fi))+")"),Ki(">>"),Ki("endobj")},Iu=Tn.__private__.putCatalog=function(ai){var Vi=(ai=ai||{}).rootDictionaryObjId||pa;switch(Os(),Ki("<<"),Ki("/Type /Catalog"),Ki("/Pages "+Vi+" 0 R"),Tr||(Tr="fullwidth"),Tr){case"fullwidth":Ki("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ki("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ki("/OpenAction [3 0 R /Fit]");break;case"original":Ki("/OpenAction [3 0 R /XYZ null null 1]");break;default:var yr=""+Tr;yr.substr(yr.length-1)==="%"&&(Tr=parseInt(Tr)/100),typeof Tr=="number"&&Ki("/OpenAction [3 0 R /XYZ null null "+Oi(Tr)+"]")}switch(Gr||(Gr="continuous"),Gr){case"continuous":Ki("/PageLayout /OneColumn");break;case"single":Ki("/PageLayout /SinglePage");break;case"two":case"twoleft":Ki("/PageLayout /TwoColumnLeft");break;case"tworight":Ki("/PageLayout /TwoColumnRight")}Er&&Ki("/PageMode /"+Er),Ms.publish("putCatalog"),Ki(">>"),Ki("endobj")},bh=Tn.__private__.putTrailer=function(){Ki("trailer"),Ki("<<"),Ki("/Size "+(mr+1)),Ki("/Root "+mr+" 0 R"),Ki("/Info "+(mr-1)+" 0 R"),An!==null&&Ki("/Encrypt "+da.oid+" 0 R"),Ki("/ID [ <"+Hi+"> <"+Hi+"> ]"),Ki(">>")},Ih=Tn.__private__.putHeader=function(){Ki("%PDF-"+Ln),Ki("%ºß¬à")},wh=Tn.__private__.putXRef=function(){var ai="0000000000";Ki("xref"),Ki("0 "+(mr+1)),Ki("0000000000 65535 f ");for(var Vi=1;Vi<=mr;Vi++)typeof hr[Vi]=="function"?Ki((ai+hr[Vi]()).slice(-10)+" 00000 n "):hr[Vi]!==void 0?Ki((ai+hr[Vi]).slice(-10)+" 00000 n "):Ki("0000000000 00000 n ")},rc=Tn.__private__.buildDocument=function(){pr(),ur(vr),Ms.publish("buildDocument"),Ih(),Rc(),Ed(),Ad(),An!==null&&vh(),Sh(),Iu();var ai=_r;return wh(),bh(),Ki("startxref"),Ki(""+ai),Ki("%%EOF"),ur(Vr[or]),vr.join(`
`)},Xc=Tn.__private__.getBlob=function(ai){return new Blob([Or(ai)],{type:"application/pdf"})},Kc=Tn.output=Tn.__private__.output=yl(function(ai,Vi){switch(typeof(Vi=Vi||{})=="string"?Vi={filename:Vi}:Vi.filename=Vi.filename||"generated.pdf",ai){case void 0:return rc();case"save":Tn.save(Vi.filename);break;case"arraybuffer":return Or(rc());case"blob":return Xc(rc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Xc(rc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var yr="",Pr=rc();try{yr=h(Pr)}catch{yr=h(unescape(encodeURIComponent(Pr)))}return"data:application/pdf;filename="+Vi.filename+";base64,"+yr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Fr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Vi.pdfObjectUrl&&(Fr=Vi.pdfObjectUrl,Xr="");var ss='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fr+'"'+Xr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Vi)+");<\/script></body></html>",vs=n.open();return vs!==null&&vs.document.write(ss),vs}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var bs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Vi.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Vi.filename+'" width="500px" height="400px" /></body></html>',Gs=n.open();if(Gs!==null){Gs.document.write(bs);var Ds=this;Gs.document.documentElement.querySelector("#pdfViewer").onload=function(){Gs.document.title=Vi.filename,Gs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ds.output("bloburl"))}}return Gs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Vi)+'"></iframe></body></html>',Eo=n.open();if(Eo!==null&&(Eo.document.write(zs),Eo.document.title=Vi.filename),Eo||typeof safari>"u")return Eo;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Vi);default:return null}}),Pd=function(ai){return Array.isArray(za)===!0&&za.indexOf(ai)>-1};switch(Oe){case"pt":Kr=1;break;case"mm":Kr=72/25.4;break;case"cm":Kr=72/2.54;break;case"in":Kr=72;break;case"px":Kr=Pd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Kr=12;break;case"ex":Kr=6;break;default:if(typeof Oe!="number")throw new Error("Invalid unit: "+Oe);Kr=Oe}var da=null;br(),ar();var Ph=function(ai){return An!==null?da.encryptor(ai,0):function(Vi){return Vi}},xd=Tn.__private__.getPageInfo=Tn.getPageInfo=function(ai){if(isNaN(ai)||ai%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Es[ai].objId,pageNumber:ai,pageContext:Es[ai]}},Ns=Tn.__private__.getPageInfoByObjId=function(ai){if(isNaN(ai)||ai%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Vi in Es)if(Es[Vi].objId===ai)break;return xd(Vi)},xh=Tn.__private__.getCurrentPageInfo=Tn.getCurrentPageInfo=function(){return{objId:Es[or].objId,pageNumber:or,pageContext:Es[or]}};Tn.addPage=function(){return bd.apply(this,arguments),this},Tn.setPage=function(){return Id.apply(this,arguments),ur.call(this,Vr[or]),this},Tn.insertPage=function(ai){return this.addPage(),this.movePage(or,ai),this},Tn.movePage=function(ai,Vi){var yr,Pr;if(ai>Vi){yr=Vr[ai],Pr=Es[ai];for(var Fr=ai;Fr>Vi;Fr--)Vr[Fr]=Vr[Fr-1],Es[Fr]=Es[Fr-1];Vr[Vi]=yr,Es[Vi]=Pr,this.setPage(Vi)}else if(ai<Vi){yr=Vr[ai],Pr=Es[ai];for(var Xr=ai;Xr<Vi;Xr++)Vr[Xr]=Vr[Xr+1],Es[Xr]=Es[Xr+1];Vr[Vi]=yr,Es[Vi]=Pr,this.setPage(Vi)}return this},Tn.deletePage=function(){return Ah.apply(this,arguments),this},Tn.__private__.text=Tn.text=function(ai,Vi,yr,Pr,Fr){var Xr,ss,vs,bs,Gs,Ds,zs,Eo,Io,Zo=(Pr=Pr||{}).scope||this;if(typeof ai=="number"&&typeof Vi=="number"&&(typeof yr=="string"||Array.isArray(yr))){var fa=yr;yr=Vi,Vi=ai,ai=fa}if(arguments[3]instanceof Cs?(fi("The transform parameter of text() with a Matrix value"),Io=Fr):(vs=arguments[4],bs=arguments[5],_typeof(zs=arguments[3])==="object"&&zs!==null||(typeof vs=="string"&&(bs=vs,vs=null),typeof zs=="string"&&(bs=zs,zs=null),typeof zs=="number"&&(vs=zs,zs=null),Pr={flags:zs,angle:vs,align:bs})),isNaN(Vi)||isNaN(yr)||ai==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ai.length===0)return Zo;var na="",Il=!1,Ga=typeof Pr.lineHeightFactor=="number"?Pr.lineHeightFactor:Oc,nc=Zo.internal.scaleFactor;function Gd(go){return go=go.split("	").join(Array(Pr.TabLen||9).join(" ")),xa(go,zs)}function Gu(go){for(var yo,ko=go.concat(),ta=[],uc=ko.length;uc--;)typeof(yo=ko.shift())=="string"?ta.push(yo):Array.isArray(go)&&(yo.length===1||yo[1]===void 0&&yo[2]===void 0)?ta.push(yo[0]):ta.push([yo[0],yo[1],yo[2]]);return ta}function Fu(go,yo){var ko;if(typeof go=="string")ko=yo(go)[0];else if(Array.isArray(go)){for(var ta,uc,qu=go.concat(),fu=[],Vd=qu.length;Vd--;)typeof(ta=qu.shift())=="string"?fu.push(yo(ta)[0]):Array.isArray(ta)&&typeof ta[0]=="string"&&(uc=yo(ta[0],ta[1],ta[2]),fu.push([uc[0],uc[1],uc[2]]));ko=fu}return ko}var nu=!1,Bu=!0;if(typeof ai=="string")nu=!0;else if(Array.isArray(ai)){var Uu=ai.concat();ss=[];for(var iu,aa=Uu.length;aa--;)(typeof(iu=Uu.shift())!="string"||Array.isArray(iu)&&typeof iu[0]!="string")&&(Bu=!1);nu=Bu}if(nu===!1)throw new Error('Type of text must be string or Array. "'+ai+'" is not recognized.');typeof ai=="string"&&(ai=ai.match(/[\r?\n]/)?ai.split(/\r\n|\r|\n/g):[ai]);var ru=Mr/Zo.internal.scaleFactor,su=ru*(Ga-1);switch(Pr.baseline){case"bottom":yr-=su;break;case"top":yr+=ru-su;break;case"hanging":yr+=ru-2*su;break;case"middle":yr+=ru/2-su}if((Ds=Pr.maxWidth||0)>0&&(typeof ai=="string"?ai=Zo.splitTextToSize(ai,Ds):Object.prototype.toString.call(ai)==="[object Array]"&&(ai=ai.reduce(function(go,yo){return go.concat(Zo.splitTextToSize(yo,Ds))},[]))),Xr={text:ai,x:Vi,y:yr,options:Pr,mutex:{pdfEscape:xa,activeFontKey:as,fonts:Ps,activeFontSize:Mr}},Ms.publish("preProcessText",Xr),ai=Xr.text,vs=(Pr=Xr.options).angle,!(Io instanceof Cs)&&vs&&typeof vs=="number"){vs*=Math.PI/180,Pr.rotationDirection===0&&(vs=-vs),si===ii.ADVANCED&&(vs=-vs);var au=Math.cos(vs),ju=Math.sin(vs);Io=new Cs(au,ju,-ju,au,0,0)}else vs&&vs instanceof Cs&&(Io=vs);si!==ii.ADVANCED||Io||(Io=Co),(Gs=Pr.charSpace||Qc)!==void 0&&(na+=pi(li(Gs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Eo=Pr.horizontalScale)!==void 0&&(na+=pi(100*Eo)+` Tz
`),Pr.lang;var La=-1,Fh=Pr.renderingMode!==void 0?Pr.renderingMode:Pr.stroke,Vu=Zo.internal.getCurrentPageInfo().pageContext;switch(Fh){case 0:case!1:case"fill":La=0;break;case 1:case!0:case"stroke":La=1;break;case 2:case"fillThenStroke":La=2;break;case 3:case"invisible":La=3;break;case 4:case"fillAndAddForClipping":La=4;break;case 5:case"strokeAndAddPathForClipping":La=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":La=6;break;case 7:case"addToPathForClipping":La=7}var Fd=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;La!==-1?na+=La+` Tr
`:Fd!==-1&&(na+=`0 Tr
`),La!==-1&&(Vu.usedRenderingMode=La),bs=Pr.align||"left";var qa,cu=Mr*Ga,Bd=Zo.internal.pageSize.getWidth(),Ud=Ps[as];Gs=Pr.charSpace||Qc,Ds=Pr.maxWidth||0,zs=Object.assign({autoencode:!0,noBOM:!0},Pr.flags);var yc=[],Dc=function(go){return Zo.getStringUnitWidth(go,{font:Ud,charSpace:Gs,fontSize:Mr,doKerning:!1})*Mr/nc};if(Object.prototype.toString.call(ai)==="[object Array]"){var Ra;ss=Gu(ai),bs!=="left"&&(qa=ss.map(Dc));var ga,_c=0;if(bs==="right"){Vi-=qa[0],ai=[],aa=ss.length;for(var oc=0;oc<aa;oc++)oc===0?(ga=tc(Vi),Ra=sc(yr)):(ga=li(_c-qa[oc]),Ra=-cu),ai.push([ss[oc],ga,Ra]),_c=qa[oc]}else if(bs==="center"){Vi-=qa[0]/2,ai=[],aa=ss.length;for(var ac=0;ac<aa;ac++)ac===0?(ga=tc(Vi),Ra=sc(yr)):(ga=li((_c-qa[ac])/2),Ra=-cu),ai.push([ss[ac],ga,Ra]),_c=qa[ac]}else if(bs==="left"){ai=[],aa=ss.length;for(var uu=0;uu<aa;uu++)ai.push(ss[uu])}else if(bs==="justify"&&Ud.encoding==="Identity-H"){ai=[],aa=ss.length,Ds=Ds!==0?Ds:Bd;for(var cc=0,To=0;To<aa;To++)if(Ra=To===0?sc(yr):-cu,ga=To===0?tc(Vi):cc,To<aa-1){var zu=li((Ds-qa[To])/(ss[To].split(" ").length-1)),ma=ss[To].split(" ");ai.push([ma[0]+" ",ga,Ra]),cc=0;for(var Wa=1;Wa<ma.length;Wa++){var du=(Dc(ma[Wa-1]+" "+ma[Wa])-Dc(ma[Wa]))*nc+zu;Wa==ma.length-1?ai.push([ma[Wa],du,0]):ai.push([ma[Wa]+" ",du,0]),cc-=du}}else ai.push([ss[To],ga,Ra]);ai.push(["",cc,0])}else{if(bs!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ai=[],aa=ss.length,Ds=Ds!==0?Ds:Bd,To=0;To<aa;To++)Ra=To===0?sc(yr):-cu,ga=To===0?tc(Vi):0,To<aa-1?yc.push(pi(li((Ds-qa[To])/(ss[To].split(" ").length-1)))):yc.push(0),ai.push([ss[To],ga,Ra])}}var jd=typeof Pr.R2L=="boolean"?Pr.R2L:Cr;jd===!0&&(ai=Fu(ai,function(go,yo,ko){return[go.split("").reverse().join(""),yo,ko]})),Xr={text:ai,x:Vi,y:yr,options:Pr,mutex:{pdfEscape:xa,activeFontKey:as,fonts:Ps,activeFontSize:Mr}},Ms.publish("postProcessText",Xr),ai=Xr.text,Il=Xr.mutex.isHex||!1;var $u=Ps[as].encoding;$u!=="WinAnsiEncoding"&&$u!=="StandardEncoding"||(ai=Fu(ai,function(go,yo,ko){return[Gd(go),yo,ko]})),ss=Gu(ai),ai=[];for(var Gc,Fc,Cc,Bc=0,hu=1,Uc=Array.isArray(ss[0])?hu:Bc,Ac="",Hu=function(go,yo,ko){var ta="";return ko instanceof Cs?(ko=typeof Pr.angle=="number"?ho(ko,new Cs(1,0,0,1,go,yo)):ho(new Cs(1,0,0,1,go,yo),ko),si===ii.ADVANCED&&(ko=ho(new Cs(1,0,0,-1,0,0),ko)),ta=ko.join(" ")+` Tm
`):ta=pi(go)+" "+pi(yo)+` Td
`,ta},Ya=0;Ya<ss.length;Ya++){switch(Ac="",Uc){case hu:Cc=(Il?"<":"(")+ss[Ya][0]+(Il?">":")"),Gc=parseFloat(ss[Ya][1]),Fc=parseFloat(ss[Ya][2]);break;case Bc:Cc=(Il?"<":"(")+ss[Ya]+(Il?">":")"),Gc=tc(Vi),Fc=sc(yr)}yc!==void 0&&yc[Ya]!==void 0&&(Ac=yc[Ya]+` Tw
`),Ya===0?ai.push(Ac+Hu(Gc,Fc,Io)+Cc):Uc===Bc?ai.push(Ac+Cc):Uc===hu&&ai.push(Ac+Hu(Gc,Fc,Io)+Cc)}ai=Uc===Bc?ai.join(` Tj
T* `):ai.join(` Tj
`),ai+=` Tj
`;var Xa=`BT
/`;return Xa+=as+" "+Mr+` Tf
`,Xa+=pi(Mr*Ga)+` TL
`,Xa+=Nc+`
`,Xa+=na,Xa+=ai,Ki(Xa+="ET"),Sn[as]=!0,Zo};var Th=Tn.__private__.clip=Tn.clip=function(ai){return Ki(ai==="evenodd"?"W*":"W"),this};Tn.clipEvenOdd=function(){return Th("evenodd")},Tn.__private__.discardPath=Tn.discardPath=function(){return Ki("n"),this};var $l=Tn.__private__.isValidStyle=function(ai){var Vi=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ai)!==-1&&(Vi=!0),Vi};Tn.__private__.setDefaultPathOperation=Tn.setDefaultPathOperation=function(ai){return $l(ai)&&(Cn=ai),this};var Td=Tn.__private__.getStyle=Tn.getStyle=function(ai){var Vi=Cn;switch(ai){case"D":case"S":Vi="S";break;case"F":Vi="f";break;case"FD":case"DF":Vi="B";break;case"f":case"f*":case"B":case"B*":Vi=ai}return Vi},Ld=Tn.close=function(){return Ki("h"),this};Tn.stroke=function(){return Ki("S"),this},Tn.fill=function(ai){return Zc("f",ai),this},Tn.fillEvenOdd=function(ai){return Zc("f*",ai),this},Tn.fillStroke=function(ai){return Zc("B",ai),this},Tn.fillStrokeEvenOdd=function(ai){return Zc("B*",ai),this};var Zc=function(ai,Vi){_typeof(Vi)==="object"?Rh(Vi,ai):Ki(ai)},wu=function(ai){ai===null||si===ii.ADVANCED&&ai===void 0||(ai=Td(ai),Ki(ai))};function Lh(ai,Vi,yr,Pr,Fr){var Xr=new M(Vi||this.boundingBox,yr||this.xStep,Pr||this.yStep,this.gState,Fr||this.matrix);Xr.stream=this.stream;var ss=ai+"$$"+this.cloneIndex+++"$$";return Js(ss,Xr),Xr}var Rh=function(ai,Vi){var yr=Fs[ai.key],Pr=As[yr];if(Pr instanceof B)Ki("q"),Ki(Mh(Vi)),Pr.gState&&Tn.setGState(Pr.gState),Ki(ai.matrix.toString()+" cm"),Ki("/"+yr+" sh"),Ki("Q");else if(Pr instanceof M){var Fr=new Cs(1,0,0,-1,0,vc());ai.matrix&&(Fr=Fr.multiply(ai.matrix||Co),yr=Lh.call(Pr,ai.key,ai.boundingBox,ai.xStep,ai.yStep,Fr).id),Ki("q"),Ki("/Pattern cs"),Ki("/"+yr+" scn"),Pr.gState&&Tn.setGState(Pr.gState),Ki(Vi),Ki("Q")}},Mh=function(ai){switch(ai){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pu=Tn.moveTo=function(ai,Vi){return Ki(pi(li(ai))+" "+pi(Pi(Vi))+" m"),this},Mc=Tn.lineTo=function(ai,Vi){return Ki(pi(li(ai))+" "+pi(Pi(Vi))+" l"),this},gc=Tn.curveTo=function(ai,Vi,yr,Pr,Fr,Xr){return Ki([pi(li(ai)),pi(Pi(Vi)),pi(li(yr)),pi(Pi(Pr)),pi(li(Fr)),pi(Pi(Xr)),"c"].join(" ")),this};Tn.__private__.line=Tn.line=function(ai,Vi,yr,Pr,Fr){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||isNaN(Pr)||!$l(Fr))throw new Error("Invalid arguments passed to jsPDF.line");return si===ii.COMPAT?this.lines([[yr-ai,Pr-Vi]],ai,Vi,[1,1],Fr||"S"):this.lines([[yr-ai,Pr-Vi]],ai,Vi,[1,1]).stroke()},Tn.__private__.lines=Tn.lines=function(ai,Vi,yr,Pr,Fr,Xr){var ss,vs,bs,Gs,Ds,zs,Eo,Io,Zo,fa,na,Il;if(typeof ai=="number"&&(Il=yr,yr=Vi,Vi=ai,ai=Il),Pr=Pr||[1,1],Xr=Xr||!1,isNaN(Vi)||isNaN(yr)||!Array.isArray(ai)||!Array.isArray(Pr)||!$l(Fr)||typeof Xr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pu(Vi,yr),ss=Pr[0],vs=Pr[1],Gs=ai.length,fa=Vi,na=yr,bs=0;bs<Gs;bs++)(Ds=ai[bs]).length===2?(fa=Ds[0]*ss+fa,na=Ds[1]*vs+na,Mc(fa,na)):(zs=Ds[0]*ss+fa,Eo=Ds[1]*vs+na,Io=Ds[2]*ss+fa,Zo=Ds[3]*vs+na,fa=Ds[4]*ss+fa,na=Ds[5]*vs+na,gc(zs,Eo,Io,Zo,fa,na));return Xr&&Ld(),wu(Fr),this},Tn.path=function(ai){for(var Vi=0;Vi<ai.length;Vi++){var yr=ai[Vi],Pr=yr.c;switch(yr.op){case"m":Pu(Pr[0],Pr[1]);break;case"l":Mc(Pr[0],Pr[1]);break;case"c":gc.apply(this,Pr);break;case"h":Ld()}}return this},Tn.__private__.rect=Tn.rect=function(ai,Vi,yr,Pr,Fr){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||isNaN(Pr)||!$l(Fr))throw new Error("Invalid arguments passed to jsPDF.rect");return si===ii.COMPAT&&(Pr=-Pr),Ki([pi(li(ai)),pi(Pi(Vi)),pi(li(yr)),pi(li(Pr)),"re"].join(" ")),wu(Fr),this},Tn.__private__.triangle=Tn.triangle=function(ai,Vi,yr,Pr,Fr,Xr,ss){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||isNaN(Pr)||isNaN(Fr)||isNaN(Xr)||!$l(ss))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[yr-ai,Pr-Vi],[Fr-yr,Xr-Pr],[ai-Fr,Vi-Xr]],ai,Vi,[1,1],ss,!0),this},Tn.__private__.roundedRect=Tn.roundedRect=function(ai,Vi,yr,Pr,Fr,Xr,ss){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||isNaN(Pr)||isNaN(Fr)||isNaN(Xr)||!$l(ss))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vs=4/3*(Math.SQRT2-1);return Fr=Math.min(Fr,.5*yr),Xr=Math.min(Xr,.5*Pr),this.lines([[yr-2*Fr,0],[Fr*vs,0,Fr,Xr-Xr*vs,Fr,Xr],[0,Pr-2*Xr],[0,Xr*vs,-Fr*vs,Xr,-Fr,Xr],[2*Fr-yr,0],[-Fr*vs,0,-Fr,-Xr*vs,-Fr,-Xr],[0,2*Xr-Pr],[0,-Xr*vs,Fr*vs,-Xr,Fr,-Xr]],ai+Fr,Vi,[1,1],ss,!0),this},Tn.__private__.ellipse=Tn.ellipse=function(ai,Vi,yr,Pr,Fr){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||isNaN(Pr)||!$l(Fr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xr=4/3*(Math.SQRT2-1)*yr,ss=4/3*(Math.SQRT2-1)*Pr;return Pu(ai+yr,Vi),gc(ai+yr,Vi-ss,ai+Xr,Vi-Pr,ai,Vi-Pr),gc(ai-Xr,Vi-Pr,ai-yr,Vi-ss,ai-yr,Vi),gc(ai-yr,Vi+ss,ai-Xr,Vi+Pr,ai,Vi+Pr),gc(ai+Xr,Vi+Pr,ai+yr,Vi+ss,ai+yr,Vi),wu(Fr),this},Tn.__private__.circle=Tn.circle=function(ai,Vi,yr,Pr){if(isNaN(ai)||isNaN(Vi)||isNaN(yr)||!$l(Pr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ai,Vi,yr,yr,Pr)},Tn.setFont=function(ai,Vi,yr){return yr&&(Vi=vi(Vi,yr)),as=wd(ai,Vi,{disableWarning:!1}),this};var Oh=Tn.__private__.getFont=Tn.getFont=function(){return Ps[wd.apply(Tn,arguments)]};Tn.__private__.getFontList=Tn.getFontList=function(){var ai,Vi,yr={};for(ai in ps)if(ps.hasOwnProperty(ai))for(Vi in yr[ai]=[],ps[ai])ps[ai].hasOwnProperty(Vi)&&yr[ai].push(Vi);return yr},Tn.addFont=function(ai,Vi,yr,Pr,Fr){var Xr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xr.indexOf(arguments[3])!==-1?Fr=arguments[3]:arguments[3]&&Xr.indexOf(arguments[3])==-1&&(yr=vi(yr,Pr)),Fr=Fr||"Identity-H",Au.call(this,ai,Vi,yr,Fr)};var Oc,xu=Te.lineWidth||.200025,Jc=Tn.__private__.getLineWidth=Tn.getLineWidth=function(){return xu},Rd=Tn.__private__.setLineWidth=Tn.setLineWidth=function(ai){return xu=ai,Ki(pi(li(ai))+" w"),this};Tn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(ai,Vi){if(ai=ai||[],Vi=Vi||0,isNaN(Vi)||!Array.isArray(ai))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ai=ai.map(function(yr){return pi(li(yr))}).join(" "),Vi=pi(li(Vi)),Ki("["+ai+"] "+Vi+" d"),this};var Md=Tn.__private__.getLineHeight=Tn.getLineHeight=function(){return Mr*Oc};Tn.__private__.getLineHeight=Tn.getLineHeight=function(){return Mr*Oc};var Od=Tn.__private__.setLineHeightFactor=Tn.setLineHeightFactor=function(ai){return typeof(ai=ai||1.15)=="number"&&(Oc=ai),this},Nd=Tn.__private__.getLineHeightFactor=Tn.getLineHeightFactor=function(){return Oc};Od(Te.lineHeight);var tc=Tn.__private__.getHorizontalCoordinate=function(ai){return li(ai)},sc=Tn.__private__.getVerticalCoordinate=function(ai){return si===ii.ADVANCED?ai:Es[or].mediaBox.topRightY-Es[or].mediaBox.bottomLeftY-li(ai)},Nh=Tn.__private__.getHorizontalCoordinateString=Tn.getHorizontalCoordinateString=function(ai){return pi(tc(ai))},mc=Tn.__private__.getVerticalCoordinateString=Tn.getVerticalCoordinateString=function(ai){return pi(sc(ai))},_l=Te.strokeColor||"0 G";Tn.__private__.getStrokeColor=Tn.getDrawColor=function(){return ka(_l)},Tn.__private__.setStrokeColor=Tn.setDrawColor=function(ai,Vi,yr,Pr){return _l=Pa({ch1:ai,ch2:Vi,ch3:yr,ch4:Pr,pdfColorType:"draw",precision:2}),Ki(_l),this};var Lu=Te.fillColor||"0 g";Tn.__private__.getFillColor=Tn.getFillColor=function(){return ka(Lu)},Tn.__private__.setFillColor=Tn.setFillColor=function(ai,Vi,yr,Pr){return Lu=Pa({ch1:ai,ch2:Vi,ch3:yr,ch4:Pr,pdfColorType:"fill",precision:2}),Ki(Lu),this};var Nc=Te.textColor||"0 g",kh=Tn.__private__.getTextColor=Tn.getTextColor=function(){return ka(Nc)};Tn.__private__.setTextColor=Tn.setTextColor=function(ai,Vi,yr,Pr){return Nc=Pa({ch1:ai,ch2:Vi,ch3:yr,ch4:Pr,pdfColorType:"text",precision:3}),this};var Qc=Te.charSpace,Dh=Tn.__private__.getCharSpace=Tn.getCharSpace=function(){return parseFloat(Qc||0)};Tn.__private__.setCharSpace=Tn.setCharSpace=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qc=ai,this};var Ru=0;Tn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Tn.__private__.setLineCap=Tn.setLineCap=function(ai){var Vi=Tn.CapJoinStyles[ai];if(Vi===void 0)throw new Error("Line cap style of '"+ai+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ru=Vi,Ki(Vi+" J"),this};var Mu=0;Tn.__private__.setLineJoin=Tn.setLineJoin=function(ai){var Vi=Tn.CapJoinStyles[ai];if(Vi===void 0)throw new Error("Line join style of '"+ai+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mu=Vi,Ki(Vi+" j"),this},Tn.__private__.setLineMiterLimit=Tn.__private__.setMiterLimit=Tn.setLineMiterLimit=Tn.setMiterLimit=function(ai){if(ai=ai||0,isNaN(ai))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ki(pi(li(ai))+" M"),this},Tn.GState=j,Tn.setGState=function(ai){(ai=typeof ai=="string"?xs[Zs[ai]]:kd(null,ai)).equals(_o)||(Ki("/"+ai.id+" gs"),_o=ai)};var kd=function(ai,Vi){if(!ai||!Zs[ai]){var yr=!1;for(var Pr in xs)if(xs.hasOwnProperty(Pr)&&xs[Pr].equals(Vi)){yr=!0;break}if(yr)Vi=xs[Pr];else{var Fr="GS"+(Object.keys(xs).length+1).toString(10);xs[Fr]=Vi,Vi.id=Fr}return ai&&(Zs[ai]=Vi.id),Ms.publish("addGState",Vi),Vi}};Tn.addGState=function(ai,Vi){return kd(ai,Vi),this},Tn.saveGraphicsState=function(){return Ki("q"),Is.push({key:as,size:Mr,color:Nc}),this},Tn.restoreGraphicsState=function(){Ki("Q");var ai=Is.pop();return as=ai.key,Mr=ai.size,Nc=ai.color,_o=null,this},Tn.setCurrentTransformationMatrix=function(ai){return Ki(ai.toString()+" cm"),this},Tn.comment=function(ai){return Ki("#"+ai),this};var eu=function(ai,Vi){var yr=ai||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return yr},set:function(Xr){isNaN(Xr)||(yr=parseFloat(Xr))}});var Pr=Vi||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pr},set:function(Xr){isNaN(Xr)||(Pr=parseFloat(Xr))}});var Fr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fr},set:function(Xr){Fr=Xr.toString()}}),this},Ou=function(ai,Vi,yr,Pr){eu.call(this,ai,Vi),this.type="rect";var Fr=yr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fr},set:function(ss){isNaN(ss)||(Fr=parseFloat(ss))}});var Xr=Pr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xr},set:function(ss){isNaN(ss)||(Xr=parseFloat(ss))}}),this},Nu=function(){this.page=Ls,this.currentPage=or,this.pages=Vr.slice(0),this.pagesContext=Es.slice(0),this.x=Ss,this.y=ms,this.matrix=Rs,this.width=kc(or),this.height=vc(or),this.outputDestination=tr,this.id="",this.objectNumber=-1};Nu.prototype.restore=function(){Ls=this.page,or=this.currentPage,Es=this.pagesContext,Vr=this.pages,Ss=this.x,ms=this.y,Rs=this.matrix,ku(or,this.width),Du(or,this.height),tr=this.outputDestination};var Dd=function(ai,Vi,yr,Pr,Fr){Ts.push(new Nu),Ls=or=0,Vr=[],Ss=ai,ms=Vi,Rs=Fr,bu([yr,Pr])},Gh=function(ai){if($o[ai])Ts.pop().restore();else{var Vi=new Nu,yr="Xo"+(Object.keys(qs).length+1).toString(10);Vi.id=yr,$o[ai]=yr,qs[yr]=Vi,Ms.publish("addFormObject",Vi),Ts.pop().restore()}};for(var tu in Tn.beginFormObject=function(ai,Vi,yr,Pr,Fr){return Dd(ai,Vi,yr,Pr,Fr),this},Tn.endFormObject=function(ai){return Gh(ai),this},Tn.doFormObject=function(ai,Vi){var yr=qs[$o[ai]];return Ki("q"),Ki(Vi.toString()+" cm"),Ki("/"+yr.id+" Do"),Ki("Q"),this},Tn.getFormObject=function(ai){var Vi=qs[$o[ai]];return{x:Vi.x,y:Vi.y,width:Vi.width,height:Vi.height,matrix:Vi.matrix}},Tn.save=function(ai,Vi){return ai=ai||"generated.pdf",(Vi=Vi||{}).returnPromise=Vi.returnPromise||!1,Vi.returnPromise===!1?(l(Xc(rc()),ai),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(yr,Pr){try{var Fr=l(Xc(rc()),ai);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),yr(Fr)}catch(Xr){Pr(Xr.message)}})},E.API)E.API.hasOwnProperty(tu)&&(tu==="events"&&E.API.events.length?function(ai,Vi){var yr,Pr,Fr;for(Fr=Vi.length-1;Fr!==-1;Fr--)yr=Vi[Fr][0],Pr=Vi[Fr][1],ai.subscribe.apply(ai,[yr].concat(typeof Pr=="function"?[Pr]:Pr))}(Ms,E.API.events):Tn[tu]=E.API[tu]);var kc=Tn.getPageWidth=function(ai){return(Es[ai=ai||or].mediaBox.topRightX-Es[ai].mediaBox.bottomLeftX)/Kr},ku=Tn.setPageWidth=function(ai,Vi){Es[ai].mediaBox.topRightX=Vi*Kr+Es[ai].mediaBox.bottomLeftX},vc=Tn.getPageHeight=function(ai){return(Es[ai=ai||or].mediaBox.topRightY-Es[ai].mediaBox.bottomLeftY)/Kr},Du=Tn.setPageHeight=function(ai,Vi){Es[ai].mediaBox.topRightY=Vi*Kr+Es[ai].mediaBox.bottomLeftY};return Tn.internal={pdfEscape:xa,getStyle:Td,getFont:Oh,getFontSize:wr,getCharSpace:Dh,getTextColor:kh,getLineHeight:Md,getLineHeightFactor:Nd,getLineWidth:Jc,write:Nr,getHorizontalCoordinate:tc,getVerticalCoordinate:sc,getCoordinateString:Nh,getVerticalCoordinateString:mc,collections:{},newObject:Os,newAdditionalObject:ya,newObjectDeferred:Us,newObjectDeferredBegin:Vs,getFilters:sa,putStream:oa,events:Ms,scaleFactor:Kr,pageSize:{getWidth:function(){return kc(or)},setWidth:function(ai){ku(or,ai)},getHeight:function(){return vc(or)},setHeight:function(ai){Du(or,ai)}},encryptionOptions:An,encryption:da,getEncryptor:Ph,output:Kc,getNumberOfPages:Eh,pages:Vr,out:Ki,f2:Oi,f3:ui,getPageInfo:xd,getPageInfoByObjId:Ns,getCurrentPageInfo:xh,getPDFVersion:Bn,Point:eu,Rectangle:Ou,Matrix:Cs,hasHotfix:Pd},Object.defineProperty(Tn.internal.pageSize,"width",{get:function(){return kc(or)},set:function(ai){ku(or,ai)},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.internal.pageSize,"height",{get:function(){return vc(or)},set:function(ai){Du(or,ai)},enumerable:!0,configurable:!0}),Ch.call(Tn,Ir),as="F1",bd(ke,t),Ms.publish("initialized"),Tn}I.prototype.lsbFirstWord=function(Te){return String.fromCharCode(Te>>0&255,Te>>8&255,Te>>16&255,Te>>24&255)},I.prototype.toHexString=function(Te){return Te.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Te){for(var e=[],t=0;t<Te.length;t+=2)e.push(String.fromCharCode(parseInt(Te.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(Te,e){return P(x(e).substr(0,5),Te)},I.prototype.encryptor=function(Te,e){var t=x(this.encryptionKey+String.fromCharCode(255&Te,Te>>8&255,Te>>16&255,255&e,e>>8&255)).substr(0,10);return function(Oe){return P(t,Oe)}},j.prototype.equals=function(Te){var e,t="id,objectNumber,equals";if(!Te||_typeof(Te)!==_typeof(this))return!1;var Oe=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!Te.hasOwnProperty(e)||this[e]!==Te[e])return!1;Oe++}for(e in Te)Te.hasOwnProperty(e)&&t.indexOf(e)<0&&Oe--;return Oe===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(Te){return Te.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Te){return Te.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Te){return Te.toFixed(2)},z=function(Te){return Te.toFixed(5)};q.__acroform__={};var H=function(Te,e){Te.prototype=Object.create(e.prototype),Te.prototype.constructor=Te},W=function(Te){return Te*D},V=function(Te){var e=new ut,t=At.internal.getHeight(Te)||0,Oe=At.internal.getWidth(Te)||0;return e.BBox=[0,0,Number(U(Oe)),Number(U(t))],e},G=q.__acroform__.setBit=function(Te,e){if(Te=Te||0,e=e||0,isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Te|=1<<e},Y=q.__acroform__.clearBit=function(Te,e){if(Te=Te||0,e=e||0,isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Te&=~(1<<e)},J=q.__acroform__.getBit=function(Te,e){if(isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return Te&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(Te,e){if(isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Te,e-1)},K=q.__acroform__.setBitForPdf=function(Te,e){if(isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Te,e-1)},Z=q.__acroform__.clearBitForPdf=function(Te,e){if(isNaN(Te)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Te,e-1)},$=q.__acroform__.calculateCoordinates=function(Te,e){var t=e.internal.getHorizontalCoordinate,Oe=e.internal.getVerticalCoordinate,ke=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We={};return We.lowerLeft_X=t(ke)||0,We.lowerLeft_Y=Oe(Be+He)||0,We.upperRight_X=t(ke+Ue)||0,We.upperRight_Y=Oe(Be)||0,[Number(U(We.lowerLeft_X)),Number(U(We.lowerLeft_Y)),Number(U(We.upperRight_X)),Number(U(We.upperRight_Y))]},Q=function(Te){if(Te.appearanceStreamContent)return Te.appearanceStreamContent;if(Te.V||Te.DV){var e=[],t=Te._V||Te.DV,Oe=tt(Te,t),ke=Te.scope.internal.getFont(Te.fontName,Te.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(Te.scope.__private__.encodeColorString(Te.color)),e.push("/"+ke+" "+U(Oe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(Oe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Be=V(Te);return Be.scope=Te.scope,Be.stream=e.join(`
`),Be}},tt=function(Te,e){var t=Te.fontSize===0?Te.maxFontSize:Te.fontSize,Oe={text:"",fontSize:""},ke=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");ke=Te.multiline?ke.map(function(ui){return ui.split(`
`)}):ke.map(function(ui){return[ui]});var Be=t,Ue=At.internal.getHeight(Te)||0;Ue=Ue<0?-Ue:Ue;var He=At.internal.getWidth(Te)||0;He=He<0?-He:He;var We=function(ui,li,Ri){if(ui+1<ke.length){var Pi=li+" "+ke[ui+1][0];return et(Pi,Te,Ri).width<=He-4}return!1};Be++;e:for(;Be>0;){e="",Be--;var Cn,An,En=et("3",Te,Be).height,Sn=Te.multiline?Ue-Be:(Ue-En)/2,Tn=Sn+=2,Ln=0,Bn=0,ti=0;if(Be<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,Te,Be=12).width+", FieldWidth:"+He+`
`;break}for(var ni="",ii=0,si=0;si<ke.length;si++)if(ke.hasOwnProperty(si)){var oi=!1;if(ke[si].length!==1&&ti!==ke[si].length-1){if((En+2)*(ii+2)+2>Ue)continue e;ni+=ke[si][ti],oi=!0,Bn=si,si--}else{ni=(ni+=ke[si][ti]+" ").substr(ni.length-1)==" "?ni.substr(0,ni.length-1):ni;var ci=parseInt(si),vi=We(ci,ni,Be),pi=si>=ke.length-1;if(vi&&!pi){ni+=" ",ti=0;continue}if(vi||pi){if(pi)Bn=ci;else if(Te.multiline&&(En+2)*(ii+2)+2>Ue)continue e}else{if(!Te.multiline||(En+2)*(ii+2)+2>Ue)continue e;Bn=ci}}for(var fi="",Mi=Ln;Mi<=Bn;Mi++){var Oi=ke[Mi];if(Te.multiline){if(Mi===Bn){fi+=Oi[ti]+" ",ti=(ti+1)%Oi.length;continue}if(Mi===Ln){fi+=Oi[Oi.length-1]+" ";continue}}fi+=Oi[0]+" "}switch(fi=fi.substr(fi.length-1)==" "?fi.substr(0,fi.length-1):fi,An=et(fi,Te,Be).width,Te.textAlign){case"right":Cn=He-An-2;break;case"center":Cn=(He-An)/2;break;case"left":default:Cn=2}e+=U(Cn)+" "+U(Tn)+` Td
`,e+="("+R(fi)+`) Tj
`,e+=-U(Cn)+` 0 Td
`,Tn=-(Be+2),An=0,Ln=oi?Bn:Bn+1,ii++,ni=""}break}return Oe.text=e,Oe.fontSize=Be,Oe},et=function(Te,e,t){var Oe=e.scope.internal.getFont(e.fontName,e.fontStyle),ke=e.scope.getStringUnitWidth(Te,{font:Oe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:Oe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:ke}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Te,e){var t={type:"reference",object:Te};e.internal.getPageInfo(Te.page).pageContext.annotations.find(function(Oe){return Oe.type===t.type&&Oe.object===t.object})===void 0&&e.internal.getPageInfo(Te.page).pageContext.annotations.push(t)},it=function(Te,e){for(var t in Te)if(Te.hasOwnProperty(t)){var Oe=t,ke=Te[t];e.internal.newObjectDeferredBegin(ke.objId,!0),_typeof(ke)==="object"&&typeof ke.putStream=="function"&&ke.putStream(),delete Te[Oe]}},at=function(Te,e){if(e.scope=Te,Te.internal!==void 0&&(Te.internal.acroformPlugin===void 0||Te.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Te.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Te.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Te.internal.scaleFactor,Te.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Te.internal.acroformPlugin.acroFormDictionaryRoot.scope=Te,Te.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Te.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(Te)}),Te.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Oe=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=Oe[ke];Be.objId=void 0,Be.hasAnnotation&&nt(Be,t)}})(Te)}),Te.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Te)}),Te.internal.events.subscribe("postPutPages",function(t){(function(Oe,ke){var Be=!Oe;for(var Ue in Oe||(ke.internal.newObjectDeferredBegin(ke.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),ke.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Oe=Oe||ke.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Oe.hasOwnProperty(Ue)){var He=Oe[Ue],We=[],Cn=He.Rect;if(He.Rect&&(He.Rect=$(He.Rect,ke)),ke.internal.newObjectDeferredBegin(He.objId,!0),He.DA=At.createDefaultAppearanceStream(He),_typeof(He)==="object"&&typeof He.getKeyValueListForStream=="function"&&(We=He.getKeyValueListForStream()),He.Rect=Cn,He.hasAppearanceStream&&!He.appearanceStreamContent){var An=Q(He);We.push({key:"AP",value:"<</N "+An+">>"}),ke.internal.acroformPlugin.xForms.push(An)}if(He.appearanceStreamContent){var En="";for(var Sn in He.appearanceStreamContent)if(He.appearanceStreamContent.hasOwnProperty(Sn)){var Tn=He.appearanceStreamContent[Sn];if(En+="/"+Sn+" ",En+="<<",Object.keys(Tn).length>=1||Array.isArray(Tn)){for(var Ue in Tn)if(Tn.hasOwnProperty(Ue)){var Ln=Tn[Ue];typeof Ln=="function"&&(Ln=Ln.call(ke,He)),En+="/"+Ue+" "+Ln+" ",ke.internal.acroformPlugin.xForms.indexOf(Ln)>=0||ke.internal.acroformPlugin.xForms.push(Ln)}}else typeof(Ln=Tn)=="function"&&(Ln=Ln.call(ke,He)),En+="/"+Ue+" "+Ln,ke.internal.acroformPlugin.xForms.indexOf(Ln)>=0||ke.internal.acroformPlugin.xForms.push(Ln);En+=">>"}We.push({key:"AP",value:`<<
`+En+">>"})}ke.internal.putStream({additionalKeyValues:We,objectId:He.objId}),ke.internal.out("endobj")}Be&&it(ke.internal.acroformPlugin.xForms,ke)})(t,Te)}),Te.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Te,e,t){var Oe=function(Ue){return Ue};if(Array.isArray(Te)){for(var ke="[",Be=0;Be<Te.length;Be++)switch(Be!==0&&(ke+=" "),_typeof(Te[Be])){case"boolean":case"number":case"object":ke+=Te[Be].toString();break;case"string":Te[Be].substr(0,1)!=="/"?(e!==void 0&&t&&(Oe=t.internal.getEncryptor(e)),ke+="("+R(Oe(Te[Be].toString()))+")"):ke+=Te[Be].toString()}return ke+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Te,e,t){var Oe=function(ke){return ke};return e!==void 0&&t&&(Oe=t.internal.getEncryptor(e)),(Te=Te||"").toString(),Te="("+R(Oe(Te))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Te){this._objId=Te}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Te=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Te,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Te=[],e=Object.getOwnPropertyNames(this).filter(function(Be){return Be!="content"&&Be!="appearanceStreamContent"&&Be!="scope"&&Be!="objId"&&Be.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var Oe=e[t],ke=this[Oe];ke&&(Array.isArray(ke)?Te.push({key:Oe,value:ot(ke,this.objId,this.scope)}):ke instanceof ct?(ke.scope=this.scope,Te.push({key:Oe,value:ke.objId+" 0 R"})):typeof ke!="function"&&Te.push({key:Oe,value:ke}))}return Te};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Te,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){Te=t.trim()},get:function(){return Te||null}})};H(ut,ct);var ht=function(){ct.call(this);var Te,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Te){var t=function(Oe){return Oe};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(Te))+")"}},set:function(t){Te=t}})};H(ht,ct);var lt=function Te(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute F supplied.');e=ni}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(ni){ni?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute Ff supplied.');t=ni}});var Oe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Oe.length!==0)return Oe},set:function(ni){Oe=ni!==void 0?ni:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[0])?0:Oe[0]},set:function(ni){Oe[0]=ni}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[1])?0:Oe[1]},set:function(ni){Oe[1]=ni}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[2])?0:Oe[2]},set:function(ni){Oe[2]=ni}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[3])?0:Oe[3]},set:function(ni){Oe[3]=ni}});var ke="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return ke},set:function(ni){switch(ni){case"/Btn":case"/Tx":case"/Ch":case"/Sig":ke=ni;break;default:throw new Error('Invalid value "'+ni+'" for attribute FT supplied.')}}});var Be=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Be||Be.length<1){if(this instanceof yt)return;Be="FieldObject"+Te.FieldNum++}var ni=function(ii){return ii};return this.scope&&(ni=this.scope.internal.getEncryptor(this.objId)),"("+R(ni(Be))+")"},set:function(ni){Be=ni.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Be},set:function(ni){Be=ni}});var Ue="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Ue},set:function(ni){Ue=ni}});var He="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return He},set:function(ni){He=ni}});var We=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return We},set:function(ni){We=ni}});var Cn=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Cn===void 0?50/D:Cn},set:function(ni){Cn=ni}});var An="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return An},set:function(ni){An=ni}});var En="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!En||this instanceof yt||this instanceof Nt))return st(En,this.objId,this.scope)},set:function(ni){ni=ni.toString(),En=ni}});var Sn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Sn)return this instanceof mt?Sn:st(Sn,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Sn=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Sn.substr(1,Sn.length-1)):Sn},set:function(ni){ni=ni.toString(),Sn=this instanceof mt?"/"+ni:ni}});var Tn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Tn)return Tn},set:function(ni){this.V=ni}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Tn)return this instanceof mt?Tn:st(Tn,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Tn=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Tn.substr(1,Tn.length-1)):Tn},set:function(ni){ni=ni.toString(),Tn=this instanceof mt?"/"+ni:ni}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Ln,Bn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Bn},set:function(ni){ni=!!ni,Bn=ni}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Ln)return Ln},set:function(ni){Ln=ni}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(ni){ni?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(ni){ni?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(ni){ni?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var ti=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(ti!==null)return ti},set:function(ni){if([0,1,2].indexOf(ni)===-1)throw new Error('Invalid value "'+ni+'" for attribute Q supplied.');ti=ni}}),Object.defineProperty(this,"textAlign",{get:function(){var ni;switch(ti){case 0:default:ni="left";break;case 1:ni="center";break;case 2:ni="right"}return ni},configurable:!0,enumerable:!0,set:function(ni){switch(ni){case"right":case 2:ti=2;break;case"center":case 1:ti=1;break;case"left":case 0:default:ti=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Te=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Te},set:function(t){Te=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Te},set:function(t){Te=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var Oe,ke;ke=[],typeof(Oe=t)=="string"&&(ke=function(Be,Ue,He){He||(He=1);for(var We,Cn=[];We=Ue.exec(Be);)Cn.push(We[He]);return Cn}(Oe,/\((.*?)\)/g)),e=ke}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,Oe){for(Oe=Oe||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),Oe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(t){t?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(t){t?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(t){t?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(t){t?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(t){t?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(t){t?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(t){t?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Te,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Be){return Be};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var Oe,ke=[];for(Oe in ke.push("<<"),e)ke.push("/"+Oe+" ("+R(t(e[Oe]))+")");return ke.push(">>"),ke.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(t){Te=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Te.substr(1,Te.length-1)},set:function(t){Te="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Te=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Te},set:function(e){Te=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var Te,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(ke){Te=ke}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(ke){e=ke}});var t,Oe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var ke=function(He){return He};this.scope&&(ke=this.scope.internal.getEncryptor(this.objId));var Be,Ue=[];for(Be in Ue.push("<<"),Oe)Ue.push("/"+Be+" ("+R(ke(Oe[Be]))+")");return Ue.push(">>"),Ue.join(`
`)},set:function(ke){_typeof(ke)==="object"&&(Oe=ke)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Oe.CA||""},set:function(ke){typeof ke=="string"&&(Oe.CA=ke)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(ke){t=ke}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(ke){t="/"+ke}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Te){if(!("createAppearanceStream"in Te)||!("getCA"in Te))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=Te.createAppearanceStream(t.optionName),t.caption=Te.getCA()}},bt.prototype.createOption=function(Te){var e=new yt;return e.Parent=this,e.optionName=Te,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Te=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Te},set:function(e){Te=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Te},set:function(e){Number.isInteger(e)&&(Te=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(Te){Te?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=[],Oe=Te.scope.internal.getFont(Te.fontName,Te.fontStyle).id,ke=Te.scope.__private__.encodeColorString(Te.color),Be=tt(Te,Te.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Te))+" "+U(At.internal.getHeight(Te))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+Oe+" "+U(Be.fontSize)+" Tf "+ke),t.push("BT"),t.push(Be.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(Te){var e=V(Te);e.scope=Te.scope;var t=Te.scope.internal.getFont(Te.fontName,Te.fontStyle).id,Oe=Te.scope.__private__.encodeColorString(Te.color),ke=[],Be=At.internal.getHeight(Te),Ue=At.internal.getWidth(Te),He=tt(Te,Te.caption);return ke.push("1 g"),ke.push("0 0 "+U(Ue)+" "+U(Be)+" re"),ke.push("f"),ke.push("q"),ke.push("0 0 1 rg"),ke.push("0 0 "+U(Ue-1)+" "+U(Be-1)+" re"),ke.push("W"),ke.push("n"),ke.push("0 g"),ke.push("BT"),ke.push("/"+t+" "+U(He.fontSize)+" Tf "+Oe),ke.push(He.text),ke.push("ET"),ke.push("Q"),e.stream=ke.join(`
`),e},OffPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Te))+" "+U(At.internal.getHeight(Te))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(Te){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[Te]=At.RadioButton.Circle.YesNormal,e.D[Te]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(Te){var e=V(Te);e.scope=Te.scope;var t=[],Oe=At.internal.getWidth(Te)<=At.internal.getHeight(Te)?At.internal.getWidth(Te)/4:At.internal.getHeight(Te)/4;Oe=Number((.9*Oe).toFixed(5));var ke=At.internal.Bezier_C,Be=Number((Oe*ke).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Te)/2)+" "+z(At.internal.getHeight(Te)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Be+" "+Be+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Be+" "+Oe+" -"+Oe+" "+Be+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Be+" -"+Be+" -"+Oe+" 0 -"+Oe+" c"),t.push(Be+" -"+Oe+" "+Oe+" -"+Be+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=[],Oe=At.internal.getWidth(Te)<=At.internal.getHeight(Te)?At.internal.getWidth(Te)/4:At.internal.getHeight(Te)/4;Oe=Number((.9*Oe).toFixed(5));var ke=Number((2*Oe).toFixed(5)),Be=Number((ke*At.internal.Bezier_C).toFixed(5)),Ue=Number((Oe*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Te)/2)+" "+z(At.internal.getHeight(Te)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Te)/2)+" "+z(At.internal.getHeight(Te)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Ue+" "+Ue+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Ue+" "+Oe+" -"+Oe+" "+Ue+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Ue+" -"+Ue+" -"+Oe+" 0 -"+Oe+" c"),t.push(Ue+" -"+Oe+" "+Oe+" -"+Ue+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=[],Oe=At.internal.getWidth(Te)<=At.internal.getHeight(Te)?At.internal.getWidth(Te)/4:At.internal.getHeight(Te)/4;Oe=Number((.9*Oe).toFixed(5));var ke=Number((2*Oe).toFixed(5)),Be=Number((ke*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Te)/2)+" "+z(At.internal.getHeight(Te)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(Te){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[Te]=At.RadioButton.Cross.YesNormal,e.D[Te]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(Te){var e=V(Te);e.scope=Te.scope;var t=[],Oe=At.internal.calculateCross(Te);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(Te)-2)+" "+U(At.internal.getHeight(Te)-2)+" re"),t.push("W"),t.push("n"),t.push(U(Oe.x1.x)+" "+U(Oe.x1.y)+" m"),t.push(U(Oe.x2.x)+" "+U(Oe.x2.y)+" l"),t.push(U(Oe.x4.x)+" "+U(Oe.x4.y)+" m"),t.push(U(Oe.x3.x)+" "+U(Oe.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=At.internal.calculateCross(Te),Oe=[];return Oe.push("0.749023 g"),Oe.push("0 0 "+U(At.internal.getWidth(Te))+" "+U(At.internal.getHeight(Te))+" re"),Oe.push("f"),Oe.push("q"),Oe.push("1 1 "+U(At.internal.getWidth(Te)-2)+" "+U(At.internal.getHeight(Te)-2)+" re"),Oe.push("W"),Oe.push("n"),Oe.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),Oe.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),Oe.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),Oe.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),Oe.push("s"),Oe.push("Q"),e.stream=Oe.join(`
`),e},OffPushDown:function(Te){var e=V(Te);e.scope=Te.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Te))+" "+U(At.internal.getHeight(Te))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(Te){var e=Te.scope.internal.getFont(Te.fontName,Te.fontStyle).id,t=Te.scope.__private__.encodeColorString(Te.color);return"/"+e+" "+Te.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(Te){var e=At.internal.getWidth(Te),t=At.internal.getHeight(Te),Oe=Math.min(e,t);return{x1:{x:(e-Oe)/2,y:(t-Oe)/2+Oe},x2:{x:(e-Oe)/2+Oe,y:(t-Oe)/2},x3:{x:(e-Oe)/2,y:(t-Oe)/2},x4:{x:(e-Oe)/2+Oe,y:(t-Oe)/2+Oe}}}},At.internal.getWidth=function(Te){var e=0;return _typeof(Te)==="object"&&(e=W(Te.Rect[2])),e},At.internal.getHeight=function(Te){var e=0;return _typeof(Te)==="object"&&(e=W(Te.Rect[3])),e};var xt=q.addField=function(Te){if(at(this,Te),!(Te instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=Te).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),Te.page=Te.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(Te){return Te.reduce(function(e,t,Oe){return e[t]=Oe,e},{})}(function(Te){Te.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Oe=Te.__addimage__.getImageFileTypeByImageData=function(ui,li){var Ri,Pi,Fi,Hi,nr,ar=e;if((li=li||e)==="RGBA"||ui.data!==void 0&&ui.data instanceof Uint8ClampedArray&&"height"in ui&&"width"in ui)return"RGBA";if(vi(ui))for(nr in t)for(Fi=t[nr],Ri=0;Ri<Fi.length;Ri+=1){for(Hi=!0,Pi=0;Pi<Fi[Ri].length;Pi+=1)if(Fi[Ri][Pi]!==void 0&&Fi[Ri][Pi]!==ui[Pi]){Hi=!1;break}if(Hi===!0){ar=nr;break}}else for(nr in t)for(Fi=t[nr],Ri=0;Ri<Fi.length;Ri+=1){for(Hi=!0,Pi=0;Pi<Fi[Ri].length;Pi+=1)if(Fi[Ri][Pi]!==void 0&&Fi[Ri][Pi]!==ui.charCodeAt(Pi)){Hi=!1;break}if(Hi===!0){ar=nr;break}}return ar===e&&li!==e&&(ar=li),ar},ke=function ui(li){for(var Ri=this.internal.write,Pi=this.internal.putStream,Fi=(0,this.internal.getFilters)();Fi.indexOf("FlateEncode")!==-1;)Fi.splice(Fi.indexOf("FlateEncode"),1);li.objectId=this.internal.newObject();var Hi=[];if(Hi.push({key:"Type",value:"/XObject"}),Hi.push({key:"Subtype",value:"/Image"}),Hi.push({key:"Width",value:li.width}),Hi.push({key:"Height",value:li.height}),li.colorSpace===ti.INDEXED?Hi.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(li.palette.length/3-1)+" "+("sMask"in li&&li.sMask!==void 0?li.objectId+2:li.objectId+1)+" 0 R]"}):(Hi.push({key:"ColorSpace",value:"/"+li.colorSpace}),li.colorSpace===ti.DEVICE_CMYK&&Hi.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Hi.push({key:"BitsPerComponent",value:li.bitsPerComponent}),"decodeParameters"in li&&li.decodeParameters!==void 0&&Hi.push({key:"DecodeParms",value:"<<"+li.decodeParameters+">>"}),"transparency"in li&&Array.isArray(li.transparency)){for(var nr="",ar=0,cr=li.transparency.length;ar<cr;ar++)nr+=li.transparency[ar]+" "+li.transparency[ar]+" ";Hi.push({key:"Mask",value:"["+nr+"]"})}li.sMask!==void 0&&Hi.push({key:"SMask",value:li.objectId+1+" 0 R"});var sr=li.filter!==void 0?["/"+li.filter]:void 0;if(Pi({data:li.data,additionalKeyValues:Hi,alreadyAppliedFilters:sr,objectId:li.objectId}),Ri("endobj"),"sMask"in li&&li.sMask!==void 0){var br="/Predictor "+li.predictor+" /Colors 1 /BitsPerComponent "+li.bitsPerComponent+" /Columns "+li.width,Ni={width:li.width,height:li.height,colorSpace:"DeviceGray",bitsPerComponent:li.bitsPerComponent,decodeParameters:br,data:li.sMask};"filter"in li&&(Ni.filter=li.filter),ui.call(this,Ni)}if(li.colorSpace===ti.INDEXED){var or=this.internal.newObject();Pi({data:fi(new Uint8Array(li.palette)),objectId:or}),Ri("endobj")}},Be=function(){var ui=this.internal.collections.addImage_images;for(var li in ui)ke.call(this,ui[li])},Ue=function(){var ui,li=this.internal.collections.addImage_images,Ri=this.internal.write;for(var Pi in li)Ri("/I"+(ui=li[Pi]).index,ui.objectId,"0","R")},He=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Be),this.internal.events.subscribe("putXobjectDict",Ue))},We=function(){var ui=this.internal.collections.addImage_images;return He.call(this),ui},Cn=function(){return Object.keys(this.internal.collections.addImage_images).length},An=function(ui){return typeof Te["process"+ui.toUpperCase()]=="function"},En=function(ui){return _typeof(ui)==="object"&&ui.nodeType===1},Sn=function(ui,li){if(ui.nodeName==="IMG"&&ui.hasAttribute("src")){var Ri=""+ui.getAttribute("src");if(Ri.indexOf("data:image/")===0)return u(unescape(Ri).split("base64,").pop());var Pi=Te.loadFile(Ri,!0);if(Pi!==void 0)return Pi}if(ui.nodeName==="CANVAS"){if(ui.width===0||ui.height===0)throw new Error("Given canvas must have data. Canvas width: "+ui.width+", height: "+ui.height);var Fi;switch(li){case"PNG":Fi="image/png";break;case"WEBP":Fi="image/webp";break;case"JPEG":case"JPG":default:Fi="image/jpeg"}return u(ui.toDataURL(Fi,1).split("base64,").pop())}},Tn=function(ui){var li=this.internal.collections.addImage_images;if(li){for(var Ri in li)if(ui===li[Ri].alias)return li[Ri]}},Ln=function(ui,li,Ri){return ui||li||(ui=-96,li=-96),ui<0&&(ui=-1*Ri.width*72/ui/this.internal.scaleFactor),li<0&&(li=-1*Ri.height*72/li/this.internal.scaleFactor),ui===0&&(ui=li*Ri.width/Ri.height),li===0&&(li=ui*Ri.height/Ri.width),[ui,li]},Bn=function(ui,li,Ri,Pi,Fi,Hi){var nr=Ln.call(this,Ri,Pi,Fi),ar=this.internal.getCoordinateString,cr=this.internal.getVerticalCoordinateString,sr=We.call(this);if(Ri=nr[0],Pi=nr[1],sr[Fi.index]=Fi,Hi){Hi*=Math.PI/180;var br=Math.cos(Hi),Ni=Math.sin(Hi),or=function(fr){return fr.toFixed(4)},er=[or(br),or(Ni),or(-1*Ni),or(br),0,0,"cm"]}this.internal.write("q"),Hi?(this.internal.write([1,"0","0",1,ar(ui),cr(li+Pi),"cm"].join(" ")),this.internal.write(er.join(" ")),this.internal.write([ar(Ri),"0","0",ar(Pi),"0","0","cm"].join(" "))):this.internal.write([ar(Ri),"0","0",ar(Pi),ar(ui),cr(li+Pi),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Fi.index+" Do"),this.internal.write("Q")},ti=Te.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Te.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ni=Te.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ii=Te.__addimage__.sHashCode=function(ui){var li,Ri,Pi=0;if(typeof ui=="string")for(Ri=ui.length,li=0;li<Ri;li++)Pi=(Pi<<5)-Pi+ui.charCodeAt(li),Pi|=0;else if(vi(ui))for(Ri=ui.byteLength/2,li=0;li<Ri;li++)Pi=(Pi<<5)-Pi+ui[li],Pi|=0;return Pi},si=Te.__addimage__.validateStringAsBase64=function(ui){(ui=ui||"").toString().trim();var li=!0;return ui.length===0&&(li=!1),ui.length%4!=0&&(li=!1),/^[A-Za-z0-9+/]+$/.test(ui.substr(0,ui.length-2))===!1&&(li=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ui.substr(-2))===!1&&(li=!1),li},oi=Te.__addimage__.extractImageFromDataUrl=function(ui){var li=(ui=ui||"").split("base64,"),Ri=null;if(li.length===2){var Pi=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(li[0]);Array.isArray(Pi)&&(Ri={mimeType:Pi[1],charset:Pi[2],data:li[1]})}return Ri},ci=Te.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Te.__addimage__.isArrayBuffer=function(ui){return ci()&&ui instanceof ArrayBuffer};var vi=Te.__addimage__.isArrayBufferView=function(ui){return ci()&&typeof Uint32Array<"u"&&(ui instanceof Int8Array||ui instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ui instanceof Uint8ClampedArray||ui instanceof Int16Array||ui instanceof Uint16Array||ui instanceof Int32Array||ui instanceof Uint32Array||ui instanceof Float32Array||ui instanceof Float64Array)},pi=Te.__addimage__.binaryStringToUint8Array=function(ui){for(var li=ui.length,Ri=new Uint8Array(li),Pi=0;Pi<li;Pi++)Ri[Pi]=ui.charCodeAt(Pi);return Ri},fi=Te.__addimage__.arrayBufferToBinaryString=function(ui){for(var li="",Ri=vi(ui)?ui:new Uint8Array(ui),Pi=0;Pi<Ri.length;Pi+=8192)li+=String.fromCharCode.apply(null,Ri.subarray(Pi,Pi+8192));return li};Te.addImage=function(){var ui,li,Ri,Pi,Fi,Hi,nr,ar,cr;if(typeof arguments[1]=="number"?(li=e,Ri=arguments[1],Pi=arguments[2],Fi=arguments[3],Hi=arguments[4],nr=arguments[5],ar=arguments[6],cr=arguments[7]):(li=arguments[1],Ri=arguments[2],Pi=arguments[3],Fi=arguments[4],Hi=arguments[5],nr=arguments[6],ar=arguments[7],cr=arguments[8]),_typeof(ui=arguments[0])==="object"&&!En(ui)&&"imageData"in ui){var sr=ui;ui=sr.imageData,li=sr.format||li||e,Ri=sr.x||Ri||0,Pi=sr.y||Pi||0,Fi=sr.w||sr.width||Fi,Hi=sr.h||sr.height||Hi,nr=sr.alias||nr,ar=sr.compression||ar,cr=sr.rotation||sr.angle||cr}var br=this.internal.getFilters();if(ar===void 0&&br.indexOf("FlateEncode")!==-1&&(ar="SLOW"),isNaN(Ri)||isNaN(Pi))throw new Error("Invalid coordinates passed to jsPDF.addImage");He.call(this);var Ni=Mi.call(this,ui,li,nr,ar);return Bn.call(this,Ri,Pi,Fi,Hi,Ni,cr),this};var Mi=function(ui,li,Ri,Pi){var Fi,Hi,nr;if(typeof ui=="string"&&Oe(ui)===e){ui=unescape(ui);var ar=Oi(ui,!1);(ar!==""||(ar=Te.loadFile(ui,!0))!==void 0)&&(ui=ar)}if(En(ui)&&(ui=Sn(ui,li)),li=Oe(ui,li),!An(li))throw new Error("addImage does not support files of type '"+li+"', please ensure that a plugin for '"+li+"' support is added.");if(((nr=Ri)==null||nr.length===0)&&(Ri=function(cr){return typeof cr=="string"||vi(cr)?ii(cr):vi(cr.data)?ii(cr.data):null}(ui)),(Fi=Tn.call(this,Ri))||(ci()&&(ui instanceof Uint8Array||li==="RGBA"||(Hi=ui,ui=pi(ui))),Fi=this["process"+li.toUpperCase()](ui,Cn.call(this),Ri,function(cr){return cr&&typeof cr=="string"&&(cr=cr.toUpperCase()),cr in Te.image_compression?cr:ni.NONE}(Pi),Hi)),!Fi)throw new Error("An unknown error occurred whilst processing the image.");return Fi},Oi=Te.__addimage__.convertBase64ToBinaryString=function(ui,li){var Ri;li=typeof li!="boolean"||li;var Pi,Fi="";if(typeof ui=="string"){Pi=(Ri=oi(ui))!==null?Ri.data:ui;try{Fi=u(Pi)}catch(Hi){if(li)throw si(Pi)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Hi.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Fi};Te.getImageProperties=function(ui){var li,Ri,Pi="";if(En(ui)&&(ui=Sn(ui)),typeof ui=="string"&&Oe(ui)===e&&((Pi=Oi(ui,!1))===""&&(Pi=Te.loadFile(ui)||""),ui=Pi),Ri=Oe(ui),!An(Ri))throw new Error("addImage does not support files of type '"+Ri+"', please ensure that a plugin for '"+Ri+"' support is added.");if(!ci()||ui instanceof Uint8Array||(ui=pi(ui)),!(li=this["process"+Ri.toUpperCase()](ui)))throw new Error("An unknown error occurred whilst processing the image");return li.fileType=Ri,li}})(E.API),function(Te){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Te.events.push(["putPage",function(t){for(var Oe,ke,Be,Ue=this.internal.getCoordinateString,He=this.internal.getVerticalCoordinateString,We=this.internal.getPageInfoByObjId(t.objId),Cn=t.pageContext.annotations,An=!1,En=0;En<Cn.length&&!An;En++)switch((Oe=Cn[En]).type){case"link":(e(Oe.options.url)||e(Oe.options.pageNumber))&&(An=!0);break;case"reference":case"text":case"freetext":An=!0}if(An!=0){this.internal.write("/Annots [");for(var Sn=0;Sn<Cn.length;Sn++){Oe=Cn[Sn];var Tn=this.internal.pdfEscape,Ln=this.internal.getEncryptor(t.objId);switch(Oe.type){case"reference":this.internal.write(" "+Oe.object.objId+" 0 R ");break;case"text":var Bn=this.internal.newAdditionalObject(),ti=this.internal.newAdditionalObject(),ni=this.internal.getEncryptor(Bn.objId),ii=Oe.title||"Note";Be="<</Type /Annot /Subtype /Text "+(ke="/Rect ["+Ue(Oe.bounds.x)+" "+He(Oe.bounds.y+Oe.bounds.h)+" "+Ue(Oe.bounds.x+Oe.bounds.w)+" "+He(Oe.bounds.y)+"] ")+"/Contents ("+Tn(ni(Oe.contents))+")",Be+=" /Popup "+ti.objId+" 0 R",Be+=" /P "+We.objId+" 0 R",Be+=" /T ("+Tn(ni(ii))+") >>",Bn.content=Be;var si=Bn.objId+" 0 R";Be="<</Type /Annot /Subtype /Popup "+(ke="/Rect ["+Ue(Oe.bounds.x+30)+" "+He(Oe.bounds.y+Oe.bounds.h)+" "+Ue(Oe.bounds.x+Oe.bounds.w+30)+" "+He(Oe.bounds.y)+"] ")+" /Parent "+si,Oe.open&&(Be+=" /Open true"),Be+=" >>",ti.content=Be,this.internal.write(Bn.objId,"0 R",ti.objId,"0 R");break;case"freetext":ke="/Rect ["+Ue(Oe.bounds.x)+" "+He(Oe.bounds.y)+" "+Ue(Oe.bounds.x+Oe.bounds.w)+" "+He(Oe.bounds.y+Oe.bounds.h)+"] ";var oi=Oe.color||"#000000";Be="<</Type /Annot /Subtype /FreeText "+ke+"/Contents ("+Tn(Ln(Oe.contents))+")",Be+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+oi+")",Be+=" /Border [0 0 0]",Be+=" >>",this.internal.write(Be);break;case"link":if(Oe.options.name){var ci=this.annotations._nameMap[Oe.options.name];Oe.options.pageNumber=ci.page,Oe.options.top=ci.y}else Oe.options.top||(Oe.options.top=0);if(ke="/Rect ["+Oe.finalBounds.x+" "+Oe.finalBounds.y+" "+Oe.finalBounds.w+" "+Oe.finalBounds.h+"] ",Be="",Oe.options.url)Be="<</Type /Annot /Subtype /Link "+ke+"/Border [0 0 0] /A <</S /URI /URI ("+Tn(Ln(Oe.options.url))+") >>";else if(Oe.options.pageNumber)switch(Be="<</Type /Annot /Subtype /Link "+ke+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Oe.options.pageNumber).objId+" 0 R",Oe.options.magFactor=Oe.options.magFactor||"XYZ",Oe.options.magFactor){case"Fit":Be+=" /Fit]";break;case"FitH":Be+=" /FitH "+Oe.options.top+"]";break;case"FitV":Oe.options.left=Oe.options.left||0,Be+=" /FitV "+Oe.options.left+"]";break;case"XYZ":default:var vi=He(Oe.options.top);Oe.options.left=Oe.options.left||0,Oe.options.zoom===void 0&&(Oe.options.zoom=0),Be+=" /XYZ "+Oe.options.left+" "+vi+" "+Oe.options.zoom+"]"}Be!=""&&(Be+=" >>",this.internal.write(Be))}}this.internal.write("]")}}]),Te.createAnnotation=function(t){var Oe=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":Oe.pageContext.annotations.push(t)}},Te.link=function(t,Oe,ke,Be,Ue){var He=this.internal.getCurrentPageInfo(),We=this.internal.getCoordinateString,Cn=this.internal.getVerticalCoordinateString;He.pageContext.annotations.push({finalBounds:{x:We(t),y:Cn(Oe),w:We(t+ke),h:Cn(Oe+Be)},options:Ue,type:"link"})},Te.textWithLink=function(t,Oe,ke,Be){var Ue,He,We=this.getTextWidth(t),Cn=this.internal.getLineHeight()/this.internal.scaleFactor;if(Be.maxWidth!==void 0){He=Be.maxWidth;var An=this.splitTextToSize(t,He).length;Ue=Math.ceil(Cn*An)}else He=We,Ue=Cn;return this.text(t,Oe,ke,Be),ke+=.2*Cn,Be.align==="center"&&(Oe-=We/2),Be.align==="right"&&(Oe-=We),this.link(Oe,ke-Cn,He,Ue,Be),We},Te.getTextWidth=function(t){var Oe=this.internal.getFontSize();return this.getStringUnitWidth(t)*Oe/this.internal.scaleFactor}}(E.API),function(Te){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Oe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},ke=[1570,1571,1573,1575];Te.__arabicParser__={};var Be=Te.__arabicParser__.isInArabicSubstitutionA=function(Bn){return e[Bn.charCodeAt(0)]!==void 0},Ue=Te.__arabicParser__.isArabicLetter=function(Bn){return typeof Bn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Bn)},He=Te.__arabicParser__.isArabicEndLetter=function(Bn){return Ue(Bn)&&Be(Bn)&&e[Bn.charCodeAt(0)].length<=2},We=Te.__arabicParser__.isArabicAlfLetter=function(Bn){return Ue(Bn)&&ke.indexOf(Bn.charCodeAt(0))>=0};Te.__arabicParser__.arabicLetterHasIsolatedForm=function(Bn){return Ue(Bn)&&Be(Bn)&&e[Bn.charCodeAt(0)].length>=1};var Cn=Te.__arabicParser__.arabicLetterHasFinalForm=function(Bn){return Ue(Bn)&&Be(Bn)&&e[Bn.charCodeAt(0)].length>=2};Te.__arabicParser__.arabicLetterHasInitialForm=function(Bn){return Ue(Bn)&&Be(Bn)&&e[Bn.charCodeAt(0)].length>=3};var An=Te.__arabicParser__.arabicLetterHasMedialForm=function(Bn){return Ue(Bn)&&Be(Bn)&&e[Bn.charCodeAt(0)].length==4},En=Te.__arabicParser__.resolveLigatures=function(Bn){var ti=0,ni=t,ii="",si=0;for(ti=0;ti<Bn.length;ti+=1)ni[Bn.charCodeAt(ti)]!==void 0?(si++,typeof(ni=ni[Bn.charCodeAt(ti)])=="number"&&(ii+=String.fromCharCode(ni),ni=t,si=0),ti===Bn.length-1&&(ni=t,ii+=Bn.charAt(ti-(si-1)),ti-=si-1,si=0)):(ni=t,ii+=Bn.charAt(ti-si),ti-=si,si=0);return ii};Te.__arabicParser__.isArabicDiacritic=function(Bn){return Bn!==void 0&&Oe[Bn.charCodeAt(0)]!==void 0};var Sn=Te.__arabicParser__.getCorrectForm=function(Bn,ti,ni){return Ue(Bn)?Be(Bn)===!1?-1:!Cn(Bn)||!Ue(ti)&&!Ue(ni)||!Ue(ni)&&He(ti)||He(Bn)&&!Ue(ti)||He(Bn)&&We(ti)||He(Bn)&&He(ti)?0:An(Bn)&&Ue(ti)&&!He(ti)&&Ue(ni)&&Cn(ni)?3:He(Bn)||!Ue(ni)?1:2:-1},Tn=function(Bn){var ti=0,ni=0,ii=0,si="",oi="",ci="",vi=(Bn=Bn||"").split("\\s+"),pi=[];for(ti=0;ti<vi.length;ti+=1){for(pi.push(""),ni=0;ni<vi[ti].length;ni+=1)si=vi[ti][ni],oi=vi[ti][ni-1],ci=vi[ti][ni+1],Ue(si)?(ii=Sn(si,oi,ci),pi[ti]+=ii!==-1?String.fromCharCode(e[si.charCodeAt(0)][ii]):si):pi[ti]+=si;pi[ti]=En(pi[ti])}return pi.join(" ")},Ln=Te.__arabicParser__.processArabic=Te.processArabic=function(){var Bn,ti=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ni=[];if(Array.isArray(ti)){var ii=0;for(ni=[],ii=0;ii<ti.length;ii+=1)Array.isArray(ti[ii])?ni.push([Tn(ti[ii][0]),ti[ii][1],ti[ii][2]]):ni.push([Tn(ti[ii])]);Bn=ni}else Bn=Tn(ti);return typeof arguments[0]=="string"?Bn:(arguments[0].text=Bn,arguments[0])};Te.events.push(["preProcessText",Ln])}(E.API),E.API.autoPrint=function(Te){var e;switch((Te=Te||{}).variant=Te.variant||"non-conform",Te.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(Te){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(He){t=He}});var Oe=150;Object.defineProperty(this,"width",{get:function(){return Oe},set:function(He){Oe=isNaN(He)||Number.isInteger(He)===!1||He<0?150:He,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Oe+1)}});var ke=300;Object.defineProperty(this,"height",{get:function(){return ke},set:function(He){ke=isNaN(He)||Number.isInteger(He)===!1||He<0?300:He,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=ke+1)}});var Be=[];Object.defineProperty(this,"childNodes",{get:function(){return Be},set:function(He){Be=He}});var Ue={};Object.defineProperty(this,"style",{get:function(){return Ue},set:function(He){Ue=He}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,Oe){var ke;if((t=t||"2d")!=="2d")return null;for(ke in Oe)this.pdf.context2d.hasOwnProperty(ke)&&(this.pdf.context2d[ke]=Oe[ke]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Te.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(Te){var e={left:0,top:0,bottom:0,right:0},t=!1,Oe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),ke.call(this))},ke=function(){this.internal.__cell__.lastCell=new Be,this.internal.__cell__.pages=1},Be=function(){var We=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function(Bn){We=Bn}});var Cn=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Cn},set:function(Bn){Cn=Bn}});var An=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return An},set:function(Bn){An=Bn}});var En=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return En},set:function(Bn){En=Bn}});var Sn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Sn},set:function(Bn){Sn=Bn}});var Tn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Tn},set:function(Bn){Tn=Bn}});var Ln=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Ln},set:function(Bn){Ln=Bn}}),this};Be.prototype.clone=function(){return new Be(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Be.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Te.setHeaderFunction=function(We){return Oe.call(this),this.internal.__cell__.headerFunction=typeof We=="function"?We:void 0,this},Te.getTextDimensions=function(We,Cn){Oe.call(this);var An=(Cn=Cn||{}).fontSize||this.getFontSize(),En=Cn.font||this.getFont(),Sn=Cn.scaleFactor||this.internal.scaleFactor,Tn=0,Ln=0,Bn=0,ti=this;if(!Array.isArray(We)&&typeof We!="string"){if(typeof We!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");We=String(We)}var ni=Cn.maxWidth;ni>0?typeof We=="string"?We=this.splitTextToSize(We,ni):Object.prototype.toString.call(We)==="[object Array]"&&(We=We.reduce(function(si,oi){return si.concat(ti.splitTextToSize(oi,ni))},[])):We=Array.isArray(We)?We:[We];for(var ii=0;ii<We.length;ii++)Tn<(Bn=this.getStringUnitWidth(We[ii],{font:En})*An)&&(Tn=Bn);return Tn!==0&&(Ln=We.length),{w:Tn/=Sn,h:Math.max((Ln*An*this.getLineHeightFactor()-An*(this.getLineHeightFactor()-1))/Sn,0)}},Te.cellAddPage=function(){Oe.call(this),this.addPage();var We=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Be(We.left,We.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Ue=Te.cell=function(){var We;We=arguments[0]instanceof Be?arguments[0]:new Be(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Oe.call(this);var Cn=this.internal.__cell__.lastCell,An=this.internal.__cell__.padding,En=this.internal.__cell__.margins||e,Sn=this.internal.__cell__.tableHeaderRow,Tn=this.internal.__cell__.printHeaders;return Cn.lineNumber!==void 0&&(Cn.lineNumber===We.lineNumber?(We.x=(Cn.x||0)+(Cn.width||0),We.y=Cn.y||0):Cn.y+Cn.height+We.height+En.bottom>this.getPageHeight()?(this.cellAddPage(),We.y=En.top,Tn&&Sn&&(this.printHeaderRow(We.lineNumber,!0),We.y+=Sn[0].height)):We.y=Cn.y+Cn.height||We.y),We.text[0]!==void 0&&(this.rect(We.x,We.y,We.width,We.height,t===!0?"FD":void 0),We.align==="right"?this.text(We.text,We.x+We.width-An,We.y+An,{align:"right",baseline:"top"}):We.align==="center"?this.text(We.text,We.x+We.width/2,We.y+An,{align:"center",baseline:"top",maxWidth:We.width-An-An}):this.text(We.text,We.x+An,We.y+An,{align:"left",baseline:"top",maxWidth:We.width-An-An})),this.internal.__cell__.lastCell=We,this};Te.table=function(We,Cn,An,En,Sn){if(Oe.call(this),!An)throw new Error("No data for PDF table.");var Tn,Ln,Bn,ti,ni=[],ii=[],si=[],oi={},ci={},vi=[],pi=[],fi=(Sn=Sn||{}).autoSize||!1,Mi=Sn.printHeaders!==!1,Oi=Sn.css&&Sn.css["font-size"]!==void 0?16*Sn.css["font-size"]:Sn.fontSize||12,ui=Sn.margins||Object.assign({width:this.getPageWidth()},e),li=typeof Sn.padding=="number"?Sn.padding:3,Ri=Sn.headerBackgroundColor||"#c8c8c8",Pi=Sn.headerTextColor||"#000";if(ke.call(this),this.internal.__cell__.printHeaders=Mi,this.internal.__cell__.margins=ui,this.internal.__cell__.table_font_size=Oi,this.internal.__cell__.padding=li,this.internal.__cell__.headerBackgroundColor=Ri,this.internal.__cell__.headerTextColor=Pi,this.setFontSize(Oi),En==null)ii=ni=Object.keys(An[0]),si=ni.map(function(){return"left"});else if(Array.isArray(En)&&_typeof(En[0])==="object")for(ni=En.map(function(sr){return sr.name}),ii=En.map(function(sr){return sr.prompt||sr.name||""}),si=En.map(function(sr){return sr.align||"left"}),Tn=0;Tn<En.length;Tn+=1)ci[En[Tn].name]=En[Tn].width*(19.049976/25.4);else Array.isArray(En)&&typeof En[0]=="string"&&(ii=ni=En,si=ni.map(function(){return"left"}));if(fi||Array.isArray(En)&&typeof En[0]=="string")for(Tn=0;Tn<ni.length;Tn+=1){for(oi[ti=ni[Tn]]=An.map(function(sr){return sr[ti]}),this.setFont(void 0,"bold"),vi.push(this.getTextDimensions(ii[Tn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Ln=oi[ti],this.setFont(void 0,"normal"),Bn=0;Bn<Ln.length;Bn+=1)vi.push(this.getTextDimensions(Ln[Bn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ci[ti]=Math.max.apply(null,vi)+li+li,vi=[]}if(Mi){var Fi={};for(Tn=0;Tn<ni.length;Tn+=1)Fi[ni[Tn]]={},Fi[ni[Tn]].text=ii[Tn],Fi[ni[Tn]].align=si[Tn];var Hi=He.call(this,Fi,ci);pi=ni.map(function(sr){return new Be(We,Cn,ci[sr],Hi,Fi[sr].text,void 0,Fi[sr].align)}),this.setTableHeaderRow(pi),this.printHeaderRow(1,!1)}var nr=En.reduce(function(sr,br){return sr[br.name]=br.align,sr},{});for(Tn=0;Tn<An.length;Tn+=1){"rowStart"in Sn&&Sn.rowStart instanceof Function&&Sn.rowStart({row:Tn,data:An[Tn]},this);var ar=He.call(this,An[Tn],ci);for(Bn=0;Bn<ni.length;Bn+=1){var cr=An[Tn][ni[Bn]];"cellStart"in Sn&&Sn.cellStart instanceof Function&&Sn.cellStart({row:Tn,col:Bn,data:cr},this),Ue.call(this,new Be(We,Cn,ci[ni[Bn]],ar,cr,Tn+2,nr[ni[Bn]]))}}return this.internal.__cell__.table_x=We,this.internal.__cell__.table_y=Cn,this};var He=function(We,Cn){var An=this.internal.__cell__.padding,En=this.internal.__cell__.table_font_size,Sn=this.internal.scaleFactor;return Object.keys(We).map(function(Tn){var Ln=We[Tn];return this.splitTextToSize(Ln.hasOwnProperty("text")?Ln.text:Ln,Cn[Tn]-An-An)},this).map(function(Tn){return this.getLineHeightFactor()*Tn.length*En/Sn+An+An},this).reduce(function(Tn,Ln){return Math.max(Tn,Ln)},0)};Te.setTableHeaderRow=function(We){Oe.call(this),this.internal.__cell__.tableHeaderRow=We},Te.printHeaderRow=function(We,Cn){if(Oe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var An;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var En=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Be(En[0],En[1],En[2],En[3],void 0,-1)}this.setFont(void 0,"bold");for(var Sn=[],Tn=0;Tn<this.internal.__cell__.tableHeaderRow.length;Tn+=1){An=this.internal.__cell__.tableHeaderRow[Tn].clone(),Cn&&(An.y=this.internal.__cell__.margins.top||0,Sn.push(An)),An.lineNumber=We;var Ln=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Ue.call(this,An),this.setTextColor(Ln)}Sn.length>0&&this.setTableHeaderRow(Sn),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Te){var e=Te.family.replace(/"|'/g,"").toLowerCase(),t=function(Be){return Pt[Be=Be||"normal"]?Be:"normal"}(Te.style),Oe=function(Be){if(!Be)return 400;if(typeof Be=="number")return Be>=100&&Be<=900&&Be%100==0?Be:400;if(/^\d00$/.test(Be))return parseInt(Be);switch(Be){case"bold":return 700;case"normal":default:return 400}}(Te.weight),ke=function(Be){return typeof It[Be=Be||"normal"]=="number"?Be:"normal"}(Te.stretch);return{family:e,style:t,weight:Oe,stretch:ke,src:Te.src||[],ref:Te.ref||{name:e,style:[ke,t,Oe].join(" ")}}}function Ot(Te,e,t,Oe){var ke;for(ke=t;ke>=0&&ke<e.length;ke+=Oe)if(Te[e[ke]])return Te[e[ke]];for(ke=t;ke>=0&&ke<e.length;ke-=Oe)if(Te[e[ke]])return Te[e[ke]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Te){return[Te.stretch,Te.style,Te.weight,Te.family].join(" ")}function qt(Te,e,t){for(var Oe=(t=t||{}).defaultFontFamily||"times",ke=Object.assign({},Bt,t.genericFontFamilies||{}),Be=null,Ue=null,He=0;He<e.length;++He)if(ke[(Be=jt(e[He])).family]&&(Be.family=ke[Be.family]),Te.hasOwnProperty(Be.family)){Ue=Te[Be.family];break}if(!(Ue=Ue||Te[Oe]))throw new Error("Could not find a font-family for the rule '"+Et(Be)+"' and default family '"+Oe+"'.");if(Ue=function(We,Cn){if(Cn[We])return Cn[We];var An=It[We],En=An<=It.normal?-1:1,Sn=Ot(Cn,kt,An,En);if(!Sn)throw new Error("Could not find a matching font-stretch value for "+We);return Sn}(Be.stretch,Ue),Ue=function(We,Cn){if(Cn[We])return Cn[We];for(var An=Pt[We],En=0;En<An.length;++En)if(Cn[An[En]])return Cn[An[En]];throw new Error("Could not find a matching font-style for "+We)}(Be.style,Ue),!(Ue=function(We,Cn){if(Cn[We])return Cn[We];if(We===400&&Cn[500])return Cn[500];if(We===500&&Cn[400])return Cn[400];var An=Ct[We],En=Ot(Cn,Ft,An,We<400?-1:1);if(!En)throw new Error("Could not find a matching font-weight for value "+We);return En}(Be.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+Et(Be)+"'.");return Ue}function Dt(Te){return Te.trimLeft()}function Rt(Te,e){for(var t=0;t<Te.length;){if(Te.charAt(t)===e)return[Te.substring(0,t),Te.substring(t+1)];t+=1}return null}function Tt(Te){var e=Te.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],Te.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Te){var e,t,Oe,ke,Be,Ue,He,We,Cn,An=function(Ni){return Ni=Ni||{},this.isStrokeTransparent=Ni.isStrokeTransparent||!1,this.strokeOpacity=Ni.strokeOpacity||1,this.strokeStyle=Ni.strokeStyle||"#000000",this.fillStyle=Ni.fillStyle||"#000000",this.isFillTransparent=Ni.isFillTransparent||!1,this.fillOpacity=Ni.fillOpacity||1,this.font=Ni.font||"10px sans-serif",this.textBaseline=Ni.textBaseline||"alphabetic",this.textAlign=Ni.textAlign||"left",this.lineWidth=Ni.lineWidth||1,this.lineJoin=Ni.lineJoin||"miter",this.lineCap=Ni.lineCap||"butt",this.path=Ni.path||[],this.transform=Ni.transform!==void 0?Ni.transform.clone():new We,this.globalCompositeOperation=Ni.globalCompositeOperation||"normal",this.globalAlpha=Ni.globalAlpha||1,this.clip_path=Ni.clip_path||[],this.currentPoint=Ni.currentPoint||new Ue,this.miterLimit=Ni.miterLimit||10,this.lastPoint=Ni.lastPoint||new Ue,this.lineDashOffset=Ni.lineDashOffset||0,this.lineDash=Ni.lineDash||[],this.margin=Ni.margin||[0,0,0,0],this.prevPageLastElemOffset=Ni.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ni.ignoreClearRect!="boolean"||Ni.ignoreClearRect,this};Te.events.push(["initialized",function(){this.context2d=new En(this),e=this.internal.f2,t=this.internal.getCoordinateString,Oe=this.internal.getVerticalCoordinateString,ke=this.internal.getHorizontalCoordinate,Be=this.internal.getVerticalCoordinate,Ue=this.internal.Point,He=this.internal.Rectangle,We=this.internal.Matrix,Cn=new An}]);var En=function(Ni){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var or=Ni;Object.defineProperty(this,"pdf",{get:function(){return or}});var er=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return er},set:function(ur){er=!!ur}});var fr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fr},set:function(ur){fr=!!ur}});var mr=0;Object.defineProperty(this,"posX",{get:function(){return mr},set:function(ur){isNaN(ur)||(mr=ur)}});var hr=0;Object.defineProperty(this,"posY",{get:function(){return hr},set:function(ur){isNaN(ur)||(hr=ur)}}),Object.defineProperty(this,"margin",{get:function(){return Cn.margin},set:function(ur){var Ki;typeof ur=="number"?Ki=[ur,ur,ur,ur]:((Ki=new Array(4))[0]=ur[0],Ki[1]=ur.length>=2?ur[1]:Ki[0],Ki[2]=ur.length>=3?ur[2]:Ki[0],Ki[3]=ur.length>=4?ur[3]:Ki[1]),Cn.margin=Ki}});var vr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return vr},set:function(ur){vr=ur}});var _r=0;Object.defineProperty(this,"lastBreak",{get:function(){return _r},set:function(ur){_r=ur}});var Ar=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ar},set:function(ur){Ar=ur}}),Object.defineProperty(this,"ctx",{get:function(){return Cn},set:function(ur){ur instanceof An&&(Cn=ur)}}),Object.defineProperty(this,"path",{get:function(){return Cn.path},set:function(ur){Cn.path=ur}});var Vr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Vr},set:function(ur){Vr=ur}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ur){var Ki;Ki=Sn(ur),this.ctx.fillStyle=Ki.style,this.ctx.isFillTransparent=Ki.a===0,this.ctx.fillOpacity=Ki.a,this.pdf.setFillColor(Ki.r,Ki.g,Ki.b,{a:Ki.a}),this.pdf.setTextColor(Ki.r,Ki.g,Ki.b,{a:Ki.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ur){var Ki=Sn(ur);this.ctx.strokeStyle=Ki.style,this.ctx.isStrokeTransparent=Ki.a===0,this.ctx.strokeOpacity=Ki.a,Ki.a===0?this.pdf.setDrawColor(255,255,255):(Ki.a,this.pdf.setDrawColor(Ki.r,Ki.g,Ki.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ur){["butt","round","square"].indexOf(ur)!==-1&&(this.ctx.lineCap=ur,this.pdf.setLineCap(ur))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ur){isNaN(ur)||(this.ctx.lineWidth=ur,this.pdf.setLineWidth(ur))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ur){["bevel","round","miter"].indexOf(ur)!==-1&&(this.ctx.lineJoin=ur,this.pdf.setLineJoin(ur))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ur){isNaN(ur)||(this.ctx.miterLimit=ur,this.pdf.setMiterLimit(ur))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ur){this.ctx.textBaseline=ur}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ur){["right","end","center","left","start"].indexOf(ur)!==-1&&(this.ctx.textAlign=ur)}});var Wr=null;function tr(ur,Ki){if(Wr===null){var Nr=function(Or){var Ir=[];return Object.keys(Or).forEach(function(Mr){Or[Mr].forEach(function(Tr){var wr=null;switch(Tr){case"bold":wr={family:Mr,weight:"bold"};break;case"italic":wr={family:Mr,style:"italic"};break;case"bolditalic":wr={family:Mr,weight:"bold",style:"italic"};break;case"":case"normal":wr={family:Mr}}wr!==null&&(wr.ref={name:Mr,style:Tr},Ir.push(wr))})}),Ir}(ur.getFontList());Wr=function(Or){for(var Ir={},Mr=0;Mr<Or.length;++Mr){var Tr=jt(Or[Mr]),wr=Tr.family,Cr=Tr.stretch,Er=Tr.style,Sr=Tr.weight;Ir[wr]=Ir[wr]||{},Ir[wr][Cr]=Ir[wr][Cr]||{},Ir[wr][Cr][Er]=Ir[wr][Cr][Er]||{},Ir[wr][Cr][Er][Sr]=Tr}return Ir}(Nr.concat(Ki))}return Wr}var pr=null;Object.defineProperty(this,"fontFaces",{get:function(){return pr},set:function(ur){Wr=null,pr=ur}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ur){var Ki;if(this.ctx.font=ur,(Ki=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ur))!==null){var Nr=Ki[1],Or=(Ki[2],Ki[3]),Ir=Ki[4],Mr=(Ki[5],Ki[6]),Tr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ir)[2];Ir=Math.floor(Tr==="px"?parseFloat(Ir)*this.pdf.internal.scaleFactor:Tr==="em"?parseFloat(Ir)*this.pdf.getFontSize():parseFloat(Ir)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ir);var wr=function(Hr){var as,Kr,Ss=[],ms=Hr.trim();if(ms==="")return Wt;if(ms in Mt)return[Mt[ms]];for(;ms!=="";){switch(Kr=null,as=(ms=Dt(ms)).charAt(0)){case'"':case"'":Kr=Rt(ms.substring(1),as);break;default:Kr=Tt(ms)}if(Kr===null||(Ss.push(Kr[0]),(ms=Dt(Kr[1]))!==""&&ms.charAt(0)!==","))return Wt;ms=ms.replace(/^,/,"")}return Ss}(Mr);if(this.fontFaces){var Cr=qt(tr(this.pdf,this.fontFaces),wr.map(function(Hr){return{family:Hr,stretch:"normal",weight:Or,style:Nr}}));this.pdf.setFont(Cr.ref.name,Cr.ref.style)}else{var Er="";(Or==="bold"||parseInt(Or,10)>=700||Nr==="bold")&&(Er="bold"),Nr==="italic"&&(Er+="italic"),Er.length===0&&(Er="normal");for(var Sr="",Gr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zr=0;zr<wr.length;zr++){if(this.pdf.internal.getFont(wr[zr],Er,{noFallback:!0,disableWarning:!0})!==void 0){Sr=wr[zr];break}if(Er==="bolditalic"&&this.pdf.internal.getFont(wr[zr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Sr=wr[zr],Er="bold";else if(this.pdf.internal.getFont(wr[zr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Sr=wr[zr],Er="normal";break}}if(Sr===""){for(var $r=0;$r<wr.length;$r++)if(Gr[wr[$r]]){Sr=Gr[wr[$r]];break}}Sr=Sr===""?"Times":Sr,this.pdf.setFont(Sr,Er)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ur){this.ctx.globalCompositeOperation=ur}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ur){this.ctx.globalAlpha=ur}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ur){this.ctx.lineDashOffset=ur,br.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ur){this.ctx.lineDash=ur,br.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ur){this.ctx.ignoreClearRect=!!ur}})};En.prototype.setLineDash=function(Ni){this.lineDash=Ni},En.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},En.prototype.fill=function(){oi.call(this,"fill",!1)},En.prototype.stroke=function(){oi.call(this,"stroke",!1)},En.prototype.beginPath=function(){this.path=[{type:"begin"}]},En.prototype.moveTo=function(Ni,or){if(isNaN(Ni)||isNaN(or))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var er=this.ctx.transform.applyToPoint(new Ue(Ni,or));this.path.push({type:"mt",x:er.x,y:er.y}),this.ctx.lastPoint=new Ue(Ni,or)},En.prototype.closePath=function(){var Ni=new Ue(0,0),or=0;for(or=this.path.length-1;or!==-1;or--)if(this.path[or].type==="begin"&&_typeof(this.path[or+1])==="object"&&typeof this.path[or+1].x=="number"){Ni=new Ue(this.path[or+1].x,this.path[or+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Ue(Ni.x,Ni.y)},En.prototype.lineTo=function(Ni,or){if(isNaN(Ni)||isNaN(or))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var er=this.ctx.transform.applyToPoint(new Ue(Ni,or));this.path.push({type:"lt",x:er.x,y:er.y}),this.ctx.lastPoint=new Ue(er.x,er.y)},En.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),oi.call(this,null,!0)},En.prototype.quadraticCurveTo=function(Ni,or,er,fr){if(isNaN(er)||isNaN(fr)||isNaN(Ni)||isNaN(or))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var mr=this.ctx.transform.applyToPoint(new Ue(er,fr)),hr=this.ctx.transform.applyToPoint(new Ue(Ni,or));this.path.push({type:"qct",x1:hr.x,y1:hr.y,x:mr.x,y:mr.y}),this.ctx.lastPoint=new Ue(mr.x,mr.y)},En.prototype.bezierCurveTo=function(Ni,or,er,fr,mr,hr){if(isNaN(mr)||isNaN(hr)||isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var vr=this.ctx.transform.applyToPoint(new Ue(mr,hr)),_r=this.ctx.transform.applyToPoint(new Ue(Ni,or)),Ar=this.ctx.transform.applyToPoint(new Ue(er,fr));this.path.push({type:"bct",x1:_r.x,y1:_r.y,x2:Ar.x,y2:Ar.y,x:vr.x,y:vr.y}),this.ctx.lastPoint=new Ue(vr.x,vr.y)},En.prototype.arc=function(Ni,or,er,fr,mr,hr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr)||isNaN(mr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(hr=!!hr,!this.ctx.transform.isIdentity){var vr=this.ctx.transform.applyToPoint(new Ue(Ni,or));Ni=vr.x,or=vr.y;var _r=this.ctx.transform.applyToPoint(new Ue(0,er)),Ar=this.ctx.transform.applyToPoint(new Ue(0,0));er=Math.sqrt(Math.pow(_r.x-Ar.x,2)+Math.pow(_r.y-Ar.y,2))}Math.abs(mr-fr)>=2*Math.PI&&(fr=0,mr=2*Math.PI),this.path.push({type:"arc",x:Ni,y:or,radius:er,startAngle:fr,endAngle:mr,counterclockwise:hr})},En.prototype.arcTo=function(Ni,or,er,fr,mr){throw new Error("arcTo not implemented.")},En.prototype.rect=function(Ni,or,er,fr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ni,or),this.lineTo(Ni+er,or),this.lineTo(Ni+er,or+fr),this.lineTo(Ni,or+fr),this.lineTo(Ni,or),this.lineTo(Ni+er,or),this.lineTo(Ni,or)},En.prototype.fillRect=function(Ni,or,er,fr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Tn.call(this)){var mr={};this.lineCap!=="butt"&&(mr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(mr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ni,or,er,fr),this.fill(),mr.hasOwnProperty("lineCap")&&(this.lineCap=mr.lineCap),mr.hasOwnProperty("lineJoin")&&(this.lineJoin=mr.lineJoin)}},En.prototype.strokeRect=function(Ni,or,er,fr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Ln.call(this)||(this.beginPath(),this.rect(Ni,or,er,fr),this.stroke())},En.prototype.clearRect=function(Ni,or,er,fr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ni,or,er,fr))},En.prototype.save=function(Ni){Ni=typeof Ni!="boolean"||Ni;for(var or=this.pdf.internal.getCurrentPageInfo().pageNumber,er=0;er<this.pdf.internal.getNumberOfPages();er++)this.pdf.setPage(er+1),this.pdf.internal.out("q");if(this.pdf.setPage(or),Ni){this.ctx.fontSize=this.pdf.internal.getFontSize();var fr=new An(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fr}},En.prototype.restore=function(Ni){Ni=typeof Ni!="boolean"||Ni;for(var or=this.pdf.internal.getCurrentPageInfo().pageNumber,er=0;er<this.pdf.internal.getNumberOfPages();er++)this.pdf.setPage(er+1),this.pdf.internal.out("Q");this.pdf.setPage(or),Ni&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},En.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Sn=function(Ni){var or,er,fr,mr;if(Ni.isCanvasGradient===!0&&(Ni=Ni.getColor()),!Ni)return{r:0,g:0,b:0,a:0,style:Ni};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ni))or=0,er=0,fr=0,mr=0;else{var hr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ni);if(hr!==null)or=parseInt(hr[1]),er=parseInt(hr[2]),fr=parseInt(hr[3]),mr=1;else if((hr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ni))!==null)or=parseInt(hr[1]),er=parseInt(hr[2]),fr=parseInt(hr[3]),mr=parseFloat(hr[4]);else{if(mr=1,typeof Ni=="string"&&Ni.charAt(0)!=="#"){var vr=new f(Ni);Ni=vr.ok?vr.toHex():"#000000"}Ni.length===4?(or=Ni.substring(1,2),or+=or,er=Ni.substring(2,3),er+=er,fr=Ni.substring(3,4),fr+=fr):(or=Ni.substring(1,3),er=Ni.substring(3,5),fr=Ni.substring(5,7)),or=parseInt(or,16),er=parseInt(er,16),fr=parseInt(fr,16)}}return{r:or,g:er,b:fr,a:mr,style:Ni}},Tn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Ln=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};En.prototype.fillText=function(Ni,or,er,fr){if(isNaN(or)||isNaN(er)||typeof Ni!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fr=isNaN(fr)?void 0:fr,!Tn.call(this)){var mr=ar(this.ctx.transform.rotation),hr=this.ctx.transform.scaleX;li.call(this,{text:Ni,x:or,y:er,scale:hr,angle:mr,align:this.textAlign,maxWidth:fr})}},En.prototype.strokeText=function(Ni,or,er,fr){if(isNaN(or)||isNaN(er)||typeof Ni!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Ln.call(this)){fr=isNaN(fr)?void 0:fr;var mr=ar(this.ctx.transform.rotation),hr=this.ctx.transform.scaleX;li.call(this,{text:Ni,x:or,y:er,scale:hr,renderingMode:"stroke",angle:mr,align:this.textAlign,maxWidth:fr})}},En.prototype.measureText=function(Ni){if(typeof Ni!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var or=this.pdf,er=this.pdf.internal.scaleFactor,fr=or.internal.getFontSize(),mr=or.getStringUnitWidth(Ni)*fr/or.internal.scaleFactor,hr=function(vr){var _r=(vr=vr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _r}}),this};return new hr({width:mr*=Math.round(96*er/72*1e4)/1e4})},En.prototype.scale=function(Ni,or){if(isNaN(Ni)||isNaN(or))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var er=new We(Ni,0,0,or,0,0);this.ctx.transform=this.ctx.transform.multiply(er)},En.prototype.rotate=function(Ni){if(isNaN(Ni))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var or=new We(Math.cos(Ni),Math.sin(Ni),-Math.sin(Ni),Math.cos(Ni),0,0);this.ctx.transform=this.ctx.transform.multiply(or)},En.prototype.translate=function(Ni,or){if(isNaN(Ni)||isNaN(or))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var er=new We(1,0,0,1,Ni,or);this.ctx.transform=this.ctx.transform.multiply(er)},En.prototype.transform=function(Ni,or,er,fr,mr,hr){if(isNaN(Ni)||isNaN(or)||isNaN(er)||isNaN(fr)||isNaN(mr)||isNaN(hr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var vr=new We(Ni,or,er,fr,mr,hr);this.ctx.transform=this.ctx.transform.multiply(vr)},En.prototype.setTransform=function(Ni,or,er,fr,mr,hr){Ni=isNaN(Ni)?1:Ni,or=isNaN(or)?0:or,er=isNaN(er)?0:er,fr=isNaN(fr)?1:fr,mr=isNaN(mr)?0:mr,hr=isNaN(hr)?0:hr,this.ctx.transform=new We(Ni,or,er,fr,mr,hr)};var Bn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};En.prototype.drawImage=function(Ni,or,er,fr,mr,hr,vr,_r,Ar){var Vr=this.pdf.getImageProperties(Ni),Wr=1,tr=1,pr=1,ur=1;fr!==void 0&&_r!==void 0&&(pr=_r/fr,ur=Ar/mr,Wr=Vr.width/fr*_r/fr,tr=Vr.height/mr*Ar/mr),hr===void 0&&(hr=or,vr=er,or=0,er=0),fr!==void 0&&_r===void 0&&(_r=fr,Ar=mr),fr===void 0&&_r===void 0&&(_r=Vr.width,Ar=Vr.height);for(var Ki,Nr=this.ctx.transform.decompose(),Or=ar(Nr.rotate.shx),Ir=new We,Mr=(Ir=(Ir=(Ir=Ir.multiply(Nr.translate)).multiply(Nr.skew)).multiply(Nr.scale)).applyToRectangle(new He(hr-or*pr,vr-er*ur,fr*Wr,mr*tr)),Tr=ti.call(this,Mr),wr=[],Cr=0;Cr<Tr.length;Cr+=1)wr.indexOf(Tr[Cr])===-1&&wr.push(Tr[Cr]);if(si(wr),this.autoPaging)for(var Er=wr[0],Sr=wr[wr.length-1],Gr=Er;Gr<Sr+1;Gr++){this.pdf.setPage(Gr);var zr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$r=Gr===1?this.posY+this.margin[0]:this.margin[0],Hr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],as=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kr=Gr===1?0:Hr+(Gr-2)*as;if(this.ctx.clip_path.length!==0){var Ss=this.path;Ki=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(Ki,this.posX+this.margin[3],-Kr+$r+this.ctx.prevPageLastElemOffset),ci.call(this,"fill",!0),this.path=Ss}var ms=JSON.parse(JSON.stringify(Mr));ms=ii([ms],this.posX+this.margin[3],-Kr+$r+this.ctx.prevPageLastElemOffset)[0];var Rs=(Gr>Er||Gr<Sr)&&Bn.call(this);Rs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zr,as,null).clip().discardPath()),this.pdf.addImage(Ni,"JPEG",ms.x,ms.y,ms.w,ms.h,null,null,Or),Rs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ni,"JPEG",Mr.x,Mr.y,Mr.w,Mr.h,null,null,Or)};var ti=function(Ni,or,er){var fr=[];or=or||this.pdf.internal.pageSize.width,er=er||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var mr=this.posY+this.ctx.prevPageLastElemOffset;switch(Ni.type){default:case"mt":case"lt":fr.push(Math.floor((Ni.y+mr)/er)+1);break;case"arc":fr.push(Math.floor((Ni.y+mr-Ni.radius)/er)+1),fr.push(Math.floor((Ni.y+mr+Ni.radius)/er)+1);break;case"qct":var hr=cr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ni.x1,Ni.y1,Ni.x,Ni.y);fr.push(Math.floor((hr.y+mr)/er)+1),fr.push(Math.floor((hr.y+hr.h+mr)/er)+1);break;case"bct":var vr=sr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ni.x1,Ni.y1,Ni.x2,Ni.y2,Ni.x,Ni.y);fr.push(Math.floor((vr.y+mr)/er)+1),fr.push(Math.floor((vr.y+vr.h+mr)/er)+1);break;case"rect":fr.push(Math.floor((Ni.y+mr)/er)+1),fr.push(Math.floor((Ni.y+Ni.h+mr)/er)+1)}for(var _r=0;_r<fr.length;_r+=1)for(;this.pdf.internal.getNumberOfPages()<fr[_r];)ni.call(this);return fr},ni=function(){var Ni=this.fillStyle,or=this.strokeStyle,er=this.font,fr=this.lineCap,mr=this.lineWidth,hr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ni,this.strokeStyle=or,this.font=er,this.lineCap=fr,this.lineWidth=mr,this.lineJoin=hr},ii=function(Ni,or,er){for(var fr=0;fr<Ni.length;fr++)switch(Ni[fr].type){case"bct":Ni[fr].x2+=or,Ni[fr].y2+=er;case"qct":Ni[fr].x1+=or,Ni[fr].y1+=er;case"mt":case"lt":case"arc":default:Ni[fr].x+=or,Ni[fr].y+=er}return Ni},si=function(Ni){return Ni.sort(function(or,er){return or-er})},oi=function(Ni,or){for(var er,fr,mr=this.fillStyle,hr=this.strokeStyle,vr=this.lineCap,_r=this.lineWidth,Ar=Math.abs(_r*this.ctx.transform.scaleX),Vr=this.lineJoin,Wr=JSON.parse(JSON.stringify(this.path)),tr=JSON.parse(JSON.stringify(this.path)),pr=[],ur=0;ur<tr.length;ur++)if(tr[ur].x!==void 0)for(var Ki=ti.call(this,tr[ur]),Nr=0;Nr<Ki.length;Nr+=1)pr.indexOf(Ki[Nr])===-1&&pr.push(Ki[Nr]);for(var Or=0;Or<pr.length;Or++)for(;this.pdf.internal.getNumberOfPages()<pr[Or];)ni.call(this);if(si(pr),this.autoPaging)for(var Ir=pr[0],Mr=pr[pr.length-1],Tr=Ir;Tr<Mr+1;Tr++){this.pdf.setPage(Tr),this.fillStyle=mr,this.strokeStyle=hr,this.lineCap=vr,this.lineWidth=Ar,this.lineJoin=Vr;var wr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Cr=Tr===1?this.posY+this.margin[0]:this.margin[0],Er=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Sr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gr=Tr===1?0:Er+(Tr-2)*Sr;if(this.ctx.clip_path.length!==0){var zr=this.path;er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(er,this.posX+this.margin[3],-Gr+Cr+this.ctx.prevPageLastElemOffset),ci.call(this,Ni,!0),this.path=zr}if(fr=JSON.parse(JSON.stringify(Wr)),this.path=ii(fr,this.posX+this.margin[3],-Gr+Cr+this.ctx.prevPageLastElemOffset),or===!1||Tr===0){var $r=(Tr>Ir||Tr<Mr)&&Bn.call(this);$r&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wr,Sr,null).clip().discardPath()),ci.call(this,Ni,or),$r&&this.pdf.restoreGraphicsState()}this.lineWidth=_r}else this.lineWidth=Ar,ci.call(this,Ni,or),this.lineWidth=_r;this.path=Wr},ci=function(Ni,or){if((Ni!=="stroke"||or||!Ln.call(this))&&(Ni==="stroke"||or||!Tn.call(this))){for(var er,fr,mr=[],hr=this.path,vr=0;vr<hr.length;vr++){var _r=hr[vr];switch(_r.type){case"begin":mr.push({begin:!0});break;case"close":mr.push({close:!0});break;case"mt":mr.push({start:_r,deltas:[],abs:[]});break;case"lt":var Ar=mr.length;if(hr[vr-1]&&!isNaN(hr[vr-1].x)&&(er=[_r.x-hr[vr-1].x,_r.y-hr[vr-1].y],Ar>0)){for(;Ar>=0;Ar--)if(mr[Ar-1].close!==!0&&mr[Ar-1].begin!==!0){mr[Ar-1].deltas.push(er),mr[Ar-1].abs.push(_r);break}}break;case"bct":er=[_r.x1-hr[vr-1].x,_r.y1-hr[vr-1].y,_r.x2-hr[vr-1].x,_r.y2-hr[vr-1].y,_r.x-hr[vr-1].x,_r.y-hr[vr-1].y],mr[mr.length-1].deltas.push(er);break;case"qct":var Vr=hr[vr-1].x+2/3*(_r.x1-hr[vr-1].x),Wr=hr[vr-1].y+2/3*(_r.y1-hr[vr-1].y),tr=_r.x+2/3*(_r.x1-_r.x),pr=_r.y+2/3*(_r.y1-_r.y),ur=_r.x,Ki=_r.y;er=[Vr-hr[vr-1].x,Wr-hr[vr-1].y,tr-hr[vr-1].x,pr-hr[vr-1].y,ur-hr[vr-1].x,Ki-hr[vr-1].y],mr[mr.length-1].deltas.push(er);break;case"arc":mr.push({deltas:[],abs:[],arc:!0}),Array.isArray(mr[mr.length-1].abs)&&mr[mr.length-1].abs.push(_r)}}fr=or?null:Ni==="stroke"?"stroke":"fill";for(var Nr=!1,Or=0;Or<mr.length;Or++)if(mr[Or].arc)for(var Ir=mr[Or].abs,Mr=0;Mr<Ir.length;Mr++){var Tr=Ir[Mr];Tr.type==="arc"?fi.call(this,Tr.x,Tr.y,Tr.radius,Tr.startAngle,Tr.endAngle,Tr.counterclockwise,void 0,or,!Nr):Ri.call(this,Tr.x,Tr.y),Nr=!0}else if(mr[Or].close===!0)this.pdf.internal.out("h"),Nr=!1;else if(mr[Or].begin!==!0){var wr=mr[Or].start.x,Cr=mr[Or].start.y;Pi.call(this,mr[Or].deltas,wr,Cr),Nr=!0}fr&&Mi.call(this,fr),or&&Oi.call(this)}},vi=function(Ni){var or=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,er=or*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ni-er;case"top":return Ni+or-er;case"hanging":return Ni+or-2*er;case"middle":return Ni+or/2-er;case"ideographic":return Ni;case"alphabetic":default:return Ni}},pi=function(Ni){return Ni+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};En.prototype.createLinearGradient=function(){var Ni=function(){};return Ni.colorStops=[],Ni.addColorStop=function(or,er){this.colorStops.push([or,er])},Ni.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ni.isCanvasGradient=!0,Ni},En.prototype.createPattern=function(){return this.createLinearGradient()},En.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fi=function(Ni,or,er,fr,mr,hr,vr,_r,Ar){for(var Vr=Hi.call(this,er,fr,mr,hr),Wr=0;Wr<Vr.length;Wr++){var tr=Vr[Wr];Wr===0&&(Ar?ui.call(this,tr.x1+Ni,tr.y1+or):Ri.call(this,tr.x1+Ni,tr.y1+or)),Fi.call(this,Ni,or,tr.x2,tr.y2,tr.x3,tr.y3,tr.x4,tr.y4)}_r?Oi.call(this):Mi.call(this,vr)},Mi=function(Ni){switch(Ni){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Oi=function(){this.pdf.clip(),this.pdf.discardPath()},ui=function(Ni,or){this.pdf.internal.out(t(Ni)+" "+Oe(or)+" m")},li=function(Ni){var or;switch(Ni.align){case"right":case"end":or="right";break;case"center":or="center";break;case"left":case"start":default:or="left"}var er=this.pdf.getTextDimensions(Ni.text),fr=vi.call(this,Ni.y),mr=pi.call(this,fr)-er.h,hr=this.ctx.transform.applyToPoint(new Ue(Ni.x,fr)),vr=this.ctx.transform.decompose(),_r=new We;_r=(_r=(_r=_r.multiply(vr.translate)).multiply(vr.skew)).multiply(vr.scale);for(var Ar,Vr,Wr,tr=this.ctx.transform.applyToRectangle(new He(Ni.x,fr,er.w,er.h)),pr=_r.applyToRectangle(new He(Ni.x,mr,er.w,er.h)),ur=ti.call(this,pr),Ki=[],Nr=0;Nr<ur.length;Nr+=1)Ki.indexOf(ur[Nr])===-1&&Ki.push(ur[Nr]);if(si(Ki),this.autoPaging)for(var Or=Ki[0],Ir=Ki[Ki.length-1],Mr=Or;Mr<Ir+1;Mr++){this.pdf.setPage(Mr);var Tr=Mr===1?this.posY+this.margin[0]:this.margin[0],wr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Cr=this.pdf.internal.pageSize.height-this.margin[2],Er=Cr-this.margin[0],Sr=this.pdf.internal.pageSize.width-this.margin[1],Gr=Sr-this.margin[3],zr=Mr===1?0:wr+(Mr-2)*Er;if(this.ctx.clip_path.length!==0){var $r=this.path;Ar=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(Ar,this.posX+this.margin[3],-1*zr+Tr),ci.call(this,"fill",!0),this.path=$r}var Hr=ii([JSON.parse(JSON.stringify(pr))],this.posX+this.margin[3],-zr+Tr+this.ctx.prevPageLastElemOffset)[0];Ni.scale>=.01&&(Vr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vr*Ni.scale),Wr=this.lineWidth,this.lineWidth=Wr*Ni.scale);var as=this.autoPaging!=="text";if(as||Hr.y+Hr.h<=Cr){if(as||Hr.y>=Tr&&Hr.x<=Sr){var Kr=as?Ni.text:this.pdf.splitTextToSize(Ni.text,Ni.maxWidth||Sr-Hr.x)[0],Ss=ii([JSON.parse(JSON.stringify(tr))],this.posX+this.margin[3],-zr+Tr+this.ctx.prevPageLastElemOffset)[0],ms=as&&(Mr>Or||Mr<Ir)&&Bn.call(this);ms&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gr,Er,null).clip().discardPath()),this.pdf.text(Kr,Ss.x,Ss.y,{angle:Ni.angle,align:or,renderingMode:Ni.renderingMode}),ms&&this.pdf.restoreGraphicsState()}}else Hr.y<Cr&&(this.ctx.prevPageLastElemOffset+=Cr-Hr.y);Ni.scale>=.01&&(this.pdf.setFontSize(Vr),this.lineWidth=Wr)}else Ni.scale>=.01&&(Vr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vr*Ni.scale),Wr=this.lineWidth,this.lineWidth=Wr*Ni.scale),this.pdf.text(Ni.text,hr.x+this.posX,hr.y+this.posY,{angle:Ni.angle,align:or,renderingMode:Ni.renderingMode,maxWidth:Ni.maxWidth}),Ni.scale>=.01&&(this.pdf.setFontSize(Vr),this.lineWidth=Wr)},Ri=function(Ni,or,er,fr){er=er||0,fr=fr||0,this.pdf.internal.out(t(Ni+er)+" "+Oe(or+fr)+" l")},Pi=function(Ni,or,er){return this.pdf.lines(Ni,or,er,null,null)},Fi=function(Ni,or,er,fr,mr,hr,vr,_r){this.pdf.internal.out([e(ke(er+Ni)),e(Be(fr+or)),e(ke(mr+Ni)),e(Be(hr+or)),e(ke(vr+Ni)),e(Be(_r+or)),"c"].join(" "))},Hi=function(Ni,or,er,fr){for(var mr=2*Math.PI,hr=Math.PI/2;or>er;)or-=mr;var vr=Math.abs(er-or);vr<mr&&fr&&(vr=mr-vr);for(var _r=[],Ar=fr?-1:1,Vr=or;vr>1e-5;){var Wr=Vr+Ar*Math.min(vr,hr);_r.push(nr.call(this,Ni,Vr,Wr)),vr-=Math.abs(Wr-Vr),Vr=Wr}return _r},nr=function(Ni,or,er){var fr=(er-or)/2,mr=Ni*Math.cos(fr),hr=Ni*Math.sin(fr),vr=mr,_r=-hr,Ar=vr*vr+_r*_r,Vr=Ar+vr*mr+_r*hr,Wr=4/3*(Math.sqrt(2*Ar*Vr)-Vr)/(vr*hr-_r*mr),tr=vr-Wr*_r,pr=_r+Wr*vr,ur=tr,Ki=-pr,Nr=fr+or,Or=Math.cos(Nr),Ir=Math.sin(Nr);return{x1:Ni*Math.cos(or),y1:Ni*Math.sin(or),x2:tr*Or-pr*Ir,y2:tr*Ir+pr*Or,x3:ur*Or-Ki*Ir,y3:ur*Ir+Ki*Or,x4:Ni*Math.cos(er),y4:Ni*Math.sin(er)}},ar=function(Ni){return 180*Ni/Math.PI},cr=function(Ni,or,er,fr,mr,hr){var vr=Ni+.5*(er-Ni),_r=or+.5*(fr-or),Ar=mr+.5*(er-mr),Vr=hr+.5*(fr-hr),Wr=Math.min(Ni,mr,vr,Ar),tr=Math.max(Ni,mr,vr,Ar),pr=Math.min(or,hr,_r,Vr),ur=Math.max(or,hr,_r,Vr);return new He(Wr,pr,tr-Wr,ur-pr)},sr=function(Ni,or,er,fr,mr,hr,vr,_r){var Ar,Vr,Wr,tr,pr,ur,Ki,Nr,Or,Ir,Mr,Tr,wr,Cr,Er=er-Ni,Sr=fr-or,Gr=mr-er,zr=hr-fr,$r=vr-mr,Hr=_r-hr;for(Vr=0;Vr<41;Vr++)Or=(Ki=(Wr=Ni+(Ar=Vr/40)*Er)+Ar*((pr=er+Ar*Gr)-Wr))+Ar*(pr+Ar*(mr+Ar*$r-pr)-Ki),Ir=(Nr=(tr=or+Ar*Sr)+Ar*((ur=fr+Ar*zr)-tr))+Ar*(ur+Ar*(hr+Ar*Hr-ur)-Nr),Vr==0?(Mr=Or,Tr=Ir,wr=Or,Cr=Ir):(Mr=Math.min(Mr,Or),Tr=Math.min(Tr,Ir),wr=Math.max(wr,Or),Cr=Math.max(Cr,Ir));return new He(Math.round(Mr),Math.round(Tr),Math.round(wr-Mr),Math.round(Cr-Tr))},br=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ni,or,er=(Ni=this.ctx.lineDash,or=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ni,lineDashOffset:or}));this.prevLineDash!==er&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=er)}}})(E.API),function(Te){var e=function(Be){var Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn;for(He=[],We=0,Cn=(Be+=Ue="\0\0\0\0".slice(Be.length%4||4)).length;Cn>We;We+=4)(An=(Be.charCodeAt(We)<<24)+(Be.charCodeAt(We+1)<<16)+(Be.charCodeAt(We+2)<<8)+Be.charCodeAt(We+3))!==0?(En=(An=((An=((An=((An=(An-(Bn=An%85))/85)-(Ln=An%85))/85)-(Tn=An%85))/85)-(Sn=An%85))/85)%85,He.push(En+33,Sn+33,Tn+33,Ln+33,Bn+33)):He.push(122);return function(ti,ni){for(var ii=ni;ii>0;ii--)ti.pop()}(He,Ue.length),String.fromCharCode.apply(String,He)+"~>"},t=function(Be){var Ue,He,We,Cn,An,En=String,Sn="length",Tn=255,Ln="charCodeAt",Bn="slice",ti="replace";for(Be[Bn](-2),Be=Be[Bn](0,-2)[ti](/\s/g,"")[ti]("z","!!!!!"),We=[],Cn=0,An=(Be+=Ue="uuuuu"[Bn](Be[Sn]%5||5))[Sn];An>Cn;Cn+=5)He=52200625*(Be[Ln](Cn)-33)+614125*(Be[Ln](Cn+1)-33)+7225*(Be[Ln](Cn+2)-33)+85*(Be[Ln](Cn+3)-33)+(Be[Ln](Cn+4)-33),We.push(Tn&He>>24,Tn&He>>16,Tn&He>>8,Tn&He);return function(ni,ii){for(var si=ii;si>0;si--)ni.pop()}(We,Ue[Sn]),En.fromCharCode.apply(En,We)},Oe=function(Be){var Ue=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Be=Be.replace(/\s/g,"")).indexOf(">")!==-1&&(Be=Be.substr(0,Be.indexOf(">"))),Be.length%2&&(Be+="0"),Ue.test(Be)===!1)return"";for(var He="",We=0;We<Be.length;We+=2)He+=String.fromCharCode("0x"+(Be[We]+Be[We+1]));return He},ke=function(Be){for(var Ue=new Uint8Array(Be.length),He=Be.length;He--;)Ue[He]=Be.charCodeAt(He);return Be=(Ue=zlibSync(Ue)).reduce(function(We,Cn){return We+String.fromCharCode(Cn)},"")};Te.processDataByFilters=function(Be,Ue){var He=0,We=Be||"",Cn=[];for(typeof(Ue=Ue||[])=="string"&&(Ue=[Ue]),He=0;He<Ue.length;He+=1)switch(Ue[He]){case"ASCII85Decode":case"/ASCII85Decode":We=t(We),Cn.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":We=e(We),Cn.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":We=Oe(We),Cn.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":We=We.split("").map(function(An){return("0"+An.charCodeAt().toString(16)).slice(-2)}).join("")+">",Cn.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":We=ke(We),Cn.push("/FlateDecode");break;default:throw new Error('The filter: "'+Ue[He]+'" is not implemented')}return{data:We,reverseChain:Cn.reverse().join(" ")}}}(E.API),function(Te){Te.loadFile=function(e,t,Oe){return function(ke,Be,Ue){Be=Be!==!1,Ue=typeof Ue=="function"?Ue:function(){};var He=void 0;try{He=function(We,Cn,An){var En=new XMLHttpRequest,Sn=0,Tn=function(Ln){var Bn=Ln.length,ti=[],ni=String.fromCharCode;for(Sn=0;Sn<Bn;Sn+=1)ti.push(ni(255&Ln.charCodeAt(Sn)));return ti.join("")};if(En.open("GET",We,!Cn),En.overrideMimeType("text/plain; charset=x-user-defined"),Cn===!1&&(En.onload=function(){En.status===200?An(Tn(this.responseText)):An(void 0)}),En.send(null),Cn&&En.status===200)return Tn(En.responseText)}(ke,Be,Ue)}catch{}return He}(e,t,Oe)},Te.loadImageFile=Te.loadFile}(E.API),function(Te){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(Ue){return Promise.reject(new Error("Could not load html2canvas: "+Ue))}).then(function(Ue){return Ue.default?Ue.default:Ue})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(Ue){return Promise.reject(new Error("Could not load dompurify: "+Ue))}).then(function(Ue){return Ue.default?Ue.default:Ue})}var Oe=function(Ue){var He=_typeof(Ue);return He==="undefined"?"undefined":He==="string"||Ue instanceof String?"string":He==="number"||Ue instanceof Number?"number":He==="function"||Ue instanceof Function?"function":Ue&&Ue.constructor===Array?"array":Ue&&Ue.nodeType===1?"element":He==="object"?"object":"unknown"},ke=function(Ue,He){var We=document.createElement(Ue);for(var Cn in He.className&&(We.className=He.className),He.innerHTML&&He.dompurify&&(We.innerHTML=He.dompurify.sanitize(He.innerHTML)),He.style)We.style[Cn]=He.style[Cn];return We},Be=function Ue(He){var We=Object.assign(Ue.convert(Promise.resolve()),JSON.parse(JSON.stringify(Ue.template))),Cn=Ue.convert(Promise.resolve(),We);return Cn=(Cn=Cn.setProgress(1,Ue,1,[Ue])).set(He)};(Be.prototype=Object.create(Promise.prototype)).constructor=Be,Be.convert=function(Ue,He){return Ue.__proto__=He||Be.prototype,Ue},Be.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Be.prototype.from=function(Ue,He){return this.then(function(){switch(He=He||function(We){switch(Oe(We)){case"string":return"string";case"element":return We.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Ue)){case"string":return this.then(t).then(function(We){return this.set({src:ke("div",{innerHTML:Ue,dompurify:We})})});case"element":return this.set({src:Ue});case"canvas":return this.set({canvas:Ue});case"img":return this.set({img:Ue});default:return this.error("Unknown source type.")}})},Be.prototype.to=function(Ue){switch(Ue){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Be.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Ue={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},He=function We(Cn,An){for(var En=Cn.nodeType===3?document.createTextNode(Cn.nodeValue):Cn.cloneNode(!1),Sn=Cn.firstChild;Sn;Sn=Sn.nextSibling)An!==!0&&Sn.nodeType===1&&Sn.nodeName==="SCRIPT"||En.appendChild(We(Sn,An));return Cn.nodeType===1&&(Cn.nodeName==="CANVAS"?(En.width=Cn.width,En.height=Cn.height,En.getContext("2d").drawImage(Cn,0,0)):Cn.nodeName!=="TEXTAREA"&&Cn.nodeName!=="SELECT"||(En.value=Cn.value),En.addEventListener("load",function(){En.scrollTop=Cn.scrollTop,En.scrollLeft=Cn.scrollLeft},!0)),En}(this.prop.src,this.opt.html2canvas.javascriptEnabled);He.tagName==="BODY"&&(Ue.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=ke("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=ke("div",{className:"html2pdf__container",style:Ue}),this.prop.container.appendChild(He),this.prop.container.firstChild.appendChild(ke("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Be.prototype.toCanvas=function(){var Ue=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ue).then(e).then(function(He){var We=Object.assign({},this.opt.html2canvas);return delete We.onrendered,He(this.prop.container,We)}).then(function(He){(this.opt.html2canvas.onrendered||function(){})(He),this.prop.canvas=He,document.body.removeChild(this.prop.overlay)})},Be.prototype.toContext2d=function(){var Ue=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ue).then(e).then(function(He){var We=this.opt.jsPDF,Cn=this.opt.fontFaces,An=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,En=Object.assign({async:!0,allowTaint:!0,scale:An,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete En.onrendered,We.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,We.context2d.posX=this.opt.x,We.context2d.posY=this.opt.y,We.context2d.margin=this.opt.margin,We.context2d.fontFaces=Cn,Cn)for(var Sn=0;Sn<Cn.length;++Sn){var Tn=Cn[Sn],Ln=Tn.src.find(function(Bn){return Bn.format==="truetype"});Ln&&We.addFont(Ln.url,Tn.ref.name,Tn.ref.style)}return En.windowHeight=En.windowHeight||0,En.windowHeight=En.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):En.windowHeight,We.context2d.save(!0),He(this.prop.container,En)}).then(function(He){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(He),this.prop.canvas=He,document.body.removeChild(this.prop.overlay)})},Be.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Ue=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Ue})},Be.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Be.prototype.output=function(Ue,He,We){return(We=We||"pdf").toLowerCase()==="img"||We.toLowerCase()==="image"?this.outputImg(Ue,He):this.outputPdf(Ue,He)},Be.prototype.outputPdf=function(Ue,He){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Ue,He)})},Be.prototype.outputImg=function(Ue){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Ue){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Ue+'" is not supported.'}})},Be.prototype.save=function(Ue){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Ue?{filename:Ue}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Be.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Be.prototype.set=function(Ue){if(Oe(Ue)!=="object")return this;var He=Object.keys(Ue||{}).map(function(We){if(We in Be.template.prop)return function(){this.prop[We]=Ue[We]};switch(We){case"margin":return this.setMargin.bind(this,Ue.margin);case"jsPDF":return function(){return this.opt.jsPDF=Ue.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Ue.pageSize);default:return function(){this.opt[We]=Ue[We]}}},this);return this.then(function(){return this.thenList(He)})},Be.prototype.get=function(Ue,He){return this.then(function(){var We=Ue in Be.template.prop?this.prop[Ue]:this.opt[Ue];return He?He(We):We})},Be.prototype.setMargin=function(Ue){return this.then(function(){switch(Oe(Ue)){case"number":Ue=[Ue,Ue,Ue,Ue];case"array":if(Ue.length===2&&(Ue=[Ue[0],Ue[1],Ue[0],Ue[1]]),Ue.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Ue}).then(this.setPageSize)},Be.prototype.setPageSize=function(Ue){function He(We,Cn){return Math.floor(We*Cn/72*96)}return this.then(function(){(Ue=Ue||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Ue.inner={width:Ue.width-this.opt.margin[1]-this.opt.margin[3],height:Ue.height-this.opt.margin[0]-this.opt.margin[2]},Ue.inner.px={width:He(Ue.inner.width,Ue.k),height:He(Ue.inner.height,Ue.k)},Ue.inner.ratio=Ue.inner.height/Ue.inner.width),this.prop.pageSize=Ue})},Be.prototype.setProgress=function(Ue,He,We,Cn){return Ue!=null&&(this.progress.val=Ue),He!=null&&(this.progress.state=He),We!=null&&(this.progress.n=We),Cn!=null&&(this.progress.stack=Cn),this.progress.ratio=this.progress.val/this.progress.state,this},Be.prototype.updateProgress=function(Ue,He,We,Cn){return this.setProgress(Ue?this.progress.val+Ue:null,He||null,We?this.progress.n+We:null,Cn?this.progress.stack.concat(Cn):null)},Be.prototype.then=function(Ue,He){var We=this;return this.thenCore(Ue,He,function(Cn,An){return We.updateProgress(null,null,1,[Cn]),Promise.prototype.then.call(this,function(En){return We.updateProgress(null,Cn),En}).then(Cn,An).then(function(En){return We.updateProgress(1),En})})},Be.prototype.thenCore=function(Ue,He,We){We=We||Promise.prototype.then,Ue&&(Ue=Ue.bind(this)),He&&(He=He.bind(this));var Cn=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Be.convert(Object.assign({},this),Promise.prototype),An=We.call(Cn,Ue,He);return Be.convert(An,this.__proto__)},Be.prototype.thenExternal=function(Ue,He){return Promise.prototype.then.call(this,Ue,He)},Be.prototype.thenList=function(Ue){var He=this;return Ue.forEach(function(We){He=He.thenCore(We)}),He},Be.prototype.catch=function(Ue){Ue&&(Ue=Ue.bind(this));var He=Promise.prototype.catch.call(this,Ue);return Be.convert(He,this)},Be.prototype.catchExternal=function(Ue){return Promise.prototype.catch.call(this,Ue)},Be.prototype.error=function(Ue){return this.then(function(){throw new Error(Ue)})},Be.prototype.using=Be.prototype.set,Be.prototype.saveAs=Be.prototype.save,Be.prototype.export=Be.prototype.output,Be.prototype.run=Be.prototype.then,E.getPageSize=function(Ue,He,We){if(_typeof(Ue)==="object"){var Cn=Ue;Ue=Cn.orientation,He=Cn.unit||He,We=Cn.format||We}He=He||"mm",We=We||"a4",Ue=(""+(Ue||"P")).toLowerCase();var An,En=(""+We).toLowerCase(),Sn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(He){case"pt":An=1;break;case"mm":An=72/25.4;break;case"cm":An=72/2.54;break;case"in":An=72;break;case"px":An=.75;break;case"pc":case"em":An=12;break;case"ex":An=6;break;default:throw"Invalid unit: "+He}var Tn,Ln=0,Bn=0;if(Sn.hasOwnProperty(En))Ln=Sn[En][1]/An,Bn=Sn[En][0]/An;else try{Ln=We[1],Bn=We[0]}catch{throw new Error("Invalid format: "+We)}if(Ue==="p"||Ue==="portrait")Ue="p",Bn>Ln&&(Tn=Bn,Bn=Ln,Ln=Tn);else{if(Ue!=="l"&&Ue!=="landscape")throw"Invalid orientation: "+Ue;Ue="l",Ln>Bn&&(Tn=Bn,Bn=Ln,Ln=Tn)}return{width:Bn,height:Ln,unit:He,k:An,orientation:Ue}},Te.html=function(Ue,He){(He=He||{}).callback=He.callback||function(){},He.html2canvas=He.html2canvas||{},He.html2canvas.canvas=He.html2canvas.canvas||this.canvas,He.jsPDF=He.jsPDF||this,He.fontFaces=He.fontFaces?He.fontFaces.map(jt):null;var We=new Be(He);return He.worker?We:We.from(Ue).doCallback()}}(E.API),E.API.addJS=function(Te){return Ht=Te,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Te){var e;Te.events.push(["postPutResources",function(){var t=this,Oe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var ke=t.outline.render().split(/\r\n/),Be=0;Be<ke.length;Be++){var Ue=ke[Be],He=Oe.exec(Ue);if(He!=null){var We=He[1];t.internal.newObjectDeferredBegin(We,!1)}t.internal.write(Ue)}if(this.outline.createNamedDestinations){var Cn=this.internal.pages.length,An=[];for(Be=0;Be<Cn;Be++){var En=t.internal.newObject();An.push(En);var Sn=t.internal.getPageInfo(Be+1);t.internal.write("<< /D["+Sn.objId+" 0 R /XYZ null null null]>> endobj")}var Tn=t.internal.newObject();for(t.internal.write("<< /Names [ "),Be=0;Be<An.length;Be++)t.internal.write("(page_"+(Be+1)+")"+An[Be]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+Tn+" 0 R"),t.internal.write(">>","endobj")}}]),Te.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),Te.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(Oe,ke,Be){var Ue={title:ke,options:Be,children:[]};return Oe==null&&(Oe=this.root),Oe.children.push(Ue),Ue},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(Oe){Oe.id=t.internal.newObjectDeferred();for(var ke=0;ke<Oe.children.length;ke++)this.genIds_r(Oe.children[ke])},t.outline.renderRoot=function(Oe){this.objStart(Oe),this.line("/Type /Outlines"),Oe.children.length>0&&(this.line("/First "+this.makeRef(Oe.children[0])),this.line("/Last "+this.makeRef(Oe.children[Oe.children.length-1]))),this.line("/Count "+this.count_r({count:0},Oe)),this.objEnd()},t.outline.renderItems=function(Oe){for(var ke=this.ctx.pdf.internal.getVerticalCoordinateString,Be=0;Be<Oe.children.length;Be++){var Ue=Oe.children[Be];this.objStart(Ue),this.line("/Title "+this.makeString(Ue.title)),this.line("/Parent "+this.makeRef(Oe)),Be>0&&this.line("/Prev "+this.makeRef(Oe.children[Be-1])),Be<Oe.children.length-1&&this.line("/Next "+this.makeRef(Oe.children[Be+1])),Ue.children.length>0&&(this.line("/First "+this.makeRef(Ue.children[0])),this.line("/Last "+this.makeRef(Ue.children[Ue.children.length-1])));var He=this.count=this.count_r({count:0},Ue);if(He>0&&this.line("/Count "+He),Ue.options&&Ue.options.pageNumber){var We=t.internal.getPageInfo(Ue.options.pageNumber);this.line("/Dest ["+We.objId+" 0 R /XYZ 0 "+ke(0)+" 0]")}this.objEnd()}for(var Cn=0;Cn<Oe.children.length;Cn++)this.renderItems(Oe.children[Cn])},t.outline.line=function(Oe){this.ctx.val+=Oe+`\r
`},t.outline.makeRef=function(Oe){return Oe.id+" 0 R"},t.outline.makeString=function(Oe){return"("+t.internal.pdfEscape(Oe)+")"},t.outline.objStart=function(Oe){this.ctx.val+=`\r
`+Oe.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(Oe,ke){for(var Be=0;Be<ke.children.length;Be++)Oe.count++,this.count_r(Oe,ke.children[Be]);return Oe.count}}])}(E.API),function(Te){var e=[192,193,194,195,196,197,198,199];Te.processJPEG=function(t,Oe,ke,Be,Ue,He){var We,Cn=this.decode.DCT_DECODE,An=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Ue||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(We=function(En){for(var Sn,Tn=256*En.charCodeAt(4)+En.charCodeAt(5),Ln=En.length,Bn={width:0,height:0,numcomponents:1},ti=4;ti<Ln;ti+=2){if(ti+=Tn,e.indexOf(En.charCodeAt(ti+1))!==-1){Sn=256*En.charCodeAt(ti+5)+En.charCodeAt(ti+6),Bn={width:256*En.charCodeAt(ti+7)+En.charCodeAt(ti+8),height:Sn,numcomponents:En.charCodeAt(ti+9)};break}Tn=256*En.charCodeAt(ti+2)+En.charCodeAt(ti+3)}return Bn}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:He=this.color_spaces.DEVICE_GRAY;break;case 4:He=this.color_spaces.DEVICE_CMYK;break;case 3:He=this.color_spaces.DEVICE_RGB}An={data:t,width:We.width,height:We.height,colorSpace:He,bitsPerComponent:8,filter:Cn,index:Oe,alias:ke}}return An}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Te,e,t;function Oe(Be){var Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si;for(this.data=Be,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},En=null;;){switch(Ue=this.readUInt32(),Ln=(function(){var oi,ci;for(ci=[],oi=0;oi<4;++oi)ci.push(String.fromCharCode(this.data[this.pos++]));return ci}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Ue);break;case"fcTL":En&&this.animation.frames.push(En),this.pos+=4,En={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},An=this.readUInt16(),Cn=this.readUInt16()||100,En.delay=1e3*An/Cn,En.disposeOp=this.data[this.pos++],En.blendOp=this.data[this.pos++],En.data=[];break;case"IDAT":case"fdAT":for(Ln==="fdAT"&&(this.pos+=4,Ue-=4),Be=(En!=null?En.data:void 0)||this.imgData,ni=0;0<=Ue?ni<Ue:ni>Ue;0<=Ue?++ni:--ni)Be.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(We=this.palette.length/3,this.transparency.indexed=this.read(Ue),this.transparency.indexed.length>We)throw new Error("More transparent colors than palette size");if((Bn=We-this.transparency.indexed.length)>0)for(ii=0;0<=Bn?ii<Bn:ii>Bn;0<=Bn?++ii:--ii)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Ue)[0];break;case 2:this.transparency.rgb=this.read(Ue)}break;case"tEXt":Sn=(ti=this.read(Ue)).indexOf(0),Tn=String.fromCharCode.apply(String,ti.slice(0,Sn)),this.text[Tn]=String.fromCharCode.apply(String,ti.slice(Sn+1));break;case"IEND":return En&&this.animation.frames.push(En),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(si=this.colorType)===4||si===6,He=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*He,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Ue}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}Oe.prototype.read=function(Be){var Ue,He;for(He=[],Ue=0;0<=Be?Ue<Be:Ue>Be;0<=Be?++Ue:--Ue)He.push(this.data[this.pos++]);return He},Oe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.decodePixels=function(Be){var Ue=this.pixelBitlength/8,He=new Uint8Array(this.width*this.height*Ue),We=0,Cn=this;if(Be==null&&(Be=this.imgData),Be.length===0)return new Uint8Array(0);function An(En,Sn,Tn,Ln){var Bn,ti,ni,ii,si,oi,ci,vi,pi,fi,Mi,Oi,ui,li,Ri,Pi,Fi,Hi,nr,ar,cr,sr=Math.ceil((Cn.width-En)/Tn),br=Math.ceil((Cn.height-Sn)/Ln),Ni=Cn.width==sr&&Cn.height==br;for(li=Ue*sr,Oi=Ni?He:new Uint8Array(li*br),oi=Be.length,ui=0,ti=0;ui<br&&We<oi;){switch(Be[We++]){case 0:for(ii=Fi=0;Fi<li;ii=Fi+=1)Oi[ti++]=Be[We++];break;case 1:for(ii=Hi=0;Hi<li;ii=Hi+=1)Bn=Be[We++],si=ii<Ue?0:Oi[ti-Ue],Oi[ti++]=(Bn+si)%256;break;case 2:for(ii=nr=0;nr<li;ii=nr+=1)Bn=Be[We++],ni=(ii-ii%Ue)/Ue,Ri=ui&&Oi[(ui-1)*li+ni*Ue+ii%Ue],Oi[ti++]=(Ri+Bn)%256;break;case 3:for(ii=ar=0;ar<li;ii=ar+=1)Bn=Be[We++],ni=(ii-ii%Ue)/Ue,si=ii<Ue?0:Oi[ti-Ue],Ri=ui&&Oi[(ui-1)*li+ni*Ue+ii%Ue],Oi[ti++]=(Bn+Math.floor((si+Ri)/2))%256;break;case 4:for(ii=cr=0;cr<li;ii=cr+=1)Bn=Be[We++],ni=(ii-ii%Ue)/Ue,si=ii<Ue?0:Oi[ti-Ue],ui===0?Ri=Pi=0:(Ri=Oi[(ui-1)*li+ni*Ue+ii%Ue],Pi=ni&&Oi[(ui-1)*li+(ni-1)*Ue+ii%Ue]),ci=si+Ri-Pi,vi=Math.abs(ci-si),fi=Math.abs(ci-Ri),Mi=Math.abs(ci-Pi),pi=vi<=fi&&vi<=Mi?si:fi<=Mi?Ri:Pi,Oi[ti++]=(Bn+pi)%256;break;default:throw new Error("Invalid filter algorithm: "+Be[We-1])}if(!Ni){var or=((Sn+ui*Ln)*Cn.width+En)*Ue,er=ui*li;for(ii=0;ii<sr;ii+=1){for(var fr=0;fr<Ue;fr+=1)He[or++]=Oi[er++];or+=(Tn-1)*Ue}}ui++}}return Be=unzlibSync(Be),Cn.interlaceMethod==1?(An(0,0,8,8),An(4,0,8,8),An(0,4,4,8),An(2,0,4,4),An(0,2,2,4),An(1,0,2,2),An(0,1,1,2)):An(0,0,1,1),He},Oe.prototype.decodePalette=function(){var Be,Ue,He,We,Cn,An,En,Sn,Tn;for(He=this.palette,An=this.transparency.indexed||[],Cn=new Uint8Array((An.length||0)+He.length),We=0,Be=0,Ue=En=0,Sn=He.length;En<Sn;Ue=En+=3)Cn[We++]=He[Ue],Cn[We++]=He[Ue+1],Cn[We++]=He[Ue+2],Cn[We++]=(Tn=An[Be++])!=null?Tn:255;return Cn},Oe.prototype.copyToImageData=function(Be,Ue){var He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni;if(We=this.colors,Bn=null,He=this.hasAlphaChannel,this.palette.length&&(Bn=(ni=this._decodedPalette)!=null?ni:this._decodedPalette=this.decodePalette(),We=4,He=!0),Ln=(Cn=Be.data||Be).length,En=Bn||Ue,An=Sn=0,We===1)for(;An<Ln;)Tn=Bn?4*Ue[An/4]:Sn,ti=En[Tn++],Cn[An++]=ti,Cn[An++]=ti,Cn[An++]=ti,Cn[An++]=He?En[Tn++]:255,Sn=Tn;else for(;An<Ln;)Tn=Bn?4*Ue[An/4]:Sn,Cn[An++]=En[Tn++],Cn[An++]=En[Tn++],Cn[An++]=En[Tn++],Cn[An++]=He?En[Tn++]:255,Sn=Tn},Oe.prototype.decode=function(){var Be;return Be=new Uint8Array(this.width*this.height*4),this.copyToImageData(Be,this.decodePixels()),Be};var ke=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return ke(),Te=function(Be){var Ue;if(ke()===!0)return t.width=Be.width,t.height=Be.height,t.clearRect(0,0,Be.width,Be.height),t.putImageData(Be,0,0),(Ue=new Image).src=e.toDataURL(),Ue;throw new Error("This method requires a Browser with Canvas-capability.")},Oe.prototype.decodeFrames=function(Be){var Ue,He,We,Cn,An,En,Sn,Tn;if(this.animation){for(Tn=[],He=An=0,En=(Sn=this.animation.frames).length;An<En;He=++An)Ue=Sn[He],We=Be.createImageData(Ue.width,Ue.height),Cn=this.decodePixels(new Uint8Array(Ue.data)),this.copyToImageData(We,Cn),Ue.imageData=We,Tn.push(Ue.image=Te(We));return Tn}},Oe.prototype.renderFrame=function(Be,Ue){var He,We,Cn;return He=(We=this.animation.frames)[Ue],Cn=We[Ue-1],Ue===0&&Be.clearRect(0,0,this.width,this.height),(Cn!=null?Cn.disposeOp:void 0)===1?Be.clearRect(Cn.xOffset,Cn.yOffset,Cn.width,Cn.height):(Cn!=null?Cn.disposeOp:void 0)===2&&Be.putImageData(Cn.imageData,Cn.xOffset,Cn.yOffset),He.blendOp===0&&Be.clearRect(He.xOffset,He.yOffset,He.width,He.height),Be.drawImage(He.image,He.xOffset,He.yOffset)},Oe.prototype.animate=function(Be){var Ue,He,We,Cn,An,En,Sn=this;return He=0,En=this.animation,Cn=En.numFrames,We=En.frames,An=En.numPlays,(Ue=function(){var Tn,Ln;if(Tn=He++%Cn,Ln=We[Tn],Sn.renderFrame(Be,Tn),Cn>1&&He/Cn<An)return Sn.animation._timeout=setTimeout(Ue,Ln.delay)})()},Oe.prototype.stopAnimation=function(){var Be;return clearTimeout((Be=this.animation)!=null?Be._timeout:void 0)},Oe.prototype.render=function(Be){var Ue,He;return Be._png&&Be._png.stopAnimation(),Be._png=this,Be.width=this.width,Be.height=this.height,Ue=Be.getContext("2d"),this.animation?(this.decodeFrames(Ue),this.animate(Ue)):(He=Ue.createImageData(this.width,this.height),this.copyToImageData(He,this.decodePixels()),Ue.putImageData(He,0,0))},Oe}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Te){var e=0;if(Te[e++]!==71||Te[e++]!==73||Te[e++]!==70||Te[e++]!==56||(Te[e++]+1&253)!=56||Te[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=Te[e++]|Te[e++]<<8,Oe=Te[e++]|Te[e++]<<8,ke=Te[e++],Be=ke>>7,Ue=1<<(7&ke)+1;Te[e++],Te[e++];var He=null,We=null;Be&&(He=e,We=Ue,e+=3*Ue);var Cn=!0,An=[],En=0,Sn=null,Tn=0,Ln=null;for(this.width=t,this.height=Oe;Cn&&e<Te.length;)switch(Te[e++]){case 33:switch(Te[e++]){case 255:if(Te[e]!==11||Te[e+1]==78&&Te[e+2]==69&&Te[e+3]==84&&Te[e+4]==83&&Te[e+5]==67&&Te[e+6]==65&&Te[e+7]==80&&Te[e+8]==69&&Te[e+9]==50&&Te[e+10]==46&&Te[e+11]==48&&Te[e+12]==3&&Te[e+13]==1&&Te[e+16]==0)e+=14,Ln=Te[e++]|Te[e++]<<8,e++;else for(e+=12;;){if(!((ui=Te[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}break;case 249:if(Te[e++]!==4||Te[e+4]!==0)throw new Error("Invalid graphics extension block.");var Bn=Te[e++];En=Te[e++]|Te[e++]<<8,Sn=Te[e++],!(1&Bn)&&(Sn=null),Tn=Bn>>2&7,e++;break;case 254:for(;;){if(!((ui=Te[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}break;default:throw new Error("Unknown graphic control label: 0x"+Te[e-1].toString(16))}break;case 44:var ti=Te[e++]|Te[e++]<<8,ni=Te[e++]|Te[e++]<<8,ii=Te[e++]|Te[e++]<<8,si=Te[e++]|Te[e++]<<8,oi=Te[e++],ci=oi>>6&1,vi=1<<(7&oi)+1,pi=He,fi=We,Mi=!1;oi>>7&&(Mi=!0,pi=e,fi=vi,e+=3*vi);var Oi=e;for(e++;;){var ui;if(!((ui=Te[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}An.push({x:ti,y:ni,width:ii,height:si,has_local_palette:Mi,palette_offset:pi,palette_size:fi,data_offset:Oi,data_length:e-Oi,transparent_index:Sn,interlaced:!!ci,delay:En,disposal:Tn});break;case 59:Cn=!1;break;default:throw new Error("Unknown gif block: 0x"+Te[e-1].toString(16))}this.numFrames=function(){return An.length},this.loopCount=function(){return Ln},this.frameInfo=function(li){if(li<0||li>=An.length)throw new Error("Frame index out of range.");return An[li]},this.decodeAndBlitFrameBGRA=function(li,Ri){var Pi=this.frameInfo(li),Fi=Pi.width*Pi.height,Hi=new Uint8Array(Fi);$t(Te,Pi.data_offset,Hi,Fi);var nr=Pi.palette_offset,ar=Pi.transparent_index;ar===null&&(ar=256);var cr=Pi.width,sr=t-cr,br=cr,Ni=4*(Pi.y*t+Pi.x),or=4*((Pi.y+Pi.height)*t+Pi.x),er=Ni,fr=4*sr;Pi.interlaced===!0&&(fr+=4*t*7);for(var mr=8,hr=0,vr=Hi.length;hr<vr;++hr){var _r=Hi[hr];if(br===0&&(br=cr,(er+=fr)>=or&&(fr=4*sr+4*t*(mr-1),er=Ni+(cr+sr)*(mr<<1),mr>>=1)),_r===ar)er+=4;else{var Ar=Te[nr+3*_r],Vr=Te[nr+3*_r+1],Wr=Te[nr+3*_r+2];Ri[er++]=Wr,Ri[er++]=Vr,Ri[er++]=Ar,Ri[er++]=255}--br}},this.decodeAndBlitFrameRGBA=function(li,Ri){var Pi=this.frameInfo(li),Fi=Pi.width*Pi.height,Hi=new Uint8Array(Fi);$t(Te,Pi.data_offset,Hi,Fi);var nr=Pi.palette_offset,ar=Pi.transparent_index;ar===null&&(ar=256);var cr=Pi.width,sr=t-cr,br=cr,Ni=4*(Pi.y*t+Pi.x),or=4*((Pi.y+Pi.height)*t+Pi.x),er=Ni,fr=4*sr;Pi.interlaced===!0&&(fr+=4*t*7);for(var mr=8,hr=0,vr=Hi.length;hr<vr;++hr){var _r=Hi[hr];if(br===0&&(br=cr,(er+=fr)>=or&&(fr=4*sr+4*t*(mr-1),er=Ni+(cr+sr)*(mr<<1),mr>>=1)),_r===ar)er+=4;else{var Ar=Te[nr+3*_r],Vr=Te[nr+3*_r+1],Wr=Te[nr+3*_r+2];Ri[er++]=Ar,Ri[er++]=Vr,Ri[er++]=Wr,Ri[er++]=255}--br}}}function $t(Te,e,t,Oe){for(var ke=Te[e++],Be=1<<ke,Ue=Be+1,He=Ue+1,We=ke+1,Cn=(1<<We)-1,An=0,En=0,Sn=0,Tn=Te[e++],Ln=new Int32Array(4096),Bn=null;;){for(;An<16&&Tn!==0;)En|=Te[e++]<<An,An+=8,Tn===1?Tn=Te[e++]:--Tn;if(An<We)break;var ti=En&Cn;if(En>>=We,An-=We,ti!==Be){if(ti===Ue)break;for(var ni=ti<He?ti:Bn,ii=0,si=ni;si>Be;)si=Ln[si]>>8,++ii;var oi=si;if(Sn+ii+(ni!==ti?1:0)>Oe)return void a.log("Warning, gif stream longer than expected.");t[Sn++]=oi;var ci=Sn+=ii;for(ni!==ti&&(t[Sn++]=oi),si=ni;ii--;)si=Ln[si],t[--ci]=255&si,si>>=8;Bn!==null&&He<4096&&(Ln[He++]=Bn<<8|oi,He>=Cn+1&&We<12&&(++We,Cn=Cn<<1|1)),Bn=ti}else He=Ue+1,Cn=(1<<(We=ke+1))-1,Bn=null}return Sn!==Oe&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Te){var e,t,Oe,ke,Be,Ue=Math.floor,He=new Array(64),We=new Array(64),Cn=new Array(64),An=new Array(64),En=new Array(65535),Sn=new Array(65535),Tn=new Array(64),Ln=new Array(64),Bn=[],ti=0,ni=7,ii=new Array(64),si=new Array(64),oi=new Array(64),ci=new Array(256),vi=new Array(2048),pi=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fi=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mi=[0,1,2,3,4,5,6,7,8,9,10,11],Oi=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ui=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],li=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ri=[0,1,2,3,4,5,6,7,8,9,10,11],Pi=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Fi=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Hi(Ni,or){for(var er=0,fr=0,mr=new Array,hr=1;hr<=16;hr++){for(var vr=1;vr<=Ni[hr];vr++)mr[or[fr]]=[],mr[or[fr]][0]=er,mr[or[fr]][1]=hr,fr++,er++;er*=2}return mr}function nr(Ni){for(var or=Ni[0],er=Ni[1]-1;er>=0;)or&1<<er&&(ti|=1<<ni),er--,--ni<0&&(ti==255?(ar(255),ar(0)):ar(ti),ni=7,ti=0)}function ar(Ni){Bn.push(Ni)}function cr(Ni){ar(Ni>>8&255),ar(255&Ni)}function sr(Ni,or,er,fr,mr){for(var hr,vr=mr[0],_r=mr[240],Ar=function(Ir,Mr){var Tr,wr,Cr,Er,Sr,Gr,zr,$r,Hr,as,Kr=0;for(Hr=0;Hr<8;++Hr){Tr=Ir[Kr],wr=Ir[Kr+1],Cr=Ir[Kr+2],Er=Ir[Kr+3],Sr=Ir[Kr+4],Gr=Ir[Kr+5],zr=Ir[Kr+6];var Ss=Tr+($r=Ir[Kr+7]),ms=Tr-$r,Rs=wr+zr,Ps=wr-zr,ps=Cr+Gr,Is=Cr-Gr,As=Er+Sr,Fs=Er-Sr,xs=Ss+As,Zs=Ss-As,_o=Rs+ps,Ls=Rs-ps;Ir[Kr]=xs+_o,Ir[Kr+4]=xs-_o;var Es=.707106781*(Ls+Zs);Ir[Kr+2]=Zs+Es,Ir[Kr+6]=Zs-Es;var Ms=.382683433*((xs=Fs+Is)-(Ls=Ps+ms)),za=.5411961*xs+Ms,qs=1.306562965*Ls+Ms,$o=.707106781*(_o=Is+Ps),Ts=ms+$o,Cs=ms-$o;Ir[Kr+5]=Cs+za,Ir[Kr+3]=Cs-za,Ir[Kr+1]=Ts+qs,Ir[Kr+7]=Ts-qs,Kr+=8}for(Kr=0,Hr=0;Hr<8;++Hr){Tr=Ir[Kr],wr=Ir[Kr+8],Cr=Ir[Kr+16],Er=Ir[Kr+24],Sr=Ir[Kr+32],Gr=Ir[Kr+40],zr=Ir[Kr+48];var ho=Tr+($r=Ir[Kr+56]),Co=Tr-$r,Js=wr+zr,Os=wr-zr,Us=Cr+Gr,Vs=Cr-Gr,ya=Er+Sr,pa=Er-Sr,Aa=ho+ya,ka=ho-ya,Pa=Js+Us,sa=Js-Us;Ir[Kr]=Aa+Pa,Ir[Kr+32]=Aa-Pa;var oa=.707106781*(sa+ka);Ir[Kr+16]=ka+oa,Ir[Kr+48]=ka-oa;var Dl=.382683433*((Aa=pa+Vs)-(sa=Os+Co)),Rc=.5411961*Aa+Dl,Vc=1.306562965*sa+Dl,zc=.707106781*(Pa=Vs+Os),$c=Co+zc,Hc=Co-zc;Ir[Kr+40]=Hc+Rc,Ir[Kr+24]=Hc-Rc,Ir[Kr+8]=$c+Vc,Ir[Kr+56]=$c-Vc,Kr++}for(Hr=0;Hr<64;++Hr)as=Ir[Hr]*Mr[Hr],Tn[Hr]=as>0?as+.5|0:as-.5|0;return Tn}(Ni,or),Vr=0;Vr<64;++Vr)Ln[pi[Vr]]=Ar[Vr];var Wr=Ln[0]-er;er=Ln[0],Wr==0?nr(fr[0]):(nr(fr[Sn[hr=32767+Wr]]),nr(En[hr]));for(var tr=63;tr>0&&Ln[tr]==0;)tr--;if(tr==0)return nr(vr),er;for(var pr,ur=1;ur<=tr;){for(var Ki=ur;Ln[ur]==0&&ur<=tr;)++ur;var Nr=ur-Ki;if(Nr>=16){pr=Nr>>4;for(var Or=1;Or<=pr;++Or)nr(_r);Nr&=15}hr=32767+Ln[ur],nr(mr[(Nr<<4)+Sn[hr]]),nr(En[hr]),ur++}return tr!=63&&nr(vr),er}function br(Ni){Ni=Math.min(Math.max(Ni,1),100),Be!=Ni&&(function(or){for(var er=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fr=0;fr<64;fr++){var mr=Ue((er[fr]*or+50)/100);mr=Math.min(Math.max(mr,1),255),He[pi[fr]]=mr}for(var hr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],vr=0;vr<64;vr++){var _r=Ue((hr[vr]*or+50)/100);_r=Math.min(Math.max(_r,1),255),We[pi[vr]]=_r}for(var Ar=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Vr=0,Wr=0;Wr<8;Wr++)for(var tr=0;tr<8;tr++)Cn[Vr]=1/(He[pi[Vr]]*Ar[Wr]*Ar[tr]*8),An[Vr]=1/(We[pi[Vr]]*Ar[Wr]*Ar[tr]*8),Vr++}(Ni<50?Math.floor(5e3/Ni):Math.floor(200-2*Ni)),Be=Ni)}this.encode=function(Ni,or){or&&br(or),Bn=new Array,ti=0,ni=7,cr(65496),cr(65504),cr(16),ar(74),ar(70),ar(73),ar(70),ar(0),ar(1),ar(1),ar(0),cr(1),cr(1),ar(0),ar(0),function(){cr(65499),cr(132),ar(0);for(var wr=0;wr<64;wr++)ar(He[wr]);ar(1);for(var Cr=0;Cr<64;Cr++)ar(We[Cr])}(),function(wr,Cr){cr(65472),cr(17),ar(8),cr(Cr),cr(wr),ar(3),ar(1),ar(17),ar(0),ar(2),ar(17),ar(1),ar(3),ar(17),ar(1)}(Ni.width,Ni.height),function(){cr(65476),cr(418),ar(0);for(var wr=0;wr<16;wr++)ar(fi[wr+1]);for(var Cr=0;Cr<=11;Cr++)ar(Mi[Cr]);ar(16);for(var Er=0;Er<16;Er++)ar(Oi[Er+1]);for(var Sr=0;Sr<=161;Sr++)ar(ui[Sr]);ar(1);for(var Gr=0;Gr<16;Gr++)ar(li[Gr+1]);for(var zr=0;zr<=11;zr++)ar(Ri[zr]);ar(17);for(var $r=0;$r<16;$r++)ar(Pi[$r+1]);for(var Hr=0;Hr<=161;Hr++)ar(Fi[Hr])}(),cr(65498),cr(12),ar(3),ar(1),ar(0),ar(2),ar(17),ar(3),ar(17),ar(0),ar(63),ar(0);var er=0,fr=0,mr=0;ti=0,ni=7,this.encode.displayName="_encode_";for(var hr,vr,_r,Ar,Vr,Wr,tr,pr,ur,Ki=Ni.data,Nr=Ni.width,Or=Ni.height,Ir=4*Nr,Mr=0;Mr<Or;){for(hr=0;hr<Ir;){for(Vr=Ir*Mr+hr,tr=-1,pr=0,ur=0;ur<64;ur++)Wr=Vr+(pr=ur>>3)*Ir+(tr=4*(7&ur)),Mr+pr>=Or&&(Wr-=Ir*(Mr+1+pr-Or)),hr+tr>=Ir&&(Wr-=hr+tr-Ir+4),vr=Ki[Wr++],_r=Ki[Wr++],Ar=Ki[Wr++],ii[ur]=(vi[vr]+vi[_r+256>>0]+vi[Ar+512>>0]>>16)-128,si[ur]=(vi[vr+768>>0]+vi[_r+1024>>0]+vi[Ar+1280>>0]>>16)-128,oi[ur]=(vi[vr+1280>>0]+vi[_r+1536>>0]+vi[Ar+1792>>0]>>16)-128;er=sr(ii,Cn,er,e,Oe),fr=sr(si,An,fr,t,ke),mr=sr(oi,An,mr,t,ke),hr+=32}Mr+=8}if(ni>=0){var Tr=[];Tr[1]=ni+1,Tr[0]=(1<<ni+1)-1,nr(Tr)}return cr(65497),new Uint8Array(Bn)},Te=Te||50,function(){for(var Ni=String.fromCharCode,or=0;or<256;or++)ci[or]=Ni(or)}(),e=Hi(fi,Mi),t=Hi(li,Ri),Oe=Hi(Oi,ui),ke=Hi(Pi,Fi),function(){for(var Ni=1,or=2,er=1;er<=15;er++){for(var fr=Ni;fr<or;fr++)Sn[32767+fr]=er,En[32767+fr]=[],En[32767+fr][1]=er,En[32767+fr][0]=fr;for(var mr=-(or-1);mr<=-Ni;mr++)Sn[32767+mr]=er,En[32767+mr]=[],En[32767+mr][1]=er,En[32767+mr][0]=or-1+mr;Ni<<=1,or<<=1}}(),function(){for(var Ni=0;Ni<256;Ni++)vi[Ni]=19595*Ni,vi[Ni+256>>0]=38470*Ni,vi[Ni+512>>0]=7471*Ni+32768,vi[Ni+768>>0]=-11059*Ni,vi[Ni+1024>>0]=-21709*Ni,vi[Ni+1280>>0]=32768*Ni+8421375,vi[Ni+1536>>0]=-27439*Ni,vi[Ni+1792>>0]=-5329*Ni}(),br(Te)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Te,e){if(this.pos=0,this.buffer=Te,this.datav=new DataView(Te.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Te){function e(fi){if(!fi)throw Error("assert :P")}function t(fi,Mi,Oi){for(var ui=0;4>ui;ui++)if(fi[Mi+ui]!=Oi.charCodeAt(ui))return!0;return!1}function Oe(fi,Mi,Oi,ui,li){for(var Ri=0;Ri<li;Ri++)fi[Mi+Ri]=Oi[ui+Ri]}function ke(fi,Mi,Oi,ui){for(var li=0;li<ui;li++)fi[Mi+li]=Oi}function Be(fi){return new Int32Array(fi)}function Ue(fi,Mi){for(var Oi=[],ui=0;ui<fi;ui++)Oi.push(new Mi);return Oi}function He(fi,Mi){var Oi=[];return function ui(li,Ri,Pi){for(var Fi=Pi[Ri],Hi=0;Hi<Fi&&(li.push(Pi.length>Ri+1?[]:new Mi),!(Pi.length<Ri+1));Hi++)ui(li[Hi],Ri+1,Pi)}(Oi,0,fi),Oi}var We=function(){var fi=this;function Mi(ei,ri){for(var di=1<<ri-1>>>0;ei&di;)di>>>=1;return di?(ei&di-1)+di:ei}function Oi(ei,ri,di,Li,ji){e(!(Li%di));do ei[ri+(Li-=di)]=ji;while(0<Li)}function ui(ei,ri,di,Li,ji){if(e(2328>=ji),512>=ji)var ir=Be(512);else if((ir=Be(ji))==null)return 0;return function(rr,lr,dr,gr,Lr,Br){var jr,Dr,ts=lr,qr=1<<dr,Rr=Be(16),kr=Be(16);for(e(Lr!=0),e(gr!=null),e(rr!=null),e(0<dr),Dr=0;Dr<Lr;++Dr){if(15<gr[Dr])return 0;++Rr[gr[Dr]]}if(Rr[0]==Lr)return 0;for(kr[1]=0,jr=1;15>jr;++jr){if(Rr[jr]>1<<jr)return 0;kr[jr+1]=kr[jr]+Rr[jr]}for(Dr=0;Dr<Lr;++Dr)jr=gr[Dr],0<gr[Dr]&&(Br[kr[jr]++]=Dr);if(kr[15]==1)return(gr=new li).g=0,gr.value=Br[0],Oi(rr,ts,1,qr,gr),qr;var Qr,rs=-1,es=qr-1,_s=0,cs=1,ws=1,gs=1<<dr;for(Dr=0,jr=1,Lr=2;jr<=dr;++jr,Lr<<=1){if(cs+=ws<<=1,0>(ws-=Rr[jr]))return 0;for(;0<Rr[jr];--Rr[jr])(gr=new li).g=jr,gr.value=Br[Dr++],Oi(rr,ts+_s,Lr,gs,gr),_s=Mi(_s,jr)}for(jr=dr+1,Lr=2;15>=jr;++jr,Lr<<=1){if(cs+=ws<<=1,0>(ws-=Rr[jr]))return 0;for(;0<Rr[jr];--Rr[jr]){if(gr=new li,(_s&es)!=rs){for(ts+=gs,Qr=1<<(rs=jr)-dr;15>rs&&!(0>=(Qr-=Rr[rs]));)++rs,Qr<<=1;qr+=gs=1<<(Qr=rs-dr),rr[lr+(rs=_s&es)].g=Qr+dr,rr[lr+rs].value=ts-lr-rs}gr.g=jr-dr,gr.value=Br[Dr++],Oi(rr,ts+(_s>>dr),Lr,gs,gr),_s=Mi(_s,jr)}}return cs!=2*kr[15]-1?0:qr}(ei,ri,di,Li,ji,ir)}function li(){this.value=this.g=0}function Ri(){this.value=this.g=0}function Pi(){this.G=Ue(5,li),this.H=Be(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Ue(aa,Ri)}function Fi(ei,ri,di,Li){e(ei!=null),e(ri!=null),e(2147483648>Li),ei.Ca=254,ei.I=0,ei.b=-8,ei.Ka=0,ei.oa=ri,ei.pa=di,ei.Jd=ri,ei.Yc=di+Li,ei.Zc=4<=Li?di+Li-4+1:di,hr(ei)}function Hi(ei,ri){for(var di=0;0<ri--;)di|=_r(ei,128)<<ri;return di}function nr(ei,ri){var di=Hi(ei,ri);return vr(ei)?-di:di}function ar(ei,ri,di,Li){var ji,ir=0;for(e(ei!=null),e(ri!=null),e(4294967288>Li),ei.Sb=Li,ei.Ra=0,ei.u=0,ei.h=0,4<Li&&(Li=4),ji=0;ji<Li;++ji)ir+=ri[di+ji]<<8*ji;ei.Ra=ir,ei.bb=Li,ei.oa=ri,ei.pa=di}function cr(ei){for(;8<=ei.u&&ei.bb<ei.Sb;)ei.Ra>>>=8,ei.Ra+=ei.oa[ei.pa+ei.bb]<<au-8>>>0,++ei.bb,ei.u-=8;er(ei)&&(ei.h=1,ei.u=0)}function sr(ei,ri){if(e(0<=ri),!ei.h&&ri<=su){var di=or(ei)&ru[ri];return ei.u+=ri,cr(ei),di}return ei.h=1,ei.u=0}function br(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ni(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function or(ei){return ei.Ra>>>(ei.u&au-1)>>>0}function er(ei){return e(ei.bb<=ei.Sb),ei.h||ei.bb==ei.Sb&&ei.u>au}function fr(ei,ri){ei.u=ri,ei.h=er(ei)}function mr(ei){ei.u>=ju&&(e(ei.u>=ju),cr(ei))}function hr(ei){e(ei!=null&&ei.oa!=null),ei.pa<ei.Zc?(ei.I=(ei.oa[ei.pa++]|ei.I<<8)>>>0,ei.b+=8):(e(ei!=null&&ei.oa!=null),ei.pa<ei.Yc?(ei.b+=8,ei.I=ei.oa[ei.pa++]|ei.I<<8):ei.Ka?ei.b=0:(ei.I<<=8,ei.b+=8,ei.Ka=1))}function vr(ei){return Hi(ei,1)}function _r(ei,ri){var di=ei.Ca;0>ei.b&&hr(ei);var Li=ei.b,ji=di*ri>>>8,ir=(ei.I>>>Li>ji)+0;for(ir?(di-=ji,ei.I-=ji+1<<Li>>>0):di=ji+1,Li=di,ji=0;256<=Li;)ji+=8,Li>>=8;return Li=7^ji+La[Li],ei.b-=Li,ei.Ca=(di<<Li)-1,ir}function Ar(ei,ri,di){ei[ri+0]=di>>24&255,ei[ri+1]=di>>16&255,ei[ri+2]=di>>8&255,ei[ri+3]=di>>0&255}function Vr(ei,ri){return ei[ri+0]<<0|ei[ri+1]<<8}function Wr(ei,ri){return Vr(ei,ri)|ei[ri+2]<<16}function tr(ei,ri){return Vr(ei,ri)|Vr(ei,ri+2)<<16}function pr(ei,ri){var di=1<<ri;return e(ei!=null),e(0<ri),ei.X=Be(di),ei.X==null?0:(ei.Mb=32-ri,ei.Xa=ri,1)}function ur(ei,ri){e(ei!=null),e(ri!=null),e(ei.Xa==ri.Xa),Oe(ri.X,0,ei.X,0,1<<ri.Xa)}function Ki(){this.X=[],this.Xa=this.Mb=0}function Nr(ei,ri,di,Li){e(di!=null),e(Li!=null);var ji=di[0],ir=Li[0];return ji==0&&(ji=(ei*ir+ri/2)/ri),ir==0&&(ir=(ri*ji+ei/2)/ei),0>=ji||0>=ir?0:(di[0]=ji,Li[0]=ir,1)}function Or(ei,ri){return ei+(1<<ri)-1>>>ri}function Ir(ei,ri){return((4278255360&ei)+(4278255360&ri)>>>0&4278255360)+((16711935&ei)+(16711935&ri)>>>0&16711935)>>>0}function Mr(ei,ri){fi[ri]=function(di,Li,ji,ir,rr,lr,dr){var gr;for(gr=0;gr<rr;++gr){var Lr=fi[ei](lr[dr+gr-1],ji,ir+gr);lr[dr+gr]=Ir(di[Li+gr],Lr)}}}function Tr(){this.ud=this.hd=this.jd=0}function wr(ei,ri){return((4278124286&(ei^ri))>>>1)+(ei&ri)>>>0}function Cr(ei){return 0<=ei&&256>ei?ei:0>ei?0:255<ei?255:void 0}function Er(ei,ri){return Cr(ei+(ei-ri+.5>>1))}function Sr(ei,ri,di){return Math.abs(ri-di)-Math.abs(ei-di)}function Gr(ei,ri,di,Li,ji,ir,rr){for(Li=ir[rr-1],di=0;di<ji;++di)ir[rr+di]=Li=Ir(ei[ri+di],Li)}function zr(ei,ri,di,Li,ji){var ir;for(ir=0;ir<di;++ir){var rr=ei[ri+ir],lr=rr>>8&255,dr=16711935&(dr=(dr=16711935&rr)+((lr<<16)+lr));Li[ji+ir]=(4278255360&rr)+dr>>>0}}function $r(ei,ri){ri.jd=ei>>0&255,ri.hd=ei>>8&255,ri.ud=ei>>16&255}function Hr(ei,ri,di,Li,ji,ir){var rr;for(rr=0;rr<Li;++rr){var lr=ri[di+rr],dr=lr>>>8,gr=lr,Lr=255&(Lr=(Lr=lr>>>16)+((ei.jd<<24>>24)*(dr<<24>>24)>>>5));gr=255&(gr=(gr=gr+((ei.hd<<24>>24)*(dr<<24>>24)>>>5))+((ei.ud<<24>>24)*(Lr<<24>>24)>>>5)),ji[ir+rr]=(4278255360&lr)+(Lr<<16)+gr}}function as(ei,ri,di,Li,ji){fi[ri]=function(ir,rr,lr,dr,gr,Lr,Br,jr,Dr){for(dr=Br;dr<jr;++dr)for(Br=0;Br<Dr;++Br)gr[Lr++]=ji(lr[Li(ir[rr++])])},fi[ei]=function(ir,rr,lr,dr,gr,Lr,Br){var jr=8>>ir.b,Dr=ir.Ea,ts=ir.K[0],qr=ir.w;if(8>jr)for(ir=(1<<ir.b)-1,qr=(1<<jr)-1;rr<lr;++rr){var Rr,kr=0;for(Rr=0;Rr<Dr;++Rr)Rr&ir||(kr=Li(dr[gr++])),Lr[Br++]=ji(ts[kr&qr]),kr>>=jr}else fi["VP8LMapColor"+di](dr,gr,ts,qr,Lr,Br,rr,lr,Dr)}}function Kr(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var ir=ei[ri++];Li[ji++]=ir>>16&255,Li[ji++]=ir>>8&255,Li[ji++]=ir>>0&255}}function Ss(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var ir=ei[ri++];Li[ji++]=ir>>16&255,Li[ji++]=ir>>8&255,Li[ji++]=ir>>0&255,Li[ji++]=ir>>24&255}}function ms(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var ir=(rr=ei[ri++])>>16&240|rr>>12&15,rr=rr>>0&240|rr>>28&15;Li[ji++]=ir,Li[ji++]=rr}}function Rs(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var ir=(rr=ei[ri++])>>16&248|rr>>13&7,rr=rr>>5&224|rr>>3&31;Li[ji++]=ir,Li[ji++]=rr}}function Ps(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var ir=ei[ri++];Li[ji++]=ir>>0&255,Li[ji++]=ir>>8&255,Li[ji++]=ir>>16&255}}function ps(ei,ri,di,Li,ji,ir){if(ir==0)for(di=ri+di;ri<di;)Ar(Li,((ir=ei[ri++])[0]>>24|ir[1]>>8&65280|ir[2]<<8&16711680|ir[3]<<24)>>>0),ji+=32;else Oe(Li,ji,ei,ri,di)}function Is(ei,ri){fi[ri][0]=fi[ei+"0"],fi[ri][1]=fi[ei+"1"],fi[ri][2]=fi[ei+"2"],fi[ri][3]=fi[ei+"3"],fi[ri][4]=fi[ei+"4"],fi[ri][5]=fi[ei+"5"],fi[ri][6]=fi[ei+"6"],fi[ri][7]=fi[ei+"7"],fi[ri][8]=fi[ei+"8"],fi[ri][9]=fi[ei+"9"],fi[ri][10]=fi[ei+"10"],fi[ri][11]=fi[ei+"11"],fi[ri][12]=fi[ei+"12"],fi[ri][13]=fi[ei+"13"],fi[ri][14]=fi[ei+"0"],fi[ri][15]=fi[ei+"0"]}function As(ei){return ei==jh||ei==Vh||ei==Jd||ei==zh}function Fs(){this.eb=[],this.size=this.A=this.fb=0}function xs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Fs,this.f.kb=new xs,this.sd=null}function _o(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ls(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Es(ei){return alert("todo:WebPSamplerProcessPlane"),ei.T}function Ms(ei,ri){var di=ei.T,Li=ri.ba.f.RGBA,ji=Li.eb,ir=Li.fb+ei.ka*Li.A,rr=Za[ri.ba.S],lr=ei.y,dr=ei.O,gr=ei.f,Lr=ei.N,Br=ei.ea,jr=ei.W,Dr=ri.cc,ts=ri.dc,qr=ri.Mc,Rr=ri.Nc,kr=ei.ka,Qr=ei.ka+ei.T,rs=ei.U,es=rs+1>>1;for(kr==0?rr(lr,dr,null,null,gr,Lr,Br,jr,gr,Lr,Br,jr,ji,ir,null,null,rs):(rr(ri.ec,ri.fc,lr,dr,Dr,ts,qr,Rr,gr,Lr,Br,jr,ji,ir-Li.A,ji,ir,rs),++di);kr+2<Qr;kr+=2)Dr=gr,ts=Lr,qr=Br,Rr=jr,Lr+=ei.Rc,jr+=ei.Rc,ir+=2*Li.A,rr(lr,(dr+=2*ei.fa)-ei.fa,lr,dr,Dr,ts,qr,Rr,gr,Lr,Br,jr,ji,ir-Li.A,ji,ir,rs);return dr+=ei.fa,ei.j+Qr<ei.o?(Oe(ri.ec,ri.fc,lr,dr,rs),Oe(ri.cc,ri.dc,gr,Lr,es),Oe(ri.Mc,ri.Nc,Br,jr,es),di--):1&Qr||rr(lr,dr,null,null,gr,Lr,Br,jr,gr,Lr,Br,jr,ji,ir+Li.A,null,null,rs),di}function za(ei,ri,di){var Li=ei.F,ji=[ei.J];if(Li!=null){var ir=ei.U,rr=ri.ba.S,lr=rr==Zd||rr==Jd;ri=ri.ba.f.RGBA;var dr=[0],gr=ei.ka;dr[0]=ei.T,ei.Kb&&(gr==0?--dr[0]:(--gr,ji[0]-=ei.width),ei.j+ei.ka+ei.T==ei.o&&(dr[0]=ei.o-ei.j-gr));var Lr=ri.eb;gr=ri.fb+gr*ri.A,ei=yo(Li,ji[0],ei.width,ir,dr,Lr,gr+(lr?0:3),ri.A),e(di==dr),ei&&As(rr)&&Xa(Lr,gr,lr,ir,dr,ri.A)}return 0}function qs(ei){var ri=ei.ma,di=ri.ba.S,Li=11>di,ji=di==Yd||di==Xd||di==Zd||di==Uh||di==12||As(di);if(ri.memory=null,ri.Ib=null,ri.Jb=null,ri.Nd=null,!Bu(ri.Oa,ei,ji?11:12))return 0;if(ji&&As(di)&&ss(),ei.da)alert("todo:use_scaling");else{if(Li){if(ri.Ib=Es,ei.Kb){if(di=ei.U+1>>1,ri.memory=Be(ei.U+2*di),ri.memory==null)return 0;ri.ec=ri.memory,ri.fc=0,ri.cc=ri.ec,ri.dc=ri.fc+ei.U,ri.Mc=ri.cc,ri.Nc=ri.dc+di,ri.Ib=Ms,ss()}}else alert("todo:EmitYUV");ji&&(ri.Jb=za,Li&&Fr())}if(Li&&!mf){for(ei=0;256>ei;++ei)wp[ei]=89858*(ei-128)+th>>eh,Tp[ei]=-22014*(ei-128)+th,xp[ei]=-45773*(ei-128),Pp[ei]=113618*(ei-128)+th>>eh;for(ei=Yu;ei<qh;++ei)ri=76283*(ei-16)+th>>eh,Lp[ei-Yu]=Ga(ri,255),Rp[ei-Yu]=Ga(ri+8>>4,15);mf=1}return 1}function $o(ei){var ri=ei.ma,di=ei.U,Li=ei.T;return e(!(1&ei.ka)),0>=di||0>=Li?0:(di=ri.Ib(ei,ri),ri.Jb!=null&&ri.Jb(ei,ri,di),ri.Dc+=di,1)}function Ts(ei){ei.ma.memory=null}function Cs(ei,ri,di,Li){return sr(ei,8)!=47?0:(ri[0]=sr(ei,14)+1,di[0]=sr(ei,14)+1,Li[0]=sr(ei,1),sr(ei,3)!=0?0:!ei.h)}function ho(ei,ri){if(4>ei)return ei+1;var di=ei-2>>1;return(2+(1&ei)<<di)+sr(ri,di)+1}function Co(ei,ri){return 120<ri?ri-120:1<=(di=((di=hp[ri-1])>>4)*ei+(8-(15&di)))?di:1;var di}function Js(ei,ri,di){var Li=or(di),ji=ei[ri+=255&Li].g-8;return 0<ji&&(fr(di,di.u+8),Li=or(di),ri+=ei[ri].value,ri+=Li&(1<<ji)-1),fr(di,di.u+ei[ri].g),ei[ri].value}function Os(ei,ri,di){return di.g+=ei.g,di.value+=ei.value<<ri>>>0,e(8>=di.g),ei.g}function Us(ei,ri,di){var Li=ei.xc;return e((ri=Li==0?0:ei.vc[ei.md*(di>>Li)+(ri>>Li)])<ei.Wb),ei.Ya[ri]}function Vs(ei,ri,di,Li){var ji=ei.ab,ir=ei.c*ri,rr=ei.C;ri=rr+ri;var lr=di,dr=Li;for(Li=ei.Ta,di=ei.Ua;0<ji--;){var gr=ei.gc[ji],Lr=rr,Br=ri,jr=lr,Dr=dr,ts=(dr=Li,lr=di,gr.Ea);switch(e(Lr<Br),e(Br<=gr.nc),gr.hc){case 2:Fd(jr,Dr,(Br-Lr)*ts,dr,lr);break;case 0:var qr=Lr,Rr=Br,kr=dr,Qr=lr,rs=(gs=gr).Ea;qr==0&&(Fh(jr,Dr,null,null,1,kr,Qr),Gr(jr,Dr+1,0,0,rs-1,kr,Qr+1),Dr+=rs,Qr+=rs,++qr);for(var es=1<<gs.b,_s=es-1,cs=Or(rs,gs.b),ws=gs.K,gs=gs.w+(qr>>gs.b)*cs;qr<Rr;){var Ws=ws,Ys=gs,Hs=1;for(Vu(jr,Dr,kr,Qr-rs,1,kr,Qr);Hs<rs;){var js=(Hs&~_s)+es;js>rs&&(js=rs),(0,yc[Ws[Ys++]>>8&15])(jr,Dr+ +Hs,kr,Qr+Hs-rs,js-Hs,kr,Qr+Hs),Hs=js}Dr+=rs,Qr+=rs,++qr&_s||(gs+=cs)}Br!=gr.nc&&Oe(dr,lr-ts,dr,lr+(Br-Lr-1)*ts,ts);break;case 1:for(ts=jr,Rr=Dr,rs=(jr=gr.Ea)-(Qr=jr&~(kr=(Dr=1<<gr.b)-1)),qr=Or(jr,gr.b),es=gr.K,gr=gr.w+(Lr>>gr.b)*qr;Lr<Br;){for(_s=es,cs=gr,ws=new Tr,gs=Rr+Qr,Ws=Rr+jr;Rr<gs;)$r(_s[cs++],ws),Dc(ws,ts,Rr,Dr,dr,lr),Rr+=Dr,lr+=Dr;Rr<Ws&&($r(_s[cs++],ws),Dc(ws,ts,Rr,rs,dr,lr),Rr+=rs,lr+=rs),++Lr&kr||(gr+=qr)}break;case 3:if(jr==dr&&Dr==lr&&0<gr.b){for(Rr=dr,jr=ts=lr+(Br-Lr)*ts-(Qr=(Br-Lr)*Or(gr.Ea,gr.b)),Dr=dr,kr=lr,qr=[],Qr=(rs=Qr)-1;0<=Qr;--Qr)qr[Qr]=Dr[kr+Qr];for(Qr=rs-1;0<=Qr;--Qr)Rr[jr+Qr]=qr[Qr];qa(gr,Lr,Br,dr,ts,dr,lr)}else qa(gr,Lr,Br,jr,Dr,dr,lr)}lr=Li,dr=di}dr!=di&&Oe(Li,di,lr,dr,ir)}function ya(ei,ri){var di=ei.V,Li=ei.Ba+ei.c*ei.C,ji=ri-ei.C;if(e(ri<=ei.l.o),e(16>=ji),0<ji){var ir=ei.l,rr=ei.Ta,lr=ei.Ua,dr=ir.width;if(Vs(ei,ji,di,Li),ji=lr=[lr],e((di=ei.C)<(Li=ri)),e(ir.v<ir.va),Li>ir.o&&(Li=ir.o),di<ir.j){var gr=ir.j-di;di=ir.j,ji[0]+=gr*dr}if(di>=Li?di=0:(ji[0]+=4*ir.v,ir.ka=di-ir.j,ir.U=ir.va-ir.v,ir.T=Li-di,di=1),di){if(lr=lr[0],11>(di=ei.ca).S){var Lr=di.f.RGBA,Br=(Li=di.S,ji=ir.U,ir=ir.T,gr=Lr.eb,Lr.A),jr=ir;for(Lr=Lr.fb+ei.Ma*Lr.A;0<jr--;){var Dr=rr,ts=lr,qr=ji,Rr=gr,kr=Lr;switch(Li){case Wd:Ra(Dr,ts,qr,Rr,kr);break;case Yd:ga(Dr,ts,qr,Rr,kr);break;case jh:ga(Dr,ts,qr,Rr,kr),Xa(Rr,kr,0,qr,1,0);break;case af:ac(Dr,ts,qr,Rr,kr);break;case Xd:ps(Dr,ts,qr,Rr,kr,1);break;case Vh:ps(Dr,ts,qr,Rr,kr,1),Xa(Rr,kr,0,qr,1,0);break;case Zd:ps(Dr,ts,qr,Rr,kr,0);break;case Jd:ps(Dr,ts,qr,Rr,kr,0),Xa(Rr,kr,1,qr,1,0);break;case Uh:_c(Dr,ts,qr,Rr,kr);break;case zh:_c(Dr,ts,qr,Rr,kr),go(Rr,kr,qr,1,0);break;case lf:oc(Dr,ts,qr,Rr,kr);break;default:e(0)}lr+=dr,Lr+=Br}ei.Ma+=ir}else alert("todo:EmitRescaledRowsYUVA");e(ei.Ma<=di.height)}}ei.C=ri,e(ei.C<=ei.i)}function pa(ei){var ri;if(0<ei.ua)return 0;for(ri=0;ri<ei.Wb;++ri){var di=ei.Ya[ri].G,Li=ei.Ya[ri].H;if(0<di[1][Li[1]+0].g||0<di[2][Li[2]+0].g||0<di[3][Li[3]+0].g)return 0}return 1}function Aa(ei,ri,di,Li,ji,ir){if(ei.Z!=0){var rr=ei.qd,lr=ei.rd;for(e(Sc[ei.Z]!=null);ri<di;++ri)Sc[ei.Z](rr,lr,Li,ji,Li,ji,ir),rr=Li,lr=ji,ji+=ir;ei.qd=rr,ei.rd=lr}}function ka(ei,ri){var di=ei.l.ma,Li=di.Z==0||di.Z==1?ei.l.j:ei.C;if(Li=ei.C<Li?Li:ei.C,e(ri<=ei.l.o),ri>Li){var ji=ei.l.width,ir=di.ca,rr=di.tb+ji*Li,lr=ei.V,dr=ei.Ba+ei.c*Li,gr=ei.gc;e(ei.ab==1),e(gr[0].hc==3),Bd(gr[0],Li,ri,lr,dr,ir,rr),Aa(di,Li,ri,ir,rr,ji)}ei.C=ei.Ma=ri}function Pa(ei,ri,di,Li,ji,ir,rr){var lr=ei.$/Li,dr=ei.$%Li,gr=ei.m,Lr=ei.s,Br=di+ei.$,jr=Br;ji=di+Li*ji;var Dr=di+Li*ir,ts=280+Lr.ua,qr=ei.Pb?lr:16777216,Rr=0<Lr.ua?Lr.Wa:null,kr=Lr.wc,Qr=Br<Dr?Us(Lr,dr,lr):null;e(ei.C<ir),e(Dr<=ji);var rs=!1;e:for(;;){for(;rs||Br<Dr;){var es=0;if(lr>=qr){var _s=Br-di;e((qr=ei).Pb),qr.wd=qr.m,qr.xd=_s,0<qr.s.ua&&ur(qr.s.Wa,qr.s.vb),qr=lr+pp}if(dr&kr||(Qr=Us(Lr,dr,lr)),e(Qr!=null),Qr.Qb&&(ri[Br]=Qr.qb,rs=!0),!rs)if(mr(gr),Qr.jc){es=gr,_s=ri;var cs=Br,ws=Qr.pd[or(es)&aa-1];e(Qr.jc),256>ws.g?(fr(es,es.u+ws.g),_s[cs]=ws.value,es=0):(fr(es,es.u+ws.g-256),e(256<=ws.value),es=ws.value),es==0&&(rs=!0)}else es=Js(Qr.G[0],Qr.H[0],gr);if(gr.h)break;if(rs||256>es){if(!rs)if(Qr.nd)ri[Br]=(Qr.qb|es<<8)>>>0;else{if(mr(gr),rs=Js(Qr.G[1],Qr.H[1],gr),mr(gr),_s=Js(Qr.G[2],Qr.H[2],gr),cs=Js(Qr.G[3],Qr.H[3],gr),gr.h)break;ri[Br]=(cs<<24|rs<<16|es<<8|_s)>>>0}if(rs=!1,++Br,++dr>=Li&&(dr=0,++lr,rr!=null&&lr<=ir&&!(lr%16)&&rr(ei,lr),Rr!=null))for(;jr<Br;)es=ri[jr++],Rr.X[(506832829*es&4294967295)>>>Rr.Mb]=es}else if(280>es){if(es=ho(es-256,gr),_s=Js(Qr.G[4],Qr.H[4],gr),mr(gr),_s=Co(Li,_s=ho(_s,gr)),gr.h)break;if(Br-di<_s||ji-Br<es)break e;for(cs=0;cs<es;++cs)ri[Br+cs]=ri[Br+cs-_s];for(Br+=es,dr+=es;dr>=Li;)dr-=Li,++lr,rr!=null&&lr<=ir&&!(lr%16)&&rr(ei,lr);if(e(Br<=ji),dr&kr&&(Qr=Us(Lr,dr,lr)),Rr!=null)for(;jr<Br;)es=ri[jr++],Rr.X[(506832829*es&4294967295)>>>Rr.Mb]=es}else{if(!(es<ts))break e;for(rs=es-280,e(Rr!=null);jr<Br;)es=ri[jr++],Rr.X[(506832829*es&4294967295)>>>Rr.Mb]=es;es=Br,e(!(rs>>>(_s=Rr).Xa)),ri[es]=_s.X[rs],rs=!0}rs||e(gr.h==er(gr))}if(ei.Pb&&gr.h&&Br<ji)e(ei.m.h),ei.a=5,ei.m=ei.wd,ei.$=ei.xd,0<ei.s.ua&&ur(ei.s.vb,ei.s.Wa);else{if(gr.h)break e;rr!=null&&rr(ei,lr>ir?ir:lr),ei.a=0,ei.$=Br-di}return 1}return ei.a=3,0}function sa(ei){e(ei!=null),ei.vc=null,ei.yc=null,ei.Ya=null;var ri=ei.Wa;ri!=null&&(ri.X=null),ei.vb=null,e(ei!=null)}function oa(){var ei=new Gh;return ei==null?null:(ei.a=0,ei.xb=df,Is("Predictor","VP8LPredictors"),Is("Predictor","VP8LPredictors_C"),Is("PredictorAdd","VP8LPredictorsAdd"),Is("PredictorAdd","VP8LPredictorsAdd_C"),Fd=zr,Dc=Hr,Ra=Kr,ga=Ss,_c=ms,oc=Rs,ac=Ps,fi.VP8LMapColor32b=cu,fi.VP8LMapColor8b=Ud,ei)}function Dl(ei,ri,di,Li,ji){var ir=1,rr=[ei],lr=[ri],dr=Li.m,gr=Li.s,Lr=null,Br=0;e:for(;;){if(di)for(;ir&&sr(dr,1);){var jr=rr,Dr=lr,ts=Li,qr=1,Rr=ts.m,kr=ts.gc[ts.ab],Qr=sr(Rr,2);if(ts.Oc&1<<Qr)ir=0;else{switch(ts.Oc|=1<<Qr,kr.hc=Qr,kr.Ea=jr[0],kr.nc=Dr[0],kr.K=[null],++ts.ab,e(4>=ts.ab),Qr){case 0:case 1:kr.b=sr(Rr,3)+2,qr=Dl(Or(kr.Ea,kr.b),Or(kr.nc,kr.b),0,ts,kr.K),kr.K=kr.K[0];break;case 3:var rs,es=sr(Rr,8)+1,_s=16<es?0:4<es?1:2<es?2:3;if(jr[0]=Or(kr.Ea,_s),kr.b=_s,rs=qr=Dl(es,1,0,ts,kr.K)){var cs,ws=es,gs=kr,Ws=1<<(8>>gs.b),Ys=Be(Ws);if(Ys==null)rs=0;else{var Hs=gs.K[0],js=gs.w;for(Ys[0]=gs.K[0][0],cs=1;cs<1*ws;++cs)Ys[cs]=Ir(Hs[js+cs],Ys[cs-1]);for(;cs<4*Ws;++cs)Ys[cs]=0;gs.K[0]=null,gs.K[0]=Ys,rs=1}}qr=rs;break;case 2:break;default:e(0)}ir=qr}}if(rr=rr[0],lr=lr[0],ir&&sr(dr,1)&&!(ir=1<=(Br=sr(dr,4))&&11>=Br)){Li.a=3;break e}var Qs;if(Qs=ir)t:{var Ks,Bs,Jo,Ma=Li,ea=rr,Na=lr,Xs=Br,Ba=di,Ua=Ma.m,ia=Ma.s,la=[null],va=1,Ja=0,ic=fp[Xs];n:for(;;){if(Ba&&sr(Ua,1)){var ra=sr(Ua,3)+2,hc=Or(ea,ra),jc=Or(Na,ra),pu=hc*jc;if(!Dl(hc,jc,0,Ma,la))break n;for(la=la[0],ia.xc=ra,Ks=0;Ks<pu;++Ks){var bc=la[Ks]>>8&65535;la[Ks]=bc,bc>=va&&(va=bc+1)}}if(Ua.h)break n;for(Bs=0;5>Bs;++Bs){var wo=cf[Bs];!Bs&&0<Xs&&(wo+=1<<Xs),Ja<wo&&(Ja=wo)}var Wh=Ue(va*ic,li),_f=va,Cf=Ue(_f,Pi);if(Cf==null)var ih=null;else e(65536>=_f),ih=Cf;var Xu=Be(Ja);if(ih==null||Xu==null||Wh==null){Ma.a=1;break n}var rh=Wh;for(Ks=Jo=0;Ks<va;++Ks){var kl=ih[Ks],gu=kl.G,mu=kl.H,Af=0,sh=1,Ef=0;for(Bs=0;5>Bs;++Bs){wo=cf[Bs],gu[Bs]=rh,mu[Bs]=Jo,!Bs&&0<Xs&&(wo+=1<<Xs);r:{var oh,Yh=wo,ah=Ma,Ku=Xu,Np=rh,kp=Jo,Xh=0,Ic=ah.m,Dp=sr(Ic,1);if(ke(Ku,0,0,Yh),Dp){var Fp=sr(Ic,1)+1,Bp=sr(Ic,1),Sf=sr(Ic,Bp==0?1:8);Ku[Sf]=1,Fp==2&&(Ku[Sf=sr(Ic,8)]=1);var lh=1}else{var bf=Be(19),If=sr(Ic,4)+4;if(19<If){ah.a=3;var ch=0;break r}for(oh=0;oh<If;++oh)bf[dp[oh]]=sr(Ic,3);var Kh=void 0,Zu=void 0,wf=ah,Up=bf,uh=Yh,Pf=Ku,Zh=0,wc=wf.m,xf=8,Tf=Ue(128,li);i:for(;ui(Tf,0,7,Up,19);){if(sr(wc,1)){var jp=2+2*sr(wc,3);if((Kh=2+sr(wc,jp))>uh)break i}else Kh=uh;for(Zu=0;Zu<uh&&Kh--;){mr(wc);var Lf=Tf[0+(127&or(wc))];fr(wc,wc.u+Lf.g);var vu=Lf.value;if(16>vu)Pf[Zu++]=vu,vu!=0&&(xf=vu);else{var Vp=vu==16,Rf=vu-16,zp=cp[Rf],Mf=sr(wc,lp[Rf])+zp;if(Zu+Mf>uh)break i;for(var $p=Vp?xf:0;0<Mf--;)Pf[Zu++]=$p}}Zh=1;break i}Zh||(wf.a=3),lh=Zh}(lh=lh&&!Ic.h)&&(Xh=ui(Np,kp,8,Ku,Yh)),lh&&Xh!=0?ch=Xh:(ah.a=3,ch=0)}if(ch==0)break n;if(sh&&up[Bs]==1&&(sh=rh[Jo].g==0),Af+=rh[Jo].g,Jo+=ch,3>=Bs){var Ju,Jh=Xu[0];for(Ju=1;Ju<wo;++Ju)Xu[Ju]>Jh&&(Jh=Xu[Ju]);Ef+=Jh}}if(kl.nd=sh,kl.Qb=0,sh&&(kl.qb=(gu[3][mu[3]+0].value<<24|gu[1][mu[1]+0].value<<16|gu[2][mu[2]+0].value)>>>0,Af==0&&256>gu[0][mu[0]+0].value&&(kl.Qb=1,kl.qb+=gu[0][mu[0]+0].value<<8)),kl.jc=!kl.Qb&&6>Ef,kl.jc){var dh,fc=kl;for(dh=0;dh<aa;++dh){var Pc=dh,xc=fc.pd[Pc],hh=fc.G[0][fc.H[0]+Pc];256<=hh.value?(xc.g=hh.g+256,xc.value=hh.value):(xc.g=0,xc.value=0,Pc>>=Os(hh,8,xc),Pc>>=Os(fc.G[1][fc.H[1]+Pc],16,xc),Pc>>=Os(fc.G[2][fc.H[2]+Pc],0,xc),Os(fc.G[3][fc.H[3]+Pc],24,xc))}}}ia.vc=la,ia.Wb=va,ia.Ya=ih,ia.yc=Wh,Qs=1;break t}Qs=0}if(!(ir=Qs)){Li.a=3;break e}if(0<Br){if(gr.ua=1<<Br,!pr(gr.Wa,Br)){Li.a=1,ir=0;break e}}else gr.ua=0;var Qh=Li,Of=rr,Hp=lr,tf=Qh.s,nf=tf.xc;if(Qh.c=Of,Qh.i=Hp,tf.md=Or(Of,nf),tf.wc=nf==0?-1:(1<<nf)-1,di){Li.xb=Ap;break e}if((Lr=Be(rr*lr))==null){Li.a=1,ir=0;break e}ir=(ir=Pa(Li,Lr,0,rr,lr,lr,null))&&!dr.h;break e}return ir?(ji!=null?ji[0]=Lr:(e(Lr==null),e(di)),Li.$=0,di||sa(gr)):sa(gr),ir}function Rc(ei,ri){var di=ei.c*ei.i,Li=di+ri+16*ri;return e(ei.c<=ri),ei.V=Be(Li),ei.V==null?(ei.Ta=null,ei.Ua=0,ei.a=1,0):(ei.Ta=ei.V,ei.Ua=ei.Ba+di+ri,1)}function Vc(ei,ri){var di=ei.C,Li=ri-di,ji=ei.V,ir=ei.Ba+ei.c*di;for(e(ri<=ei.l.o);0<Li;){var rr=16<Li?16:Li,lr=ei.l.ma,dr=ei.l.width,gr=dr*rr,Lr=lr.ca,Br=lr.tb+dr*di,jr=ei.Ta,Dr=ei.Ua;Vs(ei,rr,ji,ir),ko(jr,Dr,Lr,Br,gr),Aa(lr,di,di+rr,Lr,Br,dr),Li-=rr,ji+=rr*ei.c,di+=rr}e(di==ri),ei.C=ei.Ma=ri}function zc(){this.ub=this.yd=this.td=this.Rb=0}function $c(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hc(){this.Fb=this.Bb=this.Cb=0,this.Zb=Be(4),this.Lb=Be(4)}function yd(){this.Yb=function(){var ei=[];return function ri(di,Li,ji){for(var ir=ji[Li],rr=0;rr<ir&&(di.push(ji.length>Li+1?[]:0),!(ji.length<Li+1));rr++)ri(di[rr],Li+1,ji)}(ei,0,[3,11]),ei}()}function ph(){this.jb=Be(3),this.Wc=He([4,8],yd),this.Xc=He([4,17],yd)}function gh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Be(4),this.od=new Be(4)}function qc(){this.ld=this.La=this.dd=this.tc=0}function _d(){this.Na=this.la=0}function mh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _u(){this.ad=Be(384),this.Za=0,this.Ob=Be(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vh(){this.uc=this.M=this.Nb=0,this.wa=Array(new qc),this.Y=0,this.ya=Array(new _u),this.aa=0,this.l=new Wc}function Cd(){this.y=Be(16),this.f=Be(8),this.ea=Be(8)}function yh(){this.cb=this.a=0,this.sc="",this.m=new br,this.Od=new zc,this.Kc=new $c,this.ed=new gh,this.Qa=new Hc,this.Ic=this.$c=this.Aa=0,this.D=new vh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Ue(8,br),this.ia=0,this.pb=Ue(4,mh),this.Pa=new ph,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Cd),this.Hd=0,this.rb=Array(new _d),this.sb=0,this.wa=Array(new qc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _u),this.L=this.aa=0,this.gd=He([4,2],qc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _h(){var ei=new yh;return ei!=null&&(ei.a=0,ei.sc="OK",ei.cb=0,ei.Xb=0,Wu||(Wu=Sd)),ei}function xo(ei,ri,di){return ei.a==0&&(ei.a=ri,ei.sc=di,ei.cb=0),0}function Ad(ei,ri,di){return 3<=di&&ei[ri+0]==157&&ei[ri+1]==1&&ei[ri+2]==42}function Ed(ei,ri){if(ei==null)return 0;if(ei.a=0,ei.sc="OK",ri==null)return xo(ei,2,"null VP8Io passed to VP8GetHeaders()");var di=ri.data,Li=ri.w,ji=ri.ha;if(4>ji)return xo(ei,7,"Truncated header.");var ir=di[Li+0]|di[Li+1]<<8|di[Li+2]<<16,rr=ei.Od;if(rr.Rb=!(1&ir),rr.td=ir>>1&7,rr.yd=ir>>4&1,rr.ub=ir>>5,3<rr.td)return xo(ei,3,"Incorrect keyframe parameters.");if(!rr.yd)return xo(ei,4,"Frame not displayable.");Li+=3,ji-=3;var lr=ei.Kc;if(rr.Rb){if(7>ji)return xo(ei,7,"cannot parse picture header");if(!Ad(di,Li,ji))return xo(ei,3,"Bad code word");lr.c=16383&(di[Li+4]<<8|di[Li+3]),lr.Td=di[Li+4]>>6,lr.i=16383&(di[Li+6]<<8|di[Li+5]),lr.Ud=di[Li+6]>>6,Li+=7,ji-=7,ei.za=lr.c+15>>4,ei.Ub=lr.i+15>>4,ri.width=lr.c,ri.height=lr.i,ri.Da=0,ri.j=0,ri.v=0,ri.va=ri.width,ri.o=ri.height,ri.da=0,ri.ib=ri.width,ri.hb=ri.height,ri.U=ri.width,ri.T=ri.height,ke((ir=ei.Pa).jb,0,255,ir.jb.length),e((ir=ei.Qa)!=null),ir.Cb=0,ir.Bb=0,ir.Fb=1,ke(ir.Zb,0,0,ir.Zb.length),ke(ir.Lb,0,0,ir.Lb)}if(rr.ub>ji)return xo(ei,7,"bad partition length");Fi(ir=ei.m,di,Li,rr.ub),Li+=rr.ub,ji-=rr.ub,rr.Rb&&(lr.Ld=vr(ir),lr.Kd=vr(ir)),lr=ei.Qa;var dr,gr=ei.Pa;if(e(ir!=null),e(lr!=null),lr.Cb=vr(ir),lr.Cb){if(lr.Bb=vr(ir),vr(ir)){for(lr.Fb=vr(ir),dr=0;4>dr;++dr)lr.Zb[dr]=vr(ir)?nr(ir,7):0;for(dr=0;4>dr;++dr)lr.Lb[dr]=vr(ir)?nr(ir,6):0}if(lr.Bb)for(dr=0;3>dr;++dr)gr.jb[dr]=vr(ir)?Hi(ir,8):255}else lr.Bb=0;if(ir.Ka)return xo(ei,3,"cannot parse segment header");if((lr=ei.ed).zd=vr(ir),lr.Tb=Hi(ir,6),lr.wb=Hi(ir,3),lr.Pc=vr(ir),lr.Pc&&vr(ir)){for(gr=0;4>gr;++gr)vr(ir)&&(lr.vd[gr]=nr(ir,6));for(gr=0;4>gr;++gr)vr(ir)&&(lr.od[gr]=nr(ir,6))}if(ei.L=lr.Tb==0?0:lr.zd?1:2,ir.Ka)return xo(ei,3,"cannot parse filter header");var Lr=ji;if(ji=dr=Li,Li=dr+Lr,lr=Lr,ei.Xb=(1<<Hi(ei.m,2))-1,Lr<3*(gr=ei.Xb))di=7;else{for(dr+=3*gr,lr-=3*gr,Lr=0;Lr<gr;++Lr){var Br=di[ji+0]|di[ji+1]<<8|di[ji+2]<<16;Br>lr&&(Br=lr),Fi(ei.Jc[+Lr],di,dr,Br),dr+=Br,lr-=Br,ji+=3}Fi(ei.Jc[+gr],di,dr,lr),di=dr<Li?0:5}if(di!=0)return xo(ei,di,"cannot parse partitions");for(di=Hi(dr=ei.m,7),ji=vr(dr)?nr(dr,4):0,Li=vr(dr)?nr(dr,4):0,lr=vr(dr)?nr(dr,4):0,gr=vr(dr)?nr(dr,4):0,dr=vr(dr)?nr(dr,4):0,Lr=ei.Qa,Br=0;4>Br;++Br){if(Lr.Cb){var jr=Lr.Zb[Br];Lr.Fb||(jr+=di)}else{if(0<Br){ei.pb[Br]=ei.pb[0];continue}jr=di}var Dr=ei.pb[Br];Dr.Sc[0]=$h[Ga(jr+ji,127)],Dr.Sc[1]=Hh[Ga(jr+0,127)],Dr.Eb[0]=2*$h[Ga(jr+Li,127)],Dr.Eb[1]=101581*Hh[Ga(jr+lr,127)]>>16,8>Dr.Eb[1]&&(Dr.Eb[1]=8),Dr.Qc[0]=$h[Ga(jr+gr,117)],Dr.Qc[1]=Hh[Ga(jr+dr,127)],Dr.lc=jr+dr}if(!rr.Rb)return xo(ei,4,"Not a key frame.");for(vr(ir),rr=ei.Pa,di=0;4>di;++di){for(ji=0;8>ji;++ji)for(Li=0;3>Li;++Li)for(lr=0;11>lr;++lr)gr=_r(ir,_p[di][ji][Li][lr])?Hi(ir,8):vp[di][ji][Li][lr],rr.Wc[di][ji].Yb[Li][lr]=gr;for(ji=0;17>ji;++ji)rr.Xc[di][ji]=rr.Wc[di][Cp[ji]]}return ei.kc=vr(ir),ei.kc&&(ei.Bd=Hi(ir,8)),ei.cb=1}function Sd(ei,ri,di,Li,ji,ir,rr){var lr=ri[ji].Yb[di];for(di=0;16>ji;++ji){if(!_r(ei,lr[di+0]))return ji;for(;!_r(ei,lr[di+1]);)if(lr=ri[++ji].Yb[0],di=0,ji==16)return 16;var dr=ri[ji+1].Yb;if(_r(ei,lr[di+2])){var gr=ei,Lr=0;if(_r(gr,(jr=lr)[(Br=di)+3]))if(_r(gr,jr[Br+6])){for(lr=0,Br=2*(Lr=_r(gr,jr[Br+8]))+(jr=_r(gr,jr[Br+9+Lr])),Lr=0,jr=gp[Br];jr[lr];++lr)Lr+=Lr+_r(gr,jr[lr]);Lr+=3+(8<<Br)}else _r(gr,jr[Br+7])?(Lr=7+2*_r(gr,165),Lr+=_r(gr,145)):Lr=5+_r(gr,159);else Lr=_r(gr,jr[Br+4])?3+_r(gr,jr[Br+5]):2;lr=dr[2]}else Lr=1,lr=dr[1];dr=rr+mp[ji],0>(gr=ei).b&&hr(gr);var Br,jr=gr.b,Dr=(Br=gr.Ca>>1)-(gr.I>>jr)>>31;--gr.b,gr.Ca+=Dr,gr.Ca|=1,gr.I-=(Br+1&Dr)<<jr,ir[dr]=((Lr^Dr)-Dr)*Li[(0<ji)+0]}return 16}function Au(ei){var ri=ei.rb[ei.sb-1];ri.la=0,ri.Na=0,ke(ei.zc,0,0,ei.zc.length),ei.ja=0}function Ch(ei,ri){if(ei==null)return 0;if(ri==null)return xo(ei,2,"NULL VP8Io parameter in VP8Decode().");if(!ei.cb&&!Ed(ei,ri))return 0;if(e(ei.cb),ri.ac==null||ri.ac(ri)){ri.ob&&(ei.L=0);var di=nh[ei.L];if(ei.L==2?(ei.yb=0,ei.zb=0):(ei.yb=ri.v-di>>4,ei.zb=ri.j-di>>4,0>ei.yb&&(ei.yb=0),0>ei.zb&&(ei.zb=0)),ei.Va=ri.o+15+di>>4,ei.Hb=ri.va+15+di>>4,ei.Hb>ei.za&&(ei.Hb=ei.za),ei.Va>ei.Ub&&(ei.Va=ei.Ub),0<ei.L){var Li=ei.ed;for(di=0;4>di;++di){var ji;if(ei.Qa.Cb){var ir=ei.Qa.Lb[di];ei.Qa.Fb||(ir+=Li.Tb)}else ir=Li.Tb;for(ji=0;1>=ji;++ji){var rr=ei.gd[di][ji],lr=ir;if(Li.Pc&&(lr+=Li.vd[0],ji&&(lr+=Li.od[0])),0<(lr=0>lr?0:63<lr?63:lr)){var dr=lr;0<Li.wb&&(dr=4<Li.wb?dr>>2:dr>>1)>9-Li.wb&&(dr=9-Li.wb),1>dr&&(dr=1),rr.dd=dr,rr.tc=2*lr+dr,rr.ld=40<=lr?2:15<=lr?1:0}else rr.tc=0;rr.La=ji}}}di=0}else xo(ei,6,"Frame setup failed"),di=ei.a;if(di=di==0){if(di){ei.$c=0,0<ei.Aa||(ei.Ic=Op);e:{di=ei.Ic,Li=4*(dr=ei.za);var gr=32*dr,Lr=dr+1,Br=0<ei.L?dr*(0<ei.Aa?2:1):0,jr=(ei.Aa==2?2:1)*dr;if((rr=Li+832+(ji=3*(16*di+nh[ei.L])/2*gr)+(ir=ei.Fa!=null&&0<ei.Fa.length?ei.Kc.c*ei.Kc.i:0))!=rr)di=0;else{if(rr>ei.Vb){if(ei.Vb=0,ei.Ec=Be(rr),ei.Fc=0,ei.Ec==null){di=xo(ei,1,"no memory during frame initialization.");break e}ei.Vb=rr}rr=ei.Ec,lr=ei.Fc,ei.Ac=rr,ei.Bc=lr,lr+=Li,ei.Gd=Ue(gr,Cd),ei.Hd=0,ei.rb=Ue(Lr+1,_d),ei.sb=1,ei.wa=Br?Ue(Br,qc):null,ei.Y=0,ei.D.Nb=0,ei.D.wa=ei.wa,ei.D.Y=ei.Y,0<ei.Aa&&(ei.D.Y+=dr),e(!0),ei.oc=rr,ei.pc=lr,lr+=832,ei.ya=Ue(jr,_u),ei.aa=0,ei.D.ya=ei.ya,ei.D.aa=ei.aa,ei.Aa==2&&(ei.D.aa+=dr),ei.R=16*dr,ei.B=8*dr,dr=(gr=nh[ei.L])*ei.R,gr=gr/2*ei.B,ei.sa=rr,ei.ta=lr+dr,ei.qa=ei.sa,ei.ra=ei.ta+16*di*ei.R+gr,ei.Ha=ei.qa,ei.Ia=ei.ra+8*di*ei.B+gr,ei.$c=0,lr+=ji,ei.mb=ir?rr:null,ei.nb=ir?lr:null,e(lr+ir<=ei.Fc+ei.Vb),Au(ei),ke(ei.Ac,ei.Bc,0,Li),di=1}}if(di){if(ri.ka=0,ri.y=ei.sa,ri.O=ei.ta,ri.f=ei.qa,ri.N=ei.ra,ri.ea=ei.Ha,ri.Vd=ei.Ia,ri.fa=ei.R,ri.Rc=ei.B,ri.F=null,ri.J=0,!Vd){for(di=-255;255>=di;++di)ta[255+di]=0>di?-di:di;for(di=-1020;1020>=di;++di)uc[1020+di]=-128>di?-128:127<di?127:di;for(di=-112;112>=di;++di)qu[112+di]=-16>di?-16:15<di?15:di;for(di=-255;510>=di;++di)fu[255+di]=0>di?0:255<di?255:di;Vd=1}uu=Sh,cc=Ah,zu=Id,ma=Eh,Wa=wd,To=bd,du=Lu,jd=Nc,$u=Dh,Gc=Ru,Fc=kh,Cc=Qc,Bc=Mu,hu=kd,Uc=Nd,Ac=tc,Hu=sc,Ya=Nh,wl[0]=$l,wl[1]=bh,wl[2]=xh,wl[3]=Th,wl[4]=Td,wl[5]=Zc,wl[6]=Ld,wl[7]=wu,wl[8]=Rh,wl[9]=Lh,Ec[0]=Pd,Ec[1]=wh,Ec[2]=rc,Ec[3]=Xc,Ec[4]=da,Ec[5]=Ph,Ec[6]=xd,dc[0]=gc,dc[1]=Ih,dc[2]=Mh,dc[3]=Pu,dc[4]=Oc,dc[5]=Oh,dc[6]=xu,di=1}else di=0}di&&(di=function(Dr,ts){for(Dr.M=0;Dr.M<Dr.Va;++Dr.M){var qr,Rr=Dr.Jc[Dr.M&Dr.Xb],kr=Dr.m,Qr=Dr;for(qr=0;qr<Qr.za;++qr){var rs=kr,es=Qr,_s=es.Ac,cs=es.Bc+4*qr,ws=es.zc,gs=es.ya[es.aa+qr];if(es.Qa.Bb?gs.$b=_r(rs,es.Pa.jb[0])?2+_r(rs,es.Pa.jb[2]):_r(rs,es.Pa.jb[1]):gs.$b=0,es.kc&&(gs.Ad=_r(rs,es.Bd)),gs.Za=!_r(rs,145)+0,gs.Za){var Ws=gs.Ob,Ys=0;for(es=0;4>es;++es){var Hs,js=ws[0+es];for(Hs=0;4>Hs;++Hs){js=yp[_s[cs+Hs]][js];for(var Qs=uf[_r(rs,js[0])];0<Qs;)Qs=uf[2*Qs+_r(rs,js[Qs])];js=-Qs,_s[cs+Hs]=js}Oe(Ws,Ys,_s,cs,4),Ys+=4,ws[0+es]=js}}else js=_r(rs,156)?_r(rs,128)?1:3:_r(rs,163)?2:0,gs.Ob[0]=js,ke(_s,cs,js,4),ke(ws,0,js,4);gs.Dd=_r(rs,142)?_r(rs,114)?_r(rs,183)?1:3:2:0}if(Qr.m.Ka)return xo(Dr,7,"Premature end-of-partition0 encountered.");for(;Dr.ja<Dr.za;++Dr.ja){if(Qr=Rr,rs=(kr=Dr).rb[kr.sb-1],_s=kr.rb[kr.sb+kr.ja],qr=kr.ya[kr.aa+kr.ja],cs=kr.kc?qr.Ad:0)rs.la=_s.la=0,qr.Za||(rs.Na=_s.Na=0),qr.Hc=0,qr.Gc=0,qr.ia=0;else{var Ks,Bs;if(rs=_s,_s=Qr,cs=kr.Pa.Xc,ws=kr.ya[kr.aa+kr.ja],gs=kr.pb[ws.$b],es=ws.ad,Ws=0,Ys=kr.rb[kr.sb-1],js=Hs=0,ke(es,Ws,0,384),ws.Za)var Jo=0,Ma=cs[3];else{Qs=Be(16);var ea=rs.Na+Ys.Na;if(ea=Wu(_s,cs[1],ea,gs.Eb,0,Qs,0),rs.Na=Ys.Na=(0<ea)+0,1<ea)uu(Qs,0,es,Ws);else{var Na=Qs[0]+3>>3;for(Qs=0;256>Qs;Qs+=16)es[Ws+Qs]=Na}Jo=1,Ma=cs[0]}var Xs=15&rs.la,Ba=15&Ys.la;for(Qs=0;4>Qs;++Qs){var Ua=1&Ba;for(Na=Bs=0;4>Na;++Na)Xs=Xs>>1|(Ua=(ea=Wu(_s,Ma,ea=Ua+(1&Xs),gs.Sc,Jo,es,Ws))>Jo)<<7,Bs=Bs<<2|(3<ea?3:1<ea?2:es[Ws+0]!=0),Ws+=16;Xs>>=4,Ba=Ba>>1|Ua<<7,Hs=(Hs<<8|Bs)>>>0}for(Ma=Xs,Jo=Ba>>4,Ks=0;4>Ks;Ks+=2){for(Bs=0,Xs=rs.la>>4+Ks,Ba=Ys.la>>4+Ks,Qs=0;2>Qs;++Qs){for(Ua=1&Ba,Na=0;2>Na;++Na)ea=Ua+(1&Xs),Xs=Xs>>1|(Ua=0<(ea=Wu(_s,cs[2],ea,gs.Qc,0,es,Ws)))<<3,Bs=Bs<<2|(3<ea?3:1<ea?2:es[Ws+0]!=0),Ws+=16;Xs>>=2,Ba=Ba>>1|Ua<<5}js|=Bs<<4*Ks,Ma|=Xs<<4<<Ks,Jo|=(240&Ba)<<Ks}rs.la=Ma,Ys.la=Jo,ws.Hc=Hs,ws.Gc=js,ws.ia=43690&js?0:gs.ia,cs=!(Hs|js)}if(0<kr.L&&(kr.wa[kr.Y+kr.ja]=kr.gd[qr.$b][qr.Za],kr.wa[kr.Y+kr.ja].La|=!cs),Qr.Ka)return xo(Dr,7,"Premature end-of-file encountered.")}if(Au(Dr),kr=ts,Qr=1,qr=(Rr=Dr).D,rs=0<Rr.L&&Rr.M>=Rr.zb&&Rr.M<=Rr.Va,Rr.Aa==0)e:{if(qr.M=Rr.M,qr.uc=rs,Fu(Rr,qr),Qr=1,qr=(Bs=Rr.D).Nb,rs=(js=nh[Rr.L])*Rr.R,_s=js/2*Rr.B,Qs=16*qr*Rr.R,Na=8*qr*Rr.B,cs=Rr.sa,ws=Rr.ta-rs+Qs,gs=Rr.qa,es=Rr.ra-_s+Na,Ws=Rr.Ha,Ys=Rr.Ia-_s+Na,Ba=(Xs=Bs.M)==0,Hs=Xs>=Rr.Va-1,Rr.Aa==2&&Fu(Rr,Bs),Bs.uc)for(Ua=(ea=Rr).D.M,e(ea.D.uc),Bs=ea.yb;Bs<ea.Hb;++Bs){Jo=Bs,Ma=Ua;var ia=(la=(wo=ea).D).Nb;Ks=wo.R;var la=la.wa[la.Y+Jo],va=wo.sa,Ja=wo.ta+16*ia*Ks+16*Jo,ic=la.dd,ra=la.tc;if(ra!=0)if(e(3<=ra),wo.L==1)0<Jo&&Ac(va,Ja,Ks,ra+4),la.La&&Ya(va,Ja,Ks,ra),0<Ma&&Uc(va,Ja,Ks,ra+4),la.La&&Hu(va,Ja,Ks,ra);else{var hc=wo.B,jc=wo.qa,pu=wo.ra+8*ia*hc+8*Jo,bc=wo.Ha,wo=wo.Ia+8*ia*hc+8*Jo;ia=la.ld,0<Jo&&(jd(va,Ja,Ks,ra+4,ic,ia),Gc(jc,pu,bc,wo,hc,ra+4,ic,ia)),la.La&&(Cc(va,Ja,Ks,ra,ic,ia),hu(jc,pu,bc,wo,hc,ra,ic,ia)),0<Ma&&(du(va,Ja,Ks,ra+4,ic,ia),$u(jc,pu,bc,wo,hc,ra+4,ic,ia)),la.La&&(Fc(va,Ja,Ks,ra,ic,ia),Bc(jc,pu,bc,wo,hc,ra,ic,ia))}}if(Rr.ia&&alert("todo:DitherRow"),kr.put!=null){if(Bs=16*Xs,Xs=16*(Xs+1),Ba?(kr.y=Rr.sa,kr.O=Rr.ta+Qs,kr.f=Rr.qa,kr.N=Rr.ra+Na,kr.ea=Rr.Ha,kr.W=Rr.Ia+Na):(Bs-=js,kr.y=cs,kr.O=ws,kr.f=gs,kr.N=es,kr.ea=Ws,kr.W=Ys),Hs||(Xs-=js),Xs>kr.o&&(Xs=kr.o),kr.F=null,kr.J=null,Rr.Fa!=null&&0<Rr.Fa.length&&Bs<Xs&&(kr.J=Du(Rr,kr,Bs,Xs-Bs),kr.F=Rr.mb,kr.F==null&&kr.F.length==0)){Qr=xo(Rr,3,"Could not decode alpha data.");break e}Bs<kr.j&&(js=kr.j-Bs,Bs=kr.j,e(!(1&js)),kr.O+=Rr.R*js,kr.N+=Rr.B*(js>>1),kr.W+=Rr.B*(js>>1),kr.F!=null&&(kr.J+=kr.width*js)),Bs<Xs&&(kr.O+=kr.v,kr.N+=kr.v>>1,kr.W+=kr.v>>1,kr.F!=null&&(kr.J+=kr.v),kr.ka=Bs-kr.j,kr.U=kr.va-kr.v,kr.T=Xs-Bs,Qr=kr.put(kr))}qr+1!=Rr.Ic||Hs||(Oe(Rr.sa,Rr.ta-rs,cs,ws+16*Rr.R,rs),Oe(Rr.qa,Rr.ra-_s,gs,es+8*Rr.B,_s),Oe(Rr.Ha,Rr.Ia-_s,Ws,Ys+8*Rr.B,_s))}if(!Qr)return xo(Dr,6,"Output aborted.")}return 1}(ei,ri)),ri.bc!=null&&ri.bc(ri),di&=1}return di?(ei.cb=0,di):0}function yl(ei,ri,di,Li,ji){ji=ei[ri+di+32*Li]+(ji>>3),ei[ri+di+32*Li]=-256&ji?0>ji?0:255:ji}function Yc(ei,ri,di,Li,ji,ir){yl(ei,ri,0,di,Li+ji),yl(ei,ri,1,di,Li+ir),yl(ei,ri,2,di,Li-ir),yl(ei,ri,3,di,Li-ji)}function xa(ei){return(20091*ei>>16)+ei}function bu(ei,ri,di,Li){var ji,ir=0,rr=Be(16);for(ji=0;4>ji;++ji){var lr=ei[ri+0]+ei[ri+8],dr=ei[ri+0]-ei[ri+8],gr=(35468*ei[ri+4]>>16)-xa(ei[ri+12]),Lr=xa(ei[ri+4])+(35468*ei[ri+12]>>16);rr[ir+0]=lr+Lr,rr[ir+1]=dr+gr,rr[ir+2]=dr-gr,rr[ir+3]=lr-Lr,ir+=4,ri++}for(ji=ir=0;4>ji;++ji)lr=(ei=rr[ir+0]+4)+rr[ir+8],dr=ei-rr[ir+8],gr=(35468*rr[ir+4]>>16)-xa(rr[ir+12]),yl(di,Li,0,0,lr+(Lr=xa(rr[ir+4])+(35468*rr[ir+12]>>16))),yl(di,Li,1,0,dr+gr),yl(di,Li,2,0,dr-gr),yl(di,Li,3,0,lr-Lr),ir++,Li+=32}function bd(ei,ri,di,Li){var ji=ei[ri+0]+4,ir=35468*ei[ri+4]>>16,rr=xa(ei[ri+4]),lr=35468*ei[ri+1]>>16;Yc(di,Li,0,ji+rr,ei=xa(ei[ri+1]),lr),Yc(di,Li,1,ji+ir,ei,lr),Yc(di,Li,2,ji-ir,ei,lr),Yc(di,Li,3,ji-rr,ei,lr)}function Ah(ei,ri,di,Li,ji){bu(ei,ri,di,Li),ji&&bu(ei,ri+16,di,Li+4)}function Id(ei,ri,di,Li){cc(ei,ri+0,di,Li,1),cc(ei,ri+32,di,Li+128,1)}function Eh(ei,ri,di,Li){var ji;for(ei=ei[ri+0]+4,ji=0;4>ji;++ji)for(ri=0;4>ri;++ri)yl(di,Li,ri,ji,ei)}function wd(ei,ri,di,Li){ei[ri+0]&&ma(ei,ri+0,di,Li),ei[ri+16]&&ma(ei,ri+16,di,Li+4),ei[ri+32]&&ma(ei,ri+32,di,Li+128),ei[ri+48]&&ma(ei,ri+48,di,Li+128+4)}function Sh(ei,ri,di,Li){var ji,ir=Be(16);for(ji=0;4>ji;++ji){var rr=ei[ri+0+ji]+ei[ri+12+ji],lr=ei[ri+4+ji]+ei[ri+8+ji],dr=ei[ri+4+ji]-ei[ri+8+ji],gr=ei[ri+0+ji]-ei[ri+12+ji];ir[0+ji]=rr+lr,ir[8+ji]=rr-lr,ir[4+ji]=gr+dr,ir[12+ji]=gr-dr}for(ji=0;4>ji;++ji)rr=(ei=ir[0+4*ji]+3)+ir[3+4*ji],lr=ir[1+4*ji]+ir[2+4*ji],dr=ir[1+4*ji]-ir[2+4*ji],gr=ei-ir[3+4*ji],di[Li+0]=rr+lr>>3,di[Li+16]=gr+dr>>3,di[Li+32]=rr-lr>>3,di[Li+48]=gr-dr>>3,Li+=64}function Iu(ei,ri,di){var Li,ji=ri-32,ir=Fa,rr=255-ei[ji-1];for(Li=0;Li<di;++Li){var lr,dr=ir,gr=rr+ei[ri-1];for(lr=0;lr<di;++lr)ei[ri+lr]=dr[gr+ei[ji+lr]];ri+=32}}function bh(ei,ri){Iu(ei,ri,4)}function Ih(ei,ri){Iu(ei,ri,8)}function wh(ei,ri){Iu(ei,ri,16)}function rc(ei,ri){var di;for(di=0;16>di;++di)Oe(ei,ri+32*di,ei,ri-32,16)}function Xc(ei,ri){var di;for(di=16;0<di;--di)ke(ei,ri,ei[ri-1],16),ri+=32}function Kc(ei,ri,di){var Li;for(Li=0;16>Li;++Li)ke(ri,di+32*Li,ei,16)}function Pd(ei,ri){var di,Li=16;for(di=0;16>di;++di)Li+=ei[ri-1+32*di]+ei[ri+di-32];Kc(Li>>5,ei,ri)}function da(ei,ri){var di,Li=8;for(di=0;16>di;++di)Li+=ei[ri-1+32*di];Kc(Li>>4,ei,ri)}function Ph(ei,ri){var di,Li=8;for(di=0;16>di;++di)Li+=ei[ri+di-32];Kc(Li>>4,ei,ri)}function xd(ei,ri){Kc(128,ei,ri)}function Ns(ei,ri,di){return ei+2*ri+di+2>>2}function xh(ei,ri){var di,Li=ri-32;for(Li=new Uint8Array([Ns(ei[Li-1],ei[Li+0],ei[Li+1]),Ns(ei[Li+0],ei[Li+1],ei[Li+2]),Ns(ei[Li+1],ei[Li+2],ei[Li+3]),Ns(ei[Li+2],ei[Li+3],ei[Li+4])]),di=0;4>di;++di)Oe(ei,ri+32*di,Li,0,Li.length)}function Th(ei,ri){var di=ei[ri-1],Li=ei[ri-1+32],ji=ei[ri-1+64],ir=ei[ri-1+96];Ar(ei,ri+0,16843009*Ns(ei[ri-1-32],di,Li)),Ar(ei,ri+32,16843009*Ns(di,Li,ji)),Ar(ei,ri+64,16843009*Ns(Li,ji,ir)),Ar(ei,ri+96,16843009*Ns(ji,ir,ir))}function $l(ei,ri){var di,Li=4;for(di=0;4>di;++di)Li+=ei[ri+di-32]+ei[ri-1+32*di];for(Li>>=3,di=0;4>di;++di)ke(ei,ri+32*di,Li,4)}function Td(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],ir=ei[ri-1-32],rr=ei[ri+0-32],lr=ei[ri+1-32],dr=ei[ri+2-32],gr=ei[ri+3-32];ei[ri+0+96]=Ns(Li,ji,ei[ri-1+96]),ei[ri+1+96]=ei[ri+0+64]=Ns(di,Li,ji),ei[ri+2+96]=ei[ri+1+64]=ei[ri+0+32]=Ns(ir,di,Li),ei[ri+3+96]=ei[ri+2+64]=ei[ri+1+32]=ei[ri+0+0]=Ns(rr,ir,di),ei[ri+3+64]=ei[ri+2+32]=ei[ri+1+0]=Ns(lr,rr,ir),ei[ri+3+32]=ei[ri+2+0]=Ns(dr,lr,rr),ei[ri+3+0]=Ns(gr,dr,lr)}function Ld(ei,ri){var di=ei[ri+1-32],Li=ei[ri+2-32],ji=ei[ri+3-32],ir=ei[ri+4-32],rr=ei[ri+5-32],lr=ei[ri+6-32],dr=ei[ri+7-32];ei[ri+0+0]=Ns(ei[ri+0-32],di,Li),ei[ri+1+0]=ei[ri+0+32]=Ns(di,Li,ji),ei[ri+2+0]=ei[ri+1+32]=ei[ri+0+64]=Ns(Li,ji,ir),ei[ri+3+0]=ei[ri+2+32]=ei[ri+1+64]=ei[ri+0+96]=Ns(ji,ir,rr),ei[ri+3+32]=ei[ri+2+64]=ei[ri+1+96]=Ns(ir,rr,lr),ei[ri+3+64]=ei[ri+2+96]=Ns(rr,lr,dr),ei[ri+3+96]=Ns(lr,dr,dr)}function Zc(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],ir=ei[ri-1-32],rr=ei[ri+0-32],lr=ei[ri+1-32],dr=ei[ri+2-32],gr=ei[ri+3-32];ei[ri+0+0]=ei[ri+1+64]=ir+rr+1>>1,ei[ri+1+0]=ei[ri+2+64]=rr+lr+1>>1,ei[ri+2+0]=ei[ri+3+64]=lr+dr+1>>1,ei[ri+3+0]=dr+gr+1>>1,ei[ri+0+96]=Ns(ji,Li,di),ei[ri+0+64]=Ns(Li,di,ir),ei[ri+0+32]=ei[ri+1+96]=Ns(di,ir,rr),ei[ri+1+32]=ei[ri+2+96]=Ns(ir,rr,lr),ei[ri+2+32]=ei[ri+3+96]=Ns(rr,lr,dr),ei[ri+3+32]=Ns(lr,dr,gr)}function wu(ei,ri){var di=ei[ri+0-32],Li=ei[ri+1-32],ji=ei[ri+2-32],ir=ei[ri+3-32],rr=ei[ri+4-32],lr=ei[ri+5-32],dr=ei[ri+6-32],gr=ei[ri+7-32];ei[ri+0+0]=di+Li+1>>1,ei[ri+1+0]=ei[ri+0+64]=Li+ji+1>>1,ei[ri+2+0]=ei[ri+1+64]=ji+ir+1>>1,ei[ri+3+0]=ei[ri+2+64]=ir+rr+1>>1,ei[ri+0+32]=Ns(di,Li,ji),ei[ri+1+32]=ei[ri+0+96]=Ns(Li,ji,ir),ei[ri+2+32]=ei[ri+1+96]=Ns(ji,ir,rr),ei[ri+3+32]=ei[ri+2+96]=Ns(ir,rr,lr),ei[ri+3+64]=Ns(rr,lr,dr),ei[ri+3+96]=Ns(lr,dr,gr)}function Lh(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],ir=ei[ri-1+96];ei[ri+0+0]=di+Li+1>>1,ei[ri+2+0]=ei[ri+0+32]=Li+ji+1>>1,ei[ri+2+32]=ei[ri+0+64]=ji+ir+1>>1,ei[ri+1+0]=Ns(di,Li,ji),ei[ri+3+0]=ei[ri+1+32]=Ns(Li,ji,ir),ei[ri+3+32]=ei[ri+1+64]=Ns(ji,ir,ir),ei[ri+3+64]=ei[ri+2+64]=ei[ri+0+96]=ei[ri+1+96]=ei[ri+2+96]=ei[ri+3+96]=ir}function Rh(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],ir=ei[ri-1+96],rr=ei[ri-1-32],lr=ei[ri+0-32],dr=ei[ri+1-32],gr=ei[ri+2-32];ei[ri+0+0]=ei[ri+2+32]=di+rr+1>>1,ei[ri+0+32]=ei[ri+2+64]=Li+di+1>>1,ei[ri+0+64]=ei[ri+2+96]=ji+Li+1>>1,ei[ri+0+96]=ir+ji+1>>1,ei[ri+3+0]=Ns(lr,dr,gr),ei[ri+2+0]=Ns(rr,lr,dr),ei[ri+1+0]=ei[ri+3+32]=Ns(di,rr,lr),ei[ri+1+32]=ei[ri+3+64]=Ns(Li,di,rr),ei[ri+1+64]=ei[ri+3+96]=Ns(ji,Li,di),ei[ri+1+96]=Ns(ir,ji,Li)}function Mh(ei,ri){var di;for(di=0;8>di;++di)Oe(ei,ri+32*di,ei,ri-32,8)}function Pu(ei,ri){var di;for(di=0;8>di;++di)ke(ei,ri,ei[ri-1],8),ri+=32}function Mc(ei,ri,di){var Li;for(Li=0;8>Li;++Li)ke(ri,di+32*Li,ei,8)}function gc(ei,ri){var di,Li=8;for(di=0;8>di;++di)Li+=ei[ri+di-32]+ei[ri-1+32*di];Mc(Li>>4,ei,ri)}function Oh(ei,ri){var di,Li=4;for(di=0;8>di;++di)Li+=ei[ri+di-32];Mc(Li>>3,ei,ri)}function Oc(ei,ri){var di,Li=4;for(di=0;8>di;++di)Li+=ei[ri-1+32*di];Mc(Li>>3,ei,ri)}function xu(ei,ri){Mc(128,ei,ri)}function Jc(ei,ri,di){var Li=ei[ri-di],ji=ei[ri+0],ir=3*(ji-Li)+Bh[1020+ei[ri-2*di]-ei[ri+di]],rr=$d[112+(ir+4>>3)];ei[ri-di]=Fa[255+Li+$d[112+(ir+3>>3)]],ei[ri+0]=Fa[255+ji-rr]}function Rd(ei,ri,di,Li){var ji=ei[ri+0],ir=ei[ri+di];return Ka[255+ei[ri-2*di]-ei[ri-di]]>Li||Ka[255+ir-ji]>Li}function Md(ei,ri,di,Li){return 4*Ka[255+ei[ri-di]-ei[ri+0]]+Ka[255+ei[ri-2*di]-ei[ri+di]]<=Li}function Od(ei,ri,di,Li,ji){var ir=ei[ri-3*di],rr=ei[ri-2*di],lr=ei[ri-di],dr=ei[ri+0],gr=ei[ri+di],Lr=ei[ri+2*di],Br=ei[ri+3*di];return 4*Ka[255+lr-dr]+Ka[255+rr-gr]>Li?0:Ka[255+ei[ri-4*di]-ir]<=ji&&Ka[255+ir-rr]<=ji&&Ka[255+rr-lr]<=ji&&Ka[255+Br-Lr]<=ji&&Ka[255+Lr-gr]<=ji&&Ka[255+gr-dr]<=ji}function Nd(ei,ri,di,Li){var ji=2*Li+1;for(Li=0;16>Li;++Li)Md(ei,ri+Li,di,ji)&&Jc(ei,ri+Li,di)}function tc(ei,ri,di,Li){var ji=2*Li+1;for(Li=0;16>Li;++Li)Md(ei,ri+Li*di,1,ji)&&Jc(ei,ri+Li*di,1)}function sc(ei,ri,di,Li){var ji;for(ji=3;0<ji;--ji)Nd(ei,ri+=4*di,di,Li)}function Nh(ei,ri,di,Li){var ji;for(ji=3;0<ji;--ji)tc(ei,ri+=4,di,Li)}function mc(ei,ri,di,Li,ji,ir,rr,lr){for(ir=2*ir+1;0<ji--;){if(Od(ei,ri,di,ir,rr))if(Rd(ei,ri,di,lr))Jc(ei,ri,di);else{var dr=ei,gr=ri,Lr=di,Br=dr[gr-2*Lr],jr=dr[gr-Lr],Dr=dr[gr+0],ts=dr[gr+Lr],qr=dr[gr+2*Lr],Rr=27*(Qr=Bh[1020+3*(Dr-jr)+Bh[1020+Br-ts]])+63>>7,kr=18*Qr+63>>7,Qr=9*Qr+63>>7;dr[gr-3*Lr]=Fa[255+dr[gr-3*Lr]+Qr],dr[gr-2*Lr]=Fa[255+Br+kr],dr[gr-Lr]=Fa[255+jr+Rr],dr[gr+0]=Fa[255+Dr-Rr],dr[gr+Lr]=Fa[255+ts-kr],dr[gr+2*Lr]=Fa[255+qr-Qr]}ri+=Li}}function _l(ei,ri,di,Li,ji,ir,rr,lr){for(ir=2*ir+1;0<ji--;){if(Od(ei,ri,di,ir,rr))if(Rd(ei,ri,di,lr))Jc(ei,ri,di);else{var dr=ei,gr=ri,Lr=di,Br=dr[gr-Lr],jr=dr[gr+0],Dr=dr[gr+Lr],ts=$d[112+((qr=3*(jr-Br))+4>>3)],qr=$d[112+(qr+3>>3)],Rr=ts+1>>1;dr[gr-2*Lr]=Fa[255+dr[gr-2*Lr]+Rr],dr[gr-Lr]=Fa[255+Br+qr],dr[gr+0]=Fa[255+jr-ts],dr[gr+Lr]=Fa[255+Dr-Rr]}ri+=Li}}function Lu(ei,ri,di,Li,ji,ir){mc(ei,ri,di,1,16,Li,ji,ir)}function Nc(ei,ri,di,Li,ji,ir){mc(ei,ri,1,di,16,Li,ji,ir)}function kh(ei,ri,di,Li,ji,ir){var rr;for(rr=3;0<rr;--rr)_l(ei,ri+=4*di,di,1,16,Li,ji,ir)}function Qc(ei,ri,di,Li,ji,ir){var rr;for(rr=3;0<rr;--rr)_l(ei,ri+=4,1,di,16,Li,ji,ir)}function Dh(ei,ri,di,Li,ji,ir,rr,lr){mc(ei,ri,ji,1,8,ir,rr,lr),mc(di,Li,ji,1,8,ir,rr,lr)}function Ru(ei,ri,di,Li,ji,ir,rr,lr){mc(ei,ri,1,ji,8,ir,rr,lr),mc(di,Li,1,ji,8,ir,rr,lr)}function Mu(ei,ri,di,Li,ji,ir,rr,lr){_l(ei,ri+4*ji,ji,1,8,ir,rr,lr),_l(di,Li+4*ji,ji,1,8,ir,rr,lr)}function kd(ei,ri,di,Li,ji,ir,rr,lr){_l(ei,ri+4,1,ji,8,ir,rr,lr),_l(di,Li+4,1,ji,8,ir,rr,lr)}function eu(){this.ba=new Zs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ls,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ou(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dd(){this.ua=0,this.Wa=new Ki,this.vb=new Ki,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Pi,this.yc=new li}function Gh(){this.xb=this.a=0,this.l=new Wc,this.ca=new Zs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ni,this.Pb=0,this.wd=new Ni,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dd,this.ab=0,this.gc=Ue(4,Nu),this.Oc=0}function tu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kc(ei,ri,di,Li,ji,ir,rr){for(ei=ei==null?0:ei[ri+0],ri=0;ri<rr;++ri)ji[ir+ri]=ei+di[Li+ri]&255,ei=ji[ir+ri]}function ku(ei,ri,di,Li,ji,ir,rr){var lr;if(ei==null)kc(null,null,di,Li,ji,ir,rr);else for(lr=0;lr<rr;++lr)ji[ir+lr]=ei[ri+lr]+di[Li+lr]&255}function vc(ei,ri,di,Li,ji,ir,rr){if(ei==null)kc(null,null,di,Li,ji,ir,rr);else{var lr,dr=ei[ri+0],gr=dr,Lr=dr;for(lr=0;lr<rr;++lr)gr=Lr+(dr=ei[ri+lr])-gr,Lr=di[Li+lr]+(-256&gr?0>gr?0:255:gr)&255,gr=dr,ji[ir+lr]=Lr}}function Du(ei,ri,di,Li){var ji=ri.width,ir=ri.o;if(e(ei!=null&&ri!=null),0>di||0>=Li||di+Li>ir)return null;if(!ei.Cc){if(ei.ga==null){var rr;if(ei.ga=new tu,(rr=ei.ga==null)||(rr=ri.width*ri.o,e(ei.Gb.length==0),ei.Gb=Be(rr),ei.Uc=0,ei.Gb==null?rr=0:(ei.mb=ei.Gb,ei.nb=ei.Uc,ei.rc=null,rr=1),rr=!rr),!rr){rr=ei.ga;var lr=ei.Fa,dr=ei.P,gr=ei.qc,Lr=ei.mb,Br=ei.nb,jr=dr+1,Dr=gr-1,ts=rr.l;if(e(lr!=null&&Lr!=null&&ri!=null),Sc[0]=null,Sc[1]=kc,Sc[2]=ku,Sc[3]=vc,rr.ca=Lr,rr.tb=Br,rr.c=ri.width,rr.i=ri.height,e(0<rr.c&&0<rr.i),1>=gr)ri=0;else if(rr.$a=lr[dr+0]>>0&3,rr.Z=lr[dr+0]>>2&3,rr.Lc=lr[dr+0]>>4&3,dr=lr[dr+0]>>6&3,0>rr.$a||1<rr.$a||4<=rr.Z||1<rr.Lc||dr)ri=0;else if(ts.put=$o,ts.ac=qs,ts.bc=Ts,ts.ma=rr,ts.width=ri.width,ts.height=ri.height,ts.Da=ri.Da,ts.v=ri.v,ts.va=ri.va,ts.j=ri.j,ts.o=ri.o,rr.$a)e:{e(rr.$a==1),ri=oa();t:for(;;){if(ri==null){ri=0;break e}if(e(rr!=null),rr.mc=ri,ri.c=rr.c,ri.i=rr.i,ri.l=rr.l,ri.l.ma=rr,ri.l.width=rr.c,ri.l.height=rr.i,ri.a=0,ar(ri.m,lr,jr,Dr),!Dl(rr.c,rr.i,1,ri,null)||(ri.ab==1&&ri.gc[0].hc==3&&pa(ri.s)?(rr.ic=1,lr=ri.c*ri.i,ri.Ta=null,ri.Ua=0,ri.V=Be(lr),ri.Ba=0,ri.V==null?(ri.a=1,ri=0):ri=1):(rr.ic=0,ri=Rc(ri,rr.c)),!ri))break t;ri=1;break e}rr.mc=null,ri=0}else ri=Dr>=rr.c*rr.i;rr=!ri}if(rr)return null;ei.ga.Lc!=1?ei.Ga=0:Li=ir-di}e(ei.ga!=null),e(di+Li<=ir);e:{if(ri=(lr=ei.ga).c,ir=lr.l.o,lr.$a==0){if(jr=ei.rc,Dr=ei.Vc,ts=ei.Fa,dr=ei.P+1+di*ri,gr=ei.mb,Lr=ei.nb+di*ri,e(dr<=ei.P+ei.qc),lr.Z!=0)for(e(Sc[lr.Z]!=null),rr=0;rr<Li;++rr)Sc[lr.Z](jr,Dr,ts,dr,gr,Lr,ri),jr=gr,Dr=Lr,Lr+=ri,dr+=ri;else for(rr=0;rr<Li;++rr)Oe(gr,Lr,ts,dr,ri),jr=gr,Dr=Lr,Lr+=ri,dr+=ri;ei.rc=jr,ei.Vc=Dr}else{if(e(lr.mc!=null),ri=di+Li,e((rr=lr.mc)!=null),e(ri<=rr.i),rr.C>=ri)ri=1;else if(lr.ic||Fr(),lr.ic){lr=rr.V,jr=rr.Ba,Dr=rr.c;var qr=rr.i,Rr=(ts=1,dr=rr.$/Dr,gr=rr.$%Dr,Lr=rr.m,Br=rr.s,rr.$),kr=Dr*qr,Qr=Dr*ri,rs=Br.wc,es=Rr<Qr?Us(Br,gr,dr):null;e(Rr<=kr),e(ri<=qr),e(pa(Br));t:for(;;){for(;!Lr.h&&Rr<Qr;){if(gr&rs||(es=Us(Br,gr,dr)),e(es!=null),mr(Lr),256>(qr=Js(es.G[0],es.H[0],Lr)))lr[jr+Rr]=qr,++Rr,++gr>=Dr&&(gr=0,++dr<=ri&&!(dr%16)&&ka(rr,dr));else{if(!(280>qr)){ts=0;break t}qr=ho(qr-256,Lr);var _s,cs=Js(es.G[4],es.H[4],Lr);if(mr(Lr),!(Rr>=(cs=Co(Dr,cs=ho(cs,Lr)))&&kr-Rr>=qr)){ts=0;break t}for(_s=0;_s<qr;++_s)lr[jr+Rr+_s]=lr[jr+Rr+_s-cs];for(Rr+=qr,gr+=qr;gr>=Dr;)gr-=Dr,++dr<=ri&&!(dr%16)&&ka(rr,dr);Rr<Qr&&gr&rs&&(es=Us(Br,gr,dr))}e(Lr.h==er(Lr))}ka(rr,dr>ri?ri:dr);break t}!ts||Lr.h&&Rr<kr?(ts=0,rr.a=Lr.h?5:3):rr.$=Rr,ri=ts}else ri=Pa(rr,rr.V,rr.Ba,rr.c,rr.i,ri,Vc);if(!ri){Li=0;break e}}di+Li>=ir&&(ei.Cc=1),Li=1}if(!Li)return null;if(ei.Cc&&((Li=ei.ga)!=null&&(Li.mc=null),ei.ga=null,0<ei.Ga))return alert("todo:WebPDequantizeLevels"),null}return ei.nb+di*ji}function ai(ei,ri,di,Li,ji,ir){for(;0<ji--;){var rr,lr=ei,dr=ri+(di?1:0),gr=ei,Lr=ri+(di?0:3);for(rr=0;rr<Li;++rr){var Br=gr[Lr+4*rr];Br!=255&&(Br*=32897,lr[dr+4*rr+0]=lr[dr+4*rr+0]*Br>>23,lr[dr+4*rr+1]=lr[dr+4*rr+1]*Br>>23,lr[dr+4*rr+2]=lr[dr+4*rr+2]*Br>>23)}ri+=ir}}function Vi(ei,ri,di,Li,ji){for(;0<Li--;){var ir;for(ir=0;ir<di;++ir){var rr=ei[ri+2*ir+0],lr=15&(gr=ei[ri+2*ir+1]),dr=4369*lr,gr=(240&gr|gr>>4)*dr>>16;ei[ri+2*ir+0]=(240&rr|rr>>4)*dr>>16&240|(15&rr|rr<<4)*dr>>16>>4&15,ei[ri+2*ir+1]=240&gr|lr}ri+=ji}}function yr(ei,ri,di,Li,ji,ir,rr,lr){var dr,gr,Lr=255;for(gr=0;gr<ji;++gr){for(dr=0;dr<Li;++dr){var Br=ei[ri+dr];ir[rr+4*dr]=Br,Lr&=Br}ri+=di,rr+=lr}return Lr!=255}function Pr(ei,ri,di,Li,ji){var ir;for(ir=0;ir<ji;++ir)di[Li+ir]=ei[ri+ir]>>8}function Fr(){Xa=ai,go=Vi,yo=yr,ko=Pr}function Xr(ei,ri,di){fi[ei]=function(Li,ji,ir,rr,lr,dr,gr,Lr,Br,jr,Dr,ts,qr,Rr,kr,Qr,rs){var es,_s=rs-1>>1,cs=lr[dr+0]|gr[Lr+0]<<16,ws=Br[jr+0]|Dr[ts+0]<<16;e(Li!=null);var gs=3*cs+ws+131074>>2;for(ri(Li[ji+0],255&gs,gs>>16,qr,Rr),ir!=null&&(gs=3*ws+cs+131074>>2,ri(ir[rr+0],255&gs,gs>>16,kr,Qr)),es=1;es<=_s;++es){var Ws=lr[dr+es]|gr[Lr+es]<<16,Ys=Br[jr+es]|Dr[ts+es]<<16,Hs=cs+Ws+ws+Ys+524296,js=Hs+2*(Ws+ws)>>3;gs=js+cs>>1,cs=(Hs=Hs+2*(cs+Ys)>>3)+Ws>>1,ri(Li[ji+2*es-1],255&gs,gs>>16,qr,Rr+(2*es-1)*di),ri(Li[ji+2*es-0],255&cs,cs>>16,qr,Rr+(2*es-0)*di),ir!=null&&(gs=Hs+ws>>1,cs=js+Ys>>1,ri(ir[rr+2*es-1],255&gs,gs>>16,kr,Qr+(2*es-1)*di),ri(ir[rr+2*es+0],255&cs,cs>>16,kr,Qr+(2*es+0)*di)),cs=Ws,ws=Ys}1&rs||(gs=3*cs+ws+131074>>2,ri(Li[ji+rs-1],255&gs,gs>>16,qr,Rr+(rs-1)*di),ir!=null&&(gs=3*ws+cs+131074>>2,ri(ir[rr+rs-1],255&gs,gs>>16,kr,Qr+(rs-1)*di)))}}function ss(){Za[Wd]=Ep,Za[Yd]=hf,Za[af]=Sp,Za[Xd]=ff,Za[Zd]=pf,Za[Uh]=gf,Za[lf]=bp,Za[jh]=hf,Za[Vh]=ff,Za[Jd]=pf,Za[zh]=gf}function vs(ei){return ei&-16384?0>ei?0:255:ei>>Ip}function bs(ei,ri){return vs((19077*ei>>8)+(26149*ri>>8)-14234)}function Gs(ei,ri,di){return vs((19077*ei>>8)-(6419*ri>>8)-(13320*di>>8)+8708)}function Ds(ei,ri){return vs((19077*ei>>8)+(33050*ri>>8)-17685)}function zs(ei,ri,di,Li,ji){Li[ji+0]=bs(ei,di),Li[ji+1]=Gs(ei,ri,di),Li[ji+2]=Ds(ei,ri)}function Eo(ei,ri,di,Li,ji){Li[ji+0]=Ds(ei,ri),Li[ji+1]=Gs(ei,ri,di),Li[ji+2]=bs(ei,di)}function Io(ei,ri,di,Li,ji){var ir=Gs(ei,ri,di);ri=ir<<3&224|Ds(ei,ri)>>3,Li[ji+0]=248&bs(ei,di)|ir>>5,Li[ji+1]=ri}function Zo(ei,ri,di,Li,ji){var ir=240&Ds(ei,ri)|15;Li[ji+0]=240&bs(ei,di)|Gs(ei,ri,di)>>4,Li[ji+1]=ir}function fa(ei,ri,di,Li,ji){Li[ji+0]=255,zs(ei,ri,di,Li,ji+1)}function na(ei,ri,di,Li,ji){Eo(ei,ri,di,Li,ji),Li[ji+3]=255}function Il(ei,ri,di,Li,ji){zs(ei,ri,di,Li,ji),Li[ji+3]=255}function Ga(ei,ri){return 0>ei?0:ei>ri?ri:ei}function nc(ei,ri,di){fi[ei]=function(Li,ji,ir,rr,lr,dr,gr,Lr,Br){for(var jr=Lr+(-2&Br)*di;Lr!=jr;)ri(Li[ji+0],ir[rr+0],lr[dr+0],gr,Lr),ri(Li[ji+1],ir[rr+0],lr[dr+0],gr,Lr+di),ji+=2,++rr,++dr,Lr+=2*di;1&Br&&ri(Li[ji+0],ir[rr+0],lr[dr+0],gr,Lr)}}function Gd(ei,ri,di){return di==0?ei==0?ri==0?6:5:ri==0?4:0:di}function Gu(ei,ri,di,Li,ji){switch(ei>>>30){case 3:cc(ri,di,Li,ji,0);break;case 2:To(ri,di,Li,ji);break;case 1:ma(ri,di,Li,ji)}}function Fu(ei,ri){var di,Li,ji=ri.M,ir=ri.Nb,rr=ei.oc,lr=ei.pc+40,dr=ei.oc,gr=ei.pc+584,Lr=ei.oc,Br=ei.pc+600;for(di=0;16>di;++di)rr[lr+32*di-1]=129;for(di=0;8>di;++di)dr[gr+32*di-1]=129,Lr[Br+32*di-1]=129;for(0<ji?rr[lr-1-32]=dr[gr-1-32]=Lr[Br-1-32]=129:(ke(rr,lr-32-1,127,21),ke(dr,gr-32-1,127,9),ke(Lr,Br-32-1,127,9)),Li=0;Li<ei.za;++Li){var jr=ri.ya[ri.aa+Li];if(0<Li){for(di=-1;16>di;++di)Oe(rr,lr+32*di-4,rr,lr+32*di+12,4);for(di=-1;8>di;++di)Oe(dr,gr+32*di-4,dr,gr+32*di+4,4),Oe(Lr,Br+32*di-4,Lr,Br+32*di+4,4)}var Dr=ei.Gd,ts=ei.Hd+Li,qr=jr.ad,Rr=jr.Hc;if(0<ji&&(Oe(rr,lr-32,Dr[ts].y,0,16),Oe(dr,gr-32,Dr[ts].f,0,8),Oe(Lr,Br-32,Dr[ts].ea,0,8)),jr.Za){var kr=rr,Qr=lr-32+16;for(0<ji&&(Li>=ei.za-1?ke(kr,Qr,Dr[ts].y[15],4):Oe(kr,Qr,Dr[ts+1].y,0,4)),di=0;4>di;di++)kr[Qr+128+di]=kr[Qr+256+di]=kr[Qr+384+di]=kr[Qr+0+di];for(di=0;16>di;++di,Rr<<=2)kr=rr,Qr=lr+vf[di],wl[jr.Ob[di]](kr,Qr),Gu(Rr,qr,16*+di,kr,Qr)}else if(kr=Gd(Li,ji,jr.Ob[0]),Ec[kr](rr,lr),Rr!=0)for(di=0;16>di;++di,Rr<<=2)Gu(Rr,qr,16*+di,rr,lr+vf[di]);for(di=jr.Gc,kr=Gd(Li,ji,jr.Dd),dc[kr](dr,gr),dc[kr](Lr,Br),Rr=qr,kr=dr,Qr=gr,255&(jr=di>>0)&&(170&jr?zu(Rr,256,kr,Qr):Wa(Rr,256,kr,Qr)),jr=Lr,Rr=Br,255&(di>>=8)&&(170&di?zu(qr,320,jr,Rr):Wa(qr,320,jr,Rr)),ji<ei.Ub-1&&(Oe(Dr[ts].y,0,rr,lr+480,16),Oe(Dr[ts].f,0,dr,gr+224,8),Oe(Dr[ts].ea,0,Lr,Br+224,8)),di=8*ir*ei.B,Dr=ei.sa,ts=ei.ta+16*Li+16*ir*ei.R,qr=ei.qa,jr=ei.ra+8*Li+di,Rr=ei.Ha,kr=ei.Ia+8*Li+di,di=0;16>di;++di)Oe(Dr,ts+di*ei.R,rr,lr+32*di,16);for(di=0;8>di;++di)Oe(qr,jr+di*ei.B,dr,gr+32*di,8),Oe(Rr,kr+di*ei.B,Lr,Br+32*di,8)}}function nu(ei,ri,di,Li,ji,ir,rr,lr,dr){var gr=[0],Lr=[0],Br=0,jr=dr!=null?dr.kd:0,Dr=dr??new Ou;if(ei==null||12>di)return 7;Dr.data=ei,Dr.w=ri,Dr.ha=di,ri=[ri],di=[di],Dr.gb=[Dr.gb];e:{var ts=ri,qr=di,Rr=Dr.gb;if(e(ei!=null),e(qr!=null),e(Rr!=null),Rr[0]=0,12<=qr[0]&&!t(ei,ts[0],"RIFF")){if(t(ei,ts[0]+8,"WEBP")){Rr=3;break e}var kr=tr(ei,ts[0]+4);if(12>kr||4294967286<kr){Rr=3;break e}if(jr&&kr>qr[0]-8){Rr=7;break e}Rr[0]=kr,ts[0]+=12,qr[0]-=12}Rr=0}if(Rr!=0)return Rr;for(kr=0<Dr.gb[0],di=di[0];;){e:{var Qr=ei;qr=ri,Rr=di;var rs=gr,es=Lr,_s=ts=[0];if((gs=Br=[Br])[0]=0,8>Rr[0])Rr=7;else{if(!t(Qr,qr[0],"VP8X")){if(tr(Qr,qr[0]+4)!=10){Rr=3;break e}if(18>Rr[0]){Rr=7;break e}var cs=tr(Qr,qr[0]+8),ws=1+Wr(Qr,qr[0]+12);if(2147483648<=ws*(Qr=1+Wr(Qr,qr[0]+15))){Rr=3;break e}_s!=null&&(_s[0]=cs),rs!=null&&(rs[0]=ws),es!=null&&(es[0]=Qr),qr[0]+=18,Rr[0]-=18,gs[0]=1}Rr=0}}if(Br=Br[0],ts=ts[0],Rr!=0)return Rr;if(qr=!!(2&ts),!kr&&Br)return 3;if(ir!=null&&(ir[0]=!!(16&ts)),rr!=null&&(rr[0]=qr),lr!=null&&(lr[0]=0),rr=gr[0],ts=Lr[0],Br&&qr&&dr==null){Rr=0;break}if(4>di){Rr=7;break}if(kr&&Br||!kr&&!Br&&!t(ei,ri[0],"ALPH")){di=[di],Dr.na=[Dr.na],Dr.P=[Dr.P],Dr.Sa=[Dr.Sa];e:{cs=ei,Rr=ri,kr=di;var gs=Dr.gb;rs=Dr.na,es=Dr.P,_s=Dr.Sa,ws=22,e(cs!=null),e(kr!=null),Qr=Rr[0];var Ws=kr[0];for(e(rs!=null),e(_s!=null),rs[0]=null,es[0]=null,_s[0]=0;;){if(Rr[0]=Qr,kr[0]=Ws,8>Ws){Rr=7;break e}var Ys=tr(cs,Qr+4);if(4294967286<Ys){Rr=3;break e}var Hs=8+Ys+1&-2;if(ws+=Hs,0<gs&&ws>gs){Rr=3;break e}if(!t(cs,Qr,"VP8 ")||!t(cs,Qr,"VP8L")){Rr=0;break e}if(Ws[0]<Hs){Rr=7;break e}t(cs,Qr,"ALPH")||(rs[0]=cs,es[0]=Qr+8,_s[0]=Ys),Qr+=Hs,Ws-=Hs}}if(di=di[0],Dr.na=Dr.na[0],Dr.P=Dr.P[0],Dr.Sa=Dr.Sa[0],Rr!=0)break}di=[di],Dr.Ja=[Dr.Ja],Dr.xa=[Dr.xa];e:if(gs=ei,Rr=ri,kr=di,rs=Dr.gb[0],es=Dr.Ja,_s=Dr.xa,cs=Rr[0],Qr=!t(gs,cs,"VP8 "),ws=!t(gs,cs,"VP8L"),e(gs!=null),e(kr!=null),e(es!=null),e(_s!=null),8>kr[0])Rr=7;else{if(Qr||ws){if(gs=tr(gs,cs+4),12<=rs&&gs>rs-12){Rr=3;break e}if(jr&&gs>kr[0]-8){Rr=7;break e}es[0]=gs,Rr[0]+=8,kr[0]-=8,_s[0]=ws}else _s[0]=5<=kr[0]&&gs[cs+0]==47&&!(gs[cs+4]>>5),es[0]=kr[0];Rr=0}if(di=di[0],Dr.Ja=Dr.Ja[0],Dr.xa=Dr.xa[0],ri=ri[0],Rr!=0)break;if(4294967286<Dr.Ja)return 3;if(lr==null||qr||(lr[0]=Dr.xa?2:1),rr=[rr],ts=[ts],Dr.xa){if(5>di){Rr=7;break}lr=rr,jr=ts,qr=ir,ei==null||5>di?ei=0:5<=di&&ei[ri+0]==47&&!(ei[ri+4]>>5)?(kr=[0],gs=[0],rs=[0],ar(es=new Ni,ei,ri,di),Cs(es,kr,gs,rs)?(lr!=null&&(lr[0]=kr[0]),jr!=null&&(jr[0]=gs[0]),qr!=null&&(qr[0]=rs[0]),ei=1):ei=0):ei=0}else{if(10>di){Rr=7;break}lr=ts,ei==null||10>di||!Ad(ei,ri+3,di-3)?ei=0:(jr=ei[ri+0]|ei[ri+1]<<8|ei[ri+2]<<16,qr=16383&(ei[ri+7]<<8|ei[ri+6]),ei=16383&(ei[ri+9]<<8|ei[ri+8]),1&jr||3<(jr>>1&7)||!(jr>>4&1)||jr>>5>=Dr.Ja||!qr||!ei?ei=0:(rr&&(rr[0]=qr),lr&&(lr[0]=ei),ei=1))}if(!ei||(rr=rr[0],ts=ts[0],Br&&(gr[0]!=rr||Lr[0]!=ts)))return 3;dr!=null&&(dr[0]=Dr,dr.offset=ri-dr.w,e(4294967286>ri-dr.w),e(dr.offset==dr.ha-di));break}return Rr==0||Rr==7&&Br&&dr==null?(ir!=null&&(ir[0]|=Dr.na!=null&&0<Dr.na.length),Li!=null&&(Li[0]=rr),ji!=null&&(ji[0]=ts),0):Rr}function Bu(ei,ri,di){var Li=ri.width,ji=ri.height,ir=0,rr=0,lr=Li,dr=ji;if(ri.Da=ei!=null&&0<ei.Da,ri.Da&&(lr=ei.cd,dr=ei.bd,ir=ei.v,rr=ei.j,11>di||(ir&=-2,rr&=-2),0>ir||0>rr||0>=lr||0>=dr||ir+lr>Li||rr+dr>ji))return 0;if(ri.v=ir,ri.j=rr,ri.va=ir+lr,ri.o=rr+dr,ri.U=lr,ri.T=dr,ri.da=ei!=null&&0<ei.da,ri.da){if(!Nr(lr,dr,di=[ei.ib],ir=[ei.hb]))return 0;ri.ib=di[0],ri.hb=ir[0]}return ri.ob=ei!=null&&ei.ob,ri.Kb=ei==null||!ei.Sd,ri.da&&(ri.ob=ri.ib<3*Li/4&&ri.hb<3*ji/4,ri.Kb=0),1}function Uu(ei){if(ei==null)return 2;if(11>ei.S){var ri=ei.f.RGBA;ri.fb+=(ei.height-1)*ri.A,ri.A=-ri.A}else ri=ei.f.kb,ei=ei.height,ri.O+=(ei-1)*ri.fa,ri.fa=-ri.fa,ri.N+=(ei-1>>1)*ri.Ab,ri.Ab=-ri.Ab,ri.W+=(ei-1>>1)*ri.Db,ri.Db=-ri.Db,ri.F!=null&&(ri.J+=(ei-1)*ri.lb,ri.lb=-ri.lb);return 0}function iu(ei,ri,di,Li){if(Li==null||0>=ei||0>=ri)return 2;if(di!=null){if(di.Da){var ji=di.cd,ir=di.bd,rr=-2&di.v,lr=-2&di.j;if(0>rr||0>lr||0>=ji||0>=ir||rr+ji>ei||lr+ir>ri)return 2;ei=ji,ri=ir}if(di.da){if(!Nr(ei,ri,ji=[di.ib],ir=[di.hb]))return 2;ei=ji[0],ri=ir[0]}}Li.width=ei,Li.height=ri;e:{var dr=Li.width,gr=Li.height;if(ei=Li.S,0>=dr||0>=gr||!(ei>=Wd&&13>ei))ei=2;else{if(0>=Li.Rd&&Li.sd==null){rr=ir=ji=ri=0;var Lr=(lr=dr*yf[ei])*gr;if(11>ei||(ir=(gr+1)/2*(ri=(dr+1)/2),ei==12&&(rr=(ji=dr)*gr)),(gr=Be(Lr+2*ir+rr))==null){ei=1;break e}Li.sd=gr,11>ei?((dr=Li.f.RGBA).eb=gr,dr.fb=0,dr.A=lr,dr.size=Lr):((dr=Li.f.kb).y=gr,dr.O=0,dr.fa=lr,dr.Fd=Lr,dr.f=gr,dr.N=0+Lr,dr.Ab=ri,dr.Cd=ir,dr.ea=gr,dr.W=0+Lr+ir,dr.Db=ri,dr.Ed=ir,ei==12&&(dr.F=gr,dr.J=0+Lr+2*ir),dr.Tc=rr,dr.lb=ji)}if(ri=1,ji=Li.S,ir=Li.width,rr=Li.height,ji>=Wd&&13>ji)if(11>ji)ei=Li.f.RGBA,ri&=(lr=Math.abs(ei.A))*(rr-1)+ir<=ei.size,ri&=lr>=ir*yf[ji],ri&=ei.eb!=null;else{ei=Li.f.kb,lr=(ir+1)/2,Lr=(rr+1)/2,dr=Math.abs(ei.fa),gr=Math.abs(ei.Ab);var Br=Math.abs(ei.Db),jr=Math.abs(ei.lb),Dr=jr*(rr-1)+ir;ri&=dr*(rr-1)+ir<=ei.Fd,ri&=gr*(Lr-1)+lr<=ei.Cd,ri=(ri&=Br*(Lr-1)+lr<=ei.Ed)&dr>=ir&gr>=lr&Br>=lr,ri&=ei.y!=null,ri&=ei.f!=null,ri&=ei.ea!=null,ji==12&&(ri&=jr>=ir,ri&=Dr<=ei.Tc,ri&=ei.F!=null)}else ri=0;ei=ri?0:2}}return ei!=0||di!=null&&di.fd&&(ei=Uu(Li)),ei}var aa=64,ru=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],su=24,au=32,ju=8,La=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Mr("Predictor0","PredictorAdd0"),fi.Predictor0=function(){return 4278190080},fi.Predictor1=function(ei){return ei},fi.Predictor2=function(ei,ri,di){return ri[di+0]},fi.Predictor3=function(ei,ri,di){return ri[di+1]},fi.Predictor4=function(ei,ri,di){return ri[di-1]},fi.Predictor5=function(ei,ri,di){return wr(wr(ei,ri[di+1]),ri[di+0])},fi.Predictor6=function(ei,ri,di){return wr(ei,ri[di-1])},fi.Predictor7=function(ei,ri,di){return wr(ei,ri[di+0])},fi.Predictor8=function(ei,ri,di){return wr(ri[di-1],ri[di+0])},fi.Predictor9=function(ei,ri,di){return wr(ri[di+0],ri[di+1])},fi.Predictor10=function(ei,ri,di){return wr(wr(ei,ri[di-1]),wr(ri[di+0],ri[di+1]))},fi.Predictor11=function(ei,ri,di){var Li=ri[di+0];return 0>=Sr(Li>>24&255,ei>>24&255,(ri=ri[di-1])>>24&255)+Sr(Li>>16&255,ei>>16&255,ri>>16&255)+Sr(Li>>8&255,ei>>8&255,ri>>8&255)+Sr(255&Li,255&ei,255&ri)?Li:ei},fi.Predictor12=function(ei,ri,di){var Li=ri[di+0];return(Cr((ei>>24&255)+(Li>>24&255)-((ri=ri[di-1])>>24&255))<<24|Cr((ei>>16&255)+(Li>>16&255)-(ri>>16&255))<<16|Cr((ei>>8&255)+(Li>>8&255)-(ri>>8&255))<<8|Cr((255&ei)+(255&Li)-(255&ri)))>>>0},fi.Predictor13=function(ei,ri,di){var Li=ri[di-1];return(Er((ei=wr(ei,ri[di+0]))>>24&255,Li>>24&255)<<24|Er(ei>>16&255,Li>>16&255)<<16|Er(ei>>8&255,Li>>8&255)<<8|Er(ei>>0&255,Li>>0&255))>>>0};var Fh=fi.PredictorAdd0;fi.PredictorAdd1=Gr,Mr("Predictor2","PredictorAdd2"),Mr("Predictor3","PredictorAdd3"),Mr("Predictor4","PredictorAdd4"),Mr("Predictor5","PredictorAdd5"),Mr("Predictor6","PredictorAdd6"),Mr("Predictor7","PredictorAdd7"),Mr("Predictor8","PredictorAdd8"),Mr("Predictor9","PredictorAdd9"),Mr("Predictor10","PredictorAdd10"),Mr("Predictor11","PredictorAdd11"),Mr("Predictor12","PredictorAdd12"),Mr("Predictor13","PredictorAdd13");var Vu=fi.PredictorAdd2;as("ColorIndexInverseTransform","MapARGB","32b",function(ei){return ei>>8&255},function(ei){return ei}),as("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(ei){return ei},function(ei){return ei>>8&255});var Fd,qa=fi.ColorIndexInverseTransform,cu=fi.MapARGB,Bd=fi.VP8LColorIndexInverseTransformAlpha,Ud=fi.MapAlpha,yc=fi.VP8LPredictorsAdd=[];yc.length=16,(fi.VP8LPredictors=[]).length=16,(fi.VP8LPredictorsAdd_C=[]).length=16,(fi.VP8LPredictors_C=[]).length=16;var Dc,Ra,ga,_c,oc,ac,uu,cc,To,zu,ma,Wa,du,jd,$u,Gc,Fc,Cc,Bc,hu,Uc,Ac,Hu,Ya,Xa,go,yo,ko,ta=Be(511),uc=Be(2041),qu=Be(225),fu=Be(767),Vd=0,Bh=uc,$d=qu,Fa=fu,Ka=ta,Wd=0,Yd=1,af=2,Xd=3,Zd=4,Uh=5,lf=6,jh=7,Vh=8,Jd=9,zh=10,lp=[2,3,7],cp=[3,3,11],cf=[280,256,256,256,40],up=[0,1,1,1,0],dp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],fp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pp=8,$h=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wu=null,gp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_p=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Cp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ec=[],wl=[],dc=[],Ap=1,df=2,Sc=[],Za=[];Xr("UpsampleRgbLinePair",zs,3),Xr("UpsampleBgrLinePair",Eo,3),Xr("UpsampleRgbaLinePair",Il,4),Xr("UpsampleBgraLinePair",na,4),Xr("UpsampleArgbLinePair",fa,4),Xr("UpsampleRgba4444LinePair",Zo,2),Xr("UpsampleRgb565LinePair",Io,2);var Ep=fi.UpsampleRgbLinePair,Sp=fi.UpsampleBgrLinePair,hf=fi.UpsampleRgbaLinePair,ff=fi.UpsampleBgraLinePair,pf=fi.UpsampleArgbLinePair,gf=fi.UpsampleRgba4444LinePair,bp=fi.UpsampleRgb565LinePair,eh=16,th=1<<eh-1,Yu=-227,qh=482,Ip=6,mf=0,wp=Be(256),Pp=Be(256),xp=Be(256),Tp=Be(256),Lp=Be(qh-Yu),Rp=Be(qh-Yu);nc("YuvToRgbRow",zs,3),nc("YuvToBgrRow",Eo,3),nc("YuvToRgbaRow",Il,4),nc("YuvToBgraRow",na,4),nc("YuvToArgbRow",fa,4),nc("YuvToRgba4444Row",Zo,2),nc("YuvToRgb565Row",Io,2);var vf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nh=[0,2,8],Mp=[8,7,6,4,4,2,2,2,1,1,1,1],Op=1;this.WebPDecodeRGBA=function(ei,ri,di,Li,ji){var ir=Yd,rr=new eu,lr=new Zs;rr.ba=lr,lr.S=ir,lr.width=[lr.width],lr.height=[lr.height];var dr=lr.width,gr=lr.height,Lr=new _o;if(Lr==null||ei==null)var Br=2;else e(Lr!=null),Br=nu(ei,ri,di,Lr.width,Lr.height,Lr.Pd,Lr.Qd,Lr.format,null);if(Br!=0?dr=0:(dr!=null&&(dr[0]=Lr.width[0]),gr!=null&&(gr[0]=Lr.height[0]),dr=1),dr){lr.width=lr.width[0],lr.height=lr.height[0],Li!=null&&(Li[0]=lr.width),ji!=null&&(ji[0]=lr.height);e:{if(Li=new Wc,(ji=new Ou).data=ei,ji.w=ri,ji.ha=di,ji.kd=1,ri=[0],e(ji!=null),((ei=nu(ji.data,ji.w,ji.ha,null,null,null,ri,null,ji))==0||ei==7)&&ri[0]&&(ei=4),(ri=ei)==0){if(e(rr!=null),Li.data=ji.data,Li.w=ji.w+ji.offset,Li.ha=ji.ha-ji.offset,Li.put=$o,Li.ac=qs,Li.bc=Ts,Li.ma=rr,ji.xa){if((ei=oa())==null){rr=1;break e}if(function(jr,Dr){var ts=[0],qr=[0],Rr=[0];t:for(;;){if(jr==null)return 0;if(Dr==null)return jr.a=2,0;if(jr.l=Dr,jr.a=0,ar(jr.m,Dr.data,Dr.w,Dr.ha),!Cs(jr.m,ts,qr,Rr)){jr.a=3;break t}if(jr.xb=df,Dr.width=ts[0],Dr.height=qr[0],!Dl(ts[0],qr[0],1,jr,null))break t;return 1}return e(jr.a!=0),0}(ei,Li)){if(Li=(ri=iu(Li.width,Li.height,rr.Oa,rr.ba))==0){t:{Li=ei;n:for(;;){if(Li==null){Li=0;break t}if(e(Li.s.yc!=null),e(Li.s.Ya!=null),e(0<Li.s.Wb),e((di=Li.l)!=null),e((ji=di.ma)!=null),Li.xb!=0){if(Li.ca=ji.ba,Li.tb=ji.tb,e(Li.ca!=null),!Bu(ji.Oa,di,Xd)){Li.a=2;break n}if(!Rc(Li,di.width)||di.da)break n;if((di.da||As(Li.ca.S))&&Fr(),11>Li.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Li.ca.f.kb.F!=null&&Fr()),Li.Pb&&0<Li.s.ua&&Li.s.vb.X==null&&!pr(Li.s.vb,Li.s.Wa.Xa)){Li.a=1;break n}Li.xb=0}if(!Pa(Li,Li.V,Li.Ba,Li.c,Li.i,di.o,ya))break n;ji.Dc=Li.Ma,Li=1;break t}e(Li.a!=0),Li=0}Li=!Li}Li&&(ri=ei.a)}else ri=ei.a}else{if((ei=new _h)==null){rr=1;break e}if(ei.Fa=ji.na,ei.P=ji.P,ei.qc=ji.Sa,Ed(ei,Li)){if((ri=iu(Li.width,Li.height,rr.Oa,rr.ba))==0){if(ei.Aa=0,di=rr.Oa,e((ji=ei)!=null),di!=null){if(0<(dr=0>(dr=di.Md)?0:100<dr?255:255*dr/100)){for(gr=Lr=0;4>gr;++gr)12>(Br=ji.pb[gr]).lc&&(Br.ia=dr*Mp[0>Br.lc?0:Br.lc]>>3),Lr|=Br.ia;Lr&&(alert("todo:VP8InitRandom"),ji.ia=1)}ji.Ga=di.Id,100<ji.Ga?ji.Ga=100:0>ji.Ga&&(ji.Ga=0)}Ch(ei,Li)||(ri=ei.a)}}else ri=ei.a}ri==0&&rr.Oa!=null&&rr.Oa.fd&&(ri=Uu(rr.ba))}rr=ri}ir=rr!=0?null:11>ir?lr.f.RGBA.eb:lr.f.kb.y}else ir=null;return ir};var yf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Cn(fi,Mi){for(var Oi="",ui=0;ui<4;ui++)Oi+=String.fromCharCode(fi[Mi++]);return Oi}function An(fi,Mi){return(fi[Mi+0]<<0|fi[Mi+1]<<8|fi[Mi+2]<<16)>>>0}function En(fi,Mi){return(fi[Mi+0]<<0|fi[Mi+1]<<8|fi[Mi+2]<<16|fi[Mi+3]<<24)>>>0}new We;var Sn=[0],Tn=[0],Ln=[],Bn=new We,ti=Te,ni=function(fi,Mi){var Oi={},ui=0,li=!1,Ri=0,Pi=0;if(Oi.frames=[],!function(or,er,fr,mr){for(var hr=0;hr<mr;hr++)if(or[er+hr]!=fr.charCodeAt(hr))return!0;return!1}(fi,Mi,"RIFF",4)){var Fi,Hi;for(En(fi,Mi+=4),Mi+=8;Mi<fi.length;){var nr=Cn(fi,Mi),ar=En(fi,Mi+=4);Mi+=4;var cr=ar+(1&ar);switch(nr){case"VP8 ":case"VP8L":Oi.frames[ui]===void 0&&(Oi.frames[ui]={}),(Ni=Oi.frames[ui]).src_off=li?Pi:Mi-8,Ni.src_size=Ri+ar+8,ui++,li&&(li=!1,Ri=0,Pi=0);break;case"VP8X":(Ni=Oi.header={}).feature_flags=fi[Mi];var sr=Mi+4;Ni.canvas_width=1+An(fi,sr),sr+=3,Ni.canvas_height=1+An(fi,sr),sr+=3;break;case"ALPH":li=!0,Ri=cr+8,Pi=Mi-8;break;case"ANIM":(Ni=Oi.header).bgcolor=En(fi,Mi),sr=Mi+4,Ni.loop_count=(Fi=fi)[(Hi=sr)+0]<<0|Fi[Hi+1]<<8,sr+=2;break;case"ANMF":var br,Ni;(Ni=Oi.frames[ui]={}).offset_x=2*An(fi,Mi),Mi+=3,Ni.offset_y=2*An(fi,Mi),Mi+=3,Ni.width=1+An(fi,Mi),Mi+=3,Ni.height=1+An(fi,Mi),Mi+=3,Ni.duration=An(fi,Mi),Mi+=3,br=fi[Mi++],Ni.dispose=1&br,Ni.blend=br>>1&1}nr!="ANMF"&&(Mi+=cr)}return Oi}}(ti,0);ni.response=ti,ni.rgbaoutput=!0,ni.dataurl=!1;var ii=ni.header?ni.header:null,si=ni.frames?ni.frames:null;if(ii){ii.loop_counter=ii.loop_count,Sn=[ii.canvas_height],Tn=[ii.canvas_width];for(var oi=0;oi<si.length&&si[oi].blend!=0;oi++);}var ci=si[0],vi=Bn.WebPDecodeRGBA(ti,ci.src_off,ci.src_size,Tn,Sn);ci.rgba=vi,ci.imgwidth=Tn[0],ci.imgheight=Sn[0];for(var pi=0;pi<Tn[0]*Sn[0]*4;pi++)Ln[pi]=vi[pi];return this.width=Tn,this.height=Sn,this.data=Ln,this}(function(Te){var e=function(){return typeof zlibSync=="function"},t=function(Sn,Tn,Ln,Bn){var ti=4,ni=Ue;switch(Bn){case Te.image_compression.FAST:ti=1,ni=Be;break;case Te.image_compression.MEDIUM:ti=6,ni=He;break;case Te.image_compression.SLOW:ti=9,ni=We}Sn=Oe(Sn,Tn,Ln,ni);var ii=zlibSync(Sn,{level:ti});return Te.__addimage__.arrayBufferToBinaryString(ii)},Oe=function(Sn,Tn,Ln,Bn){for(var ti,ni,ii,si=Sn.length/Tn,oi=new Uint8Array(Sn.length+si),ci=An(),vi=0;vi<si;vi+=1){if(ii=vi*Tn,ti=Sn.subarray(ii,ii+Tn),Bn)oi.set(Bn(ti,Ln,ni),ii+vi);else{for(var pi,fi=ci.length,Mi=[];pi<fi;pi+=1)Mi[pi]=ci[pi](ti,Ln,ni);var Oi=En(Mi.concat());oi.set(Mi[Oi],ii+vi)}ni=ti}return oi},ke=function(Sn){var Tn=Array.apply([],Sn);return Tn.unshift(0),Tn},Be=function(Sn,Tn){var Ln,Bn=[],ti=Sn.length;Bn[0]=1;for(var ni=0;ni<ti;ni+=1)Ln=Sn[ni-Tn]||0,Bn[ni+1]=Sn[ni]-Ln+256&255;return Bn},Ue=function(Sn,Tn,Ln){var Bn,ti=[],ni=Sn.length;ti[0]=2;for(var ii=0;ii<ni;ii+=1)Bn=Ln&&Ln[ii]||0,ti[ii+1]=Sn[ii]-Bn+256&255;return ti},He=function(Sn,Tn,Ln){var Bn,ti,ni=[],ii=Sn.length;ni[0]=3;for(var si=0;si<ii;si+=1)Bn=Sn[si-Tn]||0,ti=Ln&&Ln[si]||0,ni[si+1]=Sn[si]+256-(Bn+ti>>>1)&255;return ni},We=function(Sn,Tn,Ln){var Bn,ti,ni,ii,si=[],oi=Sn.length;si[0]=4;for(var ci=0;ci<oi;ci+=1)Bn=Sn[ci-Tn]||0,ti=Ln&&Ln[ci]||0,ni=Ln&&Ln[ci-Tn]||0,ii=Cn(Bn,ti,ni),si[ci+1]=Sn[ci]-ii+256&255;return si},Cn=function(Sn,Tn,Ln){if(Sn===Tn&&Tn===Ln)return Sn;var Bn=Math.abs(Tn-Ln),ti=Math.abs(Sn-Ln),ni=Math.abs(Sn+Tn-Ln-Ln);return Bn<=ti&&Bn<=ni?Sn:ti<=ni?Tn:Ln},An=function(){return[ke,Be,Ue,He,We]},En=function(Sn){var Tn=Sn.map(function(Ln){return Ln.reduce(function(Bn,ti){return Bn+Math.abs(ti)},0)});return Tn.indexOf(Math.min.apply(null,Tn))};Te.processPNG=function(Sn,Tn,Ln,Bn){var ti,ni,ii,si,oi,ci,vi,pi,fi,Mi,Oi,ui,li,Ri,Pi,Fi=this.decode.FLATE_DECODE,Hi="";if(this.__addimage__.isArrayBuffer(Sn)&&(Sn=new Uint8Array(Sn)),this.__addimage__.isArrayBufferView(Sn)){if(Sn=(ii=new Kt(Sn)).imgData,ni=ii.bits,ti=ii.colorSpace,oi=ii.colors,[4,6].indexOf(ii.colorType)!==-1){if(ii.bits===8){fi=(pi=ii.pixelBitlength==32?new Uint32Array(ii.decodePixels().buffer):ii.pixelBitlength==16?new Uint16Array(ii.decodePixels().buffer):new Uint8Array(ii.decodePixels().buffer)).length,Oi=new Uint8Array(fi*ii.colors),Mi=new Uint8Array(fi);var nr,ar=ii.pixelBitlength-ii.bits;for(Ri=0,Pi=0;Ri<fi;Ri++){for(li=pi[Ri],nr=0;nr<ar;)Oi[Pi++]=li>>>nr&255,nr+=ii.bits;Mi[Ri]=li>>>nr&255}}if(ii.bits===16){fi=(pi=new Uint32Array(ii.decodePixels().buffer)).length,Oi=new Uint8Array(fi*(32/ii.pixelBitlength)*ii.colors),Mi=new Uint8Array(fi*(32/ii.pixelBitlength)),ui=ii.colors>1,Ri=0,Pi=0;for(var cr=0;Ri<fi;)li=pi[Ri++],Oi[Pi++]=li>>>0&255,ui&&(Oi[Pi++]=li>>>16&255,li=pi[Ri++],Oi[Pi++]=li>>>0&255),Mi[cr++]=li>>>16&255;ni=8}Bn!==Te.image_compression.NONE&&e()?(Sn=t(Oi,ii.width*ii.colors,ii.colors,Bn),vi=t(Mi,ii.width,1,Bn)):(Sn=Oi,vi=Mi,Fi=void 0)}if(ii.colorType===3&&(ti=this.color_spaces.INDEXED,ci=ii.palette,ii.transparency.indexed)){var sr=ii.transparency.indexed,br=0;for(Ri=0,fi=sr.length;Ri<fi;++Ri)br+=sr[Ri];if((br/=255)===fi-1&&sr.indexOf(0)!==-1)si=[sr.indexOf(0)];else if(br!==fi){for(pi=ii.decodePixels(),Mi=new Uint8Array(pi.length),Ri=0,fi=pi.length;Ri<fi;Ri++)Mi[Ri]=sr[pi[Ri]];vi=t(Mi,ii.width,1)}}var Ni=function(or){var er;switch(or){case Te.image_compression.FAST:er=11;break;case Te.image_compression.MEDIUM:er=13;break;case Te.image_compression.SLOW:er=14;break;default:er=12}return er}(Bn);return Fi===this.decode.FLATE_DECODE&&(Hi="/Predictor "+Ni+" "),Hi+="/Colors "+oi+" /BitsPerComponent "+ni+" /Columns "+ii.width,(this.__addimage__.isArrayBuffer(Sn)||this.__addimage__.isArrayBufferView(Sn))&&(Sn=this.__addimage__.arrayBufferToBinaryString(Sn)),(vi&&this.__addimage__.isArrayBuffer(vi)||this.__addimage__.isArrayBufferView(vi))&&(vi=this.__addimage__.arrayBufferToBinaryString(vi)),{alias:Ln,data:Sn,index:Tn,filter:Fi,decodeParameters:Hi,transparency:si,palette:ci,sMask:vi,predictor:Ni,width:ii.width,height:ii.height,bitsPerComponent:ni,colorSpace:ti}}}})(E.API),function(Te){Te.processGIF89A=function(e,t,Oe,ke){var Be=new Zt(e),Ue=Be.width,He=Be.height,We=[];Be.decodeAndBlitFrameRGBA(0,We);var Cn={data:We,width:Ue,height:He},An=new Qt(100).encode(Cn,100);return Te.processJPEG.call(this,An,t,Oe,ke)},Te.processGIF87A=Te.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Te=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Te);for(var e=0;e<Te;e++){var t=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:ke,green:Oe,blue:t,quad:Be}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Te="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[Te]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var Te,e=Math.ceil(this.width/8),t=e%4;for(Te=this.height-1;Te>=0;Te--){for(var Oe=this.bottom_up?Te:this.height-1-Te,ke=0;ke<e;ke++)for(var Be=this.datav.getUint8(this.pos++,!0),Ue=Oe*this.width*4+8*ke*4,He=0;He<8&&8*ke+He<this.width;He++){var We=this.palette[Be>>7-He&1];this.data[Ue+4*He]=We.blue,this.data[Ue+4*He+1]=We.green,this.data[Ue+4*He+2]=We.red,this.data[Ue+4*He+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var Te=Math.ceil(this.width/2),e=Te%4,t=this.height-1;t>=0;t--){for(var Oe=this.bottom_up?t:this.height-1-t,ke=0;ke<Te;ke++){var Be=this.datav.getUint8(this.pos++,!0),Ue=Oe*this.width*4+2*ke*4,He=Be>>4,We=15&Be,Cn=this.palette[He];if(this.data[Ue]=Cn.blue,this.data[Ue+1]=Cn.green,this.data[Ue+2]=Cn.red,this.data[Ue+3]=255,2*ke+1>=this.width)break;Cn=this.palette[We],this.data[Ue+4]=Cn.blue,this.data[Ue+4+1]=Cn.green,this.data[Ue+4+2]=Cn.red,this.data[Ue+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var Te=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,Oe=0;Oe<this.width;Oe++){var ke=this.datav.getUint8(this.pos++,!0),Be=t*this.width*4+4*Oe;if(ke<this.palette.length){var Ue=this.palette[ke];this.data[Be]=Ue.red,this.data[Be+1]=Ue.green,this.data[Be+2]=Ue.blue,this.data[Be+3]=255}else this.data[Be]=255,this.data[Be+1]=255,this.data[Be+2]=255,this.data[Be+3]=255}Te!==0&&(this.pos+=4-Te)}},te.prototype.bit15=function(){for(var Te=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var Oe=this.bottom_up?t:this.height-1-t,ke=0;ke<this.width;ke++){var Be=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ue=(Be&e)/e*255|0,He=(Be>>5&e)/e*255|0,We=(Be>>10&e)/e*255|0,Cn=Be>>15?255:0,An=Oe*this.width*4+4*ke;this.data[An]=We,this.data[An+1]=He,this.data[An+2]=Ue,this.data[An+3]=Cn}this.pos+=Te}},te.prototype.bit16=function(){for(var Te=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),Oe=this.height-1;Oe>=0;Oe--){for(var ke=this.bottom_up?Oe:this.height-1-Oe,Be=0;Be<this.width;Be++){var Ue=this.datav.getUint16(this.pos,!0);this.pos+=2;var He=(Ue&e)/e*255|0,We=(Ue>>5&t)/t*255|0,Cn=(Ue>>11)/e*255|0,An=ke*this.width*4+4*Be;this.data[An]=Cn,this.data[An+1]=We,this.data[An+2]=He,this.data[An+3]=255}this.pos+=Te}},te.prototype.bit24=function(){for(var Te=this.height-1;Te>=0;Te--){for(var e=this.bottom_up?Te:this.height-1-Te,t=0;t<this.width;t++){var Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=e*this.width*4+4*t;this.data[Ue]=Be,this.data[Ue+1]=ke,this.data[Ue+2]=Oe,this.data[Ue+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Te=this.height-1;Te>=0;Te--)for(var e=this.bottom_up?Te:this.height-1-Te,t=0;t<this.width;t++){var Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),He=e*this.width*4+4*t;this.data[He]=Be,this.data[He+1]=ke,this.data[He+2]=Oe,this.data[He+3]=Ue}},te.prototype.getData=function(){return this.data},function(Te){Te.processBMP=function(e,t,Oe,ke){var Be=new te(e,!1),Ue=Be.width,He=Be.height,We={data:Be.getData(),width:Ue,height:He},Cn=new Qt(100).encode(We,100);return Te.processJPEG.call(this,Cn,t,Oe,ke)}}(E.API),ee.prototype.getData=function(){return this.data},function(Te){Te.processWEBP=function(e,t,Oe,ke){var Be=new ee(e),Ue=Be.width,He=Be.height,We={data:Be.getData(),width:Ue,height:He},Cn=new Qt(100).encode(We,100);return Te.processJPEG.call(this,Cn,t,Oe,ke)}}(E.API),E.API.processRGBA=function(Te,e,t){for(var Oe=Te.data,ke=Oe.length,Be=new Uint8Array(ke/4*3),Ue=new Uint8Array(ke/4),He=0,We=0,Cn=0;Cn<ke;Cn+=4){var An=Oe[Cn],En=Oe[Cn+1],Sn=Oe[Cn+2],Tn=Oe[Cn+3];Be[He++]=An,Be[He++]=En,Be[He++]=Sn,Ue[We++]=Tn}var Ln=this.__addimage__.arrayBufferToBinaryString(Be);return{alpha:this.__addimage__.arrayBufferToBinaryString(Ue),data:Ln,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Te.width,height:Te.height}},E.API.setLanguage=function(Te){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Te]!==void 0&&(this.internal.languageSettings.languageCode=Te,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Te,e){var t,Oe,ke=(e=e||{}).font||this.internal.getFont(),Be=e.fontSize||this.internal.getFontSize(),Ue=e.charSpace||this.internal.getCharSpace(),He=e.widths?e.widths:ke.metadata.Unicode.widths,We=He.fof?He.fof:1,Cn=e.kerning?e.kerning:ke.metadata.Unicode.kerning,An=Cn.fof?Cn.fof:1,En=e.doKerning!==!1,Sn=0,Tn=Te.length,Ln=0,Bn=He[0]||We,ti=[];for(t=0;t<Tn;t++)Oe=Te.charCodeAt(t),typeof ke.metadata.widthOfString=="function"?ti.push((ke.metadata.widthOfGlyph(ke.metadata.characterToGlyph(Oe))+Ue*(1e3/Be)||0)/1e3):(Sn=En&&_typeof(Cn[Oe])==="object"&&!isNaN(parseInt(Cn[Oe][Ln],10))?Cn[Oe][Ln]/An:0,ti.push((He[Oe]||Bn)/We+Sn)),Ln=Oe;return ti},Yt=Vt.getStringUnitWidth=function(Te,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),Oe=e.font||this.internal.getFont(),ke=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Te=Vt.processArabic(Te)),typeof Oe.metadata.widthOfString=="function"?Oe.metadata.widthOfString(Te,t,ke)/t:Gt.apply(this,arguments).reduce(function(Be,Ue){return Be+Ue},0)},Jt=function(Te,e,t,Oe){for(var ke=[],Be=0,Ue=Te.length,He=0;Be!==Ue&&He+e[Be]<t;)He+=e[Be],Be++;ke.push(Te.slice(0,Be));var We=Be;for(He=0;Be!==Ue;)He+e[Be]>Oe&&(ke.push(Te.slice(We,Be)),He=0,We=Be),He+=e[Be],Be++;return We!==Be&&ke.push(Te.slice(We,Be)),ke},Xt=function(Te,e,t){t||(t={});var Oe,ke,Be,Ue,He,We,Cn,An=[],En=[An],Sn=t.textIndent||0,Tn=0,Ln=0,Bn=Te.split(" "),ti=Gt.apply(this,[" ",t])[0];if(We=t.lineIndent===-1?Bn[0].length+2:t.lineIndent||0){var ni=Array(We).join(" "),ii=[];Bn.map(function(oi){(oi=oi.split(/\s*\n/)).length>1?ii=ii.concat(oi.map(function(ci,vi){return(vi&&ci.length?`
`:"")+ci})):ii.push(oi[0])}),Bn=ii,We=Yt.apply(this,[ni,t])}for(Be=0,Ue=Bn.length;Be<Ue;Be++){var si=0;if(Oe=Bn[Be],We&&Oe[0]==`
`&&(Oe=Oe.substr(1),si=1),Sn+Tn+(Ln=(ke=Gt.apply(this,[Oe,t])).reduce(function(oi,ci){return oi+ci},0))>e||si){if(Ln>e){for(He=Jt.apply(this,[Oe,ke,e-(Sn+Tn),e]),An.push(He.shift()),An=[He.pop()];He.length;)En.push([He.shift()]);Ln=ke.slice(Oe.length-(An[0]?An[0].length:0)).reduce(function(oi,ci){return oi+ci},0)}else An=[Oe];En.push(An),Sn=Ln+We,Tn=ti}else An.push(Oe),Sn+=Tn+Ln,Tn=ti}return Cn=We?function(oi,ci){return(ci?ni:"")+oi.join(" ")}:function(oi){return oi.join(" ")},En.map(Cn)},Vt.splitTextToSize=function(Te,e,t){var Oe,ke=(t=t||{}).fontSize||this.internal.getFontSize(),Be=(function(An){if(An.widths&&An.kerning)return{widths:An.widths,kerning:An.kerning};var En=this.internal.getFont(An.fontName,An.fontStyle);return En.metadata.Unicode?{widths:En.metadata.Unicode.widths||{0:1},kerning:En.metadata.Unicode.kerning||{}}:{font:En.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);Oe=Array.isArray(Te)?Te:String(Te).split(/\r?\n/);var Ue=1*this.internal.scaleFactor*e/ke;Be.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/ke:0,Be.lineIndent=t.lineIndent;var He,We,Cn=[];for(He=0,We=Oe.length;He<We;He++)Cn=Cn.concat(Xt.apply(this,[Oe[He],Ue,Be]));return Cn},function(Te){Te.__fontmetrics__=Te.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},Oe={},ke=0;ke<e.length;ke++)t[e[ke]]="0123456789abcdef"[ke],Oe["0123456789abcdef"[ke]]=e[ke];var Be=function(En){return"0x"+parseInt(En,10).toString(16)},Ue=Te.__fontmetrics__.compress=function(En){var Sn,Tn,Ln,Bn,ti=["{"];for(var ni in En){if(Sn=En[ni],isNaN(parseInt(ni,10))?Tn="'"+ni+"'":(ni=parseInt(ni,10),Tn=(Tn=Be(ni).slice(2)).slice(0,-1)+Oe[Tn.slice(-1)]),typeof Sn=="number")Sn<0?(Ln=Be(Sn).slice(3),Bn="-"):(Ln=Be(Sn).slice(2),Bn=""),Ln=Bn+Ln.slice(0,-1)+Oe[Ln.slice(-1)];else{if(_typeof(Sn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Sn)+".");Ln=Ue(Sn)}ti.push(Tn+Ln)}return ti.push("}"),ti.join("")},He=Te.__fontmetrics__.uncompress=function(En){if(typeof En!="string")throw new Error("Invalid argument passed to uncompress.");for(var Sn,Tn,Ln,Bn,ti={},ni=1,ii=ti,si=[],oi="",ci="",vi=En.length-1,pi=1;pi<vi;pi+=1)(Bn=En[pi])=="'"?Sn?(Ln=Sn.join(""),Sn=void 0):Sn=[]:Sn?Sn.push(Bn):Bn=="{"?(si.push([ii,Ln]),ii={},Ln=void 0):Bn=="}"?((Tn=si.pop())[0][Tn[1]]=ii,Ln=void 0,ii=Tn[0]):Bn=="-"?ni=-1:Ln===void 0?t.hasOwnProperty(Bn)?(oi+=t[Bn],Ln=parseInt(oi,16)*ni,ni=1,oi=""):oi+=Bn:t.hasOwnProperty(Bn)?(ci+=t[Bn],ii[Ln]=parseInt(ci,16)*ni,ni=1,Ln=void 0,ci=""):ci+=Bn;return ti},We={codePages:["WinAnsiEncoding"],WinAnsiEncoding:He("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Cn={Unicode:{Courier:We,"Courier-Bold":We,"Courier-BoldOblique":We,"Courier-Oblique":We,Helvetica:We,"Helvetica-Bold":We,"Helvetica-BoldOblique":We,"Helvetica-Oblique":We,"Times-Roman":We,"Times-Bold":We,"Times-BoldItalic":We,"Times-Italic":We}},An={Unicode:{"Courier-Oblique":He("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":He("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":He("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:He("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":He("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":He("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:He("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:He("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":He("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:He("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":He("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":He("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":He("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":He("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Te.events.push(["addFont",function(En){var Sn=En.font,Tn=An.Unicode[Sn.postScriptName];Tn&&(Sn.metadata.Unicode={},Sn.metadata.Unicode.widths=Tn.widths,Sn.metadata.Unicode.kerning=Tn.kerning);var Ln=Cn.Unicode[Sn.postScriptName];Ln&&(Sn.metadata.Unicode.encoding=Ln,Sn.encoding=Ln.codePages[0])}])}(E.API),function(Te){var e=function(t){for(var Oe=t.length,ke=new Uint8Array(Oe),Be=0;Be<Oe;Be++)ke[Be]=t.charCodeAt(Be);return ke};Te.API.events.push(["addFont",function(t){var Oe=void 0,ke=t.font,Be=t.instance;if(!ke.isStandardFont){if(Be===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+ke.postScriptName+"').");if(typeof(Oe=Be.existsFileInVFS(ke.postScriptName)===!1?Be.loadFile(ke.postScriptName):Be.getFileFromVFS(ke.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+ke.postScriptName+"').");(function(Ue,He){He=/^\x00\x01\x00\x00/.test(He)?e(He):e(u(He)),Ue.metadata=Te.API.TTFFont.open(He),Ue.metadata.Unicode=Ue.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Ue.metadata.glyIdsUsed=[0]})(ke,Oe)}}])}(E),function(Te){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-De-j47Az.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,Oe,ke,Be,Ue,He,We,Cn){if(isNaN(Oe)||isNaN(ke))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Be)||isNaN(Ue))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var An=document.createElement("canvas");An.width=Be,An.height=Ue;var En=An.getContext("2d");En.fillStyle="#fff",En.fillRect(0,0,An.width,An.height);var Sn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Tn=this;return e().then(function(Ln){return Ln.fromString(En,t,Sn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Ln){return Ln.render(Sn)}).then(function(){Tn.addImage(An.toDataURL("image/jpeg",1),Oe,ke,Be,Ue,We,Cn)})}}(),E.API.putTotalPages=function(Te){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(Te,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(Te,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Oe=1;Oe<=this.internal.getNumberOfPages();Oe++)for(var ke=0;ke<this.internal.pages[Oe].length;ke++)this.internal.pages[Oe][ke]=this.internal.pages[Oe][ke].replace(e,t);return this},E.API.viewerPreferences=function(Te,e){var t;Te=Te||{},e=e||!1;var Oe,ke,Be,Ue={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},He=Object.keys(Ue),We=[],Cn=0,An=0,En=0;function Sn(Ln,Bn){var ti,ni=!1;for(ti=0;ti<Ln.length;ti+=1)Ln[ti]===Bn&&(ni=!0);return ni}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Ue)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,Te==="reset"||e===!0){var Tn=He.length;for(En=0;En<Tn;En+=1)t[He[En]].value=t[He[En]].defaultValue,t[He[En]].explicitSet=!1}if(_typeof(Te)==="object"){for(ke in Te)if(Be=Te[ke],Sn(He,ke)&&Be!==void 0){if(t[ke].type==="boolean"&&typeof Be=="boolean")t[ke].value=Be;else if(t[ke].type==="name"&&Sn(t[ke].valueSet,Be))t[ke].value=Be;else if(t[ke].type==="integer"&&Number.isInteger(Be))t[ke].value=Be;else if(t[ke].type==="array"){for(Cn=0;Cn<Be.length;Cn+=1)if(Oe=!0,Be[Cn].length===1&&typeof Be[Cn][0]=="number")We.push(String(Be[Cn]-1));else if(Be[Cn].length>1){for(An=0;An<Be[Cn].length;An+=1)typeof Be[Cn][An]!="number"&&(Oe=!1);Oe===!0&&We.push([Be[Cn][0]-1,Be[Cn][1]-1].join(" "))}t[ke].value="["+We.join(" ")+"]"}else t[ke].value=t[ke].defaultValue;t[ke].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Ln,Bn=[];for(Ln in t)t[Ln].explicitSet===!0&&(t[Ln].type==="name"?Bn.push("/"+Ln+" /"+t[Ln].value):Bn.push("/"+Ln+" "+t[Ln].value));Bn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Bn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(Te){var e=function(){var Oe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',ke=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Be=unescape(encodeURIComponent(Oe)),Ue=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),He=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),We=unescape(encodeURIComponent("</x:xmpmeta>")),Cn=Be.length+Ue.length+He.length+ke.length+We.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Cn+" >>"),this.internal.write("stream"),this.internal.write(ke+Be+Ue+He+We),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Te.addMetadata=function(Oe,ke){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Oe,namespaceuri:ke||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(Te){var e=Te.API,t=e.pdfEscape16=function(Be,Ue){for(var He,We=Ue.metadata.Unicode.widths,Cn=["","0","00","000","0000"],An=[""],En=0,Sn=Be.length;En<Sn;++En){if(He=Ue.metadata.characterToGlyph(Be.charCodeAt(En)),Ue.metadata.glyIdsUsed.push(He),Ue.metadata.toUnicode[He]=Be.charCodeAt(En),We.indexOf(He)==-1&&(We.push(He),We.push([parseInt(Ue.metadata.widthOfGlyph(He),10)])),He=="0")return An.join("");He=He.toString(16),An.push(Cn[4-He.length],He)}return An.join("")},Oe=function(Be){var Ue,He,We,Cn,An,En,Sn;for(An=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,We=[],En=0,Sn=(He=Object.keys(Be).sort(function(Tn,Ln){return Tn-Ln})).length;En<Sn;En++)Ue=He[En],We.length>=100&&(An+=`
`+We.length+` beginbfchar
`+We.join(`
`)+`
endbfchar`,We=[]),Be[Ue]!==void 0&&Be[Ue]!==null&&typeof Be[Ue].toString=="function"&&(Cn=("0000"+Be[Ue].toString(16)).slice(-4),Ue=("0000"+(+Ue).toString(16)).slice(-4),We.push("<"+Ue+"><"+Cn+">"));return We.length&&(An+=`
`+We.length+` beginbfchar
`+We.join(`
`)+`
endbfchar
`),An+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Be){(function(Ue){var He=Ue.font,We=Ue.out,Cn=Ue.newObject,An=Ue.putStream;if(He.metadata instanceof Te.API.TTFFont&&He.encoding==="Identity-H"){for(var En=He.metadata.Unicode.widths,Sn=He.metadata.subset.encode(He.metadata.glyIdsUsed,1),Tn="",Ln=0;Ln<Sn.length;Ln++)Tn+=String.fromCharCode(Sn[Ln]);var Bn=Cn();An({data:Tn,addLength1:!0,objectId:Bn}),We("endobj");var ti=Cn();An({data:Oe(He.metadata.toUnicode),addLength1:!0,objectId:ti}),We("endobj");var ni=Cn();We("<<"),We("/Type /FontDescriptor"),We("/FontName /"+F(He.fontName)),We("/FontFile2 "+Bn+" 0 R"),We("/FontBBox "+Te.API.PDFObject.convert(He.metadata.bbox)),We("/Flags "+He.metadata.flags),We("/StemV "+He.metadata.stemV),We("/ItalicAngle "+He.metadata.italicAngle),We("/Ascent "+He.metadata.ascender),We("/Descent "+He.metadata.decender),We("/CapHeight "+He.metadata.capHeight),We(">>"),We("endobj");var ii=Cn();We("<<"),We("/Type /Font"),We("/BaseFont /"+F(He.fontName)),We("/FontDescriptor "+ni+" 0 R"),We("/W "+Te.API.PDFObject.convert(En)),We("/CIDToGIDMap /Identity"),We("/DW 1000"),We("/Subtype /CIDFontType2"),We("/CIDSystemInfo"),We("<<"),We("/Supplement 0"),We("/Registry (Adobe)"),We("/Ordering ("+He.encoding+")"),We(">>"),We(">>"),We("endobj"),He.objectNumber=Cn(),We("<<"),We("/Type /Font"),We("/Subtype /Type0"),We("/ToUnicode "+ti+" 0 R"),We("/BaseFont /"+F(He.fontName)),We("/Encoding /"+He.encoding),We("/DescendantFonts ["+ii+" 0 R]"),We(">>"),We("endobj"),He.isAlreadyPutted=!0}})(Be)}]),e.events.push(["putFont",function(Be){(function(Ue){var He=Ue.font,We=Ue.out,Cn=Ue.newObject,An=Ue.putStream;if(He.metadata instanceof Te.API.TTFFont&&He.encoding==="WinAnsiEncoding"){for(var En=He.metadata.rawData,Sn="",Tn=0;Tn<En.length;Tn++)Sn+=String.fromCharCode(En[Tn]);var Ln=Cn();An({data:Sn,addLength1:!0,objectId:Ln}),We("endobj");var Bn=Cn();An({data:Oe(He.metadata.toUnicode),addLength1:!0,objectId:Bn}),We("endobj");var ti=Cn();We("<<"),We("/Descent "+He.metadata.decender),We("/CapHeight "+He.metadata.capHeight),We("/StemV "+He.metadata.stemV),We("/Type /FontDescriptor"),We("/FontFile2 "+Ln+" 0 R"),We("/Flags 96"),We("/FontBBox "+Te.API.PDFObject.convert(He.metadata.bbox)),We("/FontName /"+F(He.fontName)),We("/ItalicAngle "+He.metadata.italicAngle),We("/Ascent "+He.metadata.ascender),We(">>"),We("endobj"),He.objectNumber=Cn();for(var ni=0;ni<He.metadata.hmtx.widths.length;ni++)He.metadata.hmtx.widths[ni]=parseInt(He.metadata.hmtx.widths[ni]*(1e3/He.metadata.head.unitsPerEm));We("<</Subtype/TrueType/Type/Font/ToUnicode "+Bn+" 0 R/BaseFont/"+F(He.fontName)+"/FontDescriptor "+ti+" 0 R/Encoding/"+He.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Te.API.PDFObject.convert(He.metadata.hmtx.widths)+">>"),We("endobj"),He.isAlreadyPutted=!0}})(Be)}]);var ke=function(Be){var Ue,He=Be.text||"",We=Be.x,Cn=Be.y,An=Be.options||{},En=Be.mutex||{},Sn=En.pdfEscape,Tn=En.activeFontKey,Ln=En.fonts,Bn=Tn,ti="",ni=0,ii="",si=Ln[Bn].encoding;if(Ln[Bn].encoding!=="Identity-H")return{text:He,x:We,y:Cn,options:An,mutex:En};for(ii=He,Bn=Tn,Array.isArray(He)&&(ii=He[0]),ni=0;ni<ii.length;ni+=1)Ln[Bn].metadata.hasOwnProperty("cmap")&&(Ue=Ln[Bn].metadata.cmap.unicode.codeMap[ii[ni].charCodeAt(0)]),Ue||ii[ni].charCodeAt(0)<256&&Ln[Bn].metadata.hasOwnProperty("Unicode")?ti+=ii[ni]:ti+="";var oi="";return parseInt(Bn.slice(1))<14||si==="WinAnsiEncoding"?oi=Sn(ti,Bn).split("").map(function(ci){return ci.charCodeAt(0).toString(16)}).join(""):si==="Identity-H"&&(oi=t(ti,Ln[Bn])),En.isHex=!0,{text:oi,x:We,y:Cn,options:An,mutex:En}};e.events.push(["postProcessText",function(Be){var Ue=Be.text||"",He=[],We={text:Ue,x:Be.x,y:Be.y,options:Be.options,mutex:Be.mutex};if(Array.isArray(Ue)){var Cn=0;for(Cn=0;Cn<Ue.length;Cn+=1)Array.isArray(Ue[Cn])&&Ue[Cn].length===3?He.push([ke(Object.assign({},We,{text:Ue[Cn][0]})).text,Ue[Cn][1],Ue[Cn][2]]):He.push(ke(Object.assign({},We,{text:Ue[Cn]})).text);Be.text=He}else Be.text=ke(Object.assign({},We,{text:Ue})).text}])}(E),function(Te){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Te.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},Te.addFileToVFS=function(t,Oe){return e.call(this),this.internal.vFS[t]=Oe,this},Te.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(Te){Te.__bidiEngine__=Te.prototype.__bidiEngine__=function(Oe){var ke,Be,Ue,He,We,Cn,An,En=e,Sn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Tn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Ln={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Bn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},ti=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],ni=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ii=!1,si=0;this.__bidiEngine__={};var oi=function(ui){var li=ui.charCodeAt(),Ri=li>>8,Pi=Bn[Ri];return Pi!==void 0?En[256*Pi+(255&li)]:Ri===252||Ri===253?"AL":ni.test(Ri)?"L":Ri===8?"R":"N"},ci=function(ui){for(var li,Ri=0;Ri<ui.length;Ri++){if((li=oi(ui.charAt(Ri)))==="L")return!1;if(li==="R")return!0}return!1},vi=function(ui,li,Ri,Pi){var Fi,Hi,nr,ar,cr=li[Pi];switch(cr){case"L":case"R":ii=!1;break;case"N":case"AN":break;case"EN":ii&&(cr="AN");break;case"AL":ii=!0,cr="R";break;case"WS":cr="N";break;case"CS":Pi<1||Pi+1>=li.length||(Fi=Ri[Pi-1])!=="EN"&&Fi!=="AN"||(Hi=li[Pi+1])!=="EN"&&Hi!=="AN"?cr="N":ii&&(Hi="AN"),cr=Hi===Fi?Hi:"N";break;case"ES":cr=(Fi=Pi>0?Ri[Pi-1]:"B")==="EN"&&Pi+1<li.length&&li[Pi+1]==="EN"?"EN":"N";break;case"ET":if(Pi>0&&Ri[Pi-1]==="EN"){cr="EN";break}if(ii){cr="N";break}for(nr=Pi+1,ar=li.length;nr<ar&&li[nr]==="ET";)nr++;cr=nr<ar&&li[nr]==="EN"?"EN":"N";break;case"NSM":if(Ue&&!He){for(ar=li.length,nr=Pi+1;nr<ar&&li[nr]==="NSM";)nr++;if(nr<ar){var sr=ui[Pi],br=sr>=1425&&sr<=2303||sr===64286;if(Fi=li[nr],br&&(Fi==="R"||Fi==="AL")){cr="R";break}}}cr=Pi<1||(Fi=li[Pi-1])==="B"?"N":Ri[Pi-1];break;case"B":ii=!1,ke=!0,cr=si;break;case"S":Be=!0,cr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ii=!1;break;case"BN":cr="N"}return cr},pi=function(ui,li,Ri){var Pi=ui.split("");return Ri&&fi(Pi,Ri,{hiLevel:si}),Pi.reverse(),li&&li.reverse(),Pi.join("")},fi=function(ui,li,Ri){var Pi,Fi,Hi,nr,ar,cr=-1,sr=ui.length,br=0,Ni=[],or=si?Tn:Sn,er=[];for(ii=!1,ke=!1,Be=!1,Fi=0;Fi<sr;Fi++)er[Fi]=oi(ui[Fi]);for(Hi=0;Hi<sr;Hi++){if(ar=br,Ni[Hi]=vi(ui,er,Ni,Hi),Pi=240&(br=or[ar][Ln[Ni[Hi]]]),br&=15,li[Hi]=nr=or[br][5],Pi>0)if(Pi===16){for(Fi=cr;Fi<Hi;Fi++)li[Fi]=1;cr=-1}else cr=-1;if(or[br][6])cr===-1&&(cr=Hi);else if(cr>-1){for(Fi=cr;Fi<Hi;Fi++)li[Fi]=nr;cr=-1}er[Hi]==="B"&&(li[Hi]=0),Ri.hiLevel|=nr}Be&&function(fr,mr,hr){for(var vr=0;vr<hr;vr++)if(fr[vr]==="S"){mr[vr]=si;for(var _r=vr-1;_r>=0&&fr[_r]==="WS";_r--)mr[_r]=si}}(er,li,sr)},Mi=function(ui,li,Ri,Pi,Fi){if(!(Fi.hiLevel<ui)){if(ui===1&&si===1&&!ke)return li.reverse(),void(Ri&&Ri.reverse());for(var Hi,nr,ar,cr,sr=li.length,br=0;br<sr;){if(Pi[br]>=ui){for(ar=br+1;ar<sr&&Pi[ar]>=ui;)ar++;for(cr=br,nr=ar-1;cr<nr;cr++,nr--)Hi=li[cr],li[cr]=li[nr],li[nr]=Hi,Ri&&(Hi=Ri[cr],Ri[cr]=Ri[nr],Ri[nr]=Hi);br=ar}br++}}},Oi=function(ui,li,Ri){var Pi=ui.split(""),Fi={hiLevel:si};return Ri||(Ri=[]),fi(Pi,Ri,Fi),function(Hi,nr,ar){if(ar.hiLevel!==0&&An)for(var cr,sr=0;sr<Hi.length;sr++)nr[sr]===1&&(cr=ti.indexOf(Hi[sr]))>=0&&(Hi[sr]=ti[cr+1])}(Pi,Ri,Fi),Mi(2,Pi,li,Ri,Fi),Mi(1,Pi,li,Ri,Fi),Pi.join("")};return this.__bidiEngine__.doBidiReorder=function(ui,li,Ri){if(function(Fi,Hi){if(Hi)for(var nr=0;nr<Fi.length;nr++)Hi[nr]=nr;He===void 0&&(He=ci(Fi)),Cn===void 0&&(Cn=ci(Fi))}(ui,li),Ue||!We||Cn)if(Ue&&We&&He^Cn)si=He?1:0,ui=pi(ui,li,Ri);else if(!Ue&&We&&Cn)si=He?1:0,ui=Oi(ui,li,Ri),ui=pi(ui,li);else if(!Ue||He||We||Cn){if(Ue&&!We&&He^Cn)ui=pi(ui,li),He?(si=0,ui=Oi(ui,li,Ri)):(si=1,ui=Oi(ui,li,Ri),ui=pi(ui,li));else if(Ue&&He&&!We&&Cn)si=1,ui=Oi(ui,li,Ri),ui=pi(ui,li);else if(!Ue&&!We&&He^Cn){var Pi=An;He?(si=1,ui=Oi(ui,li,Ri),si=0,An=!1,ui=Oi(ui,li,Ri),An=Pi):(si=0,ui=Oi(ui,li,Ri),ui=pi(ui,li),si=1,An=!1,ui=Oi(ui,li,Ri),An=Pi,ui=pi(ui,li))}}else si=0,ui=Oi(ui,li,Ri);else si=He?1:0,ui=Oi(ui,li,Ri);return ui},this.__bidiEngine__.setOptions=function(ui){ui&&(Ue=ui.isInputVisual,We=ui.isOutputVisual,He=ui.isInputRtl,Cn=ui.isOutputRtl,An=ui.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Oe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new Te.__bidiEngine__({isInputVisual:!0});Te.API.events.push(["postProcessText",function(Oe){var ke=Oe.text,Be=(Oe.x,Oe.y,Oe.options||{}),Ue=(Oe.mutex,Be.lang,[]);if(Be.isInputVisual=typeof Be.isInputVisual!="boolean"||Be.isInputVisual,t.setOptions(Be),Object.prototype.toString.call(ke)==="[object Array]"){var He=0;for(Ue=[],He=0;He<ke.length;He+=1)Object.prototype.toString.call(ke[He])==="[object Array]"?Ue.push([t.doBidiReorder(ke[He][0]),ke[He][1],ke[He][2]]):Ue.push([t.doBidiReorder(ke[He])]);Oe.text=Ue}else Oe.text=t.doBidiReorder(ke);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Te(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Te.open=function(e){return new Te(e)},Te.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Te.prototype.registerTTF=function(){var e,t,Oe,ke,Be;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Ue,He,We,Cn;for(Cn=[],Ue=0,He=(We=this.bbox).length;Ue<He;Ue++)e=We[Ue],Cn.push(Math.round(e*this.scaleFactor));return Cn}).call(this),this.stemV=0,this.post.exists?(Oe=255&(ke=this.post.italic_angle),32768&(t=ke>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+Oe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Be=this.familyClass)===1||Be===2||Be===3||Be===4||Be===5||Be===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Te.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},Te.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},Te.prototype.widthOfString=function(e,t,Oe){var ke,Be,Ue,He;for(Ue=0,Be=0,He=(e=""+e).length;0<=He?Be<He:Be>He;Be=0<=He?++Be:--Be)ke=e.charCodeAt(Be),Ue+=this.widthOfGlyph(this.characterToGlyph(ke))+Oe*(1e3/t)||0;return Ue*(t/1e3)},Te.prototype.lineHeight=function(e,t){var Oe;return t==null&&(t=!1),Oe=t?this.lineGap:0,(this.ascender+Oe-this.decender)/1e3*e},Te}();var re,ne=function(){function Te(e){this.data=e??[],this.pos=0,this.length=this.data.length}return Te.prototype.readByte=function(){return this.data[this.pos++]},Te.prototype.writeByte=function(e){return this.data[this.pos++]=e},Te.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Te.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Te.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},Te.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},Te.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Te.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},Te.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},Te.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},Te.prototype.readString=function(e){var t,Oe;for(Oe=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)Oe[t]=String.fromCharCode(this.readByte());return Oe.join("")},Te.prototype.writeString=function(e){var t,Oe,ke;for(ke=[],t=0,Oe=e.length;0<=Oe?t<Oe:t>Oe;t=0<=Oe?++t:--t)ke.push(this.writeByte(e.charCodeAt(t)));return ke},Te.prototype.readShort=function(){return this.readInt16()},Te.prototype.writeShort=function(e){return this.writeInt16(e)},Te.prototype.readLongLong=function(){var e,t,Oe,ke,Be,Ue,He,We;return e=this.readByte(),t=this.readByte(),Oe=this.readByte(),ke=this.readByte(),Be=this.readByte(),Ue=this.readByte(),He=this.readByte(),We=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^Oe)+4294967296*(255^ke)+16777216*(255^Be)+65536*(255^Ue)+256*(255^He)+(255^We)+1):72057594037927940*e+281474976710656*t+1099511627776*Oe+4294967296*ke+16777216*Be+65536*Ue+256*He+We},Te.prototype.writeLongLong=function(e){var t,Oe;return t=Math.floor(e/4294967296),Oe=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(Oe>>24&255),this.writeByte(Oe>>16&255),this.writeByte(Oe>>8&255),this.writeByte(255&Oe)},Te.prototype.readInt=function(){return this.readInt32()},Te.prototype.writeInt=function(e){return this.writeInt32(e)},Te.prototype.read=function(e){var t,Oe;for(t=[],Oe=0;0<=e?Oe<e:Oe>e;Oe=0<=e?++Oe:--Oe)t.push(this.readByte());return t},Te.prototype.write=function(e){var t,Oe,ke,Be;for(Be=[],Oe=0,ke=e.length;Oe<ke;Oe++)t=e[Oe],Be.push(this.writeByte(t));return Be},Te}(),ie=function(){var Te;function e(t){var Oe,ke,Be;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},ke=0,Be=this.tableCount;0<=Be?ke<Be:ke>Be;ke=0<=Be?++ke:--ke)Oe={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[Oe.tag]=Oe}return e.prototype.encode=function(t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn;for(Bn in Tn=Object.keys(t).length,We=Math.log(2),En=16*Math.floor(Math.log(Tn)/We),Ue=Math.floor(En/We),An=16*Tn-En,(ke=new ne).writeInt(this.scalarType),ke.writeShort(Tn),ke.writeShort(En),ke.writeShort(Ue),ke.writeShort(An),Be=16*Tn,Cn=ke.pos+Be,He=null,Ln=[],t)for(Sn=t[Bn],ke.writeString(Bn),ke.writeInt(Te(Sn)),ke.writeInt(Cn),ke.writeInt(Sn.length),Ln=Ln.concat(Sn),Bn==="head"&&(He=Cn),Cn+=Sn.length;Cn%4;)Ln.push(0),Cn++;return ke.write(Ln),Oe=2981146554-Te(ke.data),ke.pos=He+8,ke.writeUInt32(Oe),ke.data},Te=function(t){var Oe,ke,Be,Ue;for(t=ve.call(t);t.length%4;)t.push(0);for(Be=new ne(t),ke=0,Oe=0,Ue=t.length;Oe<Ue;Oe=Oe+=4)ke+=Be.readUInt32();return 4294967295&ke},e}(),ae={}.hasOwnProperty,oe=function(Te,e){for(var t in e)ae.call(e,t)&&(Te[t]=e[t]);function Oe(){this.constructor=Te}return Oe.prototype=e.prototype,Te.prototype=new Oe,Te.__super__=e.prototype,Te};re=function(){function Te(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return Te.prototype.parse=function(){},Te.prototype.encode=function(){},Te.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Te}();var se=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var Oe;return(Oe=new ne).writeInt(this.version),Oe.writeInt(this.revision),Oe.writeInt(this.checkSumAdjustment),Oe.writeInt(this.magicNumber),Oe.writeShort(this.flags),Oe.writeShort(this.unitsPerEm),Oe.writeLongLong(this.created),Oe.writeLongLong(this.modified),Oe.writeShort(this.xMin),Oe.writeShort(this.yMin),Oe.writeShort(this.xMax),Oe.writeShort(this.yMax),Oe.writeShort(this.macStyle),Oe.writeShort(this.lowestRecPPEM),Oe.writeShort(this.fontDirectionHint),Oe.writeShort(t),Oe.writeShort(this.glyphDataFormat),Oe.data},e}(),ce=function(){function Te(e,t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),En=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(We=0;We<256;++We)this.codeMap[We]=e.readByte();break;case 4:for(Tn=e.readUInt16(),Sn=Tn/2,e.pos+=6,Be=function(){var oi,ci;for(ci=[],We=oi=0;0<=Sn?oi<Sn:oi>Sn;We=0<=Sn?++oi:--oi)ci.push(e.readUInt16());return ci}(),e.pos+=2,Bn=function(){var oi,ci;for(ci=[],We=oi=0;0<=Sn?oi<Sn:oi>Sn;We=0<=Sn?++oi:--oi)ci.push(e.readUInt16());return ci}(),Cn=function(){var oi,ci;for(ci=[],We=oi=0;0<=Sn?oi<Sn:oi>Sn;We=0<=Sn?++oi:--oi)ci.push(e.readUInt16());return ci}(),An=function(){var oi,ci;for(ci=[],We=oi=0;0<=Sn?oi<Sn:oi>Sn;We=0<=Sn?++oi:--oi)ci.push(e.readUInt16());return ci}(),ke=(this.length-e.pos+this.offset)/2,He=function(){var oi,ci;for(ci=[],We=oi=0;0<=ke?oi<ke:oi>ke;We=0<=ke?++oi:--oi)ci.push(e.readUInt16());return ci}(),We=ni=0,si=Be.length;ni<si;We=++ni)for(ti=Be[We],Oe=ii=Ln=Bn[We];Ln<=ti?ii<=ti:ii>=ti;Oe=Ln<=ti?++ii:--ii)An[We]===0?Ue=Oe+Cn[We]:(Ue=He[An[We]/2+(Oe-Ln)-(Sn-We)]||0)!==0&&(Ue+=Cn[We]),this.codeMap[Oe]=65535&Ue}e.pos=En}return Te.encode=function(e,t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni,ii,si,oi,ci,vi,pi,fi,Mi,Oi,ui,li,Ri,Pi,Fi,Hi,nr,ar,cr,sr,br,Ni,or,er,fr,mr,hr,vr,_r,Ar,Vr,Wr;switch(Pi=new ne,Ue=Object.keys(e).sort(function(tr,pr){return tr-pr}),t){case"macroman":for(Bn=0,ti=function(){var tr=[];for(Ln=0;Ln<256;++Ln)tr.push(0);return tr}(),ii={0:0},Be={},Fi=0,cr=Ue.length;Fi<cr;Fi++)ii[_r=e[ke=Ue[Fi]]]==null&&(ii[_r]=++Bn),Be[ke]={old:e[ke],new:ii[e[ke]]},ti[ke]=ii[e[ke]];return Pi.writeUInt16(1),Pi.writeUInt16(0),Pi.writeUInt32(12),Pi.writeUInt16(0),Pi.writeUInt16(262),Pi.writeUInt16(0),Pi.write(ti),{charMap:Be,subtable:Pi.data,maxGlyphID:Bn+1};case"unicode":for(li=[],En=[],si=0,ii={},Oe={},ni=Cn=null,Hi=0,sr=Ue.length;Hi<sr;Hi++)ii[ci=e[ke=Ue[Hi]]]==null&&(ii[ci]=++si),Oe[ke]={old:ci,new:ii[ci]},He=ii[ci]-ke,ni!=null&&He===Cn||(ni&&En.push(ni),li.push(ke),Cn=He),ni=ke;for(ni&&En.push(ni),En.push(65535),li.push(65535),Oi=2*(Mi=li.length),fi=2*Math.pow(Math.log(Mi)/Math.LN2,2),Sn=Math.log(fi/2)/Math.LN2,pi=2*Mi-fi,We=[],vi=[],Tn=[],Ln=nr=0,br=li.length;nr<br;Ln=++nr){if(ui=li[Ln],An=En[Ln],ui===65535){We.push(0),vi.push(0);break}if(ui-(Ri=Oe[ui].new)>=32768)for(We.push(0),vi.push(2*(Tn.length+Mi-Ln)),ke=ar=ui;ui<=An?ar<=An:ar>=An;ke=ui<=An?++ar:--ar)Tn.push(Oe[ke].new);else We.push(Ri-ui),vi.push(0)}for(Pi.writeUInt16(3),Pi.writeUInt16(1),Pi.writeUInt32(12),Pi.writeUInt16(4),Pi.writeUInt16(16+8*Mi+2*Tn.length),Pi.writeUInt16(0),Pi.writeUInt16(Oi),Pi.writeUInt16(fi),Pi.writeUInt16(Sn),Pi.writeUInt16(pi),hr=0,Ni=En.length;hr<Ni;hr++)ke=En[hr],Pi.writeUInt16(ke);for(Pi.writeUInt16(0),vr=0,or=li.length;vr<or;vr++)ke=li[vr],Pi.writeUInt16(ke);for(Ar=0,er=We.length;Ar<er;Ar++)He=We[Ar],Pi.writeUInt16(He);for(Vr=0,fr=vi.length;Vr<fr;Vr++)oi=vi[Vr],Pi.writeUInt16(oi);for(Wr=0,mr=Tn.length;Wr<mr;Wr++)Bn=Tn[Wr],Pi.writeUInt16(Bn);return{charMap:Oe,subtable:Pi.data,maxGlyphID:si+1}}},Te}(),ue=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(t){var Oe,ke,Be;for(t.pos=this.offset,this.version=t.readUInt16(),Be=t.readUInt16(),this.tables=[],this.unicode=null,ke=0;0<=Be?ke<Be:ke>Be;ke=0<=Be?++ke:--ke)Oe=new ce(t,this.offset),this.tables.push(Oe),Oe.isUnicode&&this.unicode==null&&(this.unicode=Oe);return!0},e.encode=function(t,Oe){var ke,Be;return Oe==null&&(Oe="macroman"),ke=ce.encode(t,Oe),(Be=new ne).writeUInt16(0),Be.writeUInt16(1),ke.table=Be.data.concat(ke.subtable),ke},e}(),he=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var Oe,ke;for(ke=[],Oe=0;Oe<10;++Oe)ke.push(t.readByte());return ke}(),this.charRange=function(){var Oe,ke;for(ke=[],Oe=0;Oe<4;++Oe)ke.push(t.readInt());return ke}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var Oe,ke;for(ke=[],Oe=0;Oe<2;Oe=++Oe)ke.push(t.readInt());return ke}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(t){var Oe,ke,Be;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var Ue;for(ke=t.readUInt16(),this.glyphNameIndex=[],Ue=0;0<=ke?Ue<ke:Ue>ke;Ue=0<=ke?++Ue:--Ue)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Be=[];t.pos<this.offset+this.length;)Oe=t.readByte(),Be.push(this.names.push(t.readString(Oe)));return Be;case 151552:return ke=t.readUInt16(),this.offsets=t.read(ke);case 196608:break;case 262144:return this.map=(function(){var He,We,Cn;for(Cn=[],Ue=He=0,We=this.file.maxp.numGlyphs;0<=We?He<We:He>We;Ue=0<=We?++He:--He)Cn.push(t.readUInt32());return Cn}).call(this)}},e}(),de=function(Te,e){this.raw=Te,this.length=Te.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn;for(t.pos=this.offset,t.readShort(),Oe=t.readShort(),We=t.readShort(),ke=[],Ue=0;0<=Oe?Ue<Oe:Ue>Oe;Ue=0<=Oe?++Ue:--Ue)ke.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+We+t.readShort()});for(Cn={},Ue=En=0,Sn=ke.length;En<Sn;Ue=++En)Be=ke[Ue],t.pos=Be.offset,An=t.readString(Be.length),He=new de(An,Be),Cn[Tn=Be.nameID]==null&&(Cn[Tn]=[]),Cn[Be.nameID].push(He);this.strings=Cn,this.copyright=Cn[0],this.fontFamily=Cn[1],this.fontSubfamily=Cn[2],this.uniqueSubfamily=Cn[3],this.fontName=Cn[4],this.version=Cn[5];try{this.postscriptName=Cn[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Cn[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Cn[7],this.manufacturer=Cn[8],this.designer=Cn[9],this.description=Cn[10],this.vendorUrl=Cn[11],this.designerUrl=Cn[12],this.license=Cn[13],this.licenseUrl=Cn[14],this.preferredFamily=Cn[15],this.preferredSubfamily=Cn[17],this.compatibleFull=Cn[18],this.sampleText=Cn[19]},e}(),ge=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(t){var Oe,ke,Be,Ue,He,We,Cn;for(t.pos=this.offset,this.metrics=[],Oe=0,We=this.file.hhea.numberOfMetrics;0<=We?Oe<We:Oe>We;Oe=0<=We?++Oe:--Oe)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Be=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var An,En;for(En=[],Oe=An=0;0<=Be?An<Be:An>Be;Oe=0<=Be?++An:--An)En.push(t.readInt16());return En}(),this.widths=(function(){var An,En,Sn,Tn;for(Tn=[],An=0,En=(Sn=this.metrics).length;An<En;An++)Ue=Sn[An],Tn.push(Ue.advance);return Tn}).call(this),ke=this.widths[this.widths.length-1],Cn=[],Oe=He=0;0<=Be?He<Be:He>Be;Oe=0<=Be?++He:--He)Cn.push(this.widths.push(ke));return Cn},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn;return t in this.cache?this.cache[t]:(Ue=this.file.loca,Oe=this.file.contents,ke=Ue.indexOf(t),(Be=Ue.lengthOf(t))===0?this.cache[t]=null:(Oe.pos=this.offset+ke,He=(We=new ne(Oe.read(Be))).readShort(),An=We.readShort(),Sn=We.readShort(),Cn=We.readShort(),En=We.readShort(),this.cache[t]=He===-1?new we(We,An,Sn,Cn,En):new ye(We,He,An,Sn,Cn,En),this.cache[t]))},e.prototype.encode=function(t,Oe,ke){var Be,Ue,He,We,Cn;for(He=[],Ue=[],We=0,Cn=Oe.length;We<Cn;We++)Be=t[Oe[We]],Ue.push(He.length),Be&&(He=He.concat(Be.encode(ke)));return Ue.push(He.length),{table:He,offsets:Ue}},e}(),ye=function(){function Te(e,t,Oe,ke,Be,Ue){this.raw=e,this.numberOfContours=t,this.xMin=Oe,this.yMin=ke,this.xMax=Be,this.yMax=Ue,this.compound=!1}return Te.prototype.encode=function(){return this.raw.data},Te}(),we=function(){function Te(e,t,Oe,ke,Be){var Ue,He;for(this.raw=e,this.xMin=t,this.yMin=Oe,this.xMax=ke,this.yMax=Be,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Ue=this.raw;He=Ue.readShort(),this.glyphOffsets.push(Ue.pos),this.glyphIDs.push(Ue.readUInt16()),32&He;)Ue.pos+=1&He?4:2,128&He?Ue.pos+=8:64&He?Ue.pos+=4:8&He&&(Ue.pos+=2)}return Te.prototype.encode=function(){var e,t,Oe;for(t=new ne(ve.call(this.raw.data)),e=0,Oe=this.glyphIDs.length;e<Oe;++e)t.pos=this.glyphOffsets[e];return t.data},Te}(),Ne=function(Te){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(t){var Oe,ke;return t.pos=this.offset,Oe=this.file.head.indexToLocFormat,this.offsets=Oe===0?(function(){var Be,Ue;for(Ue=[],ke=0,Be=this.length;ke<Be;ke+=2)Ue.push(2*t.readUInt16());return Ue}).call(this):(function(){var Be,Ue;for(Ue=[],ke=0,Be=this.length;ke<Be;ke+=4)Ue.push(t.readUInt32());return Ue}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,Oe){for(var ke=new Uint32Array(this.offsets.length),Be=0,Ue=0,He=0;He<ke.length;++He)if(ke[He]=Be,Ue<Oe.length&&Oe[Ue]==He){++Ue,ke[He]=Be;var We=this.offsets[He],Cn=this.offsets[He+1]-We;Cn>0&&(Be+=Cn)}for(var An=new Array(4*ke.length),En=0;En<ke.length;++En)An[4*En+3]=255&ke[En],An[4*En+2]=(65280&ke[En])>>8,An[4*En+1]=(16711680&ke[En])>>16,An[4*En]=(4278190080&ke[En])>>24;return An},e}(),Le=function(){function Te(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return Te.prototype.generateCmap=function(){var e,t,Oe,ke,Be;for(t in ke=this.font.cmap.tables[0].codeMap,e={},Be=this.subset)Oe=Be[t],e[t]=ke[Oe];return e},Te.prototype.glyphsFor=function(e){var t,Oe,ke,Be,Ue,He,We;for(ke={},Ue=0,He=e.length;Ue<He;Ue++)ke[Be=e[Ue]]=this.font.glyf.glyphFor(Be);for(Be in t=[],ke)(Oe=ke[Be])!=null&&Oe.compound&&t.push.apply(t,Oe.glyphIDs);if(t.length>0)for(Be in We=this.glyphsFor(t))Oe=We[Be],ke[Be]=Oe;return ke},Te.prototype.encode=function(e,t){var Oe,ke,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ti,ni;for(ke in Oe=ue.encode(this.generateCmap(),"unicode"),Ue=this.glyphsFor(e),Tn={0:0},ni=Oe.charMap)Tn[(We=ni[ke]).old]=We.new;for(Ln in Sn=Oe.maxGlyphID,Ue)Ln in Tn||(Tn[Ln]=Sn++);return An=function(ii){var si,oi;for(si in oi={},ii)oi[ii[si]]=si;return oi}(Tn),En=Object.keys(An).sort(function(ii,si){return ii-si}),Bn=function(){var ii,si,oi;for(oi=[],ii=0,si=En.length;ii<si;ii++)He=En[ii],oi.push(An[He]);return oi}(),Be=this.font.glyf.encode(Ue,Bn,Tn),Cn=this.font.loca.encode(Be.offsets,Bn),ti={cmap:this.font.cmap.raw(),glyf:Be.table,loca:Cn,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(ti["OS/2"]=this.font.os2.raw()),this.font.directory.encode(ti)},Te}();E.API.PDFObject=function(){var Te;function e(){}return Te=function(t,Oe){return(Array(Oe+1).join("0")+t).slice(-Oe)},e.convert=function(t){var Oe,ke,Be,Ue;if(Array.isArray(t))return"["+function(){var He,We,Cn;for(Cn=[],He=0,We=t.length;He<We;He++)Oe=t[He],Cn.push(e.convert(Oe));return Cn}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+Te(t.getUTCFullYear(),4)+Te(t.getUTCMonth(),2)+Te(t.getUTCDate(),2)+Te(t.getUTCHours(),2)+Te(t.getUTCMinutes(),2)+Te(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(ke in Be=["<<"],t)Ue=t[ke],Be.push("/"+ke+" "+e.convert(Ue));return Be.push(">>"),Be.join(`
`)}return""+t},e}();const _export_sfc=(Te,e)=>{const t=Te.__vccOpts||Te;for(const[Oe,ke]of e)t[Oe]=ke;return t},_hoisted_1$c={class:"mt-10"},_hoisted_2$6={class:"print-preview-container"},__default__$i={},_sfc_main$o=Object.assign(__default__$i,{__name:"PrintModal",props:{visibility:Boolean,printOptions:Object},setup(Te,{expose:e}){useCssVars(cr=>({"6f67f528":unref(Hi),"2765ae41":unref(Fi),"03aea05c":ti,"602ad150":unref(Pi),"139959d5":unref(Ri),c1f4adaa:unref(li)}));const t=useEulerian(),Oe=useMapStore(),ke=inject("selectedLayers"),Be="Imprimer une carte",Ue="xl",He=[{label:"Portrait",value:"portrait",icon:"md-cropportrait-sharp"},{label:"Paysage",value:"landscape",icon:"md-croplandscape-sharp"}],We=ref(!1),Cn=()=>{We.value=!0,t.pause()},An=()=>{We.value=!1,t.resume()};e({onModalPrintClose:An,onModalPrintOpen:Cn});const En=ref(null),Sn=ref(null),Tn=ref(null),Ln=ref(null),Bn=ref(null),ti="10px",ni=.264583333,ii=ref(!0),si=ref(!1),oi=ref("Ma carte"),ci=ref("portrait"),vi=ref(0),pi=ref("A4"),fi=computed(()=>{let cr={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};return{width:cr[pi.value].width,height:cr[pi.value].height}}),Mi=reactive(useElementSize(Tn,{width:0,height:0},{box:"border-box"})),Oi=reactive(useElementSize(Ln,{width:0,height:0},{box:"border-box"})),ui=reactive(useElementSize(Sn,{width:0,height:0},{box:"border-box"})),li=computed(()=>{if(ci.value=="portrait")return Math.floor((Mi.height-ui.height)*ni)/fi.value.height;if(ci.value=="landscape"){let cr=Math.floor((Mi.width-Oi.width-parseInt(ti))*ni)/fi.value.height;return fi.value.height*cr+ui.height<Mi.height?Math.floor((Mi.height-ui.height)*ni)/fi.value.width:cr}}),Ri=computed(()=>{if(ci.value=="portrait")return fi.value.height+"mm";if(ci.value=="landscape")return fi.value.width+"mm"}),Pi=computed(()=>{if(ci.value=="portrait")return fi.value.width+"mm";if(ci.value=="landscape")return fi.value.height+"mm"}),Fi=computed(()=>Mi.height+"px"),Hi=computed(()=>{if(ci.value=="portrait")return fi.value.width*li.value/ni+"px";if(ci.value=="landscape")return fi.value.height*li.value/ni+"px"}),nr=()=>{const cr={orientation:ci.value,unit:"mm",format:[parseInt(Ri.value),parseInt(Pi.value)]},sr=new E(cr),br=parseInt(vi.value),Ni=En.value.mapRef.getElementsByTagName("canvas")[0].width,or=En.value.mapRef.getElementsByTagName("canvas")[0].height,er=En.value.mapRef.getElementsByTagName("canvas")[0];if(En.value.mapRef.getElementsByTagName("canvas").length<2){var fr=document.createElement("canvas");fr.classList=["fixedoverlay"],fr.width=Ni,fr.height=or,En.value.mapRef.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",fr)}else var fr=En.value.mapRef.getElementsByTagName("canvas")[1];fr.style.display="none",fr.getContext("2d").reset();const hr=er.toDataURL("image/png"),vr=Ni*ni-br*2,_r=(or-ui.height)*ni-br*2,Ar=br,Vr=ui.height*ni+br;if(sr.addImage(hr,"PNG",Ar,Vr,vr,_r),ii.value){const Wr=En.value.mapRef.getElementsByClassName("ol-scale-line")[0],tr=Wr.children[0],pr=getComputedStyle(Wr),ur=getComputedStyle(tr),Ki=parseInt(pr.left),Nr=parseInt(pr.bottom),Or=tr.innerHTML,Ir=parseInt(ur.width),Mr=parseInt(ur.lineHeight),Tr=or-Nr-Mr,wr=fr.getContext("2d");wr.beginPath(),wr.fillStyle="rgba(255, 255, 255, 0.75)",wr.rect(Ki,Tr,Ir,Mr),wr.fillRect(Ki,Tr,Ir,Mr),wr.font=ur.font,wr.textAlign="center",wr.fillStyle="#000000",wr.fillText(Or,Ki+Ir/2,Tr+Mr/2),wr.beginPath(),wr.moveTo(Ki,Tr),wr.lineTo(Ki,Tr+Mr),wr.lineTo(Ki,Tr+Mr),wr.lineTo(Ki+Ir,Tr+Mr),wr.lineTo(Ki+Ir,Tr),wr.lineWidth=1,wr.lineCap="round",wr.strokeStyle="#666666",wr.stroke();const Cr=fr.toDataURL("image/png");sr.addImage(Cr,"PNG",Ar,Vr,vr,_r)}sr.save("carte.pdf")},ar={id:"4",units:"metric",bar:!1};return(cr,sr)=>{const br=Ji,Ni=ld,or=lt$2,er=Ie,fr=_sfc_main$p,mr=_sfc_main$I,hr=Vt$1;return openBlock(),createBlock(hr,{opened:unref(We),title:Be,size:Ue,onClose:An},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:Tn,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:Ln,class:"print-form"},[createVNode(br,{inline:!1,modelValue:unref(ci),"onUpdate:modelValue":sr[0]||(sr[0]=vr=>isRef(ci)?ci.value=vr:null),options:He,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>sr[3]||(sr[3]=[createTextVNode("Mise en Page")])),_:1},8,["modelValue"]),createVNode(Ni,{modelValue:unref(pi),"onUpdate:modelValue":sr[1]||(sr[1]=vr=>isRef(pi)?pi.value=vr:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createBaseVNode("div",_hoisted_1$c,[createVNode(or,{modelValue:unref(ii),"onUpdate:modelValue":sr[2]||(sr[2]=vr=>isRef(ii)?ii.value=vr:null),name:"checkbox-simple",label:unref(ii)?"Désactiver l'échelle":"Afficher l'échelle"},null,8,["modelValue","label"])]),createVNode(er,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:nr})],512),createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",{ref_key:"printPreview",ref:Bn,class:"print-preview"},[unref(si)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:Sn,class:"map-title"},toDisplayString(unref(oi)),513)):createCommentVNode("",!0),unref(We)?(openBlock(),createBlock(_sfc_main$N,{key:1,class:"map",ref_key:"refMap",ref:En,"map-Id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(printMap),center:unref(Oe).center,zoom:unref(Oe).zoom},null,8,["map-Id","center","zoom"]),createVNode(fr,{"map-Id":unref(printMap),"selected-layers":unref(ke)},null,8,["map-Id","selected-layers"]),createVNode(mr,{visibility:unref(ii),"scale-line-options":ar,"map-id":unref(printMap)},null,8,["visibility","map-id"])]),_:1},8,["map-Id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])}}}),PrintModal=_export_sfc(_sfc_main$o,[["__scopeId","data-v-89871f69"]]),__default__$h={},_sfc_main$n=Object.assign(__default__$h,{__name:"ShareModal",setup(Te,{expose:e}){const t=useEulerian(),Oe=useDataStore(),ke=useMapStore(),Be="Partager une carte",Ue="lg",He=ref(!1),We=()=>{He.value=!0,t.pause()},Cn=()=>{He.value=!1,t.resume()},An=Oe.getContacts(),En=computed(()=>encodeURI(ke.permalink).replaceAll("&","%26")),Sn=computed(()=>({address:An.mail,subject:"Cartes à consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A${En.value}`})),Tn=computed(()=>({to:`mailto:${Sn.value.address}?subject=${Sn.value.subject}&body=${Sn.value.body}`,label:"Envoyer un mail"})),Ln=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:An.networks.facebook+"?display=popup&u="+ke.permalink},{name:"linkedin",label:"Partager sur LinkedIn",url:An.networks.linkedin+"?url="+ke.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:An.networks.instagram}]),Bn=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${ke.permalinkShare}"
    allowfullscreen>
  </iframe>`);ref("");const{copy:ti}=useClipboard({});ref(null);const ni="cil:copy",ii=ref(.8325),si=computed(()=>({scale:ii.value,name:ni}));return onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),e({onModalShareOpen:We,onModalShareClose:Cn}),(oi,ci)=>{const vi=vd,pi=Ie,fi=ze,Mi=Vt$1;return openBlock(),createBlock(Mi,{opened:unref(He),title:Be,size:Ue,onClose:Cn},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(vi,{copyLabel:"Copier dans le presse-papier",mail:unref(Tn),networks:unref(Ln),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(fi,{modelValue:unref(ke).permalink,"onUpdate:modelValue":ci[1]||(ci[1]=Oi=>unref(ke).permalink=Oi),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"",descriptionId:""},{label:withCtx(()=>[ci[4]||(ci[4]=createTextVNode(" Lien permanent vers la carte ")),createVNode(pi,{tertiary:"",noOutline:!0,onClick:ci[0]||(ci[0]=Oi=>unref(ti)(unref(ke).permalink))},{default:withCtx(()=>[createVNode(unref(ue$1),normalizeProps(guardReactiveProps(unref(si))),null,16)]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(fi,{modelValue:unref(Bn),"onUpdate:modelValue":ci[3]||(ci[3]=Oi=>isRef(Bn)?Bn.value=Oi:null),placeholder:"",isTextarea:"","label-visible":"",readonly:"",descriptionId:"",style:{height:"200px"}},{label:withCtx(()=>[ci[5]||(ci[5]=createTextVNode(" Copiez le code HTML pour intégrer la carte dans un site ")),createVNode(pi,{tertiary:"",noOutline:!0,onClick:ci[2]||(ci[2]=Oi=>unref(ti)(unref(Bn)))},{default:withCtx(()=>[createVNode(unref(ue$1),normalizeProps(guardReactiveProps(unref(si))),null,16)]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])}}}),ShareModal=_export_sfc(_sfc_main$n,[["__scopeId","data-v-dd1ffb30"]]),__default__$g={name:"Controls"},_sfc_main$m=Object.assign(__default__$g,{props:{controlOptions:Array,mapId:String},setup(Te){const e=Te,t=useMapStore(),Oe=useDataStore();dist.useLogger().debug(e.controlOptions);const Be={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:"WMTS,WMS,TMS",filterWMTSPriority:!0,filterProjections:"IGNF:LAMB93",filterLayersPriority:Oe.getFeatured().toString(),serviceOptions:{},filterLayers:Oe.getLayersNames()},autocompleteOptions:{serviceOptions:{maximumResponses:10},prettifyResults:!0,maximumEntries:5},markerUrl:IconGeolocationSVG},Ue={options:{id:"2",position:useControlsExtensionPosition().layerSwitcherOptions,collapsed:!0,panel:!0,counter:!0}},He={id:"3",position:useControlsExtensionPosition().legendsOptions,panel:!0,auto:!0,draggable:!1},We={id:"4",units:"metric",bar:!1},Cn={id:"5",position:useControlsExtensionPosition().territoriesOptions,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},An={id:"6",position:useControlsExtensionPosition().getFeatureInfoOptions},En={id:"7",position:useControlsExtensionPosition().overviewMapOptions},Sn={id:"8",position:useControlsExtensionPosition().fullscreenOptions},Tn={position:useControlsExtensionPosition().zoomOptions,id:"9"},Ln={position:useControlsExtensionPosition().controlListOptions,id:"10",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},Bn={id:"11",position:"top-right",gutter:!1,listable:!0},ti={id:"12",position:useControlsExtensionPosition().reverseGeocodeOptions,gutter:!1,listable:!0},ni={position:useControlsExtensionPosition().isocurveOptions,id:"13",gutter:!1,listable:!0},ii={position:useControlsExtensionPosition().routeOptions,id:"14",gutter:!1,listable:!0},si={id:"15",position:useControlsExtensionPosition().measureLengthOptions,gutter:!1,listable:!0},oi={position:useControlsExtensionPosition().measureAreaOptions,id:"16",gutter:!1,listable:!0},ci={position:useControlsExtensionPosition().measureAzimuthOptions,gutter:!1,listable:!0,id:"17"},vi={position:useControlsExtensionPosition().mousePositionOptions,id:"18",gutter:!1,listable:!0,systems:[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France métropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France métropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France métropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Réunion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynésie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynésie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynésie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynésie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (Île de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (Îles Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (Îles Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (Îles St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Stéréographique polaire (Terre Adélie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Calédonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},pi={id:"19",position:useControlsExtensionPosition().elevationPathOptions,gutter:!1,listable:!0},fi={id:"20",position:useControlsExtensionPosition().layerImportOptions,gutter:!1,listable:!0},Mi=inject("refPrintModal"),Oi=inject("modalShareRef"),ui=computed(()=>({contextMenuItemsOptions:[{text:"Imprimer la carte",callback:function(){Mi.value.onModalPrintOpen()}},{text:"Partager la carte",callback:function(){Oi.value.onModalShareOpen()}},{text:"Ajouter des données",callback:()=>{t.getmenuCatalogueButton().firstChild.click()}}]}));return(li,Ri)=>{const Pi=_sfc_main$K,Fi=_sfc_main$L;return openBlock(),createElementBlock(Fragment,null,[Te.controlOptions?(openBlock(),createBlock(_sfc_main$F,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":Ue,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":He,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":ii,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":ni,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(Pi,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":ti,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(Fi,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":Sn,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$G,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":Tn,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$J,{key:7,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Be,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$u,{key:8,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":An,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$I,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":We,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$H,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":En,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$v,{key:11,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":Cn,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":si,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":oi,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$y,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":ci,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$x,{key:15,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":vi,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:16,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":Bn,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$w,{key:17,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":pi,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$t,{key:18,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":fi,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$s,{key:19,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":Ln,"map-id":Te.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Te.controlOptions?(openBlock(),createBlock(_sfc_main$r,{key:20,visibility:e.controlOptions.includes(unref(useControls).ContextMenu.id),analytic:unref(useControls).ContextMenu.analytic,"context-menu-options":unref(ui),"map-id":Te.mapId},null,8,["visibility","analytic","context-menu-options","map-id"])):createCommentVNode("",!0)],64)}}}),__default__$f={name:"Carto"},_sfc_main$l=Object.assign(__default__$f,{props:{selectedControls:Array,selectedLayers:Object},setup(Te){const e=Te,t=useMapStore(),Oe=ref(null),ke=computed(()=>Oe.value&&Oe.value.mapRef);return(Be,Ue)=>(openBlock(),createBlock(_sfc_main$N,{class:"map",ref_key:"refMap",ref:Oe,mapId:unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(mainMap),center:unref(t).center,zoom:unref(t).zoom},null,8,["map-Id","center","zoom"]),unref(ke)?(openBlock(),createBlock(_sfc_main$m,{key:0,"control-options":e.selectedControls,"map-id":unref(mainMap)},null,8,["control-options","map-id"])):createCommentVNode("",!0),createVNode(_sfc_main$p,{"map-Id":unref(mainMap),"selected-layers":e.selectedLayers},null,8,["map-Id","selected-layers"])]),_:1},8,["mapId"]))}}),Carto=_export_sfc(_sfc_main$l,[["__scopeId","data-v-9583e6b7"]]),_hoisted_1$b={class:"menu-content-list"},_hoisted_2$5={class:"menu-collapse-icon-wrapper"},_hoisted_3$1={class:"menu-content"},__default__$e={name:"MenuLateralWrapper"},_sfc_main$k=Object.assign(__default__$e,{props:mergeModels({side:String,visibility:Boolean,id:String,width:Number,padding:Number},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(Te,{expose:e}){useCssVars(ni=>({"53bd0b13":unref(En),"513a3e5f":unref(Sn),"6c36b5e6":unref(Tn)}));const t=Te,Oe="ion:close",ke=.8325,Be=computed(()=>({scale:ke.value,name:Oe})),Ue=t.width||550,He=t.padding||30,We=useModel(Te,"modelValue",!1),Cn=ref(Ue),An=ref(He),En=computed(()=>Cn.value+"px"),Sn=computed(()=>An.value+"px"),Tn=computed(()=>Cn.value-An.value+"px"),Ln=ref();function Bn(){We.value=!1}function ti(){We.value=!0}return e({closeMenu:Bn,openMenu:ti}),(ni,ii)=>{const si=Ie;return Te.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${We.value&&"is_expanded"} ${t.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:Ln,class:"menu-logo-list"},[renderSlot(ni.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$5,[createVNode(si,{id:t.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:Bn},{default:withCtx(()=>[ii[0]||(ii[0]=createTextVNode(" Fermer ")),createVNode(unref(ue$1),normalizeProps(guardReactiveProps(unref(Be))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$1,[renderSlot(ni.$slots,"content",{},void 0,!0)])],512),[[vShow,We.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_2=_export_sfc(_sfc_main$k,[["__scopeId","data-v-6e6e7e2a"]]),__default__$d={name:"MenuLateralButton"},_sfc_main$j=Object.assign(__default__$d,{props:{icon:String,id:String,active:Boolean,title:String,side:String,visibility:Boolean},emits:["tabClicked"],setup(Te,{expose:e,emit:t}){const Oe=useMapStore(),ke=Te,Be=ke.icon,Ue=t,He=()=>{ke.side=="left"&&En(),ke.side=="right"&&An(),Ue("tabClicked",ke.id)},We=useControlsPosition();function Cn(Bn){let ti=[...Bn.element.children].filter(ni=>{if(ni.className.includes("GPshowOpen"))return ni});ti[0].getAttribute("aria-pressed")==="true"&&ti[0].click()}function An(Bn){Oe.getMap().getControls().getArray().forEach(ti=>{We.right.includes(ti.CLASSNAME)&&Cn(ti)})}function En(){Oe.getMap().getControls().getArray().forEach(Bn=>{We.left.includes(Bn.CLASSNAME)&&Cn(Bn)})}function Sn(){console.log("click on button"+ke.id),Tn.click()}const Tn=ref(null),Ln=ref(ke.id);return e({clickButton:Sn,button:Tn,id:Ln}),onMounted(()=>{ke.id=="MenuCatalogue"&&Oe.setmenuCatalogueButton(Tn.value)}),(Bn,ti)=>{const ni=Ie;return openBlock(),createElementBlock("div",{ref_key:"button",ref:Tn},[createVNode(ni,{id:unref(Ln),secondary:"","aria-label":Te.title,class:normalizeClass(`${Te.active?"active":""}  navBarIcon ${Te.visibility?"":"invisibleNavButton"} navButton`),icon:unref(Be),iconOnly:!0,onClick:He},null,8,["id","aria-label","class","icon"])],512)}}}),__unplugin_components_1=_export_sfc(_sfc_main$j,[["__scopeId","data-v-465f99a4"]]),_hoisted_1$a={class:"container"},__default__$c={name:"MenuTierce"},_sfc_main$i=Object.assign(__default__$c,{emits:["openControl","onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onEnregistrementOpen"],setup(Te,{emit:e}){const t=useMapStore(),Oe=e;function ke(He){t.getMap().getControls().getArray().forEach(We=>{We.CLASSNAME==He&&([...We.element.children].filter(An=>{if(An.className.includes("GPshowOpen"))return An})[0].click(),Oe("openControl"))})}const Be="mingcute:file-import-line",Ue=.8325;return computed(()=>({scale:Ue.value,name:Be})),(He,We)=>{const Cn=Ie;return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(Cn,{tertiary:"","no-outline":"",icon:"mingcute:file-import-line",onClick:We[0]||(We[0]=An=>ke("LayerImport"))},{default:withCtx(()=>We[4]||(We[4]=[createTextVNode(" Importer des données ")])),_:1}),createVNode(Cn,{tertiary:"","no-outline":"",icon:"ant-design:link-outlined",onClick:We[1]||(We[1]=An=>He.$emit("onModalShareOpen"))},{default:withCtx(()=>We[5]||(We[5]=[createTextVNode(" Partager, intégrer la carte ")])),_:1}),createVNode(Cn,{tertiary:"","no-outline":"",icon:"material-symbols:print-outline",onClick:We[2]||(We[2]=An=>He.$emit("onModalPrintOpen")),class:"tierce-print"},{default:withCtx(()=>We[6]||(We[6]=[createTextVNode(" Imprimer ")])),_:1}),createVNode(Cn,{tertiary:"","no-outline":"",onClick:We[3]||(We[3]=An=>He.$emit("onModalThemeOpen"))},{default:withCtx(()=>We[7]||(We[7]=[createBaseVNode("span",{class:"fr-icon-theme-fill fr-link--icon-left"},null,-1),createTextVNode(" Paramètres d'affichage ")])),_:1})])}}}),MenuTierce=_export_sfc(_sfc_main$i,[["__scopeId","data-v-6b004055"]]),side$1="left",_sfc_main$h={__name:"LeftMenuTool",props:{},emits:["onModalShareOpen","onModalPrintOpen","onModalThemeOpen"],setup(Te,{emit:e}){const t=ref(),Oe=computed(()=>[{componentName:"MenuTierce",icon:"ri-menu-fill",title:"Menu carte",visibility:!0},{componentName:"Enregistrement",icon:"ri-bookmark-line",title:"Mes Enregistrements",visibility:!1}]),ke=ref("MenuCatalogueContent"),Be=ref(null);function Ue(An){He(An)&&t.value?Be.value.closeMenu():(ke.value=An+"Content",Be.value.openMenu())}function He(An){return ke.value.replace("Content","")===An}function We(){Cn.value.filter(An=>An.id=="Enregistrement")[0].button.children[0].click()}const Cn=useTemplateRef("tabs");return(An,En)=>{const Sn=__unplugin_components_1,Tn=__unplugin_components_2;return openBlock(),createBlock(Tn,{side:side$1,visibility:!0,width:300,padding:16,id:"MenuCatalogueContentClose",modelValue:unref(t),"onUpdate:modelValue":En[3]||(En[3]=Ln=>isRef(t)?t.value=Ln:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuTierceContent",class:normalizeClass([unref(ke)==="MenuTierceContent"?"activeTab":"inactiveTab"])},[createVNode(MenuTierce,{onOnModalShareOpen:En[0]||(En[0]=Ln=>An.$emit("onModalShareOpen")),onOnModalPrintOpen:En[1]||(En[1]=Ln=>An.$emit("onModalPrintOpen")),onOnModalThemeOpen:En[2]||(En[2]=Ln=>An.$emit("onModalThemeOpen")),onOnEnregistrementOpen:We})],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe),Ln=>(openBlock(),createBlock(Sn,{ref_for:!0,ref:"tabs",side:side$1,icon:Ln.icon,visibility:Ln.visibility,id:Ln.componentName,active:He(Ln.componentName),title:Ln.title,onTabClicked:Ue},null,8,["icon","visibility","id","active","title"]))),256))]),_:1},8,["modelValue"])}}},LeftMenuTool=_export_sfc(_sfc_main$h,[["__scopeId","data-v-84a53818"]]),_hoisted_1$9=["innerHTML"],__default__$b={name:"LayerCatalogue"},_sfc_main$g=Object.assign(__default__$b,{props:{layer:Object,active:Boolean},setup(Te){const e=useMapStore(),t=Te,Oe=ref(t.active);function ke(Be,Ue){Oe.value=Be,Oe.value?e.addLayer(Ue.key):e.removeLayer(Ue.key)}return onUpdated(()=>{Oe.value=t.active}),(Be,Ue)=>{const He=lt$2;return openBlock(),createElementBlock(Fragment,null,[createVNode(He,{"model-value":unref(Oe),label:Te.layer.title,id:Te.layer.id,"onUpdate:modelValue":Ue[0]||(Ue[0]=We=>ke(We,Te.layer))},null,8,["model-value","label","id"]),createBaseVNode("div",{class:"layer-description",innerHTML:Te.layer.description},null,8,_hoisted_1$9)],64)}}}),__default__$a={name:"LayerList"},_sfc_main$f=Object.assign(__default__$a,{props:{layers:Object,selectedLayers:Object,listName:String},setup(Te){return(e,t)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(Te.layers,Oe=>(openBlock(),createBlock(_sfc_main$g,{key:`${Oe.key}-${Te.listName}`,active:Te.selectedLayers?Te.selectedLayers.filter(ke=>ke.key==Oe.key).length>0:!1,layer:Oe},null,8,["active","layer"]))),128))}}),__default__$9={name:"MenuCatalogueThematique"},_sfc_main$e=Object.assign(__default__$9,{props:{thematicLabel:String,id:Number,layersCount:Number},setup(Te){const e=Te,t=computed(()=>e.thematicLabel+` (${e.layersCount})`);return(Oe,ke)=>{const Be=Da;return openBlock(),createBlock(Be,{id:"accordion-"+Te.id,title:unref(t)},{default:withCtx(()=>[renderSlot(Oe.$slots,"default")]),_:3},8,["id","title"])}}});function useSearchInArray(Te,e,t){return Te.filter(Oe=>{if(t.map(ke=>{if(Oe.hasOwnProperty(ke)&&Oe[ke]&&Oe[ke].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return Oe})}const _hoisted_1$8={class:"catalogue-content-with-radio-btn"},__default__$8={name:"DataLayerCatalogue"},_sfc_main$d=Object.assign(__default__$8,{props:{dataLayers:Object,currDataFilter:String,searchString:String,selectedLayers:Object},setup(Te){const e=Te,t=computed(()=>ke(e.dataLayers)),Oe=computed(()=>Be(e.dataLayers));function ke(We){let Cn=[...new Set(Object.values(We).filter(An=>{if(An.hasOwnProperty("thematic")&&An.thematic.length>0)return An.thematic}).map(An=>An.thematic))].map(An=>({thematicLabel:An,layers:useSearchInArray(Object.values(We).filter(En=>En.hasOwnProperty("thematic")&&An===En.thematic).map(En=>En),e.searchString,["title","description","name"])}));return Cn.push({thematicLabel:"Autres",layers:useSearchInArray(Object.values(We).filter(An=>{if(!An.hasOwnProperty("thematic")||An.thematic.length===0)return An}),e.searchString,["title","description","name"])}),Cn}function Be(We){let Cn=[...new Set(Object.values(We).filter(An=>{if(An.hasOwnProperty("producer")&&An.producer.length>0)return An.producer}).map(An=>An.producer))].map(An=>({producerLabel:An,layers:useSearchInArray(Object.values(We).filter(En=>En.hasOwnProperty("producer")&&An===En.producer).map(En=>En),e.searchString,["title","description","name"])}));return Cn.push({producerLabel:"IGN",layers:useSearchInArray(Object.values(We).filter(An=>{if(!An.hasOwnProperty("producer")||An.producer.length==0)return An}),e.searchString,["title","description","name"])}),Cn}const Ue=ref(-1),He=ref(-1);return(We,Cn)=>{const An=_sfc_main$f,En=_sfc_main$e,Sn=Ta;return openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(Sn,{modelValue:unref(Ue),"onUpdate:modelValue":Cn[0]||(Cn[0]=Tn=>isRef(Ue)?Ue.value=Tn:null)},{default:withCtx(()=>[Te.currDataFilter==="producteur"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(Oe),(Tn,Ln)=>(openBlock(),createElementBlock(Fragment,{key:Tn.producerLabel},[Tn.layers.length>0?(openBlock(),createBlock(En,{id:Ln,"thematic-label":Tn.producerLabel,"layers-count":Tn.layers.length,key:Tn.producerLabel},{default:withCtx(()=>[(openBlock(),createBlock(An,{"list-name":Te.currDataFilter,"selected-layers":Te.selectedLayers,layers:Tn.layers,key:Tn.producerLabel},null,8,["list-name","selected-layers","layers"]))]),_:2},1032,["id","thematic-label","layers-count"])):createCommentVNode("",!0)],64))),128)):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(Sn,{modelValue:unref(He),"onUpdate:modelValue":Cn[1]||(Cn[1]=Tn=>isRef(He)?He.value=Tn:null)},{default:withCtx(()=>[Te.currDataFilter==="theme"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(t),(Tn,Ln)=>(openBlock(),createElementBlock(Fragment,{key:Tn.thematicLabel},[Tn.layers.length>0?(openBlock(),createBlock(En,{key:0,id:Ln,"thematic-label":Tn.thematicLabel,"layers-count":Tn.layers.length},{default:withCtx(()=>[createVNode(An,{"list-name":Te.currDataFilter,"selected-layers":Te.selectedLayers,layers:Tn.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["id","thematic-label","layers-count"])):createCommentVNode("",!0)],64))),128)):createCommentVNode("",!0)]),_:1},8,["modelValue"]),Te.currDataFilter=="tout"?(openBlock(),createBlock(An,{key:0,"list-name":Te.currDataFilter,"selected-layers":Te.selectedLayers,layers:unref(useSearchInArray)(e.dataLayers,Te.searchString,["title","description","name"])},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)])}}}),_hoisted_1$7={class:"catalogue-container"},_hoisted_2$4={class:"catalogue-search-bar"},__default__$7={name:"CatalogueMenu"},_sfc_main$c=Object.assign(__default__$7,{props:{layers:Object,selectedLayers:Object},setup(Te){const e=dist.useLogger();useMapStore();const t=Te;e.debug(t.layers);const Oe=ref(""),ke=computed(()=>Object.values(t.layers).filter(Tn=>{if(Tn.hasOwnProperty("base")&&Tn.base)return Tn})),Be=computed(()=>Object.values(t.layers).filter(Tn=>{if(!Tn.hasOwnProperty("base")||!Tn.base)return Tn})),Ue="Liste des couches",He=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Données",tabId:"tab-1",panelId:"tab-content-10"}],We=ref(!0),Cn=ref(0);function An(Tn){Oe.value=Tn}const En=[{label:"Producteur",value:"producteur"},{label:"Thème",value:"theme"},{label:"Tout",value:"tout"}],Sn=ref("producteur");return(Tn,Ln)=>{const Bn=Ze,ti=Ut$1,ni=Bi,ii=ou;return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$4,[createVNode(Bn,{"model-value":unref(Oe),"onUpdate:modelValue":An},null,8,["model-value"])]),createVNode(ii,{"tab-list-name":Ue,"tab-titles":He,modelValue:unref(Cn),"onUpdate:modelValue":Ln[1]||(Ln[1]=si=>isRef(Cn)?Cn.value=si:null)},{default:withCtx(()=>[createVNode(ti,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",asc:unref(We)},{default:withCtx(()=>[createVNode(_sfc_main$f,{"list-name":"dataLayer","selected-layers":Te.selectedLayers,layers:unref(useSearchInArray)(unref(ke),unref(Oe),["title","description","name"])},null,8,["selected-layers","layers"])]),_:1},8,["asc"]),createVNode(ti,{"panel-id":"tab-content-1","tab-id":"tab-1",asc:unref(We)},{default:withCtx(()=>[createVNode(ni,{inline:!0,"model-value":unref(Sn),small:!0,name:"filtre",options:En,"onUpdate:modelValue":Ln[0]||(Ln[0]=si=>Sn.value=si)},null,8,["model-value"]),createVNode(_sfc_main$d,{"data-layers":unref(Be),"curr-data-filter":unref(Sn),"search-string":unref(Oe),"selected-layers":Te.selectedLayers},null,8,["data-layers","curr-data-filter","search-string","selected-layers"])]),_:1},8,["asc"])]),_:1},8,["modelValue"])])}}}),__unplugin_components_0=_export_sfc(_sfc_main$c,[["__scopeId","data-v-60f3b31d"]]),_hoisted_1$6={class:"control-list-element"},__default__$6={name:"ControlListElement"},_sfc_main$b=Object.assign(__default__$6,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Te){const e=Te,t=useModel(Te,"modelValue"),Oe=ref();return watch(Oe,ke=>{ke===!0&&!t.value.includes(e.controlListElementOptions.name)&&(t.value=[...t.value,e.controlListElementOptions.name]),ke===!1&&(t.value=t.value.filter(Be=>Be!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(ke,Be)=>{const Ue=Su;return openBlock(),createElementBlock("tr",_hoisted_1$6,[Be[1]||(Be[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(Ue,mergeProps({disabled:Te.controlListElementOptions.disabled,hint:Te.controlListElementOptions.hint,inputId:Te.controlListElementOptions.id,label:Te.controlListElementOptions.label,labelLeft:"",modelValue:t.value===!0||Array.isArray(t.value)&&t.value.includes(Te.controlListElementOptions.name),"onUpdate:modelValue":Be[0]||(Be[0]=He=>isRef(Oe)?Oe.value=He:null)},ke.$attrs),null,16,["disabled","hint","inputId","label","modelValue"])])])}}}),ControlListElement=_export_sfc(_sfc_main$b,[["__scopeId","data-v-c8a00218"]]),_hoisted_1$5={class:"control-container"},_hoisted_2$3={class:"control-search-bar"},_hoisted_3={class:"control-content"},__default__$5={name:"MenuControl"},_sfc_main$a=Object.assign(__default__$5,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Te){dist.useLogger();const e=useMapStore(),t=Te,Oe=useModel(Te,"modelValue"),ke=useControlsMenuOptions(),Be=computed(()=>ke.filter(We=>{if(We.label.toLowerCase().includes(Ue.value.toLowerCase())||We.hint.toLowerCase().includes(Ue.value.toLowerCase())||We.name.toLowerCase().includes(Ue.value.toLowerCase()))return We}));computed(()=>t.selectedControls?Be.value.filter(We=>{if(t.selectedControls.includes(We.name))return We}):[]),ref(0),ref(!0);const Ue=ref("");function He(We){Ue.value=We}return watch(Oe,We=>{e.cleanControls();for(let Cn=0;Cn<We.length;Cn++){const An=We[Cn];e.addControl(An)}}),onMounted(()=>{}),onUpdated(()=>{}),(We,Cn)=>{const An=Ze;return openBlock(),createElementBlock("div",_hoisted_1$5,[Cn[1]||(Cn[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$3,[createVNode(An,{"model-value":unref(Ue),"onUpdate:modelValue":He},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),(En,Sn)=>(openBlock(),createBlock(ControlListElement,{key:Sn,modelValue:Oe.value,"onUpdate:modelValue":Cn[0]||(Cn[0]=Tn=>Oe.value=Tn),"model-value":t.selectedControls,"control-list-element-options":En},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$a,[["__scopeId","data-v-27e46f0d"]]),side="right",_sfc_main$9={__name:"RightMenuTool",props:{selectedControls:{Object},selectedLayers:{Object}},setup(Te){const e=useDataStore(),t=computed(()=>[{componentName:"MenuCatalogue",icon:"octicon:book-24",title:"Catalogue de données",visibility:!0},{componentName:"MenuControl",icon:"ri:tools-line",title:"Catalogue d'outils",visibility:!0}]),Oe=ref("MenuControlContent"),ke=ref(),Be=ref(null);function Ue(We){He(We)&&ke.value?Be.value.closeMenu():(Oe.value=We+"Content",Be.value.openMenu())}function He(We){return Oe.value.replace("Content","")===We}return(We,Cn)=>{const An=__unplugin_components_0,En=__unplugin_components_1,Sn=__unplugin_components_2;return openBlock(),createBlock(Sn,{side,visibility:!0,id:unref(Oe),modelValue:unref(ke),"onUpdate:modelValue":Cn[0]||(Cn[0]=Tn=>isRef(ke)?ke.value=Tn:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(Oe)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[createVNode(An,{"selected-layers":Te.selectedLayers,layers:unref(e).getLayers()},null,8,["selected-layers","layers"])],2),createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(Oe)==="MenuControlContent"?"activeTab":"inactiveTab"])},[createVNode(MenuControl,{"selected-controls":Te.selectedControls},null,8,["selected-controls"])],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Tn=>(openBlock(),createBlock(En,{visibility:Tn.visibility,side,icon:Tn.icon,id:Tn.componentName,active:He(Tn.componentName),title:Tn.title,onTabClicked:Ue},null,8,["visibility","icon","id","active","title"]))),256))]),_:1},8,["id","modelValue"])}}},RightMenuTool=_export_sfc(_sfc_main$9,[["__scopeId","data-v-36202f18"]]),_hoisted_1$4={id:"map-and-tools-container"},_hoisted_2$2={class:"modal-container"},_sfc_main$8=defineComponent({__name:"CartoAndTools",setup(Te){const e=useMapStore(),t=useDataStore(),Oe=ref(null),ke=ref(null),Be=ref(null);provide("refPrintModal",Be),provide("modalShareRef",ke);const Ue=()=>{ke.value.onModalShareOpen()},He=()=>{Oe.value.openModalTheme()},We=()=>{Be.value.onModalPrintOpen()},Cn=computed(()=>e.getLayers().map(Tn=>{var Ln=t.getLayerByID(Tn),Bn=e.getLayerProperty(Tn);return Ln.opacity=Bn.opacity,Ln.visible=Bn.visible,Ln.gray=Bn.gray,Ln})),An=computed(()=>e.getControls()),En=ref(null);return provide("selectedLayers",Cn),(Sn,Tn)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(LeftMenuTool,{onOnModalShareOpen:Ue,onOnModalPrintOpen:We,onOnModalThemeOpen:He}),createVNode(Carto,{ref_key:"cartoRef",ref:En,"selected-layers":unref(Cn),"selected-controls":unref(An)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,{"selected-layers":unref(Cn),"selected-controls":unref(An)},null,8,["selected-layers","selected-controls"]),createBaseVNode("div",_hoisted_2$2,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:Oe},null,512),createVNode(PrintModal,{ref_key:"refPrintModal",ref:Be},null,512),createVNode(ShareModal,{ref_key:"modalShareRef",ref:ke},null,512)])]))}}),CartoAndTools=_export_sfc(_sfc_main$8,[["__scopeId","data-v-5c733fc8"]]),_sfc_main$7={},_hoisted_1$3={class:"loader"};function _sfc_render(Te,e){return openBlock(),createElementBlock("span",_hoisted_1$3)}const Patience=_export_sfc(_sfc_main$7,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$6={__name:"StoreData",props:{},async setup(Te){let e,t;const Oe=dist.useLogger(),ke=useDataStore(),{fetchData:Be}=ke,Ue=([e,t]=withAsyncContext(()=>Be()),e=await e,t(),e);return Oe.debug(Ue),(He,We)=>unref(ke).isLoaded&&!unref(ke).error?renderSlot(He.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$4={},_sfc_main$5=Object.assign(__default__$4,{__name:"ModalInformation",setup(Te){const e=useEulerian(),t=useMapStore(),ke=useDataStore().getInformations(),Be=ke.title,Ue=ke.description,He=ke.type,We=ke.version,Cn=ref(ke.opened&&We!==parseInt(t.noInformation,10));Cn.value&&e.pause();const An=()=>{Cn.value=!1,e.resume()},En=()=>{Cn.value=!1,t.noInformation=We,e.resume()};return(Sn,Tn)=>{const Ln=Sa,Bn=Vt$1;return openBlock(),createBlock(Bn,{opened:unref(Cn),title:unref(Be),size:"md",onClose:An},{default:withCtx(()=>[createVNode(Ln,{description:unref(Ue),type:unref(He)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:En},Tn[0]||(Tn[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$2={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$4=defineComponent({__name:"Load",setup(Te){return(e,t)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(_sfc_main$5)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1$1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__$3={},_sfc_main$3=Object.assign(__default__$3,{__name:"Embed",setup(Te){const e=useMapStore(),t=useDataStore(),Oe=computed(()=>e.getLayers().map(We=>{var Cn=t.getLayerByID(We),An=e.getLayerProperty(We);return Cn.opacity=An.opacity,Cn.visible=An.visible,Cn.gray=An.gray,Cn})),ke=["ScaleLine","Zoom"];function Be(){var He=document.querySelector(".fr-header");He.classList.add("gpf-hidden")}function Ue(){var He=document.querySelector(".fr-footer");He.classList.add("gpf-hidden")}return onMounted(()=>{Be(),Ue()}),(He,We)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(Carto,{"selected-layers":unref(Oe),"selected-controls":ke},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),__default__$2={},_sfc_main$2=Object.assign(__default__$2,{__name:"Login",setup(Te){const e=useRouter(),t=inject("services");return onMounted(()=>{const Oe=location.search,ke=new URLSearchParams(Oe);var Be=ke.get("code"),Ue=ke.get("session_state"),He=ke.get("state");Oe||t.getAccessLogin().then(We=>{location.href=We}),Be&&Ue&&He&&e.push({path:"/"})}),(Oe,ke)=>renderSlot(Oe.$slots,"default")}}),__default__$1={},_sfc_main$1=Object.assign(__default__$1,{__name:"Logout",setup(Te){const e=useRouter(),t=inject("services");return onMounted(()=>{const Oe=location.search;var Be=new URLSearchParams(Oe).get("session_state");Oe||t.getAccessLogout().then(Ue=>{location.href=Ue}),Be&&e.push({path:"/"})}),(Oe,ke)=>renderSlot(Oe.$slots,"default")}}),_hoisted_1={class:"fr-container fr-p-2w"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Bookmarks",setup(Te){useRouter(),inject("services");const e="Favoris",t="Not yet implemented !";return onBeforeMount(()=>{}),onMounted(()=>{}),(Oe,ke)=>{const Be=Sa;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",null,toDisplayString(e)),createVNode(Be,{type:"info",title:"Information",description:t,closed:!1,closeable:!1})]),renderSlot(Oe.$slots,"default")],64)}}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/embed",name:"Carte embarquée",component:_sfc_main$3},{path:"/login",name:"Se connecter",component:_sfc_main$2},{path:"/logout",name:"Se deconnecter",component:_sfc_main$1},{path:"/bookmarks",name:"Favoris",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(Te=>{if(Te.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(Te.href),!1;const e=Te.meta.title?`${Te.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});async function waitingPrepareApp(){return Promise.resolve()}var storage=localStorage.getItem("service");const services=createServices(storage?JSON.parse(storage).connexion:{}),eulerian=createEulerian({verbose:!0,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia(),store=storePlugin({stores:["service"],storage:localStorage});pinia.use(store);const app=createApp(_sfc_main$O);app.use(pinia);app.use(router);app.use(logger);app.use(eulerian);app.use(services);waitingPrepareApp().then(()=>{app.mount("#app")});export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g};
