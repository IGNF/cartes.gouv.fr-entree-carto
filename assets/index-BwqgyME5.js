var Yp=Object.defineProperty;var Df=ke=>{throw TypeError(ke)};var Xp=(ke,e,Te)=>e in ke?Yp(ke,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):ke[e]=Te;var Mc=(ke,e,Te)=>Xp(ke,typeof e!="symbol"?e+"":e,Te),of=(ke,e,Te)=>e.has(ke)||Df("Cannot "+Te);var yl=(ke,e,Te)=>(of(ke,e,"read from private field"),Te?Te.call(ke):e.get(ke)),Iu=(ke,e,Te)=>e.has(ke)?Df("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(ke):e.set(ke,Te),Hc=(ke,e,Te,Oe)=>(of(ke,e,"write to private field"),Oe?Oe.call(ke,Te):e.set(ke,Te),Te),ac=(ke,e,Te)=>(of(ke,e,"access private method"),Te);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Be of document.querySelectorAll('link[rel="modulepreload"]'))Oe(Be);new MutationObserver(Be=>{for(const Ue of Be)if(Ue.type==="childList")for(const He of Ue.addedNodes)He.tagName==="LINK"&&He.rel==="modulepreload"&&Oe(He)}).observe(document,{childList:!0,subtree:!0});function Te(Be){const Ue={};return Be.integrity&&(Ue.integrity=Be.integrity),Be.referrerPolicy&&(Ue.referrerPolicy=Be.referrerPolicy),Be.crossOrigin==="use-credentials"?Ue.credentials="include":Be.crossOrigin==="anonymous"?Ue.credentials="omit":Ue.credentials="same-origin",Ue}function Oe(Be){if(Be.ep)return;Be.ep=!0;const Ue=Te(Be);fetch(Be.href,Ue)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(ke){const e=Object.create(null);for(const Te of ke.split(","))e[Te]=1;return Te=>Te in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=ke=>ke.charCodeAt(0)===111&&ke.charCodeAt(1)===110&&(ke.charCodeAt(2)>122||ke.charCodeAt(2)<97),isModelListener=ke=>ke.startsWith("onUpdate:"),extend$5=Object.assign,remove=(ke,e)=>{const Te=ke.indexOf(e);Te>-1&&ke.splice(Te,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(ke,e)=>hasOwnProperty$1.call(ke,e),isArray$1=Array.isArray,isMap=ke=>toTypeString(ke)==="[object Map]",isSet=ke=>toTypeString(ke)==="[object Set]",isDate=ke=>toTypeString(ke)==="[object Date]",isRegExp=ke=>toTypeString(ke)==="[object RegExp]",isFunction=ke=>typeof ke=="function",isString=ke=>typeof ke=="string",isSymbol=ke=>typeof ke=="symbol",isObject$1=ke=>ke!==null&&typeof ke=="object",isPromise=ke=>(isObject$1(ke)||isFunction(ke))&&isFunction(ke.then)&&isFunction(ke.catch),objectToString=Object.prototype.toString,toTypeString=ke=>objectToString.call(ke),toRawType=ke=>toTypeString(ke).slice(8,-1),isPlainObject$2=ke=>toTypeString(ke)==="[object Object]",isIntegerKey=ke=>isString(ke)&&ke!=="NaN"&&ke[0]!=="-"&&""+parseInt(ke,10)===ke,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=ke=>{const e=Object.create(null);return Te=>e[Te]||(e[Te]=ke(Te))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(ke=>ke.replace(camelizeRE,(e,Te)=>Te?Te.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(ke=>ke.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(ke=>ke.charAt(0).toUpperCase()+ke.slice(1)),toHandlerKey=cacheStringFunction(ke=>ke?`on${capitalize(ke)}`:""),hasChanged=(ke,e)=>!Object.is(ke,e),invokeArrayFns=(ke,...e)=>{for(let Te=0;Te<ke.length;Te++)ke[Te](...e)},def=(ke,e,Te,Oe=!1)=>{Object.defineProperty(ke,e,{configurable:!0,enumerable:!1,writable:Oe,value:Te})},looseToNumber=ke=>{const e=parseFloat(ke);return isNaN(e)?ke:e},toNumber=ke=>{const e=isString(ke)?Number(ke):NaN;return isNaN(e)?ke:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(ke){if(isArray$1(ke)){const e={};for(let Te=0;Te<ke.length;Te++){const Oe=ke[Te],Be=isString(Oe)?parseStringStyle(Oe):normalizeStyle(Oe);if(Be)for(const Ue in Be)e[Ue]=Be[Ue]}return e}else if(isString(ke)||isObject$1(ke))return ke}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(ke){const e={};return ke.replace(styleCommentRE,"").split(listDelimiterRE).forEach(Te=>{if(Te){const Oe=Te.split(propertyDelimiterRE);Oe.length>1&&(e[Oe[0].trim()]=Oe[1].trim())}}),e}function normalizeClass(ke){let e="";if(isString(ke))e=ke;else if(isArray$1(ke))for(let Te=0;Te<ke.length;Te++){const Oe=normalizeClass(ke[Te]);Oe&&(e+=Oe+" ")}else if(isObject$1(ke))for(const Te in ke)ke[Te]&&(e+=Te+" ");return e.trim()}function normalizeProps(ke){if(!ke)return null;let{class:e,style:Te}=ke;return e&&!isString(e)&&(ke.class=normalizeClass(e)),Te&&(ke.style=normalizeStyle(Te)),ke}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(ke){return!!ke||ke===""}function looseCompareArrays(ke,e){if(ke.length!==e.length)return!1;let Te=!0;for(let Oe=0;Te&&Oe<ke.length;Oe++)Te=looseEqual(ke[Oe],e[Oe]);return Te}function looseEqual(ke,e){if(ke===e)return!0;let Te=isDate(ke),Oe=isDate(e);if(Te||Oe)return Te&&Oe?ke.getTime()===e.getTime():!1;if(Te=isSymbol(ke),Oe=isSymbol(e),Te||Oe)return ke===e;if(Te=isArray$1(ke),Oe=isArray$1(e),Te||Oe)return Te&&Oe?looseCompareArrays(ke,e):!1;if(Te=isObject$1(ke),Oe=isObject$1(e),Te||Oe){if(!Te||!Oe)return!1;const Be=Object.keys(ke).length,Ue=Object.keys(e).length;if(Be!==Ue)return!1;for(const He in ke){const We=ke.hasOwnProperty(He),Cn=e.hasOwnProperty(He);if(We&&!Cn||!We&&Cn||!looseEqual(ke[He],e[He]))return!1}}return String(ke)===String(e)}function looseIndexOf(ke,e){return ke.findIndex(Te=>looseEqual(Te,e))}const isRef$1=ke=>!!(ke&&ke.__v_isRef===!0),toDisplayString=ke=>isString(ke)?ke:ke==null?"":isArray$1(ke)||isObject$1(ke)&&(ke.toString===objectToString||!isFunction(ke.toString))?isRef$1(ke)?toDisplayString(ke.value):JSON.stringify(ke,replacer,2):String(ke),replacer=(ke,e)=>isRef$1(e)?replacer(ke,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((Te,[Oe,Be],Ue)=>(Te[stringifySymbol(Oe,Ue)+" =>"]=Be,Te),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(Te=>stringifySymbol(Te))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$2(e)?String(e):e,stringifySymbol=(ke,e="")=>{var Te;return isSymbol(ke)?`Symbol(${(Te=ke.description)!=null?Te:e})`:ke};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,Te;if(this.scopes)for(e=0,Te=this.scopes.length;e<Te;e++)this.scopes[e].pause();for(e=0,Te=this.effects.length;e<Te;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,Te;if(this.scopes)for(e=0,Te=this.scopes.length;e<Te;e++)this.scopes[e].resume();for(e=0,Te=this.effects.length;e<Te;e++)this.effects[e].resume()}}run(e){if(this._active){const Te=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=Te}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let Te,Oe;for(Te=0,Oe=this.effects.length;Te<Oe;Te++)this.effects[Te].stop();for(this.effects.length=0,Te=0,Oe=this.cleanups.length;Te<Oe;Te++)this.cleanups[Te]();if(this.cleanups.length=0,this.scopes){for(Te=0,Oe=this.scopes.length;Te<Oe;Te++)this.scopes[Te].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const Be=this.parent.scopes.pop();Be&&Be!==this&&(this.parent.scopes[this.index]=Be,Be.index=this.index)}this.parent=void 0}}}function effectScope(ke){return new EffectScope(ke)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(ke,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(ke)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,Te=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=Te,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(ke,e=!1){if(ke.flags|=8,e){ke.next=batchedComputed,batchedComputed=ke;return}ke.next=batchedSub,batchedSub=ke}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const Te=e.next;e.next=void 0,e.flags&=-9,e=Te}}let ke;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const Te=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(Oe){ke||(ke=Oe)}e=Te}}if(ke)throw ke}function prepareDeps(ke){for(let e=ke.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(ke){let e,Te=ke.depsTail,Oe=Te;for(;Oe;){const Be=Oe.prevDep;Oe.version===-1?(Oe===Te&&(Te=Be),removeSub(Oe),removeDep(Oe)):e=Oe,Oe.dep.activeLink=Oe.prevActiveLink,Oe.prevActiveLink=void 0,Oe=Be}ke.deps=e,ke.depsTail=Te}function isDirty(ke){for(let e=ke.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!ke._dirty}function refreshComputed(ke){if(ke.flags&4&&!(ke.flags&16)||(ke.flags&=-17,ke.globalVersion===globalVersion))return;ke.globalVersion=globalVersion;const e=ke.dep;if(ke.flags|=2,e.version>0&&!ke.isSSR&&ke.deps&&!isDirty(ke)){ke.flags&=-3;return}const Te=activeSub,Oe=shouldTrack;activeSub=ke,shouldTrack=!0;try{prepareDeps(ke);const Be=ke.fn(ke._value);(e.version===0||hasChanged(Be,ke._value))&&(ke._value=Be,e.version++)}catch(Be){throw e.version++,Be}finally{activeSub=Te,shouldTrack=Oe,cleanupDeps(ke),ke.flags&=-3}}function removeSub(ke,e=!1){const{dep:Te,prevSub:Oe,nextSub:Be}=ke;if(Oe&&(Oe.nextSub=Be,ke.prevSub=void 0),Be&&(Be.prevSub=Oe,ke.nextSub=void 0),Te.subs===ke&&(Te.subs=Oe,!Oe&&Te.computed)){Te.computed.flags&=-5;for(let Ue=Te.computed.deps;Ue;Ue=Ue.nextDep)removeSub(Ue,!0)}!e&&!--Te.sc&&Te.map&&Te.map.delete(Te.key)}function removeDep(ke){const{prevDep:e,nextDep:Te}=ke;e&&(e.nextDep=Te,ke.prevDep=void 0),Te&&(Te.prevDep=e,ke.nextDep=void 0)}function effect(ke,e){ke.effect instanceof ReactiveEffect&&(ke=ke.effect.fn);const Te=new ReactiveEffect(ke);e&&extend$5(Te,e);try{Te.run()}catch(Be){throw Te.stop(),Be}const Oe=Te.run.bind(Te);return Oe.effect=Te,Oe}function stop(ke){ke.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const ke=trackStack.pop();shouldTrack=ke===void 0?!0:ke}function cleanupEffect(ke){const{cleanup:e}=ke;if(ke.cleanup=void 0,e){const Te=activeSub;activeSub=void 0;try{e()}finally{activeSub=Te}}}let globalVersion=0;class Link{constructor(e,Te){this.sub=e,this.dep=Te,this.version=Te.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let Te=this.activeLink;if(Te===void 0||Te.sub!==activeSub)Te=this.activeLink=new Link(activeSub,this),activeSub.deps?(Te.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=Te,activeSub.depsTail=Te):activeSub.deps=activeSub.depsTail=Te,addSub(Te);else if(Te.version===-1&&(Te.version=this.version,Te.nextDep)){const Oe=Te.nextDep;Oe.prevDep=Te.prevDep,Te.prevDep&&(Te.prevDep.nextDep=Oe),Te.prevDep=activeSub.depsTail,Te.nextDep=void 0,activeSub.depsTail.nextDep=Te,activeSub.depsTail=Te,activeSub.deps===Te&&(activeSub.deps=Oe)}return Te}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let Te=this.subs;Te;Te=Te.prevSub)Te.sub.notify()&&Te.sub.dep.notify()}finally{endBatch()}}}function addSub(ke){if(ke.dep.sc++,ke.sub.flags&4){const e=ke.dep.computed;if(e&&!ke.dep.subs){e.flags|=20;for(let Oe=e.deps;Oe;Oe=Oe.nextDep)addSub(Oe)}const Te=ke.dep.subs;Te!==ke&&(ke.prevSub=Te,Te&&(Te.nextSub=ke)),ke.dep.subs=ke}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(ke,e,Te){if(shouldTrack&&activeSub){let Oe=targetMap.get(ke);Oe||targetMap.set(ke,Oe=new Map);let Be=Oe.get(Te);Be||(Oe.set(Te,Be=new Dep),Be.map=Oe,Be.key=Te),Be.track()}}function trigger(ke,e,Te,Oe,Be,Ue){const He=targetMap.get(ke);if(!He){globalVersion++;return}const We=Cn=>{Cn&&Cn.trigger()};if(startBatch(),e==="clear")He.forEach(We);else{const Cn=isArray$1(ke),An=Cn&&isIntegerKey(Te);if(Cn&&Te==="length"){const En=Number(Oe);He.forEach((Sn,Tn)=>{(Tn==="length"||Tn===ARRAY_ITERATE_KEY||!isSymbol(Tn)&&Tn>=En)&&We(Sn)})}else switch((Te!==void 0||He.has(void 0))&&We(He.get(Te)),An&&We(He.get(ARRAY_ITERATE_KEY)),e){case"add":Cn?An&&We(He.get("length")):(We(He.get(ITERATE_KEY)),isMap(ke)&&We(He.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Cn||(We(He.get(ITERATE_KEY)),isMap(ke)&&We(He.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(ke)&&We(He.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(ke,e){const Te=targetMap.get(ke);return Te&&Te.get(e)}function reactiveReadArray(ke){const e=toRaw(ke);return e===ke?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(ke)?e:e.map(toReactive))}function shallowReadArray(ke){return track(ke=toRaw(ke),"iterate",ARRAY_ITERATE_KEY),ke}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...ke){return reactiveReadArray(this).concat(...ke.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",ke=>(ke[1]=toReactive(ke[1]),ke))},every(ke,e){return apply$1(this,"every",ke,e,void 0,arguments)},filter(ke,e){return apply$1(this,"filter",ke,e,Te=>Te.map(toReactive),arguments)},find(ke,e){return apply$1(this,"find",ke,e,toReactive,arguments)},findIndex(ke,e){return apply$1(this,"findIndex",ke,e,void 0,arguments)},findLast(ke,e){return apply$1(this,"findLast",ke,e,toReactive,arguments)},findLastIndex(ke,e){return apply$1(this,"findLastIndex",ke,e,void 0,arguments)},forEach(ke,e){return apply$1(this,"forEach",ke,e,void 0,arguments)},includes(...ke){return searchProxy(this,"includes",ke)},indexOf(...ke){return searchProxy(this,"indexOf",ke)},join(ke){return reactiveReadArray(this).join(ke)},lastIndexOf(...ke){return searchProxy(this,"lastIndexOf",ke)},map(ke,e){return apply$1(this,"map",ke,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...ke){return noTracking(this,"push",ke)},reduce(ke,...e){return reduce(this,"reduce",ke,e)},reduceRight(ke,...e){return reduce(this,"reduceRight",ke,e)},shift(){return noTracking(this,"shift")},some(ke,e){return apply$1(this,"some",ke,e,void 0,arguments)},splice(...ke){return noTracking(this,"splice",ke)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(ke){return reactiveReadArray(this).toSorted(ke)},toSpliced(...ke){return reactiveReadArray(this).toSpliced(...ke)},unshift(...ke){return noTracking(this,"unshift",ke)},values(){return iterator(this,"values",toReactive)}};function iterator(ke,e,Te){const Oe=shallowReadArray(ke),Be=Oe[e]();return Oe!==ke&&!isShallow(ke)&&(Be._next=Be.next,Be.next=()=>{const Ue=Be._next();return Ue.value&&(Ue.value=Te(Ue.value)),Ue}),Be}const arrayProto=Array.prototype;function apply$1(ke,e,Te,Oe,Be,Ue){const He=shallowReadArray(ke),We=He!==ke&&!isShallow(ke),Cn=He[e];if(Cn!==arrayProto[e]){const Sn=Cn.apply(ke,Ue);return We?toReactive(Sn):Sn}let An=Te;He!==ke&&(We?An=function(Sn,Tn){return Te.call(this,toReactive(Sn),Tn,ke)}:Te.length>2&&(An=function(Sn,Tn){return Te.call(this,Sn,Tn,ke)}));const En=Cn.call(He,An,Oe);return We&&Be?Be(En):En}function reduce(ke,e,Te,Oe){const Be=shallowReadArray(ke);let Ue=Te;return Be!==ke&&(isShallow(ke)?Te.length>3&&(Ue=function(He,We,Cn){return Te.call(this,He,We,Cn,ke)}):Ue=function(He,We,Cn){return Te.call(this,He,toReactive(We),Cn,ke)}),Be[e](Ue,...Oe)}function searchProxy(ke,e,Te){const Oe=toRaw(ke);track(Oe,"iterate",ARRAY_ITERATE_KEY);const Be=Oe[e](...Te);return(Be===-1||Be===!1)&&isProxy(Te[0])?(Te[0]=toRaw(Te[0]),Oe[e](...Te)):Be}function noTracking(ke,e,Te=[]){pauseTracking(),startBatch();const Oe=toRaw(ke)[e].apply(ke,Te);return endBatch(),resetTracking(),Oe}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(ke=>ke!=="arguments"&&ke!=="caller").map(ke=>Symbol[ke]).filter(isSymbol));function hasOwnProperty(ke){isSymbol(ke)||(ke=String(ke));const e=toRaw(this);return track(e,"has",ke),e.hasOwnProperty(ke)}class BaseReactiveHandler{constructor(e=!1,Te=!1){this._isReadonly=e,this._isShallow=Te}get(e,Te,Oe){if(Te==="__v_skip")return e.__v_skip;const Be=this._isReadonly,Ue=this._isShallow;if(Te==="__v_isReactive")return!Be;if(Te==="__v_isReadonly")return Be;if(Te==="__v_isShallow")return Ue;if(Te==="__v_raw")return Oe===(Be?Ue?shallowReadonlyMap:readonlyMap:Ue?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(Oe)?e:void 0;const He=isArray$1(e);if(!Be){let Cn;if(He&&(Cn=arrayInstrumentations[Te]))return Cn;if(Te==="hasOwnProperty")return hasOwnProperty}const We=Reflect.get(e,Te,isRef(e)?e:Oe);return(isSymbol(Te)?builtInSymbols.has(Te):isNonTrackableKeys(Te))||(Be||track(e,"get",Te),Ue)?We:isRef(We)?He&&isIntegerKey(Te)?We:We.value:isObject$1(We)?Be?readonly(We):reactive(We):We}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,Te,Oe,Be){let Ue=e[Te];if(!this._isShallow){const Cn=isReadonly(Ue);if(!isShallow(Oe)&&!isReadonly(Oe)&&(Ue=toRaw(Ue),Oe=toRaw(Oe)),!isArray$1(e)&&isRef(Ue)&&!isRef(Oe))return Cn?!1:(Ue.value=Oe,!0)}const He=isArray$1(e)&&isIntegerKey(Te)?Number(Te)<e.length:hasOwn(e,Te),We=Reflect.set(e,Te,Oe,isRef(e)?e:Be);return e===toRaw(Be)&&(He?hasChanged(Oe,Ue)&&trigger(e,"set",Te,Oe):trigger(e,"add",Te,Oe)),We}deleteProperty(e,Te){const Oe=hasOwn(e,Te);e[Te];const Be=Reflect.deleteProperty(e,Te);return Be&&Oe&&trigger(e,"delete",Te,void 0),Be}has(e,Te){const Oe=Reflect.has(e,Te);return(!isSymbol(Te)||!builtInSymbols.has(Te))&&track(e,"has",Te),Oe}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,Te){return!0}deleteProperty(e,Te){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=ke=>ke,getProto=ke=>Reflect.getPrototypeOf(ke);function createIterableMethod(ke,e,Te){return function(...Oe){const Be=this.__v_raw,Ue=toRaw(Be),He=isMap(Ue),We=ke==="entries"||ke===Symbol.iterator&&He,Cn=ke==="keys"&&He,An=Be[ke](...Oe),En=Te?toShallow:e?toReadonly:toReactive;return!e&&track(Ue,"iterate",Cn?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Sn,done:Tn}=An.next();return Tn?{value:Sn,done:Tn}:{value:We?[En(Sn[0]),En(Sn[1])]:En(Sn),done:Tn}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(ke){return function(...e){return ke==="delete"?!1:ke==="clear"?void 0:this}}function createInstrumentations(ke,e){const Te={get(Be){const Ue=this.__v_raw,He=toRaw(Ue),We=toRaw(Be);ke||(hasChanged(Be,We)&&track(He,"get",Be),track(He,"get",We));const{has:Cn}=getProto(He),An=e?toShallow:ke?toReadonly:toReactive;if(Cn.call(He,Be))return An(Ue.get(Be));if(Cn.call(He,We))return An(Ue.get(We));Ue!==He&&Ue.get(Be)},get size(){const Be=this.__v_raw;return!ke&&track(toRaw(Be),"iterate",ITERATE_KEY),Reflect.get(Be,"size",Be)},has(Be){const Ue=this.__v_raw,He=toRaw(Ue),We=toRaw(Be);return ke||(hasChanged(Be,We)&&track(He,"has",Be),track(He,"has",We)),Be===We?Ue.has(Be):Ue.has(Be)||Ue.has(We)},forEach(Be,Ue){const He=this,We=He.__v_raw,Cn=toRaw(We),An=e?toShallow:ke?toReadonly:toReactive;return!ke&&track(Cn,"iterate",ITERATE_KEY),We.forEach((En,Sn)=>Be.call(Ue,An(En),An(Sn),He))}};return extend$5(Te,ke?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(Be){!e&&!isShallow(Be)&&!isReadonly(Be)&&(Be=toRaw(Be));const Ue=toRaw(this);return getProto(Ue).has.call(Ue,Be)||(Ue.add(Be),trigger(Ue,"add",Be,Be)),this},set(Be,Ue){!e&&!isShallow(Ue)&&!isReadonly(Ue)&&(Ue=toRaw(Ue));const He=toRaw(this),{has:We,get:Cn}=getProto(He);let An=We.call(He,Be);An||(Be=toRaw(Be),An=We.call(He,Be));const En=Cn.call(He,Be);return He.set(Be,Ue),An?hasChanged(Ue,En)&&trigger(He,"set",Be,Ue):trigger(He,"add",Be,Ue),this},delete(Be){const Ue=toRaw(this),{has:He,get:We}=getProto(Ue);let Cn=He.call(Ue,Be);Cn||(Be=toRaw(Be),Cn=He.call(Ue,Be)),We&&We.call(Ue,Be);const An=Ue.delete(Be);return Cn&&trigger(Ue,"delete",Be,void 0),An},clear(){const Be=toRaw(this),Ue=Be.size!==0,He=Be.clear();return Ue&&trigger(Be,"clear",void 0,void 0),He}}),["keys","values","entries",Symbol.iterator].forEach(Be=>{Te[Be]=createIterableMethod(Be,ke,e)}),Te}function createInstrumentationGetter(ke,e){const Te=createInstrumentations(ke,e);return(Oe,Be,Ue)=>Be==="__v_isReactive"?!ke:Be==="__v_isReadonly"?ke:Be==="__v_raw"?Oe:Reflect.get(hasOwn(Te,Be)&&Be in Oe?Te:Oe,Be,Ue)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(ke){switch(ke){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(ke){return ke.__v_skip||!Object.isExtensible(ke)?0:targetTypeMap(toRawType(ke))}function reactive(ke){return isReadonly(ke)?ke:createReactiveObject(ke,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(ke){return createReactiveObject(ke,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(ke){return createReactiveObject(ke,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(ke){return createReactiveObject(ke,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(ke,e,Te,Oe,Be){if(!isObject$1(ke)||ke.__v_raw&&!(e&&ke.__v_isReactive))return ke;const Ue=Be.get(ke);if(Ue)return Ue;const He=getTargetType(ke);if(He===0)return ke;const We=new Proxy(ke,He===2?Oe:Te);return Be.set(ke,We),We}function isReactive(ke){return isReadonly(ke)?isReactive(ke.__v_raw):!!(ke&&ke.__v_isReactive)}function isReadonly(ke){return!!(ke&&ke.__v_isReadonly)}function isShallow(ke){return!!(ke&&ke.__v_isShallow)}function isProxy(ke){return ke?!!ke.__v_raw:!1}function toRaw(ke){const e=ke&&ke.__v_raw;return e?toRaw(e):ke}function markRaw(ke){return!hasOwn(ke,"__v_skip")&&Object.isExtensible(ke)&&def(ke,"__v_skip",!0),ke}const toReactive=ke=>isObject$1(ke)?reactive(ke):ke,toReadonly=ke=>isObject$1(ke)?readonly(ke):ke;function isRef(ke){return ke?ke.__v_isRef===!0:!1}function ref(ke){return createRef(ke,!1)}function shallowRef(ke){return createRef(ke,!0)}function createRef(ke,e){return isRef(ke)?ke:new RefImpl(ke,e)}class RefImpl{constructor(e,Te){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=Te?e:toRaw(e),this._value=Te?e:toReactive(e),this.__v_isShallow=Te}get value(){return this.dep.track(),this._value}set value(e){const Te=this._rawValue,Oe=this.__v_isShallow||isShallow(e)||isReadonly(e);e=Oe?e:toRaw(e),hasChanged(e,Te)&&(this._rawValue=e,this._value=Oe?e:toReactive(e),this.dep.trigger())}}function triggerRef(ke){ke.dep&&ke.dep.trigger()}function unref(ke){return isRef(ke)?ke.value:ke}function toValue$1(ke){return isFunction(ke)?ke():unref(ke)}const shallowUnwrapHandlers={get:(ke,e,Te)=>e==="__v_raw"?ke:unref(Reflect.get(ke,e,Te)),set:(ke,e,Te,Oe)=>{const Be=ke[e];return isRef(Be)&&!isRef(Te)?(Be.value=Te,!0):Reflect.set(ke,e,Te,Oe)}};function proxyRefs(ke){return isReactive(ke)?ke:new Proxy(ke,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const Te=this.dep=new Dep,{get:Oe,set:Be}=e(Te.track.bind(Te),Te.trigger.bind(Te));this._get=Oe,this._set=Be}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(ke){return new CustomRefImpl(ke)}function toRefs(ke){const e=isArray$1(ke)?new Array(ke.length):{};for(const Te in ke)e[Te]=propertyToRef(ke,Te);return e}class ObjectRefImpl{constructor(e,Te,Oe){this._object=e,this._key=Te,this._defaultValue=Oe,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(ke,e,Te){return isRef(ke)?ke:isFunction(ke)?new GetterRefImpl(ke):isObject$1(ke)&&arguments.length>1?propertyToRef(ke,e,Te):ref(ke)}function propertyToRef(ke,e,Te){const Oe=ke[e];return isRef(Oe)?Oe:new ObjectRefImpl(ke,e,Te)}class ComputedRefImpl{constructor(e,Te,Oe){this.fn=e,this.setter=Te,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!Te,this.isSSR=Oe}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(ke,e,Te=!1){let Oe,Be;return isFunction(ke)?Oe=ke:(Oe=ke.get,Be=ke.set),new ComputedRefImpl(Oe,Be,Te)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(ke,e=!1,Te=activeWatcher){if(Te){let Oe=cleanupMap.get(Te);Oe||cleanupMap.set(Te,Oe=[]),Oe.push(ke)}}function watch$1(ke,e,Te=EMPTY_OBJ){const{immediate:Oe,deep:Be,once:Ue,scheduler:He,augmentJob:We,call:Cn}=Te,An=ai=>Be?ai:isShallow(ai)||Be===!1||Be===0?traverse(ai,1):traverse(ai);let En,Sn,Tn,Ln,Bn=!1,ei=!1;if(isRef(ke)?(Sn=()=>ke.value,Bn=isShallow(ke)):isReactive(ke)?(Sn=()=>An(ke),Bn=!0):isArray$1(ke)?(ei=!0,Bn=ke.some(ai=>isReactive(ai)||isShallow(ai)),Sn=()=>ke.map(ai=>{if(isRef(ai))return ai.value;if(isReactive(ai))return An(ai);if(isFunction(ai))return Cn?Cn(ai,2):ai()})):isFunction(ke)?e?Sn=Cn?()=>Cn(ke,2):ke:Sn=()=>{if(Tn){pauseTracking();try{Tn()}finally{resetTracking()}}const ai=activeWatcher;activeWatcher=En;try{return Cn?Cn(ke,3,[Ln]):ke(Ln)}finally{activeWatcher=ai}}:Sn=NOOP,e&&Be){const ai=Sn,ci=Be===!0?1/0:Be;Sn=()=>traverse(ai(),ci)}const ni=getCurrentScope(),ti=()=>{En.stop(),ni&&ni.active&&remove(ni.effects,En)};if(Ue&&e){const ai=e;e=(...ci)=>{ai(...ci),ti()}}let ri=ei?new Array(ke.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const oi=ai=>{if(!(!(En.flags&1)||!En.dirty&&!ai))if(e){const ci=En.run();if(Be||Bn||(ei?ci.some((Pi,vi)=>hasChanged(Pi,ri[vi])):hasChanged(ci,ri))){Tn&&Tn();const Pi=activeWatcher;activeWatcher=En;try{const vi=[ci,ri===INITIAL_WATCHER_VALUE?void 0:ei&&ri[0]===INITIAL_WATCHER_VALUE?[]:ri,Ln];Cn?Cn(e,3,vi):e(...vi),ri=ci}finally{activeWatcher=Pi}}}else En.run()};return We&&We(oi),En=new ReactiveEffect(Sn),En.scheduler=He?()=>He(oi,!1):oi,Ln=ai=>onWatcherCleanup(ai,!1,En),Tn=En.onStop=()=>{const ai=cleanupMap.get(En);if(ai){if(Cn)Cn(ai,4);else for(const ci of ai)ci();cleanupMap.delete(En)}},e?Oe?oi(!0):ri=En.run():He?He(oi.bind(null,!0),!0):En.run(),ti.pause=En.pause.bind(En),ti.resume=En.resume.bind(En),ti.stop=ti,ti}function traverse(ke,e=1/0,Te){if(e<=0||!isObject$1(ke)||ke.__v_skip||(Te=Te||new Set,Te.has(ke)))return ke;if(Te.add(ke),e--,isRef(ke))traverse(ke.value,e,Te);else if(isArray$1(ke))for(let Oe=0;Oe<ke.length;Oe++)traverse(ke[Oe],e,Te);else if(isSet(ke)||isMap(ke))ke.forEach(Oe=>{traverse(Oe,e,Te)});else if(isPlainObject$2(ke)){for(const Oe in ke)traverse(ke[Oe],e,Te);for(const Oe of Object.getOwnPropertySymbols(ke))Object.prototype.propertyIsEnumerable.call(ke,Oe)&&traverse(ke[Oe],e,Te)}return ke}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(ke){stack.push(ke)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(ke,...e){if(isWarning)return;isWarning=!0,pauseTracking();const Te=stack.length?stack[stack.length-1].component:null,Oe=Te&&Te.appContext.config.warnHandler,Be=getComponentTrace();if(Oe)callWithErrorHandling(Oe,Te,11,[ke+e.map(Ue=>{var He,We;return(We=(He=Ue.toString)==null?void 0:He.call(Ue))!=null?We:JSON.stringify(Ue)}).join(""),Te&&Te.proxy,Be.map(({vnode:Ue})=>`at <${formatComponentName(Te,Ue.type)}>`).join(`
`),Be]);else{const Ue=[`[Vue warn]: ${ke}`,...e];Be.length&&Ue.push(`
`,...formatTrace(Be)),console.warn(...Ue)}resetTracking(),isWarning=!1}function getComponentTrace(){let ke=stack[stack.length-1];if(!ke)return[];const e=[];for(;ke;){const Te=e[0];Te&&Te.vnode===ke?Te.recurseCount++:e.push({vnode:ke,recurseCount:0});const Oe=ke.component&&ke.component.parent;ke=Oe&&Oe.vnode}return e}function formatTrace(ke){const e=[];return ke.forEach((Te,Oe)=>{e.push(...Oe===0?[]:[`
`],...formatTraceEntry(Te))}),e}function formatTraceEntry({vnode:ke,recurseCount:e}){const Te=e>0?`... (${e} recursive calls)`:"",Oe=ke.component?ke.component.parent==null:!1,Be=` at <${formatComponentName(ke.component,ke.type,Oe)}`,Ue=">"+Te;return ke.props?[Be,...formatProps(ke.props),Ue]:[Be+Ue]}function formatProps(ke){const e=[],Te=Object.keys(ke);return Te.slice(0,3).forEach(Oe=>{e.push(...formatProp(Oe,ke[Oe]))}),Te.length>3&&e.push(" ..."),e}function formatProp(ke,e,Te){return isString(e)?(e=JSON.stringify(e),Te?e:[`${ke}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?Te?e:[`${ke}=${e}`]:isRef(e)?(e=formatProp(ke,toRaw(e.value),!0),Te?e:[`${ke}=Ref<`,e,">"]):isFunction(e)?[`${ke}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),Te?e:[`${ke}=`,e])}function assertNumber(ke,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(ke,e,Te,Oe){try{return Oe?ke(...Oe):ke()}catch(Be){handleError(Be,e,Te)}}function callWithAsyncErrorHandling(ke,e,Te,Oe){if(isFunction(ke)){const Be=callWithErrorHandling(ke,e,Te,Oe);return Be&&isPromise(Be)&&Be.catch(Ue=>{handleError(Ue,e,Te)}),Be}if(isArray$1(ke)){const Be=[];for(let Ue=0;Ue<ke.length;Ue++)Be.push(callWithAsyncErrorHandling(ke[Ue],e,Te,Oe));return Be}}function handleError(ke,e,Te,Oe=!0){const Be=e?e.vnode:null,{errorHandler:Ue,throwUnhandledErrorInProduction:He}=e&&e.appContext.config||EMPTY_OBJ;if(e){let We=e.parent;const Cn=e.proxy,An=`https://vuejs.org/error-reference/#runtime-${Te}`;for(;We;){const En=We.ec;if(En){for(let Sn=0;Sn<En.length;Sn++)if(En[Sn](ke,Cn,An)===!1)return}We=We.parent}if(Ue){pauseTracking(),callWithErrorHandling(Ue,null,10,[ke,Cn,An]),resetTracking();return}}logError(ke,Te,Be,Oe,He)}function logError(ke,e,Te,Oe=!0,Be=!1){if(Be)throw ke;console.error(ke)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(ke){const e=currentFlushPromise||resolvedPromise;return ke?e.then(this?ke.bind(this):ke):e}function findInsertionIndex$1(ke){let e=flushIndex+1,Te=queue.length;for(;e<Te;){const Oe=e+Te>>>1,Be=queue[Oe],Ue=getId(Be);Ue<ke||Ue===ke&&Be.flags&2?e=Oe+1:Te=Oe}return e}function queueJob(ke){if(!(ke.flags&1)){const e=getId(ke),Te=queue[queue.length-1];!Te||!(ke.flags&2)&&e>=getId(Te)?queue.push(ke):queue.splice(findInsertionIndex$1(e),0,ke),ke.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(ke){isArray$1(ke)?pendingPostFlushCbs.push(...ke):activePostFlushCbs&&ke.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,ke):ke.flags&1||(pendingPostFlushCbs.push(ke),ke.flags|=1),queueFlush()}function flushPreFlushCbs(ke,e,Te=flushIndex+1){for(;Te<queue.length;Te++){const Oe=queue[Te];if(Oe&&Oe.flags&2){if(ke&&Oe.id!==ke.uid)continue;queue.splice(Te,1),Te--,Oe.flags&4&&(Oe.flags&=-2),Oe(),Oe.flags&4||(Oe.flags&=-2)}}}function flushPostFlushCbs(ke){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((Te,Oe)=>getId(Te)-getId(Oe));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const Te=activePostFlushCbs[postFlushIndex];Te.flags&4&&(Te.flags&=-2),Te.flags&8||Te(),Te.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=ke=>ke.id==null?ke.flags&2?-1:1/0:ke.id;function flushJobs(ke){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(ke,e){var Te,Oe;devtools$1=ke,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:Be,args:Ue})=>devtools$1.emit(Be,...Ue)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((Oe=(Te=window.navigator)==null?void 0:Te.userAgent)!=null&&Oe.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Ue=>{setDevtoolsHook$1(Ue,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(ke){const e=currentRenderingInstance;return currentRenderingInstance=ke,currentScopeId=ke&&ke.type.__scopeId||null,e}function pushScopeId(ke){currentScopeId=ke}function popScopeId(){currentScopeId=null}const withScopeId=ke=>withCtx;function withCtx(ke,e=currentRenderingInstance,Te){if(!e||ke._n)return ke;const Oe=(...Be)=>{Oe._d&&setBlockTracking(-1);const Ue=setCurrentRenderingInstance(e);let He;try{He=ke(...Be)}finally{setCurrentRenderingInstance(Ue),Oe._d&&setBlockTracking(1)}return He};return Oe._n=!0,Oe._c=!0,Oe._d=!0,Oe}function withDirectives(ke,e){if(currentRenderingInstance===null)return ke;const Te=getComponentPublicInstance(currentRenderingInstance),Oe=ke.dirs||(ke.dirs=[]);for(let Be=0;Be<e.length;Be++){let[Ue,He,We,Cn=EMPTY_OBJ]=e[Be];Ue&&(isFunction(Ue)&&(Ue={mounted:Ue,updated:Ue}),Ue.deep&&traverse(He),Oe.push({dir:Ue,instance:Te,value:He,oldValue:void 0,arg:We,modifiers:Cn}))}return ke}function invokeDirectiveHook(ke,e,Te,Oe){const Be=ke.dirs,Ue=e&&e.dirs;for(let He=0;He<Be.length;He++){const We=Be[He];Ue&&(We.oldValue=Ue[He].value);let Cn=We.dir[Oe];Cn&&(pauseTracking(),callWithAsyncErrorHandling(Cn,Te,8,[ke.el,We,ke,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=ke=>ke.__isTeleport,isTeleportDisabled=ke=>ke&&(ke.disabled||ke.disabled===""),isTeleportDeferred=ke=>ke&&(ke.defer||ke.defer===""),isTargetSVG=ke=>typeof SVGElement<"u"&&ke instanceof SVGElement,isTargetMathML=ke=>typeof MathMLElement=="function"&&ke instanceof MathMLElement,resolveTarget=(ke,e)=>{const Te=ke&&ke.to;return isString(Te)?e?e(Te):null:Te},TeleportImpl={name:"Teleport",__isTeleport:!0,process(ke,e,Te,Oe,Be,Ue,He,We,Cn,An){const{mc:En,pc:Sn,pbc:Tn,o:{insert:Ln,querySelector:Bn,createText:ei,createComment:ni}}=An,ti=isTeleportDisabled(e.props);let{shapeFlag:ri,children:oi,dynamicChildren:ai}=e;if(ke==null){const ci=e.el=ei(""),Pi=e.anchor=ei("");Ln(ci,Te,Oe),Ln(Pi,Te,Oe);const vi=(Mi,Fi)=>{ri&16&&(Be&&Be.isCE&&(Be.ce._teleportTarget=Mi),En(oi,Mi,Fi,Be,Ue,He,We,Cn))},pi=()=>{const Mi=e.target=resolveTarget(e.props,Bn),Fi=prepareAnchor(Mi,e,ei,Ln);Mi&&(He!=="svg"&&isTargetSVG(Mi)?He="svg":He!=="mathml"&&isTargetMathML(Mi)&&(He="mathml"),ti||(vi(Mi,Fi),updateCssVars(e,!1)))};ti&&(vi(Te,Pi),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{pi(),e.el.__isMounted=!0},Ue):pi()}else{if(isTeleportDeferred(e.props)&&!ke.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(ke,e,Te,Oe,Be,Ue,He,We,Cn,An),delete ke.el.__isMounted},Ue);return}e.el=ke.el,e.targetStart=ke.targetStart;const ci=e.anchor=ke.anchor,Pi=e.target=ke.target,vi=e.targetAnchor=ke.targetAnchor,pi=isTeleportDisabled(ke.props),Mi=pi?Te:Pi,Fi=pi?ci:vi;if(He==="svg"||isTargetSVG(Pi)?He="svg":(He==="mathml"||isTargetMathML(Pi))&&(He="mathml"),ai?(Tn(ke.dynamicChildren,ai,Mi,Be,Ue,He,We),traverseStaticChildren(ke,e,!0)):Cn||Sn(ke,e,Mi,Fi,Be,Ue,He,We,!1),ti)pi?e.props&&ke.props&&e.props.to!==ke.props.to&&(e.props.to=ke.props.to):moveTeleport(e,Te,ci,An,1);else if((e.props&&e.props.to)!==(ke.props&&ke.props.to)){const fi=e.target=resolveTarget(e.props,Bn);fi&&moveTeleport(e,fi,null,An,0)}else pi&&moveTeleport(e,Pi,vi,An,1);updateCssVars(e,ti)}},remove(ke,e,Te,{um:Oe,o:{remove:Be}},Ue){const{shapeFlag:He,children:We,anchor:Cn,targetStart:An,targetAnchor:En,target:Sn,props:Tn}=ke;if(Sn&&(Be(An),Be(En)),Ue&&Be(Cn),He&16){const Ln=Ue||!isTeleportDisabled(Tn);for(let Bn=0;Bn<We.length;Bn++){const ei=We[Bn];Oe(ei,e,Te,Ln,!!ei.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(ke,e,Te,{o:{insert:Oe},m:Be},Ue=2){Ue===0&&Oe(ke.targetAnchor,e,Te);const{el:He,anchor:We,shapeFlag:Cn,children:An,props:En}=ke,Sn=Ue===2;if(Sn&&Oe(He,e,Te),(!Sn||isTeleportDisabled(En))&&Cn&16)for(let Tn=0;Tn<An.length;Tn++)Be(An[Tn],e,Te,2);Sn&&Oe(We,e,Te)}function hydrateTeleport(ke,e,Te,Oe,Be,Ue,{o:{nextSibling:He,parentNode:We,querySelector:Cn,insert:An,createText:En}},Sn){const Tn=e.target=resolveTarget(e.props,Cn);if(Tn){const Ln=isTeleportDisabled(e.props),Bn=Tn._lpa||Tn.firstChild;if(e.shapeFlag&16)if(Ln)e.anchor=Sn(He(ke),e,We(ke),Te,Oe,Be,Ue),e.targetStart=Bn,e.targetAnchor=Bn&&He(Bn);else{e.anchor=He(ke);let ei=Bn;for(;ei;){if(ei&&ei.nodeType===8){if(ei.data==="teleport start anchor")e.targetStart=ei;else if(ei.data==="teleport anchor"){e.targetAnchor=ei,Tn._lpa=e.targetAnchor&&He(e.targetAnchor);break}}ei=He(ei)}e.targetAnchor||prepareAnchor(Tn,e,En,An),Sn(Bn&&He(Bn),e,Tn,Te,Oe,Be,Ue)}updateCssVars(e,Ln)}return e.anchor&&He(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(ke,e){const Te=ke.ctx;if(Te&&Te.ut){let Oe,Be;for(e?(Oe=ke.el,Be=ke.anchor):(Oe=ke.targetStart,Be=ke.targetAnchor);Oe&&Oe!==Be;)Oe.nodeType===1&&Oe.setAttribute("data-v-owner",Te.uid),Oe=Oe.nextSibling;Te.ut()}}function prepareAnchor(ke,e,Te,Oe){const Be=e.targetStart=Te(""),Ue=e.targetAnchor=Te("");return Be[TeleportEndKey]=Ue,ke&&(Oe(Be,ke),Oe(Ue,ke)),Ue}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const ke={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{ke.isMounted=!0}),onBeforeUnmount(()=>{ke.isUnmounting=!0}),ke}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=ke=>{const e=ke.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(ke,{slots:e}){const Te=getCurrentInstance(),Oe=useTransitionState();return()=>{const Be=e.default&&getTransitionRawChildren(e.default(),!0);if(!Be||!Be.length)return;const Ue=findNonCommentChild(Be),He=toRaw(ke),{mode:We}=He;if(Oe.isLeaving)return emptyPlaceholder(Ue);const Cn=getInnerChild$1(Ue);if(!Cn)return emptyPlaceholder(Ue);let An=resolveTransitionHooks(Cn,He,Oe,Te,Sn=>An=Sn);Cn.type!==Comment&&setTransitionHooks(Cn,An);let En=Te.subTree&&getInnerChild$1(Te.subTree);if(En&&En.type!==Comment&&!isSameVNodeType(Cn,En)&&recursiveGetSubtree(Te).type!==Comment){let Sn=resolveTransitionHooks(En,He,Oe,Te);if(setTransitionHooks(En,Sn),We==="out-in"&&Cn.type!==Comment)return Oe.isLeaving=!0,Sn.afterLeave=()=>{Oe.isLeaving=!1,Te.job.flags&8||Te.update(),delete Sn.afterLeave,En=void 0},emptyPlaceholder(Ue);We==="in-out"&&Cn.type!==Comment?Sn.delayLeave=(Tn,Ln,Bn)=>{const ei=getLeavingNodesForType(Oe,En);ei[String(En.key)]=En,Tn[leaveCbKey]=()=>{Ln(),Tn[leaveCbKey]=void 0,delete An.delayedLeave,En=void 0},An.delayedLeave=()=>{Bn(),delete An.delayedLeave,En=void 0}}:En=void 0}else En&&(En=void 0);return Ue}}};function findNonCommentChild(ke){let e=ke[0];if(ke.length>1){for(const Te of ke)if(Te.type!==Comment){e=Te;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(ke,e){const{leavingVNodes:Te}=ke;let Oe=Te.get(e.type);return Oe||(Oe=Object.create(null),Te.set(e.type,Oe)),Oe}function resolveTransitionHooks(ke,e,Te,Oe,Be){const{appear:Ue,mode:He,persisted:We=!1,onBeforeEnter:Cn,onEnter:An,onAfterEnter:En,onEnterCancelled:Sn,onBeforeLeave:Tn,onLeave:Ln,onAfterLeave:Bn,onLeaveCancelled:ei,onBeforeAppear:ni,onAppear:ti,onAfterAppear:ri,onAppearCancelled:oi}=e,ai=String(ke.key),ci=getLeavingNodesForType(Te,ke),Pi=(Mi,Fi)=>{Mi&&callWithAsyncErrorHandling(Mi,Oe,9,Fi)},vi=(Mi,Fi)=>{const fi=Fi[1];Pi(Mi,Fi),isArray$1(Mi)?Mi.every(ui=>ui.length<=1)&&fi():Mi.length<=1&&fi()},pi={mode:He,persisted:We,beforeEnter(Mi){let Fi=Cn;if(!Te.isMounted)if(Ue)Fi=ni||Cn;else return;Mi[leaveCbKey]&&Mi[leaveCbKey](!0);const fi=ci[ai];fi&&isSameVNodeType(ke,fi)&&fi.el[leaveCbKey]&&fi.el[leaveCbKey](),Pi(Fi,[Mi])},enter(Mi){let Fi=An,fi=En,ui=Sn;if(!Te.isMounted)if(Ue)Fi=ti||An,fi=ri||En,ui=oi||Sn;else return;let Oi=!1;const Ni=Mi[enterCbKey$1]=nr=>{Oi||(Oi=!0,nr?Pi(ui,[Mi]):Pi(fi,[Mi]),pi.delayedLeave&&pi.delayedLeave(),Mi[enterCbKey$1]=void 0)};Fi?vi(Fi,[Mi,Ni]):Ni()},leave(Mi,Fi){const fi=String(ke.key);if(Mi[enterCbKey$1]&&Mi[enterCbKey$1](!0),Te.isUnmounting)return Fi();Pi(Tn,[Mi]);let ui=!1;const Oi=Mi[leaveCbKey]=Ni=>{ui||(ui=!0,Fi(),Ni?Pi(ei,[Mi]):Pi(Bn,[Mi]),Mi[leaveCbKey]=void 0,ci[fi]===ke&&delete ci[fi])};ci[fi]=ke,Ln?vi(Ln,[Mi,Oi]):Oi()},clone(Mi){const Fi=resolveTransitionHooks(Mi,e,Te,Oe,Be);return Be&&Be(Fi),Fi}};return pi}function emptyPlaceholder(ke){if(isKeepAlive(ke))return ke=cloneVNode(ke),ke.children=null,ke}function getInnerChild$1(ke){if(!isKeepAlive(ke))return isTeleport(ke.type)&&ke.children?findNonCommentChild(ke.children):ke;const{shapeFlag:e,children:Te}=ke;if(Te){if(e&16)return Te[0];if(e&32&&isFunction(Te.default))return Te.default()}}function setTransitionHooks(ke,e){ke.shapeFlag&6&&ke.component?(ke.transition=e,setTransitionHooks(ke.component.subTree,e)):ke.shapeFlag&128?(ke.ssContent.transition=e.clone(ke.ssContent),ke.ssFallback.transition=e.clone(ke.ssFallback)):ke.transition=e}function getTransitionRawChildren(ke,e=!1,Te){let Oe=[],Be=0;for(let Ue=0;Ue<ke.length;Ue++){let He=ke[Ue];const We=Te==null?He.key:String(Te)+String(He.key!=null?He.key:Ue);He.type===Fragment?(He.patchFlag&128&&Be++,Oe=Oe.concat(getTransitionRawChildren(He.children,e,We))):(e||He.type!==Comment)&&Oe.push(We!=null?cloneVNode(He,{key:We}):He)}if(Be>1)for(let Ue=0;Ue<Oe.length;Ue++)Oe[Ue].patchFlag=-2;return Oe}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(ke,e){return isFunction(ke)?extend$5({name:ke.name},e,{setup:ke}):ke}function useId(){const ke=getCurrentInstance();return ke?(ke.appContext.config.idPrefix||"v")+"-"+ke.ids[0]+ke.ids[1]++:""}function markAsyncBoundary(ke){ke.ids=[ke.ids[0]+ke.ids[2]+++"-",0,0]}function useTemplateRef(ke){const e=getCurrentInstance(),Te=shallowRef(null);if(e){const Be=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(Be,ke,{enumerable:!0,get:()=>Te.value,set:Ue=>Te.value=Ue})}return Te}function setRef(ke,e,Te,Oe,Be=!1){if(isArray$1(ke)){ke.forEach((Bn,ei)=>setRef(Bn,e&&(isArray$1(e)?e[ei]:e),Te,Oe,Be));return}if(isAsyncWrapper(Oe)&&!Be){Oe.shapeFlag&512&&Oe.type.__asyncResolved&&Oe.component.subTree.component&&setRef(ke,e,Te,Oe.component.subTree);return}const Ue=Oe.shapeFlag&4?getComponentPublicInstance(Oe.component):Oe.el,He=Be?null:Ue,{i:We,r:Cn}=ke,An=e&&e.r,En=We.refs===EMPTY_OBJ?We.refs={}:We.refs,Sn=We.setupState,Tn=toRaw(Sn),Ln=Sn===EMPTY_OBJ?()=>!1:Bn=>hasOwn(Tn,Bn);if(An!=null&&An!==Cn&&(isString(An)?(En[An]=null,Ln(An)&&(Sn[An]=null)):isRef(An)&&(An.value=null)),isFunction(Cn))callWithErrorHandling(Cn,We,12,[He,En]);else{const Bn=isString(Cn),ei=isRef(Cn);if(Bn||ei){const ni=()=>{if(ke.f){const ti=Bn?Ln(Cn)?Sn[Cn]:En[Cn]:Cn.value;Be?isArray$1(ti)&&remove(ti,Ue):isArray$1(ti)?ti.includes(Ue)||ti.push(Ue):Bn?(En[Cn]=[Ue],Ln(Cn)&&(Sn[Cn]=En[Cn])):(Cn.value=[Ue],ke.k&&(En[ke.k]=Cn.value))}else Bn?(En[Cn]=He,Ln(Cn)&&(Sn[Cn]=He)):ei&&(Cn.value=He,ke.k&&(En[ke.k]=He))};He?(ni.id=-1,queuePostRenderEffect(ni,Te)):ni()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=ke=>ke.namespaceURI.includes("svg")&&ke.tagName!=="foreignObject",isMathMLContainer=ke=>ke.namespaceURI.includes("MathML"),getContainerType=ke=>{if(ke.nodeType===1){if(isSVGContainer(ke))return"svg";if(isMathMLContainer(ke))return"mathml"}},isComment=ke=>ke.nodeType===8;function createHydrationFunctions(ke){const{mt:e,p:Te,o:{patchProp:Oe,createText:Be,nextSibling:Ue,parentNode:He,remove:We,insert:Cn,createComment:An}}=ke,En=(oi,ai)=>{if(!ai.hasChildNodes()){Te(null,oi,ai),flushPostFlushCbs(),ai._vnode=oi;return}Sn(ai.firstChild,oi,null,null,null),flushPostFlushCbs(),ai._vnode=oi},Sn=(oi,ai,ci,Pi,vi,pi=!1)=>{pi=pi||!!ai.dynamicChildren;const Mi=isComment(oi)&&oi.data==="[",Fi=()=>ei(oi,ai,ci,Pi,vi,Mi),{type:fi,ref:ui,shapeFlag:Oi,patchFlag:Ni}=ai;let nr=oi.nodeType;ai.el=oi,Ni===-2&&(pi=!1,ai.dynamicChildren=null);let er=null;switch(fi){case Text$1:nr!==3?ai.children===""?(Cn(ai.el=Be(""),He(oi),oi),er=oi):er=Fi():(oi.data!==ai.children&&(logMismatchError(),oi.data=ai.children),er=Ue(oi));break;case Comment:ri(oi)?(er=Ue(oi),ti(ai.el=oi.content.firstChild,oi,ci)):nr!==8||Mi?er=Fi():er=Ue(oi);break;case Static:if(Mi&&(oi=Ue(oi),nr=oi.nodeType),nr===1||nr===3){er=oi;const cr=!ai.children.length;for(let ar=0;ar<ai.staticCount;ar++)cr&&(ai.children+=er.nodeType===1?er.outerHTML:er.data),ar===ai.staticCount-1&&(ai.anchor=er),er=Ue(er);return Mi?Ue(er):er}else Fi();break;case Fragment:Mi?er=Bn(oi,ai,ci,Pi,vi,pi):er=Fi();break;default:if(Oi&1)(nr!==1||ai.type.toLowerCase()!==oi.tagName.toLowerCase())&&!ri(oi)?er=Fi():er=Tn(oi,ai,ci,Pi,vi,pi);else if(Oi&6){ai.slotScopeIds=vi;const cr=He(oi);if(Mi?er=ni(oi):isComment(oi)&&oi.data==="teleport start"?er=ni(oi,oi.data,"teleport end"):er=Ue(oi),e(ai,cr,null,ci,Pi,getContainerType(cr),pi),isAsyncWrapper(ai)&&!ai.type.__asyncResolved){let ar;Mi?(ar=createVNode(Fragment),ar.anchor=er?er.previousSibling:cr.lastChild):ar=oi.nodeType===3?createTextVNode(""):createVNode("div"),ar.el=oi,ai.component.subTree=ar}}else Oi&64?nr!==8?er=Fi():er=ai.type.hydrate(oi,ai,ci,Pi,vi,pi,ke,Ln):Oi&128&&(er=ai.type.hydrate(oi,ai,ci,Pi,getContainerType(He(oi)),vi,pi,ke,Sn))}return ui!=null&&setRef(ui,null,Pi,ai),er},Tn=(oi,ai,ci,Pi,vi,pi)=>{pi=pi||!!ai.dynamicChildren;const{type:Mi,props:Fi,patchFlag:fi,shapeFlag:ui,dirs:Oi,transition:Ni}=ai,nr=Mi==="input"||Mi==="option";if(nr||fi!==-1){Oi&&invokeDirectiveHook(ai,null,ci,"created");let er=!1;if(ri(oi)){er=needTransition(null,Ni)&&ci&&ci.vnode.props&&ci.vnode.props.appear;const ar=oi.content.firstChild;er&&Ni.beforeEnter(ar),ti(ar,oi,ci),ai.el=oi=ar}if(ui&16&&!(Fi&&(Fi.innerHTML||Fi.textContent))){let ar=Ln(oi.firstChild,ai,oi,ci,Pi,vi,pi);for(;ar;){isMismatchAllowed(oi,1)||logMismatchError();const pr=ar;ar=ar.nextSibling,We(pr)}}else if(ui&8){let ar=ai.children;ar[0]===`
`&&(oi.tagName==="PRE"||oi.tagName==="TEXTAREA")&&(ar=ar.slice(1)),oi.textContent!==ar&&(isMismatchAllowed(oi,0)||logMismatchError(),oi.textContent=ai.children)}if(Fi){if(nr||!pi||fi&48){const ar=oi.tagName.includes("-");for(const pr in Fi)(nr&&(pr.endsWith("value")||pr==="indeterminate")||isOn(pr)&&!isReservedProp(pr)||pr[0]==="."||ar)&&Oe(oi,pr,null,Fi[pr],void 0,ci)}else if(Fi.onClick)Oe(oi,"onClick",null,Fi.onClick,void 0,ci);else if(fi&4&&isReactive(Fi.style))for(const ar in Fi.style)Fi.style[ar]}let cr;(cr=Fi&&Fi.onVnodeBeforeMount)&&invokeVNodeHook(cr,ci,ai),Oi&&invokeDirectiveHook(ai,null,ci,"beforeMount"),((cr=Fi&&Fi.onVnodeMounted)||Oi||er)&&queueEffectWithSuspense(()=>{cr&&invokeVNodeHook(cr,ci,ai),er&&Ni.enter(oi),Oi&&invokeDirectiveHook(ai,null,ci,"mounted")},Pi)}return oi.nextSibling},Ln=(oi,ai,ci,Pi,vi,pi,Mi)=>{Mi=Mi||!!ai.dynamicChildren;const Fi=ai.children,fi=Fi.length;for(let ui=0;ui<fi;ui++){const Oi=Mi?Fi[ui]:Fi[ui]=normalizeVNode(Fi[ui]),Ni=Oi.type===Text$1;oi?(Ni&&!Mi&&ui+1<fi&&normalizeVNode(Fi[ui+1]).type===Text$1&&(Cn(Be(oi.data.slice(Oi.children.length)),ci,Ue(oi)),oi.data=Oi.children),oi=Sn(oi,Oi,Pi,vi,pi,Mi)):Ni&&!Oi.children?Cn(Oi.el=Be(""),ci):(isMismatchAllowed(ci,1)||logMismatchError(),Te(null,Oi,ci,null,Pi,vi,getContainerType(ci),pi))}return oi},Bn=(oi,ai,ci,Pi,vi,pi)=>{const{slotScopeIds:Mi}=ai;Mi&&(vi=vi?vi.concat(Mi):Mi);const Fi=He(oi),fi=Ln(Ue(oi),ai,Fi,ci,Pi,vi,pi);return fi&&isComment(fi)&&fi.data==="]"?Ue(ai.anchor=fi):(logMismatchError(),Cn(ai.anchor=An("]"),Fi,fi),fi)},ei=(oi,ai,ci,Pi,vi,pi)=>{if(isMismatchAllowed(oi.parentElement,1)||logMismatchError(),ai.el=null,pi){const fi=ni(oi);for(;;){const ui=Ue(oi);if(ui&&ui!==fi)We(ui);else break}}const Mi=Ue(oi),Fi=He(oi);return We(oi),Te(null,ai,Fi,Mi,ci,Pi,getContainerType(Fi),vi),ci&&(ci.vnode.el=ai.el,updateHOCHostEl(ci,ai.el)),Mi},ni=(oi,ai="[",ci="]")=>{let Pi=0;for(;oi;)if(oi=Ue(oi),oi&&isComment(oi)&&(oi.data===ai&&Pi++,oi.data===ci)){if(Pi===0)return Ue(oi);Pi--}return oi},ti=(oi,ai,ci)=>{const Pi=ai.parentNode;Pi&&Pi.replaceChild(oi,ai);let vi=ci;for(;vi;)vi.vnode.el===ai&&(vi.vnode.el=vi.subTree.el=oi),vi=vi.parent},ri=oi=>oi.nodeType===1&&oi.tagName==="TEMPLATE";return[En,Sn]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(ke,e){if(e===0||e===1)for(;ke&&!ke.hasAttribute(allowMismatchAttr);)ke=ke.parentElement;const Te=ke&&ke.getAttribute(allowMismatchAttr);if(Te==null)return!1;if(Te==="")return!0;{const Oe=Te.split(",");return e===0&&Oe.includes("children")?!0:Te.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(ke=>setTimeout(ke,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(ke=>clearTimeout(ke)),hydrateOnIdle=(ke=1e4)=>e=>{const Te=requestIdleCallback(e,{timeout:ke});return()=>cancelIdleCallback(Te)};function elementIsVisibleInViewport(ke){const{top:e,left:Te,bottom:Oe,right:Be}=ke.getBoundingClientRect(),{innerHeight:Ue,innerWidth:He}=window;return(e>0&&e<Ue||Oe>0&&Oe<Ue)&&(Te>0&&Te<He||Be>0&&Be<He)}const hydrateOnVisible=ke=>(e,Te)=>{const Oe=new IntersectionObserver(Be=>{for(const Ue of Be)if(Ue.isIntersecting){Oe.disconnect(),e();break}},ke);return Te(Be=>{if(Be instanceof Element){if(elementIsVisibleInViewport(Be))return e(),Oe.disconnect(),!1;Oe.observe(Be)}}),()=>Oe.disconnect()},hydrateOnMediaQuery=ke=>e=>{if(ke){const Te=matchMedia(ke);if(Te.matches)e();else return Te.addEventListener("change",e,{once:!0}),()=>Te.removeEventListener("change",e)}},hydrateOnInteraction=(ke=[])=>(e,Te)=>{isString(ke)&&(ke=[ke]);let Oe=!1;const Be=He=>{Oe||(Oe=!0,Ue(),e(),He.target.dispatchEvent(new He.constructor(He.type,He)))},Ue=()=>{Te(He=>{for(const We of ke)He.removeEventListener(We,Be)})};return Te(He=>{for(const We of ke)He.addEventListener(We,Be,{once:!0})}),Ue};function forEachElement(ke,e){if(isComment(ke)&&ke.data==="["){let Te=1,Oe=ke.nextSibling;for(;Oe;){if(Oe.nodeType===1){if(e(Oe)===!1)break}else if(isComment(Oe))if(Oe.data==="]"){if(--Te===0)break}else Oe.data==="["&&Te++;Oe=Oe.nextSibling}}else e(ke)}const isAsyncWrapper=ke=>!!ke.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(ke){isFunction(ke)&&(ke={loader:ke});const{loader:e,loadingComponent:Te,errorComponent:Oe,delay:Be=200,hydrate:Ue,timeout:He,suspensible:We=!0,onError:Cn}=ke;let An=null,En,Sn=0;const Tn=()=>(Sn++,An=null,Ln()),Ln=()=>{let Bn;return An||(Bn=An=e().catch(ei=>{if(ei=ei instanceof Error?ei:new Error(String(ei)),Cn)return new Promise((ni,ti)=>{Cn(ei,()=>ni(Tn()),()=>ti(ei),Sn+1)});throw ei}).then(ei=>Bn!==An&&An?An:(ei&&(ei.__esModule||ei[Symbol.toStringTag]==="Module")&&(ei=ei.default),En=ei,ei)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:Ln,__asyncHydrate(Bn,ei,ni){const ti=Ue?()=>{const ri=Ue(ni,oi=>forEachElement(Bn,oi));ri&&(ei.bum||(ei.bum=[])).push(ri)}:ni;En?ti():Ln().then(()=>!ei.isUnmounted&&ti())},get __asyncResolved(){return En},setup(){const Bn=currentInstance;if(markAsyncBoundary(Bn),En)return()=>createInnerComp(En,Bn);const ei=oi=>{An=null,handleError(oi,Bn,13,!Oe)};if(We&&Bn.suspense||isInSSRComponentSetup)return Ln().then(oi=>()=>createInnerComp(oi,Bn)).catch(oi=>(ei(oi),()=>Oe?createVNode(Oe,{error:oi}):null));const ni=ref(!1),ti=ref(),ri=ref(!!Be);return Be&&setTimeout(()=>{ri.value=!1},Be),He!=null&&setTimeout(()=>{if(!ni.value&&!ti.value){const oi=new Error(`Async component timed out after ${He}ms.`);ei(oi),ti.value=oi}},He),Ln().then(()=>{ni.value=!0,Bn.parent&&isKeepAlive(Bn.parent.vnode)&&Bn.parent.update()}).catch(oi=>{ei(oi),ti.value=oi}),()=>{if(ni.value&&En)return createInnerComp(En,Bn);if(ti.value&&Oe)return createVNode(Oe,{error:ti.value});if(Te&&!ri.value)return createVNode(Te)}}})}function createInnerComp(ke,e){const{ref:Te,props:Oe,children:Be,ce:Ue}=e.vnode,He=createVNode(ke,Oe,Be);return He.ref=Te,He.ce=Ue,delete e.vnode.ce,He}const isKeepAlive=ke=>ke.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(ke,{slots:e}){const Te=getCurrentInstance(),Oe=Te.ctx;if(!Oe.renderer)return()=>{const ri=e.default&&e.default();return ri&&ri.length===1?ri[0]:ri};const Be=new Map,Ue=new Set;let He=null;const We=Te.suspense,{renderer:{p:Cn,m:An,um:En,o:{createElement:Sn}}}=Oe,Tn=Sn("div");Oe.activate=(ri,oi,ai,ci,Pi)=>{const vi=ri.component;An(ri,oi,ai,0,We),Cn(vi.vnode,ri,oi,ai,vi,We,ci,ri.slotScopeIds,Pi),queuePostRenderEffect(()=>{vi.isDeactivated=!1,vi.a&&invokeArrayFns(vi.a);const pi=ri.props&&ri.props.onVnodeMounted;pi&&invokeVNodeHook(pi,vi.parent,ri)},We)},Oe.deactivate=ri=>{const oi=ri.component;invalidateMount(oi.m),invalidateMount(oi.a),An(ri,Tn,null,1,We),queuePostRenderEffect(()=>{oi.da&&invokeArrayFns(oi.da);const ai=ri.props&&ri.props.onVnodeUnmounted;ai&&invokeVNodeHook(ai,oi.parent,ri),oi.isDeactivated=!0},We)};function Ln(ri){resetShapeFlag(ri),En(ri,Te,We,!0)}function Bn(ri){Be.forEach((oi,ai)=>{const ci=getComponentName(oi.type);ci&&!ri(ci)&&ei(ai)})}function ei(ri){const oi=Be.get(ri);oi&&(!He||!isSameVNodeType(oi,He))?Ln(oi):He&&resetShapeFlag(He),Be.delete(ri),Ue.delete(ri)}watch(()=>[ke.include,ke.exclude],([ri,oi])=>{ri&&Bn(ai=>matches$1(ri,ai)),oi&&Bn(ai=>!matches$1(oi,ai))},{flush:"post",deep:!0});let ni=null;const ti=()=>{ni!=null&&(isSuspense(Te.subTree.type)?queuePostRenderEffect(()=>{Be.set(ni,getInnerChild(Te.subTree))},Te.subTree.suspense):Be.set(ni,getInnerChild(Te.subTree)))};return onMounted(ti),onUpdated(ti),onBeforeUnmount(()=>{Be.forEach(ri=>{const{subTree:oi,suspense:ai}=Te,ci=getInnerChild(oi);if(ri.type===ci.type&&ri.key===ci.key){resetShapeFlag(ci);const Pi=ci.component.da;Pi&&queuePostRenderEffect(Pi,ai);return}Ln(ri)})}),()=>{if(ni=null,!e.default)return He=null;const ri=e.default(),oi=ri[0];if(ri.length>1)return He=null,ri;if(!isVNode(oi)||!(oi.shapeFlag&4)&&!(oi.shapeFlag&128))return He=null,oi;let ai=getInnerChild(oi);if(ai.type===Comment)return He=null,ai;const ci=ai.type,Pi=getComponentName(isAsyncWrapper(ai)?ai.type.__asyncResolved||{}:ci),{include:vi,exclude:pi,max:Mi}=ke;if(vi&&(!Pi||!matches$1(vi,Pi))||pi&&Pi&&matches$1(pi,Pi))return ai.shapeFlag&=-257,He=ai,oi;const Fi=ai.key==null?ci:ai.key,fi=Be.get(Fi);return ai.el&&(ai=cloneVNode(ai),oi.shapeFlag&128&&(oi.ssContent=ai)),ni=Fi,fi?(ai.el=fi.el,ai.component=fi.component,ai.transition&&setTransitionHooks(ai,ai.transition),ai.shapeFlag|=512,Ue.delete(Fi),Ue.add(Fi)):(Ue.add(Fi),Mi&&Ue.size>parseInt(Mi,10)&&ei(Ue.values().next().value)),ai.shapeFlag|=256,He=ai,isSuspense(oi.type)?oi:ai}}},KeepAlive=KeepAliveImpl;function matches$1(ke,e){return isArray$1(ke)?ke.some(Te=>matches$1(Te,e)):isString(ke)?ke.split(",").includes(e):isRegExp(ke)?(ke.lastIndex=0,ke.test(e)):!1}function onActivated(ke,e){registerKeepAliveHook(ke,"a",e)}function onDeactivated(ke,e){registerKeepAliveHook(ke,"da",e)}function registerKeepAliveHook(ke,e,Te=currentInstance){const Oe=ke.__wdc||(ke.__wdc=()=>{let Be=Te;for(;Be;){if(Be.isDeactivated)return;Be=Be.parent}return ke()});if(injectHook(e,Oe,Te),Te){let Be=Te.parent;for(;Be&&Be.parent;)isKeepAlive(Be.parent.vnode)&&injectToKeepAliveRoot(Oe,e,Te,Be),Be=Be.parent}}function injectToKeepAliveRoot(ke,e,Te,Oe){const Be=injectHook(e,ke,Oe,!0);onUnmounted(()=>{remove(Oe[e],Be)},Te)}function resetShapeFlag(ke){ke.shapeFlag&=-257,ke.shapeFlag&=-513}function getInnerChild(ke){return ke.shapeFlag&128?ke.ssContent:ke}function injectHook(ke,e,Te=currentInstance,Oe=!1){if(Te){const Be=Te[ke]||(Te[ke]=[]),Ue=e.__weh||(e.__weh=(...He)=>{pauseTracking();const We=setCurrentInstance(Te),Cn=callWithAsyncErrorHandling(e,Te,ke,He);return We(),resetTracking(),Cn});return Oe?Be.unshift(Ue):Be.push(Ue),Ue}}const createHook=ke=>(e,Te=currentInstance)=>{(!isInSSRComponentSetup||ke==="sp")&&injectHook(ke,(...Oe)=>e(...Oe),Te)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(ke,e=currentInstance){injectHook("ec",ke,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(ke,e){return resolveAsset(COMPONENTS,ke,!0,e)||ke}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(ke){return isString(ke)?resolveAsset(COMPONENTS,ke,!1)||ke:ke||NULL_DYNAMIC_COMPONENT}function resolveDirective(ke){return resolveAsset(DIRECTIVES,ke)}function resolveAsset(ke,e,Te=!0,Oe=!1){const Be=currentRenderingInstance||currentInstance;if(Be){const Ue=Be.type;if(ke===COMPONENTS){const We=getComponentName(Ue,!1);if(We&&(We===e||We===camelize(e)||We===capitalize(camelize(e))))return Ue}const He=resolve(Be[ke]||Ue[ke],e)||resolve(Be.appContext[ke],e);return!He&&Oe?Ue:He}}function resolve(ke,e){return ke&&(ke[e]||ke[camelize(e)]||ke[capitalize(camelize(e))])}function renderList(ke,e,Te,Oe){let Be;const Ue=Te&&Te[Oe],He=isArray$1(ke);if(He||isString(ke)){const We=He&&isReactive(ke);let Cn=!1;We&&(Cn=!isShallow(ke),ke=shallowReadArray(ke)),Be=new Array(ke.length);for(let An=0,En=ke.length;An<En;An++)Be[An]=e(Cn?toReactive(ke[An]):ke[An],An,void 0,Ue&&Ue[An])}else if(typeof ke=="number"){Be=new Array(ke);for(let We=0;We<ke;We++)Be[We]=e(We+1,We,void 0,Ue&&Ue[We])}else if(isObject$1(ke))if(ke[Symbol.iterator])Be=Array.from(ke,(We,Cn)=>e(We,Cn,void 0,Ue&&Ue[Cn]));else{const We=Object.keys(ke);Be=new Array(We.length);for(let Cn=0,An=We.length;Cn<An;Cn++){const En=We[Cn];Be[Cn]=e(ke[En],En,Cn,Ue&&Ue[Cn])}}else Be=[];return Te&&(Te[Oe]=Be),Be}function createSlots(ke,e){for(let Te=0;Te<e.length;Te++){const Oe=e[Te];if(isArray$1(Oe))for(let Be=0;Be<Oe.length;Be++)ke[Oe[Be].name]=Oe[Be].fn;else Oe&&(ke[Oe.name]=Oe.key?(...Be)=>{const Ue=Oe.fn(...Be);return Ue&&(Ue.key=Oe.key),Ue}:Oe.fn)}return ke}function renderSlot(ke,e,Te={},Oe,Be){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(Te.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",Te,Oe&&Oe())],64);let Ue=ke[e];Ue&&Ue._c&&(Ue._d=!1),openBlock();const He=Ue&&ensureValidVNode(Ue(Te)),We=Te.key||He&&He.key,Cn=createBlock(Fragment,{key:(We&&!isSymbol(We)?We:`_${e}`)+(!He&&Oe?"_fb":"")},He||(Oe?Oe():[]),He&&ke._===1?64:-2);return!Be&&Cn.scopeId&&(Cn.slotScopeIds=[Cn.scopeId+"-s"]),Ue&&Ue._c&&(Ue._d=!0),Cn}function ensureValidVNode(ke){return ke.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?ke:null}function toHandlers(ke,e){const Te={};for(const Oe in ke)Te[e&&/[A-Z]/.test(Oe)?`on:${Oe}`:toHandlerKey(Oe)]=ke[Oe];return Te}const getPublicInstance=ke=>ke?isStatefulComponent(ke)?getComponentPublicInstance(ke):getPublicInstance(ke.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:ke=>ke,$el:ke=>ke.vnode.el,$data:ke=>ke.data,$props:ke=>ke.props,$attrs:ke=>ke.attrs,$slots:ke=>ke.slots,$refs:ke=>ke.refs,$parent:ke=>getPublicInstance(ke.parent),$root:ke=>getPublicInstance(ke.root),$host:ke=>ke.ce,$emit:ke=>ke.emit,$options:ke=>resolveMergedOptions(ke),$forceUpdate:ke=>ke.f||(ke.f=()=>{queueJob(ke.update)}),$nextTick:ke=>ke.n||(ke.n=nextTick.bind(ke.proxy)),$watch:ke=>instanceWatch.bind(ke)}),hasSetupBinding=(ke,e)=>ke!==EMPTY_OBJ&&!ke.__isScriptSetup&&hasOwn(ke,e),PublicInstanceProxyHandlers={get({_:ke},e){if(e==="__v_skip")return!0;const{ctx:Te,setupState:Oe,data:Be,props:Ue,accessCache:He,type:We,appContext:Cn}=ke;let An;if(e[0]!=="$"){const Ln=He[e];if(Ln!==void 0)switch(Ln){case 1:return Oe[e];case 2:return Be[e];case 4:return Te[e];case 3:return Ue[e]}else{if(hasSetupBinding(Oe,e))return He[e]=1,Oe[e];if(Be!==EMPTY_OBJ&&hasOwn(Be,e))return He[e]=2,Be[e];if((An=ke.propsOptions[0])&&hasOwn(An,e))return He[e]=3,Ue[e];if(Te!==EMPTY_OBJ&&hasOwn(Te,e))return He[e]=4,Te[e];shouldCacheAccess&&(He[e]=0)}}const En=publicPropertiesMap[e];let Sn,Tn;if(En)return e==="$attrs"&&track(ke.attrs,"get",""),En(ke);if((Sn=We.__cssModules)&&(Sn=Sn[e]))return Sn;if(Te!==EMPTY_OBJ&&hasOwn(Te,e))return He[e]=4,Te[e];if(Tn=Cn.config.globalProperties,hasOwn(Tn,e))return Tn[e]},set({_:ke},e,Te){const{data:Oe,setupState:Be,ctx:Ue}=ke;return hasSetupBinding(Be,e)?(Be[e]=Te,!0):Oe!==EMPTY_OBJ&&hasOwn(Oe,e)?(Oe[e]=Te,!0):hasOwn(ke.props,e)||e[0]==="$"&&e.slice(1)in ke?!1:(Ue[e]=Te,!0)},has({_:{data:ke,setupState:e,accessCache:Te,ctx:Oe,appContext:Be,propsOptions:Ue}},He){let We;return!!Te[He]||ke!==EMPTY_OBJ&&hasOwn(ke,He)||hasSetupBinding(e,He)||(We=Ue[0])&&hasOwn(We,He)||hasOwn(Oe,He)||hasOwn(publicPropertiesMap,He)||hasOwn(Be.config.globalProperties,He)},defineProperty(ke,e,Te){return Te.get!=null?ke._.accessCache[e]=0:hasOwn(Te,"value")&&this.set(ke,e,Te.value,null),Reflect.defineProperty(ke,e,Te)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(ke,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(ke,e,ke)},has(ke,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(ke){}function defineOptions(ke){}function defineSlots(){return null}function defineModel(){}function withDefaults(ke,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const ke=getCurrentInstance();return ke.setupContext||(ke.setupContext=createSetupContext(ke))}function normalizePropsOrEmits(ke){return isArray$1(ke)?ke.reduce((e,Te)=>(e[Te]=null,e),{}):ke}function mergeDefaults(ke,e){const Te=normalizePropsOrEmits(ke);for(const Oe in e){if(Oe.startsWith("__skip"))continue;let Be=Te[Oe];Be?isArray$1(Be)||isFunction(Be)?Be=Te[Oe]={type:Be,default:e[Oe]}:Be.default=e[Oe]:Be===null&&(Be=Te[Oe]={default:e[Oe]}),Be&&e[`__skip_${Oe}`]&&(Be.skipFactory=!0)}return Te}function mergeModels(ke,e){return!ke||!e?ke||e:isArray$1(ke)&&isArray$1(e)?ke.concat(e):extend$5({},normalizePropsOrEmits(ke),normalizePropsOrEmits(e))}function createPropsRestProxy(ke,e){const Te={};for(const Oe in ke)e.includes(Oe)||Object.defineProperty(Te,Oe,{enumerable:!0,get:()=>ke[Oe]});return Te}function withAsyncContext(ke){const e=getCurrentInstance();let Te=ke();return unsetCurrentInstance(),isPromise(Te)&&(Te=Te.catch(Oe=>{throw setCurrentInstance(e),Oe})),[Te,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(ke){const e=resolveMergedOptions(ke),Te=ke.proxy,Oe=ke.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,ke,"bc");const{data:Be,computed:Ue,methods:He,watch:We,provide:Cn,inject:An,created:En,beforeMount:Sn,mounted:Tn,beforeUpdate:Ln,updated:Bn,activated:ei,deactivated:ni,beforeDestroy:ti,beforeUnmount:ri,destroyed:oi,unmounted:ai,render:ci,renderTracked:Pi,renderTriggered:vi,errorCaptured:pi,serverPrefetch:Mi,expose:Fi,inheritAttrs:fi,components:ui,directives:Oi,filters:Ni}=e;if(An&&resolveInjections(An,Oe,null),He)for(const cr in He){const ar=He[cr];isFunction(ar)&&(Oe[cr]=ar.bind(Te))}if(Be){const cr=Be.call(Te,Te);isObject$1(cr)&&(ke.data=reactive(cr))}if(shouldCacheAccess=!0,Ue)for(const cr in Ue){const ar=Ue[cr],pr=isFunction(ar)?ar.bind(Te,Te):isFunction(ar.get)?ar.get.bind(Te,Te):NOOP,rr=!isFunction(ar)&&isFunction(ar.set)?ar.set.bind(Te):NOOP,br=computed({get:pr,set:rr});Object.defineProperty(Oe,cr,{enumerable:!0,configurable:!0,get:()=>br.value,set:Li=>br.value=Li})}if(We)for(const cr in We)createWatcher(We[cr],Oe,Te,cr);if(Cn){const cr=isFunction(Cn)?Cn.call(Te):Cn;Reflect.ownKeys(cr).forEach(ar=>{provide(ar,cr[ar])})}En&&callHook$1(En,ke,"c");function er(cr,ar){isArray$1(ar)?ar.forEach(pr=>cr(pr.bind(Te))):ar&&cr(ar.bind(Te))}if(er(onBeforeMount,Sn),er(onMounted,Tn),er(onBeforeUpdate,Ln),er(onUpdated,Bn),er(onActivated,ei),er(onDeactivated,ni),er(onErrorCaptured,pi),er(onRenderTracked,Pi),er(onRenderTriggered,vi),er(onBeforeUnmount,ri),er(onUnmounted,ai),er(onServerPrefetch,Mi),isArray$1(Fi))if(Fi.length){const cr=ke.exposed||(ke.exposed={});Fi.forEach(ar=>{Object.defineProperty(cr,ar,{get:()=>Te[ar],set:pr=>Te[ar]=pr})})}else ke.exposed||(ke.exposed={});ci&&ke.render===NOOP&&(ke.render=ci),fi!=null&&(ke.inheritAttrs=fi),ui&&(ke.components=ui),Oi&&(ke.directives=Oi),Mi&&markAsyncBoundary(ke)}function resolveInjections(ke,e,Te=NOOP){isArray$1(ke)&&(ke=normalizeInject(ke));for(const Oe in ke){const Be=ke[Oe];let Ue;isObject$1(Be)?"default"in Be?Ue=inject(Be.from||Oe,Be.default,!0):Ue=inject(Be.from||Oe):Ue=inject(Be),isRef(Ue)?Object.defineProperty(e,Oe,{enumerable:!0,configurable:!0,get:()=>Ue.value,set:He=>Ue.value=He}):e[Oe]=Ue}}function callHook$1(ke,e,Te){callWithAsyncErrorHandling(isArray$1(ke)?ke.map(Oe=>Oe.bind(e.proxy)):ke.bind(e.proxy),e,Te)}function createWatcher(ke,e,Te,Oe){let Be=Oe.includes(".")?createPathGetter(Te,Oe):()=>Te[Oe];if(isString(ke)){const Ue=e[ke];isFunction(Ue)&&watch(Be,Ue)}else if(isFunction(ke))watch(Be,ke.bind(Te));else if(isObject$1(ke))if(isArray$1(ke))ke.forEach(Ue=>createWatcher(Ue,e,Te,Oe));else{const Ue=isFunction(ke.handler)?ke.handler.bind(Te):e[ke.handler];isFunction(Ue)&&watch(Be,Ue,ke)}}function resolveMergedOptions(ke){const e=ke.type,{mixins:Te,extends:Oe}=e,{mixins:Be,optionsCache:Ue,config:{optionMergeStrategies:He}}=ke.appContext,We=Ue.get(e);let Cn;return We?Cn=We:!Be.length&&!Te&&!Oe?Cn=e:(Cn={},Be.length&&Be.forEach(An=>mergeOptions$1(Cn,An,He,!0)),mergeOptions$1(Cn,e,He)),isObject$1(e)&&Ue.set(e,Cn),Cn}function mergeOptions$1(ke,e,Te,Oe=!1){const{mixins:Be,extends:Ue}=e;Ue&&mergeOptions$1(ke,Ue,Te,!0),Be&&Be.forEach(He=>mergeOptions$1(ke,He,Te,!0));for(const He in e)if(!(Oe&&He==="expose")){const We=internalOptionMergeStrats[He]||Te&&Te[He];ke[He]=We?We(ke[He],e[He]):e[He]}return ke}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(ke,e){return e?ke?function(){return extend$5(isFunction(ke)?ke.call(this,this):ke,isFunction(e)?e.call(this,this):e)}:e:ke}function mergeInject(ke,e){return mergeObjectOptions(normalizeInject(ke),normalizeInject(e))}function normalizeInject(ke){if(isArray$1(ke)){const e={};for(let Te=0;Te<ke.length;Te++)e[ke[Te]]=ke[Te];return e}return ke}function mergeAsArray(ke,e){return ke?[...new Set([].concat(ke,e))]:e}function mergeObjectOptions(ke,e){return ke?extend$5(Object.create(null),ke,e):e}function mergeEmitsOrPropsOptions(ke,e){return ke?isArray$1(ke)&&isArray$1(e)?[...new Set([...ke,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(ke),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(ke,e){if(!ke)return e;if(!e)return ke;const Te=extend$5(Object.create(null),ke);for(const Oe in e)Te[Oe]=mergeAsArray(ke[Oe],e[Oe]);return Te}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(ke,e){return function(Oe,Be=null){isFunction(Oe)||(Oe=extend$5({},Oe)),Be!=null&&!isObject$1(Be)&&(Be=null);const Ue=createAppContext(),He=new WeakSet,We=[];let Cn=!1;const An=Ue.app={_uid:uid$1++,_component:Oe,_props:Be,_container:null,_context:Ue,_instance:null,version:version$3,get config(){return Ue.config},set config(En){},use(En,...Sn){return He.has(En)||(En&&isFunction(En.install)?(He.add(En),En.install(An,...Sn)):isFunction(En)&&(He.add(En),En(An,...Sn))),An},mixin(En){return Ue.mixins.includes(En)||Ue.mixins.push(En),An},component(En,Sn){return Sn?(Ue.components[En]=Sn,An):Ue.components[En]},directive(En,Sn){return Sn?(Ue.directives[En]=Sn,An):Ue.directives[En]},mount(En,Sn,Tn){if(!Cn){const Ln=An._ceVNode||createVNode(Oe,Be);return Ln.appContext=Ue,Tn===!0?Tn="svg":Tn===!1&&(Tn=void 0),Sn&&e?e(Ln,En):ke(Ln,En,Tn),Cn=!0,An._container=En,En.__vue_app__=An,getComponentPublicInstance(Ln.component)}},onUnmount(En){We.push(En)},unmount(){Cn&&(callWithAsyncErrorHandling(We,An._instance,16),ke(null,An._container),delete An._container.__vue_app__)},provide(En,Sn){return Ue.provides[En]=Sn,An},runWithContext(En){const Sn=currentApp;currentApp=An;try{return En()}finally{currentApp=Sn}}};return An}}let currentApp=null;function provide(ke,e){if(currentInstance){let Te=currentInstance.provides;const Oe=currentInstance.parent&&currentInstance.parent.provides;Oe===Te&&(Te=currentInstance.provides=Object.create(Oe)),Te[ke]=e}}function inject(ke,e,Te=!1){const Oe=currentInstance||currentRenderingInstance;if(Oe||currentApp){const Be=currentApp?currentApp._context.provides:Oe?Oe.parent==null?Oe.vnode.appContext&&Oe.vnode.appContext.provides:Oe.parent.provides:void 0;if(Be&&ke in Be)return Be[ke];if(arguments.length>1)return Te&&isFunction(e)?e.call(Oe&&Oe.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=ke=>Object.getPrototypeOf(ke)===internalObjectProto;function initProps(ke,e,Te,Oe=!1){const Be={},Ue=createInternalObject();ke.propsDefaults=Object.create(null),setFullProps(ke,e,Be,Ue);for(const He in ke.propsOptions[0])He in Be||(Be[He]=void 0);Te?ke.props=Oe?Be:shallowReactive(Be):ke.type.props?ke.props=Be:ke.props=Ue,ke.attrs=Ue}function updateProps(ke,e,Te,Oe){const{props:Be,attrs:Ue,vnode:{patchFlag:He}}=ke,We=toRaw(Be),[Cn]=ke.propsOptions;let An=!1;if((Oe||He>0)&&!(He&16)){if(He&8){const En=ke.vnode.dynamicProps;for(let Sn=0;Sn<En.length;Sn++){let Tn=En[Sn];if(isEmitListener(ke.emitsOptions,Tn))continue;const Ln=e[Tn];if(Cn)if(hasOwn(Ue,Tn))Ln!==Ue[Tn]&&(Ue[Tn]=Ln,An=!0);else{const Bn=camelize(Tn);Be[Bn]=resolvePropValue(Cn,We,Bn,Ln,ke,!1)}else Ln!==Ue[Tn]&&(Ue[Tn]=Ln,An=!0)}}}else{setFullProps(ke,e,Be,Ue)&&(An=!0);let En;for(const Sn in We)(!e||!hasOwn(e,Sn)&&((En=hyphenate(Sn))===Sn||!hasOwn(e,En)))&&(Cn?Te&&(Te[Sn]!==void 0||Te[En]!==void 0)&&(Be[Sn]=resolvePropValue(Cn,We,Sn,void 0,ke,!0)):delete Be[Sn]);if(Ue!==We)for(const Sn in Ue)(!e||!hasOwn(e,Sn))&&(delete Ue[Sn],An=!0)}An&&trigger(ke.attrs,"set","")}function setFullProps(ke,e,Te,Oe){const[Be,Ue]=ke.propsOptions;let He=!1,We;if(e)for(let Cn in e){if(isReservedProp(Cn))continue;const An=e[Cn];let En;Be&&hasOwn(Be,En=camelize(Cn))?!Ue||!Ue.includes(En)?Te[En]=An:(We||(We={}))[En]=An:isEmitListener(ke.emitsOptions,Cn)||(!(Cn in Oe)||An!==Oe[Cn])&&(Oe[Cn]=An,He=!0)}if(Ue){const Cn=toRaw(Te),An=We||EMPTY_OBJ;for(let En=0;En<Ue.length;En++){const Sn=Ue[En];Te[Sn]=resolvePropValue(Be,Cn,Sn,An[Sn],ke,!hasOwn(An,Sn))}}return He}function resolvePropValue(ke,e,Te,Oe,Be,Ue){const He=ke[Te];if(He!=null){const We=hasOwn(He,"default");if(We&&Oe===void 0){const Cn=He.default;if(He.type!==Function&&!He.skipFactory&&isFunction(Cn)){const{propsDefaults:An}=Be;if(Te in An)Oe=An[Te];else{const En=setCurrentInstance(Be);Oe=An[Te]=Cn.call(null,e),En()}}else Oe=Cn;Be.ce&&Be.ce._setProp(Te,Oe)}He[0]&&(Ue&&!We?Oe=!1:He[1]&&(Oe===""||Oe===hyphenate(Te))&&(Oe=!0))}return Oe}const mixinPropsCache=new WeakMap;function normalizePropsOptions(ke,e,Te=!1){const Oe=Te?mixinPropsCache:e.propsCache,Be=Oe.get(ke);if(Be)return Be;const Ue=ke.props,He={},We=[];let Cn=!1;if(!isFunction(ke)){const En=Sn=>{Cn=!0;const[Tn,Ln]=normalizePropsOptions(Sn,e,!0);extend$5(He,Tn),Ln&&We.push(...Ln)};!Te&&e.mixins.length&&e.mixins.forEach(En),ke.extends&&En(ke.extends),ke.mixins&&ke.mixins.forEach(En)}if(!Ue&&!Cn)return isObject$1(ke)&&Oe.set(ke,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Ue))for(let En=0;En<Ue.length;En++){const Sn=camelize(Ue[En]);validatePropName(Sn)&&(He[Sn]=EMPTY_OBJ)}else if(Ue)for(const En in Ue){const Sn=camelize(En);if(validatePropName(Sn)){const Tn=Ue[En],Ln=He[Sn]=isArray$1(Tn)||isFunction(Tn)?{type:Tn}:extend$5({},Tn),Bn=Ln.type;let ei=!1,ni=!0;if(isArray$1(Bn))for(let ti=0;ti<Bn.length;++ti){const ri=Bn[ti],oi=isFunction(ri)&&ri.name;if(oi==="Boolean"){ei=!0;break}else oi==="String"&&(ni=!1)}else ei=isFunction(Bn)&&Bn.name==="Boolean";Ln[0]=ei,Ln[1]=ni,(ei||hasOwn(Ln,"default"))&&We.push(Sn)}}const An=[He,We];return isObject$1(ke)&&Oe.set(ke,An),An}function validatePropName(ke){return ke[0]!=="$"&&!isReservedProp(ke)}const isInternalKey=ke=>ke[0]==="_"||ke==="$stable",normalizeSlotValue=ke=>isArray$1(ke)?ke.map(normalizeVNode):[normalizeVNode(ke)],normalizeSlot$1=(ke,e,Te)=>{if(e._n)return e;const Oe=withCtx((...Be)=>normalizeSlotValue(e(...Be)),Te);return Oe._c=!1,Oe},normalizeObjectSlots=(ke,e,Te)=>{const Oe=ke._ctx;for(const Be in ke){if(isInternalKey(Be))continue;const Ue=ke[Be];if(isFunction(Ue))e[Be]=normalizeSlot$1(Be,Ue,Oe);else if(Ue!=null){const He=normalizeSlotValue(Ue);e[Be]=()=>He}}},normalizeVNodeSlots=(ke,e)=>{const Te=normalizeSlotValue(e);ke.slots.default=()=>Te},assignSlots=(ke,e,Te)=>{for(const Oe in e)(Te||Oe!=="_")&&(ke[Oe]=e[Oe])},initSlots=(ke,e,Te)=>{const Oe=ke.slots=createInternalObject();if(ke.vnode.shapeFlag&32){const Be=e._;Be?(assignSlots(Oe,e,Te),Te&&def(Oe,"_",Be,!0)):normalizeObjectSlots(e,Oe)}else e&&normalizeVNodeSlots(ke,e)},updateSlots=(ke,e,Te)=>{const{vnode:Oe,slots:Be}=ke;let Ue=!0,He=EMPTY_OBJ;if(Oe.shapeFlag&32){const We=e._;We?Te&&We===1?Ue=!1:assignSlots(Be,e,Te):(Ue=!e.$stable,normalizeObjectSlots(e,Be)),He=e}else e&&(normalizeVNodeSlots(ke,e),He={default:1});if(Ue)for(const We in Be)!isInternalKey(We)&&He[We]==null&&delete Be[We]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(ke){return baseCreateRenderer(ke)}function createHydrationRenderer(ke){return baseCreateRenderer(ke,createHydrationFunctions)}function baseCreateRenderer(ke,e){const Te=getGlobalThis();Te.__VUE__=!0;const{insert:Oe,remove:Be,patchProp:Ue,createElement:He,createText:We,createComment:Cn,setText:An,setElementText:En,parentNode:Sn,nextSibling:Tn,setScopeId:Ln=NOOP,insertStaticContent:Bn}=ke,ei=(Hi,gr,lr,Ki=null,Dr=null,Nr=null,Ir=void 0,kr=null,Lr=!!gr.dynamicChildren)=>{if(Hi===gr)return;Hi&&!isSameVNodeType(Hi,gr)&&(Ki=hr(Hi),Li(Hi,Dr,Nr,!0),Hi=null),gr.patchFlag===-2&&(Lr=!1,gr.dynamicChildren=null);const{type:Pr,ref:Er,shapeFlag:Sr}=gr;switch(Pr){case Text$1:ni(Hi,gr,lr,Ki);break;case Comment:ti(Hi,gr,lr,Ki);break;case Static:Hi==null&&ri(gr,lr,Ki,Ir);break;case Fragment:ui(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr);break;default:Sr&1?ci(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr):Sr&6?Oi(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr):(Sr&64||Sr&128)&&Pr.process(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr,Ar)}Er!=null&&Dr&&setRef(Er,Hi&&Hi.ref,Nr,gr||Hi,!gr)},ni=(Hi,gr,lr,Ki)=>{if(Hi==null)Oe(gr.el=We(gr.children),lr,Ki);else{const Dr=gr.el=Hi.el;gr.children!==Hi.children&&An(Dr,gr.children)}},ti=(Hi,gr,lr,Ki)=>{Hi==null?Oe(gr.el=Cn(gr.children||""),lr,Ki):gr.el=Hi.el},ri=(Hi,gr,lr,Ki)=>{[Hi.el,Hi.anchor]=Bn(Hi.children,gr,lr,Ki,Hi.el,Hi.anchor)},oi=({el:Hi,anchor:gr},lr,Ki)=>{let Dr;for(;Hi&&Hi!==gr;)Dr=Tn(Hi),Oe(Hi,lr,Ki),Hi=Dr;Oe(gr,lr,Ki)},ai=({el:Hi,anchor:gr})=>{let lr;for(;Hi&&Hi!==gr;)lr=Tn(Hi),Be(Hi),Hi=lr;Be(gr)},ci=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr)=>{gr.type==="svg"?Ir="svg":gr.type==="math"&&(Ir="mathml"),Hi==null?Pi(gr,lr,Ki,Dr,Nr,Ir,kr,Lr):Mi(Hi,gr,Dr,Nr,Ir,kr,Lr)},Pi=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr)=>{let Lr,Pr;const{props:Er,shapeFlag:Sr,transition:wr,dirs:Br}=Hi;if(Lr=Hi.el=He(Hi.type,Nr,Er&&Er.is,Er),Sr&8?En(Lr,Hi.children):Sr&16&&pi(Hi.children,Lr,null,Ki,Dr,resolveChildrenNamespace(Hi,Nr),Ir,kr),Br&&invokeDirectiveHook(Hi,null,Ki,"created"),vi(Lr,Hi,Hi.scopeId,Ir,Ki),Er){for(const qr in Er)qr!=="value"&&!isReservedProp(qr)&&Ue(Lr,qr,null,Er[qr],Nr,Ki);"value"in Er&&Ue(Lr,"value",null,Er.value,Nr),(Pr=Er.onVnodeBeforeMount)&&invokeVNodeHook(Pr,Ki,Hi)}Br&&invokeDirectiveHook(Hi,null,Ki,"beforeMount");const Hr=needTransition(Dr,wr);Hr&&wr.beforeEnter(Lr),Oe(Lr,gr,lr),((Pr=Er&&Er.onVnodeMounted)||Hr||Br)&&queuePostRenderEffect(()=>{Pr&&invokeVNodeHook(Pr,Ki,Hi),Hr&&wr.enter(Lr),Br&&invokeDirectiveHook(Hi,null,Ki,"mounted")},Dr)},vi=(Hi,gr,lr,Ki,Dr)=>{if(lr&&Ln(Hi,lr),Ki)for(let Nr=0;Nr<Ki.length;Nr++)Ln(Hi,Ki[Nr]);if(Dr){let Nr=Dr.subTree;if(gr===Nr||isSuspense(Nr.type)&&(Nr.ssContent===gr||Nr.ssFallback===gr)){const Ir=Dr.vnode;vi(Hi,Ir,Ir.scopeId,Ir.slotScopeIds,Dr.parent)}}},pi=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr=0)=>{for(let Pr=Lr;Pr<Hi.length;Pr++){const Er=Hi[Pr]=kr?cloneIfMounted(Hi[Pr]):normalizeVNode(Hi[Pr]);ei(null,Er,gr,lr,Ki,Dr,Nr,Ir,kr)}},Mi=(Hi,gr,lr,Ki,Dr,Nr,Ir)=>{const kr=gr.el=Hi.el;let{patchFlag:Lr,dynamicChildren:Pr,dirs:Er}=gr;Lr|=Hi.patchFlag&16;const Sr=Hi.props||EMPTY_OBJ,wr=gr.props||EMPTY_OBJ;let Br;if(lr&&toggleRecurse(lr,!1),(Br=wr.onVnodeBeforeUpdate)&&invokeVNodeHook(Br,lr,gr,Hi),Er&&invokeDirectiveHook(gr,Hi,lr,"beforeUpdate"),lr&&toggleRecurse(lr,!0),(Sr.innerHTML&&wr.innerHTML==null||Sr.textContent&&wr.textContent==null)&&En(kr,""),Pr?Fi(Hi.dynamicChildren,Pr,kr,lr,Ki,resolveChildrenNamespace(gr,Dr),Nr):Ir||ar(Hi,gr,kr,null,lr,Ki,resolveChildrenNamespace(gr,Dr),Nr,!1),Lr>0){if(Lr&16)fi(kr,Sr,wr,lr,Dr);else if(Lr&2&&Sr.class!==wr.class&&Ue(kr,"class",null,wr.class,Dr),Lr&4&&Ue(kr,"style",Sr.style,wr.style,Dr),Lr&8){const Hr=gr.dynamicProps;for(let qr=0;qr<Hr.length;qr++){const Xr=Hr[qr],cs=Sr[Xr],Qr=wr[Xr];(Qr!==cs||Xr==="value")&&Ue(kr,Xr,cs,Qr,Dr,lr)}}Lr&1&&Hi.children!==gr.children&&En(kr,gr.children)}else!Ir&&Pr==null&&fi(kr,Sr,wr,lr,Dr);((Br=wr.onVnodeUpdated)||Er)&&queuePostRenderEffect(()=>{Br&&invokeVNodeHook(Br,lr,gr,Hi),Er&&invokeDirectiveHook(gr,Hi,lr,"updated")},Ki)},Fi=(Hi,gr,lr,Ki,Dr,Nr,Ir)=>{for(let kr=0;kr<gr.length;kr++){const Lr=Hi[kr],Pr=gr[kr],Er=Lr.el&&(Lr.type===Fragment||!isSameVNodeType(Lr,Pr)||Lr.shapeFlag&70)?Sn(Lr.el):lr;ei(Lr,Pr,Er,null,Ki,Dr,Nr,Ir,!0)}},fi=(Hi,gr,lr,Ki,Dr)=>{if(gr!==lr){if(gr!==EMPTY_OBJ)for(const Nr in gr)!isReservedProp(Nr)&&!(Nr in lr)&&Ue(Hi,Nr,gr[Nr],null,Dr,Ki);for(const Nr in lr){if(isReservedProp(Nr))continue;const Ir=lr[Nr],kr=gr[Nr];Ir!==kr&&Nr!=="value"&&Ue(Hi,Nr,kr,Ir,Dr,Ki)}"value"in lr&&Ue(Hi,"value",gr.value,lr.value,Dr)}},ui=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr)=>{const Pr=gr.el=Hi?Hi.el:We(""),Er=gr.anchor=Hi?Hi.anchor:We("");let{patchFlag:Sr,dynamicChildren:wr,slotScopeIds:Br}=gr;Br&&(kr=kr?kr.concat(Br):Br),Hi==null?(Oe(Pr,lr,Ki),Oe(Er,lr,Ki),pi(gr.children||[],lr,Er,Dr,Nr,Ir,kr,Lr)):Sr>0&&Sr&64&&wr&&Hi.dynamicChildren?(Fi(Hi.dynamicChildren,wr,lr,Dr,Nr,Ir,kr),(gr.key!=null||Dr&&gr===Dr.subTree)&&traverseStaticChildren(Hi,gr,!0)):ar(Hi,gr,lr,Er,Dr,Nr,Ir,kr,Lr)},Oi=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr)=>{gr.slotScopeIds=kr,Hi==null?gr.shapeFlag&512?Dr.ctx.activate(gr,lr,Ki,Ir,Lr):Ni(gr,lr,Ki,Dr,Nr,Ir,Lr):nr(Hi,gr,Lr)},Ni=(Hi,gr,lr,Ki,Dr,Nr,Ir)=>{const kr=Hi.component=createComponentInstance(Hi,Ki,Dr);if(isKeepAlive(Hi)&&(kr.ctx.renderer=Ar),setupComponent(kr,!1,Ir),kr.asyncDep){if(Dr&&Dr.registerDep(kr,er,Ir),!Hi.el){const Lr=kr.subTree=createVNode(Comment);ti(null,Lr,gr,lr)}}else er(kr,Hi,gr,lr,Dr,Nr,Ir)},nr=(Hi,gr,lr)=>{const Ki=gr.component=Hi.component;if(shouldUpdateComponent(Hi,gr,lr))if(Ki.asyncDep&&!Ki.asyncResolved){cr(Ki,gr,lr);return}else Ki.next=gr,Ki.update();else gr.el=Hi.el,Ki.vnode=gr},er=(Hi,gr,lr,Ki,Dr,Nr,Ir)=>{const kr=()=>{if(Hi.isMounted){let{next:Sr,bu:wr,u:Br,parent:Hr,vnode:qr}=Hi;{const vs=locateNonHydratedAsyncRoot(Hi);if(vs){Sr&&(Sr.el=qr.el,cr(Hi,Sr,Ir)),vs.asyncDep.then(()=>{Hi.isUnmounted||kr()});return}}let Xr=Sr,cs;toggleRecurse(Hi,!1),Sr?(Sr.el=qr.el,cr(Hi,Sr,Ir)):Sr=qr,wr&&invokeArrayFns(wr),(cs=Sr.props&&Sr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(cs,Hr,Sr,qr),toggleRecurse(Hi,!0);const Qr=renderComponentRoot(Hi),bs=Hi.subTree;Hi.subTree=Qr,ei(bs,Qr,Sn(bs.el),hr(bs),Hi,Dr,Nr),Sr.el=Qr.el,Xr===null&&updateHOCHostEl(Hi,Qr.el),Br&&queuePostRenderEffect(Br,Dr),(cs=Sr.props&&Sr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(cs,Hr,Sr,qr),Dr)}else{let Sr;const{el:wr,props:Br}=gr,{bm:Hr,m:qr,parent:Xr,root:cs,type:Qr}=Hi,bs=isAsyncWrapper(gr);if(toggleRecurse(Hi,!1),Hr&&invokeArrayFns(Hr),!bs&&(Sr=Br&&Br.onVnodeBeforeMount)&&invokeVNodeHook(Sr,Xr,gr),toggleRecurse(Hi,!0),wr&&Gr){const vs=()=>{Hi.subTree=renderComponentRoot(Hi),Gr(wr,Hi.subTree,Hi,Dr,null)};bs&&Qr.__asyncHydrate?Qr.__asyncHydrate(wr,Hi,vs):vs()}else{cs.ce&&cs.ce._injectChildStyle(Qr);const vs=Hi.subTree=renderComponentRoot(Hi);ei(null,vs,lr,Ki,Hi,Dr,Nr),gr.el=vs.el}if(qr&&queuePostRenderEffect(qr,Dr),!bs&&(Sr=Br&&Br.onVnodeMounted)){const vs=gr;queuePostRenderEffect(()=>invokeVNodeHook(Sr,Xr,vs),Dr)}(gr.shapeFlag&256||Xr&&isAsyncWrapper(Xr.vnode)&&Xr.vnode.shapeFlag&256)&&Hi.a&&queuePostRenderEffect(Hi.a,Dr),Hi.isMounted=!0,gr=lr=Ki=null}};Hi.scope.on();const Lr=Hi.effect=new ReactiveEffect(kr);Hi.scope.off();const Pr=Hi.update=Lr.run.bind(Lr),Er=Hi.job=Lr.runIfDirty.bind(Lr);Er.i=Hi,Er.id=Hi.uid,Lr.scheduler=()=>queueJob(Er),toggleRecurse(Hi,!0),Pr()},cr=(Hi,gr,lr)=>{gr.component=Hi;const Ki=Hi.vnode.props;Hi.vnode=gr,Hi.next=null,updateProps(Hi,gr.props,Ki,lr),updateSlots(Hi,gr.children,lr),pauseTracking(),flushPreFlushCbs(Hi),resetTracking()},ar=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr=!1)=>{const Pr=Hi&&Hi.children,Er=Hi?Hi.shapeFlag:0,Sr=gr.children,{patchFlag:wr,shapeFlag:Br}=gr;if(wr>0){if(wr&128){rr(Pr,Sr,lr,Ki,Dr,Nr,Ir,kr,Lr);return}else if(wr&256){pr(Pr,Sr,lr,Ki,Dr,Nr,Ir,kr,Lr);return}}Br&8?(Er&16&&vr(Pr,Dr,Nr),Sr!==Pr&&En(lr,Sr)):Er&16?Br&16?rr(Pr,Sr,lr,Ki,Dr,Nr,Ir,kr,Lr):vr(Pr,Dr,Nr,!0):(Er&8&&En(lr,""),Br&16&&pi(Sr,lr,Ki,Dr,Nr,Ir,kr,Lr))},pr=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr)=>{Hi=Hi||EMPTY_ARR,gr=gr||EMPTY_ARR;const Pr=Hi.length,Er=gr.length,Sr=Math.min(Pr,Er);let wr;for(wr=0;wr<Sr;wr++){const Br=gr[wr]=Lr?cloneIfMounted(gr[wr]):normalizeVNode(gr[wr]);ei(Hi[wr],Br,lr,null,Dr,Nr,Ir,kr,Lr)}Pr>Er?vr(Hi,Dr,Nr,!0,!1,Sr):pi(gr,lr,Ki,Dr,Nr,Ir,kr,Lr,Sr)},rr=(Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr)=>{let Pr=0;const Er=gr.length;let Sr=Hi.length-1,wr=Er-1;for(;Pr<=Sr&&Pr<=wr;){const Br=Hi[Pr],Hr=gr[Pr]=Lr?cloneIfMounted(gr[Pr]):normalizeVNode(gr[Pr]);if(isSameVNodeType(Br,Hr))ei(Br,Hr,lr,null,Dr,Nr,Ir,kr,Lr);else break;Pr++}for(;Pr<=Sr&&Pr<=wr;){const Br=Hi[Sr],Hr=gr[wr]=Lr?cloneIfMounted(gr[wr]):normalizeVNode(gr[wr]);if(isSameVNodeType(Br,Hr))ei(Br,Hr,lr,null,Dr,Nr,Ir,kr,Lr);else break;Sr--,wr--}if(Pr>Sr){if(Pr<=wr){const Br=wr+1,Hr=Br<Er?gr[Br].el:Ki;for(;Pr<=wr;)ei(null,gr[Pr]=Lr?cloneIfMounted(gr[Pr]):normalizeVNode(gr[Pr]),lr,Hr,Dr,Nr,Ir,kr,Lr),Pr++}}else if(Pr>wr)for(;Pr<=Sr;)Li(Hi[Pr],Dr,Nr,!0),Pr++;else{const Br=Pr,Hr=Pr,qr=new Map;for(Pr=Hr;Pr<=wr;Pr++){const ps=gr[Pr]=Lr?cloneIfMounted(gr[Pr]):normalizeVNode(gr[Pr]);ps.key!=null&&qr.set(ps.key,Pr)}let Xr,cs=0;const Qr=wr-Hr+1;let bs=!1,vs=0;const Ms=new Array(Qr);for(Pr=0;Pr<Qr;Pr++)Ms[Pr]=0;for(Pr=Br;Pr<=Sr;Pr++){const ps=Hi[Pr];if(cs>=Qr){Li(ps,Dr,Nr,!0);continue}let Ps;if(ps.key!=null)Ps=qr.get(ps.key);else for(Xr=Hr;Xr<=wr;Xr++)if(Ms[Xr-Hr]===0&&isSameVNodeType(ps,gr[Xr])){Ps=Xr;break}Ps===void 0?Li(ps,Dr,Nr,!0):(Ms[Ps-Hr]=Pr+1,Ps>=vs?vs=Ps:bs=!0,ei(ps,gr[Ps],lr,null,Dr,Nr,Ir,kr,Lr),cs++)}const Ls=bs?getSequence(Ms):EMPTY_ARR;for(Xr=Ls.length-1,Pr=Qr-1;Pr>=0;Pr--){const ps=Hr+Pr,Ps=gr[ps],Es=ps+1<Er?gr[ps+1].el:Ki;Ms[Pr]===0?ei(null,Ps,lr,Es,Dr,Nr,Ir,kr,Lr):bs&&(Xr<0||Pr!==Ls[Xr]?br(Ps,lr,Es,2):Xr--)}}},br=(Hi,gr,lr,Ki,Dr=null)=>{const{el:Nr,type:Ir,transition:kr,children:Lr,shapeFlag:Pr}=Hi;if(Pr&6){br(Hi.component.subTree,gr,lr,Ki);return}if(Pr&128){Hi.suspense.move(gr,lr,Ki);return}if(Pr&64){Ir.move(Hi,gr,lr,Ar);return}if(Ir===Fragment){Oe(Nr,gr,lr);for(let Sr=0;Sr<Lr.length;Sr++)br(Lr[Sr],gr,lr,Ki);Oe(Hi.anchor,gr,lr);return}if(Ir===Static){oi(Hi,gr,lr);return}if(Ki!==2&&Pr&1&&kr)if(Ki===0)kr.beforeEnter(Nr),Oe(Nr,gr,lr),queuePostRenderEffect(()=>kr.enter(Nr),Dr);else{const{leave:Sr,delayLeave:wr,afterLeave:Br}=kr,Hr=()=>Oe(Nr,gr,lr),qr=()=>{Sr(Nr,()=>{Hr(),Br&&Br()})};wr?wr(Nr,Hr,qr):qr()}else Oe(Nr,gr,lr)},Li=(Hi,gr,lr,Ki=!1,Dr=!1)=>{const{type:Nr,props:Ir,ref:kr,children:Lr,dynamicChildren:Pr,shapeFlag:Er,patchFlag:Sr,dirs:wr,cacheIndex:Br}=Hi;if(Sr===-2&&(Dr=!1),kr!=null&&setRef(kr,null,lr,Hi,!0),Br!=null&&(gr.renderCache[Br]=void 0),Er&256){gr.ctx.deactivate(Hi);return}const Hr=Er&1&&wr,qr=!isAsyncWrapper(Hi);let Xr;if(qr&&(Xr=Ir&&Ir.onVnodeBeforeUnmount)&&invokeVNodeHook(Xr,gr,Hi),Er&6)dr(Hi.component,lr,Ki);else{if(Er&128){Hi.suspense.unmount(lr,Ki);return}Hr&&invokeDirectiveHook(Hi,null,gr,"beforeUnmount"),Er&64?Hi.type.remove(Hi,gr,lr,Ar,Ki):Pr&&!Pr.hasOnce&&(Nr!==Fragment||Sr>0&&Sr&64)?vr(Pr,gr,lr,!1,!0):(Nr===Fragment&&Sr&384||!Dr&&Er&16)&&vr(Lr,gr,lr),Ki&&ur(Hi)}(qr&&(Xr=Ir&&Ir.onVnodeUnmounted)||Hr)&&queuePostRenderEffect(()=>{Xr&&invokeVNodeHook(Xr,gr,Hi),Hr&&invokeDirectiveHook(Hi,null,gr,"unmounted")},lr)},ur=Hi=>{const{type:gr,el:lr,anchor:Ki,transition:Dr}=Hi;if(gr===Fragment){sr(lr,Ki);return}if(gr===Static){ai(Hi);return}const Nr=()=>{Be(lr),Dr&&!Dr.persisted&&Dr.afterLeave&&Dr.afterLeave()};if(Hi.shapeFlag&1&&Dr&&!Dr.persisted){const{leave:Ir,delayLeave:kr}=Dr,Lr=()=>Ir(lr,Nr);kr?kr(Hi.el,Nr,Lr):Lr()}else Nr()},sr=(Hi,gr)=>{let lr;for(;Hi!==gr;)lr=Tn(Hi),Be(Hi),Hi=lr;Be(gr)},dr=(Hi,gr,lr)=>{const{bum:Ki,scope:Dr,job:Nr,subTree:Ir,um:kr,m:Lr,a:Pr}=Hi;invalidateMount(Lr),invalidateMount(Pr),Ki&&invokeArrayFns(Ki),Dr.stop(),Nr&&(Nr.flags|=8,Li(Ir,Hi,gr,lr)),kr&&queuePostRenderEffect(kr,gr),queuePostRenderEffect(()=>{Hi.isUnmounted=!0},gr),gr&&gr.pendingBranch&&!gr.isUnmounted&&Hi.asyncDep&&!Hi.asyncResolved&&Hi.suspenseId===gr.pendingId&&(gr.deps--,gr.deps===0&&gr.resolve())},vr=(Hi,gr,lr,Ki=!1,Dr=!1,Nr=0)=>{for(let Ir=Nr;Ir<Hi.length;Ir++)Li(Hi[Ir],gr,lr,Ki,Dr)},hr=Hi=>{if(Hi.shapeFlag&6)return hr(Hi.component.subTree);if(Hi.shapeFlag&128)return Hi.suspense.next();const gr=Tn(Hi.anchor||Hi.el),lr=gr&&gr[TeleportEndKey];return lr?Tn(lr):gr};let mr=!1;const _r=(Hi,gr,lr)=>{Hi==null?gr._vnode&&Li(gr._vnode,null,null,!0):ei(gr._vnode||null,Hi,gr,null,null,null,lr),gr._vnode=Hi,mr||(mr=!0,flushPreFlushCbs(),flushPostFlushCbs(),mr=!1)},Ar={p:ei,um:Li,m:br,r:ur,mt:Ni,mc:pi,pc:ar,pbc:Fi,n:hr,o:ke};let Vr,Gr;return e&&([Vr,Gr]=e(Ar)),{render:_r,hydrate:Vr,createApp:createAppAPI(_r,Vr)}}function resolveChildrenNamespace({type:ke,props:e},Te){return Te==="svg"&&ke==="foreignObject"||Te==="mathml"&&ke==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:Te}function toggleRecurse({effect:ke,job:e},Te){Te?(ke.flags|=32,e.flags|=4):(ke.flags&=-33,e.flags&=-5)}function needTransition(ke,e){return(!ke||ke&&!ke.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(ke,e,Te=!1){const Oe=ke.children,Be=e.children;if(isArray$1(Oe)&&isArray$1(Be))for(let Ue=0;Ue<Oe.length;Ue++){const He=Oe[Ue];let We=Be[Ue];We.shapeFlag&1&&!We.dynamicChildren&&((We.patchFlag<=0||We.patchFlag===32)&&(We=Be[Ue]=cloneIfMounted(Be[Ue]),We.el=He.el),!Te&&We.patchFlag!==-2&&traverseStaticChildren(He,We)),We.type===Text$1&&(We.el=He.el)}}function getSequence(ke){const e=ke.slice(),Te=[0];let Oe,Be,Ue,He,We;const Cn=ke.length;for(Oe=0;Oe<Cn;Oe++){const An=ke[Oe];if(An!==0){if(Be=Te[Te.length-1],ke[Be]<An){e[Oe]=Be,Te.push(Oe);continue}for(Ue=0,He=Te.length-1;Ue<He;)We=Ue+He>>1,ke[Te[We]]<An?Ue=We+1:He=We;An<ke[Te[Ue]]&&(Ue>0&&(e[Oe]=Te[Ue-1]),Te[Ue]=Oe)}}for(Ue=Te.length,He=Te[Ue-1];Ue-- >0;)Te[Ue]=He,He=e[He];return Te}function locateNonHydratedAsyncRoot(ke){const e=ke.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(ke){if(ke)for(let e=0;e<ke.length;e++)ke[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(ke,e){return doWatch(ke,null,e)}function watchPostEffect(ke,e){return doWatch(ke,null,{flush:"post"})}function watchSyncEffect(ke,e){return doWatch(ke,null,{flush:"sync"})}function watch(ke,e,Te){return doWatch(ke,e,Te)}function doWatch(ke,e,Te=EMPTY_OBJ){const{immediate:Oe,deep:Be,flush:Ue,once:He}=Te,We=extend$5({},Te),Cn=e&&Oe||!e&&Ue!=="post";let An;if(isInSSRComponentSetup){if(Ue==="sync"){const Ln=useSSRContext();An=Ln.__watcherHandles||(Ln.__watcherHandles=[])}else if(!Cn){const Ln=()=>{};return Ln.stop=NOOP,Ln.resume=NOOP,Ln.pause=NOOP,Ln}}const En=currentInstance;We.call=(Ln,Bn,ei)=>callWithAsyncErrorHandling(Ln,En,Bn,ei);let Sn=!1;Ue==="post"?We.scheduler=Ln=>{queuePostRenderEffect(Ln,En&&En.suspense)}:Ue!=="sync"&&(Sn=!0,We.scheduler=(Ln,Bn)=>{Bn?Ln():queueJob(Ln)}),We.augmentJob=Ln=>{e&&(Ln.flags|=4),Sn&&(Ln.flags|=2,En&&(Ln.id=En.uid,Ln.i=En))};const Tn=watch$1(ke,e,We);return isInSSRComponentSetup&&(An?An.push(Tn):Cn&&Tn()),Tn}function instanceWatch(ke,e,Te){const Oe=this.proxy,Be=isString(ke)?ke.includes(".")?createPathGetter(Oe,ke):()=>Oe[ke]:ke.bind(Oe,Oe);let Ue;isFunction(e)?Ue=e:(Ue=e.handler,Te=e);const He=setCurrentInstance(this),We=doWatch(Be,Ue.bind(Oe),Te);return He(),We}function createPathGetter(ke,e){const Te=e.split(".");return()=>{let Oe=ke;for(let Be=0;Be<Te.length&&Oe;Be++)Oe=Oe[Te[Be]];return Oe}}function useModel(ke,e,Te=EMPTY_OBJ){const Oe=getCurrentInstance(),Be=camelize(e),Ue=hyphenate(e),He=getModelModifiers(ke,Be),We=customRef((Cn,An)=>{let En,Sn=EMPTY_OBJ,Tn;return watchSyncEffect(()=>{const Ln=ke[Be];hasChanged(En,Ln)&&(En=Ln,An())}),{get(){return Cn(),Te.get?Te.get(En):En},set(Ln){const Bn=Te.set?Te.set(Ln):Ln;if(!hasChanged(Bn,En)&&!(Sn!==EMPTY_OBJ&&hasChanged(Ln,Sn)))return;const ei=Oe.vnode.props;ei&&(e in ei||Be in ei||Ue in ei)&&(`onUpdate:${e}`in ei||`onUpdate:${Be}`in ei||`onUpdate:${Ue}`in ei)||(En=Ln,An()),Oe.emit(`update:${e}`,Bn),hasChanged(Ln,Bn)&&hasChanged(Ln,Sn)&&!hasChanged(Bn,Tn)&&An(),Sn=Ln,Tn=Bn}}});return We[Symbol.iterator]=()=>{let Cn=0;return{next(){return Cn<2?{value:Cn++?He||EMPTY_OBJ:We,done:!1}:{done:!0}}}},We}const getModelModifiers=(ke,e)=>e==="modelValue"||e==="model-value"?ke.modelModifiers:ke[`${e}Modifiers`]||ke[`${camelize(e)}Modifiers`]||ke[`${hyphenate(e)}Modifiers`];function emit(ke,e,...Te){if(ke.isUnmounted)return;const Oe=ke.vnode.props||EMPTY_OBJ;let Be=Te;const Ue=e.startsWith("update:"),He=Ue&&getModelModifiers(Oe,e.slice(7));He&&(He.trim&&(Be=Te.map(En=>isString(En)?En.trim():En)),He.number&&(Be=Te.map(looseToNumber)));let We,Cn=Oe[We=toHandlerKey(e)]||Oe[We=toHandlerKey(camelize(e))];!Cn&&Ue&&(Cn=Oe[We=toHandlerKey(hyphenate(e))]),Cn&&callWithAsyncErrorHandling(Cn,ke,6,Be);const An=Oe[We+"Once"];if(An){if(!ke.emitted)ke.emitted={};else if(ke.emitted[We])return;ke.emitted[We]=!0,callWithAsyncErrorHandling(An,ke,6,Be)}}function normalizeEmitsOptions(ke,e,Te=!1){const Oe=e.emitsCache,Be=Oe.get(ke);if(Be!==void 0)return Be;const Ue=ke.emits;let He={},We=!1;if(!isFunction(ke)){const Cn=An=>{const En=normalizeEmitsOptions(An,e,!0);En&&(We=!0,extend$5(He,En))};!Te&&e.mixins.length&&e.mixins.forEach(Cn),ke.extends&&Cn(ke.extends),ke.mixins&&ke.mixins.forEach(Cn)}return!Ue&&!We?(isObject$1(ke)&&Oe.set(ke,null),null):(isArray$1(Ue)?Ue.forEach(Cn=>He[Cn]=null):extend$5(He,Ue),isObject$1(ke)&&Oe.set(ke,He),He)}function isEmitListener(ke,e){return!ke||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(ke,e[0].toLowerCase()+e.slice(1))||hasOwn(ke,hyphenate(e))||hasOwn(ke,e))}function markAttrsAccessed(){}function renderComponentRoot(ke){const{type:e,vnode:Te,proxy:Oe,withProxy:Be,propsOptions:[Ue],slots:He,attrs:We,emit:Cn,render:An,renderCache:En,props:Sn,data:Tn,setupState:Ln,ctx:Bn,inheritAttrs:ei}=ke,ni=setCurrentRenderingInstance(ke);let ti,ri;try{if(Te.shapeFlag&4){const ai=Be||Oe,ci=ai;ti=normalizeVNode(An.call(ci,ai,En,Sn,Ln,Tn,Bn)),ri=We}else{const ai=e;ti=normalizeVNode(ai.length>1?ai(Sn,{attrs:We,slots:He,emit:Cn}):ai(Sn,null)),ri=e.props?We:getFunctionalFallthrough(We)}}catch(ai){blockStack.length=0,handleError(ai,ke,1),ti=createVNode(Comment)}let oi=ti;if(ri&&ei!==!1){const ai=Object.keys(ri),{shapeFlag:ci}=oi;ai.length&&ci&7&&(Ue&&ai.some(isModelListener)&&(ri=filterModelListeners(ri,Ue)),oi=cloneVNode(oi,ri,!1,!0))}return Te.dirs&&(oi=cloneVNode(oi,null,!1,!0),oi.dirs=oi.dirs?oi.dirs.concat(Te.dirs):Te.dirs),Te.transition&&setTransitionHooks(oi,Te.transition),ti=oi,setCurrentRenderingInstance(ni),ti}function filterSingleRoot(ke,e=!0){let Te;for(let Oe=0;Oe<ke.length;Oe++){const Be=ke[Oe];if(isVNode(Be)){if(Be.type!==Comment||Be.children==="v-if"){if(Te)return;Te=Be}}else return}return Te}const getFunctionalFallthrough=ke=>{let e;for(const Te in ke)(Te==="class"||Te==="style"||isOn(Te))&&((e||(e={}))[Te]=ke[Te]);return e},filterModelListeners=(ke,e)=>{const Te={};for(const Oe in ke)(!isModelListener(Oe)||!(Oe.slice(9)in e))&&(Te[Oe]=ke[Oe]);return Te};function shouldUpdateComponent(ke,e,Te){const{props:Oe,children:Be,component:Ue}=ke,{props:He,children:We,patchFlag:Cn}=e,An=Ue.emitsOptions;if(e.dirs||e.transition)return!0;if(Te&&Cn>=0){if(Cn&1024)return!0;if(Cn&16)return Oe?hasPropsChanged(Oe,He,An):!!He;if(Cn&8){const En=e.dynamicProps;for(let Sn=0;Sn<En.length;Sn++){const Tn=En[Sn];if(He[Tn]!==Oe[Tn]&&!isEmitListener(An,Tn))return!0}}}else return(Be||We)&&(!We||!We.$stable)?!0:Oe===He?!1:Oe?He?hasPropsChanged(Oe,He,An):!0:!!He;return!1}function hasPropsChanged(ke,e,Te){const Oe=Object.keys(e);if(Oe.length!==Object.keys(ke).length)return!0;for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];if(e[Ue]!==ke[Ue]&&!isEmitListener(Te,Ue))return!0}return!1}function updateHOCHostEl({vnode:ke,parent:e},Te){for(;e;){const Oe=e.subTree;if(Oe.suspense&&Oe.suspense.activeBranch===ke&&(Oe.el=ke.el),Oe===ke)(ke=e.vnode).el=Te,e=e.parent;else break}}const isSuspense=ke=>ke.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(ke,e,Te,Oe,Be,Ue,He,We,Cn,An){if(ke==null)mountSuspense(e,Te,Oe,Be,Ue,He,We,Cn,An);else{if(Ue&&Ue.deps>0&&!ke.suspense.isInFallback){e.suspense=ke.suspense,e.suspense.vnode=e,e.el=ke.el;return}patchSuspense(ke,e,Te,Oe,Be,He,We,Cn,An)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(ke,e){const Te=ke.props&&ke.props[e];isFunction(Te)&&Te()}function mountSuspense(ke,e,Te,Oe,Be,Ue,He,We,Cn){const{p:An,o:{createElement:En}}=Cn,Sn=En("div"),Tn=ke.suspense=createSuspenseBoundary(ke,Be,Oe,e,Sn,Te,Ue,He,We,Cn);An(null,Tn.pendingBranch=ke.ssContent,Sn,null,Oe,Tn,Ue,He),Tn.deps>0?(triggerEvent(ke,"onPending"),triggerEvent(ke,"onFallback"),An(null,ke.ssFallback,e,Te,Oe,null,Ue,He),setActiveBranch(Tn,ke.ssFallback)):Tn.resolve(!1,!0)}function patchSuspense(ke,e,Te,Oe,Be,Ue,He,We,{p:Cn,um:An,o:{createElement:En}}){const Sn=e.suspense=ke.suspense;Sn.vnode=e,e.el=ke.el;const Tn=e.ssContent,Ln=e.ssFallback,{activeBranch:Bn,pendingBranch:ei,isInFallback:ni,isHydrating:ti}=Sn;if(ei)Sn.pendingBranch=Tn,isSameVNodeType(Tn,ei)?(Cn(ei,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0?Sn.resolve():ni&&(ti||(Cn(Bn,Ln,Te,Oe,Be,null,Ue,He,We),setActiveBranch(Sn,Ln)))):(Sn.pendingId=suspenseId++,ti?(Sn.isHydrating=!1,Sn.activeBranch=ei):An(ei,Be,Sn),Sn.deps=0,Sn.effects.length=0,Sn.hiddenContainer=En("div"),ni?(Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0?Sn.resolve():(Cn(Bn,Ln,Te,Oe,Be,null,Ue,He,We),setActiveBranch(Sn,Ln))):Bn&&isSameVNodeType(Tn,Bn)?(Cn(Bn,Tn,Te,Oe,Be,Sn,Ue,He,We),Sn.resolve(!0)):(Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0&&Sn.resolve()));else if(Bn&&isSameVNodeType(Tn,Bn))Cn(Bn,Tn,Te,Oe,Be,Sn,Ue,He,We),setActiveBranch(Sn,Tn);else if(triggerEvent(e,"onPending"),Sn.pendingBranch=Tn,Tn.shapeFlag&512?Sn.pendingId=Tn.component.suspenseId:Sn.pendingId=suspenseId++,Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0)Sn.resolve();else{const{timeout:ri,pendingId:oi}=Sn;ri>0?setTimeout(()=>{Sn.pendingId===oi&&Sn.fallback(Ln)},ri):ri===0&&Sn.fallback(Ln)}}function createSuspenseBoundary(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En=!1){const{p:Sn,m:Tn,um:Ln,n:Bn,o:{parentNode:ei,remove:ni}}=An;let ti;const ri=isVNodeSuspensible(ke);ri&&e&&e.pendingBranch&&(ti=e.pendingId,e.deps++);const oi=ke.props?toNumber(ke.props.timeout):void 0,ai=Ue,ci={vnode:ke,parent:e,parentComponent:Te,namespace:He,container:Oe,hiddenContainer:Be,deps:0,pendingId:suspenseId++,timeout:typeof oi=="number"?oi:-1,activeBranch:null,pendingBranch:null,isInFallback:!En,isHydrating:En,isUnmounted:!1,effects:[],resolve(Pi=!1,vi=!1){const{vnode:pi,activeBranch:Mi,pendingBranch:Fi,pendingId:fi,effects:ui,parentComponent:Oi,container:Ni}=ci;let nr=!1;ci.isHydrating?ci.isHydrating=!1:Pi||(nr=Mi&&Fi.transition&&Fi.transition.mode==="out-in",nr&&(Mi.transition.afterLeave=()=>{fi===ci.pendingId&&(Tn(Fi,Ni,Ue===ai?Bn(Mi):Ue,0),queuePostFlushCb(ui))}),Mi&&(ei(Mi.el)===Ni&&(Ue=Bn(Mi)),Ln(Mi,Oi,ci,!0)),nr||Tn(Fi,Ni,Ue,0)),setActiveBranch(ci,Fi),ci.pendingBranch=null,ci.isInFallback=!1;let er=ci.parent,cr=!1;for(;er;){if(er.pendingBranch){er.effects.push(...ui),cr=!0;break}er=er.parent}!cr&&!nr&&queuePostFlushCb(ui),ci.effects=[],ri&&e&&e.pendingBranch&&ti===e.pendingId&&(e.deps--,e.deps===0&&!vi&&e.resolve()),triggerEvent(pi,"onResolve")},fallback(Pi){if(!ci.pendingBranch)return;const{vnode:vi,activeBranch:pi,parentComponent:Mi,container:Fi,namespace:fi}=ci;triggerEvent(vi,"onFallback");const ui=Bn(pi),Oi=()=>{ci.isInFallback&&(Sn(null,Pi,Fi,ui,Mi,null,fi,We,Cn),setActiveBranch(ci,Pi))},Ni=Pi.transition&&Pi.transition.mode==="out-in";Ni&&(pi.transition.afterLeave=Oi),ci.isInFallback=!0,Ln(pi,Mi,null,!0),Ni||Oi()},move(Pi,vi,pi){ci.activeBranch&&Tn(ci.activeBranch,Pi,vi,pi),ci.container=Pi},next(){return ci.activeBranch&&Bn(ci.activeBranch)},registerDep(Pi,vi,pi){const Mi=!!ci.pendingBranch;Mi&&ci.deps++;const Fi=Pi.vnode.el;Pi.asyncDep.catch(fi=>{handleError(fi,Pi,0)}).then(fi=>{if(Pi.isUnmounted||ci.isUnmounted||ci.pendingId!==Pi.suspenseId)return;Pi.asyncResolved=!0;const{vnode:ui}=Pi;handleSetupResult(Pi,fi,!1),Fi&&(ui.el=Fi);const Oi=!Fi&&Pi.subTree.el;vi(Pi,ui,ei(Fi||Pi.subTree.el),Fi?null:Bn(Pi.subTree),ci,He,pi),Oi&&ni(Oi),updateHOCHostEl(Pi,ui.el),Mi&&--ci.deps===0&&ci.resolve()})},unmount(Pi,vi){ci.isUnmounted=!0,ci.activeBranch&&Ln(ci.activeBranch,Te,Pi,vi),ci.pendingBranch&&Ln(ci.pendingBranch,Te,Pi,vi)}};return ci}function hydrateSuspense(ke,e,Te,Oe,Be,Ue,He,We,Cn){const An=e.suspense=createSuspenseBoundary(e,Oe,Te,ke.parentNode,document.createElement("div"),null,Be,Ue,He,We,!0),En=Cn(ke,An.pendingBranch=e.ssContent,Te,An,Ue,He);return An.deps===0&&An.resolve(!1,!0),En}function normalizeSuspenseChildren(ke){const{shapeFlag:e,children:Te}=ke,Oe=e&32;ke.ssContent=normalizeSuspenseSlot(Oe?Te.default:Te),ke.ssFallback=Oe?normalizeSuspenseSlot(Te.fallback):createVNode(Comment)}function normalizeSuspenseSlot(ke){let e;if(isFunction(ke)){const Te=isBlockTreeEnabled&&ke._c;Te&&(ke._d=!1,openBlock()),ke=ke(),Te&&(ke._d=!0,e=currentBlock,closeBlock())}return isArray$1(ke)&&(ke=filterSingleRoot(ke)),ke=normalizeVNode(ke),e&&!ke.dynamicChildren&&(ke.dynamicChildren=e.filter(Te=>Te!==ke)),ke}function queueEffectWithSuspense(ke,e){e&&e.pendingBranch?isArray$1(ke)?e.effects.push(...ke):e.effects.push(ke):queuePostFlushCb(ke)}function setActiveBranch(ke,e){ke.activeBranch=e;const{vnode:Te,parentComponent:Oe}=ke;let Be=e.el;for(;!Be&&e.component;)e=e.component.subTree,Be=e.el;Te.el=Be,Oe&&Oe.subTree===Te&&(Oe.vnode.el=Be,updateHOCHostEl(Oe,Be))}function isVNodeSuspensible(ke){const e=ke.props&&ke.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(ke=!1){blockStack.push(currentBlock=ke?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(ke,e=!1){isBlockTreeEnabled+=ke,ke<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(ke){return ke.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(ke),ke}function createElementBlock(ke,e,Te,Oe,Be,Ue){return setupBlock(createBaseVNode(ke,e,Te,Oe,Be,Ue,!0))}function createBlock(ke,e,Te,Oe,Be){return setupBlock(createVNode(ke,e,Te,Oe,Be,!0))}function isVNode(ke){return ke?ke.__v_isVNode===!0:!1}function isSameVNodeType(ke,e){return ke.type===e.type&&ke.key===e.key}function transformVNodeArgs(ke){}const normalizeKey=({key:ke})=>ke??null,normalizeRef=({ref:ke,ref_key:e,ref_for:Te})=>(typeof ke=="number"&&(ke=""+ke),ke!=null?isString(ke)||isRef(ke)||isFunction(ke)?{i:currentRenderingInstance,r:ke,k:e,f:!!Te}:ke:null);function createBaseVNode(ke,e=null,Te=null,Oe=0,Be=null,Ue=ke===Fragment?0:1,He=!1,We=!1){const Cn={__v_isVNode:!0,__v_skip:!0,type:ke,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:Te,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Ue,patchFlag:Oe,dynamicProps:Be,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return We?(normalizeChildren(Cn,Te),Ue&128&&ke.normalize(Cn)):Te&&(Cn.shapeFlag|=isString(Te)?8:16),isBlockTreeEnabled>0&&!He&&currentBlock&&(Cn.patchFlag>0||Ue&6)&&Cn.patchFlag!==32&&currentBlock.push(Cn),Cn}const createVNode=_createVNode;function _createVNode(ke,e=null,Te=null,Oe=0,Be=null,Ue=!1){if((!ke||ke===NULL_DYNAMIC_COMPONENT)&&(ke=Comment),isVNode(ke)){const We=cloneVNode(ke,e,!0);return Te&&normalizeChildren(We,Te),isBlockTreeEnabled>0&&!Ue&&currentBlock&&(We.shapeFlag&6?currentBlock[currentBlock.indexOf(ke)]=We:currentBlock.push(We)),We.patchFlag=-2,We}if(isClassComponent(ke)&&(ke=ke.__vccOpts),e){e=guardReactiveProps(e);let{class:We,style:Cn}=e;We&&!isString(We)&&(e.class=normalizeClass(We)),isObject$1(Cn)&&(isProxy(Cn)&&!isArray$1(Cn)&&(Cn=extend$5({},Cn)),e.style=normalizeStyle(Cn))}const He=isString(ke)?1:isSuspense(ke)?128:isTeleport(ke)?64:isObject$1(ke)?4:isFunction(ke)?2:0;return createBaseVNode(ke,e,Te,Oe,Be,He,Ue,!0)}function guardReactiveProps(ke){return ke?isProxy(ke)||isInternalObject(ke)?extend$5({},ke):ke:null}function cloneVNode(ke,e,Te=!1,Oe=!1){const{props:Be,ref:Ue,patchFlag:He,children:We,transition:Cn}=ke,An=e?mergeProps(Be||{},e):Be,En={__v_isVNode:!0,__v_skip:!0,type:ke.type,props:An,key:An&&normalizeKey(An),ref:e&&e.ref?Te&&Ue?isArray$1(Ue)?Ue.concat(normalizeRef(e)):[Ue,normalizeRef(e)]:normalizeRef(e):Ue,scopeId:ke.scopeId,slotScopeIds:ke.slotScopeIds,children:We,target:ke.target,targetStart:ke.targetStart,targetAnchor:ke.targetAnchor,staticCount:ke.staticCount,shapeFlag:ke.shapeFlag,patchFlag:e&&ke.type!==Fragment?He===-1?16:He|16:He,dynamicProps:ke.dynamicProps,dynamicChildren:ke.dynamicChildren,appContext:ke.appContext,dirs:ke.dirs,transition:Cn,component:ke.component,suspense:ke.suspense,ssContent:ke.ssContent&&cloneVNode(ke.ssContent),ssFallback:ke.ssFallback&&cloneVNode(ke.ssFallback),el:ke.el,anchor:ke.anchor,ctx:ke.ctx,ce:ke.ce};return Cn&&Oe&&setTransitionHooks(En,Cn.clone(En)),En}function createTextVNode(ke=" ",e=0){return createVNode(Text$1,null,ke,e)}function createStaticVNode(ke,e){const Te=createVNode(Static,null,ke);return Te.staticCount=e,Te}function createCommentVNode(ke="",e=!1){return e?(openBlock(),createBlock(Comment,null,ke)):createVNode(Comment,null,ke)}function normalizeVNode(ke){return ke==null||typeof ke=="boolean"?createVNode(Comment):isArray$1(ke)?createVNode(Fragment,null,ke.slice()):isVNode(ke)?cloneIfMounted(ke):createVNode(Text$1,null,String(ke))}function cloneIfMounted(ke){return ke.el===null&&ke.patchFlag!==-1||ke.memo?ke:cloneVNode(ke)}function normalizeChildren(ke,e){let Te=0;const{shapeFlag:Oe}=ke;if(e==null)e=null;else if(isArray$1(e))Te=16;else if(typeof e=="object")if(Oe&65){const Be=e.default;Be&&(Be._c&&(Be._d=!1),normalizeChildren(ke,Be()),Be._c&&(Be._d=!0));return}else{Te=32;const Be=e._;!Be&&!isInternalObject(e)?e._ctx=currentRenderingInstance:Be===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,ke.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},Te=32):(e=String(e),Oe&64?(Te=16,e=[createTextVNode(e)]):Te=8);ke.children=e,ke.shapeFlag|=Te}function mergeProps(...ke){const e={};for(let Te=0;Te<ke.length;Te++){const Oe=ke[Te];for(const Be in Oe)if(Be==="class")e.class!==Oe.class&&(e.class=normalizeClass([e.class,Oe.class]));else if(Be==="style")e.style=normalizeStyle([e.style,Oe.style]);else if(isOn(Be)){const Ue=e[Be],He=Oe[Be];He&&Ue!==He&&!(isArray$1(Ue)&&Ue.includes(He))&&(e[Be]=Ue?[].concat(Ue,He):He)}else Be!==""&&(e[Be]=Oe[Be])}return e}function invokeVNodeHook(ke,e,Te,Oe=null){callWithAsyncErrorHandling(ke,e,7,[Te,Oe])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(ke,e,Te){const Oe=ke.type,Be=(e?e.appContext:ke.appContext)||emptyAppContext,Ue={uid:uid++,vnode:ke,type:Oe,parent:e,appContext:Be,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(Be.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Oe,Be),emitsOptions:normalizeEmitsOptions(Oe,Be),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Oe.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:Te,suspenseId:Te?Te.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ue.ctx={_:Ue},Ue.root=e?e.root:Ue,Ue.emit=emit.bind(null,Ue),ke.ce&&ke.ce(Ue),Ue}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const ke=getGlobalThis(),e=(Te,Oe)=>{let Be;return(Be=ke[Te])||(Be=ke[Te]=[]),Be.push(Oe),Ue=>{Be.length>1?Be.forEach(He=>He(Ue)):Be[0](Ue)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",Te=>currentInstance=Te),setInSSRSetupState=e("__VUE_SSR_SETTERS__",Te=>isInSSRComponentSetup=Te)}const setCurrentInstance=ke=>{const e=currentInstance;return internalSetCurrentInstance(ke),ke.scope.on(),()=>{ke.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(ke){return ke.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(ke,e=!1,Te=!1){e&&setInSSRSetupState(e);const{props:Oe,children:Be}=ke.vnode,Ue=isStatefulComponent(ke);initProps(ke,Oe,Ue,e),initSlots(ke,Be,Te);const He=Ue?setupStatefulComponent(ke,e):void 0;return e&&setInSSRSetupState(!1),He}function setupStatefulComponent(ke,e){const Te=ke.type;ke.accessCache=Object.create(null),ke.proxy=new Proxy(ke.ctx,PublicInstanceProxyHandlers);const{setup:Oe}=Te;if(Oe){pauseTracking();const Be=ke.setupContext=Oe.length>1?createSetupContext(ke):null,Ue=setCurrentInstance(ke),He=callWithErrorHandling(Oe,ke,0,[ke.props,Be]),We=isPromise(He);if(resetTracking(),Ue(),(We||ke.sp)&&!isAsyncWrapper(ke)&&markAsyncBoundary(ke),We){if(He.then(unsetCurrentInstance,unsetCurrentInstance),e)return He.then(Cn=>{handleSetupResult(ke,Cn,e)}).catch(Cn=>{handleError(Cn,ke,0)});ke.asyncDep=He}else handleSetupResult(ke,He,e)}else finishComponentSetup(ke,e)}function handleSetupResult(ke,e,Te){isFunction(e)?ke.type.__ssrInlineRender?ke.ssrRender=e:ke.render=e:isObject$1(e)&&(ke.setupState=proxyRefs(e)),finishComponentSetup(ke,Te)}let compile$1,installWithProxy;function registerRuntimeCompiler(ke){compile$1=ke,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(ke,e,Te){const Oe=ke.type;if(!ke.render){if(!e&&compile$1&&!Oe.render){const Be=Oe.template||resolveMergedOptions(ke).template;if(Be){const{isCustomElement:Ue,compilerOptions:He}=ke.appContext.config,{delimiters:We,compilerOptions:Cn}=Oe,An=extend$5(extend$5({isCustomElement:Ue,delimiters:We},He),Cn);Oe.render=compile$1(Be,An)}}ke.render=Oe.render||NOOP,installWithProxy&&installWithProxy(ke)}{const Be=setCurrentInstance(ke);pauseTracking();try{applyOptions(ke)}finally{resetTracking(),Be()}}}const attrsProxyHandlers={get(ke,e){return track(ke,"get",""),ke[e]}};function createSetupContext(ke){const e=Te=>{ke.exposed=Te||{}};return{attrs:new Proxy(ke.attrs,attrsProxyHandlers),slots:ke.slots,emit:ke.emit,expose:e}}function getComponentPublicInstance(ke){return ke.exposed?ke.exposeProxy||(ke.exposeProxy=new Proxy(proxyRefs(markRaw(ke.exposed)),{get(e,Te){if(Te in e)return e[Te];if(Te in publicPropertiesMap)return publicPropertiesMap[Te](ke)},has(e,Te){return Te in e||Te in publicPropertiesMap}})):ke.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=ke=>ke.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(ke,e=!0){return isFunction(ke)?ke.displayName||ke.name:ke.name||e&&ke.__name}function formatComponentName(ke,e,Te=!1){let Oe=getComponentName(e);if(!Oe&&e.__file){const Be=e.__file.match(/([^/\\]+)\.\w+$/);Be&&(Oe=Be[1])}if(!Oe&&ke&&ke.parent){const Be=Ue=>{for(const He in Ue)if(Ue[He]===e)return He};Oe=Be(ke.components||ke.parent.type.components)||Be(ke.appContext.components)}return Oe?classify(Oe):Te?"App":"Anonymous"}function isClassComponent(ke){return isFunction(ke)&&"__vccOpts"in ke}const computed=(ke,e)=>computed$1(ke,e,isInSSRComponentSetup);function h$1(ke,e,Te){const Oe=arguments.length;return Oe===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(ke,null,[e]):createVNode(ke,e):createVNode(ke,null,e):(Oe>3?Te=Array.prototype.slice.call(arguments,2):Oe===3&&isVNode(Te)&&(Te=[Te]),createVNode(ke,e,Te))}function initCustomFormatter(){}function withMemo(ke,e,Te,Oe){const Be=Te[Oe];if(Be&&isMemoSame(Be,ke))return Be;const Ue=e();return Ue.memo=ke.slice(),Ue.cacheIndex=Oe,Te[Oe]=Ue}function isMemoSame(ke,e){const Te=ke.memo;if(Te.length!=e.length)return!1;for(let Oe=0;Oe<Te.length;Oe++)if(hasChanged(Te[Oe],e[Oe]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(ke),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:ke=>ke})}catch{}const unsafeToTrustedHTML=policy?ke=>policy.createHTML(ke):ke=>ke,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(ke,e,Te)=>{e.insertBefore(ke,Te||null)},remove:ke=>{const e=ke.parentNode;e&&e.removeChild(ke)},createElement:(ke,e,Te,Oe)=>{const Be=e==="svg"?doc.createElementNS(svgNS,ke):e==="mathml"?doc.createElementNS(mathmlNS,ke):Te?doc.createElement(ke,{is:Te}):doc.createElement(ke);return ke==="select"&&Oe&&Oe.multiple!=null&&Be.setAttribute("multiple",Oe.multiple),Be},createText:ke=>doc.createTextNode(ke),createComment:ke=>doc.createComment(ke),setText:(ke,e)=>{ke.nodeValue=e},setElementText:(ke,e)=>{ke.textContent=e},parentNode:ke=>ke.parentNode,nextSibling:ke=>ke.nextSibling,querySelector:ke=>doc.querySelector(ke),setScopeId(ke,e){ke.setAttribute(e,"")},insertStaticContent(ke,e,Te,Oe,Be,Ue){const He=Te?Te.previousSibling:e.lastChild;if(Be&&(Be===Ue||Be.nextSibling))for(;e.insertBefore(Be.cloneNode(!0),Te),!(Be===Ue||!(Be=Be.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(Oe==="svg"?`<svg>${ke}</svg>`:Oe==="mathml"?`<math>${ke}</math>`:ke);const We=templateContainer.content;if(Oe==="svg"||Oe==="mathml"){const Cn=We.firstChild;for(;Cn.firstChild;)We.appendChild(Cn.firstChild);We.removeChild(Cn)}e.insertBefore(We,Te)}return[He?He.nextSibling:e.firstChild,Te?Te.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=ke=>(ke.displayName="Transition",ke.props=TransitionPropsValidators,ke),Transition=decorate$1((ke,{slots:e})=>h$1(BaseTransition,resolveTransitionProps(ke),e)),callHook=(ke,e=[])=>{isArray$1(ke)?ke.forEach(Te=>Te(...e)):ke&&ke(...e)},hasExplicitCallback=ke=>ke?isArray$1(ke)?ke.some(e=>e.length>1):ke.length>1:!1;function resolveTransitionProps(ke){const e={};for(const ui in ke)ui in DOMTransitionPropsValidators||(e[ui]=ke[ui]);if(ke.css===!1)return e;const{name:Te="v",type:Oe,duration:Be,enterFromClass:Ue=`${Te}-enter-from`,enterActiveClass:He=`${Te}-enter-active`,enterToClass:We=`${Te}-enter-to`,appearFromClass:Cn=Ue,appearActiveClass:An=He,appearToClass:En=We,leaveFromClass:Sn=`${Te}-leave-from`,leaveActiveClass:Tn=`${Te}-leave-active`,leaveToClass:Ln=`${Te}-leave-to`}=ke,Bn=normalizeDuration(Be),ei=Bn&&Bn[0],ni=Bn&&Bn[1],{onBeforeEnter:ti,onEnter:ri,onEnterCancelled:oi,onLeave:ai,onLeaveCancelled:ci,onBeforeAppear:Pi=ti,onAppear:vi=ri,onAppearCancelled:pi=oi}=e,Mi=(ui,Oi,Ni,nr)=>{ui._enterCancelled=nr,removeTransitionClass(ui,Oi?En:We),removeTransitionClass(ui,Oi?An:He),Ni&&Ni()},Fi=(ui,Oi)=>{ui._isLeaving=!1,removeTransitionClass(ui,Sn),removeTransitionClass(ui,Ln),removeTransitionClass(ui,Tn),Oi&&Oi()},fi=ui=>(Oi,Ni)=>{const nr=ui?vi:ri,er=()=>Mi(Oi,ui,Ni);callHook(nr,[Oi,er]),nextFrame(()=>{removeTransitionClass(Oi,ui?Cn:Ue),addTransitionClass(Oi,ui?En:We),hasExplicitCallback(nr)||whenTransitionEnds(Oi,Oe,ei,er)})};return extend$5(e,{onBeforeEnter(ui){callHook(ti,[ui]),addTransitionClass(ui,Ue),addTransitionClass(ui,He)},onBeforeAppear(ui){callHook(Pi,[ui]),addTransitionClass(ui,Cn),addTransitionClass(ui,An)},onEnter:fi(!1),onAppear:fi(!0),onLeave(ui,Oi){ui._isLeaving=!0;const Ni=()=>Fi(ui,Oi);addTransitionClass(ui,Sn),ui._enterCancelled?(addTransitionClass(ui,Tn),forceReflow()):(forceReflow(),addTransitionClass(ui,Tn)),nextFrame(()=>{ui._isLeaving&&(removeTransitionClass(ui,Sn),addTransitionClass(ui,Ln),hasExplicitCallback(ai)||whenTransitionEnds(ui,Oe,ni,Ni))}),callHook(ai,[ui,Ni])},onEnterCancelled(ui){Mi(ui,!1,void 0,!0),callHook(oi,[ui])},onAppearCancelled(ui){Mi(ui,!0,void 0,!0),callHook(pi,[ui])},onLeaveCancelled(ui){Fi(ui),callHook(ci,[ui])}})}function normalizeDuration(ke){if(ke==null)return null;if(isObject$1(ke))return[NumberOf(ke.enter),NumberOf(ke.leave)];{const e=NumberOf(ke);return[e,e]}}function NumberOf(ke){return toNumber(ke)}function addTransitionClass(ke,e){e.split(/\s+/).forEach(Te=>Te&&ke.classList.add(Te)),(ke[vtcKey]||(ke[vtcKey]=new Set)).add(e)}function removeTransitionClass(ke,e){e.split(/\s+/).forEach(Oe=>Oe&&ke.classList.remove(Oe));const Te=ke[vtcKey];Te&&(Te.delete(e),Te.size||(ke[vtcKey]=void 0))}function nextFrame(ke){requestAnimationFrame(()=>{requestAnimationFrame(ke)})}let endId=0;function whenTransitionEnds(ke,e,Te,Oe){const Be=ke._endId=++endId,Ue=()=>{Be===ke._endId&&Oe()};if(Te!=null)return setTimeout(Ue,Te);const{type:He,timeout:We,propCount:Cn}=getTransitionInfo(ke,e);if(!He)return Oe();const An=He+"end";let En=0;const Sn=()=>{ke.removeEventListener(An,Tn),Ue()},Tn=Ln=>{Ln.target===ke&&++En>=Cn&&Sn()};setTimeout(()=>{En<Cn&&Sn()},We+1),ke.addEventListener(An,Tn)}function getTransitionInfo(ke,e){const Te=window.getComputedStyle(ke),Oe=Bn=>(Te[Bn]||"").split(", "),Be=Oe(`${TRANSITION}Delay`),Ue=Oe(`${TRANSITION}Duration`),He=getTimeout(Be,Ue),We=Oe(`${ANIMATION}Delay`),Cn=Oe(`${ANIMATION}Duration`),An=getTimeout(We,Cn);let En=null,Sn=0,Tn=0;e===TRANSITION?He>0&&(En=TRANSITION,Sn=He,Tn=Ue.length):e===ANIMATION?An>0&&(En=ANIMATION,Sn=An,Tn=Cn.length):(Sn=Math.max(He,An),En=Sn>0?He>An?TRANSITION:ANIMATION:null,Tn=En?En===TRANSITION?Ue.length:Cn.length:0);const Ln=En===TRANSITION&&/\b(transform|all)(,|$)/.test(Oe(`${TRANSITION}Property`).toString());return{type:En,timeout:Sn,propCount:Tn,hasTransform:Ln}}function getTimeout(ke,e){for(;ke.length<e.length;)ke=ke.concat(ke);return Math.max(...e.map((Te,Oe)=>toMs(Te)+toMs(ke[Oe])))}function toMs(ke){return ke==="auto"?0:Number(ke.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(ke,e,Te){const Oe=ke[vtcKey];Oe&&(e=(e?[e,...Oe]:[...Oe]).join(" ")),e==null?ke.removeAttribute("class"):Te?ke.setAttribute("class",e):ke.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(ke,{value:e},{transition:Te}){ke[vShowOriginalDisplay]=ke.style.display==="none"?"":ke.style.display,Te&&e?Te.beforeEnter(ke):setDisplay(ke,e)},mounted(ke,{value:e},{transition:Te}){Te&&e&&Te.enter(ke)},updated(ke,{value:e,oldValue:Te},{transition:Oe}){!e!=!Te&&(Oe?e?(Oe.beforeEnter(ke),setDisplay(ke,!0),Oe.enter(ke)):Oe.leave(ke,()=>{setDisplay(ke,!1)}):setDisplay(ke,e))},beforeUnmount(ke,{value:e}){setDisplay(ke,e)}};function setDisplay(ke,e){ke.style.display=e?ke[vShowOriginalDisplay]:"none",ke[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:ke})=>{if(!ke)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(ke){const e=getCurrentInstance();if(!e)return;const Te=e.ut=(Be=ke(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Ue=>setVarsOnNode(Ue,Be))},Oe=()=>{const Be=ke(e.proxy);e.ce?setVarsOnNode(e.ce,Be):setVarsOnVNode(e.subTree,Be),Te(Be)};onBeforeUpdate(()=>{queuePostFlushCb(Oe)}),onMounted(()=>{watch(Oe,NOOP,{flush:"post"});const Be=new MutationObserver(Oe);Be.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>Be.disconnect())})}function setVarsOnVNode(ke,e){if(ke.shapeFlag&128){const Te=ke.suspense;ke=Te.activeBranch,Te.pendingBranch&&!Te.isHydrating&&Te.effects.push(()=>{setVarsOnVNode(Te.activeBranch,e)})}for(;ke.component;)ke=ke.component.subTree;if(ke.shapeFlag&1&&ke.el)setVarsOnNode(ke.el,e);else if(ke.type===Fragment)ke.children.forEach(Te=>setVarsOnVNode(Te,e));else if(ke.type===Static){let{el:Te,anchor:Oe}=ke;for(;Te&&(setVarsOnNode(Te,e),Te!==Oe);)Te=Te.nextSibling}}function setVarsOnNode(ke,e){if(ke.nodeType===1){const Te=ke.style;let Oe="";for(const Be in e)Te.setProperty(`--${Be}`,e[Be]),Oe+=`--${Be}: ${e[Be]};`;Te[CSS_VAR_TEXT]=Oe}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(ke,e,Te){const Oe=ke.style,Be=isString(Te);let Ue=!1;if(Te&&!Be){if(e)if(isString(e))for(const He of e.split(";")){const We=He.slice(0,He.indexOf(":")).trim();Te[We]==null&&setStyle(Oe,We,"")}else for(const He in e)Te[He]==null&&setStyle(Oe,He,"");for(const He in Te)He==="display"&&(Ue=!0),setStyle(Oe,He,Te[He])}else if(Be){if(e!==Te){const He=Oe[CSS_VAR_TEXT];He&&(Te+=";"+He),Oe.cssText=Te,Ue=displayRE.test(Te)}}else e&&ke.removeAttribute("style");vShowOriginalDisplay in ke&&(ke[vShowOriginalDisplay]=Ue?Oe.display:"",ke[vShowHidden]&&(Oe.display="none"))}const importantRE=/\s*!important$/;function setStyle(ke,e,Te){if(isArray$1(Te))Te.forEach(Oe=>setStyle(ke,e,Oe));else if(Te==null&&(Te=""),e.startsWith("--"))ke.setProperty(e,Te);else{const Oe=autoPrefix(ke,e);importantRE.test(Te)?ke.setProperty(hyphenate(Oe),Te.replace(importantRE,""),"important"):ke[Oe]=Te}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(ke,e){const Te=prefixCache[e];if(Te)return Te;let Oe=camelize(e);if(Oe!=="filter"&&Oe in ke)return prefixCache[e]=Oe;Oe=capitalize(Oe);for(let Be=0;Be<prefixes.length;Be++){const Ue=prefixes[Be]+Oe;if(Ue in ke)return prefixCache[e]=Ue}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(ke,e,Te,Oe,Be,Ue=isSpecialBooleanAttr(e)){Oe&&e.startsWith("xlink:")?Te==null?ke.removeAttributeNS(xlinkNS,e.slice(6,e.length)):ke.setAttributeNS(xlinkNS,e,Te):Te==null||Ue&&!includeBooleanAttr(Te)?ke.removeAttribute(e):ke.setAttribute(e,Ue?"":isSymbol(Te)?String(Te):Te)}function patchDOMProp(ke,e,Te,Oe,Be){if(e==="innerHTML"||e==="textContent"){Te!=null&&(ke[e]=e==="innerHTML"?unsafeToTrustedHTML(Te):Te);return}const Ue=ke.tagName;if(e==="value"&&Ue!=="PROGRESS"&&!Ue.includes("-")){const We=Ue==="OPTION"?ke.getAttribute("value")||"":ke.value,Cn=Te==null?ke.type==="checkbox"?"on":"":String(Te);(We!==Cn||!("_value"in ke))&&(ke.value=Cn),Te==null&&ke.removeAttribute(e),ke._value=Te;return}let He=!1;if(Te===""||Te==null){const We=typeof ke[e];We==="boolean"?Te=includeBooleanAttr(Te):Te==null&&We==="string"?(Te="",He=!0):We==="number"&&(Te=0,He=!0)}try{ke[e]=Te}catch{}He&&ke.removeAttribute(Be||e)}function addEventListener(ke,e,Te,Oe){ke.addEventListener(e,Te,Oe)}function removeEventListener(ke,e,Te,Oe){ke.removeEventListener(e,Te,Oe)}const veiKey=Symbol("_vei");function patchEvent(ke,e,Te,Oe,Be=null){const Ue=ke[veiKey]||(ke[veiKey]={}),He=Ue[e];if(Oe&&He)He.value=Oe;else{const[We,Cn]=parseName(e);if(Oe){const An=Ue[e]=createInvoker(Oe,Be);addEventListener(ke,We,An,Cn)}else He&&(removeEventListener(ke,We,He,Cn),Ue[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(ke){let e;if(optionsModifierRE.test(ke)){e={};let Oe;for(;Oe=ke.match(optionsModifierRE);)ke=ke.slice(0,ke.length-Oe[0].length),e[Oe[0].toLowerCase()]=!0}return[ke[2]===":"?ke.slice(3):hyphenate(ke.slice(2)),e]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(ke,e){const Te=Oe=>{if(!Oe._vts)Oe._vts=Date.now();else if(Oe._vts<=Te.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Oe,Te.value),e,5,[Oe])};return Te.value=ke,Te.attached=getNow(),Te}function patchStopImmediatePropagation(ke,e){if(isArray$1(e)){const Te=ke.stopImmediatePropagation;return ke.stopImmediatePropagation=()=>{Te.call(ke),ke._stopped=!0},e.map(Oe=>Be=>!Be._stopped&&Oe&&Oe(Be))}else return e}const isNativeOn=ke=>ke.charCodeAt(0)===111&&ke.charCodeAt(1)===110&&ke.charCodeAt(2)>96&&ke.charCodeAt(2)<123,patchProp=(ke,e,Te,Oe,Be,Ue)=>{const He=Be==="svg";e==="class"?patchClass(ke,Oe,He):e==="style"?patchStyle(ke,Te,Oe):isOn(e)?isModelListener(e)||patchEvent(ke,e,Te,Oe,Ue):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(ke,e,Oe,He))?(patchDOMProp(ke,e,Oe),!ke.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(ke,e,Oe,He,Ue,e!=="value")):ke._isVueCE&&(/[A-Z]/.test(e)||!isString(Oe))?patchDOMProp(ke,camelize(e),Oe,Ue,e):(e==="true-value"?ke._trueValue=Oe:e==="false-value"&&(ke._falseValue=Oe),patchAttr(ke,e,Oe,He))};function shouldSetAsProp(ke,e,Te,Oe){if(Oe)return!!(e==="innerHTML"||e==="textContent"||e in ke&&isNativeOn(e)&&isFunction(Te));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&ke.tagName==="INPUT"||e==="type"&&ke.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const Be=ke.tagName;if(Be==="IMG"||Be==="VIDEO"||Be==="CANVAS"||Be==="SOURCE")return!1}return isNativeOn(e)&&isString(Te)?!1:e in ke}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(ke,e,Te){const Oe=defineComponent(ke,e);isPlainObject$2(Oe)&&extend$5(Oe,e);class Be extends VueElement{constructor(He){super(Oe,He,Te)}}return Be.def=Oe,Be}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(ke,e)=>defineCustomElement(ke,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,Te={},Oe=createApp){super(),this._def=e,this._props=Te,this._createApp=Oe,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&Oe!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let Oe=0;Oe<this.attributes.length;Oe++)this._setAttr(this.attributes[Oe].name);this._ob=new MutationObserver(Oe=>{for(const Be of Oe)this._setAttr(Be.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(Oe,Be=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Ue,styles:He}=Oe;let We;if(Ue&&!isArray$1(Ue))for(const Cn in Ue){const An=Ue[Cn];(An===Number||An&&An.type===Number)&&(Cn in this._props&&(this._props[Cn]=toNumber(this._props[Cn])),(We||(We=Object.create(null)))[camelize(Cn)]=!0)}this._numberProps=We,Be&&this._resolveProps(Oe),this.shadowRoot&&this._applyStyles(He),this._mount(Oe)},Te=this._def.__asyncLoader;Te?this._pendingResolve=Te().then(Oe=>e(this._def=Oe,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const Te=this._instance&&this._instance.exposed;if(Te)for(const Oe in Te)hasOwn(this,Oe)||Object.defineProperty(this,Oe,{get:()=>unref(Te[Oe])})}_resolveProps(e){const{props:Te}=e,Oe=isArray$1(Te)?Te:Object.keys(Te||{});for(const Be of Object.keys(this))Be[0]!=="_"&&Oe.includes(Be)&&this._setProp(Be,this[Be]);for(const Be of Oe.map(camelize))Object.defineProperty(this,Be,{get(){return this._getProp(Be)},set(Ue){this._setProp(Be,Ue,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const Te=this.hasAttribute(e);let Oe=Te?this.getAttribute(e):REMOVAL;const Be=camelize(e);Te&&this._numberProps&&this._numberProps[Be]&&(Oe=toNumber(Oe)),this._setProp(Be,Oe,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,Te,Oe=!0,Be=!1){if(Te!==this._props[e]&&(Te===REMOVAL?delete this._props[e]:(this._props[e]=Te,e==="key"&&this._app&&(this._app._ceVNode.key=Te)),Be&&this._instance&&this._update(),Oe)){const Ue=this._ob;Ue&&Ue.disconnect(),Te===!0?this.setAttribute(hyphenate(e),""):typeof Te=="string"||typeof Te=="number"?this.setAttribute(hyphenate(e),Te+""):Te||this.removeAttribute(hyphenate(e)),Ue&&Ue.observe(this,{attributes:!0})}}_update(){render$2(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const Te=createVNode(this._def,extend$5(e,this._props));return this._instance||(Te.ce=Oe=>{this._instance=Oe,Oe.ce=this,Oe.isCE=!0;const Be=(Ue,He)=>{this.dispatchEvent(new CustomEvent(Ue,isPlainObject$2(He[0])?extend$5({detail:He},He[0]):{detail:He}))};Oe.emit=(Ue,...He)=>{Be(Ue,He),hyphenate(Ue)!==Ue&&Be(hyphenate(Ue),He)},this._setParent()}),Te}_applyStyles(e,Te){if(!e)return;if(Te){if(Te===this._def||this._styleChildren.has(Te))return;this._styleChildren.add(Te)}const Oe=this._nonce;for(let Be=e.length-1;Be>=0;Be--){const Ue=document.createElement("style");Oe&&Ue.setAttribute("nonce",Oe),Ue.textContent=e[Be],this.shadowRoot.prepend(Ue)}}_parseSlots(){const e=this._slots={};let Te;for(;Te=this.firstChild;){const Oe=Te.nodeType===1&&Te.getAttribute("slot")||"default";(e[Oe]||(e[Oe]=[])).push(Te),this.removeChild(Te)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),Te=this._instance.type.__scopeId;for(let Oe=0;Oe<e.length;Oe++){const Be=e[Oe],Ue=Be.getAttribute("name")||"default",He=this._slots[Ue],We=Be.parentNode;if(He)for(const Cn of He){if(Te&&Cn.nodeType===1){const An=Te+"-s",En=document.createTreeWalker(Cn,1);Cn.setAttribute(An,"");let Sn;for(;Sn=En.nextNode();)Sn.setAttribute(An,"")}We.insertBefore(Cn,Be)}else for(;Be.firstChild;)We.insertBefore(Be.firstChild,Be);We.removeChild(Be)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(ke){const e=getCurrentInstance(),Te=e&&e.ce;return Te||null}function useShadowRoot(){const ke=useHost();return ke&&ke.shadowRoot}function useCssModule(ke="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const Te=e.type.__cssModules;if(!Te)return EMPTY_OBJ;const Oe=Te[ke];return Oe||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=ke=>(delete ke.props.mode,ke),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(ke,{slots:e}){const Te=getCurrentInstance(),Oe=useTransitionState();let Be,Ue;return onUpdated(()=>{if(!Be.length)return;const He=ke.moveClass||`${ke.name||"v"}-move`;if(!hasCSSTransform(Be[0].el,Te.vnode.el,He))return;Be.forEach(callPendingCbs),Be.forEach(recordPosition);const We=Be.filter(applyTranslation);forceReflow(),We.forEach(Cn=>{const An=Cn.el,En=An.style;addTransitionClass(An,He),En.transform=En.webkitTransform=En.transitionDuration="";const Sn=An[moveCbKey]=Tn=>{Tn&&Tn.target!==An||(!Tn||/transform$/.test(Tn.propertyName))&&(An.removeEventListener("transitionend",Sn),An[moveCbKey]=null,removeTransitionClass(An,He))};An.addEventListener("transitionend",Sn)})}),()=>{const He=toRaw(ke),We=resolveTransitionProps(He);let Cn=He.tag||Fragment;if(Be=[],Ue)for(let An=0;An<Ue.length;An++){const En=Ue[An];En.el&&En.el instanceof Element&&(Be.push(En),setTransitionHooks(En,resolveTransitionHooks(En,We,Oe,Te)),positionMap.set(En,En.el.getBoundingClientRect()))}Ue=e.default?getTransitionRawChildren(e.default()):[];for(let An=0;An<Ue.length;An++){const En=Ue[An];En.key!=null&&setTransitionHooks(En,resolveTransitionHooks(En,We,Oe,Te))}return createVNode(Cn,null,Ue)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(ke){const e=ke.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(ke){newPositionMap.set(ke,ke.el.getBoundingClientRect())}function applyTranslation(ke){const e=positionMap.get(ke),Te=newPositionMap.get(ke),Oe=e.left-Te.left,Be=e.top-Te.top;if(Oe||Be){const Ue=ke.el.style;return Ue.transform=Ue.webkitTransform=`translate(${Oe}px,${Be}px)`,Ue.transitionDuration="0s",ke}}function hasCSSTransform(ke,e,Te){const Oe=ke.cloneNode(),Be=ke[vtcKey];Be&&Be.forEach(We=>{We.split(/\s+/).forEach(Cn=>Cn&&Oe.classList.remove(Cn))}),Te.split(/\s+/).forEach(We=>We&&Oe.classList.add(We)),Oe.style.display="none";const Ue=e.nodeType===1?e:e.parentNode;Ue.appendChild(Oe);const{hasTransform:He}=getTransitionInfo(Oe);return Ue.removeChild(Oe),He}const getModelAssigner=ke=>{const e=ke.props["onUpdate:modelValue"]||!1;return isArray$1(e)?Te=>invokeArrayFns(e,Te):e};function onCompositionStart(ke){ke.target.composing=!0}function onCompositionEnd(ke){const e=ke.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(ke,{modifiers:{lazy:e,trim:Te,number:Oe}},Be){ke[assignKey]=getModelAssigner(Be);const Ue=Oe||Be.props&&Be.props.type==="number";addEventListener(ke,e?"change":"input",He=>{if(He.target.composing)return;let We=ke.value;Te&&(We=We.trim()),Ue&&(We=looseToNumber(We)),ke[assignKey](We)}),Te&&addEventListener(ke,"change",()=>{ke.value=ke.value.trim()}),e||(addEventListener(ke,"compositionstart",onCompositionStart),addEventListener(ke,"compositionend",onCompositionEnd),addEventListener(ke,"change",onCompositionEnd))},mounted(ke,{value:e}){ke.value=e??""},beforeUpdate(ke,{value:e,oldValue:Te,modifiers:{lazy:Oe,trim:Be,number:Ue}},He){if(ke[assignKey]=getModelAssigner(He),ke.composing)return;const We=(Ue||ke.type==="number")&&!/^0\d/.test(ke.value)?looseToNumber(ke.value):ke.value,Cn=e??"";We!==Cn&&(document.activeElement===ke&&ke.type!=="range"&&(Oe&&e===Te||Be&&ke.value.trim()===Cn)||(ke.value=Cn))}},vModelCheckbox={deep:!0,created(ke,e,Te){ke[assignKey]=getModelAssigner(Te),addEventListener(ke,"change",()=>{const Oe=ke._modelValue,Be=getValue$1(ke),Ue=ke.checked,He=ke[assignKey];if(isArray$1(Oe)){const We=looseIndexOf(Oe,Be),Cn=We!==-1;if(Ue&&!Cn)He(Oe.concat(Be));else if(!Ue&&Cn){const An=[...Oe];An.splice(We,1),He(An)}}else if(isSet(Oe)){const We=new Set(Oe);Ue?We.add(Be):We.delete(Be),He(We)}else He(getCheckboxValue(ke,Ue))})},mounted:setChecked,beforeUpdate(ke,e,Te){ke[assignKey]=getModelAssigner(Te),setChecked(ke,e,Te)}};function setChecked(ke,{value:e,oldValue:Te},Oe){ke._modelValue=e;let Be;if(isArray$1(e))Be=looseIndexOf(e,Oe.props.value)>-1;else if(isSet(e))Be=e.has(Oe.props.value);else{if(e===Te)return;Be=looseEqual(e,getCheckboxValue(ke,!0))}ke.checked!==Be&&(ke.checked=Be)}const vModelRadio={created(ke,{value:e},Te){ke.checked=looseEqual(e,Te.props.value),ke[assignKey]=getModelAssigner(Te),addEventListener(ke,"change",()=>{ke[assignKey](getValue$1(ke))})},beforeUpdate(ke,{value:e,oldValue:Te},Oe){ke[assignKey]=getModelAssigner(Oe),e!==Te&&(ke.checked=looseEqual(e,Oe.props.value))}},vModelSelect={deep:!0,created(ke,{value:e,modifiers:{number:Te}},Oe){const Be=isSet(e);addEventListener(ke,"change",()=>{const Ue=Array.prototype.filter.call(ke.options,He=>He.selected).map(He=>Te?looseToNumber(getValue$1(He)):getValue$1(He));ke[assignKey](ke.multiple?Be?new Set(Ue):Ue:Ue[0]),ke._assigning=!0,nextTick(()=>{ke._assigning=!1})}),ke[assignKey]=getModelAssigner(Oe)},mounted(ke,{value:e}){setSelected(ke,e)},beforeUpdate(ke,e,Te){ke[assignKey]=getModelAssigner(Te)},updated(ke,{value:e}){ke._assigning||setSelected(ke,e)}};function setSelected(ke,e){const Te=ke.multiple,Oe=isArray$1(e);if(!(Te&&!Oe&&!isSet(e))){for(let Be=0,Ue=ke.options.length;Be<Ue;Be++){const He=ke.options[Be],We=getValue$1(He);if(Te)if(Oe){const Cn=typeof We;Cn==="string"||Cn==="number"?He.selected=e.some(An=>String(An)===String(We)):He.selected=looseIndexOf(e,We)>-1}else He.selected=e.has(We);else if(looseEqual(getValue$1(He),e)){ke.selectedIndex!==Be&&(ke.selectedIndex=Be);return}}!Te&&ke.selectedIndex!==-1&&(ke.selectedIndex=-1)}}function getValue$1(ke){return"_value"in ke?ke._value:ke.value}function getCheckboxValue(ke,e){const Te=e?"_trueValue":"_falseValue";return Te in ke?ke[Te]:e}const vModelDynamic={created(ke,e,Te){callModelHook(ke,e,Te,null,"created")},mounted(ke,e,Te){callModelHook(ke,e,Te,null,"mounted")},beforeUpdate(ke,e,Te,Oe){callModelHook(ke,e,Te,Oe,"beforeUpdate")},updated(ke,e,Te,Oe){callModelHook(ke,e,Te,Oe,"updated")}};function resolveDynamicModel(ke,e){switch(ke){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(ke,e,Te,Oe,Be){const He=resolveDynamicModel(ke.tagName,Te.props&&Te.props.type)[Be];He&&He(ke,e,Te,Oe)}function initVModelForSSR(){vModelText.getSSRProps=({value:ke})=>({value:ke}),vModelRadio.getSSRProps=({value:ke},e)=>{if(e.props&&looseEqual(e.props.value,ke))return{checked:!0}},vModelCheckbox.getSSRProps=({value:ke},e)=>{if(isArray$1(ke)){if(e.props&&looseIndexOf(ke,e.props.value)>-1)return{checked:!0}}else if(isSet(ke)){if(e.props&&ke.has(e.props.value))return{checked:!0}}else if(ke)return{checked:!0}},vModelDynamic.getSSRProps=(ke,e)=>{if(typeof e.type!="string")return;const Te=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(Te.getSSRProps)return Te.getSSRProps(ke,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:ke=>ke.stopPropagation(),prevent:ke=>ke.preventDefault(),self:ke=>ke.target!==ke.currentTarget,ctrl:ke=>!ke.ctrlKey,shift:ke=>!ke.shiftKey,alt:ke=>!ke.altKey,meta:ke=>!ke.metaKey,left:ke=>"button"in ke&&ke.button!==0,middle:ke=>"button"in ke&&ke.button!==1,right:ke=>"button"in ke&&ke.button!==2,exact:(ke,e)=>systemModifiers.some(Te=>ke[`${Te}Key`]&&!e.includes(Te))},withModifiers=(ke,e)=>{const Te=ke._withMods||(ke._withMods={}),Oe=e.join(".");return Te[Oe]||(Te[Oe]=(Be,...Ue)=>{for(let He=0;He<e.length;He++){const We=modifierGuards[e[He]];if(We&&We(Be,e))return}return ke(Be,...Ue)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(ke,e)=>{const Te=ke._withKeys||(ke._withKeys={}),Oe=e.join(".");return Te[Oe]||(Te[Oe]=Be=>{if(!("key"in Be))return;const Ue=hyphenate(Be.key);if(e.some(He=>He===Ue||keyNames[He]===Ue))return ke(Be)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$2=(...ke)=>{ensureRenderer().render(...ke)},hydrate=(...ke)=>{ensureHydrationRenderer().hydrate(...ke)},createApp=(...ke)=>{const e=ensureRenderer().createApp(...ke),{mount:Te}=e;return e.mount=Oe=>{const Be=normalizeContainer(Oe);if(!Be)return;const Ue=e._component;!isFunction(Ue)&&!Ue.render&&!Ue.template&&(Ue.template=Be.innerHTML),Be.nodeType===1&&(Be.textContent="");const He=Te(Be,!1,resolveRootNamespace(Be));return Be instanceof Element&&(Be.removeAttribute("v-cloak"),Be.setAttribute("data-v-app","")),He},e},createSSRApp=(...ke)=>{const e=ensureHydrationRenderer().createApp(...ke),{mount:Te}=e;return e.mount=Oe=>{const Be=normalizeContainer(Oe);if(Be)return Te(Be,!0,resolveRootNamespace(Be))},e};function resolveRootNamespace(ke){if(ke instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&ke instanceof MathMLElement)return"mathml"}function normalizeContainer(ke){return isString(ke)?document.querySelector(ke):ke}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$2,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=ke=>activePinia=ke,piniaSymbol=Symbol();function isPlainObject$1(ke){return ke&&typeof ke=="object"&&Object.prototype.toString.call(ke)==="[object Object]"&&typeof ke.toJSON!="function"}var MutationType;(function(ke){ke.direct="direct",ke.patchObject="patch object",ke.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const ke=effectScope(!0),e=ke.run(()=>ref({}));let Te=[],Oe=[];const Be=markRaw({install(Ue){setActivePinia(Be),Be._a=Ue,Ue.provide(piniaSymbol,Be),Ue.config.globalProperties.$pinia=Be,Oe.forEach(He=>Te.push(He)),Oe=[]},use(Ue){return this._a?Te.push(Ue):Oe.push(Ue),this},_p:Te,_a:null,_e:ke,_s:new Map,state:e});return Be}const noop$2=()=>{};function addSubscription(ke,e,Te,Oe=noop$2){ke.push(e);const Be=()=>{const Ue=ke.indexOf(e);Ue>-1&&(ke.splice(Ue,1),Oe())};return!Te&&getCurrentScope()&&onScopeDispose(Be),Be}function triggerSubscriptions(ke,...e){ke.slice().forEach(Te=>{Te(...e)})}const fallbackRunWithContext=ke=>ke(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(ke,e){ke instanceof Map&&e instanceof Map?e.forEach((Te,Oe)=>ke.set(Oe,Te)):ke instanceof Set&&e instanceof Set&&e.forEach(ke.add,ke);for(const Te in e){if(!e.hasOwnProperty(Te))continue;const Oe=e[Te],Be=ke[Te];isPlainObject$1(Be)&&isPlainObject$1(Oe)&&ke.hasOwnProperty(Te)&&!isRef(Oe)&&!isReactive(Oe)?ke[Te]=mergeReactiveObjects(Be,Oe):ke[Te]=Oe}return ke}const skipHydrateSymbol=Symbol();function shouldHydrate(ke){return!isPlainObject$1(ke)||!ke.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(ke){return!!(isRef(ke)&&ke.effect)}function createOptionsStore(ke,e,Te,Oe){const{state:Be,actions:Ue,getters:He}=e,We=Te.state.value[ke];let Cn;function An(){We||(Te.state.value[ke]=Be?Be():{});const En=toRefs(Te.state.value[ke]);return assign$1(En,Ue,Object.keys(He||{}).reduce((Sn,Tn)=>(Sn[Tn]=markRaw(computed(()=>{setActivePinia(Te);const Ln=Te._s.get(ke);return He[Tn].call(Ln,Ln)})),Sn),{}))}return Cn=createSetupStore(ke,An,e,Te,Oe,!0),Cn}function createSetupStore(ke,e,Te={},Oe,Be,Ue){let He;const We=assign$1({actions:{}},Te),Cn={deep:!0};let An,En,Sn=[],Tn=[],Ln;const Bn=Oe.state.value[ke];!Ue&&!Bn&&(Oe.state.value[ke]={}),ref({});let ei;function ni(pi){let Mi;An=En=!1,typeof pi=="function"?(pi(Oe.state.value[ke]),Mi={type:MutationType.patchFunction,storeId:ke,events:Ln}):(mergeReactiveObjects(Oe.state.value[ke],pi),Mi={type:MutationType.patchObject,payload:pi,storeId:ke,events:Ln});const Fi=ei=Symbol();nextTick().then(()=>{ei===Fi&&(An=!0)}),En=!0,triggerSubscriptions(Sn,Mi,Oe.state.value[ke])}const ti=Ue?function(){const{state:Mi}=Te,Fi=Mi?Mi():{};this.$patch(fi=>{assign$1(fi,Fi)})}:noop$2;function ri(){He.stop(),Sn=[],Tn=[],Oe._s.delete(ke)}const oi=(pi,Mi="")=>{if(ACTION_MARKER in pi)return pi[ACTION_NAME]=Mi,pi;const Fi=function(){setActivePinia(Oe);const fi=Array.from(arguments),ui=[],Oi=[];function Ni(cr){ui.push(cr)}function nr(cr){Oi.push(cr)}triggerSubscriptions(Tn,{args:fi,name:Fi[ACTION_NAME],store:ci,after:Ni,onError:nr});let er;try{er=pi.apply(this&&this.$id===ke?this:ci,fi)}catch(cr){throw triggerSubscriptions(Oi,cr),cr}return er instanceof Promise?er.then(cr=>(triggerSubscriptions(ui,cr),cr)).catch(cr=>(triggerSubscriptions(Oi,cr),Promise.reject(cr))):(triggerSubscriptions(ui,er),er)};return Fi[ACTION_MARKER]=!0,Fi[ACTION_NAME]=Mi,Fi},ai={_p:Oe,$id:ke,$onAction:addSubscription.bind(null,Tn),$patch:ni,$reset:ti,$subscribe(pi,Mi={}){const Fi=addSubscription(Sn,pi,Mi.detached,()=>fi()),fi=He.run(()=>watch(()=>Oe.state.value[ke],ui=>{(Mi.flush==="sync"?En:An)&&pi({storeId:ke,type:MutationType.direct,events:Ln},ui)},assign$1({},Cn,Mi)));return Fi},$dispose:ri},ci=reactive(ai);Oe._s.set(ke,ci);const vi=(Oe._a&&Oe._a.runWithContext||fallbackRunWithContext)(()=>Oe._e.run(()=>(He=effectScope()).run(()=>e({action:oi}))));for(const pi in vi){const Mi=vi[pi];if(isRef(Mi)&&!isComputed(Mi)||isReactive(Mi))Ue||(Bn&&shouldHydrate(Mi)&&(isRef(Mi)?Mi.value=Bn[pi]:mergeReactiveObjects(Mi,Bn[pi])),Oe.state.value[ke][pi]=Mi);else if(typeof Mi=="function"){const Fi=oi(Mi,pi);vi[pi]=Fi,We.actions[pi]=Mi}}return assign$1(ci,vi),assign$1(toRaw(ci),vi),Object.defineProperty(ci,"$state",{get:()=>Oe.state.value[ke],set:pi=>{ni(Mi=>{assign$1(Mi,pi)})}}),Oe._p.forEach(pi=>{assign$1(ci,He.run(()=>pi({store:ci,app:Oe._a,pinia:Oe,options:We})))}),Bn&&Ue&&Te.hydrate&&Te.hydrate(ci.$state,Bn),An=!0,En=!0,ci}/*! #__NO_SIDE_EFFECTS__ */function defineStore(ke,e,Te){let Oe,Be;const Ue=typeof e=="function";typeof ke=="string"?(Oe=ke,Be=Ue?Te:e):(Be=ke,Oe=ke.id);function He(We,Cn){const An=hasInjectionContext();return We=We||(An?inject(piniaSymbol,null):null),We&&setActivePinia(We),We=activePinia,We._s.has(Oe)||(Ue?createSetupStore(Oe,e,Be,We):createOptionsStore(Oe,Be,We)),We._s.get(Oe)}return He.$id=Oe,He}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(ke){return ke&&ke.__esModule&&Object.prototype.hasOwnProperty.call(ke,"default")?ke.default:ke}function getAugmentedNamespace(ke){if(ke.__esModule)return ke;var e=ke.default;if(typeof e=="function"){var Te=function Oe(){return this instanceof Oe?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};Te.prototype=e.prototype}else Te={};return Object.defineProperty(Te,"__esModule",{value:!0}),Object.keys(ke).forEach(function(Oe){var Be=Object.getOwnPropertyDescriptor(ke,Oe);Object.defineProperty(Te,Oe,Be.get?Be:{enumerable:!0,get:function(){return ke[Oe]}})}),Te}var dist={},logger$G={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$G,"__esModule",{value:!0});logger$G.useLogger=logger$G.createLogger=logger$G.VueLogger=void 0;const vue_1=require$$0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:ke,caller:e})=>e?`[${ke.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${ke.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(Te=>typeof console[Te]=="function")}apply(e){const Te=this._options||defaultOptions;this._options={...Te,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...Te){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const Oe=this._options.callerInfo?this.getCallerInfo():void 0,Be={level:e,caller:Oe,argumentArray:Te};if(await this.invokeHooks(this._options.beforeHooks,Be),this._options.consoleEnabled){const Ue=this._options.prefixFormat({level:e,caller:Oe});this._consoleFunctions.indexOf(e)>=0?console[e](Ue,...Te):console.log(Ue,...Te)}await this.invokeHooks(this._options.afterHooks,Be)}}installHooks(e){if(e&&e.length>0){for(const Te of e)if(Te.install)try{Te.install(this._options)}catch(Oe){console.warn("LoggerHook install failure",Oe)}}}async invokeHooks(e,Te){if(e&&e.length>0)for(const Oe of e)try{await Oe.run(Te)}catch(Be){console.warn("LoggerHook run failure",Be)}}getCallerInfo(){const e=new Error;if(e.stack)try{const Oe=e.stack.split(`
`)[0].startsWith("Error")?4:3,Be=e.stack.split(`
`)[Oe].trim().replace("(","").replace(")","");let Ue;Be.indexOf("at ")>-1?Ue=Be.substring(Be.indexOf("at ")+3,Be.lastIndexOf(" ")).split(".").reverse()[0]:Be.indexOf("@")>-1&&(Ue=Be.substring(0,Be.indexOf("@")));const He=Be.split(":").reverse(),We=He[2].substring(Math.max(He[2].lastIndexOf("/"),He[2].lastIndexOf("\\"))+1).split("?")[0],Cn=He[1];return{functionName:Ue,fileName:We,lineNumber:Cn}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$G.VueLogger=VueLogger;function createLogger(ke={}){return new VueLogger(ke)}logger$G.createLogger=createLogger;function useLogger(){return vue_1.inject(loggerSymbol)}logger$G.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(ke){for(let e=0;e<ke.argumentArray.length;e++)ke.argumentArray[e]!=null&&typeof ke.argumentArray[e]=="object"&&(ke.argumentArray[e]=JSON.stringify(ke.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(ke){for(let e=0;e<ke.argumentArray.length;e++)ke.argumentArray[e]!=null&&typeof ke.argumentArray[e]=="object"&&(ke.argumentArray[e]=JSON.parse(JSON.stringify(ke.argumentArray[e])))}};(function(ke){Object.defineProperty(ke,"__esModule",{value:!0}),ke.StringifyAndParseObjectsHook=ke.StringifyObjectsHook=ke.useLogger=ke.createLogger=ke.VueLogger=void 0;var e=logger$G;Object.defineProperty(ke,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(ke,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(ke,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var Te=hooks;Object.defineProperty(ke,"StringifyObjectsHook",{enumerable:!0,get:function(){return Te.StringifyObjectsHook}}),Object.defineProperty(ke,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return Te.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(ke){return"/cartes.gouv.fr-entree-carto/"+ke},seen={},__vitePreload=function(e,Te,Oe){let Be=Promise.resolve();if(Te&&Te.length>0){document.getElementsByTagName("link");const He=document.querySelector("meta[property=csp-nonce]"),We=(He==null?void 0:He.nonce)||(He==null?void 0:He.getAttribute("nonce"));Be=Promise.allSettled(Te.map(Cn=>{if(Cn=assetsURL(Cn),Cn in seen)return;seen[Cn]=!0;const An=Cn.endsWith(".css"),En=An?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Cn}"]${En}`))return;const Sn=document.createElement("link");if(Sn.rel=An?"stylesheet":scriptRel,An||(Sn.as="script"),Sn.crossOrigin="",Sn.href=Cn,We&&Sn.setAttribute("nonce",We),document.head.appendChild(Sn),An)return new Promise((Tn,Ln)=>{Sn.addEventListener("load",Tn),Sn.addEventListener("error",()=>Ln(new Error(`Unable to preload CSS for ${Cn}`)))})}))}function Ue(He){const We=new Event("vite:preloadError",{cancelable:!0});if(We.payload=He,window.dispatchEvent(We),!We.defaultPrevented)throw He}return Be.then(He=>{for(const We of He||[])We.status==="rejected"&&Ue(We.reason);return e().catch(Ue)})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug("eulerian",e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var Te=JSON.parse(localStorage.getItem(this.key));Te&&(Te.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-ClVZRmXE.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-FhbEcPM0.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(ke){return new Eulerian(ke)}function useEulerian(){return inject(eulerianSymbol)}const useServiceStore=defineStore({id:"service",state:()=>({connexion:{}}),getters:{},actions:{getService(){return this.connexion},setService(ke){this.connexion=serviceFactotyCreate(ke)}}});var Users={getUser:function(){return this.user},getUserMe:async function(){var ke=await this.getFetch()(`${this.api}/users/me`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),e=await ke.json();this.user=e;var Te=useServiceStore();return Te.setService(this),e},getUserSize:function(){if(this.user){var ke=this.user.documents_quota,e=this.user.documents_use,Te=Math.round(100*e/ke),Oe=Te>80;return{size:ke-e,ratio:Te,alert:Oe}}}},GetDocuments={getDrawing:async function(ke){return await this.getFileById(ke)},getImport:async function(ke){var e=null,Te=await this.getFileById(ke),Oe=useServiceStore(),Be=Oe.getService(),Ue=Be.documents.import.find(We=>We._id===ke),He=!0;return Ue.labels.includes("internal")&&(He=!1,e=new Promise((We,Cn)=>{We(Te)})),Ue.labels.includes("external")&&(He=!1,e=new Promise((We,Cn)=>{We(Te.url)})),He&&(e=new Promise((We,Cn)=>{We(Te)})),e||(e=new Promise((We,Cn)=>{Cn("Exception pour rcuperer le fichier !!!")})),e},getCompute:async function(ke){return await this.getFileById(ke)},getService:async function(ke){var e=null,Te=await this.getFileById(ke),Oe=useServiceStore(),Be=Oe.getService(),Ue=Be.documents.service.find(He=>He._id===ke);return(Ue.labels.includes("wmts")||Ue.labels.includes("wms"))&&(e=new Promise((He,We)=>{He(Te)})),Ue.labels.includes("mapbox")&&(Ue.labels.includes("internal")&&(e=new Promise((He,We)=>{He(Te)})),Ue.labels.includes("external")&&(e=new Promise((He,We)=>{He(Te.url)}))),e||(e=new Promise((He,We)=>{We("Exception pour rcuperer le fichier !!!")})),e},getCartes:async function(ke){var e=await this.getFileById(ke),Te=new Promise((Oe,Be)=>{Oe(e.permalink)});return Te}},SetDocuments={getMimeType:ke=>{var e="";switch(ke.toLowerCase()){case"json":e="application/json";break;case"geojson":e="application/geo+json";break;case"kml":e="application/vnd.google-earth.kml+xml";break;case"gpx":e="application/gpx+xml";break;default:e="application/octet-stream";break}return e},setDocument:async function(ke){const e=new FormData;e.append("name",ke.name),e.append("description",ke.description);const Te=[this.tag,ke.type,this.labelsFormats.find(An=>ke.format.toLowerCase().includes(An))];e.append("labels",Te.join(",")),e.append("extra",JSON.stringify({format:ke.format.toLowerCase(),target:"internal",date:new Date().toLocaleDateString()}));const Oe=ke.content,Be=new Blob([Oe],{type:this.getMimeType(ke.format)});e.append("file",Be);for(let An of e.entries())console.debug(An[0]+": "+An[1]);var Ue=await this.getFetch()(`${this.api}/users/me/documents`,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:e}),He=await Ue.json();if(Ue.status!==200&&Ue.status!==201)throw He;this.documents[ke.type].push(He);var We=He._id,Cn=useServiceStore();return Cn.setService(this),{uuid:We,action:"added"}},updateGeometryDocument:async function(ke){var e=ke.uuid,Te=this.documents[ke.type].findIndex(Cn=>Cn._id===e);if(Te===-1)throw new Error(`Le document ${e} n'a pas t trouv !`);const Oe=new FormData,Be=new Blob([ke.content],{type:this.getMimeType(ke.format)});Oe.append("file",Be);var Ue=await this.getFetch()(`${this.api}/users/me/documents/${e}`,{method:this.mode==="local"?"PUT":"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:Oe}),He=await Ue.json();if(Ue.status!==200)throw He;this.documents[ke.type][Te]=He;var We=useServiceStore();return We.setService(this),{uuid:e,action:"updated"}},updateMetadataDocument:async function(ke){var Ue=ke.uuid,e=this.documents[ke.type].findIndex(We=>We._id===Ue);if(e===-1)throw new Error(`Le document ${Ue} n'a pas t trouv !`);var Te=this.documents[ke.type][e];Te.extra=ke.extra,Te.name=ke.name,Te.description=ke.description;var Oe=await this.getFetch()(`${this.api}/users/me/documents/${Ue}`,{method:"PATCH",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(Te)}),Be=await Oe.json();if(Oe.status!==200)throw Be;this.documents[ke.type][e]=Be;var Ue=Be._id,He=useServiceStore();return He.setService(this),{uuid:Ue,action:"updated"}},renameDocument:async function(ke){var Ue=ke.uuid,e=this.documents[ke.type].findIndex(We=>We._id===Ue);if(e===-1)throw new Error(`Le document ${Ue} n'a pas t trouv !`);var Te={name:ke.name},Oe=await this.getFetch()(`${this.api}/users/me/documents/${Ue}`,{method:"PATCH",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(Te)}),Be=await Oe.json();if(Oe.status!==200&&Oe.status!==201)throw Be;this.documents[ke.type][e]=Be;var Ue=Be._id,He=useServiceStore();return He.setService(this),{uuid:Ue,action:"updated"}},deleteDocument:async function(ke){var e=ke.uuid,Te=await this.getFetch()(`${this.api}/users/me/documents/${e}`,{method:"DELETE",headers:{Accept:"*/*","X-Requested-With":"XMLHttpRequest"}});if(Te.status!==204)throw Te;var Oe=this.documents[ke.type].findIndex(Ue=>Ue._id===e);if(Oe===-1)throw new Error(`Le document ${e} n'a pas t trouv !`);this.documents[ke.type].splice(Oe,1);var Be=useServiceStore();return Be.setService(this),{uuid:e,action:"deleted"}},exportDocument:async function(ke){var e=ke.uuid,Te=this.documents[ke.type].find(He=>He._id===e);if(!Te)throw new Error(`Le document ${e} n'a pas t trouv !`);if(!Te.extra){var Oe=await this.getDocumentById(e);Object.assign(Te,Oe)}var Be=await this.getFileById(e);if(!Be)throw new Error(`Le document ${e} n'a pas t tlcharg !`);var Ue=Te.extra.format==="json"||Te.extra.format==="geojson";return{uuid:e,action:"exported",extra:{content:Ue?JSON.stringify(Be):Be,mimeType:this.getMimeType(Te.extra.format),name:Te.name,ext:Te.extra.format}}}},Documents={tag:"cartes.gouv.fr",labels:["drawing","import","compute","service","carte"],labelsFormats:["geojson","gpx","kml","mapbox","json","wms","wmts"],labelsTarget:["internal","external"],labelsCompute:["isochron","route","profil"],isEmpty:function(){for(let ke=0;ke<this.labels.length;ke++){const e=this.labels[ke];if(this.documents[e]&&this.documents[e].length>0)return!1}return!0},getDocuments:async function(){var ke=[];for(let e=0;e<this.labels.length;e++){const Te=this.labels[e];ke.push(this.getDocumentsByLabel(Te))}return Promise.allSettled(ke)},getDocumentsByLabel:async function(ke){if(!this.labels.includes(ke))return Promise.reject("Label filter not allowed !");var e=["owned=true","shared=false","page=1","limit=100"],Te=`${e.join("&")}&labels=${this.tag}&labels=${ke}`,Oe=await this.getFetch()(`${this.api}/users/me/documents?${Te}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Be=await Oe.json();this.documents[ke]=Be;var Ue=useServiceStore();return Ue.setService(this),Be},getDocumentById:async function(ke){var e=await this.getFetch()(`${this.api}/users/me/documents/${ke}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Te=await e.json();const Oe=We=>({id:ke.split("-").slice(-1)[0],format:this.labelsFormats.find(Cn=>We.includes(Cn)),target:this.labelsTarget.find(Cn=>We.includes(Cn)),compute:this.labelsCompute.find(Cn=>We.includes(Cn)),date:new Date().toLocaleDateString()});var Be={},Ue=!1;for(let We=0;We<this.labels.length&&!Ue;We++){const Cn=this.labels[We];for(let An=0;An<this.documents[Cn].length;An++)if(Be=this.documents[Cn][An],Be._id===Te._id){Be.labels=Te.labels,Be.description=Te.description,Be.mime_type=Te.mime_type,Be.extra={...Oe(Te.labels),...Te.extra},Ue=!0;break}}if(!Ue)return Promise.reject(`Le document (${ke}) n'a pas t trouv !`);var He=useServiceStore();return He.setService(this),Be},getFileById:async function(ke){var e=await this.getFetch()(`${this.api}/users/me/documents/${ke}/file`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Te=e.headers.get("content-type"),Oe=null;return Te==="application/json"?Oe=await e.json():Oe=await e.text(),Oe}};Object.assign(Documents,GetDocuments);Object.assign(Documents,SetDocuments);const IAM_AUTH_MODE="local";var wu;class ServiceBase{constructor(e){Iu(this,wu);return e=e||{},this.authenticated=e.authenticated||!1,this.user=e.user||{},this.documents=e.documents||{},this.error=e.error||{},this.mode=e.mode||IAM_AUTH_MODE,this.url=encodeURI(location.origin+"/cartes.gouv.fr-entree-carto"),this.api=null,Hc(this,wu,null),this}getFetch(){return yl(this,wu)}setFetch(e){Hc(this,wu,e)}async isAccessValided(){var e=useServiceStore();e.setService(this),Promise.resolve()}async getAccessLogin(){Promise.reject("this must be overridden !")}async getAccessLogout(){Promise.reject("this must be overridden !")}async getAccessToken(){Promise.reject("this must be overridden !")}}wu=new WeakMap;Object.assign(ServiceBase.prototype,Users);Object.assign(ServiceBase.prototype,Documents);var oauth2Client_min={exports:{}};(function(ke,e){(function(Te,Oe){ke.exports=Oe()})(self,()=>(()=>{var Te={985:(He,We,Cn)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2Client=void 0,We.generateQueryString=Tn;const An=Cn(854),En=Cn(129);function Sn(Ln,Bn){return new URL(Ln,Bn).toString()}function Tn(Ln){const Bn=new URLSearchParams;for(const[ei,ni]of Object.entries(Ln))if(Array.isArray(ni))for(const ti of ni)Bn.append(ei,ti);else ni!==void 0&&Bn.set(ei,ni.toString());return Bn.toString()}We.OAuth2Client=class{constructor(Ln){this.discoveryDone=!1,this.serverMetadata=null,Ln!=null&&Ln.fetch||(Ln.fetch=fetch.bind(globalThis)),this.settings=Ln}async refreshToken(Ln,Bn){if(!Ln.refreshToken)throw new Error("This token didn't have a refreshToken. It's not possible to refresh this");const ei={grant_type:"refresh_token",refresh_token:Ln.refreshToken};this.settings.clientSecret||(ei.client_id=this.settings.clientId),Bn!=null&&Bn.scope&&(ei.scope=Bn.scope.join(" ")),Bn!=null&&Bn.resource&&(ei.resource=Bn.resource);const ni=await this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ei));return!ni.refreshToken&&Ln.refreshToken&&(ni.refreshToken=Ln.refreshToken),ni}async clientCredentials(Ln){var Bn;const ei=["client_id","client_secret","grant_type","scope"];if(Ln!=null&&Ln.extraParams&&Object.keys(Ln.extraParams).filter(ti=>ei.includes(ti)).length>0)throw new Error(`The following extraParams are disallowed: '${ei.join("', '")}'`);const ni={grant_type:"client_credentials",scope:(Bn=Ln==null?void 0:Ln.scope)===null||Bn===void 0?void 0:Bn.join(" "),resource:Ln==null?void 0:Ln.resource,...Ln==null?void 0:Ln.extraParams};if(!this.settings.clientSecret)throw new Error("A clientSecret must be provided to use client_credentials");return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ni))}async password(Ln){var Bn;const ei={grant_type:"password",...Ln,scope:(Bn=Ln.scope)===null||Bn===void 0?void 0:Bn.join(" ")};return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ei))}get authorizationCode(){return new En.OAuth2AuthorizationCodeClient(this)}async introspect(Ln){const Bn={token:Ln.accessToken,token_type_hint:"access_token"};return this.request("introspectionEndpoint",Bn)}async revoke(Ln,Bn="access_token"){let ei=Ln.accessToken;Bn==="refresh_token"&&(ei=Ln.refreshToken);const ni={token:ei,token_type_hint:Bn};return this.request("revocationEndpoint",ni)}async getEndpoint(Ln){if(this.settings[Ln]!==void 0)return Sn(this.settings[Ln],this.settings.server);if(Ln!=="discoveryEndpoint"&&(await this.discover(),this.settings[Ln]!==void 0))return Sn(this.settings[Ln],this.settings.server);if(!this.settings.server)throw new Error(`Could not determine the location of ${Ln}. Either specify ${Ln} in the settings, or the "server" endpoint to let the client discover it.`);switch(Ln){case"authorizationEndpoint":return Sn("/authorize",this.settings.server);case"tokenEndpoint":return Sn("/token",this.settings.server);case"discoveryEndpoint":return Sn("/.well-known/oauth-authorization-server",this.settings.server);case"introspectionEndpoint":return Sn("/introspect",this.settings.server);case"revocationEndpoint":return Sn("/revoke",this.settings.server)}}async discover(){var Ln;if(this.discoveryDone)return;let Bn;this.discoveryDone=!0;try{Bn=await this.getEndpoint("discoveryEndpoint")}catch{return void console.warn('[oauth2] OAuth2 discovery endpoint could not be determined. Either specify the "server" or "discoveryEndpoint')}const ei=await this.settings.fetch(Bn,{headers:{Accept:"application/json"}});if(!ei.ok)return;if(!(!((Ln=ei.headers.get("Content-Type"))===null||Ln===void 0)&&Ln.startsWith("application/json")))return void console.warn("[oauth2] OAuth2 discovery endpoint was not a JSON response. Response is ignored");this.serverMetadata=await ei.json();const ni=[["authorization_endpoint","authorizationEndpoint"],["token_endpoint","tokenEndpoint"],["introspection_endpoint","introspectionEndpoint"],["revocation_endpoint","revocationEndpoint"]];if(this.serverMetadata!==null){for(const[ti,ri]of ni)this.serverMetadata[ti]&&(this.settings[ri]=Sn(this.serverMetadata[ti],Bn));this.serverMetadata.token_endpoint_auth_methods_supported&&!this.settings.authenticationMethod&&(this.settings.authenticationMethod=this.serverMetadata.token_endpoint_auth_methods_supported[0])}}async request(Ln,Bn){const ei=await this.getEndpoint(Ln),ni={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};let ti=this.settings.authenticationMethod;switch(this.settings.clientSecret||(ti="client_secret_post"),ti||(ti="client_secret_basic"),ti){case"client_secret_basic":ni.Authorization="Basic "+btoa(this.settings.clientId+":"+this.settings.clientSecret);break;case"client_secret_post":Bn.client_id=this.settings.clientId,this.settings.clientSecret&&(Bn.client_secret=this.settings.clientSecret);break;default:throw new Error("Authentication method not yet supported:"+ti+". Open a feature request if you want this!")}const ri=await this.settings.fetch(ei,{method:"POST",body:Tn(Bn),headers:ni});let oi,ai,ci;if(ri.status!==204&&ri.headers.has("Content-Type")&&ri.headers.get("Content-Type").match(/^application\/(.*\+)?json/)&&(oi=await ri.json()),ri.ok)return oi;throw oi!=null&&oi.error?(ai="OAuth2 error "+oi.error+".",oi.error_description&&(ai+=" "+oi.error_description),ci=oi.error):(ai="HTTP Error "+ri.status+" "+ri.statusText,ri.status===401&&this.settings.clientSecret&&(ai+=". It's likely that the clientId and/or clientSecret was incorrect"),ci=null),new An.OAuth2HttpError(ai,ci,ri,oi)}async tokenResponseToOAuth2Token(Ln){var Bn;const ei=await Ln;if(!(ei!=null&&ei.access_token))throw console.warn("Invalid OAuth2 Token Response: ",ei),new TypeError("We received an invalid token response from an OAuth2 server.");return{accessToken:ei.access_token,expiresAt:ei.expires_in?Date.now()+1e3*ei.expires_in:null,refreshToken:(Bn=ei.refresh_token)!==null&&Bn!==void 0?Bn:null}}}},129:(He,We,Cn)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2AuthorizationCodeClient=void 0,We.generateCodeVerifier=async function(){const Bn=Sn();if(Bn){const ei=new Uint8Array(32);return Bn.getRandomValues(ei),Ln(ei)}{const ei=Cn(483);return new Promise((ni,ti)=>{ei.randomBytes(32,(ri,oi)=>{ri&&ti(ri),ni(oi.toString("base64url"))})})}},We.getCodeChallenge=En;const An=Cn(854);async function En(Bn){const ei=Sn();if(ei!=null&&ei.subtle)return["S256",Ln(await ei.subtle.digest("SHA-256",Tn(Bn)))];{const ni=Cn(483).createHash("sha256");return ni.update(Tn(Bn)),["S256",ni.digest("base64url")]}}function Sn(){if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof self<"u"&&self.crypto)return self.crypto;const Bn=Cn(483);return Bn.webcrypto?Bn.webcrypto:null}function Tn(Bn){const ei=new Uint8Array(Bn.length);for(let ni=0;ni<Bn.length;ni++)ei[ni]=255&Bn.charCodeAt(ni);return ei}function Ln(Bn){return btoa(String.fromCharCode(...new Uint8Array(Bn))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}We.OAuth2AuthorizationCodeClient=class{constructor(Bn){this.client=Bn}async getAuthorizeUri(Bn){const[ei,ni]=await Promise.all([Bn.codeVerifier?En(Bn.codeVerifier):void 0,this.client.getEndpoint("authorizationEndpoint")]),ti=new URLSearchParams({client_id:this.client.settings.clientId,response_type:"code",redirect_uri:Bn.redirectUri});if(ei&&(ti.set("code_challenge_method",ei[0]),ti.set("code_challenge",ei[1])),Bn.state&&ti.set("state",Bn.state),Bn.scope&&ti.set("scope",Bn.scope.join(" ")),Bn.resource)for(const ri of[].concat(Bn.resource))ti.append("resource",ri);if(Bn.responseMode&&Bn.responseMode!=="query"&&ti.append("response_mode",Bn.responseMode),Bn.extraParams)for(const[ri,oi]of Object.entries(Bn.extraParams)){if(ti.has(ri))throw new Error(`Property in extraParams would overwrite standard property: ${ri}`);ti.set(ri,oi)}return ni+"?"+ti.toString()}async getTokenFromCodeRedirect(Bn,ei){const{code:ni}=this.validateResponse(Bn,{state:ei.state});return this.getToken({code:ni,redirectUri:ei.redirectUri,codeVerifier:ei.codeVerifier})}validateResponse(Bn,ei){var ni;let ti=(Bn=new URL(Bn)).searchParams;if(!ti.has("code")&&!ti.has("error")&&Bn.hash.length>0&&(ti=new URLSearchParams(Bn.hash.slice(1))),ti.has("error"))throw new An.OAuth2Error((ni=ti.get("error_description"))!==null&&ni!==void 0?ni:"OAuth2 error",ti.get("error"));if(!ti.has("code"))throw new Error(`The url did not contain a code parameter ${Bn}`);if(ei.state&&ei.state!==ti.get("state"))throw new Error(`The "state" parameter in the url did not match the expected value of ${ei.state}`);return{code:ti.get("code"),scope:ti.has("scope")?ti.get("scope").split(" "):void 0}}async getToken(Bn){const ei={grant_type:"authorization_code",code:Bn.code,redirect_uri:Bn.redirectUri,code_verifier:Bn.codeVerifier,resource:Bn.resource};return this.client.tokenResponseToOAuth2Token(this.client.request("tokenEndpoint",ei))}}},854:(He,We)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2HttpError=We.OAuth2Error=void 0;class Cn extends Error{constructor(En,Sn){super(En),this.oauth2Code=Sn}}We.OAuth2Error=Cn,We.OAuth2HttpError=class extends Cn{constructor(An,En,Sn,Tn){super(An,En),this.httpCode=Sn.status,this.response=Sn,this.parsedBody=Tn}}},238:(He,We)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2Fetch=void 0,We.OAuth2Fetch=class{constructor(Cn){this.token=null,this.activeGetStoredToken=null,this.activeRefresh=null,this.refreshTimer=null,(Cn==null?void 0:Cn.scheduleRefresh)===void 0&&(Cn.scheduleRefresh=!0),this.options=Cn,Cn.getStoredToken&&(this.activeGetStoredToken=(async()=>{this.token=await Cn.getStoredToken(),this.activeGetStoredToken=null})()),this.scheduleRefresh()}async fetch(Cn,An){const En=new Request(Cn,An);return this.mw()(En,Sn=>fetch(Sn))}mw(){return async(Cn,An)=>{const En=await this.getAccessToken();let Sn=Cn.clone();Sn.headers.set("Authorization","Bearer "+En);let Tn=await An(Sn);if(!Tn.ok&&Tn.status===401){const Ln=await this.refreshToken();Sn=Cn.clone(),Sn.headers.set("Authorization","Bearer "+Ln.accessToken),Tn=await An(Sn)}return Tn}}async getToken(){return this.token&&(this.token.expiresAt===null||this.token.expiresAt>Date.now())?this.token:this.refreshToken()}async getAccessToken(){return await this.activeGetStoredToken,(await this.getToken()).accessToken}async refreshToken(){var Cn,An;if(this.activeRefresh)return this.activeRefresh;const En=this.token;this.activeRefresh=(async()=>{var Sn,Tn;let Ln=null;try{En!=null&&En.refreshToken&&(Ln=await this.options.client.refreshToken(En))}catch{console.warn("[oauth2] refresh token not accepted, we'll try reauthenticating")}if(Ln||(Ln=await this.options.getNewToken()),!Ln){const Bn=new Error("Unable to obtain OAuth2 tokens, a full reauth may be needed");throw(Tn=(Sn=this.options).onError)===null||Tn===void 0||Tn.call(Sn,Bn),Bn}return Ln})();try{const Sn=await this.activeRefresh;return this.token=Sn,(An=(Cn=this.options).storeToken)===null||An===void 0||An.call(Cn,Sn),this.scheduleRefresh(),Sn}catch(Sn){throw this.options.onError&&this.options.onError(Sn),Sn}finally{this.activeRefresh=null}}scheduleRefresh(){var Cn;if(!this.options.scheduleRefresh||(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),!(!((Cn=this.token)===null||Cn===void 0)&&Cn.expiresAt)||!this.token.refreshToken))return;const An=this.token.expiresAt-Date.now();An<12e4||(this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(En){console.error("[fetch-mw-oauth2] error while doing a background OAuth2 auto-refresh",En)}},An-6e4))}}},483:()=>{}},Oe={};function Be(He){var We=Oe[He];if(We!==void 0)return We.exports;var Cn=Oe[He]={exports:{}};return Te[He](Cn,Cn.exports,Be),Cn.exports}var Ue={};return(()=>{var He=Ue;Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2HttpError=He.OAuth2Error=He.OAuth2Fetch=He.generateCodeVerifier=He.OAuth2AuthorizationCodeClient=He.OAuth2Client=void 0;var We=Be(985);Object.defineProperty(He,"OAuth2Client",{enumerable:!0,get:function(){return We.OAuth2Client}});var Cn=Be(129);Object.defineProperty(He,"OAuth2AuthorizationCodeClient",{enumerable:!0,get:function(){return Cn.OAuth2AuthorizationCodeClient}}),Object.defineProperty(He,"generateCodeVerifier",{enumerable:!0,get:function(){return Cn.generateCodeVerifier}});var An=Be(238);Object.defineProperty(He,"OAuth2Fetch",{enumerable:!0,get:function(){return An.OAuth2Fetch}});var En=Be(854);Object.defineProperty(He,"OAuth2Error",{enumerable:!0,get:function(){return En.OAuth2Error}}),Object.defineProperty(He,"OAuth2HttpError",{enumerable:!0,get:function(){return En.OAuth2HttpError}})})(),Ue})())})(oauth2Client_min);var oauth2Client_minExports=oauth2Client_min.exports;const IAM_URL="https://sso.geopf.fr",IAM_REALM="geoplateforme",IAM_CLIENT_ID="cartes-gouv-fr-carto",IAM_CLIENT_SECRET="GLGe8lcjSj7OytvAeHXABrZRFjbu31ny",IAM_ENTREPOT_API_URL="https://data.geopf.fr/api";var _l,kc,Pu,Ff,Gf;class ServiceLocal extends ServiceBase{constructor(Te){super(Te);Iu(this,Pu);Iu(this,_l);Iu(this,kc);return this.session=Te.session||"",this.codeVerifier=Te.codeVerifier||"",this.code=Te.code||"",this.token=Te.token||"",this.error=Te.error||{},Hc(this,_l,null),Hc(this,kc,null),this.api=IAM_ENTREPOT_API_URL,ac(this,Pu,Ff).call(this,Te),this}async isAccessValided(){const Te=inject("emitter");var Oe=useServiceStore();const Be=location.search,Ue=new URLSearchParams(Be);var He=Ue.get("code"),We=Ue.get("session_state"),Cn=Ue.get("error"),An=null,En="no-auth";return He&&We&&(this.session=We,this.code=He,this.authenticated=!0,En="login",An=this.getAccessToken().then(Sn=>{if(Sn)return this.getUserMe().then(Tn=>(console.debug(Tn),Te.dispatchEvent("service:user:loaded",{bubbles:!0,detail:Tn}),this.getDocuments().then(Ln=>{console.debug(Ln),Te.dispatchEvent("service:documents:loaded",{bubbles:!0,detail:Ln})}).catch(Ln=>{throw new Error("Error to get documents ("+Ln.message+")")}))).catch(Tn=>{throw new Error("Error to get user info ("+Tn.message+")")})}).then(()=>En).catch(Sn=>{throw new Error("Error to get token ("+Sn.message+")")})),!He&&We&&We===this.session&&(this.session=null,this.code=null,this.authenticated=!1,this.token=null,this.user={},this.documents={},this.error={},En="logout",An=new Promise((Sn,Tn)=>{Sn(En)})),Cn&&(this.error={name:Cn,message:Ue.get("error_description")},An=new Promise((Sn,Tn)=>{Tn(this.error)})),Oe.setService(this),An||Promise.resolve(En)}async getAccessLogin(){const Te=this.url.includes("login")?this.url:this.url+"/login",Oe=await oauth2Client_minExports.generateCodeVerifier();this.codeVerifier=Oe,localStorage.setItem("codeVerifier",Oe);var Be=await yl(this,_l).authorizationCode.getAuthorizeUri({redirectUri:Te,state:"some-string",codeVerifier:Oe,scope:["openid","profile","email"],extraParams:{approval_prompt:"auto"},responseMode:"query"});return Be}async getAccessLogout(){const Te=this.url.includes("logout")?this.url:this.url+"/logout";var Oe=`${yl(this,_l).settings.server}/realms/${yl(this,_l).settings.index}/protocol/openid-connect/logout?
      scope=openid%20profile%20email&
      approval_prompt=auto&
      response_type=code&
      post_logout_redirect_uri=${Te}?session_state=${this.session}&
      client_id=${yl(this,_l).settings.clientId}`.replace(/ /g,"");return Promise.resolve(Oe)}async getAccessToken(){const Te=this.url.includes("login")?this.url:this.url+"/login";var Oe=this.codeVerifier||localStorage.getItem("codeVerifier"),Be=await yl(this,_l).authorizationCode.getTokenFromCodeRedirect(location,{redirectUri:Te,state:"some-string",codeVerifier:Oe});this.token=Be;const Ue=new Date(Be.expiresAt);console.debug("expires token",Ue),yl(this,kc).token=Be;var He=useServiceStore();return He.setService(this),this.token}}_l=new WeakMap,kc=new WeakMap,Pu=new WeakSet,Ff=function(Te){var Oe=Te.client?Te.client.settings:{server:`${IAM_URL}`,clientId:`${IAM_CLIENT_ID}`,clientSecret:`${IAM_CLIENT_SECRET}`,index:`${IAM_REALM}`,tokenEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/token`,authorizationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/auth`,discoveryEndpoint:`/realms/${IAM_REALM}/.well-known/openid-configuration`,revocationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/revoke`};Hc(this,_l,new oauth2Client_minExports.OAuth2Client(Oe)),Hc(this,kc,new oauth2Client_minExports.OAuth2Fetch({client:yl(this,_l),scheduleRefresh:!0,getNewToken:async()=>{if(this.token&&Object.keys(this.token).length&&this.token.expiresAt>Date.now())return this.token;var Be=await yl(this,_l).authorizationCode.getToken({code:this.code,redirectUri:this.url,code_verifier:this.codeVerifier});return Be},storeToken:Be=>{this.token=Be},getStoredToken:()=>{const Be=ac(this,Pu,Gf).call(this);return Be&&Object.keys(Be).length?Be:null},onError:Be=>{console.error(Be)}})),this.setFetch(yl(this,kc).fetch.bind(yl(this,kc)))},Gf=function(){var Te=JSON.parse(localStorage.getItem("service"));return Te?Te.connexion.token:null};const IAM_REDIRECT_REMOTE="http://localhost:9092",IAM_ENTREPOT_API_URL_REMOTE="http://localhost:9092/api";class ServiceRemote extends ServiceBase{constructor(e){return super(e),this.api=IAM_ENTREPOT_API_URL_REMOTE,this.setFetch(window.fetch),this}async isAccessValided(){const e=inject("emitter");var Te=useServiceStore();const Oe=location.href.includes("login");console.log("route login ?",Oe,location.href);const Be=location.search,Ue=new URLSearchParams(Be);var He=Ue.get("authentication_failed"),We=Ue.get("success"),Cn=null,An="no-auth";if(Oe&&We!==null)if(parseInt(We,10)){this.authenticated=!0,An="login";try{const En=await this.getUserMe();console.debug(En),e.dispatchEvent("service:user:loaded",{bubbles:!0,detail:En});const Sn=await this.getDocuments();console.debug(Sn),e.dispatchEvent("service:documents:loaded",{bubbles:!0,detail:Sn}),Cn=Promise.resolve(An)}catch(En){console.error("Error:",En),Cn=Promise.reject("Error to get user info or documents ("+En.message+")")}}else Cn=Promise.reject("Erreur inattendue !");return!Oe&&We!==null&&(this.authenticated=!1,this.user={},this.documents={},this.error={},An="logout",Cn=Promise.resolve(An)),He!==null&&(Cn=Promise.reject("Erreur inattendue !")),Te.setService(this),Cn||Promise.resolve(An)}async getAccessLogin(){return`${IAM_REDIRECT_REMOTE}/login?app=entree-carto`}async getAccessLogout(){return`${IAM_REDIRECT_REMOTE}/logout?app=entree-carto`}async getAccessToken(){}}const serviceFactotyCreate=ke=>{var e=new ServiceBase(ke);const Te=ke.mode||e.mode;var Oe;switch(Te){case"local":Oe=new ServiceLocal(ke);break;case"remote":Oe=new ServiceRemote(ke);break;default:Oe=e;break}return Oe},servicesSymbol=Symbol("vue-services-plugin");class PluginServices{constructor(e){console.debug("connexion",e),this.instance=serviceFactotyCreate(e)}install(e){e.provide(servicesSymbol,this),e.config.globalProperties.$services=this,e.provide("services",this.instance)}}function createServices(ke){return new PluginServices(ke)}function mitt(ke){return{all:ke=ke||new Map,on:function(e,Te){var Oe=ke.get(e);Oe?Oe.push(Te):ke.set(e,[Te])},off:function(e,Te){var Oe=ke.get(e);Oe&&(Te?Oe.splice(Oe.indexOf(Te)>>>0,1):ke.set(e,[]))},emit:function(e,Te){var Oe=ke.get(e);Oe&&Oe.slice().map(function(Be){Be(Te)}),(Oe=ke.get("*"))&&Oe.slice().map(function(Be){Be(e,Te)})}}}var EVENTS={isNotRegistered:ke=>!EVENTS.eventsName.includes(ke),eventsName:["test:clicked","service:changed","service:documents:loaded","service:user:loaded","document:saved","document:updated","document:deleted","document:exported","catalog:open:clicked","drawing:open:clicked","layerimport:open:clicked","vector:edit:clicked","mapbox:edit:clicked","service:edit:clicked"]};const busEventSymbol=Symbol("vue-bus-event-plugin");class BusEvent{constructor(e){return console.debug("bus",e),this.emitter=mitt(),this}addEventListener(e,Te){EVENTS.isNotRegistered(e)||(onMounted(()=>this.emitter.on(e,Te)),onUnmounted(()=>this.emitter.off(e,Te)))}removeEventLstener(e,Te){EVENTS.isNotRegistered(e)||this.emitter.off(e,Te)}dispatchEvent(e,Te){if(EVENTS.isNotRegistered(e)){console.error("L'venement n'a pas t enregistr dans le registre !");return}console.debug("dispatchEvent",e,this),this.emitter.emit(e,Te)}install(e){e.provide(busEventSymbol,this),e.config.globalProperties.$emitter=this,e.provide("emitter",this)}}function createBusEvent(ke){return new BusEvent(ke)}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(ke,e,Te)=>e in ke?__defProp(ke,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):ke[e]=Te,__spreadValues=(ke,e)=>{for(var Te in e||(e={}))__hasOwnProp.call(e,Te)&&__defNormalProp(ke,Te,e[Te]);if(__getOwnPropSymbols)for(var Te of __getOwnPropSymbols(e))__propIsEnum.call(e,Te)&&__defNormalProp(ke,Te,e[Te]);return ke},__spreadProps=(ke,e)=>__defProps(ke,__getOwnPropDescs(e)),__objRest=(ke,e)=>{var Te={};for(var Oe in ke)__hasOwnProp.call(ke,Oe)&&e.indexOf(Oe)<0&&(Te[Oe]=ke[Oe]);if(ke!=null&&__getOwnPropSymbols)for(var Oe of __getOwnPropSymbols(ke))e.indexOf(Oe)<0&&__propIsEnum.call(ke,Oe)&&(Te[Oe]=ke[Oe]);return Te};const CLASS_PREFIX="Notivue__",DEFAULT_DURATION=6e3,NotificationTypeKeys={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info",PROMISE:"promise",PROMISE_RESOLVE:"promise-resolve",PROMISE_REJECT:"promise-reject"},success$1={title:"",message:"",duration:DEFAULT_DURATION,ariaLive:"polite",ariaRole:"status"},error$1=__spreadProps(__spreadValues({},success$1),{ariaLive:"assertive",ariaRole:"alert"}),promise=__spreadProps(__spreadValues({},success$1),{duration:1/0}),warning=__spreadProps(__spreadValues({},error$1),{ariaLive:"polite"}),info=__spreadValues({},success$1),DEFAULT_NOTIFICATION_OPTIONS={[NotificationTypeKeys.SUCCESS]:success$1,[NotificationTypeKeys.ERROR]:error$1,[NotificationTypeKeys.WARNING]:warning,[NotificationTypeKeys.INFO]:info,[NotificationTypeKeys.PROMISE]:promise,[NotificationTypeKeys.PROMISE_RESOLVE]:success$1,[NotificationTypeKeys.PROMISE_REJECT]:error$1},DEFAULT_CONFIG={pauseOnHover:!0,pauseOnTouch:!0,pauseOnTabChange:!0,enqueue:!1,position:"top-center",teleportTo:"body",notifications:DEFAULT_NOTIFICATION_OPTIONS,limit:1/0,avoidDuplicates:!1,transition:"transform 0.35s cubic-bezier(0.5, 1, 0.25, 1)",animations:{enter:CLASS_PREFIX+"enter",leave:CLASS_PREFIX+"leave",clearAll:CLASS_PREFIX+"clearAll"}},push$1=createPushMock();function setPush(ke){Object.assign(push$1,ke)}function createPush(ke){let e=0;function Te(Oe,Be,Ue=`${e++}`){return typeof unref(Oe)=="string"&&(Oe={message:Oe}),ke.push(__spreadProps(__spreadValues({},Oe),{id:Ue,type:Be})),{id:Ue,clear:()=>ke.clear(Ue),destroy:()=>ke.clear(Ue,{isDestroy:!0})}}return{success:Oe=>Te(Oe,NotificationTypeKeys.SUCCESS),error:Oe=>Te(Oe,NotificationTypeKeys.ERROR),warning:Oe=>Te(Oe,NotificationTypeKeys.WARNING),info:Oe=>Te(Oe,NotificationTypeKeys.INFO),promise:Oe=>{const{id:Be,clear:Ue,destroy:He}=Te(Oe,NotificationTypeKeys.PROMISE);return{resolve:We=>Te(We,NotificationTypeKeys.PROMISE_RESOLVE,Be),reject:We=>Te(We,NotificationTypeKeys.PROMISE_REJECT,Be),success:We=>Te(We,NotificationTypeKeys.PROMISE_RESOLVE,Be),error:We=>Te(We,NotificationTypeKeys.PROMISE_REJECT,Be),clear:Ue,destroy:He}},load(Oe){return this.promise(Oe)},clearAll:()=>ke.clearAll(),destroyAll:()=>ke.destroyAll()}}function createPushMock(){const ke=new Proxy({},{get:()=>()=>{}});return createPush(ke)}const isSSR=typeof window>"u";function mergeDeep(ke,e){const Te=__spreadValues({},ke);for(const Oe in e)e.hasOwnProperty(Oe)&&(isPlainObject(e[Oe])?Te[Oe]=mergeDeep(ke[Oe],e[Oe]):Te[Oe]=e[Oe]);return Te}function mergeNotificationOptions(ke,e){return e.props||(e.props={}),__spreadValues(__spreadValues(__spreadValues(__spreadValues({},ke[e.type]),ke.global),e),e.type==="promise"?{duration:1/0}:{})}function isPlainObject(ke){if(Object.prototype.toString.call(ke)!=="[object Object]")return!1;const e=Object.getPrototypeOf(ke);return e===null||Object.getPrototypeOf(e)===null}function createConfigRefs(ke,e,Te){const Oe=mergeDeep(ke,e);function Be(Ue){return customRef((He,We)=>({get(){return He(),Ue},set(Cn){Te.value&&(Ue=Cn,We())}}))}for(const Ue in Oe)Oe[Ue]=Be(Oe[Ue]);return Oe}function toRawConfig(ke){return Object.entries(ke).reduce((e,[Te,{value:Oe}])=>__spreadProps(__spreadValues({},e),{[Te]:toRaw(Oe)}),{})}const isStatic=ke=>ke===NotificationTypeKeys.SUCCESS||ke===NotificationTypeKeys.ERROR||ke===NotificationTypeKeys.WARNING||ke===NotificationTypeKeys.INFO,internalKeys=["timeout","resumedAt","remaining","animationAttrs","positionStyles"];function getSlotItem(ke){return Object.fromEntries(Object.entries(ke).filter(([e])=>!internalKeys.includes(e)))}function createStore$1(ke,e){const Te=createConfig(ke,e),Oe=createQueue(),Be=createItems(Te,Oe),Ue=createElements(),He=createAnimations(Te,Be,Oe,Ue),We=createTimeouts(Be,He);return{config:Te,queue:Oe,items:Be,elements:Ue,animations:He,timeouts:We}}function createConfig(ke,e){const Te=createConfigRefs(DEFAULT_CONFIG,ke,e);function Oe(Be){if(e.value){typeof Be=="function"&&(Be=Be(toRawConfig(Te)));for(const Ue in Be)typeof Te[Ue].value=="object"?Te[Ue].value=mergeDeep(Te[Ue].value,Be[Ue]):Te[Ue].value=Be[Ue]}}return __spreadProps(__spreadValues({},Te),{update:Oe})}function createQueue(){return{entries:shallowRef([]),get length(){return this.entries.value.length},add(ke){this.entries.value.push(ke),this.triggerRef()},get(ke){return this.entries.value.find(e=>e.id===ke)},update(ke,e){const Te=this.get(ke);Te&&Object.assign(Te,e)},remove(ke){this.entries.value=this.entries.value.filter(e=>e.id!==ke)},triggerRef(){triggerRef(this.entries)},clear(){this.entries.value=[]}}}function createItems(ke,e){return{entries:shallowRef([]),get length(){return this.entries.value.length},lifecycleEventsCount:ref(0),addLifecycleEvent(){this.lifecycleEventsCount.value++},clearLifecycleEvents(){this.lifecycleEventsCount.value=0},add(Te){this.entries.value.unshift(Te),this.triggerRef(),this.addLifecycleEvent()},addFromQueue(){const Te=__spreadProps(__spreadValues({},e.entries.value[0]),{timeout:e.entries.value[0].timeout(),createdAt:Date.now()});e.remove(Te.id),this.add(Te)},findDupe(Te){return this.entries.value.find(Oe=>unref(Oe.message).replace(/\uFEFF/g,"")===unref(Te.message).replace(/\uFEFF/g,"")&&unref(Oe.title)===unref(Te.title)&&Oe.type===Te.type)},get(Te){return this.entries.value.find(Oe=>Oe.id===Te)},update(Te,Oe){const Be=this.get(Te);Be&&Object.assign(Be,Oe)},triggerRef(){triggerRef(this.entries)},updateAll(Te){this.entries.value=this.entries.value.map(Te)},remove(Te){this.entries.value=this.entries.value.filter(Be=>Be.id!==Te),e.length>0&&this.length<ke.limit.value&&this.addFromQueue()},clear(){this.entries.value=[]}}}function createElements(){return{root:ref(null),rootAttrs:shallowRef({}),setRootAttrs(ke){this.rootAttrs.value=ke},items:ref([]),getSortedItems(){return this.items.value.sort((ke,e)=>+e.dataset.notivueItem-+ke.dataset.notivueItem)},containers:ref([])}}function createAnimations(ke,e,Te,Oe){return{isReducedMotion:ref(!1),setReducedMotion(Be){this.isReducedMotion.value=Be},playLeave(Be,{isDestroy:Ue=!1,isUserTriggered:He=!1}={}){const{leave:We=""}=ke.animations.value,Cn=e.get(Be);window.clearTimeout(Cn==null?void 0:Cn.timeout);const An=En=>{var Sn;En&&En.currentTarget!==En.target||((Sn=Cn==null?void 0:Cn[He?"onManualClear":"onAutoClear"])==null||Sn.call(Cn,getSlotItem(Cn)),e.remove(Be))};if(!Cn||!We||Ue||this.isReducedMotion.value)return e.addLifecycleEvent(),An();e.update(Be,{positionStyles:__spreadProps(__spreadValues({},Cn.positionStyles),{zIndex:-1}),animationAttrs:{class:We,onAnimationend:An}}),e.addLifecycleEvent()},playClearAll(){e.entries.value.forEach(He=>window.clearTimeout(He.timeout));const{clearAll:Be=""}=ke.animations.value,Ue=()=>{Te.clear(),e.clear()};if(!Be||this.isReducedMotion.value)return Ue();Oe.setRootAttrs({class:Be,onAnimationend:Ue})},updatePositions({isImmediate:Be=!1}={}){const Ue=this.isReducedMotion.value||Be,He=ke.position.value.indexOf("top")===0,We=ke.animations.value.leave;let Cn=0;for(const An of Oe.getSortedItems()){const En=An.dataset.notivueItem,Sn=e.get(En);!An||!Sn||Sn.animationAttrs.class===We||(e.update(En,{positionStyles:{transform:`translate3d(0, ${Cn}px, 0)`,transition:Ue?"none":ke.transition.value}}),Cn+=(He?1:-1)*An.clientHeight)}e.triggerRef()}}}function createTimeouts(ke,e){return{isStreamPaused:ref(!1),isStreamFocused:ref(!1),debounceTimeout:void 0,setStreamPause(Te=!0){this.isStreamPaused.value=Te},setStreamFocus(Te=!0){this.isStreamFocused.value=Te},clearDebounceTimeout(){window.clearTimeout(this.debounceTimeout)},reset(){this.clearDebounceTimeout(),this.setStreamPause(!1),this.setStreamFocus(!1)},create(Te,Oe){if(!this.isStreamPaused.value&&Number.isFinite(Oe)&&Oe>0)return window.setTimeout(()=>e.playLeave(Te),Oe)},pause(){ke.length===0||this.isStreamPaused.value||(this.setStreamPause(),ke.updateAll(Te=>{var Oe;if(window.clearTimeout(Te.timeout),Te.duration===1/0)return Te;let Be=0;return Te.remaining==null?Be=Te.duration-(Date.now()-((Oe=Te.resumedAt)!=null?Oe:Te.createdAt)):Be=Te.remaining-(Date.now()-Te.resumedAt),__spreadProps(__spreadValues({},Te),{remaining:Be})}))},resume(){ke.length===0||!this.isStreamPaused.value||(this.setStreamPause(!1),ke.updateAll(Te=>{var Oe;return window.clearTimeout(Te.timeout),Te.duration===1/0?Te:__spreadProps(__spreadValues({},Te),{timeout:this.create(Te.id,(Oe=Te.remaining)!=null?Oe:Te.duration),resumedAt:Date.now()})}))},resumeWithDebounce(Te){this.debounceTimeout=window.setTimeout(()=>{this.resume()},Te)}}}function createPushProxies({config:ke,items:e,queue:Te,animations:Oe,timeouts:Be}){return{destroyAll(){Te.clear(),e.clear()},clearAll(){Oe.playClearAll()},clear(Ue,{isDestroy:He=!1}={}){var We;((We=e.entries.value[e.entries.value.length-1])==null?void 0:We.id)===Ue&&Be.resume(),Oe.playLeave(Ue,{isUserTriggered:!0,isDestroy:He})},push(Ue){const He=mergeNotificationOptions(ke.notifications.value,Ue),We=Date.now();if(ke.avoidDuplicates.value&&isStatic(He.type)){const An=e.findDupe(He);An&&(window.clearTimeout(An.timeout),e.update(An.id,{createdAt:We,duration:He.duration,remaining:void 0,timeout:Be.create(An.id,He.duration),duplicateCount:An.duplicateCount+1}),isRef(An.message)?An.message.value+="\uFEFF":An.message+="\uFEFF",e.triggerRef());const En=e.findDupe.call(Te,He);if(En&&(Te.update(En.id,{duration:He.duration,createdAt:We,duplicateCount:En.duplicateCount+1}),Te.triggerRef()),En||An)return}const Cn=()=>Be.create(He.id,He.duration);if(Ue.type===NotificationTypeKeys.PROMISE_RESOLVE||Ue.type===NotificationTypeKeys.PROMISE_REJECT)Te.get(He.id)?(Te.update(He.id,__spreadProps(__spreadValues({},He),{createdAt:We,timeout:Cn})),Te.triggerRef()):(e.update(He.id,__spreadProps(__spreadValues({},He),{createdAt:We,timeout:Cn()})),e.triggerRef());else{const An=ke.enqueue.value,En=e.length>=ke.limit.value,Sn=!An&&En,Tn=An&&!Ue.skipQueue&&En;Sn&&e.entries.value.slice(ke.limit.value-1).forEach(Bn=>Be.create(Bn.id,1));const Ln=__spreadProps(__spreadValues({},He),{createdAt:We,duplicateCount:0,animationAttrs:{class:Oe.isReducedMotion.value?"":ke.animations.value.enter,onAnimationend(){Ln.animationAttrs.class===ke.animations.value.enter&&e.update(He.id,{animationAttrs:{class:"",onAnimationend:()=>{}}})}},timeout:Tn?Cn:Cn(),clear:()=>this.clear(He.id),destroy:()=>this.clear(He.id,{isDestroy:!0})});Tn?Te.add(Ln):e.add(Ln)}}}}const notivueInstanceInjectionKey=Symbol(),notivueInjectionKey=Symbol();function createStoreWatchers(ke){return[watch(ke.items.lifecycleEventsCount,()=>{ke.animations.updatePositions()},{flush:"post"}),watch(ke.config.position,()=>{ke.animations.updatePositions({isImmediate:!0})},{flush:"post"}),watch(()=>ke.items.length===0&&ke.queue.length===0,e=>{e&&(ke.timeouts.reset(),ke.elements.setRootAttrs({}))},{flush:"post"})]}function createInstance(ke){const e=ref(ke),Te=readonly(e);function Oe(Be,Ue){const He=()=>createStoreWatchers(Be);ke&&setPush(Ue);let We=ke?He():[()=>{}];return{isRunning:Te,startInstance(){e.value||(setPush(Ue),We=He(),e.value=!0)},stopInstance(){e.value&&(Be.items.clear(),Be.queue.clear(),Be.items.clearLifecycleEvents(),setPush(createPushMock()),We.forEach(An=>An()),e.value=!1)}}}return{isRunning:Te,setupInstance:Oe}}function createProvides(ke,e){const{setupInstance:Te,isRunning:Oe}=createInstance(ke),Be=createStore$1(e,Oe),Ue=createPushProxies(Be),He=Object.freeze(createPush(Ue)),We=Te(Be,He);return{store:Be,instance:We,push:He}}function createNotivue$1(ke={}){return{install(e){var Te;const Oe=ke,{startOnCreation:Be=!0}=Oe,Ue=__objRest(Oe,["startOnCreation"]),{store:He,instance:We,push:Cn}=createProvides(Be,Ue);e.provide(notivueInstanceInjectionKey,We),e.provide(notivueInjectionKey,He),(Te=e.config.globalProperties).$push||(Te.$push=Cn)}}}function useStore(){return inject(notivueInjectionKey)}function useNotivueInstance(){return isSSR?{isRunning:ref(!0),startInstance:()=>{},stopInstance:()=>{}}:inject(notivueInstanceInjectionKey)}function useNotivue(){if(isSSR)return __spreadProps(__spreadValues({},toRefs(reactive(DEFAULT_CONFIG))),{update:()=>{},isTopAlign:computed(()=>!0),isStreamPaused:ref(!1)});const ke=useStore();return __spreadProps(__spreadValues({},ke.config),{isStreamPaused:readonly(ke.timeouts.isStreamPaused),isTopAlign:computed(()=>ke.config.position.value.indexOf("top")===0)})}const DEFAULT_PROPS$1={listAriaLabel:"Notifications"},NotivueClientOnly=defineComponent({setup(ke,{slots:e,attrs:Te}){const Oe=ref(!1);return onMounted(()=>Oe.value=!0),()=>{var Be;return Oe.value?(Be=e.default)==null?void 0:Be.call(e):createElementBlock("span",Te,"")}}}),isMouse=ke=>ke.pointerType==="mouse";function getAriaLabel(ke){return`${ke.title?`${ke.title}: `:""}${ke.message}`}const _hoisted_1$a$1=["role","aria-live"],_sfc_main$g$1=defineComponent({__name:"AriaLive",props:{item:{}},setup(ke){const e=ke,Te={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};return(Oe,Be)=>(openBlock(),createElementBlock("div",{style:Te,role:e.item.ariaRole,"aria-live":e.item.ariaLive,key:`${Oe.item.id}_${Oe.item.type}`,"aria-atomic":"true"},toDisplayString(unref(getAriaLabel)(e.item)),9,_hoisted_1$a$1))}});function useMouseEvents(){const{timeouts:ke,config:e}=useStore();function Te(Be){isMouse(Be)&&ke.pause()}function Oe(Be){isMouse(Be)&&ke.resume()}return computed(()=>e.pauseOnHover.value&&!ke.isStreamFocused.value?{onPointerenter:Te,onPointerleave:Oe}:{})}function useTouchEvents(){const{timeouts:ke,config:e}=useStore();function Te(Oe){isMouse(Oe)||(ke.clearDebounceTimeout(),ke.pause(),ke.resumeWithDebounce(2e3))}return onBeforeUnmount(()=>{ke.clearDebounceTimeout()}),computed(()=>e.pauseOnTouch.value&&!ke.isStreamFocused.value?{onPointerdown:Te}:{})}const boxSizing={boxSizing:"border-box"},baseStyles={list:__spreadProps(__spreadValues({},boxSizing),{display:"flex",justifyContent:"center",listStyle:"none",margin:"0 auto",maxWidth:"var(--nv-root-width, 100%)",padding:"0",pointerEvents:"none",position:"fixed",zIndex:"var(--nv-z, 500)"}),listItem:__spreadProps(__spreadValues({},boxSizing),{display:"flex",margin:"0",position:"absolute",transitionProperty:"transform",width:"100%"}),itemContainer:__spreadProps(__spreadValues({},boxSizing),{maxWidth:"100%",padding:"0 0 var(--nv-gap, 0.75rem) 0",pointerEvents:"auto"})};function useNotivueStyles(){const{isTopAlign:ke,position:e}=useNotivue(),Te=computed(()=>{const Be=ke.value,Ue=[`var(--nv-root-top, ${Be?"1.25rem":"0px"})`,"var(--nv-root-right, 1.25rem)",`var(--nv-root-bottom, ${Be?"0px":"1.25rem"})`,"var(--nv-root-left, 1.25rem)"],He=Ue.map(We=>`calc(-1 * ${We})`);return Be?He.splice(2,1,"0px"):He.splice(0,1,"0px"),{inset:Ue.join(" "),clipPath:`inset(${He.join(" ")})`}}),Oe=computed(()=>({[ke.value?"top":"bottom"]:"0",justifyContent:`var(--nv-root-x-align, ${e.value.endsWith("left")?"flex-start":e.value.endsWith("right")?"flex-end":"center"})`}));return computed(()=>({list:__spreadValues(__spreadValues({},baseStyles.list),Te.value),listItem:__spreadValues(__spreadValues({},baseStyles.listItem),Oe.value),itemContainer:baseStyles.itemContainer}))}function useWindowSize(ke){function e(){window.matchMedia("(max-width: 1100px)").matches&&ke()}onMounted(()=>{window.addEventListener("resize",e)}),onBeforeUnmount(()=>{window.removeEventListener("resize",e)})}function useResizeListObserver(ke,e){let Te;const Oe=new WeakSet;onMounted(()=>{Te=new ResizeObserver((Be,Ue)=>{for(const He of Be)Oe.has(He.target)?Object.values(He.contentRect.toJSON()).every(We=>We===0)?(Oe.delete(He.target),Ue.unobserve(He.target)):(e(),Oe.delete(He.target),Ue.unobserve(He.target)):Oe.add(He.target)})}),watch(ke,Be=>{Be.length>0&&Be.forEach(Ue=>Te==null?void 0:Te.observe(Ue))},{flush:"post"}),onBeforeUnmount(()=>{Te==null||Te.disconnect()})}function useSizes(){const{elements:ke,animations:e}=useStore();useWindowSize(()=>e.updatePositions({isImmediate:!0})),useResizeListObserver(ke.items.value,()=>e.updatePositions())}function useWindowFocus(){const{config:ke,timeouts:e}=useStore();function Te(){e.isStreamFocused.value||ke.pauseOnTabChange.value&&e.resume()}function Oe(){e.isStreamFocused.value||ke.pauseOnTabChange.value&&e.pause()}onMounted(()=>{window.addEventListener("focus",Te),window.addEventListener("blur",Oe)}),onBeforeUnmount(()=>{window.removeEventListener("focus",Te),window.removeEventListener("blur",Oe)})}function useReducedMotion(){const{animations:ke}=useStore(),e=window.matchMedia("(prefers-reduced-motion: reduce)"),Te=()=>ke.setReducedMotion(e.matches);onMounted(()=>{var Oe;Te(),(Oe=e.addEventListener)==null||Oe.call(e,"change",Te)}),onBeforeUnmount(()=>{var Oe;(Oe=e.removeEventListener)==null||Oe.call(e,"change",Te)})}const _hoisted_1$9$1=["data-notivue-align","aria-label"],_hoisted_2$9$1=["data-notivue-item","aria-setsize","aria-posinset"],_hoisted_3$6=["aria-label","tabindex","data-notivue-container"],_sfc_main$f$1=defineComponent({__name:"NotivueImpl",props:mergeDefaults({class:{},containersTabIndex:{},listAriaLabel:{},styles:{}},DEFAULT_PROPS$1),setup(ke){const e=ke,{config:Te,items:Oe,elements:Be}=useStore(),Ue=useNotivueStyles(),He=useMouseEvents(),We=useTouchEvents();return useReducedMotion(),useWindowFocus(),useSizes(),(Cn,An)=>{var En;return openBlock(),createBlock(Teleport,{to:unref(Te).teleportTo.value===!1?void 0:unref(Te).teleportTo.value,disabled:unref(Te).teleportTo.value===!1},[unref(Oe).entries.value.length>0?(openBlock(),createElementBlock("ol",mergeProps({key:0},__spreadValues(__spreadValues(__spreadValues({},unref(He)),unref(We)),unref(Be).rootAttrs.value),{"data-notivue-align":unref(Te).position.value.split("-")[0],"aria-label":e.listAriaLabel,ref:unref(Be).root,class:e.class,style:__spreadValues(__spreadValues({},unref(Ue).list),(En=e.styles)==null?void 0:En.list)}),[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe).entries.value,(Sn,Tn)=>{var Ln,Bn,ei,ni;return openBlock(),createElementBlock("li",{tabindex:"-1",key:Sn.id,"data-notivue-item":Sn.id,"aria-setsize":unref(Oe).length,"aria-posinset":Tn+1,ref_for:!0,ref:unref(Be).items,style:normalizeStyle(__spreadValues(__spreadValues(__spreadValues({},unref(Ue).listItem),Sn.positionStyles),(Ln=e.styles)==null?void 0:Ln.listItem))},[Sn.ariaLiveOnly?(openBlock(),createBlock(_sfc_main$g$1,{key:0,item:Sn},null,8,["item"])):(openBlock(),createElementBlock("div",mergeProps({key:1,ref_for:!0},Sn.animationAttrs,{"aria-label":unref(getAriaLabel)(Sn),tabindex:(ei=(Bn=Cn.containersTabIndex)==null?void 0:Bn[Sn.id])!=null?ei:-1,"data-notivue-container":Sn.id,ref_for:!0,ref:unref(Be).containers,style:__spreadValues(__spreadValues({},unref(Ue).itemContainer),(ni=e.styles)==null?void 0:ni.itemContainer)}),[renderSlot(Cn.$slots,"default",mergeProps({ref_for:!0},unref(getSlotItem)(Sn)))],16,_hoisted_3$6))],12,_hoisted_2$9$1)}),128))],16,_hoisted_1$9$1)):createCommentVNode("",!0)],8,["to","disabled"])}}}),_sfc_main$e$1=defineComponent({__name:"Notivue",props:mergeDefaults({class:{},containersTabIndex:{},listAriaLabel:{},styles:{}},DEFAULT_PROPS$1),setup(ke){const e=ke,{isRunning:Te}=useNotivueInstance();return(Oe,Be)=>(openBlock(),createBlock(unref(NotivueClientOnly),null,{default:withCtx(()=>[unref(Te)?(openBlock(),createBlock(_sfc_main$f$1,normalizeProps(mergeProps({key:0},e)),{default:withCtx(Ue=>[renderSlot(Oe.$slots,"default",normalizeProps(guardReactiveProps(Ue)))]),_:3},16)):createCommentVNode("",!0)]),_:3}))}}),_hoisted_1$8$1=createBaseVNode("path",{d:"M6,-0c-3.308,-0 -6,2.692 -6,6c-0,3.308 2.692,6 6,6c3.308,-0 6,-2.692 6,-6c-0,-3.308 -2.692,-6 -6,-6Zm3.123,3.989l-3.877,4.616c-0.086,0.102 -0.213,0.162 -0.346,0.164l-0.008,0c-0.131,0 -0.256,-0.055 -0.343,-0.153l-1.662,-1.846c-0.081,-0.085 -0.126,-0.199 -0.126,-0.316c0,-0.254 0.209,-0.462 0.462,-0.462c0.135,0 0.263,0.059 0.35,0.161l1.307,1.451l3.536,-4.209c0.087,-0.101 0.215,-0.159 0.349,-0.159c0.253,-0 0.461,0.208 0.461,0.461c0,0.107 -0.036,0.21 -0.103,0.292Z"},null,-1),_hoisted_2$8$1=[_hoisted_1$8$1],_sfc_main$9$1=defineComponent({__name:"SuccessIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$8$1,16))}}),_hoisted_1$7$1=createBaseVNode("path",{d:"M6,-0c-3.308,-0 -6,2.692 -6,6c-0,3.308 2.692,6 6,6c3.308,-0 6,-2.692 6,-6c-0,-3.308 -2.692,-6 -6,-6Zm-0,9.228c-0.316,0 -0.577,-0.26 -0.577,-0.577c0,-0.316 0.261,-0.577 0.577,-0.577c0.316,0 0.577,0.261 0.577,0.577c-0,0.317 -0.261,0.577 -0.577,0.577Zm0.627,-5.802l-0.166,3.519c-0,0.253 -0.208,0.462 -0.462,0.462c-0.253,-0 -0.461,-0.209 -0.461,-0.462l-0.166,-3.518l0,-0.001c-0,-0.009 -0,-0.018 -0,-0.027c-0,-0.344 0.283,-0.627 0.627,-0.627c0.344,0 0.627,0.283 0.627,0.627c-0,0.009 -0,0.018 -0.001,0.027l0.002,-0Z"},null,-1),_hoisted_2$7$1=[_hoisted_1$7$1],_sfc_main$8$1=defineComponent({__name:"ErrorIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$7$1,16))}}),_hoisted_1$6$1=createBaseVNode("path",{d:"M6,0c-3.308,0 -6,2.692 -6,6c0,3.308 2.692,6 6,6c3.308,0 6,-2.692 6,-6c0,-3.308 -2.692,-6 -6,-6Zm0,2.46c0.428,0 0.78,0.352 0.78,0.78c-0,0.428 -0.352,0.78 -0.78,0.78c-0.428,0 -0.78,-0.352 -0.78,-0.78c0,-0.428 0.352,-0.78 0.78,-0.78Zm1.44,6.78l-2.64,0c-0.263,0 -0.48,-0.217 -0.48,-0.48c0,-0.263 0.217,-0.48 0.48,-0.48l0.84,0l0,-2.64l-0.48,0c-0.263,0 -0.48,-0.217 -0.48,-0.48c0,-0.263 0.217,-0.48 0.48,-0.48l0.96,0c0.263,0 0.48,0.217 0.48,0.48l0,3.12l0.84,0c0.263,0 0.48,0.217 0.48,0.48c0,0.263 -0.217,0.48 -0.48,0.48Z"},null,-1),_hoisted_2$6$1=[_hoisted_1$6$1],_sfc_main$7$1=defineComponent({__name:"InfoIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$6$1,16))}}),_hoisted_1$5$1=createBaseVNode("path",{d:"M11.963,6.037c-0,3.292 -2.671,5.963 -5.963,5.963c-3.292,0 -5.963,-2.671 -5.963,-5.963c0,-3.292 2.671,-5.962 5.963,-5.962c3.292,-0 5.963,2.67 5.963,5.962Zm-0.918,0c0,-2.785 -2.26,-5.045 -5.045,-5.045c-2.785,0 -5.045,2.26 -5.045,5.045c-0,2.786 2.26,5.046 5.045,5.046c2.785,-0 5.045,-2.26 5.045,-5.046Z"},null,-1),_hoisted_2$5$1=createBaseVNode("path",{d:"M8.401,3.449c0.163,-0.194 0.452,-0.219 0.646,-0.056c0.194,0.163 0.219,0.452 0.056,0.646l-3.853,4.587c-0.085,0.101 -0.21,0.161 -0.343,0.163c-0.133,0.003 -0.26,-0.053 -0.349,-0.151l-1.651,-1.835c-0.169,-0.188 -0.154,-0.479 0.034,-0.648c0.188,-0.169 0.479,-0.154 0.648,0.034l1.298,1.443l3.514,-4.183Z"},null,-1),_hoisted_3$5=[_hoisted_1$5$1,_hoisted_2$5$1],_sfc_main$6$1=defineComponent({__name:"SuccessOutlineIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_3$5,16))}}),_hoisted_1$4$1=createBaseVNode("path",{d:"M12, 6c0, 3.313 -2.687, 6 -6, 6c-3.313,-0 -6,-2.688 -6,-6c0,-3.313 2.688,-6 6,-6c3.313,-0 6,2.687 6,6Zm-0.923,-0c-0,-2.803 -2.274,-5.077 -5.077,-5.077c-2.803,0 -5.077,2.274 -5.077,5.077c0,2.803 2.274,5.077 5.077,5.077c2.803,-0 5.077,-2.274 5.077,-5.077Z"},null,-1),_hoisted_2$4$1=createBaseVNode("path",{d:"M5.373,3.426c-0,-0.009 -0,-0.019 -0,-0.028c-0,-0.342 0.279,-0.624 0.621,-0.627c0.002,-0 0.004,-0 0.006,-0c0.344,-0 0.627,0.283 0.627,0.627c-0,0.009 -0,0.019 -0.001,0.028l0,0.001l-0.165,3.518c-0.012,0.246 -0.215,0.44 -0.461,0.44c-0.246,-0 -0.449,-0.194 -0.461,-0.44l-0.166,-3.518l0,-0.001Z"},null,-1),_hoisted_3$4=createBaseVNode("path",{d:"M6,9.228c-0.316,0 -0.577,-0.26 -0.577,-0.577c0,-0.316 0.261,-0.577 0.577,-0.577c0.316,0 0.577,0.261 0.577,0.577c-0,0.317 -0.261,0.577 -0.577,0.577Z"},null,-1),_hoisted_4$2=[_hoisted_1$4$1,_hoisted_2$4$1,_hoisted_3$4],_sfc_main$5$1=defineComponent({__name:"ErrorOutlineIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_4$2,16))}}),_hoisted_1$3$1=createBaseVNode("path",{d:"M6, 0c3.313, 0 6, 2.687 6, 6c-0, 3.313 -2.687, 6 -6, 6c-3.313,-0 -6,-2.687 -6,-6c0,-3.313 2.687,-6 6,-6Zm0, 0.96c-2.783, 0 -5.04, 2.257 -5.04, 5.04c0, 2.783 2.257, 5.04 5.04, 5.04c2.783, 0 5.04,-2.257 5.04,-5.04c-0,-2.783 -2.257,-5.04 -5.04,-5.04Z"},null,-1),_hoisted_2$3$1=createBaseVNode("path",{d:"M6.6, 8.28l0.84, 0c0.265, 0 0.48, 0.215 0.48, 0.48c-0, 0.265 -0.215, 0.48 -0.48, 0.48l-2.64,-0c-0.265, 0 -0.48,-0.215 -0.48,-0.48c-0,-0.265 0.215,-0.48 0.48,-0.48l0.84, 0l-0,-2.64l-0.48, 0c-0.265, 0 -0.48,-0.215 -0.48,-0.48c-0,-0.265 0.215,-0.48 0.48,-0.48l0.96, 0c0.265, 0 0.48, 0.215 0.48, 0.48l-0, 3.12Z"},null,-1),_hoisted_3$3$1=createBaseVNode("path",{d:"M6, 2.46c-0.428, 0 -0.78, 0.352 -0.78, 0.78c-0, 0.428 0.352, 0.78 0.78, 0.78c0.428, 0 0.78,-0.352 0.78,-0.78c-0,-0.428 -0.352,-0.78 -0.78,-0.78Z"},null,-1),_hoisted_4$1$1=[_hoisted_1$3$1,_hoisted_2$3$1,_hoisted_3$3$1],_sfc_main$4$1=defineComponent({__name:"InfoOutlineIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_4$1$1,16))}}),_hoisted_1$2$1=createBaseVNode("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),_hoisted_2$2$1=createBaseVNode("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",class:"Notivue__spinner"},null,-1),_hoisted_3$2$1=[_hoisted_1$2$1,_hoisted_2$2$1],_sfc_main$3$1=defineComponent({__name:"PromiseIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(__spreadProps(__spreadValues({},unref(svgProps)),{width:28,height:28,fill:"currentColor"}))),_hoisted_3$2$1,16))}}),_hoisted_1$1$1=createBaseVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),_hoisted_2$1$1=createBaseVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),_hoisted_3$1$1=[_hoisted_1$1$1,_hoisted_2$1$1],_sfc_main$2$1=defineComponent({__name:"CloseIcon",setup(ke){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(featherProps))),_hoisted_3$1$1,16))}}),svgProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true"},ionProps=__spreadProps(__spreadValues({},svgProps),{fill:"currentColor",viewBox:"0 0 12 12"}),featherProps=__spreadProps(__spreadValues({},svgProps),{stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}),filledIcons={[NotificationTypeKeys.SUCCESS]:markRaw(_sfc_main$9$1),[NotificationTypeKeys.ERROR]:markRaw(_sfc_main$8$1),[NotificationTypeKeys.INFO]:markRaw(_sfc_main$7$1),[NotificationTypeKeys.WARNING]:markRaw(_sfc_main$8$1),[NotificationTypeKeys.PROMISE]:markRaw(_sfc_main$3$1),[NotificationTypeKeys.PROMISE_RESOLVE]:markRaw(_sfc_main$9$1),[NotificationTypeKeys.PROMISE_REJECT]:markRaw(_sfc_main$8$1),close:markRaw(_sfc_main$2$1)};NotificationTypeKeys.SUCCESS+"",markRaw(_sfc_main$6$1),NotificationTypeKeys.ERROR+"",markRaw(_sfc_main$5$1),NotificationTypeKeys.INFO+"",markRaw(_sfc_main$4$1),NotificationTypeKeys.WARNING+"",markRaw(_sfc_main$5$1),NotificationTypeKeys.PROMISE+"",markRaw(_sfc_main$3$1),NotificationTypeKeys.PROMISE_RESOLVE+"",markRaw(_sfc_main$6$1),NotificationTypeKeys.PROMISE_REJECT+"",markRaw(_sfc_main$5$1),markRaw(_sfc_main$2$1);const layout$1={"--nv-width":"350px","--nv-spacing":"0.625rem","--nv-radius":"0.625rem","--nv-icon-size":"1.25rem","--nv-title-size":"0.925rem","--nv-message-size":"0.925rem","--nv-y-align":"center"},shadow={"--nv-shadow":"rgba(0, 0, 0, 0.06) 0px 4px 6px -1px, rgba(0, 0, 0, 0.03) 0px 2px 4px -1px"},lightTheme=__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-global-bg":"#FFF","--nv-global-fg":"#171717","--nv-success-accent":"#28B780","--nv-error-accent":"#E74C3C","--nv-warning-accent":"#F59E0B","--nv-info-accent":"#3E8EFF","--nv-promise-accent":"#171717"});__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-success-bg":"#E9FAEF","--nv-success-accent":"#059669","--nv-success-fg":"#057452","--nv-error-bg":"#FEEFEF","--nv-error-accent":"#E6523C","--nv-error-fg":"#C5412C","--nv-warning-bg":"#FFF0D8","--nv-warning-accent":"#F48533","--nv-warning-fg":"#81471D","--nv-info-bg":"#DEF0FA","--nv-info-accent":"#1F70AC","--nv-info-fg":"#1F70AC","--nv-promise-bg":"#FFF","--nv-promise-accent":"#334155","--nv-promise-fg":"#334155"});__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-global-accent":"#FFF","--nv-global-fg":"#FFF","--nv-success-bg":"#178570","--nv-error-bg":"#C94430","--nv-info-bg":"#117AAE","--nv-warning-bg":"#FFE556","--nv-warning-fg":"#4F5358","--nv-warning-accent":"#4F5358","--nv-promise-bg":"#FFF","--nv-promise-fg":"#334155","--nv-promise-accent":"#64748B"});__spreadProps(__spreadValues({},layout$1),{"--nv-border-width":"1px","--nv-global-bg":"#1F1F1F","--nv-global-border":"#414141","--nv-global-fg":"#D0D0D0","--nv-success-accent":"#8EF997","--nv-error-accent":"#FF7777","--nv-warning-accent":"#FFE554","--nv-info-accent":"#5FD4FF","--nv-promise-accent":"#D0D0D0"});__spreadProps(__spreadValues({},layout$1),{"--nv-border-width":"1px","--nv-global-bg":"#20252E","--nv-global-border":"#353b45","--nv-global-fg":"#dfdfdf","--nv-success-accent":"#34D399","--nv-error-accent":"#FF7777","--nv-warning-accent":"#FFE554","--nv-info-accent":"#5FD4FF","--nv-promise-accent":"#D0D0D0"});const Classes={NOTIFICATION:CLASS_PREFIX+"notification",ICON:CLASS_PREFIX+"icon",CONTENT:CLASS_PREFIX+"content",TITLE:CLASS_PREFIX+"content-title",MESSAGE:CLASS_PREFIX+"content-message",CLOSE:CLASS_PREFIX+"close",CLOSE_ICON:CLASS_PREFIX+"close-icon",TRANSITION:CLASS_PREFIX+"transition",PROGRESS:CLASS_PREFIX+"progress",DUPLICATE:CLASS_PREFIX+"duplicate"},DEFAULT_NOTIFICATIONS_PROPS={icons:()=>filledIcons,theme:()=>lightTheme,hideClose:!1,closeAriaLabel:"Close"},_hoisted_1$p=["data-notivue","data-notivue-has-title"],_hoisted_2$c=["aria-live","role"],_hoisted_3$7=["textContent"],_hoisted_4$3=["textContent"],_hoisted_5$2=["aria-label"],_hoisted_6$2=["textContent"],_sfc_main$1$1=defineComponent({__name:"Notification",props:mergeDefaults({item:{},icons:{},theme:{},closeAriaLabel:{},hideClose:{type:Boolean}},DEFAULT_NOTIFICATIONS_PROPS),setup(ke){const e=ke,Te=shallowRef(e.icons[e.item.type]),Oe=e.icons.close;return watch(()=>e.item.type,Be=>Te.value=e.icons[Be],{flush:"sync"}),(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(Classes).NOTIFICATION,{[unref(Classes).DUPLICATE]:Be.item.duplicateCount>0}]),key:Be.item.duplicateCount,"data-notivue":Be.item.type,"data-notivue-has-title":!!Be.item.title,style:normalizeStyle(Be.theme)},[Te.value?(openBlock(),createElementBlock(Fragment,{key:0},[typeof Te.value=="object"?(openBlock(),createBlock(Transition,{key:0,name:unref(Classes).TRANSITION,mode:"out-in"},{default:withCtx(()=>[typeof Te.value=="object"?(openBlock(),createBlock(resolveDynamicComponent(Te.value),{key:0,class:normalizeClass(unref(Classes).ICON),"aria-hidden":"true"},null,8,["class"])):createCommentVNode("",!0)]),_:1},8,["name"])):typeof Te.value=="string"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(Classes).ICON),"aria-hidden":"true"},toDisplayString(Te.value),3)):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(unref(Classes).CONTENT),"aria-live":Be.item.ariaLive,role:Be.item.ariaRole,"aria-atomic":"true"},[Be.item.title?(openBlock(),createElementBlock("h3",{key:0,class:normalizeClass(unref(Classes).TITLE),textContent:toDisplayString(unref(Be.item.title))},null,10,_hoisted_3$7)):createCommentVNode("",!0),createBaseVNode("p",{class:normalizeClass(unref(Classes).MESSAGE),textContent:toDisplayString(unref(Be.item.message))},null,10,_hoisted_4$3)],10,_hoisted_2$c),!e.hideClose&&unref(Oe)&&Be.item.type!=="promise"?(openBlock(),createElementBlock("button",{key:1,class:normalizeClass(unref(Classes).CLOSE),"aria-label":Be.closeAriaLabel,type:"button",tabindex:"-1",onClick:Ue[0]||(Ue[0]=(...He)=>Be.item.clear&&Be.item.clear(...He))},[typeof unref(Oe)=="object"?(openBlock(),createBlock(resolveDynamicComponent(unref(Oe)),{key:0,class:normalizeClass(unref(Classes).CLOSE_ICON)},null,8,["class"])):typeof unref(Oe)=="string"?(openBlock(),createElementBlock("div",{key:1,"aria-hidden":"true",textContent:toDisplayString(unref(Oe))},null,8,_hoisted_6$2)):createCommentVNode("",!0)],10,_hoisted_5$2)):createCommentVNode("",!0),renderSlot(Be.$slots,"default")],14,_hoisted_1$p))}});function getState(ke){if(ke)try{return JSON.parse(ke)}catch(e){console.warn(e,"unknown json format!")}}function createStore(ke,e){const{storage:Te,encrypt:Oe,decrypt:Be}=e,Ue=Te.getItem(ke.$id);if(Ue){const We=getState(Be?Be(Ue):Ue);We&&(ke.$state=We)}else{const We=JSON.stringify(ke.$state);Te.setItem(ke.$id,Oe?Oe(We):We)}const He=(We,Cn)=>{const An=JSON.stringify(Cn);Te.setItem(ke.$id,Oe?Oe(An):An)};ke.$subscribe(He,{detached:!0,deep:!0,immediate:!0})}function storePlugin(ke){return e=>{const Te={...ke},{store:Oe}=e,{stores:Be,encrypt:Ue,decrypt:He}=Te;Be&&Be.length>0&&Be.forEach(We=>{if(typeof We=="string"){if(We===Oe.$id){const Cn=Te.storage??localStorage;createStore(Oe,{storage:Cn,encrypt:Ue,decrypt:He})}}else if(We.name===Oe.$id){const{storage:Cn,ciphertext:An}=We;createStore(Oe,{storage:Cn||(Te.storage?Te.storage:localStorage),encrypt:An===!1?void 0:Ue,decrypt:An===!1?void 0:He})}})}}const matchIconName=/^[a-z0-9]+(-[a-z0-9]+)*$/,stringToIcon=(ke,e,Te,Oe="")=>{const Be=ke.split(":");if(ke.slice(0,1)==="@"){if(Be.length<2||Be.length>3)return null;Oe=Be.shift().slice(1)}if(Be.length>3||!Be.length)return null;if(Be.length>1){const We=Be.pop(),Cn=Be.pop(),An={provider:Be.length>0?Be[0]:Oe,prefix:Cn,name:We};return e&&!validateIconName(An)?null:An}const Ue=Be[0],He=Ue.split("-");if(He.length>1){const We={provider:Oe,prefix:He.shift(),name:He.join("-")};return e&&!validateIconName(We)?null:We}if(Te&&Oe===""){const We={provider:Oe,prefix:"",name:Ue};return e&&!validateIconName(We,Te)?null:We}return null},validateIconName=(ke,e)=>ke?!!((e&&ke.prefix===""||ke.prefix)&&ke.name):!1,defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1});function mergeIconTransformations(ke,e){const Te={};!ke.hFlip!=!e.hFlip&&(Te.hFlip=!0),!ke.vFlip!=!e.vFlip&&(Te.vFlip=!0);const Oe=((ke.rotate||0)+(e.rotate||0))%4;return Oe&&(Te.rotate=Oe),Te}function mergeIconData(ke,e){const Te=mergeIconTransformations(ke,e);for(const Oe in defaultExtendedIconProps)Oe in defaultIconTransformations?Oe in ke&&!(Oe in Te)&&(Te[Oe]=defaultIconTransformations[Oe]):Oe in e?Te[Oe]=e[Oe]:Oe in ke&&(Te[Oe]=ke[Oe]);return Te}function getIconsTree(ke,e){const Te=ke.icons,Oe=ke.aliases||Object.create(null),Be=Object.create(null);function Ue(He){if(Te[He])return Be[He]=[];if(!(He in Be)){Be[He]=null;const We=Oe[He]&&Oe[He].parent,Cn=We&&Ue(We);Cn&&(Be[He]=[We].concat(Cn))}return Be[He]}return Object.keys(Te).concat(Object.keys(Oe)).forEach(Ue),Be}function internalGetIconData(ke,e,Te){const Oe=ke.icons,Be=ke.aliases||Object.create(null);let Ue={};function He(We){Ue=mergeIconData(Oe[We]||Be[We],Ue)}return He(e),Te.forEach(He),mergeIconData(ke,Ue)}function parseIconSet(ke,e){const Te=[];if(typeof ke!="object"||typeof ke.icons!="object")return Te;ke.not_found instanceof Array&&ke.not_found.forEach(Be=>{e(Be,null),Te.push(Be)});const Oe=getIconsTree(ke);for(const Be in Oe){const Ue=Oe[Be];Ue&&(e(Be,internalGetIconData(ke,Be,Ue)),Te.push(Be))}return Te}const optionalPropertyDefaults={provider:"",aliases:{},not_found:{},...defaultIconDimensions};function checkOptionalProps(ke,e){for(const Te in e)if(Te in ke&&typeof ke[Te]!=typeof e[Te])return!1;return!0}function quicklyValidateIconSet(ke){if(typeof ke!="object"||ke===null)return null;const e=ke;if(typeof e.prefix!="string"||!ke.icons||typeof ke.icons!="object"||!checkOptionalProps(ke,optionalPropertyDefaults))return null;const Te=e.icons;for(const Be in Te){const Ue=Te[Be];if(!Be||typeof Ue.body!="string"||!checkOptionalProps(Ue,defaultExtendedIconProps))return null}const Oe=e.aliases||Object.create(null);for(const Be in Oe){const Ue=Oe[Be],He=Ue.parent;if(!Be||typeof He!="string"||!Te[He]&&!Oe[He]||!checkOptionalProps(Ue,defaultExtendedIconProps))return null}return e}const dataStorage=Object.create(null);function newStorage(ke,e){return{provider:ke,prefix:e,icons:Object.create(null),missing:new Set}}function getStorage(ke,e){const Te=dataStorage[ke]||(dataStorage[ke]=Object.create(null));return Te[e]||(Te[e]=newStorage(ke,e))}function addIconSet(ke,e){return quicklyValidateIconSet(e)?parseIconSet(e,(Te,Oe)=>{Oe?ke.icons[Te]=Oe:ke.missing.add(Te)}):[]}function addIconToStorage(ke,e,Te){try{if(typeof Te.body=="string")return ke.icons[e]={...Te},!0}catch{}return!1}let simpleNames=!1;function allowSimpleNames(ke){return typeof ke=="boolean"&&(simpleNames=ke),simpleNames}function getIconData(ke){const e=typeof ke=="string"?stringToIcon(ke,!0,simpleNames):ke;if(e){const Te=getStorage(e.provider,e.prefix),Oe=e.name;return Te.icons[Oe]||(Te.missing.has(Oe)?null:void 0)}}function addIcon(ke,e){const Te=stringToIcon(ke,!0,simpleNames);if(!Te)return!1;const Oe=getStorage(Te.provider,Te.prefix);return e?addIconToStorage(Oe,Te.name,e):(Oe.missing.add(Te.name),!0)}function addCollection(ke,e){if(typeof ke!="object")return!1;if(typeof e!="string"&&(e=ke.provider||""),simpleNames&&!e&&!ke.prefix){let Be=!1;return quicklyValidateIconSet(ke)&&(ke.prefix="",parseIconSet(ke,(Ue,He)=>{addIcon(Ue,He)&&(Be=!0)})),Be}const Te=ke.prefix;if(!validateIconName({prefix:Te,name:"a"}))return!1;const Oe=getStorage(e,Te);return!!addIconSet(Oe,ke)}const defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(ke,e,Te){if(e===1)return ke;if(Te=Te||100,typeof ke=="number")return Math.ceil(ke*e*Te)/Te;if(typeof ke!="string")return ke;const Oe=ke.split(unitsSplit);if(Oe===null||!Oe.length)return ke;const Be=[];let Ue=Oe.shift(),He=unitsTest.test(Ue);for(;;){if(He){const We=parseFloat(Ue);isNaN(We)?Be.push(Ue):Be.push(Math.ceil(We*e*Te)/Te)}else Be.push(Ue);if(Ue=Oe.shift(),Ue===void 0)return Be.join("");He=!He}}function splitSVGDefs(ke,e="defs"){let Te="";const Oe=ke.indexOf("<"+e);for(;Oe>=0;){const Be=ke.indexOf(">",Oe),Ue=ke.indexOf("</"+e);if(Be===-1||Ue===-1)break;const He=ke.indexOf(">",Ue);if(He===-1)break;Te+=ke.slice(Be+1,Ue).trim(),ke=ke.slice(0,Oe).trim()+ke.slice(He+1)}return{defs:Te,content:ke}}function mergeDefsAndContent(ke,e){return ke?"<defs>"+ke+"</defs>"+e:e}function wrapSVGContent(ke,e,Te){const Oe=splitSVGDefs(ke);return mergeDefsAndContent(Oe.defs,e+Oe.content+Te)}const isUnsetKeyword=ke=>ke==="unset"||ke==="undefined"||ke==="none";function iconToSVG(ke,e){const Te={...defaultIconProps,...ke},Oe={...defaultIconCustomisations,...e},Be={left:Te.left,top:Te.top,width:Te.width,height:Te.height};let Ue=Te.body;[Te,Oe].forEach(ei=>{const ni=[],ti=ei.hFlip,ri=ei.vFlip;let oi=ei.rotate;ti?ri?oi+=2:(ni.push("translate("+(Be.width+Be.left).toString()+" "+(0-Be.top).toString()+")"),ni.push("scale(-1 1)"),Be.top=Be.left=0):ri&&(ni.push("translate("+(0-Be.left).toString()+" "+(Be.height+Be.top).toString()+")"),ni.push("scale(1 -1)"),Be.top=Be.left=0);let ai;switch(oi<0&&(oi-=Math.floor(oi/4)*4),oi=oi%4,oi){case 1:ai=Be.height/2+Be.top,ni.unshift("rotate(90 "+ai.toString()+" "+ai.toString()+")");break;case 2:ni.unshift("rotate(180 "+(Be.width/2+Be.left).toString()+" "+(Be.height/2+Be.top).toString()+")");break;case 3:ai=Be.width/2+Be.left,ni.unshift("rotate(-90 "+ai.toString()+" "+ai.toString()+")");break}oi%2===1&&(Be.left!==Be.top&&(ai=Be.left,Be.left=Be.top,Be.top=ai),Be.width!==Be.height&&(ai=Be.width,Be.width=Be.height,Be.height=ai)),ni.length&&(Ue=wrapSVGContent(Ue,'<g transform="'+ni.join(" ")+'">',"</g>"))});const He=Oe.width,We=Oe.height,Cn=Be.width,An=Be.height;let En,Sn;He===null?(Sn=We===null?"1em":We==="auto"?An:We,En=calculateSize(Sn,Cn/An)):(En=He==="auto"?Cn:He,Sn=We===null?calculateSize(En,An/Cn):We==="auto"?An:We);const Tn={},Ln=(ei,ni)=>{isUnsetKeyword(ni)||(Tn[ei]=ni.toString())};Ln("width",En),Ln("height",Sn);const Bn=[Be.left,Be.top,Cn,An];return Tn.viewBox=Bn.join(" "),{attributes:Tn,viewBox:Bn,body:Ue}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(ke,e=randomPrefix){const Te=[];let Oe;for(;Oe=regex.exec(ke);)Te.push(Oe[1]);if(!Te.length)return ke;const Be="suffix"+(Math.random()*16777216|Date.now()).toString(16);return Te.forEach(Ue=>{const He=typeof e=="function"?e(Ue):e+(counter++).toString(),We=Ue.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");ke=ke.replace(new RegExp('([#;"])('+We+')([")]|\\.[a-z])',"g"),"$1"+He+Be+"$3")}),ke=ke.replace(new RegExp(Be,"g"),""),ke}const storage$1=Object.create(null);function setAPIModule(ke,e){storage$1[ke]=e}function getAPIModule(ke){return storage$1[ke]||storage$1[""]}function createAPIConfig(ke){let e;if(typeof ke.resources=="string")e=[ke.resources];else if(e=ke.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:ke.path||"/",maxURL:ke.maxURL||500,rotate:ke.rotate||750,timeout:ke.timeout||5e3,random:ke.random===!0,index:ke.index||0,dataAfterTimeout:ke.dataAfterTimeout!==!1}}const configStorage=Object.create(null),fallBackAPISources=["https://api.simplesvg.com","https://api.unisvg.com"],fallBackAPI=[];for(;fallBackAPISources.length>0;)fallBackAPISources.length===1||Math.random()>.5?fallBackAPI.push(fallBackAPISources.shift()):fallBackAPI.push(fallBackAPISources.pop());configStorage[""]=createAPIConfig({resources:["https://api.iconify.design"].concat(fallBackAPI)});function addAPIProvider(ke,e){const Te=createAPIConfig(e);return Te===null?!1:(configStorage[ke]=Te,!0)}function getAPIConfig(ke){return configStorage[ke]}const detectFetch=()=>{let ke;try{if(ke=fetch,typeof ke=="function")return ke}catch{}};let fetchModule=detectFetch();function calculateMaxLength(ke,e){const Te=getAPIConfig(ke);if(!Te)return 0;let Oe;if(!Te.maxURL)Oe=0;else{let Be=0;Te.resources.forEach(He=>{Be=Math.max(Be,He.length)});const Ue=e+".json?icons=";Oe=Te.maxURL-Be-Te.path.length-Ue.length}return Oe}function shouldAbort(ke){return ke===404}const prepare=(ke,e,Te)=>{const Oe=[],Be=calculateMaxLength(ke,e),Ue="icons";let He={type:Ue,provider:ke,prefix:e,icons:[]},We=0;return Te.forEach((Cn,An)=>{We+=Cn.length+1,We>=Be&&An>0&&(Oe.push(He),He={type:Ue,provider:ke,prefix:e,icons:[]},We=Cn.length),He.icons.push(Cn)}),Oe.push(He),Oe};function getPath(ke){if(typeof ke=="string"){const e=getAPIConfig(ke);if(e)return e.path}return"/"}const send=(ke,e,Te)=>{if(!fetchModule){Te("abort",424);return}let Oe=getPath(e.provider);switch(e.type){case"icons":{const Ue=e.prefix,We=e.icons.join(","),Cn=new URLSearchParams({icons:We});Oe+=Ue+".json?"+Cn.toString();break}case"custom":{const Ue=e.uri;Oe+=Ue.slice(0,1)==="/"?Ue.slice(1):Ue;break}default:Te("abort",400);return}let Be=503;fetchModule(ke+Oe).then(Ue=>{const He=Ue.status;if(He!==200){setTimeout(()=>{Te(shouldAbort(He)?"abort":"next",He)});return}return Be=501,Ue.json()}).then(Ue=>{if(typeof Ue!="object"||Ue===null){setTimeout(()=>{Ue===404?Te("abort",Ue):Te("next",Be)});return}setTimeout(()=>{Te("success",Ue)})}).catch(()=>{Te("next",Be)})},fetchAPIModule={prepare,send};function sortIcons(ke){const e={loaded:[],missing:[],pending:[]},Te=Object.create(null);ke.sort((Be,Ue)=>Be.provider!==Ue.provider?Be.provider.localeCompare(Ue.provider):Be.prefix!==Ue.prefix?Be.prefix.localeCompare(Ue.prefix):Be.name.localeCompare(Ue.name));let Oe={provider:"",prefix:"",name:""};return ke.forEach(Be=>{if(Oe.name===Be.name&&Oe.prefix===Be.prefix&&Oe.provider===Be.provider)return;Oe=Be;const Ue=Be.provider,He=Be.prefix,We=Be.name,Cn=Te[Ue]||(Te[Ue]=Object.create(null)),An=Cn[He]||(Cn[He]=getStorage(Ue,He));let En;We in An.icons?En=e.loaded:He===""||An.missing.has(We)?En=e.missing:En=e.pending;const Sn={provider:Ue,prefix:He,name:We};En.push(Sn)}),e}function removeCallback(ke,e){ke.forEach(Te=>{const Oe=Te.loaderCallbacks;Oe&&(Te.loaderCallbacks=Oe.filter(Be=>Be.id!==e))})}function updateCallbacks(ke){ke.pendingCallbacksFlag||(ke.pendingCallbacksFlag=!0,setTimeout(()=>{ke.pendingCallbacksFlag=!1;const e=ke.loaderCallbacks?ke.loaderCallbacks.slice(0):[];if(!e.length)return;let Te=!1;const Oe=ke.provider,Be=ke.prefix;e.forEach(Ue=>{const He=Ue.icons,We=He.pending.length;He.pending=He.pending.filter(Cn=>{if(Cn.prefix!==Be)return!0;const An=Cn.name;if(ke.icons[An])He.loaded.push({provider:Oe,prefix:Be,name:An});else if(ke.missing.has(An))He.missing.push({provider:Oe,prefix:Be,name:An});else return Te=!0,!0;return!1}),He.pending.length!==We&&(Te||removeCallback([ke],Ue.id),Ue.callback(He.loaded.slice(0),He.missing.slice(0),He.pending.slice(0),Ue.abort))})}))}let idCounter=0;function storeCallback(ke,e,Te){const Oe=idCounter++,Be=removeCallback.bind(null,Te,Oe);if(!e.pending.length)return Be;const Ue={id:Oe,icons:e,callback:ke,abort:Be};return Te.forEach(He=>{(He.loaderCallbacks||(He.loaderCallbacks=[])).push(Ue)}),Be}function listToIcons(ke,e=!0,Te=!1){const Oe=[];return ke.forEach(Be=>{const Ue=typeof Be=="string"?stringToIcon(Be,e,Te):Be;Ue&&Oe.push(Ue)}),Oe}var defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function sendQuery(ke,e,Te,Oe){const Be=ke.resources.length,Ue=ke.random?Math.floor(Math.random()*Be):ke.index;let He;if(ke.random){let Pi=ke.resources.slice(0);for(He=[];Pi.length>1;){const vi=Math.floor(Math.random()*Pi.length);He.push(Pi[vi]),Pi=Pi.slice(0,vi).concat(Pi.slice(vi+1))}He=He.concat(Pi)}else He=ke.resources.slice(Ue).concat(ke.resources.slice(0,Ue));const We=Date.now();let Cn="pending",An=0,En,Sn=null,Tn=[],Ln=[];typeof Oe=="function"&&Ln.push(Oe);function Bn(){Sn&&(clearTimeout(Sn),Sn=null)}function ei(){Cn==="pending"&&(Cn="aborted"),Bn(),Tn.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),Tn=[]}function ni(Pi,vi){vi&&(Ln=[]),typeof Pi=="function"&&Ln.push(Pi)}function ti(){return{startTime:We,payload:e,status:Cn,queriesSent:An,queriesPending:Tn.length,subscribe:ni,abort:ei}}function ri(){Cn="failed",Ln.forEach(Pi=>{Pi(void 0,En)})}function oi(){Tn.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),Tn=[]}function ai(Pi,vi,pi){const Mi=vi!=="success";switch(Tn=Tn.filter(Fi=>Fi!==Pi),Cn){case"pending":break;case"failed":if(Mi||!ke.dataAfterTimeout)return;break;default:return}if(vi==="abort"){En=pi,ri();return}if(Mi){En=pi,Tn.length||(He.length?ci():ri());return}if(Bn(),oi(),!ke.random){const Fi=ke.resources.indexOf(Pi.resource);Fi!==-1&&Fi!==ke.index&&(ke.index=Fi)}Cn="completed",Ln.forEach(Fi=>{Fi(pi)})}function ci(){if(Cn!=="pending")return;Bn();const Pi=He.shift();if(Pi===void 0){if(Tn.length){Sn=setTimeout(()=>{Bn(),Cn==="pending"&&(oi(),ri())},ke.timeout);return}ri();return}const vi={status:"pending",resource:Pi,callback:(pi,Mi)=>{ai(vi,pi,Mi)}};Tn.push(vi),An++,Sn=setTimeout(ci,ke.rotate),Te(Pi,e,vi.callback)}return setTimeout(ci),ti}function initRedundancy(ke){const e={...defaultConfig,...ke};let Te=[];function Oe(){Te=Te.filter(We=>We().status==="pending")}function Be(We,Cn,An){const En=sendQuery(e,We,Cn,(Sn,Tn)=>{Oe(),An&&An(Sn,Tn)});return Te.push(En),En}function Ue(We){return Te.find(Cn=>We(Cn))||null}return{query:Be,find:Ue,setIndex:We=>{e.index=We},getIndex:()=>e.index,cleanup:Oe}}function emptyCallback$1(){}const redundancyCache=Object.create(null);function getRedundancyCache(ke){if(!redundancyCache[ke]){const e=getAPIConfig(ke);if(!e)return;const Te=initRedundancy(e),Oe={config:e,redundancy:Te};redundancyCache[ke]=Oe}return redundancyCache[ke]}function sendAPIQuery(ke,e,Te){let Oe,Be;if(typeof ke=="string"){const Ue=getAPIModule(ke);if(!Ue)return Te(void 0,424),emptyCallback$1;Be=Ue.send;const He=getRedundancyCache(ke);He&&(Oe=He.redundancy)}else{const Ue=createAPIConfig(ke);if(Ue){Oe=initRedundancy(Ue);const He=ke.resources?ke.resources[0]:"",We=getAPIModule(He);We&&(Be=We.send)}}return!Oe||!Be?(Te(void 0,424),emptyCallback$1):Oe.query(e,Be,Te)().abort}function emptyCallback(){}function loadedNewIcons(ke){ke.iconsLoaderFlag||(ke.iconsLoaderFlag=!0,setTimeout(()=>{ke.iconsLoaderFlag=!1,updateCallbacks(ke)}))}function checkIconNamesForAPI(ke){const e=[],Te=[];return ke.forEach(Oe=>{(Oe.match(matchIconName)?e:Te).push(Oe)}),{valid:e,invalid:Te}}function parseLoaderResponse(ke,e,Te){function Oe(){const Be=ke.pendingIcons;e.forEach(Ue=>{Be&&Be.delete(Ue),ke.icons[Ue]||ke.missing.add(Ue)})}if(Te&&typeof Te=="object")try{if(!addIconSet(ke,Te).length){Oe();return}}catch(Be){console.error(Be)}Oe(),loadedNewIcons(ke)}function parsePossiblyAsyncResponse(ke,e){ke instanceof Promise?ke.then(Te=>{e(Te)}).catch(()=>{e(null)}):e(ke)}function loadNewIcons(ke,e){ke.iconsToLoad?ke.iconsToLoad=ke.iconsToLoad.concat(e).sort():ke.iconsToLoad=e,ke.iconsQueueFlag||(ke.iconsQueueFlag=!0,setTimeout(()=>{ke.iconsQueueFlag=!1;const{provider:Te,prefix:Oe}=ke,Be=ke.iconsToLoad;if(delete ke.iconsToLoad,!Be||!Be.length)return;const Ue=ke.loadIcon;if(ke.loadIcons&&(Be.length>1||!Ue)){parsePossiblyAsyncResponse(ke.loadIcons(Be,Oe,Te),En=>{parseLoaderResponse(ke,Be,En)});return}if(Ue){Be.forEach(En=>{const Sn=Ue(En,Oe,Te);parsePossiblyAsyncResponse(Sn,Tn=>{const Ln=Tn?{prefix:Oe,icons:{[En]:Tn}}:null;parseLoaderResponse(ke,[En],Ln)})});return}const{valid:He,invalid:We}=checkIconNamesForAPI(Be);if(We.length&&parseLoaderResponse(ke,We,null),!He.length)return;const Cn=Oe.match(matchIconName)?getAPIModule(Te):null;if(!Cn){parseLoaderResponse(ke,He,null);return}Cn.prepare(Te,Oe,He).forEach(En=>{sendAPIQuery(Te,En,Sn=>{parseLoaderResponse(ke,En.icons,Sn)})})}))}const loadIcons=(ke,e)=>{const Te=listToIcons(ke,!0,allowSimpleNames()),Oe=sortIcons(Te);if(!Oe.pending.length){let Cn=!0;return e&&setTimeout(()=>{Cn&&e(Oe.loaded,Oe.missing,Oe.pending,emptyCallback)}),()=>{Cn=!1}}const Be=Object.create(null),Ue=[];let He,We;return Oe.pending.forEach(Cn=>{const{provider:An,prefix:En}=Cn;if(En===We&&An===He)return;He=An,We=En,Ue.push(getStorage(An,En));const Sn=Be[An]||(Be[An]=Object.create(null));Sn[En]||(Sn[En]=[])}),Oe.pending.forEach(Cn=>{const{provider:An,prefix:En,name:Sn}=Cn,Tn=getStorage(An,En),Ln=Tn.pendingIcons||(Tn.pendingIcons=new Set);Ln.has(Sn)||(Ln.add(Sn),Be[An][En].push(Sn))}),Ue.forEach(Cn=>{const An=Be[Cn.provider][Cn.prefix];An.length&&loadNewIcons(Cn,An)}),e?storeCallback(e,Oe,Ue):emptyCallback};function mergeCustomisations(ke,e){const Te={...ke};for(const Oe in e){const Be=e[Oe],Ue=typeof Be;Oe in defaultIconSizeCustomisations?(Be===null||Be&&(Ue==="string"||Ue==="number"))&&(Te[Oe]=Be):Ue===typeof Te[Oe]&&(Te[Oe]=Oe==="rotate"?Be%4:Be)}return Te}const separator=/[\s,]+/;function flipFromString(ke,e){e.split(separator).forEach(Te=>{switch(Te.trim()){case"horizontal":ke.hFlip=!0;break;case"vertical":ke.vFlip=!0;break}})}function rotateFromString(ke,e=0){const Te=ke.replace(/^-?[0-9.]*/,"");function Oe(Be){for(;Be<0;)Be+=4;return Be%4}if(Te===""){const Be=parseInt(ke);return isNaN(Be)?0:Oe(Be)}else if(Te!==ke){let Be=0;switch(Te){case"%":Be=25;break;case"deg":Be=90}if(Be){let Ue=parseFloat(ke.slice(0,ke.length-Te.length));return isNaN(Ue)?0:(Ue=Ue/Be,Ue%1===0?Oe(Ue):0)}}return e}function iconToHTML(ke,e){let Te=ke.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const Oe in e)Te+=" "+Oe+'="'+e[Oe]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+Te+">"+ke+"</svg>"}function encodeSVGforURL(ke){return ke.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function svgToData(ke){return"data:image/svg+xml,"+encodeSVGforURL(ke)}function svgToURL(ke){return'url("'+svgToData(ke)+'")'}const defaultExtendedIconCustomisations={...defaultIconCustomisations,inline:!1},svgDefaults={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},commonProps={display:"inline-block"},monotoneProps={backgroundColor:"currentColor"},coloredProps={backgroundColor:"transparent"},propsToAdd={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},propsToAddTo={webkitMask:monotoneProps,mask:monotoneProps,background:coloredProps};for(const ke in propsToAddTo){const e=propsToAddTo[ke];for(const Te in propsToAdd)e[ke+Te]=propsToAdd[Te]}const customisationAliases={};["horizontal","vertical"].forEach(ke=>{const e=ke.slice(0,1)+"Flip";customisationAliases[ke+"-flip"]=e,customisationAliases[ke.slice(0,1)+"-flip"]=e,customisationAliases[ke+"Flip"]=e});function fixSize(ke){return ke+(ke.match(/^[-0-9.]+$/)?"px":"")}const render$1=(ke,e)=>{const Te=mergeCustomisations(defaultExtendedIconCustomisations,e),Oe={...svgDefaults},Be=e.mode||"svg",Ue={},He=e.style,We=typeof He=="object"&&!(He instanceof Array)?He:{};for(let ei in e){const ni=e[ei];if(ni!==void 0)switch(ei){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":Te[ei]=ni===!0||ni==="true"||ni===1;break;case"flip":typeof ni=="string"&&flipFromString(Te,ni);break;case"color":Ue.color=ni;break;case"rotate":typeof ni=="string"?Te[ei]=rotateFromString(ni):typeof ni=="number"&&(Te[ei]=ni);break;case"ariaHidden":case"aria-hidden":ni!==!0&&ni!=="true"&&delete Oe["aria-hidden"];break;default:{const ti=customisationAliases[ei];ti?(ni===!0||ni==="true"||ni===1)&&(Te[ti]=!0):defaultExtendedIconCustomisations[ei]===void 0&&(Oe[ei]=ni)}}}const Cn=iconToSVG(ke,Te),An=Cn.attributes;if(Te.inline&&(Ue.verticalAlign="-0.125em"),Be==="svg"){Oe.style={...Ue,...We},Object.assign(Oe,An);let ei=0,ni=e.id;return typeof ni=="string"&&(ni=ni.replace(/-/g,"_")),Oe.innerHTML=replaceIDs(Cn.body,ni?()=>ni+"ID"+ei++:"iconifyVue"),h$1("svg",Oe)}const{body:En,width:Sn,height:Tn}=ke,Ln=Be==="mask"||(Be==="bg"?!1:En.indexOf("currentColor")!==-1),Bn=iconToHTML(En,{...An,width:Sn+"",height:Tn+""});return Oe.style={...Ue,"--svg":svgToURL(Bn),width:fixSize(An.width),height:fixSize(An.height),...commonProps,...Ln?monotoneProps:coloredProps,...We},h$1("span",Oe)};allowSimpleNames(!0);setAPIModule("",fetchAPIModule);if(typeof document<"u"&&typeof window<"u"){const ke=window;if(ke.IconifyPreload!==void 0){const e=ke.IconifyPreload,Te="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(Oe=>{try{(typeof Oe!="object"||Oe===null||Oe instanceof Array||typeof Oe.icons!="object"||typeof Oe.prefix!="string"||!addCollection(Oe))&&console.error(Te)}catch{console.error(Te)}})}if(ke.IconifyProviders!==void 0){const e=ke.IconifyProviders;if(typeof e=="object"&&e!==null)for(let Te in e){const Oe="IconifyProviders["+Te+"] is invalid.";try{const Be=e[Te];if(typeof Be!="object"||!Be||Be.resources===void 0)continue;addAPIProvider(Te,Be)||console.error(Oe)}catch{console.error(Oe)}}}}const emptyIcon={...defaultIconProps,body:""},Icon$1=defineComponent({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(ke,e,Te){if(typeof ke=="object"&&ke!==null&&typeof ke.body=="string")return this._name="",this.abortLoading(),{data:ke};let Oe;if(typeof ke!="string"||(Oe=stringToIcon(ke,!1,!0))===null)return this.abortLoading(),null;let Be=getIconData(Oe);if(!Be)return(!this._loadingIcon||this._loadingIcon.name!==ke)&&(this.abortLoading(),this._name="",Be!==null&&(this._loadingIcon={name:ke,abort:loadIcons([Oe],()=>{this.counter++})})),null;if(this.abortLoading(),this._name!==ke&&(this._name=ke,e&&e(ke)),Te){Be=Object.assign({},Be);const He=Te(Be.body,Oe.name,Oe.prefix,Oe.provider);typeof He=="string"&&(Be.body=He)}const Ue=["iconify"];return Oe.prefix!==""&&Ue.push("iconify--"+Oe.prefix),Oe.provider!==""&&Ue.push("iconify--"+Oe.provider),{data:Be,classes:Ue}}},render(){this.counter;const ke=this.$attrs,e=this.iconMounted||ke.ssr?this.getIcon(ke.icon,ke.onLoad,ke.customise):null;if(!e)return render$1(emptyIcon,ke);let Te=ke;return e.classes&&(Te={...ke,class:(typeof ke.class=="string"?ke.class+" ":"")+e.classes.join(" ")}),render$1({...defaultIconProps,...e.data},Te)}}),rt$1=Symbol("accordions"),nt$1=Symbol("header"),Ke=Symbol("tabs"),ye$1=()=>{const ke=ref(),e=ref(!1),Te=ref(!1),Oe=()=>{if(!ke.value)return;ke.value.style.setProperty("--collapser","none");const Be=ke.value.offsetHeight;ke.value.style.setProperty("--collapse",`${-Be}px`),ke.value.style.setProperty("--collapser","")};return{collapse:ke,collapsing:e,cssExpanded:Te,doExpand:Be=>{ke.value&&(Be===!0&&ke.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,Oe(),window.requestAnimationFrame(()=>{Te.value=Be})}))},adjust:Oe,onTransitionEnd:(Be,Ue=!0)=>{var He,We;e.value=!1,Ue&&((We=(He=ke.value)==null?void 0:He.querySelector("a"))==null||We.focus()),ke.value&&Be===!1&&ke.value.style.removeProperty("--collapse-max-height")}}},ba="(prefers-color-scheme: dark)",ha="vue-dsfr-scheme";let Ce;const Me="light",Se="dark",De="system",ot$1="data-fr-theme",Xe=ke=>{const e=ke??(localStorage.getItem(Ce)||De);return[Me,Se,De].includes(e)?e:De},it$1=(ke,e)=>(ke=Xe(ke),ke===De?e!=null&&e.matches?Se:Me:ke),ef=ke=>{if(typeof window>"u")return;Ce=ha;const e={scheme:localStorage.getItem(Ce)||De,dataThemeAttribute:ot$1,...ke},Te=window.matchMedia&&window.matchMedia(ba),Oe=ref(Xe(e.scheme));localStorage.setItem(Ce,Oe.value);const Be=ref(it$1(Oe.value,Te)),Ue=ref(Oe.value!==De);watchEffect(()=>{var En;(En=document.body.parentElement)==null||En.setAttribute(e.dataThemeAttribute||ot$1,Be.value)}),Te==null||Te.addEventListener("change",En=>{Ue.value||(En.matches?Be.value=Se:Be.value=Me)}),!Ue.value&&Te!=null&&Te.matches&&(Be.value=Se);const He=En=>{if(Oe.value=Xe(En),localStorage.setItem(Ce,Oe.value),[Me,Se].includes(Oe.value)){Be.value=Oe.value,Ue.value=!0;return}Be.value=it$1(Oe.value,Te),Ue.value=!1},We=document.documentElement,Cn={subtree:!1,childList:!1,attributes:!0},An=new MutationObserver(En=>{for(const Sn of En)if(Sn.type==="attributes"&&Sn.attributeName==="data-fr-theme"){const Tn=Sn.target.getAttribute(Sn.attributeName);Tn!==Oe.value&&He(Tn)}});return An.observe(We,Cn),window.addEventListener("unload",()=>An.disconnect()),He(Oe.value),{setScheme:He,theme:computed(()=>Be.value),scheme:computed(()=>Oe.value)}},x$3=(ke="",e="")=>(ke?`${ke}-`:"")+useId()+(e?`-${e}`:""),$a={class:"fr-accordion"},wa=["aria-expanded","aria-controls"],_a$1=["id"],Da=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>x$3("accordion")},selected:{type:Boolean},title:{default:"Sans intitul"},titleTag:{default:"h3"}},setup(ke){const e=ke,{collapse:Te,collapsing:Oe,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=ref(),Cn=inject(rt$1),{isActive:An,expand:En}=(Cn==null?void 0:Cn(toRef(()=>e.title)))??{isActive:We,expand:()=>We.value=!We.value};return onMounted(()=>{An.value&&Ue(!0)}),watch(An,(Sn,Tn)=>{Sn!==Tn&&Ue(Sn)}),(Sn,Tn)=>(openBlock(),createElementBlock("section",$a,[(openBlock(),createBlock(resolveDynamicComponent(Sn.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":unref(An),"aria-controls":Sn.id,type:"button",onClick:Tn[0]||(Tn[0]=Ln=>unref(En)())},[renderSlot(Sn.$slots,"title",{},()=>[createTextVNode(toDisplayString(Sn.title),1)])],8,wa)]),_:3})),createBaseVNode("div",{id:Sn.id,ref_key:"collapse",ref:Te,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(Oe)}]),onTransitionend:Tn[1]||(Tn[1]=Ln=>unref(He)(unref(An),!1))},[renderSlot(Sn.$slots,"default")],42,_a$1)]))}}),Ia={class:"fr-accordions-group"},Ta=defineComponent({__name:"DsfrAccordionsGroup",props:{modelValue:{default:-1}},emits:["update:modelValue"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=computed({get:()=>Te.modelValue,set(We){Oe("update:modelValue",We)}}),Ue=ref(new Map),He=ref(0);return provide(rt$1,We=>{const Cn=He.value++;Ue.value.set(Cn,We.value);const An=computed(()=>Cn===Be.value);watch(We,()=>{Ue.value.set(Cn,We.value)});function En(){if(Be.value===Cn){Be.value=-1;return}Be.value=Cn}return onUnmounted(()=>{Ue.value.delete(Cn)}),{isActive:An,expand:En}}),(We,Cn)=>(openBlock(),createElementBlock("div",Ia,[renderSlot(We.$slots,"default")]))}}),Ea=["id","role"],Ca=["title","aria-label"],Sa=defineComponent({__name:"DsfrAlert",props:{alert:{type:Boolean},closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>x$3("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=()=>Oe("close"),Ue=computed(()=>[`fr-alert--${Te.type}`,{"fr-alert--sm":Te.small}]);return(He,We)=>He.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:He.id,class:normalizeClass(["fr-alert",Ue.value]),role:He.alert?"alert":void 0},[He.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(He.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(He.title),1)]),_:1})),renderSlot(He.$slots,"default",{},()=>[createTextVNode(toDisplayString(He.description),1)]),He.closeable?(openBlock(),createElementBlock("button",{key:1,class:"fr-btn fr-btn--close",title:He.closeButtonLabel,"aria-label":He.closeButtonLabel,onClick:Be},null,8,Ca)):createCommentVNode("",!0)],10,Ea))}}),Va=defineComponent({__name:"VIcon",props:{name:{},scale:{default:1},verticalAlign:{default:"-0.2em"},animation:{},speed:{},flip:{},label:{},title:{},color:{},fill:{},inverse:{type:Boolean},ssr:{type:Boolean},display:{default:"inline-block"}},setup(ke){useCssVars(Cn=>({"177d0d84":We.value}));const e=ke,Te=ref(null),Oe=computed(()=>`${+e.scale*1.2}rem`),Be=computed(()=>e.flip==="both"?"horizontal,vertical":e.flip);watch(()=>e.title,Ue);async function Ue(){var Cn,An,En,Sn;if(!((Cn=Te.value)!=null&&Cn.$el))return;const Tn=!!((An=Te.value)==null?void 0:An.$el).querySelector("title"),Ln=document.createElement("title");if(!e.title){Ln.remove();return}Ln.innerHTML=e.title,await nextTick(),Tn||(Sn=((En=Te.value)==null?void 0:En.$el).firstChild)==null||Sn.before(Ln)}onMounted(Ue);const He=computed(()=>{var Cn;return(Cn=e.name)!=null&&Cn.startsWith("vi-")?e.name.replace(/vi-(.*)/,"vscode-icons:$1"):e.name??""}),We=computed(()=>e.color??e.fill??"inherit");return(Cn,An)=>(openBlock(),createBlock(unref(Icon$1),{ref_key:"icon",ref:Te,icon:He.value,style:normalizeStyle({fontSize:Oe.value,verticalAlign:Cn.verticalAlign,display:Cn.display}),"aria-label":Cn.label,class:normalizeClass(["vicon",{"vicon-spin":e.animation==="spin","vicon-wrench":e.animation==="wrench","vicon-pulse":e.animation==="pulse","vicon-spin-pulse":e.animation==="spin-pulse","vicon-flash":e.animation==="flash","vicon-float":e.animation==="float","vicon-ring":e.animation==="ring","vicon-slow":e.speed==="slow","vicon-fast":e.speed==="fast","vicon-inverse":e.inverse}]),flip:Be.value,ssr:Cn.ssr},null,8,["icon","style","aria-label","class","flip","ssr"]))}}),ie$1=(ke,e)=>{const Te=ke.__vccOpts||ke;for(const[Oe,Be]of e)Te[Oe]=Be;return Te},ue$1=ie$1(Va,[["__scopeId","data-v-73a1cd7e"]]),ja=["title","disabled","aria-disabled"],Oa={key:1},Ha=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(ke,{expose:e}){const Te=ke,Oe=computed(()=>["sm","small"].includes(Te.size)),Be=computed(()=>["md","medium"].includes(Te.size)),Ue=computed(()=>["lg","large"].includes(Te.size)),He=ref(null);e({focus:()=>{var En;(En=He.value)==null||En.focus()}});const We=computed(()=>typeof Te.icon=="string"&&Te.icon.startsWith("fr-icon-")),Cn=computed(()=>Te.iconOnly?1.25:.8325),An=computed(()=>typeof Te.icon=="string"?{scale:Cn.value,name:Te.icon}:{scale:Cn.value,...Te.icon});return(En,Sn)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:He,class:normalizeClass(["fr-btn",{"fr-btn--secondary":En.secondary&&!En.tertiary,"fr-btn--tertiary":En.tertiary&&!En.secondary&&!En.noOutline,"fr-btn--tertiary-no-outline":En.tertiary&&!En.secondary&&En.noOutline,"fr-btn--sm":Oe.value,"fr-btn--md":Be.value,"fr-btn--lg":Ue.value,"fr-btn--icon-right":!En.iconOnly&&We.value&&En.iconRight,"fr-btn--icon-left":!En.iconOnly&&We.value&&!En.iconRight,"inline-flex":!We.value,reverse:En.iconRight&&!We.value,"justify-center":!We.value&&En.iconOnly,[En.icon]:We.value}]),title:En.iconOnly?En.label:void 0,disabled:En.disabled,"aria-disabled":En.disabled,style:normalizeStyle(!We.value&&En.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:Sn[0]||(Sn[0]=Tn=>En.onClick?En.onClick(Tn):()=>{})},[En.icon&&!We.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},An.value)),null,16)):createCommentVNode("",!0),En.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",Oa,[createTextVNode(toDisplayString(En.label)+" ",1),renderSlot(En.$slots,"default",{},void 0,!0)]))],14,ja))}}),Ie=ie$1(Ha,[["__scopeId","data-v-118397f5"]]),qe=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(ke){const e=ke,Te=ref(null),Oe=computed(()=>["sm","small"].includes(e.size)),Be=computed(()=>["md","medium"].includes(e.size)),Ue=computed(()=>["lg","large"].includes(e.size)),He=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),We=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),Cn=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),An=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),En=computed(()=>e.align==="center"),Sn=computed(()=>e.align==="right"),Tn=ref("auto"),Ln=computed(()=>`--equisized-width: ${Tn.value};`),Bn=async()=>{var ei;let ni=0;await new Promise(ti=>setTimeout(ti,100)),(ei=Te.value)==null||ei.querySelectorAll(".fr-btn").forEach(ti=>{const ri=ti,oi=ri.offsetWidth,ai=window.getComputedStyle(ri),ci=+ai.marginLeft.replace("px",""),Pi=+ai.marginRight.replace("px","");ri.style.width="var(--equisized-width)";const vi=oi+ci+Pi;vi>ni&&(ni=vi)}),Tn.value=`${ni}px`};return onMounted(async()=>{!Te.value||!e.equisized||await Bn()}),(ei,ni)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:Te,style:normalizeStyle(Ln.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":ei.equisized,"fr-btns-group--sm":Oe.value,"fr-btns-group--md":Be.value,"fr-btns-group--lg":Ue.value,"fr-btns-group--inline-sm":He.value||We.value,"fr-btns-group--inline-md":He.value||Cn.value,"fr-btns-group--inline-lg":He.value||An.value,"fr-btns-group--center":En.value,"fr-btns-group--right":Sn.value,"fr-btns-group--icon-right":ei.iconRight,"fr-btns-group--inline-reverse":ei.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ei.buttons,({onClick:ti,...ri},oi)=>(openBlock(),createElementBlock("li",{key:oi},[createVNode(Ie,mergeProps({ref_for:!0},ri,{onClick:ti}),null,16,["onClick"])]))),128)),renderSlot(ei.$slots,"default")],6))}}),ls=["id","name","value","checked","required","data-testid","data-test","tabindex"],os=["for"],is={key:0,class:"required"},ds={key:0,class:"fr-hint-text"},us={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},fs=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:mergeModels({id:{default:()=>x$3("basic","checkbox")},name:{},required:{type:Boolean},value:{},checked:{type:Boolean},modelValue:{},small:{type:Boolean},inline:{type:Boolean},readonly:{type:Boolean},readonlyOpacity:{default:.75},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ke){useCssVars(Ue=>({"5f542ece":Ue.readonlyOpacity}));const e=ke,Te=computed(()=>e.errorMessage||e.validMessage),Oe=computed(()=>e.errorMessage?"fr-error-text":"fr-valid-text"),Be=useModel(ke,"modelValue");return(Ue,He)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Ue.inline,readonly:Ue.readonly}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":Ue.errorMessage,"fr-checkbox-group--valid":!Ue.errorMessage&&Ue.validMessage,"fr-checkbox-group--sm":Ue.small}])},[withDirectives(createBaseVNode("input",mergeProps({id:Ue.id,"onUpdate:modelValue":He[0]||(He[0]=We=>Be.value=We),name:Ue.name,type:"checkbox",value:Ue.value,checked:Be.value===!0||Array.isArray(Be.value)&&Be.value.includes(Ue.value),required:Ue.required},Ue.$attrs,{"data-testid":`input-checkbox-${Ue.id}`,"data-test":`input-checkbox-${Ue.id}`,tabindex:Ue.readonly?-1:void 0}),null,16,ls),[[vModelCheckbox,Be.value]]),createBaseVNode("label",{for:Ue.id,class:"fr-label"},[renderSlot(Ue.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ue.label)+" ",1),renderSlot(Ue.$slots,"required-tip",{},()=>[Ue.required?(openBlock(),createElementBlock("span",is,"*")):createCommentVNode("",!0)],!0)],!0),Ue.hint?(openBlock(),createElementBlock("span",ds,toDisplayString(Ue.hint),1)):createCommentVNode("",!0)],8,os),Te.value?(openBlock(),createElementBlock("div",us,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Oe.value])},toDisplayString(Te.value),3)])):createCommentVNode("",!0)],2)],2))}}),lt$2=ie$1(fs,[["__scopeId","data-v-18fa6c7b"]]),hs={class:"fr-consent-banner__content"},ys={class:"fr-text--sm"},ks={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},$s=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(ke){const e=ke,Te=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),Oe=computed(()=>e.url?Te.value?"a":"RouterLink":"a"),Be=computed(()=>({[Te.value?"href":"to"]:e.url}));return(Ue,He)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",hs,[createBaseVNode("p",ys,[renderSlot(Ue.$slots,"default",{},()=>[He[4]||(He[4]=createTextVNode(" Bienvenue ! Nous utilisons des cookies pour amliorer votre exprience et les services disponibles sur ce site. Pour en savoir plus, visitez la page ")),(openBlock(),createBlock(resolveDynamicComponent(Oe.value),mergeProps(Be.value,{"data-testid":"link"}),{default:withCtx(()=>He[3]||(He[3]=[createTextVNode(" Donnes personnelles et cookies ")])),_:1},16)),He[5]||(He[5]=createTextVNode(". Vous pouvez,  tout moment, avoir le contrle sur les cookies que vous souhaitez activer. "))])])]),createBaseVNode("ul",ks,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:He[0]||(He[0]=withModifiers(We=>Ue.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:He[1]||(He[1]=withModifiers(We=>Ue.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:He[2]||(He[2]=withModifiers(We=>Ue.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),ut$1=1,St=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},title:{}},setup(ke){const e=ke,Te=computed(()=>{var En;return(En=e.href)==null?void 0:En.startsWith("http")}),Oe=computed(()=>{var En;return(En=e.href)==null?void 0:En.startsWith("mailto")}),Be=computed(()=>e.button?"button":Te.value||Oe.value?"a":"RouterLink"),Ue=computed(()=>{if(!(!Te.value&&!Oe.value))return e.href}),He=computed(()=>{if(!(Te.value||Oe.value))return e.to}),We=computed(()=>He.value?{to:He.value}:{href:Ue.value}),Cn=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),An=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ut$1,...e.iconAttrs??{}}:{scale:ut$1,...e.icon??{},...e.iconAttrs??{}});return(En,Sn)=>(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":Cn.value&&En.iconRight,"fr-btn--icon-left":Cn.value&&!En.iconRight,[String(En.icon)]:Cn.value}]},We.value,{target:En.target,onClick:withModifiers(En.onClick,["stop"])}),{default:withCtx(()=>{var Tn,Ln;return[!Cn.value&&(En.icon||(Tn=En.iconAttrs)!=null&&Tn.name)&&!En.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},An.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(En.label)+" ",1),!Cn.value&&(En.icon||(Ln=En.iconAttrs)!=null&&Ln.name)&&En.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},An.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Ur={class:"fr-footer__partners"},Yr={key:0,class:"fr-footer__partners-title"},Zr={class:"fr-footer__partners-logos"},Jr={key:0,class:"fr-footer__partners-main"},xr=["href"],en=["src","alt"],tn={class:"fr-footer__partners-sub"},an=["href"],sn=["src","alt"],At$2=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(ke){return(e,Te)=>(openBlock(),createElementBlock("div",Ur,[e.title?(openBlock(),createElementBlock("h4",Yr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",Zr,[e.mainPartner?(openBlock(),createElementBlock("div",Jr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,en)],8,xr)])):createCommentVNode("",!0),createBaseVNode("div",tn,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(Oe,Be)=>(openBlock(),createElementBlock("li",{key:Be},[createBaseVNode("a",{class:"fr-footer__partners-link",href:Oe.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:Oe.logo,alt:Oe.name},null,8,sn)],8,an)]))),128))])])])]))}}),rn=["innerHTML"],Ne$1=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(ke){const e=ke,Te=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(Oe,Be)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":Oe.small&&!Oe.large,"fr-logo--lg":Oe.large&&!Oe.small}]),innerHTML:Te.value},null,10,rn))}}),nn={id:"footer",class:"fr-footer",role:"contentinfo"},ln$1={key:0,class:"fr-footer__top"},on$1={class:"fr-container"},dn={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},un={class:"fr-container"},fn={class:"fr-footer__body"},cn={key:0,class:"fr-footer__brand fr-enlarge-link"},pn=["href"],vn=["src","alt"],mn=["src","alt"],gn={key:1,class:"fr-footer__brand fr-enlarge-link"},bn={class:"fr-footer__content"},hn={class:"fr-footer__content-desc"},yn={class:"fr-footer__content-list"},kn=["href","title"],$n={class:"fr-footer__bottom"},wn={class:"fr-footer__bottom-list"},_n={key:0,class:"fr-footer__bottom-copy"},Dn=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour  laccueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["Rpublique","Franaise"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:ke=>[{label:`Accessibilit : ${ke.a11yCompliance}`,to:ke.a11yComplianceLink},{label:"Mentions lgales",to:ke.legalLink,"data-testid":"/mentions-legales"},{label:"Donnes personnelles",to:ke.personalDataLink},{label:"Gestion des cookies",to:ke.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"info.gouv.fr",href:"https://info.gouv.fr",title:"Informations gouvernementales, nouvelle fentre"},{label:"service-public.fr",href:"https://service-public.fr",title:"Informations et dmarches administratives, nouvelle fentre"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr",title:"Service public de diffusion du droit, nouvelle fentre"},{label:"data.gouv.fr",href:"https://data.gouv.fr",title:"Plateforme des donnes publiques, nouvelle fentre"}]},operatorLinkText:{default:"Revenir  laccueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention explicite de proprit intellectuelle dtenue par des tiers, les contenus de ce site sont proposs sous"},licenceName:{default:"licence etalab-2.0"}},setup(ke){const e=ke,Te=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),Oe=useSlots(),Be=computed(()=>{var En;return(En=Oe["footer-link-lists"])==null?void 0:En.call(Oe)}),Ue=computed(()=>{const En=e.licenceTo||e.licenceLinkProps.to;return En&&typeof En=="string"&&En.startsWith("http")}),He=computed(()=>{const{to:En,href:Sn,...Tn}=e.licenceLinkProps??{};return Tn}),We=computed(()=>Ue.value?"":e.licenceTo),Cn=computed(()=>Ue.value?e.licenceTo:""),An=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(En,Sn)=>{const Tn=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",nn,[Be.value?(openBlock(),createElementBlock("div",ln$1,[createBaseVNode("div",on$1,[createBaseVNode("div",dn,[renderSlot(En.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",un,[createBaseVNode("div",fn,[En.operatorImgSrc?(openBlock(),createElementBlock("div",cn,[createVNode(Ne$1,{"logo-text":En.logoText},null,8,["logo-text"]),An.value?(openBlock(),createElementBlock("a",{key:0,href:En.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(En.operatorImgStyle),src:En.operatorImgSrc,alt:En.operatorImgAlt},null,12,vn)],8,pn)):(openBlock(),createBlock(Tn,{key:1,class:"fr-footer__brand-link",to:En.homeLink,title:En.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(En.operatorImgStyle),src:En.operatorImgSrc,alt:En.operatorImgAlt},null,12,mn)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",gn,[createVNode(Tn,{to:En.homeLink,title:En.homeTitle},{default:withCtx(()=>[createVNode(Ne$1,{"logo-text":En.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",bn,[createBaseVNode("p",hn,[renderSlot(En.$slots,"description",{},()=>[createTextVNode(toDisplayString(En.descText),1)],!0)]),createBaseVNode("ul",yn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(En.ecosystemLinks,({href:Ln,label:Bn,title:ei,...ni},ti)=>(openBlock(),createElementBlock("li",{key:ti,class:"fr-footer__content-item"},[createBaseVNode("a",mergeProps({class:"fr-footer__content-link",href:Ln,target:"_blank",rel:"noopener noreferrer",title:ei,ref_for:!0},ni),toDisplayString(Bn),17,kn)]))),128))])])]),En.partners?(openBlock(),createBlock(At$2,normalizeProps(mergeProps({key:0},En.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",$n,[createBaseVNode("ul",wn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Te.value,(Ln,Bn)=>(openBlock(),createElementBlock("li",{key:Bn,class:"fr-footer__bottom-item"},[createVNode(St,mergeProps({ref_for:!0},Ln),null,16)]))),128))]),En.licenceText?(openBlock(),createElementBlock("div",_n,[createBaseVNode("p",null,[createTextVNode(toDisplayString(En.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Ue.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Ue.value?void 0:We.value,href:Ue.value?Cn.value:void 0,target:Ue.value?"_blank":void 0,title:Ue.value?`${En.licenceName} (nouvelle fentre)`:En.licenceName,rel:"noopener noreferrer"},He.value),{default:withCtx(()=>[createTextVNode(toDisplayString(En.licenceName),1)]),_:1},16,["to","href","target","title"]))])])):createCommentVNode("",!0)])])])}}}),In$1=ie$1(Dn,[["__scopeId","data-v-4030eed5"]]),Pn={role:"navigation",class:"fr-translate fr-nav"},Mn={class:"fr-nav__item"},Nn=["aria-controls","aria-expanded"],Fn={class:"fr-hidden-lg"},Rn=["id"],Vn={class:"fr-menu__list"},jn=["hreflang","lang","aria-current","href","onClick"],Ye=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>x$3("language-selector")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(ke,{emit:e}){const Te=ke,Oe=e,{collapse:Be,collapsing:Ue,cssExpanded:He,doExpand:We,onTransitionEnd:Cn}=ye$1(),An=ref(!1);function En(Tn){An.value=!1,Oe("select",Tn)}const Sn=computed(()=>Te.languages.find(({codeIso:Tn})=>Tn===Te.currentLanguage));return watch(An,(Tn,Ln)=>{Tn!==Ln&&We(Tn)}),(Tn,Ln)=>{var Bn,ei;return openBlock(),createElementBlock("nav",Pn,[createBaseVNode("div",Mn,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":Tn.id,"aria-expanded":An.value,title:"Slectionner une langue",type:"button",onClick:Ln[0]||(Ln[0]=withModifiers(ni=>An.value=!An.value,["prevent","stop"]))},[createTextVNode(toDisplayString((Bn=Sn.value)==null?void 0:Bn.codeIso.toUpperCase()),1),createBaseVNode("span",Fn,"- "+toDisplayString((ei=Sn.value)==null?void 0:ei.label),1)],8,Nn),createBaseVNode("div",{id:Tn.id,ref_key:"collapse",ref:Be,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(He),"fr-collapsing":unref(Ue)}]),onTransitionend:Ln[1]||(Ln[1]=ni=>unref(Cn)(An.value))},[createBaseVNode("ul",Vn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.languages,(ni,ti)=>(openBlock(),createElementBlock("li",{key:ti},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:ni.codeIso,lang:ni.codeIso,"aria-current":Tn.currentLanguage===ni.codeIso?!0:void 0,href:`#${ni.codeIso}`,onClick:withModifiers(ri=>En(ni),["prevent","stop"])},toDisplayString(`${ni.codeIso.toUpperCase()} - ${ni.label}`),9,jn)]))),128))])],42,Rn)])])}}}),On=["for"],Hn={key:0,class:"required"},Kn={key:0,class:"fr-hint-text"},qn=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>x$3("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(ke,{expose:e}){const Te=ke,Oe=useAttrs(),Be=ref(null),Ue=()=>{var An;return(An=Be.value)==null?void 0:An.focus()},He=computed(()=>Te.isTextarea?"textarea":"input"),We=computed(()=>Te.isWithWrapper||Oe.type==="date"||!!Te.wrapperClass),Cn=computed(()=>["fr-label",{invisible:!Te.labelVisible},Te.labelClass]);return e({focus:Ue}),(An,En)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(Cn.value),for:An.id},[renderSlot(An.$slots,"label",{},()=>[createTextVNode(toDisplayString(An.label)+" ",1),renderSlot(An.$slots,"required-tip",{},()=>["required"in An.$attrs&&An.$attrs.required!==!1?(openBlock(),createElementBlock("span",Hn,"*")):createCommentVNode("",!0)],!0)],!0),An.hint?(openBlock(),createElementBlock("span",Kn,toDisplayString(An.hint),1)):createCommentVNode("",!0)],10,On),We.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":An.isWithWrapper||An.$attrs.type==="date"},An.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(He.value),mergeProps({id:An.id},An.$attrs,{ref_key:"__input",ref:Be,class:["fr-input",{"fr-input--error":An.isInvalid,"fr-input--valid":An.isValid}],value:An.modelValue,"aria-describedby":An.descriptionId||void 0,onInput:En[1]||(En[1]=Sn=>An.$emit("update:modelValue",Sn.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(He.value),mergeProps({key:0,id:An.id},An.$attrs,{ref_key:"__input",ref:Be,class:["fr-input",{"fr-input--error":An.isInvalid,"fr-input--valid":An.isValid}],value:An.modelValue,"aria-describedby":An.descriptionId||void 0,onInput:En[0]||(En[0]=Sn=>An.$emit("update:modelValue",Sn.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),ze=ie$1(qn,[["__scopeId","data-v-7ca45de8"]]),Ze=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>x$3("search","input")},label:{default:""},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(ke,{emit:e}){const Te=e;return(Oe,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":Oe.large}]),role:"search"},[createVNode(ze,{id:Oe.id,type:"search",placeholder:Oe.placeholder,"model-value":Oe.modelValue,label:Oe.label,disabled:Oe.disabled,"aria-disabled":Oe.disabled,"onUpdate:modelValue":Be[0]||(Be[0]=Ue=>Te("update:modelValue",Ue)),onKeydown:Be[1]||(Be[1]=withKeys(Ue=>Te("search",Oe.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label","disabled","aria-disabled"]),createVNode(Ie,{title:"Rechercher",disabled:Oe.disabled,"aria-disabled":Oe.disabled,onClick:Be[2]||(Be[2]=Ue=>Te("search",Oe.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(Oe.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),ft$1=1,Bt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},path:{default:""}},setup(ke){const e=ke,Te=computed(()=>typeof e.path=="string"),Oe=computed(()=>{var Sn;return((Sn=e.href)==null?void 0:Sn.startsWith("http"))||Te.value&&e.path.startsWith("http")||typeof e.to=="string"&&e.to.startsWith("http")}),Be=computed(()=>{var Sn;return((Sn=e.href)==null?void 0:Sn.startsWith("mailto"))||Te.value&&e.path.startsWith("mailto")||typeof e.to=="string"&&e.to.startsWith("mailto")}),Ue=computed(()=>e.button?"button":Oe.value||Be.value?"a":"RouterLink"),He=computed(()=>{if(!(!Oe.value&&!Be.value))return e.to??e.href??e.path}),We=computed(()=>{if(!(Oe.value||Be.value))return e.to??e.path}),Cn=computed(()=>We.value?{to:We.value}:{href:He.value}),An=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),En=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ft$1,...e.iconAttrs??{}}:{scale:ft$1,...e.icon??{},...e.iconAttrs??{}});return(Sn,Tn)=>(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":An.value&&Sn.iconRight,"fr-btn--icon-left":An.value&&!Sn.iconRight,[String(Sn.icon)]:An.value}]},Cn.value,{target:Sn.target,onClick:Tn[0]||(Tn[0]=withModifiers(Ln=>Sn.onClick(Ln),["stop"]))}),{default:withCtx(()=>{var Ln,Bn;return[!An.value&&(Sn.icon||(Ln=Sn.iconAttrs)!=null&&Ln.name)&&!Sn.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},En.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Sn.label)+" ",1),!An.value&&(Sn.icon||(Bn=Sn.iconAttrs)!=null&&Bn.name)&&Sn.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},En.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target"]))}}),zn=["aria-label"],Qn={class:"fr-btns-group"},Je=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(ke,{emit:e}){const Te=e;return(Oe,Be)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":Oe.navAriaLabel},[createBaseVNode("ul",Qn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.links,(Ue,He)=>(openBlock(),createElementBlock("li",{key:He},[createVNode(Bt$1,mergeProps({ref_for:!0},Ue,{"on-click":We=>{var Cn;Te("linkClick",We),(Cn=Ue.onClick)==null||Cn.call(Ue,We)}}),null,16,["on-click"])]))),128))])],8,zn))}}),Wn={role:"banner",class:"fr-header"},Gn={class:"fr-header__body"},Xn$1={class:"fr-container width-inherit"},Un={class:"fr-header__body-row"},Yn$1={class:"fr-header__brand fr-enlarge-link"},Zn$1={class:"fr-header__brand-top"},Jn={class:"fr-header__logo"},xn={key:0,class:"fr-header__operator"},el=["src","alt"],tl={key:1,class:"fr-header__navbar"},al=["aria-label","title","data-fr-opened"],sl=["aria-label","title"],rl={key:0,class:"fr-header__service"},nl={class:"fr-header__service-title"},ll={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},ol$1={key:0,class:"fr-header__service-tagline"},il={key:1,class:"fr-header__service"},dl={class:"fr-header__tools"},ul={key:0,class:"fr-header__tools-links"},fl$1={key:1,class:"fr-header__search fr-modal"},cl=["aria-label"],pl={class:"fr-container"},vl={class:"fr-header__menu-links"},ml={key:1,class:"flex justify-center items-center"},gl={class:"fr-header__menu fr-modal"},bl={key:0,class:"fr-container"},hl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","languageSelect"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=useSlots(),Ue=toRef(Te,"languageSelector"),He=ref(!1),We=ref(!1),Cn=ref(!1),An=()=>{var ti;Cn.value=!1,He.value=!1,We.value=!1,(ti=document.getElementById("button-menu"))==null||ti.focus()},En=ti=>{ti.key==="Escape"&&An()};onMounted(()=>{document.addEventListener("keydown",En)}),onUnmounted(()=>{document.removeEventListener("keydown",En)});const Sn=()=>{Cn.value=!0,He.value=!0,We.value=!1,setTimeout(()=>{var ti;(ti=document.getElementById("close-button"))==null||ti.focus()})},Tn=()=>{Cn.value=!0,He.value=!1,We.value=!0},Ln=An,Bn=computed(()=>[Te.homeLabel,Te.serviceTitle].filter(ti=>ti).join(" - ")),ei=computed(()=>!!Be.operator||!!Te.operatorImgSrc),ni=computed(()=>!!Be.mainnav);return provide(nt$1,()=>An),(ti,ri)=>{var oi,ai,ci;const Pi=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",Wn,[createBaseVNode("div",Gn,[createBaseVNode("div",Xn$1,[createBaseVNode("div",Un,[createBaseVNode("div",Yn$1,[createBaseVNode("div",Zn$1,[createBaseVNode("div",Jn,[createVNode(Pi,{to:ti.homeTo,title:Bn.value},{default:withCtx(()=>[createVNode(Ne$1,{"logo-text":ti.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),_:1},8,["to","title"])]),ei.value?(openBlock(),createElementBlock("div",xn,[renderSlot(ti.$slots,"operator",{},()=>[ti.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:ti.operatorImgSrc,alt:ti.operatorImgAlt,style:normalizeStyle(ti.operatorImgStyle)},null,12,el)):createCommentVNode("",!0)])])):createCommentVNode("",!0),ti.showSearch||ni.value||(oi=ti.quickLinks)!=null&&oi.length?(openBlock(),createElementBlock("div",tl,[ti.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":ti.showSearchLabel,title:ti.showSearchLabel,"data-fr-opened":We.value,onClick:ri[0]||(ri[0]=withModifiers(vi=>Tn(),["prevent","stop"]))},null,8,al)):createCommentVNode("",!0),ni.value||(ai=ti.quickLinks)!=null&&ai.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":Sn,"aria-controls":"header-navigation","aria-haspopup":"dialog","aria-label":ti.menuLabel,title:ti.menuLabel,"data-testid":"open-menu-btn",onClick:ri[1]||(ri[1]=withModifiers(vi=>Sn(),["prevent","stop"]))},null,8,sl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),ti.serviceTitle?(openBlock(),createElementBlock("div",rl,[createVNode(Pi,mergeProps({to:ti.homeTo,title:Bn.value},ti.$attrs),{default:withCtx(()=>[createBaseVNode("p",nl,[createTextVNode(toDisplayString(ti.serviceTitle)+" ",1),ti.showBeta?(openBlock(),createElementBlock("span",ll," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),ti.serviceDescription?(openBlock(),createElementBlock("p",ol$1,toDisplayString(ti.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!ti.serviceTitle&&ti.showBeta?(openBlock(),createElementBlock("div",il,ri[9]||(ri[9]=[createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1)]))):createCommentVNode("",!0)]),createBaseVNode("div",dl,[(ci=ti.quickLinks)!=null&&ci.length||Ue.value?(openBlock(),createElementBlock("div",ul,[renderSlot(ti.$slots,"before-quick-links"),He.value?createCommentVNode("",!0):(openBlock(),createBlock(Je,{key:0,links:ti.quickLinks,"nav-aria-label":ti.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),renderSlot(ti.$slots,"after-quick-links"),Ue.value?(openBlock(),createBlock(Ye,mergeProps({key:1},Ue.value,{onSelect:ri[2]||(ri[2]=vi=>Oe("languageSelect",vi))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),ti.showSearch?(openBlock(),createElementBlock("div",fl$1,[createVNode(Ze,{id:ti.searchbarId,label:ti.searchLabel,"model-value":ti.modelValue,placeholder:ti.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":ri[3]||(ri[3]=vi=>Oe("update:modelValue",vi)),onSearch:ri[4]||(ri[4]=vi=>Oe("search",vi))},null,8,["id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),ti.showSearch||ni.value||ti.quickLinks&&ti.quickLinks.length||Ue.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":Cn.value}]),"aria-label":ti.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",pl,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:ri[5]||(ri[5]=withModifiers(vi=>An(),["prevent","stop"]))},toDisplayString(ti.closeMenuModalLabel),1),createBaseVNode("div",vl,[Ue.value?(openBlock(),createBlock(Ye,mergeProps({key:0},Ue.value,{onSelect:ri[6]||(ri[6]=vi=>Ue.value.currentLanguage=vi.codeIso)}),null,16)):createCommentVNode("",!0),renderSlot(ti.$slots,"before-quick-links"),He.value?(openBlock(),createBlock(Je,{key:1,role:"navigation",links:ti.quickLinks,"nav-aria-label":ti.quickLinksAriaLabel,onLinkClick:unref(Ln)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0),renderSlot(ti.$slots,"after-quick-links")]),Cn.value?renderSlot(ti.$slots,"mainnav",{key:0,hidemodal:An}):createCommentVNode("",!0),We.value?(openBlock(),createElementBlock("div",ml,[createVNode(Ze,{"searchbar-id":ti.searchbarId,"model-value":ti.modelValue,placeholder:ti.placeholder,"onUpdate:modelValue":ri[7]||(ri[7]=vi=>Oe("update:modelValue",vi)),onSearch:ri[8]||(ri[8]=vi=>Oe("search",vi))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,cl)):createCommentVNode("",!0),renderSlot(ti.$slots,"default")])]),createBaseVNode("div",gl,[ni.value&&!Cn.value?(openBlock(),createElementBlock("div",bl,[renderSlot(ti.$slots,"mainnav",{hidemodal:An})])):createCommentVNode("",!0)])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Lt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fe=Lt$1.join(","),Pt$1=typeof Element>"u",we$1=Pt$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Re=!Pt$1&&Element.prototype.getRootNode?function(ke){var e;return ke==null||(e=ke.getRootNode)===null||e===void 0?void 0:e.call(ke)}:function(ke){return ke==null?void 0:ke.ownerDocument},Ve=function ke(e,Te){var Oe;Te===void 0&&(Te=!0);var Be=e==null||(Oe=e.getAttribute)===null||Oe===void 0?void 0:Oe.call(e,"inert"),Ue=Be===""||Be==="true",He=Ue||Te&&e&&ke(e.parentNode);return He},Tl=function(ke){var e,Te=ke==null||(e=ke.getAttribute)===null||e===void 0?void 0:e.call(ke,"contenteditable");return Te===""||Te==="true"},Mt$1=function(ke,e,Te){if(Ve(ke))return[];var Oe=Array.prototype.slice.apply(ke.querySelectorAll(Fe));return e&&we$1.call(ke,Fe)&&Oe.unshift(ke),Oe=Oe.filter(Te),Oe},Nt$1=function ke(e,Te,Oe){for(var Be=[],Ue=Array.from(e);Ue.length;){var He=Ue.shift();if(!Ve(He,!1))if(He.tagName==="SLOT"){var We=He.assignedElements(),Cn=We.length?We:He.children,An=ke(Cn,!0,Oe);Oe.flatten?Be.push.apply(Be,An):Be.push({scopeParent:He,candidates:An})}else{var En=we$1.call(He,Fe);En&&Oe.filter(He)&&(Te||!e.includes(He))&&Be.push(He);var Sn=He.shadowRoot||typeof Oe.getShadowRoot=="function"&&Oe.getShadowRoot(He),Tn=!Ve(Sn,!1)&&(!Oe.shadowRootFilter||Oe.shadowRootFilter(He));if(Sn&&Tn){var Ln=ke(Sn===!0?He.children:Sn.children,!0,Oe);Oe.flatten?Be.push.apply(Be,Ln):Be.push({scopeParent:He,candidates:Ln})}else Ue.unshift.apply(Ue,He.children)}}return Be},Ft$1=function(ke){return!isNaN(parseInt(ke.getAttribute("tabindex"),10))},$e=function(ke){if(!ke)throw new Error("No node provided");return ke.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(ke.tagName)||Tl(ke))&&!Ft$1(ke)?0:ke.tabIndex},El=function(ke,e){var Te=$e(ke);return Te<0&&e&&!Ft$1(ke)?0:Te},Cl=function(ke,e){return ke.tabIndex===e.tabIndex?ke.documentOrder-e.documentOrder:ke.tabIndex-e.tabIndex},Rt$1=function(ke){return ke.tagName==="INPUT"},Sl=function(ke){return Rt$1(ke)&&ke.type==="hidden"},Al=function(ke){var e=ke.tagName==="DETAILS"&&Array.prototype.slice.apply(ke.children).some(function(Te){return Te.tagName==="SUMMARY"});return e},Bl=function(ke,e){for(var Te=0;Te<ke.length;Te++)if(ke[Te].checked&&ke[Te].form===e)return ke[Te]},Ll=function(ke){if(!ke.name)return!0;var e=ke.form||Re(ke),Te=function(Ue){return e.querySelectorAll('input[type="radio"][name="'+Ue+'"]')},Oe;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Oe=Te(window.CSS.escape(ke.name));else try{Oe=Te(ke.name)}catch(Ue){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Ue.message),!1}var Be=Bl(Oe,ke.form);return!Be||Be===ke},Pl=function(ke){return Rt$1(ke)&&ke.type==="radio"},Ml=function(ke){return Pl(ke)&&!Ll(ke)},Nl=function(ke){var e,Te=ke&&Re(ke),Oe=(e=Te)===null||e===void 0?void 0:e.host,Be=!1;if(Te&&Te!==ke){var Ue,He,We;for(Be=!!((Ue=Oe)!==null&&Ue!==void 0&&(He=Ue.ownerDocument)!==null&&He!==void 0&&He.contains(Oe)||ke!=null&&(We=ke.ownerDocument)!==null&&We!==void 0&&We.contains(ke));!Be&&Oe;){var Cn,An,En;Te=Re(Oe),Oe=(Cn=Te)===null||Cn===void 0?void 0:Cn.host,Be=!!((An=Oe)!==null&&An!==void 0&&(En=An.ownerDocument)!==null&&En!==void 0&&En.contains(Oe))}}return Be},ct$1=function(ke){var e=ke.getBoundingClientRect(),Te=e.width,Oe=e.height;return Te===0&&Oe===0},Fl=function(ke,e){var Te=e.displayCheck,Oe=e.getShadowRoot;if(getComputedStyle(ke).visibility==="hidden")return!0;var Be=we$1.call(ke,"details>summary:first-of-type"),Ue=Be?ke.parentElement:ke;if(we$1.call(Ue,"details:not([open]) *"))return!0;if(!Te||Te==="full"||Te==="legacy-full"){if(typeof Oe=="function"){for(var He=ke;ke;){var We=ke.parentElement,Cn=Re(ke);if(We&&!We.shadowRoot&&Oe(We)===!0)return ct$1(ke);ke.assignedSlot?ke=ke.assignedSlot:!We&&Cn!==ke.ownerDocument?ke=Cn.host:ke=We}ke=He}if(Nl(ke))return!ke.getClientRects().length;if(Te!=="legacy-full")return!0}else if(Te==="non-zero-area")return ct$1(ke);return!1},Rl=function(ke){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(ke.tagName))for(var e=ke.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var Te=0;Te<e.children.length;Te++){var Oe=e.children.item(Te);if(Oe.tagName==="LEGEND")return we$1.call(e,"fieldset[disabled] *")?!0:!Oe.contains(ke)}return!0}e=e.parentElement}return!1},je=function(ke,e){return!(e.disabled||Ve(e)||Sl(e)||Fl(e,ke)||Al(e)||Rl(e))},xe=function(ke,e){return!(Ml(e)||$e(e)<0||!je(ke,e))},Vl=function(ke){var e=parseInt(ke.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},jl=function ke(e){var Te=[],Oe=[];return e.forEach(function(Be,Ue){var He=!!Be.scopeParent,We=He?Be.scopeParent:Be,Cn=El(We,He),An=He?ke(Be.candidates):We;Cn===0?He?Te.push.apply(Te,An):Te.push(We):Oe.push({documentOrder:Ue,tabIndex:Cn,item:Be,isScope:He,content:An})}),Oe.sort(Cl).reduce(function(Be,Ue){return Ue.isScope?Be.push.apply(Be,Ue.content):Be.push(Ue.content),Be},[]).concat(Te)},Ol=function(ke,e){e=e||{};var Te;return e.getShadowRoot?Te=Nt$1([ke],e.includeContainer,{filter:xe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Vl}):Te=Mt$1(ke,e.includeContainer,xe.bind(null,e)),jl(Te)},Hl=function(ke,e){e=e||{};var Te;return e.getShadowRoot?Te=Nt$1([ke],e.includeContainer,{filter:je.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):Te=Mt$1(ke,e.includeContainer,je.bind(null,e)),Te},_e=function(ke,e){if(e=e||{},!ke)throw new Error("No node provided");return we$1.call(ke,Fe)===!1?!1:xe(e,ke)},Kl=Lt$1.concat("iframe").join(","),Ge=function(ke,e){if(e=e||{},!ke)throw new Error("No node provided");return we$1.call(ke,Kl)===!1?!1:je(e,ke)};/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function et$2(ke,e){(e==null||e>ke.length)&&(e=ke.length);for(var Te=0,Oe=Array(e);Te<e;Te++)Oe[Te]=ke[Te];return Oe}function ql(ke){if(Array.isArray(ke))return et$2(ke)}function zl(ke,e,Te){return(e=Ul(e))in ke?Object.defineProperty(ke,e,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ke[e]=Te,ke}function Ql(ke){if(typeof Symbol<"u"&&ke[Symbol.iterator]!=null||ke["@@iterator"]!=null)return Array.from(ke)}function Wl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt$1(ke,e){var Te=Object.keys(ke);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(ke);e&&(Oe=Oe.filter(function(Be){return Object.getOwnPropertyDescriptor(ke,Be).enumerable})),Te.push.apply(Te,Oe)}return Te}function vt$1(ke){for(var e=1;e<arguments.length;e++){var Te=arguments[e]!=null?arguments[e]:{};e%2?pt$1(Object(Te),!0).forEach(function(Oe){zl(ke,Oe,Te[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Te)):pt$1(Object(Te)).forEach(function(Oe){Object.defineProperty(ke,Oe,Object.getOwnPropertyDescriptor(Te,Oe))})}return ke}function Gl(ke){return ql(ke)||Ql(ke)||Yl(ke)||Wl()}function Xl(ke,e){if(typeof ke!="object"||!ke)return ke;var Te=ke[Symbol.toPrimitive];if(Te!==void 0){var Oe=Te.call(ke,e);if(typeof Oe!="object")return Oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(ke)}function Ul(ke){var e=Xl(ke,"string");return typeof e=="symbol"?e:e+""}function Yl(ke,e){if(ke){if(typeof ke=="string")return et$2(ke,e);var Te={}.toString.call(ke).slice(8,-1);return Te==="Object"&&ke.constructor&&(Te=ke.constructor.name),Te==="Map"||Te==="Set"?Array.from(ke):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?et$2(ke,e):void 0}}var mt$1={activateTrap:function(ke,e){if(ke.length>0){var Te=ke[ke.length-1];Te!==e&&Te._setPausedState(!0)}var Oe=ke.indexOf(e);Oe===-1||ke.splice(Oe,1),ke.push(e)},deactivateTrap:function(ke,e){var Te=ke.indexOf(e);Te!==-1&&ke.splice(Te,1),ke.length>0&&!ke[ke.length-1]._isManuallyPaused()&&ke[ke.length-1]._setPausedState(!1)}},Zl=function(ke){return ke.tagName&&ke.tagName.toLowerCase()==="input"&&typeof ke.select=="function"},Jl=function(ke){return(ke==null?void 0:ke.key)==="Escape"||(ke==null?void 0:ke.key)==="Esc"||(ke==null?void 0:ke.keyCode)===27},Ae=function(ke){return(ke==null?void 0:ke.key)==="Tab"||(ke==null?void 0:ke.keyCode)===9},xl=function(ke){return Ae(ke)&&!ke.shiftKey},eo=function(ke){return Ae(ke)&&ke.shiftKey},gt$2=function(ke){return setTimeout(ke,0)},Ee=function(ke){for(var e=arguments.length,Te=new Array(e>1?e-1:0),Oe=1;Oe<e;Oe++)Te[Oe-1]=arguments[Oe];return typeof ke=="function"?ke.apply(void 0,Te):ke},Pe=function(ke){return ke.target.shadowRoot&&typeof ke.composedPath=="function"?ke.composedPath()[0]:ke.target},to=[],ao=function(ke,e){var Te=(e==null?void 0:e.document)||document,Oe=(e==null?void 0:e.trapStack)||to,Be=vt$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:xl,isKeyBackward:eo},e),Ue={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},He,We=function(fi,ui,Oi){return fi&&fi[ui]!==void 0?fi[ui]:Be[Oi||ui]},Cn=function(fi,ui){var Oi=typeof(ui==null?void 0:ui.composedPath)=="function"?ui.composedPath():void 0;return Ue.containerGroups.findIndex(function(Ni){var nr=Ni.container,er=Ni.tabbableNodes;return nr.contains(fi)||(Oi==null?void 0:Oi.includes(nr))||er.find(function(cr){return cr===fi})})},An=function(fi){var ui=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oi=ui.hasFallback,Ni=Oi===void 0?!1:Oi,nr=ui.params,er=nr===void 0?[]:nr,cr=Be[fi];if(typeof cr=="function"&&(cr=cr.apply(void 0,Gl(er))),cr===!0&&(cr=void 0),!cr){if(cr===void 0||cr===!1)return cr;throw new Error("`".concat(fi,"` was specified but was not a node, or did not return a node"))}var ar=cr;if(typeof cr=="string"){try{ar=Te.querySelector(cr)}catch(pr){throw new Error("`".concat(fi,'` appears to be an invalid selector; error="').concat(pr.message,'"'))}if(!ar&&!Ni)throw new Error("`".concat(fi,"` as selector refers to no known node"))}return ar},En=function(){var fi=An("initialFocus",{hasFallback:!0});if(fi===!1)return!1;if(fi===void 0||fi&&!Ge(fi,Be.tabbableOptions))if(Cn(Te.activeElement)>=0)fi=Te.activeElement;else{var ui=Ue.tabbableGroups[0],Oi=ui&&ui.firstTabbableNode;fi=Oi||An("fallbackFocus")}else fi===null&&(fi=An("fallbackFocus"));if(!fi)throw new Error("Your focus-trap needs to have at least one focusable element");return fi},Sn=function(){if(Ue.containerGroups=Ue.containers.map(function(fi){var ui=Ol(fi,Be.tabbableOptions),Oi=Hl(fi,Be.tabbableOptions),Ni=ui.length>0?ui[0]:void 0,nr=ui.length>0?ui[ui.length-1]:void 0,er=Oi.find(function(pr){return _e(pr)}),cr=Oi.slice().reverse().find(function(pr){return _e(pr)}),ar=!!ui.find(function(pr){return $e(pr)>0});return{container:fi,tabbableNodes:ui,focusableNodes:Oi,posTabIndexesFound:ar,firstTabbableNode:Ni,lastTabbableNode:nr,firstDomTabbableNode:er,lastDomTabbableNode:cr,nextTabbableNode:function(pr){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,br=ui.indexOf(pr);return br<0?rr?Oi.slice(Oi.indexOf(pr)+1).find(function(Li){return _e(Li)}):Oi.slice(0,Oi.indexOf(pr)).reverse().find(function(Li){return _e(Li)}):ui[br+(rr?1:-1)]}}}),Ue.tabbableGroups=Ue.containerGroups.filter(function(fi){return fi.tabbableNodes.length>0}),Ue.tabbableGroups.length<=0&&!An("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Ue.containerGroups.find(function(fi){return fi.posTabIndexesFound})&&Ue.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},Tn=function(fi){var ui=fi.activeElement;if(ui)return ui.shadowRoot&&ui.shadowRoot.activeElement!==null?Tn(ui.shadowRoot):ui},Ln=function(fi){if(fi!==!1&&fi!==Tn(document)){if(!fi||!fi.focus){Ln(En());return}fi.focus({preventScroll:!!Be.preventScroll}),Ue.mostRecentlyFocusedNode=fi,Zl(fi)&&fi.select()}},Bn=function(fi){var ui=An("setReturnFocus",{params:[fi]});return ui||(ui===!1?!1:fi)},ei=function(fi){var ui=fi.target,Oi=fi.event,Ni=fi.isBackward,nr=Ni===void 0?!1:Ni;ui=ui||Pe(Oi),Sn();var er=null;if(Ue.tabbableGroups.length>0){var cr=Cn(ui,Oi),ar=cr>=0?Ue.containerGroups[cr]:void 0;if(cr<0)nr?er=Ue.tabbableGroups[Ue.tabbableGroups.length-1].lastTabbableNode:er=Ue.tabbableGroups[0].firstTabbableNode;else if(nr){var pr=Ue.tabbableGroups.findIndex(function(dr){var vr=dr.firstTabbableNode;return ui===vr});if(pr<0&&(ar.container===ui||Ge(ui,Be.tabbableOptions)&&!_e(ui,Be.tabbableOptions)&&!ar.nextTabbableNode(ui,!1))&&(pr=cr),pr>=0){var rr=pr===0?Ue.tabbableGroups.length-1:pr-1,br=Ue.tabbableGroups[rr];er=$e(ui)>=0?br.lastTabbableNode:br.lastDomTabbableNode}else Ae(Oi)||(er=ar.nextTabbableNode(ui,!1))}else{var Li=Ue.tabbableGroups.findIndex(function(dr){var vr=dr.lastTabbableNode;return ui===vr});if(Li<0&&(ar.container===ui||Ge(ui,Be.tabbableOptions)&&!_e(ui,Be.tabbableOptions)&&!ar.nextTabbableNode(ui))&&(Li=cr),Li>=0){var ur=Li===Ue.tabbableGroups.length-1?0:Li+1,sr=Ue.tabbableGroups[ur];er=$e(ui)>=0?sr.firstTabbableNode:sr.firstDomTabbableNode}else Ae(Oi)||(er=ar.nextTabbableNode(ui))}}else er=An("fallbackFocus");return er},ni=function(fi){var ui=Pe(fi);if(!(Cn(ui,fi)>=0)){if(Ee(Be.clickOutsideDeactivates,fi)){He.deactivate({returnFocus:Be.returnFocusOnDeactivate});return}Ee(Be.allowOutsideClick,fi)||fi.preventDefault()}},ti=function(fi){var ui=Pe(fi),Oi=Cn(ui,fi)>=0;if(Oi||ui instanceof Document)Oi&&(Ue.mostRecentlyFocusedNode=ui);else{fi.stopImmediatePropagation();var Ni,nr=!0;if(Ue.mostRecentlyFocusedNode)if($e(Ue.mostRecentlyFocusedNode)>0){var er=Cn(Ue.mostRecentlyFocusedNode),cr=Ue.containerGroups[er].tabbableNodes;if(cr.length>0){var ar=cr.findIndex(function(pr){return pr===Ue.mostRecentlyFocusedNode});ar>=0&&(Be.isKeyForward(Ue.recentNavEvent)?ar+1<cr.length&&(Ni=cr[ar+1],nr=!1):ar-1>=0&&(Ni=cr[ar-1],nr=!1))}}else Ue.containerGroups.some(function(pr){return pr.tabbableNodes.some(function(rr){return $e(rr)>0})})||(nr=!1);else nr=!1;nr&&(Ni=ei({target:Ue.mostRecentlyFocusedNode,isBackward:Be.isKeyBackward(Ue.recentNavEvent)})),Ln(Ni||Ue.mostRecentlyFocusedNode||En())}Ue.recentNavEvent=void 0},ri=function(fi){var ui=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ue.recentNavEvent=fi;var Oi=ei({event:fi,isBackward:ui});Oi&&(Ae(fi)&&fi.preventDefault(),Ln(Oi))},oi=function(fi){(Be.isKeyForward(fi)||Be.isKeyBackward(fi))&&ri(fi,Be.isKeyBackward(fi))},ai=function(fi){Jl(fi)&&Ee(Be.escapeDeactivates,fi)!==!1&&(fi.preventDefault(),He.deactivate())},ci=function(fi){var ui=Pe(fi);Cn(ui,fi)>=0||Ee(Be.clickOutsideDeactivates,fi)||Ee(Be.allowOutsideClick,fi)||(fi.preventDefault(),fi.stopImmediatePropagation())},Pi=function(){if(Ue.active)return mt$1.activateTrap(Oe,He),Ue.delayInitialFocusTimer=Be.delayInitialFocus?gt$2(function(){Ln(En())}):Ln(En()),Te.addEventListener("focusin",ti,!0),Te.addEventListener("mousedown",ni,{capture:!0,passive:!1}),Te.addEventListener("touchstart",ni,{capture:!0,passive:!1}),Te.addEventListener("click",ci,{capture:!0,passive:!1}),Te.addEventListener("keydown",oi,{capture:!0,passive:!1}),Te.addEventListener("keydown",ai),He},vi=function(){if(Ue.active)return Te.removeEventListener("focusin",ti,!0),Te.removeEventListener("mousedown",ni,!0),Te.removeEventListener("touchstart",ni,!0),Te.removeEventListener("click",ci,!0),Te.removeEventListener("keydown",oi,!0),Te.removeEventListener("keydown",ai),He},pi=function(fi){var ui=fi.some(function(Oi){var Ni=Array.from(Oi.removedNodes);return Ni.some(function(nr){return nr===Ue.mostRecentlyFocusedNode})});ui&&Ln(En())},Mi=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(pi):void 0,Fi=function(){Mi&&(Mi.disconnect(),Ue.active&&!Ue.paused&&Ue.containers.map(function(fi){Mi.observe(fi,{subtree:!0,childList:!0})}))};return He={get active(){return Ue.active},get paused(){return Ue.paused},activate:function(fi){if(Ue.active)return this;var ui=We(fi,"onActivate"),Oi=We(fi,"onPostActivate"),Ni=We(fi,"checkCanFocusTrap");Ni||Sn(),Ue.active=!0,Ue.paused=!1,Ue.nodeFocusedBeforeActivation=Te.activeElement,ui==null||ui();var nr=function(){Ni&&Sn(),Pi(),Fi(),Oi==null||Oi()};return Ni?(Ni(Ue.containers.concat()).then(nr,nr),this):(nr(),this)},deactivate:function(fi){if(!Ue.active)return this;var ui=vt$1({onDeactivate:Be.onDeactivate,onPostDeactivate:Be.onPostDeactivate,checkCanReturnFocus:Be.checkCanReturnFocus},fi);clearTimeout(Ue.delayInitialFocusTimer),Ue.delayInitialFocusTimer=void 0,vi(),Ue.active=!1,Ue.paused=!1,Fi(),mt$1.deactivateTrap(Oe,He);var Oi=We(ui,"onDeactivate"),Ni=We(ui,"onPostDeactivate"),nr=We(ui,"checkCanReturnFocus"),er=We(ui,"returnFocus","returnFocusOnDeactivate");Oi==null||Oi();var cr=function(){gt$2(function(){er&&Ln(Bn(Ue.nodeFocusedBeforeActivation)),Ni==null||Ni()})};return er&&nr?(nr(Bn(Ue.nodeFocusedBeforeActivation)).then(cr,cr),this):(cr(),this)},pause:function(fi){return Ue.active?(Ue.manuallyPaused=!0,this._setPausedState(!0,fi)):this},unpause:function(fi){return Ue.active?(Ue.manuallyPaused=!1,Oe[Oe.length-1]!==this?this:this._setPausedState(!1,fi)):this},updateContainerElements:function(fi){var ui=[].concat(fi).filter(Boolean);return Ue.containers=ui.map(function(Oi){return typeof Oi=="string"?Te.querySelector(Oi):Oi}),Ue.active&&Sn(),Fi(),this}},Object.defineProperties(He,{_isManuallyPaused:{value:function(){return Ue.manuallyPaused}},_setPausedState:{value:function(fi,ui){if(Ue.paused===fi)return this;if(Ue.paused=fi,fi){var Oi=We(ui,"onPause"),Ni=We(ui,"onPostPause");Oi==null||Oi(),vi(),Fi(),Ni==null||Ni()}else{var nr=We(ui,"onUnpause"),er=We(ui,"onPostUnpause");nr==null||nr(),Sn(),Pi(),Fi(),er==null||er()}return this}}}),He.updateContainerElements(ke),He};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const so={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},ro=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},so),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(ke,{slots:e,emit:Te}){let Oe;const Be=ref(null),Ue=computed(()=>{const We=Be.value;return We&&(We instanceof HTMLElement?We:We.$el)});function He(){return Oe||(Oe=ao(Ue.value,{escapeDeactivates:ke.escapeDeactivates,allowOutsideClick:ke.allowOutsideClick,returnFocusOnDeactivate:ke.returnFocusOnDeactivate,clickOutsideDeactivates:ke.clickOutsideDeactivates,onActivate:()=>{Te("update:active",!0),Te("activate")},onDeactivate:()=>{Te("update:active",!1),Te("deactivate")},onPostActivate:()=>Te("postActivate"),onPostDeactivate:()=>Te("postDeactivate"),initialFocus:ke.initialFocus,fallbackFocus:ke.fallbackFocus,tabbableOptions:ke.tabbableOptions,delayInitialFocus:ke.delayInitialFocus,preventScroll:ke.preventScroll}))}return onMounted(()=>{watch(()=>ke.active,We=>{We&&Ue.value?He().activate():Oe&&(Oe.deactivate(),(!Ue.value||Ue.value.nodeType===Node.COMMENT_NODE)&&(Oe=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{Oe&&Oe.deactivate(),Oe=null}),{activate(){He().activate()},deactivate(){Oe&&Oe.deactivate()},renderImpl(){if(!e.default)return null;const We=e.default().filter(Cn=>Cn.type!==Comment);return!We||!We.length||We.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),We):cloneVNode(We[0],{ref:Be})}}}}),no=["aria-labelledby","role","open"],lo={class:"fr-container fr-container--fluid fr-container-md"},oo={class:"fr-grid-row fr-grid-row--center"},io={class:"fr-modal__body"},uo={class:"fr-modal__header"},fo=["title"],co={class:"fr-modal__content"},po=["id"],vo={key:0,class:"fr-modal__footer"},bt$1=2,mo=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>x$3("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fentre modale"}},emits:["close"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=Bn=>{Bn.key==="Escape"&&Sn()},Ue=computed(()=>Te.isAlert?"alertdialog":"dialog"),He=ref(null),We=ref();watch(()=>Te.opened,Bn=>{var ei,ni;Bn?((ei=We.value)==null||ei.showModal(),setTimeout(()=>{var ti;(ti=He.value)==null||ti.focus()},100)):(ni=We.value)==null||ni.close(),Cn(Bn)});function Cn(Bn){typeof window<"u"&&document.body.classList.toggle("modal-open",Bn)}onMounted(()=>{An(),Cn(Te.opened)}),onBeforeUnmount(()=>{En(),Cn(!1)});function An(){document.addEventListener("keydown",Be)}function En(){document.removeEventListener("keydown",Be)}async function Sn(){var Bn;await nextTick(),(Bn=Te.origin)==null||Bn.focus(),Oe("close")}const Tn=computed(()=>typeof Te.icon=="string"&&Te.icon.startsWith("fr-icon-")),Ln=computed(()=>Tn.value?void 0:typeof Te.icon=="string"?{name:Te.icon,scale:bt$1}:{scale:bt$1,...Te.icon??{}});return(Bn,ei)=>Bn.opened?(openBlock(),createBlock(unref(ro),{key:0},{default:withCtx(()=>{var ni,ti;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:We,"aria-modal":"true","aria-labelledby":Bn.modalId,role:Ue.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":Bn.opened}]),open:Bn.opened},[createBaseVNode("div",lo,[createBaseVNode("div",oo,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":Bn.size==="lg","fr-col-md-6":Bn.size==="md","fr-col-md-4":Bn.size==="sm"}])},[createBaseVNode("div",io,[createBaseVNode("div",uo,[createBaseVNode("button",{ref_key:"closeBtn",ref:He,class:"fr-btn fr-btn--close",title:Bn.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:ei[0]||(ei[0]=ri=>Sn())},[createBaseVNode("span",null,toDisplayString(Bn.closeButtonLabel),1)],8,fo)]),createBaseVNode("div",co,[createBaseVNode("h1",{id:Bn.modalId,class:"fr-modal__title"},[Tn.value||Ln.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(Bn.icon)]:Tn.value})},[Bn.icon&&Ln.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Ln.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Bn.title),1)],8,po),renderSlot(Bn.$slots,"default",{},void 0,!0)]),(ni=Bn.actions)!=null&&ni.length||Bn.$slots.footer?(openBlock(),createElementBlock("div",vo,[renderSlot(Bn.$slots,"footer",{},void 0,!0),(ti=Bn.actions)!=null&&ti.length?(openBlock(),createBlock(qe,{key:0,align:"right",buttons:Bn.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,no)]}),_:3})):createCommentVNode("",!0)}}),Vt$1=ie$1(mo,[["__scopeId","data-v-70fe954b"]]),So=["id","aria-current"],Ao=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>x$3("nav","item")},active:{type:Boolean}},setup(ke){return(e,Te)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,So))}}),jt$1=ie$1(Ao,[["__scopeId","data-v-aa4076c4"]]),Bo=["href"],ht$1=2,Qe=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>x$3("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(ke){const e=ke,Te=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Be=computed(()=>Oe.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ht$1,name:e.icon}:{scale:ht$1,...e.icon||{}}),Ue=hasInjectionContext()?inject(nt$1):void 0,He=(Ue==null?void 0:Ue())??(()=>{});return(We,Cn)=>{const An=resolveComponent("RouterLink");return Te.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:We.to,onClick:Cn[0]||(Cn[0]=En=>{We.$emit("toggleId",We.id),We.onClick(En)})},toDisplayString(We.text),9,Bo)):(openBlock(),createBlock(An,{key:1,class:normalizeClass(["fr-nav__link",{[String(We.icon)]:Oe.value}]),"data-testid":"nav-router-link",to:We.to,onClick:Cn[1]||(Cn[1]=En=>{var Sn;unref(He)(),We.$emit("toggleId",We.id),(Sn=We.onClick)==null||Sn.call(We,En)})},{default:withCtx(()=>[We.icon&&Be.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Be.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(We.text),1)]),_:1},8,["to","class"]))}}}),Lo={class:"fr-col-12 fr-col-lg-3"},Po={class:"fr-mega-menu__category"},Mo={class:"fr-mega-menu__list"},Ot$1=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(ke){return(e,Te)=>(openBlock(),createElementBlock("div",Lo,[createBaseVNode("h5",Po,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:Te[0]||(Te[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Mo,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(Oe,Be)=>(openBlock(),createElementBlock("li",{key:Be,class:"fr-nav__link"},[createVNode(Qe,mergeProps({ref_for:!0},Oe),null,16)]))),128))])]))}}),No=["aria-expanded","aria-current","aria-controls"],Fo=["id"],Ro={class:"fr-container fr-container--fluid fr-container-lg"},Vo={class:"fr-grid-row fr-grid-row-lg--gutters"},jo={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Oo={class:"fr-mega-menu__leader"},Ho={class:"fr-h4 fr-mb-2v"},Ko={class:"fr-hidden fr-displayed-lg"},qo=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>x$3("mega-menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(ke){const e=ke,{collapse:Te,collapsing:Oe,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=computed(()=>e.id===e.expandedId);return watch(We,(Cn,An)=>{Cn!==An&&Ue(Cn)}),onMounted(()=>{We.value&&Ue(!0)}),(Cn,An)=>{const En=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":We.value,"aria-current":Cn.active||void 0,"aria-controls":Cn.id,onClick:An[0]||(An[0]=Sn=>Cn.$emit("toggleId",Cn.id))},toDisplayString(Cn.title),9,No),createBaseVNode("div",{id:Cn.id,ref_key:"collapse",ref:Te,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(Oe)}]),tabindex:"-1",onTransitionend:An[2]||(An[2]=Sn=>unref(He)(We.value))},[createBaseVNode("div",Ro,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:An[1]||(An[1]=Sn=>Cn.$emit("toggleId",Cn.id))}," Fermer "),createBaseVNode("div",Vo,[createBaseVNode("div",jo,[createBaseVNode("div",Oo,[createBaseVNode("h4",Ho,toDisplayString(Cn.title),1),createBaseVNode("p",Ko,[createTextVNode(toDisplayString(Cn.description)+" ",1),renderSlot(Cn.$slots,"description",{},void 0,!0)]),createVNode(En,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:Cn.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(Cn.link.text),1)]),_:1},8,["to"])])]),renderSlot(Cn.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.menus,(Sn,Tn)=>(openBlock(),createBlock(Ot$1,mergeProps({key:Tn,ref_for:!0},Sn),null,16))),128))])])],42,Fo)],64)}}}),Ht$1=ie$1(qo,[["__scopeId","data-v-1e103394"]]),zo=["id","aria-current"],Kt$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>x$3("menu","item")},active:{type:Boolean}},setup(ke){return(e,Te)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,zo))}}),Qo=["aria-expanded","aria-current","aria-controls"],Wo=["id"],Go={class:"fr-menu__list"},qt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>x$3("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(ke){const e=ke,{collapse:Te,collapsing:Oe,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=computed(()=>e.id===e.expandedId);return watch(We,(Cn,An)=>{Cn!==An&&Ue(Cn)}),onMounted(()=>{We.value&&Ue(!0)}),(Cn,An)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":We.value,"aria-current":Cn.active||void 0,"aria-controls":Cn.id,onClick:An[0]||(An[0]=En=>Cn.$emit("toggleId",Cn.id))},[createBaseVNode("span",null,toDisplayString(Cn.title),1)],8,Qo),createBaseVNode("div",{id:Cn.id,ref_key:"collapse",ref:Te,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(Oe)}]),"data-testid":"navigation-menu",onTransitionend:An[2]||(An[2]=En=>unref(He)(We.value))},[createBaseVNode("ul",Go,[renderSlot(Cn.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.links,(En,Sn)=>(openBlock(),createBlock(Kt$1,{key:Sn},{default:withCtx(()=>[createVNode(Qe,mergeProps({ref_for:!0},En,{onToggleId:An[1]||(An[1]=Tn=>Cn.$emit("toggleId",Cn.expandedId))}),null,16)]),_:2},1024))),128))])],42,Wo)],64))}}),Xo=["id","aria-label"],Uo={class:"fr-nav__list"},Yo=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>x$3("nav")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(ke){const e=ke,Te=ref(void 0),Oe=We=>{if(We===Te.value){Te.value=void 0;return}Te.value=We},Be=We=>{if(We!==document.getElementById(e.id)){if(!(We!=null&&We.parentNode)){Oe(Te.value);return}Be(We.parentNode)}},Ue=We=>{Be(We.target)},He=We=>{We.key==="Escape"&&Oe(Te.value)};return onMounted(()=>{document.addEventListener("click",Ue),document.addEventListener("keydown",He)}),onUnmounted(()=>{document.removeEventListener("click",Ue),document.removeEventListener("keydown",He)}),(We,Cn)=>(openBlock(),createElementBlock("nav",{id:We.id,class:"fr-nav",role:"navigation","aria-label":We.label},[createBaseVNode("ul",Uo,[renderSlot(We.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.navItems,(An,En)=>(openBlock(),createBlock(jt$1,{id:An.id,key:En},{default:withCtx(()=>[An.to&&An.text?(openBlock(),createBlock(Qe,mergeProps({key:0,ref_for:!0},An,{"expanded-id":Te.value,onToggleId:Cn[0]||(Cn[0]=Sn=>Oe(Sn))}),null,16,["expanded-id"])):An.title&&An.links?(openBlock(),createBlock(qt$1,mergeProps({key:1,ref_for:!0},An,{"expanded-id":Te.value,onToggleId:Cn[1]||(Cn[1]=Sn=>Oe(Sn))}),null,16,["expanded-id"])):An.title&&An.menus?(openBlock(),createBlock(Ht$1,mergeProps({key:2,ref_for:!0},An,{"expanded-id":Te.value,onToggleId:Cn[2]||(Cn[2]=Sn=>Oe(Sn))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1032,["id"]))),128))])],8,Xo))}}),mi=["id","name","value","checked","disabled"],gi=["for"],bi={key:0,class:"required"},hi={key:0,class:"fr-hint-text"},yi={key:0,class:"fr-radio-rich__pictogram"},ki=["src","title"],$i={key:0},wi=["href"],_i=["href"],Di=["href"],zt$1=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>x$3("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},imgTitle:{},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(ke){const e=ke,Te={viewBox:"0 0 80 80",width:"80px",height:"80px"},Oe=computed(()=>!!e.img||!!e.svgPath);return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Be.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":Oe.value,"fr-radio-group--sm":Be.small}])},[createBaseVNode("input",mergeProps({id:Be.id,type:"radio",name:Be.name,value:Be.value,checked:Be.modelValue===Be.value,disabled:Be.disabled},Be.$attrs,{onClick:Ue[0]||(Ue[0]=He=>Be.$emit("update:modelValue",Be.value))}),null,16,mi),createBaseVNode("label",{for:Be.id,class:"fr-label"},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.$attrs.required?(openBlock(),createElementBlock("span",bi,"*")):createCommentVNode("",!0)])]),Be.hint?(openBlock(),createElementBlock("span",hi,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],8,gi),Be.img||Be.svgPath?(openBlock(),createElementBlock("div",yi,[Be.img?(openBlock(),createElementBlock("img",{key:0,src:Be.img,class:"fr-artwork",alt:"",title:Be.imgTitle},null,8,ki)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...Te,...Be.svgAttrs}),[Be.imgTitle?(openBlock(),createElementBlock("title",$i,toDisplayString(Be.imgTitle),1)):createCommentVNode("",!0),createBaseVNode("use",{class:"fr-artwork-decorative",href:`${Be.svgPath}#artwork-decorative`},null,8,wi),createBaseVNode("use",{class:"fr-artwork-minor",href:`${Be.svgPath}#artwork-minor`},null,8,_i),createBaseVNode("use",{class:"fr-artwork-major",href:`${Be.svgPath}#artwork-major`},null,8,Di)],16))])):createCommentVNode("",!0)],2)],2))}}),Ii={class:"fr-form-group"},Ti=["disabled","aria-labelledby","aria-invalid","role"],Ei=["id"],Ci={key:0,class:"fr-hint-text"},Si={key:0,class:"required"},Ai=["id"],Bi=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>x$3("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=computed(()=>Te.errorMessage||Te.validMessage),Ue=computed(()=>Te.errorMessage?"fr-error-text":"fr-valid-text"),He=Cn=>{Cn!==Te.modelValue&&Oe("update:modelValue",Cn)},We=computed(()=>Be.value?`${Te.titleId} messages-${Te.titleId}`:Te.titleId);return(Cn,An)=>(openBlock(),createElementBlock("div",Ii,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":Cn.errorMessage,"fr-fieldset--valid":Cn.validMessage}]),disabled:Cn.disabled,"aria-labelledby":We.value,"aria-invalid":Cn.ariaInvalid,role:Cn.errorMessage||Cn.validMessage?"group":void 0},[Cn.legend||Cn.$slots.legend||Cn.hint||Cn.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:Cn.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(Cn.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Cn.legend)+" ",1),Cn.hint||Cn.$slots.hint?(openBlock(),createElementBlock("span",Ci,[renderSlot(Cn.$slots,"hint",{},()=>[createTextVNode(toDisplayString(Cn.hint),1)])])):createCommentVNode("",!0),renderSlot(Cn.$slots,"required-tip",{},()=>[Cn.required?(openBlock(),createElementBlock("span",Si,"*")):createCommentVNode("",!0)])])],8,Ei)):createCommentVNode("",!0),renderSlot(Cn.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.options,(En,Sn)=>(openBlock(),createBlock(zt$1,mergeProps({key:typeof En.value=="boolean"?Sn:En.value||Sn,name:Cn.name,"aria-disabled":En.disabled,ref_for:!0},En,{small:Cn.small,inline:Cn.inline,"model-value":Cn.modelValue,"onUpdate:modelValue":An[0]||(An[0]=Tn=>He(Tn))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),Be.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${Cn.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message fr-message--info flex items-center",Ue.value])},toDisplayString(Be.value),3)],8,Ai)):createCommentVNode("",!0)],10,Ti)]))}}),qi={class:"fr-segmented__element"},zi=["id","name","value","checked","disabled","aria-disabled"],Qi=["for"],Wi={key:1},Qt$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>x$3("segmented")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(ke){const e=ke,Te=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(Be,Ue)=>(openBlock(),createElementBlock("div",qi,[createBaseVNode("input",mergeProps({id:Be.id,type:"radio",name:Be.name,value:Be.value,checked:Be.modelValue===Be.value,disabled:Be.disabled,"aria-disabled":Be.disabled},Be.$attrs,{onClick:Ue[0]||(Ue[0]=He=>Be.$emit("update:modelValue",Be.value))}),null,16,zi),createBaseVNode("label",{for:Be.id,class:normalizeClass(["fr-label",{[Oe.value]:Oe.value}])},[Be.icon&&!Oe.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Te.value)),null,16)):createCommentVNode("",!0),Be.icon?(openBlock(),createElementBlock("span",Wi,"")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Be.label),1)],10,Qi)]))}}),Gi={class:"fr-form-group"},Xi=["disabled"],Ui=["id"],Yi={key:0,class:"fr-hint-text"},Zi={class:"fr-segmented__elements"},Ji=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>x$3("segmented-button","set")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:()=>x$3("segmented-button","set")},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=Ue=>{Ue!==Te.modelValue&&Oe("update:modelValue",Ue)};return(Ue,He)=>(openBlock(),createElementBlock("div",Gi,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Ue.small,"fr-segmented--no-legend":!Ue.legend}]),disabled:Ue.disabled},[Ue.legend?(openBlock(),createElementBlock("legend",{key:0,id:Ue.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Ue.inline}])},[renderSlot(Ue.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Ue.legend),1)]),Ue.hint?(openBlock(),createElementBlock("span",Yi,toDisplayString(Ue.hint),1)):createCommentVNode("",!0)],10,Ui)):createCommentVNode("",!0),createBaseVNode("div",Zi,[renderSlot(Ue.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ue.options,(We,Cn)=>(openBlock(),createBlock(Qt$1,mergeProps({key:We.value||Cn,name:Ue.name||We.name,ref_for:!0},{...We,disabled:Ue.disabled||We.disabled},{"model-value":Ue.modelValue,"onUpdate:modelValue":He[0]||(He[0]=An=>Be(An))}),null,16,["name","model-value"]))),128))])])],10,Xi)]))}}),xi=["for"],ed={key:0,class:"required"},td$1={key:0,class:"fr-hint-text"},ad=["id","name","disabled","aria-disabled","required"],sd=["selected"],rd=["selected","value","disabled","aria-disabled"],nd=["id"],ld=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>x$3("select")},name:{default:void 0},description:{default:void 0},hint:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Slectionner une option"}},emits:["update:modelValue"],setup(ke){const e=ke;e.description&&console.warn("[DsfrSelect] : La prop `description` est dprcie. Veuillez utiliser `hint`  la place.");const Te=computed(()=>e.errorMessage||e.successMessage),Oe=computed(()=>e.errorMessage?"error":"valid");return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${Oe.value}`]:Te.value}])},[createBaseVNode("label",{class:"fr-label",for:Be.selectId},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.required?(openBlock(),createElementBlock("span",ed,"*")):createCommentVNode("",!0)])]),Be.hint??Be.description?(openBlock(),createElementBlock("span",td$1,toDisplayString(Be.hint??Be.description),1)):createCommentVNode("",!0)],8,xi),createBaseVNode("select",mergeProps({id:Be.selectId,class:[{[`fr-select--${Oe.value}`]:Te.value},"fr-select"],name:Be.name||Be.selectId,disabled:Be.disabled,"aria-disabled":Be.disabled,required:Be.required},Be.$attrs,{onChange:Ue[0]||(Ue[0]=He=>{var We;return Be.$emit("update:modelValue",(We=He.target)==null?void 0:We.value)})}),[createBaseVNode("option",{selected:!Be.options.some(He=>typeof He!="object"||He===null?He===Be.modelValue:He.value===Be.modelValue),disabled:"",hidden:""},toDisplayString(Be.defaultUnselectedText),9,sd),(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.options,(He,We)=>(openBlock(),createElementBlock("option",{key:We,selected:Be.modelValue===He||typeof He=="object"&&He.value===Be.modelValue,value:typeof He=="object"?He.value:He,disabled:!!(typeof He=="object"&&He.disabled),"aria-disabled":!!(typeof He=="object"&&He.disabled)},toDisplayString(typeof He=="object"?He.text:He),9,rd))),128))],16,ad),Te.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${Oe.value}-desc-${Oe.value}`,class:normalizeClass(`fr-${Oe.value}-text`)},toDisplayString(Te.value),11,nd)):createCommentVNode("",!0)],2))}}),od={class:"fr-share"},id={class:"fr-share__title"},dd={class:"fr-btns-group"},ud=["title","href","onClick"],fd$1={key:0},cd=["href","title"],pd=["title"],vd=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(ke){const e=()=>{const Oe=window.location.href;navigator.clipboard.writeText(Oe)},Te=({url:Oe,label:Be})=>{window.open(Oe,Be,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(Oe,Be)=>{var Ue;return openBlock(),createElementBlock("div",od,[createBaseVNode("p",id,toDisplayString(Oe.title),1),createBaseVNode("ul",dd,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.networks,(He,We)=>(openBlock(),createElementBlock("li",{key:We},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${He.name}`),title:`${He.label} - nouvelle fentre`,href:He.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(Cn=>Te(He),["prevent"])},toDisplayString(He.label),11,ud)]))),128)),(Ue=Oe.mail)!=null&&Ue.to?(openBlock(),createElementBlock("li",fd$1,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:Oe.mail.to,title:Oe.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(Oe.mail.label),9,cd)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:Oe.copyLabel,onClick:Be[0]||(Be[0]=He=>e())},toDisplayString(Oe.copyLabel),9,pd)])])])}}}),Hd=["id","aria-labelledby","tabindex"],Kd=defineComponent({__name:"DsfrTabContent",props:{panelId:{},tabId:{}},setup(ke){useCssVars(Cn=>({"7152af7e":He.value,"2a62e962":We.value}));const e=ke,Te={true:"100%",false:"-100%"},Oe=inject(Ke),{isVisible:Be,asc:Ue}=Oe(toRef(()=>e.tabId)),He=computed(()=>Te[String(Ue==null?void 0:Ue.value)]),We=computed(()=>Te[String(!(Ue!=null&&Ue.value))]);return(Cn,An)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Cn.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":unref(Be)}]),role:"tabpanel","aria-labelledby":Cn.tabId,tabindex:unref(Be)?0:-1},[renderSlot(Cn.$slots,"default",{},void 0,!0)],10,Hd),[[vShow,unref(Be)]])]),_:3}))}}),Ut$1=ie$1(Kd,[["__scopeId","data-v-5774b16c"]]),qd={role:"presentation"},zd=["id","data-testid","tabindex","aria-selected","aria-controls"],Qd={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Yt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(ke,{emit:e}){const Te=ke,Oe=e,Be=ref(null),Ue={ArrowRight:"next",ArrowLeft:"previous",Home:"first",End:"last"};function He(En){const Sn=En==null?void 0:En.key,Tn=Ue[Sn];Tn&&Oe(Tn)}const We=inject(Ke),{isVisible:Cn}=We(toRef(()=>Te.tabId)),An=useTemplateRef("button");return watch(Cn,()=>{var En;Cn.value&&((En=An.value)==null||En.focus())}),(En,Sn)=>(openBlock(),createElementBlock("li",qd,[createBaseVNode("button",{id:En.tabId,ref_key:"button",ref:Be,"data-testid":`test-${En.tabId}`,class:"fr-tabs__tab",tabindex:unref(Cn)?0:-1,role:"tab",type:"button","aria-selected":unref(Cn),"aria-controls":En.panelId,onClick:Sn[0]||(Sn[0]=withModifiers(Tn=>En.$emit("click",En.tabId),["prevent"])),onKeydown:Sn[1]||(Sn[1]=Tn=>He(Tn))},[En.icon?(openBlock(),createElementBlock("span",Qd,[createVNode(ue$1,{name:En.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(En.$slots,"default")],40,zd)]))}}),lu=["aria-label"],ou=defineComponent({__name:"DsfrTabs",props:{modelValue:{default:0},tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]}},emits:["update:modelValue"],setup(ke,{expose:e,emit:Te}){const Oe=ke,Be=Te,Ue=ref(!1),He=computed({get:()=>Oe.modelValue,set(ai){Be("update:modelValue",ai)}}),We=ref(new Map),Cn=ref(0);provide(Ke,ai=>{const ci=ref(!0);if(watch(He,(pi,Mi)=>{ci.value=pi>Mi}),[...We.value.values()].includes(ai.value))return{isVisible:computed(()=>We.value.get(He.value)===ai.value),asc:ci};const Pi=Cn.value++;We.value.set(Pi,ai.value);const vi=computed(()=>Pi===He.value);return watch(ai,()=>{We.value.set(Pi,ai.value)}),onUnmounted(()=>{We.value.delete(Pi)}),{isVisible:vi}});const An=ref(null),En=ref(null),Sn=reactive({}),Tn=ai=>{if(Sn[ai])return Sn[ai];const ci=x$3("tab");return Sn[ai]=ci,ci},Ln=async()=>{const ai=He.value===0?Oe.tabTitles.length-1:He.value-1;Ue.value=!1,He.value=ai},Bn=async()=>{const ai=He.value===Oe.tabTitles.length-1?0:He.value+1;Ue.value=!0,He.value=ai},ei=async()=>{He.value=0},ni=async()=>{He.value=Oe.tabTitles.length-1},ti=ref({"--tabs-height":"100px"}),ri=()=>{var ai;if(He.value<0||!En.value||!En.value.offsetHeight)return;const ci=En.value.offsetHeight,Pi=(ai=An.value)==null?void 0:ai.querySelectorAll(".fr-tabs__panel")[He.value];if(!Pi||!Pi.offsetHeight)return;const vi=Pi.offsetHeight;ti.value["--tabs-height"]=`${ci+vi}px`},oi=ref(null);return onMounted(()=>{var ai;window.ResizeObserver&&(oi.value=new window.ResizeObserver(()=>{ri()})),(ai=An.value)==null||ai.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var Pi;ci&&((Pi=oi.value)==null||Pi.observe(ci))})}),onUnmounted(()=>{var ai;(ai=An.value)==null||ai.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var Pi;ci&&((Pi=oi.value)==null||Pi.unobserve(ci))})}),e({renderTabs:ri,selectFirst:ei,selectLast:ni}),(ai,ci)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:An,class:"fr-tabs",style:normalizeStyle(ti.value)},[createBaseVNode("ul",{ref_key:"tablist",ref:En,class:"fr-tabs__list",role:"tablist","aria-label":ai.tabListName},[renderSlot(ai.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ai.tabTitles,(Pi,vi)=>(openBlock(),createBlock(Yt$1,{key:vi,icon:Pi.icon,"panel-id":Pi.panelId||`${Tn(vi)}-panel`,"tab-id":Pi.tabId||Tn(vi),onClick:pi=>He.value=vi,onNext:ci[0]||(ci[0]=pi=>Bn()),onPrevious:ci[1]||(ci[1]=pi=>Ln()),onFirst:ci[2]||(ci[2]=pi=>ei()),onLast:ci[3]||(ci[3]=pi=>ni())},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi.title),1)]),_:2},1032,["icon","panel-id","tab-id","onClick"]))),128))])],8,lu),(openBlock(!0),createElementBlock(Fragment,null,renderList(ai.tabContents,(Pi,vi)=>{var pi,Mi,Fi,fi;return openBlock(),createBlock(Ut$1,{key:vi,"panel-id":((Mi=(pi=ai.tabTitles)==null?void 0:pi[vi])==null?void 0:Mi.panelId)||`${Tn(vi)}-panel`,"tab-id":((fi=(Fi=ai.tabTitles)==null?void 0:Fi[vi])==null?void 0:fi.tabId)||Tn(vi)},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi),1)]),_:2},1032,["panel-id","tab-id"])}),128)),renderSlot(ai.$slots,"default")],4))}}),Tu=["id","disabled","aria-disabled","checked","data-testid","aria-describedby","name"],Eu=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Cu=["id"],Su=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>x$3("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activ"},inactiveText:{default:"Dsactiv"},noText:{type:Boolean,default:!1},name:{default:void 0}},emits:["update:modelValue"],setup(ke){const e=ke,Te=computed(()=>`${e.inputId}-hint-text`);return(Oe,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":Oe.labelLeft,"fr-toggle--border-bottom":Oe.borderBottom}])},[createBaseVNode("input",{id:Oe.inputId,disabled:Oe.disabled,"aria-disabled":Oe.disabled,type:"checkbox",checked:Oe.modelValue,"data-testid":Oe.inputId,class:"fr-toggle__input","aria-describedby":Te.value,name:Oe.name,onInput:Be[0]||(Be[0]=Ue=>Oe.$emit("update:modelValue",Ue.target.checked))},null,40,Tu),createBaseVNode("label",{id:Te.value,class:"fr-toggle__label",for:Oe.inputId,"data-fr-checked-label":Oe.noText?void 0:Oe.activeText,"data-fr-unchecked-label":Oe.noText?void 0:Oe.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(Oe.label),9,Eu),Oe.hint?(openBlock(),createElementBlock("p",{key:0,id:`${Oe.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(Oe.hint),9,Cu)):createCommentVNode("",!0)],2))}}),_export_sfc=(ke,e)=>{const Te=ke.__vccOpts||ke;for(const[Oe,Be]of e)Te[Oe]=Be;return Te},_sfc_main$10={},_hoisted_1$o={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$4(ke,e){return openBlock(),createElementBlock("svg",_hoisted_1$o,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M19.5,2.5h-15c-1.1,0-2,0.9-2,2v15c0,1.1,0.9,2,2,2h15c1.1,0,2-0.9,2-2v-15C21.5,3.4,20.6,2.5,19.5,2.5z M13,17h-2v-6h2V17z M13,9h-2V7h2V9z"},null,-1)]))}const NotificationInfo=_export_sfc(_sfc_main$10,[["render",_sfc_render$4]]),_sfc_main$$={},_hoisted_1$n={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$3(ke,e){return openBlock(),createElementBlock("svg",_hoisted_1$n,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.997-6l7.07-7.071-1.414-1.414-5.656 5.657-2.829-2.829-1.414 1.414L11.003 16z"},null,-1)]))}const NotificationSuccess=_export_sfc(_sfc_main$$,[["render",_sfc_render$3]]),_sfc_main$_={},_hoisted_1$m={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2(ke,e){return openBlock(),createElementBlock("svg",_hoisted_1$m,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M17.5,2.5h-11L1,12l5.5,9.5h11L23,12L17.5,2.5z M16.2,14.8l-1.4,1.4L12,13.4l-2.8,2.8l-1.4-1.4l2.8-2.8L7.8,9.2l1.4-1.4l2.8,2.8l2.8-2.8l1.4,1.4L13.4,12L16.2,14.8z"},null,-1)]))}const NotificationError=_export_sfc(_sfc_main$_,[["render",_sfc_render$2]]),_sfc_main$Z={},_hoisted_1$l={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1(ke,e){return openBlock(),createElementBlock("svg",_hoisted_1$l,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"m12.866 3 9.526 16.5a1 1 0 0 1-.866 1.5H2.474a1 1 0 0 1-.866-1.5L11.134 3a1 1 0 0 1 1.732 0ZM11 16v2h2v-2h-2Zm0-7v5h2V9h-2Z"},null,-1)]))}const NotificationWarning=_export_sfc(_sfc_main$Z,[["render",_sfc_render$1]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(ke){return typeof ke=="object"||"displayName"in ke||"props"in ke||"__vccOpts"in ke}function isESModule(ke){return ke.__esModule||ke[Symbol.toStringTag]==="Module"||ke.default&&isRouteComponent(ke.default)}const assign=Object.assign;function applyToParams(ke,e){const Te={};for(const Oe in e){const Be=e[Oe];Te[Oe]=isArray(Be)?Be.map(ke):ke(Be)}return Te}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(ke){return encodeURI(""+ke).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(ke){return commonEncode(ke).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(ke){return commonEncode(ke).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(ke){return encodeQueryValue(ke).replace(EQUAL_RE,"%3D")}function encodePath(ke){return commonEncode(ke).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(ke){return ke==null?"":encodePath(ke).replace(SLASH_RE,"%2F")}function decode$2(ke){try{return decodeURIComponent(""+ke)}catch{}return""+ke}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=ke=>ke.replace(TRAILING_SLASH_RE,"");function parseURL(ke,e,Te="/"){let Oe,Be={},Ue="",He="";const We=e.indexOf("#");let Cn=e.indexOf("?");return We<Cn&&We>=0&&(Cn=-1),Cn>-1&&(Oe=e.slice(0,Cn),Ue=e.slice(Cn+1,We>-1?We:e.length),Be=ke(Ue)),We>-1&&(Oe=Oe||e.slice(0,We),He=e.slice(We,e.length)),Oe=resolveRelativePath(Oe??e,Te),{fullPath:Oe+(Ue&&"?")+Ue+He,path:Oe,query:Be,hash:decode$2(He)}}function stringifyURL(ke,e){const Te=e.query?ke(e.query):"";return e.path+(Te&&"?")+Te+(e.hash||"")}function stripBase(ke,e){return!e||!ke.toLowerCase().startsWith(e.toLowerCase())?ke:ke.slice(e.length)||"/"}function isSameRouteLocation(ke,e,Te){const Oe=e.matched.length-1,Be=Te.matched.length-1;return Oe>-1&&Oe===Be&&isSameRouteRecord(e.matched[Oe],Te.matched[Be])&&isSameRouteLocationParams(e.params,Te.params)&&ke(e.query)===ke(Te.query)&&e.hash===Te.hash}function isSameRouteRecord(ke,e){return(ke.aliasOf||ke)===(e.aliasOf||e)}function isSameRouteLocationParams(ke,e){if(Object.keys(ke).length!==Object.keys(e).length)return!1;for(const Te in ke)if(!isSameRouteLocationParamsValue(ke[Te],e[Te]))return!1;return!0}function isSameRouteLocationParamsValue(ke,e){return isArray(ke)?isEquivalentArray(ke,e):isArray(e)?isEquivalentArray(e,ke):ke===e}function isEquivalentArray(ke,e){return isArray(e)?ke.length===e.length&&ke.every((Te,Oe)=>Te===e[Oe]):ke.length===1&&ke[0]===e}function resolveRelativePath(ke,e){if(ke.startsWith("/"))return ke;if(!ke)return e;const Te=e.split("/"),Oe=ke.split("/"),Be=Oe[Oe.length-1];(Be===".."||Be===".")&&Oe.push("");let Ue=Te.length-1,He,We;for(He=0;He<Oe.length;He++)if(We=Oe[He],We!==".")if(We==="..")Ue>1&&Ue--;else break;return Te.slice(0,Ue).join("/")+"/"+Oe.slice(He).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(ke){ke.pop="pop",ke.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(ke){ke.back="back",ke.forward="forward",ke.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(ke){if(!ke)if(isBrowser){const e=document.querySelector("base");ke=e&&e.getAttribute("href")||"/",ke=ke.replace(/^\w+:\/\/[^\/]+/,"")}else ke="/";return ke[0]!=="/"&&ke[0]!=="#"&&(ke="/"+ke),removeTrailingSlash(ke)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(ke,e){return ke.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(ke,e){const Te=document.documentElement.getBoundingClientRect(),Oe=ke.getBoundingClientRect();return{behavior:e.behavior,left:Oe.left-Te.left-(e.left||0),top:Oe.top-Te.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(ke){let e;if("el"in ke){const Te=ke.el,Oe=typeof Te=="string"&&Te.startsWith("#"),Be=typeof Te=="string"?Oe?document.getElementById(Te.slice(1)):document.querySelector(Te):Te;if(!Be)return;e=getElementPosition(Be,ke)}else e=ke;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(ke,e){return(history.state?history.state.position-e:-1)+ke}const scrollPositions=new Map;function saveScrollPosition(ke,e){scrollPositions.set(ke,e)}function getSavedScrollPosition(ke){const e=scrollPositions.get(ke);return scrollPositions.delete(ke),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(ke,e){const{pathname:Te,search:Oe,hash:Be}=e,Ue=ke.indexOf("#");if(Ue>-1){let We=Be.includes(ke.slice(Ue))?ke.slice(Ue).length:1,Cn=Be.slice(We);return Cn[0]!=="/"&&(Cn="/"+Cn),stripBase(Cn,"")}return stripBase(Te,ke)+Oe+Be}function useHistoryListeners(ke,e,Te,Oe){let Be=[],Ue=[],He=null;const We=({state:Tn})=>{const Ln=createCurrentLocation(ke,location),Bn=Te.value,ei=e.value;let ni=0;if(Tn){if(Te.value=Ln,e.value=Tn,He&&He===Bn){He=null;return}ni=ei?Tn.position-ei.position:0}else Oe(Ln);Be.forEach(ti=>{ti(Te.value,Bn,{delta:ni,type:NavigationType.pop,direction:ni?ni>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Cn(){He=Te.value}function An(Tn){Be.push(Tn);const Ln=()=>{const Bn=Be.indexOf(Tn);Bn>-1&&Be.splice(Bn,1)};return Ue.push(Ln),Ln}function En(){const{history:Tn}=window;Tn.state&&Tn.replaceState(assign({},Tn.state,{scroll:computeScrollPosition()}),"")}function Sn(){for(const Tn of Ue)Tn();Ue=[],window.removeEventListener("popstate",We),window.removeEventListener("beforeunload",En)}return window.addEventListener("popstate",We),window.addEventListener("beforeunload",En,{passive:!0}),{pauseListeners:Cn,listen:An,destroy:Sn}}function buildState(ke,e,Te,Oe=!1,Be=!1){return{back:ke,current:e,forward:Te,replaced:Oe,position:window.history.length,scroll:Be?computeScrollPosition():null}}function useHistoryStateNavigation(ke){const{history:e,location:Te}=window,Oe={value:createCurrentLocation(ke,Te)},Be={value:e.state};Be.value||Ue(Oe.value,{back:null,current:Oe.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Ue(Cn,An,En){const Sn=ke.indexOf("#"),Tn=Sn>-1?(Te.host&&document.querySelector("base")?ke:ke.slice(Sn))+Cn:createBaseLocation()+ke+Cn;try{e[En?"replaceState":"pushState"](An,"",Tn),Be.value=An}catch(Ln){console.error(Ln),Te[En?"replace":"assign"](Tn)}}function He(Cn,An){const En=assign({},e.state,buildState(Be.value.back,Cn,Be.value.forward,!0),An,{position:Be.value.position});Ue(Cn,En,!0),Oe.value=Cn}function We(Cn,An){const En=assign({},Be.value,e.state,{forward:Cn,scroll:computeScrollPosition()});Ue(En.current,En,!0);const Sn=assign({},buildState(Oe.value,Cn,null),{position:En.position+1},An);Ue(Cn,Sn,!1),Oe.value=Cn}return{location:Oe,state:Be,push:We,replace:He}}function createWebHistory(ke){ke=normalizeBase(ke);const e=useHistoryStateNavigation(ke),Te=useHistoryListeners(ke,e.state,e.location,e.replace);function Oe(Ue,He=!0){He||Te.pauseListeners(),history.go(Ue)}const Be=assign({location:"",base:ke,go:Oe,createHref:createHref.bind(null,ke)},e,Te);return Object.defineProperty(Be,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(Be,"state",{enumerable:!0,get:()=>e.state.value}),Be}function isRouteLocation(ke){return typeof ke=="string"||ke&&typeof ke=="object"}function isRouteName(ke){return typeof ke=="string"||typeof ke=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(ke){ke[ke.aborted=4]="aborted",ke[ke.cancelled=8]="cancelled",ke[ke.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(ke,e){return assign(new Error,{type:ke,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(ke,e){return ke instanceof Error&&NavigationFailureSymbol in ke&&(e==null||!!(ke.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(ke,e){const Te=assign({},BASE_PATH_PARSER_OPTIONS,e),Oe=[];let Be=Te.start?"^":"";const Ue=[];for(const An of ke){const En=An.length?[]:[90];Te.strict&&!An.length&&(Be+="/");for(let Sn=0;Sn<An.length;Sn++){const Tn=An[Sn];let Ln=40+(Te.sensitive?.25:0);if(Tn.type===0)Sn||(Be+="/"),Be+=Tn.value.replace(REGEX_CHARS_RE,"\\$&"),Ln+=40;else if(Tn.type===1){const{value:Bn,repeatable:ei,optional:ni,regexp:ti}=Tn;Ue.push({name:Bn,repeatable:ei,optional:ni});const ri=ti||BASE_PARAM_PATTERN;if(ri!==BASE_PARAM_PATTERN){Ln+=10;try{new RegExp(`(${ri})`)}catch(ai){throw new Error(`Invalid custom RegExp for param "${Bn}" (${ri}): `+ai.message)}}let oi=ei?`((?:${ri})(?:/(?:${ri}))*)`:`(${ri})`;Sn||(oi=ni&&An.length<2?`(?:/${oi})`:"/"+oi),ni&&(oi+="?"),Be+=oi,Ln+=20,ni&&(Ln+=-8),ei&&(Ln+=-20),ri===".*"&&(Ln+=-50)}En.push(Ln)}Oe.push(En)}if(Te.strict&&Te.end){const An=Oe.length-1;Oe[An][Oe[An].length-1]+=.7000000000000001}Te.strict||(Be+="/?"),Te.end?Be+="$":Te.strict&&!Be.endsWith("/")&&(Be+="(?:/|$)");const He=new RegExp(Be,Te.sensitive?"":"i");function We(An){const En=An.match(He),Sn={};if(!En)return null;for(let Tn=1;Tn<En.length;Tn++){const Ln=En[Tn]||"",Bn=Ue[Tn-1];Sn[Bn.name]=Ln&&Bn.repeatable?Ln.split("/"):Ln}return Sn}function Cn(An){let En="",Sn=!1;for(const Tn of ke){(!Sn||!En.endsWith("/"))&&(En+="/"),Sn=!1;for(const Ln of Tn)if(Ln.type===0)En+=Ln.value;else if(Ln.type===1){const{value:Bn,repeatable:ei,optional:ni}=Ln,ti=Bn in An?An[Bn]:"";if(isArray(ti)&&!ei)throw new Error(`Provided param "${Bn}" is an array but it is not repeatable (* or + modifiers)`);const ri=isArray(ti)?ti.join("/"):ti;if(!ri)if(ni)Tn.length<2&&(En.endsWith("/")?En=En.slice(0,-1):Sn=!0);else throw new Error(`Missing required param "${Bn}"`);En+=ri}}return En||"/"}return{re:He,score:Oe,keys:Ue,parse:We,stringify:Cn}}function compareScoreArray(ke,e){let Te=0;for(;Te<ke.length&&Te<e.length;){const Oe=e[Te]-ke[Te];if(Oe)return Oe;Te++}return ke.length<e.length?ke.length===1&&ke[0]===80?-1:1:ke.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(ke,e){let Te=0;const Oe=ke.score,Be=e.score;for(;Te<Oe.length&&Te<Be.length;){const Ue=compareScoreArray(Oe[Te],Be[Te]);if(Ue)return Ue;Te++}if(Math.abs(Be.length-Oe.length)===1){if(isLastScoreNegative(Oe))return 1;if(isLastScoreNegative(Be))return-1}return Be.length-Oe.length}function isLastScoreNegative(ke){const e=ke[ke.length-1];return ke.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(ke){if(!ke)return[[]];if(ke==="/")return[[ROOT_TOKEN]];if(!ke.startsWith("/"))throw new Error(`Invalid path "${ke}"`);function e(Ln){throw new Error(`ERR (${Te})/"${An}": ${Ln}`)}let Te=0,Oe=Te;const Be=[];let Ue;function He(){Ue&&Be.push(Ue),Ue=[]}let We=0,Cn,An="",En="";function Sn(){An&&(Te===0?Ue.push({type:0,value:An}):Te===1||Te===2||Te===3?(Ue.length>1&&(Cn==="*"||Cn==="+")&&e(`A repeatable param (${An}) must be alone in its segment. eg: '/:ids+.`),Ue.push({type:1,value:An,regexp:En,repeatable:Cn==="*"||Cn==="+",optional:Cn==="*"||Cn==="?"})):e("Invalid state to consume buffer"),An="")}function Tn(){An+=Cn}for(;We<ke.length;){if(Cn=ke[We++],Cn==="\\"&&Te!==2){Oe=Te,Te=4;continue}switch(Te){case 0:Cn==="/"?(An&&Sn(),He()):Cn===":"?(Sn(),Te=1):Tn();break;case 4:Tn(),Te=Oe;break;case 1:Cn==="("?Te=2:VALID_PARAM_RE.test(Cn)?Tn():(Sn(),Te=0,Cn!=="*"&&Cn!=="?"&&Cn!=="+"&&We--);break;case 2:Cn===")"?En[En.length-1]=="\\"?En=En.slice(0,-1)+Cn:Te=3:En+=Cn;break;case 3:Sn(),Te=0,Cn!=="*"&&Cn!=="?"&&Cn!=="+"&&We--,En="";break;default:e("Unknown state");break}}return Te===2&&e(`Unfinished custom RegExp for param "${An}"`),Sn(),He(),Be}function createRouteRecordMatcher(ke,e,Te){const Oe=tokensToParser(tokenizePath(ke.path),Te),Be=assign(Oe,{record:ke,parent:e,children:[],alias:[]});return e&&!Be.record.aliasOf==!e.record.aliasOf&&e.children.push(Be),Be}function createRouterMatcher(ke,e){const Te=[],Oe=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function Be(Sn){return Oe.get(Sn)}function Ue(Sn,Tn,Ln){const Bn=!Ln,ei=normalizeRouteRecord(Sn);ei.aliasOf=Ln&&Ln.record;const ni=mergeOptions(e,Sn),ti=[ei];if("alias"in Sn){const ai=typeof Sn.alias=="string"?[Sn.alias]:Sn.alias;for(const ci of ai)ti.push(normalizeRouteRecord(assign({},ei,{components:Ln?Ln.record.components:ei.components,path:ci,aliasOf:Ln?Ln.record:ei})))}let ri,oi;for(const ai of ti){const{path:ci}=ai;if(Tn&&ci[0]!=="/"){const Pi=Tn.record.path,vi=Pi[Pi.length-1]==="/"?"":"/";ai.path=Tn.record.path+(ci&&vi+ci)}if(ri=createRouteRecordMatcher(ai,Tn,ni),Ln?Ln.alias.push(ri):(oi=oi||ri,oi!==ri&&oi.alias.push(ri),Bn&&Sn.name&&!isAliasRecord(ri)&&He(Sn.name)),isMatchable(ri)&&Cn(ri),ei.children){const Pi=ei.children;for(let vi=0;vi<Pi.length;vi++)Ue(Pi[vi],ri,Ln&&Ln.children[vi])}Ln=Ln||ri}return oi?()=>{He(oi)}:noop$1}function He(Sn){if(isRouteName(Sn)){const Tn=Oe.get(Sn);Tn&&(Oe.delete(Sn),Te.splice(Te.indexOf(Tn),1),Tn.children.forEach(He),Tn.alias.forEach(He))}else{const Tn=Te.indexOf(Sn);Tn>-1&&(Te.splice(Tn,1),Sn.record.name&&Oe.delete(Sn.record.name),Sn.children.forEach(He),Sn.alias.forEach(He))}}function We(){return Te}function Cn(Sn){const Tn=findInsertionIndex(Sn,Te);Te.splice(Tn,0,Sn),Sn.record.name&&!isAliasRecord(Sn)&&Oe.set(Sn.record.name,Sn)}function An(Sn,Tn){let Ln,Bn={},ei,ni;if("name"in Sn&&Sn.name){if(Ln=Oe.get(Sn.name),!Ln)throw createRouterError(1,{location:Sn});ni=Ln.record.name,Bn=assign(paramsFromLocation(Tn.params,Ln.keys.filter(oi=>!oi.optional).concat(Ln.parent?Ln.parent.keys.filter(oi=>oi.optional):[]).map(oi=>oi.name)),Sn.params&&paramsFromLocation(Sn.params,Ln.keys.map(oi=>oi.name))),ei=Ln.stringify(Bn)}else if(Sn.path!=null)ei=Sn.path,Ln=Te.find(oi=>oi.re.test(ei)),Ln&&(Bn=Ln.parse(ei),ni=Ln.record.name);else{if(Ln=Tn.name?Oe.get(Tn.name):Te.find(oi=>oi.re.test(Tn.path)),!Ln)throw createRouterError(1,{location:Sn,currentLocation:Tn});ni=Ln.record.name,Bn=assign({},Tn.params,Sn.params),ei=Ln.stringify(Bn)}const ti=[];let ri=Ln;for(;ri;)ti.unshift(ri.record),ri=ri.parent;return{name:ni,path:ei,params:Bn,matched:ti,meta:mergeMetaFields(ti)}}ke.forEach(Sn=>Ue(Sn));function En(){Te.length=0,Oe.clear()}return{addRoute:Ue,resolve:An,removeRoute:He,clearRoutes:En,getRoutes:We,getRecordMatcher:Be}}function paramsFromLocation(ke,e){const Te={};for(const Oe of e)Oe in ke&&(Te[Oe]=ke[Oe]);return Te}function normalizeRouteRecord(ke){const e={path:ke.path,redirect:ke.redirect,name:ke.name,meta:ke.meta||{},aliasOf:ke.aliasOf,beforeEnter:ke.beforeEnter,props:normalizeRecordProps(ke),children:ke.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in ke?ke.components||null:ke.component&&{default:ke.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(ke){const e={},Te=ke.props||!1;if("component"in ke)e.default=Te;else for(const Oe in ke.components)e[Oe]=typeof Te=="object"?Te[Oe]:Te;return e}function isAliasRecord(ke){for(;ke;){if(ke.record.aliasOf)return!0;ke=ke.parent}return!1}function mergeMetaFields(ke){return ke.reduce((e,Te)=>assign(e,Te.meta),{})}function mergeOptions(ke,e){const Te={};for(const Oe in ke)Te[Oe]=Oe in e?e[Oe]:ke[Oe];return Te}function findInsertionIndex(ke,e){let Te=0,Oe=e.length;for(;Te!==Oe;){const Ue=Te+Oe>>1;comparePathParserScore(ke,e[Ue])<0?Oe=Ue:Te=Ue+1}const Be=getInsertionAncestor(ke);return Be&&(Oe=e.lastIndexOf(Be,Oe-1)),Oe}function getInsertionAncestor(ke){let e=ke;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(ke,e)===0)return e}function isMatchable({record:ke}){return!!(ke.name||ke.components&&Object.keys(ke.components).length||ke.redirect)}function parseQuery(ke){const e={};if(ke===""||ke==="?")return e;const Oe=(ke[0]==="?"?ke.slice(1):ke).split("&");for(let Be=0;Be<Oe.length;++Be){const Ue=Oe[Be].replace(PLUS_RE," "),He=Ue.indexOf("="),We=decode$2(He<0?Ue:Ue.slice(0,He)),Cn=He<0?null:decode$2(Ue.slice(He+1));if(We in e){let An=e[We];isArray(An)||(An=e[We]=[An]),An.push(Cn)}else e[We]=Cn}return e}function stringifyQuery(ke){let e="";for(let Te in ke){const Oe=ke[Te];if(Te=encodeQueryKey(Te),Oe==null){Oe!==void 0&&(e+=(e.length?"&":"")+Te);continue}(isArray(Oe)?Oe.map(Ue=>Ue&&encodeQueryValue(Ue)):[Oe&&encodeQueryValue(Oe)]).forEach(Ue=>{Ue!==void 0&&(e+=(e.length?"&":"")+Te,Ue!=null&&(e+="="+Ue))})}return e}function normalizeQuery(ke){const e={};for(const Te in ke){const Oe=ke[Te];Oe!==void 0&&(e[Te]=isArray(Oe)?Oe.map(Be=>Be==null?null:""+Be):Oe==null?Oe:""+Oe)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let ke=[];function e(Oe){return ke.push(Oe),()=>{const Be=ke.indexOf(Oe);Be>-1&&ke.splice(Be,1)}}function Te(){ke=[]}return{add:e,list:()=>ke.slice(),reset:Te}}function guardToPromiseFn(ke,e,Te,Oe,Be,Ue=He=>He()){const He=Oe&&(Oe.enterCallbacks[Be]=Oe.enterCallbacks[Be]||[]);return()=>new Promise((We,Cn)=>{const An=Tn=>{Tn===!1?Cn(createRouterError(4,{from:Te,to:e})):Tn instanceof Error?Cn(Tn):isRouteLocation(Tn)?Cn(createRouterError(2,{from:e,to:Tn})):(He&&Oe.enterCallbacks[Be]===He&&typeof Tn=="function"&&He.push(Tn),We())},En=Ue(()=>ke.call(Oe&&Oe.instances[Be],e,Te,An));let Sn=Promise.resolve(En);ke.length<3&&(Sn=Sn.then(An)),Sn.catch(Tn=>Cn(Tn))})}function extractComponentsGuards(ke,e,Te,Oe,Be=Ue=>Ue()){const Ue=[];for(const He of ke)for(const We in He.components){let Cn=He.components[We];if(!(e!=="beforeRouteEnter"&&!He.instances[We]))if(isRouteComponent(Cn)){const En=(Cn.__vccOpts||Cn)[e];En&&Ue.push(guardToPromiseFn(En,Te,Oe,He,We,Be))}else{let An=Cn();Ue.push(()=>An.then(En=>{if(!En)throw new Error(`Couldn't resolve component "${We}" at "${He.path}"`);const Sn=isESModule(En)?En.default:En;He.mods[We]=En,He.components[We]=Sn;const Ln=(Sn.__vccOpts||Sn)[e];return Ln&&guardToPromiseFn(Ln,Te,Oe,He,We,Be)()}))}}return Ue}function useLink(ke){const e=inject(routerKey),Te=inject(routeLocationKey),Oe=computed(()=>{const Cn=unref(ke.to);return e.resolve(Cn)}),Be=computed(()=>{const{matched:Cn}=Oe.value,{length:An}=Cn,En=Cn[An-1],Sn=Te.matched;if(!En||!Sn.length)return-1;const Tn=Sn.findIndex(isSameRouteRecord.bind(null,En));if(Tn>-1)return Tn;const Ln=getOriginalPath(Cn[An-2]);return An>1&&getOriginalPath(En)===Ln&&Sn[Sn.length-1].path!==Ln?Sn.findIndex(isSameRouteRecord.bind(null,Cn[An-2])):Tn}),Ue=computed(()=>Be.value>-1&&includesParams(Te.params,Oe.value.params)),He=computed(()=>Be.value>-1&&Be.value===Te.matched.length-1&&isSameRouteLocationParams(Te.params,Oe.value.params));function We(Cn={}){if(guardEvent(Cn)){const An=e[unref(ke.replace)?"replace":"push"](unref(ke.to)).catch(noop$1);return ke.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>An),An}return Promise.resolve()}return{route:Oe,href:computed(()=>Oe.value.href),isActive:Ue,isExactActive:He,navigate:We}}function preferSingleVNode(ke){return ke.length===1?ke[0]:ke}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(ke,{slots:e}){const Te=reactive(useLink(ke)),{options:Oe}=inject(routerKey),Be=computed(()=>({[getLinkClass(ke.activeClass,Oe.linkActiveClass,"router-link-active")]:Te.isActive,[getLinkClass(ke.exactActiveClass,Oe.linkExactActiveClass,"router-link-exact-active")]:Te.isExactActive}));return()=>{const Ue=e.default&&preferSingleVNode(e.default(Te));return ke.custom?Ue:h$1("a",{"aria-current":Te.isExactActive?ke.ariaCurrentValue:null,href:Te.href,onClick:Te.navigate,class:Be.value},Ue)}}}),RouterLink=RouterLinkImpl;function guardEvent(ke){if(!(ke.metaKey||ke.altKey||ke.ctrlKey||ke.shiftKey)&&!ke.defaultPrevented&&!(ke.button!==void 0&&ke.button!==0)){if(ke.currentTarget&&ke.currentTarget.getAttribute){const e=ke.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return ke.preventDefault&&ke.preventDefault(),!0}}function includesParams(ke,e){for(const Te in e){const Oe=e[Te],Be=ke[Te];if(typeof Oe=="string"){if(Oe!==Be)return!1}else if(!isArray(Be)||Be.length!==Oe.length||Oe.some((Ue,He)=>Ue!==Be[He]))return!1}return!0}function getOriginalPath(ke){return ke?ke.aliasOf?ke.aliasOf.path:ke.path:""}const getLinkClass=(ke,e,Te)=>ke??e??Te,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(ke,{attrs:e,slots:Te}){const Oe=inject(routerViewLocationKey),Be=computed(()=>ke.route||Oe.value),Ue=inject(viewDepthKey,0),He=computed(()=>{let An=unref(Ue);const{matched:En}=Be.value;let Sn;for(;(Sn=En[An])&&!Sn.components;)An++;return An}),We=computed(()=>Be.value.matched[He.value]);provide(viewDepthKey,computed(()=>He.value+1)),provide(matchedRouteKey,We),provide(routerViewLocationKey,Be);const Cn=ref();return watch(()=>[Cn.value,We.value,ke.name],([An,En,Sn],[Tn,Ln,Bn])=>{En&&(En.instances[Sn]=An,Ln&&Ln!==En&&An&&An===Tn&&(En.leaveGuards.size||(En.leaveGuards=Ln.leaveGuards),En.updateGuards.size||(En.updateGuards=Ln.updateGuards))),An&&En&&(!Ln||!isSameRouteRecord(En,Ln)||!Tn)&&(En.enterCallbacks[Sn]||[]).forEach(ei=>ei(An))},{flush:"post"}),()=>{const An=Be.value,En=ke.name,Sn=We.value,Tn=Sn&&Sn.components[En];if(!Tn)return normalizeSlot(Te.default,{Component:Tn,route:An});const Ln=Sn.props[En],Bn=Ln?Ln===!0?An.params:typeof Ln=="function"?Ln(An):Ln:null,ni=h$1(Tn,assign({},Bn,e,{onVnodeUnmounted:ti=>{ti.component.isUnmounted&&(Sn.instances[En]=null)},ref:Cn}));return normalizeSlot(Te.default,{Component:ni,route:An})||ni}}});function normalizeSlot(ke,e){if(!ke)return null;const Te=ke(e);return Te.length===1?Te[0]:Te}const RouterView=RouterViewImpl;function createRouter(ke){const e=createRouterMatcher(ke.routes,ke),Te=ke.parseQuery||parseQuery,Oe=ke.stringifyQuery||stringifyQuery,Be=ke.history,Ue=useCallbacks(),He=useCallbacks(),We=useCallbacks(),Cn=shallowRef(START_LOCATION_NORMALIZED);let An=START_LOCATION_NORMALIZED;isBrowser&&ke.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const En=applyToParams.bind(null,hr=>""+hr),Sn=applyToParams.bind(null,encodeParam),Tn=applyToParams.bind(null,decode$2);function Ln(hr,mr){let _r,Ar;return isRouteName(hr)?(_r=e.getRecordMatcher(hr),Ar=mr):Ar=hr,e.addRoute(Ar,_r)}function Bn(hr){const mr=e.getRecordMatcher(hr);mr&&e.removeRoute(mr)}function ei(){return e.getRoutes().map(hr=>hr.record)}function ni(hr){return!!e.getRecordMatcher(hr)}function ti(hr,mr){if(mr=assign({},mr||Cn.value),typeof hr=="string"){const gr=parseURL(Te,hr,mr.path),lr=e.resolve({path:gr.path},mr),Ki=Be.createHref(gr.fullPath);return assign(gr,lr,{params:Tn(lr.params),hash:decode$2(gr.hash),redirectedFrom:void 0,href:Ki})}let _r;if(hr.path!=null)_r=assign({},hr,{path:parseURL(Te,hr.path,mr.path).path});else{const gr=assign({},hr.params);for(const lr in gr)gr[lr]==null&&delete gr[lr];_r=assign({},hr,{params:Sn(gr)}),mr.params=Sn(mr.params)}const Ar=e.resolve(_r,mr),Vr=hr.hash||"";Ar.params=En(Tn(Ar.params));const Gr=stringifyURL(Oe,assign({},hr,{hash:encodeHash(Vr),path:Ar.path})),Hi=Be.createHref(Gr);return assign({fullPath:Gr,hash:Vr,query:Oe===stringifyQuery?normalizeQuery(hr.query):hr.query||{}},Ar,{redirectedFrom:void 0,href:Hi})}function ri(hr){return typeof hr=="string"?parseURL(Te,hr,Cn.value.path):assign({},hr)}function oi(hr,mr){if(An!==hr)return createRouterError(8,{from:mr,to:hr})}function ai(hr){return vi(hr)}function ci(hr){return ai(assign(ri(hr),{replace:!0}))}function Pi(hr){const mr=hr.matched[hr.matched.length-1];if(mr&&mr.redirect){const{redirect:_r}=mr;let Ar=typeof _r=="function"?_r(hr):_r;return typeof Ar=="string"&&(Ar=Ar.includes("?")||Ar.includes("#")?Ar=ri(Ar):{path:Ar},Ar.params={}),assign({query:hr.query,hash:hr.hash,params:Ar.path!=null?{}:hr.params},Ar)}}function vi(hr,mr){const _r=An=ti(hr),Ar=Cn.value,Vr=hr.state,Gr=hr.force,Hi=hr.replace===!0,gr=Pi(_r);if(gr)return vi(assign(ri(gr),{state:typeof gr=="object"?assign({},Vr,gr.state):Vr,force:Gr,replace:Hi}),mr||_r);const lr=_r;lr.redirectedFrom=mr;let Ki;return!Gr&&isSameRouteLocation(Oe,Ar,_r)&&(Ki=createRouterError(16,{to:lr,from:Ar}),br(Ar,Ar,!0,!1)),(Ki?Promise.resolve(Ki):Fi(lr,Ar)).catch(Dr=>isNavigationFailure(Dr)?isNavigationFailure(Dr,2)?Dr:rr(Dr):ar(Dr,lr,Ar)).then(Dr=>{if(Dr){if(isNavigationFailure(Dr,2))return vi(assign({replace:Hi},ri(Dr.to),{state:typeof Dr.to=="object"?assign({},Vr,Dr.to.state):Vr,force:Gr}),mr||lr)}else Dr=ui(lr,Ar,!0,Hi,Vr);return fi(lr,Ar,Dr),Dr})}function pi(hr,mr){const _r=oi(hr,mr);return _r?Promise.reject(_r):Promise.resolve()}function Mi(hr){const mr=sr.values().next().value;return mr&&typeof mr.runWithContext=="function"?mr.runWithContext(hr):hr()}function Fi(hr,mr){let _r;const[Ar,Vr,Gr]=extractChangingRecords(hr,mr);_r=extractComponentsGuards(Ar.reverse(),"beforeRouteLeave",hr,mr);for(const gr of Ar)gr.leaveGuards.forEach(lr=>{_r.push(guardToPromiseFn(lr,hr,mr))});const Hi=pi.bind(null,hr,mr);return _r.push(Hi),vr(_r).then(()=>{_r=[];for(const gr of Ue.list())_r.push(guardToPromiseFn(gr,hr,mr));return _r.push(Hi),vr(_r)}).then(()=>{_r=extractComponentsGuards(Vr,"beforeRouteUpdate",hr,mr);for(const gr of Vr)gr.updateGuards.forEach(lr=>{_r.push(guardToPromiseFn(lr,hr,mr))});return _r.push(Hi),vr(_r)}).then(()=>{_r=[];for(const gr of Gr)if(gr.beforeEnter)if(isArray(gr.beforeEnter))for(const lr of gr.beforeEnter)_r.push(guardToPromiseFn(lr,hr,mr));else _r.push(guardToPromiseFn(gr.beforeEnter,hr,mr));return _r.push(Hi),vr(_r)}).then(()=>(hr.matched.forEach(gr=>gr.enterCallbacks={}),_r=extractComponentsGuards(Gr,"beforeRouteEnter",hr,mr,Mi),_r.push(Hi),vr(_r))).then(()=>{_r=[];for(const gr of He.list())_r.push(guardToPromiseFn(gr,hr,mr));return _r.push(Hi),vr(_r)}).catch(gr=>isNavigationFailure(gr,8)?gr:Promise.reject(gr))}function fi(hr,mr,_r){We.list().forEach(Ar=>Mi(()=>Ar(hr,mr,_r)))}function ui(hr,mr,_r,Ar,Vr){const Gr=oi(hr,mr);if(Gr)return Gr;const Hi=mr===START_LOCATION_NORMALIZED,gr=isBrowser?history.state:{};_r&&(Ar||Hi?Be.replace(hr.fullPath,assign({scroll:Hi&&gr&&gr.scroll},Vr)):Be.push(hr.fullPath,Vr)),Cn.value=hr,br(hr,mr,_r,Hi),rr()}let Oi;function Ni(){Oi||(Oi=Be.listen((hr,mr,_r)=>{if(!dr.listening)return;const Ar=ti(hr),Vr=Pi(Ar);if(Vr){vi(assign(Vr,{replace:!0,force:!0}),Ar).catch(noop$1);return}An=Ar;const Gr=Cn.value;isBrowser&&saveScrollPosition(getScrollKey(Gr.fullPath,_r.delta),computeScrollPosition()),Fi(Ar,Gr).catch(Hi=>isNavigationFailure(Hi,12)?Hi:isNavigationFailure(Hi,2)?(vi(assign(ri(Hi.to),{force:!0}),Ar).then(gr=>{isNavigationFailure(gr,20)&&!_r.delta&&_r.type===NavigationType.pop&&Be.go(-1,!1)}).catch(noop$1),Promise.reject()):(_r.delta&&Be.go(-_r.delta,!1),ar(Hi,Ar,Gr))).then(Hi=>{Hi=Hi||ui(Ar,Gr,!1),Hi&&(_r.delta&&!isNavigationFailure(Hi,8)?Be.go(-_r.delta,!1):_r.type===NavigationType.pop&&isNavigationFailure(Hi,20)&&Be.go(-1,!1)),fi(Ar,Gr,Hi)}).catch(noop$1)}))}let nr=useCallbacks(),er=useCallbacks(),cr;function ar(hr,mr,_r){rr(hr);const Ar=er.list();return Ar.length?Ar.forEach(Vr=>Vr(hr,mr,_r)):console.error(hr),Promise.reject(hr)}function pr(){return cr&&Cn.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((hr,mr)=>{nr.add([hr,mr])})}function rr(hr){return cr||(cr=!hr,Ni(),nr.list().forEach(([mr,_r])=>hr?_r(hr):mr()),nr.reset()),hr}function br(hr,mr,_r,Ar){const{scrollBehavior:Vr}=ke;if(!isBrowser||!Vr)return Promise.resolve();const Gr=!_r&&getSavedScrollPosition(getScrollKey(hr.fullPath,0))||(Ar||!_r)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Vr(hr,mr,Gr)).then(Hi=>Hi&&scrollToPosition(Hi)).catch(Hi=>ar(Hi,hr,mr))}const Li=hr=>Be.go(hr);let ur;const sr=new Set,dr={currentRoute:Cn,listening:!0,addRoute:Ln,removeRoute:Bn,clearRoutes:e.clearRoutes,hasRoute:ni,getRoutes:ei,resolve:ti,options:ke,push:ai,replace:ci,go:Li,back:()=>Li(-1),forward:()=>Li(1),beforeEach:Ue.add,beforeResolve:He.add,afterEach:We.add,onError:er.add,isReady:pr,install(hr){const mr=this;hr.component("RouterLink",RouterLink),hr.component("RouterView",RouterView),hr.config.globalProperties.$router=mr,Object.defineProperty(hr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Cn)}),isBrowser&&!ur&&Cn.value===START_LOCATION_NORMALIZED&&(ur=!0,ai(Be.location).catch(Vr=>{}));const _r={};for(const Vr in START_LOCATION_NORMALIZED)Object.defineProperty(_r,Vr,{get:()=>Cn.value[Vr],enumerable:!0});hr.provide(routerKey,mr),hr.provide(routeLocationKey,shallowReactive(_r)),hr.provide(routerViewLocationKey,Cn);const Ar=hr.unmount;sr.add(hr),hr.unmount=function(){sr.delete(hr),sr.size<1&&(An=START_LOCATION_NORMALIZED,Oi&&Oi(),Oi=null,Cn.value=START_LOCATION_NORMALIZED,ur=!1,cr=!1),Ar()}}};function vr(hr){return hr.reduce((mr,_r)=>mr.then(()=>Mi(_r)),Promise.resolve())}return dr}function extractChangingRecords(ke,e){const Te=[],Oe=[],Be=[],Ue=Math.max(e.matched.length,ke.matched.length);for(let He=0;He<Ue;He++){const We=e.matched[He];We&&(ke.matched.find(An=>isSameRouteRecord(An,We))?Oe.push(We):Te.push(We));const Cn=ke.matched[He];Cn&&(e.matched.find(An=>isSameRouteRecord(An,Cn))||Be.push(Cn))}return[Te,Oe,Be]}function useRouter(){return inject(routerKey)}function useRoute(ke){return inject(routeLocationKey)}function tryOnScopeDispose(ke){return getCurrentScope()?(onScopeDispose(ke),!0):!1}function toValue(ke){return typeof ke=="function"?ke():unref(ke)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$2=Object.prototype.toString,isObject=ke=>toString$2.call(ke)==="[object Object]",noop=()=>{};function createFilterWrapper(ke,e){function Te(...Oe){return new Promise((Be,Ue)=>{Promise.resolve(ke(()=>e.apply(this,Oe),{fn:e,thisArg:this,args:Oe})).then(Be).catch(Ue)})}return Te}const bypassFilter=ke=>ke();function debounceFilter(ke,e={}){let Te,Oe,Be=noop;const Ue=We=>{clearTimeout(We),Be(),Be=noop};return We=>{const Cn=toValue(ke),An=toValue(e.maxWait);return Te&&Ue(Te),Cn<=0||An!==void 0&&An<=0?(Oe&&(Ue(Oe),Oe=null),Promise.resolve(We())):new Promise((En,Sn)=>{Be=e.rejectOnCancel?Sn:En,An&&!Oe&&(Oe=setTimeout(()=>{Te&&Ue(Te),Oe=null,En(We())},An)),Te=setTimeout(()=>{Oe&&Ue(Oe),Oe=null,En(We())},Cn)})}}function pausableFilter(ke=bypassFilter){const e=ref(!0);function Te(){e.value=!1}function Oe(){e.value=!0}const Be=(...Ue)=>{e.value&&ke(...Ue)};return{isActive:readonly(e),pause:Te,resume:Oe,eventFilter:Be}}function createSingletonPromise(ke){let e;function Te(){return e||(e=ke()),e}return Te.reset=async()=>{const Oe=e;e=void 0,Oe&&await Oe},Te}function getLifeCycleTarget(ke){return getCurrentInstance()}function useDebounceFn(ke,e=200,Te={}){return createFilterWrapper(debounceFilter(e,Te),ke)}function watchWithFilter(ke,e,Te={}){const{eventFilter:Oe=bypassFilter,...Be}=Te;return watch(ke,createFilterWrapper(Oe,e),Be)}function watchPausable(ke,e,Te={}){const{eventFilter:Oe,...Be}=Te,{eventFilter:Ue,pause:He,resume:We,isActive:Cn}=pausableFilter(Oe);return{stop:watchWithFilter(ke,e,{...Be,eventFilter:Ue}),pause:He,resume:We,isActive:Cn}}function tryOnMounted(ke,e=!0,Te){getLifeCycleTarget()?onMounted(ke,Te):e?ke():nextTick(ke)}function useTimeoutFn(ke,e,Te={}){const{immediate:Oe=!0}=Te,Be=ref(!1);let Ue=null;function He(){Ue&&(clearTimeout(Ue),Ue=null)}function We(){Be.value=!1,He()}function Cn(...An){He(),Be.value=!0,Ue=setTimeout(()=>{Be.value=!1,Ue=null,ke(...An)},toValue(e))}return Oe&&(Be.value=!0,isClient&&Cn()),tryOnScopeDispose(We),{isPending:readonly(Be),start:Cn,stop:We}}function unrefElement(ke){var e;const Te=toValue(ke);return(e=Te==null?void 0:Te.$el)!=null?e:Te}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...ke){let e,Te,Oe,Be;if(typeof ke[0]=="string"||Array.isArray(ke[0])?([Te,Oe,Be]=ke,e=defaultWindow):[e,Te,Oe,Be]=ke,!e)return noop;Array.isArray(Te)||(Te=[Te]),Array.isArray(Oe)||(Oe=[Oe]);const Ue=[],He=()=>{Ue.forEach(En=>En()),Ue.length=0},We=(En,Sn,Tn,Ln)=>(En.addEventListener(Sn,Tn,Ln),()=>En.removeEventListener(Sn,Tn,Ln)),Cn=watch(()=>[unrefElement(e),toValue(Be)],([En,Sn])=>{if(He(),!En)return;const Tn=isObject(Sn)?{...Sn}:Sn;Ue.push(...Te.flatMap(Ln=>Oe.map(Bn=>We(En,Ln,Bn,Tn))))},{immediate:!0,flush:"post"}),An=()=>{Cn(),He()};return tryOnScopeDispose(An),An}function useMounted(){const ke=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{ke.value=!0},e),ke}function useSupported(ke){const e=useMounted();return computed(()=>(e.value,!!ke()))}function useMediaQuery(ke,e={}){const{window:Te=defaultWindow}=e,Oe=useSupported(()=>Te&&"matchMedia"in Te&&typeof Te.matchMedia=="function");let Be;const Ue=ref(!1),He=An=>{Ue.value=An.matches},We=()=>{Be&&("removeEventListener"in Be?Be.removeEventListener("change",He):Be.removeListener(He))},Cn=watchEffect(()=>{Oe.value&&(We(),Be=Te.matchMedia(toValue(ke)),"addEventListener"in Be?Be.addEventListener("change",He):Be.addListener(He),Ue.value=Be.matches)});return tryOnScopeDispose(()=>{Cn(),We(),Be=void 0}),Ue}function usePermission(ke,e={}){const{controls:Te=!1,navigator:Oe=defaultNavigator}=e,Be=useSupported(()=>Oe&&"permissions"in Oe);let Ue;const He=typeof ke=="string"?{name:ke}:ke,We=ref(),Cn=()=>{Ue&&(We.value=Ue.state)},An=createSingletonPromise(async()=>{if(Be.value){if(!Ue)try{Ue=await Oe.permissions.query(He),useEventListener(Ue,"change",Cn),Cn()}catch{We.value="prompt"}return Ue}});return An(),Te?{state:We,isSupported:Be,query:An}:We}function useClipboard(ke={}){const{navigator:e=defaultNavigator,read:Te=!1,source:Oe,copiedDuring:Be=1500,legacy:Ue=!1}=ke,He=useSupported(()=>e&&"clipboard"in e),We=usePermission("clipboard-read"),Cn=usePermission("clipboard-write"),An=computed(()=>He.value||Ue),En=ref(""),Sn=ref(!1),Tn=useTimeoutFn(()=>Sn.value=!1,Be);function Ln(){He.value&&ti(We.value)?e.clipboard.readText().then(ri=>{En.value=ri}):En.value=ni()}An.value&&Te&&useEventListener(["copy","cut"],Ln);async function Bn(ri=toValue(Oe)){An.value&&ri!=null&&(He.value&&ti(Cn.value)?await e.clipboard.writeText(ri):ei(ri),En.value=ri,Sn.value=!0,Tn.start())}function ei(ri){const oi=document.createElement("textarea");oi.value=ri??"",oi.style.position="absolute",oi.style.opacity="0",document.body.appendChild(oi),oi.select(),document.execCommand("copy"),oi.remove()}function ni(){var ri,oi,ai;return(ai=(oi=(ri=document==null?void 0:document.getSelection)==null?void 0:ri.call(document))==null?void 0:oi.toString())!=null?ai:""}function ti(ri){return ri==="granted"||ri==="prompt"}return{isSupported:An,text:En,copied:Sn,copy:Bn}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(ke,e){return handlers[ke]||e}function guessSerializerType(ke){return ke==null?"any":ke instanceof Set?"set":ke instanceof Map?"map":ke instanceof Date?"date":typeof ke=="boolean"?"boolean":typeof ke=="string"?"string":typeof ke=="object"?"object":Number.isNaN(ke)?"any":"number"}const StorageSerializers={boolean:{read:ke=>ke==="true",write:ke=>String(ke)},object:{read:ke=>JSON.parse(ke),write:ke=>JSON.stringify(ke)},number:{read:ke=>Number.parseFloat(ke),write:ke=>String(ke)},any:{read:ke=>ke,write:ke=>String(ke)},string:{read:ke=>ke,write:ke=>String(ke)},map:{read:ke=>new Map(JSON.parse(ke)),write:ke=>JSON.stringify(Array.from(ke.entries()))},set:{read:ke=>new Set(JSON.parse(ke)),write:ke=>JSON.stringify(Array.from(ke))},date:{read:ke=>new Date(ke),write:ke=>ke.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(ke,e,Te,Oe={}){var Be;const{flush:Ue="pre",deep:He=!0,listenToStorageChanges:We=!0,writeDefaults:Cn=!0,mergeDefaults:An=!1,shallow:En,window:Sn=defaultWindow,eventFilter:Tn,onError:Ln=Fi=>{console.error(Fi)},initOnMounted:Bn}=Oe,ei=(En?shallowRef:ref)(typeof e=="function"?e():e);if(!Te)try{Te=getSSRHandler("getDefaultStorage",()=>{var Fi;return(Fi=defaultWindow)==null?void 0:Fi.localStorage})()}catch(Fi){Ln(Fi)}if(!Te)return ei;const ni=toValue(e),ti=guessSerializerType(ni),ri=(Be=Oe.serializer)!=null?Be:StorageSerializers[ti],{pause:oi,resume:ai}=watchPausable(ei,()=>Pi(ei.value),{flush:Ue,deep:He,eventFilter:Tn});Sn&&We&&tryOnMounted(()=>{useEventListener(Sn,"storage",pi),useEventListener(Sn,customStorageEventName,Mi),Bn&&pi()}),Bn||pi();function ci(Fi,fi){Sn&&Sn.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:ke,oldValue:Fi,newValue:fi,storageArea:Te}}))}function Pi(Fi){try{const fi=Te.getItem(ke);if(Fi==null)ci(fi,null),Te.removeItem(ke);else{const ui=ri.write(Fi);fi!==ui&&(Te.setItem(ke,ui),ci(fi,ui))}}catch(fi){Ln(fi)}}function vi(Fi){const fi=Fi?Fi.newValue:Te.getItem(ke);if(fi==null)return Cn&&ni!=null&&Te.setItem(ke,ri.write(ni)),ni;if(!Fi&&An){const ui=ri.read(fi);return typeof An=="function"?An(ui,ni):ti==="object"&&!Array.isArray(ui)?{...ni,...ui}:ui}else return typeof fi!="string"?fi:ri.read(fi)}function pi(Fi){if(!(Fi&&Fi.storageArea!==Te)){if(Fi&&Fi.key==null){ei.value=ni;return}if(!(Fi&&Fi.key!==ke)){oi();try{(Fi==null?void 0:Fi.newValue)!==ri.write(ei.value)&&(ei.value=vi(Fi))}catch(fi){Ln(fi)}finally{Fi?nextTick(ai):ai()}}}}function Mi(Fi){pi(Fi.detail)}return ei}function useResizeObserver(ke,e,Te={}){const{window:Oe=defaultWindow,...Be}=Te;let Ue;const He=useSupported(()=>Oe&&"ResizeObserver"in Oe),We=()=>{Ue&&(Ue.disconnect(),Ue=void 0)},Cn=computed(()=>Array.isArray(ke)?ke.map(Sn=>unrefElement(Sn)):[unrefElement(ke)]),An=watch(Cn,Sn=>{if(We(),He.value&&Oe){Ue=new ResizeObserver(e);for(const Tn of Sn)Tn&&Ue.observe(Tn,Be)}},{immediate:!0,flush:"post"}),En=()=>{We(),An()};return tryOnScopeDispose(En),{isSupported:He,stop:En}}function useElementSize(ke,e={width:0,height:0},Te={}){const{window:Oe=defaultWindow,box:Be="content-box"}=Te,Ue=computed(()=>{var Sn,Tn;return(Tn=(Sn=unrefElement(ke))==null?void 0:Sn.namespaceURI)==null?void 0:Tn.includes("svg")}),He=ref(e.width),We=ref(e.height),{stop:Cn}=useResizeObserver(ke,([Sn])=>{const Tn=Be==="border-box"?Sn.borderBoxSize:Be==="content-box"?Sn.contentBoxSize:Sn.devicePixelContentBoxSize;if(Oe&&Ue.value){const Ln=unrefElement(ke);if(Ln){const Bn=Ln.getBoundingClientRect();He.value=Bn.width,We.value=Bn.height}}else if(Tn){const Ln=Array.isArray(Tn)?Tn:[Tn];He.value=Ln.reduce((Bn,{inlineSize:ei})=>Bn+ei,0),We.value=Ln.reduce((Bn,{blockSize:ei})=>Bn+ei,0)}else He.value=Sn.contentRect.width,We.value=Sn.contentRect.height},Te);tryOnMounted(()=>{const Sn=unrefElement(ke);Sn&&(He.value="offsetWidth"in Sn?Sn.offsetWidth:e.width,We.value="offsetHeight"in Sn?Sn.offsetHeight:e.height)});const An=watch(()=>unrefElement(ke),Sn=>{He.value=Sn?e.width:0,We.value=Sn?e.height:0});function En(){Cn(),An()}return{width:He,height:We,stop:En}}function useUrlSearchParams(ke="history",e={}){const{initialValue:Te={},removeNullishValues:Oe=!0,removeFalsyValues:Be=!1,write:Ue=!0,window:He=defaultWindow}=e;if(!He)return reactive(Te);const We=reactive({});function Cn(){if(ke==="history")return He.location.search||"";if(ke==="hash"){const ti=He.location.hash||"",ri=ti.indexOf("?");return ri>0?ti.slice(ri):""}else return(He.location.hash||"").replace(/^#/,"")}function An(ti){const ri=ti.toString();if(ke==="history")return`${ri?`?${ri}`:""}${He.location.hash||""}`;if(ke==="hash-params")return`${He.location.search||""}${ri?`#${ri}`:""}`;const oi=He.location.hash||"#",ai=oi.indexOf("?");return ai>0?`${oi.slice(0,ai)}${ri?`?${ri}`:""}`:`${oi}${ri?`?${ri}`:""}`}function En(){return new URLSearchParams(Cn())}function Sn(ti){const ri=new Set(Object.keys(We));for(const oi of ti.keys()){const ai=ti.getAll(oi);We[oi]=ai.length>1?ai:ti.get(oi)||"",ri.delete(oi)}Array.from(ri).forEach(oi=>delete We[oi])}const{pause:Tn,resume:Ln}=watchPausable(We,()=>{const ti=new URLSearchParams("");Object.keys(We).forEach(ri=>{const oi=We[ri];Array.isArray(oi)?oi.forEach(ai=>ti.append(ri,ai)):Oe&&oi==null||Be&&!oi?ti.delete(ri):ti.set(ri,oi)}),Bn(ti)},{deep:!0});function Bn(ti,ri){Tn(),ri&&Sn(ti),He.history.replaceState(He.history.state,He.document.title,He.location.pathname+An(ti)),Ln()}function ei(){Ue&&Bn(En(),!0)}useEventListener(He,"popstate",ei,!1),ke!=="history"&&useEventListener(He,"hashchange",ei,!1);const ni=En();return ni.keys().next().value?Sn(ni):Object.assign(We,Te),We}function useMatchMedia(ke){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[ke]!==void 0){const Te="(max-width: "+e[ke]+")";return useMediaQuery(Te)}}function useMatchMediaHeight(ke){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const Te="(max-height: "+e[ke]+")";return useMediaQuery(Te)}}function useBaseUrl(){return"https://cartes.gouv.fr"}const headerParams=ref({});function useHeaderParams(){return headerParams.value={serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et donnes du territoire",logoText:["RPUBLIQUE","FRANAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")},headerParams}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est dvelopp par lInstitut national de linformation gographique et forestire (IGN) et ses partenaires. Le site sappuie sur la Goplateforme, la nouvelle infrastructure publique, ouverte et collaborative des donnes gographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministre de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministre de la Transition cologique et de la Cohsion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de linformation golocalise"}]},mandatoryLinks:[{label:"Accessibilit : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions lgales",href:useBaseUrl()+"/mentions-legales"},{label:"Donnes personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$v={},_sfc_main$Y=Object.assign(__default__$v,{__name:"ModalConsent",setup(ke,{expose:e}){const Te=useRouter(),Oe=useEulerian();var Be=Oe.hasKey();const Ue=ref(!Be),He="Panneau de gestion des cookies",We="md",Cn=useBaseUrl()+"/donnees-personnelles",An=()=>{Ue.value=!0,Oe.pause()},En=()=>{Ue.value=!1,Te.push({path:"/"}),Oe.resume()};e({openModalConsent:An,onModalConsentClose:En});const Sn=()=>{Oe.start(),En()},Tn=()=>{Oe.stop(),En()};return(Ln,Bn)=>{const ei=$s,ni=Vt$1;return openBlock(),createBlock(ni,{opened:unref(Ue),title:He,size:We,onClose:En},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(ei,{onAcceptAll:Bn[0]||(Bn[0]=ti=>Sn()),onRefuseAll:Bn[1]||(Bn[1]=ti=>Tn())},{default:withCtx(()=>[Bn[2]||(Bn[2]=createTextVNode(" Prfrences pour tous les services. ")),createBaseVNode("a",{href:Cn},"Donnes personnelles et cookies")]),_:1})]),Bn[3]||(Bn[3]=createBaseVNode("hr",null,null,-1)),Bn[4]||(Bn[4]=createBaseVNode("div",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez  l'utilisation des cookies pour nous aider  amliorer notre site web en collectant et en rapportant des informations sur votre utilisation grce  Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'tes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre exprience de navigation ne sera pas affecte. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title$1="Paramtres d'affichage",size="md",legend="Choisissez un thme pour personnaliser l'apparence du site.",_sfc_main$X={__name:"ModalTheme",setup(ke,{expose:e}){const Te=useEulerian(),{setScheme:Oe,theme:Be,scheme:Ue}=ef(),He=ref(Ue.value);watch(Ue,()=>{He.value=Ue.value});const We=[{label:"Thme clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thme sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Systme",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramtres sytme.",img:LogoSystem}],Cn=()=>{Oe(He.value)},An=ref(!1),En=()=>{An.value=!0,Te.pause()},Sn=()=>{An.value=!1,Te.resume()};return e({openModalTheme:En,onModalThemeClose:Sn}),(Tn,Ln)=>{const Bn=Bi,ei=Vt$1;return openBlock(),createBlock(ei,{ref:"modal",opened:unref(An),title:title$1,size,onClose:Sn},{default:withCtx(()=>[createVNode(Bn,{modelValue:unref(He),"onUpdate:modelValue":[Ln[0]||(Ln[0]=ni=>isRef(He)?He.value=ni:null),Cn],legend,name:"fr-radios-theme",options:We},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=ef(),NAMESPACE$1="cartes.gouv.fr",ns$1=ke=>NAMESPACE$1+"."+ke,VERSION="6",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var ke=useStorage(ns$1("version"),VERSION);ke.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),ke.value=VERSION),watch(ke,()=>{localStorage.setItem(ns$1("version"),ke.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),t={auth:{title:"Authentification",not_authentificated:"Vous devez vous authentifier",failed:ke=>`Exception sur l'authentication : ${ke}`},bookmark:{title:"Espace personnel",failed:ke=>`Exception sur l'espace personnel : ${ke}`,failed_add_data:ke=>`Erreur sur l'ajout de la donne : ${ke}`,success_add_data:ke=>`Ajout sur la carte de la donne de type ${ke}`,failed_type_unknow:ke=>`Impossible de determiner le type de donnes : ${ke}`,failed_not_yet_implemented:ke=>`Pas encore implement : ${ke} !`},drawing:{title:"Croquis",save_success:"Le croquis est enregistr dans l'espace personnel",save_failed:"Une erreur est survenue sur l'enregistrement du croquis"},layerswitcher:{title:"Gestionnaire de couche",add_success:"La couche est ajoute  la carte",add_failed:"Une erreur est survenue dans l'ajout de la couche",remove_success:"La couche est supprim de la carte",remove_failed:"Une erreur est survenue dans la suppression de la couche",failed_not_yet_implemented:"L'dition de ce type de donnes n'est pas encore gre !"},ol:{title:"OpenLayers",failed:ke=>`Exception sur OpenLayers : ${ke}`,failed_format:ke=>`Le format n'est pas reconnu : ${ke}`,failed_source:ke=>`Exception sur l'initialisation de la source de type ${ke} !`,failed_layer:ke=>`Exception sur l'initialisation de la couche de type ${ke} !`,failed_mapbox:ke=>`Exception de la couche MapBox : ${ke} !`}},_hoisted_1$k={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$W=defineComponent({__name:"Main",setup(ke){useAppStore();const e=useRoute(),Te=useRouter();dist.useLogger(),useMatchMedia("LG");const Oe=useHeaderParams(),Be=useFooterParams(),Ue=ref(null),He=computed(()=>[{label:"Paramtres daffichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:Ue.value?Ue.value.openModalTheme:null}]),We=ref(null),Cn=computed(()=>Be.mandatoryLinks.map(Bn=>(Bn.label==="Gestion des cookies"&&(delete Bn.href,Bn.onclick=We.value?We.value.openModalConsent:null,Bn.to="/"),Bn)));var An=inject("services");An.isAccessValided().then(Bn=>{if(Bn==="login"){var ei=An.user.last_name,ni=An.user.first_name;Oe.value.quickLinks.forEach(ti=>{ti.label==="..."&&(ti.label=`${ni} ${ei}`)})}Bn!=="no-auth"&&Te.replace({query:void 0})}).catch(Bn=>{console.error(Bn),push$1.error({title:t.auth.title,message:t.auth.failed(Bn.message||Bn)})}).finally(()=>{});const En=computed(()=>Oe.value.quickLinks.filter(Bn=>{if(An.authenticated&&Bn.label==="...")if(Object.keys(An.user).length){var ei=An.user.last_name,ni=An.user.first_name;Bn.label=`${ni} ${ei}`}else return!1;if(!Object.keys(Bn).includes("authenticated")||Bn.authenticated===An.authenticated)return!0})),Sn=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(e.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:"/",text:"Cartes"},{to:`${useBaseUrl()}/actualites`,text:"Actualits"},{title:"Assistance",get active(){return["Questions frquentes","Nous crire","Niveau de service"].includes(e.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions frquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous crire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:" propos"}],Tn={warning:markRaw(NotificationWarning),success:markRaw(NotificationSuccess),info:markRaw(NotificationInfo),error:markRaw(NotificationError)},Ln={...lightTheme,"--nv-radius":"0","--nv-width":"350px","--nv-border-width":"1px","--nv-icon-size":"30px","--nv-success-accent":"#18753c","--nv-success-border":"#18753c","--nv-error-accent":"#ce0500","--nv-error-border":"#ce0500","--nv-warning-accent":"#b34000","--nv-warning-border":"#b34000","--nv-info-accent":"#0063cb","--nv-info-border":"#0063cb"};return(Bn,ei)=>{const ni=Yo,ti=hl,ri=resolveComponent("router-view"),oi=In$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(ti,{modelValue:unref(Oe).serviceTitle,"onUpdate:modelValue":ei[0]||(ei[0]=ai=>unref(Oe).serviceTitle=ai),"service-title":unref(Oe).serviceTitle,"show-beta":!0,"service-description":unref(Oe).serviceDescription,"logo-text":unref(Oe).logoText,"quick-links":unref(En)},{mainnav:withCtx(()=>[createVNode(ni,{"nav-items":Sn})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createVNode(unref(_sfc_main$e$1),null,{default:withCtx(ai=>[createVNode(unref(_sfc_main$1$1),{item:ai,icons:Tn,theme:Ln},null,8,["item"])]),_:1}),createBaseVNode("div",null,[createVNode(ri)]),ei[1]||(ei[1]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),ei[2]||(ei[2]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(oi,{"before-mandatory-links":unref(Be).beforeMandatoryLinks,"after-mandatory-links":unref(He),"logo-text":unref(Be).logoText,"desc-text":unref(Be).descText,"home-link":unref(Be).homeLink,partners:unref(Be).partners,"licence-text":unref(Be).licenceText,"licence-to":unref(Be).licenceTo,"licence-name":unref(Be).licenceName,"licence-link-props":unref(Be).licenceLinkProps,"ecosystem-links":unref(Be).ecosystemLinks,"mandatory-links":unref(Cn)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$k,[createVNode(_sfc_main$X,{ref_key:"refModalTheme",ref:Ue},null,512),createVNode(_sfc_main$Y,{ref_key:"refModalConsent",ref:We},null,512)])],64)}}}),_sfc_main$V=defineComponent({__name:"App",setup(ke){return(e,Te)=>(openBlock(),createBlock(_sfc_main$W))}}),version$2="1.0.0-beta.2-358",Pkg$1={version:version$2},MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ObjectEventType={PROPERTYCHANGE:"propertychange"},EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(ke,e,Te){let Oe,Be;Te=Te||ascending;let Ue=0,He=ke.length,We=!1;for(;Ue<He;)Oe=Ue+(He-Ue>>1),Be=+Te(ke[Oe],e),Be<0?Ue=Oe+1:(He=Oe,We=!Be);return We?Ue:~Ue}function ascending(ke,e){return ke>e?1:ke<e?-1:0}function descending(ke,e){return ke<e?1:ke>e?-1:0}function linearFindNearest(ke,e,Te){if(ke[0]<=e)return 0;const Oe=ke.length;if(e<=ke[Oe-1])return Oe-1;if(typeof Te=="function"){for(let Be=1;Be<Oe;++Be){const Ue=ke[Be];if(Ue===e)return Be;if(Ue<e)return Te(e,ke[Be-1],Ue)>0?Be-1:Be}return Oe-1}if(Te>0){for(let Be=1;Be<Oe;++Be)if(ke[Be]<e)return Be-1;return Oe-1}if(Te<0){for(let Be=1;Be<Oe;++Be)if(ke[Be]<=e)return Be;return Oe-1}for(let Be=1;Be<Oe;++Be){if(ke[Be]==e)return Be;if(ke[Be]<e)return ke[Be-1]-e<e-ke[Be]?Be-1:Be}return Oe-1}function reverseSubArray(ke,e,Te){for(;e<Te;){const Oe=ke[e];ke[e]=ke[Te],ke[Te]=Oe,++e,--Te}}function extend$4(ke,e){const Te=Array.isArray(e)?e:[e],Oe=Te.length;for(let Be=0;Be<Oe;Be++)ke[ke.length]=Te[Be]}function equals$2(ke,e){const Te=ke.length;if(Te!==e.length)return!1;for(let Oe=0;Oe<Te;Oe++)if(ke[Oe]!==e[Oe])return!1;return!0}function isSorted(ke,e,Te){const Oe=e||ascending;return ke.every(function(Be,Ue){if(Ue===0)return!0;const He=Oe(ke[Ue-1],Be);return!(He>0||He===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(ke){let e,Te,Oe;return function(){const Be=Array.prototype.slice.call(arguments);return(!Te||this!==Oe||!equals$2(Be,Te))&&(Oe=this,Te=Be,e=ke.apply(this,arguments)),e}}function toPromise(ke){function e(){let Te;try{Te=ke()}catch(Oe){return Promise.reject(Oe)}return Te instanceof Promise?Te:Promise.resolve(Te)}return e()}function clear$1(ke){for(const e in ke)delete ke[e]}function isEmpty$1(ke){let e;for(e in ke)return!1;return!e}class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,Te){if(!e||!Te)return;const Oe=this.listeners_||(this.listeners_={}),Be=Oe[e]||(Oe[e]=[]);Be.includes(Te)||Be.push(Te)}dispatchEvent(e){const Te=typeof e=="string",Oe=Te?e:e.type,Be=this.listeners_&&this.listeners_[Oe];if(!Be)return;const Ue=Te?new BaseEvent(e):e;Ue.target||(Ue.target=this.eventTarget_||this);const He=this.dispatching_||(this.dispatching_={}),We=this.pendingRemovals_||(this.pendingRemovals_={});Oe in He||(He[Oe]=0,We[Oe]=0),++He[Oe];let Cn;for(let An=0,En=Be.length;An<En;++An)if("handleEvent"in Be[An]?Cn=Be[An].handleEvent(Ue):Cn=Be[An].call(this,Ue),Cn===!1||Ue.propagationStopped){Cn=!1;break}if(--He[Oe]===0){let An=We[Oe];for(delete We[Oe];An--;)this.removeEventListener(Oe,VOID);delete He[Oe]}return Cn}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,Te){if(!this.listeners_)return;const Oe=this.listeners_[e];if(!Oe)return;const Be=Oe.indexOf(Te);Be!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(Oe[Be]=VOID,++this.pendingRemovals_[e]):(Oe.splice(Be,1),Oe.length===0&&delete this.listeners_[e]))}}function listen(ke,e,Te,Oe,Be){if(Be){const He=Te;Te=function(We){return ke.removeEventListener(e,Te),He.call(Oe??this,We)}}else Oe&&Oe!==ke&&(Te=Te.bind(Oe));const Ue={target:ke,type:e,listener:Te};return ke.addEventListener(e,Te),Ue}function listenOnce(ke,e,Te,Oe){return listen(ke,e,Te,Oe,!0)}function unlistenByKey(ke){ke&&ke.target&&(ke.target.removeEventListener(ke.type,ke.listener),clear$1(ke))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,Te){if(Array.isArray(e)){const Oe=e.length,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue)Be[Ue]=listen(this,e[Ue],Te);return Be}return listen(this,e,Te)}onceInternal(e,Te){let Oe;if(Array.isArray(e)){const Be=e.length;Oe=new Array(Be);for(let Ue=0;Ue<Be;++Ue)Oe[Ue]=listenOnce(this,e[Ue],Te)}else Oe=listenOnce(this,e,Te);return Te.ol_key=Oe,Oe}unInternal(e,Te){const Oe=Te.ol_key;if(Oe)unByKey(Oe);else if(Array.isArray(e))for(let Be=0,Ue=e.length;Be<Ue;++Be)this.removeEventListener(e[Be],Te);else this.removeEventListener(e,Te)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(ke){if(Array.isArray(ke))for(let e=0,Te=ke.length;e<Te;++e)unlistenByKey(ke[e]);else unlistenByKey(ke)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(ke){return ke.ol_uid||(ke.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.key=Te,this.oldValue=Oe}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let Te;return this.values_&&this.values_.hasOwnProperty(e)&&(Te=this.values_[e]),Te}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,Te){let Oe;Oe=`change:${e}`,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,Te)),Oe=ObjectEventType.PROPERTYCHANGE,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,Te))}addChangeListener(e,Te){this.addEventListener(`change:${e}`,Te)}removeChangeListener(e,Te){this.removeEventListener(`change:${e}`,Te)}set(e,Te,Oe){const Be=this.values_||(this.values_={});if(Oe)Be[e]=Te;else{const Ue=Be[e];Be[e]=Te,Ue!==Te&&this.notify(e,Ue)}}setProperties(e,Te){for(const Oe in e)this.set(Oe,e[Oe],Te)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,Te){if(this.values_&&e in this.values_){const Oe=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),Te||this.notify(e,Oe)}}}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(ke){const e=ke.match(fontRegEx);if(!e)return null;const Te={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let Oe=0,Be=fontRegExMatchIndex.length;Oe<Be;++Oe){const Ue=e[Oe+1];Ue!==void 0&&(Te[fontRegExMatchIndex[Oe]]=Ue)}return Te.families=Te.family.split(/,\s?/),Te},ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let ke=!1;try{const e=Object.defineProperty({},"passive",{get:function(){ke=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return ke}();function createCanvasContext2D(ke,e,Te,Oe){let Be;return Te&&Te.length?Be=Te.shift():WORKER_OFFSCREEN_CANVAS?Be=new OffscreenCanvas(ke||300,e||300):Be=document.createElement("canvas"),ke&&(Be.width=ke),e&&(Be.height=e),Be.getContext("2d",Oe)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(ke){const e=ke.canvas;e.width=1,e.height=1,ke.clearRect(0,0,1,1)}function outerWidth(ke){let e=ke.offsetWidth;const Te=getComputedStyle(ke);return e+=parseInt(Te.marginLeft,10)+parseInt(Te.marginRight,10),e}function outerHeight(ke){let e=ke.offsetHeight;const Te=getComputedStyle(ke);return e+=parseInt(Te.marginTop,10)+parseInt(Te.marginBottom,10),e}function replaceNode(ke,e){const Te=e.parentNode;Te&&Te.replaceChild(ke,e)}function removeChildren(ke){for(;ke.lastChild;)ke.lastChild.remove()}function replaceChildren(ke,e){const Te=ke.childNodes;for(let Oe=0;;++Oe){const Be=Te[Oe],Ue=e[Oe];if(!Be&&!Ue)break;if(Be!==Ue){if(!Be){ke.appendChild(Ue);continue}if(!Ue){ke.removeChild(Be),--Oe;continue}ke.insertBefore(Ue,Be)}}}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(ke){const e=createEmpty();for(let Te=0,Oe=ke.length;Te<Oe;++Te)extendCoordinate(e,ke[Te]);return e}function _boundingExtentXYs(ke,e,Te){const Oe=Math.min.apply(null,ke),Be=Math.min.apply(null,e),Ue=Math.max.apply(null,ke),He=Math.max.apply(null,e);return createOrUpdate$2(Oe,Be,Ue,He,Te)}function buffer(ke,e,Te){return Te?(Te[0]=ke[0]-e,Te[1]=ke[1]-e,Te[2]=ke[2]+e,Te[3]=ke[3]+e,Te):[ke[0]-e,ke[1]-e,ke[2]+e,ke[3]+e]}function clone$1(ke,e){return e?(e[0]=ke[0],e[1]=ke[1],e[2]=ke[2],e[3]=ke[3],e):ke.slice()}function closestSquaredDistanceXY(ke,e,Te){let Oe,Be;return e<ke[0]?Oe=ke[0]-e:ke[2]<e?Oe=e-ke[2]:Oe=0,Te<ke[1]?Be=ke[1]-Te:ke[3]<Te?Be=Te-ke[3]:Be=0,Oe*Oe+Be*Be}function containsCoordinate(ke,e){return containsXY(ke,e[0],e[1])}function containsExtent(ke,e){return ke[0]<=e[0]&&e[2]<=ke[2]&&ke[1]<=e[1]&&e[3]<=ke[3]}function containsXY(ke,e,Te){return ke[0]<=e&&e<=ke[2]&&ke[1]<=Te&&Te<=ke[3]}function coordinateRelationship(ke,e){const Te=ke[0],Oe=ke[1],Be=ke[2],Ue=ke[3],He=e[0],We=e[1];let Cn=Relationship.UNKNOWN;return He<Te?Cn=Cn|Relationship.LEFT:He>Be&&(Cn=Cn|Relationship.RIGHT),We<Oe?Cn=Cn|Relationship.BELOW:We>Ue&&(Cn=Cn|Relationship.ABOVE),Cn===Relationship.UNKNOWN&&(Cn=Relationship.INTERSECTING),Cn}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(ke,e,Te,Oe,Be){return Be?(Be[0]=ke,Be[1]=e,Be[2]=Te,Be[3]=Oe,Be):[ke,e,Te,Oe]}function createOrUpdateEmpty(ke){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,ke)}function createOrUpdateFromCoordinate(ke,e){const Te=ke[0],Oe=ke[1];return createOrUpdate$2(Te,Oe,Te,Oe,e)}function createOrUpdateFromFlatCoordinates(ke,e,Te,Oe,Be){const Ue=createOrUpdateEmpty(Be);return extendFlatCoordinates(Ue,ke,e,Te,Oe)}function equals$1(ke,e){return ke[0]==e[0]&&ke[2]==e[2]&&ke[1]==e[1]&&ke[3]==e[3]}function extend$3(ke,e){return e[0]<ke[0]&&(ke[0]=e[0]),e[2]>ke[2]&&(ke[2]=e[2]),e[1]<ke[1]&&(ke[1]=e[1]),e[3]>ke[3]&&(ke[3]=e[3]),ke}function extendCoordinate(ke,e){e[0]<ke[0]&&(ke[0]=e[0]),e[0]>ke[2]&&(ke[2]=e[0]),e[1]<ke[1]&&(ke[1]=e[1]),e[1]>ke[3]&&(ke[3]=e[1])}function extendFlatCoordinates(ke,e,Te,Oe,Be){for(;Te<Oe;Te+=Be)extendXY(ke,e[Te],e[Te+1]);return ke}function extendXY(ke,e,Te){ke[0]=Math.min(ke[0],e),ke[1]=Math.min(ke[1],Te),ke[2]=Math.max(ke[2],e),ke[3]=Math.max(ke[3],Te)}function forEachCorner(ke,e){let Te;return Te=e(getBottomLeft(ke)),Te||(Te=e(getBottomRight(ke)),Te)||(Te=e(getTopRight(ke)),Te)||(Te=e(getTopLeft(ke)),Te)?Te:!1}function getArea$1(ke){let e=0;return isEmpty(ke)||(e=getWidth(ke)*getHeight(ke)),e}function getBottomLeft(ke){return[ke[0],ke[1]]}function getBottomRight(ke){return[ke[2],ke[1]]}function getCenter(ke){return[(ke[0]+ke[2])/2,(ke[1]+ke[3])/2]}function getCorner(ke,e){let Te;if(e==="bottom-left")Te=getBottomLeft(ke);else if(e==="bottom-right")Te=getBottomRight(ke);else if(e==="top-left")Te=getTopLeft(ke);else if(e==="top-right")Te=getTopRight(ke);else throw new Error("Invalid corner");return Te}function getForViewAndSize(ke,e,Te,Oe,Be){const[Ue,He,We,Cn,An,En,Sn,Tn]=getRotatedViewport(ke,e,Te,Oe);return createOrUpdate$2(Math.min(Ue,We,An,Sn),Math.min(He,Cn,En,Tn),Math.max(Ue,We,An,Sn),Math.max(He,Cn,En,Tn),Be)}function getRotatedViewport(ke,e,Te,Oe){const Be=e*Oe[0]/2,Ue=e*Oe[1]/2,He=Math.cos(Te),We=Math.sin(Te),Cn=Be*He,An=Be*We,En=Ue*He,Sn=Ue*We,Tn=ke[0],Ln=ke[1];return[Tn-Cn+Sn,Ln-An-En,Tn-Cn-Sn,Ln-An+En,Tn+Cn-Sn,Ln+An+En,Tn+Cn+Sn,Ln+An-En,Tn-Cn+Sn,Ln-An-En]}function getHeight(ke){return ke[3]-ke[1]}function getIntersection(ke,e,Te){const Oe=Te||createEmpty();return intersects$1(ke,e)?(ke[0]>e[0]?Oe[0]=ke[0]:Oe[0]=e[0],ke[1]>e[1]?Oe[1]=ke[1]:Oe[1]=e[1],ke[2]<e[2]?Oe[2]=ke[2]:Oe[2]=e[2],ke[3]<e[3]?Oe[3]=ke[3]:Oe[3]=e[3]):createOrUpdateEmpty(Oe),Oe}function getTopLeft(ke){return[ke[0],ke[3]]}function getTopRight(ke){return[ke[2],ke[3]]}function getWidth(ke){return ke[2]-ke[0]}function intersects$1(ke,e){return ke[0]<=e[2]&&ke[2]>=e[0]&&ke[1]<=e[3]&&ke[3]>=e[1]}function isEmpty(ke){return ke[2]<ke[0]||ke[3]<ke[1]}function returnOrUpdate(ke,e){return e?(e[0]=ke[0],e[1]=ke[1],e[2]=ke[2],e[3]=ke[3],e):ke}function scaleFromCenter(ke,e){const Te=(ke[2]-ke[0])/2*(e-1),Oe=(ke[3]-ke[1])/2*(e-1);ke[0]-=Te,ke[2]+=Te,ke[1]-=Oe,ke[3]+=Oe}function intersectsSegment(ke,e,Te){let Oe=!1;const Be=coordinateRelationship(ke,e),Ue=coordinateRelationship(ke,Te);if(Be===Relationship.INTERSECTING||Ue===Relationship.INTERSECTING)Oe=!0;else{const He=ke[0],We=ke[1],Cn=ke[2],An=ke[3],En=e[0],Sn=e[1],Tn=Te[0],Ln=Te[1],Bn=(Ln-Sn)/(Tn-En);let ei,ni;Ue&Relationship.ABOVE&&!(Be&Relationship.ABOVE)&&(ei=Tn-(Ln-An)/Bn,Oe=ei>=He&&ei<=Cn),!Oe&&Ue&Relationship.RIGHT&&!(Be&Relationship.RIGHT)&&(ni=Ln-(Tn-Cn)*Bn,Oe=ni>=We&&ni<=An),!Oe&&Ue&Relationship.BELOW&&!(Be&Relationship.BELOW)&&(ei=Tn-(Ln-We)/Bn,Oe=ei>=He&&ei<=Cn),!Oe&&Ue&Relationship.LEFT&&!(Be&Relationship.LEFT)&&(ni=Ln-(Tn-He)*Bn,Oe=ni>=We&&ni<=An)}return Oe}function applyTransform(ke,e,Te,Oe){if(isEmpty(ke))return createOrUpdateEmpty(Te);let Be=[];Be=[ke[0],ke[1],ke[2],ke[1],ke[2],ke[3],ke[0],ke[3]],e(Be,Be,2);const Ue=[],He=[];for(let We=0,Cn=Be.length;We<Cn;We+=2)Ue.push(Be[We]),He.push(Be[We+1]);return _boundingExtentXYs(Ue,He,Te)}function wrapX$2(ke,e){const Te=e.getExtent(),Oe=getCenter(ke);if(e.canWrapX()&&(Oe[0]<Te[0]||Oe[0]>=Te[2])){const Be=getWidth(Te),He=Math.floor((Oe[0]-Te[0])/Be)*Be;ke[0]-=He,ke[2]-=He}return ke}function wrapAndSliceX(ke,e,Te){if(e.canWrapX()){const Oe=e.getExtent();if(!isFinite(ke[0])||!isFinite(ke[2]))return[[Oe[0],ke[1],Oe[2],ke[3]]];wrapX$2(ke,e);const Be=getWidth(Oe);if(getWidth(ke)>Be&&!Te)return[[Oe[0],ke[1],Oe[2],ke[3]]];if(ke[0]<Oe[0])return[[ke[0]+Be,ke[1],Oe[2],ke[3]],[Oe[0],ke[1],ke[2],ke[3]]];if(ke[2]>Oe[2])return[[ke[0],ke[1],Oe[2],ke[3]],[Oe[0],ke[1],ke[2]-Be,ke[3]]]}return[ke]}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var Te;this.mapPostrenderListenerKey&&((Te=this.element)==null||Te.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const Oe=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?Oe.insertBefore(this.element,Oe.childNodes[0]||null):Oe.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const Te=this.getMap();if(!Te||!Te.getTargetElement()||!this.get(Property$3.POSITION))return;const Oe=this.getRect(Te.getTargetElement(),Te.getSize()),Be=this.getElement(),Ue=this.getRect(Be,[outerWidth(Be),outerHeight(Be)]);e=e||{};const He=e.margin===void 0?20:e.margin;if(!containsExtent(Oe,Ue)){const We=Ue[0]-Oe[0],Cn=Oe[2]-Ue[2],An=Ue[1]-Oe[1],En=Oe[3]-Ue[3],Sn=[0,0];if(We<0?Sn[0]=We-He:Cn<0&&(Sn[0]=Math.abs(Cn)+He),An<0?Sn[1]=An-He:En<0&&(Sn[1]=Math.abs(En)+He),Sn[0]!==0||Sn[1]!==0){const Tn=Te.getView().getCenterInternal(),Ln=Te.getPixelFromCoordinateInternal(Tn);if(!Ln)return;const Bn=[Ln[0]+Sn[0],Ln[1]+Sn[1]],ei=e.animation||{};Te.getView().animateInternal({center:Te.getCoordinateFromPixelInternal(Bn),duration:ei.duration,easing:ei.easing})}}}getRect(e,Te){const Oe=e.getBoundingClientRect(),Be=Oe.left+window.pageXOffset,Ue=Oe.top+window.pageYOffset;return[Be,Ue,Be+Te[0],Ue+Te[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),Te=this.getPosition();if(!e||!e.isRendered()||!Te){this.setVisible(!1);return}const Oe=e.getPixelFromCoordinate(Te),Be=e.getSize();this.updateRenderedPosition(Oe,Be)}updateRenderedPosition(e,Te){const Oe=this.element.style,Be=this.getOffset(),Ue=this.getPositioning();this.setVisible(!0);const He=Math.round(e[0]+Be[0])+"px",We=Math.round(e[1]+Be[1])+"px";let Cn="0%",An="0%";Ue=="bottom-right"||Ue=="center-right"||Ue=="top-right"?Cn="-100%":(Ue=="bottom-center"||Ue=="center-center"||Ue=="top-center")&&(Cn="-50%"),Ue=="bottom-left"||Ue=="bottom-center"||Ue=="bottom-right"?An="-100%":(Ue=="center-left"||Ue=="center-center"||Ue=="center-right")&&(An="-50%");const En=`translate(${Cn}, ${An}) translate(${He}, ${We})`;this.rendered.transform_!=En&&(this.rendered.transform_=En,Oe.transform=En)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(ke){return Math.pow(ke,3)}function easeOut(ke){return 1-easeIn(1-ke)}function inAndOut(ke){return 3*ke*ke-2*ke*ke*ke}function linear(ke){return ke}class Tile extends Target{constructor(e,Te,Oe){super(),Oe=Oe||{},this.tileCoord=e,this.state=Te,this.key="",this.transition_=Oe.transition===void 0?250:Oe.transition,this.transitionStarts_={},this.interpolate=!!Oe.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.EMPTY){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){abstract()}getAlpha(e,Te){if(!this.transition_)return 1;let Oe=this.transitionStarts_[e];if(!Oe)Oe=Te,this.transitionStarts_[e]=Oe;else if(Oe===-1)return 1;const Be=Te-Oe+1e3/60;return Be>=this.transition_?1:easeIn(Be/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,Te,Oe,Be,Ue){super(e,Te,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=Be.bind(void 0,this),this.removeSourceTiles_=Ue,this.wrappedTileCoord=Oe}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool$2)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const Te=getUid(e);return Te in this.replayState_||(this.replayState_[Te]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[Te]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool$2.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let VectorTile$1=class extends Tile{constructor(e,Te,Oe,Be,Ue,He){super(e,Te,He),this.extent=null,this.format_=Be,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Ue,this.url_=Oe,this.key=Oe}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,Te){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}},withCredentials=!1;function loadFeaturesXhr(ke,e,Te,Oe,Be,Ue,He){const We=new XMLHttpRequest;We.open("GET",typeof ke=="function"?ke(Te,Oe,Be):ke,!0),e.getType()=="arraybuffer"&&(We.responseType="arraybuffer"),We.withCredentials=withCredentials,We.onload=function(Cn){if(!We.status||We.status>=200&&We.status<300){const An=e.getType();try{let En;An=="text"||An=="json"?En=We.responseText:An=="xml"?En=We.responseXML||We.responseText:An=="arraybuffer"&&(En=We.response),En?Ue(e.readFeatures(En,{extent:Te,featureProjection:Be}),e.readProjection(En)):He()}catch{He()}}else He()},We.onerror=He,We.send()}function xhr(ke,e){return function(Te,Oe,Be,Ue,He){loadFeaturesXhr(ke,e,Te,Oe,Be,(We,Cn)=>{this.addFeatures(We),Ue!==void 0&&Ue(We)},He||VOID)}}function hasArea(ke){return ke[0]>0&&ke[1]>0}function scale$3(ke,e,Te){return Te===void 0&&(Te=[0,0]),Te[0]=ke[0]*e+.5|0,Te[1]=ke[1]*e+.5|0,Te}function toSize(ke,e){return Array.isArray(ke)?ke:(e===void 0?e=[ke,ke]:(e[0]=ke,e[1]=ke),e)}class TileRange{constructor(e,Te,Oe,Be){this.minX=e,this.maxX=Te,this.minY=Oe,this.maxY=Be}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,Te){return this.minX<=e&&e<=this.maxX&&this.minY<=Te&&Te<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(ke,e,Te,Oe,Be){return Be!==void 0?(Be.minX=ke,Be.maxX=e,Be.minY=Te,Be.maxY=Oe,Be):new TileRange(ke,e,Te,Oe)}function assert(ke,e){if(!ke)throw new Error(e)}function linearRingContainsExtent(ke,e,Te,Oe,Be){return!forEachCorner(Be,function(He){return!linearRingContainsXY(ke,e,Te,Oe,He[0],He[1])})}function linearRingContainsXY(ke,e,Te,Oe,Be,Ue){let He=0,We=ke[Te-Oe],Cn=ke[Te-Oe+1];for(;e<Te;e+=Oe){const An=ke[e],En=ke[e+1];Cn<=Ue?En>Ue&&(An-We)*(Ue-Cn)-(Be-We)*(En-Cn)>0&&He++:En<=Ue&&(An-We)*(Ue-Cn)-(Be-We)*(En-Cn)<0&&He--,We=An,Cn=En}return He!==0}function linearRingsContainsXY(ke,e,Te,Oe,Be,Ue){if(Te.length===0||!linearRingContainsXY(ke,e,Te[0],Oe,Be,Ue))return!1;for(let He=1,We=Te.length;He<We;++He)if(linearRingContainsXY(ke,Te[He-1],Te[He],Oe,Be,Ue))return!1;return!0}function linearRingssContainsXY(ke,e,Te,Oe,Be,Ue){if(Te.length===0)return!1;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];if(linearRingsContainsXY(ke,e,Cn,Oe,Be,Ue))return!0;e=Cn[Cn.length-1]}return!1}function forEach(ke,e,Te,Oe,Be){let Ue;for(e+=Oe;e<Te;e+=Oe)if(Ue=Be(ke.slice(e-Oe,e),ke.slice(e,e+Oe)),Ue)return Ue;return!1}function intersectsLineString(ke,e,Te,Oe,Be,Ue){return Ue=Ue??extendFlatCoordinates(createEmpty(),ke,e,Te,Oe),intersects$1(Be,Ue)?Ue[0]>=Be[0]&&Ue[2]<=Be[2]||Ue[1]>=Be[1]&&Ue[3]<=Be[3]?!0:forEach(ke,e,Te,Oe,function(He,We){return intersectsSegment(Be,He,We)}):!1}function intersectsLineStringArray(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){if(intersectsLineString(ke,e,Te[Ue],Oe,Be))return!0;e=Te[Ue]}return!1}function intersectsLinearRing(ke,e,Te,Oe,Be){return!!(intersectsLineString(ke,e,Te,Oe,Be)||linearRingContainsXY(ke,e,Te,Oe,Be[0],Be[1])||linearRingContainsXY(ke,e,Te,Oe,Be[0],Be[3])||linearRingContainsXY(ke,e,Te,Oe,Be[2],Be[1])||linearRingContainsXY(ke,e,Te,Oe,Be[2],Be[3]))}function intersectsLinearRingArray(ke,e,Te,Oe,Be){if(!intersectsLinearRing(ke,e,Te[0],Oe,Be))return!1;if(Te.length===1)return!0;for(let Ue=1,He=Te.length;Ue<He;++Ue)if(linearRingContainsExtent(ke,Te[Ue-1],Te[Ue],Oe,Be)&&!intersectsLineString(ke,Te[Ue-1],Te[Ue],Oe,Be))return!1;return!0}function intersectsLinearRingMultiArray(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];if(intersectsLinearRingArray(ke,e,We,Oe,Be))return!0;e=We[We.length-1]}return!1}function clamp$1(ke,e,Te){return Math.min(Math.max(ke,e),Te)}function squaredSegmentDistance(ke,e,Te,Oe,Be,Ue){const He=Be-Te,We=Ue-Oe;if(He!==0||We!==0){const Cn=((ke-Te)*He+(e-Oe)*We)/(He*He+We*We);Cn>1?(Te=Be,Oe=Ue):Cn>0&&(Te+=He*Cn,Oe+=We*Cn)}return squaredDistance$1(ke,e,Te,Oe)}function squaredDistance$1(ke,e,Te,Oe){const Be=Te-ke,Ue=Oe-e;return Be*Be+Ue*Ue}function solveLinearSystem(ke){const e=ke.length;for(let Oe=0;Oe<e;Oe++){let Be=Oe,Ue=Math.abs(ke[Oe][Oe]);for(let We=Oe+1;We<e;We++){const Cn=Math.abs(ke[We][Oe]);Cn>Ue&&(Ue=Cn,Be=We)}if(Ue===0)return null;const He=ke[Be];ke[Be]=ke[Oe],ke[Oe]=He;for(let We=Oe+1;We<e;We++){const Cn=-ke[We][Oe]/ke[Oe][Oe];for(let An=Oe;An<e+1;An++)Oe==An?ke[We][An]=0:ke[We][An]+=Cn*ke[Oe][An]}}const Te=new Array(e);for(let Oe=e-1;Oe>=0;Oe--){Te[Oe]=ke[Oe][e]/ke[Oe][Oe];for(let Be=Oe-1;Be>=0;Be--)ke[Be][e]-=ke[Be][Oe]*Te[Oe]}return Te}function toDegrees(ke){return ke*180/Math.PI}function toRadians(ke){return ke*Math.PI/180}function modulo(ke,e){const Te=ke%e;return Te*e<0?Te+e:Te}function lerp(ke,e,Te){return ke+Te*(e-ke)}function toFixed(ke,e){const Te=Math.pow(10,e);return Math.round(ke*Te)/Te}function round(ke,e){return Math.round(toFixed(ke,e))}function floor(ke,e){return Math.floor(toFixed(ke,e))}function ceil(ke,e){return Math.ceil(toFixed(ke,e))}function wrap(ke,e,Te){if(ke>=e&&ke<Te)return ke;const Oe=Te-e;return((ke-e)%Oe+Oe)%Oe+e}function createOrUpdate(ke,e,Te,Oe){return Oe!==void 0?(Oe[0]=ke,Oe[1]=e,Oe[2]=Te,Oe):[ke,e,Te]}function getKeyZXY(ke,e,Te){return ke+"/"+e+"/"+Te}function hash(ke){return hashZXY(ke[0],ke[1],ke[2])}function hashZXY(ke,e,Te){return(e<<ke)+Te}function withinExtentAndZ(ke,e){const Te=ke[0],Oe=ke[1],Be=ke[2];if(e.getMinZoom()>Te||Te>e.getMaxZoom())return!1;const Ue=e.getFullTileRange(Te);return Ue?Ue.containsXY(Oe,Be):!0}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256,tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(Be,Ue)=>Ue-Be),"`resolutions` must be sorted in descending order");let Te;if(!e.origins){for(let Be=0,Ue=this.resolutions_.length-1;Be<Ue;++Be)if(!Te)Te=this.resolutions_[Be]/this.resolutions_[Be+1];else if(this.resolutions_[Be]/this.resolutions_[Be+1]!==Te){Te=void 0;break}}this.zoomFactor_=Te,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const Oe=e.extent;Oe!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(Oe)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=Oe!==void 0?Oe:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((Be,Ue)=>{const He=new TileRange(Math.min(0,Be[0]),Math.max(Be[0]-1,-1),Math.min(0,Be[1]),Math.max(Be[1]-1,-1));if(Oe){const We=this.getTileRangeForExtentAndZ(Oe,Ue);He.minX=Math.max(We.minX,He.minX),He.maxX=Math.min(We.maxX,He.maxX),He.minY=Math.max(We.minY,He.minY),He.maxY=Math.min(We.maxY,He.maxY)}return He}):Oe&&this.calculateTileRanges_(Oe)}forEachTileCoord(e,Te,Oe){const Be=this.getTileRangeForExtentAndZ(e,Te);for(let Ue=Be.minX,He=Be.maxX;Ue<=He;++Ue)for(let We=Be.minY,Cn=Be.maxY;We<=Cn;++We)Oe([Te,Ue,We])}forEachTileCoordParentTileRange(e,Te,Oe,Be){let Ue,He,We,Cn=null,An=e[0]-1;for(this.zoomFactor_===2?(He=e[1],We=e[2]):Cn=this.getTileCoordExtent(e,Be);An>=this.minZoom;){if(He!==void 0&&We!==void 0?(He=Math.floor(He/2),We=Math.floor(We/2),Ue=createOrUpdate$1(He,He,We,We,Oe)):Ue=this.getTileRangeForExtentAndZ(Cn,An,Oe),Te(An,Ue))return!0;--An}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,Te,Oe){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Ue=e[1]*2,He=e[2]*2;return createOrUpdate$1(Ue,Ue+1,He,He+1,Te)}const Be=this.getTileCoordExtent(e,Oe||this.tmpExtent_);return this.getTileRangeForExtentAndZ(Be,e[0]+1,Te)}return null}getTileRangeForTileCoordAndZ(e,Te,Oe){if(Te>this.maxZoom||Te<this.minZoom)return null;const Be=e[0],Ue=e[1],He=e[2];if(Te===Be)return createOrUpdate$1(Ue,He,Ue,He,Oe);if(this.zoomFactor_){const Cn=Math.pow(this.zoomFactor_,Te-Be),An=Math.floor(Ue*Cn),En=Math.floor(He*Cn);if(Te<Be)return createOrUpdate$1(An,An,En,En,Oe);const Sn=Math.floor(Cn*(Ue+1))-1,Tn=Math.floor(Cn*(He+1))-1;return createOrUpdate$1(An,Sn,En,Tn,Oe)}const We=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(We,Te,Oe)}getTileRangeForExtentAndZ(e,Te,Oe){this.getTileCoordForXYAndZ_(e[0],e[3],Te,!1,tmpTileCoord);const Be=tmpTileCoord[1],Ue=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],Te,!0,tmpTileCoord);const He=tmpTileCoord[1],We=tmpTileCoord[2];return createOrUpdate$1(Be,He,Ue,We,Oe)}getTileCoordCenter(e){const Te=this.getOrigin(e[0]),Oe=this.getResolution(e[0]),Be=toSize(this.getTileSize(e[0]),this.tmpSize_);return[Te[0]+(e[1]+.5)*Be[0]*Oe,Te[1]-(e[2]+.5)*Be[1]*Oe]}getTileCoordExtent(e,Te){const Oe=this.getOrigin(e[0]),Be=this.getResolution(e[0]),Ue=toSize(this.getTileSize(e[0]),this.tmpSize_),He=Oe[0]+e[1]*Ue[0]*Be,We=Oe[1]-(e[2]+1)*Ue[1]*Be,Cn=He+Ue[0]*Be,An=We+Ue[1]*Be;return createOrUpdate$2(He,We,Cn,An,Te)}getTileCoordForCoordAndResolution(e,Te,Oe){return this.getTileCoordForXYAndResolution_(e[0],e[1],Te,!1,Oe)}getTileCoordForXYAndResolution_(e,Te,Oe,Be,Ue){const He=this.getZForResolution(Oe),We=Oe/this.getResolution(He),Cn=this.getOrigin(He),An=toSize(this.getTileSize(He),this.tmpSize_);let En=We*(e-Cn[0])/Oe/An[0],Sn=We*(Cn[1]-Te)/Oe/An[1];return Be?(En=ceil(En,DECIMALS$1)-1,Sn=ceil(Sn,DECIMALS$1)-1):(En=floor(En,DECIMALS$1),Sn=floor(Sn,DECIMALS$1)),createOrUpdate(He,En,Sn,Ue)}getTileCoordForXYAndZ_(e,Te,Oe,Be,Ue){const He=this.getOrigin(Oe),We=this.getResolution(Oe),Cn=toSize(this.getTileSize(Oe),this.tmpSize_);let An=(e-He[0])/We/Cn[0],En=(He[1]-Te)/We/Cn[1];return Be?(An=ceil(An,DECIMALS$1)-1,En=ceil(En,DECIMALS$1)-1):(An=floor(An,DECIMALS$1),En=floor(En,DECIMALS$1)),createOrUpdate(Oe,An,En,Ue)}getTileCoordForCoordAndZ(e,Te,Oe){return this.getTileCoordForXYAndZ_(e[0],e[1],Te,!1,Oe)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,Te){const Oe=linearFindNearest(this.resolutions_,e,Te||0);return clamp$1(Oe,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,Te){return intersectsLinearRing(Te,0,Te.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const Te=this.resolutions_.length,Oe=new Array(Te);for(let Be=this.minZoom;Be<Te;++Be)Oe[Be]=this.getTileRangeForExtentAndZ(e,Be);this.fullTileRanges_=Oe}}function warn(...ke){console.warn(...ke)}function padNumber(ke,e,Te){const Oe=""+ke;let Be=Oe.indexOf(".");return Be=Be===-1?Oe.length:Be,Be>e?Oe:new Array(1+e-Be).join("0")+Oe}function compareVersions(ke,e){const Te=(""+ke).split("."),Oe=(""+e).split(".");for(let Be=0;Be<Math.max(Te.length,Oe.length);Be++){const Ue=parseInt(Te[Be]||"0",10),He=parseInt(Oe[Be]||"0",10);if(Ue>He)return 1;if(He>Ue)return-1}return 0}function add$3(ke,e){return ke[0]+=+e[0],ke[1]+=+e[1],ke}function closestOnSegment(ke,e){const Te=ke[0],Oe=ke[1],Be=e[0],Ue=e[1],He=Be[0],We=Be[1],Cn=Ue[0],An=Ue[1],En=Cn-He,Sn=An-We,Tn=En===0&&Sn===0?0:(En*(Te-He)+Sn*(Oe-We))/(En*En+Sn*Sn||0);let Ln,Bn;return Tn<=0?(Ln=He,Bn=We):Tn>=1?(Ln=Cn,Bn=An):(Ln=He+Tn*En,Bn=We+Tn*Sn),[Ln,Bn]}function equals(ke,e){let Te=!0;for(let Oe=ke.length-1;Oe>=0;--Oe)if(ke[Oe]!=e[Oe]){Te=!1;break}return Te}function rotate$1(ke,e){const Te=Math.cos(e),Oe=Math.sin(e),Be=ke[0]*Te-ke[1]*Oe,Ue=ke[1]*Te+ke[0]*Oe;return ke[0]=Be,ke[1]=Ue,ke}function scale$2(ke,e){return ke[0]*=e,ke[1]*=e,ke}function squaredDistance(ke,e){const Te=ke[0]-e[0],Oe=ke[1]-e[1];return Te*Te+Oe*Oe}function distance(ke,e){return Math.sqrt(squaredDistance(ke,e))}function squaredDistanceToSegment(ke,e){return squaredDistance(ke,closestOnSegment(ke,e))}function wrapX$1(ke,e){if(e.canWrapX()){const Te=getWidth(e.getExtent()),Oe=getWorldsAway(ke,e,Te);Oe&&(ke[0]-=Oe*Te)}return ke}function getWorldsAway(ke,e,Te){const Oe=e.getExtent();let Be=0;return e.canWrapX()&&(ke[0]<Oe[0]||ke[0]>Oe[2])&&(Te=Te||getWidth(Oe),Be=Math.floor((ke[0]-Oe[0])/Te)),Be}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(Te,Oe){return Te/Math.cosh(Oe[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(ke,e,Te,Oe){const Be=ke.length;Te=Te>1?Te:2,Oe=Oe??Te,e===void 0&&(Te>2?e=ke.slice():e=new Array(Be));for(let Ue=0;Ue<Be;Ue+=Oe){e[Ue]=HALF_SIZE*ke[Ue]/180;let He=RADIUS$1*Math.log(Math.tan(Math.PI*(+ke[Ue+1]+90)/360));He>MAX_SAFE_Y?He=MAX_SAFE_Y:He<-MAX_SAFE_Y&&(He=-MAX_SAFE_Y),e[Ue+1]=He}return e}function toEPSG4326(ke,e,Te,Oe){const Be=ke.length;Te=Te>1?Te:2,Oe=Oe??Te,e===void 0&&(Te>2?e=ke.slice():e=new Array(Be));for(let Ue=0;Ue<Be;Ue+=Oe)e[Ue]=180*ke[Ue]/HALF_SIZE,e[Ue+1]=360*Math.atan(Math.exp(ke[Ue+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,Te){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:Te,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(ke){return cache$1[ke]||cache$1[ke.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$2(ke,e){cache$1[ke]=e}let transforms={};function add$1(ke,e,Te){const Oe=ke.getCode(),Be=e.getCode();Oe in transforms||(transforms[Oe]={}),transforms[Oe][Be]=Te}function get$4(ke,e){return ke in transforms&&e in transforms[ke]?transforms[ke][e]:null}const K0=.9996,E$1=.00669438,E2$1=E$1*E$1,E3=E2$1*E$1,E_P2=E$1/(1-E$1),SQRT_E=Math.sqrt(1-E$1),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E$1/4-3*E2$1/64-5*E3/256,M2=3*E$1/8+3*E2$1/32+45*E3/1024,M3=15*E2$1/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R$2=6378137;function toLonLat$1(ke,e,Te){const Oe=ke-5e5,He=(Te.north?e:e-1e7)/K0/(R$2*M1),We=He+P2*Math.sin(2*He)+P3*Math.sin(4*He)+P4*Math.sin(6*He)+P5*Math.sin(8*He),Cn=Math.sin(We),An=Cn*Cn,En=Math.cos(We),Sn=Cn/En,Tn=Sn*Sn,Ln=Tn*Tn,Bn=1-E$1*An,ei=Math.sqrt(1-E$1*An),ni=R$2/ei,ti=(1-E$1)/Bn,ri=E_P2*En**2,oi=ri*ri,ai=Oe/(ni*K0),ci=ai*ai,Pi=ci*ai,vi=Pi*ai,pi=vi*ai,Mi=pi*ai,Fi=We-Sn/ti*(ci/2-vi/24*(5+3*Tn+10*ri-4*oi-9*E_P2))+Mi/720*(61+90*Tn+298*ri+45*Ln-252*E_P2-3*oi);let fi=(ai-Pi/6*(1+2*Tn+ri)+pi/120*(5-2*ri+28*Tn-3*oi+8*E_P2+24*Ln))/En;return fi=wrap(fi+toRadians(zoneToCentralLongitude(Te.number)),-Math.PI,Math.PI),[toDegrees(fi),toDegrees(Fi)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(ke,e,Te){ke=wrap(ke,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const Oe=toRadians(e),Be=Math.sin(Oe),Ue=Math.cos(Oe),He=Be/Ue,We=He*He,Cn=We*We,An=toRadians(ke),En=zoneToCentralLongitude(Te.number),Sn=toRadians(En),Tn=R$2/Math.sqrt(1-E$1*Be**2),Ln=E_P2*Ue**2,Bn=Ue*wrap(An-Sn,-Math.PI,Math.PI),ei=Bn*Bn,ni=ei*Bn,ti=ni*Bn,ri=ti*Bn,oi=ri*Bn,ai=R$2*(M1*Oe-M2*Math.sin(2*Oe)+M3*Math.sin(4*Oe)-M4*Math.sin(6*Oe)),ci=K0*Tn*(Bn+ni/6*(1-We+Ln)+ri/120*(5-18*We+Cn+72*Ln-58*E_P2))+5e5;let Pi=K0*(ai+Tn*He*(ei/2+ti/24*(5-We+9*Ln+4*Ln**2)+oi/720*(61-58*We+Cn+600*Ln-330*E_P2)));return Te.north||(Pi+=1e7),[ci,Pi]}function zoneToCentralLongitude(ke){return(ke-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(ke){let e=0;for(const Be of epsgRegExes){const Ue=ke.match(Be);if(Ue){e=parseInt(Ue[1]);break}}if(!e)return null;let Te=0,Oe=!1;return e>32700&&e<32761?Te=e-32700:e>32600&&e<32661&&(Oe=!0,Te=e-32600),Te?{number:Te,north:Oe}:null}function makeTransformFunction(ke,e){return function(Te,Oe,Be,Ue){const He=Te.length;Be=Be>1?Be:2,Ue=Ue??Be,Oe||(Be>2?Oe=Te.slice():Oe=new Array(He));for(let We=0;We<He;We+=Ue){const Cn=Te[We],An=Te[We+1],En=ke(Cn,An,e);Oe[We]=En[0],Oe[We+1]=En[1]}return Oe}}function makeProjection(ke){return zoneFromCode(ke)?new Projection$1({code:ke,units:"m"}):null}function makeTransforms(ke){const e=zoneFromCode(ke.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat$1,e)}:null}const DEFAULT_RADIUS=63710088e-1;function getDistance(ke,e,Te){Te=Te||DEFAULT_RADIUS;const Oe=toRadians(ke[1]),Be=toRadians(e[1]),Ue=(Be-Oe)/2,He=toRadians(e[0]-ke[0])/2,We=Math.sin(Ue)*Math.sin(Ue)+Math.sin(He)*Math.sin(He)*Math.cos(Oe)*Math.cos(Be);return 2*Te*Math.atan2(Math.sqrt(We),Math.sqrt(1-We))}function getAreaInternal(ke,e){let Te=0;const Oe=ke.length;let Be=ke[Oe-1][0],Ue=ke[Oe-1][1];for(let He=0;He<Oe;He++){const We=ke[He][0],Cn=ke[He][1];Te+=toRadians(We-Be)*(2+Math.sin(toRadians(Ue))+Math.sin(toRadians(Cn))),Be=We,Ue=Cn}return Te*e*e/2}function getArea(ke,e){e=e||{};const Te=e.radius||DEFAULT_RADIUS,Oe=e.projection||"EPSG:3857",Be=ke.getType();Be!=="GeometryCollection"&&(ke=ke.clone().transform(Oe,"EPSG:4326"));let Ue=0,He,We,Cn,An,En,Sn;switch(Be){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(He=ke.getCoordinates(),Ue=Math.abs(getAreaInternal(He[0],Te)),Cn=1,An=He.length;Cn<An;++Cn)Ue-=Math.abs(getAreaInternal(He[Cn],Te));break}case"MultiPolygon":{for(He=ke.getCoordinates(),Cn=0,An=He.length;Cn<An;++Cn)for(We=He[Cn],Ue+=Math.abs(getAreaInternal(We[0],Te)),En=1,Sn=We.length;En<Sn;++En)Ue-=Math.abs(getAreaInternal(We[En],Te));break}case"GeometryCollection":{const Tn=ke.getGeometries();for(Cn=0,An=Tn.length;Cn<An;++Cn)Ue+=getArea(Tn[Cn],e);break}default:throw new Error("Unsupported geometry type: "+Be)}return Ue}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(ke){showCoordinateWarning=!1}function cloneTransform(ke,e){if(e!==void 0){for(let Te=0,Oe=ke.length;Te<Oe;++Te)e[Te]=ke[Te];e=e}else e=ke.slice();return e}function addProjection(ke){add$2(ke.getCode(),ke),add$1(ke,ke,cloneTransform)}function addProjections(ke){ke.forEach(addProjection)}function get$3(ke){if(typeof ke!="string")return ke;const e=get$5(ke);if(e)return e;for(const Te of projectionFactories){const Oe=Te(ke);if(Oe)return Oe}return null}function getPointResolution(ke,e,Te,Oe){ke=get$3(ke);let Be;const Ue=ke.getPointResolutionFunc();if(Ue){if(Be=Ue(e,Te),Oe&&Oe!==ke.getUnits()){const He=ke.getMetersPerUnit();He&&(Be=Be*He/METERS_PER_UNIT$1[Oe])}}else{const He=ke.getUnits();if(He=="degrees"&&!Oe||Oe=="degrees")Be=e;else{const We=getTransformFromProjections(ke,get$3("EPSG:4326"));if(!We&&He!=="degrees")Be=e*ke.getMetersPerUnit();else{let An=[Te[0]-e/2,Te[1],Te[0]+e/2,Te[1],Te[0],Te[1]-e/2,Te[0],Te[1]+e/2];An=We(An,An,2);const En=getDistance(An.slice(0,2),An.slice(2,4)),Sn=getDistance(An.slice(4,6),An.slice(6,8));Be=(En+Sn)/2}const Cn=Oe?METERS_PER_UNIT$1[Oe]:ke.getMetersPerUnit();Cn!==void 0&&(Be/=Cn)}}return Be}function addEquivalentProjections(ke){addProjections(ke),ke.forEach(function(e){ke.forEach(function(Te){e!==Te&&add$1(e,Te,cloneTransform)})})}function addEquivalentTransforms(ke,e,Te,Oe){ke.forEach(function(Be){e.forEach(function(Ue){add$1(Be,Ue,Te),add$1(Ue,Be,Oe)})})}function createProjection(ke,e){return ke?typeof ke=="string"?get$3(ke):ke:get$3(e)}function createTransformFromCoordinateTransform(ke){return function(e,Te,Oe,Be){const Ue=e.length;Oe=Oe!==void 0?Oe:2,Be=Be??Oe,Te=Te!==void 0?Te:new Array(Ue);for(let He=0;He<Ue;He+=Be){const We=ke(e.slice(He,He+Oe)),Cn=We.length;for(let An=0,En=Be;An<En;++An)Te[He+An]=An>=Cn?e[He+An]:We[An]}return Te}}function addCoordinateTransforms(ke,e,Te,Oe){const Be=get$3(ke),Ue=get$3(e);add$1(Be,Ue,createTransformFromCoordinateTransform(Te)),add$1(Ue,Be,createTransformFromCoordinateTransform(Oe))}function fromLonLat(ke,e){return disableCoordinateWarning(),transform$1(ke,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(ke,e){const Te=transform$1(ke,"EPSG:3857","EPSG:4326"),Oe=Te[0];return(Oe<-180||Oe>180)&&(Te[0]=modulo(Oe+180,360)-180),Te}function equivalent(ke,e){if(ke===e)return!0;const Te=ke.getUnits()===e.getUnits();return(ke.getCode()===e.getCode()||getTransformFromProjections(ke,e)===cloneTransform)&&Te}function getTransformFromProjections(ke,e){const Te=ke.getCode(),Oe=e.getCode();let Be=get$4(Te,Oe);if(Be)return Be;let Ue=null,He=null;for(const Cn of transformFactories)Ue||(Ue=Cn(ke)),He||(He=Cn(e));if(!Ue&&!He)return null;const We="EPSG:4326";if(He)if(Ue)Be=composeTransformFuncs(Ue.inverse,He.forward);else{const Cn=get$4(Te,We);Cn&&(Be=composeTransformFuncs(Cn,He.forward))}else{const Cn=get$4(We,Oe);Cn&&(Be=composeTransformFuncs(Ue.inverse,Cn))}return Be&&(addProjection(ke),addProjection(e),add$1(ke,e,Be)),Be}function composeTransformFuncs(ke,e){return function(Te,Oe,Be,Ue){return Oe=ke(Te,Oe,Be,Ue),e(Oe,Oe,Be,Ue)}}function getTransform(ke,e){const Te=get$3(ke),Oe=get$3(e);return getTransformFromProjections(Te,Oe)}function transform$1(ke,e,Te){const Oe=getTransform(e,Te);if(!Oe){const Be=get$3(e).getCode(),Ue=get$3(Te).getCode();throw new Error(`No transform available between ${Be} and ${Ue}`)}return Oe(ke,void 0,ke.length)}function transformExtent(ke,e,Te,Oe){const Be=getTransform(e,Te);return applyTransform(ke,Be,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(ke,e){return ke}function fromUserCoordinate(ke,e){return showCoordinateWarning&&!equals(ke,[0,0])&&ke[0]>=-180&&ke[0]<=180&&ke[1]>=-90&&ke[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),ke}function toUserExtent(ke,e){return ke}function fromUserExtent(ke,e){return ke}function fromUserResolution(ke,e){return ke}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(ke){let e=ke.getDefaultTileGrid();return e||(e=createForProjection(ke),ke.setDefaultTileGrid(e)),e}function wrapX(ke,e,Te){const Oe=e[0],Be=ke.getTileCoordCenter(e),Ue=extentFromProjection(Te);if(!containsCoordinate(Ue,Be)){const He=getWidth(Ue),We=Math.ceil((Ue[0]-Be[0])/He);return Be[0]+=He*We,ke.getTileCoordForCoordAndZ(Be,Oe)}return e}function createForExtent(ke,e,Te,Oe){Oe=Oe!==void 0?Oe:"top-left";const Be=resolutionsFromExtent(ke,e,Te);return new TileGrid({extent:ke,origin:getCorner(ke,Oe),resolutions:Be,tileSize:Te})}function createXYZ(ke){const e=ke||{},Te=e.extent||get$3("EPSG:3857").getExtent(),Oe={extent:Te,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(Te,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(Oe)}function resolutionsFromExtent(ke,e,Te,Oe){e=e!==void 0?e:DEFAULT_MAX_ZOOM,Te=toSize(Te!==void 0?Te:DEFAULT_TILE_SIZE);const Be=getHeight(ke),Ue=getWidth(ke);Oe=Oe>0?Oe:Math.max(Ue/Te[0],Be/Te[1]);const He=e+1,We=new Array(He);for(let Cn=0;Cn<He;++Cn)We[Cn]=Oe/Math.pow(2,Cn);return We}function createForProjection(ke,e,Te,Oe){const Be=extentFromProjection(ke);return createForExtent(Be,e,Te,Oe)}function extentFromProjection(ke){ke=get$3(ke);let e=ke.getExtent();if(!e){const Te=180*METERS_PER_UNIT$1.degrees/ke.getMetersPerUnit();e=createOrUpdate$2(-Te,-Te,Te,Te)}return e}function appendParams(ke,e){const Te=[];Object.keys(e).forEach(function(Be){e[Be]!==null&&e[Be]!==void 0&&Te.push(Be+"="+encodeURIComponent(e[Be]))});const Oe=Te.join("&");return ke=ke.replace(/[?&]$/,""),ke+=ke.includes("?")?"&":"?",ke+Oe}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(ke,e,Te,Oe,Be){return ke.replace(zRegEx,e.toString()).replace(xRegEx,Te.toString()).replace(yRegEx,Oe.toString()).replace(dashYRegEx,function(){if(Be===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(Be-Oe).toString()})}function expandUrl(ke){const e=[];let Te=/\{([a-z])-([a-z])\}/.exec(ke);if(Te){const Oe=Te[1].charCodeAt(0),Be=Te[2].charCodeAt(0);let Ue;for(Ue=Oe;Ue<=Be;++Ue)e.push(ke.replace(Te[0],String.fromCharCode(Ue)));return e}if(Te=/\{(\d+)-(\d+)\}/.exec(ke),Te){const Oe=parseInt(Te[2],10);for(let Be=parseInt(Te[1],10);Be<=Oe;Be++)e.push(ke.replace(Te[0],Be.toString()));return e}return e.push(ke),e}function createFromTemplate(ke,e){return function(Te,Oe,Be){if(!Te)return;let Ue;const He=Te[0];if(e){const We=e.getFullTileRange(He);We&&(Ue=We.getHeight()-1)}return renderXYZTemplate(ke,He,Te[1],Te[2],Ue)}}function createFromTemplates(ke,e){const Te=ke.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be)Oe[Be]=createFromTemplate(ke[Be],e);return createFromTileUrlFunctions(Oe)}function createFromTileUrlFunctions(ke){return ke.length===1?ke[0]:function(e,Te,Oe){if(!e)return;const Be=hash(e),Ue=modulo(Be,ke.length);return ke[Ue](e,Te,Oe)}}class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const Te=this;this.viewPromise_=new Promise(function(Oe,Be){Te.viewResolver=Oe,Te.viewRejector=Be})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(ke){return ke?typeof ke=="function"?ke:(Array.isArray(ke)||(ke=[ke]),e=>ke):null}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const Te=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),Te),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const Te=e?this.getTileGridForProjection(e):this.tileGrid;return Te?Te.getResolutions():null}getTile(e,Te,Oe,Be,Ue){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,Te,Oe){const Be=this.getTileGridForProjection(Oe),Ue=this.getTilePixelRatio(Te),He=toSize(Be.getTileSize(e),this.tmpSize);return Ue==1?He:scale$3(He,Ue,this.tmpSize)}getTileCoordForTileUrlFunction(e,Te){const Oe=Te!==void 0?Te:this.getProjection(),Be=Te!==void 0?this.getTileGridForProjection(Oe):this.tileGrid||this.getTileGridForProjection(Oe);return this.getWrapX()&&Oe.isGlobal()&&(e=wrapX(Be,e,Oe)),withinExtentAndZ(e,Be)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,Te){super(e),this.tile=Te}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const Te=e.target,Oe=getUid(Te),Be=Te.getState();let Ue;Be==TileState.LOADING?(this.tileLoadingKeys_[Oe]=!0,Ue=TileEventType.TILELOADSTART):Oe in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[Oe],Ue=Be==TileState.ERROR?TileEventType.TILELOADERROR:Be==TileState.LOADED?TileEventType.TILELOADEND:void 0),Ue!=null&&this.dispatchEvent(new TileSourceEvent(Ue,Te))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,Te){this.tileUrlFunction=e,typeof Te<"u"?this.setKey(Te):this.changed()}setUrl(e){const Te=expandUrl(e);this.urls=Te,this.setUrls(Te)}setUrls(e){this.urls=e;const Te=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),Te):this.setKey(Te)}tileUrlFunction(e,Te,Oe){}}class VectorTile extends UrlTile{constructor(e){const Te=e.projection||"EPSG:3857",Oe=e.extent||extentFromProjection(Te),Be=e.tileGrid||createXYZ({extent:Oe,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:Te,state:e.state,tileGrid:Be,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,Te,Oe){if(Oe.getState()===TileState.IDLE){Oe.setState(TileState.LOADING);const Be=Oe.wrappedTileCoord,Ue=this.getTileGridForProjection(Te),He=Ue.getTileCoordExtent(Be),We=Be[0],Cn=Ue.getResolution(We);buffer(He,-Cn,He);const An=this.tileGrid,En=An.getExtent();En&&getIntersection(He,En,He);const Sn=An.getZForResolution(Cn,this.zDirection);An.forEachTileCoord(He,Sn,Tn=>{const Ln=this.tileUrlFunction(Tn,e,Te);this.sourceTiles_[Ln]||(this.sourceTiles_[Ln]=new this.tileClass(Tn,Ln?TileState.IDLE:TileState.EMPTY,Ln,this.format_,this.tileLoadFunction));const Bn=this.sourceTiles_[Ln];Oe.sourceTiles.push(Bn),this.tileKeysBySourceTileUrl_[Ln]||(this.tileKeysBySourceTileUrl_[Ln]=[]),this.tileKeysBySourceTileUrl_[Ln].push(Oe.getKey());const ei=Bn.getState();if(ei<TileState.LOADED){const ni=ti=>{this.handleTileChange(ti);const ri=Bn.getState();if(ri===TileState.LOADED||ri===TileState.ERROR){const oi=Bn.getKey();oi in Oe.errorTileKeys?Bn.getState()===TileState.LOADED&&delete Oe.errorTileKeys[oi]:Oe.loadingSourceTiles--,ri===TileState.ERROR?Oe.errorTileKeys[oi]=!0:Bn.removeEventListener(EventType.CHANGE,ni),Oe.loadingSourceTiles===0&&Oe.setState(isEmpty$1(Oe.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};Bn.addEventListener(EventType.CHANGE,ni),Oe.loadingSourceTiles++}ei===TileState.IDLE&&(Bn.extent=An.getTileCoordExtent(Tn),Bn.projection=Te,Bn.resolution=An.getResolution(Tn[0]),Bn.load())}),Oe.loadingSourceTiles||Oe.setState(Oe.sourceTiles.some(Tn=>Tn.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return Oe.sourceTiles}removeSourceTiles(e){const Te=e.getKey(),Oe=e.sourceTiles;for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be].getTileUrl();if(!this.tileKeysBySourceTileUrl_[He])return;const We=this.tileKeysBySourceTileUrl_[He].indexOf(Te);We!==-1&&(this.tileKeysBySourceTileUrl_[He].splice(We,1),this.tileKeysBySourceTileUrl_[He].length===0&&(delete this.tileKeysBySourceTileUrl_[He],delete this.sourceTiles_[He]))}}getTile(e,Te,Oe,Be,Ue){const He=[e,Te,Oe];let We=this.getTileCoordForTileUrlFunction(He,Ue);const Cn=this.getTileGrid().getExtent(),An=this.getTileGridForProjection(Ue);if(We&&Cn){const Tn=An.getTileCoordExtent(We);buffer(Tn,-An.getResolution(e),Tn),intersects$1(Cn,Tn)||(We=null)}let En=!0;if(We!==null){const Tn=this.tileGrid,Ln=An.getResolution(e),Bn=Tn.getZForResolution(Ln,1),ei=An.getTileCoordExtent(We);buffer(ei,-Ln,ei),Tn.forEachTileCoord(ei,Bn,ni=>{En=En&&!this.tileUrlFunction(ni,Be,Ue)})}const Sn=new VectorRenderTile(He,En?TileState.EMPTY:TileState.IDLE,We,this.getSourceTiles.bind(this,Be,Ue),this.removeSourceTiles.bind(this));return Sn.key=this.getKey(),Sn}getTileGridForProjection(e){const Te=e.getCode();let Oe=this.tileGrids_[Te];if(!Oe){const Be=this.tileGrid,Ue=Be.getResolutions().slice(),He=Ue.map(function(An,En){return Be.getOrigin(En)}),We=Ue.map(function(An,En){return Be.getTileSize(En)}),Cn=DEFAULT_MAX_ZOOM+1;for(let An=Ue.length;An<Cn;++An)Ue.push(Ue[An-1]/2),He.push(He[An-1]),We.push(We[An-1]);Oe=new TileGrid({extent:Be.getExtent(),origins:He,resolutions:Ue,tileSizes:We}),this.tileGrids_[Te]=Oe}return Oe}getTilePixelRatio(e){return e}getTilePixelSize(e,Te,Oe){const Be=this.getTileGridForProjection(Oe),Ue=toSize(Be.getTileSize(e),this.tmpSize);return[Math.round(Ue[0]*Te),Math.round(Ue[1]*Te)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(ke,e){ke.setLoader(function(Te,Oe,Be){loadFeaturesXhr(e,ke.getFormat(),Te,Oe,Be,ke.onLoad.bind(ke),ke.onError.bind(ke))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.element=Te,this.index=Oe}}class Collection extends BaseObject{constructor(e,Te){if(super(),this.on,this.once,this.un,Te=Te||{},this.unique_=!!Te.unique,this.array_=e||[],this.unique_)for(let Oe=0,Be=this.array_.length;Oe<Be;++Oe)this.assertUnique_(this.array_[Oe],Oe);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let Te=0,Oe=e.length;Te<Oe;++Te)this.push(e[Te]);return this}forEach(e){const Te=this.array_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)e(Te[Oe],Oe,Te)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,Te){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(Te),this.array_.splice(e,0,Te),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,Te,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const Te=this.getLength();return this.insertAt(Te,e),this.getLength()}remove(e){const Te=this.array_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)if(Te[Oe]===e)return this.removeAt(Oe)}removeAt(e){if(e<0||e>=this.getLength())return;const Te=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Te,e)),Te}setAt(e,Te){const Oe=this.getLength();if(e>=Oe){this.insertAt(e,Te);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(Te,e);const Be=this.array_[e];this.array_[e]=Te,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Be,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,Te,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,Te){for(let Oe=0,Be=this.array_.length;Oe<Be;++Oe)if(this.array_[Oe]===e&&Oe!==Te)throw new Error("Duplicate item added to a unique collection")}}function all$1(ke,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(ke,e){return[ke]}function tile(ke){return function(e,Te,Oe){const Be=ke.getZForResolution(fromUserResolution(Te)),Ue=ke.getTileRangeForExtentAndZ(fromUserExtent(e),Be),He=[],We=[Be,0,0];for(We[1]=Ue.minX;We[1]<=Ue.maxX;++We[1])for(We[2]=Ue.minY;We[2]<=Ue.maxY;++We[2])He.push(toUserExtent(ke.getTileCoordExtent(We)));return He}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const Te=e;this.setGeometry(Te)}else{const Te=e;this.setProperties(Te)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const Te=this.getGeometry();Te&&e.setGeometry(Te.clone());const Oe=this.getStyle();return Oe&&e.setStyle(Oe),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(ke){if(typeof ke=="function")return ke;let e;return Array.isArray(ke)?e=ke:(assert(typeof ke.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[ke]),function(){return e}}function linearRingss$1(ke,e,Te,Oe){const Be=[];let Ue=createEmpty();for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Ue=createOrUpdateFromFlatCoordinates(ke,e,Cn[0],Oe),Be.push((Ue[0]+Ue[2])/2,(Ue[1]+Ue[3])/2),e=Cn[Cn.length-1]}return Be}function getInteriorPointOfArray(ke,e,Te,Oe,Be,Ue,He){let We,Cn,An,En,Sn,Tn,Ln;const Bn=Be[Ue+1],ei=[];for(let ri=0,oi=Te.length;ri<oi;++ri){const ai=Te[ri];for(En=ke[ai-Oe],Tn=ke[ai-Oe+1],We=e;We<ai;We+=Oe)Sn=ke[We],Ln=ke[We+1],(Bn<=Tn&&Ln<=Bn||Tn<=Bn&&Bn<=Ln)&&(An=(Bn-Tn)/(Ln-Tn)*(Sn-En)+En,ei.push(An)),En=Sn,Tn=Ln}let ni=NaN,ti=-1/0;for(ei.sort(ascending),En=ei[0],We=1,Cn=ei.length;We<Cn;++We){Sn=ei[We];const ri=Math.abs(Sn-En);ri>ti&&(An=(En+Sn)/2,linearRingsContainsXY(ke,e,Te,Oe,An,Bn)&&(ni=An,ti=ri)),En=Sn}return isNaN(ni)&&(ni=Be[Ue]),He?(He.push(ni,Bn,ti),He):[ni,Bn,ti]}function getInteriorPointsOfMultiArray(ke,e,Te,Oe,Be){let Ue=[];for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Ue=getInteriorPointOfArray(ke,e,Cn,Oe,Be,2*He,Ue),e=Cn[Cn.length-1]}return Ue}function interpolatePoint(ke,e,Te,Oe,Be,Ue,He){let We,Cn;const An=(Te-e)/Oe;if(An===1)We=e;else if(An===2)We=e,Cn=Be;else if(An!==0){let En=ke[e],Sn=ke[e+1],Tn=0;const Ln=[0];for(let ni=e+Oe;ni<Te;ni+=Oe){const ti=ke[ni],ri=ke[ni+1];Tn+=Math.sqrt((ti-En)*(ti-En)+(ri-Sn)*(ri-Sn)),Ln.push(Tn),En=ti,Sn=ri}const Bn=Be*Tn,ei=binarySearch$1(Ln,Bn);ei<0?(Cn=(Bn-Ln[-ei-2])/(Ln[-ei-1]-Ln[-ei-2]),We=e+(-ei-2)*Oe):We=e+ei*Oe}He=He>1?He:2,Ue=Ue||new Array(He);for(let En=0;En<He;++En)Ue[En]=We===void 0?NaN:Cn===void 0?ke[We+En]:lerp(ke[We+En],ke[We+Oe+En],Cn);return Ue}function lineStringCoordinateAtM(ke,e,Te,Oe,Be,Ue){if(Te==e)return null;let He;if(Be<ke[e+Oe-1])return Ue?(He=ke.slice(e,e+Oe),He[Oe-1]=Be,He):null;if(ke[Te-1]<Be)return Ue?(He=ke.slice(Te-Oe,Te),He[Oe-1]=Be,He):null;if(Be==ke[e+Oe-1])return ke.slice(e,e+Oe);let We=e/Oe,Cn=Te/Oe;for(;We<Cn;){const Tn=We+Cn>>1;Be<ke[(Tn+1)*Oe-1]?Cn=Tn:We=Tn+1}const An=ke[We*Oe-1];if(Be==An)return ke.slice((We-1)*Oe,(We-1)*Oe+Oe);const En=ke[(We+1)*Oe-1],Sn=(Be-An)/(En-An);He=[];for(let Tn=0;Tn<Oe-1;++Tn)He.push(lerp(ke[(We-1)*Oe+Tn],ke[We*Oe+Tn],Sn));return He.push(Be),He}function lineStringsCoordinateAtM(ke,e,Te,Oe,Be,Ue,He){if(He)return lineStringCoordinateAtM(ke,e,Te[Te.length-1],Oe,Be,Ue);let We;if(Be<ke[Oe-1])return Ue?(We=ke.slice(0,Oe),We[Oe-1]=Be,We):null;if(ke[ke.length-1]<Be)return Ue?(We=ke.slice(ke.length-Oe),We[Oe-1]=Be,We):null;for(let Cn=0,An=Te.length;Cn<An;++Cn){const En=Te[Cn];if(e!=En){if(Be<ke[e+Oe-1])return null;if(Be<=ke[En-1])return lineStringCoordinateAtM(ke,e,En,Oe,Be,!1);e=En}}return null}function coordinates(ke,e,Te,Oe){for(;e<Te-Oe;){for(let Be=0;Be<Oe;++Be){const Ue=ke[e+Be];ke[e+Be]=ke[Te-Oe+Be],ke[Te-Oe+Be]=Ue}e+=Oe,Te-=Oe}}function linearRingIsClockwise(ke,e,Te,Oe){let Be=0,Ue=ke[Te-Oe],He=ke[Te-Oe+1];for(;e<Te;e+=Oe){const We=ke[e],Cn=ke[e+1];Be+=(We-Ue)*(Cn+He),Ue=We,He=Cn}return Be===0?void 0:Be>0}function linearRingsAreOriented(ke,e,Te,Oe,Be){Be=Be!==void 0?Be:!1;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue],Cn=linearRingIsClockwise(ke,e,We,Oe);if(Ue===0){if(Be&&Cn||!Be&&!Cn)return!1}else if(Be&&!Cn||!Be&&Cn)return!1;e=We}return!0}function linearRingssAreOriented(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];if(!linearRingsAreOriented(ke,e,We,Oe,Be))return!1;We.length&&(e=We[We.length-1])}return!0}function orientLinearRings(ke,e,Te,Oe,Be){Be=Be!==void 0?Be:!1;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue],Cn=linearRingIsClockwise(ke,e,We,Oe);(Ue===0?Be&&Cn||!Be&&!Cn:Be&&!Cn||!Be&&Cn)&&coordinates(ke,e,We,Oe),e=We}return e}function orientLinearRingsArray(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue)e=orientLinearRings(ke,e,Te[Ue],Oe,Be);return e}function inflateEnds(ke,e){const Te=[];let Oe=0,Be=0,Ue;for(let He=0,We=e.length;He<We;++He){const Cn=e[He],An=linearRingIsClockwise(ke,Oe,Cn,2);if(Ue===void 0&&(Ue=An),An===Ue)Te.push(e.slice(Be,He+1));else{if(Te.length===0)continue;Te[Te.length-1].push(e[Be])}Be=He+1,Oe=Cn}return Te}function douglasPeucker(ke,e,Te,Oe,Be,Ue,He){const We=(Te-e)/Oe;if(We<3){for(;e<Te;e+=Oe)Ue[He++]=ke[e],Ue[He++]=ke[e+1];return He}const Cn=new Array(We);Cn[0]=1,Cn[We-1]=1;const An=[e,Te-Oe];let En=0;for(;An.length>0;){const Sn=An.pop(),Tn=An.pop();let Ln=0;const Bn=ke[Tn],ei=ke[Tn+1],ni=ke[Sn],ti=ke[Sn+1];for(let ri=Tn+Oe;ri<Sn;ri+=Oe){const oi=ke[ri],ai=ke[ri+1],ci=squaredSegmentDistance(oi,ai,Bn,ei,ni,ti);ci>Ln&&(En=ri,Ln=ci)}Ln>Be&&(Cn[(En-e)/Oe]=1,Tn+Oe<En&&An.push(Tn,En),En+Oe<Sn&&An.push(En,Sn))}for(let Sn=0;Sn<We;++Sn)Cn[Sn]&&(Ue[He++]=ke[e+Sn*Oe],Ue[He++]=ke[e+Sn*Oe+1]);return He}function douglasPeuckerArray(ke,e,Te,Oe,Be,Ue,He,We){for(let Cn=0,An=Te.length;Cn<An;++Cn){const En=Te[Cn];He=douglasPeucker(ke,e,En,Oe,Be,Ue,He),We.push(He),e=En}return He}function snap(ke,e){return e*Math.round(ke/e)}function quantize(ke,e,Te,Oe,Be,Ue,He){if(e==Te)return He;let We=snap(ke[e],Be),Cn=snap(ke[e+1],Be);e+=Oe,Ue[He++]=We,Ue[He++]=Cn;let An,En;do if(An=snap(ke[e],Be),En=snap(ke[e+1],Be),e+=Oe,e==Te)return Ue[He++]=An,Ue[He++]=En,He;while(An==We&&En==Cn);for(;e<Te;){const Sn=snap(ke[e],Be),Tn=snap(ke[e+1],Be);if(e+=Oe,Sn==An&&Tn==En)continue;const Ln=An-We,Bn=En-Cn,ei=Sn-We,ni=Tn-Cn;if(Ln*ni==Bn*ei&&(Ln<0&&ei<Ln||Ln==ei||Ln>0&&ei>Ln)&&(Bn<0&&ni<Bn||Bn==ni||Bn>0&&ni>Bn)){An=Sn,En=Tn;continue}Ue[He++]=An,Ue[He++]=En,We=An,Cn=En,An=Sn,En=Tn}return Ue[He++]=An,Ue[He++]=En,He}function quantizeArray(ke,e,Te,Oe,Be,Ue,He,We){for(let Cn=0,An=Te.length;Cn<An;++Cn){const En=Te[Cn];He=quantize(ke,e,En,Oe,Be,Ue,He),We.push(He),e=En}return He}function quantizeMultiArray(ke,e,Te,Oe,Be,Ue,He,We){for(let Cn=0,An=Te.length;Cn<An;++Cn){const En=Te[Cn],Sn=[];He=quantizeArray(ke,e,En,Oe,Be,Ue,He,Sn),We.push(Sn),e=En[En.length-1]}return He}function transform2D(ke,e,Te,Oe,Be,Ue,He){Ue=Ue||[],He=He||2;let We=0;for(let Cn=e;Cn<Te;Cn+=Oe){const An=ke[Cn],En=ke[Cn+1];Ue[We++]=Be[0]*An+Be[2]*En+Be[4],Ue[We++]=Be[1]*An+Be[3]*En+Be[5];for(let Sn=2;Sn<He;Sn++)Ue[We++]=ke[Cn+Sn]}return Ue&&Ue.length!=We&&(Ue.length=We),Ue}function rotate(ke,e,Te,Oe,Be,Ue,He){He=He||[];const We=Math.cos(Be),Cn=Math.sin(Be),An=Ue[0],En=Ue[1];let Sn=0;for(let Tn=e;Tn<Te;Tn+=Oe){const Ln=ke[Tn]-An,Bn=ke[Tn+1]-En;He[Sn++]=An+Ln*We-Bn*Cn,He[Sn++]=En+Ln*Cn+Bn*We;for(let ei=Tn+2;ei<Tn+Oe;++ei)He[Sn++]=ke[ei]}return He&&He.length!=Sn&&(He.length=Sn),He}function scale$1(ke,e,Te,Oe,Be,Ue,He,We){We=We||[];const Cn=He[0],An=He[1];let En=0;for(let Sn=e;Sn<Te;Sn+=Oe){const Tn=ke[Sn]-Cn,Ln=ke[Sn+1]-An;We[En++]=Cn+Be*Tn,We[En++]=An+Ue*Ln;for(let Bn=Sn+2;Bn<Sn+Oe;++Bn)We[En++]=ke[Bn]}return We&&We.length!=En&&(We.length=En),We}function translate$1(ke,e,Te,Oe,Be,Ue,He){He=He||[];let We=0;for(let Cn=e;Cn<Te;Cn+=Oe){He[We++]=ke[Cn]+Be,He[We++]=ke[Cn+1]+Ue;for(let An=Cn+2;An<Cn+Oe;++An)He[We++]=ke[An]}return He&&He.length!=We&&(He.length=We),He}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(ke){return set(ke,1,0,0,1,0,0)}function multiply(ke,e){const Te=ke[0],Oe=ke[1],Be=ke[2],Ue=ke[3],He=ke[4],We=ke[5],Cn=e[0],An=e[1],En=e[2],Sn=e[3],Tn=e[4],Ln=e[5];return ke[0]=Te*Cn+Be*An,ke[1]=Oe*Cn+Ue*An,ke[2]=Te*En+Be*Sn,ke[3]=Oe*En+Ue*Sn,ke[4]=Te*Tn+Be*Ln+He,ke[5]=Oe*Tn+Ue*Ln+We,ke}function set(ke,e,Te,Oe,Be,Ue,He){return ke[0]=e,ke[1]=Te,ke[2]=Oe,ke[3]=Be,ke[4]=Ue,ke[5]=He,ke}function setFromArray(ke,e){return ke[0]=e[0],ke[1]=e[1],ke[2]=e[2],ke[3]=e[3],ke[4]=e[4],ke[5]=e[5],ke}function apply(ke,e){const Te=e[0],Oe=e[1];return e[0]=ke[0]*Te+ke[2]*Oe+ke[4],e[1]=ke[1]*Te+ke[3]*Oe+ke[5],e}function scale(ke,e,Te){return multiply(ke,set(tmp_,e,0,0,Te,0,0))}function translate(ke,e,Te){return multiply(ke,set(tmp_,1,0,0,1,e,Te))}function compose(ke,e,Te,Oe,Be,Ue,He,We){const Cn=Math.sin(Ue),An=Math.cos(Ue);return ke[0]=Oe*An,ke[1]=Be*Cn,ke[2]=-Oe*Cn,ke[3]=Be*An,ke[4]=He*Oe*An-We*Oe*Cn+e,ke[5]=He*Be*Cn+We*Be*An+Te,ke}function makeInverse(ke,e){const Te=determinant(e);assert(Te!==0,"Transformation matrix cannot be inverted");const Oe=e[0],Be=e[1],Ue=e[2],He=e[3],We=e[4],Cn=e[5];return ke[0]=He/Te,ke[1]=-Be/Te,ke[2]=-Ue/Te,ke[3]=Oe/Te,ke[4]=(Ue*Cn-He*We)/Te,ke[5]=-(Oe*Cn-Be*We)/Te,ke}function determinant(ke){return ke[0]*ke[3]-ke[1]*ke[2]}const matrixPrecision=[1e6,1e6,1e6,1e6,2,2];function toString$1(ke){return"matrix("+ke.map((Te,Oe)=>Math.round(Te*matrixPrecision[Oe])/matrixPrecision[Oe]).join(", ")+")"}const tmpTransform$1=create(),tmpPoint=[NaN,NaN];class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,Te,Oe)=>{if(!Oe)return this.getSimplifiedGeometry(Te);const Be=this.clone();return Be.applyTransform(Oe),Be.getSimplifiedGeometry(Te)})}simplifyTransformed(e,Te){return this.simplifyTransformedInternal(this.getRevision(),e,Te)}clone(){return abstract()}closestPointXY(e,Te,Oe,Be){return abstract()}containsXY(e,Te){return this.closestPointXY(e,Te,tmpPoint,Number.MIN_VALUE)===0}getClosestPoint(e,Te){return Te=Te||[NaN,NaN],this.closestPointXY(e[0],e[1],Te,1/0),Te}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const Te=this.computeExtent(this.extent_);(isNaN(Te[0])||isNaN(Te[1]))&&createOrUpdateEmpty(Te),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,Te){abstract()}scale(e,Te,Oe){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,Te){abstract()}transform(e,Te){const Oe=get$3(e),Be=Oe.getUnits()=="tile-pixels"?function(Ue,He,We){const Cn=Oe.getExtent(),An=Oe.getWorldExtent(),En=getHeight(An)/getHeight(Cn);compose(tmpTransform$1,An[0],An[3],En,-En,0,0,0);const Sn=transform2D(Ue,0,Ue.length,We,tmpTransform$1,He),Tn=getTransform(Oe,Te);return Tn?Tn(Sn,Sn,We):Sn}:getTransform(Oe,Te);return this.applyTransform(Be),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Te=this.getSimplifiedGeometryInternal(e);return Te.getFlatCoordinates().length<this.flatCoordinates.length?Te:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,Te){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=Te}setCoordinates(e,Te){abstract()}setLayout(e,Te,Oe){let Be;if(e)Be=getStrideForLayout(e);else{for(let Ue=0;Ue<Oe;++Ue){if(Te.length===0){this.layout="XY",this.stride=2;return}Te=Te[0]}Be=Te.length,e=getLayoutForStride(Be)}this.layout=e,this.stride=Be}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,Te){const Oe=this.getFlatCoordinates();if(Oe){const Be=this.getStride();rotate(Oe,0,Oe.length,Be,e,Te,Oe),this.changed()}}scale(e,Te,Oe){Te===void 0&&(Te=e),Oe||(Oe=getCenter(this.getExtent()));const Be=this.getFlatCoordinates();if(Be){const Ue=this.getStride();scale$1(Be,0,Be.length,Ue,e,Te,Oe,Be),this.changed()}}translate(e,Te){const Oe=this.getFlatCoordinates();if(Oe){const Be=this.getStride();translate$1(Oe,0,Oe.length,Be,e,Te,Oe),this.changed()}}}function getLayoutForStride(ke){let e;return ke==2?e="XY":ke==3?e="XYZ":ke==4&&(e="XYZM"),e}function getStrideForLayout(ke){let e;return ke=="XY"?e=2:ke=="XYZ"||ke=="XYM"?e=3:ke=="XYZM"&&(e=4),e}function transformGeom2D(ke,e,Te){const Oe=ke.getFlatCoordinates();if(!Oe)return null;const Be=ke.getStride();return transform2D(Oe,0,Oe.length,Be,e,Te)}function deflateCoordinate(ke,e,Te,Oe){for(let Be=0,Ue=Te.length;Be<Ue;++Be)ke[e++]=Te[Be];return e}function deflateCoordinates(ke,e,Te,Oe){for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=Te[Be];for(let We=0;We<Oe;++We)ke[e++]=He[We]}return e}function deflateCoordinatesArray(ke,e,Te,Oe,Be){Be=Be||[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=deflateCoordinates(ke,e,Te[He],Oe);Be[Ue++]=Cn,e=Cn}return Be.length=Ue,Be}function deflateMultiCoordinatesArray(ke,e,Te,Oe,Be){Be=Be||[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=deflateCoordinatesArray(ke,e,Te[He],Oe,Be[Ue]);Cn.length===0&&(Cn[0]=e),Be[Ue++]=Cn,e=Cn[Cn.length-1]}return Be.length=Ue,Be}class Circle extends SimpleGeometry{constructor(e,Te,Oe){super(),Oe!==void 0&&Te===void 0?this.setFlatCoordinates(Oe,e):(Te=Te||0,this.setCenterAndRadius(e,Te,Oe))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){const Ue=this.flatCoordinates,He=e-Ue[0],We=Te-Ue[1],Cn=He*He+We*We;if(Cn<Be){if(Cn===0)for(let An=0;An<this.stride;++An)Oe[An]=Ue[An];else{const An=this.getRadius()/Math.sqrt(Cn);Oe[0]=Ue[0]+An*He,Oe[1]=Ue[1]+An*We;for(let En=2;En<this.stride;++En)Oe[En]=Ue[En]}return Oe.length=this.stride,Cn}return Be}containsXY(e,Te){const Oe=this.flatCoordinates,Be=e-Oe[0],Ue=Te-Oe[1];return Be*Be+Ue*Ue<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const Te=this.flatCoordinates,Oe=Te[this.stride]-Te[0];return createOrUpdate$2(Te[0]-Oe,Te[1]-Oe,Te[0]+Oe,Te[1]+Oe,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],Te=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+Te*Te}getType(){return"Circle"}intersectsExtent(e){const Te=this.getExtent();if(intersects$1(e,Te)){const Oe=this.getCenter();return e[0]<=Oe[0]&&e[2]>=Oe[0]||e[1]<=Oe[1]&&e[3]>=Oe[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const Te=this.stride,Oe=this.flatCoordinates[Te]-this.flatCoordinates[0],Be=e.slice();Be[Te]=Be[0]+Oe;for(let Ue=1;Ue<Te;++Ue)Be[Te+Ue]=e[Ue];this.setFlatCoordinates(this.layout,Be),this.changed()}setCenterAndRadius(e,Te,Oe){this.setLayout(Oe,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const Be=this.flatCoordinates;let Ue=deflateCoordinate(Be,0,e,this.stride);Be[Ue++]=Be[0]+Te;for(let He=1,We=this.stride;He<We;++He)Be[Ue++]=Be[He];Be.length=Ue,this.changed()}getCoordinates(){return null}setCoordinates(e,Te){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,Te){const Oe=this.getCenter(),Be=this.getStride();this.setCenter(rotate(Oe,0,Oe.length,Be,e,Te,Oe)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let Te=0,Oe=e.length;Te<Oe;++Te)this.changeEventsKeys_.push(listen(e[Te],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){if(Be<closestSquaredDistanceXY(this.getExtent(),e,Te))return Be;const Ue=this.geometries_;for(let He=0,We=Ue.length;He<We;++He)Be=Ue[He].closestPointXY(e,Te,Oe,Be);return Be}containsXY(e,Te){const Oe=this.geometries_;for(let Be=0,Ue=Oe.length;Be<Ue;++Be)if(Oe[Be].containsXY(e,Te))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const Te=this.geometries_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)extend$3(e,Te[Oe].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const Te=this.geometries_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)Te[Oe].getType()===this.getType()?e=e.concat(Te[Oe].getGeometriesArrayRecursive()):e.push(Te[Oe]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Te=[],Oe=this.geometries_;let Be=!1;for(let Ue=0,He=Oe.length;Ue<He;++Ue){const We=Oe[Ue],Cn=We.getSimplifiedGeometry(e);Te.push(Cn),Cn!==We&&(Be=!0)}return Be?new GeometryCollection(Te):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const Te=this.geometries_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)if(Te[Oe].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,Te){const Oe=this.geometries_;for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be].rotate(e,Te);this.changed()}scale(e,Te,Oe){Oe||(Oe=getCenter(this.getExtent()));const Be=this.geometries_;for(let Ue=0,He=Be.length;Ue<He;++Ue)Be[Ue].scale(e,Te,Oe);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const Te=this.geometries_;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)Te[Oe].applyTransform(e);this.changed()}translate(e,Te){const Oe=this.geometries_;for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be].translate(e,Te);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(ke){return ke.map(e=>e.clone())}function linearRing(ke,e,Te,Oe){let Be=0;const Ue=ke[Te-Oe],He=ke[Te-Oe+1];let We=0,Cn=0;for(;e<Te;e+=Oe){const An=ke[e]-Ue,En=ke[e+1]-He;Be+=Cn*An-We*En,We=An,Cn=En}return Be/2}function linearRings(ke,e,Te,Oe){let Be=0;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be+=linearRing(ke,e,We,Oe),e=We}return Be}function linearRingss(ke,e,Te,Oe){let Be=0;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be+=linearRings(ke,e,We,Oe),e=We[We.length-1]}return Be}function assignClosest(ke,e,Te,Oe,Be,Ue,He){const We=ke[e],Cn=ke[e+1],An=ke[Te]-We,En=ke[Te+1]-Cn;let Sn;if(An===0&&En===0)Sn=e;else{const Tn=((Be-We)*An+(Ue-Cn)*En)/(An*An+En*En);if(Tn>1)Sn=Te;else if(Tn>0){for(let Ln=0;Ln<Oe;++Ln)He[Ln]=lerp(ke[e+Ln],ke[Te+Ln],Tn);He.length=Oe;return}else Sn=e}for(let Tn=0;Tn<Oe;++Tn)He[Tn]=ke[Sn+Tn];He.length=Oe}function maxSquaredDelta(ke,e,Te,Oe,Be){let Ue=ke[e],He=ke[e+1];for(e+=Oe;e<Te;e+=Oe){const We=ke[e],Cn=ke[e+1],An=squaredDistance$1(Ue,He,We,Cn);An>Be&&(Be=An),Ue=We,He=Cn}return Be}function arrayMaxSquaredDelta(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be=maxSquaredDelta(ke,e,We,Oe,Be),e=We}return Be}function multiArrayMaxSquaredDelta(ke,e,Te,Oe,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be=arrayMaxSquaredDelta(ke,e,We,Oe,Be),e=We[We.length-1]}return Be}function assignClosestPoint(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En){if(e==Te)return An;let Sn,Tn;if(Be===0){if(Tn=squaredDistance$1(He,We,ke[e],ke[e+1]),Tn<An){for(Sn=0;Sn<Oe;++Sn)Cn[Sn]=ke[e+Sn];return Cn.length=Oe,Tn}return An}En=En||[NaN,NaN];let Ln=e+Oe;for(;Ln<Te;)if(assignClosest(ke,Ln-Oe,Ln,Oe,He,We,En),Tn=squaredDistance$1(He,We,En[0],En[1]),Tn<An){for(An=Tn,Sn=0;Sn<Oe;++Sn)Cn[Sn]=En[Sn];Cn.length=Oe,Ln+=Oe}else Ln+=Oe*Math.max((Math.sqrt(Tn)-Math.sqrt(An))/Be|0,1);if(Ue&&(assignClosest(ke,Te-Oe,e,Oe,He,We,En),Tn=squaredDistance$1(He,We,En[0],En[1]),Tn<An)){for(An=Tn,Sn=0;Sn<Oe;++Sn)Cn[Sn]=En[Sn];Cn.length=Oe}return An}function assignClosestArrayPoint(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En){En=En||[NaN,NaN];for(let Sn=0,Tn=Te.length;Sn<Tn;++Sn){const Ln=Te[Sn];An=assignClosestPoint(ke,e,Ln,Oe,Be,Ue,He,We,Cn,An,En),e=Ln}return An}function assignClosestMultiArrayPoint(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En){En=En||[NaN,NaN];for(let Sn=0,Tn=Te.length;Sn<Tn;++Sn){const Ln=Te[Sn];An=assignClosestArrayPoint(ke,e,Ln,Oe,Be,Ue,He,We,Cn,An,En),e=Ln[Ln.length-1]}return An}function inflateCoordinates(ke,e,Te,Oe,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=e;He<Te;He+=Oe)Be[Ue++]=ke.slice(He,He+Oe);return Be.length=Ue,Be}function inflateCoordinatesArray(ke,e,Te,Oe,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Be[Ue++]=inflateCoordinates(ke,e,Cn,Oe,Be[Ue]),e=Cn}return Be.length=Ue,Be}function inflateMultiCoordinatesArray(ke,e,Te,Oe,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Be[Ue++]=Cn.length===1&&Cn[0]===e?[]:inflateCoordinatesArray(ke,e,Cn,Oe,Be[Ue]),e=Cn[Cn.length-1]}return Be.length=Ue,Be}class LinearRing extends SimpleGeometry{constructor(e,Te){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,Te!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,Te,Oe,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,Te,Oe,Be))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const Te=[];return Te.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,0),new LinearRing(Te,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function lineStringLength(ke,e,Te,Oe){let Be=ke[e],Ue=ke[e+1],He=0;for(let We=e+Oe;We<Te;We+=Oe){const Cn=ke[We],An=ke[We+1];He+=Math.sqrt((Cn-Be)*(Cn-Be)+(An-Ue)*(An-Ue)),Be=Cn,Ue=An}return He}class LineString extends SimpleGeometry{constructor(e,Te){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,Te!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,Te,Oe,Be))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,Te){return this.layout!="XYM"&&this.layout!="XYZM"?null:(Te=Te!==void 0?Te:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,Te){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const Te=[];return Te.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,0),new LineString(Te,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,Te,Oe){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,Te);else if(Te!==void 0&&Oe)this.setFlatCoordinates(Te,e),this.ends_=Oe;else{const Be=e,Ue=[],He=[];for(let Cn=0,An=Be.length;Cn<An;++Cn){const En=Be[Cn];extend$4(Ue,En.getFlatCoordinates()),He.push(Ue.length)}const We=Be.length===0?this.getLayout():Be[0].getLayout();this.setFlatCoordinates(We,Ue),this.ends_=He}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,Te,Oe,Be))}getCoordinateAtM(e,Te,Oe){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(Te=Te!==void 0?Te:!1,Oe=Oe!==void 0?Oe:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,Te,Oe))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,Te=this.ends_,Oe=this.layout,Be=[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He],An=new LineString(e.slice(Ue,Cn),Oe);Be.push(An),Ue=Cn}return Be}getFlatMidpoints(){const e=[],Te=this.flatCoordinates;let Oe=0;const Be=this.ends_,Ue=this.stride;for(let He=0,We=Be.length;He<We;++He){const Cn=Be[He],An=interpolatePoint(Te,Oe,Cn,Ue,.5);extend$4(e,An),Oe=Cn}return e}getSimplifiedGeometryInternal(e){const Te=[],Oe=[];return Te.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,Te,0,Oe),new MultiLineString(Te,"XY",Oe)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}let Point$1=class Bf extends SimpleGeometry{constructor(e,Te){super(),this.setCoordinates(e,Te)}clone(){const e=new Bf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){const Ue=this.flatCoordinates,He=squaredDistance$1(e,Te,Ue[0],Ue[1]);if(He<Be){const We=this.stride;for(let Cn=0;Cn<We;++Cn)Oe[Cn]=Ue[Cn];return Oe.length=We,He}return Be}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,Te){this.setLayout(Te,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,Te){super(),Te&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){if(Be<closestSquaredDistanceXY(this.getExtent(),e,Te))return Be;const Ue=this.flatCoordinates,He=this.stride;for(let We=0,Cn=Ue.length;We<Cn;We+=He){const An=squaredDistance$1(e,Te,Ue[We],Ue[We+1]);if(An<Be){Be=An;for(let En=0;En<He;++En)Oe[En]=Ue[We+En];Oe.length=He}}return Be}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const Te=this.flatCoordinates.length/this.stride;return e<0||Te<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,Te=this.layout,Oe=this.stride,Be=[];for(let Ue=0,He=e.length;Ue<He;Ue+=Oe){const We=new Point$1(e.slice(Ue,Ue+Oe),Te);Be.push(We)}return Be}getType(){return"MultiPoint"}intersectsExtent(e){const Te=this.flatCoordinates,Oe=this.stride;for(let Be=0,Ue=Te.length;Be<Ue;Be+=Oe){const He=Te[Be],We=Te[Be+1];if(containsXY(e,He,We))return!0}return!1}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class Polygon extends SimpleGeometry{constructor(e,Te,Oe){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,Te!==void 0&&Oe?(this.setFlatCoordinates(Te,e),this.ends_=Oe):this.setCoordinates(e,Te)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,Te,Oe,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,Te,Oe,Be))}containsXY(e,Te){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,Te)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let Te;return e!==void 0?(Te=this.getOrientedFlatCoordinates().slice(),orientLinearRings(Te,0,this.ends_,this.stride,e)):Te=this.flatCoordinates,inflateCoordinatesArray(Te,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,Te=this.flatCoordinates,Oe=this.ends_,Be=[];let Ue=0;for(let He=0,We=Oe.length;He<We;++He){const Cn=Oe[He],An=new LinearRing(Te.slice(Ue,Cn),e);Be.push(An),Ue=Cn}return Be}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const Te=[],Oe=[];return Te.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),Te,0,Oe),new Polygon(Te,"XY",Oe)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}function fromExtent(ke){if(isEmpty(ke))throw new Error("Cannot create polygon from empty extent");const e=ke[0],Te=ke[1],Oe=ke[2],Be=ke[3],Ue=[e,Te,e,Be,Oe,Be,Oe,Te,e,Te];return new Polygon(Ue,"XY",[Ue.length])}class MultiPolygon extends SimpleGeometry{constructor(e,Te,Oe){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!Oe&&!Array.isArray(e[0])){const Be=e,Ue=[],He=[];for(let We=0,Cn=Be.length;We<Cn;++We){const An=Be[We],En=Ue.length,Sn=An.getEnds();for(let Tn=0,Ln=Sn.length;Tn<Ln;++Tn)Sn[Tn]+=En;extend$4(Ue,An.getFlatCoordinates()),He.push(Sn)}Te=Be.length===0?this.getLayout():Be[0].getLayout(),e=Ue,Oe=He}Te!==void 0&&Oe?(this.setFlatCoordinates(Te,e),this.endss_=Oe):this.setCoordinates(e,Te)}appendPolygon(e){let Te;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),Te=e.getEnds().slice(),this.endss_.push();else{const Oe=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),Te=e.getEnds().slice();for(let Be=0,Ue=Te.length;Be<Ue;++Be)Te[Be]+=Oe}this.endss_.push(Te),this.changed()}clone(){const e=this.endss_.length,Te=new Array(e);for(let Be=0;Be<e;++Be)Te[Be]=this.endss_[Be].slice();const Oe=new MultiPolygon(this.flatCoordinates.slice(),this.layout,Te);return Oe.applyProperties(this),Oe}closestPointXY(e,Te,Oe,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,Te,Oe,Be))}containsXY(e,Te){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,Te)}getArea(){return linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let Te;return e!==void 0?(Te=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(Te,0,this.endss_,this.stride,e)):Te=this.flatCoordinates,inflateMultiCoordinatesArray(Te,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss$1(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const Te=[],Oe=[];return Te.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),Te,0,Oe),new MultiPolygon(Te,"XY",Oe)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let Te;if(e===0)Te=0;else{const Ue=this.endss_[e-1];Te=Ue[Ue.length-1]}const Oe=this.endss_[e].slice(),Be=Oe[Oe.length-1];if(Te!==0)for(let Ue=0,He=Oe.length;Ue<He;++Ue)Oe[Ue]-=Te;return new Polygon(this.flatCoordinates.slice(Te,Be),this.layout,Oe)}getPolygons(){const e=this.layout,Te=this.flatCoordinates,Oe=this.endss_,Be=[];let Ue=0;for(let He=0,We=Oe.length;He<We;++He){const Cn=Oe[He].slice(),An=Cn[Cn.length-1];if(Ue!==0)for(let Sn=0,Tn=Cn.length;Sn<Tn;++Sn)Cn[Sn]-=Ue;const En=new Polygon(Te.slice(Ue,An),e,Cn);Be.push(En),Ue=An}return Be}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(Oe.length===0)this.flatCoordinates.length=0;else{const Be=Oe[Oe.length-1];this.flatCoordinates.length=Be.length===0?0:Be[Be.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,Te,Oe,Be,Ue,He){this.styleFunction,this.extent_,this.id_=He,this.type_=e,this.flatCoordinates_=Te,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=Oe||null,this.properties_=Ue,this.squaredTolerance_,this.stride_=Be,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),Te=linearRingss$1(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,Te)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let Te=0;const Oe=this.ends_;for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be],We=interpolatePoint(e,Te,He,2,.5);extend$4(this.flatMidpoints_,We),Te=He}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,Te){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const Te=e.getExtent(),Oe=e.getWorldExtent();if(Te&&Oe){const Be=getHeight(Oe)/getHeight(Te);compose(tmpTransform,Oe[0],Oe[3],Be,-Be,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,Te)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),Te&&this.simplifiedGeometry_.applyTransform(Te);const Oe=this.simplifiedGeometry_.getFlatCoordinates();let Be;switch(this.type_){case"LineString":Oe.length=douglasPeucker(Oe,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,Oe,0),Be=[Oe.length];break;case"MultiLineString":Be=[],Oe.length=douglasPeuckerArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,Oe,0,Be);break;case"Polygon":Be=[],Oe.length=quantizeArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),Oe,0,Be);break}return Be&&(this.simplifiedGeometry_=new RenderFeature(this.type_,Oe,Be,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;function quickselect(ke,e,Te=0,Oe=ke.length-1,Be=defaultCompare){for(;Oe>Te;){if(Oe-Te>600){const Cn=Oe-Te+1,An=e-Te+1,En=Math.log(Cn),Sn=.5*Math.exp(2*En/3),Tn=.5*Math.sqrt(En*Sn*(Cn-Sn)/Cn)*(An-Cn/2<0?-1:1),Ln=Math.max(Te,Math.floor(e-An*Sn/Cn+Tn)),Bn=Math.min(Oe,Math.floor(e+(Cn-An)*Sn/Cn+Tn));quickselect(ke,e,Ln,Bn,Be)}const Ue=ke[e];let He=Te,We=Oe;for(swap(ke,Te,e),Be(ke[Oe],Ue)>0&&swap(ke,Te,Oe);He<We;){for(swap(ke,He,We),He++,We--;Be(ke[He],Ue)<0;)He++;for(;Be(ke[We],Ue)>0;)We--}Be(ke[Te],Ue)===0?swap(ke,Te,We):(We++,swap(ke,We,Oe)),We<=e&&(Te=We+1),e<=We&&(Oe=We-1)}}function swap(ke,e,Te){const Oe=ke[e];ke[e]=ke[Te],ke[Te]=Oe}function defaultCompare(ke,e){return ke<e?-1:ke>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let Te=this.data;const Oe=[];if(!intersects(e,Te))return Oe;const Be=this.toBBox,Ue=[];for(;Te;){for(let He=0;He<Te.children.length;He++){const We=Te.children[He],Cn=Te.leaf?Be(We):We;intersects(e,Cn)&&(Te.leaf?Oe.push(We):contains(e,Cn)?this._all(We,Oe):Ue.push(We))}Te=Ue.pop()}return Oe}collides(e){let Te=this.data;if(!intersects(e,Te))return!1;const Oe=[];for(;Te;){for(let Be=0;Be<Te.children.length;Be++){const Ue=Te.children[Be],He=Te.leaf?this.toBBox(Ue):Ue;if(intersects(e,He)){if(Te.leaf||contains(e,He))return!0;Oe.push(Ue)}}Te=Oe.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let Oe=0;Oe<e.length;Oe++)this.insert(e[Oe]);return this}let Te=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=Te;else if(this.data.height===Te.height)this._splitRoot(this.data,Te);else{if(this.data.height<Te.height){const Oe=this.data;this.data=Te,Te=Oe}this._insert(Te,this.data.height-Te.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,Te){if(!e)return this;let Oe=this.data;const Be=this.toBBox(e),Ue=[],He=[];let We,Cn,An;for(;Oe||Ue.length;){if(Oe||(Oe=Ue.pop(),Cn=Ue[Ue.length-1],We=He.pop(),An=!0),Oe.leaf){const En=findItem(e,Oe.children,Te);if(En!==-1)return Oe.children.splice(En,1),Ue.push(Oe),this._condense(Ue),this}!An&&!Oe.leaf&&contains(Oe,Be)?(Ue.push(Oe),He.push(We),We=0,Cn=Oe,Oe=Oe.children[0]):Cn?(We++,Oe=Cn.children[We],An=!1):Oe=null}return this}toBBox(e){return e}compareMinX(e,Te){return e.minX-Te.minX}compareMinY(e,Te){return e.minY-Te.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,Te){const Oe=[];for(;e;)e.leaf?Te.push(...e.children):Oe.push(...e.children),e=Oe.pop();return Te}_build(e,Te,Oe,Be){const Ue=Oe-Te+1;let He=this._maxEntries,We;if(Ue<=He)return We=createNode(e.slice(Te,Oe+1)),calcBBox(We,this.toBBox),We;Be||(Be=Math.ceil(Math.log(Ue)/Math.log(He)),He=Math.ceil(Ue/Math.pow(He,Be-1))),We=createNode([]),We.leaf=!1,We.height=Be;const Cn=Math.ceil(Ue/He),An=Cn*Math.ceil(Math.sqrt(He));multiSelect(e,Te,Oe,An,this.compareMinX);for(let En=Te;En<=Oe;En+=An){const Sn=Math.min(En+An-1,Oe);multiSelect(e,En,Sn,Cn,this.compareMinY);for(let Tn=En;Tn<=Sn;Tn+=Cn){const Ln=Math.min(Tn+Cn-1,Sn);We.children.push(this._build(e,Tn,Ln,Be-1))}}return calcBBox(We,this.toBBox),We}_chooseSubtree(e,Te,Oe,Be){for(;Be.push(Te),!(Te.leaf||Be.length-1===Oe);){let Ue=1/0,He=1/0,We;for(let Cn=0;Cn<Te.children.length;Cn++){const An=Te.children[Cn],En=bboxArea(An),Sn=enlargedArea(e,An)-En;Sn<He?(He=Sn,Ue=En<Ue?En:Ue,We=An):Sn===He&&En<Ue&&(Ue=En,We=An)}Te=We||Te.children[0]}return Te}_insert(e,Te,Oe){const Be=Oe?e:this.toBBox(e),Ue=[],He=this._chooseSubtree(Be,this.data,Te,Ue);for(He.children.push(e),extend$2(He,Be);Te>=0&&Ue[Te].children.length>this._maxEntries;)this._split(Ue,Te),Te--;this._adjustParentBBoxes(Be,Ue,Te)}_split(e,Te){const Oe=e[Te],Be=Oe.children.length,Ue=this._minEntries;this._chooseSplitAxis(Oe,Ue,Be);const He=this._chooseSplitIndex(Oe,Ue,Be),We=createNode(Oe.children.splice(He,Oe.children.length-He));We.height=Oe.height,We.leaf=Oe.leaf,calcBBox(Oe,this.toBBox),calcBBox(We,this.toBBox),Te?e[Te-1].children.push(We):this._splitRoot(Oe,We)}_splitRoot(e,Te){this.data=createNode([e,Te]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,Te,Oe){let Be,Ue=1/0,He=1/0;for(let We=Te;We<=Oe-Te;We++){const Cn=distBBox(e,0,We,this.toBBox),An=distBBox(e,We,Oe,this.toBBox),En=intersectionArea(Cn,An),Sn=bboxArea(Cn)+bboxArea(An);En<Ue?(Ue=En,Be=We,He=Sn<He?Sn:He):En===Ue&&Sn<He&&(He=Sn,Be=We)}return Be||Oe-Te}_chooseSplitAxis(e,Te,Oe){const Be=e.leaf?this.compareMinX:compareNodeMinX,Ue=e.leaf?this.compareMinY:compareNodeMinY,He=this._allDistMargin(e,Te,Oe,Be),We=this._allDistMargin(e,Te,Oe,Ue);He<We&&e.children.sort(Be)}_allDistMargin(e,Te,Oe,Be){e.children.sort(Be);const Ue=this.toBBox,He=distBBox(e,0,Te,Ue),We=distBBox(e,Oe-Te,Oe,Ue);let Cn=bboxMargin(He)+bboxMargin(We);for(let An=Te;An<Oe-Te;An++){const En=e.children[An];extend$2(He,e.leaf?Ue(En):En),Cn+=bboxMargin(He)}for(let An=Oe-Te-1;An>=Te;An--){const En=e.children[An];extend$2(We,e.leaf?Ue(En):En),Cn+=bboxMargin(We)}return Cn}_adjustParentBBoxes(e,Te,Oe){for(let Be=Oe;Be>=0;Be--)extend$2(Te[Be],e)}_condense(e){for(let Te=e.length-1,Oe;Te>=0;Te--)e[Te].children.length===0?Te>0?(Oe=e[Te-1].children,Oe.splice(Oe.indexOf(e[Te]),1)):this.clear():calcBBox(e[Te],this.toBBox)}};function findItem(ke,e,Te){if(!Te)return e.indexOf(ke);for(let Oe=0;Oe<e.length;Oe++)if(Te(ke,e[Oe]))return Oe;return-1}function calcBBox(ke,e){distBBox(ke,0,ke.children.length,e,ke)}function distBBox(ke,e,Te,Oe,Be){Be||(Be=createNode(null)),Be.minX=1/0,Be.minY=1/0,Be.maxX=-1/0,Be.maxY=-1/0;for(let Ue=e;Ue<Te;Ue++){const He=ke.children[Ue];extend$2(Be,ke.leaf?Oe(He):He)}return Be}function extend$2(ke,e){return ke.minX=Math.min(ke.minX,e.minX),ke.minY=Math.min(ke.minY,e.minY),ke.maxX=Math.max(ke.maxX,e.maxX),ke.maxY=Math.max(ke.maxY,e.maxY),ke}function compareNodeMinX(ke,e){return ke.minX-e.minX}function compareNodeMinY(ke,e){return ke.minY-e.minY}function bboxArea(ke){return(ke.maxX-ke.minX)*(ke.maxY-ke.minY)}function bboxMargin(ke){return ke.maxX-ke.minX+(ke.maxY-ke.minY)}function enlargedArea(ke,e){return(Math.max(e.maxX,ke.maxX)-Math.min(e.minX,ke.minX))*(Math.max(e.maxY,ke.maxY)-Math.min(e.minY,ke.minY))}function intersectionArea(ke,e){const Te=Math.max(ke.minX,e.minX),Oe=Math.max(ke.minY,e.minY),Be=Math.min(ke.maxX,e.maxX),Ue=Math.min(ke.maxY,e.maxY);return Math.max(0,Be-Te)*Math.max(0,Ue-Oe)}function contains(ke,e){return ke.minX<=e.minX&&ke.minY<=e.minY&&e.maxX<=ke.maxX&&e.maxY<=ke.maxY}function intersects(ke,e){return e.minX<=ke.maxX&&e.minY<=ke.maxY&&e.maxX>=ke.minX&&e.maxY>=ke.minY}function createNode(ke){return{children:ke,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(ke,e,Te,Oe,Be){const Ue=[e,Te];for(;Ue.length;){if(Te=Ue.pop(),e=Ue.pop(),Te-e<=Oe)continue;const He=e+Math.ceil((Te-e)/Oe/2)*Oe;quickselect(ke,He,e,Te,Be),Ue.push(e,He,He,Te)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,Te){const Oe={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:Te};this.rbush_.insert(Oe),this.items_[getUid(Te)]=Oe}load(e,Te){const Oe=new Array(Te.length);for(let Be=0,Ue=Te.length;Be<Ue;Be++){const He=e[Be],We=Te[Be],Cn={minX:He[0],minY:He[1],maxX:He[2],maxY:He[3],value:We};Oe[Be]=Cn,this.items_[getUid(We)]=Cn}this.rbush_.load(Oe)}remove(e){const Te=getUid(e),Oe=this.items_[Te];return delete this.items_[Te],this.rbush_.remove(Oe)!==null}update(e,Te){const Oe=this.items_[getUid(Te)],Be=[Oe.minX,Oe.minY,Oe.maxX,Oe.maxY];equals$1(Be,e)||(this.remove(Te),this.insert(e,Te))}getAll(){return this.rbush_.all().map(function(Te){return Te.value})}getInExtent(e){const Te={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(Te).map(function(Be){return Be.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,Te){return this.forEach_(this.getInExtent(e),Te)}forEach_(e,Te){let Oe;for(let Be=0,Ue=e.length;Be<Ue;Be++)if(Oe=Te(e[Be]),Oe)return Oe;return Oe}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const Te=this.rbush_.toJSON();return createOrUpdate$2(Te.minX,Te.minY,Te.maxX,Te.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const Te in e.items_)this.items_[Te]=e.items_[Te]}}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class VectorSourceEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.feature=Te,this.features=Oe}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const Te=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=Te?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let Oe,Be;Array.isArray(e.features)?Be=e.features:e.features&&(Oe=e.features,Be=Oe.getArray()),!Te&&Oe===void 0&&(Oe=new Collection(Be)),Be!==void 0&&this.addFeaturesInternal(Be),Oe!==void 0&&this.bindFeaturesCollection_(Oe)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const Te=getUid(e);if(!this.addToIndex_(Te,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(Te,e);const Oe=e.getGeometry();if(Oe){const Be=Oe.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Be,e)}else this.nullGeometryFeatures_[Te]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,Te){Te instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(Te,EventType.CHANGE,this.handleFeatureChange_,this),listen(Te,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,Te){let Oe=!0;if(Te.getId()!==void 0){const Be=String(Te.getId());if(!(Be in this.idIndex_))this.idIndex_[Be]=Te;else if(Te instanceof RenderFeature){const Ue=this.idIndex_[Be];Ue instanceof RenderFeature?Array.isArray(Ue)?Ue.push(Te):this.idIndex_[Be]=[Ue,Te]:Oe=!1}else Oe=!1}return Oe&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=Te),Oe}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const Te=[],Oe=[],Be=[];for(let Ue=0,He=e.length;Ue<He;Ue++){const We=e[Ue],Cn=getUid(We);this.addToIndex_(Cn,We)&&Oe.push(We)}for(let Ue=0,He=Oe.length;Ue<He;Ue++){const We=Oe[Ue],Cn=getUid(We);this.setupChangeEvents_(Cn,We);const An=We.getGeometry();if(An){const En=An.getExtent();Te.push(En),Be.push(We)}else this.nullGeometryFeatures_[Cn]=We}if(this.featuresRtree_&&this.featuresRtree_.load(Te,Be),this.hasListener(VectorEventType.ADDFEATURE))for(let Ue=0,He=Oe.length;Ue<He;Ue++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,Oe[Ue]))}bindFeaturesCollection_(e){let Te=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(Oe){Te||(Te=!0,e.push(Oe.feature),Te=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(Oe){Te||(Te=!0,e.remove(Oe.feature),Te=!1)}),e.addEventListener(CollectionEventType.ADD,Oe=>{Te||(Te=!0,this.addFeature(Oe.element),Te=!1)}),e.addEventListener(CollectionEventType.REMOVE,Oe=>{Te||(Te=!0,this.removeFeature(Oe.element),Te=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const Oe in this.featureChangeKeys_)this.featureChangeKeys_[Oe].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Oe=>{this.removeFeatureInternal(Oe)});for(const Oe in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Oe])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const Te=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(Te),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,Te){const Oe=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(Oe,function(Be){const Ue=Be.getGeometry();if(Ue instanceof RenderFeature||Ue.intersectsCoordinate(e))return Te(Be)})}forEachFeatureInExtent(e,Te){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,Te);this.featuresCollection_&&this.featuresCollection_.forEach(Te)}forEachFeatureIntersectingExtent(e,Te){return this.forEachFeatureInExtent(e,function(Oe){const Be=Oe.getGeometry();if(Be instanceof RenderFeature||Be.intersectsExtent(e)){const Ue=Te(Oe);if(Ue)return Ue}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const Te=[];return this.forEachFeatureAtCoordinateDirect(e,function(Oe){Te.push(Oe)}),Te}getFeaturesInExtent(e,Te){if(this.featuresRtree_){if(!(Te&&Te.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const Be=wrapAndSliceX(e,Te);return[].concat(...Be.map(Ue=>this.featuresRtree_.getInExtent(Ue)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,Te){const Oe=e[0],Be=e[1];let Ue=null;const He=[NaN,NaN];let We=1/0;const Cn=[-1/0,-1/0,1/0,1/0];return Te=Te||TRUE,this.featuresRtree_.forEachInExtent(Cn,function(An){if(Te(An)){const En=An.getGeometry(),Sn=We;if(We=En instanceof RenderFeature?0:En.closestPointXY(Oe,Be,He,We),We<Sn){Ue=An;const Tn=Math.sqrt(We);Cn[0]=Oe-Tn,Cn[1]=Be-Tn,Cn[2]=Oe+Tn,Cn[3]=Be+Tn}}}),Ue}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const Te=this.idIndex_[e.toString()];return Te!==void 0?Te:null}getFeatureByUid(e){const Te=this.uidIndex_[e];return Te!==void 0?Te:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const Te=e.target,Oe=getUid(Te),Be=Te.getGeometry();if(!Be)Oe in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(Te),this.nullGeometryFeatures_[Oe]=Te);else{const He=Be.getExtent();Oe in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[Oe],this.featuresRtree_&&this.featuresRtree_.insert(He,Te)):this.featuresRtree_&&this.featuresRtree_.update(He,Te)}const Ue=Te.getId();if(Ue!==void 0){const He=Ue.toString();this.idIndex_[He]!==Te&&(this.removeFromIdIndex_(Te),this.idIndex_[He]=Te)}else this.removeFromIdIndex_(Te),this.uidIndex_[Oe]=Te;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,Te))}hasFeature(e){const Te=e.getId();return Te!==void 0?Te in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,Te,Oe){const Be=this.loadedExtentsRtree_,Ue=this.strategy_(e,Te,Oe);for(let He=0,We=Ue.length;He<We;++He){const Cn=Ue[He];Be.forEachInExtent(Cn,function(En){return containsExtent(En.extent,Cn)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,Cn,Te,Oe,En=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,En))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),Be.insert(Cn,{extent:Cn.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const Te=this.loadedExtentsRtree_,Oe=Te.forEachInExtent(e,function(Be){if(equals$1(Be.extent,e))return Be});Oe&&Te.remove(Oe)}removeFeatures(e){let Te=!1;for(let Oe=0,Be=e.length;Oe<Be;++Oe)Te=this.removeFeatureInternal(e[Oe])||Te;Te&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const Te=getUid(e);if(!(Te in this.uidIndex_))return!1;Te in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[Te]:this.featuresRtree_&&this.featuresRtree_.remove(e);const Oe=this.featureChangeKeys_[Te];Oe==null||Oe.forEach(unlistenByKey),delete this.featureChangeKeys_[Te];const Be=e.getId();if(Be!==void 0){const Ue=Be.toString(),He=this.idIndex_[Ue];He===e?delete this.idIndex_[Ue]:Array.isArray(He)&&(He.splice(He.indexOf(e),1),He.length===1&&(this.idIndex_[Ue]=He[0]))}return delete this.uidIndex_[Te],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const Te in this.idIndex_)if(this.idIndex_[Te]===e){delete this.idIndex_[Te];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(ke,e,Te,Oe,Be){ke.beginPath(),ke.moveTo(0,0),ke.lineTo(e,Te),ke.lineTo(Oe,Be),ke.closePath(),ke.save(),ke.clip(),ke.fillRect(0,0,Math.max(e,Oe)+1,Math.max(Te,Be)),ke.restore()}function verifyBrokenDiagonalRendering(ke,e){return Math.abs(ke[e*4]-210)>2||Math.abs(ke[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const ke=createCanvasContext2D(6,6,canvasPool$1);ke.globalCompositeOperation="lighter",ke.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(ke,4,5,4,0),drawTestTriangle(ke,4,5,0,5);const e=ke.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(ke),canvasPool$1.push(ke.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(ke,e,Te,Oe){const Be=transform$1(Te,e,ke);let Ue=getPointResolution(e,Oe,Te);const He=e.getMetersPerUnit();He!==void 0&&(Ue*=He);const We=ke.getMetersPerUnit();We!==void 0&&(Ue/=We);const Cn=ke.getExtent();if(!Cn||containsCoordinate(Cn,Be)){const An=getPointResolution(ke,Ue,Be)/Ue;isFinite(An)&&An>0&&(Ue/=An)}return Ue}function calculateSourceExtentResolution(ke,e,Te,Oe){const Be=getCenter(Te);let Ue=calculateSourceResolution(ke,e,Be,Oe);return(!isFinite(Ue)||Ue<=0)&&forEachCorner(Te,function(He){return Ue=calculateSourceResolution(ke,e,He,Oe),isFinite(Ue)&&Ue>0}),Ue}function render(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln){const Bn=createCanvasContext2D(Math.round(Te*ke),Math.round(Te*e),canvasPool$1);if(Sn||(Bn.imageSmoothingEnabled=!1),Cn.length===0)return Bn.canvas;Bn.scale(Te,Te);function ei(ci){return Math.round(ci*Te)/Te}Bn.globalCompositeOperation="lighter";const ni=createEmpty();Cn.forEach(function(ci,Pi,vi){extend$3(ni,ci.extent)});let ti;const ri=Te/Oe,oi=(Sn?1:1+Math.pow(2,-24))/ri;(!Tn||Cn.length!==1||An!==0)&&(ti=createCanvasContext2D(Math.round(getWidth(ni)*ri),Math.round(getHeight(ni)*ri),canvasPool$1),Sn||(ti.imageSmoothingEnabled=!1),Cn.forEach(function(ci,Pi,vi){if(ci.image.width>0&&ci.image.height>0){if(ci.clipExtent){ti.save();const ui=(ci.clipExtent[0]-ni[0])*ri,Oi=-(ci.clipExtent[3]-ni[3])*ri,Ni=getWidth(ci.clipExtent)*ri,nr=getHeight(ci.clipExtent)*ri;ti.rect(Sn?ui:Math.round(ui),Sn?Oi:Math.round(Oi),Sn?Ni:Math.round(ui+Ni)-Math.round(ui),Sn?nr:Math.round(Oi+nr)-Math.round(Oi)),ti.clip()}const pi=(ci.extent[0]-ni[0])*ri,Mi=-(ci.extent[3]-ni[3])*ri,Fi=getWidth(ci.extent)*ri,fi=getHeight(ci.extent)*ri;ti.drawImage(ci.image,An,An,ci.image.width-2*An,ci.image.height-2*An,Sn?pi:Math.round(pi),Sn?Mi:Math.round(Mi),Sn?Fi:Math.round(pi+Fi)-Math.round(pi),Sn?fi:Math.round(Mi+fi)-Math.round(Mi)),ci.clipExtent&&ti.restore()}}));const ai=getTopLeft(He);return We.getTriangles().forEach(function(ci,Pi,vi){const pi=ci.source,Mi=ci.target;let Fi=pi[0][0],fi=pi[0][1],ui=pi[1][0],Oi=pi[1][1],Ni=pi[2][0],nr=pi[2][1];const er=ei((Mi[0][0]-ai[0])/Ue),cr=ei(-(Mi[0][1]-ai[1])/Ue),ar=ei((Mi[1][0]-ai[0])/Ue),pr=ei(-(Mi[1][1]-ai[1])/Ue),rr=ei((Mi[2][0]-ai[0])/Ue),br=ei(-(Mi[2][1]-ai[1])/Ue),Li=Fi,ur=fi;Fi=0,fi=0,ui-=Li,Oi-=ur,Ni-=Li,nr-=ur;const sr=[[ui,Oi,0,0,ar-er],[Ni,nr,0,0,rr-er],[0,0,ui,Oi,pr-cr],[0,0,Ni,nr,br-cr]],dr=solveLinearSystem(sr);if(!dr)return;if(Bn.save(),Bn.beginPath(),isBrokenDiagonalRendering()||!Sn){Bn.moveTo(ar,pr);const hr=4,mr=er-ar,_r=cr-pr;for(let Ar=0;Ar<hr;Ar++)Bn.lineTo(ar+ei((Ar+1)*mr/hr),pr+ei(Ar*_r/(hr-1))),Ar!=hr-1&&Bn.lineTo(ar+ei((Ar+1)*mr/hr),pr+ei((Ar+1)*_r/(hr-1)));Bn.lineTo(rr,br)}else Bn.moveTo(ar,pr),Bn.lineTo(er,cr),Bn.lineTo(rr,br);Bn.clip(),Bn.transform(dr[0],dr[2],dr[1],dr[3],er,cr),Bn.translate(ni[0]-Li,ni[3]-ur);let vr;if(ti)vr=ti.canvas,Bn.scale(oi,-oi);else{const hr=Cn[0],mr=hr.extent;vr=hr.image,Bn.scale(getWidth(mr)/vr.width,-getHeight(mr)/vr.height)}Bn.drawImage(vr,0,0),Bn.restore()}),ti&&(releaseCanvas(ti),canvasPool$1.push(ti.canvas)),En&&(Bn.save(),Bn.globalCompositeOperation="source-over",Bn.strokeStyle="black",Bn.lineWidth=1,We.getTriangles().forEach(function(ci,Pi,vi){const pi=ci.target,Mi=(pi[0][0]-ai[0])/Ue,Fi=-(pi[0][1]-ai[1])/Ue,fi=(pi[1][0]-ai[0])/Ue,ui=-(pi[1][1]-ai[1])/Ue,Oi=(pi[2][0]-ai[0])/Ue,Ni=-(pi[2][1]-ai[1])/Ue;Bn.beginPath(),Bn.moveTo(fi,ui),Bn.lineTo(Mi,Fi),Bn.lineTo(Oi,Ni),Bn.closePath(),Bn.stroke()}),Bn.restore()),Bn.canvas}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,Te,Oe,Be){super(),this.extent=e,this.pixelRatio_=Oe,this.resolution=Te,this.state=typeof Be=="function"?ImageState.IDLE:Be,this.image_=null,this.loader=typeof Be=="function"?Be:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),Te=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),Te,this.getPixelRatio())).then(Oe=>{"image"in Oe&&(this.image_=Oe.image),"extent"in Oe&&(this.extent=Oe.extent),"resolution"in Oe&&(this.resolution=Oe.resolution),"pixelRatio"in Oe&&(this.pixelRatio_=Oe.pixelRatio),(Oe instanceof HTMLImageElement||CREATE_IMAGE_BITMAP&&Oe instanceof ImageBitmap||Oe instanceof HTMLCanvasElement||Oe instanceof HTMLVideoElement)&&(this.image_=Oe),this.state=ImageState.LOADED}).catch(Oe=>{this.state=ImageState.ERROR,console.error(Oe)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(ke,e,Te){const Oe=ke;let Be=!0,Ue=!1,He=!1;const We=[listenOnce(Oe,EventType.LOAD,function(){He=!0,Ue||e()})];return Oe.src&&IMAGE_DECODE?(Ue=!0,Oe.decode().then(function(){Be&&e()}).catch(function(Cn){Be&&(He?e():Te())})):We.push(listenOnce(Oe,EventType.ERROR,Te)),function(){Be=!1,We.forEach(unlistenByKey)}}function load(ke,e){return new Promise((Te,Oe)=>{function Be(){He(),Te(ke)}function Ue(){He(),Oe(new Error("Image load error"))}function He(){ke.removeEventListener("load",Be),ke.removeEventListener("error",Ue)}ke.addEventListener("load",Be),ke.addEventListener("error",Ue)})}function decodeFallback(ke,e){return e&&(ke.src=e),ke.src&&IMAGE_DECODE?new Promise((Te,Oe)=>ke.decode().then(()=>Te(ke)).catch(Be=>ke.complete&&ke.width?Te(ke):Oe(Be))):load(ke)}function decode$1(ke,e){return e&&(ke.src=e),ke.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?ke.decode().then(()=>createImageBitmap(ke)).catch(Te=>{if(ke.complete&&ke.width)return ke;throw Te}):decodeFallback(ke)}class ImageTile extends Tile{constructor(e,Te,Oe,Be,Ue,He){super(e,Te,He),this.crossOrigin_=Be,this.src_=Oe,this.key=Oe,this.image_=new Image,Be!==null&&(this.image_.crossOrigin=Be),this.unlisten_=null,this.tileLoadFunction_=Ue}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const ke=createCanvasContext2D(1,1);return ke.fillStyle="rgba(0,0,0,0)",ke.fillRect(0,0,1,1),ke.canvas}const MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,Te,Oe,Be,Ue,He,We){this.sourceProj_=e,this.targetProj_=Te;let Cn={};const An=We?createTransformFromCoordinateTransform(oi=>apply(We,transform$1(oi,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(oi){const ai=oi[0]+"/"+oi[1];return Cn[ai]||(Cn[ai]=An(oi)),Cn[ai]},this.maxSourceExtent_=Be,this.errorThresholdSquared_=Ue*Ue,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!Be&&!!this.sourceProj_.getExtent()&&getWidth(Be)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const En=getTopLeft(Oe),Sn=getTopRight(Oe),Tn=getBottomRight(Oe),Ln=getBottomLeft(Oe),Bn=this.transformInv_(En),ei=this.transformInv_(Sn),ni=this.transformInv_(Tn),ti=this.transformInv_(Ln),ri=MAX_SUBDIVISION+(He?Math.max(0,Math.ceil(Math.log2(getArea$1(Oe)/(He*He*256*256)))):0);if(this.addQuad_(En,Sn,Tn,Ln,Bn,ei,ni,ti,ri),this.wrapsXInSource_){let oi=1/0;this.triangles_.forEach(function(ai,ci,Pi){oi=Math.min(oi,ai.source[0][0],ai.source[1][0],ai.source[2][0])}),this.triangles_.forEach(ai=>{if(Math.max(ai.source[0][0],ai.source[1][0],ai.source[2][0])-oi>this.sourceWorldWidth_/2){const ci=[[ai.source[0][0],ai.source[0][1]],[ai.source[1][0],ai.source[1][1]],[ai.source[2][0],ai.source[2][1]]];ci[0][0]-oi>this.sourceWorldWidth_/2&&(ci[0][0]-=this.sourceWorldWidth_),ci[1][0]-oi>this.sourceWorldWidth_/2&&(ci[1][0]-=this.sourceWorldWidth_),ci[2][0]-oi>this.sourceWorldWidth_/2&&(ci[2][0]-=this.sourceWorldWidth_);const Pi=Math.min(ci[0][0],ci[1][0],ci[2][0]);Math.max(ci[0][0],ci[1][0],ci[2][0])-Pi<this.sourceWorldWidth_/2&&(ai.source=ci)}})}Cn={}}addTriangle_(e,Te,Oe,Be,Ue,He){this.triangles_.push({source:[Be,Ue,He],target:[e,Te,Oe]})}addQuad_(e,Te,Oe,Be,Ue,He,We,Cn,An){const En=boundingExtent([Ue,He,We,Cn]),Sn=this.sourceWorldWidth_?getWidth(En)/this.sourceWorldWidth_:null,Tn=this.sourceWorldWidth_,Ln=this.sourceProj_.canWrapX()&&Sn>.5&&Sn<1;let Bn=!1;if(An>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const ni=boundingExtent([e,Te,Oe,Be]);Bn=getWidth(ni)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||Bn}!Ln&&this.sourceProj_.isGlobal()&&Sn&&(Bn=Sn>MAX_TRIANGLE_WIDTH||Bn)}if(!Bn&&this.maxSourceExtent_&&isFinite(En[0])&&isFinite(En[1])&&isFinite(En[2])&&isFinite(En[3])&&!intersects$1(En,this.maxSourceExtent_))return;let ei=0;if(!Bn&&(!isFinite(Ue[0])||!isFinite(Ue[1])||!isFinite(He[0])||!isFinite(He[1])||!isFinite(We[0])||!isFinite(We[1])||!isFinite(Cn[0])||!isFinite(Cn[1]))){if(An>0)Bn=!0;else if(ei=(!isFinite(Ue[0])||!isFinite(Ue[1])?8:0)+(!isFinite(He[0])||!isFinite(He[1])?4:0)+(!isFinite(We[0])||!isFinite(We[1])?2:0)+(!isFinite(Cn[0])||!isFinite(Cn[1])?1:0),ei!=1&&ei!=2&&ei!=4&&ei!=8)return}if(An>0){if(!Bn){const ni=[(e[0]+Oe[0])/2,(e[1]+Oe[1])/2],ti=this.transformInv_(ni);let ri;Ln?ri=(modulo(Ue[0],Tn)+modulo(We[0],Tn))/2-modulo(ti[0],Tn):ri=(Ue[0]+We[0])/2-ti[0];const oi=(Ue[1]+We[1])/2-ti[1];Bn=ri*ri+oi*oi>this.errorThresholdSquared_}if(Bn){if(Math.abs(e[0]-Oe[0])<=Math.abs(e[1]-Oe[1])){const ni=[(Te[0]+Oe[0])/2,(Te[1]+Oe[1])/2],ti=this.transformInv_(ni),ri=[(Be[0]+e[0])/2,(Be[1]+e[1])/2],oi=this.transformInv_(ri);this.addQuad_(e,Te,ni,ri,Ue,He,ti,oi,An-1),this.addQuad_(ri,ni,Oe,Be,oi,ti,We,Cn,An-1)}else{const ni=[(e[0]+Te[0])/2,(e[1]+Te[1])/2],ti=this.transformInv_(ni),ri=[(Oe[0]+Be[0])/2,(Oe[1]+Be[1])/2],oi=this.transformInv_(ri);this.addQuad_(e,ni,ri,Be,Ue,ti,oi,Cn,An-1),this.addQuad_(ni,Te,Oe,ri,ti,He,We,oi,An-1)}return}}if(Ln){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}ei&11||this.addTriangle_(e,Oe,Be,Ue,We,Cn),ei&14||this.addTriangle_(e,Oe,Te,Ue,We,He),ei&&(ei&13||this.addTriangle_(Te,Be,e,He,Cn,Ue),ei&7||this.addTriangle_(Te,Be,Oe,He,Cn,We))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(Te,Oe,Be){const Ue=Te.source;extendCoordinate(e,Ue[0]),extendCoordinate(e,Ue[1]),extendCoordinate(e,Ue[2])}),e}getTriangles(){return this.triangles_}}const ERROR_THRESHOLD=.5;class ReprojTile extends Tile{constructor(e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn){super(Ue,TileState.IDLE,Tn),this.renderEdges_=Sn!==void 0?Sn:!1,this.pixelRatio_=We,this.gutter_=Cn,this.canvas_=null,this.sourceTileGrid_=Te,this.targetTileGrid_=Be,this.wrappedTileCoord_=He||Ue,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const Ln=Be.getTileCoordExtent(this.wrappedTileCoord_),Bn=this.targetTileGrid_.getExtent();let ei=this.sourceTileGrid_.getExtent();const ni=Bn?getIntersection(Ln,Bn):Ln;if(getArea$1(ni)===0){this.state=TileState.EMPTY;return}const ti=e.getExtent();ti&&(ei?ei=getIntersection(ei,ti):ei=ti);const ri=Be.getResolution(this.wrappedTileCoord_[0]),oi=calculateSourceExtentResolution(e,Oe,ni,ri);if(!isFinite(oi)||oi<=0){this.state=TileState.EMPTY;return}const ai=En!==void 0?En:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,Oe,ni,ei,oi*ai,ri),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=Te.getZForResolution(oi);let ci=this.triangulation_.calculateSourceExtent();if(ei&&(e.canWrapX()?(ci[1]=clamp$1(ci[1],ei[1],ei[3]),ci[3]=clamp$1(ci[3],ei[1],ei[3])):ci=getIntersection(ci,ei)),!getArea$1(ci))this.state=TileState.EMPTY;else{let Pi=0,vi=0;e.canWrapX()&&(Pi=getWidth(ti),vi=Math.floor((ci[0]-ti[0])/Pi)),wrapAndSliceX(ci.slice(),e,!0).forEach(Mi=>{const Fi=Te.getTileRangeForExtentAndZ(Mi,this.sourceZ_);for(let fi=Fi.minX;fi<=Fi.maxX;fi++)for(let ui=Fi.minY;ui<=Fi.maxY;ui++){const Oi=An(this.sourceZ_,fi,ui,We);if(Oi){const Ni=vi*Pi;this.sourceTiles_.push({tile:Oi,offset:Ni})}}++vi}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(Te=>{var Be;const Oe=Te.tile;if(Oe&&Oe.getState()==TileState.LOADED){const Ue=this.sourceTileGrid_.getTileCoordExtent(Oe.tileCoord);Ue[0]+=Te.offset,Ue[2]+=Te.offset;const He=(Be=this.clipExtent_)==null?void 0:Be.slice();He&&(He[0]+=Te.offset,He[2]+=Te.offset),e.push({extent:Ue,clipExtent:He,image:Oe.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const Te=this.wrappedTileCoord_[0],Oe=this.targetTileGrid_.getTileSize(Te),Be=typeof Oe=="number"?Oe:Oe[0],Ue=typeof Oe=="number"?Oe:Oe[1],He=this.targetTileGrid_.getResolution(Te),We=this.sourceTileGrid_.getResolution(this.sourceZ_),Cn=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(Be,Ue,this.pixelRatio_,We,this.sourceTileGrid_.getExtent(),He,Cn,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:Te})=>{const Oe=Te.getState();if(Oe==TileState.IDLE||Oe==TileState.LOADING){e++;const Be=listen(Te,EventType.CHANGE,Ue=>{const He=Te.getState();(He==TileState.LOADED||He==TileState.ERROR||He==TileState.EMPTY)&&(unlistenByKey(Be),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(Be)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:Te},Oe,Be){Te.getState()==TileState.IDLE&&Te.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const Te=this.getProjection();if(this.tileGrid&&(!Te||equivalent(Te,e)))return this.tileGrid;const Oe=getUid(e);return Oe in this.tileGridForProjection||(this.tileGridForProjection[Oe]=getForProjection(e)),this.tileGridForProjection[Oe]}createTile_(e,Te,Oe,Be,Ue,He){const We=[e,Te,Oe],Cn=this.getTileCoordForTileUrlFunction(We,Ue),An=Cn?this.tileUrlFunction(Cn,Be,Ue):void 0,En=new this.tileClass(We,An!==void 0?TileState.IDLE:TileState.EMPTY,An!==void 0?An:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return En.key=He,En.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),En}getTile(e,Te,Oe,Be,Ue){const He=this.getProjection();if(!He||!Ue||equivalent(He,Ue))return this.getTileInternal(e,Te,Oe,Be,He||Ue);const We=[e,Te,Oe],Cn=this.getKey(),An=this.getTileGridForProjection(He),En=this.getTileGridForProjection(Ue),Sn=this.getTileCoordForTileUrlFunction(We,Ue),Tn=new ReprojTile(He,An,Ue,En,We,Sn,this.getTilePixelRatio(Be),this.getGutter(),(Ln,Bn,ei,ni)=>this.getTileInternal(Ln,Bn,ei,ni,He),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return Tn.key=Cn,Tn}getTileInternal(e,Te,Oe,Be,Ue){const He=this.getKey();return this.createTile_(e,Te,Oe,Be,Ue,He)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,Te){const Oe=get$3(e);if(Oe){const Be=getUid(Oe);Be in this.tileGridForProjection||(this.tileGridForProjection[Be]=Te)}}}function defaultTileLoadFunction(ke,e){ke.getImage().src=e}function fromResolutionLike(ke){return Array.isArray(ke)?Math.min(...ke):ke}class ReprojImage extends ImageWrapper{constructor(e,Te,Oe,Be,Ue,He,We){let Cn=e.getExtent();Cn&&e.canWrapX()&&(Cn=Cn.slice(),Cn[0]=-1/0,Cn[2]=1/0);let An=Te.getExtent();An&&Te.canWrapX()&&(An=An.slice(),An[0]=-1/0,An[2]=1/0);const En=An?getIntersection(Oe,An):Oe,Sn=getCenter(En),Tn=calculateSourceResolution(e,Te,Sn,Be),Ln=ERROR_THRESHOLD,Bn=new Triangulation(e,Te,En,Cn,Tn*Ln,Be),ei=Bn.calculateSourceExtent(),ni=isEmpty(ei)?null:He(ei,Tn,Ue),ti=ni?ImageState.IDLE:ImageState.EMPTY,ri=ni?ni.getPixelRatio():1;super(Oe,Be,ri,ti),this.targetProj_=Te,this.maxSourceExtent_=Cn,this.triangulation_=Bn,this.targetResolution_=Be,this.targetExtent_=Oe,this.sourceImage_=ni,this.sourcePixelRatio_=ri,this.interpolate_=We,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const Te=getWidth(this.targetExtent_)/this.targetResolution_,Oe=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(Te,Oe,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,Te=>{const Oe=this.sourceImage_.getState();(Oe==ImageState.LOADED||Oe==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const DECIMALS=4,ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,Te){super(e),this.image=Te}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const Te=this.getResolutions();if(Te){const Oe=linearFindNearest(Te,e,0);e=Te[Oe]}return e}getImage(e,Te,Oe,Be){const Ue=this.getProjection();if(!Ue||!Be||equivalent(Ue,Be))return Ue&&(Be=Ue),this.getImageInternal(e,Te,Oe,Be);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),Be)&&this.reprojectedImage_.getResolution()==Te&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Ue,Be,e,Te,Oe,(He,We,Cn)=>this.getImageInternal(He,We,Cn,Ue),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,Te,Oe,Be){if(this.loader){const Ue=getRequestExtent(e,Te,Oe,1),He=this.findNearestResolution(Te);if(this.image&&(this.static_||this.wantedProjection_===Be&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Ue)||containsExtent(this.image.getExtent(),Ue))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===He||fromResolutionLike(this.image.getResolution())===He)))return this.image;this.wantedProjection_=Be,this.wantedExtent_=Ue,this.wantedResolution_=He,this.image=new ImageWrapper(Ue,He,Oe,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const Te=e.target;let Oe;switch(Te.getState()){case ImageState.LOADING:this.loading=!0,Oe=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(Oe)&&this.dispatchEvent(new ImageSourceEvent(Oe,Te))}}function defaultImageLoadFunction(ke,e){ke.getImage().src=e}function getRequestExtent(ke,e,Te,Oe){const Be=e/Te,Ue=getCenter(ke),He=ceil(getWidth(ke)/Be,DECIMALS),We=ceil(getHeight(ke)/Be,DECIMALS),Cn=ceil((Oe-1)*He/2,DECIMALS),An=He+2*Cn,En=ceil((Oe-1)*We/2,DECIMALS),Sn=We+2*En;return getForViewAndSize(Ue,Be,0,[An,Sn])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(ke,e,Te,Oe,Be){Be.WIDTH=Te[0],Be.HEIGHT=Te[1];const Ue=Oe.getAxisOrientation(),He=compareVersions(Be.VERSION,"1.3")>=0;Be[He?"CRS":"SRS"]=Oe.getCode();const We=He&&Ue.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return Be.BBOX=We.join(","),appendParams(ke,Be)}function getImageSrc(ke,e,Te,Oe,Be,Ue,He){Ue=Object.assign({REQUEST:"GetMap"},Ue);const We=e/Te,Cn=[round(getWidth(ke)/We,DECIMALS),round(getHeight(ke)/We,DECIMALS)];if(Te!=1)switch(He){case"geoserver":const En=90*Te+.5|0;"FORMAT_OPTIONS"in Ue?Ue.FORMAT_OPTIONS+=";dpi:"+En:Ue.FORMAT_OPTIONS="dpi:"+En;break;case"mapserver":Ue.MAP_RESOLUTION=90*Te;break;case"carmentaserver":case"qgis":Ue.DPI=90*Te;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(Be,ke,Cn,Oe,Ue)}function getRequestParams(ke,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},ke)}function createLoader(ke){const e=ke.hidpi===void 0?!0:ke.hidpi,Te=get$3(ke.projection||"EPSG:3857"),Oe=ke.ratio||1.5,Be=ke.load||decode$1,Ue=ke.crossOrigin??null;return(He,We,Cn)=>{He=getRequestExtent(He,We,Cn,Oe),Cn!=1&&(!e||ke.serverType===void 0)&&(Cn=1);const An=getImageSrc(He,We,Cn,Te,ke.url,getRequestParams(ke.params,"GetMap"),ke.serverType),En=new Image;return En.crossOrigin=Ue,Be(En,An).then(Sn=>({image:Sn,extent:He,pixelRatio:Cn}))}}function getFeatureInfoUrl(ke,e,Te){if(ke.url===void 0)return;const Oe=get$3(ke.projection||"EPSG:3857"),Be=getForViewAndSize(e,Te,0,GETFEATUREINFO_IMAGE_SIZE),Ue={QUERY_LAYERS:ke.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Ue,getRequestParams(ke.params,"GetFeatureInfo"),ke.params);const He=floor((e[0]-Be[0])/Te,DECIMALS),We=floor((Be[3]-e[1])/Te,DECIMALS),Cn=compareVersions(Ue.VERSION,"1.3")>=0;return Ue[Cn?"I":"X"]=He,Ue[Cn?"J":"Y"]=We,getRequestUrl(ke.url,Be,GETFEATUREINFO_IMAGE_SIZE,Oe,Ue)}function getLegendUrl(ke,e){if(ke.url===void 0)return;const Te={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const Oe=get$3(ke.projection||"EPSG:3857").getMetersPerUnit()||1,Be=28e-5;Te.SCALE=e*Oe/Be}if(Object.assign(Te,ke.params),ke.params!==void 0&&Te.LAYER===void 0){const Oe=Te.LAYERS;if(!(!Array.isArray(Oe)||Oe.length!==1))return;Te.LAYER=Oe}return appendParams(ke.url,Te)}class TileWMS extends TileImage{constructor(e){e=e||{};const Te=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=Te,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,Te,Oe,Be){const Ue=get$3(Oe),He=this.getProjection()||Ue;let We=this.getTileGrid();We||(We=this.getTileGridForProjection(He));const Cn=transform$1(e,Ue,He),An=calculateSourceResolution(He,Ue,e,Te),En=We.getZForResolution(An,this.zDirection),Sn=We.getResolution(En),Tn=We.getTileCoordForCoordAndZ(Cn,En);if(We.getResolutions().length<=Tn[0])return;let Ln=We.getTileCoordExtent(Tn,this.tmpExtent_);const Bn=this.gutter_;Bn!==0&&(Ln=buffer(Ln,Sn*Bn,Ln));const ei={QUERY_LAYERS:this.params_.LAYERS};Object.assign(ei,getRequestParams(this.params_,"GetFeatureInfo"),Be);const ni=Math.floor((Cn[0]-Ln[0])/Sn),ti=Math.floor((Ln[3]-Cn[1])/Sn);return ei[this.v13_?"I":"X"]=ni,ei[this.v13_?"J":"Y"]=ti,this.getRequestUrl_(Tn,Ln,1,He||Ue,ei)}getLegendUrl(e,Te){if(this.urls[0]===void 0)return;const Oe={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(Te===void 0||Te.LAYER===void 0){const Be=this.params_.LAYERS;if(!(!Array.isArray(Be)||Be.length===1))return;Oe.LAYER=Be}if(e!==void 0){const Be=this.getProjection()?this.getProjection().getMetersPerUnit():1,Ue=28e-5;Oe.SCALE=e*Be/Ue}return Object.assign(Oe,Te),appendParams(this.urls[0],Oe)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,Te,Oe,Be,Ue){const He=this.urls;if(!He)return;let We;if(He.length==1)We=He[0];else{const Cn=modulo(hash(e),He.length);We=He[Cn]}return getImageSrc(Te,(this.tileGrid||this.getTileGridForProjection(Be)).getResolution(e[0]),Oe,Be,We,Ue,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const Te=[];for(const Oe in this.params_)Te[e++]=Oe+"-"+this.params_[Oe];return Te.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,Te,Oe){let Be=this.getTileGrid();if(Be||(Be=this.getTileGridForProjection(Oe)),Be.getResolutions().length<=e[0])return;Te!=1&&(!this.hidpi_||this.serverType_===void 0)&&(Te=1);const Ue=Be.getResolution(e[0]);let He=Be.getTileCoordExtent(e,this.tmpExtent_);const We=this.gutter_;We!==0&&(He=buffer(He,Ue*We,He));const Cn=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,He,Te,Oe,Cn)}}let WMTS$1=class extends TileImage{constructor(e){const Te=e.requestEncoding!==void 0?e.requestEncoding:"KVP",Oe=e.tileGrid;let Be=e.urls;Be===void 0&&e.url!==void 0&&(Be=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:Oe,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:Be,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=Te,this.setKey(this.getKeyForDimensions_()),Be&&Be.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(Be.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const Te=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),Te)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const Te in this.dimensions_)e.push(Te+"-"+this.dimensions_[Te]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const Te=this.requestEncoding_,Oe={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};Te=="KVP"&&Object.assign(Oe,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=Te=="KVP"?appendParams(e,Oe):e.replace(/\{(\w+?)\}/g,function(He,We){return We.toLowerCase()in Oe?Oe[We.toLowerCase()]:He});const Be=this.tileGrid,Ue=this.dimensions_;return function(He,We,Cn){if(!He)return;const An={TileMatrix:Be.getMatrixId(He[0]),TileCol:He[1],TileRow:He[2]};Object.assign(An,Ue);let En=e;return Te=="KVP"?En=appendParams(En,An):En=En.replace(/\{(\w+?)\}/g,function(Sn,Tn){return encodeURIComponent(An[Tn])}),En}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,Te,Oe,Be){const Ue=get$3(Oe),He=this.getProjection();He&&He!==Ue&&(Te=calculateSourceResolution(He,Ue,e,Te),e=transform$1(e,Ue,He));const We={url:this.url_,params:{...this.params_,...Be},projection:He||Ue};return getFeatureInfoUrl(We,e,Te)}getLegendUrl(e,Te){return getLegendUrl({url:this.url_,params:{...this.params_,...Te}},e)}getParams(){return this.params_}getImageInternal(e,Te,Oe,Be){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==Be)&&(this.loaderProjection_=Be,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:Be,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Ue,He)=>(this.image.setImage(Ue),this.imageLoadFunction_(this.image,He),decode$1(Ue))})),super.getImageInternal(e,Te,Oe,Be))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(ke,e,Te){const Oe=ke.getCenterInternal();if(Oe){const Be=[Oe[0]+e[0],Oe[1]+e[1]];ke.animateInternal({duration:Te!==void 0?Te:250,easing:linear,center:ke.getConstrainedCenter(Be)})}}function zoomByDelta(ke,e,Te,Oe){const Be=ke.getZoom();if(Be===void 0)return;const Ue=ke.getConstrainedZoom(Be+e),He=ke.getResolutionForZoom(Ue);ke.getAnimating()&&ke.cancelAnimations(),ke.animate({resolution:He,anchor:Te,duration:Oe!==void 0?Oe:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let Te=!1;if(e.type==MapBrowserEventType.DBLCLICK){const Oe=e.originalEvent,Be=e.map,Ue=e.coordinate,He=Oe.shiftKey?-this.delta_:this.delta_,We=Be.getView();zoomByDelta(We,He,Ue,this.duration_),Oe.preventDefault(),Te=!0}return!Te}}function all(ke){const e=arguments;return function(Te){let Oe=!0;for(let Be=0,Ue=e.length;Be<Ue&&(Oe=Oe&&e[Be](Te),!!Oe);++Be);return Oe}}const altKeyOnly=function(ke){const e=ke.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(ke){const e=ke.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(ke){const e=ke.map.getTargetElement(),Te=e.getRootNode(),Oe=ke.map.getOwnerDocument().activeElement;return Te instanceof ShadowRoot?Te.host.contains(Oe):e.contains(Oe)},focusWithTabindex=function(ke){const e=ke.map.getTargetElement(),Te=e.getRootNode();return(Te instanceof ShadowRoot?Te.host:e).hasAttribute("tabindex")?focus(ke):!0},always$1=TRUE,mouseActionButton=function(ke){const e=ke.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(ke){return ke.type=="pointermove"},singleClick=function(ke){return ke.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(ke){const e=ke.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(ke){const e=ke.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(ke){const e=ke.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(ke){const e=ke.originalEvent,Te=e.target.tagName;return Te!=="INPUT"&&Te!=="SELECT"&&Te!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(ke){const e=ke.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(ke){const e=ke.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,Te=this.endPixel_,Oe="px",Be=this.element_.style;Be.left=Math.min(e[0],Te[0])+Oe,Be.top=Math.min(e[1],Te[1])+Oe,Be.width=Math.abs(Te[0]-e[0])+Oe,Be.height=Math.abs(Te[1]-e[1])+Oe}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const Te=this.element_.style;Te.left="inherit",Te.top="inherit",Te.width="inherit",Te.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,Te){this.startPixel_=e,this.endPixel_=Te,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,Te=this.endPixel_,Be=[e,[e[0],Te[1]],Te,[Te[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);Be[4]=Be[0].slice(),this.geometry_?this.geometry_.setCoordinates([Be]):this.geometry_=new Polygon([Be])}getGeometry(){return this.geometry_}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let Te=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const Oe=this.handleUpEvent(e);this.handlingDownUpSequence=Oe&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const Oe=this.handleDownEvent(e);this.handlingDownUpSequence=Oe,Te=this.stopDown(Oe)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!Te}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(ke){const e=ke.length;let Te=0,Oe=0;for(let Be=0;Be<e;Be++)Te+=ke[Be].clientX,Oe+=ke[Be].clientY;return{clientX:Te/e,clientY:Oe/e}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.coordinate=Te,this.mapBrowserEvent=Oe}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,Te,Oe){const Be=Oe[0]-Te[0],Ue=Oe[1]-Te[1];return Be*Be+Ue*Ue>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const Te=this.boxEndCondition_(e,this.startPixel_,e.pixel);return Te&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(Te?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const Te=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,Te):Te,this.noKinetic_=!1}handleDragEvent(e){const Te=e.map;this.panning_||(this.panning_=!0,Te.getView().beginInteraction());const Oe=this.targetPointers,Be=Te.getEventPixel(centroid(Oe));if(Oe.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Be[0],Be[1]),this.lastCentroid){const Ue=[this.lastCentroid[0]-Be[0],Be[1]-this.lastCentroid[1]],We=e.map.getView();scale$2(Ue,We.getResolution()),rotate$1(Ue,We.getRotation()),We.adjustCenterInternal(Ue)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Be,this.lastPointersCount_=Oe.length,e.originalEvent.preventDefault()}handleUpEvent(e){const Te=e.map,Oe=Te.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Be=this.kinetic_.getDistance(),Ue=this.kinetic_.getAngle(),He=Oe.getCenterInternal(),We=Te.getPixelFromCoordinateInternal(He),Cn=Te.getCoordinateFromPixelInternal([We[0]-Be*Math.cos(Ue),We[1]-Be*Math.sin(Ue)]);Oe.animateInternal({center:Oe.getConstrainedCenter(Cn),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,Oe.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const Oe=e.map.getView();return this.lastCentroid=null,Oe.getAnimating()&&Oe.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(ke){if(ke!==void 0)return 0}function none$1(ke){if(ke!==void 0)return ke}function createSnapToN(ke){const e=2*Math.PI/ke;return function(Te,Oe){if(Oe)return Te;if(Te!==void 0)return Te=Math.floor(Te/e+.5)*e,Te}}function createSnapToZero(ke){const e=toRadians(5);return function(Te,Oe){return Oe||Te===void 0?Te:Math.abs(Te)<=e?0:Te}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const Te=e.map,Oe=Te.getView();if(Oe.getConstraints().rotation===disable)return;const Be=Te.getSize(),Ue=e.pixel,He=Math.atan2(Be[1]/2-Ue[1],Ue[0]-Be[0]/2);if(this.lastAngle_!==void 0){const We=He-this.lastAngle_;Oe.adjustRotationInternal(-We)}this.lastAngle_=He}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const Te=e.condition?e.condition:shiftKeyOnly;super({condition:Te,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const Oe=this.getMap().getView();let Be=this.getGeometry();if(this.out_){const Ue=Oe.rotatedExtentForGeometry(Be),He=Oe.getResolutionForExtentInternal(Ue),We=Oe.getResolution()/He;Be=Be.clone(),Be.scale(We*We)}Oe.fitInternal(Be,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.map=Te,this.frameState=Oe!==void 0?Oe:null}}class MapBrowserEvent extends MapEvent{constructor(e,Te,Oe,Be,Ue,He){super(e,Te,Ue),this.originalEvent=Oe,this.pixel_=null,this.coordinate_=null,this.dragging=Be!==void 0?Be:!1,this.activePointers=He}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ViewHint={ANIMATING:0,INTERACTING:1},RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(ke){var En,Sn;var e,Te=[],Oe=1,Be;if(typeof ke=="number")return{space:"rgb",values:[ke>>>16,(ke&65280)>>>8,ke&255],alpha:1};if(typeof ke=="number")return{space:"rgb",values:[ke>>>16,(ke&65280)>>>8,ke&255],alpha:1};if(ke=String(ke).toLowerCase(),names$y[ke])Te=names$y[ke].slice(),Be="rgb";else if(ke==="transparent")Oe=0,Be="rgb",Te=[0,0,0];else if(ke[0]==="#"){var Ue=ke.slice(1),He=Ue.length,We=He<=4;Oe=1,We?(Te=[parseInt(Ue[0]+Ue[0],16),parseInt(Ue[1]+Ue[1],16),parseInt(Ue[2]+Ue[2],16)],He===4&&(Oe=parseInt(Ue[3]+Ue[3],16)/255)):(Te=[parseInt(Ue[0]+Ue[1],16),parseInt(Ue[2]+Ue[3],16),parseInt(Ue[4]+Ue[5],16)],He===8&&(Oe=parseInt(Ue[6]+Ue[7],16)/255)),Te[0]||(Te[0]=0),Te[1]||(Te[1]=0),Te[2]||(Te[2]=0),Be="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(ke)){var Cn=e[1];Be=Cn.replace(/a$/,"");var An=Be==="cmyk"?4:Be==="gray"?1:3;Te=e[2].trim().split(/\s*[,\/]\s*|\s+/),Be==="color"&&(Be=Te.shift()),Te=Te.map(function(Tn,Ln){if(Tn[Tn.length-1]==="%")return Tn=parseFloat(Tn)/100,Ln===3?Tn:Be==="rgb"?Tn*255:Be[0]==="h"||Be[0]==="l"&&!Ln?Tn*100:Be==="lab"?Tn*125:Be==="lch"?Ln<2?Tn*150:Tn*360:Be[0]==="o"&&!Ln?Tn:Be==="oklab"?Tn*.4:Be==="oklch"?Ln<2?Tn*.4:Tn*360:Tn;if(Be[Ln]==="h"||Ln===2&&Be[Be.length-1]==="h"){if(baseHues[Tn]!==void 0)return baseHues[Tn];if(Tn.endsWith("deg"))return parseFloat(Tn);if(Tn.endsWith("turn"))return parseFloat(Tn)*360;if(Tn.endsWith("grad"))return parseFloat(Tn)*360/400;if(Tn.endsWith("rad"))return parseFloat(Tn)*180/Math.PI}return Tn==="none"?0:parseFloat(Tn)}),Oe=Te.length>An?Te.pop():1}else/[0-9](?:\s|\/|,)/.test(ke)&&(Te=ke.match(/([0-9]+)/g).map(function(Tn){return parseFloat(Tn)}),Be=((Sn=(En=ke.match(/([a-z])/ig))==null?void 0:En.join(""))==null?void 0:Sn.toLowerCase())||"rgb");return{space:Be,values:Te,alpha:Oe}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(ke){var e=ke[0]/360,Te=ke[1]/100,Oe=ke[2]/100,Be,Ue,He,We,Cn,An=0;if(Te===0)return Cn=Oe*255,[Cn,Cn,Cn];for(Ue=Oe<.5?Oe*(1+Te):Oe+Te-Oe*Te,Be=2*Oe-Ue,We=[0,0,0];An<3;)He=e+1/3*-(An-1),He<0?He++:He>1&&He--,Cn=6*He<1?Be+(Ue-Be)*6*He:2*He<1?Ue:3*He<2?Be+(Ue-Be)*(2/3-He)*6:Be,We[An++]=Cn*255;return We}};rgb.hsl=function(ke){var e=ke[0]/255,Te=ke[1]/255,Oe=ke[2]/255,Be=Math.min(e,Te,Oe),Ue=Math.max(e,Te,Oe),He=Ue-Be,We,Cn,An;return Ue===Be?We=0:e===Ue?We=(Te-Oe)/He:Te===Ue?We=2+(Oe-e)/He:Oe===Ue&&(We=4+(e-Te)/He),We=Math.min(We*60,360),We<0&&(We+=360),An=(Be+Ue)/2,Ue===Be?Cn=0:An<=.5?Cn=He/(Ue+Be):Cn=He/(2-Ue-Be),[We,Cn*100,An*100]};function rgba$1(ke){Array.isArray(ke)&&ke.raw&&(ke=String.raw(...arguments)),ke instanceof Number&&(ke=+ke);var e,Te=parse$3(ke);if(!Te.space)return[];const Oe=Te.space[0]==="h"?hsl.min:rgb.min,Be=Te.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(Te.values[0],Oe[0]),Be[0]),e[1]=Math.min(Math.max(Te.values[1],Oe[1]),Be[1]),e[2]=Math.min(Math.max(Te.values[2],Oe[2]),Be[2]),Te.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(Te.alpha,0),1)),e}const xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(ke,e){e=e||xyz.whitepoint[2].E;var Te=ke[0]/e[0],Oe=ke[1]/e[1],Be=ke[2]/e[2],Ue,He,We;return Ue=Te*3.240969941904521+Oe*-1.537383177570093+Be*-.498610760293,He=Te*-.96924363628087+Oe*1.87596750150772+Be*.041555057407175,We=Te*.055630079696993+Oe*-.20397695888897+Be*1.056971514242878,Ue=Ue>.0031308?1.055*Math.pow(Ue,1/2.4)-.055:Ue=Ue*12.92,He=He>.0031308?1.055*Math.pow(He,1/2.4)-.055:He=He*12.92,We=We>.0031308?1.055*Math.pow(We,1/2.4)-.055:We=We*12.92,Ue=Math.min(Math.max(0,Ue),1),He=Math.min(Math.max(0,He),1),We=Math.min(Math.max(0,We),1),[Ue*255,He*255,We*255]};rgb.xyz=function(ke,e){var Te=ke[0]/255,Oe=ke[1]/255,Be=ke[2]/255;Te=Te>.04045?Math.pow((Te+.055)/1.055,2.4):Te/12.92,Oe=Oe>.04045?Math.pow((Oe+.055)/1.055,2.4):Oe/12.92,Be=Be>.04045?Math.pow((Be+.055)/1.055,2.4):Be/12.92;var Ue=Te*.41239079926595+Oe*.35758433938387+Be*.18048078840183,He=Te*.21263900587151+Oe*.71516867876775+Be*.072192315360733,We=Te*.019330818715591+Oe*.11919477979462+Be*.95053215224966;return e=e||xyz.whitepoint[2].E,[Ue*e[0],He*e[1],We*e[2]]};var luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(ke,e,Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei;if(Ue=ke[0],He=ke[1],We=ke[2],Ue===0)return[0,0,0];var ni=.0011070564598794539;return e=e||"D65",Te=Te||2,Sn=xyz.whitepoint[Te][e][0],Tn=xyz.whitepoint[Te][e][1],Ln=xyz.whitepoint[Te][e][2],Bn=4*Sn/(Sn+15*Tn+3*Ln),ei=9*Tn/(Sn+15*Tn+3*Ln),Oe=He/(13*Ue)+Bn||0,Be=We/(13*Ue)+ei||0,An=Ue>8?Tn*Math.pow((Ue+16)/116,3):Tn*Ue*ni,Cn=An*9*Oe/(4*Be)||0,En=An*(12-3*Oe-20*Be)/(4*Be)||0,[Cn,An,En]}};xyz.luv=function(ke,e,Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni=.008856451679035631,ti=903.2962962962961;e=e||"D65",Te=Te||2,Sn=xyz.whitepoint[Te][e][0],Tn=xyz.whitepoint[Te][e][1],Ln=xyz.whitepoint[Te][e][2],Bn=4*Sn/(Sn+15*Tn+3*Ln),ei=9*Tn/(Sn+15*Tn+3*Ln),Cn=ke[0],An=ke[1],En=ke[2],Oe=4*Cn/(Cn+15*An+3*En)||0,Be=9*An/(Cn+15*An+3*En)||0;var ri=An/Tn;return Ue=ri<=ni?ti*ri:116*Math.pow(ri,1/3)-16,He=13*Ue*(Oe-Bn),We=13*Ue*(Be-ei),[Ue,He,We]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(ke){var e=ke[0],Te=ke[1],Oe=ke[2],Be,Ue,He;return He=Oe/360*2*Math.PI,Be=Te*Math.cos(He),Ue=Te*Math.sin(He),[e,Be,Ue]},xyz:function(ke){return luv.xyz(lchuv.luv(ke))}};luv.lchuv=function(ke){var e=ke[0],Te=ke[1],Oe=ke[2],Be=Math.sqrt(Te*Te+Oe*Oe),Ue=Math.atan2(Oe,Te),He=Ue*360/2/Math.PI;return He<0&&(He+=360),[e,Be,He]};xyz.lchuv=function(ke){return luv.lchuv(xyz.luv(ke))};const NO_COLOR=[NaN,NaN,NaN,0];function asString(ke){return typeof ke=="string"?ke:toString(ke)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(ke){if(ke.length===4)return ke;const e=ke.slice();return e[3]=1,e}function rgbaToLcha(ke){const e=xyz.lchuv(rgb.xyz(ke));return e[3]=ke[3],e}function lchaToRgba(ke){const e=xyz.rgb(lchuv.xyz(ke));return e[3]=ke[3],e}function fromString(ke){if(ke==="none")return NO_COLOR;if(cache.hasOwnProperty(ke))return cache[ke];if(cacheSize>=MAX_CACHE_SIZE){let Te=0;for(const Oe in cache)Te++&3||(delete cache[Oe],--cacheSize)}const e=rgba$1(ke);if(e.length!==4)throw new Error('failed to parse "'+ke+'" as color');for(const Te of e)if(isNaN(Te))throw new Error('failed to parse "'+ke+'" as color');return normalize(e),cache[ke]=e,++cacheSize,e}function asArray(ke){return Array.isArray(ke)?ke:fromString(ke)}function normalize(ke){return ke[0]=clamp$1(ke[0]+.5|0,0,255),ke[1]=clamp$1(ke[1]+.5|0,0,255),ke[2]=clamp$1(ke[2]+.5|0,0,255),ke[3]=clamp$1(ke[3],0,1),ke}function toString(ke){let e=ke[0];e!=(e|0)&&(e=e+.5|0);let Te=ke[1];Te!=(Te|0)&&(Te=Te+.5|0);let Oe=ke[2];Oe!=(Oe|0)&&(Oe=Oe+.5|0);const Be=ke[3]===void 0?1:Math.round(ke[3]*1e3)/1e3;return"rgba("+e+","+Te+","+Oe+","+Be+")"}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const Te in this.cache_){const Oe=this.cache_[Te];!(e++&3)&&!Oe.hasListener()&&(delete this.cache_[Te],delete this.patternCache_[Te],--this.cacheSize_)}}}get(e,Te,Oe){const Be=getCacheKey$1(e,Te,Oe);return Be in this.cache_?this.cache_[Be]:null}getPattern(e,Te,Oe){const Be=getCacheKey$1(e,Te,Oe);return Be in this.patternCache_?this.patternCache_[Be]:null}set(e,Te,Oe,Be,Ue){const He=getCacheKey$1(e,Te,Oe),We=He in this.cache_;this.cache_[He]=Be,Ue&&(Be.getImageState()===ImageState.IDLE&&Be.load(),Be.getImageState()===ImageState.LOADING?Be.ready().then(()=>{this.patternCache_[He]=getSharedCanvasContext2D().createPattern(Be.getImage(1),"repeat")}):this.patternCache_[He]=getSharedCanvasContext2D().createPattern(Be.getImage(1),"repeat")),We||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(ke,e,Te){const Oe=Te?asArray(Te):"null";return e+":"+ke+":"+Oe}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,Te,Oe,Be,Ue){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=Oe,this.canvas_={},this.color_=Ue,this.imageState_=Be===void 0?ImageState.IDLE:Be,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=Te,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],Te=this.size_[1],Oe=createCanvasContext2D(e,Te);Oe.fillRect(0,0,e,Te),this.hitDetectionImage_=Oe.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const Te=this.image_,Oe=createCanvasContext2D(Math.ceil(Te.width*e),Math.ceil(Te.height*e)),Be=Oe.canvas;Oe.scale(e,e),Oe.drawImage(Te,0,0),Oe.globalCompositeOperation="multiply",Oe.fillStyle=asString(this.color_),Oe.fillRect(0,0,Be.width/e,Be.height/e),Oe.globalCompositeOperation="destination-in",Oe.drawImage(Te,0,0),this.canvas_[e]=Be}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const Te=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,Te),e())};this.addEventListener(EventType.CHANGE,Te)}})),this.ready_}}function get$2(ke,e,Te,Oe,Be,Ue){let He=e===void 0?void 0:shared.get(e,Te,Be);return He||(He=new IconImage(ke,ke&&"src"in ke?ke.src||void 0:e,Te,Oe,Be),shared.set(e,Te,Be,He,Ue)),Ue&&He&&!shared.getPattern(e,Te,Be)&&shared.set(e,Te,Be,He,Ue),He}function asColorLike(ke){return ke?Array.isArray(ke)?toString(ke):typeof ke=="object"&&"src"in ke?asCanvasPattern(ke):ke:null}function asCanvasPattern(ke){if(!ke.offset||!ke.size)return shared.getPattern(ke.src,"anonymous",ke.color);const e=ke.src+":"+ke.offset,Te=shared.getPattern(e,void 0,ke.color);if(Te)return Te;const Oe=shared.get(ke.src,"anonymous",null);if(Oe.getImageState()!==ImageState.LOADED)return null;const Be=createCanvasContext2D(ke.size[0],ke.size[1]);return Be.drawImage(Oe.getImage(1),ke.offset[0],ke.offset[1],ke.size[0],ke.size[1],0,0,ke.size[0],ke.size[1]),get$2(Be.canvas,e,void 0,ImageState.LOADED,ke.color,!0),shared.getPattern(e,void 0,ke.color)}class VectorContext{drawCustom(e,Te,Oe,Be,Ue){}drawGeometry(e){}setStyle(e){}drawCircle(e,Te,Oe){}drawFeature(e,Te,Oe){}drawGeometryCollection(e,Te,Oe){}drawLineString(e,Te,Oe){}drawMultiLineString(e,Te,Oe){}drawMultiPoint(e,Te,Oe){}drawMultiPolygon(e,Te,Oe){}drawPoint(e,Te,Oe){}drawPolygon(e,Te,Oe){}drawText(e,Te,Oe){}setFillStrokeStyle(e,Te){}setImageStyle(e,Te){}setTextStyle(e,Te){}}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",Te=["monospace","serif"],Oe=Te.length,Be="wmytzilWMYTZIL@#/&?$%10";let Ue,He;function We(An,En,Sn){let Tn=!0;for(let Ln=0;Ln<Oe;++Ln){const Bn=Te[Ln];if(He=measureTextWidth(An+" "+En+" "+e+Bn,Be),Sn!=Bn){const ei=measureTextWidth(An+" "+En+" "+e+Sn+","+Bn,Be);Tn=Tn&&ei!=He}}return!!Tn}function Cn(){let An=!0;const En=checkedFonts.getKeys();for(let Sn=0,Tn=En.length;Sn<Tn;++Sn){const Ln=En[Sn];if(checkedFonts.get(Ln)<100){const[Bn,ei,ni]=Ln.split(`
`);We(Bn,ei,ni)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(Ln,100)):(checkedFonts.set(Ln,checkedFonts.get(Ln)+1,!0),An=!1)}}An&&(clearInterval(Ue),Ue=void 0)}return function(An){const En=getFontParameters(An);if(!En)return;const Sn=En.families;for(let Tn=0,Ln=Sn.length;Tn<Ln;++Tn){const Bn=Sn[Tn],ei=En.style+`
`+En.weight+`
`+Bn;checkedFonts.get(ei)===void 0&&(checkedFonts.set(ei,100,!0),We(En.style,En.weight,Bn)||(checkedFonts.set(ei,0,!0),Ue===void 0&&(Ue=setInterval(Cn,32))))}}}(),measureTextHeight=function(){let ke;return function(e){let Te=textHeights[e];if(Te==null){if(WORKER_OFFSCREEN_CANVAS){const Oe=getFontParameters(e),Be=measureText$1(e,"g");Te=(isNaN(Number(Oe.lineHeight))?1.2:Number(Oe.lineHeight))*(Be.actualBoundingBoxAscent+Be.actualBoundingBoxDescent)}else ke||(ke=document.createElement("div"),ke.innerHTML="M",ke.style.minHeight="0",ke.style.maxHeight="none",ke.style.height="auto",ke.style.padding="0",ke.style.border="none",ke.style.position="absolute",ke.style.display="block",ke.style.left="-99999px"),ke.style.font=e,document.body.appendChild(ke),Te=ke.offsetHeight,document.body.removeChild(ke);textHeights[e]=Te}return Te}}();function measureText$1(ke,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),ke!=measureFont&&(measureContext$1.font=ke,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(ke,e){return measureText$1(ke,e).width}function measureAndCacheTextWidth(ke,e,Te){if(e in Te)return Te[e];const Oe=e.split(`
`).reduce((Be,Ue)=>Math.max(Be,measureTextWidth(ke,Ue)),0);return Te[e]=Oe,Oe}function getTextDimensions(ke,e){const Te=[],Oe=[],Be=[];let Ue=0,He=0,We=0,Cn=0;for(let An=0,En=e.length;An<=En;An+=2){const Sn=e[An];if(Sn===`
`||An===En){Ue=Math.max(Ue,He),Be.push(He),He=0,We+=Cn,Cn=0;continue}const Tn=e[An+1]||ke.font,Ln=measureTextWidth(Tn,Sn);Te.push(Ln),He+=Ln;const Bn=measureTextHeight(Tn);Oe.push(Bn),Cn=Math.max(Cn,Bn)}return{width:Ue,height:We,widths:Te,heights:Oe,lineWidths:Be}}function drawImageOrLabel(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En){ke.save(),Te!==1&&(ke.globalAlpha===void 0?ke.globalAlpha=Sn=>Sn.globalAlpha*=Te:ke.globalAlpha*=Te),e&&ke.transform.apply(ke,e),Oe.contextInstructions?(ke.translate(Cn,An),ke.scale(En[0],En[1]),executeLabelInstructions(Oe,ke)):En[0]<0||En[1]<0?(ke.translate(Cn,An),ke.scale(En[0],En[1]),ke.drawImage(Oe,Be,Ue,He,We,0,0,He,We)):ke.drawImage(Oe,Be,Ue,He,We,Cn,An,He*En[0],We*En[1]),ke.restore()}function executeLabelInstructions(ke,e){const Te=ke.contextInstructions;for(let Oe=0,Be=Te.length;Oe<Be;Oe+=2)Array.isArray(Te[Oe+1])?e[Te[Oe]].apply(e,Te[Oe+1]):e[Te[Oe]]=Te[Oe+1]}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class CanvasBuilder extends VectorContext{constructor(e,Te,Oe,Be){super(),this.tolerance=e,this.maxExtent=Te,this.pixelRatio=Be,this.maxLineWidth=0,this.resolution=Oe,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const Te=this.pixelRatio;return Te==1?e:e.map(function(Oe){return Oe*Te})}appendFlatPointCoordinates(e,Te){const Oe=this.getBufferedMaxExtent(),Be=this.tmpCoordinate_,Ue=this.coordinates;let He=Ue.length;for(let We=0,Cn=e.length;We<Cn;We+=Te)Be[0]=e[We],Be[1]=e[We+1],containsCoordinate(Oe,Be)&&(Ue[He++]=Be[0],Ue[He++]=Be[1]);return He}appendFlatLineCoordinates(e,Te,Oe,Be,Ue,He){const We=this.coordinates;let Cn=We.length;const An=this.getBufferedMaxExtent();He&&(Te+=Be);let En=e[Te],Sn=e[Te+1];const Tn=this.tmpCoordinate_;let Ln=!0,Bn,ei,ni;for(Bn=Te+Be;Bn<Oe;Bn+=Be)Tn[0]=e[Bn],Tn[1]=e[Bn+1],ni=coordinateRelationship(An,Tn),ni!==ei?(Ln&&(We[Cn++]=En,We[Cn++]=Sn,Ln=!1),We[Cn++]=Tn[0],We[Cn++]=Tn[1]):ni===Relationship.INTERSECTING?(We[Cn++]=Tn[0],We[Cn++]=Tn[1],Ln=!1):Ln=!0,En=Tn[0],Sn=Tn[1],ei=ni;return(Ue&&Ln||Bn===Te+Be)&&(We[Cn++]=En,We[Cn++]=Sn),Cn}drawCustomCoordinates_(e,Te,Oe,Be,Ue){for(let He=0,We=Oe.length;He<We;++He){const Cn=Oe[He],An=this.appendFlatLineCoordinates(e,Te,Cn,Be,!1,!1);Ue.push(An),Te=Cn}return Te}drawCustom(e,Te,Oe,Be,Ue){this.beginGeometry(e,Te,Ue);const He=e.getType(),We=e.getStride(),Cn=this.coordinates.length;let An,En,Sn,Tn,Ln;switch(He){case"MultiPolygon":An=e.getOrientedFlatCoordinates(),Tn=[];const Bn=e.getEndss();Ln=0;for(let ei=0,ni=Bn.length;ei<ni;++ei){const ti=[];Ln=this.drawCustomCoordinates_(An,Ln,Bn[ei],We,ti),Tn.push(ti)}this.instructions.push([Instruction.CUSTOM,Cn,Tn,e,Oe,inflateMultiCoordinatesArray,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,Tn,e,Be||Oe,inflateMultiCoordinatesArray,Ue]);break;case"Polygon":case"MultiLineString":Sn=[],An=He=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),Ln=this.drawCustomCoordinates_(An,0,e.getEnds(),We,Sn),this.instructions.push([Instruction.CUSTOM,Cn,Sn,e,Oe,inflateCoordinatesArray,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,Sn,e,Be||Oe,inflateCoordinatesArray,Ue]);break;case"LineString":case"Circle":An=e.getFlatCoordinates(),En=this.appendFlatLineCoordinates(An,0,An.length,We,!1,!1),this.instructions.push([Instruction.CUSTOM,Cn,En,e,Oe,inflateCoordinates,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,En,e,Be||Oe,inflateCoordinates,Ue]);break;case"MultiPoint":An=e.getFlatCoordinates(),En=this.appendFlatPointCoordinates(An,We),En>Cn&&(this.instructions.push([Instruction.CUSTOM,Cn,En,e,Oe,inflateCoordinates,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,En,e,Be||Oe,inflateCoordinates,Ue]));break;case"Point":An=e.getFlatCoordinates(),this.coordinates.push(An[0],An[1]),En=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,Cn,En,e,Oe,void 0,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,En,e,Be||Oe,void 0,Ue]);break}this.endGeometry(Te)}beginGeometry(e,Te,Oe){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,Te,0,e,Oe],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,Te,0,e,Oe],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let Te;const Oe=e.length;let Be,Ue,He=-1;for(Te=0;Te<Oe;++Te)Be=e[Te],Ue=Be[0],Ue==Instruction.END_GEOMETRY?He=Te:Ue==Instruction.BEGIN_GEOMETRY&&(Be[2]=Te,reverseSubArray(this.hitDetectionInstructions,He,Te),He=-1)}fillStyleToState(e,Te={}){if(e){const Oe=e.getColor();Te.fillPatternScale=Oe&&typeof Oe=="object"&&"src"in Oe?this.pixelRatio:1,Te.fillStyle=asColorLike(Oe||defaultFillStyle)}else Te.fillStyle=void 0;return Te}strokeStyleToState(e,Te={}){if(e){const Oe=e.getColor();Te.strokeStyle=asColorLike(Oe||defaultStrokeStyle);const Be=e.getLineCap();Te.lineCap=Be!==void 0?Be:defaultLineCap;const Ue=e.getLineDash();Te.lineDash=Ue?Ue.slice():defaultLineDash;const He=e.getLineDashOffset();Te.lineDashOffset=He||defaultLineDashOffset;const We=e.getLineJoin();Te.lineJoin=We!==void 0?We:defaultLineJoin;const Cn=e.getWidth();Te.lineWidth=Cn!==void 0?Cn:defaultLineWidth;const An=e.getMiterLimit();Te.miterLimit=An!==void 0?An:defaultMiterLimit,Te.lineWidth>this.maxLineWidth&&(this.maxLineWidth=Te.lineWidth,this.bufferedMaxExtent_=null)}else Te.strokeStyle=void 0,Te.lineCap=void 0,Te.lineDash=null,Te.lineDashOffset=void 0,Te.lineJoin=void 0,Te.lineWidth=void 0,Te.miterLimit=void 0;return Te}setFillStrokeStyle(e,Te){const Oe=this.state;this.fillStyleToState(e,Oe),this.strokeStyleToState(Te,Oe)}createFill(e){const Te=e.fillStyle,Oe=[Instruction.SET_FILL_STYLE,Te];return typeof Te!="string"&&Oe.push(e.fillPatternScale),Oe}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,Te){const Oe=e.fillStyle;(typeof Oe!="string"||e.currentFillStyle!=Oe)&&(Oe!==void 0&&this.instructions.push(Te.call(this,e)),e.currentFillStyle=Oe)}updateStrokeStyle(e,Te){const Oe=e.strokeStyle,Be=e.lineCap,Ue=e.lineDash,He=e.lineDashOffset,We=e.lineJoin,Cn=e.lineWidth,An=e.miterLimit;(e.currentStrokeStyle!=Oe||e.currentLineCap!=Be||Ue!=e.currentLineDash&&!equals$2(e.currentLineDash,Ue)||e.currentLineDashOffset!=He||e.currentLineJoin!=We||e.currentLineWidth!=Cn||e.currentMiterLimit!=An)&&(Oe!==void 0&&Te.call(this,e),e.currentStrokeStyle=Oe,e.currentLineCap=Be,e.currentLineDash=Ue,e.currentLineDashOffset=He,e.currentLineJoin=We,e.currentLineWidth=Cn,e.currentMiterLimit=An)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const Te=[Instruction.END_GEOMETRY,e];this.instructions.push(Te),this.hitDetectionInstructions.push(Te)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,Te,Oe,Be){super(e,Te,Oe,Be),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,Te,Oe){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,Te,Oe);const Be=e.getFlatCoordinates(),Ue=e.getStride(),He=this.coordinates.length,We=this.appendFlatPointCoordinates(Be,Ue);this.instructions.push([Instruction.DRAW_IMAGE,He,We,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,He,We,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(Te)}drawMultiPoint(e,Te,Oe){if(!this.image_)return;this.beginGeometry(e,Te,Oe);const Be=e.getFlatCoordinates(),Ue=[];for(let Cn=0,An=Be.length;Cn<An;Cn+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,Be.slice(Cn,Cn+2)))&&Ue.push(Be[Cn],Be[Cn+1]);const He=this.coordinates.length,We=this.appendFlatPointCoordinates(Ue,2);this.instructions.push([Instruction.DRAW_IMAGE,He,We,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,He,We,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(Te)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,Te){const Oe=e.getAnchor(),Be=e.getSize(),Ue=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=Oe[0],this.anchorY_=Oe[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=Be[1],this.opacity_=e.getOpacity(),this.originX_=Ue[0],this.originY_=Ue[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=Be[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=Te}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,Te,Oe,Be){super(e,Te,Oe,Be)}drawFlatCoordinates_(e,Te,Oe,Be){const Ue=this.coordinates.length,He=this.appendFlatLineCoordinates(e,Te,Oe,Be,!1,!1),We=[Instruction.MOVE_TO_LINE_TO,Ue,He];return this.instructions.push(We),this.hitDetectionInstructions.push(We),Oe}drawLineString(e,Te,Oe){const Be=this.state,Ue=Be.strokeStyle,He=Be.lineWidth;if(Ue===void 0||He===void 0)return;this.updateStrokeStyle(Be,this.applyStroke),this.beginGeometry(e,Te,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const We=e.getFlatCoordinates(),Cn=e.getStride();this.drawFlatCoordinates_(We,0,We.length,Cn),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(Te)}drawMultiLineString(e,Te,Oe){const Be=this.state,Ue=Be.strokeStyle,He=Be.lineWidth;if(Ue===void 0||He===void 0)return;this.updateStrokeStyle(Be,this.applyStroke),this.beginGeometry(e,Te,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const We=e.getEnds(),Cn=e.getFlatCoordinates(),An=e.getStride();let En=0;for(let Sn=0,Tn=We.length;Sn<Tn;++Sn)En=this.drawFlatCoordinates_(Cn,En,We[Sn],An);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(Te)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,Te,Oe,Be){super(e,Te,Oe,Be)}drawFlatCoordinatess_(e,Te,Oe,Be){const Ue=this.state,He=Ue.fillStyle!==void 0,We=Ue.strokeStyle!==void 0,Cn=Oe.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let An=0;An<Cn;++An){const En=Oe[An],Sn=this.coordinates.length,Tn=this.appendFlatLineCoordinates(e,Te,En,Be,!0,!We),Ln=[Instruction.MOVE_TO_LINE_TO,Sn,Tn];this.instructions.push(Ln),this.hitDetectionInstructions.push(Ln),We&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),Te=En}return He&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),We&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),Te}drawCircle(e,Te,Oe){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,Oe),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getFlatCoordinates(),Cn=e.getStride(),An=this.coordinates.length;this.appendFlatLineCoordinates(We,0,We.length,Cn,!1,!1);const En=[Instruction.CIRCLE,An];this.instructions.push(beginPathInstruction,En),this.hitDetectionInstructions.push(beginPathInstruction,En),Be.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),Be.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(Te)}drawPolygon(e,Te,Oe){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,Oe),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getEnds(),Cn=e.getOrientedFlatCoordinates(),An=e.getStride();this.drawFlatCoordinatess_(Cn,0,We,An),this.endGeometry(Te)}drawMultiPolygon(e,Te,Oe){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,Oe),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getEndss(),Cn=e.getOrientedFlatCoordinates(),An=e.getStride();let En=0;for(let Sn=0,Tn=We.length;Sn<Tn;++Sn)En=this.drawFlatCoordinatess_(Cn,En,We[Sn],An);this.endGeometry(Te)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const Te=this.coordinates;for(let Oe=0,Be=Te.length;Oe<Be;++Oe)Te[Oe]=snap(Te[Oe],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(ke,e,Te,Oe,Be){const Ue=[];let He=Te,We=0,Cn=e.slice(Te,2);for(;We<ke&&He+Be<Oe;){const[An,En]=Cn.slice(-2),Sn=e[He+Be],Tn=e[He+Be+1],Ln=Math.sqrt((Sn-An)*(Sn-An)+(Tn-En)*(Tn-En));if(We+=Ln,We>=ke){const Bn=(ke-We+Ln)/Ln,ei=lerp(An,Sn,Bn),ni=lerp(En,Tn,Bn);Cn.push(ei,ni),Ue.push(Cn),Cn=[ei,ni],We==ke&&(He+=Be),We=0}else if(We<ke)Cn.push(e[He+Be],e[He+Be+1]),He+=Be;else{const Bn=Ln-We,ei=lerp(An,Sn,Bn/Ln),ni=lerp(En,Tn,Bn/Ln);Cn.push(ei,ni),Ue.push(Cn),Cn=[ei,ni],We=0,He+=Be}}return We>0&&Ue.push(Cn),Ue}function matchingChunk(ke,e,Te,Oe,Be){let Ue=Te,He=Te,We=0,Cn=0,An=Te,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi;for(Sn=Te;Sn<Oe;Sn+=Be){const ai=e[Sn],ci=e[Sn+1];Bn!==void 0&&(ri=ai-Bn,oi=ci-ei,Ln=Math.sqrt(ri*ri+oi*oi),ni!==void 0&&(Cn+=Tn,En=Math.acos((ni*ri+ti*oi)/(Tn*Ln)),En>ke&&(Cn>We&&(We=Cn,Ue=An,He=Sn),Cn=0,An=Sn-Be)),Tn=Ln,ni=ri,ti=oi),Bn=ai,ei=ci}return Cn+=Ln,Cn>We?[An,Sn]:[Ue,He]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,Te,Oe,Be){super(e,Te,Oe,Be),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,Te,Oe){const Be=this.textFillState_,Ue=this.textStrokeState_,He=this.textState_;if(this.text_===""||!He||!Be&&!Ue)return;const We=this.coordinates;let Cn=We.length;const An=e.getType();let En=null,Sn=e.getStride();if(He.placement==="line"&&(An=="LineString"||An=="MultiLineString"||An=="Polygon"||An=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let Tn;if(En=e.getFlatCoordinates(),An=="LineString")Tn=[En.length];else if(An=="MultiLineString")Tn=e.getEnds();else if(An=="Polygon")Tn=e.getEnds().slice(0,1);else if(An=="MultiPolygon"){const ni=e.getEndss();Tn=[];for(let ti=0,ri=ni.length;ti<ri;++ti)Tn.push(ni[ti][0])}this.beginGeometry(e,Te,Oe);const Ln=He.repeat,Bn=Ln?void 0:He.textAlign;let ei=0;for(let ni=0,ti=Tn.length;ni<ti;++ni){let ri;Ln?ri=lineChunk(Ln*this.resolution,En,ei,Tn[ni],Sn):ri=[En.slice(ei,Tn[ni])];for(let oi=0,ai=ri.length;oi<ai;++oi){const ci=ri[oi];let Pi=0,vi=ci.length;if(Bn==null){const Mi=matchingChunk(He.maxAngle,ci,0,ci.length,2);Pi=Mi[0],vi=Mi[1]}for(let Mi=Pi;Mi<vi;Mi+=Sn)We.push(ci[Mi],ci[Mi+1]);const pi=We.length;ei=Tn[ni],this.drawChars_(Cn,pi),Cn=pi}}this.endGeometry(Te)}else{let Tn=He.overflow?null:[];switch(An){case"Point":case"MultiPoint":En=e.getFlatCoordinates();break;case"LineString":En=e.getFlatMidpoint();break;case"Circle":En=e.getCenter();break;case"MultiLineString":En=e.getFlatMidpoints(),Sn=2;break;case"Polygon":En=e.getFlatInteriorPoint(),He.overflow||Tn.push(En[2]/this.resolution),Sn=3;break;case"MultiPolygon":const ai=e.getFlatInteriorPoints();En=[];for(let ci=0,Pi=ai.length;ci<Pi;ci+=3)He.overflow||Tn.push(ai[ci+2]/this.resolution),En.push(ai[ci],ai[ci+1]);if(En.length===0)return;Sn=2;break}const Ln=this.appendFlatPointCoordinates(En,Sn);if(Ln===Cn)return;if(Tn&&(Ln-Cn)/2!==En.length/Sn){let ai=Cn/2;Tn=Tn.filter((ci,Pi)=>{const vi=We[(ai+Pi)*2]===En[Pi*Sn]&&We[(ai+Pi)*2+1]===En[Pi*Sn+1];return vi||--ai,vi})}this.saveTextStates_();const Bn=He.backgroundFill?this.createFill(this.fillStyleToState(He.backgroundFill)):null,ei=He.backgroundStroke?this.createStroke(this.strokeStyleToState(He.backgroundStroke)):null;this.beginGeometry(e,Te,Oe);let ni=He.padding;if(ni!=defaultPadding&&(He.scale[0]<0||He.scale[1]<0)){let ai=He.padding[0],ci=He.padding[1],Pi=He.padding[2],vi=He.padding[3];He.scale[0]<0&&(ci=-ci,vi=-vi),He.scale[1]<0&&(ai=-ai,Pi=-Pi),ni=[ai,ci,Pi,vi]}const ti=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,Cn,Ln,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,ni==defaultPadding?defaultPadding:ni.map(function(ai){return ai*ti}),Bn,ei,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,Tn]);const ri=1/ti,oi=Bn?Bn.slice(0):null;oi&&(oi[1]=defaultFillStyle),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Cn,Ln,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[ri,ri],NaN,this.declutterMode_,this.declutterImageWithText_,ni,oi,ei,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,Tn]),this.endGeometry(Te)}}saveTextStates_(){const e=this.textStrokeState_,Te=this.textState_,Oe=this.textFillState_,Be=this.strokeKey_;e&&(Be in this.strokeStates||(this.strokeStates[Be]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Ue=this.textKey_;Ue in this.textStates||(this.textStates[Ue]={font:Te.font,textAlign:Te.textAlign||defaultTextAlign,justify:Te.justify,textBaseline:Te.textBaseline||defaultTextBaseline,scale:Te.scale});const He=this.fillKey_;Oe&&(He in this.fillStates||(this.fillStates[He]={fillStyle:Oe.fillStyle}))}drawChars_(e,Te){const Oe=this.textStrokeState_,Be=this.textState_,Ue=this.strokeKey_,He=this.textKey_,We=this.fillKey_;this.saveTextStates_();const Cn=this.pixelRatio,An=TEXT_ALIGN[Be.textBaseline],En=this.textOffsetY_*Cn,Sn=this.text_,Tn=Oe?Oe.lineWidth*Math.abs(Be.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,Te,An,Be.overflow,We,Be.maxAngle,Cn,En,Ue,Tn*Cn,Sn,He,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,Te,An,Be.overflow,We&&defaultFillStyle,Be.maxAngle,Cn,En,Ue,Tn*Cn,Sn,He,1/Cn,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,Te){let Oe,Be,Ue;if(!e)this.text_="";else{const He=e.getFill();He?(Be=this.textFillState_,Be||(Be={},this.textFillState_=Be),Be.fillStyle=asColorLike(He.getColor()||defaultFillStyle)):(Be=null,this.textFillState_=Be);const We=e.getStroke();if(!We)Ue=null,this.textStrokeState_=Ue;else{Ue=this.textStrokeState_,Ue||(Ue={},this.textStrokeState_=Ue);const ei=We.getLineDash(),ni=We.getLineDashOffset(),ti=We.getWidth(),ri=We.getMiterLimit();Ue.lineCap=We.getLineCap()||defaultLineCap,Ue.lineDash=ei?ei.slice():defaultLineDash,Ue.lineDashOffset=ni===void 0?defaultLineDashOffset:ni,Ue.lineJoin=We.getLineJoin()||defaultLineJoin,Ue.lineWidth=ti===void 0?defaultLineWidth:ti,Ue.miterLimit=ri===void 0?defaultMiterLimit:ri,Ue.strokeStyle=asColorLike(We.getColor()||defaultStrokeStyle)}Oe=this.textState_;const Cn=e.getFont()||defaultFont;registerFont(Cn);const An=e.getScaleArray();Oe.overflow=e.getOverflow(),Oe.font=Cn,Oe.maxAngle=e.getMaxAngle(),Oe.placement=e.getPlacement(),Oe.textAlign=e.getTextAlign(),Oe.repeat=e.getRepeat(),Oe.justify=e.getJustify(),Oe.textBaseline=e.getTextBaseline()||defaultTextBaseline,Oe.backgroundFill=e.getBackgroundFill(),Oe.backgroundStroke=e.getBackgroundStroke(),Oe.padding=e.getPadding()||defaultPadding,Oe.scale=An===void 0?[1,1]:An;const En=e.getOffsetX(),Sn=e.getOffsetY(),Tn=e.getRotateWithView(),Ln=e.getKeepUpright(),Bn=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=En===void 0?0:En,this.textOffsetY_=Sn===void 0?0:Sn,this.textRotateWithView_=Tn===void 0?!1:Tn,this.textKeepUpright_=Ln===void 0?!0:Ln,this.textRotation_=Bn===void 0?0:Bn,this.strokeKey_=Ue?(typeof Ue.strokeStyle=="string"?Ue.strokeStyle:getUid(Ue.strokeStyle))+Ue.lineCap+Ue.lineDashOffset+"|"+Ue.lineWidth+Ue.lineJoin+Ue.miterLimit+"["+Ue.lineDash.join()+"]":"",this.textKey_=Oe.font+Oe.scale+(Oe.textAlign||"?")+(Oe.repeat||"?")+(Oe.justify||"?")+(Oe.textBaseline||"?"),this.fillKey_=Be&&Be.fillStyle?typeof Be.fillStyle=="string"?Be.fillStyle:"|"+getUid(Be.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=Te}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,Te,Oe,Be){this.tolerance_=e,this.maxExtent_=Te,this.pixelRatio_=Be,this.resolution_=Oe,this.buildersByZIndex_={}}finish(){const e={};for(const Te in this.buildersByZIndex_){e[Te]=e[Te]||{};const Oe=this.buildersByZIndex_[Te];for(const Be in Oe){const Ue=Oe[Be].finish();e[Te][Be]=Ue}}return e}getBuilder(e,Te){const Oe=e!==void 0?e.toString():"0";let Be=this.buildersByZIndex_[Oe];Be===void 0&&(Be={},this.buildersByZIndex_[Oe]=Be);let Ue=Be[Te];if(Ue===void 0){const He=BATCH_CONSTRUCTORS[Te];Ue=new He(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),Be[Te]=Ue}return Ue}}function drawTextOnPath(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn=!0){let Ln=ke[e],Bn=ke[e+1],ei=0,ni=0,ti=0,ri=0;function oi(){ei=Ln,ni=Bn,e+=Oe,Ln=ke[e],Bn=ke[e+1],ri+=ti,ti=Math.sqrt((Ln-ei)*(Ln-ei)+(Bn-ni)*(Bn-ni))}do oi();while(e<Te-Oe&&ri+ti<Ue);let ai=ti===0?0:(Ue-ri)/ti;const ci=lerp(ei,Ln,ai),Pi=lerp(ni,Bn,ai),vi=e-Oe,pi=ri,Mi=Ue+We*Cn(An,Be,En);for(;e<Te-Oe&&ri+ti<Mi;)oi();ai=ti===0?0:(Mi-ri)/ti;const Fi=lerp(ei,Ln,ai),fi=lerp(ni,Bn,ai);let ui=!1;if(Tn)if(Sn){const cr=[ci,Pi,Fi,fi];rotate(cr,0,4,2,Sn,cr,cr),ui=cr[0]>cr[2]}else ui=ci>Fi;const Oi=Math.PI,Ni=[],nr=vi+Oe===e;e=vi,ti=0,ri=pi,Ln=ke[e],Bn=ke[e+1];let er;if(nr){oi(),er=Math.atan2(Bn-ni,Ln-ei),ui&&(er+=er>0?-Oi:Oi);const cr=(Fi+ci)/2,ar=(fi+Pi)/2;return Ni[0]=[cr,ar,(Mi-Ue)/2,er,Be],Ni}Be=Be.replace(/\n/g," ");for(let cr=0,ar=Be.length;cr<ar;){oi();let pr=Math.atan2(Bn-ni,Ln-ei);if(ui&&(pr+=pr>0?-Oi:Oi),er!==void 0){let dr=pr-er;if(dr+=dr>Oi?-2*Oi:dr<-Oi?2*Oi:0,Math.abs(dr)>He)return null}er=pr;const rr=cr;let br=0;for(;cr<ar;++cr){const dr=ui?ar-cr-1:cr,vr=We*Cn(An,Be[dr],En);if(e+Oe<Te&&ri+ti<Ue+br+vr/2)break;br+=vr}if(cr===rr)continue;const Li=ui?Be.substring(ar-rr,ar-cr):Be.substring(rr,cr);ai=ti===0?0:(Ue+br/2-ri)/ti;const ur=lerp(ei,Ln,ai),sr=lerp(ni,Bn,ai);Ni.push([ur,sr,br/2,pr,Li]),Ue+=br}return Ni}class ZIndexContext{constructor(){Mc(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,Te)=>{if(typeof getSharedCanvasContext2D()[Te]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Te),this.pushMethodArgs_},set:(e,Te,Oe)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Te,Oe),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(Te=>{for(let Oe=0,Be=Te.length;Oe<Be;++Oe){const Ue=Te[Oe];if(typeof Ue=="function"){Ue(e);continue}const He=Te[++Oe];if(typeof e[Ue]=="function")e[Ue](...He);else{if(typeof He=="function"){e[Ue]=He(e);continue}e[Ue]=He}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(ke){return ke[3].declutterBox}const rtlRegEx=new RegExp("[-----]");function horizontalTextAlign(ke,e){return e==="start"?e=rtlRegEx.test(ke)?"right":"left":e==="end"&&(e=rtlRegEx.test(ke)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(ke,e,Te){return Te>0&&ke.push(`
`,""),ke.push(e,""),ke}class Executor{constructor(e,Te,Oe,Be,Ue){this.overlaps=Oe,this.pixelRatio=Te,this.resolution=e,this.alignAndScaleFill_,this.instructions=Be.instructions,this.coordinates=Be.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=Be.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=Be.fillStates||{},this.strokeStates=Be.strokeStates||{},this.textStates=Be.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Ue?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,Te,Oe,Be){const Ue=e+Te+Oe+Be;if(this.labels_[Ue])return this.labels_[Ue];const He=Be?this.strokeStates[Be]:null,We=Oe?this.fillStates[Oe]:null,Cn=this.textStates[Te],An=this.pixelRatio,En=[Cn.scale[0]*An,Cn.scale[1]*An],Sn=Cn.justify?TEXT_ALIGN[Cn.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,Cn.textAlign||defaultTextAlign),Tn=Be&&He.lineWidth?He.lineWidth:0,Ln=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:Bn,height:ei,widths:ni,heights:ti,lineWidths:ri}=getTextDimensions(Cn,Ln),oi=Bn+Tn,ai=[],ci=(oi+2)*En[0],Pi=(ei+Tn)*En[1],vi={width:ci<0?Math.floor(ci):Math.ceil(ci),height:Pi<0?Math.floor(Pi):Math.ceil(Pi),contextInstructions:ai};(En[0]!=1||En[1]!=1)&&ai.push("scale",En),Be&&(ai.push("strokeStyle",He.strokeStyle),ai.push("lineWidth",Tn),ai.push("lineCap",He.lineCap),ai.push("lineJoin",He.lineJoin),ai.push("miterLimit",He.miterLimit),ai.push("setLineDash",[He.lineDash]),ai.push("lineDashOffset",He.lineDashOffset)),Oe&&ai.push("fillStyle",We.fillStyle),ai.push("textBaseline","middle"),ai.push("textAlign","center");const pi=.5-Sn;let Mi=Sn*oi+pi*Tn;const Fi=[],fi=[];let ui=0,Oi=0,Ni=0,nr=0,er;for(let cr=0,ar=Ln.length;cr<ar;cr+=2){const pr=Ln[cr];if(pr===`
`){Oi+=ui,ui=0,Mi=Sn*oi+pi*Tn,++nr;continue}const rr=Ln[cr+1]||Cn.font;rr!==er&&(Be&&Fi.push("font",rr),Oe&&fi.push("font",rr),er=rr),ui=Math.max(ui,ti[Ni]);const br=[pr,Mi+pi*ni[Ni]+Sn*(ni[Ni]-ri[nr]),.5*(Tn+ui)+Oi];Mi+=ni[Ni],Be&&Fi.push("strokeText",br),Oe&&fi.push("fillText",br),++Ni}return Array.prototype.push.apply(ai,Fi),Array.prototype.push.apply(ai,fi),this.labels_[Ue]=vi,vi}replayTextBackground_(e,Te,Oe,Be,Ue,He,We){e.beginPath(),e.moveTo.apply(e,Te),e.lineTo.apply(e,Oe),e.lineTo.apply(e,Be),e.lineTo.apply(e,Ue),e.lineTo.apply(e,Te),He&&(this.alignAndScaleFill_=He[2],e.fillStyle=He[1],this.fill_(e)),We&&(this.setStrokeStyle_(e,We),e.stroke())}calculateImageOrLabelDimensions_(e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni){We*=Tn[0],Cn*=Tn[1];let ti=Oe-We,ri=Be-Cn;const oi=Ue+An>e?e-An:Ue,ai=He+En>Te?Te-En:He,ci=Bn[3]+oi*Tn[0]+Bn[1],Pi=Bn[0]+ai*Tn[1]+Bn[2],vi=ti-Bn[3],pi=ri-Bn[0];(ei||Sn!==0)&&(p1[0]=vi,p4[0]=vi,p1[1]=pi,p2[1]=pi,p2[0]=vi+ci,p3[0]=p2[0],p3[1]=pi+Pi,p4[1]=p3[1]);let Mi;return Sn!==0?(Mi=compose(create(),Oe,Be,1,1,Sn,-Oe,-Be),apply(Mi,p1),apply(Mi,p2),apply(Mi,p3),apply(Mi,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(vi,vi+ci),Math.min(pi,pi+Pi),Math.max(vi,vi+ci),Math.max(pi,pi+Pi),tmpExtent),Ln&&(ti=Math.round(ti),ri=Math.round(ri)),{drawImageX:ti,drawImageY:ri,drawImageW:oi,drawImageH:ai,originX:An,originY:En,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:ni},canvasTransform:Mi,scale:Tn}}replayImageOrLabel_(e,Te,Oe,Be,Ue,He,We){const Cn=!!(He||We),An=Be.declutterBox,En=We?We[2]*Be.scale[0]/2:0;return An.minX-En<=Te[0]&&An.maxX+En>=0&&An.minY-En<=Te[1]&&An.maxY+En>=0&&(Cn&&this.replayTextBackground_(e,p1,p2,p3,p4,He,We),drawImageOrLabel(e,Be.canvasTransform,Ue,Oe,Be.originX,Be.originY,Be.drawImageW,Be.drawImageH,Be.drawImageX,Be.drawImageY,Be.scale)),!0}fill_(e){const Te=this.alignAndScaleFill_;if(Te){const Oe=apply(this.renderedTransform_,[0,0]),Be=512*this.pixelRatio;e.save(),e.translate(Oe[0]%Be,Oe[1]%Be),Te!==1&&e.scale(Te,Te),e.rotate(this.viewRotation_)}e.fill(),Te&&e.restore()}setStrokeStyle_(e,Te){e.strokeStyle=Te[1],e.lineWidth=Te[2],e.lineCap=Te[3],e.lineJoin=Te[4],e.miterLimit=Te[5],e.lineDashOffset=Te[7],e.setLineDash(Te[6])}drawLabelWithPointPlacement_(e,Te,Oe,Be){const Ue=this.textStates[Te],He=this.createLabel(e,Te,Be,Oe),We=this.strokeStates[Oe],Cn=this.pixelRatio,An=horizontalTextAlign(Array.isArray(e)?e[0]:e,Ue.textAlign||defaultTextAlign),En=TEXT_ALIGN[Ue.textBaseline||defaultTextBaseline],Sn=We&&We.lineWidth?We.lineWidth:0,Tn=He.width/Cn-2*Ue.scale[0],Ln=An*Tn+2*(.5-An)*Sn,Bn=En*He.height/Cn+2*(.5-En)*Sn;return{label:He,anchorX:Ln,anchorY:Bn}}execute_(e,Te,Oe,Be,Ue,He,We,Cn){const An=this.zIndexContext_;let En;this.pixelCoordinates_&&equals$2(Oe,this.renderedTransform_)?En=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),En=transform2D(this.coordinates,0,this.coordinates.length,2,Oe,this.pixelCoordinates_),setFromArray(this.renderedTransform_,Oe));let Sn=0;const Tn=Be.length;let Ln=0,Bn,ei,ni,ti,ri,oi,ai,ci,Pi,vi,pi,Mi,Fi,fi=0,ui=0;const Oi=this.coordinateCache_,Ni=this.viewRotation_,nr=Math.round(Math.atan2(-Oe[1],Oe[0])*1e12)/1e12,er={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ni},cr=this.instructions!=Be||this.overlaps?0:200;let ar,pr,rr,br;for(;Sn<Tn;){const Li=Be[Sn];switch(Li[0]){case Instruction.BEGIN_GEOMETRY:ar=Li[1],br=Li[3],ar.getGeometry()?We!==void 0&&!intersects$1(We,br.getExtent())?Sn=Li[2]+1:++Sn:Sn=Li[2],An&&(An.zIndex=Li[4]);break;case Instruction.BEGIN_PATH:fi>cr&&(this.fill_(e),fi=0),ui>cr&&(e.stroke(),ui=0),!fi&&!ui&&(e.beginPath(),ri=NaN,oi=NaN),++Sn;break;case Instruction.CIRCLE:Ln=Li[1];const sr=En[Ln],dr=En[Ln+1],vr=En[Ln+2],hr=En[Ln+3],mr=vr-sr,_r=hr-dr,Ar=Math.sqrt(mr*mr+_r*_r);e.moveTo(sr+Ar,dr),e.arc(sr,dr,Ar,0,2*Math.PI,!0),++Sn;break;case Instruction.CLOSE_PATH:e.closePath(),++Sn;break;case Instruction.CUSTOM:Ln=Li[1],Bn=Li[2];const Vr=Li[3],Gr=Li[4],Hi=Li[5];er.geometry=Vr,er.feature=ar,Sn in Oi||(Oi[Sn]=[]);const gr=Oi[Sn];Hi?Hi(En,Ln,Bn,2,gr):(gr[0]=En[Ln],gr[1]=En[Ln+1],gr.length=2),An&&(An.zIndex=Li[6]),Gr(gr,er),++Sn;break;case Instruction.DRAW_IMAGE:Ln=Li[1],Bn=Li[2],Pi=Li[3],ei=Li[4],ni=Li[5];let lr=Li[6];const Ki=Li[7],Dr=Li[8],Nr=Li[9],Ir=Li[10];let kr=Li[11];const Lr=Li[12];let Pr=Li[13];ti=Li[14]||"declutter";const Er=Li[15];if(!Pi&&Li.length>=20){vi=Li[19],pi=Li[20],Mi=Li[21],Fi=Li[22];const Is=this.drawLabelWithPointPlacement_(vi,pi,Mi,Fi);Pi=Is.label,Li[3]=Pi;const oa=Li[23];ei=(Is.anchorX-oa)*this.pixelRatio,Li[4]=ei;const qs=Li[24];ni=(Is.anchorY-qs)*this.pixelRatio,Li[5]=ni,lr=Pi.height,Li[6]=lr,Pr=Pi.width,Li[13]=Pr}let Sr;Li.length>25&&(Sr=Li[25]);let wr,Br,Hr;Li.length>17?(wr=Li[16],Br=Li[17],Hr=Li[18]):(wr=defaultPadding,Br=null,Hr=null),Ir&&nr?kr+=Ni:!Ir&&!nr&&(kr-=Ni);let qr=0;for(;Ln<Bn;Ln+=2){if(Sr&&Sr[qr++]<Pr/this.pixelRatio)continue;const Is=this.calculateImageOrLabelDimensions_(Pi.width,Pi.height,En[Ln],En[Ln+1],Pr,lr,ei,ni,Dr,Nr,kr,Lr,Ue,wr,!!Br||!!Hr,ar),oa=[e,Te,Pi,Is,Ki,Br,Hr];if(Cn){let qs,Eo,Rs;if(Er){const Us=Bn-Ln;if(!Er[Us]){Er[Us]={args:oa,declutterMode:ti};continue}const zs=Er[Us];qs=zs.args,Eo=zs.declutterMode,delete Er[Us],Rs=getDeclutterBox(qs)}let As,bo;if(qs&&(Eo!=="declutter"||!Cn.collides(Rs))&&(As=!0),(ti!=="declutter"||!Cn.collides(Is.declutterBox))&&(bo=!0),Eo==="declutter"&&ti==="declutter"){const Us=As&&bo;As=Us,bo=Us}As&&(Eo!=="none"&&Cn.insert(Rs),this.replayImageOrLabel_.apply(this,qs)),bo&&(ti!=="none"&&Cn.insert(Is.declutterBox),this.replayImageOrLabel_.apply(this,oa))}else this.replayImageOrLabel_.apply(this,oa)}++Sn;break;case Instruction.DRAW_CHARS:const Xr=Li[1],cs=Li[2],Qr=Li[3],bs=Li[4];Fi=Li[5];const vs=Li[6],Ms=Li[7],Ls=Li[8];Mi=Li[9];const ps=Li[10];vi=Li[11],pi=Li[12];const Ps=[Li[13],Li[13]];ti=Li[14]||"declutter";const Es=Li[15],Ds=this.textStates[pi],xs=Ds.font,Xs=[Ds.scale[0]*Ms,Ds.scale[1]*Ms];let _o;xs in this.widths_?_o=this.widths_[xs]:(_o={},this.widths_[xs]=_o);const Fs=lineStringLength(En,Xr,cs,2),Ss=Math.abs(Xs[0])*measureAndCacheTextWidth(xs,vi,_o);if(bs||Ss<=Fs){const Is=this.textStates[pi].textAlign,oa=(Fs-Ss)*horizontalTextAlign(vi,Is),qs=drawTextOnPath(En,Xr,cs,2,vi,oa,vs,Math.abs(Xs[0]),measureAndCacheTextWidth,xs,_o,nr?0:this.viewRotation_,Es);e:if(qs){const Eo=[];let Rs,As,bo,Us,zs;if(Mi)for(Rs=0,As=qs.length;Rs<As;++Rs){zs=qs[Rs],bo=zs[4],Us=this.createLabel(bo,pi,"",Mi),ei=zs[2]+(Xs[0]<0?-ps:ps),ni=Qr*Us.height+(.5-Qr)*2*ps*Xs[1]/Xs[0]-Ls;const Ws=this.calculateImageOrLabelDimensions_(Us.width,Us.height,zs[0],zs[1],Us.width,Us.height,ei,ni,0,0,zs[3],Ps,!1,defaultPadding,!1,ar);if(Cn&&ti==="declutter"&&Cn.collides(Ws.declutterBox))break e;Eo.push([e,Te,Us,Ws,1,null,null])}if(Fi)for(Rs=0,As=qs.length;Rs<As;++Rs){zs=qs[Rs],bo=zs[4],Us=this.createLabel(bo,pi,Fi,""),ei=zs[2],ni=Qr*Us.height-Ls;const Ws=this.calculateImageOrLabelDimensions_(Us.width,Us.height,zs[0],zs[1],Us.width,Us.height,ei,ni,0,0,zs[3],Ps,!1,defaultPadding,!1,ar);if(Cn&&ti==="declutter"&&Cn.collides(Ws.declutterBox))break e;Eo.push([e,Te,Us,Ws,1,null,null])}Cn&&ti!=="none"&&Cn.load(Eo.map(getDeclutterBox));for(let Ws=0,yo=Eo.length;Ws<yo;++Ws)this.replayImageOrLabel_.apply(this,Eo[Ws])}}++Sn;break;case Instruction.END_GEOMETRY:if(He!==void 0){ar=Li[1];const Is=He(ar,br,ti);if(Is)return Is}++Sn;break;case Instruction.FILL:cr?fi++:this.fill_(e),++Sn;break;case Instruction.MOVE_TO_LINE_TO:for(Ln=Li[1],Bn=Li[2],pr=En[Ln],rr=En[Ln+1],e.moveTo(pr,rr),ri=pr+.5|0,oi=rr+.5|0,Ln+=2;Ln<Bn;Ln+=2)pr=En[Ln],rr=En[Ln+1],ai=pr+.5|0,ci=rr+.5|0,(Ln==Bn-2||ai!==ri||ci!==oi)&&(e.lineTo(pr,rr),ri=ai,oi=ci);++Sn;break;case Instruction.SET_FILL_STYLE:this.alignAndScaleFill_=Li[2],fi&&(this.fill_(e),fi=0,ui&&(e.stroke(),ui=0)),e.fillStyle=Li[1],++Sn;break;case Instruction.SET_STROKE_STYLE:ui&&(e.stroke(),ui=0),this.setStrokeStyle_(e,Li),++Sn;break;case Instruction.STROKE:cr?ui++:e.stroke(),++Sn;break;default:++Sn;break}}fi&&this.fill_(e),ui&&e.stroke()}execute(e,Te,Oe,Be,Ue,He){this.viewRotation_=Be,this.execute_(e,Te,Oe,this.instructions,Ue,void 0,void 0,He)}executeHitDetection(e,Te,Oe,Be,Ue){return this.viewRotation_=Oe,this.execute_(e,[e.canvas.width,e.canvas.height],Te,this.hitDetectionInstructions,!0,Be,Ue)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(ke=>!DECLUTTER.includes(ke));class ExecutorGroup{constructor(e,Te,Oe,Be,Ue,He,We){this.maxExtent_=e,this.overlaps_=Be,this.pixelRatio_=Oe,this.resolution_=Te,this.renderBuffer_=He,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Ue,We)}clip(e,Te){const Oe=this.getClipCoords(Te);e.beginPath(),e.moveTo(Oe[0],Oe[1]),e.lineTo(Oe[2],Oe[3]),e.lineTo(Oe[4],Oe[5]),e.lineTo(Oe[6],Oe[7]),e.clip()}createExecutors_(e,Te){for(const Oe in e){let Be=this.executorsByZIndex_[Oe];Be===void 0&&(Be={},this.executorsByZIndex_[Oe]=Be);const Ue=e[Oe];for(const He in Ue){const We=Ue[He];Be[He]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,We,Te)}}}hasExecutors(e){for(const Te in this.executorsByZIndex_){const Oe=this.executorsByZIndex_[Te];for(let Be=0,Ue=e.length;Be<Ue;++Be)if(e[Be]in Oe)return!0}return!1}forEachFeatureAtCoordinate(e,Te,Oe,Be,Ue,He){Be=Math.round(Be);const We=Be*2+1,Cn=compose(this.hitDetectionTransform_,Be+.5,Be+.5,1/Te,-1/Te,-Oe,-e[0],-e[1]),An=!this.hitDetectionContext_;An&&(this.hitDetectionContext_=createCanvasContext2D(We,We,void 0,{willReadFrequently:!0}));const En=this.hitDetectionContext_;En.canvas.width!==We||En.canvas.height!==We?(En.canvas.width=We,En.canvas.height=We):An||En.clearRect(0,0,We,We);let Sn;this.renderBuffer_!==void 0&&(Sn=createEmpty(),extendCoordinate(Sn,e),buffer(Sn,Te*(this.renderBuffer_+Be),Sn));const Tn=getPixelIndexArray(Be);let Ln;function Bn(ci,Pi,vi){const pi=En.getImageData(0,0,We,We).data;for(let Mi=0,Fi=Tn.length;Mi<Fi;Mi++)if(pi[Tn[Mi]]>0){if(!He||vi==="none"||Ln!=="Image"&&Ln!=="Text"||He.includes(ci)){const fi=(Tn[Mi]-3)/4,ui=Be-fi%We,Oi=Be-(fi/We|0),Ni=Ue(ci,Pi,ui*ui+Oi*Oi);if(Ni)return Ni}En.clearRect(0,0,We,We);break}}const ei=Object.keys(this.executorsByZIndex_).map(Number);ei.sort(ascending);let ni,ti,ri,oi,ai;for(ni=ei.length-1;ni>=0;--ni){const ci=ei[ni].toString();for(ri=this.executorsByZIndex_[ci],ti=ALL.length-1;ti>=0;--ti)if(Ln=ALL[ti],oi=ri[Ln],oi!==void 0&&(ai=oi.executeHitDetection(En,Cn,Oe,Bn,Sn),ai))return ai}}getClipCoords(e){const Te=this.maxExtent_;if(!Te)return null;const Oe=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=[Oe,Be,Oe,He,Ue,He,Ue,Be];return transform2D(We,0,8,2,e,We),We}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,Te,Oe,Be,Ue,He,We){const Cn=Object.keys(this.executorsByZIndex_).map(Number);Cn.sort(We?descending:ascending),He=He||ALL;const An=ALL.length;for(let En=0,Sn=Cn.length;En<Sn;++En){const Tn=Cn[En].toString(),Ln=this.executorsByZIndex_[Tn];for(let Bn=0,ei=He.length;Bn<ei;++Bn){const ni=He[Bn],ti=Ln[ni];if(ti!==void 0){const ri=We===null?void 0:ti.getZIndexContext(),oi=ri?ri.getContext():e,ai=this.maxExtent_&&ni!=="Image"&&ni!=="Text";if(ai&&(oi.save(),this.clip(oi,Oe)),!ri||ni==="Text"||ni==="Image"?ti.execute(oi,Te,Oe,Be,Ue,We):ri.pushFunction(ci=>ti.execute(ci,Te,Oe,Be,Ue,We)),ai&&oi.restore(),ri){ri.offset();const ci=Cn[En]*An+Bn;this.deferredZIndexContexts_[ci]||(this.deferredZIndexContexts_[ci]=[]),this.deferredZIndexContexts_[ci].push(ri)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,Te=Object.keys(e).map(Number).sort(ascending);for(let Oe=0,Be=Te.length;Oe<Be;++Oe)e[Te[Oe]].forEach(Ue=>{Ue.draw(this.renderedContext_),Ue.clear()}),e[Te[Oe]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(ke){if(circlePixelIndexArrayCache[ke]!==void 0)return circlePixelIndexArrayCache[ke];const e=ke*2+1,Te=ke*ke,Oe=new Array(Te+1);for(let Ue=0;Ue<=ke;++Ue)for(let He=0;He<=ke;++He){const We=Ue*Ue+He*He;if(We>Te)break;let Cn=Oe[We];Cn||(Cn=[],Oe[We]=Cn),Cn.push(((ke+Ue)*e+(ke+He))*4+3),Ue>0&&Cn.push(((ke-Ue)*e+(ke+He))*4+3),He>0&&(Cn.push(((ke+Ue)*e+(ke-He))*4+3),Ue>0&&Cn.push(((ke-Ue)*e+(ke-He))*4+3))}const Be=[];for(let Ue=0,He=Oe.length;Ue<He;++Ue)Oe[Ue]&&Be.push(...Oe[Ue]);return circlePixelIndexArrayCache[ke]=Be,Be}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),Te=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Te.setOpacity(this.getOpacity()),Te}getAnchor(){const e=this.size_,Te=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]/2-Te[0]/Oe[0],e[1]/2+Te[1]/Oe[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var Ue,He;const Te=(Ue=this.fill_)==null?void 0:Ue.getKey(),Oe=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${Te}`+Object.values(this.renderOptions_).join(",");let Be=(He=shared.get(Oe,null,null))==null?void 0:He.getImage(1);if(!Be){const We=this.renderOptions_,Cn=Math.ceil(We.size*e),An=createCanvasContext2D(Cn,Cn);this.draw_(We,An,e),Be=An.canvas,shared.set(Oe,null,null,new IconImage(Be,void 0,null,ImageState.LOADED,null))}return Be}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,Te,Oe){if(Te===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return Te;let Be=this.radius,Ue=this.radius2_===void 0?Be:this.radius2_;if(Be<Ue){const Pi=Be;Be=Ue,Ue=Pi}const He=this.radius2_===void 0?this.points_:this.points_*2,We=2*Math.PI/He,Cn=Ue*Math.sin(We),An=Math.sqrt(Ue*Ue-Cn*Cn),En=Be-An,Sn=Math.sqrt(Cn*Cn+En*En),Tn=Sn/Cn;if(e==="miter"&&Tn<=Oe)return Tn*Te;const Ln=Te/2/Tn,Bn=Te/2*(En/Sn),ni=Math.sqrt((Be+Ln)*(Be+Ln)+Bn*Bn)-Be;if(this.radius2_===void 0||e==="bevel")return ni*2;const ti=Be*Math.sin(We),ri=Math.sqrt(Be*Be-ti*ti),oi=Ue-ri,ci=Math.sqrt(ti*ti+oi*oi)/ti;if(ci<=Oe){const Pi=ci*Te/2-Ue-Be;return 2*Math.max(ni,Pi)}return ni*2}createRenderOptions(){let e=defaultLineCap,Te=defaultLineJoin,Oe=0,Be=null,Ue=0,He,We=0;this.stroke_&&(He=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),We=this.stroke_.getWidth()??defaultLineWidth,Be=this.stroke_.getLineDash(),Ue=this.stroke_.getLineDashOffset()??0,Te=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,Oe=this.stroke_.getMiterLimit()??defaultMiterLimit);const Cn=this.calculateLineJoinSize_(Te,We,Oe),An=Math.max(this.radius,this.radius2_||0),En=Math.ceil(2*An+Cn);return{strokeStyle:He,strokeWidth:We,size:En,lineCap:e,lineDash:Be,lineDashOffset:Ue,lineJoin:Te,miterLimit:Oe}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,Te,Oe){if(Te.scale(Oe,Oe),Te.translate(e.size/2,e.size/2),this.createPath_(Te),this.fill_){let Be=this.fill_.getColor();Be===null&&(Be=defaultFillStyle),Te.fillStyle=asColorLike(Be),Te.fill()}e.strokeStyle&&(Te.strokeStyle=e.strokeStyle,Te.lineWidth=e.strokeWidth,e.lineDash&&(Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset),Te.lineCap=e.lineCap,Te.lineJoin=e.lineJoin,Te.miterLimit=e.miterLimit,Te.stroke())}createHitDetectionCanvas_(e){let Te;if(this.fill_){let Oe=this.fill_.getColor(),Be=0;typeof Oe=="string"&&(Oe=asArray(Oe)),Oe===null?Be=1:Array.isArray(Oe)&&(Be=Oe.length===4?Oe[3]:1),Be===0&&(Te=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,Te))}return Te?Te.canvas:this.getImage(1)}createPath_(e){let Te=this.points_;const Oe=this.radius;if(Te===1/0)e.arc(0,0,Oe,0,2*Math.PI);else{const Be=this.radius2_===void 0?Oe:this.radius2_;this.radius2_!==void 0&&(Te*=2);const Ue=this.angle_-Math.PI/2,He=2*Math.PI/Te;for(let We=0;We<Te;We++){const Cn=Ue+We*He,An=We%2===0?Oe:Be;e.lineTo(An*Math.cos(Cn),An*Math.sin(Cn))}e.closePath()}}drawHitDetectionCanvas_(e,Te){Te.translate(e.size/2,e.size/2),this.createPath_(Te),Te.fillStyle=defaultFillStyle,Te.fill(),e.strokeStyle&&(Te.strokeStyle=e.strokeStyle,Te.lineWidth=e.strokeWidth,e.lineDash&&(Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset),Te.lineJoin=e.lineJoin,Te.miterLimit=e.miterLimit,Te.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),Te=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Te.setOpacity(this.getOpacity()),Te}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const Te=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));Te.ready().then(()=>{this.patternImage_=null}),Te.getImageState()===ImageState.IDLE&&Te.load(),Te.getImageState()===ImageState.LOADING&&(this.patternImage_=Te)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function calculateScale(ke,e,Te,Oe){return Te!==void 0&&Oe!==void 0?[Te/ke,Oe/e]:Te!==void 0?Te/ke:Oe!==void 0?Oe/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const Te=e.opacity!==void 0?e.opacity:1,Oe=e.rotation!==void 0?e.rotation:0,Be=e.scale!==void 0?e.scale:1,Ue=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:Te,rotation:Oe,scale:Be,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Ue,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const He=e.img!==void 0?e.img:null;let We=e.src;assert(!(We!==void 0&&He),"`image` and `src` cannot be provided at the same time"),(We===void 0||We.length===0)&&He&&(We=He.src||getUid(He)),assert(We!==void 0&&We.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let Cn;if(e.src!==void 0?Cn=ImageState.IDLE:He!==void 0&&("complete"in He?He.complete?Cn=He.src?ImageState.LOADED:ImageState.IDLE:Cn=ImageState.LOADING:Cn=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(He,We,this.crossOrigin_,Cn,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let An,En;if(e.size)[An,En]=e.size;else{const Sn=this.getImage(1);if(Sn.width&&Sn.height)An=Sn.width,En=Sn.height;else if(Sn instanceof HTMLImageElement){this.initialOptions_=e;const Tn=()=>{if(this.unlistenImageChange(Tn),!this.initialOptions_)return;const Ln=this.iconImage_.getSize();this.setScale(calculateScale(Ln[0],Ln[1],e.width,e.height))};this.listenImageChange(Tn);return}}An!==void 0&&this.setScale(calculateScale(An,En,e.width,e.height))}}clone(){let e,Te,Oe;return this.initialOptions_?(Te=this.initialOptions_.width,Oe=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:Te,height:Oe,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const Be=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!Be)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=Be[0]),this.anchorYUnits_=="fraction"&&(e[1]*=Be[1])}if(this.anchorOrigin_!="top-left"){if(!Be)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+Be[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+Be[1])}this.normalizedAnchor_=e}const Te=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]-Te[0]/Oe[0],e[1]+Te[1]/Oe[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const Te=this.getSize(),Oe=this.iconImage_.getSize();if(!Te||!Oe)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=Oe[0]-Te[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=Oe[1]-Te[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Uf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Uf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(Te){return Te.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(ke){let e;if(typeof ke=="function")e=ke;else{let Te;Array.isArray(ke)?Te=ke:(assert(typeof ke.getZIndex=="function","Expected an `Style` or an array of `Style`"),Te=[ke]),e=function(){return Te}}return e}let defaultStyles=null;function createDefaultStyle(ke,e){if(!defaultStyles){const Te=new Fill({color:"rgba(255,255,255,0.4)"}),Oe=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:Te,stroke:Oe,radius:5}),fill:Te,stroke:Oe})]}return defaultStyles}function createEditingStyle(){const ke={},e=[255,255,255,1],Te=[0,153,255,1],Oe=3;return ke.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],ke.MultiPolygon=ke.Polygon,ke.LineString=[new Style$1({stroke:new Stroke({color:e,width:Oe+2})}),new Style$1({stroke:new Stroke({color:Te,width:Oe})})],ke.MultiLineString=ke.LineString,ke.Circle=ke.Polygon.concat(ke.LineString),ke.Point=[new Style$1({image:new CircleStyle({radius:Oe*2,fill:new Fill({color:Te}),stroke:new Stroke({color:e,width:Oe/2})}),zIndex:1/0})],ke.MultiPoint=ke.Point,ke.GeometryCollection=ke.Polygon.concat(ke.LineString,ke.Point),ke}function defaultGeometryFunction(ke){return ke.getGeometry()}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}class CanvasImmediateRenderer extends VectorContext{constructor(e,Te,Oe,Be,Ue,He,We){super(),this.context_=e,this.pixelRatio_=Te,this.extent_=Oe,this.transform_=Be,this.transformRotation_=Be?toFixed(Math.atan2(Be[1],Be[0]),10):0,this.viewRotation_=Ue,this.squaredTolerance_=He,this.userTransform_=We,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,Te,Oe,Be){if(!this.image_)return;const Ue=transform2D(e,Te,Oe,Be,this.transform_,this.pixelCoordinates_),He=this.context_,We=this.tmpLocalTransform_,Cn=He.globalAlpha;this.imageOpacity_!=1&&(He.globalAlpha=Cn*this.imageOpacity_);let An=this.imageRotation_;this.transformRotation_===0&&(An-=this.viewRotation_),this.imageRotateWithView_&&(An+=this.viewRotation_);for(let En=0,Sn=Ue.length;En<Sn;En+=2){const Tn=Ue[En]-this.imageAnchorX_,Ln=Ue[En+1]-this.imageAnchorY_;if(An!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const Bn=Tn+this.imageAnchorX_,ei=Ln+this.imageAnchorY_;compose(We,Bn,ei,1,1,An,-Bn,-ei),He.save(),He.transform.apply(He,We),He.translate(Bn,ei),He.scale(this.imageScale_[0],this.imageScale_[1]),He.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),He.restore()}else He.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,Tn,Ln,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(He.globalAlpha=Cn)}drawText_(e,Te,Oe,Be){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Ue=transform2D(e,Te,Oe,Be,this.transform_,this.pixelCoordinates_),He=this.context_;let We=this.textRotation_;for(this.transformRotation_===0&&(We-=this.viewRotation_),this.textRotateWithView_&&(We+=this.viewRotation_);Te<Oe;Te+=Be){const Cn=Ue[Te]+this.textOffsetX_,An=Ue[Te+1]+this.textOffsetY_;We!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(He.save(),He.translate(Cn-this.textOffsetX_,An-this.textOffsetY_),He.rotate(We),He.translate(this.textOffsetX_,this.textOffsetY_),He.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&He.strokeText(this.text_,0,0),this.textFillState_&&He.fillText(this.text_,0,0),He.restore()):(this.textStrokeState_&&He.strokeText(this.text_,Cn,An),this.textFillState_&&He.fillText(this.text_,Cn,An))}}moveToLineTo_(e,Te,Oe,Be,Ue){const He=this.context_,We=transform2D(e,Te,Oe,Be,this.transform_,this.pixelCoordinates_);He.moveTo(We[0],We[1]);let Cn=We.length;Ue&&(Cn-=2);for(let An=2;An<Cn;An+=2)He.lineTo(We[An],We[An+1]);return Ue&&He.closePath(),Oe}drawRings_(e,Te,Oe,Be){for(let Ue=0,He=Oe.length;Ue<He;++Ue)Te=this.moveToLineTo_(e,Te,Oe[Ue],Be,!0);return Te}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=transformGeom2D(e,this.transform_,this.pixelCoordinates_),Oe=Te[2]-Te[0],Be=Te[3]-Te[1],Ue=Math.sqrt(Oe*Oe+Be*Be),He=this.context_;He.beginPath(),He.arc(Te[0],Te[1],Ue,0,2*Math.PI),this.fillState_&&He.fill(),this.strokeState_&&He.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,Te){const Oe=Te.getGeometryFunction()(e);Oe&&(this.setStyle(Te),this.drawGeometry(Oe))}drawGeometryCollection(e){const Te=e.getGeometriesArray();for(let Oe=0,Be=Te.length;Oe<Be;++Oe)this.drawGeometry(Te[Oe])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(Te,0,Te.length,Oe),this.text_!==""&&this.drawText_(Te,0,Te.length,Oe)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(Te,0,Te.length,Oe),this.text_!==""&&this.drawText_(Te,0,Te.length,Oe)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const Te=this.context_,Oe=e.getFlatCoordinates();Te.beginPath(),this.moveToLineTo_(Oe,0,Oe.length,e.getStride(),!1),Te.stroke()}if(this.text_!==""){const Te=e.getFlatMidpoint();this.drawText_(Te,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getExtent();if(intersects$1(this.extent_,Te)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const Oe=this.context_,Be=e.getFlatCoordinates();let Ue=0;const He=e.getEnds(),We=e.getStride();Oe.beginPath();for(let Cn=0,An=He.length;Cn<An;++Cn)Ue=this.moveToLineTo_(Be,Ue,He[Cn],We,!1);Oe.stroke()}if(this.text_!==""){const Oe=e.getFlatMidpoints();this.drawText_(Oe,0,Oe.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=this.context_;Te.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&Te.fill(),this.strokeState_&&Te.stroke()}if(this.text_!==""){const Te=e.getFlatInteriorPoint();this.drawText_(Te,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=this.context_,Oe=e.getOrientedFlatCoordinates();let Be=0;const Ue=e.getEndss(),He=e.getStride();Te.beginPath();for(let We=0,Cn=Ue.length;We<Cn;++We){const An=Ue[We];Be=this.drawRings_(Oe,Be,An,He)}this.fillState_&&Te.fill(),this.strokeState_&&Te.stroke()}if(this.text_!==""){const Te=e.getFlatInteriorPoints();this.drawText_(Te,0,Te.length,2)}}}setContextFillState_(e){const Te=this.context_,Oe=this.contextFillState_;Oe?Oe.fillStyle!=e.fillStyle&&(Oe.fillStyle=e.fillStyle,Te.fillStyle=e.fillStyle):(Te.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const Te=this.context_,Oe=this.contextStrokeState_;Oe?(Oe.lineCap!=e.lineCap&&(Oe.lineCap=e.lineCap,Te.lineCap=e.lineCap),equals$2(Oe.lineDash,e.lineDash)||Te.setLineDash(Oe.lineDash=e.lineDash),Oe.lineDashOffset!=e.lineDashOffset&&(Oe.lineDashOffset=e.lineDashOffset,Te.lineDashOffset=e.lineDashOffset),Oe.lineJoin!=e.lineJoin&&(Oe.lineJoin=e.lineJoin,Te.lineJoin=e.lineJoin),Oe.lineWidth!=e.lineWidth&&(Oe.lineWidth=e.lineWidth,Te.lineWidth=e.lineWidth),Oe.miterLimit!=e.miterLimit&&(Oe.miterLimit=e.miterLimit,Te.miterLimit=e.miterLimit),Oe.strokeStyle!=e.strokeStyle&&(Oe.strokeStyle=e.strokeStyle,Te.strokeStyle=e.strokeStyle)):(Te.lineCap=e.lineCap,Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset,Te.lineJoin=e.lineJoin,Te.lineWidth=e.lineWidth,Te.miterLimit=e.miterLimit,Te.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const Te=this.context_,Oe=this.contextTextState_,Be=e.textAlign?e.textAlign:defaultTextAlign;Oe?(Oe.font!=e.font&&(Oe.font=e.font,Te.font=e.font),Oe.textAlign!=Be&&(Oe.textAlign=Be,Te.textAlign=Be),Oe.textBaseline!=e.textBaseline&&(Oe.textBaseline=e.textBaseline,Te.textBaseline=e.textBaseline)):(Te.font=e.font,Te.textAlign=Be,Te.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:Be,textBaseline:e.textBaseline})}setFillStrokeStyle(e,Te){if(!e)this.fillState_=null;else{const Oe=e.getColor();this.fillState_={fillStyle:asColorLike(Oe||defaultFillStyle)}}if(!Te)this.strokeState_=null;else{const Oe=Te.getColor(),Be=Te.getLineCap(),Ue=Te.getLineDash(),He=Te.getLineDashOffset(),We=Te.getLineJoin(),Cn=Te.getWidth(),An=Te.getMiterLimit(),En=Ue||defaultLineDash;this.strokeState_={lineCap:Be!==void 0?Be:defaultLineCap,lineDash:this.pixelRatio_===1?En:En.map(Sn=>Sn*this.pixelRatio_),lineDashOffset:(He||defaultLineDashOffset)*this.pixelRatio_,lineJoin:We!==void 0?We:defaultLineJoin,lineWidth:(Cn!==void 0?Cn:defaultLineWidth)*this.pixelRatio_,miterLimit:An!==void 0?An:defaultMiterLimit,strokeStyle:asColorLike(Oe||defaultStrokeStyle)}}}setImageStyle(e){let Te;if(!e||!(Te=e.getSize())){this.image_=null;return}const Oe=e.getPixelRatio(this.pixelRatio_),Be=e.getAnchor(),Ue=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=Be[0]*Oe,this.imageAnchorY_=Be[1]*Oe,this.imageHeight_=Te[1]*Oe,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Ue[0],this.imageOriginY_=Ue[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const He=e.getScaleArray();this.imageScale_=[He[0]*this.pixelRatio_/Oe,He[1]*this.pixelRatio_/Oe],this.imageWidth_=Te[0]*Oe}setTextStyle(e){if(!e)this.text_="";else{const Te=e.getFill();if(!Te)this.textFillState_=null;else{const Ln=Te.getColor();this.textFillState_={fillStyle:asColorLike(Ln||defaultFillStyle)}}const Oe=e.getStroke();if(!Oe)this.textStrokeState_=null;else{const Ln=Oe.getColor(),Bn=Oe.getLineCap(),ei=Oe.getLineDash(),ni=Oe.getLineDashOffset(),ti=Oe.getLineJoin(),ri=Oe.getWidth(),oi=Oe.getMiterLimit();this.textStrokeState_={lineCap:Bn!==void 0?Bn:defaultLineCap,lineDash:ei||defaultLineDash,lineDashOffset:ni||defaultLineDashOffset,lineJoin:ti!==void 0?ti:defaultLineJoin,lineWidth:ri!==void 0?ri:defaultLineWidth,miterLimit:oi!==void 0?oi:defaultMiterLimit,strokeStyle:asColorLike(Ln||defaultStrokeStyle)}}const Be=e.getFont(),Ue=e.getOffsetX(),He=e.getOffsetY(),We=e.getRotateWithView(),Cn=e.getRotation(),An=e.getScaleArray(),En=e.getText(),Sn=e.getTextAlign(),Tn=e.getTextBaseline();this.textState_={font:Be!==void 0?Be:defaultFont,textAlign:Sn!==void 0?Sn:defaultTextAlign,textBaseline:Tn!==void 0?Tn:defaultTextBaseline},this.text_=En!==void 0?Array.isArray(En)?En.reduce((Ln,Bn,ei)=>Ln+=ei%2?" ":Bn,""):En:"",this.textOffsetX_=Ue!==void 0?this.pixelRatio_*Ue:0,this.textOffsetY_=He!==void 0?this.pixelRatio_*He:0,this.textRotateWithView_=We!==void 0?We:!1,this.textRotation_=Cn!==void 0?Cn:0,this.textScale_=[this.pixelRatio_*An[0],this.pixelRatio_*An[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(ke,e,Te,Oe,Be,Ue,He,We,Cn){const An=Cn?toUserExtent(Be):Be,En=ke[0]*HIT_DETECT_RESOLUTION,Sn=ke[1]*HIT_DETECT_RESOLUTION,Tn=createCanvasContext2D(En,Sn);Tn.imageSmoothingEnabled=!1;const Ln=Tn.canvas,Bn=new CanvasImmediateRenderer(Tn,HIT_DETECT_RESOLUTION,Be,null,He,We,Cn?getTransformFromProjections(getUserProjection(),Cn):null),ei=Te.length,ni=Math.floor((256*256*256-1)/ei),ti={};for(let oi=1;oi<=ei;++oi){const ai=Te[oi-1],ci=ai.getStyleFunction()||Oe;if(!ci)continue;let Pi=ci(ai,Ue);if(!Pi)continue;Array.isArray(Pi)||(Pi=[Pi]);const pi=(oi*ni).toString(16).padStart(7,"#00000");for(let Mi=0,Fi=Pi.length;Mi<Fi;++Mi){const fi=Pi[Mi],ui=fi.getGeometryFunction()(ai);if(!ui||!intersects$1(An,ui.getExtent()))continue;const Oi=fi.clone(),Ni=Oi.getFill();Ni&&Ni.setColor(pi);const nr=Oi.getStroke();nr&&(nr.setColor(pi),nr.setLineDash(null)),Oi.setText(void 0);const er=fi.getImage();if(er){const rr=er.getImageSize();if(!rr)continue;const br=createCanvasContext2D(rr[0],rr[1],void 0,{alpha:!1}),Li=br.canvas;br.fillStyle=pi,br.fillRect(0,0,Li.width,Li.height),Oi.setImage(new Icon({img:Li,anchor:er.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:er.getOrigin(),opacity:1,size:er.getSize(),scale:er.getScale(),rotation:er.getRotation(),rotateWithView:er.getRotateWithView()}))}const cr=Oi.getZIndex()||0;let ar=ti[cr];ar||(ar={},ti[cr]=ar,ar.Polygon=[],ar.Circle=[],ar.LineString=[],ar.Point=[]);const pr=ui.getType();if(pr==="GeometryCollection"){const rr=ui.getGeometriesArrayRecursive();for(let br=0,Li=rr.length;br<Li;++br){const ur=rr[br];ar[ur.getType().replace("Multi","")].push(ur,Oi)}}else ar[pr.replace("Multi","")].push(ui,Oi)}}const ri=Object.keys(ti).map(Number).sort(ascending);for(let oi=0,ai=ri.length;oi<ai;++oi){const ci=ti[ri[oi]];for(const Pi in ci){const vi=ci[Pi];for(let pi=0,Mi=vi.length;pi<Mi;pi+=2){Bn.setStyle(vi[pi+1]);for(let Fi=0,fi=e.length;Fi<fi;++Fi)Bn.setTransform(e[Fi]),Bn.drawGeometry(vi[pi])}}}return Tn.getImageData(0,0,Ln.width,Ln.height)}function hitDetect(ke,e,Te){const Oe=[];if(Te){const Be=Math.floor(Math.round(ke[0])*HIT_DETECT_RESOLUTION),Ue=Math.floor(Math.round(ke[1])*HIT_DETECT_RESOLUTION),He=(clamp$1(Be,0,Te.width-1)+clamp$1(Ue,0,Te.height-1)*Te.width)*4,We=Te.data[He],Cn=Te.data[He+1],En=Te.data[He+2]+256*(Cn+256*We),Sn=Math.floor((256*256*256-1)/e.length);En&&En%Sn===0&&Oe.push(e[En/Sn-1])}return Oe}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(ke,e){return parseInt(getUid(ke),10)-parseInt(getUid(e),10)}function getSquaredTolerance(ke,e){const Te=getTolerance(ke,e);return Te*Te}function getTolerance(ke,e){return SIMPLIFY_TOLERANCE*ke/e}function renderCircleGeometry(ke,e,Te,Oe,Be){const Ue=Te.getFill(),He=Te.getStroke();if(Ue||He){const Cn=ke.getBuilder(Te.getZIndex(),"Circle");Cn.setFillStrokeStyle(Ue,He),Cn.drawCircle(e,Oe,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=ke.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,Oe)}}function renderFeature$1(ke,e,Te,Oe,Be,Ue,He,We){const Cn=[],An=Te.getImage();if(An){let Tn=!0;const Ln=An.getImageState();Ln==ImageState.LOADED||Ln==ImageState.ERROR?Tn=!1:Ln==ImageState.IDLE&&An.load(),Tn&&Cn.push(An.ready())}const En=Te.getFill();En&&En.loading()&&Cn.push(En.ready());const Sn=Cn.length>0;return Sn&&Promise.all(Cn).then(()=>Be(null)),renderFeatureInternal(ke,e,Te,Oe,Ue,He,We),Sn}function renderFeatureInternal(ke,e,Te,Oe,Be,Ue,He){const We=Te.getGeometryFunction()(e);if(!We)return;const Cn=We.simplifyTransformed(Oe,Be);if(Te.getRenderer())renderGeometry(ke,Cn,Te,e,He);else{const En=GEOMETRY_RENDERERS[Cn.getType()];En(ke,Cn,Te,e,He,Ue)}}function renderGeometry(ke,e,Te,Oe,Be){if(e.getType()=="GeometryCollection"){const He=e.getGeometries();for(let We=0,Cn=He.length;We<Cn;++We)renderGeometry(ke,He[We],Te,Oe,Be);return}ke.getBuilder(Te.getZIndex(),"Default").drawCustom(e,Oe,Te.getRenderer(),Te.getHitDetectionRenderer(),Be)}function renderGeometryCollectionGeometry(ke,e,Te,Oe,Be,Ue){const He=e.getGeometriesArray();let We,Cn;for(We=0,Cn=He.length;We<Cn;++We){const An=GEOMETRY_RENDERERS[He[We].getType()];An(ke,He[We],Te,Oe,Be,Ue)}}function renderLineStringGeometry(ke,e,Te,Oe,Be){const Ue=Te.getStroke();if(Ue){const We=ke.getBuilder(Te.getZIndex(),"LineString");We.setFillStrokeStyle(null,Ue),We.drawLineString(e,Oe,Be)}const He=Te.getText();if(He&&He.getText()){const We=ke.getBuilder(Te.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,Oe,Be)}}function renderMultiLineStringGeometry(ke,e,Te,Oe,Be){const Ue=Te.getStroke();if(Ue){const We=ke.getBuilder(Te.getZIndex(),"LineString");We.setFillStrokeStyle(null,Ue),We.drawMultiLineString(e,Oe,Be)}const He=Te.getText();if(He&&He.getText()){const We=ke.getBuilder(Te.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,Oe,Be)}}function renderMultiPolygonGeometry(ke,e,Te,Oe,Be){const Ue=Te.getFill(),He=Te.getStroke();if(He||Ue){const Cn=ke.getBuilder(Te.getZIndex(),"Polygon");Cn.setFillStrokeStyle(Ue,He),Cn.drawMultiPolygon(e,Oe,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=ke.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,Oe,Be)}}function renderPointGeometry(ke,e,Te,Oe,Be,Ue){const He=Te.getImage(),We=Te.getText(),Cn=We&&We.getText(),An=Ue&&He&&Cn?{}:void 0;if(He){if(He.getImageState()!=ImageState.LOADED)return;const En=ke.getBuilder(Te.getZIndex(),"Image");En.setImageStyle(He,An),En.drawPoint(e,Oe,Be)}if(Cn){const En=ke.getBuilder(Te.getZIndex(),"Text");En.setTextStyle(We,An),En.drawText(e,Oe,Be)}}function renderMultiPointGeometry(ke,e,Te,Oe,Be,Ue){const He=Te.getImage(),We=He&&He.getOpacity()!==0,Cn=Te.getText(),An=Cn&&Cn.getText(),En=Ue&&We&&An?{}:void 0;if(We){if(He.getImageState()!=ImageState.LOADED)return;const Sn=ke.getBuilder(Te.getZIndex(),"Image");Sn.setImageStyle(He,En),Sn.drawMultiPoint(e,Oe,Be)}if(An){const Sn=ke.getBuilder(Te.getZIndex(),"Text");Sn.setTextStyle(Cn,En),Sn.drawText(e,Oe,Be)}}function renderPolygonGeometry(ke,e,Te,Oe,Be){const Ue=Te.getFill(),He=Te.getStroke();if(Ue||He){const Cn=ke.getBuilder(Te.getZIndex(),"Polygon");Cn.setFillStrokeStyle(Ue,He),Cn.drawPolygon(e,Oe,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=ke.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,Oe,Be)}}class RenderEvent extends BaseEvent{constructor(e,Te,Oe,Be){super(e),this.inversePixelTransform=Te,this.frameState=Oe,this.context=Be}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,Te){return abstract()}forEachFeatureAtCoordinate(e,Te,Oe,Be,Ue){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const Te=e.target;(Te.getState()===ImageState.LOADED||Te.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let Te=e.getState();return Te!=ImageState.LOADED&&Te!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),Te==ImageState.IDLE&&(e.load(),Te=e.getState()),Te==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,Te,Oe){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let Be;try{pixelContext.drawImage(e,Te,Oe,1,1,0,0,1,1),Be=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return Be}getBackground(e){let Oe=this.getLayer().getBackground();return typeof Oe=="function"&&(Oe=Oe(e.viewState.resolution)),Oe||void 0}useContainer(e,Te,Oe){const Be=this.getLayer().getClassName();let Ue,He;if(e&&e.className===Be&&(!Oe||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(Oe)))){const We=e.firstElementChild;We instanceof HTMLCanvasElement&&(He=We.getContext("2d"))}if(He&&He.canvas.style.transform===Te?(this.container=e,this.context=He,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Ue=document.createElement("div"),Ue.className=Be;let We=Ue.style;We.position="absolute",We.width="100%",We.height="100%",He=createCanvasContext2D();const Cn=He.canvas;Ue.appendChild(Cn),We=Cn.style,We.position="absolute",We.left="0",We.transformOrigin="top left",this.container=Ue,this.context=He}!this.containerReused&&Oe&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=Oe)}clipUnrotated(e,Te,Oe){const Be=getTopLeft(Oe),Ue=getTopRight(Oe),He=getBottomRight(Oe),We=getBottomLeft(Oe);apply(Te.coordinateToPixelTransform,Be),apply(Te.coordinateToPixelTransform,Ue),apply(Te.coordinateToPixelTransform,He),apply(Te.coordinateToPixelTransform,We);const Cn=this.inversePixelTransform;apply(Cn,Be),apply(Cn,Ue),apply(Cn,He),apply(Cn,We),e.save(),e.beginPath(),e.moveTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(Ue[0]),Math.round(Ue[1])),e.lineTo(Math.round(He[0]),Math.round(He[1])),e.lineTo(Math.round(We[0]),Math.round(We[1])),e.clip()}prepareContainer(e,Te){const Oe=e.extent,Be=e.viewState.resolution,Ue=e.viewState.rotation,He=e.pixelRatio,We=Math.round(getWidth(Oe)/Be*He),Cn=Math.round(getHeight(Oe)/Be*He);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/He,1/He,Ue,-We/2,-Cn/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const An=toString$1(this.pixelTransform);if(this.useContainer(Te,An,this.getBackground(e)),!this.containerReused){const En=this.context.canvas;En.width!=We||En.height!=Cn?(En.width=We,En.height=Cn):this.context.clearRect(0,0,We,Cn),An!==En.style.transform&&(En.style.transform=An)}}dispatchRenderEvent_(e,Te,Oe){const Be=this.getLayer();if(Be.hasListener(e)){const Ue=new RenderEvent(e,this.inversePixelTransform,Oe,Te);Be.dispatchEvent(Ue)}}preRender(e,Te){this.frameState=Te,!Te.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,Te)}postRender(e,Te){Te.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,Te)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,Te,Oe,Be,Ue,He,We){const Cn=Ue/2,An=He/2,En=Be/Te,Sn=-En,Tn=-e[0]+We,Ln=-e[1];return compose(this.tempTransform,Cn,An,En,Sn,-Oe,Tn,Ln)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,Te,Oe){const Be=Te.extent,Ue=Te.viewState,He=Ue.center,We=Ue.resolution,Cn=Ue.projection,An=Ue.rotation,En=Cn.getExtent(),Sn=this.getLayer().getSource(),Tn=this.getLayer().getDeclutter(),Ln=Te.pixelRatio,Bn=Te.viewHints,ei=!(Bn[ViewHint.ANIMATING]||Bn[ViewHint.INTERACTING]),ni=this.context,ti=Math.round(getWidth(Be)/We*Ln),ri=Math.round(getHeight(Be)/We*Ln),oi=Sn.getWrapX()&&Cn.canWrapX(),ai=oi?getWidth(En):null,ci=oi?Math.ceil((Be[2]-En[2])/ai)+1:1;let Pi=oi?Math.floor((Be[0]-En[0])/ai):0;do{let vi=this.getRenderTransform(He,We,0,Ln,ti,ri,Pi*ai);Te.declutter&&(vi=vi.slice(0)),e.execute(ni,[ni.canvas.width,ni.canvas.height],vi,An,ei,Oe===void 0?ALL:Oe?DECLUTTER:NON_DECLUTTER,Oe?Tn&&Te.declutter[Tn]:void 0)}while(++Pi<ci)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,Te){const Oe=e.layerStatesArray[e.layerIndex];this.opacity_=Oe.opacity;const Be=e.viewState;this.prepareContainer(e,Te);const Ue=this.context,He=this.replayGroup_;let We=He&&!He.isEmpty();if(!We&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(Ue,e),Be.projection,this.clipped_=!1,We&&Oe.extent&&this.clipping){const Cn=fromUserExtent(Oe.extent);We=intersects$1(Cn,e.extent),this.clipped_=We&&!containsExtent(Cn,e.extent),this.clipped_&&this.clipUnrotated(Ue,e,Cn)}return We&&this.renderWorlds(He,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&Ue.restore(),this.postRender(Ue,e),this.renderedRotation_!==Be.rotation&&(this.renderedRotation_=Be.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(Te=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const Oe=this.frameState.size.slice(),Be=this.renderedCenter_,Ue=this.renderedResolution_,He=this.renderedRotation_,We=this.renderedProjection_,Cn=this.wrappedRenderedExtent_,An=this.getLayer(),En=[],Sn=Oe[0]*HIT_DETECT_RESOLUTION,Tn=Oe[1]*HIT_DETECT_RESOLUTION;En.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,0).slice());const Ln=An.getSource(),Bn=We.getExtent();if(Ln.getWrapX()&&We.canWrapX()&&!containsExtent(Bn,Cn)){let ei=Cn[0];const ni=getWidth(Bn);let ti=0,ri;for(;ei<Bn[0];)--ti,ri=ni*ti,En.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,ri).slice()),ei+=ni;for(ti=0,ei=Cn[2];ei>Bn[2];)++ti,ri=ni*ti,En.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,ri).slice()),ei-=ni}this.hitDetectionImageData_=createHitDetectionImageData(Oe,En,this.renderedFeatures_,An.getStyleFunction(),Cn,Ue,He,getSquaredTolerance(Ue,this.renderedPixelRatio_),null)}Te(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,Te,Oe,Be,Ue){var Tn,Ln;if(!this.replayGroup_)return;const He=Te.viewState.resolution,We=Te.viewState.rotation,Cn=this.getLayer(),An={},En=function(Bn,ei,ni){const ti=getUid(Bn),ri=An[ti];if(ri){if(ri!==!0&&ni<ri.distanceSq){if(ni===0)return An[ti]=!0,Ue.splice(Ue.lastIndexOf(ri),1),Be(Bn,Cn,ei);ri.geometry=ei,ri.distanceSq=ni}}else{if(ni===0)return An[ti]=!0,Be(Bn,Cn,ei);Ue.push(An[ti]={feature:Bn,layer:Cn,geometry:ei,distanceSq:ni,callback:Be})}},Sn=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,He,We,Oe,En,Sn?(Ln=(Tn=Te.declutter)==null?void 0:Tn[Sn])==null?void 0:Ln.all().map(Bn=>Bn.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const Te=this.getLayer(),Oe=Te.getSource();if(!Oe)return!1;const Be=e.viewHints[ViewHint.ANIMATING],Ue=e.viewHints[ViewHint.INTERACTING],He=Te.getUpdateWhileAnimating(),We=Te.getUpdateWhileInteracting();if(this.ready&&!He&&Be||!We&&Ue)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const Cn=e.extent,An=e.viewState,En=An.projection,Sn=An.resolution,Tn=e.pixelRatio,Ln=Te.getRevision(),Bn=Te.getRenderBuffer();let ei=Te.getRenderOrder();ei===void 0&&(ei=defaultOrder);const ni=An.center.slice(),ti=buffer(Cn,Bn*Sn),ri=ti.slice(),oi=[ti.slice()],ai=En.getExtent();if(Oe.getWrapX()&&En.canWrapX()&&!containsExtent(ai,e.extent)){const Ni=getWidth(ai),nr=Math.max(getWidth(ti)/2,Ni);ti[0]=ai[0]-nr,ti[2]=ai[2]+nr,wrapX$1(ni,En);const er=wrapX$2(oi[0],En);er[0]<ai[0]&&er[2]<ai[2]?oi.push([er[0]+Ni,er[1],er[2]+Ni,er[3]]):er[0]>ai[0]&&er[2]>ai[2]&&oi.push([er[0]-Ni,er[1],er[2]-Ni,er[3]])}if(this.ready&&this.renderedResolution_==Sn&&this.renderedRevision_==Ln&&this.renderedRenderOrder_==ei&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,ti))return equals$2(this.renderedExtent_,ri)||(this.hitDetectionImageData_=null,this.renderedExtent_=ri),this.renderedCenter_=ni,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ci=new BuilderGroup(getTolerance(Sn,Tn),ti,Sn,Tn);let Pi;for(let Ni=0,nr=oi.length;Ni<nr;++Ni)Oe.loadFeatures(oi[Ni],Sn,En);const vi=getSquaredTolerance(Sn,Tn);let pi=!0;const Mi=(Ni,nr)=>{let er;const cr=Ni.getStyleFunction()||Te.getStyleFunction();if(cr&&(er=cr(Ni,Sn)),er){const ar=this.renderFeature(Ni,vi,er,ci,Pi,this.getLayer().getDeclutter(),nr);pi=pi&&!ar}},Fi=toUserExtent(ti),fi=Oe.getFeaturesInExtent(Fi);ei&&fi.sort(ei);for(let Ni=0,nr=fi.length;Ni<nr;++Ni)Mi(fi[Ni],Ni);this.renderedFeatures_=fi,this.ready=pi;const ui=ci.finish(),Oi=new ExecutorGroup(ti,Sn,Tn,Oe.getOverlaps(),ui,Te.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=Sn,this.renderedRevision_=Ln,this.renderedRenderOrder_=ei,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=ri,this.wrappedRenderedExtent_=ti,this.renderedCenter_=ni,this.renderedProjection_=En,this.renderedPixelRatio_=Tn,this.replayGroup_=Oi,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,Te,Oe,Be,Ue,He,We){if(!Oe)return!1;let Cn=!1;if(Array.isArray(Oe))for(let An=0,En=Oe.length;An<En;++An)Cn=renderFeature$1(Be,e,Oe[An],Te,this.boundHandleStyleImageChange_,Ue,He,We)||Cn;else Cn=renderFeature$1(Be,e,Oe,Te,this.boundHandleStyleImageChange_,Ue,He,We);return Cn}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(ke){return ke in typeNames}function typeName(ke){const e=[];for(const Te of namedTypes)includesType(ke,Te)&&e.push(typeNames[Te]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(ke,e){return(ke&e)===e}function isType(ke,e){return ke===e}class LiteralExpression{constructor(e,Te){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=Te}}class CallExpression{constructor(e,Te,...Oe){this.type=e,this.operator=Te,this.args=Oe}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function parse$2(ke,e,Te){switch(typeof ke){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,ke?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,ke)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(ke));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!ke);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,ke.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,ke)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(ke));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!ke);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,ke)}}if(!Array.isArray(ke))throw new Error("expression must be an array or a primitive value");if(ke.length===0)throw new Error("empty expression");if(typeof ke[0]=="string")return parseCallExpression(ke,e,Te);for(const Oe of ke)if(typeof Oe!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(ke.length!==2)throw new Error(`expected an array of two values for a size, got ${ke.length}`);return new LiteralExpression(SizeType,ke)}if(isType(e,ColorType$1)){if(ke.length===3)return new LiteralExpression(ColorType$1,[...ke,1]);if(ke.length===4)return new LiteralExpression(ColorType$1,ke);throw new Error(`expected an array of 3 or 4 values for a color, got ${ke.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,ke)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Zoom]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Time]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(ke,e,Te){const Oe=ke.length-1,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue){const He=ke[Ue+1];switch(typeof He){case"number":{Be[Ue]=new LiteralExpression(NumberType$1,He);break}case"string":{Be[Ue]=new LiteralExpression(StringType$1,He);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${He}`)}Ue===0&&Te.properties.add(String(He))}return Be}function withVarArgs(ke,e,Te){const Oe=ke[1];if(typeof Oe!="string")throw new Error("expected a string argument for var operation");return Te.variables.add(Oe),[new LiteralExpression(StringType$1,Oe)]}function usesFeatureId(ke,e,Te){Te.featureId=!0}function usesGeometryType(ke,e,Te){Te.geometryType=!0}function usesMapState(ke,e,Te){Te.mapState=!0}function withNoArgs(ke,e,Te){const Oe=ke[0];if(ke.length!==1)throw new Error(`expected no arguments for ${Oe} operation`);return[]}function hasArgsCount(ke,e){return function(Te,Oe,Be){const Ue=Te[0],He=Te.length-1;if(ke===e){if(He!==ke){const We=ke===1?"":"s";throw new Error(`expected ${ke} argument${We} for ${Ue}, got ${He}`)}}else if(He<ke||He>e){const We=e===1/0?`${ke} or more`:`${ke} to ${e}`;throw new Error(`expected ${We} arguments for ${Ue}, got ${He}`)}}}function withArgsOfReturnType(ke,e,Te){const Oe=ke.length-1,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue){const He=parse$2(ke[Ue+1],e,Te);Be[Ue]=He}return Be}function withArgsOfType(ke){return function(e,Te,Oe){const Be=e.length-1,Ue=new Array(Be);for(let He=0;He<Be;++He){const We=parse$2(e[He+1],ke,Oe);Ue[He]=We}return Ue}}function hasOddArgs(ke,e,Te){const Oe=ke[0],Be=ke.length-1;if(Be%2===0)throw new Error(`expected an odd number of arguments for ${Oe}, got ${Be} instead`)}function hasEvenArgs(ke,e,Te){const Oe=ke[0],Be=ke.length-1;if(Be%2===1)throw new Error(`expected an even number of arguments for operation ${Oe}, got ${Be} instead`)}function withMatchArgs(ke,e,Te){const Oe=ke.length-1,Be=StringType$1|NumberType$1|BooleanType$1,Ue=parse$2(ke[1],Be,Te),He=parse$2(ke[ke.length-1],e,Te),We=new Array(Oe-2);for(let Cn=0;Cn<Oe-2;Cn+=2){try{const An=parse$2(ke[Cn+2],Ue.type,Te);We[Cn]=An}catch(An){throw new Error(`failed to parse argument ${Cn+1} of match expression: ${An.message}`)}try{const An=parse$2(ke[Cn+3],He.type,Te);We[Cn+1]=An}catch(An){throw new Error(`failed to parse argument ${Cn+2} of match expression: ${An.message}`)}}return[Ue,...We,He]}function withInterpolateArgs(ke,e,Te){const Oe=ke[1];let Be;switch(Oe[0]){case"linear":Be=1;break;case"exponential":const Cn=Oe[1];if(typeof Cn!="number"||Cn<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(Cn)} instead`);Be=Cn;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(Oe)}`)}const Ue=new LiteralExpression(NumberType$1,Be);let He;try{He=parse$2(ke[2],NumberType$1,Te)}catch(Cn){throw new Error(`failed to parse argument 1 in interpolate expression: ${Cn.message}`)}const We=new Array(ke.length-3);for(let Cn=0;Cn<We.length;Cn+=2){try{const An=parse$2(ke[Cn+3],NumberType$1,Te);We[Cn]=An}catch(An){throw new Error(`failed to parse argument ${Cn+2} for interpolate expression: ${An.message}`)}try{const An=parse$2(ke[Cn+4],e,Te);We[Cn+1]=An}catch(An){throw new Error(`failed to parse argument ${Cn+3} for interpolate expression: ${An.message}`)}}return[Ue,He,...We]}function withCaseArgs(ke,e,Te){const Oe=parse$2(ke[ke.length-1],e,Te),Be=new Array(ke.length-1);for(let Ue=0;Ue<Be.length-1;Ue+=2){try{const He=parse$2(ke[Ue+1],BooleanType$1,Te);Be[Ue]=He}catch(He){throw new Error(`failed to parse argument ${Ue} of case expression: ${He.message}`)}try{const He=parse$2(ke[Ue+2],Oe.type,Te);Be[Ue+1]=He}catch(He){throw new Error(`failed to parse argument ${Ue+1} of case expression: ${He.message}`)}}return Be[Be.length-1]=Oe,Be}function withInArgs(ke,e,Te){let Oe=ke[2];if(!Array.isArray(Oe))throw new Error('the second argument for the "in" operator must be an array');let Be;if(typeof Oe[0]=="string"){if(Oe[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(Oe[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');Oe=Oe[1],Be=StringType$1}else Be=NumberType$1;const Ue=new Array(Oe.length);for(let We=0;We<Ue.length;We++)try{const Cn=parse$2(Oe[We],Be,Te);Ue[We]=Cn}catch(Cn){throw new Error(`failed to parse haystack item ${We} for "in" expression: ${Cn.message}`)}return[parse$2(ke[1],Be,Te),...Ue]}function withPaletteArgs(ke,e,Te){let Oe;try{Oe=parse$2(ke[1],NumberType$1,Te)}catch(He){throw new Error(`failed to parse first argument in palette expression: ${He.message}`)}const Be=ke[2];if(!Array.isArray(Be))throw new Error("the second argument of palette must be an array");const Ue=new Array(Be.length);for(let He=0;He<Ue.length;He++){let We;try{We=parse$2(Be[He],ColorType$1,Te)}catch(Cn){throw new Error(`failed to parse color at index ${He} in palette expression: ${Cn.message}`)}if(!(We instanceof LiteralExpression))throw new Error(`the palette color at index ${He} must be a literal value`);Ue[He]=We}return[Oe,...Ue]}function createCallExpressionParser(...ke){return function(e,Te,Oe){const Be=e[0];let Ue;for(let He=0;He<ke.length;He++){const We=ke[He](e,Te,Oe);if(He==ke.length-1){if(!We)throw new Error("expected last argument validator to return the parsed args");Ue=We}}return new CallExpression(Te,Be,...Ue)}}function parseCallExpression(ke,e,Te){const Oe=ke[0],Be=parsers[Oe];if(!Be)throw new Error(`unknown operator: ${Oe}`);return Be(ke,e,Te)}function computeGeometryType(ke){if(!ke)return"";const e=ke.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(ke.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(ke,e,Te){const Oe=parse$2(ke,e,Te);return compileExpression(Oe)}function compileExpression(ke,e){if(ke instanceof LiteralExpression){if(ke.type===ColorType$1&&typeof ke.value=="string"){const Oe=fromString(ke.value);return function(){return Oe}}return function(){return ke.value}}const Te=ke.operator;switch(Te){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(ke);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(ke);case Ops.Id:return Oe=>Oe.featureId;case Ops.GeometryType:return Oe=>Oe.geometryType;case Ops.Concat:{const Oe=ke.args.map(Be=>compileExpression(Be));return Be=>"".concat(...Oe.map(Ue=>Ue(Be).toString()))}case Ops.Resolution:return Oe=>Oe.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(ke);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(ke);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(ke);case Ops.Case:return compileCaseExpression(ke);case Ops.Match:return compileMatchExpression(ke);case Ops.Interpolate:return compileInterpolateExpression(ke);case Ops.ToString:return compileConvertExpression(ke);default:throw new Error(`Unsupported operator ${Te}`)}}function compileAssertionExpression(ke,e){const Te=ke.operator,Oe=ke.args.length,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue)Be[Ue]=compileExpression(ke.args[Ue]);switch(Te){case Ops.Coalesce:return Ue=>{for(let He=0;He<Oe;++He){const We=Be[He](Ue);if(typeof We<"u"&&We!==null)return We}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return Ue=>{for(let He=0;He<Oe;++He){const We=Be[He](Ue);if(typeof We===Te)return We}throw new Error(`Expected one of the values to be a ${Te}`)};default:throw new Error(`Unsupported assertion operator ${Te}`)}}function compileAccessorExpression(ke,e){const Oe=ke.args[0].value;switch(ke.operator){case Ops.Get:return Be=>{const Ue=ke.args;let He=Be.properties[Oe];for(let We=1,Cn=Ue.length;We<Cn;++We){const En=Ue[We].value;He=He[En]}return He};case Ops.Var:return Be=>Be.variables[Oe];case Ops.Has:return Be=>{const Ue=ke.args;if(!(Oe in Be.properties))return!1;let He=Be.properties[Oe];for(let We=1,Cn=Ue.length;We<Cn;++We){const En=Ue[We].value;if(!He||!Object.hasOwn(He,En))return!1;He=He[En]}return!0};default:throw new Error(`Unsupported accessor operator ${ke.operator}`)}}function compileComparisonExpression(ke,e){const Te=ke.operator,Oe=compileExpression(ke.args[0]),Be=compileExpression(ke.args[1]);switch(Te){case Ops.Equal:return Ue=>Oe(Ue)===Be(Ue);case Ops.NotEqual:return Ue=>Oe(Ue)!==Be(Ue);case Ops.LessThan:return Ue=>Oe(Ue)<Be(Ue);case Ops.LessThanOrEqualTo:return Ue=>Oe(Ue)<=Be(Ue);case Ops.GreaterThan:return Ue=>Oe(Ue)>Be(Ue);case Ops.GreaterThanOrEqualTo:return Ue=>Oe(Ue)>=Be(Ue);default:throw new Error(`Unsupported comparison operator ${Te}`)}}function compileLogicalExpression(ke,e){const Te=ke.operator,Oe=ke.args.length,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue)Be[Ue]=compileExpression(ke.args[Ue]);switch(Te){case Ops.Any:return Ue=>{for(let He=0;He<Oe;++He)if(Be[He](Ue))return!0;return!1};case Ops.All:return Ue=>{for(let He=0;He<Oe;++He)if(!Be[He](Ue))return!1;return!0};case Ops.Between:return Ue=>{const He=Be[0](Ue),We=Be[1](Ue),Cn=Be[2](Ue);return He>=We&&He<=Cn};case Ops.In:return Ue=>{const He=Be[0](Ue);for(let We=1;We<Oe;++We)if(He===Be[We](Ue))return!0;return!1};case Ops.Not:return Ue=>!Be[0](Ue);default:throw new Error(`Unsupported logical operator ${Te}`)}}function compileNumericExpression(ke,e){const Te=ke.operator,Oe=ke.args.length,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue)Be[Ue]=compileExpression(ke.args[Ue]);switch(Te){case Ops.Multiply:return Ue=>{let He=1;for(let We=0;We<Oe;++We)He*=Be[We](Ue);return He};case Ops.Divide:return Ue=>Be[0](Ue)/Be[1](Ue);case Ops.Add:return Ue=>{let He=0;for(let We=0;We<Oe;++We)He+=Be[We](Ue);return He};case Ops.Subtract:return Ue=>Be[0](Ue)-Be[1](Ue);case Ops.Clamp:return Ue=>{const He=Be[0](Ue),We=Be[1](Ue);if(He<We)return We;const Cn=Be[2](Ue);return He>Cn?Cn:He};case Ops.Mod:return Ue=>Be[0](Ue)%Be[1](Ue);case Ops.Pow:return Ue=>Math.pow(Be[0](Ue),Be[1](Ue));case Ops.Abs:return Ue=>Math.abs(Be[0](Ue));case Ops.Floor:return Ue=>Math.floor(Be[0](Ue));case Ops.Ceil:return Ue=>Math.ceil(Be[0](Ue));case Ops.Round:return Ue=>Math.round(Be[0](Ue));case Ops.Sin:return Ue=>Math.sin(Be[0](Ue));case Ops.Cos:return Ue=>Math.cos(Be[0](Ue));case Ops.Atan:return Oe===2?Ue=>Math.atan2(Be[0](Ue),Be[1](Ue)):Ue=>Math.atan(Be[0](Ue));case Ops.Sqrt:return Ue=>Math.sqrt(Be[0](Ue));default:throw new Error(`Unsupported numeric operator ${Te}`)}}function compileCaseExpression(ke,e){const Te=ke.args.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be)Oe[Be]=compileExpression(ke.args[Be]);return Be=>{for(let Ue=0;Ue<Te-1;Ue+=2)if(Oe[Ue](Be))return Oe[Ue+1](Be);return Oe[Te-1](Be)}}function compileMatchExpression(ke,e){const Te=ke.args.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be)Oe[Be]=compileExpression(ke.args[Be]);return Be=>{const Ue=Oe[0](Be);for(let He=1;He<Te;He+=2)if(Ue===Oe[He](Be))return Oe[He+1](Be);return Oe[Te-1](Be)}}function compileInterpolateExpression(ke,e){const Te=ke.args.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be)Oe[Be]=compileExpression(ke.args[Be]);return Be=>{const Ue=Oe[0](Be),He=Oe[1](Be);let We,Cn;for(let An=2;An<Te;An+=2){const En=Oe[An](Be);let Sn=Oe[An+1](Be);const Tn=Array.isArray(Sn);if(Tn&&(Sn=withAlpha(Sn)),En>=He)return An===2?Sn:Tn?interpolateColor(Ue,He,We,Cn,En,Sn):interpolateNumber$1(Ue,He,We,Cn,En,Sn);We=En,Cn=Sn}return Cn}}function compileConvertExpression(ke,e){const Te=ke.operator,Oe=ke.args.length,Be=new Array(Oe);for(let Ue=0;Ue<Oe;++Ue)Be[Ue]=compileExpression(ke.args[Ue]);switch(Te){case Ops.ToString:return Ue=>{const He=Be[0](Ue);return ke.args[0].type===ColorType$1?toString(He):He.toString()};default:throw new Error(`Unsupported convert operator ${Te}`)}}function interpolateNumber$1(ke,e,Te,Oe,Be,Ue){const He=Be-Te;if(He===0)return Oe;const We=e-Te,Cn=ke===1?We/He:(Math.pow(ke,We)-1)/(Math.pow(ke,He)-1);return Oe+Cn*(Ue-Oe)}function interpolateColor(ke,e,Te,Oe,Be,Ue){if(Be-Te===0)return Oe;const We=rgbaToLcha(Oe),Cn=rgbaToLcha(Ue);let An=Cn[2]-We[2];An>180?An-=360:An<-180&&(An+=360);const En=[interpolateNumber$1(ke,e,Te,We[0],Be,Cn[0]),interpolateNumber$1(ke,e,Te,We[1],Be,Cn[1]),We[2]+interpolateNumber$1(ke,e,Te,0,Be,An),interpolateNumber$1(ke,e,Te,Oe[3],Be,Ue[3])];return normalize(lchaToRgba(En))}function always(ke){return!0}function rulesToStyleFunction(ke){const e=newParsingContext(),Te=buildRuleSet(ke,e),Oe=newEvaluationContext();return function(Be,Ue){if(Oe.properties=Be.getPropertiesInternal(),Oe.resolution=Ue,e.featureId){const He=Be.getId();He!==void 0?Oe.featureId=He:Oe.featureId=null}return e.geometryType&&(Oe.geometryType=computeGeometryType(Be.getGeometry())),Te(Oe)}}function flatStylesToStyleFunction(ke){const e=newParsingContext(),Te=ke.length,Oe=new Array(Te);for(let He=0;He<Te;++He)Oe[He]=buildStyle(ke[He],e);const Be=newEvaluationContext(),Ue=new Array(Te);return function(He,We){if(Be.properties=He.getPropertiesInternal(),Be.resolution=We,e.featureId){const An=He.getId();An!==void 0?Be.featureId=An:Be.featureId=null}let Cn=0;for(let An=0;An<Te;++An){const En=Oe[An](Be);En&&(Ue[Cn]=En,Cn+=1)}return Ue.length=Cn,Ue}}function buildRuleSet(ke,e){const Te=ke.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be){const Ue=ke[Be],He="filter"in Ue?buildExpression(Ue.filter,BooleanType$1,e):always;let We;if(Array.isArray(Ue.style)){const Cn=Ue.style.length;We=new Array(Cn);for(let An=0;An<Cn;++An)We[An]=buildStyle(Ue.style[An],e)}else We=[buildStyle(Ue.style,e)];Oe[Be]={filter:He,styles:We}}return function(Be){const Ue=[];let He=!1;for(let We=0;We<Te;++We){const Cn=Oe[We].filter;if(Cn(Be)&&!(ke[We].else&&He)){He=!0;for(const An of Oe[We].styles){const En=An(Be);En&&Ue.push(En)}}}return Ue}}function buildStyle(ke,e){const Te=buildFill(ke,"",e),Oe=buildStroke(ke,"",e),Be=buildText(ke,e),Ue=buildImage(ke,e),He=numberEvaluator(ke,"z-index",e);if(!Te&&!Oe&&!Be&&!Ue&&!isEmpty$1(ke))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(ke));const We=new Style$1;return function(Cn){let An=!0;if(Te){const En=Te(Cn);En&&(An=!1),We.setFill(En)}if(Oe){const En=Oe(Cn);En&&(An=!1),We.setStroke(En)}if(Be){const En=Be(Cn);En&&(An=!1),We.setText(En)}if(Ue){const En=Ue(Cn);En&&(An=!1),We.setImage(En)}return He&&We.setZIndex(He(Cn)),An?null:We}}function buildFill(ke,e,Te){let Oe;if(e+"fill-pattern-src"in ke)Oe=patternEvaluator(ke,e+"fill-",Te);else{if(ke[e+"fill-color"]==="none")return Ue=>null;Oe=colorLikeEvaluator(ke,e+"fill-color",Te)}if(!Oe)return null;const Be=new Fill;return function(Ue){const He=Oe(Ue);return He===NO_COLOR?null:(Be.setColor(He),Be)}}function buildStroke(ke,e,Te){const Oe=numberEvaluator(ke,e+"stroke-width",Te),Be=colorLikeEvaluator(ke,e+"stroke-color",Te);if(!Oe&&!Be)return null;const Ue=stringEvaluator(ke,e+"stroke-line-cap",Te),He=stringEvaluator(ke,e+"stroke-line-join",Te),We=numberArrayEvaluator(ke,e+"stroke-line-dash",Te),Cn=numberEvaluator(ke,e+"stroke-line-dash-offset",Te),An=numberEvaluator(ke,e+"stroke-miter-limit",Te),En=new Stroke;return function(Sn){if(Be){const Tn=Be(Sn);if(Tn===NO_COLOR)return null;En.setColor(Tn)}if(Oe&&En.setWidth(Oe(Sn)),Ue){const Tn=Ue(Sn);if(Tn!=="butt"&&Tn!=="round"&&Tn!=="square")throw new Error("Expected butt, round, or square line cap");En.setLineCap(Tn)}if(He){const Tn=He(Sn);if(Tn!=="bevel"&&Tn!=="round"&&Tn!=="miter")throw new Error("Expected bevel, round, or miter line join");En.setLineJoin(Tn)}return We&&En.setLineDash(We(Sn)),Cn&&En.setLineDashOffset(Cn(Sn)),An&&En.setMiterLimit(An(Sn)),En}}function buildText(ke,e){const Te="text-",Oe=stringEvaluator(ke,Te+"value",e);if(!Oe)return null;const Be=buildFill(ke,Te,e),Ue=buildFill(ke,Te+"background-",e),He=buildStroke(ke,Te,e),We=buildStroke(ke,Te+"background-",e),Cn=stringEvaluator(ke,Te+"font",e),An=numberEvaluator(ke,Te+"max-angle",e),En=numberEvaluator(ke,Te+"offset-x",e),Sn=numberEvaluator(ke,Te+"offset-y",e),Tn=booleanEvaluator(ke,Te+"overflow",e),Ln=stringEvaluator(ke,Te+"placement",e),Bn=numberEvaluator(ke,Te+"repeat",e),ei=sizeLikeEvaluator(ke,Te+"scale",e),ni=booleanEvaluator(ke,Te+"rotate-with-view",e),ti=numberEvaluator(ke,Te+"rotation",e),ri=stringEvaluator(ke,Te+"align",e),oi=stringEvaluator(ke,Te+"justify",e),ai=stringEvaluator(ke,Te+"baseline",e),ci=booleanEvaluator(ke,Te+"keep-upright",e),Pi=numberArrayEvaluator(ke,Te+"padding",e),vi=optionalDeclutterMode(ke,Te+"declutter-mode"),pi=new Text({declutterMode:vi});return function(Mi){if(pi.setText(Oe(Mi)),Be&&pi.setFill(Be(Mi)),Ue&&pi.setBackgroundFill(Ue(Mi)),He&&pi.setStroke(He(Mi)),We&&pi.setBackgroundStroke(We(Mi)),Cn&&pi.setFont(Cn(Mi)),An&&pi.setMaxAngle(An(Mi)),En&&pi.setOffsetX(En(Mi)),Sn&&pi.setOffsetY(Sn(Mi)),Tn&&pi.setOverflow(Tn(Mi)),Ln){const Fi=Ln(Mi);if(Fi!=="point"&&Fi!=="line")throw new Error("Expected point or line for text-placement");pi.setPlacement(Fi)}if(Bn&&pi.setRepeat(Bn(Mi)),ei&&pi.setScale(ei(Mi)),ni&&pi.setRotateWithView(ni(Mi)),ti&&pi.setRotation(ti(Mi)),ri){const Fi=ri(Mi);if(Fi!=="left"&&Fi!=="center"&&Fi!=="right"&&Fi!=="end"&&Fi!=="start")throw new Error("Expected left, right, center, start, or end for text-align");pi.setTextAlign(Fi)}if(oi){const Fi=oi(Mi);if(Fi!=="left"&&Fi!=="right"&&Fi!=="center")throw new Error("Expected left, right, or center for text-justify");pi.setJustify(Fi)}if(ai){const Fi=ai(Mi);if(Fi!=="bottom"&&Fi!=="top"&&Fi!=="middle"&&Fi!=="alphabetic"&&Fi!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");pi.setTextBaseline(Fi)}return Pi&&pi.setPadding(Pi(Mi)),ci&&pi.setKeepUpright(ci(Mi)),pi}}function buildImage(ke,e){return"icon-src"in ke?buildIcon(ke,e):"shape-points"in ke?buildShape(ke,e):"circle-radius"in ke?buildCircle(ke,e):null}function buildIcon(ke,e){const Te="icon-",Oe=Te+"src",Be=requireString(ke[Oe],Oe),Ue=coordinateEvaluator(ke,Te+"anchor",e),He=sizeLikeEvaluator(ke,Te+"scale",e),We=numberEvaluator(ke,Te+"opacity",e),Cn=coordinateEvaluator(ke,Te+"displacement",e),An=numberEvaluator(ke,Te+"rotation",e),En=booleanEvaluator(ke,Te+"rotate-with-view",e),Sn=optionalIconOrigin(ke,Te+"anchor-origin"),Tn=optionalIconAnchorUnits(ke,Te+"anchor-x-units"),Ln=optionalIconAnchorUnits(ke,Te+"anchor-y-units"),Bn=optionalColorLike(ke,Te+"color"),ei=optionalString(ke,Te+"cross-origin"),ni=optionalNumberArray(ke,Te+"offset"),ti=optionalIconOrigin(ke,Te+"offset-origin"),ri=optionalNumber(ke,Te+"width"),oi=optionalNumber(ke,Te+"height"),ai=optionalSize(ke,Te+"size"),ci=optionalDeclutterMode(ke,Te+"declutter-mode"),Pi=new Icon({src:Be,anchorOrigin:Sn,anchorXUnits:Tn,anchorYUnits:Ln,color:Bn,crossOrigin:ei,offset:ni,offsetOrigin:ti,height:oi,width:ri,size:ai,declutterMode:ci});return function(vi){return We&&Pi.setOpacity(We(vi)),Cn&&Pi.setDisplacement(Cn(vi)),An&&Pi.setRotation(An(vi)),En&&Pi.setRotateWithView(En(vi)),He&&Pi.setScale(He(vi)),Ue&&Pi.setAnchor(Ue(vi)),Pi}}function buildShape(ke,e){const Te="shape-",Oe=Te+"points",Be=Te+"radius",Ue=requireNumber(ke[Oe],Oe),He=requireNumber(ke[Be],Be),We=buildFill(ke,Te,e),Cn=buildStroke(ke,Te,e),An=sizeLikeEvaluator(ke,Te+"scale",e),En=coordinateEvaluator(ke,Te+"displacement",e),Sn=numberEvaluator(ke,Te+"rotation",e),Tn=booleanEvaluator(ke,Te+"rotate-with-view",e),Ln=optionalNumber(ke,Te+"radius2"),Bn=optionalNumber(ke,Te+"angle"),ei=optionalDeclutterMode(ke,Te+"declutter-mode"),ni=new RegularShape({points:Ue,radius:He,radius2:Ln,angle:Bn,declutterMode:ei});return function(ti){return We&&ni.setFill(We(ti)),Cn&&ni.setStroke(Cn(ti)),En&&ni.setDisplacement(En(ti)),Sn&&ni.setRotation(Sn(ti)),Tn&&ni.setRotateWithView(Tn(ti)),An&&ni.setScale(An(ti)),ni}}function buildCircle(ke,e){const Te="circle-",Oe=buildFill(ke,Te,e),Be=buildStroke(ke,Te,e),Ue=numberEvaluator(ke,Te+"radius",e),He=sizeLikeEvaluator(ke,Te+"scale",e),We=coordinateEvaluator(ke,Te+"displacement",e),Cn=numberEvaluator(ke,Te+"rotation",e),An=booleanEvaluator(ke,Te+"rotate-with-view",e),En=optionalDeclutterMode(ke,Te+"declutter-mode"),Sn=new CircleStyle({radius:5,declutterMode:En});return function(Tn){return Ue&&Sn.setRadius(Ue(Tn)),Oe&&Sn.setFill(Oe(Tn)),Be&&Sn.setStroke(Be(Tn)),We&&Sn.setDisplacement(We(Tn)),Cn&&Sn.setRotation(Cn(Tn)),An&&Sn.setRotateWithView(An(Tn)),He&&Sn.setScale(He(Tn)),Sn}}function numberEvaluator(ke,e,Te){if(!(e in ke))return;const Oe=buildExpression(ke[e],NumberType$1,Te);return function(Be){return requireNumber(Oe(Be),e)}}function stringEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],StringType$1,Te);return function(Be){return requireString(Oe(Be),e)}}function patternEvaluator(ke,e,Te){const Oe=stringEvaluator(ke,e+"pattern-src",Te),Be=sizeEvaluator(ke,e+"pattern-offset",Te),Ue=sizeEvaluator(ke,e+"pattern-size",Te),He=colorLikeEvaluator(ke,e+"color",Te);return function(We){return{src:Oe(We),offset:Be&&Be(We),size:Ue&&Ue(We),color:He&&He(We)}}}function booleanEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],BooleanType$1,Te);return function(Be){const Ue=Oe(Be);if(typeof Ue!="boolean")throw new Error(`Expected a boolean for ${e}`);return Ue}}function colorLikeEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],ColorType$1,Te);return function(Be){return requireColorLike(Oe(Be),e)}}function numberArrayEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],NumberArrayType,Te);return function(Be){return requireNumberArray(Oe(Be),e)}}function coordinateEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],NumberArrayType,Te);return function(Be){const Ue=requireNumberArray(Oe(Be),e);if(Ue.length!==2)throw new Error(`Expected two numbers for ${e}`);return Ue}}function sizeEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],NumberArrayType,Te);return function(Be){return requireSize(Oe(Be),e)}}function sizeLikeEvaluator(ke,e,Te){if(!(e in ke))return null;const Oe=buildExpression(ke[e],NumberArrayType|NumberType$1,Te);return function(Be){return requireSizeLike(Oe(Be),e)}}function optionalNumber(ke,e){const Te=ke[e];if(Te!==void 0){if(typeof Te!="number")throw new Error(`Expected a number for ${e}`);return Te}}function optionalSize(ke,e){const Te=ke[e];if(Te!==void 0){if(typeof Te=="number")return toSize(Te);if(!Array.isArray(Te))throw new Error(`Expected a number or size array for ${e}`);if(Te.length!==2||typeof Te[0]!="number"||typeof Te[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return Te}}function optionalString(ke,e){const Te=ke[e];if(Te!==void 0){if(typeof Te!="string")throw new Error(`Expected a string for ${e}`);return Te}}function optionalIconOrigin(ke,e){const Te=ke[e];if(Te!==void 0){if(Te!=="bottom-left"&&Te!=="bottom-right"&&Te!=="top-left"&&Te!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return Te}}function optionalIconAnchorUnits(ke,e){const Te=ke[e];if(Te!==void 0){if(Te!=="pixels"&&Te!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return Te}}function optionalNumberArray(ke,e){const Te=ke[e];if(Te!==void 0)return requireNumberArray(Te,e)}function optionalDeclutterMode(ke,e){const Te=ke[e];if(Te!==void 0){if(typeof Te!="string")throw new Error(`Expected a string for ${e}`);if(Te!=="declutter"&&Te!=="obstacle"&&Te!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return Te}}function optionalColorLike(ke,e){const Te=ke[e];if(Te!==void 0)return requireColorLike(Te,e)}function requireNumberArray(ke,e){if(!Array.isArray(ke))throw new Error(`Expected an array for ${e}`);const Te=ke.length;for(let Oe=0;Oe<Te;++Oe)if(typeof ke[Oe]!="number")throw new Error(`Expected an array of numbers for ${e}`);return ke}function requireString(ke,e){if(typeof ke!="string")throw new Error(`Expected a string for ${e}`);return ke}function requireNumber(ke,e){if(typeof ke!="number")throw new Error(`Expected a number for ${e}`);return ke}function requireColorLike(ke,e){if(typeof ke=="string")return ke;const Te=requireNumberArray(ke,e),Oe=Te.length;if(Oe<3||Oe>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return Te}function requireSize(ke,e){const Te=requireNumberArray(ke,e);if(Te.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return Te}function requireSizeLike(ke,e){return typeof ke=="number"?ke:requireSize(ke,e)}const ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(ke,e,Te){return function(Oe,Be,Ue,He,We){if(!Oe)return;if(!Be&&!e)return Oe;const Cn=e?0:Ue[0]*Be,An=e?0:Ue[1]*Be,En=We?We[0]:0,Sn=We?We[1]:0;let Tn=ke[0]+Cn/2+En,Ln=ke[2]-Cn/2+En,Bn=ke[1]+An/2+Sn,ei=ke[3]-An/2+Sn;Tn>Ln&&(Tn=(Ln+Tn)/2,Ln=Tn),Bn>ei&&(Bn=(ei+Bn)/2,ei=Bn);let ni=clamp$1(Oe[0],Tn,Ln),ti=clamp$1(Oe[1],Bn,ei);if(He&&Te&&Be){const ri=30*Be;ni+=-ri*Math.log(1+Math.max(0,Tn-Oe[0])/ri)+ri*Math.log(1+Math.max(0,Oe[0]-Ln)/ri),ti+=-ri*Math.log(1+Math.max(0,Bn-Oe[1])/ri)+ri*Math.log(1+Math.max(0,Oe[1]-ei)/ri)}return[ni,ti]}}function none(ke){return ke}function getViewportClampedResolution(ke,e,Te,Oe){const Be=getWidth(e)/Te[0],Ue=getHeight(e)/Te[1];return Oe?Math.min(ke,Math.max(Be,Ue)):Math.min(ke,Math.min(Be,Ue))}function getSmoothClampedResolution(ke,e,Te){let Oe=Math.min(ke,e);const Be=50;return Oe*=Math.log(1+Be*Math.max(0,ke/e-1))/Be+1,Te&&(Oe=Math.max(Oe,Te),Oe/=Math.log(1+Be*Math.max(0,Te/ke-1))/Be+1),clamp$1(Oe,Te/2,e*2)}function createSnapToResolutions(ke,e,Te,Oe){return e=e!==void 0?e:!0,function(Be,Ue,He,We){if(Be!==void 0){const Cn=ke[0],An=ke[ke.length-1],En=Te?getViewportClampedResolution(Cn,Te,He,Oe):Cn;if(We)return e?getSmoothClampedResolution(Be,En,An):clamp$1(Be,An,En);const Sn=Math.min(En,Be),Tn=Math.floor(linearFindNearest(ke,Sn,Ue));return ke[Tn]>En&&Tn<ke.length-1?ke[Tn+1]:ke[Tn]}}}function createSnapToPower(ke,e,Te,Oe,Be,Ue){return Oe=Oe!==void 0?Oe:!0,Te=Te!==void 0?Te:0,function(He,We,Cn,An){if(He!==void 0){const En=Be?getViewportClampedResolution(e,Be,Cn,Ue):e;if(An)return Oe?getSmoothClampedResolution(He,En,Te):clamp$1(He,Te,En);const Sn=1e-9,Tn=Math.ceil(Math.log(e/En)/Math.log(ke)-Sn),Ln=-We*(.5-Sn)+.5,Bn=Math.min(En,He),ei=Math.floor(Math.log(e/Bn)/Math.log(ke)+Ln),ni=Math.max(Tn,ei),ti=e/Math.pow(ke,ni);return clamp$1(ti,Te,En)}}}function createMinMaxResolution(ke,e,Te,Oe,Be){return Te=Te!==void 0?Te:!0,function(Ue,He,We,Cn){if(Ue!==void 0){const An=Oe?getViewportClampedResolution(ke,Oe,We,Be):ke;return!Te||!Cn?clamp$1(Ue,e,An):getSmoothClampedResolution(Ue,An,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const Te=Object.assign({},e);for(const We in ViewProperty)delete Te[We];this.setProperties(Te,!0);const Oe=createResolutionConstraint(e);this.maxResolution_=Oe.maxResolution,this.minResolution_=Oe.minResolution,this.zoomFactor_=Oe.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=Oe.minZoom;const Be=createCenterConstraint(e),Ue=Oe.constraint,He=createRotationConstraint(e);this.constraints_={center:Be,resolution:Ue,rotation:He},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let Te=this.padding_;this.padding_=e;const Oe=this.getCenterInternal();if(Oe){const Be=e||[0,0,0,0];Te=Te||[0,0,0,0];const Ue=this.getResolution(),He=Ue/2*(Be[3]-Te[3]+Te[1]-Be[1]),We=Ue/2*(Be[0]-Te[0]+Te[2]-Be[2]);this.setCenterInternal([Oe[0]+He,Oe[1]-We])}}getUpdatedOptions_(e){const Te=this.getProperties();return Te.resolution!==void 0?Te.resolution=this.getResolution():Te.zoom=this.getZoom(),Te.center=this.getCenterInternal(),Te.rotation=this.getRotation(),Object.assign({},Te,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const Te=new Array(arguments.length);for(let Oe=0;Oe<Te.length;++Oe){let Be=arguments[Oe];Be.center&&(Be=Object.assign({},Be),Be.center=fromUserCoordinate(Be.center,this.getProjection())),Be.anchor&&(Be=Object.assign({},Be),Be.anchor=fromUserCoordinate(Be.anchor,this.getProjection())),Te[Oe]=Be}this.animateInternal.apply(this,Te)}animateInternal(e){let Te=arguments.length,Oe;Te>1&&typeof arguments[Te-1]=="function"&&(Oe=arguments[Te-1],--Te);let Be=0;for(;Be<Te&&!this.isDef();++Be){const En=arguments[Be];En.center&&this.setCenterInternal(En.center),En.zoom!==void 0?this.setZoom(En.zoom):En.resolution&&this.setResolution(En.resolution),En.rotation!==void 0&&this.setRotation(En.rotation)}if(Be===Te){Oe&&animationCallback(Oe,!0);return}let Ue=Date.now(),He=this.targetCenter_.slice(),We=this.targetResolution_,Cn=this.targetRotation_;const An=[];for(;Be<Te;++Be){const En=arguments[Be],Sn={start:Ue,complete:!1,anchor:En.anchor,duration:En.duration!==void 0?En.duration:1e3,easing:En.easing||inAndOut,callback:Oe};if(En.center&&(Sn.sourceCenter=He,Sn.targetCenter=En.center.slice(),He=Sn.targetCenter),En.zoom!==void 0?(Sn.sourceResolution=We,Sn.targetResolution=this.getResolutionForZoom(En.zoom),We=Sn.targetResolution):En.resolution&&(Sn.sourceResolution=We,Sn.targetResolution=En.resolution,We=Sn.targetResolution),En.rotation!==void 0){Sn.sourceRotation=Cn;const Tn=modulo(En.rotation-Cn+Math.PI,2*Math.PI)-Math.PI;Sn.targetRotation=Cn+Tn,Cn=Sn.targetRotation}isNoopAnimation(Sn)?Sn.complete=!0:Ue+=Sn.duration,An.push(Sn)}this.animations_.push(An),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let Te=0,Oe=this.animations_.length;Te<Oe;++Te){const Be=this.animations_[Te];if(Be[0].callback&&animationCallback(Be[0].callback,!1),!e)for(let Ue=0,He=Be.length;Ue<He;++Ue){const We=Be[Ue];if(!We.complete){e=We.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let Te=!1;for(let Oe=this.animations_.length-1;Oe>=0;--Oe){const Be=this.animations_[Oe];let Ue=!0;for(let He=0,We=Be.length;He<We;++He){const Cn=Be[He];if(Cn.complete)continue;const An=e-Cn.start;let En=Cn.duration>0?An/Cn.duration:1;En>=1?(Cn.complete=!0,En=1):Ue=!1;const Sn=Cn.easing(En);if(Cn.sourceCenter){const Tn=Cn.sourceCenter[0],Ln=Cn.sourceCenter[1],Bn=Cn.targetCenter[0],ei=Cn.targetCenter[1];this.nextCenter_=Cn.targetCenter;const ni=Tn+Sn*(Bn-Tn),ti=Ln+Sn*(ei-Ln);this.targetCenter_=[ni,ti]}if(Cn.sourceResolution&&Cn.targetResolution){const Tn=Sn===1?Cn.targetResolution:Cn.sourceResolution+Sn*(Cn.targetResolution-Cn.sourceResolution);if(Cn.anchor){const Ln=this.getViewportSize_(this.getRotation()),Bn=this.constraints_.resolution(Tn,0,Ln,!0);this.targetCenter_=this.calculateCenterZoom(Bn,Cn.anchor)}this.nextResolution_=Cn.targetResolution,this.targetResolution_=Tn,this.applyTargetState_(!0)}if(Cn.sourceRotation!==void 0&&Cn.targetRotation!==void 0){const Tn=Sn===1?modulo(Cn.targetRotation+Math.PI,2*Math.PI)-Math.PI:Cn.sourceRotation+Sn*(Cn.targetRotation-Cn.sourceRotation);if(Cn.anchor){const Ln=this.constraints_.rotation(Tn,!0);this.targetCenter_=this.calculateCenterRotate(Ln,Cn.anchor)}this.nextRotation_=Cn.targetRotation,this.targetRotation_=Tn}if(this.applyTargetState_(!0),Te=!0,!Cn.complete)break}if(Ue){this.animations_[Oe]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const He=Be[0].callback;He&&animationCallback(He,!0)}}this.animations_=this.animations_.filter(Boolean),Te&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,Te){let Oe;const Be=this.getCenterInternal();return Be!==void 0&&(Oe=[Be[0]-Te[0],Be[1]-Te[1]],rotate$1(Oe,e-this.getRotation()),add$3(Oe,Te)),Oe}calculateCenterZoom(e,Te){let Oe;const Be=this.getCenterInternal(),Ue=this.getResolution();if(Be!==void 0&&Ue!==void 0){const He=Te[0]-e*(Te[0]-Be[0])/Ue,We=Te[1]-e*(Te[1]-Be[1])/Ue;Oe=[He,We]}return Oe}getViewportSize_(e){const Te=this.viewportSize_;if(e){const Oe=Te[0],Be=Te[1];return[Math.abs(Oe*Math.cos(e))+Math.abs(Be*Math.sin(e)),Math.abs(Oe*Math.sin(e))+Math.abs(Be*Math.cos(e))]}return Te}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const Te=this.calculateExtentInternal(e);return toUserExtent(Te,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const Te=this.getCenterInternal();assert(Te,"The view center is not defined");const Oe=this.getResolution();assert(Oe!==void 0,"The view resolution is not defined");const Be=this.getRotation();return assert(Be!==void 0,"The view rotation is not defined"),getForViewAndSize(Te,Oe,Be,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,Te){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),Te)}getResolutionForExtentInternal(e,Te){Te=Te||this.getViewportSizeMinusPadding_();const Oe=getWidth(e)/Te[0],Be=getHeight(e)/Te[1];return Math.max(Oe,Be)}getResolutionForValueFunction(e){e=e||2;const Te=this.getConstrainedResolution(this.maxResolution_),Oe=this.minResolution_,Be=Math.log(Te/Oe)/Math.log(e);return function(Ue){return Te/Math.pow(e,Ue*Be)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const Te=Math.log(e||2),Oe=this.getConstrainedResolution(this.maxResolution_),Be=this.minResolution_,Ue=Math.log(Oe/Be)/Te;return function(He){return Math.log(Oe/He)/Te/Ue}}getViewportSizeMinusPadding_(e){let Te=this.getViewportSize_(e);const Oe=this.padding_;return Oe&&(Te=[Te[0]-Oe[1]-Oe[3],Te[1]-Oe[0]-Oe[2]]),Te}getState(){const e=this.getProjection(),Te=this.getResolution(),Oe=this.getRotation();let Be=this.getCenterInternal();const Ue=this.padding_;if(Ue){const He=this.getViewportSizeMinusPadding_();Be=calculateCenterOn(Be,this.getViewportSize_(),[He[0]/2+Ue[3],He[1]/2+Ue[0]],Te,Oe)}return{center:Be.slice(0),projection:e!==void 0?e:null,resolution:Te,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:Oe,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const Te=this.getResolution();return Te!==void 0&&(e=this.getZoomForResolution(Te)),e}getZoomForResolution(e){let Te=this.minZoom_||0,Oe,Be;if(this.resolutions_){const Ue=linearFindNearest(this.resolutions_,e,1);Te=Ue,Oe=this.resolutions_[Ue],Ue==this.resolutions_.length-1?Be=2:Be=Oe/this.resolutions_[Ue+1]}else Oe=this.maxResolution_,Be=this.zoomFactor_;return Te+Math.log(Oe/e)/Math.log(Be)}getResolutionForZoom(e){var Te;if((Te=this.resolutions_)!=null&&Te.length){if(this.resolutions_.length===1)return this.resolutions_[0];const Oe=clamp$1(Math.floor(e),0,this.resolutions_.length-2),Be=this.resolutions_[Oe]/this.resolutions_[Oe+1];return this.resolutions_[Oe]/Math.pow(Be,clamp$1(e-Oe,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,Te){let Oe;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const Be=fromUserExtent(e,this.getProjection());Oe=fromExtent(Be)}else if(e.getType()==="Circle"){const Be=fromUserExtent(e.getExtent(),this.getProjection());Oe=fromExtent(Be),Oe.rotate(this.getRotation(),getCenter(Be))}else Oe=e;this.fitInternal(Oe,Te)}rotatedExtentForGeometry(e){const Te=this.getRotation(),Oe=Math.cos(Te),Be=Math.sin(-Te),Ue=e.getFlatCoordinates(),He=e.getStride();let We=1/0,Cn=1/0,An=-1/0,En=-1/0;for(let Sn=0,Tn=Ue.length;Sn<Tn;Sn+=He){const Ln=Ue[Sn]*Oe-Ue[Sn+1]*Be,Bn=Ue[Sn]*Be+Ue[Sn+1]*Oe;We=Math.min(We,Ln),Cn=Math.min(Cn,Bn),An=Math.max(An,Ln),En=Math.max(En,Bn)}return[We,Cn,An,En]}fitInternal(e,Te){Te=Te||{};let Oe=Te.size;Oe||(Oe=this.getViewportSizeMinusPadding_());const Be=Te.padding!==void 0?Te.padding:[0,0,0,0],Ue=Te.nearest!==void 0?Te.nearest:!1;let He;Te.minResolution!==void 0?He=Te.minResolution:Te.maxZoom!==void 0?He=this.getResolutionForZoom(Te.maxZoom):He=0;const We=this.rotatedExtentForGeometry(e);let Cn=this.getResolutionForExtentInternal(We,[Oe[0]-Be[1]-Be[3],Oe[1]-Be[0]-Be[2]]);Cn=isNaN(Cn)?He:Math.max(Cn,He),Cn=this.getConstrainedResolution(Cn,Ue?0:1);const An=this.getRotation(),En=Math.sin(An),Sn=Math.cos(An),Tn=getCenter(We);Tn[0]+=(Be[1]-Be[3])/2*Cn,Tn[1]+=(Be[0]-Be[2])/2*Cn;const Ln=Tn[0]*Sn-Tn[1]*En,Bn=Tn[1]*Sn+Tn[0]*En,ei=this.getConstrainedCenter([Ln,Bn],Cn),ni=Te.callback?Te.callback:VOID;Te.duration!==void 0?this.animateInternal({resolution:Cn,center:ei,duration:Te.duration,easing:Te.easing},ni):(this.targetResolution_=Cn,this.targetCenter_=ei,this.applyTargetState_(!1,!0),animationCallback(ni,!0))}centerOn(e,Te,Oe){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),Te,Oe)}centerOnInternal(e,Te,Oe){this.setCenterInternal(calculateCenterOn(e,Te,Oe,this.getResolution(),this.getRotation()))}calculateCenterShift(e,Te,Oe,Be){let Ue;const He=this.padding_;if(He&&e){const We=this.getViewportSizeMinusPadding_(-Oe),Cn=calculateCenterOn(e,Be,[We[0]/2+He[3],We[1]/2+He[0]],Te,Oe);Ue=[e[0]-Cn[0],e[1]-Cn[1]]}return Ue}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const Te=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([Te[0]+e[0],Te[1]+e[1]])}adjustCenterInternal(e){const Te=this.targetCenter_;this.setCenterInternal([Te[0]+e[0],Te[1]+e[1]])}adjustResolution(e,Te){Te=Te&&fromUserCoordinate(Te,this.getProjection()),this.adjustResolutionInternal(e,Te)}adjustResolutionInternal(e,Te){const Oe=this.getAnimating()||this.getInteracting(),Be=this.getViewportSize_(this.getRotation()),Ue=this.constraints_.resolution(this.targetResolution_*e,0,Be,Oe);Te&&(this.targetCenter_=this.calculateCenterZoom(Ue,Te)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,Te){this.adjustResolution(Math.pow(this.zoomFactor_,-e),Te)}adjustRotation(e,Te){Te&&(Te=fromUserCoordinate(Te,this.getProjection())),this.adjustRotationInternal(e,Te)}adjustRotationInternal(e,Te){const Oe=this.getAnimating()||this.getInteracting(),Be=this.constraints_.rotation(this.targetRotation_+e,Oe);Te&&(this.targetCenter_=this.calculateCenterRotate(Be,Te)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,Te){return this.hints_[e]+=Te,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,Te){const Oe=this.getAnimating()||this.getInteracting()||Te,Be=this.constraints_.rotation(this.targetRotation_,Oe),Ue=this.getViewportSize_(Be),He=this.constraints_.resolution(this.targetResolution_,0,Ue,Oe),We=this.constraints_.center(this.targetCenter_,He,Ue,Oe,this.calculateCenterShift(this.targetCenter_,He,Be,Ue));this.get(ViewProperty.ROTATION)!==Be&&this.set(ViewProperty.ROTATION,Be),this.get(ViewProperty.RESOLUTION)!==He&&(this.set(ViewProperty.RESOLUTION,He),this.set("zoom",this.getZoom(),!0)),(!We||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),We))&&this.set(ViewProperty.CENTER,We),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,Te,Oe){e=e!==void 0?e:200;const Be=Te||0,Ue=this.constraints_.rotation(this.targetRotation_),He=this.getViewportSize_(Ue),We=this.constraints_.resolution(this.targetResolution_,Be,He),Cn=this.constraints_.center(this.targetCenter_,We,He,!1,this.calculateCenterShift(this.targetCenter_,We,Ue,He));if(e===0&&!this.cancelAnchor_){this.targetResolution_=We,this.targetRotation_=Ue,this.targetCenter_=Cn,this.applyTargetState_();return}Oe=Oe||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==We||this.getRotation()!==Ue||!this.getCenterInternal()||!equals(this.getCenterInternal(),Cn))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Ue,center:Cn,resolution:We,duration:e,easing:easeOut,anchor:Oe}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,Te,Oe){Oe=Oe&&fromUserCoordinate(Oe,this.getProjection()),this.endInteractionInternal(e,Te,Oe)}endInteractionInternal(e,Te,Oe){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,Te,Oe))}getConstrainedCenter(e,Te){const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,Te||this.getResolution(),Oe)}getConstrainedZoom(e,Te){const Oe=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(Oe,Te))}getConstrainedResolution(e,Te){Te=Te||0;const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,Te,Oe)}}function animationCallback(ke,e){setTimeout(function(){ke(e)},0)}function createCenterConstraint(ke){if(ke.extent!==void 0){const Te=ke.smoothExtentConstraint!==void 0?ke.smoothExtentConstraint:!0;return createExtent(ke.extent,ke.constrainOnlyCenter,Te)}const e=createProjection(ke.projection,"EPSG:3857");if(ke.multiWorld!==!0&&e.isGlobal()){const Te=e.getExtent().slice();return Te[0]=-1/0,Te[2]=1/0,createExtent(Te,!1,!1)}return none}function createResolutionConstraint(ke){let e,Te,Oe,He=ke.minZoom!==void 0?ke.minZoom:DEFAULT_MIN_ZOOM,We=ke.maxZoom!==void 0?ke.maxZoom:28;const Cn=ke.zoomFactor!==void 0?ke.zoomFactor:2,An=ke.multiWorld!==void 0?ke.multiWorld:!1,En=ke.smoothResolutionConstraint!==void 0?ke.smoothResolutionConstraint:!0,Sn=ke.showFullExtent!==void 0?ke.showFullExtent:!1,Tn=createProjection(ke.projection,"EPSG:3857"),Ln=Tn.getExtent();let Bn=ke.constrainOnlyCenter,ei=ke.extent;if(!An&&!ei&&Tn.isGlobal()&&(Bn=!1,ei=Ln),ke.resolutions!==void 0){const ni=ke.resolutions;Te=ni[He],Oe=ni[We]!==void 0?ni[We]:ni[ni.length-1],ke.constrainResolution?e=createSnapToResolutions(ni,En,!Bn&&ei,Sn):e=createMinMaxResolution(Te,Oe,En,!Bn&&ei,Sn)}else{const ti=(Ln?Math.max(getWidth(Ln),getHeight(Ln)):360*METERS_PER_UNIT$1.degrees/Tn.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),ri=ti/Math.pow(2,28-DEFAULT_MIN_ZOOM);Te=ke.maxResolution,Te!==void 0?He=0:Te=ti/Math.pow(Cn,He),Oe=ke.minResolution,Oe===void 0&&(ke.maxZoom!==void 0?ke.maxResolution!==void 0?Oe=Te/Math.pow(Cn,We):Oe=ti/Math.pow(Cn,We):Oe=ri),We=He+Math.floor(Math.log(Te/Oe)/Math.log(Cn)),Oe=Te/Math.pow(Cn,We-He),ke.constrainResolution?e=createSnapToPower(Cn,Te,Oe,En,!Bn&&ei,Sn):e=createMinMaxResolution(Te,Oe,En,!Bn&&ei,Sn)}return{constraint:e,maxResolution:Te,minResolution:Oe,minZoom:He,zoomFactor:Cn}}function createRotationConstraint(ke){if(ke.enableRotation!==void 0?ke.enableRotation:!0){const Te=ke.constrainRotation;return Te===void 0||Te===!0?createSnapToZero():Te===!1?none$1:typeof Te=="number"?createSnapToN(Te):none$1}return disable}function isNoopAnimation(ke){return!(ke.sourceCenter&&ke.targetCenter&&!equals(ke.sourceCenter,ke.targetCenter)||ke.sourceResolution!==ke.targetResolution||ke.sourceRotation!==ke.targetRotation)}function calculateCenterOn(ke,e,Te,Oe,Be){const Ue=Math.cos(-Be);let He=Math.sin(-Be),We=ke[0]*Ue-ke[1]*He,Cn=ke[1]*Ue+ke[0]*He;We+=(e[0]/2-Te[0])*Oe,Cn+=(Te[1]-e[1]/2)*Oe,He=-He;const An=We*Ue-Cn*He,En=Cn*Ue+We*He;return[An,En]}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const Te=Object.assign({},e);typeof e.properties=="object"&&(delete Te.properties,Object.assign(Te,e.properties)),Te[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof Te[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),Te[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,Te[LayerProperty.Z_INDEX]=e.zIndex,Te[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,Te[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,Te[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,Te[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=Te.className!==void 0?Te.className:"ol-layer",delete Te.className,this.setProperties(Te),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const Te=this.state_||{layer:this,managed:e===void 0?!0:e},Oe=this.getZIndex();return Te.opacity=clamp$1(Math.round(this.getOpacity()*100)/100,0,1),Te.visible=this.getVisible(),Te.extent=this.getExtent(),Te.zIndex=Oe===void 0&&!Te.managed?1/0:Oe,Te.maxResolution=this.getMaxResolution(),Te.minResolution=Math.max(this.getMinResolution(),0),Te.minZoom=this.getMinZoom(),Te.maxZoom=this.getMaxZoom(),this.state_=Te,Te}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}let Layer$1=class extends BaseLayer{constructor(e){const Te=Object.assign({},e);delete Te.source,super(Te),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const Oe=e.source?e.source:null;this.setSource(Oe)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let Te;const Oe=this.getMapInternal();!e&&Oe&&(e=Oe.getView()),e instanceof View?Te={viewState:e.getState(),extent:e.calculateExtent()}:Te=e,!Te.layerStatesArray&&Oe&&(Te.layerStatesArray=Oe.getLayerGroup().getLayerStatesArray());let Be;if(Te.layerStatesArray){if(Be=Te.layerStatesArray.find(He=>He.layer===this),!Be)return!1}else Be=this.getLayerState();const Ue=this.getExtent();return inView(Be,Te.viewState)&&(!Ue||intersects$1(Ue,Te.extent))}getAttributions(e){var Ue;if(!this.isVisible(e))return[];const Te=(Ue=this.getSource())==null?void 0:Ue.getAttributions();if(!Te)return[];const Oe=e instanceof View?e.getViewStateAndExtent():e;let Be=Te(Oe);return Array.isArray(Be)||(Be=[Be]),Be}render(e,Te){const Oe=this.getRenderer();return Oe.prepareFrame(e)?(this.rendered=!0,Oe.renderFrame(e,Te)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,Te){}renderDeferred(e){const Te=this.getRenderer();Te&&Te.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const Te=e.frameState.layerStatesArray,Oe=this.getLayerState(!1);assert(!Te.some(Be=>Be.layer===Oe.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),Te.push(Oe)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function inView(ke,e){if(!ke.visible)return!1;const Te=e.resolution;if(Te<ke.minResolution||Te>=ke.maxResolution)return!1;const Oe=e.zoom;return Oe>ke.minZoom&&Oe<=ke.maxZoom}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.style,delete Te.renderBuffer,delete Te.updateWhileAnimating,delete Te.updateWhileInteracting,super(Te),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,Te){const Oe=this.getDeclutter();Oe in e.declutter||(e.declutter[Oe]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,Te)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const Te=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(Te),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(ke){if(ke===void 0)return createDefaultStyle;if(!ke)return null;if(typeof ke=="function"||ke instanceof Style$1)return ke;if(!Array.isArray(ke))return flatStylesToStyleFunction([ke]);if(ke.length===0)return[];const e=ke.length,Te=ke[0];if(Te instanceof Style$1){const Be=new Array(e);for(let Ue=0;Ue<e;++Ue){const He=ke[Ue];if(!(He instanceof Style$1))throw new Error("Expected a list of style instances");Be[Ue]=He}return Be}if("style"in Te){const Be=new Array(e);for(let Ue=0;Ue<e;++Ue){const He=ke[Ue];if(!("style"in He))throw new Error("Expected a list of rules with a style property");Be[Ue]=He}return rulesToStyleFunction(Be)}return flatStylesToStyleFunction(ke)}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,Te){super(e),this.feature=Te}}function getTraceTargets(ke,e){const Te=[];for(let Oe=0;Oe<e.length;++Oe){const Ue=e[Oe].getGeometry();appendGeometryTraceTargets(ke,Ue,Te)}return Te}function getSquaredDistance(ke,e){return squaredDistance$1(ke[0],ke[1],e[0],e[1])}function getCoordinate(ke,e){const Te=ke.length;return e<0?ke[e+Te]:e>=Te?ke[e-Te]:ke[e]}function getCumulativeSquaredDistance(ke,e,Te){let Oe,Be;e<Te?(Oe=e,Be=Te):(Oe=Te,Be=e);const Ue=Math.ceil(Oe),He=Math.floor(Be);if(Ue>He){const Cn=interpolateCoordinate(ke,Oe),An=interpolateCoordinate(ke,Be);return getSquaredDistance(Cn,An)}let We=0;if(Oe<Ue){const Cn=interpolateCoordinate(ke,Oe),An=getCoordinate(ke,Ue);We+=getSquaredDistance(Cn,An)}if(He<Be){const Cn=getCoordinate(ke,He),An=interpolateCoordinate(ke,Be);We+=getSquaredDistance(Cn,An)}for(let Cn=Ue;Cn<He-1;++Cn){const An=getCoordinate(ke,Cn),En=getCoordinate(ke,Cn+1);We+=getSquaredDistance(An,En)}return We}function appendGeometryTraceTargets(ke,e,Te){if(e instanceof LineString){appendTraceTarget(ke,e.getCoordinates(),!1,Te);return}if(e instanceof MultiLineString){const Oe=e.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be)appendTraceTarget(ke,Oe[Be],!1,Te);return}if(e instanceof Polygon){const Oe=e.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be)appendTraceTarget(ke,Oe[Be],!0,Te);return}if(e instanceof MultiPolygon){const Oe=e.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be];for(let We=0,Cn=He.length;We<Cn;++We)appendTraceTarget(ke,He[We],!0,Te)}return}if(e instanceof GeometryCollection){const Oe=e.getGeometries();for(let Be=0;Be<Oe.length;++Be)appendGeometryTraceTargets(ke,Oe[Be],Te);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(ke,e,Te,Oe){const Be=ke[0],Ue=ke[1];let He=1/0,We=-1,Cn=NaN;for(let Sn=0;Sn<e.targets.length;++Sn){const Tn=e.targets[Sn],Ln=Tn.coordinates;let Bn=1/0,ei;for(let ni=0;ni<Ln.length-1;++ni){const ti=Ln[ni],ri=Ln[ni+1],oi=getPointSegmentRelationship(Be,Ue,ti,ri);oi.squaredDistance<Bn&&(Bn=oi.squaredDistance,ei=ni+oi.along)}Bn<He&&(He=Bn,Tn.ring&&e.targetIndex===Sn&&(Tn.endIndex>Tn.startIndex?ei<Tn.startIndex&&(ei+=Ln.length):Tn.endIndex<Tn.startIndex&&ei>Tn.startIndex&&(ei-=Ln.length)),Cn=ei,We=Sn)}const An=e.targets[We];let En=An.ring;if(e.targetIndex===We&&En){const Sn=interpolateCoordinate(An.coordinates,Cn),Tn=Te.getPixelFromCoordinate(Sn);distance(Tn,e.startPx)>Oe&&(En=!1)}if(En){const Sn=An.coordinates,Tn=Sn.length,Ln=An.startIndex,Bn=Cn;if(Ln<Bn){const ei=getCumulativeSquaredDistance(Sn,Ln,Bn);getCumulativeSquaredDistance(Sn,Ln,Bn-Tn)<ei&&(Cn-=Tn)}else{const ei=getCumulativeSquaredDistance(Sn,Ln,Bn);getCumulativeSquaredDistance(Sn,Ln,Bn+Tn)<ei&&(Cn+=Tn)}}return sharedUpdateInfo.index=We,sharedUpdateInfo.endIndex=Cn,sharedUpdateInfo}function appendTraceTarget(ke,e,Te,Oe){const Be=ke[0],Ue=ke[1];for(let He=0,We=e.length-1;He<We;++He){const Cn=e[He],An=e[He+1],En=getPointSegmentRelationship(Be,Ue,Cn,An);if(En.squaredDistance===0){const Sn=He+En.along;Oe.push({coordinates:e,ring:Te,startIndex:Sn,endIndex:Sn});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(ke,e,Te,Oe){const Be=Te[0],Ue=Te[1],He=Oe[0],We=Oe[1],Cn=He-Be,An=We-Ue;let En=0,Sn=Be,Tn=Ue;return(Cn!==0||An!==0)&&(En=clamp$1(((ke-Be)*Cn+(e-Ue)*An)/(Cn*Cn+An*An),0,1),Sn+=Cn*En,Tn+=An*En),sharedRel.along=En,sharedRel.squaredDistance=toFixed(squaredDistance$1(ke,e,Sn,Tn),10),sharedRel}function interpolateCoordinate(ke,e){const Te=ke.length;let Oe=Math.floor(e);const Be=e-Oe;Oe>=Te?Oe-=Te:Oe<0&&(Oe+=Te);let Ue=Oe+1;Ue>=Te&&(Ue-=Te);const He=ke[Oe],We=He[0],Cn=He[1],An=ke[Ue],En=An[0]-We,Sn=An[1]-Cn;return[We+En*Be,Cn+Sn*Be]}class Draw extends PointerInteraction{constructor(e){const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let Oe=e.geometryFunction;if(!Oe){const Be=this.mode_;if(Be==="Circle")Oe=(Ue,He,We)=>{const Cn=He||new Circle([NaN,NaN]),An=fromUserCoordinate(Ue[0]),En=squaredDistance(An,fromUserCoordinate(Ue[Ue.length-1]));return Cn.setCenterAndRadius(An,Math.sqrt(En),this.geometryLayout_),Cn};else{let Ue;Be==="Point"?Ue=Point$1:Be==="LineString"?Ue=LineString:Be==="Polygon"&&(Ue=Polygon),Oe=(He,We,Cn)=>(We?Be==="Polygon"?He[0].length?We.setCoordinates([He[0].concat([He[0][0]])],this.geometryLayout_):We.setCoordinates([],this.geometryLayout_):We.setCoordinates(He,this.geometryLayout_):We=new Ue(He,this.geometryLayout_),We)}}this.geometryFunction_=Oe,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let Te;e?e===!0?Te=always$1:Te=e:Te=never,this.traceCondition_=Te}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let Te=e.type===MapBrowserEventType.POINTERMOVE,Oe=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,Te=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),Oe=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?Oe=!1:Te&&this.getPointerCount()<2?(Oe=e.type===MapBrowserEventType.POINTERMOVE,Oe&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(Oe=!1),super.handleEvent(e)&&Oe}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const Te=this.getMap(),Oe=Te.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),Be=Te.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Ue=boundingExtent([Oe,Be]),He=this.traceSource_.getFeaturesInExtent(Ue);if(He.length===0)return;const We=getTraceTargets(e.coordinate,He);We.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:We,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,Te){const Oe=e.startIndex<=e.endIndex,Be=e.startIndex<=Te;Oe===Be?Oe&&Te>e.endIndex||!Oe&&Te<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,Te):(Oe&&Te<e.endIndex||!Oe&&Te>e.endIndex)&&this.removeTracedCoordinates_(Te,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,Te))}removeTracedCoordinates_(e,Te){if(e===Te)return;let Oe=0;if(e<Te){const Be=Math.ceil(e);let Ue=Math.floor(Te);Ue===Te&&(Ue-=1),Oe=Ue-Be+1}else{const Be=Math.floor(e);let Ue=Math.ceil(Te);Ue===Te&&(Ue+=1),Oe=Be-Ue+1}Oe>0&&this.removeLastPoints_(Oe)}addTracedCoordinates_(e,Te,Oe){if(Te===Oe)return;const Be=[];if(Te<Oe){const Ue=Math.ceil(Te);let He=Math.floor(Oe);He===Oe&&(He-=1);for(let We=Ue;We<=He;++We)Be.push(getCoordinate(e.coordinates,We))}else{const Ue=Math.floor(Te);let He=Math.ceil(Oe);He===Oe&&(He+=1);for(let We=Ue;We>=He;--We)Be.push(getCoordinate(e.coordinates,We))}Be.length&&this.appendCoordinates(Be)}updateTrace_(e){const Te=this.traceState_;if(!Te.active||Te.targetIndex===-1&&distance(Te.startPx,e.pixel)<this.snapTolerance_)return;const Oe=getTraceTargetUpdate(e.coordinate,Te,this.getMap(),this.snapTolerance_);if(Te.targetIndex!==Oe.index){if(Te.targetIndex!==-1){const Cn=Te.targets[Te.targetIndex];this.removeTracedCoordinates_(Cn.startIndex,Cn.endIndex)}const We=Te.targets[Oe.index];this.addTracedCoordinates_(We,We.startIndex,Oe.endIndex)}else{const We=Te.targets[Te.targetIndex];this.addOrRemoveTracedCoordinates_(We,Oe.endIndex)}Te.targetIndex=Oe.index;const Be=Te.targets[Te.targetIndex];Be.endIndex=Oe.endIndex;const Ue=interpolateCoordinate(Be.coordinates,Be.endIndex),He=this.getMap().getPixelFromCoordinate(Ue);e.coordinate=Ue,e.pixel=[Math.round(He[0]),Math.round(He[1])]}handleUpEvent(e){let Te=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const Oe=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const Be=!this.finishCoordinate_;Be&&this.startDrawing_(e.coordinate),!Be&&this.freehand_?this.finishDrawing():!this.freehand_&&(!Be||this.mode_==="Point")&&(this.atFinish_(e.pixel,Oe)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),Te=!1}else this.freehand_&&this.abortDrawing()}return!Te&&this.stopClick_&&e.preventDefault(),Te}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const Te=this.downPx_,Oe=e.pixel,Be=Te[0]-Oe[0],Ue=Te[1]-Oe[1],He=Be*Be+Ue*Ue;if(this.shouldHandle_=this.freehand_?He>this.squaredClickTolerance_:He<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,Te){let Oe=!1;if(this.sketchFeature_){let Be=!1,Ue=[this.finishCoordinate_];const He=this.mode_;if(He==="Point")Oe=!0;else if(He==="Circle")Oe=this.sketchCoords_.length===2;else if(He==="LineString")Be=!Te&&this.sketchCoords_.length>this.minPoints_;else if(He==="Polygon"){const We=this.sketchCoords_;Be=We[0].length>this.minPoints_,Ue=[We[0][0],We[0][We[0].length-2]],Te?Ue=[We[0][0]]:Ue=[We[0][0],We[0][We[0].length-2]]}if(Be){const We=this.getMap();for(let Cn=0,An=Ue.length;Cn<An;Cn++){const En=Ue[Cn],Sn=We.getPixelFromCoordinate(En),Tn=e[0]-Sn[0],Ln=e[1]-Sn[1],Bn=this.freehand_?1:this.snapTolerance_;if(Oe=Math.sqrt(Tn*Tn+Ln*Ln)<=Bn,Oe){this.finishCoordinate_=En;break}}}}return Oe}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const Te=e.getLinearRing(0);let Oe=this.sketchLine_.getGeometry();Oe?(Oe.setFlatCoordinates(Te.getLayout(),Te.getFlatCoordinates()),Oe.changed()):(Oe=new LineString(Te.getFlatCoordinates(),Te.getLayout()),this.sketchLine_.setGeometry(Oe))}startDrawing_(e){const Te=this.getMap().getView().getProjection(),Oe=getStrideForLayout(this.geometryLayout_);for(;e.length<Oe;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const Be=this.geometryFunction_(this.sketchCoords_,void 0,Te);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(Be),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const Te=this.getMap(),Oe=this.sketchFeature_.getGeometry(),Be=Te.getView().getProjection(),Ue=getStrideForLayout(this.geometryLayout_);let He,We;for(;e.length<Ue;)e.push(0);this.mode_==="Point"?We=this.sketchCoords_:this.mode_==="Polygon"?(He=this.sketchCoords_[0],We=He[He.length-1],this.atFinish_(Te.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(He=this.sketchCoords_,We=He[He.length-1]),We[0]=e[0],We[1]=e[1],this.geometryFunction_(this.sketchCoords_,Oe,Be),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),Oe.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(Oe):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const Te=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection();let Be,Ue;const He=this.mode_;return He==="LineString"||He==="Circle"?(this.finishCoordinate_=e.slice(),Ue=this.sketchCoords_,Ue.length>=this.maxPoints_&&(this.freehand_?Ue.pop():Be=!0),Ue.push(e.slice()),this.geometryFunction_(Ue,Te,Oe)):He==="Polygon"&&(Ue=this.sketchCoords_[0],Ue.length>=this.maxPoints_&&(this.freehand_?Ue.pop():Be=!0),Ue.push(e.slice()),Be&&(this.finishCoordinate_=Ue[0]),this.geometryFunction_(this.sketchCoords_,Te,Oe)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),Be?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const Te=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection(),Be=this.mode_;for(let Ue=0;Ue<e;++Ue){let He;if(Be==="LineString"||Be==="Circle"){if(He=this.sketchCoords_,He.splice(-2,1),He.length>=2){this.finishCoordinate_=He[He.length-2].slice();const We=this.finishCoordinate_.slice();He[He.length-1]=We,this.createOrUpdateSketchPoint_(We)}this.geometryFunction_(He,Te,Oe),Te.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(Te)}else if(Be==="Polygon"){He=this.sketchCoords_[0],He.splice(-2,1);const We=this.sketchLine_.getGeometry();if(He.length>=2){const Cn=He[He.length-2].slice();He[He.length-1]=Cn,this.createOrUpdateSketchPoint_(Cn)}We.setCoordinates(He),this.geometryFunction_(this.sketchCoords_,Te,Oe)}if(He.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let Te=this.sketchCoords_;const Oe=e.getGeometry(),Be=this.getMap().getView().getProjection();return this.mode_==="LineString"?(Te.pop(),this.geometryFunction_(Te,Oe,Be)):this.mode_==="Polygon"&&(Te[0].pop(),this.geometryFunction_(Te,Oe,Be),Te=Oe.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([Te])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([Te])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([Te])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const Te=this.mode_,Oe=!this.sketchFeature_;Oe&&this.startDrawing_(e[0]);let Be;if(Te==="LineString"||Te==="Circle")Be=this.sketchCoords_;else if(Te==="Polygon")Be=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;Oe&&Be.shift(),Be.pop();for(let He=0;He<e.length;He++)this.addToDrawing_(e[He]);const Ue=e[e.length-1];this.sketchFeature_=this.addToDrawing_(Ue),this.modifyDrawing_(Ue)}extend(e){const Oe=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=Oe.getCoordinates();const Be=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=Be.slice(),this.sketchCoords_.push(Be.slice()),this.sketchPoint_=new Feature(new Point$1(Be)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const Te=this.overlay_.getSource();Te.clear(!0),Te.addFeatures(e)}updateState_(){const e=this.getMap(),Te=this.getActive();(!e||!Te)&&this.abortDrawing(),this.overlay_.setMap(Te?e:null)}}function getDefaultStyleFunction$2(){const ke=createEditingStyle();return function(e,Te){return ke[e.getGeometry().getType()]}}function getMode(ke){switch(ke){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+ke)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(Te){return noModifierKeys(Te)&&targetNotEditable(Te)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let Te=!1;if(e.type==EventType.KEYDOWN){const Oe=e.originalEvent,Be=Oe.key;if(this.condition_(e)&&(Be==Key.DOWN||Be==Key.LEFT||Be==Key.RIGHT||Be==Key.UP)){const He=e.map.getView(),We=He.getResolution()*this.pixelDelta_;let Cn=0,An=0;Be==Key.DOWN?An=-We:Be==Key.LEFT?Cn=-We:Be==Key.RIGHT?Cn=We:An=We;const En=[Cn,An];rotate$1(En,He.getRotation()),pan(He,En,this.duration_),Oe.preventDefault(),Te=!0}}return!Te}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(Te){return!platformModifierKey(Te)&&targetNotEditable(Te)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let Te=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const Oe=e.originalEvent,Be=Oe.key;if(this.condition_(e)&&(Be==="+"||Be==="-")){const Ue=e.map,He=Be==="+"?this.delta_:-this.delta_,We=Ue.getView();zoomByDelta(We,He,void 0,this.duration_),Oe.preventDefault(),Te=!0}}return!Te}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,Te,Oe){super(e),this.features=Te,this.mapBrowserEvent=Oe}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(Oe){return altKeyOnly(Oe)&&singleClick(Oe)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let Te;if(e.features?Te=e.features:e.source&&(this.source_=e.source,Te=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!Te)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=Te,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const Te=e.getGeometry();if(Te){const Be=this.SEGMENT_WRITERS_[Te.getType()];Be&&Be(e,Te)}const Oe=this.getMap();Oe&&Oe.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(Oe.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,Te){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const Oe=this.featuresBeingModified_.getArray();for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=Te[Be].feature;He&&!Oe.includes(He)&&this.featuresBeingModified_.push(He)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const Te=this.rBush_,Oe=[];Te.forEach(function(Be){e===Be.feature&&Oe.push(Be)});for(let Be=Oe.length-1;Be>=0;--Be){const Ue=Oe[Be];for(let He=this.dragSegments_.length-1;He>=0;--He)this.dragSegments_[He][0]===Ue&&this.dragSegments_.splice(He,1);Te.remove(Ue)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const Te=e.target;this.removeFeature_(Te),this.addFeature_(Te)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,Te){const Oe=Te.getCoordinates(),Be={feature:e,geometry:Te,segment:[Oe,Oe]};this.rBush_.insert(Te.getExtent(),Be)}writeMultiPointGeometry_(e,Te){const Oe=Te.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be],We={feature:e,geometry:Te,depth:[Be],index:Be,segment:[He,He]};this.rBush_.insert(Te.getExtent(),We)}}writeLineStringGeometry_(e,Te){const Oe=Te.getCoordinates();for(let Be=0,Ue=Oe.length-1;Be<Ue;++Be){const He=Oe.slice(Be,Be+2),We={feature:e,geometry:Te,index:Be,segment:He};this.rBush_.insert(boundingExtent(He),We)}}writeMultiLineStringGeometry_(e,Te){const Oe=Te.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be];for(let We=0,Cn=He.length-1;We<Cn;++We){const An=He.slice(We,We+2),En={feature:e,geometry:Te,depth:[Be],index:We,segment:An};this.rBush_.insert(boundingExtent(An),En)}}}writePolygonGeometry_(e,Te){const Oe=Te.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be];for(let We=0,Cn=He.length-1;We<Cn;++We){const An=He.slice(We,We+2),En={feature:e,geometry:Te,depth:[Be],index:We,segment:An};this.rBush_.insert(boundingExtent(An),En)}}}writeMultiPolygonGeometry_(e,Te){const Oe=Te.getCoordinates();for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be];for(let We=0,Cn=He.length;We<Cn;++We){const An=He[We];for(let En=0,Sn=An.length-1;En<Sn;++En){const Tn=An.slice(En,En+2),Ln={feature:e,geometry:Te,depth:[We,Be],index:En,segment:Tn};this.rBush_.insert(boundingExtent(Tn),Ln)}}}}writeCircleGeometry_(e,Te){const Oe=Te.getCenter(),Be={feature:e,geometry:Te,index:CIRCLE_CENTER_INDEX,segment:[Oe,Oe]},Ue={feature:e,geometry:Te,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[Oe,Oe]},He=[Be,Ue];Be.featureSegments=He,Ue.featureSegments=He,this.rBush_.insert(createOrUpdateFromCoordinate(Oe),Be);let We=Te;this.rBush_.insert(We.getExtent(),Ue)}writeGeometryCollectionGeometry_(e,Te){const Oe=Te.getGeometriesArray();for(let Be=0;Be<Oe.length;++Be){const Ue=Oe[Be],He=this.SEGMENT_WRITERS_[Ue.getType()];He(e,Ue)}}createOrUpdateVertexFeature_(e,Te,Oe,Be){let Ue=this.vertexFeature_;return Ue?Ue.getGeometry().setCoordinates(e):(Ue=new Feature(new Point$1(e)),this.vertexFeature_=Ue,this.overlay_.getSource().addFeature(Ue)),Ue.set("features",Te),Ue.set("geometries",Oe),Ue.set("existing",Be),Ue}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let Te;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?Te=this.removePoint():Te=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!Te}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const Te=this.vertexFeature_;if(!Te)return;this.getMap().getView().getProjection();const Oe=[],Be=Te.getGeometry().getCoordinates(),Ue=boundingExtent([Be]),He=this.rBush_.getInExtent(Ue),We={};He.sort(compareIndexes);for(let Cn=0,An=He.length;Cn<An;++Cn){const En=He[Cn],Sn=En.segment;let Tn=getUid(En.geometry);const Ln=En.depth;if(Ln&&(Tn+="-"+Ln.join("-")),We[Tn]||(We[Tn]=new Array(2)),En.geometry.getType()==="Circle"&&En.index===CIRCLE_CIRCUMFERENCE_INDEX){const Bn=closestOnSegmentData(e,En);equals(Bn,Be)&&!We[Tn][0]&&(this.dragSegments_.push([En,0]),We[Tn][0]=En);continue}if(equals(Sn[0],Be)&&!We[Tn][0]){this.dragSegments_.push([En,0]),We[Tn][0]=En;continue}if(equals(Sn[1],Be)&&!We[Tn][1]){if(We[Tn][0]&&We[Tn][0].index===0){let Bn=En.geometry.getCoordinates();switch(En.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":Bn=Bn[Ln[1]];case"Polygon":if(En.index!==Bn[Ln[0]].length-2)continue;break}}this.dragSegments_.push([En,1]),We[Tn][1]=En;continue}getUid(Sn)in this.vertexSegments_&&!We[Tn][0]&&!We[Tn][1]&&Oe.push(En)}return Oe}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([Ue])=>Ue));const Te=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],Oe=[],Be=[];for(let Ue=0,He=this.dragSegments_.length;Ue<He;++Ue){const We=this.dragSegments_[Ue],Cn=We[0],An=Cn.feature;Oe.includes(An)||Oe.push(An);const En=Cn.geometry;Be.includes(En)||Be.push(En);const Sn=Cn.depth;let Tn;const Ln=Cn.segment,Bn=We[1];for(;Te.length<En.getStride();)Te.push(Ln[Bn][Te.length]);switch(En.getType()){case"Point":Tn=Te,Ln[0]=Te,Ln[1]=Te;break;case"MultiPoint":Tn=En.getCoordinates(),Tn[Cn.index]=Te,Ln[0]=Te,Ln[1]=Te;break;case"LineString":Tn=En.getCoordinates(),Tn[Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"MultiLineString":Tn=En.getCoordinates(),Tn[Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"Polygon":Tn=En.getCoordinates(),Tn[Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"MultiPolygon":Tn=En.getCoordinates(),Tn[Sn[1]][Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"Circle":const ei=En;if(Ln[0]=Te,Ln[1]=Te,Cn.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,ei.setCenter(Te),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let ni=distance(fromUserCoordinate(ei.getCenter()),fromUserCoordinate(Te));ei.setRadius(ni),this.changingFeature_=!1}break}Tn&&this.setGeometryCoordinates_(En,Tn)}this.createOrUpdateVertexFeature_(Te,Oe,Be,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const Te=e.coordinate,Oe=this.findInsertVerticesAndUpdateDragSegments_(Te);if(Oe!=null&&Oe.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,Oe),this.vertexFeature_)){const Be=this.vertexFeature_.getGeometry().getCoordinates();for(let Ue=Oe.length-1;Ue>=0;--Ue)this.insertVertex_(Oe[Ue],Be);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let Te=this.dragSegments_.length-1;Te>=0;--Te){const Oe=this.dragSegments_[Te][0],Be=Oe.geometry;if(Be.getType()==="Circle"){const Ue=Be,He=Ue.getCenter(),We=Oe.featureSegments[0],Cn=Oe.featureSegments[1];We.segment[0]=He,We.segment[1]=He,Cn.segment[0]=He,Cn.segment[1]=He,this.rBush_.update(createOrUpdateFromCoordinate(He),We);let An=Ue;this.rBush_.update(An.getExtent(),Cn)}else this.rBush_.update(boundingExtent(Oe.segment),Oe)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const Te=this.getMap(),Oe=Te.getPixelFromCoordinate(e);Te.getView().getProjection();const Be=function(We,Cn){return projectedDistanceToSegmentDataSquared(e,We)-projectedDistanceToSegmentDataSquared(e,Cn)};let Ue,He;if(this.hitDetection_){const We=typeof this.hitDetection_=="object"?Cn=>Cn===this.hitDetection_:void 0;Te.forEachFeatureAtPixel(Oe,(Cn,An,En)=>{En&&En.getType()==="Point"&&(En=new Point$1(toUserCoordinate(En.getCoordinates())));const Sn=En||Cn.getGeometry();if(Sn&&Sn.getType()==="Point"&&Cn instanceof Feature&&this.features_.getArray().includes(Cn)){He=Sn;const Tn=Cn.getGeometry().getFlatCoordinates().slice(0,2);Ue=[{feature:Cn,geometry:He,segment:[Tn,Tn]}]}return!0},{layerFilter:We})}if(!Ue){const We=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),Cn=Te.getView().getResolution()*this.pixelTolerance_,An=toUserExtent(buffer(We,Cn,tempExtent));Ue=this.rBush_.getInExtent(An)}if(Ue&&Ue.length>0){const We=Ue.sort(Be)[0],Cn=We.segment;let An=closestOnSegmentData(e,We);const En=Te.getPixelFromCoordinate(An);let Sn=distance(Oe,En);if(He||Sn<=this.pixelTolerance_){const Tn={};if(Tn[getUid(Cn)]=!0,this.snapToPointer_||(this.delta_[0]=An[0]-e[0],this.delta_[1]=An[1]-e[1]),We.geometry.getType()==="Circle"&&We.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(An,[We.feature],[We.geometry],this.snappedToVertex_);else{const Ln=Te.getPixelFromCoordinate(Cn[0]),Bn=Te.getPixelFromCoordinate(Cn[1]),ei=squaredDistance(En,Ln),ni=squaredDistance(En,Bn);if(Sn=Math.sqrt(Math.min(ei,ni)),this.snappedToVertex_=Sn<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(An=ei>ni?Cn[1]:Cn[0]),this.createOrUpdateVertexFeature_(An,[We.feature],[We.geometry],this.snappedToVertex_);const ti={};ti[getUid(We.geometry)]=!0;for(let ri=1,oi=Ue.length;ri<oi;++ri){const ai=Ue[ri].segment;if(equals(Cn[0],ai[0])&&equals(Cn[1],ai[1])||equals(Cn[0],ai[1])&&equals(Cn[1],ai[0])){const ci=getUid(Ue[ri].geometry);ci in ti||(ti[ci]=!0,Tn[getUid(ai)]=!0)}else break}}this.vertexSegments_=Tn;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,Te){const Oe=e.segment,Be=e.feature,Ue=e.geometry,He=e.depth,We=e.index;let Cn;for(;Te.length<Ue.getStride();)Te.push(0);switch(Ue.getType()){case"MultiLineString":Cn=Ue.getCoordinates(),Cn[He[0]].splice(We+1,0,Te);break;case"Polygon":Cn=Ue.getCoordinates(),Cn[He[0]].splice(We+1,0,Te);break;case"MultiPolygon":Cn=Ue.getCoordinates(),Cn[He[1]][He[0]].splice(We+1,0,Te);break;case"LineString":Cn=Ue.getCoordinates(),Cn.splice(We+1,0,Te);break;default:return!1}this.setGeometryCoordinates_(Ue,Cn);const An=this.rBush_;An.remove(e),this.updateSegmentIndices_(Ue,We,He,1);const En={segment:[Oe[0],Te],feature:Be,geometry:Ue,depth:He,index:We};An.insert(boundingExtent(En.segment),En),this.dragSegments_.push([En,1]);const Sn={segment:[Te,Oe[1]],feature:Be,geometry:Ue,depth:He,index:We+1};return An.insert(boundingExtent(Sn.segment),Sn),this.dragSegments_.push([Sn,0]),!0}updatePointer_(e){var Te;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(Te=this.vertexFeature_)==null?void 0:Te.getGeometry().getCoordinates()}getPoint(){var Te;const e=(Te=this.vertexFeature_)==null?void 0:Te.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>equals(Oe[0],e)||equals(Oe[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const Te=this.lastPointerEvent_;this.willModifyFeatures_(Te,this.dragSegments_.map(([Be])=>Be));const Oe=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,Te)),this.featuresBeingModified_=null,Oe}return!1}removeVertex_(){const e=this.dragSegments_,Te={};let Oe=!1,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn;for(Cn=e.length-1;Cn>=0;--Cn)He=e[Cn],Ln=He[0],Bn=getUid(Ln.feature),Ln.depth&&(Bn+="-"+Ln.depth.join("-")),Bn in Te||(Te[Bn]={}),He[1]===0?(Te[Bn].right=Ln,Te[Bn].index=Ln.index):He[1]==1&&(Te[Bn].left=Ln,Te[Bn].index=Ln.index+1);for(Bn in Te){switch(Tn=Te[Bn].right,En=Te[Bn].left,An=Te[Bn].index,Sn=An-1,En!==void 0?Ln=En:Ln=Tn,Sn<0&&(Sn=0),We=Ln.geometry,Ue=We.getCoordinates(),Be=Ue,Oe=!1,We.getType()){case"MultiLineString":Ue[Ln.depth[0]].length>2&&(Ue[Ln.depth[0]].splice(An,1),Oe=!0);break;case"LineString":Ue.length>2&&(Ue.splice(An,1),Oe=!0);break;case"MultiPolygon":Be=Be[Ln.depth[1]];case"Polygon":Be=Be[Ln.depth[0]],Be.length>4&&(An==Be.length-1&&(An=0),Be.splice(An,1),Oe=!0,An===0&&(Be.pop(),Be.push(Be[0]),Sn=Be.length-1));break}if(Oe){this.setGeometryCoordinates_(We,Ue);const ei=[];if(En!==void 0&&(this.rBush_.remove(En),ei.push(En.segment[0])),Tn!==void 0&&(this.rBush_.remove(Tn),ei.push(Tn.segment[1])),En!==void 0&&Tn!==void 0){const ni={depth:Ln.depth,feature:Ln.feature,geometry:Ln.geometry,index:Sn,segment:ei};this.rBush_.insert(boundingExtent(ni.segment),ni)}this.updateSegmentIndices_(We,An,Ln.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return Oe}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>!(equals(Oe[0],e)||equals(Oe[1],e)))}insertPoint(e){var Be;const Te=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(Be=this.vertexFeature_)==null?void 0:Be.getGeometry().getCoordinates();return Te?this.findInsertVerticesAndUpdateDragSegments_(Te).reduce((Ue,He)=>Ue||this.insertVertex_(He,Te),!1):!1}setGeometryCoordinates_(e,Te){this.changingFeature_=!0,e.setCoordinates(Te),this.changingFeature_=!1}updateSegmentIndices_(e,Te,Oe,Be){this.rBush_.forEachInExtent(e.getExtent(),function(Ue){Ue.geometry===e&&(Oe===void 0||Ue.depth===void 0||equals$2(Ue.depth,Oe))&&Ue.index>Te&&(Ue.index+=Be)})}}function compareIndexes(ke,e){return ke.index-e.index}function projectedDistanceToSegmentDataSquared(ke,e,Te){const Oe=e.geometry;if(Oe.getType()==="Circle"){let Ue=Oe;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const He=squaredDistance(Ue.getCenter(),fromUserCoordinate(ke)),We=Math.sqrt(He)-Ue.getRadius();return We*We}}const Be=fromUserCoordinate(ke);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(Be,tempSegment)}function closestOnSegmentData(ke,e,Te){const Oe=e.geometry;if(Oe.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(Oe.getClosestPoint(fromUserCoordinate(ke)));const Be=fromUserCoordinate(ke);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(Be,tempSegment))}function getDefaultStyleFunction$1(){const ke=createEditingStyle();return function(e,Te){return ke.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const Te=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,Te):Te,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const Oe=e.map,Be=e.originalEvent;Be.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let Ue;if(e.type==EventType.WHEEL&&(Ue=Be.deltaY,FIREFOX&&Be.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Ue/=DEVICE_PIXEL_RATIO),Be.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ue*=40)),Ue===0)return!1;this.lastDelta_=Ue;const He=Date.now();this.startTime_===void 0&&(this.startTime_=He),(!this.mode_||He-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ue)<4?"trackpad":"wheel");const We=Oe.getView();if(this.mode_==="trackpad"&&!(We.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(We.getAnimating()&&We.cancelAnimations(),We.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),We.adjustZoom(-Ue/this.deltaPerZoom_,this.lastAnchor_?Oe.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=He,!1;this.totalDelta_+=Ue;const Cn=Math.max(this.timeout_-(He-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,Oe),Cn),!1}handleWheelZoom_(e){const Te=e.getView();Te.getAnimating()&&Te.cancelAnimations();let Oe=-clamp$1(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(Te.getConstrainResolution()||this.constrainResolution_)&&(Oe=Oe?Oe>0?1:-1:0),zoomByDelta(Te,Oe,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let Te=0;const Oe=this.targetPointers[0],Be=this.targetPointers[1],Ue=Math.atan2(Be.clientY-Oe.clientY,Be.clientX-Oe.clientX);if(this.lastAngle_!==void 0){const Cn=Ue-this.lastAngle_;this.rotationDelta_+=Cn,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),Te=Cn}this.lastAngle_=Ue;const He=e.map,We=He.getView();We.getConstraints().rotation!==disable&&(this.anchor_=He.getCoordinateFromPixelInternal(He.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(He.render(),We.adjustRotationInternal(Te,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const Te=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||Te.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let Te=1;const Oe=this.targetPointers[0],Be=this.targetPointers[1],Ue=Oe.clientX-Be.clientX,He=Oe.clientY-Be.clientY,We=Math.sqrt(Ue*Ue+He*He);this.lastDistance_!==void 0&&(Te=this.lastDistance_/We),this.lastDistance_=We;const Cn=e.map,An=Cn.getView();Te!=1&&(this.lastScaleDelta_=Te),this.anchor_=Cn.getCoordinateFromPixelInternal(Cn.getEventPixel(centroid(this.targetPointers))),Cn.render(),An.adjustResolutionInternal(Te,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const Oe=e.map.getView(),Be=this.lastScaleDelta_>1?1:-1;return Oe.endInteraction(this.duration_,Be),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const Te=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||Te.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,Te,Oe,Be){super(e),this.selected=Te,this.deselected=Oe,this.mapBrowserEvent=Be}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let Te;if(e.layers)if(typeof e.layers=="function")Te=e.layers;else{const Oe=e.layers;Te=function(Be){return Oe.includes(Be)}}else Te=TRUE;this.layerFilter_=Te,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,Te){this.featureLayerAssociation_[getUid(e)]=Te}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const Te=e.element;if(this.style_&&this.applySelectedStyle_(Te),!this.getLayer(Te)){const Oe=this.getMap().getAllLayers().find(function(Be){if(Be instanceof VectorLayer&&Be.getSource()&&Be.getSource().hasFeature(Te))return Be});Oe&&this.addFeatureLayerAssociation_(Te,Oe)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const Te=getUid(e);Te in originalFeatureStyles||(originalFeatureStyles[Te]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const Te=this.getMap().getInteractions().getArray();for(let Be=Te.length-1;Be>=0;--Be){const Ue=Te[Be];if(Ue!==this&&Ue instanceof Select&&Ue.getStyle()&&Ue.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Ue.getStyle());return}}const Oe=getUid(e);e.setStyle(originalFeatureStyles[Oe]),delete originalFeatureStyles[Oe]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const Te=this.addCondition_(e),Oe=this.removeCondition_(e),Be=this.toggleCondition_(e),Ue=!Te&&!Oe&&!Be,He=e.map,We=this.getFeatures(),Cn=[],An=[];if(Ue){clear$1(this.featureLayerAssociation_),He.forEachFeatureAtPixel(e.pixel,(En,Sn)=>{if(!(!(En instanceof Feature)||!this.filter_(En,Sn)))return this.addFeatureLayerAssociation_(En,Sn),An.push(En),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let En=We.getLength()-1;En>=0;--En){const Sn=We.item(En),Tn=An.indexOf(Sn);Tn>-1?An.splice(Tn,1):(We.remove(Sn),Cn.push(Sn))}An.length!==0&&We.extend(An)}else{He.forEachFeatureAtPixel(e.pixel,(En,Sn)=>{if(!(!(En instanceof Feature)||!this.filter_(En,Sn)))return(Te||Be)&&!We.getArray().includes(En)?(this.addFeatureLayerAssociation_(En,Sn),An.push(En)):(Oe||Be)&&We.getArray().includes(En)&&(Cn.push(En),this.removeFeatureLayerAssociation_(En)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let En=Cn.length-1;En>=0;--En)We.remove(Cn[En]);We.extend(An)}return(An.length>0||Cn.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,An,Cn,e)),!0}}function getDefaultStyleFunction(){const ke=createEditingStyle();return extend$4(ke.Polygon,ke.LineString),extend$4(ke.GeometryCollection,ke.LineString),function(e){return e.getGeometry()?ke[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,Te,Oe){this.decay_=e,this.minVelocity_=Te,this.delay_=Oe,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,Te){this.points_.push(e,Te,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,Te=this.points_.length-3;if(this.points_[Te+2]<e)return!1;let Oe=Te-3;for(;Oe>0&&this.points_[Oe+2]>e;)Oe-=3;const Be=this.points_[Te+2]-this.points_[Oe+2];if(Be<1e3/60)return!1;const Ue=this.points_[Te]-this.points_[Oe],He=this.points_[Te+1]-this.points_[Oe+1];return this.angle_=Math.atan2(He,Ue),this.initialVelocity_=Math.sqrt(Ue*Ue+He*He)/Be,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(ke){ke=ke||{};const e=new Collection,Te=new Kinetic(-.005,.05,100);return(ke.altShiftDragRotate!==void 0?ke.altShiftDragRotate:!0)&&e.push(new DragRotate),(ke.doubleClickZoom!==void 0?ke.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:ke.zoomDelta,duration:ke.zoomDuration})),(ke.dragPan!==void 0?ke.dragPan:!0)&&e.push(new DragPan({onFocusOnly:ke.onFocusOnly,kinetic:Te})),(ke.pinchRotate!==void 0?ke.pinchRotate:!0)&&e.push(new PinchRotate),(ke.pinchZoom!==void 0?ke.pinchZoom:!0)&&e.push(new PinchZoom({duration:ke.zoomDuration})),(ke.keyboard!==void 0?ke.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:ke.zoomDelta,duration:ke.zoomDuration}))),(ke.mouseWheelZoom!==void 0?ke.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:ke.onFocusOnly,duration:ke.zoomDuration})),(ke.shiftDragZoom!==void 0?ke.shiftDragZoom:!0)&&e.push(new DragZoom({duration:ke.zoomDuration})),e}var loglevel={exports:{}};(function(ke){(function(e,Te){ke.exports?ke.exports=Te():e.log=Te()})(commonjsGlobal,function(){var e=function(){},Te="undefined",Oe=typeof window!==Te&&typeof window.navigator!==Te&&/Trident\/|MSIE /.test(window.navigator.userAgent),Be=["trace","debug","info","warn","error"],Ue={},He=null;function We(ei,ni){var ti=ei[ni];if(typeof ti.bind=="function")return ti.bind(ei);try{return Function.prototype.bind.call(ti,ei)}catch{return function(){return Function.prototype.apply.apply(ti,[ei,arguments])}}}function Cn(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function An(ei){return ei==="debug"&&(ei="log"),typeof console===Te?!1:ei==="trace"&&Oe?Cn:console[ei]!==void 0?We(console,ei):console.log!==void 0?We(console,"log"):e}function En(){for(var ei=this.getLevel(),ni=0;ni<Be.length;ni++){var ti=Be[ni];this[ti]=ni<ei?e:this.methodFactory(ti,ei,this.name)}if(this.log=this.debug,typeof console===Te&&ei<this.levels.SILENT)return"No console available for logging"}function Sn(ei){return function(){typeof console!==Te&&(En.call(this),this[ei].apply(this,arguments))}}function Tn(ei,ni,ti){return An(ei)||Sn.apply(this,arguments)}function Ln(ei,ni){var ti=this,ri,oi,ai,ci="loglevel";typeof ei=="string"?ci+=":"+ei:typeof ei=="symbol"&&(ci=void 0);function Pi(fi){var ui=(Be[fi]||"silent").toUpperCase();if(!(typeof window===Te||!ci)){try{window.localStorage[ci]=ui;return}catch{}try{window.document.cookie=encodeURIComponent(ci)+"="+ui+";"}catch{}}}function vi(){var fi;if(!(typeof window===Te||!ci)){try{fi=window.localStorage[ci]}catch{}if(typeof fi===Te)try{var ui=window.document.cookie,Oi=encodeURIComponent(ci),Ni=ui.indexOf(Oi+"=");Ni!==-1&&(fi=/^([^;]+)/.exec(ui.slice(Ni+Oi.length+1))[1])}catch{}return ti.levels[fi]===void 0&&(fi=void 0),fi}}function pi(){if(!(typeof window===Te||!ci)){try{window.localStorage.removeItem(ci)}catch{}try{window.document.cookie=encodeURIComponent(ci)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Mi(fi){var ui=fi;if(typeof ui=="string"&&ti.levels[ui.toUpperCase()]!==void 0&&(ui=ti.levels[ui.toUpperCase()]),typeof ui=="number"&&ui>=0&&ui<=ti.levels.SILENT)return ui;throw new TypeError("log.setLevel() called with invalid level: "+fi)}ti.name=ei,ti.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ti.methodFactory=ni||Tn,ti.getLevel=function(){return ai??oi??ri},ti.setLevel=function(fi,ui){return ai=Mi(fi),ui!==!1&&Pi(ai),En.call(ti)},ti.setDefaultLevel=function(fi){oi=Mi(fi),vi()||ti.setLevel(fi,!1)},ti.resetLevel=function(){ai=null,pi(),En.call(ti)},ti.enableAll=function(fi){ti.setLevel(ti.levels.TRACE,fi)},ti.disableAll=function(fi){ti.setLevel(ti.levels.SILENT,fi)},ti.rebuild=function(){if(He!==ti&&(ri=Mi(He.getLevel())),En.call(ti),He===ti)for(var fi in Ue)Ue[fi].rebuild()},ri=Mi(He?He.getLevel():"WARN");var Fi=vi();Fi!=null&&(ai=Mi(Fi)),En.call(ti)}He=new Ln,He.getLogger=function(ni){if(typeof ni!="symbol"&&typeof ni!="string"||ni==="")throw new TypeError("You must supply a name when creating a logger.");var ti=Ue[ni];return ti||(ti=Ue[ni]=new Ln(ni,He.methodFactory)),ti};var Bn=typeof window!==Te?window.log:void 0;return He.noConflict=function(){return typeof window!==Te&&window.log===He&&(window.log=Bn),He},He.getLoggers=function(){return Ue},He.default=He,He})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(ke){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var Te=ke||"default";return loglevelExports.getLogger(Te)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(ke,e){if(Object.keys(arguments).length===0)return"Message indefined !";var Te=Array.prototype.slice.call(arguments),Oe=Te.shift(),Be=Te,Ue=this[Oe];try{Array.isArray(Be)&&Be.length>0?Ue=Ue.replace("%var%",Be.join(" - ")):Ue=Ue.replace("%var%","%var% (not specified)")}catch{}return Ue}},Helper$1={normalyzeParameters:function(ke){var e=null;if(ke){var Te=[];for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Be=ke[Oe];Be||(Be=""),Te.push(Oe+"="+Be)}e=Te.join("&")}return e},normalyzeUrl:function(ke,e,Te){var Oe=ke;if(ke){if(ke.split("?").length-1>=2){var Be=ke.search(/\?/)+1;Oe=ke.substring(0,Be)+ke.slice(Be).replace(/\?/g,"&")}var Ue=ke.indexOf("?");Ue===-1&&(Oe+="?"),Ue!==-1&&Ue!==ke.length-1&&(Oe+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),Oe+=e):Oe+=this.normalyzeParameters(e)),Te&&(Oe=encodeURIComponent(Oe)),Oe},indent:function(ke,e){var Te=ke||0;return new Array(Te+1).join("	")+e}};function commonjsRequire(ke){throw new Error('Could not dynamically require "'+ke+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(ke,e){(function(Te,Oe){ke.exports=Oe()})(commonjsGlobal,function(){function Te(Er){var Sr=typeof Er;return Er!==null&&(Sr==="object"||Sr==="function")}function Oe(Er){return typeof Er=="function"}var Be=void 0;Array.isArray?Be=Array.isArray:Be=function(Er){return Object.prototype.toString.call(Er)==="[object Array]"};var Ue=Be,He=0,We=void 0,Cn=void 0,An=function(Sr,wr){Pi[He]=Sr,Pi[He+1]=wr,He+=2,He===2&&(Cn?Cn(vi):Mi())};function En(Er){Cn=Er}function Sn(Er){An=Er}var Tn=typeof window<"u"?window:void 0,Ln=Tn||{},Bn=Ln.MutationObserver||Ln.WebKitMutationObserver,ei=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",ni=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ti(){return function(){return process.nextTick(vi)}}function ri(){return typeof We<"u"?function(){We(vi)}:ci()}function oi(){var Er=0,Sr=new Bn(vi),wr=document.createTextNode("");return Sr.observe(wr,{characterData:!0}),function(){wr.data=Er=++Er%2}}function ai(){var Er=new MessageChannel;return Er.port1.onmessage=vi,function(){return Er.port2.postMessage(0)}}function ci(){var Er=setTimeout;return function(){return Er(vi,1)}}var Pi=new Array(1e3);function vi(){for(var Er=0;Er<He;Er+=2){var Sr=Pi[Er],wr=Pi[Er+1];Sr(wr),Pi[Er]=void 0,Pi[Er+1]=void 0}He=0}function pi(){try{var Er=Function("return this")().require("vertx");return We=Er.runOnLoop||Er.runOnContext,ri()}catch{return ci()}}var Mi=void 0;ei?Mi=ti():Bn?Mi=oi():ni?Mi=ai():Tn===void 0&&typeof commonjsRequire=="function"?Mi=pi():Mi=ci();function Fi(Er,Sr){var wr=this,Br=new this.constructor(Oi);Br[ui]===void 0&&Hi(Br);var Hr=wr._state;if(Hr){var qr=arguments[Hr-1];An(function(){return _r(Hr,Br,qr,wr._result)})}else hr(wr,Br,Er,Sr);return Br}function fi(Er){var Sr=this;if(Er&&typeof Er=="object"&&Er.constructor===Sr)return Er;var wr=new Sr(Oi);return ur(wr,Er),wr}var ui=Math.random().toString(36).substring(2);function Oi(){}var Ni=void 0,nr=1,er=2;function cr(){return new TypeError("You cannot resolve a promise with itself")}function ar(){return new TypeError("A promises callback cannot return that same promise.")}function pr(Er,Sr,wr,Br){try{Er.call(Sr,wr,Br)}catch(Hr){return Hr}}function rr(Er,Sr,wr){An(function(Br){var Hr=!1,qr=pr(wr,Sr,function(Xr){Hr||(Hr=!0,Sr!==Xr?ur(Br,Xr):dr(Br,Xr))},function(Xr){Hr||(Hr=!0,vr(Br,Xr))},"Settle: "+(Br._label||" unknown promise"));!Hr&&qr&&(Hr=!0,vr(Br,qr))},Er)}function br(Er,Sr){Sr._state===nr?dr(Er,Sr._result):Sr._state===er?vr(Er,Sr._result):hr(Sr,void 0,function(wr){return ur(Er,wr)},function(wr){return vr(Er,wr)})}function Li(Er,Sr,wr){Sr.constructor===Er.constructor&&wr===Fi&&Sr.constructor.resolve===fi?br(Er,Sr):wr===void 0?dr(Er,Sr):Oe(wr)?rr(Er,Sr,wr):dr(Er,Sr)}function ur(Er,Sr){if(Er===Sr)vr(Er,cr());else if(Te(Sr)){var wr=void 0;try{wr=Sr.then}catch(Br){vr(Er,Br);return}Li(Er,Sr,wr)}else dr(Er,Sr)}function sr(Er){Er._onerror&&Er._onerror(Er._result),mr(Er)}function dr(Er,Sr){Er._state===Ni&&(Er._result=Sr,Er._state=nr,Er._subscribers.length!==0&&An(mr,Er))}function vr(Er,Sr){Er._state===Ni&&(Er._state=er,Er._result=Sr,An(sr,Er))}function hr(Er,Sr,wr,Br){var Hr=Er._subscribers,qr=Hr.length;Er._onerror=null,Hr[qr]=Sr,Hr[qr+nr]=wr,Hr[qr+er]=Br,qr===0&&Er._state&&An(mr,Er)}function mr(Er){var Sr=Er._subscribers,wr=Er._state;if(Sr.length!==0){for(var Br=void 0,Hr=void 0,qr=Er._result,Xr=0;Xr<Sr.length;Xr+=3)Br=Sr[Xr],Hr=Sr[Xr+wr],Br?_r(wr,Br,Hr,qr):Hr(qr);Er._subscribers.length=0}}function _r(Er,Sr,wr,Br){var Hr=Oe(wr),qr=void 0,Xr=void 0,cs=!0;if(Hr){try{qr=wr(Br)}catch(Qr){cs=!1,Xr=Qr}if(Sr===qr){vr(Sr,ar());return}}else qr=Br;Sr._state!==Ni||(Hr&&cs?ur(Sr,qr):cs===!1?vr(Sr,Xr):Er===nr?dr(Sr,qr):Er===er&&vr(Sr,qr))}function Ar(Er,Sr){try{Sr(function(Br){ur(Er,Br)},function(Br){vr(Er,Br)})}catch(wr){vr(Er,wr)}}var Vr=0;function Gr(){return Vr++}function Hi(Er){Er[ui]=Vr++,Er._state=void 0,Er._result=void 0,Er._subscribers=[]}function gr(){return new Error("Array Methods must be provided an Array")}var lr=function(){function Er(Sr,wr){this._instanceConstructor=Sr,this.promise=new Sr(Oi),this.promise[ui]||Hi(this.promise),Ue(wr)?(this.length=wr.length,this._remaining=wr.length,this._result=new Array(this.length),this.length===0?dr(this.promise,this._result):(this.length=this.length||0,this._enumerate(wr),this._remaining===0&&dr(this.promise,this._result))):vr(this.promise,gr())}return Er.prototype._enumerate=function(wr){for(var Br=0;this._state===Ni&&Br<wr.length;Br++)this._eachEntry(wr[Br],Br)},Er.prototype._eachEntry=function(wr,Br){var Hr=this._instanceConstructor,qr=Hr.resolve;if(qr===fi){var Xr=void 0,cs=void 0,Qr=!1;try{Xr=wr.then}catch(vs){Qr=!0,cs=vs}if(Xr===Fi&&wr._state!==Ni)this._settledAt(wr._state,Br,wr._result);else if(typeof Xr!="function")this._remaining--,this._result[Br]=wr;else if(Hr===Lr){var bs=new Hr(Oi);Qr?vr(bs,cs):Li(bs,wr,Xr),this._willSettleAt(bs,Br)}else this._willSettleAt(new Hr(function(vs){return vs(wr)}),Br)}else this._willSettleAt(qr(wr),Br)},Er.prototype._settledAt=function(wr,Br,Hr){var qr=this.promise;qr._state===Ni&&(this._remaining--,wr===er?vr(qr,Hr):this._result[Br]=Hr),this._remaining===0&&dr(qr,this._result)},Er.prototype._willSettleAt=function(wr,Br){var Hr=this;hr(wr,void 0,function(qr){return Hr._settledAt(nr,Br,qr)},function(qr){return Hr._settledAt(er,Br,qr)})},Er}();function Ki(Er){return new lr(this,Er).promise}function Dr(Er){var Sr=this;return Ue(Er)?new Sr(function(wr,Br){for(var Hr=Er.length,qr=0;qr<Hr;qr++)Sr.resolve(Er[qr]).then(wr,Br)}):new Sr(function(wr,Br){return Br(new TypeError("You must pass an array to race."))})}function Nr(Er){var Sr=this,wr=new Sr(Oi);return vr(wr,Er),wr}function Ir(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function kr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Lr=function(){function Er(Sr){this[ui]=Gr(),this._result=this._state=void 0,this._subscribers=[],Oi!==Sr&&(typeof Sr!="function"&&Ir(),this instanceof Er?Ar(this,Sr):kr())}return Er.prototype.catch=function(wr){return this.then(null,wr)},Er.prototype.finally=function(wr){var Br=this,Hr=Br.constructor;return Oe(wr)?Br.then(function(qr){return Hr.resolve(wr()).then(function(){return qr})},function(qr){return Hr.resolve(wr()).then(function(){throw qr})}):Br.then(wr,wr)},Er}();Lr.prototype.then=Fi,Lr.all=Ki,Lr.race=Dr,Lr.resolve=fi,Lr.reject=Nr,Lr._setScheduler=En,Lr._setAsap=Sn,Lr._asap=An;function Pr(){var Er=void 0;if(typeof commonjsGlobal<"u")Er=commonjsGlobal;else if(typeof self<"u")Er=self;else try{Er=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Sr=Er.Promise;if(Sr){var wr=null;try{wr=Object.prototype.toString.call(Sr.resolve())}catch{}if(wr==="[object Promise]"&&!Sr.cast)return}Er.Promise=Lr}return Lr.polyfill=Pr,Lr.Promise=Lr,Lr})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(ke){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!ke.url)throw new Error("missing parameter : url is not defined !");if(!ke.method)throw new Error("missing parameter : method is not defined !");ke.format||(ke.format="text");var Te={};switch(Te.url=ke.url,Te.data=ke.data?ke.data:null,Te.method=ke.method,Te.timeOut=ke.timeOut||0,Te.scope=ke.scope||this,Te.proxy=ke.proxy||null,Te.content=ke.content||null,Te.headers=ke.headers||{referer:"http://localhost"},ke.method){case"DELETE":case"GET":break;case"PUT":case"POST":Te.content=ke.content?ke.content:"application/x-www-form-urlencoded",Te.headers=ke.headers?ke.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(ke.format){case"text":this.__call(Te).then(function(Oe){e.trace(Oe),ke.onResponse.call(this,Oe)}).catch(function(Oe){ke.onFailure.call(this,Oe)});break;case"json":this.__callJSON(Te).then(function(Oe){e.trace(Oe),ke.onResponse.call(this,Oe)}).catch(function(Oe){ke.onFailure.call(this,Oe)});break;case"xml":this.__callXML(Te).then(function(Oe){e.trace(Oe),ke.onResponse.call(this,Oe)}).catch(function(Oe){ke.onFailure.call(this,Oe)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(ke){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var Te=new Promise(function(Oe,Be){var Ue=ke.method==="POST"||ke.method==="PUT"?1:0;ke.data&&(typeof ke.data=="object"&&Object.keys(ke.data).length||typeof ke.data=="string"&&ke.data.length)&&!Ue&&(ke.url=Helper$1.normalyzeUrl(ke.url,ke.data)),e.trace("URL = ",ke.url);var He=null;if(typeof window>"u"){var We=require("node-fetch"),Cn={headers:{Referer:"https://localhost"}};return ke.data&&typeof ke.data=="string"&&Ue&&(Cn={method:ke.method,body:ke.data,headers:{"Content-Type":ke.content,Referer:"https://localhost"}}),We(ke.url,Cn).then(function(Tn){if(Tn.ok)Oe(Tn.text());else{var Ln="Errors Occured on Http Request (status : '"+Tn.statusText+"' | url : '"+Tn.url+"')",Bn=Tn.status;Be({message:Ln,status:Bn})}}).catch(function(Tn){Be({message:Tn,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),He=new XMLHttpRequest,He.open(ke.method,ke.url,!0),He.overrideMimeType=ke.content;var An=null;ke.timeOut>0&&(e.trace("XHR - TimeOut actif !"),An=window.setTimeout(function(){var Tn="TimeOut Occured on Http Request with XMLHttpRequest !";Be({message:Tn,status:-1})},ke.timeOut)),Ue&&(e.trace("data = ",ke.data),He.setRequestHeader("Content-type",ke.content)),He.onerror=function(Tn){console.log(Tn),Be(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},He.ontimeout=function(Tn){console.log(Tn),Be(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},He.onreadystatechange=function(Tn){if(He.readyState===4)if(He.status===200)window.clearTimeout(An),Oe(He.response);else{var Ln="Errors Occured on Http Request (status : '"+Tn.target.statusText+"' | url : '"+Tn.target.responseURL+"' | response : '"+Tn.target.response+"')",Bn=Tn.target.status;Be({message:Ln,status:Bn})}};var En=ke.data&&Ue?ke.data:null;He.send(En)}else if(window.XDomainRequest){e.trace("XDomainRequest"),He=new XDomainRequest,He.open(ke.method,ke.url),He.overrideMimeType=ke.content,ke.timeOut>0&&(He.timeout=ke.timeout,e.trace("XHR - TimeOut actif !")),Ue&&He.setRequestHeader("Content-type",ke.content),He.onerror=function(){Be(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},He.ontimeout=function(){Be(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},He.onload=function(Tn){if(He.status===200)Oe(He.responseText);else{var Ln="Errors Occured on Http Request (status : '"+Tn.target.statusText+"' | url : '"+Tn.target.responseURL+"')",Bn=Tn.target.status;Be({message:Ln,status:Bn})}};var Sn=ke.data&&Ue?ke.data:null;He.send(Sn)}else throw new Error("CORS not supported")});return Te},__callJSON:function(ke){return this.__call(ke).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",ke.url,e)})},__callXML:function(ke){return this.__call(ke).then(function(e){var Te;if(typeof window>"u"){var Oe=require("@xmldom/xmldom").DOMParser;Te=new Oe().parseFromString(e,"text/xml")}else if(window.DOMParser){var Be=new window.DOMParser;Te=Be.parseFromString(e,"text/xml")}else Te=new window.ActiveXObject("Microsoft.XMLDOM"),Te.async=!1,Te.loadXML(e);return Te}).catch(function(e){console.log("__callXML failed on : ",ke.url,e)})}},JSONP={uuid:function(){var ke=Math.floor(Date.now());return function(){return ke++}}(),call:function(ke){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!ke)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!ke.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(ke.timeOut||(e.info("setting 'options.timeOut' default value"),ke.timeOut=0),!ke.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var Te=typeof ke.callbackSuffix=="string"?ke.callbackSuffix:this.uuid(),Oe=!1,Be=!1,Ue=ke.url.indexOf("callback=");if(Ue!==-1){Oe=!0;var He=ke.url.indexOf("&",Ue);He===-1&&(He=ke.url.length);var We=ke.url.substring(Ue+9,He);We&&(Be=!0,ke.callbackName=We,e.info("setting 'options.callbackName' value ("+ke.callbackName+") from 'options.url' parameter"))}if(!Oe){var Cn=ke.url.indexOf("?");Cn===-1?ke.url=ke.url+"?callback=":Cn===ke.url.length?ke.url=ke.url+"callback=":ke.url=ke.url+"&callback=",e.info("setting callback default key in 'options.url' : "+ke.url)}var An=ke.callbackName?!0:Be;if(Be||(ke.callbackName||(e.info("setting 'options.callbackName' default value"),ke.callbackName="callback",(Te||Te==="")&&(ke.callbackName+=Te)),ke.url=ke.url.replace("callback=","callback="+ke.callbackName),e.info("setting callback function name in 'options.url' : "+ke.url)),ke.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),ke.onTimeOut=function(){console.log("TimeOut while invoking url : "+ke.url)}),!An){var En=this,Sn=null;ke.timeOut>0&&(Sn=window.setTimeout(function(){window[ke.callbackName]=function(){},ke.onTimeOut(),En._deleteScript(Te)},ke.timeOut)),window[ke.callbackName]=function(Tn){window.clearTimeout(Sn),ke.onResponse(Tn),En._deleteScript(Te)}}this._createScript(Te,ke.url)},_createScript:function(ke,e){var Te,Oe=document.getElementById("results"+ke);Te=document.createElement("script"),Te.setAttribute("type","text/javascript"),Te.setAttribute("src",e),Te.setAttribute("charset","UTF-8"),Te.setAttribute("id","results"+ke),Te.setAttribute("async","true");var Be=document.documentElement||document.getElementsByTagName("head")[0];Oe===null?Be.appendChild(Te):Be.replaceChild(Te,Oe)},_deleteScript:function(ke){var e=document.getElementById("results"+ke);if(e){var Te=e.parentNode||document.documentElement;if(!Te)return;Te.removeChild(e)}}},Protocol={send:function(ke){var e=ke||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&ke.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(ke.protocol==="XHR"||ke.format==="json"?e.wrap=!1:ke.protocol==="JSONP"&&ke.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var Te={};Te.output=e.output,Te.callback=e.callback,delete Te.callback,e.url=Helper$1.normalyzeUrl(ke.url,Te)}switch(e.protocol){case"XHR":ke.method==="GET"&&ke.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(ke){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=ke;typeof ke=="string"||ke instanceof String?(this.message=ke,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$1="3.4.6",date="19/12/2024",Pkg={version:version$1,date};function CommonService(ke){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(Oe){console.log("onSuccess - la reponse est la suivante : ",Oe)},onFailure:function(Oe){Oe.status===200||!Oe.status?console.log("onFailure : ",Oe.message):console.log("onFailure - Erreur (",Oe.status,") : ",Oe.message)}};for(var e in ke)ke.hasOwnProperty(e)&&(this.options[e]=ke[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(Oe){console.log("onSuccess - la rponse brute du service est la suivante : ",Oe)});var Te=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!Te)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof ke.httpMethod=="string"?ke.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof ke.protocol=="string"?ke.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=ke.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var ke=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(ke,Ue,Te)}e.call(ke);function Te(He){this.logger.trace("CommonService::onBuildRequest : ",He),this.callService.call(ke,Ue,Oe)}function Oe(He){this.logger.trace("CommonService::onCallService : ",He),this.analyzeResponse.call(ke,Ue,Be)}function Be(He){if(this.logger.trace("CommonService::onAnalyzeResponse : ",He),He)this.options.onSuccess.call(this,He);else return Ue.call(this,new ErrorService("Analyse de la reponse en chec !?"))}function Ue(He){this.logger.trace("CommonService::onError()");var We=He;We instanceof ErrorService||(We=new ErrorService(He.message)),this.options.onFailure.call(this,We)}},buildRequest:function(ke,e){this.logger.error("overwritten method !"),ke&&ke.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(ke,e){var Te=null,Oe=this.request,Be=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Ue={"gp-access-lib":Pkg.version};this.options.apiKey&&(Ue.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Ue,!1),Be&&(this.options.httpMethod==="GET"&&(Te=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),Oe=null),this.options.httpMethod==="POST"&&(Te=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),Oe=this.request));var He=this,We={url:Te||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:Oe,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(Cn){He.logger.trace("callService::onResponse()");var An=null;if(He.options.protocol==="XHR"&&(He.logger.trace("Response XHR",Cn),An=Cn),He.options.protocol==="JSONP")if(He.logger.trace("Response JSON",Cn),Cn)if(Cn.http)if(Cn.http.status!==200){ke.call(He,new ErrorService({status:Cn.http.status,message:Cn.http.error,type:ErrorService.TYPE_SRVERR}));return}else An=Cn.xml,He.options.rawResponse&&(An=Cn);else An=Cn;else{ke.call(He,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof He.options.onBeforeParse=="function"){var En=He.options.onBeforeParse(An);typeof En=="string"&&(An=En)}He.response=An,e.call(He,An)},onFailure:function(Cn){He.logger.trace("callService::onFailure()"),Cn.type=ErrorService.TYPE_SRVERR,ke.call(He,new ErrorService(Cn))},onTimeOut:function(){He.logger.trace("callService::onTimeOut()"),ke.call(He,new ErrorService("TimeOut!"))}};Protocol.send(We)},analyzeResponse:function(ke,e){this.logger.error("overwritten method !"),ke&&ke.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(ke){var e="data.geopf.fr",Te;return DefaultUrlService.ssl===!1?Te="http://":Te="https://",Te+e+ke},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(ke){Array.isArray(ke)||(ke=ke.split(","));for(var e=[],Te=0;Te<ke.length;Te++)e[Te]=this._key+ke[Te]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(ke){if(ke)return!!this.generalOptions.apiKeys[ke]},getLayersId:function(ke){return this.generalOptions.apiKeys[ke]},getLayerId:function(ke,e){if(!(!ke||!e)){var Te=null;if(this.layers){var Oe=this.layers;for(var Be in Oe)if(Oe.hasOwnProperty(Be)){var Ue=Be.split("$");if(ke===Ue[0]&&Ue[1]){var He=Ue[1].split(":"),We=Ue[1].split(";");if(We[1]===e.toUpperCase()){Te=Be;break}if(He[2]===e.toUpperCase()){Te=Be;break}}}}if(Te)return Te}},getLayersConf:function(ke){var e={},Te=this.getLayersId(ke);if(Te)for(var Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];e[Be]=this.layers[Be]}return e},getLayerConf:function(ke){if(this.layers)return this.layers[ke]},getLayerParams:function(ke,e){var Te={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var Oe=this.getLayerId(ke,e);if(Oe){var Be=this.getLayerConf(Oe),Ue=this.getLayerKey(Oe);if(Ue.length===0)return;for(var He=0;He<Ue.length;He++)Be.serviceParams.serverUrl[Ue[He]]&&(Te.url=Be.serviceParams.serverUrl[Ue[He]]);if(e!=="WFS"&&(/\/v\//.test(Te.url)?Te.styles=" ":Te.styles=Be.styles[0].name),Te.version=Be.serviceParams.version,Te.format=Be.formats&&Be.formats.length?Be.formats[0].name:"",Te.projection=Be.defaultProjection,Te.minScale=Be.globalConstraint.minScaleDenominator,Te.maxScale=Be.globalConstraint.maxScaleDenominator,Te.extent=Be.globalConstraint.bbox,Te.legends=Be.legends,Te.title=Be.title,Te.description=Be.description,e==="WMS"&&(Te.metadata=Be.metadata),Be.wmtsOptions){Te.tileMatrixSetLimits=Be.wmtsOptions.tileMatrixSetLimits;var We=Be.wmtsOptions.tileMatrixSetLink;if(We){Te.TMSLink=We;var Cn=this.getTMSConf(We);Te.matrixIds=Object.keys(Cn.tileMatrices),Te.tileMatrices=Cn.tileMatrices,Te.nativeResolutions=Cn.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return Te},getLayerKey:function(ke){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var Te=this.generalOptions.apiKeys;for(var Oe in Te){var Be=Te[Oe];Be.forEach(function(Ue){Ue===ke&&e.push(Oe)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(ke){if(this.tileMatrixSets)return this.tileMatrixSets[ke]},getGlobalConstraints:function(ke){var e={};if(ke){var Te=this.getLayerConf(ke);e.projection=Te.defaultProjection,e.minScale=Te.globalConstraint.minScaleDenominator,e.maxScale=Te.globalConstraint.maxScaleDenominator,e.extent=Te.globalConstraint.bbox}return e}};function Config$1(ke){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=ke.onSuccess!==null&&typeof ke.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!ke.apiKey&&!ke.customConfigFile&&(ke.apiKey="full"),this.options={},this.options.onSuccess=ke.onSuccess,this.options.onFailure=ke.onFailure,this.options.sync=ke.sync||!1,this.options.listConfigUrls=ke.customConfigFile?[ke.customConfigFile]:Array.isArray(ke.apiKey)?DefaultUrlService.Config.url(ke.apiKey):DefaultUrlService.Config.url(ke.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(ke,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){ke.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(ke,e){this.options.sync?__callServiceSync.call(this,ke,e):__callService.call(this,ke,e)};var __callService=function(ke,e){this.listConfigResults=[];let Te=null;if(typeof window>"u"){var Oe=require("node-fetch");Te=Oe}else Te=window.fetch;var Be=He=>Te(He,{credentials:"same-origin"}).then(We=>{if(We.ok)return We.json().then(Cn=>Cn).catch(Cn=>{throw new Error("Exception Json : "+Cn)});throw new Error("Exception HTTP : "+We.status+" (status code) !")}).catch(We=>new Promise((Cn,An)=>{An(We)})),Ue=[];for(let He=0;He<this.listConfigUrls.length;He++){const We=this.listConfigUrls[He];Ue.push(Be(We))}Promise.all(Ue).then(He=>{if(!He)throw new Error("results config empty !?");He.forEach(We=>{this.listConfigResults.push(We)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(He=>{ke.call(this,He)})},__callServiceSync=function(ke,e){this.listConfigResults=[];for(var Te=0;Te<this.listConfigUrls.length;Te++){const Be=this.listConfigUrls[Te],Ue=new XMLHttpRequest;if(Ue.open("GET",Be,!1),Ue.send(null),Ue.status===200){var Oe=JSON.parse(Ue.responseText);this.listConfigResults.push(Oe)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):ke.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(ke,e){var Te=function(We){for(var Cn={},An={},En={},Sn=0;Sn<We.length;Sn++){if(!We[Sn].generalOptions||!We[Sn].layers)return;An={...An,...We[Sn].generalOptions.apiKeys},Cn={...Cn,...We[Sn].layers},En={...En,...We[Sn].tileMatrixSets}}var Tn={generalOptions:{apiKeys:An},layers:Cn,tileMatrixSets:En};return Tn},Oe=Te(this.listConfigResults);if(!Oe){ke.call(this,new Error("configuration structure not conforme !"));return}var Be=new ConfigInterface;Object.assign(Be,Oe);var Ue=typeof window<"u"?window:{};if(Ue.Gp||(Ue.Gp={}),Ue.Gp.Config){Object.assign(Ue.Gp.Config,Be);for(var He in Be)Ue.Gp.Config[He]=Be[He]}else Ue.Gp.Config=Be;e.call(this,Ue.Gp.Config)};function AltiRequest(ke){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=ke||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(ke){for(var e=[],Te=0;Te<ke.length;Te++){var Oe=ke[Te];Oe.lon&&Oe.lat&&e.push(Oe)}this.positions=e},getPositions:function(ke){if(!ke)return this.positions;var e=this.positions.length-1;return ke>e||ke<e?(this.logger.warn("index out of range !"),this.positions):this.positions[ke]},addPositions:function(ke){for(var e=0;e<ke.length;e++){var Te=ke[e];Te.lon&&Te.lat&&this.positions.push(ke[e])}},getLon:function(){for(var ke=[],e=0;e<this.positions.length;e++)ke.push(this.positions[e].lon);return this.logger.trace(ke),ke.join(this.delimiter)},getLat:function(){for(var ke=[],e=0;e<this.positions.length;e++)ke.push(this.positions[e].lat);return this.logger.trace(ke),ke.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var ke=[];return ke.push({k:"lon",v:this.getLon()}),ke.push({k:"lat",v:this.getLat()}),ke.push({k:"delimiter",v:this.delimiter}),ke.push({k:"indent",v:this.indent}),ke.push({k:"crs",v:this.crs}),ke.push({k:"format",v:this.format}),ke};function AltiElevationRequest(ke){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(ke){this._zonly=ke}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var ke=[];return ke.push({k:"lon",v:this.getLon()}),ke.push({k:"lat",v:this.getLat()}),ke.push({k:"indent",v:this.indent}),ke.push({k:"crs",v:this.crs}),ke.push({k:"zonly",v:this.zonly}),ke.push({k:"format",v:this.format}),ke.push({k:"resource",v:this.resource}),ke};function AltiProfilRequest(ke){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(ke){this._sampling=ke}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var ke=[];return ke.push({k:"lon",v:this.getLon()}),ke.push({k:"lat",v:this.getLat()}),ke.push({k:"indent",v:this.indent}),ke.push({k:"crs",v:this.crs}),ke.push({k:"sampling",v:this.sampling}),ke.push({k:"format",v:this.format}),ke.push({k:"resource",v:this.resource}),ke};function AltiRequestREST(ke){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=ke||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var ke="";return this.method==="POST"?ke=this.template.post.value:this.method==="GET"&&(ke=this.template.get.value),ke=ke.replace(/__LON__/g,this.DataObject.getLon()),ke=ke.replace(/__LAT__/g,this.DataObject.getLat()),ke=ke.replace(/__INDENT__/g,this.DataObject.indent),ke=ke.replace(/__CRS__/g,this.DataObject.crs),ke=ke.replace(/__RESOURCE__/g,this.DataObject.resource),ke=ke.replace(/__MEASURES__/g,this.DataObject.measures),ke=ke+this.__addDataInputs(),this.logger.trace("traduction tmpl",ke),this.requestString=ke,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var ke;if(this.method==="POST")ke=this.template.post;else if(this.method==="GET")ke=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=ke.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=ke.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(ke){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=ke||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var ke=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return ke.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var ke="";if(this.method==="POST")ke=this.template.post.value;else if(this.method==="GET")ke=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return ke=ke.replace(/__SERVICE__/g,this.paramservice),ke=ke.replace(/__VERSION__/g,this.paramversion),ke=ke.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),ke=ke.replace(/__IDENTIFIER__/g,this.paramidentifier),ke=ke.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(ke=ke.replace(/__NAMESPACE__/g,this.namespaceByDefault),ke=ke.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),ke=ke.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),ke?(this.requestString=ke,this.logger.trace("traduction tmpl",ke),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var ke=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",Te="",Oe=this,Be=this.DataObject.getData(),Ue=0;Ue<Be.length;Ue++)(function(He){e&&(e=He===Be.length-1?"":";"),Te=Te.concat(Oe.__addDataInput(ke,Be[He].k,Be[He].v),e)})(Ue);return Te},__addDataInput:function(ke,e,Te){var Oe=ke;return Oe=Oe.replace(/__KEY__/g,e),Oe=Oe.replace(/__DATA__/g,Te),Oe},setMethod:function(ke){ke==="GET"||ke==="POST"?this.method=ke:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(ke){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!ke)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!ke.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var Te=null;switch(ke.type){case"Elevation":ke.wps.identifier="gs:WPSElevation",Te=new AltiElevationRequest(ke.param);break;case"Profil":ke.wps.identifier="gs:WPSLineElevation",Te=new AltiProfilRequest(ke.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var Oe={data:Te,method:ke.method,param:ke.wps},Be=new WPS(Oe);if(!Be.processRequestString())throw new Error("Enable to process request !");return Be.requestString}},AltiRequestFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var Te=null,Oe={type:ke.sampling?"Profil":"Elevation",method:ke.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};Oe.param.positions=ke.positions,Oe.param.format=ke.outputFormat,Oe.param.sampling=ke.sampling,Oe.param.zonly=ke.zonly,Oe.param.measures=ke.measures,Oe.param.resource=ke.resource;var Be=ke.onError!==null&&typeof ke.onError=="function",Ue=ke.onSuccess!==null&&typeof ke.onSuccess=="function",He=null;switch(ke.api){case"REST":var We=new AltiRequestREST(Oe);if(!We.processRequestString()){if(He="Error in process request (rest) !",Be){ke.onError.call(ke.scope,new ErrorService(He));return}throw new Error(He)}Te=We.requestString;break;case"WPS":if(Oe.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},Te=AltiRequestWPS.build(Oe),!Te){if(He="Error in process request (wps) !",Be){ke.onError.call(ke.scope,new ErrorService(He));return}throw new Error(He)}break;default:if(He="Type of API is not supported by service (REST or WPS) !",Be){ke.onError.call(ke.scope,new ErrorService(He));return}throw new Error(He)}return Ue&&ke.onSuccess.call(ke.scope,Te),Te}};function XML$1(ke){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,ke&&(ke.xmlString&&typeof ke.xmlString=="string"&&(this.xmlString=ke.xmlString,this.xmlDoc=__getXMLDOC(ke.xmlString)),ke.reader&&this.setReader(ke.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(ke){ke&&typeof ke=="string"&&(this.xmlString=ke,this.xmlDoc=__getXMLDOC(ke))},getReader:function(){return this.reader},setReader:function(ke){ke&&ke.read&&typeof ke.read=="function"&&(this.reader=ke)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(ke){this.xmlDoc=ke},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var ke=__getRootNode(this.xmlDoc);if(ke){var e;return this.reader&&this.reader.read?e=this.reader.read(ke):(e={},e[ke.nodeName]=__readDefault(ke)),e}else return{}}}};function __getXMLDOC(ke){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(ke,"text/xml")}else{var Te,Oe,Be="Erreur lors du parsing de la rponse du service : XML non conforme";if(window.ActiveXObject){Oe=new window.ActiveXObject("Microsoft.XMLDOM"),Oe.async=!1,Oe.loadXML(ke);var Ue=Oe.parseError;if(Ue.errorCode)throw Ue.line&&Ue.linepos&&(Be+="( ligne "+Ue.line+", colonne "+Ue.linepos),Ue.reason&&(Be+=":  "+Ue.reason+")"),new Error(Be);return Oe}else if(window.DOMParser){Te=new window.DOMParser;try{Oe=Te.parseFromString(ke,"text/xml")}catch(An){throw An.message==="SyntaxError"?new Error(Be):new Error("Erreur lors du parsing de la rponse du service : "+An.message)}if(Oe.getElementsByTagName("parsererror").length>0)for(var He=Oe.getElementsByTagName("parsererror"),We=0;We<He.length;We++){var Cn=He[We].innerHTML;if(Cn.indexOf("Huge input lookup")===-1)throw Be+="("+Cn+")",new Error(Be)}else if(!Oe.documentElement)throw new Error(Be);return Oe}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(ke){var e;return ke.nodeType===9?e=ke.documentElement:ke.nodeType===1&&(e=ke),e}function __readDefault(ke){var e={};if(ke.attributes.length>0){var Te=__getAttributes(ke);e.attributes=Te}if(ke.hasChildNodes()){for(var Oe={},Be,Ue=ke.childNodes,He=0;He<Ue.length;He++)if(Be=Ue[He],Be.nodeType===3)e.textContent=Be.nodeValue;else if(Be.nodeType===1)if(Oe=__readDefault(Be),!e[Be.nodeName])e[Be.nodeName]=Oe;else{if(!Array.isArray(e[Be.nodeName])){var We=e[Be.nodeName];e[Be.nodeName]=[],e[Be.nodeName].push(We)}e[Be.nodeName].push(Oe)}}return e}function __getAttributes(ke){if(ke.attributes.length>0){for(var e={},Te=ke.attributes,Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];e[Be.nodeName]=Be.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(ke){var e=new AltiResponse;if(ke.hasChildNodes())for(var Te=ke.childNodes,Oe,Be,Ue=0;Ue<Te.length;Ue++)Oe=Te[Ue],AltiResponseReader.READERS[Oe.nodeName]&&(Be=AltiResponseReader.READERS[Oe.nodeName](Oe),e.elevations.push(Be));return e},elevation:function(ke){var e=new Elevation;if(ke.hasChildNodes())for(var Te=ke.childNodes,Oe,Be=0;Be<Te.length;Be++)Oe=Te[Be],AltiResponseReader.READERS[Oe.nodeName]&&AltiResponseReader.READERS[Oe.nodeName](Oe,e);return e},lat:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)e.lat=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : latitude attendue mais absente")},lon:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)e.lon=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : longitude attendue mais absente")},z:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)if(e)e.z=parseFloat(Te.nodeValue);else return e=new Elevation,e.z=parseFloat(Te.nodeValue),e;else throw new Error("Erreur dans la lecture de la rponse du service : altitude attendue mais absente")},acc:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)e.acc=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente")},source_name:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)e.source_name=Te.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_name attendue mais absente")},source_measure:function(ke,e){var Te=ke.firstChild;if(Te&&Te.nodeType===3)e.source_measure=Te.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_measure attendue mais absente")},measures:function(ke,e){e.measures=[];var Te;if(ke.hasChildNodes())for(var Oe=ke.childNodes,Be,Ue,He=0;He<Oe.length;He++){Te=new Measure,Be=Oe[He],Ue=Be.childNodes;for(var We=0;We<Ue.length;We++)if(AltiResponseReader.READERS[Ue[We].nodeName])AltiResponseReader.READERS[Ue[We].nodeName](Ue[We],Te);else throw new Error("Erreur dans la lecture de la rponse du service : measures attendues mais absentes");e.measures.push(Te)}},exceptionreport:function(ke){var e={};if(ke.hasChildNodes())for(var Te=ke.childNodes,Oe,Be=0;Be<Te.length;Be++)Oe=Te[Be],Oe.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(Oe));return e},exception:function(ke){var e={},Te=ke.getAttribute("exceptionCode");Te&&(e.exceptionCode=Te);var Oe=ke.firstChild;return Oe&&Oe.nodeType===3&&(e.exception=Oe.nodeValue),e},error:function(ke){var e={error:{}};if(ke.hasChildNodes())for(var Te=ke.childNodes,Oe,Be=0;Be<Te.length;Be++){Oe=Te[Be];var Ue;Oe.nodeType===1&&Oe.nodeName==="code"&&(Ue=Oe.firstChild,Ue&&Ue.nodeType===3&&(e.error.code=Ue.nodeValue)),Oe.nodeType===1&&Oe.nodeName==="description"&&(Ue=Oe.firstChild,Ue&&Ue.nodeType===3&&(e.error.description=Ue.nodeValue))}return e}};AltiResponseReader.read=function(ke){if(ke.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(ke);return e}else if(ke.nodeName==="ExceptionReport"){var Te=AltiResponseReader.READERS.exceptionreport(ke);return Te}else if(ke.nodeName==="error"){var Oe=AltiResponseReader.READERS.error(ke);return Oe}else throw new Error("Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var Te=null;if(ke.response)if(ke.rawResponse)e.trace("analyze response : raw"),Te=ke.response;else{switch(ke.outputFormat){case"xml":e.trace("analyze response : xml");try{var Oe=new XML$1({reader:AltiResponseReader});if(typeof ke.response=="string"?Oe.setXMLString(ke.response):Oe.setXMLDoc(ke.response),Te=Oe.parse(),!Te)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(Sn){var Be=Sn.message;ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Be),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof ke.response);var Ue=null;if(typeof ke.response=="string"?Ue=JSON.parse(ke.response):Ue=ke.response,Ue&&Ue.error){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Ue.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Ue){var He=Ue.elevations,We=new AltiResponse,Cn;if(Array.isArray(He)&&He.length)for(var An=0;An<He.length;An++)Cn=new Elevation,typeof He[An]=="object"?(He[An].lon&&(Cn.lon=He[An].lon),He[An].lat&&(Cn.lat=He[An].lat),He[An].z&&(Cn.z=He[An].z),He[An].acc&&(Cn.acc=He[An].acc),He[An].measures&&(Cn.measures=He[An].measures)):typeof He[An]=="number"&&(Cn.z=He[An]),Array.isArray(We.elevations)&&We.elevations.push(Cn);Te=We}if(!Te){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(Te.exceptionReport){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(Te.error){var En=Te.error.description;ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",En),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}ke.onSuccess.call(ke.scope,Te)}};function Alti(ke){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!ke.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(ke.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=ke.positions,this.options.outputFormat=typeof ke.outputFormat=="string"?ke.outputFormat.toLowerCase():"xml",this.options.resource=ke.resource||"ign_rge_alti_wld",this.options.sampling=ke.sampling||null,this.options.api=typeof ke.api=="string"?ke.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=ke.zonly||!1,this.options.measures=ke.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),Te=null;switch(this.options.api){case"WPS":Te=e.wps;break;case"REST":var Oe=(ke.sampling?"profil":"elevation")+"-"+this.options.outputFormat;Te=e[Oe];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!Te)throw new Error("Url by default not found !");this.options.serverUrl=Te,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var Be=this.options.serverUrl.lastIndexOf(".");if(Be!==-1){var Ue=this.options.serverUrl.substring(Be+1);if(Ue&&Ue.length<5)switch(this.logger.trace("Server Extension URL : "+Ue),Ue.toLowerCase()){case"json":case"xml":this.options.outputFormat=Ue.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(ke,e){var Te={httpMethod:this.options.httpMethod,onSuccess:function(Oe){this.request=Oe,e.call(this,this.request)},onError:ke,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(Te)};Alti.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:ke,onSuccess:e,scope:this};AltiResponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(ke){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=ke||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var ke={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(ke[e]=this.filters[e]);return ke},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var ke=[];this.geocodeMethod==="search"&&ke.push({k:"q",v:this.query}),this.index&&ke.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&ke.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(ke.push({k:"lon",v:this.lon}),ke.push({k:"lat",v:this.lat})),this.maxResp&&ke.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&ke.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var Te in e)ke.push({k:Te,v:e[Te]});return ke};function GeocodeRequestREST(ke){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!ke)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=ke}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var ke="";const Te=new GeocodeParamREST(this.settings).getParams();for(var Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];ke&&(ke+="&"),ke+=Be.k+"="+Be.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+ke,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var Te=ke||{},Oe=new GeocodeRequestREST(Te);if(!Oe.processRequestString())throw new Error("Error process request (rest) !");var Be=Oe.requestString;return e.trace(Be),Be}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(ke){var e=new GeocodeResponse;const Te=JSON.parse(ke);if(Te.type==="FeatureCollection")for(var Oe=0;Oe<Te.features.length;++Oe)_parseFeature(Te.features[Oe],e);else if(Te.type==="Feature")_parseFeature(Te,e);else{if(Te.type==="SERVICE_ERROR")return _parseError(Te);var Be=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Te.type);throw new ErrorService({message:Be,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(ke,e){var Te=new GeocodedLocation;if(ke.geometry&&ke.geometry.type==="Point"&&(Te.position={lon:ke.geometry.coordinates[0],lat:ke.geometry.coordinates[1]}),ke.properties){for(var Oe in ke.properties)Oe==="score"?Te.accuracy=ke.properties[Oe]:Oe==="_type"?ke.properties[Oe]==="address"?Te.type="StreetAddress":ke.properties[Oe]==="poi"?Te.type="PositionOfInterest":(ke.properties[Oe]==="parcel"||ke.properties[Oe]==="cadastral")&&(Te.type="CadastralParcel"):Te.placeAttributes[Oe]=ke.properties[Oe];ke.properties._type==="address"&&(Te.matchType=ke.properties.number!==void 0&&ke.properties.number!==null?"street number":"street")}e.locations.push(Te)}function _parseError(ke){return{exceptionReport:ke}}var GeocodeReponseFactory={build:function(ke){var e=null;if(ke.response)if(ke.rawResponse)e=ke.response;else{try{if(e=new GeocodeResponseParser().parse(ke.response),!e)throw new Error("L'analyse de la rponse du service !?")}catch(Oe){var Te=Oe.message;typeof ke.response=="string"?Te+="('"+ke.response+"')":Te+="('"+ke.response.documentElement.innerHTML+"')",ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Te),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}ke.onSuccess.call(ke.scope,e)}};function Geocode(ke){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(ke);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var Te=Object.keys(e.filters),Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];(typeof e.filters[Be]>"u"||typeof e.filters[Be]=="object"&&Object.keys(e.filters[Be]).length===0||typeof e.filters[Be]=="string"&&e.filters[Be].length===0||Array.isArray(e.filters[Be])&&e.filters[Be].length===0)&&delete this.options.filters[Be]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(ke){const e=ke;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(ke,e){var Te={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(Te),this.request?e.call(this,this.request):ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onError:ke,onSuccess:e,scope:this};GeocodeReponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(ke){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(ke);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var Te=Object.keys(e.filters),Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];(typeof e.filters[Be]>"u"||typeof e.filters[Be]=="object"&&Object.keys(e.filters[Be]).length===0||typeof e.filters[Be]=="string"&&e.filters[Be].length===0||Array.isArray(e.filters[Be])&&e.filters[Be].length===0)&&delete this.options.filters[Be]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(ke){var e=ke;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(ke,e){var Te={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(Te),this.request?e.call(this,this.request):ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onError:ke,onSuccess:e,scope:this};GeocodeReponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(ke){return{type:"Polygon",coordinates:[[[ke.left,ke.top],[ke.right,ke.top],[ke.right,ke.bottom],[ke.left,ke.bottom],[ke.left,ke.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(ke){return{type:"Circle",radius:ke.radius,coordinates:[ke.x,ke.y]}};ReverseGeocode$1.prototype.polygon2Json=function(ke){for(var e={type:"Polygon",coordinates:[[]]},Te=0;Te<ke.length;++Te)e.coordinates[0].push([ke[Te].x,ke[Te].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var Te=null;if(ke.response)if(ke.rawResponse)e.trace("analyze response : raw"),Te=ke.response;else{var Oe=null;if(typeof ke.response=="string"?Oe=JSON.parse(ke.response):Oe=ke.response,Oe){if(Oe.error){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.error.description),status:Oe.error.code,type:ErrorService.TYPE_SRVERR}));return}if(Te=new AutoCompleteResponse,Oe.results&&Array.isArray(Oe.results))for(var Be=null,Ue=0;Ue<Oe.results.length;Ue++){var He=Oe.results[Ue];Be=new SuggestedLocation,He&&(He.country==="StreetAddress"?(Be.street=He.street,Be.type="StreetAddress"):He.country==="PositionOfInterest"&&(Be.poi=He.street,Be.type="PositionOfInterest",Be.poiType=He.poiType),Be.position&&(Be.position.x=He.x,Be.position.y=He.y),Be.kind=He.kind,Be.commune=He.city,Be.fullText=He.fulltext,Be.postalCode=He.zipcode,Be.classification=He.classification),Te.suggestedLocations.push(Be)}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!Te.suggestedLocations.length){ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!Te){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(Te.exceptionReport){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}ke.onSuccess.call(ke.scope,Te)}};function AutoComplete(ke){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(ke);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(ke){const e=ke;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(ke,e){var Te="";this.options.territory&&(Te=this.options.territory);var Oe="";this.options.type&&(Oe=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:Oe,terr:Te,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:ke,scope:this};AutoCompleteResponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(ke){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=ke||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var ke=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var Te=this.intermediates[e];ke.push(Te.x+","+Te.y)}return ke.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var ke=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)ke.push(JSON.stringify(this.constraints[e]));return ke.join("|")}};RouteParamREST.prototype.getParams=function(){var ke=[];return ke.push({k:"resource",v:this.resource}),ke.push({k:"start",v:this.start}),ke.push({k:"end",v:this.end}),ke.push({k:"geometryFormat",v:"geojson"}),this.optimization&&ke.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&ke.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&ke.push({k:"profile",v:this.getProfile()}),this.constraints&&ke.push({k:"constraints",v:this.getConstraints()}),this.crs&&ke.push({k:"crs",v:this.crs}),this.distanceUnit&&ke.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&ke.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&ke.push({k:"waysAttributes",v:this.getWaysAttributes()}),ke};function RouteRequestREST(ke){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!ke)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=ke}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var ke=new RouteParamREST(this.settings),e=ke.getParams(),Te="",Oe=0;Oe<e.length;Oe++){var Be=e[Oe];Te&&(Te+="&"),Te+=Be.k+"="+Be.v}return this.logger.trace(Te),this.requestString=Te,this.requestString}};var RouteRequestFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var Te=null,Oe=ke||{},Be=ke.onError!==null&&typeof ke.onError=="function",Ue=null,He=new RouteRequestREST(Oe);if(!He.processRequestString()){if(Ue="Error process request (rest) !",Be){ke.onError.call(ke.scope,new ErrorService(Ue));return}throw new Error(Ue)}return Te=He.requestString,Te}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var Te=null;if(ke.response)if(ke.rawResponse)e.trace("analyze response : raw"),Te=ke.response;else{e.trace("analyze response : json");var Oe;if(typeof ke.response=="string"?Oe=JSON.parse(ke.response):Oe=ke.response,Oe){if(Oe.message){ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.message)));return}var Be=[],Ue=[],He=[];if(Te=new RouteResponse,Te.hasOwnProperty("totalTime")&&(Te.totalTime=parseFloat(Oe.duration)),Te.hasOwnProperty("totalDistance")&&(Te.totalDistance=parseFloat(Oe.distance)),Te.hasOwnProperty("bbox")&&(Te.bbox.left=parseFloat(Oe.bbox[0]),Te.bbox.bottom=parseFloat(Oe.bbox[1]),Te.bbox.right=parseFloat(Oe.bbox[2]),Te.bbox.top=parseFloat(Oe.bbox[3])),Te.hasOwnProperty("routeGeometry")&&!ke.geometryInInstructions&&(Te.routeGeometry=Oe.geometry),Te.hasOwnProperty("routeInstructions")&&ke.geometryInInstructions){var We=Oe.portions,Cn;if(Array.isArray(We)&&We.length)for(Cn=0;Cn<We.length;Cn++)Be.push(We[Cn]);if(Be.length)for(Cn=0;Cn<Be.length;Cn++)Ue.push(Be[Cn].steps);if(Ue.length)for(Cn=0;Cn<Ue.length;Cn++)He=He.concat(Ue[Cn]);He.forEach(function(An){switch(Te.routeInstructions.push(new RouteInstruction),Te.routeInstructions[Te.routeInstructions.length-1].duration=An.duration,Te.routeInstructions[Te.routeInstructions.length-1].distance=An.distance,Te.routeInstructions[Te.routeInstructions.length-1].code="",Te.routeInstructions[Te.routeInstructions.length-1].instruction="",Te.routeInstructions[Te.routeInstructions.length-1].geometry=An.geometry,An.name==="Valeur non renseigne"&&(An.name=""),An.instruction.type){case"turn":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Tourner";break;case"new name":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Dpart";break;case"arrive":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Arrive";break;case"merge":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" la fin de la route, prendre";break;case"use lane":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="";break;default:Te.routeInstructions[Te.routeInstructions.length-1].instruction+="?"+An.instruction.type+"?";break}if(An.instruction.modifier)switch(An.instruction.modifier){case"uturn":Te.routeInstructions[Te.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" compltement  droite";break;case"right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="  droite";break;case"slight right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" lgrement  droite";break;case"straight":Te.routeInstructions[Te.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" lgrement  gauche";break;case"left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="  gauche";break;case"sharp left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" compltement  gauche";break;default:Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" ?"+An.instruction.modifier+"?";break}An.instruction.exit&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=`${An.instruction.exit}e sortie`),An.attributes.name&&((An.attributes.name.nom_1_droite||An.attributes.name.toponyme)&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" sur"),An.attributes.name.nom_1_droite&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=` ${An.attributes.name.nom_1_droite}`),An.attributes.name.toponyme&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=` ${An.attributes.name.toponyme}`))})}}if(!Te){ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(Te.exceptionReport){ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}ke.onSuccess.call(ke.scope,Te)}};function Route$1(ke){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!ke.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(ke.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(ke.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!ke.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(ke.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(ke.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(ke.outputFormat&&ke.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=ke.resource||"bdtopo-osrm",this.options.startPoint=ke.startPoint,this.options.endPoint=ke.endPoint,this.options.viaPoints=ke.viaPoints||[],this.options.routePreference=ke.routePreference||"fastest",ke.graph?(ke.graph==="Voiture"&&(this.options.graph="car"),ke.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],ke.constraints)if(Array.isArray(ke.constraints))for(var e=0;e<ke.constraints.length;e++)this.options.constraints.push(ke.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var Te={},Oe={},Be={};if(ke.exclusions&&ke.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ue=0;Ue<ke.exclusions.length;Ue++){if(typeof ke.exclusions[Ue]=="string")ke.exclusions[Ue]=ke.exclusions[Ue].toLowerCase();else continue;ke.exclusions[Ue]==="toll"&&(Be.constraintType="banned",Be.key="wayType",Be.operator="=",Be.value="autoroute",this.options.constraints.push(Be)),ke.exclusions[Ue]==="tunnel"&&(Te.constraintType="banned",Te.key="wayType",Te.operator="=",Te.value="tunnel",this.options.constraints.push(Te)),ke.exclusions[Ue]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.geometryInInstructions=ke.geometryInInstructions||!1,this.options.provideBbox=ke.provideBbox||!0,this.options.distanceUnit=ke.distanceUnit||"m",this.options.timeUnit=ke.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=ke.srs||"EPSG:4326",this.options.waysAttributes=ke.waysAttributes||[],!this.options.serverUrl){var He=DefaultUrlService.Route.newUrl();if(!He)throw new Error("Url by default not found !");this.options.serverUrl=He,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(ke,e){var Te={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(Te),this.request?e.call(this,this.request):ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:ke,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(ke){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=ke||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var ke=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)ke.push(JSON.stringify(this.constraints[e]));return ke.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var ke=[];return ke.push({k:"resource",v:this.resource}),ke.push({k:"point",v:this.getLocation()}),ke.push({k:"direction",v:this.getDirection()}),ke.push({k:"costType",v:this.costType}),ke.push({k:"costValue",v:this.costValue}),ke.push({k:"profile",v:this.profile}),ke.push({k:"timeUnit",v:this.timeUnit}),ke.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&ke.push({k:"crs",v:this.crs}),this.constraints&&ke.push({k:"constraints",v:this.getConstraints()}),ke};function ProcessIsoCurveRequest(ke){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!ke)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=ke,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var ke="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var Te=new ProcessIsoCurveParam(this.settings),Oe=Te.getParams();for(e=0;e<Oe.length;e++){var Be=Oe[e];ke&&(ke+="&"),ke+=Be.k+"="+Be.v}break;case"POST":this.logger.trace("Process POST Request");var Ue={};Ue.resource=this.settings.resource,Ue.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Ue.costType="distance",Ue.costValue=this.settings.distance):(Ue.costType="time",Ue.costValue=this.settings.time),Ue.profile=this.settings.graph,this.settings.reverse?Ue.direction="arrival":Ue.direction="departure",Ue.constraints=this.settings.constraints,Ue.distanceUnit=this.settings.distanceUnit,Ue.timeUnit=this.settings.timeUnit,Ue.crs=this.settings.srs,ke=JSON.stringify(Ue);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(ke),this.requestString=ke,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(ke){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var Te=null;if(ke.response)if(ke.rawResponse)e.trace("analyze response : raw"),Te=ke.response;else{e.trace("analyze response : json");var Oe;if(typeof ke.response=="string"?Oe=JSON.parse(ke.response):Oe=ke.response,Te=new ProcessIsoCurveResponse,Oe){Oe.costType==="distance"?(Te.time="",Te.distance=Oe.costValue):(Te.time=Oe.costValue,Te.distance=""),Te.message="",Te.id="",Te.srs=Oe.crs,Te.geometry=Oe.geometry;var Be=Oe.point.split(",");Te.location&&(Te.location.x=Be[0],Te.location.y=Be[1])}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",ke.response)));return}if(Te.exceptionReport){ke.onError.call(ke.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{ke.onError.call(ke.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}ke.onSuccess.call(ke.scope,Te)}};function ProcessIsoCurve(ke){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!ke.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(ke.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(ke.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!ke.time&&!ke.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!ke.time&&ke.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),ke.time&&!ke.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=ke.resource||"bdtopo-valhalla",this.options.exclusions=ke.exclusions||[],this.options.reverse=ke.reverse||!1,this.options.srs=ke.srs||"EPSG:4326",this.options.distanceUnit=ke.distanceUnit||"m",this.options.timeUnit=ke.timeUnit||"second",ke.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,ke.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,ke.graph?(ke.graph==="Voiture"&&(this.options.graph="car"),ke.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],ke.constraints)if(Array.isArray(ke.constraints))for(var e=0;e<ke.constraints.length;e++)this.options.constraints.push(ke.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var Te={},Oe={},Be={};if(ke.exclusions&&ke.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ue=0;Ue<ke.exclusions.length;Ue++){if(typeof ke.exclusions[Ue]=="string")ke.exclusions[Ue]=ke.exclusions[Ue].toLowerCase();else continue;ke.exclusions[Ue]==="toll"&&(Be.constraintType="banned",Be.key="wayType",Be.operator="=",Be.value="autoroute",this.options.constraints.push(Be)),ke.exclusions[Ue]==="tunnel"&&(Te.constraintType="banned",Te.key="wayType",Te.operator="=",Te.value="tunnel",this.options.constraints.push(Te)),ke.exclusions[Ue]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.outputFormat=typeof ke.outputFormat=="string"?ke.outputFormat.toLowerCase():"json",ke.outputFormat&&ke.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var He=DefaultUrlService.ProcessIsoCurve.newUrl();if(!He)throw new Error("Url by default not found !");this.options.serverUrl=He,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(ke,e){try{var Te=new ProcessIsoCurveRequest(this.options);if(!Te.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=Te.requestString}catch(Oe){ke.call(this,new ErrorService(Oe.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(ke,e){if(this.response){var Te={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:ke,scope:this};ProcessIsoCurveResponseFactory.build(Te)}else ke.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(ke){var e=new Config$1(ke);e.call()},getAltitude:function(ke){var e=new Alti(ke);e.call()},geocode:function(ke){var e=new Geocode(ke);e.call()},reverseGeocode:function(ke){var e=new ReverseGeocode$1(ke);e.call()},autoComplete:function(ke){var e=new AutoComplete(ke);e.call()},route:function(ke){var e=new Route$1(ke);e.call()},isoCurve:function(ke){var e=new ProcessIsoCurve(ke);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(ke){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var Te=ke||"default";return loglevelExports.getLogger(Te)},disableAll:function(){var ke=loglevelExports.getLoggers();for(const e in ke)Object.hasOwnProperty.call(ke,e)&&ke[e].disableAll()},enableAll:function(){var ke=loglevelExports.getLoggers();for(const e in ke)Object.hasOwnProperty.call(ke,e)&&ke[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(ke,e){var Te=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return ke;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var Oe in e.noProxyDomains)if(Te.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[Oe]),ke.indexOf(e.noProxyDomains[Oe])!==-1)return Te.info("[ProxyUtils] proxifyUrl : "+ke+" found in noProxyDomains list ("+e.noProxyDomains[Oe]+")."),ke}return e.proxyUrl+encodeURIComponent(ke)}},logger$F=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(ke){var e=typeof ke.getType=="function"?ke.getType():null,Te=ke.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return Te.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(Te instanceof TileWMS||Te instanceof ImageWMS)return"wms";if(Te instanceof WMTS$1)return"wmts";if(Te instanceof VectorSource||Te instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(ke,e,Te,Oe,Be){if(logger$F.trace("[Gfi] : displayInfo..."),Oe||(Oe="text/html"),Te!==null){var Ue=null,He=null,We=Te;We=We.replace(/\n/g,""),We=We.replace(/(>)\s*(<)/g,"$1$2");var Cn=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var An=require("@xmldom/xmldom").DOMParser;He=new An,Ue=He.parseFromString(We,Oe)}else if(Cn.DOMParser)He=new Cn.DOMParser,Ue=He.parseFromString(We,Oe);else if(Cn.ActiveXObject)Ue=new Cn.ActiveXObject("Microsoft.XMLDOM"),Ue.async=!1,Ue.loadXML(We);else return logger$F.log("Incompatible environment for DOM Parser !"),!1;var En=Ue.getElementsByTagName("body");if(En&&En.length===1&&!En[0].hasChildNodes())return!1;var Sn=document.createElement("div");Sn.className="gp-feature-info-div";var Tn=document.createElement("button");Tn.className="gp-styling-button closer",Tn.onclick=function(){return ke.featuresOverlay&&(ke.removeOverlay(ke.featuresOverlay),ke.featuresOverlay=null),!1};var Ln=document.createElement("div");return Ln.className="gp-features-content-div",Ln.innerHTML=Te,Sn.appendChild(Ln),Sn.appendChild(Tn),ke.featuresOverlay&&(ke.removeOverlay(ke.featuresOverlay),ke.featuresOverlay=null),ke.featuresOverlay=new Overlay({element:Sn,autoPan:Be.autoPan,autoPanAnimation:Be.autoPanAnimation,autoPanMargin:Be.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),ke.addOverlay(ke.featuresOverlay),ke.featuresOverlay.setPosition(e),ke.featuresOverlay.render(),!0}},features2html:function(ke,e){var Te=document.createElement("div");return e.forEach(function(Oe){var Be=Oe.getProperties();if(Be.hasOwnProperty("render"))Te.insertAdjacentHTML("beforeend",Be.render);else{if(Be.hasOwnProperty("name")){var Ue=document.createElement("div");Ue.className="gp-att-name-div",Ue.insertAdjacentHTML("afterbegin",Be.name),Te.appendChild(Ue)}if(Be.hasOwnProperty("description")){var He=document.createElement("div");He.className="gp-att-description-div",He.insertAdjacentHTML("afterbegin",Be.description),Te.appendChild(He)}var We=null,Cn=!1,An=null,En=null,Sn=null,Tn=["fill","fill-opacity","label-stroke","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(We in Be)if(Be[We]!==void 0&&Tn.indexOf(We)===-1){Cn||(An=document.createElement("div"),An.className="gp-att-others-div",En=document.createElement("ul"),Cn=!0),Sn=document.createElement("li");var Ln=document.createElement("span");Ln.className="gp-attname-others-span",Ln.appendChild(document.createTextNode(We+" : ")),Sn.appendChild(Ln),Sn.appendChild(document.createTextNode(Be[We])),En.appendChild(Sn)}En&&(An.appendChild(En),Te.appendChild(An))}},ke),Te.hasChildNodes()||(Te=null),Te},layerGetFeatureAtCoordinates:function(ke,e,Te){var Oe=ke.getPixelFromCoordinate(Te);return ke.hasFeatureAtPixel(Oe,function(Be){return Be===e})},displayVectorFeatureInfo:function(ke,e,Te,Oe){var Be=ke.getPixelFromCoordinate(e),Ue=[];if(ke.forEachFeatureAtPixel(Be,function(We,Cn){(!Te||Te.indexOf(Cn)>-1)&&Ue.push(We)}),Ue.length===0)return!1;var He=this.features2html(ke,Ue);return He===null?!1:(this.displayInfo(ke,e,He.innerHTML,"text/html",Oe),!0)},displayFeatureInfo:function(ke,e,Te,Oe,Be){for(var Ue={},He=0;He<Te.length;He++){var We=Te[He],Cn=We.obj.getZIndex();Ue[Cn]||(Ue[Cn]=[]),Ue[Cn].push(We)}var An=[],En=Object.keys(Ue);En.sort(function(vi,pi){return pi-vi});for(var Sn=0;Sn<En.length;Sn++)for(var Tn=En[Sn],Ln=0;Ln<Ue[Tn].length;++Ln){var Bn=Ue[Tn][Ln].obj,ei=Ue[Tn][Ln].infoFormat||"text/html",ni=!0;if(Bn.minResolution&&Bn.minResolution>ke.getResolution()&&(ni=!1),ni&&Bn.maxResolution&&Bn.maxResolution<ke.getResolution()&&(ni=!1),Bn.getVisible()&&ni){var ti=this.getLayerFormat(Bn);if(ti==="vector"){this.layerGetFeatureAtCoordinates(ke,Bn,e)&&An.push({format:ti,scope:this,coordinate:e});continue}else if(ti!=="wms"&&ti!=="wmts"){logger$F.log("[ERROR] DisplayFeatureInfo - layer format '"+ti+"' not allowed");continue}var ri=ke.getView().getResolution(),oi=null;ti==="wmts"?oi=Bn.getSource().getFeatureInfoUrl.call(Bn.getSource(),e,ri,ke.getView().getProjection(),{INFOFORMAT:ei}):oi=Bn.getSource().getFeatureInfoUrl.call(Bn.getSource(),e,ri,ke.getView().getProjection(),{INFO_FORMAT:ei}),An.push({format:ei,url:ProxyUtils.proxifyUrl(oi,Oe),scope:this,coordinate:e})}}var ai=null;function ci(vi,pi,Mi){if(vi.length===0)return;var Fi=0;function fi(ui){Fi++,ui||Fi===vi.length?Mi():pi(vi[Fi],fi)}pi(vi[0],fi)}var Pi=this;ci(An,function(vi,pi){if(vi.format==="vector"){if(!ai){ai=[];for(var Mi=0;Mi<En.length;Mi++)for(var Fi=En[Mi],fi=0;fi<Ue[Fi].length;++fi)ai.push(Ue[Fi][fi].obj)}pi(vi.scope.displayVectorFeatureInfo(ke,vi.coordinate,ai,Be))}else Gp.Protocols.XHR.call({url:vi.url,method:"GET",scope:vi.scope,onResponse:function(ui){var Oi=!1;(ui.trim().length===0||ui.indexOf("ServiceExceptionReport")!==-1||ui.indexOf("java.lang.NullPointerException")!==-1||ui.indexOf("java.lang.OutOfMemoryError")!==-1||ui.indexOf("not queryable")!==-1)&&(Oi=!0);var Ni=!Oi&&Pi.displayInfo(ke,vi.coordinate,ui,"text/html",Be);pi(Ni)},onFailure:function(ui){logger$F.log(ui),pi(!1)}})},function(){logger$F.trace("Finish sync to GFI !")})},getPosition:function(ke,e){if(ke.coordinate)return ke.coordinate;var Te=[0,0];if(ke.offsetX||ke.offsetY)Te[0]=ke.offsetX,Te[1]=ke.offsetY;else if(ke.pointerType==="touch"){var Oe=ke.pointers[0];Te[0]=Oe.pageX,Te[1]=Oe.pageY}var Be=e.getCoordinateFromPixel(Te);return Be},onDisplayFeatureInfo:function(ke,e){if(e.isActive()){logger$F.trace(ke);var Te=e.getMap();if(ke.type==="contextmenu"||ke.type==="dblclick")ke.preventDefault();else if(ke.type==="singleclick"){for(var Oe=Te.getInteractions().getArray(),Be=0;Be<Oe.length;Be++)if(Oe[Be].getActive()&&(Oe[Be]instanceof Select||Oe[Be]instanceof Modify||Oe[Be]instanceof Draw))return}var Ue={};e._proxyUrl&&(Ue.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Ue.noProxyDomains=e._noProxyDomains);var He={};e._autoPan&&(He.autoPan=e._autoPan),e._autoPanAnimation&&(He.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(He.autoPanMargin=e._autoPanMargin);for(var We=[],Cn=0;Cn<e._layers.length;++Cn){var An=e._layers[Cn].event?e._layers[Cn].event:e._defaultEvent;if(An===ke.type){var En=We.push(e._layers[Cn])-1;We[En].infoFormat||(We[En].infoFormat=e._defaultInfoFormat)}}var Sn=this.getPosition(ke,Te);this.displayFeatureInfo(Te,Sn,We,Ue,He)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const Te=e.element;Te&&!e.target&&!Te.style.pointerEvents&&(Te.style.pointerEvents="auto"),this.element=Te||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var Te;this.map_&&((Te=this.element)==null||Te.remove());for(let Oe=0,Be=this.listenerKeys.length;Oe<Be;++Oe)unlistenByKey(this.listenerKeys[Oe]);if(this.listenerKeys.length=0,this.map_=e,e){const Oe=this.target_??e.getOverlayContainerStopEvent();this.element&&Oe.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var ke=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(ke=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(ke=!0),ke},assign:function(ke,e){ke=ke||{};for(var Te in e)e.hasOwnProperty(Te)&&(ke[Te]=e[Te]);return ke},mergeParams:function(ke,e,Te){if(!(typeof ke>"u"||typeof e>"u")){typeof Te>"u"&&(Te=!0);for(var Oe in e)e.hasOwnProperty(Oe)&&(typeof e[Oe]=="object"?ke.hasOwnProperty(Oe)?this.mergeParams(ke[Oe],e[Oe],Te):ke[Oe]=e[Oe]:ke.hasOwnProperty(Oe)?Te&&(ke[Oe]=e[Oe]):ke[Oe]=e[Oe])}}},logger$E=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(ke,e){logger$E.trace("unset()");var Te={};Helper.mergeParams(Te,this._options),Helper.mergeParams(Te,e);for(var Oe=ke.getInteractions().getArray(),Be=0;Be<Oe.length;Be++)if(Oe[Be].getActive()&&(Oe[Be]instanceof Draw||Oe[Be]instanceof Select||Oe[Be]instanceof Modify)){var Ue=Oe[Be].getProperties(),He=Ue.name;if(typeof He<"u"&&this._extensions.indexOf(He)>-1){if(Te.current&&Te.current===He)continue;Oe[Be].setActive(!1);var We=Ue.source;if(typeof We<"u"&&We instanceof Control){for(var Cn in Te)if(Te.hasOwnProperty(Cn)){if(Cn==="current")continue;if(typeof We[Cn]=="function"){var An=Array.isArray(Te[Cn])?Te[Cn]:[Te[Cn]];We[Cn].apply(We,An)}}}}else Oe[Be].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(ke,e){return getDocument().createElementNS(ke,e)}function getAllTextContent(ke,e){return getAllTextContent_(ke,e,[]).join("")}function getAllTextContent_(ke,e,Te){if(ke.nodeType==Node.CDATA_SECTION_NODE||ke.nodeType==Node.TEXT_NODE)Te.push(ke.nodeValue);else{let Oe;for(Oe=ke.firstChild;Oe;Oe=Oe.nextSibling)getAllTextContent_(Oe,e,Te)}return Te}function isDocument(ke){return"documentElement"in ke}function parse$1(ke){return new DOMParser().parseFromString(ke,"application/xml")}function makeArrayExtender(ke,e){return function(Te,Oe){const Be=ke.call(e??this,Te,Oe);if(Be!==void 0){const Ue=Oe[Oe.length-1];extend$4(Ue,Be)}}}function makeArrayPusher(ke,e){return function(Te,Oe){const Be=ke.call(e??this,Te,Oe);Be!==void 0&&Oe[Oe.length-1].push(Be)}}function makeReplacer(ke,e){return function(Te,Oe){const Be=ke.call(this,Te,Oe);Be!==void 0&&(Oe[Oe.length-1]=Be)}}function makeObjectPropertyPusher(ke,e,Te){return function(Oe,Be){const Ue=ke.call(this,Oe,Be);if(Ue!==void 0){const He=Be[Be.length-1],We=Oe.localName;let Cn;We in He?Cn=He[We]:(Cn=[],He[We]=Cn),Cn.push(Ue)}}}function makeObjectPropertySetter(ke,e,Te){return function(Oe,Be){const Ue=ke.call(this,Oe,Be);if(Ue!==void 0){const He=Be[Be.length-1],We=e!==void 0?e:Oe.localName;He[We]=Ue}}}function makeChildAppender(ke,e){return function(Te,Oe,Be){ke.call(this,Te,Oe,Be),Be[Be.length-1].node.appendChild(Te)}}function makeArraySerializer(ke,e){let Te,Oe;return function(Be,Ue,He){if(Te===void 0){Te={};const We={};We[Be.localName]=ke,Te[Be.namespaceURI]=We,Oe=makeSimpleNodeFactory(Be.localName)}serialize(Te,Oe,Ue,He)}}function makeSimpleNodeFactory(ke,e){return function(Te,Oe,Be){const He=Oe[Oe.length-1].node;let We=ke;We===void 0&&(We=Be);const Cn=He.namespaceURI;return createElementNS(Cn,We)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(ke,e){const Te=e.length,Oe=new Array(Te);for(let Be=0;Be<Te;++Be)Oe[Be]=ke[e[Be]];return Oe}function makeStructureNS(ke,e,Te){Te=Te!==void 0?Te:{};let Oe,Be;for(Oe=0,Be=ke.length;Oe<Be;++Oe)Te[ke[Oe]]=e;return Te}function parseNode(ke,e,Te,Oe){let Be;for(Be=e.firstElementChild;Be;Be=Be.nextElementSibling){const Ue=ke[Be.namespaceURI];if(Ue!==void 0){const He=Ue[Be.localName];He!==void 0&&He.call(Oe,Be,Te)}}}function pushParseAndPop(ke,e,Te,Oe,Be){return Oe.push(ke),parseNode(e,Te,Oe,Be),Oe.pop()}function serialize(ke,e,Te,Oe,Be,Ue){const He=(Be!==void 0?Be:Te).length;let We,Cn;for(let An=0;An<He;++An)We=Te[An],We!==void 0&&(Cn=e.call(Ue,We,Oe,Be!==void 0?Be[An]:void 0),Cn!==void 0&&ke[Cn.namespaceURI][Cn.localName].call(Ue,Cn,We,Oe))}function pushSerializeAndPop(ke,e,Te,Oe,Be,Ue,He){return Be.push(ke),serialize(e,Te,Oe,Be,Ue,He),Be.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,Te){if(Te){let Oe=Te.dataProjection?get$3(Te.dataProjection):this.readProjection(e);Te.extent&&Oe&&Oe.getUnits()==="tile-pixels"&&(Oe=get$3(Oe),Oe.setWorldExtent(Te.extent)),Te={dataProjection:Oe,featureProjection:Te.featureProjection}}return this.adaptOptions(Te)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,Te){return abstract()}readFeatures(e,Te){return abstract()}readGeometry(e,Te){return abstract()}readProjection(e){return abstract()}writeFeature(e,Te){return abstract()}writeFeatures(e,Te){return abstract()}writeGeometry(e,Te){return abstract()}}function transformGeometryWithOptions(ke,e,Te){const Oe=Te?get$3(Te.featureProjection):null,Be=Te?get$3(Te.dataProjection):null;let Ue=ke;if(Oe&&Be&&!equivalent(Oe,Be)){e&&(Ue=ke.clone());const He=e?Oe:Be,We=e?Be:Oe;He.getUnits()==="tile-pixels"?Ue.transform(He,We):Ue.applyTransform(getTransform(He,We))}if(e&&Te&&Te.decimals!==void 0){const He=Math.pow(10,Te.decimals),We=function(Cn){for(let An=0,En=Cn.length;An<En;++An)Cn[An]=Math.round(Cn[An]*He)/He;return Cn};Ue===ke&&(Ue=ke.clone()),Ue.applyTransform(We)}return Ue}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(ke,e,Te){return Array.isArray(e[0])?(linearRingssAreOriented(ke,0,e,Te)||(ke=ke.slice(),orientLinearRingsArray(ke,0,e,Te)),ke):(linearRingsAreOriented(ke,0,e,Te)||(ke=ke.slice(),orientLinearRings(ke,0,e,Te)),ke)}function createRenderFeature(ke,e){var Ue;const Te=ke.geometry;if(!Te)return[];if(Array.isArray(Te))return Te.map(He=>createRenderFeature({...ke,geometry:He})).flat();const Oe=Te.type==="MultiPolygon"?"Polygon":Te.type;if(Oe==="GeometryCollection"||Oe==="Circle")throw new Error("Unsupported geometry type: "+Oe);const Be=Te.layout.length;return transformGeometryWithOptions(new RenderFeature(Oe,Oe==="Polygon"?orientFlatCoordinates(Te.flatCoordinates,Te.ends,Be):Te.flatCoordinates,(Ue=Te.ends)==null?void 0:Ue.flat(),Be,ke.properties||{},ke.id).enableSimplifyTransformed(),!1,e)}function createGeometry(ke,e){if(!ke)return null;if(Array.isArray(ke)){const Oe=ke.map(Be=>createGeometry(Be,e));return new GeometryCollection(Oe)}const Te=GeometryConstructor[ke.type];return transformGeometryWithOptions(new Te(ke.flatCoordinates,ke.layout||"XY",ke.ends),!1,e)}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,Te){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readFeatureFromDocument(Oe,Te)}return isDocument(e)?this.readFeatureFromDocument(e,Te):this.readFeatureFromNode(e,Te)}readFeatureFromDocument(e,Te){const Oe=this.readFeaturesFromDocument(e,Te);return Oe.length>0?Oe[0]:null}readFeatureFromNode(e,Te){return null}readFeatures(e,Te){if(!e)return[];if(typeof e=="string"){const Oe=parse$1(e);return this.readFeaturesFromDocument(Oe,Te)}return isDocument(e)?this.readFeaturesFromDocument(e,Te):this.readFeaturesFromNode(e,Te)}readFeaturesFromDocument(e,Te){const Oe=[];for(let Be=e.firstChild;Be;Be=Be.nextSibling)Be.nodeType==Node.ELEMENT_NODE&&extend$4(Oe,this.readFeaturesFromNode(Be,Te));return Oe}readFeaturesFromNode(e,Te){return abstract()}readGeometry(e,Te){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readGeometryFromDocument(Oe,Te)}return isDocument(e)?this.readGeometryFromDocument(e,Te):this.readGeometryFromNode(e,Te)}readGeometryFromDocument(e,Te){return null}readGeometryFromNode(e,Te){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const Te=parse$1(e);return this.readProjectionFromDocument(Te)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,Te){const Oe=this.writeFeatureNode(e,Te);return this.xmlSerializer_.serializeToString(Oe)}writeFeatureNode(e,Te){return null}writeFeatures(e,Te){const Oe=this.writeFeaturesNode(e,Te);return this.xmlSerializer_.serializeToString(Oe)}writeFeaturesNode(e,Te){return null}writeGeometry(e,Te){const Oe=this.writeGeometryNode(e,Te);return this.xmlSerializer_.serializeToString(Oe)}writeGeometryNode(e,Te){return null}}function readBoolean(ke){const e=getAllTextContent(ke,!1);return readBooleanString(e)}function readBooleanString(ke){const e=/^\s*(true|1)|(false|0)\s*$/.exec(ke);if(e)return e[1]!==void 0||!1}function readDateTime(ke){const e=getAllTextContent(ke,!1),Te=Date.parse(e);return isNaN(Te)?void 0:Te/1e3}function readDecimal(ke){const e=getAllTextContent(ke,!1);return readDecimalString(e)}function readDecimalString(ke){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(ke);if(e)return parseFloat(e[1])}function readPositiveInteger(ke){const e=getAllTextContent(ke,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(ke){const e=/^\s*(\d+)\s*$/.exec(ke);if(e)return parseInt(e[1],10)}function readString(ke){return getAllTextContent(ke,!1).trim()}function writeBooleanTextNode(ke,e){writeStringTextNode(ke,e?"1":"0")}function writeCDATASection(ke,e){ke.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(ke,e){const Te=new Date(e*1e3),Oe=Te.getUTCFullYear()+"-"+padNumber(Te.getUTCMonth()+1,2)+"-"+padNumber(Te.getUTCDate(),2)+"T"+padNumber(Te.getUTCHours(),2)+":"+padNumber(Te.getUTCMinutes(),2)+":"+padNumber(Te.getUTCSeconds(),2)+"Z";ke.appendChild(getDocument().createTextNode(Oe))}function writeDecimalTextNode(ke,e){const Te=e.toPrecision();ke.appendChild(getDocument().createTextNode(Te))}function writeNonNegativeIntegerTextNode(ke,e){const Te=e.toString();ke.appendChild(getDocument().createTextNode(Te))}function writeStringTextNode(ke,e){ke.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE$1=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(ke){return 32/Math.min(ke[0],ke[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE$1=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE$1]}let TEXTAREA;function defaultIconUrlFunction(ke){return ke}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,Te){const Oe=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Be=pushParseAndPop([],Oe,e,Te,this);if(Be)return Be}readPlacemark_(e,Te){const Oe=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,Te,this);if(!Oe)return;const Be=new Feature,Ue=e.getAttribute("id");Ue!==null&&Be.setId(Ue);const He=Te[0],We=Oe.geometry;if(We&&transformGeometryWithOptions(We,!1,He),Be.setGeometry(We),delete Oe.geometry,this.extractStyles_){const Cn=Oe.Style,An=Oe.styleUrl,En=createFeatureStyleFunction(Cn,An,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Be.setStyle(En)}return delete Oe.Style,Be.setProperties(Oe,!0),Be}readSharedStyle_(e,Te){const Oe=e.getAttribute("id");if(Oe!==null){const Be=readStyle$2.call(this,e,Te);if(Be){let Ue,He=e.baseURI;(!He||He=="about:blank")&&(He=window.location.href),He?Ue=new URL("#"+Oe,He).href:Ue="#"+Oe,this.sharedStyles_[Ue]=Be}}}readSharedStyleMap_(e,Te){const Oe=e.getAttribute("id");if(Oe===null)return;const Be=readStyleMapValue.call(this,e,Te);if(!Be)return;let Ue,He=e.baseURI;(!He||He=="about:blank")&&(He=window.location.href),He?Ue=new URL("#"+Oe,He).href:Ue="#"+Oe,this.sharedStyles_[Ue]=Be}readFeatureFromNode(e,Te){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const Oe=this.readPlacemark_(e,[this.getReadOptions(e,Te)]);return Oe||null}readFeaturesFromNode(e,Te){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let Oe;const Be=e.localName;if(Be=="Document"||Be=="Folder")return Oe=this.readDocumentOrFolder_(e,[this.getReadOptions(e,Te)]),Oe||[];if(Be=="Placemark"){const Ue=this.readPlacemark_(e,[this.getReadOptions(e,Te)]);return Ue?[Ue]:[]}if(Be=="kml"){Oe=[];for(let Ue=e.firstElementChild;Ue;Ue=Ue.nextElementSibling){const He=this.readFeaturesFromNode(Ue,Te);He&&extend$4(Oe,He)}return Oe}return[]}readName(e){if(e){if(typeof e=="string"){const Te=parse$1(e);return this.readNameFromDocument(Te)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType==Node.ELEMENT_NODE){const Oe=this.readNameFromNode(Te);if(Oe)return Oe}}readNameFromNode(e){for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling)if(NAMESPACE_URIS$4.includes(Te.namespaceURI)&&Te.localName=="name")return readString(Te);for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling){const Oe=Te.localName;if(NAMESPACE_URIS$4.includes(Te.namespaceURI)&&(Oe=="Document"||Oe=="Folder"||Oe=="Placemark"||Oe=="kml")){const Be=this.readNameFromNode(Te);if(Be)return Be}}}readNetworkLinks(e){const Te=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(Te,this.readNetworkLinksFromDocument(Oe))}else isDocument(e)?extend$4(Te,this.readNetworkLinksFromDocument(e)):extend$4(Te,this.readNetworkLinksFromNode(e));return Te}readNetworkLinksFromDocument(e){const Te=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(Te,this.readNetworkLinksFromNode(Oe));return Te}readNetworkLinksFromNode(e){const Te=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="NetworkLink"){const Be=pushParseAndPop({},NETWORK_LINK_PARSERS,Oe,[]);Te.push(Be)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const Be=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(Be=="Document"||Be=="Folder"||Be=="kml")&&extend$4(Te,this.readNetworkLinksFromNode(Oe))}return Te}readRegion(e){const Te=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(Te,this.readRegionFromDocument(Oe))}else isDocument(e)?extend$4(Te,this.readRegionFromDocument(e)):extend$4(Te,this.readRegionFromNode(e));return Te}readRegionFromDocument(e){const Te=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(Te,this.readRegionFromNode(Oe));return Te}readRegionFromNode(e){const Te=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="Region"){const Be=pushParseAndPop({},REGION_PARSERS,Oe,[]);Te.push(Be)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const Be=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(Be=="Document"||Be=="Folder"||Be=="kml")&&extend$4(Te,this.readRegionFromNode(Oe))}return Te}readCamera(e){const Te=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(Te,this.readCameraFromDocument(Oe))}else isDocument(e)?extend$4(Te,this.readCameraFromDocument(e)):extend$4(Te,this.readCameraFromNode(e));return Te}readCameraFromDocument(e){const Te=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType===Node.ELEMENT_NODE&&extend$4(Te,this.readCameraFromNode(Oe));return Te}readCameraFromNode(e){const Te=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName==="Camera"){const Be=pushParseAndPop({},CAMERA_PARSERS,Oe,[]);Te.push(Be)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const Be=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(Be==="Document"||Be==="Folder"||Be==="Placemark"||Be==="kml")&&extend$4(Te,this.readCameraFromNode(Oe))}return Te}writeFeaturesNode(e,Te){Te=this.adaptOptions(Te);const Oe=createElementNS(NAMESPACE_URIS$4[4],"kml"),Be="http://www.w3.org/2000/xmlns/";Oe.setAttributeNS(Be,"xmlns:gx",GX_NAMESPACE_URIS[0]),Oe.setAttributeNS(Be,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Ue={node:Oe},He={};e.length>1?He.Document=e:e.length==1&&(He.Placemark=e[0]);const We=KML_SEQUENCE[Oe.namespaceURI],Cn=makeSequence(He,We);return pushSerializeAndPop(Ue,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,[Te],We,this),Oe}};function createNameStyleFunction(ke,e){const Te=[0,0];let Oe="start";const Be=ke.getImage();if(Be){const We=Be.getSize();if(We&&We.length==2){const Cn=Be.getScaleArray(),An=Be.getAnchor();Te[0]=Cn[0]*(We[0]-An[0]),Te[1]=Cn[1]*(We[1]/2-An[1]),Oe="left"}}let Ue=ke.getText();return Ue?(Ue=Ue.clone(),Ue.setFont(Ue.getFont()||DEFAULT_TEXT_STYLE.getFont()),Ue.setScale(Ue.getScale()||DEFAULT_TEXT_STYLE.getScale()),Ue.setFill(Ue.getFill()||DEFAULT_TEXT_STYLE.getFill()),Ue.setStroke(Ue.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Ue=DEFAULT_TEXT_STYLE.clone(),Ue.setText(e),Ue.setOffsetX(Te[0]),Ue.setOffsetY(Te[1]),Ue.setTextAlign(Oe),new Style$1({image:Be,text:Ue})}function createFeatureStyleFunction(ke,e,Te,Oe,Be){return function(Ue,He){let We=Be,Cn="",An=[];if(We){const Sn=Ue.getGeometry();if(Sn)if(Sn instanceof GeometryCollection)An=Sn.getGeometriesArrayRecursive().filter(function(Tn){const Ln=Tn.getType();return Ln==="Point"||Ln==="MultiPoint"}),We=An.length>0;else{const Tn=Sn.getType();We=Tn==="Point"||Tn==="MultiPoint"}}We&&(Cn=Ue.get("name"),We=We&&!!Cn,We&&/&[^&]+;/.test(Cn)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=Cn,Cn=TEXTAREA.value));let En=Te;if(ke?En=ke:e&&(En=findStyle(e,Te,Oe)),We){const Sn=createNameStyleFunction(En[0],Cn);if(An.length>0){Sn.setGeometry(new GeometryCollection(An));const Tn=new Style$1({geometry:En[0].getGeometry(),image:null,fill:En[0].getFill(),stroke:En[0].getStroke(),text:null});return[Sn,Tn].concat(En.slice(1))}return Sn}return En}}function findStyle(ke,e,Te){return Array.isArray(ke)?ke:typeof ke=="string"?findStyle(Te[ke],e,Te):e}function readColor(ke){const e=getAllTextContent(ke,!1),Te=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(Te){const Oe=Te[1];return[parseInt(Oe.substr(6,2),16),parseInt(Oe.substr(4,2),16),parseInt(Oe.substr(2,2),16),parseInt(Oe.substr(0,2),16)/255]}}function readFlatCoordinates(ke){let e=getAllTextContent(ke,!1);const Te=[];e=e.replace(/\s*,\s*/g,",");const Oe=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Be;for(;Be=Oe.exec(e);){const Ue=parseFloat(Be[1]),He=parseFloat(Be[2]),We=Be[3]?parseFloat(Be[3]):0;Te.push(Ue,He,We),e=e.substr(Be[0].length)}if(e==="")return Te}function readURI(ke){const e=getAllTextContent(ke,!1).trim();let Te=ke.baseURI;return(!Te||Te=="about:blank")&&(Te=window.location.href),Te?new URL(e,Te).href:e}function readStyleURL(ke){const e=getAllTextContent(ke,!1).trim().replace(/^(?!.*#)/,"#");let Te=ke.baseURI;return(!Te||Te=="about:blank")&&(Te=window.location.href),Te?new URL(e,Te).href:e}function readVec2(ke){const e=ke.getAttribute("xunits"),Te=ke.getAttribute("yunits");let Oe;return e!=="insetPixels"?Te!=="insetPixels"?Oe="bottom-left":Oe="top-left":Te!=="insetPixels"?Oe="bottom-right":Oe="top-right",{x:parseFloat(ke.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(ke.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[Te],origin:Oe}}function readScale(ke){return readDecimal(ke)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(ke,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,ke,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(ke,e){const Te=pushParseAndPop({},ICON_STYLE_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1],Be="Icon"in Te?Te.Icon:{},Ue=!("Icon"in Te)||Object.keys(Be).length>0;let He;const We=Be.href;We?He=We:Ue&&(He=DEFAULT_IMAGE_STYLE_SRC);let Cn,An,En,Sn="bottom-left";const Tn=Te.hotSpot;Tn?(Cn=[Tn.x,Tn.y],An=Tn.xunits,En=Tn.yunits,Sn=Tn.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(He)&&(He.includes("pushpin")?(Cn=DEFAULT_IMAGE_STYLE_ANCHOR,An=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,En=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):He.includes("arrow-reverse")?(Cn=[54,42],An=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,En=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):He.includes("paddle")&&(Cn=[32,1],An=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,En=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let Ln;const Bn=Be.x,ei=Be.y;Bn!==void 0&&ei!==void 0&&(Ln=[Bn,ei]);let ni;const ti=Be.w,ri=Be.h;ti!==void 0&&ri!==void 0&&(ni=[ti,ri]);let oi;const ai=Te.heading;ai!==void 0&&(oi=toRadians(ai));const ci=Te.scale,Pi=Te.color;if(Ue){He==DEFAULT_IMAGE_STYLE_SRC&&(ni=DEFAULT_IMAGE_STYLE_SIZE);const vi=new Icon({anchor:Cn,anchorOrigin:Sn,anchorXUnits:An,anchorYUnits:En,crossOrigin:this.crossOrigin_,offset:Ln,offsetOrigin:"bottom-left",rotation:oi,scale:ci,size:ni,src:this.iconUrlFunction_(He),color:Pi}),pi=vi.getScaleArray()[0],Mi=vi.getSize();if(Mi===null){const Fi=vi.getImageState();if(Fi===ImageState.IDLE||Fi===ImageState.LOADING){const fi=function(){const ui=vi.getImageState();if(!(ui===ImageState.IDLE||ui===ImageState.LOADING)){const Oi=vi.getSize();if(Oi&&Oi.length==2){const Ni=scaleForSize(Oi);vi.setScale(pi*Ni)}vi.unlistenImageChange(fi)}};vi.listenImageChange(fi),Fi===ImageState.IDLE&&vi.load()}}else if(Mi.length==2){const Fi=scaleForSize(Mi);vi.setScale(pi*Fi)}Oe.imageStyle=vi}else Oe.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(ke,e){const Te=pushParseAndPop({},LABEL_STYLE_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1],Be=new Text({fill:new Fill({color:"color"in Te?Te.color:DEFAULT_COLOR}),scale:Te.scale});Oe.textStyle=Be}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(ke,e){const Te=pushParseAndPop({},LINE_STYLE_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1],Be=new Stroke({color:"color"in Te?Te.color:DEFAULT_COLOR,width:"width"in Te?Te.width:1});Oe.strokeStyle=Be}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(ke,e){const Te=pushParseAndPop({},POLY_STYLE_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1],Be=new Fill({color:"color"in Te?Te.color:DEFAULT_COLOR});Oe.fillStyle=Be;const Ue=Te.fill;Ue!==void 0&&(Oe.fill=Ue);const He=Te.outline;He!==void 0&&(Oe.outline=He)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(ke,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,ke,e)}function gxCoordParser(ke,e){const Oe=e[e.length-1].coordinates,Be=getAllTextContent(ke,!1),He=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Be);if(He){const We=parseFloat(He[1]),Cn=parseFloat(He[2]),An=parseFloat(He[3]);Oe.push([We,Cn,An])}else Oe.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(ke,e){const Te=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,ke,e);if(Te)return new MultiLineString(Te)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(ke,e){const Te=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,ke,e);if(!Te)return;const Oe=[],Be=Te.coordinates,Ue=Te.whens;for(let He=0,We=Math.min(Be.length,Ue.length);He<We;++He)Be[He].length==3&&Oe.push(Be[He][0],Be[He][1],Be[He][2],Ue[He]);return new LineString(Oe,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(ke,e){const Te=pushParseAndPop({},ICON_PARSERS,ke,e);return Te||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(ke,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,ke,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(ke,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,ke,e),Oe=readFlatCoordinatesFromNode(ke,e);if(Oe){const Be=new LineString(Oe,"XYZ");return Be.setProperties(Te,!0),Be}}function readLinearRing(ke,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,ke,e),Oe=readFlatCoordinatesFromNode(ke,e);if(Oe){const Be=new Polygon(Oe,"XYZ",[Oe.length]);return Be.setProperties(Te,!0),Be}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(ke,e){const Te=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,ke,e);if(!Te)return null;if(Te.length===0)return new GeometryCollection(Te);let Oe,Be=!0;const Ue=Te[0].getType();let He;for(let We=1,Cn=Te.length;We<Cn;++We)if(He=Te[We],He.getType()!=Ue){Be=!1;break}if(Be){let We,Cn;if(Ue=="Point"){const An=Te[0];We=An.getLayout(),Cn=An.getFlatCoordinates();for(let En=1,Sn=Te.length;En<Sn;++En)He=Te[En],extend$4(Cn,He.getFlatCoordinates());Oe=new MultiPoint(Cn,We),setCommonGeometryProperties(Oe,Te)}else if(Ue=="LineString")Oe=new MultiLineString(Te),setCommonGeometryProperties(Oe,Te);else if(Ue=="Polygon")Oe=new MultiPolygon(Te),setCommonGeometryProperties(Oe,Te);else if(Ue=="GeometryCollection"||Ue.startsWith("Multi"))Oe=new GeometryCollection(Te);else throw new Error("Unknown geometry type found")}else Oe=new GeometryCollection(Te);return Oe}function readPoint(ke,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,ke,e),Oe=readFlatCoordinatesFromNode(ke,e);if(Oe){const Be=new Point$1(Oe,"XYZ");return Be.setProperties(Te,!0),Be}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(ke,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,ke,e),Oe=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,ke,e);if(Oe&&Oe[0]){const Be=Oe[0],Ue=[Be.length];for(let We=1,Cn=Oe.length;We<Cn;++We)extend$4(Be,Oe[We]),Ue.push(Be.length);const He=new Polygon(Be,"XYZ",Ue);return He.setProperties(Te,!0),He}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(ke,e){const Te=pushParseAndPop({},STYLE_PARSERS$2,ke,e,this);if(!Te)return null;let Oe="fillStyle"in Te?Te.fillStyle:DEFAULT_FILL_STYLE;const Be=Te.fill;Be!==void 0&&!Be&&(Oe=null);let Ue;"imageStyle"in Te?Te.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Ue=Te.imageStyle):Ue=DEFAULT_IMAGE_STYLE;const He="textStyle"in Te?Te.textStyle:DEFAULT_TEXT_STYLE,We="strokeStyle"in Te?Te.strokeStyle:DEFAULT_STROKE_STYLE,Cn=Te.outline;return Cn!==void 0&&!Cn?[new Style$1({geometry:function(An){const En=An.getGeometry(),Sn=En.getType();if(Sn==="GeometryCollection"){const Tn=En;return new GeometryCollection(Tn.getGeometriesArrayRecursive().filter(function(Ln){const Bn=Ln.getType();return Bn!=="Polygon"&&Bn!=="MultiPolygon"}))}if(Sn!=="Polygon"&&Sn!=="MultiPolygon")return En},fill:Oe,image:Ue,stroke:We,text:He,zIndex:void 0}),new Style$1({geometry:function(An){const En=An.getGeometry(),Sn=En.getType();if(Sn==="GeometryCollection"){const Tn=En;return new GeometryCollection(Tn.getGeometriesArrayRecursive().filter(function(Ln){const Bn=Ln.getType();return Bn==="Polygon"||Bn==="MultiPolygon"}))}if(Sn==="Polygon"||Sn==="MultiPolygon")return En},fill:Oe,stroke:null,zIndex:void 0})]:[new Style$1({fill:Oe,image:Ue,stroke:We,text:He,zIndex:void 0})]}function setCommonGeometryProperties(ke,e){const Te=e.length,Oe=new Array(e.length),Be=new Array(e.length),Ue=new Array(e.length);let He,We,Cn;He=!1,We=!1,Cn=!1;for(let An=0;An<Te;++An){const En=e[An];Oe[An]=En.get("extrude"),Be[An]=En.get("tessellate"),Ue[An]=En.get("altitudeMode"),He=He||Oe[An]!==void 0,We=We||Be[An]!==void 0,Cn=Cn||Ue[An]}He&&ke.set("extrude",Oe),We&&ke.set("tessellate",Be),Cn&&ke.set("altitudeMode",Ue)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(ke,e){const Te=ke.getAttribute("name");parseNode(DATA_PARSERS,ke,e);const Oe=e[e.length-1];Te&&Oe.displayName?Oe[Te]={value:Oe.value,displayName:Oe.displayName,toString:function(){return Oe.value}}:Te!==null?Oe[Te]=Oe.value:Oe.displayName!==null&&(Oe[Oe.displayName]=Oe.value),delete Oe.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(ke,e){parseNode(EXTENDED_DATA_PARSERS,ke,e)}function regionParser(ke,e){parseNode(REGION_PARSERS,ke,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(ke,e){const Te=pushParseAndPop({},PAIR_PARSERS,ke,e,this);if(!Te)return;const Oe=Te.key;if(Oe&&Oe=="normal"){const Be=Te.styleUrl;Be&&(e[e.length-1]=Be);const Ue=Te.Style;Ue&&(e[e.length-1]=Ue)}}function placemarkStyleMapParser(ke,e){const Te=readStyleMapValue.call(this,ke,e);if(!Te)return;const Oe=e[e.length-1];if(Array.isArray(Te))Oe.Style=Te;else if(typeof Te=="string")Oe.styleUrl=Te;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(ke,e){parseNode(SCHEMA_DATA_PARSERS,ke,e)}function simpleDataParser(ke,e){const Te=ke.getAttribute("name");if(Te!==null){const Oe=readString(ke),Be=e[e.length-1];Be[Te]=Oe}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(ke,e){const Te=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1],Be=[parseFloat(Te.west),parseFloat(Te.south),parseFloat(Te.east),parseFloat(Te.north)];Oe.extent=Be,Oe.altitudeMode=Te.altitudeMode,Oe.minAltitude=parseFloat(Te.minAltitude),Oe.maxAltitude=parseFloat(Te.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(ke,e){const Te=pushParseAndPop({},LOD_PARSERS,ke,e);if(!Te)return;const Oe=e[e.length-1];Oe.minLodPixels=parseFloat(Te.minLodPixels),Oe.maxLodPixels=parseFloat(Te.maxLodPixels),Oe.minFadeExtent=parseFloat(Te.minFadeExtent),Oe.maxFadeExtent=parseFloat(Te.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(ke,e){const Te=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,ke,e);Te.length>0&&e[e.length-1].push(...Te)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(ke,e){const Te=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,ke,e);if(Te){const Oe=e[e.length-1];Oe[0]=Te}}function linkParser(ke,e){parseNode(LINK_PARSERS$1,ke,e)}function whenParser(ke,e){const Oe=e[e.length-1].whens,Be=getAllTextContent(ke,!1),Ue=Date.parse(Be);Oe.push(isNaN(Ue)?0:Ue)}function writeColorTextNode(ke,e){const Te=asArray(e),Be=[(Te.length==4?Te[3]:1)*255,Te[2],Te[1],Te[0]];for(let Ue=0;Ue<4;++Ue){const He=Math.floor(Be[Ue]).toString(16);Be[Ue]=He.length==1?"0"+He:He}writeStringTextNode(ke,Be.join(""))}function writeCoordinatesTextNode(ke,e,Te){const Oe=Te[Te.length-1],Be=Oe.layout,Ue=Oe.stride;let He;if(Be=="XY"||Be=="XYM")He=2;else if(Be=="XYZ"||Be=="XYZM")He=3;else throw new Error("Invalid geometry layout");const We=e.length;let Cn="";if(We>0){Cn+=e[0];for(let An=1;An<He;++An)Cn+=","+e[An];for(let An=Ue;An<We;An+=Ue){Cn+=" "+e[An];for(let En=1;En<He;++En)Cn+=","+e[An+En]}}writeStringTextNode(ke,Cn)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(ke,e,Te){ke.setAttribute("name",e.name);const Oe={node:ke},Be=e.value;typeof Be=="object"?(Be!==null&&Be.displayName&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be.displayName],Te,["displayName"]),Be!==null&&Be.value&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be.value],Te,["value"])):pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be],Te,["value"])}function writeDataNodeName(ke,e){writeCDATASection(ke,e)}function writeDataNodeValue(ke,e){writeStringTextNode(ke,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(ke,e,Te){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,"Placemark")};function writeDocument(ke,e,Te){pushSerializeAndPop({node:ke},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,Te,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(ke,e,Te){const Oe={node:ke},Be=e.names,Ue=e.values,He=Be.length;for(let We=0;We<He;We++)pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:Be[We],value:Ue[We]}],Te)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(ke,e,Te){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+Te)};function writeIcon(ke,e,Te){const Oe={node:ke},Be=Te[Te.length-1].node;let Ue=ICON_SEQUENCE[Be.namespaceURI],He=makeSequence(e,Ue);pushSerializeAndPop(Oe,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,He,Te,Ue),Ue=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],He=makeSequence(e,Ue),pushSerializeAndPop(Oe,ICON_SERIALIZERS,GX_NODE_FACTORY,He,Te,Ue)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(ke,e,Te){const Oe={node:ke},Be={},Ue=e.getSrc(),He=e.getSize(),We=e.getImageSize(),Cn={href:Ue};if(He){Cn.w=He[0],Cn.h=He[1];const ni=e.getAnchor(),ti=e.getOrigin();if(ti&&We&&ti[0]!==0&&ti[1]!==He[1]&&(Cn.x=ti[0],Cn.y=We[1]-(ti[1]+He[1])),ni&&(ni[0]!==He[0]/2||ni[1]!==He[1]/2)){const ri={x:ni[0],xunits:"pixels",y:He[1]-ni[1],yunits:"pixels"};Be.hotSpot=ri}}Be.Icon=Cn;let An=e.getScaleArray()[0],En=He;if(En===null&&(En=DEFAULT_IMAGE_STYLE_SIZE),En.length==2){const ni=scaleForSize(En);An=An/ni}An!==1&&(Be.scale=An);const Sn=e.getRotation();Sn!==0&&(Be.heading=Sn);const Tn=e.getColor();Tn&&(Be.color=Tn);const Ln=Te[Te.length-1].node,Bn=ICON_STYLE_SEQUENCE[Ln.namespaceURI],ei=makeSequence(Be,Bn);pushSerializeAndPop(Oe,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,ei,Te,Bn)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(ke,e,Te){const Oe={node:ke},Be={},Ue=e.getFill();Ue&&(Be.color=Ue.getColor());const He=e.getScale();He&&He!==1&&(Be.scale=He);const We=Te[Te.length-1].node,Cn=LABEL_STYLE_SEQUENCE[We.namespaceURI],An=makeSequence(Be,Cn);pushSerializeAndPop(Oe,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,Cn)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(ke,e,Te){const Oe={node:ke},Be={color:e.getColor(),width:Number(e.getWidth())||1},Ue=Te[Te.length-1].node,He=LINE_STYLE_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,He);pushSerializeAndPop(Oe,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,Te,He)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(ke,e,Te){if(ke){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[ke.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(ke,e,Te){const Oe={node:ke},Be=e.getType();let Ue=[],He;if(Be==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(We){const Cn=We.getType();if(Cn==="MultiPoint")Ue=Ue.concat(We.getPoints());else if(Cn==="MultiLineString")Ue=Ue.concat(We.getLineStrings());else if(Cn==="MultiPolygon")Ue=Ue.concat(We.getPolygons());else if(Cn==="Point"||Cn==="LineString"||Cn==="Polygon")Ue.push(We);else throw new Error("Unknown geometry type")}),He=GEOMETRY_NODE_FACTORY;else if(Be==="MultiPoint")Ue=e.getPoints(),He=POINT_NODE_FACTORY;else if(Be==="MultiLineString")Ue=e.getLineStrings(),He=LINE_STRING_NODE_FACTORY;else if(Be==="MultiPolygon")Ue=e.getPolygons(),He=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(Oe,MULTI_GEOMETRY_SERIALIZERS,He,Ue,Te)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(ke,e,Te){pushSerializeAndPop({node:ke},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],Te)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(ke,e,Te){const Oe={node:ke};e.getId()&&ke.setAttribute("id",e.getId());const Be=e.getProperties(),Ue={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Ue[e.getGeometryName()]=1;const He=Object.keys(Be||{}).sort().filter(function(Ln){return!Ue[Ln]}),We=e.getStyleFunction();if(We){const Ln=We(e,0);if(Ln){const Bn=Array.isArray(Ln)?Ln:[Ln];let ei=Bn;if(e.getGeometry()&&(ei=Bn.filter(function(ni){const ti=ni.getGeometryFunction()(e);if(ti){const ri=ti.getType();return ri==="GeometryCollection"?ti.getGeometriesArrayRecursive().filter(function(oi){const ai=oi.getType();return ai==="Point"||ai==="MultiPoint"}).length:ri==="Point"||ri==="MultiPoint"}})),this.writeStyles_){let ni=Bn,ti=Bn;e.getGeometry()&&(ni=Bn.filter(function(ri){const oi=ri.getGeometryFunction()(e);if(oi){const ai=oi.getType();return ai==="GeometryCollection"?oi.getGeometriesArrayRecursive().filter(function(ci){const Pi=ci.getType();return Pi==="LineString"||Pi==="MultiLineString"}).length:ai==="LineString"||ai==="MultiLineString"}}),ti=Bn.filter(function(ri){const oi=ri.getGeometryFunction()(e);if(oi){const ai=oi.getType();return ai==="GeometryCollection"?oi.getGeometriesArrayRecursive().filter(function(ci){const Pi=ci.getType();return Pi==="Polygon"||Pi==="MultiPolygon"}).length:ai==="Polygon"||ai==="MultiPolygon"}})),Be.Style={pointStyles:ei,lineStyles:ni,polyStyles:ti}}if(ei.length&&Be.name===void 0){const ni=ei[0].getText();ni&&(Be.name=ni.getText())}}}const Cn=Te[Te.length-1].node,An=PLACEMARK_SEQUENCE[Cn.namespaceURI],En=makeSequence(Be,An);if(pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,An),He.length>0){const Ln=makeSequence(Be,He);pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:He,values:Ln}],Te)}const Sn=Te[0];let Tn=e.getGeometry();Tn&&(Tn=transformGeometryWithOptions(Tn,!0,Sn)),pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[Tn],Te)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(ke,e,Te){const Oe=e.getFlatCoordinates(),Be={node:ke};Be.layout=e.getLayout(),Be.stride=e.getStride();const Ue=e.getProperties();Ue.coordinates=Oe;const He=Te[Te.length-1].node,We=PRIMITIVE_GEOMETRY_SEQUENCE[He.namespaceURI],Cn=makeSequence(Ue,We);pushSerializeAndPop(Be,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,Te,We)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(ke,e,Te){const Oe=e.getLinearRings(),Be=Oe.shift(),Ue={node:ke};pushSerializeAndPop(Ue,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,Oe,Te),pushSerializeAndPop(Ue,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[Be],Te)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(ke,e,Te){const Oe={node:ke},Be=e.getFill(),Ue=e.getStroke(),He={color:Be?Be.getColor():void 0,fill:Be?void 0:!1,outline:Ue?void 0:!1},We=Te[Te.length-1].node,Cn=POLY_STYLE_SEQUENCE[We.namespaceURI],An=makeSequence(He,Cn);pushSerializeAndPop(Oe,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,Cn)}function writeScaleTextNode(ke,e){writeDecimalTextNode(ke,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(ke,e,Te){const Oe={node:ke},Be={};if(e.pointStyles.length){const Cn=e.pointStyles[0].getText();Cn&&(Be.LabelStyle=Cn);const An=e.pointStyles[0].getImage();An&&typeof An.getSrc=="function"&&(Be.IconStyle=An)}if(e.lineStyles.length){const Cn=e.lineStyles[0].getStroke();Cn&&(Be.LineStyle=Cn)}if(e.polyStyles.length){const Cn=e.polyStyles[0].getStroke();Cn&&!Be.LineStyle&&(Be.LineStyle=Cn),Be.PolyStyle=e.polyStyles[0]}const Ue=Te[Te.length-1].node,He=STYLE_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,He);pushSerializeAndPop(Oe,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,Te,He)}function writeVec2(ke,e){ke.setAttribute("x",String(e.x)),ke.setAttribute("y",String(e.y)),ke.setAttribute("xunits",e.xunits),ke.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(ke){if(ke>255)throw new Error("'"+ke+"'' is greater than 255(0xff);");var e=Number(ke).toString(16);return("0"+e).slice(-2)},num:function(ke){return parseInt(ke,16)},arrayToRgba:function(ke){if(!Array.isArray(ke))throw new Error("Not an array !");var e=ke[0],Te=ke[1],Oe=ke[2],Be=ke[3]||1,Ue="rgba("+e+", "+Te+", "+Oe+", "+parseFloat(Be)+")";return Ue},arrayToHex:function(ke){if(!Array.isArray(ke))throw new Error("Not an array !");var e=ke[0],Te=ke[1],Oe=ke[2],Be=ke[3],Ue=[this.hex(e),this.hex(Te),this.hex(Oe)],He={};return He.hex="#"+Ue.join(""),Be&&(He.opacity=parseFloat(Be)),He},rgbaToHex:function(ke){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,Te=e.exec(ke);if(!Te)throw new Error("Invalid format: "+ke);var Oe=Te[1],Be=Te[2],Ue=Te[3],He=Te[4],We=[this.hex(Oe),this.hex(Be),this.hex(Ue)],Cn={};return Cn.hex="#"+We.join(""),He&&(Cn.opacity=parseFloat(He)),Cn},hexToRgba:function(ke,e){var Te=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!ke)throw new Error("Invalid format");ke=ke.replace(Te,function(Ue,He,We,Cn){return He+He+We+We+Cn+Cn});var Oe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ke);Oe=Oe?{r:parseInt(Oe[1],16),g:parseInt(Oe[2],16),b:parseInt(Oe[3],16)}:null;var Be=Oe?"rgba("+Oe.r+", "+Oe.g+", "+Oe.b+", "+e+")":null;return Be},isHex:function(ke){if(!ke||ke.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Te=e.exec(ke);return!!Te},isRGB:function(ke){if(!ke)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,Te=e.exec(ke);return!!Te}},logger$D=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var ke=this.getStyle();if(ke&&!(Array.isArray(ke)&&ke.length===0)){var e=ke.getFill();if(e){var Te=e.getColor();if(Array.isArray(Te)){var Oe="rgba(";Oe+=Te[0]+",",Oe+=Te[1]+",",Oe+=Te[2]+",",Oe+=Te[3]+")",Te=Oe}if(ColorUtils.isRGB(Te)){var Be=ColorUtils.rgbaToHex(Te);this.set("fill",Be.hex),this.set("fill-opacity",Be.opacity)}else this.set("fill",Te),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var ke=this.getStyle();if(ke&&!(Array.isArray(ke)&&ke.length===0)){var e=ke.getStroke();if(e){var Te=e.getColor();if(Array.isArray(Te)){var Oe="rgba(";Oe+=Te[0]+",",Oe+=Te[1]+",",Oe+=Te[2]+",",Oe+=Te[3]+")",Te=Oe}if(ColorUtils.isRGB(Te)){var Be=ColorUtils.rgbaToHex(Te);this.set("stroke",Be.hex),this.set("stroke-opacity",Be.opacity)}else this.set("stroke",Te),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var ke=this.getStyle();if(ke&&!(Array.isArray(ke)&&ke.length===0)){var e=this.get("name")!==void 0,Te=ke.getText();if(Te&&e){var Oe=ke.getText().getFill();if(Oe){var Be=Oe.getColor();if(Array.isArray(Be)){var Ue="rgba(";Ue+=Be[0]+",",Ue+=Be[1]+",",Ue+=Be[2]+",",Ue+=Be[3]+")",Be=Ue}if(ColorUtils.isRGB(Be)){var He=ColorUtils.rgbaToHex(Be);this.set("label-fill",He.hex),this.set("label-fill-opacity",He.opacity)}else this.set("label-fill",Be),this.set("label-fill-opacity",1)}var We=ke.getText().getStroke();if(We){var Cn=We.getColor();if(Array.isArray(Cn)){var An="rgba(";An+=Cn[0]+",",An+=Cn[1]+",",An+=Cn[2]+",",An+=Cn[3]+")",Cn=An}if(ColorUtils.isRGB(Cn)){var En=ColorUtils.rgbaToHex(Cn);this.set("label-stroke",En.hex),this.set("label-stroke-opacity",En.opacity)}else this.set("label-stroke",Cn),this.set("label-stroke-opacity",1);this.set("label-stroke-width",We.getWidth())}this.set("label-font",ke.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",ke.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var ke=this.getStyle();if(ke&&!(Array.isArray(ke)&&ke.length===0)){var e=ke.getImage();if(e)if(e instanceof Icon){var Te=e.getColor();if(Array.isArray(Te)){var Oe="rgba(";Oe+=Te[0]+",",Oe+=Te[1]+",",Oe+=Te[2]+",",Oe+=Te[3]+")",Te=Oe}if(Te){var Be=ColorUtils.rgbaToHex(Te);this.set("marker-color",Be.hex)}var Ue=e.getScale();switch(Math.round(Ue*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var He=e.getSrc();He&&this.set("marker-symbol",He),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var We=e.getFill();if(We){var Cn=We.getColor();if(Array.isArray(Cn)){var An="rgba(";An+=Cn[0]+",",An+=Cn[1]+",",An+=Cn[2]+",",An+=Cn[3]+")",Cn=An}if(ColorUtils.isRGB(Cn)){var En=ColorUtils.rgbaToHex(Cn);this.set("circle-fill",En.hex),this.set("circle-fill-opacity",En.opacity)}else this.set("circle-fill",Cn),this.set("circle-fill-opacity",1)}var Sn=e.getStroke();if(Sn){var Tn=Sn.getColor();if(Array.isArray(Tn)){var Ln="rgba(";Ln+=Tn[0]+",",Ln+=Tn[1]+",",Ln+=Tn[2]+",",Ln+=Tn[3]+")",Tn=Ln}if(ColorUtils.isRGB(Tn)){var Bn=ColorUtils.rgbaToHex(Tn);this.set("circle-stroke",Bn.hex),this.set("circle-stroke-opacity",Bn.opacity)}else this.set("circle-stroke",Tn),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",Sn.getWidth())}var ei=e.getRadius();this.set("circle-radius",ei)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(ke){var e=null,Te={},Oe=null;if(ke.get("marker-color")||ke.get("marker-size")||ke.get("marker-symbol")){Oe={},Oe.src=this.DEFAULT_ICON.src,Oe.anchor=this.DEFAULT_ICON.anchor;var Be=ke.get("marker-symbol");Be&&Be.search("data:image/png;base64")!==-1&&(Oe.src=Be);var Ue=ke.get("marker-color");ColorUtils.isHex(Ue)&&(Oe.color=ColorUtils.hexToRgba(Ue,1));var He=ke.get("marker-size");if(He)switch(He){case"small":Oe.scale=.5;break;case"medium":Oe.scale=1;break;case"large":Oe.scale=1.5;break;default:Oe.scale=this.DEFAULT_ICON.scale;break}}var We=null;(ke.get("stroke")||ke.get("stroke-opacity")||ke.get("stroke-width"))&&(We={},We.color=ColorUtils.hexToRgba(ke.get("stroke"),+ke.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),We.width=+ke.get("stroke-width")||this.DEFAULT_STROKE.width);var Cn=null;(ke.get("fill")||ke.get("fill-opacity"))&&(Cn={},Cn.color=ColorUtils.hexToRgba(ke.get("fill"),+ke.get("fill-opacity")||this.DEFAULT_FILL.opacity));var An=null,En=null,Sn=ke.get("name")!=="";Sn&&((ke.get("label-fill")||ke.get("label-fill-opacity"))&&(En={},En.color=ColorUtils.hexToRgba(ke.get("label-fill"),+ke.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(ke.get("label-stroke")||ke.get("label-stroke-opacity")||ke.get("label-stroke-width"))&&(An={},An.color=ColorUtils.hexToRgba(ke.get("label-stroke"),+ke.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),An.width=+ke.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var Tn=ke.get("circle-radius")||this.DEFAULT_CIRCLE.radius,Ln=null;(ke.get("circle-stroke")||ke.get("circle-stroke-opacity")||ke.get("circle-stroke-width"))&&(Ln={},Ln.color=ColorUtils.hexToRgba(ke.get("circle-stroke"),+ke.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),Ln.width=+ke.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var Bn=null;if((ke.get("circle-fill")||ke.get("circle-fill-opacity"))&&(Bn={},Bn.color=ColorUtils.hexToRgba(ke.get("circle-fill"),+ke.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),ke.getGeometry()){var ei=ke.getGeometry().getType();switch(ei){case"Circle":case"Point":case"MultiPoint":var ni=!1,ti={};if(Ln&&(ti.stroke=new Stroke(Ln)),Bn&&(ti.fill=new Fill(Bn)),Object.keys(ti).length!==0&&(ni=!0,ti.radius=+Tn,Te.image=new CircleStyle(ti)),Oe&&(Te.image=new Icon(Oe)),Sn){var ri={};if(An&&(ri.stroke=new Stroke(An)),En&&(ri.fill=new Fill(En)),Object.keys(ri).length!==0)ri.text=ke.get("name"),ri.textAlign=ke.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,ri.font=ke.get("label-font")||this.DEFAULT_TEXT.font,Te.text=new Text(Object.assign({},this.DEFAULT_TEXT,ri));else if(Oe||ni){var oi=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(oi){var ai=oi.clone();ai.setText(ke.get("name")),Te.text=ai}}}break;case"Polygon":case"MultiPolygon":We&&(Te.stroke=new Stroke(We)),Cn&&(Te.fill=new Fill(Cn));break;case"LineString":case"MultiLineString":if(We&&(Te.stroke=new Stroke(We)),this.APPLY_CONVERT_GEOM_GPX&&Cn){var ci=ke.get("type");if(ci&&(ci==="Polygon"||ci==="MultiPolygon")){Te.fill=new Fill(Cn);var Pi=ke.clone(),vi=ei==="LineString"?Polygon:MultiPolygon;ke.setGeometry(new vi([Pi.getGeometry().getCoordinates()]))}}break}}return Object.keys(Te).length!==0&&(e=new Style$1(Te)),e},defineStyleFunctionByDefault:function(ke){if(!ke)return[];if(Object.keys(ke).length===0)return[];var e=(Te,Oe)=>{if(Te.getGeometry()){var Be=null,Ue=Te.getGeometry().getType();switch(Ue){case"Point":case"MultiPoint":var He={};if(ke.getImage()&&(He.image=ke.getImage()),ke.getText()&&Te.get("name")){var We=ke.getText().clone();We.setText(Te.get("name")),He.text=We}Be=new Style$1(He);break;case"Circle":var Cn={},An={};if(ke.getFill()&&(An.fill=ke.getFill()),ke.getStroke()&&(An.stroke=ke.getStroke()),ke.getText()&&Te.get("name")){var En=ke.getText().clone();En.setText(Te.get("name")),Cn.text=En}Object.keys(An).length!==0&&(An.radius=3,Cn.image=new CircleStyle(An)),Be=new Style$1(Cn);break;case"Polygon":case"MultiPolygon":var Sn={};ke.getFill()&&(Sn.fill=ke.getFill()),ke.getStroke()&&(Sn.stroke=ke.getStroke()),Be=new Style$1(Sn);break;case"LineString":case"LinearRing":case"MultiLineString":var Tn={};ke.getStroke()&&(Tn.stroke=ke.getStroke()),Be=new Style$1(Tn);break}return[Be]}};return e},definePropertiesFromStyleByType:function(ke){if(ke.getGeometry()){var e=ke.getGeometry().getType();switch(e){case"Point":case"MultiPoint":ke.setPropertyMarker(),ke.setPropertyLabel();break;case"LineString":case"MultiLineString":ke.setPropertyStroke();break;case"Polygon":case"MultiPolygon":ke.setPropertyStroke(),ke.setPropertyFill();break}}},definePropertiesFromStyle:function(ke){var e=ke.getStyle()||ke.getStyleFunction();if(e){if(typeof e=="function"){var Te=e.call(this,ke,0);if(Te&&Te.length!==0)e=Array.isArray(Te)?Te[0]:Te,ke.setStyle(e);else return}this.definePropertiesFromStyleByType(ke)}},defineTagFromStyle:function(ke,e){return logger$D.trace("todo..."),null}},logger$C=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(ke){var e=null,Te=null,Oe=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Be=require("@xmldom/xmldom").DOMParser;Te=new Be,e=Te.parseFromString(ke,"text/xml")}else Oe.DOMParser?(Te=new Oe.DOMParser,e=Te.parseFromString(ke,"text/xml")):Oe.ActiveXObject?(e=new Oe.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(ke)):logger$C.log("Incompatible environment for DOM Parser !");var Ue=e.querySelector("parsererror");return Ue?(console.error(Ue),null):(logger$C.trace(e),e)},toString:function(ke){var e=new XMLSerializer,Te=e.serializeToString(ke);return logger$C.trace(Te),Te},format:function(ke){var e=/(>)\s*(<)(\/*)/g,Te=/ *(.*) +\n/g,Oe=/(<.+>)(.+\n)/g;ke=ke.replace(e,`$1
$2$3`).replace(Te,`$1
`).replace(Oe,`$1
$2`);for(var Be="",Ue=ke.split(`
`),He=0,We="other",Cn={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},An=0;An<Ue.length;An++){var En=Ue[An],Sn=!!En.match(/<.+\/>/),Tn=!!En.match(/<\/.+>/),Ln=!!En.match(/<[^!].*>/),Bn=Sn?"single":Tn?"closing":Ln?"opening":"other",ei=We+"->"+Bn;We=Bn;var ni="";He+=Cn[ei];for(var ti=0;ti<He;ti++)ni+="	";ei==="opening->closing"?Be=Be.substr(0,Be.length-1)+En+`
`:Be+=ni+En+`
`}return logger$C.trace(Be),Be}},logger$B=LoggerByDefault.getLogger("extended KML format"),KML=class jf extends KML$1{constructor(e){if(super(e),!(this instanceof jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,Te,Oe){for(var Be=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Ue=Be,He=0;He<Be.length;He++){const hr=Be[He];if(hr.nodeName==="Document"){Ue=hr.childNodes;break}if(hr.nodeName==="Placemark"){Ue=[hr];break}}for(var We={},Cn=-1,An=0;An<Ue.length;An++){var En=Ue[An];switch(En.nodeName){case"Style":var Sn=En.attributes[0];if(Sn&&Sn.nodeName==="id"){var Tn=Sn.nodeValue,Ln=En;We[Tn]=Ln}break;case"Placemark":Cn++;for(var Bn=En.childNodes,ei=!1,ni=!1,ti=!1,ri=null,oi=null,ai=null,ci=En,Pi=0;Pi<Bn.length;Pi++)switch(Bn[Pi].nodeName){case"Polygon":ti=!0;break;case"LineString":ni=!0;break;case"Point":ei=!0;break;case"Style":oi=Bn[Pi],ri=Bn[Pi].childNodes;break;case"styleUrl":var vi=Bn[Pi].textContent.slice(1);We[vi]&&(ri=We[vi].childNodes);break;case"ExtendedData":ai=Bn[Pi].childNodes;break;case"name":ci=null;break}if(ai){logger$B.log("ExtendedData :",ai);var pi=Oe.extendedData;pi&&typeof pi=="function"&&pi(Te[Cn],ai)}if(ci){logger$B.log("Name :",ci);var Mi=Oe.nameData;Mi&&typeof Mi=="function"&&Mi(Te[Cn],ci)}if(ei&&ri&&ri.length!==0){for(var Fi=null,fi=null,ui=0;ui<ri.length;ui++)switch(ri[ui].nodeName){case"LabelStyle":Fi=ri[ui];break;case"IconStyle":fi=ri[ui];break}var Oi=Te[Cn].getProperties().name,Ni=Te[Cn].getProperties().description,nr=Oi||Ni;if(logger$B.trace(nr),!fi&&Fi){var er=Oe.labelStyle;er&&typeof er=="function"&&er(Te[Cn],Fi)}else if(fi&&!Fi){var cr=Oe.iconStyle;cr&&typeof cr=="function"&&cr(Te[Cn],fi)}else if(fi&&Fi){var ar=Oe.iconLabelStyle;ar&&typeof ar=="function"&&ar(Te[Cn],fi,Fi)}}else{var pr=Te[Cn],rr=pr.getStyle();if(rr&&typeof rr=="function"){var br=rr.call(this,pr,0);br&&br.length!==0&&(rr=br[0])}if(ti){var Li=Oe.polygonStyle;Li&&typeof Li=="function"&&Li(Te[Cn],ri)}if(ni){var ur=Oe.lineStringStyle;ur&&typeof ur=="function"&&ur(Te[Cn],ri)}if(ei&&rr){var sr=rr.getImage();if(sr&&sr instanceof CircleStyle){var dr=Oe.circleStyle;dr&&typeof dr=="function"&&dr(Te[Cn],oi)}else if(sr&&sr instanceof Icon){var vr=Oe.pointStyle;vr&&typeof vr=="function"&&vr(Te[Cn],oi)}}}break;default:logger$B.trace("tag is not processing !")}}}writeFeatures(e,Te){logger$B.log("overload : ol.format.KML.writeFeatures");var Oe=super.writeFeaturesNode(e,Te);if(Oe===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(Oe,this.extensions);var Be=this._writeExtendStylesFeatures(Oe,e,Te),Ue=Parser$1.format(Be);return Ue===""?null:Ue}_writeExtendStylesFeatures(e,Te,Oe){function Be(Ln,Bn){var ei=Ln.toString(16);ei.charAt(0)==="#"&&(ei=ei.slice(1)),Bn=Bn||1,Bn=parseInt(Bn*255,10),Bn=Bn.toString(16);var ni=Bn;return ni=ni+ei.substr(4,2),ni=ni+ei.substr(2,2),ni=ni+ei.substr(0,2),ni.toLowerCase()}var Ue=function(Ln,Bn){if(logger$B.trace("label with style :",Bn),!!Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getText();if(!ei)return;var ni="Sans",ti="16px",ri=ei.getFont();if(ri){var oi=ri.split(" ",2);ti=oi[0],ni=oi[1]}var ai=Ln.getStyle().getText().getStroke();if(!ai)return;if(ai instanceof Stroke){var ci=Be("#FFFFFF"),Pi=ai.getColor();if(Array.isArray(Pi)){var vi="rgba(";vi+=Pi[0]+",",vi+=Pi[1]+",",vi+=Pi[2]+",",vi+=Pi[3]+")",Pi=vi}if(ColorUtils.isRGB(Pi)){var pi=ColorUtils.rgbaToHex(Pi);ci=Be(pi.hex,pi.opacity)}else ci=Be(Pi);var Mi=ai.getWidth()||"0",Fi="1";if(Bn&&Bn.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var fi=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");fi.setAttribute("fontSize",ti),fi.setAttribute("fontFamily",ni),fi.setAttribute("haloColor",ci),fi.setAttribute("haloRadius",Mi),fi.setAttribute("haloOpacity",Fi),Bn.appendChild(fi)}}var ui=Ln.getStyle().getImage();if(!ui)return;if(ui instanceof CircleStyle){var Oi=null,Ni=null;if(ui.getStroke()){if(Ni=ui.getStroke().getWidth(),Oi=ui.getStroke().getColor(),Array.isArray(Oi)){var nr="rgba(";nr+=Oi[0]+",",nr+=Oi[1]+",",nr+=Oi[2]+",",nr+=Oi[3]+")",Oi=nr}if(ColorUtils.isRGB(Oi)){var er=ColorUtils.rgbaToHex(Oi);Oi=Be(er.hex,er.opacity)}else Oi=Be(Oi)}var cr=null;if(ui.getFill()){if(cr=ui.getFill().getColor(),Array.isArray(cr)){var ar="rgba(";ar+=cr[0]+",",ar+=cr[1]+",",ar+=cr[2]+",",ar+=cr[3]+")",cr=ar}if(ColorUtils.isRGB(cr)){var pr=ColorUtils.rgbaToHex(cr);cr=Be(pr.hex,pr.opacity)}else cr=Be(cr)}if(Bn&&Bn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var rr=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");rr.setAttribute("type","circle"),rr.setAttribute("radius",ui.getRadius()),rr.setAttribute("fillColor",cr),rr.setAttribute("strokeColor",Oi),rr.setAttribute("strokeWidth",Ni),Bn.appendChild(rr)}}}},He=function(Ln,Bn){if(logger$B.trace("marker with style (hotspot):",Bn),!!Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getImage();if(!ei)return;if(ei instanceof Icon){var ni=0,ti=0,ri="pixels",oi="pixels",ai=ei.getSize(),ci=ei.getAnchor();if(ci.length&&(ni=ci[0],ti=ci[1],oi==="fraction"?ti=ti===1?0:1-ti:ti=oi==="pixels"&&ti===ai[1]?0:ai[1]-ti),Bn&&Bn.getElementsByTagName("hotSpot").length===0){var Pi=document.createElementNS(e.namespaceURI,"hotSpot");Pi.setAttribute("x",ni),Pi.setAttribute("y",ti),Pi.setAttribute("xunits",ri),Pi.setAttribute("yunits",oi),Bn.appendChild(Pi)}}}},We=function(Ln,Bn){if(Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getImage();if(!ei)return;if(ei instanceof CircleStyle){var ni=null,ti=null;if(ei.getStroke()){if(ti=ei.getStroke().getWidth(),ni=ei.getStroke().getColor(),Array.isArray(ni)){var ri="rgba(";ri+=ni[0]+",",ri+=ni[1]+",",ri+=ni[2]+",",ri+=ni[3]+")",ni=ri}if(ColorUtils.isRGB(ni)){var oi=ColorUtils.rgbaToHex(ni);ni=Be(oi.hex,oi.opacity)}else ni=Be(ni)}var ai=null;if(ei.getFill()){if(ai=ei.getFill().getColor(),Array.isArray(ai)){var ci="rgba(";ci+=ai[0]+",",ci+=ai[1]+",",ci+=ai[2]+",",ci+=ai[3]+")",ai=ci}if(ColorUtils.isRGB(ai)){var Pi=ColorUtils.rgbaToHex(ai);ai=Be(Pi.hex,Pi.opacity)}else ai=Be(ai)}if(Bn&&Bn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var vi=document.createElementNS(e.namespaceURI,"LabelStyle"),pi=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");pi.setAttribute("type","circle"),pi.setAttribute("radius",ei.getRadius()),pi.setAttribute("fillColor",ai),pi.setAttribute("strokeColor",ni),pi.setAttribute("strokeWidth",ti),vi.appendChild(pi),Bn.appendChild(vi)}}}},Cn=function(Ln,Bn){},An=function(Ln,Bn,ei){logger$B.trace("write an icon with a label"),He(Ln,Bn),Ue(Ln,ei)},En=function(Ln,Bn){for(var ei=0;ei<Bn.length;ei++){var ni=Bn[ei];if(ni.nodeName==="name")return}var ti=Ln.getProperties().name;if(ti){var ri=document.createElement("name");ri.innerHTML=ti,Bn.appendChild(ri)}},Sn=function(Ln,Bn){if(Bn&&Bn.length){for(var ei=[],ni=0;ni<Bn.length;ni++){const ri=Bn[ni];if(ri.nodeName==="Data"){var ti=ri.getAttribute("name");Styling.getListTags().includes(ti)&&ei.push(ri)}}ei&&ei.length&&ei.forEach(ri=>{ri.remove()})}};this._processKml(e,Te,{labelStyle:Ue,iconStyle:He,iconLabelStyle:An,circleStyle:We,pointStyle:Cn,nameData:En,extendedData:Sn});var Tn=Parser$1.toString(e);return Tn||null}_writeRootExtensions(e,Te){var Oe=document.createElementNS(e.namespaceURI,"ExtendedData");for(const We in Te)if(Object.hasOwnProperty.call(Te,We)){const Cn=Te[We];var Be=document.createElementNS(e.namespaceURI,"Data");Be.setAttribute("name",We);var Ue=document.createTextNode(JSON.stringify(Cn));Be.appendChild(Ue),Oe.appendChild(Be)}var He=e.firstChild;e.insertBefore(Oe,He)}readFeatures(e,Te){logger$B.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Oe=this._readExtendStylesFeatures(e,Te);return logger$B.trace("Styles tendus",Oe),Oe.forEach(Be=>{Styling.definePropertiesFromStyle(Be)}),Oe}_readExtendStylesFeatures(e,Te){var Oe=super.readFeatures(e,Te),Be=null,Ue="";if(typeof e=="string"?Ue=e:Ue=e.documentElement.outerHTML,Ue=Ue.replace(/\n/g,""),Ue=Ue.replace(/(>)\s*(<)/g,"$1$2"),Be=Parser$1.parse(Ue),Be===null)return Oe;function He(Tn){var Ln="";Ln=Ln+Tn.substr(6,2),Ln=Ln+Tn.substr(4,2),Ln=Ln+Tn.substr(2,2);for(var Bn=parseInt(Ln,16).toString(16),ei="",ni=Bn.length||0,ti=0;ti<6-ni;ti++)ei+="0";return Bn="#"+ei+Bn,Bn}var We=function(Tn,Ln){if(logger$B.trace("label with style :",Ln),!!Tn){for(var Bn=Tn.getProperties().name,ei=He("ff000000"),ni="#FFFFFF",ti=0,ri="Sans",oi="16px",ai=null,ci=5,Pi="#000000",vi="#ffffff",pi=1,Mi=!1,Fi=!1,fi=Ln.childNodes,ui=0;ui<fi.length;ui++)switch(fi[ui].nodeName){case"scale":break;case"colorMode":break;case"color":ei=He(fi[ui].textContent);break;case"LabelStyleSimpleExtensionGroup":Mi=!0;for(var Oi=fi[ui].attributes,Ni=0;Ni<Oi.length;Ni++)switch(Oi[Ni].nodeName){case"fontFamily":ri=Oi[Ni].nodeValue;break;case"fontSize":oi=Oi[Ni].nodeValue;break;case"haloColor":ni=He(Oi[Ni].nodeValue);break;case"haloRadius":ti=parseInt(Oi[Ni].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Fi=!0;for(var nr=fi[ui].attributes,er=0;er<nr.length;er++)switch(nr[er].nodeName){case"type":ai=nr[er].nodeValue;break;case"radius":ci=parseInt(nr[er].nodeValue,10);break;case"fillColor":var cr=nr[er].nodeValue,ar=Math.round(ColorUtils.num(cr.substr(0,2))/255*10)/10,pr=He(cr);Pi=ColorUtils.hexToRgba(pr,ar);break;case"strokeColor":var rr=nr[er].nodeValue,br=Math.round(ColorUtils.num(rr.substr(0,2))/255*10)/10,Li=He(rr);vi=ColorUtils.hexToRgba(Li,br);break;case"strokeWidth":pi=parseInt(nr[er].nodeValue,10);break}break}var ur=null;Fi&&ai==="circle"?ur=new CircleStyle({radius:ci,fill:new Fill({color:Pi}),stroke:new Stroke({color:vi,width:pi})}):Mi&&(ur=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),Tn.setStyle(new Style$1({image:ur,text:new Text({font:oi+" "+ri,textAlign:"left",text:Bn,fill:new Fill({color:ei}),stroke:new Stroke({color:ni,width:ti})})}))}},Cn=function(Tn,Ln){logger$B.trace("hotspot :",Ln);for(var Bn=null,ei=null,ni=He("ffffffff"),ti=!1,ri=51,oi=38,ai=!1,ci=25.5,Pi="pixels",vi=38,pi="pixels",Mi=Ln.childNodes,Fi=!1,fi=0;fi<Mi.length;fi++)switch(Mi[fi].nodeName){case"Icon":Fi=!0;for(var ui=Mi[fi].childNodes,Oi=0;Oi<ui.length;Oi++)switch(ui[Oi].nodeName){case"href":Bn=ui[Oi].textContent;break;case"gx:w":ti=!0,ri=parseFloat(ui[Oi].textContent);break;case"gx:h":ti=!0,oi=parseFloat(ui[Oi].textContent);break}break;case"hotSpot":ai=!0;for(var Ni=Mi[fi].attributes,nr=0;nr<Ni.length;nr++)switch(Ni[nr].nodeName){case"x":ci=parseFloat(Ni[nr].nodeValue);break;case"y":vi=parseFloat(Ni[nr].nodeValue);break;case"yunits":Pi=Ni[nr].nodeValue;break;case"xunits":pi=Ni[nr].nodeValue;break}break;case"scale":ei=parseFloat(Mi[fi].textContent);break;case"color":ni=He(Mi[fi].textContent);break}var er=null;if(Fi){var cr={src:Bn||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:ni,crossOrigin:"anonymous",scale:ei||1};ti&&Helper.mergeParams(cr,{size:[ri,oi]}),ai&&Helper.mergeParams(cr,{anchor:[ci,vi],anchorOrigin:"bottom-left",anchorXUnits:Pi||"pixels",anchorYUnits:pi||"pixels"}),er=new Icon(cr)}var ar=Tn.getStyleFunction();if(ar){var pr=ar(Tn,0);if(pr&&!Array.isArray(pr)&&(pr=[pr]),pr&&pr.length!==0){var rr=pr.length===1?pr[0]:pr[pr.length-1];Tn.setStyle(new Style$1({image:er,text:rr.getText()}))}}},An=function(Tn,Ln){if(logger$B.trace("extendData :",Ln),!!Tn){for(var Bn={},ei=Tn.get("name")||"",ni=Tn.get("description")||"",ti=null,ri=0;ri<Ln.length;ri++){var oi=Ln[ri],ai=oi.attributes[0],ci=oi.childNodes;if(ai.nodeName==="name")switch(ai.nodeValue){case"label":ei=oi.textContent,Bn.name=ei;break;case"title":case"attributetitle":for(var Pi=0;Pi<ci.length;Pi++)ci[Pi].nodeName==="value"&&(ti=ci[Pi].textContent);break;default:Bn[ai.nodeValue]=oi.textContent;break}}ti&&(ni=ni?ti+" : "+ni:ti,Bn.description=ni),Object.keys(Bn).length&&Tn.setProperties(Bn,!0)}},En=function(Tn,Ln,Bn){logger$B.trace("display icon and label"),We(Tn,Bn),Cn(Tn,Ln)},Sn=function(Tn,Ln){};return this._processKml(Be,Oe,{lineStringStyle:Sn,polygonStyle:Sn,pointStyle:Sn,labelStyle:this.showPointNames_?We:null,iconStyle:Cn,iconLabelStyle:this.showPointNames_?En:Cn,extendedData:An}),Oe}readRootExtensions(e){for(var Te={},Oe=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,Be=Oe.childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];if(He.nodeName==="ExtendedData")for(var We=He.childNodes,Cn=0;Cn<We.length;Cn++){var An=We[Cn];if(An.nodeName==="Data"){var En=An.attributes[0];if(En&&En.nodeName==="name"&&En.nodeValue===e){Te=JSON.parse(An.textContent);break}}}}return Te}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),AUTHOR_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),email:parseEmail,link:parseLink}),METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),author:makeObjectPropertySetter(readAuthor),copyright:makeObjectPropertySetter(readCopyright),link:parseLink,time:makeObjectPropertySetter(readDateTime),keywords:makeObjectPropertySetter(readString),bounds:parseBounds,extensions:parseExtensions}),COPYRIGHT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{year:makeObjectPropertySetter(readPositiveInteger),license:makeObjectPropertySetter(readString)}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let Te=0,Oe=e.length;Te<Oe;++Te){const Be=e[Te];if(this.readExtensions_){const Ue=Be.get("extensionsNode_")||null;this.readExtensions_(Be,Ue)}Be.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(parse$1(e)):isDocument(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType===Node.ELEMENT_NODE){const Oe=this.readMetadataFromNode(Te);if(Oe)return Oe}return null}readMetadataFromNode(e){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling)if(NAMESPACE_URIS$3.includes(Te.namespaceURI)&&Te.localName==="metadata")return pushParseAndPop({},METADATA_PARSERS,Te,[]);return null}readFeatureFromNode(e,Te){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const Oe=FEATURE_READER[e.localName];if(!Oe)return null;const Be=Oe(e,[this.getReadOptions(e,Te)]);return Be?(this.handleReadExtensions_([Be]),Be):null}readFeaturesFromNode(e,Te){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const Oe=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,Te)]);return Oe?(this.handleReadExtensions_(Oe),Oe):[]}return[]}writeFeaturesNode(e,Te){Te=this.adaptOptions(Te);const Oe=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return Oe.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),Oe.setAttribute("version","1.1"),Oe.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:Oe},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[Te]),Oe}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(ke,e,Te){const Oe=ke.getGeometry();if(Oe){const Be=GEOMETRY_TYPE_TO_NODENAME[Oe.getType()];if(Be){const Ue=e[e.length-1].node;return createElementNS(Ue.namespaceURI,Be)}}}function appendCoordinate(ke,e,Te,Oe){return ke.push(parseFloat(Te.getAttribute("lon")),parseFloat(Te.getAttribute("lat"))),"ele"in Oe?(ke.push(Oe.ele),delete Oe.ele,e.hasZ=!0):ke.push(0),"time"in Oe?(ke.push(Oe.time),delete Oe.time,e.hasM=!0):ke.push(0),ke}function applyLayoutOptions(ke,e,Te){let Oe="XY",Be=2;if(ke.hasZ&&ke.hasM?(Oe="XYZM",Be=4):ke.hasZ?(Oe="XYZ",Be=3):ke.hasM&&(Oe="XYM",Be=3),Be!==4){for(let Ue=0,He=e.length/4;Ue<He;Ue++)e[Ue*Be]=e[Ue*4],e[Ue*Be+1]=e[Ue*4+1],ke.hasZ&&(e[Ue*Be+2]=e[Ue*4+2]),ke.hasM&&(e[Ue*Be+2]=e[Ue*4+3]);if(e.length=e.length/4*Be,Te)for(let Ue=0,He=Te.length;Ue<He;Ue++)Te[Ue]=Te[Ue]/4*Be}return Oe}function readAuthor(ke,e){const Te=pushParseAndPop({},AUTHOR_PARSERS,ke,e);if(Te)return Te}function readCopyright(ke,e){const Te=pushParseAndPop({},COPYRIGHT_PARSERS,ke,e);if(Te){const Oe=ke.getAttribute("author");return Oe!==null&&(Te.author=Oe),Te}}function parseBounds(ke,e){const Te=e[e.length-1],Oe=ke.getAttribute("minlat"),Be=ke.getAttribute("minlon"),Ue=ke.getAttribute("maxlat"),He=ke.getAttribute("maxlon");Be!==null&&Oe!==null&&He!==null&&Ue!==null&&(Te.bounds=[[parseFloat(Be),parseFloat(Oe)],[parseFloat(He),parseFloat(Ue)]])}function parseEmail(ke,e){const Te=e[e.length-1],Oe=ke.getAttribute("id"),Be=ke.getAttribute("domain");Oe!==null&&Be!==null&&(Te.email=`${Oe}@${Be}`)}function parseLink(ke,e){const Te=e[e.length-1],Oe=ke.getAttribute("href");Oe!==null&&(Te.link=Oe),parseNode(LINK_PARSERS,ke,e)}function parseExtensions(ke,e){const Te=e[e.length-1];Te.extensionsNode_=ke}function parseRtePt(ke,e){const Te=pushParseAndPop({},RTEPT_PARSERS,ke,e);if(Te){const Oe=e[e.length-1],Be=Oe.flatCoordinates,Ue=Oe.layoutOptions;appendCoordinate(Be,Ue,ke,Te)}}function parseTrkPt(ke,e){const Te=pushParseAndPop({},TRKPT_PARSERS,ke,e);if(Te){const Oe=e[e.length-1],Be=Oe.flatCoordinates,Ue=Oe.layoutOptions;appendCoordinate(Be,Ue,ke,Te)}}function parseTrkSeg(ke,e){const Te=e[e.length-1];parseNode(TRKSEG_PARSERS,ke,e);const Oe=Te.flatCoordinates;Te.ends.push(Oe.length)}function readRte(ke,e){const Te=e[0],Oe=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,ke,e);if(!Oe)return;const Be=Oe.flatCoordinates;delete Oe.flatCoordinates;const Ue=Oe.layoutOptions;delete Oe.layoutOptions;const He=applyLayoutOptions(Ue,Be),We=new LineString(Be,He);transformGeometryWithOptions(We,!1,Te);const Cn=new Feature(We);return Cn.setProperties(Oe,!0),Cn}function readTrk(ke,e){const Te=e[0],Oe=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,ke,e);if(!Oe)return;const Be=Oe.flatCoordinates;delete Oe.flatCoordinates;const Ue=Oe.ends;delete Oe.ends;const He=Oe.layoutOptions;delete Oe.layoutOptions;const We=applyLayoutOptions(He,Be,Ue),Cn=new MultiLineString(Be,We,Ue);transformGeometryWithOptions(Cn,!1,Te);const An=new Feature(Cn);return An.setProperties(Oe,!0),An}function readWpt(ke,e){const Te=e[0],Oe=pushParseAndPop({},WPT_PARSERS,ke,e);if(!Oe)return;const Be={},Ue=appendCoordinate([],Be,ke,Oe),He=applyLayoutOptions(Be,Ue),We=new Point$1(Ue,He);transformGeometryWithOptions(We,!1,Te);const Cn=new Feature(We);return Cn.setProperties(Oe,!0),Cn}function writeLink(ke,e,Te){ke.setAttribute("href",e);const Be=Te[Te.length-1].properties,Ue=[Be.linkText,Be.linkType];pushSerializeAndPop({node:ke},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ue,Te,LINK_SEQUENCE)}function writeWptType(ke,e,Te){const Oe=Te[Te.length-1],Ue=Oe.node.namespaceURI,He=Oe.properties;switch(ke.setAttributeNS(null,"lat",String(e[1])),ke.setAttributeNS(null,"lon",String(e[0])),Oe.geometryLayout){case"XYZM":e[3]!==0&&(He.time=e[3]);case"XYZ":e[2]!==0&&(He.ele=e[2]);break;case"XYM":e[2]!==0&&(He.time=e[2]);break}const Cn=ke.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Ue]:WPT_TYPE_SEQUENCE[Ue],An=makeSequence(He,Cn);pushSerializeAndPop({node:ke,properties:He},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,Cn)}function writeRte(ke,e,Te){const Oe=Te[0],Be=e.getProperties(),Ue={node:ke};Ue.properties=Be;const He=e.getGeometry();if(He.getType()=="LineString"){const En=transformGeometryWithOptions(He,!0,Oe);Ue.geometryLayout=En.getLayout(),Be.rtept=En.getCoordinates()}const We=Te[Te.length-1].node,Cn=RTE_SEQUENCE[We.namespaceURI],An=makeSequence(Be,Cn);pushSerializeAndPop(Ue,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,Cn)}function writeTrk(ke,e,Te){const Oe=Te[0],Be=e.getProperties(),Ue={node:ke};Ue.properties=Be;const He=e.getGeometry();if(He.getType()=="MultiLineString"){const En=transformGeometryWithOptions(He,!0,Oe);Be.trkseg=En.getLineStrings()}const We=Te[Te.length-1].node,Cn=TRK_SEQUENCE[We.namespaceURI],An=makeSequence(Be,Cn);pushSerializeAndPop(Ue,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,Cn)}function writeTrkSeg(ke,e,Te){const Oe={node:ke};Oe.geometryLayout=e.getLayout(),Oe.properties={},pushSerializeAndPop(Oe,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),Te)}function writeWpt(ke,e,Te){const Oe=Te[0],Be=Te[Te.length-1];Be.properties=e.getProperties();const Ue=e.getGeometry();if(Ue.getType()=="Point"){const He=transformGeometryWithOptions(Ue,!0,Oe);Be.geometryLayout=He.getLayout(),writeWptType(ke,He.getCoordinates(),Te)}}var GPX=class Vf extends GPX$1{constructor(e){if(super(e),!(this instanceof Vf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var Te=this.options.readExtensions;this.options.readExtensions=function(Oe,Be){this.readExtensions(Oe,Be),Te.call(this,Oe,Be)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,Te){var Oe=super.readFeatures(e,Te);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Be=this;return Oe.forEach(function(Ue,He,We){Ue.setId(He+1);var Cn=Ue.getProperties().desc;Cn&&Ue.setProperties({description:Cn});var An=Ue.getStyleFunction();if(!An){var En=Styling.defineStyleFunctionByDefault(Be.options.defaultStyle);En&&Ue.setStyle(En)}}),Oe}writeFeatures(e,Te){if(e.forEach(function(Cn,An,En){var Sn=Cn.getProperties().description;Sn&&Cn.setProperties({desc:Sn}),Styling.definePropertiesFromStyle(Cn);var Tn=Cn.getGeometry().getType();if(Tn==="Polygon"){var Ln=Cn.clone();Ln.set("type",Tn),Ln.setGeometry(new LineString(Cn.getGeometry().getCoordinates())),e.push(Ln),En.splice(An,1)}else if(Tn==="MultiPolygon"){var Bn=Cn.clone();Bn.set("type",Tn),Bn.setGeometry(new MultiLineString(Cn.getGeometry().getCoordinates())),e.push(Bn),En.splice(An,1)}}),this.options.orderBy!==void 0){var Oe=this.options.orderBy;if(Oe){var Be=function(Cn,An){var En=Cn.get(Oe)||0,Sn=An.get(Oe)||0;return En.toString().localeCompare(Sn.toString(),void 0,{numeric:!0})};e.sort(Be)}}var Ue=super.writeFeaturesNode(e,Te);if(Ue===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Ue,this.options.extensions),this.processExtensions_(Ue,e,{extensions:this.writeExtensions_});var He=Parser$1.toString(Ue);if(!He)return null;var We=Parser$1.format(He);return We===""?null:We}readExtensions(e,Te){var Oe=Te;if(!Te){var Be=e.getProperties();for(const Cn in Be)if(Object.hasOwnProperty.call(Be,Cn)){const An=Be[Cn];if(An instanceof Node){Oe=An;break}}}if(!Oe){console.warn("node not found !");return}for(var Ue=0;Ue<Oe.childNodes.length;Ue++){var He=Oe.childNodes[Ue];He.nodeType===1&&e.set(He.nodeName,He.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var We=Styling.defineStyleFromProperties(e);We&&e.setStyle(We)}readRootExtensions(e){for(var Te={},Oe=this.source.childNodes[0],Be=Oe.childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];if(He.nodeName==="metadata")for(var We=He.childNodes,Cn=0;Cn<We.length;Cn++){var An=We[Cn];if(An.nodeName==="extensions")for(var En=An.childNodes,Sn=0;Sn<En.length;Sn++){var Tn=En[Sn];if(Tn.nodeName==="data"){var Ln=Tn.attributes[0];if(Ln&&Ln.nodeName==="name"&&Ln.nodeValue===e){Te=JSON.parse(Tn.textContent);break}}}}}return Te}writeRootExtensions_(e,Te,Oe){var Be=document.createElement("metadata"),Ue=document.createElement("extensions");function He(En,Sn){for(const ri in Sn)if(Object.hasOwnProperty.call(Sn,ri)){var Tn=Sn[ri]||"",Ln=document.createElement(ri);if(typeof Tn=="string"||typeof Tn=="number")Ln.innerHTML=Tn,En.appendChild(Ln);else if(Tn instanceof Array){Ln.setAttribute("type","array"),Ln.setAttribute("index",Tn.length);for(let oi=0;oi<Tn.length;oi++){var Bn=Tn[oi]||"",ei=document.createElement("value");if(typeof Bn=="string"||typeof Bn=="number")ei.innerHTML=Bn,Ln.appendChild(ei);else if(Bn instanceof Array){ei.setAttribute("type","array"),ei.setAttribute("index",Bn.length);for(let ai=0;ai<Bn.length;ai++){var ni=Bn[ai]||"",ti=document.createElement("value");(typeof ni=="string"||typeof ni=="number")&&(ti.innerHTML=ni,ei.appendChild(ti))}Ln.appendChild(ei)}else Bn instanceof Object&&Ln.appendChild(He(ei,Bn))}En.appendChild(Ln)}else Tn instanceof Object&&En.appendChild(He(Ln,Tn))}return En}if(Oe)He(Ue,Te);else for(const En in Te)if(Object.hasOwnProperty.call(Te,En)){const Sn=Te[En];var We=document.createElement("data");We.setAttribute("name",En);var Cn=document.createTextNode(JSON.stringify(Sn));We.appendChild(Cn),Ue.appendChild(We)}Be.appendChild(Ue);var An=e.firstChild;e.insertBefore(Be,An)}writeExtensions_(e,Te){var Oe=document.createElementNS(Te.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(Be=>{if(e.get(Be)){var Ue=document.createElementNS(Te.parentNode.namespaceURI,Be);Ue.innerHTML=e.get(Be),Oe.appendChild(Ue)}}),Te.appendChild(Oe)}processExtensions_(e,Te,Oe){for(var Be=-1,Ue=e.childNodes,He=0;He<Ue.length;He++){var We=Ue[He];switch(We.nodeName){case"wpt":case"rte":case"trk":Be++;var Cn=Te[Be],An=Cn.getStyle();if(An){var En=Oe.extensions;En&&typeof En=="function"&&En(Cn,We)}break;case"metadata":break;default:console.warn("nodename unknown :",We.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,Te){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,Te))}readFeatures(e,Te){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,Te))}readFeatureFromObject(e,Te){return abstract()}readFeaturesFromObject(e,Te){return abstract()}readGeometry(e,Te){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,Te))}readGeometryFromObject(e,Te){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,Te){return JSON.stringify(this.writeFeatureObject(e,Te))}writeFeatureObject(e,Te){return abstract()}writeFeatures(e,Te){return JSON.stringify(this.writeFeaturesObject(e,Te))}writeFeaturesObject(e,Te){return abstract()}writeGeometry(e,Te){return JSON.stringify(this.writeGeometryObject(e,Te))}writeGeometryObject(e,Te){return abstract()}}function getObject(ke){if(typeof ke=="string"){const e=JSON.parse(ke);return e||null}return ke!==null?ke:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,Te){let Oe=null;e.type==="Feature"?Oe=e:Oe={type:"Feature",geometry:e,properties:null};const Be=readGeometryInternal(Oe.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:Be,id:Oe.id,properties:Oe.properties},Te);const Ue=new Feature;return this.geometryName_?Ue.setGeometryName(this.geometryName_):this.extractGeometryName_&&Oe.geometry_name&&Ue.setGeometryName(Oe.geometry_name),Ue.setGeometry(createGeometry(Be,Te)),"id"in Oe&&Ue.setId(Oe.id),Oe.properties&&Ue.setProperties(Oe.properties,!0),Ue}readFeaturesFromObject(e,Te){const Oe=e;let Be=null;if(Oe.type==="FeatureCollection"){const Ue=e;Be=[];const He=Ue.features;for(let We=0,Cn=He.length;We<Cn;++We){const An=this.readFeatureFromObject(He[We],Te);An&&Be.push(An)}}else Be=[this.readFeatureFromObject(e,Te)];return Be.flat()}readGeometryFromObject(e,Te){return readGeometry(e,Te)}readProjectionFromObject(e){const Te=e.crs;let Oe;if(Te)if(Te.type=="name")Oe=get$3(Te.properties.name);else if(Te.type==="EPSG")Oe=get$3("EPSG:"+Te.properties.code);else throw new Error("Unknown SRS type");else Oe=this.dataProjection;return Oe}writeFeatureObject(e,Te){Te=this.adaptOptions(Te);const Oe={type:"Feature",geometry:null,properties:null},Be=e.getId();if(Be!==void 0&&(Oe.id=Be),!e.hasProperties())return Oe;const Ue=e.getProperties(),He=e.getGeometry();return He&&(Oe.geometry=writeGeometry(He,Te),delete Ue[e.getGeometryName()]),isEmpty$1(Ue)||(Oe.properties=Ue),Oe}writeFeaturesObject(e,Te){Te=this.adaptOptions(Te);const Oe=[];for(let Be=0,Ue=e.length;Be<Ue;++Be)Oe.push(this.writeFeatureObject(e[Be],Te));return{type:"FeatureCollection",features:Oe}}writeGeometryObject(e,Te){return writeGeometry(e,this.adaptOptions(Te))}};function readGeometryInternal(ke,e){if(!ke)return null;let Te;switch(ke.type){case"Point":{Te=readPointGeometry(ke);break}case"LineString":{Te=readLineStringGeometry(ke);break}case"Polygon":{Te=readPolygonGeometry(ke);break}case"MultiPoint":{Te=readMultiPointGeometry(ke);break}case"MultiLineString":{Te=readMultiLineStringGeometry(ke);break}case"MultiPolygon":{Te=readMultiPolygonGeometry(ke);break}case"GeometryCollection":{Te=readGeometryCollectionGeometry(ke);break}default:throw new Error("Unsupported GeoJSON type: "+ke.type)}return Te}function readGeometry(ke,e){const Te=readGeometryInternal(ke);return createGeometry(Te,e)}function readGeometryCollectionGeometry(ke,e){return ke.geometries.map(function(Oe){return readGeometryInternal(Oe)})}function readPointGeometry(ke){const e=ke.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(ke){var Oe;const e=ke.coordinates,Te=e.flat();return{type:"LineString",flatCoordinates:Te,ends:[Te.length],layout:getLayoutForStride(((Oe=e[0])==null?void 0:Oe.length)||2)}}function readMultiLineStringGeometry(ke){var Ue,He;const e=ke.coordinates,Te=((He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He.length)||2,Oe=[],Be=deflateCoordinatesArray(Oe,0,e,Te);return{type:"MultiLineString",flatCoordinates:Oe,ends:Be,layout:getLayoutForStride(Te)}}function readMultiPointGeometry(ke){var Te;const e=ke.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((Te=e[0])==null?void 0:Te.length)||2)}}function readMultiPolygonGeometry(ke){var Ue,He;const e=ke.coordinates,Te=[],Oe=((He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He[0].length)||2,Be=deflateMultiCoordinatesArray(Te,0,e,Oe);return{type:"MultiPolygon",flatCoordinates:Te,ends:Be,layout:getLayoutForStride(Oe)}}function readPolygonGeometry(ke){var Ue,He;const e=ke.coordinates,Te=[],Oe=(He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He.length,Be=deflateCoordinatesArray(Te,0,e,Oe);return{type:"Polygon",flatCoordinates:Te,ends:Be,layout:getLayoutForStride(Oe)}}function writeGeometry(ke,e){ke=transformGeometryWithOptions(ke,!0,e);const Te=ke.getType();let Oe;switch(Te){case"Point":{Oe=writePointGeometry(ke);break}case"LineString":{Oe=writeLineStringGeometry(ke);break}case"Polygon":{Oe=writePolygonGeometry(ke,e);break}case"MultiPoint":{Oe=writeMultiPointGeometry(ke);break}case"MultiLineString":{Oe=writeMultiLineStringGeometry(ke);break}case"MultiPolygon":{Oe=writeMultiPolygonGeometry(ke,e);break}case"GeometryCollection":{Oe=writeGeometryCollectionGeometry(ke,e);break}case"Circle":{Oe={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+Te)}return Oe}function writeGeometryCollectionGeometry(ke,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:ke.getGeometriesArray().map(function(Oe){return writeGeometry(Oe,e)})}}function writeLineStringGeometry(ke,e){return{type:"LineString",coordinates:ke.getCoordinates()}}function writeMultiLineStringGeometry(ke,e){return{type:"MultiLineString",coordinates:ke.getCoordinates()}}function writeMultiPointGeometry(ke,e){return{type:"MultiPoint",coordinates:ke.getCoordinates()}}function writeMultiPolygonGeometry(ke,e){let Te;return e&&(Te=e.rightHanded),{type:"MultiPolygon",coordinates:ke.getCoordinates(Te)}}function writePointGeometry(ke,e){return{type:"Point",coordinates:ke.getCoordinates()}}function writePolygonGeometry(ke,e){let Te;return e&&(Te=e.rightHanded),{type:"Polygon",coordinates:ke.getCoordinates(Te)}}var GeoJSON=class zf extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,Te){var Oe=super.readFeatures(e,Te);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),Oe.forEach(Be=>{var Ue=Be.getStyleFunction();if(Ue){var He=Ue.call(this,Be,0);He&&He.length!==0&&Be.setStyle(He[0])}else{var We=Styling.defineStyleFromProperties(Be);if(We)Be.setStyle(We);else{var Cn=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);Cn&&(Be.setStyle(Cn),Styling.definePropertiesFromStyle(Be))}}}),Oe}writeFeatures(e,Te){e.forEach(function(Be){Styling.definePropertiesFromStyle(Be)});var Oe=this.writeFeaturesObject(e,Te);return this.options.hasOwnProperty("extensions")&&Object.assign(Oe,this.options.extensions),JSON.stringify(Oe)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,Te,Oe,Be){var Ue=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,He=this.tileGrid,We=this.tileGrid.getTileCoordForCoordAndResolution(e,Te),Cn=function(oi,ai,ci){var Pi=[0,0,0],vi=createEmpty(),pi=oi[1],Mi=oi[2],Fi=ai.getTileCoordExtent(oi),fi=ci.getExtent();if(fi!=null&&ci.isGlobal()){var ui=Math.ceil(getWidth(fi)/getWidth(Fi));pi=pi%ui,Pi[0]=oi[0],Pi[1]=pi,Pi[2]=oi[2],Fi=ai.getTileCoordExtent(Pi,vi)}return intersects$1(Fi,fi)?[oi[0],pi,Mi]:null},An=He.getTileCoordExtent(We),En=Cn(We,He,Oe);if(!(He.getResolutions().length<=We[0])){var Sn=He.getResolution(We[0]),Tn=He.getMatrixIds()[We[0]],Ln={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:En[1],TILEROW:En[2],TILEMATRIX:Tn,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(Ln,Be);var Bn=Math.floor((e[0]-An[0])/(Sn/Ue)),ei=Math.floor((An[3]-e[1])/(Sn/Ue)),ni=He.getTileSize(We[0]);Bn=Math.min(Bn,(ni[0]|ni)-1),ei=Math.max(ei,0),Ln.I=Bn,Ln.J=ei;var ti=this.urls[0],ri=Gp.Helper.normalyzeUrl(ti,Ln);return ri}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(ke,e){var Te={};switch(e){case"EPSG:2154":Te={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:Te={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var Oe=ke*28e-5;for(var Be in Te)if(Te.hasOwnProperty(Be)&&Te[Be]<=Oe)return Be=parseInt(Be,10),Be;return 0},getAttributions:function(ke){var e=ke.zoom,Te=[];if(ke.originators!=null&&ke.visibility)for(var Oe,Be=0,Ue=ke.originators.length;Be<Ue;Be++){Oe=!0;for(var He=ke.originators[Be],We=ke.originators[Be].constraints||[],Cn=0,An=We.length;Cn<An;Cn++){var En=We[Cn];Oe=!0;var Sn=this.getZoomLevelFromScaleDenominator(En.maxScaleDenominator,ke.crs),Tn=this.getZoomLevelFromScaleDenominator(En.minScaleDenominator,ke.crs)||21;Sn&&Sn>e&&(Oe=!1),Oe&&Tn&&Tn<e&&(Oe=!1);var Ln=En.bbox;if(Oe&&Ln){Oe=!1;var Bn=ke.extent;if(Bn){var ei=[Ln.top,Ln.left,Ln.bottom,Ln.right];if(this.intersects(Bn,ei)){Oe=!0;break}}}}if(Oe){var ni=He.logo,ti=He.url,ri=He.name?He.name:"",oi=He.attribution,ai=document.createElement("div");ai.className="gp-control-attribution";var ci=null;ci=document.createElement("a"),ci.className="gp-control-attribution-link",ci.target="_blank",ai.appendChild(ci),ti&&(ci.href=ti);var Pi=!!ni,vi=null;Pi?(vi=document.createElement("img"),ci?(vi.className="gp-control-attribution-image",ci.appendChild(vi)):(vi.className="",ai.appendChild(vi)),vi.src=ni,vi.title=oi||ri,vi.style.height="30px",vi.style.width="30px"):ri?ci.textContent=ri:oi?ci.textContent=oi:ti?ci.textContent=ti:ci.textContent="",Te.push(ai.innerHTML+" ")}}return Te},intersects:function(ke,e){var Te=ke[1]<=e[3]&&e[1]<=ke[3],Oe=ke[2]<=e[0]&&e[2]<=ke[0];return Te&&Oe}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var ke=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return ke.Gp&&ke.Gp.Config&&ke.Gp.Config.layers&&Object.keys(ke.Gp.Config.layers).length!==0?(this.configuration=ke.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,Oe=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WMTS");if(!Ue)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMTS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var An={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,He),We,!1),version:Oe.version,style:Oe.styles,format:Oe.format,projection:Oe.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(Oe.minScale),layer:e.layer,matrixSet:Oe.TMSLink,tileGrid:new WMTSTileGrid({resolutions:Oe.nativeResolutions,matrixIds:Oe.matrixIds,origin:[Object.values(Oe.tileMatrices)[0].topLeftCorner.x,Object.values(Oe.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(An,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(An),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._description=e.description||Oe.description,this._title=e.title||Oe.title,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,Oe=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WMS");if(!Ue)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var An={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,He),We,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:Oe.version,STYLES:Oe.styles,FORMAT:Oe.format},crossOrigin:"anonymous"};return Helper.mergeParams(An,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(An),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,Oe=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WFS");if(!Ue)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],Oe=Config.configuration.getLayerParams(e.layer,"WFS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var An=(Sn,Tn,Ln,Bn)=>{const ei=new XMLHttpRequest;ei.open("GET",Tn);const ni=function(){Sn.removeLoadedExtent(extent),Bn()};ei.onerror=ni,ei.onload=function(){if(ei.status==200){var ti=JSON.parse(ei.responseText);const ri=Sn.getFormat().readFeatures(ti);if(Sn.addFeatures(ri),Ln(ri),ti.links)for(let oi=0;oi<ti.links.length;oi++){const ai=ti.links[oi];ai.rel==="next"&&An(Sn,ai.href,Ln,Bn)}}else ni()},ei.send()},En={format:new GeoJSON$1,loader:function(Sn,Tn,Ln,Bn,ei){var ni=this;const ti=e.maxFeatures,ri=e.layer,oi=Ln.getCode(),ai=Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,He),We,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+ri+"&outputFormat=application/json&srsname="+oi+"&bbox="+Sn.join(",")+","+oi+"&maxFeatures="+ti+"&count="+ti+"&startIndex=0";An(ni,ai,Bn,ei)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(En,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(En),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);function asImageLike(ke){return ke instanceof Image||ke instanceof HTMLCanvasElement||ke instanceof HTMLVideoElement||ke instanceof ImageBitmap?ke:null}const disposedError=new Error("disposed"),defaultSize=[256,256];class DataTile extends Tile{constructor(e){const Te=TileState.IDLE;super(e.tileCoord,Te,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(Te){e.data_=Te,e.state=TileState.LOADED,e.changed()}).catch(function(Te){e.error_=Te,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let Te=this.oldest_;for(;Te;)e(Te.value_,Te.key_,this),Te=Te.newer}get(e,Te){const Oe=this.entries_[e];return assert(Oe!==void 0,"Tried to get a value for a key that does not exist in the cache"),Oe===this.newest_||(Oe===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(Oe.newer.older=Oe.older,Oe.older.newer=Oe.newer),Oe.newer=null,Oe.older=this.newest_,this.newest_.newer=Oe,this.newest_=Oe),Oe.value_}remove(e){const Te=this.entries_[e];return assert(Te!==void 0,"Tried to get a value for a key that does not exist in the cache"),Te===this.newest_?(this.newest_=Te.older,this.newest_&&(this.newest_.newer=null)):Te===this.oldest_?(this.oldest_=Te.newer,this.oldest_&&(this.oldest_.older=null)):(Te.newer.older=Te.older,Te.older.newer=Te.newer),delete this.entries_[e],--this.count_,Te.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let Te=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[Te++]=Oe.key_;return e}getValues(){const e=new Array(this.count_);let Te=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[Te++]=Oe.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var Te;return(Te=this.entries_[e])==null?void 0:Te.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,Te){this.get(e),this.entries_[e].value_=Te}set(e,Te){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const Oe={key_:e,newer:null,older:this.newest_,value_:Te};this.newest_?this.newest_.newer=Oe:this.oldest_=Oe,this.newest_=Oe,this.entries_[e]=Oe,++this.count_}setSize(e){this.highWaterMark=e}}function getCacheKey(ke,e,Te,Oe){return`${ke},${getKeyZXY(e,Te,Oe)}`}function addTileToLookup(ke,e,Te){if(!(Te in ke))return ke[Te]=new Set([e]),!0;const Oe=ke[Te],Be=Oe.has(e);return Be||Oe.add(e),!Be}function removeTileFromLookup(ke,e,Te){const Oe=ke[Te];return Oe?Oe.delete(e):!1}function getRenderExtent(ke,e){const Te=ke.layerStatesArray[ke.layerIndex];Te.extent&&(e=getIntersection(e,fromUserExtent(Te.extent,ke.viewState.projection)));const Oe=Te.layer.getRenderSource();if(!Oe.getWrapX()){const Be=Oe.getTileGridForProjection(ke.viewState.projection).getExtent();Be&&(e=getIntersection(e,Be))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,Te){super(e),Te=Te||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const Oe=Te.cacheSize!==void 0?Te.cacheSize:512;this.tileCache_=new LRUCache(Oe),this.maxStaleKeys=Oe*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,Te,Oe,Be){const Ue=this.tileCache_,We=this.getLayer().getSource(),Cn=getCacheKey(We.getKey(),e,Te,Oe);let An;if(Ue.containsKey(Cn))An=Ue.get(Cn);else{if(An=We.getTile(e,Te,Oe,Be.pixelRatio,Be.viewState.projection),!An)return null;Ue.set(Cn,An)}return An}getTile(e,Te,Oe,Be){const Ue=this.getOrCreateTile(e,Te,Oe,Be);return Ue||null}getData(e){const Te=this.frameState;if(!Te)return null;const Oe=this.getLayer(),Be=apply(Te.pixelToCoordinateTransform,e.slice()),Ue=Oe.getExtent();if(Ue&&!containsCoordinate(Ue,Be))return null;const He=Te.viewState,We=Oe.getRenderSource(),Cn=We.getTileGridForProjection(He.projection),An=We.getTilePixelRatio(Te.pixelRatio);for(let En=Cn.getZForResolution(He.resolution);En>=Cn.getMinZoom();--En){const Sn=Cn.getTileCoordForCoordAndZ(Be,En),Tn=this.getTile(En,Sn[1],Sn[2],Te);if(!Tn||Tn.getState()!==TileState.LOADED)continue;const Ln=Cn.getOrigin(En),Bn=toSize(Cn.getTileSize(En)),ei=Cn.getResolution(En);let ni;if(Tn instanceof ImageTile||Tn instanceof ReprojTile)ni=Tn.getImage();else if(Tn instanceof DataTile){if(ni=asImageLike(Tn.getData()),!ni)continue}else continue;const ti=Math.floor(An*((Be[0]-Ln[0])/ei-Sn[1]*Bn[0])),ri=Math.floor(An*((Ln[1]-Be[1])/ei-Sn[2]*Bn[1])),oi=Math.round(An*We.getGutterForProjection(He.projection));return this.getImageData(ni,ti+oi,ri+oi)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const Te=this.getLayer().getSource();if(!Te)return!1;const Oe=Te.getRevision();return this.renderedRevision_?this.renderedRevision_!==Oe&&(this.renderedRevision_=Oe,this.renderedSourceKey_===Te.getKey()&&this.tileCache_.clear()):this.renderedRevision_=Oe,!0}enqueueTiles(e,Te,Oe,Be,Ue){const He=e.viewState,We=this.getLayer(),Cn=We.getRenderSource(),An=Cn.getTileGridForProjection(He.projection),En=getUid(Cn);En in e.wantedTiles||(e.wantedTiles[En]={});const Sn=e.wantedTiles[En],Tn=We.getMapInternal(),Ln=Math.max(Oe-Ue,An.getMinZoom(),An.getZForResolution(Math.min(We.getMaxResolution(),Tn?Tn.getView().getResolutionForZoom(Math.max(We.getMinZoom(),0)):An.getResolution(0)),Cn.zDirection)),Bn=He.rotation,ei=Bn?getRotatedViewport(He.center,He.resolution,Bn,e.size):void 0;for(let ni=Oe;ni>=Ln;--ni){const ti=An.getTileRangeForExtentAndZ(Te,ni,this.tempTileRange_),ri=An.getResolution(ni);for(let oi=ti.minX;oi<=ti.maxX;++oi)for(let ai=ti.minY;ai<=ti.maxY;++ai){if(Bn&&!An.tileCoordIntersectsViewport([ni,oi,ai],ei))continue;const ci=this.getTile(ni,oi,ai,e);if(!ci||!addTileToLookup(Be,ci,ni))continue;const vi=ci.getKey();if(Sn[vi]=!0,ci.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(vi)){const pi=createOrUpdate(ni,oi,ai,this.tempTileCoord_);e.tileQueue.enqueue([ci,En,An.getTileCoordCenter(pi),ri])}}}}findStaleTile_(e,Te){const Oe=this.tileCache_,Be=e[0],Ue=e[1],He=e[2],We=this.getStaleKeys();for(let Cn=0;Cn<We.length;++Cn){const An=getCacheKey(We[Cn],Be,Ue,He);if(Oe.containsKey(An)){const En=Oe.peek(An);if(En.getState()===TileState.LOADED)return En.endTransition(getUid(this)),addTileToLookup(Te,En,Be),!0}}return!1}findAltTiles_(e,Te,Oe,Be){const Ue=e.getTileRangeForTileCoordAndZ(Te,Oe,this.tempTileRange_);if(!Ue)return!1;let He=!0;const We=this.tileCache_,An=this.getLayer().getRenderSource().getKey();for(let En=Ue.minX;En<=Ue.maxX;++En)for(let Sn=Ue.minY;Sn<=Ue.maxY;++Sn){const Tn=getCacheKey(An,Oe,En,Sn);let Ln=!1;if(We.containsKey(Tn)){const Bn=We.peek(Tn);Bn.getState()===TileState.LOADED&&(addTileToLookup(Be,Bn,Oe),Ln=!0)}Ln||(He=!1)}return He}renderFrame(e,Te){let Oe=!0;this.renderComplete=!0;const Be=e.layerStatesArray[e.layerIndex],Ue=e.viewState,He=Ue.projection,We=Ue.resolution,Cn=Ue.center,An=e.pixelRatio,En=this.getLayer(),Sn=En.getSource(),Tn=Sn.getTileGridForProjection(He),Ln=Tn.getZForResolution(We,Sn.zDirection),Bn=Tn.getResolution(Ln),ei=Sn.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==ei&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=ei):this.renderedSourceKey_=ei;let ni=e.extent;const ti=Sn.getTilePixelRatio(An);this.prepareContainer(e,Te);const ri=this.context.canvas.width,oi=this.context.canvas.height,ai=Be.extent&&fromUserExtent(Be.extent);ai&&(ni=getIntersection(ni,fromUserExtent(Be.extent)));const ci=Bn*ri/2/ti,Pi=Bn*oi/2/ti,vi=[Cn[0]-ci,Cn[1]-Pi,Cn[0]+ci,Cn[1]+Pi],pi={};this.renderedTiles.length=0;const Mi=En.getPreload();if(e.nextExtent){const pr=Tn.getZForResolution(Ue.nextResolution,Sn.zDirection),rr=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,rr,pr,pi,Mi)}const Fi=getRenderExtent(e,ni);if(this.enqueueTiles(e,Fi,Ln,pi,0),Mi>0&&setTimeout(()=>{this.enqueueTiles(e,Fi,Ln-1,pi,Mi-1)},0),!(Ln in pi))return this.container;const fi=getUid(this),ui=e.time;for(const pr of pi[Ln]){const rr=pr.getState();if(rr===TileState.EMPTY)continue;const br=pr.tileCoord;if(rr===TileState.LOADED&&pr.getAlpha(fi,ui)===1){pr.endTransition(fi);continue}if(rr!==TileState.IDLE&&(Oe=!1),rr!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(br,pi)){removeTileFromLookup(pi,pr,Ln),e.animate=!0;continue}if(this.findAltTiles_(Tn,br,Ln+1,pi))continue;const sr=Tn.getMinZoom();for(let dr=Ln-1;dr>=sr&&!this.findAltTiles_(Tn,br,dr,pi);--dr);}const Oi=Bn/We*An/ti,Ni=this.getRenderContext(e);compose(this.tempTransform,ri/2,oi/2,Oi,Oi,0,-ri/2,-oi/2),Be.extent&&this.clipUnrotated(Ni,e,ai),Sn.getInterpolate()||(Ni.imageSmoothingEnabled=!1),this.preRender(Ni,e);const nr=Object.keys(pi).map(Number);nr.sort(ascending);let er;const cr=[],ar=[];for(let pr=nr.length-1;pr>=0;--pr){const rr=nr[pr],br=Sn.getTilePixelSize(rr,An,He),ur=Tn.getResolution(rr)/Bn,sr=br[0]*ur*Oi,dr=br[1]*ur*Oi,vr=Tn.getTileCoordForCoordAndZ(getTopLeft(vi),rr),hr=Tn.getTileCoordExtent(vr),mr=apply(this.tempTransform,[ti*(hr[0]-vi[0])/Bn,ti*(vi[3]-hr[3])/Bn]),_r=ti*Sn.getGutterForProjection(He);for(const Ar of pi[rr]){if(Ar.getState()!==TileState.LOADED)continue;const Vr=Ar.tileCoord,Gr=vr[1]-Vr[1],Hi=Math.round(mr[0]-(Gr-1)*sr),gr=vr[2]-Vr[2],lr=Math.round(mr[1]-(gr-1)*dr),Ki=Math.round(mr[0]-Gr*sr),Dr=Math.round(mr[1]-gr*dr),Nr=Hi-Ki,Ir=lr-Dr,kr=nr.length===1;let Lr=!1;er=[Ki,Dr,Ki+Nr,Dr,Ki+Nr,Dr+Ir,Ki,Dr+Ir];for(let Pr=0,Er=cr.length;Pr<Er;++Pr)if(!kr&&rr<ar[Pr]){const Sr=cr[Pr];intersects$1([Ki,Dr,Ki+Nr,Dr+Ir],[Sr[0],Sr[3],Sr[4],Sr[7]])&&(Lr||(Ni.save(),Lr=!0),Ni.beginPath(),Ni.moveTo(er[0],er[1]),Ni.lineTo(er[2],er[3]),Ni.lineTo(er[4],er[5]),Ni.lineTo(er[6],er[7]),Ni.moveTo(Sr[6],Sr[7]),Ni.lineTo(Sr[4],Sr[5]),Ni.lineTo(Sr[2],Sr[3]),Ni.lineTo(Sr[0],Sr[1]),Ni.clip())}cr.push(er),ar.push(rr),this.drawTile(Ar,e,Ki,Dr,Nr,Ir,_r,kr),Lr&&Ni.restore(),this.renderedTiles.unshift(Ar),this.updateUsedTiles(e.usedTiles,Sn,Ar)}}if(this.renderedResolution=Bn,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,vi),this.renderedExtent_=vi,this.renderedPixelRatio=An,this.postRender(this.context,e),Be.extent&&Ni.restore(),Ni.imageSmoothingEnabled=!0,this.renderComplete){const pr=(rr,br)=>{const Li=getUid(Sn),ur=br.wantedTiles[Li],sr=ur?Object.keys(ur).length:0;this.updateCacheSize(sr),this.tileCache_.expireCache()};e.postRenderFunctions.push(pr)}return!this.renderComplete&&!Oe&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,Te,Oe,Be,Ue,He,We,Cn){let An;if(e instanceof DataTile){if(An=asImageLike(e.getData()),!An)throw new Error("Rendering array data is not yet supported")}else An=this.getTileImage(e);if(!An)return;const En=this.getRenderContext(Te),Sn=getUid(this),Tn=Te.layerStatesArray[Te.layerIndex],Ln=Tn.opacity*(Cn?e.getAlpha(Sn,Te.time):1),Bn=Ln!==En.globalAlpha;Bn&&(En.save(),En.globalAlpha=Ln),En.drawImage(An,We,We,An.width-2*We,An.height-2*We,Oe,Be,Ue,He),Bn&&En.restore(),Ln!==Tn.opacity?Te.animate=!0:Cn&&e.endTransition(Sn)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,Te,Oe){const Be=getUid(Te);Be in e||(e[Be]={}),e[Be][Oe.getKey()]=!0}}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const Te=Object.assign({},e),Oe=e.cacheSize;delete e.cacheSize,delete Te.preload,delete Te.useInterimTilesOnError,super(Te),this.on,this.once,this.un,this.cacheSize_=Oe,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMTS");if(Te=Config.configuration.getLayerConf(Oe),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Be}),He={source:Ue};if(Ue.getLayer()!==void 0&&Te.globalConstrainWFSts&&Te.globalConstraints.projection){var We;typeof Te.globalConstraints.projection=="string"&&(We=get$3(Te.globalConstraints.projection)),We&&We.getUnits()&&(We.getUnits()==="m"?(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5,He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5):We.getUnits()==="degrees"&&(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WMTS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMS");if(Te=Config.configuration.getLayerConf(Oe),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Be}),He={source:Ue};if(Ue.getParams().LAYERS!==void 0&&Be&&Be.projection){var We=[Te.globalConstraints.extent.left,Te.globalConstraints.extent.bottom,Te.globalConstraints.extent.right,Te.globalConstraints.extent.top];He.extent=transformExtent(We,"EPSG:4326",Be.projection);var Cn;typeof Be.projection=="string"?Cn=get$3(Be.projection):typeof Be.projection=="object"&&Be.projection.getCode()&&(Cn=get$3(Be.projection.getCode())),Cn&&Cn.getUnits()&&(Cn.getUnits()==="m"?(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5,He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5):Cn.getUnits()==="degrees"&&(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WMS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WFS");if(Te=Config.configuration.getLayerConf(Oe),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:Be||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),He={source:Ue};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WFS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,Te){super(e,Te),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create(),this.tileClipContexts_=null}drawTile(e,Te,Oe,Be,Ue,He,We,Cn){this.updateExecutorGroup_(e,Te.pixelRatio,Te.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,Te),super.drawTile(e,Te,Oe,Be,Ue,He,We,Cn)}getTile(e,Te,Oe,Be){const Ue=this.getOrCreateTile(e,Te,Oe,Be);if(!Ue)return null;const We=Be.viewState.resolution,Cn=Be.viewHints;return(!(Cn[ViewHint.ANIMATING]||Cn[ViewHint.INTERACTING])||!Ue.wantedResolution)&&(Ue.wantedResolution=We),Ue}prepareFrame(e){const Te=this.getLayer().getRevision();return this.renderedLayerRevision_!==Te&&(this.renderedLayerRevision_=Te,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,Te,Oe){const Be=this.getLayer(),Ue=Be.getRevision(),He=Be.getRenderOrder()||null,We=e.wantedResolution,Cn=e.getReplayState(Be);if(!Cn.dirty&&Cn.renderedResolution===We&&Cn.renderedRevision==Ue&&Cn.renderedRenderOrder==He)return;const An=Be.getSource(),En=!!Be.getDeclutter(),Sn=An.getTileGrid(),Ln=An.getTileGridForProjection(Oe).getTileCoordExtent(e.wrappedTileCoord),Bn=An.getSourceTiles(Te,Oe,e),ei=getUid(Be);delete e.hitDetectionImageData[ei],e.executorGroups[ei]=[],Cn.dirty=!1;for(let ni=0,ti=Bn.length;ni<ti;++ni){const ri=Bn[ni];if(ri.getState()!=TileState.LOADED)continue;const oi=ri.tileCoord,ai=Sn.getTileCoordExtent(oi),ci=getIntersection(Ln,ai),Pi=buffer(ci,Be.getRenderBuffer()*We,this.tempExtent),vi=equals$1(ai,ci)?null:Pi,pi=new BuilderGroup(0,ci,We,Te),Mi=getSquaredTolerance(We,Te),Fi=function(nr,er){let cr;const ar=nr.getStyleFunction()||Be.getStyleFunction();if(ar&&(cr=ar(nr,We)),cr){const pr=this.renderFeature(nr,Mi,cr,pi,En,er);Cn.dirty=Cn.dirty||pr}},fi=ri.getFeatures();He&&He!==Cn.renderedRenderOrder&&fi.sort(He);for(let nr=0,er=fi.length;nr<er;++nr){const cr=fi[nr];(!vi||intersects$1(vi,cr.getGeometry().getExtent()))&&Fi.call(this,cr,nr)}const ui=pi.finish(),Oi=Be.getRenderMode()!=="vector"&&En&&Bn.length===1?null:ci,Ni=new ExecutorGroup(Oi,We,Te,An.getOverlaps(),ui,Be.getRenderBuffer(),!0);e.executorGroups[ei].push(Ni)}Cn.renderedRevision=Ue,Cn.renderedRenderOrder=He,Cn.renderedResolution=We}forEachFeatureAtCoordinate(e,Te,Oe,Be,Ue){var oi,ai;const He=Te.viewState.resolution,We=Te.viewState.rotation;Oe=Oe??0;const Cn=this.getLayer(),En=Cn.getSource().getTileGridForProjection(Te.viewState.projection),Sn=boundingExtent([e]);buffer(Sn,He*Oe,Sn);const Tn={},Ln=function(ci,Pi,vi){let pi=ci.getId();pi===void 0&&(pi=getUid(ci));const Mi=Tn[pi];if(Mi){if(Mi!==!0&&vi<Mi.distanceSq){if(vi===0)return Tn[pi]=!0,Ue.splice(Ue.lastIndexOf(Mi),1),Be(ci,Cn,Pi);Mi.geometry=Pi,Mi.distanceSq=vi}}else{if(vi===0)return Tn[pi]=!0,Be(ci,Cn,Pi);Ue.push(Tn[pi]={feature:ci,layer:Cn,geometry:Pi,distanceSq:vi,callback:Be})}},Bn=this.renderedTiles,ei=getUid(Cn),ni=Cn.getDeclutter(),ti=ni?(ai=(oi=Te.declutter)==null?void 0:oi[ni])==null?void 0:ai.all().map(ci=>ci.value):null;let ri;e:for(let ci=0,Pi=Bn.length;ci<Pi;++ci){const vi=Bn[ci],pi=En.getTileCoordExtent(vi.wrappedTileCoord);if(!intersects$1(pi,Sn))continue;const Mi=vi.executorGroups[ei];for(let Fi=0,fi=Mi.length;Fi<fi;++Fi)if(ri=Mi[Fi].forEachFeatureAtCoordinate(e,He,We,Oe,Ln,ti),ri)break e}return ri}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((Te,Oe)=>{const Be=this.getLayer(),Ue=Be.getSource(),He=this.renderedProjection,We=He.getExtent(),Cn=this.renderedResolution,An=Ue.getTileGridForProjection(He),En=apply(this.renderedPixelToCoordinateTransform_,e.slice()),Sn=An.getTileCoordForCoordAndResolution(En,Cn).toString(),Tn=this.renderedTiles.find(oi=>oi.tileCoord.toString()===Sn&&oi.getState()===TileState.LOADED);if(!Tn||Tn.loadingSourceTiles>0){Te([]);return}Ue.getWrapX()&&He.canWrapX()&&!containsExtent(We,An.getTileCoordExtent(Tn.tileCoord))&&wrapX$1(En,He);const Ln=getUid(Be),Bn=An.getTileCoordExtent(Tn.wrappedTileCoord),ei=getTopLeft(Bn),ni=[(En[0]-ei[0])/Cn,(ei[1]-En[1])/Cn],ti=Tn.getSourceTiles().reduce((oi,ai)=>oi.concat(ai.getFeatures()),[]);let ri=Tn.hitDetectionImageData[Ln];if(!ri){const oi=toSize(An.getTileSize(An.getZForResolution(Cn,Ue.zDirection))),ai=this.renderedRotation_,ci=[this.getRenderTransform(An.getTileCoordCenter(Tn.wrappedTileCoord),Cn,0,HIT_DETECT_RESOLUTION,oi[0]*HIT_DETECT_RESOLUTION,oi[1]*HIT_DETECT_RESOLUTION,0)];ri=createHitDetectionImageData(oi,ci,ti,Be.getStyleFunction(),An.getTileCoordExtent(Tn.wrappedTileCoord),Tn.getReplayState(Be).renderedResolution,ai),Tn.hitDetectionImageData[Ln]=ri}Te(hitDetect(ni,ti,ri))})}getFeaturesInExtent(e){const Te=[],Oe=this.getTileCache();if(Oe.getCount()===0)return Te;const Ue=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),He=Ue.getZForResolution(this.renderedResolution),We={};return Oe.forEach(Cn=>{if(Cn.tileCoord[0]!==He||Cn.getState()!==TileState.LOADED)return;const An=Cn.getSourceTiles();for(let En=0,Sn=An.length;En<Sn;++En){const Tn=An[En],Ln=Tn.getKey();if(Ln in We)continue;We[Ln]=!0;const Bn=Tn.tileCoord;if(intersects$1(e,Ue.getTileCoordExtent(Bn))){const ei=Tn.getFeatures();if(ei)for(let ni=0,ti=ei.length;ni<ti;++ni){const ri=ei[ni],oi=ri.getGeometry();intersects$1(e,oi.getExtent())&&Te.push(ri)}}}}),Te}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,Te){var Tn;const Oe=this.context,Be=Oe.globalAlpha;Oe.globalAlpha=Te.opacity;const Ue=e.viewHints,He=!(Ue[ViewHint.ANIMATING]||Ue[ViewHint.INTERACTING]),We=[this.context.canvas.width,this.context.canvas.height],Cn=this.getLayer().getDeclutter(),An=Cn?(Tn=e.declutter)==null?void 0:Tn[Cn]:void 0,En=getUid(this.getLayer()),Sn=this.renderedTiles;for(let Ln=0,Bn=Sn.length;Ln<Bn;++Ln){const ei=Sn[Ln],ni=ei.executorGroups[En];if(ni)for(let ti=ni.length-1;ti>=0;--ti)ni[ti].execute(this.context,We,this.getTileRenderTransform(ei,e),e.viewState.rotation,He,DECLUTTER,An)}Oe.globalAlpha=Be}renderDeferredInternal(e){const Te=this.renderedTiles,Oe=getUid(this.getLayer()),Be=Te.reduce((Cn,An,En)=>(An.executorGroups[Oe].forEach(Sn=>Cn.push({executorGroup:Sn,index:En})),Cn),[]),Ue=Be.map(({executorGroup:Cn})=>Cn.getDeferredZIndexContexts()),He={};for(let Cn=0,An=Be.length;Cn<An;++Cn){const En=Be[Cn].executorGroup.getDeferredZIndexContexts();for(const Sn in En)He[Sn]=!0}Object.keys(He).map(Number).sort(ascending).forEach(Cn=>{Ue.forEach((An,En)=>{An[Cn]&&(An[Cn].forEach(Sn=>{const{executorGroup:Tn,index:Ln}=Be[En],Bn=Tn.getRenderedContext(),ei=Bn.globalAlpha;Bn.globalAlpha=this.renderedOpacity_;const ni=this.tileClipContexts_[Ln];ni&&ni.draw(Bn),Sn.draw(Bn),ni&&Bn.restore(),Bn.globalAlpha=ei,Sn.clear()}),An[Cn].length=0)})})}getTileRenderTransform(e,Te){const Oe=Te.pixelRatio,Be=Te.viewState,Ue=Be.center,He=Be.resolution,We=Be.rotation,Cn=Te.size,An=Math.round(Cn[0]*Oe),En=Math.round(Cn[1]*Oe),Tn=this.getLayer().getSource().getTileGridForProjection(Te.viewState.projection),Ln=e.tileCoord,Bn=Tn.getTileCoordExtent(e.wrappedTileCoord),ei=Tn.getTileCoordExtent(Ln,this.tempExtent)[0]-Bn[0];return multiply(scale(this.inversePixelTransform.slice(),1/Oe,1/Oe),this.getRenderTransform(Ue,He,We,Oe,An,En,ei))}postRender(e,Te){var ci;const Oe=Te.viewHints,Be=!(Oe[ViewHint.ANIMATING]||Oe[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=Te.pixelToCoordinateTransform.slice(),this.renderedRotation_=Te.viewState.rotation,this.renderedOpacity_=Te.layerStatesArray[Te.layerIndex].opacity;const Ue=this.getLayer(),He=Ue.getRenderMode(),We=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const Cn=Ue.getDeclutter(),An=Cn?VECTOR_REPLAYS[He].filter(Pi=>!DECLUTTER.includes(Pi)):VECTOR_REPLAYS[He],En=Te.viewState,Sn=En.rotation,Tn=Ue.getSource(),Bn=Tn.getTileGridForProjection(En.projection).getZForResolution(En.resolution,Tn.zDirection),ei=this.renderedTiles,ni=[],ti=[],ri=[],oi=getUid(Ue);let ai=!0;for(let Pi=ei.length-1;Pi>=0;--Pi){const vi=ei[Pi];ai=ai&&!vi.getReplayState(Ue).dirty;const pi=vi.executorGroups[oi].filter(nr=>nr.hasExecutors(An));if(pi.length===0)continue;const Mi=this.getTileRenderTransform(vi,Te),Fi=vi.tileCoord[0];let fi=!1;const ui=pi[0].getClipCoords(Mi);let Oi=e,Ni;if(ui){Ni=new ZIndexContext,Oi=Ni.getContext();for(let nr=0,er=ni.length;nr<er;++nr)if(Bn!==Fi&&Fi<ti[nr]){const cr=ni[nr];intersects$1([ui[0],ui[3],ui[4],ui[7]],[cr[0],cr[3],cr[4],cr[7]])&&(fi||(Oi.save(),fi=!0),Oi.beginPath(),Oi.moveTo(ui[0],ui[1]),Oi.lineTo(ui[2],ui[3]),Oi.lineTo(ui[4],ui[5]),Oi.lineTo(ui[6],ui[7]),Oi.moveTo(cr[6],cr[7]),Oi.lineTo(cr[4],cr[5]),Oi.lineTo(cr[2],cr[3]),Oi.lineTo(cr[0],cr[1]),Oi.clip())}ni.push(ui),ti.push(Fi)}for(let nr=0,er=pi.length;nr<er;++nr)pi[nr].execute(e,[e.canvas.width,e.canvas.height],Mi,Sn,Be,An,(ci=Te.declutter)==null?void 0:ci[Cn]);fi&&(Oi===e?Oi.restore():ri[Pi]=Ni)}e.globalAlpha=We,this.ready=ai,this.tileClipContexts_=ri,Te.declutter||this.renderDeferredInternal(Te),super.postRender(e,Te)}renderFeature(e,Te,Oe,Be,Ue,He){if(!Oe)return!1;let We=!1;if(Array.isArray(Oe))for(let Cn=0,An=Oe.length;Cn<An;++Cn)We=renderFeature$1(Be,e,Oe[Cn],Te,this.boundHandleStyleImageChange_,void 0,Ue,He)||We;else We=renderFeature$1(Be,e,Oe,Te,this.boundHandleStyleImageChange_,void 0,Ue,He);return We}tileImageNeedsRender_(e){const Te=this.getLayer();if(Te.getRenderMode()==="vector")return!1;const Oe=e.getReplayState(Te),Be=Te.getRevision(),Ue=e.wantedResolution;return Oe.renderedTileResolution!==Ue||Oe.renderedTileRevision!==Be}renderTileImage_(e,Te){const Oe=this.getLayer(),Be=e.getReplayState(Oe),Ue=Oe.getRevision(),He=e.executorGroups[getUid(Oe)];Be.renderedTileRevision=Ue;const We=e.wrappedTileCoord,Cn=We[0],An=Oe.getSource();let En=Te.pixelRatio;const Tn=Te.viewState.projection,Ln=An.getTileGridForProjection(Tn),Bn=Ln.getResolution(e.tileCoord[0]),ei=Te.pixelRatio/e.wantedResolution*Bn,ni=Ln.getResolution(Cn),ti=e.getContext();En=Math.round(Math.max(En,ei/En));const ri=An.getTilePixelSize(Cn,En,Tn);ti.canvas.width=ri[0],ti.canvas.height=ri[1];const oi=En/ei;if(oi!==1){const vi=reset(this.tmpTransform_);scale(vi,oi,oi),ti.setTransform.apply(ti,vi)}const ai=Ln.getTileCoordExtent(We,this.tempExtent),ci=ei/ni,Pi=reset(this.tmpTransform_);scale(Pi,ci,-ci),translate(Pi,-ai[0],-ai[3]);for(let vi=0,pi=He.length;vi<pi;++vi)He[vi].execute(ti,[ti.canvas.width*oi,ti.canvas.height*oi],Pi,0,!0,IMAGE_REPLAYS[Oe.getRenderMode()],null);Be.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.preload;const Oe=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete Te.useInterimTilesOnError,super(Te),this.on,this.once,this.un,this.cacheSize_=Oe;const Be=e.renderMode||"hybrid";assert(Be=="hybrid"||Be=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=Be,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(ke,e,Te,Oe){const Be=document.createElement("script"),Ue="olc_"+getUid(e);function He(){delete window[Ue],Be.parentNode.removeChild(Be)}Be.async=!0,Be.src=ke+(ke.includes("?")?"&":"?")+"callback="+Ue;const We=setTimeout(function(){He(),Te&&Te()},1e4);window[Ue]=function(Cn){clearTimeout(We),He(),e(Cn)},document.head.appendChild(Be)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const Te=new XMLHttpRequest;Te.addEventListener("load",this.onXHRLoad_.bind(this)),Te.addEventListener("error",this.onXHRError_.bind(this)),Te.open("GET",e.url),Te.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const Te=e.target;if(!Te.status||Te.status>=200&&Te.status<300){let Oe;try{Oe=JSON.parse(Te.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(Oe)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const Te=get$3("EPSG:4326"),Oe=this.getProjection();let Be;if(e.bounds!==void 0){const An=getTransformFromProjections(Te,Oe);Be=applyTransform(e.bounds,An)}const Ue=extentFromProjection(Oe),He=e.minzoom||0,We=e.maxzoom||22,Cn=createXYZ({extent:Ue,maxZoom:We,minZoom:He,tileSize:this.tileSize_});if(this.tileGrid=Cn,this.tileUrlFunction=createFromTemplates(e.tiles,Cn),e.attribution&&!this.getAttributions()){const An=Be!==void 0?Be:Ue;this.setAttributions(function(En){return intersects$1(An,En.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,Te,Oe=this.length){for(;this.pos<Oe;){const Be=this.readVarint(),Ue=Be>>3,He=this.pos;this.type=Be&7,e(Ue,Te,this),this.pos===He&&this.skip(Be)}return Te}readMessage(e,Te){return this.readFields(e,Te,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const Te=this.buf;let Oe,Be;return Be=Te[this.pos++],Oe=Be&127,Be<128||(Be=Te[this.pos++],Oe|=(Be&127)<<7,Be<128)||(Be=Te[this.pos++],Oe|=(Be&127)<<14,Be<128)||(Be=Te[this.pos++],Oe|=(Be&127)<<21,Be<128)?Oe:(Be=Te[this.pos],Oe|=(Be&15)<<28,readVarintRemainder(Oe,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,Te=this.pos;return this.pos=e,e-Te>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(Te,e)):readUtf8(this.buf,Te,e)}readBytes(){const e=this.readVarint()+this.pos,Te=this.buf.subarray(this.pos,e);return this.pos=e,Te}readPackedVarint(e=[],Te){const Oe=this.readPackedEnd();for(;this.pos<Oe;)e.push(this.readVarint(Te));return e}readPackedSVarint(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const Te=e&7;if(Te===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(Te===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(Te===PBF_FIXED32)this.pos+=4;else if(Te===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${Te}`)}writeTag(e,Te){this.writeVarint(e<<3|Te)}realloc(e){let Te=this.length||16;for(;Te<this.pos+e;)Te*=2;if(Te!==this.length){const Oe=new Uint8Array(Te);Oe.set(this.buf),this.buf=Oe,this.dataView=new DataView(Oe.buffer),this.length=Te}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const Te=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const Oe=this.pos-Te;Oe>=128&&makeRoomForExtraLength(Te,Oe,this),this.pos=Te-1,this.writeVarint(Oe),this.pos+=Oe}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const Te=e.length;this.writeVarint(Te),this.realloc(Te);for(let Oe=0;Oe<Te;Oe++)this.buf[this.pos++]=e[Oe]}writeRawMessage(e,Te){this.pos++;const Oe=this.pos;e(Te,this);const Be=this.pos-Oe;Be>=128&&makeRoomForExtraLength(Oe,Be,this),this.pos=Oe-1,this.writeVarint(Be),this.pos+=Be}writeMessage(e,Te,Oe){this.writeTag(e,PBF_BYTES),this.writeRawMessage(Te,Oe)}writePackedVarint(e,Te){Te.length&&this.writeMessage(e,writePackedVarint,Te)}writePackedSVarint(e,Te){Te.length&&this.writeMessage(e,writePackedSVarint,Te)}writePackedBoolean(e,Te){Te.length&&this.writeMessage(e,writePackedBoolean,Te)}writePackedFloat(e,Te){Te.length&&this.writeMessage(e,writePackedFloat,Te)}writePackedDouble(e,Te){Te.length&&this.writeMessage(e,writePackedDouble,Te)}writePackedFixed32(e,Te){Te.length&&this.writeMessage(e,writePackedFixed32,Te)}writePackedSFixed32(e,Te){Te.length&&this.writeMessage(e,writePackedSFixed32,Te)}writePackedFixed64(e,Te){Te.length&&this.writeMessage(e,writePackedFixed64,Te)}writePackedSFixed64(e,Te){Te.length&&this.writeMessage(e,writePackedSFixed64,Te)}writeBytesField(e,Te){this.writeTag(e,PBF_BYTES),this.writeBytes(Te)}writeFixed32Field(e,Te){this.writeTag(e,PBF_FIXED32),this.writeFixed32(Te)}writeSFixed32Field(e,Te){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(Te)}writeFixed64Field(e,Te){this.writeTag(e,PBF_FIXED64),this.writeFixed64(Te)}writeSFixed64Field(e,Te){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(Te)}writeVarintField(e,Te){this.writeTag(e,PBF_VARINT),this.writeVarint(Te)}writeSVarintField(e,Te){this.writeTag(e,PBF_VARINT),this.writeSVarint(Te)}writeStringField(e,Te){this.writeTag(e,PBF_BYTES),this.writeString(Te)}writeFloatField(e,Te){this.writeTag(e,PBF_FIXED32),this.writeFloat(Te)}writeDoubleField(e,Te){this.writeTag(e,PBF_FIXED64),this.writeDouble(Te)}writeBooleanField(e,Te){this.writeVarintField(e,+Te)}}function readVarintRemainder(ke,e,Te){const Oe=Te.buf;let Be,Ue;if(Ue=Oe[Te.pos++],Be=(Ue&112)>>4,Ue<128||(Ue=Oe[Te.pos++],Be|=(Ue&127)<<3,Ue<128)||(Ue=Oe[Te.pos++],Be|=(Ue&127)<<10,Ue<128)||(Ue=Oe[Te.pos++],Be|=(Ue&127)<<17,Ue<128)||(Ue=Oe[Te.pos++],Be|=(Ue&127)<<24,Ue<128)||(Ue=Oe[Te.pos++],Be|=(Ue&1)<<31,Ue<128))return toNum(ke,Be,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(ke,e,Te){return Te?e*4294967296+(ke>>>0):(e>>>0)*4294967296+(ke>>>0)}function writeBigVarint(ke,e){let Te,Oe;if(ke>=0?(Te=ke%4294967296|0,Oe=ke/4294967296|0):(Te=~(-ke%4294967296),Oe=~(-ke/4294967296),Te^4294967295?Te=Te+1|0:(Te=0,Oe=Oe+1|0)),ke>=18446744073709552e3||ke<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(Te,Oe,e),writeBigVarintHigh(Oe,e)}function writeBigVarintLow(ke,e,Te){Te.buf[Te.pos++]=ke&127|128,ke>>>=7,Te.buf[Te.pos++]=ke&127|128,ke>>>=7,Te.buf[Te.pos++]=ke&127|128,ke>>>=7,Te.buf[Te.pos++]=ke&127|128,ke>>>=7,Te.buf[Te.pos]=ke&127}function writeBigVarintHigh(ke,e){const Te=(ke&7)<<4;e.buf[e.pos++]|=Te|((ke>>>=3)?128:0),ke&&(e.buf[e.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(e.buf[e.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(e.buf[e.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(e.buf[e.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(e.buf[e.pos++]=ke&127)))))}function makeRoomForExtraLength(ke,e,Te){const Oe=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));Te.realloc(Oe);for(let Be=Te.pos-1;Be>=ke;Be--)Te.buf[Be+Oe]=Te.buf[Be]}function writePackedVarint(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeVarint(ke[Te])}function writePackedSVarint(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeSVarint(ke[Te])}function writePackedFloat(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeFloat(ke[Te])}function writePackedDouble(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeDouble(ke[Te])}function writePackedBoolean(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeBoolean(ke[Te])}function writePackedFixed32(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeFixed32(ke[Te])}function writePackedSFixed32(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeSFixed32(ke[Te])}function writePackedFixed64(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeFixed64(ke[Te])}function writePackedSFixed64(ke,e){for(let Te=0;Te<ke.length;Te++)e.writeSFixed64(ke[Te])}function readUtf8(ke,e,Te){let Oe="",Be=e;for(;Be<Te;){const Ue=ke[Be];let He=null,We=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Be+We>Te)break;let Cn,An,En;We===1?Ue<128&&(He=Ue):We===2?(Cn=ke[Be+1],(Cn&192)===128&&(He=(Ue&31)<<6|Cn&63,He<=127&&(He=null))):We===3?(Cn=ke[Be+1],An=ke[Be+2],(Cn&192)===128&&(An&192)===128&&(He=(Ue&15)<<12|(Cn&63)<<6|An&63,(He<=2047||He>=55296&&He<=57343)&&(He=null))):We===4&&(Cn=ke[Be+1],An=ke[Be+2],En=ke[Be+3],(Cn&192)===128&&(An&192)===128&&(En&192)===128&&(He=(Ue&15)<<18|(Cn&63)<<12|(An&63)<<6|En&63,(He<=65535||He>=1114112)&&(He=null))),He===null?(He=65533,We=1):He>65535&&(He-=65536,Oe+=String.fromCharCode(He>>>10&1023|55296),He=56320|He&1023),Oe+=String.fromCharCode(He),Be+=We}return Oe}function writeUtf8(ke,e,Te){for(let Oe=0,Be,Ue;Oe<e.length;Oe++){if(Be=e.charCodeAt(Oe),Be>55295&&Be<57344)if(Ue)if(Be<56320){ke[Te++]=239,ke[Te++]=191,ke[Te++]=189,Ue=Be;continue}else Be=Ue-55296<<10|Be-56320|65536,Ue=null;else{Be>56319||Oe+1===e.length?(ke[Te++]=239,ke[Te++]=191,ke[Te++]=189):Ue=Be;continue}else Ue&&(ke[Te++]=239,ke[Te++]=191,ke[Te++]=189,Ue=null);Be<128?ke[Te++]=Be:(Be<2048?ke[Te++]=Be>>6|192:(Be<65536?ke[Te++]=Be>>12|224:(ke[Te++]=Be>>18|240,ke[Te++]=Be>>12&63|128),ke[Te++]=Be>>6&63|128),ke[Te++]=Be&63|128)}return Te}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,Te,Oe,Be){e.pos=Te.geometry;const Ue=e.readVarint()+e.pos;let He=1,We=0,Cn=0,An=0,En=0,Sn=0;for(;e.pos<Ue;){if(!We){const Tn=e.readVarint();He=Tn&7,We=Tn>>3}if(We--,He===1||He===2)Cn+=e.readSVarint(),An+=e.readSVarint(),He===1&&En>Sn&&(Be.push(En),Sn=En),Oe.push(Cn,An),En+=2;else if(He===7)En>Sn&&(Oe.push(Oe[Sn],Oe[Sn+1]),En+=2);else throw new Error("Invalid command found in the PBF")}En>Sn&&(Be.push(En),Sn=En)}createFeature_(e,Te,Oe){const Be=Te.type;if(Be===0)return null;let Ue;const He=Te.properties;let We;this.idProperty_?(We=He[this.idProperty_],delete He[this.idProperty_]):We=Te.id,He[this.layerName_]=Te.layer.name;const Cn=[],An=[];this.readRawGeometry_(e,Te,Cn,An);const En=getGeometryType(Be,An.length);if(this.featureClass===RenderFeature)Ue=new this.featureClass(En,Cn,An,2,He,We),Ue.transform(Oe.dataProjection);else{let Sn;if(En=="Polygon"){const Bn=inflateEnds(Cn,An);Sn=Bn.length>1?new MultiPolygon(Cn,"XY",Bn):new Polygon(Cn,"XY",An)}else Sn=En==="Point"?new Point$1(Cn,"XY"):En==="LineString"?new LineString(Cn,"XY"):En==="MultiPoint"?new MultiPoint(Cn,"XY"):En==="MultiLineString"?new MultiLineString(Cn,"XY",An):null;const Tn=this.featureClass;Ue=new Tn,this.geometryName_&&Ue.setGeometryName(this.geometryName_);const Ln=transformGeometryWithOptions(Sn,!1,Oe);Ue.setGeometry(Ln),We!==void 0&&Ue.setId(We),Ue.setProperties(He,!0)}return Ue}getType(){return"arraybuffer"}readFeatures(e,Te){const Oe=this.layers_;Te=this.adaptOptions(Te);const Be=get$3(Te.dataProjection);Be.setWorldExtent(Te.extent),Te.dataProjection=Be;const Ue=new Pbf(e),He=Ue.readFields(layersPBFReader,{}),We=[];for(const Cn in He){if(Oe&&!Oe.includes(Cn))continue;const An=He[Cn],En=An?[0,0,An.extent,An.extent]:null;Be.setExtent(En);for(let Sn=0,Tn=An.length;Sn<Tn;++Sn){const Ln=readRawFeature(Ue,An,Sn),Bn=this.createFeature_(Ue,Ln,Te);Bn!==null&&We.push(Bn)}}return We}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(ke,e,Te){if(ke===3){const Oe={keys:[],values:[],features:[]},Be=Te.readVarint()+Te.pos;Te.readFields(layerPBFReader,Oe,Be),Oe.length=Oe.features.length,Oe.length&&(e[Oe.name]=Oe)}}function layerPBFReader(ke,e,Te){if(ke===15)e.version=Te.readVarint();else if(ke===1)e.name=Te.readString();else if(ke===5)e.extent=Te.readVarint();else if(ke===2)e.features.push(Te.pos);else if(ke===3)e.keys.push(Te.readString());else if(ke===4){let Oe=null;const Be=Te.readVarint()+Te.pos;for(;Te.pos<Be;)ke=Te.readVarint()>>3,Oe=ke===1?Te.readString():ke===2?Te.readFloat():ke===3?Te.readDouble():ke===4?Te.readVarint64():ke===5?Te.readVarint():ke===6?Te.readSVarint():ke===7?Te.readBoolean():null;e.values.push(Oe)}}function featurePBFReader(ke,e,Te){if(ke==1)e.id=Te.readVarint();else if(ke==2){const Oe=Te.readVarint()+Te.pos;for(;Te.pos<Oe;){const Be=e.layer.keys[Te.readVarint()],Ue=e.layer.values[Te.readVarint()];e.properties[Be]=Ue}}else ke==3?e.type=Te.readVarint():ke==4&&(e.geometry=Te.pos)}function readRawFeature(ke,e,Te){ke.pos=e.features[Te];const Oe=ke.readVarint()+ke.pos,Be={layer:e,type:0,properties:{}};return ke.readFields(featurePBFReader,Be,Oe),Be}function getGeometryType(ke,e){let Te;return ke===1?Te=e===1?"Point":"MultiPoint":ke===2?Te=e===1?"LineString":"MultiLineString":ke===3&&(Te="Polygon"),Te}var $version=8,$root={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources={"*":{type:"source"}},source=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer$1={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter={type:"array",value:"*"},filter_operator={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression$1={type:"array",value:"*",minimum:1},light={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},promoteId={"*":{type:"string"}},v8Spec={$version,$root,sources,source,source_vector,source_raster,source_raster_dem,source_geojson,source_video,source_image,layer:layer$1,layout,layout_background,layout_fill,layout_circle,layout_heatmap,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line,layout_symbol,layout_raster,layout_hillshade,filter,filter_operator,geometry_type,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop,expression:expression$1,light,sky,terrain,projection,paint,paint_fill,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line,paint_circle,paint_heatmap,paint_symbol,paint_raster,paint_hillshade,paint_background,transition,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId};const refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(ke,e){const Te={};for(const Oe in ke)Oe!=="ref"&&(Te[Oe]=ke[Oe]);return refProperties.forEach(Oe=>{Oe in e&&(Te[Oe]=e[Oe])}),Te}function derefLayers(ke){ke=ke.slice();const e=Object.create(null);for(let Te=0;Te<ke.length;Te++)e[ke[Te].id]=ke[Te];for(let Te=0;Te<ke.length;Te++)"ref"in ke[Te]&&(ke[Te]=deref(ke[Te],e[ke[Te].ref]));return ke}class ExpressionParsingError extends Error{constructor(e,Te){super(Te),this.message=Te,this.key=e}}class Scope{constructor(e,Te=[]){this.parent=e,this.bindings={};for(const[Oe,Be]of Te)this.bindings[Oe]=Be}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ProjectionDefinitionType={kind:"projectionDefinition"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},PaddingType={kind:"padding"},ResolvedImageType={kind:"resolvedImage"},VariableAnchorOffsetCollectionType={kind:"variableAnchorOffsetCollection"};function array(ke,e){return{kind:"array",itemType:ke,N:e}}function typeToString(ke){if(ke.kind==="array"){const e=typeToString(ke.itemType);return typeof ke.N=="number"?`array<${e}, ${ke.N}>`:ke.itemType.kind==="value"?"array":`array<${e}>`}else return ke.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,ProjectionDefinitionType,FormattedType,ObjectType,array(ValueType),PaddingType,ResolvedImageType,VariableAnchorOffsetCollectionType];function checkSubtype(ke,e){if(e.kind==="error")return null;if(ke.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(ke.itemType,e.itemType))&&(typeof ke.N!="number"||ke.N===e.N))return null}else{if(ke.kind===e.kind)return null;if(ke.kind==="value"){for(const Te of valueMemberTypes)if(!checkSubtype(Te,e))return null}}return`Expected ${typeToString(ke)} but found ${typeToString(e)} instead.`}function isValidType(ke,e){return e.some(Te=>Te.kind===ke.kind)}function isValidNativeType(ke,e){return e.some(Te=>Te==="null"?ke===null:Te==="array"?Array.isArray(ke):Te==="object"?ke&&!Array.isArray(ke)&&typeof ke=="object":Te===typeof ke)}function verifyType(ke,e){return ke.kind==="array"&&e.kind==="array"?ke.itemType.kind===e.itemType.kind&&typeof ke.N=="number":ke.kind===e.kind}const Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function constrainAngle(ke){return ke=ke%360,ke<0&&(ke+=360),ke}function rgbToLab([ke,e,Te,Oe]){ke=rgb2xyz(ke),e=rgb2xyz(e),Te=rgb2xyz(Te);let Be,Ue;const He=xyz2lab((.2225045*ke+.7168786*e+.0606169*Te)/Yn);ke===e&&e===Te?Be=Ue=He:(Be=xyz2lab((.4360747*ke+.3850649*e+.1430804*Te)/Xn),Ue=xyz2lab((.0139322*ke+.0971045*e+.7141733*Te)/Zn));const We=116*He-16;return[We<0?0:We,500*(Be-He),200*(He-Ue),Oe]}function rgb2xyz(ke){return ke<=.04045?ke/12.92:Math.pow((ke+.055)/1.055,2.4)}function xyz2lab(ke){return ke>t3?Math.pow(ke,1/3):ke/t2+t0}function labToRgb([ke,e,Te,Oe]){let Be=(ke+16)/116,Ue=isNaN(e)?Be:Be+e/500,He=isNaN(Te)?Be:Be-Te/200;return Be=Yn*lab2xyz(Be),Ue=Xn*lab2xyz(Ue),He=Zn*lab2xyz(He),[xyz2rgb(3.1338561*Ue-1.6168667*Be-.4906146*He),xyz2rgb(-.9787684*Ue+1.9161415*Be+.033454*He),xyz2rgb(.0719453*Ue-.2289914*Be+1.4052427*He),Oe]}function xyz2rgb(ke){return ke=ke<=.00304?12.92*ke:1.055*Math.pow(ke,1/2.4)-.055,ke<0?0:ke>1?1:ke}function lab2xyz(ke){return ke>t1?ke*ke*ke:t2*(ke-t0)}function rgbToHcl(ke){const[e,Te,Oe,Be]=rgbToLab(ke),Ue=Math.sqrt(Te*Te+Oe*Oe);return[Math.round(Ue*1e4)?constrainAngle(Math.atan2(Oe,Te)*rad2deg):NaN,Ue,e,Be]}function hclToRgb([ke,e,Te,Oe]){return ke=isNaN(ke)?0:ke*deg2rad$1,labToRgb([Te,Math.cos(ke)*e,Math.sin(ke)*e,Oe])}function hslToRgb([ke,e,Te,Oe]){ke=constrainAngle(ke),e/=100,Te/=100;function Be(Ue){const He=(Ue+ke/30)%12,We=e*Math.min(Te,1-Te);return Te-We*Math.max(-1,Math.min(He-3,9-He,1))}return[Be(0),Be(8),Be(4),Oe]}function parseCssColor(ke){if(ke=ke.toLowerCase().trim(),ke==="transparent")return[0,0,0,0];const e=namedColors[ke];if(e){const[Be,Ue,He]=e;return[Be/255,Ue/255,He/255,1]}if(ke.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(ke)){const Ue=ke.length<6?1:2;let He=1;return[parseHex(ke.slice(He,He+=Ue)),parseHex(ke.slice(He,He+=Ue)),parseHex(ke.slice(He,He+=Ue)),parseHex(ke.slice(He,He+Ue)||"ff")]}if(ke.startsWith("rgb")){const Be=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,Ue=ke.match(Be);if(Ue){const[He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti]=Ue,ri=[An||" ",Tn||" ",ei].join("");if(ri==="  "||ri==="  /"||ri===",,"||ri===",,,"){const oi=[Cn,Sn,Bn].join(""),ai=oi==="%%%"?100:oi===""?255:0;if(ai){const ci=[clamp(+We/ai,0,1),clamp(+En/ai,0,1),clamp(+Ln/ai,0,1),ni?parseAlpha(+ni,ti):1];if(validateNumbers(ci))return ci}}return}}const Te=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,Oe=ke.match(Te);if(Oe){const[Be,Ue,He,We,Cn,An,En,Sn,Tn]=Oe,Ln=[He||" ",Cn||" ",En].join("");if(Ln==="  "||Ln==="  /"||Ln===",,"||Ln===",,,"){const Bn=[+Ue,clamp(+We,0,100),clamp(+An,0,100),Sn?parseAlpha(+Sn,Tn):1];if(validateNumbers(Bn))return hslToRgb(Bn)}}}function parseHex(ke){return parseInt(ke.padEnd(2,ke),16)/255}function parseAlpha(ke,e){return clamp(e?ke/100:ke,0,1)}function clamp(ke,e,Te){return Math.min(Math.max(e,ke),Te)}function validateNumbers(ke){return!ke.some(Number.isNaN)}const namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function interpolateNumber(ke,e,Te){return ke+Te*(e-ke)}function interpolateArray(ke,e,Te){return ke.map((Oe,Be)=>interpolateNumber(Oe,e[Be],Te))}class Color{constructor(e,Te,Oe,Be=1,Ue=!0){this.r=e,this.g=Te,this.b=Oe,this.a=Be,Ue||(this.r*=Be,this.g*=Be,this.b*=Be,Be||this.overwriteGetter("rgb",[e,Te,Oe,Be]))}static parse(e){if(e instanceof Color)return e;if(typeof e!="string")return;const Te=parseCssColor(e);if(Te)return new Color(...Te,!1)}get rgb(){const{r:e,g:Te,b:Oe,a:Be}=this,Ue=Be||1/0;return this.overwriteGetter("rgb",[e/Ue,Te/Ue,Oe/Ue,Be])}get hcl(){return this.overwriteGetter("hcl",rgbToHcl(this.rgb))}get lab(){return this.overwriteGetter("lab",rgbToLab(this.rgb))}overwriteGetter(e,Te){return Object.defineProperty(this,e,{value:Te}),Te}toString(){const[e,Te,Oe,Be]=this.rgb;return`rgba(${[e,Te,Oe].map(Ue=>Math.round(Ue*255)).join(",")},${Be})`}static interpolate(e,Te,Oe,Be="rgb"){switch(Be){case"rgb":{const[Ue,He,We,Cn]=interpolateArray(e.rgb,Te.rgb,Oe);return new Color(Ue,He,We,Cn,!1)}case"hcl":{const[Ue,He,We,Cn]=e.hcl,[An,En,Sn,Tn]=Te.hcl;let Ln,Bn;if(!isNaN(Ue)&&!isNaN(An)){let oi=An-Ue;An>Ue&&oi>180?oi-=360:An<Ue&&Ue-An>180&&(oi+=360),Ln=Ue+Oe*oi}else isNaN(Ue)?isNaN(An)?Ln=NaN:(Ln=An,(We===1||We===0)&&(Bn=En)):(Ln=Ue,(Sn===1||Sn===0)&&(Bn=He));const[ei,ni,ti,ri]=hclToRgb([Ln,Bn??interpolateNumber(He,En,Oe),interpolateNumber(We,Sn,Oe),interpolateNumber(Cn,Tn,Oe)]);return new Color(ei,ni,ti,ri,!1)}case"lab":{const[Ue,He,We,Cn]=labToRgb(interpolateArray(e.lab,Te.lab,Oe));return new Color(Ue,He,We,Cn,!1)}}}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);class Collator{constructor(e,Te,Oe){e?this.sensitivity=Te?"variant":"case":this.sensitivity=Te?"accent":"base",this.locale=Oe,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,Te){return this.collator.compare(e,Te)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const VERTICAL_ALIGN_OPTIONS=["bottom","center","top"];class FormattedSection{constructor(e,Te,Oe,Be,Ue,He){this.text=e,this.image=Te,this.scale=Oe,this.fontStack=Be,this.textColor=Ue,this.verticalAlign=He}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Padding{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Padding)return e;if(typeof e=="number")return new Padding([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const Te of e)if(typeof Te!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Padding(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,Te,Oe){return new Padding(interpolateArray(e.values,Te.values,Oe))}}class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const anchors=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class VariableAnchorOffsetCollection{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof VariableAnchorOffsetCollection)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let Te=0;Te<e.length;Te+=2){const Oe=e[Te],Be=e[Te+1];if(typeof Oe!="string"||!anchors.has(Oe)||!Array.isArray(Be)||Be.length!==2||typeof Be[0]!="number"||typeof Be[1]!="number")return}return new VariableAnchorOffsetCollection(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,Te,Oe){const Be=e.values,Ue=Te.values;if(Be.length!==Ue.length)throw new RuntimeError(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${Te.toString()}`);const He=[];for(let We=0;We<Be.length;We+=2){if(Be[We]!==Ue[We])throw new RuntimeError(`Cannot interpolate values containing mismatched anchors. from[${We}]: ${Be[We]}, to[${We}]: ${Ue[We]}`);He.push(Be[We]);const[Cn,An]=Be[We+1],[En,Sn]=Ue[We+1];He.push([interpolateNumber(Cn,En,Oe),interpolateNumber(An,Sn,Oe)])}return new VariableAnchorOffsetCollection(He)}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}}class ProjectionDefinition{constructor(e,Te,Oe){this.from=e,this.to=Te,this.transition=Oe}static interpolate(e,Te,Oe){return new ProjectionDefinition(e,Te,Oe)}static parse(e){if(e instanceof ProjectionDefinition)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new ProjectionDefinition(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new ProjectionDefinition(e.from,e.to,e.transition);if(typeof e=="string")return new ProjectionDefinition(e,e,1)}}function validateRGBA(ke,e,Te,Oe){return typeof ke=="number"&&ke>=0&&ke<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof Te=="number"&&Te>=0&&Te<=255?typeof Oe>"u"||typeof Oe=="number"&&Oe>=0&&Oe<=1?null:`Invalid rgba value [${[ke,e,Te,Oe].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof Oe=="number"?[ke,e,Te,Oe]:[ke,e,Te]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(ke){if(ke===null||typeof ke=="string"||typeof ke=="boolean"||typeof ke=="number"||ke instanceof ProjectionDefinition||ke instanceof Color||ke instanceof Collator||ke instanceof Formatted||ke instanceof Padding||ke instanceof VariableAnchorOffsetCollection||ke instanceof ResolvedImage)return!0;if(Array.isArray(ke)){for(const e of ke)if(!isValue(e))return!1;return!0}else if(typeof ke=="object"){for(const e in ke)if(!isValue(ke[e]))return!1;return!0}else return!1}function typeOf(ke){if(ke===null)return NullType;if(typeof ke=="string")return StringType;if(typeof ke=="boolean")return BooleanType;if(typeof ke=="number")return NumberType;if(ke instanceof Color)return ColorType;if(ke instanceof ProjectionDefinition)return ProjectionDefinitionType;if(ke instanceof Collator)return CollatorType;if(ke instanceof Formatted)return FormattedType;if(ke instanceof Padding)return PaddingType;if(ke instanceof VariableAnchorOffsetCollection)return VariableAnchorOffsetCollectionType;if(ke instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(ke)){const e=ke.length;let Te;for(const Oe of ke){const Be=typeOf(Oe);if(!Te)Te=Be;else{if(Te===Be)continue;Te=ValueType;break}}return array(Te||ValueType,e)}else return ObjectType}function valueToString(ke){const e=typeof ke;return ke===null?"":e==="string"||e==="number"||e==="boolean"?String(ke):ke instanceof Color||ke instanceof ProjectionDefinition||ke instanceof Formatted||ke instanceof Padding||ke instanceof VariableAnchorOffsetCollection||ke instanceof ResolvedImage?ke.toString():JSON.stringify(ke)}class Literal{constructor(e,Te){this.type=e,this.value=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return Te.error("invalid value");const Oe=e[1];let Be=typeOf(Oe);const Ue=Te.expectedType;return Be.kind==="array"&&Be.N===0&&Ue&&Ue.kind==="array"&&(typeof Ue.N!="number"||Ue.N===0)&&(Be=Ue),new Literal(Be,Oe)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const types$1={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");let Oe=1,Be;const Ue=e[0];if(Ue==="array"){let We;if(e.length>2){const An=e[1];if(typeof An!="string"||!(An in types$1)||An==="object")return Te.error('The item type argument of "array" must be one of string, number, boolean',1);We=types$1[An],Oe++}else We=ValueType;let Cn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return Te.error('The length argument to "array" must be a positive integer literal',2);Cn=e[2],Oe++}Be=array(We,Cn)}else{if(!types$1[Ue])throw new Error(`Types doesn't contain name = ${Ue}`);Be=types$1[Ue]}const He=[];for(;Oe<e.length;Oe++){const We=Te.parse(e[Oe],Oe,ValueType);if(!We)return null;He.push(We)}return new Assertion(Be,He)}evaluate(e){for(let Te=0;Te<this.args.length;Te++){const Oe=this.args[Te].evaluate(e);if(checkSubtype(this.type,typeOf(Oe))){if(Te===this.args.length-1)throw new RuntimeError(`Expected value to be of type ${typeToString(this.type)}, but found ${typeToString(typeOf(Oe))} instead.`)}else return Oe}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const types$2={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");const Oe=e[0];if(!types$2[Oe])throw new Error(`Can't parse ${Oe} as it is not part of the known types`);if((Oe==="to-boolean"||Oe==="to-string")&&e.length!==2)return Te.error("Expected one argument.");const Be=types$2[Oe],Ue=[];for(let He=1;He<e.length;He++){const We=Te.parse(e[He],He,ValueType);if(!We)return null;Ue.push(We)}return new Coercion(Be,Ue)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let Te,Oe;for(const Be of this.args){if(Te=Be.evaluate(e),Oe=null,Te instanceof Color)return Te;if(typeof Te=="string"){const Ue=e.parseColor(Te);if(Ue)return Ue}else if(Array.isArray(Te)&&(Te.length<3||Te.length>4?Oe=`Invalid rgba value ${JSON.stringify(Te)}: expected an array containing either three or four numeric values.`:Oe=validateRGBA(Te[0],Te[1],Te[2],Te[3]),!Oe))return new Color(Te[0]/255,Te[1]/255,Te[2]/255,Te[3])}throw new RuntimeError(Oe||`Could not parse color from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"padding":{let Te;for(const Oe of this.args){Te=Oe.evaluate(e);const Be=Padding.parse(Te);if(Be)return Be}throw new RuntimeError(`Could not parse padding from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"variableAnchorOffsetCollection":{let Te;for(const Oe of this.args){Te=Oe.evaluate(e);const Be=VariableAnchorOffsetCollection.parse(Te);if(Be)return Be}throw new RuntimeError(`Could not parse variableAnchorOffsetCollection from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"number":{let Te=null;for(const Oe of this.args){if(Te=Oe.evaluate(e),Te===null)return 0;const Be=Number(Te);if(!isNaN(Be))return Be}throw new RuntimeError(`Could not convert ${JSON.stringify(Te)} to number.`)}case"formatted":return Formatted.fromString(valueToString(this.args[0].evaluate(e)));case"resolvedImage":return ResolvedImage.fromString(valueToString(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return valueToString(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let Te=this._parseColorCache[e];return Te||(Te=this._parseColorCache[e]=Color.parse(e)),Te}}class ParsingContext{constructor(e,Te,Oe=[],Be,Ue=new Scope,He=[]){this.registry=e,this.path=Oe,this.key=Oe.map(We=>`[${We}]`).join(""),this.scope=Ue,this.errors=He,this.expectedType=Be,this._isConstant=Te}parse(e,Te,Oe,Be,Ue={}){return Te?this.concat(Te,Oe,Be)._parse(e,Ue):this._parse(e,Ue)}_parse(e,Te){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function Oe(Be,Ue,He){return He==="assert"?new Assertion(Ue,[Be]):He==="coerce"?new Coercion(Ue,[Be]):Be}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Be=e[0];if(typeof Be!="string")return this.error(`Expression name must be a string, but found ${typeof Be} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Ue=this.registry[Be];if(Ue){let He=Ue.parse(e,this);if(!He)return null;if(this.expectedType){const We=this.expectedType,Cn=He.type;if((We.kind==="string"||We.kind==="number"||We.kind==="boolean"||We.kind==="object"||We.kind==="array")&&Cn.kind==="value")He=Oe(He,We,Te.typeAnnotation||"assert");else if(We.kind==="projectionDefinition"&&(Cn.kind==="string"||Cn.kind==="array"))He=Oe(He,We,Te.typeAnnotation||"coerce");else if((We.kind==="color"||We.kind==="formatted"||We.kind==="resolvedImage")&&(Cn.kind==="value"||Cn.kind==="string"))He=Oe(He,We,Te.typeAnnotation||"coerce");else if(We.kind==="padding"&&(Cn.kind==="value"||Cn.kind==="number"||Cn.kind==="array"))He=Oe(He,We,Te.typeAnnotation||"coerce");else if(We.kind==="variableAnchorOffsetCollection"&&(Cn.kind==="value"||Cn.kind==="array"))He=Oe(He,We,Te.typeAnnotation||"coerce");else if(this.checkSubtype(We,Cn))return null}if(!(He instanceof Literal)&&He.type.kind!=="resolvedImage"&&this._isConstant(He)){const We=new EvaluationContext;try{He=new Literal(He.type,He.evaluate(We))}catch(Cn){return this.error(Cn.message),null}}return He}return this.error(`Unknown expression "${Be}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,Te,Oe){const Be=typeof e=="number"?this.path.concat(e):this.path,Ue=Oe?this.scope.concat(Oe):this.scope;return new ParsingContext(this.registry,this._isConstant,Be,Te||null,Ue,this.errors)}error(e,...Te){const Oe=`${this.key}${Te.map(Be=>`[${Be}]`).join("")}`;this.errors.push(new ExpressionParsingError(Oe,e))}checkSubtype(e,Te){const Oe=checkSubtype(e,Te);return Oe&&this.error(Oe),Oe}}class Let{constructor(e,Te){this.type=Te.type,this.bindings=[].concat(e),this.result=Te}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const Te of this.bindings)e(Te[1]);e(this.result)}static parse(e,Te){if(e.length<4)return Te.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const Oe=[];for(let Ue=1;Ue<e.length-1;Ue+=2){const He=e[Ue];if(typeof He!="string")return Te.error(`Expected string, but found ${typeof He} instead.`,Ue);if(/[^a-zA-Z0-9_]/.test(He))return Te.error("Variable names must contain only alphanumeric characters or '_'.",Ue);const We=Te.parse(e[Ue+1],Ue+1);if(!We)return null;Oe.push([He,We])}const Be=Te.parse(e[e.length-1],e.length-1,Te.expectedType,Oe);return Be?new Let(Oe,Be):null}outputDefined(){return this.result.outputDefined()}}class Var{constructor(e,Te){this.type=Te.type,this.name=e,this.boundExpression=Te}static parse(e,Te){if(e.length!==2||typeof e[1]!="string")return Te.error("'var' expression requires exactly one string literal argument.");const Oe=e[1];return Te.scope.has(Oe)?new Var(Oe,Te.scope.get(Oe)):Te.error(`Unknown variable "${Oe}". Make sure "${Oe}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}let At$1=class $f{constructor(e,Te,Oe){this.type=e,this.index=Te,this.input=Oe}static parse(e,Te){if(e.length!==3)return Te.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=Te.parse(e[1],1,NumberType),Be=Te.parse(e[2],2,array(Te.expectedType||ValueType));if(!Oe||!Be)return null;const Ue=Be.type;return new $f(Ue.itemType,Oe,Be)}evaluate(e){const Te=this.index.evaluate(e),Oe=this.input.evaluate(e);if(Te<0)throw new RuntimeError(`Array index out of bounds: ${Te} < 0.`);if(Te>=Oe.length)throw new RuntimeError(`Array index out of bounds: ${Te} > ${Oe.length-1}.`);if(Te!==Math.floor(Te))throw new RuntimeError(`Array index must be an integer, but found ${Te} instead.`);return Oe[Te]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}};class In{constructor(e,Te){this.type=BooleanType,this.needle=e,this.haystack=Te}static parse(e,Te){if(e.length!==3)return Te.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,ValueType);return!Oe||!Be?null:isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(Oe,Be):Te.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(Oe.type)} instead`)}evaluate(e){const Te=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(!Oe)return!1;if(!isValidNativeType(Te,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(Te))} instead.`);if(!isValidNativeType(Oe,["string","array"]))throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(Oe))} instead.`);return Oe.indexOf(Te)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class IndexOf{constructor(e,Te,Oe){this.type=NumberType,this.needle=e,this.haystack=Te,this.fromIndex=Oe}static parse(e,Te){if(e.length<=2||e.length>=5)return Te.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,ValueType);if(!Oe||!Be)return null;if(!isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return Te.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(Oe.type)} instead`);if(e.length===4){const Ue=Te.parse(e[3],3,NumberType);return Ue?new IndexOf(Oe,Be,Ue):null}else return new IndexOf(Oe,Be)}evaluate(e){const Te=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(!isValidNativeType(Te,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(Te))} instead.`);let Be;if(this.fromIndex&&(Be=this.fromIndex.evaluate(e)),isValidNativeType(Oe,["string"])){const Ue=Oe.indexOf(Te,Be);return Ue===-1?-1:[...Oe.slice(0,Ue)].length}else{if(isValidNativeType(Oe,["array"]))return Oe.indexOf(Te,Be);throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(Oe))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Match{constructor(e,Te,Oe,Be,Ue,He){this.inputType=e,this.type=Te,this.input=Oe,this.cases=Be,this.outputs=Ue,this.otherwise=He}static parse(e,Te){if(e.length<5)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return Te.error("Expected an even number of arguments.");let Oe,Be;Te.expectedType&&Te.expectedType.kind!=="value"&&(Be=Te.expectedType);const Ue={},He=[];for(let An=2;An<e.length-1;An+=2){let En=e[An];const Sn=e[An+1];Array.isArray(En)||(En=[En]);const Tn=Te.concat(An);if(En.length===0)return Tn.error("Expected at least one branch label.");for(const Bn of En){if(typeof Bn!="number"&&typeof Bn!="string")return Tn.error("Branch labels must be numbers or strings.");if(typeof Bn=="number"&&Math.abs(Bn)>Number.MAX_SAFE_INTEGER)return Tn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Bn=="number"&&Math.floor(Bn)!==Bn)return Tn.error("Numeric branch labels must be integer values.");if(!Oe)Oe=typeOf(Bn);else if(Tn.checkSubtype(Oe,typeOf(Bn)))return null;if(typeof Ue[String(Bn)]<"u")return Tn.error("Branch labels must be unique.");Ue[String(Bn)]=He.length}const Ln=Te.parse(Sn,An,Be);if(!Ln)return null;Be=Be||Ln.type,He.push(Ln)}const We=Te.parse(e[1],1,ValueType);if(!We)return null;const Cn=Te.parse(e[e.length-1],e.length-1,Be);return!Cn||We.type.kind!=="value"&&Te.concat(1).checkSubtype(Oe,We.type)?null:new Match(Oe,Be,We,Ue,He,Cn)}evaluate(e){const Te=this.input.evaluate(e);return(typeOf(Te)===this.inputType&&this.outputs[this.cases[Te]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Case{constructor(e,Te,Oe){this.type=e,this.branches=Te,this.otherwise=Oe}static parse(e,Te){if(e.length<4)return Te.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return Te.error("Expected an odd number of arguments.");let Oe;Te.expectedType&&Te.expectedType.kind!=="value"&&(Oe=Te.expectedType);const Be=[];for(let He=1;He<e.length-1;He+=2){const We=Te.parse(e[He],He,BooleanType);if(!We)return null;const Cn=Te.parse(e[He+1],He+1,Oe);if(!Cn)return null;Be.push([We,Cn]),Oe=Oe||Cn.type}const Ue=Te.parse(e[e.length-1],e.length-1,Oe);if(!Ue)return null;if(!Oe)throw new Error("Can't infer output type");return new Case(Oe,Be,Ue)}evaluate(e){for(const[Te,Oe]of this.branches)if(Te.evaluate(e))return Oe.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[Te,Oe]of this.branches)e(Te),e(Oe);e(this.otherwise)}outputDefined(){return this.branches.every(([e,Te])=>Te.outputDefined())&&this.otherwise.outputDefined()}}class Slice{constructor(e,Te,Oe,Be){this.type=e,this.input=Te,this.beginIndex=Oe,this.endIndex=Be}static parse(e,Te){if(e.length<=2||e.length>=5)return Te.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,NumberType);if(!Oe||!Be)return null;if(!isValidType(Oe.type,[array(ValueType),StringType,ValueType]))return Te.error(`Expected first argument to be of type array or string, but found ${typeToString(Oe.type)} instead`);if(e.length===4){const Ue=Te.parse(e[3],3,NumberType);return Ue?new Slice(Oe.type,Oe,Be,Ue):null}else return new Slice(Oe.type,Oe,Be)}evaluate(e){const Te=this.input.evaluate(e),Oe=this.beginIndex.evaluate(e);let Be;if(this.endIndex&&(Be=this.endIndex.evaluate(e)),isValidNativeType(Te,["string"]))return[...Te].slice(Oe,Be).join("");if(isValidNativeType(Te,["array"]))return Te.slice(Oe,Be);throw new RuntimeError(`Expected first argument to be of type array or string, but found ${typeToString(typeOf(Te))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function findStopLessThanOrEqualTo(ke,e){const Te=ke.length-1;let Oe=0,Be=Te,Ue=0,He,We;for(;Oe<=Be;)if(Ue=Math.floor((Oe+Be)/2),He=ke[Ue],We=ke[Ue+1],He<=e){if(Ue===Te||e<We)return Ue;Oe=Ue+1}else if(He>e)Be=Ue-1;else throw new RuntimeError("Input is not a number.");return 0}class Step{constructor(e,Te,Oe){this.type=e,this.input=Te,this.labels=[],this.outputs=[];for(const[Be,Ue]of Oe)this.labels.push(Be),this.outputs.push(Ue)}static parse(e,Te){if(e.length-1<4)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return Te.error("Expected an even number of arguments.");const Oe=Te.parse(e[1],1,NumberType);if(!Oe)return null;const Be=[];let Ue=null;Te.expectedType&&Te.expectedType.kind!=="value"&&(Ue=Te.expectedType);for(let He=1;He<e.length;He+=2){const We=He===1?-1/0:e[He],Cn=e[He+1],An=He,En=He+1;if(typeof We!="number")return Te.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',An);if(Be.length&&Be[Be.length-1][0]>=We)return Te.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',An);const Sn=Te.parse(Cn,En,Ue);if(!Sn)return null;Ue=Ue||Sn.type,Be.push([We,Sn])}return new Step(Ue,Oe,Be)}evaluate(e){const Te=this.labels,Oe=this.outputs;if(Te.length===1)return Oe[0].evaluate(e);const Be=this.input.evaluate(e);if(Be<=Te[0])return Oe[0].evaluate(e);const Ue=Te.length;if(Be>=Te[Ue-1])return Oe[Ue-1].evaluate(e);const He=findStopLessThanOrEqualTo(Te,Be);return Oe[He].evaluate(e)}eachChild(e){e(this.input);for(const Te of this.outputs)e(Te)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function getDefaultExportFromCjs(ke){return ke&&ke.__esModule&&Object.prototype.hasOwnProperty.call(ke,"default")?ke.default:ke}var unitbezier,hasRequiredUnitbezier;function requireUnitbezier(){if(hasRequiredUnitbezier)return unitbezier;hasRequiredUnitbezier=1,unitbezier=ke;function ke(e,Te,Oe,Be){this.cx=3*e,this.bx=3*(Oe-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Te,this.by=3*(Be-Te)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=Te,this.p2x=Oe,this.p2y=Be}return ke.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,Te){if(Te===void 0&&(Te=1e-6),e<0)return 0;if(e>1)return 1;for(var Oe=e,Be=0;Be<8;Be++){var Ue=this.sampleCurveX(Oe)-e;if(Math.abs(Ue)<Te)return Oe;var He=this.sampleCurveDerivativeX(Oe);if(Math.abs(He)<1e-6)break;Oe=Oe-Ue/He}var We=0,Cn=1;for(Oe=e,Be=0;Be<20&&(Ue=this.sampleCurveX(Oe),!(Math.abs(Ue-e)<Te));Be++)e>Ue?We=Oe:Cn=Oe,Oe=(Cn-We)*.5+We;return Oe},solve:function(e,Te){return this.sampleCurveY(this.solveCurveX(e,Te))}},unitbezier}var unitbezierExports=requireUnitbezier(),UnitBezier=getDefaultExportFromCjs(unitbezierExports);class Interpolate{constructor(e,Te,Oe,Be,Ue){this.type=e,this.operator=Te,this.interpolation=Oe,this.input=Be,this.labels=[],this.outputs=[];for(const[He,We]of Ue)this.labels.push(He),this.outputs.push(We)}static interpolationFactor(e,Te,Oe,Be){let Ue=0;if(e.name==="exponential")Ue=exponentialInterpolation(Te,e.base,Oe,Be);else if(e.name==="linear")Ue=exponentialInterpolation(Te,1,Oe,Be);else if(e.name==="cubic-bezier"){const He=e.controlPoints;Ue=new UnitBezier(He[0],He[1],He[2],He[3]).solve(exponentialInterpolation(Te,1,Oe,Be))}return Ue}static parse(e,Te){let[Oe,Be,Ue,...He]=e;if(!Array.isArray(Be)||Be.length===0)return Te.error("Expected an interpolation type expression.",1);if(Be[0]==="linear")Be={name:"linear"};else if(Be[0]==="exponential"){const An=Be[1];if(typeof An!="number")return Te.error("Exponential interpolation requires a numeric base.",1,1);Be={name:"exponential",base:An}}else if(Be[0]==="cubic-bezier"){const An=Be.slice(1);if(An.length!==4||An.some(En=>typeof En!="number"||En<0||En>1))return Te.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Be={name:"cubic-bezier",controlPoints:An}}else return Te.error(`Unknown interpolation type ${String(Be[0])}`,1,0);if(e.length-1<4)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return Te.error("Expected an even number of arguments.");if(Ue=Te.parse(Ue,2,NumberType),!Ue)return null;const We=[];let Cn=null;Oe==="interpolate-hcl"||Oe==="interpolate-lab"?Cn=ColorType:Te.expectedType&&Te.expectedType.kind!=="value"&&(Cn=Te.expectedType);for(let An=0;An<He.length;An+=2){const En=He[An],Sn=He[An+1],Tn=An+3,Ln=An+4;if(typeof En!="number")return Te.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Tn);if(We.length&&We[We.length-1][0]>=En)return Te.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Tn);const Bn=Te.parse(Sn,Ln,Cn);if(!Bn)return null;Cn=Cn||Bn.type,We.push([En,Bn])}return!verifyType(Cn,NumberType)&&!verifyType(Cn,ProjectionDefinitionType)&&!verifyType(Cn,ColorType)&&!verifyType(Cn,PaddingType)&&!verifyType(Cn,VariableAnchorOffsetCollectionType)&&!verifyType(Cn,array(NumberType))?Te.error(`Type ${typeToString(Cn)} is not interpolatable.`):new Interpolate(Cn,Oe,Be,Ue,We)}evaluate(e){const Te=this.labels,Oe=this.outputs;if(Te.length===1)return Oe[0].evaluate(e);const Be=this.input.evaluate(e);if(Be<=Te[0])return Oe[0].evaluate(e);const Ue=Te.length;if(Be>=Te[Ue-1])return Oe[Ue-1].evaluate(e);const He=findStopLessThanOrEqualTo(Te,Be),We=Te[He],Cn=Te[He+1],An=Interpolate.interpolationFactor(this.interpolation,Be,We,Cn),En=Oe[He].evaluate(e),Sn=Oe[He+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return interpolateNumber(En,Sn,An);case"color":return Color.interpolate(En,Sn,An);case"padding":return Padding.interpolate(En,Sn,An);case"variableAnchorOffsetCollection":return VariableAnchorOffsetCollection.interpolate(En,Sn,An);case"array":return interpolateArray(En,Sn,An);case"projectionDefinition":return ProjectionDefinition.interpolate(En,Sn,An)}case"interpolate-hcl":return Color.interpolate(En,Sn,An,"hcl");case"interpolate-lab":return Color.interpolate(En,Sn,An,"lab")}}eachChild(e){e(this.input);for(const Te of this.outputs)e(Te)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function exponentialInterpolation(ke,e,Te,Oe){const Be=Oe-Te,Ue=ke-Te;return Be===0?0:e===1?Ue/Be:(Math.pow(e,Ue)-1)/(Math.pow(e,Be)-1)}class Coalesce{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");let Oe=null;const Be=Te.expectedType;Be&&Be.kind!=="value"&&(Oe=Be);const Ue=[];for(const We of e.slice(1)){const Cn=Te.parse(We,1+Ue.length,Oe,void 0,{typeAnnotation:"omit"});if(!Cn)return null;Oe=Oe||Cn.type,Ue.push(Cn)}if(!Oe)throw new Error("No output type");return Be&&Ue.some(We=>checkSubtype(Be,We.type))?new Coalesce(ValueType,Ue):new Coalesce(Oe,Ue)}evaluate(e){let Te=null,Oe=0,Be;for(const Ue of this.args)if(Oe++,Te=Ue.evaluate(e),Te&&Te instanceof ResolvedImage&&!Te.available&&(Be||(Be=Te.name),Te=null,Oe===this.args.length&&(Te=Be)),Te!==null)break;return Te}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function isComparableType(ke,e){return ke==="=="||ke==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(ke,e,Te){return e===Te}function neq(ke,e,Te){return e!==Te}function lt$1(ke,e,Te){return e<Te}function gt$1(ke,e,Te){return e>Te}function lteq(ke,e,Te){return e<=Te}function gteq(ke,e,Te){return e>=Te}function eqCollate(ke,e,Te,Oe){return Oe.compare(e,Te)===0}function neqCollate(ke,e,Te,Oe){return!eqCollate(ke,e,Te,Oe)}function ltCollate(ke,e,Te,Oe){return Oe.compare(e,Te)<0}function gtCollate(ke,e,Te,Oe){return Oe.compare(e,Te)>0}function lteqCollate(ke,e,Te,Oe){return Oe.compare(e,Te)<=0}function gteqCollate(ke,e,Te,Oe){return Oe.compare(e,Te)>=0}function makeComparison(ke,e,Te){const Oe=ke!=="=="&&ke!=="!=";return class Hf{constructor(Ue,He,We){this.type=BooleanType,this.lhs=Ue,this.rhs=He,this.collator=We,this.hasUntypedArgument=Ue.type.kind==="value"||He.type.kind==="value"}static parse(Ue,He){if(Ue.length!==3&&Ue.length!==4)return He.error("Expected two or three arguments.");const We=Ue[0];let Cn=He.parse(Ue[1],1,ValueType);if(!Cn)return null;if(!isComparableType(We,Cn.type))return He.concat(1).error(`"${We}" comparisons are not supported for type '${typeToString(Cn.type)}'.`);let An=He.parse(Ue[2],2,ValueType);if(!An)return null;if(!isComparableType(We,An.type))return He.concat(2).error(`"${We}" comparisons are not supported for type '${typeToString(An.type)}'.`);if(Cn.type.kind!==An.type.kind&&Cn.type.kind!=="value"&&An.type.kind!=="value")return He.error(`Cannot compare types '${typeToString(Cn.type)}' and '${typeToString(An.type)}'.`);Oe&&(Cn.type.kind==="value"&&An.type.kind!=="value"?Cn=new Assertion(An.type,[Cn]):Cn.type.kind!=="value"&&An.type.kind==="value"&&(An=new Assertion(Cn.type,[An])));let En=null;if(Ue.length===4){if(Cn.type.kind!=="string"&&An.type.kind!=="string"&&Cn.type.kind!=="value"&&An.type.kind!=="value")return He.error("Cannot use collator to compare non-string types.");if(En=He.parse(Ue[3],3,CollatorType),!En)return null}return new Hf(Cn,An,En)}evaluate(Ue){const He=this.lhs.evaluate(Ue),We=this.rhs.evaluate(Ue);if(Oe&&this.hasUntypedArgument){const Cn=typeOf(He),An=typeOf(We);if(Cn.kind!==An.kind||!(Cn.kind==="string"||Cn.kind==="number"))throw new RuntimeError(`Expected arguments for "${ke}" to be (string, string) or (number, number), but found (${Cn.kind}, ${An.kind}) instead.`)}if(this.collator&&!Oe&&this.hasUntypedArgument){const Cn=typeOf(He),An=typeOf(We);if(Cn.kind!=="string"||An.kind!=="string")return e(Ue,He,We)}return this.collator?Te(Ue,He,We,this.collator.evaluate(Ue)):e(Ue,He,We)}eachChild(Ue){Ue(this.lhs),Ue(this.rhs),this.collator&&Ue(this.collator)}outputDefined(){return!0}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class CollatorExpression{constructor(e,Te,Oe){this.type=CollatorType,this.locale=Oe,this.caseSensitive=e,this.diacriticSensitive=Te}static parse(e,Te){if(e.length!==2)return Te.error("Expected one argument.");const Oe=e[1];if(typeof Oe!="object"||Array.isArray(Oe))return Te.error("Collator options argument must be an object.");const Be=Te.parse(Oe["case-sensitive"]===void 0?!1:Oe["case-sensitive"],1,BooleanType);if(!Be)return null;const Ue=Te.parse(Oe["diacritic-sensitive"]===void 0?!1:Oe["diacritic-sensitive"],1,BooleanType);if(!Ue)return null;let He=null;return Oe.locale&&(He=Te.parse(Oe.locale,1,StringType),!He)?null:new CollatorExpression(Be,Ue,He)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class NumberFormat{constructor(e,Te,Oe,Be,Ue){this.type=StringType,this.number=e,this.locale=Te,this.currency=Oe,this.minFractionDigits=Be,this.maxFractionDigits=Ue}static parse(e,Te){if(e.length!==3)return Te.error("Expected two arguments.");const Oe=Te.parse(e[1],1,NumberType);if(!Oe)return null;const Be=e[2];if(typeof Be!="object"||Array.isArray(Be))return Te.error("NumberFormat options argument must be an object.");let Ue=null;if(Be.locale&&(Ue=Te.parse(Be.locale,1,StringType),!Ue))return null;let He=null;if(Be.currency&&(He=Te.parse(Be.currency,1,StringType),!He))return null;let We=null;if(Be["min-fraction-digits"]&&(We=Te.parse(Be["min-fraction-digits"],1,NumberType),!We))return null;let Cn=null;return Be["max-fraction-digits"]&&(Cn=Te.parse(Be["max-fraction-digits"],1,NumberType),!Cn)?null:new NumberFormat(Oe,Ue,He,We,Cn)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");const Oe=e[1];if(!Array.isArray(Oe)&&typeof Oe=="object")return Te.error("First argument must be an image or text section.");const Be=[];let Ue=!1;for(let He=1;He<=e.length-1;++He){const We=e[He];if(Ue&&typeof We=="object"&&!Array.isArray(We)){Ue=!1;let Cn=null;if(We["font-scale"]&&(Cn=Te.parse(We["font-scale"],1,NumberType),!Cn))return null;let An=null;if(We["text-font"]&&(An=Te.parse(We["text-font"],1,array(StringType)),!An))return null;let En=null;if(We["text-color"]&&(En=Te.parse(We["text-color"],1,ColorType),!En))return null;let Sn=null;if(We["vertical-align"]){if(typeof We["vertical-align"]=="string"&&!VERTICAL_ALIGN_OPTIONS.includes(We["vertical-align"]))return Te.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${We["vertical-align"]}' instead.`);if(Sn=Te.parse(We["vertical-align"],1,StringType),!Sn)return null}const Tn=Be[Be.length-1];Tn.scale=Cn,Tn.font=An,Tn.textColor=En,Tn.verticalAlign=Sn}else{const Cn=Te.parse(e[He],1,ValueType);if(!Cn)return null;const An=Cn.type.kind;if(An!=="string"&&An!=="value"&&An!=="null"&&An!=="resolvedImage")return Te.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ue=!0,Be.push({content:Cn,scale:null,font:null,textColor:null,verticalAlign:null})}}return new FormatExpression(Be)}evaluate(e){const Te=Oe=>{const Be=Oe.content.evaluate(e);return typeOf(Be)===ResolvedImageType?new FormattedSection("",Be,null,null,null,Oe.verticalAlign?Oe.verticalAlign.evaluate(e):null):new FormattedSection(valueToString(Be),null,Oe.scale?Oe.scale.evaluate(e):null,Oe.font?Oe.font.evaluate(e).join(","):null,Oe.textColor?Oe.textColor.evaluate(e):null,Oe.verticalAlign?Oe.verticalAlign.evaluate(e):null)};return new Formatted(this.sections.map(Te))}eachChild(e){for(const Te of this.sections)e(Te.content),Te.scale&&e(Te.scale),Te.font&&e(Te.font),Te.textColor&&e(Te.textColor),Te.verticalAlign&&e(Te.verticalAlign)}outputDefined(){return!1}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,Te){if(e.length!==2)return Te.error("Expected two arguments.");const Oe=Te.parse(e[1],1,StringType);return Oe?new ImageExpression(Oe):Te.error("No image name provided.")}evaluate(e){const Te=this.input.evaluate(e),Oe=ResolvedImage.fromString(Te);return Oe&&e.availableImages&&(Oe.available=e.availableImages.indexOf(Te)>-1),Oe}eachChild(e){e(this.input)}outputDefined(){return!1}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,Te){if(e.length!==2)return Te.error(`Expected 1 argument, but found ${e.length-1} instead.`);const Oe=Te.parse(e[1],1);return Oe?Oe.type.kind!=="array"&&Oe.type.kind!=="string"&&Oe.type.kind!=="value"?Te.error(`Expected argument of type string or array, but found ${typeToString(Oe.type)} instead.`):new Length(Oe):null}evaluate(e){const Te=this.input.evaluate(e);if(typeof Te=="string")return[...Te].length;if(Array.isArray(Te))return Te.length;throw new RuntimeError(`Expected value to be of type string or array, but found ${typeToString(typeOf(Te))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const EXTENT=8192;function getTileCoordinates(ke,e){const Te=mercatorXfromLng(ke[0]),Oe=mercatorYfromLat(ke[1]),Be=Math.pow(2,e.z);return[Math.round(Te*Be*EXTENT),Math.round(Oe*Be*EXTENT)]}function getLngLatFromTileCoord(ke,e){const Te=Math.pow(2,e.z),Oe=(ke[0]/EXTENT+e.x)/Te,Be=(ke[1]/EXTENT+e.y)/Te;return[lngFromMercatorXfromLng(Oe),latFromMercatorY(Be)]}function mercatorXfromLng(ke){return(180+ke)/360}function lngFromMercatorXfromLng(ke){return ke*360-180}function mercatorYfromLat(ke){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ke*Math.PI/360)))/360}function latFromMercatorY(ke){return 360/Math.PI*Math.atan(Math.exp((180-ke*360)*Math.PI/180))-90}function updateBBox(ke,e){ke[0]=Math.min(ke[0],e[0]),ke[1]=Math.min(ke[1],e[1]),ke[2]=Math.max(ke[2],e[0]),ke[3]=Math.max(ke[3],e[1])}function boxWithinBox(ke,e){return!(ke[0]<=e[0]||ke[2]>=e[2]||ke[1]<=e[1]||ke[3]>=e[3])}function rayIntersect(ke,e,Te){return e[1]>ke[1]!=Te[1]>ke[1]&&ke[0]<(Te[0]-e[0])*(ke[1]-e[1])/(Te[1]-e[1])+e[0]}function pointOnBoundary(ke,e,Te){const Oe=ke[0]-e[0],Be=ke[1]-e[1],Ue=ke[0]-Te[0],He=ke[1]-Te[1];return Oe*He-Ue*Be===0&&Oe*Ue<=0&&Be*He<=0}function segmentIntersectSegment(ke,e,Te,Oe){const Be=[e[0]-ke[0],e[1]-ke[1]],Ue=[Oe[0]-Te[0],Oe[1]-Te[1]];return perp(Ue,Be)===0?!1:!!(twoSided(ke,e,Te,Oe)&&twoSided(Te,Oe,ke,e))}function lineIntersectPolygon(ke,e,Te){for(const Oe of Te)for(let Be=0;Be<Oe.length-1;++Be)if(segmentIntersectSegment(ke,e,Oe[Be],Oe[Be+1]))return!0;return!1}function pointWithinPolygon(ke,e,Te=!1){let Oe=!1;for(const Be of e)for(let Ue=0;Ue<Be.length-1;Ue++){if(pointOnBoundary(ke,Be[Ue],Be[Ue+1]))return Te;rayIntersect(ke,Be[Ue],Be[Ue+1])&&(Oe=!Oe)}return Oe}function pointWithinPolygons(ke,e){for(const Te of e)if(pointWithinPolygon(ke,Te))return!0;return!1}function lineStringWithinPolygon(ke,e){for(const Te of ke)if(!pointWithinPolygon(Te,e))return!1;for(let Te=0;Te<ke.length-1;++Te)if(lineIntersectPolygon(ke[Te],ke[Te+1],e))return!1;return!0}function lineStringWithinPolygons(ke,e){for(const Te of e)if(lineStringWithinPolygon(ke,Te))return!0;return!1}function perp(ke,e){return ke[0]*e[1]-ke[1]*e[0]}function twoSided(ke,e,Te,Oe){const Be=ke[0]-Te[0],Ue=ke[1]-Te[1],He=e[0]-Te[0],We=e[1]-Te[1],Cn=Oe[0]-Te[0],An=Oe[1]-Te[1],En=Be*An-Cn*Ue,Sn=He*An-Cn*We;return En>0&&Sn<0||En<0&&Sn>0}function getTilePolygon(ke,e,Te){const Oe=[];for(let Be=0;Be<ke.length;Be++){const Ue=[];for(let He=0;He<ke[Be].length;He++){const We=getTileCoordinates(ke[Be][He],Te);updateBBox(e,We),Ue.push(We)}Oe.push(Ue)}return Oe}function getTilePolygons(ke,e,Te){const Oe=[];for(let Be=0;Be<ke.length;Be++){const Ue=getTilePolygon(ke[Be],e,Te);Oe.push(Ue)}return Oe}function updatePoint(ke,e,Te,Oe){if(ke[0]<Te[0]||ke[0]>Te[2]){const Be=Oe*.5;let Ue=ke[0]-Te[0]>Be?-Oe:Te[0]-ke[0]>Be?Oe:0;Ue===0&&(Ue=ke[0]-Te[2]>Be?-Oe:Te[2]-ke[0]>Be?Oe:0),ke[0]+=Ue}updateBBox(e,ke)}function resetBBox(ke){ke[0]=ke[1]=1/0,ke[2]=ke[3]=-1/0}function getTilePoints(ke,e,Te,Oe){const Be=Math.pow(2,Oe.z)*EXTENT,Ue=[Oe.x*EXTENT,Oe.y*EXTENT],He=[];for(const We of ke)for(const Cn of We){const An=[Cn.x+Ue[0],Cn.y+Ue[1]];updatePoint(An,e,Te,Be),He.push(An)}return He}function getTileLines(ke,e,Te,Oe){const Be=Math.pow(2,Oe.z)*EXTENT,Ue=[Oe.x*EXTENT,Oe.y*EXTENT],He=[];for(const We of ke){const Cn=[];for(const An of We){const En=[An.x+Ue[0],An.y+Ue[1]];updateBBox(e,En),Cn.push(En)}He.push(Cn)}if(e[2]-e[0]<=Be/2){resetBBox(e);for(const We of He)for(const Cn of We)updatePoint(Cn,e,Te,Be)}return He}function pointsWithinPolygons(ke,e){const Te=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],Be=ke.canonicalID();if(e.type==="Polygon"){const Ue=getTilePolygon(e.coordinates,Oe,Be),He=getTilePoints(ke.geometry(),Te,Oe,Be);if(!boxWithinBox(Te,Oe))return!1;for(const We of He)if(!pointWithinPolygon(We,Ue))return!1}if(e.type==="MultiPolygon"){const Ue=getTilePolygons(e.coordinates,Oe,Be),He=getTilePoints(ke.geometry(),Te,Oe,Be);if(!boxWithinBox(Te,Oe))return!1;for(const We of He)if(!pointWithinPolygons(We,Ue))return!1}return!0}function linesWithinPolygons(ke,e){const Te=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],Be=ke.canonicalID();if(e.type==="Polygon"){const Ue=getTilePolygon(e.coordinates,Oe,Be),He=getTileLines(ke.geometry(),Te,Oe,Be);if(!boxWithinBox(Te,Oe))return!1;for(const We of He)if(!lineStringWithinPolygon(We,Ue))return!1}if(e.type==="MultiPolygon"){const Ue=getTilePolygons(e.coordinates,Oe,Be),He=getTileLines(ke.geometry(),Te,Oe,Be);if(!boxWithinBox(Te,Oe))return!1;for(const We of He)if(!lineStringWithinPolygons(We,Ue))return!1}return!0}class Within{constructor(e,Te){this.type=BooleanType,this.geojson=e,this.geometries=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const Oe=e[1];if(Oe.type==="FeatureCollection"){const Be=[];for(const Ue of Oe.features){const{type:He,coordinates:We}=Ue.geometry;He==="Polygon"&&Be.push(We),He==="MultiPolygon"&&Be.push(...We)}if(Be.length){const Ue={type:"MultiPolygon",coordinates:Be};return new Within(Oe,Ue)}}else if(Oe.type==="Feature"){const Be=Oe.geometry.type;if(Be==="Polygon"||Be==="MultiPolygon")return new Within(Oe,Oe.geometry)}else if(Oe.type==="Polygon"||Oe.type==="MultiPolygon")return new Within(Oe,Oe)}return Te.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class TinyQueue{constructor(e=[],Te=(Oe,Be)=>Oe<Be?-1:Oe>Be?1:0){if(this.data=e,this.length=this.data.length,this.compare=Te,this.length>0)for(let Oe=(this.length>>1)-1;Oe>=0;Oe--)this._down(Oe)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],Te=this.data.pop();return--this.length>0&&(this.data[0]=Te,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:Te,compare:Oe}=this,Be=Te[e];for(;e>0;){const Ue=e-1>>1,He=Te[Ue];if(Oe(Be,He)>=0)break;Te[e]=He,e=Ue}Te[e]=Be}_down(e){const{data:Te,compare:Oe}=this,Be=this.length>>1,Ue=Te[e];for(;e<Be;){let He=(e<<1)+1;const We=He+1;if(We<this.length&&Oe(Te[We],Te[He])<0&&(He=We),Oe(Te[He],Ue)>=0)break;Te[e]=Te[He],e=He}Te[e]=Ue}}function classifyRings(ke,e){if(ke.length<=1)return[ke];const Oe=[];let Be,Ue;for(const He of ke){const We=calculateSignedArea(He);We!==0&&(He.area=Math.abs(We),Ue===void 0&&(Ue=We<0),Ue===We<0?(Be&&Oe.push(Be),Be=[He]):Be.push(He))}return Be&&Oe.push(Be),Oe}function calculateSignedArea(ke){let e=0;for(let Te=0,Oe=ke.length,Be=Oe-1,Ue,He;Te<Oe;Be=Te++)Ue=ke[Te],He=ke[Be],e+=(He.x-Ue.x)*(Ue.y+He.y);return e}const RE=6378.137,FE=1/298.257223563,E2=FE*(2-FE),RAD=Math.PI/180;class CheapRuler{constructor(e){const Te=RAD*RE*1e3,Oe=Math.cos(e*RAD),Be=1/(1-E2*(1-Oe*Oe)),Ue=Math.sqrt(Be);this.kx=Te*Ue*Oe,this.ky=Te*Ue*Be*(1-E2)}distance(e,Te){const Oe=this.wrap(e[0]-Te[0])*this.kx,Be=(e[1]-Te[1])*this.ky;return Math.sqrt(Oe*Oe+Be*Be)}pointOnLine(e,Te){let Oe=1/0,Be,Ue,He,We;for(let Cn=0;Cn<e.length-1;Cn++){let An=e[Cn][0],En=e[Cn][1],Sn=this.wrap(e[Cn+1][0]-An)*this.kx,Tn=(e[Cn+1][1]-En)*this.ky,Ln=0;(Sn!==0||Tn!==0)&&(Ln=(this.wrap(Te[0]-An)*this.kx*Sn+(Te[1]-En)*this.ky*Tn)/(Sn*Sn+Tn*Tn),Ln>1?(An=e[Cn+1][0],En=e[Cn+1][1]):Ln>0&&(An+=Sn/this.kx*Ln,En+=Tn/this.ky*Ln)),Sn=this.wrap(Te[0]-An)*this.kx,Tn=(Te[1]-En)*this.ky;const Bn=Sn*Sn+Tn*Tn;Bn<Oe&&(Oe=Bn,Be=An,Ue=En,He=Cn,We=Ln)}return{point:[Be,Ue],index:He,t:Math.max(0,Math.min(1,We))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const MinPointsSize=100,MinLinePointsSize=50;function compareDistPair(ke,e){return e[0]-ke[0]}function getRangeSize(ke){return ke[1]-ke[0]+1}function isRangeSafe(ke,e){return ke[1]>=ke[0]&&ke[1]<e}function splitRange(ke,e){if(ke[0]>ke[1])return[null,null];const Te=getRangeSize(ke);if(e){if(Te===2)return[ke,null];const Be=Math.floor(Te/2);return[[ke[0],ke[0]+Be],[ke[0]+Be,ke[1]]]}if(Te===1)return[ke,null];const Oe=Math.floor(Te/2)-1;return[[ke[0],ke[0]+Oe],[ke[0]+Oe+1,ke[1]]]}function getBBox(ke,e){if(!isRangeSafe(e,ke.length))return[1/0,1/0,-1/0,-1/0];const Te=[1/0,1/0,-1/0,-1/0];for(let Oe=e[0];Oe<=e[1];++Oe)updateBBox(Te,ke[Oe]);return Te}function getPolygonBBox(ke){const e=[1/0,1/0,-1/0,-1/0];for(const Te of ke)for(const Oe of Te)updateBBox(e,Oe);return e}function isValidBBox(ke){return ke[0]!==-1/0&&ke[1]!==-1/0&&ke[2]!==1/0&&ke[3]!==1/0}function bboxToBBoxDistance(ke,e,Te){if(!isValidBBox(ke)||!isValidBBox(e))return NaN;let Oe=0,Be=0;return ke[2]<e[0]&&(Oe=e[0]-ke[2]),ke[0]>e[2]&&(Oe=ke[0]-e[2]),ke[1]>e[3]&&(Be=ke[1]-e[3]),ke[3]<e[1]&&(Be=e[1]-ke[3]),Te.distance([0,0],[Oe,Be])}function pointToLineDistance(ke,e,Te){const Oe=Te.pointOnLine(e,ke);return Te.distance(ke,Oe.point)}function segmentToSegmentDistance(ke,e,Te,Oe,Be){const Ue=Math.min(pointToLineDistance(ke,[Te,Oe],Be),pointToLineDistance(e,[Te,Oe],Be)),He=Math.min(pointToLineDistance(Te,[ke,e],Be),pointToLineDistance(Oe,[ke,e],Be));return Math.min(Ue,He)}function lineToLineDistance(ke,e,Te,Oe,Be){if(!(isRangeSafe(e,ke.length)&&isRangeSafe(Oe,Te.length)))return 1/0;let He=1/0;for(let We=e[0];We<e[1];++We){const Cn=ke[We],An=ke[We+1];for(let En=Oe[0];En<Oe[1];++En){const Sn=Te[En],Tn=Te[En+1];if(segmentIntersectSegment(Cn,An,Sn,Tn))return 0;He=Math.min(He,segmentToSegmentDistance(Cn,An,Sn,Tn,Be))}}return He}function pointsToPointsDistance(ke,e,Te,Oe,Be){if(!(isRangeSafe(e,ke.length)&&isRangeSafe(Oe,Te.length)))return NaN;let He=1/0;for(let We=e[0];We<=e[1];++We)for(let Cn=Oe[0];Cn<=Oe[1];++Cn)if(He=Math.min(He,Be.distance(ke[We],Te[Cn])),He===0)return He;return He}function pointToPolygonDistance(ke,e,Te){if(pointWithinPolygon(ke,e,!0))return 0;let Oe=1/0;for(const Be of e){const Ue=Be[0],He=Be[Be.length-1];if(Ue!==He&&(Oe=Math.min(Oe,pointToLineDistance(ke,[He,Ue],Te)),Oe===0))return Oe;const We=Te.pointOnLine(Be,ke);if(Oe=Math.min(Oe,Te.distance(ke,We.point)),Oe===0)return Oe}return Oe}function lineToPolygonDistance(ke,e,Te,Oe){if(!isRangeSafe(e,ke.length))return NaN;for(let Ue=e[0];Ue<=e[1];++Ue)if(pointWithinPolygon(ke[Ue],Te,!0))return 0;let Be=1/0;for(let Ue=e[0];Ue<e[1];++Ue){const He=ke[Ue],We=ke[Ue+1];for(const Cn of Te)for(let An=0,En=Cn.length,Sn=En-1;An<En;Sn=An++){const Tn=Cn[Sn],Ln=Cn[An];if(segmentIntersectSegment(He,We,Tn,Ln))return 0;Be=Math.min(Be,segmentToSegmentDistance(He,We,Tn,Ln,Oe))}}return Be}function polygonIntersect(ke,e){for(const Te of ke)for(const Oe of Te)if(pointWithinPolygon(Oe,e,!0))return!0;return!1}function polygonToPolygonDistance(ke,e,Te,Oe=1/0){const Be=getPolygonBBox(ke),Ue=getPolygonBBox(e);if(Oe!==1/0&&bboxToBBoxDistance(Be,Ue,Te)>=Oe)return Oe;if(boxWithinBox(Be,Ue)){if(polygonIntersect(ke,e))return 0}else if(polygonIntersect(e,ke))return 0;let He=1/0;for(const We of ke)for(let Cn=0,An=We.length,En=An-1;Cn<An;En=Cn++){const Sn=We[En],Tn=We[Cn];for(const Ln of e)for(let Bn=0,ei=Ln.length,ni=ei-1;Bn<ei;ni=Bn++){const ti=Ln[ni],ri=Ln[Bn];if(segmentIntersectSegment(Sn,Tn,ti,ri))return 0;He=Math.min(He,segmentToSegmentDistance(Sn,Tn,ti,ri,Te))}}return He}function updateQueue(ke,e,Te,Oe,Be,Ue){if(!Ue)return;const He=bboxToBBoxDistance(getBBox(Oe,Ue),Be,Te);He<e&&ke.push([He,Ue,[0,0]])}function updateQueueTwoSets(ke,e,Te,Oe,Be,Ue,He){if(!Ue||!He)return;const We=bboxToBBoxDistance(getBBox(Oe,Ue),getBBox(Be,He),Te);We<e&&ke.push([We,Ue,He])}function pointsToPolygonDistance(ke,e,Te,Oe,Be=1/0){let Ue=Math.min(Oe.distance(ke[0],Te[0][0]),Be);if(Ue===0)return Ue;const He=new TinyQueue([[0,[0,ke.length-1],[0,0]]],compareDistPair),We=getPolygonBBox(Te);for(;He.length>0;){const Cn=He.pop();if(Cn[0]>=Ue)continue;const An=Cn[1],En=e?MinLinePointsSize:MinPointsSize;if(getRangeSize(An)<=En){if(!isRangeSafe(An,ke.length))return NaN;if(e){const Sn=lineToPolygonDistance(ke,An,Te,Oe);if(isNaN(Sn)||Sn===0)return Sn;Ue=Math.min(Ue,Sn)}else for(let Sn=An[0];Sn<=An[1];++Sn){const Tn=pointToPolygonDistance(ke[Sn],Te,Oe);if(Ue=Math.min(Ue,Tn),Ue===0)return 0}}else{const Sn=splitRange(An,e);updateQueue(He,Ue,Oe,ke,We,Sn[0]),updateQueue(He,Ue,Oe,ke,We,Sn[1])}}return Ue}function pointSetToPointSetDistance(ke,e,Te,Oe,Be,Ue=1/0){let He=Math.min(Ue,Be.distance(ke[0],Te[0]));if(He===0)return He;const We=new TinyQueue([[0,[0,ke.length-1],[0,Te.length-1]]],compareDistPair);for(;We.length>0;){const Cn=We.pop();if(Cn[0]>=He)continue;const An=Cn[1],En=Cn[2],Sn=e?MinLinePointsSize:MinPointsSize,Tn=Oe?MinLinePointsSize:MinPointsSize;if(getRangeSize(An)<=Sn&&getRangeSize(En)<=Tn){if(!isRangeSafe(An,ke.length)&&isRangeSafe(En,Te.length))return NaN;let Ln;if(e&&Oe)Ln=lineToLineDistance(ke,An,Te,En,Be),He=Math.min(He,Ln);else if(e&&!Oe){const Bn=ke.slice(An[0],An[1]+1);for(let ei=En[0];ei<=En[1];++ei)if(Ln=pointToLineDistance(Te[ei],Bn,Be),He=Math.min(He,Ln),He===0)return He}else if(!e&&Oe){const Bn=Te.slice(En[0],En[1]+1);for(let ei=An[0];ei<=An[1];++ei)if(Ln=pointToLineDistance(ke[ei],Bn,Be),He=Math.min(He,Ln),He===0)return He}else Ln=pointsToPointsDistance(ke,An,Te,En,Be),He=Math.min(He,Ln)}else{const Ln=splitRange(An,e),Bn=splitRange(En,Oe);updateQueueTwoSets(We,He,Be,ke,Te,Ln[0],Bn[0]),updateQueueTwoSets(We,He,Be,ke,Te,Ln[0],Bn[1]),updateQueueTwoSets(We,He,Be,ke,Te,Ln[1],Bn[0]),updateQueueTwoSets(We,He,Be,ke,Te,Ln[1],Bn[1])}}return He}function pointToGeometryDistance(ke,e){const Te=ke.geometry(),Oe=Te.flat().map(He=>getLngLatFromTileCoord([He.x,He.y],ke.canonical));if(Te.length===0)return NaN;const Be=new CheapRuler(Oe[0][1]);let Ue=1/0;for(const He of e){switch(He.type){case"Point":Ue=Math.min(Ue,pointSetToPointSetDistance(Oe,!1,[He.coordinates],!1,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointSetToPointSetDistance(Oe,!1,He.coordinates,!0,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,pointsToPolygonDistance(Oe,!1,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function lineStringToGeometryDistance(ke,e){const Te=ke.geometry(),Oe=Te.flat().map(He=>getLngLatFromTileCoord([He.x,He.y],ke.canonical));if(Te.length===0)return NaN;const Be=new CheapRuler(Oe[0][1]);let Ue=1/0;for(const He of e){switch(He.type){case"Point":Ue=Math.min(Ue,pointSetToPointSetDistance(Oe,!0,[He.coordinates],!1,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointSetToPointSetDistance(Oe,!0,He.coordinates,!0,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,pointsToPolygonDistance(Oe,!0,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function polygonToGeometryDistance(ke,e){const Te=ke.geometry();if(Te.length===0||Te[0].length===0)return NaN;const Oe=classifyRings(Te).map(He=>He.map(We=>We.map(Cn=>getLngLatFromTileCoord([Cn.x,Cn.y],ke.canonical)))),Be=new CheapRuler(Oe[0][0][0][1]);let Ue=1/0;for(const He of e)for(const We of Oe){switch(He.type){case"Point":Ue=Math.min(Ue,pointsToPolygonDistance([He.coordinates],!1,We,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointsToPolygonDistance(He.coordinates,!0,We,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,polygonToPolygonDistance(We,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function toSimpleGeometry(ke){return ke.type==="MultiPolygon"?ke.coordinates.map(e=>({type:"Polygon",coordinates:e})):ke.type==="MultiLineString"?ke.coordinates.map(e=>({type:"LineString",coordinates:e})):ke.type==="MultiPoint"?ke.coordinates.map(e=>({type:"Point",coordinates:e})):[ke]}class Distance{constructor(e,Te){this.type=NumberType,this.geojson=e,this.geometries=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const Oe=e[1];if(Oe.type==="FeatureCollection")return new Distance(Oe,Oe.features.map(Be=>toSimpleGeometry(Be.geometry)).flat());if(Oe.type==="Feature")return new Distance(Oe,toSimpleGeometry(Oe.geometry));if("type"in Oe&&"coordinates"in Oe)return new Distance(Oe,toSimpleGeometry(Oe))}return Te.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointToGeometryDistance(e,this.geometries);if(e.geometryType()==="LineString")return lineStringToGeometryDistance(e,this.geometries);if(e.geometryType()==="Polygon")return polygonToGeometryDistance(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const expressions$1={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion,at:At$1,boolean:Assertion,case:Case,coalesce:Coalesce,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In,"index-of":IndexOf,interpolate:Interpolate,"interpolate-hcl":Interpolate,"interpolate-lab":Interpolate,length:Length,let:Let,literal:Literal,match:Match,number:Assertion,"number-format":NumberFormat,object:Assertion,slice:Slice,step:Step,string:Assertion,"to-boolean":Coercion,"to-color":Coercion,"to-number":Coercion,"to-string":Coercion,var:Var,within:Within,distance:Distance};class CompoundExpression{constructor(e,Te,Oe,Be){this.name=e,this.type=Te,this._evaluate=Oe,this.args=Be}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,Te){const Oe=e[0],Be=CompoundExpression.definitions[Oe];if(!Be)return Te.error(`Unknown expression "${Oe}". If you wanted a literal array, use ["literal", [...]].`,0);const Ue=Array.isArray(Be)?Be[0]:Be.type,He=Array.isArray(Be)?[[Be[1],Be[2]]]:Be.overloads,We=He.filter(([An])=>!Array.isArray(An)||An.length===e.length-1);let Cn=null;for(const[An,En]of We){Cn=new ParsingContext(Te.registry,isExpressionConstant,Te.path,null,Te.scope);const Sn=[];let Tn=!1;for(let Ln=1;Ln<e.length;Ln++){const Bn=e[Ln],ei=Array.isArray(An)?An[Ln-1]:An.type,ni=Cn.parse(Bn,1+Sn.length,ei);if(!ni){Tn=!0;break}Sn.push(ni)}if(!Tn){if(Array.isArray(An)&&An.length!==Sn.length){Cn.error(`Expected ${An.length} arguments, but found ${Sn.length} instead.`);continue}for(let Ln=0;Ln<Sn.length;Ln++){const Bn=Array.isArray(An)?An[Ln]:An.type,ei=Sn[Ln];Cn.concat(Ln+1).checkSubtype(Bn,ei.type)}if(Cn.errors.length===0)return new CompoundExpression(Oe,Ue,En,Sn)}}if(We.length===1)Te.errors.push(...Cn.errors);else{const En=(We.length?We:He).map(([Tn])=>stringifySignature(Tn)).join(" | "),Sn=[];for(let Tn=1;Tn<e.length;Tn++){const Ln=Te.parse(e[Tn],1+Sn.length);if(!Ln)return null;Sn.push(typeToString(Ln.type))}Te.error(`Expected arguments of type ${En}, but found (${Sn.join(", ")}) instead.`)}return null}static register(e,Te){CompoundExpression.definitions=Te;for(const Oe in Te)e[Oe]=CompoundExpression}}function rgba(ke,[e,Te,Oe,Be]){e=e.evaluate(ke),Te=Te.evaluate(ke),Oe=Oe.evaluate(ke);const Ue=Be?Be.evaluate(ke):1,He=validateRGBA(e,Te,Oe,Ue);if(He)throw new RuntimeError(He);return new Color(e/255,Te/255,Oe/255,Ue,!1)}function has(ke,e){return ke in e}function get$1(ke,e){const Te=e[ke];return typeof Te>"u"?null:Te}function binarySearch(ke,e,Te,Oe){for(;Te<=Oe;){const Be=Te+Oe>>1;if(e[Be]===ke)return!0;e[Be]>ke?Oe=Be-1:Te=Be+1}return!1}function varargs(ke){return{type:ke}}CompoundExpression.register(expressions$1,{error:[ErrorType,[StringType],(ke,[e])=>{throw new RuntimeError(e.evaluate(ke))}],typeof:[StringType,[ValueType],(ke,[e])=>typeToString(typeOf(e.evaluate(ke)))],"to-rgba":[array(NumberType,4),[ColorType],(ke,[e])=>{const[Te,Oe,Be,Ue]=e.evaluate(ke).rgb;return[Te*255,Oe*255,Be*255,Ue]}],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(ke,[e])=>has(e.evaluate(ke),ke.properties())],[[StringType,ObjectType],(ke,[e,Te])=>has(e.evaluate(ke),Te.evaluate(ke))]]},get:{type:ValueType,overloads:[[[StringType],(ke,[e])=>get$1(e.evaluate(ke),ke.properties())],[[StringType,ObjectType],(ke,[e,Te])=>get$1(e.evaluate(ke),Te.evaluate(ke))]]},"feature-state":[ValueType,[StringType],(ke,[e])=>get$1(e.evaluate(ke),ke.featureState||{})],properties:[ObjectType,[],ke=>ke.properties()],"geometry-type":[StringType,[],ke=>ke.geometryType()],id:[ValueType,[],ke=>ke.id()],zoom:[NumberType,[],ke=>ke.globals.zoom],"heatmap-density":[NumberType,[],ke=>ke.globals.heatmapDensity||0],"line-progress":[NumberType,[],ke=>ke.globals.lineProgress||0],accumulated:[ValueType,[],ke=>ke.globals.accumulated===void 0?null:ke.globals.accumulated],"+":[NumberType,varargs(NumberType),(ke,e)=>{let Te=0;for(const Oe of e)Te+=Oe.evaluate(ke);return Te}],"*":[NumberType,varargs(NumberType),(ke,e)=>{let Te=1;for(const Oe of e)Te*=Oe.evaluate(ke);return Te}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(ke,[e,Te])=>e.evaluate(ke)-Te.evaluate(ke)],[[NumberType],(ke,[e])=>-e.evaluate(ke)]]},"/":[NumberType,[NumberType,NumberType],(ke,[e,Te])=>e.evaluate(ke)/Te.evaluate(ke)],"%":[NumberType,[NumberType,NumberType],(ke,[e,Te])=>e.evaluate(ke)%Te.evaluate(ke)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(ke,[e,Te])=>Math.pow(e.evaluate(ke),Te.evaluate(ke))],sqrt:[NumberType,[NumberType],(ke,[e])=>Math.sqrt(e.evaluate(ke))],log10:[NumberType,[NumberType],(ke,[e])=>Math.log(e.evaluate(ke))/Math.LN10],ln:[NumberType,[NumberType],(ke,[e])=>Math.log(e.evaluate(ke))],log2:[NumberType,[NumberType],(ke,[e])=>Math.log(e.evaluate(ke))/Math.LN2],sin:[NumberType,[NumberType],(ke,[e])=>Math.sin(e.evaluate(ke))],cos:[NumberType,[NumberType],(ke,[e])=>Math.cos(e.evaluate(ke))],tan:[NumberType,[NumberType],(ke,[e])=>Math.tan(e.evaluate(ke))],asin:[NumberType,[NumberType],(ke,[e])=>Math.asin(e.evaluate(ke))],acos:[NumberType,[NumberType],(ke,[e])=>Math.acos(e.evaluate(ke))],atan:[NumberType,[NumberType],(ke,[e])=>Math.atan(e.evaluate(ke))],min:[NumberType,varargs(NumberType),(ke,e)=>Math.min(...e.map(Te=>Te.evaluate(ke)))],max:[NumberType,varargs(NumberType),(ke,e)=>Math.max(...e.map(Te=>Te.evaluate(ke)))],abs:[NumberType,[NumberType],(ke,[e])=>Math.abs(e.evaluate(ke))],round:[NumberType,[NumberType],(ke,[e])=>{const Te=e.evaluate(ke);return Te<0?-Math.round(-Te):Math.round(Te)}],floor:[NumberType,[NumberType],(ke,[e])=>Math.floor(e.evaluate(ke))],ceil:[NumberType,[NumberType],(ke,[e])=>Math.ceil(e.evaluate(ke))],"filter-==":[BooleanType,[StringType,ValueType],(ke,[e,Te])=>ke.properties()[e.value]===Te.value],"filter-id-==":[BooleanType,[ValueType],(ke,[e])=>ke.id()===e.value],"filter-type-==":[BooleanType,[StringType],(ke,[e])=>ke.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(ke,[e,Te])=>{const Oe=ke.properties()[e.value],Be=Te.value;return typeof Oe==typeof Be&&Oe<Be}],"filter-id-<":[BooleanType,[ValueType],(ke,[e])=>{const Te=ke.id(),Oe=e.value;return typeof Te==typeof Oe&&Te<Oe}],"filter->":[BooleanType,[StringType,ValueType],(ke,[e,Te])=>{const Oe=ke.properties()[e.value],Be=Te.value;return typeof Oe==typeof Be&&Oe>Be}],"filter-id->":[BooleanType,[ValueType],(ke,[e])=>{const Te=ke.id(),Oe=e.value;return typeof Te==typeof Oe&&Te>Oe}],"filter-<=":[BooleanType,[StringType,ValueType],(ke,[e,Te])=>{const Oe=ke.properties()[e.value],Be=Te.value;return typeof Oe==typeof Be&&Oe<=Be}],"filter-id-<=":[BooleanType,[ValueType],(ke,[e])=>{const Te=ke.id(),Oe=e.value;return typeof Te==typeof Oe&&Te<=Oe}],"filter->=":[BooleanType,[StringType,ValueType],(ke,[e,Te])=>{const Oe=ke.properties()[e.value],Be=Te.value;return typeof Oe==typeof Be&&Oe>=Be}],"filter-id->=":[BooleanType,[ValueType],(ke,[e])=>{const Te=ke.id(),Oe=e.value;return typeof Te==typeof Oe&&Te>=Oe}],"filter-has":[BooleanType,[ValueType],(ke,[e])=>e.value in ke.properties()],"filter-has-id":[BooleanType,[],ke=>ke.id()!==null&&ke.id()!==void 0],"filter-type-in":[BooleanType,[array(StringType)],(ke,[e])=>e.value.indexOf(ke.geometryType())>=0],"filter-id-in":[BooleanType,[array(ValueType)],(ke,[e])=>e.value.indexOf(ke.id())>=0],"filter-in-small":[BooleanType,[StringType,array(ValueType)],(ke,[e,Te])=>Te.value.indexOf(ke.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array(ValueType)],(ke,[e,Te])=>binarySearch(ke.properties()[e.value],Te.value,0,Te.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(ke,[e,Te])=>e.evaluate(ke)&&Te.evaluate(ke)],[varargs(BooleanType),(ke,e)=>{for(const Te of e)if(!Te.evaluate(ke))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(ke,[e,Te])=>e.evaluate(ke)||Te.evaluate(ke)],[varargs(BooleanType),(ke,e)=>{for(const Te of e)if(Te.evaluate(ke))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(ke,[e])=>!e.evaluate(ke)],"is-supported-script":[BooleanType,[StringType],(ke,[e])=>{const Te=ke.globals&&ke.globals.isSupportedScript;return Te?Te(e.evaluate(ke)):!0}],upcase:[StringType,[StringType],(ke,[e])=>e.evaluate(ke).toUpperCase()],downcase:[StringType,[StringType],(ke,[e])=>e.evaluate(ke).toLowerCase()],concat:[StringType,varargs(ValueType),(ke,e)=>e.map(Te=>valueToString(Te.evaluate(ke))).join("")],"resolved-locale":[StringType,[CollatorType],(ke,[e])=>e.evaluate(ke).resolvedLocale()]});function stringifySignature(ke){return Array.isArray(ke)?`(${ke.map(typeToString).join(", ")})`:`(${typeToString(ke.type)}...)`}function isExpressionConstant(ke){if(ke instanceof Var)return isExpressionConstant(ke.boundExpression);if(ke instanceof CompoundExpression&&ke.name==="error")return!1;if(ke instanceof CollatorExpression)return!1;if(ke instanceof Within)return!1;if(ke instanceof Distance)return!1;const e=ke instanceof Coercion||ke instanceof Assertion;let Te=!0;return ke.eachChild(Oe=>{e?Te=Te&&isExpressionConstant(Oe):Te=Te&&Oe instanceof Literal}),Te?isFeatureConstant(ke)&&isGlobalPropertyConstant(ke,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function isFeatureConstant(ke){if(ke instanceof CompoundExpression){if(ke.name==="get"&&ke.args.length===1)return!1;if(ke.name==="feature-state")return!1;if(ke.name==="has"&&ke.args.length===1)return!1;if(ke.name==="properties"||ke.name==="geometry-type"||ke.name==="id")return!1;if(/^filter-/.test(ke.name))return!1}if(ke instanceof Within||ke instanceof Distance)return!1;let e=!0;return ke.eachChild(Te=>{e&&!isFeatureConstant(Te)&&(e=!1)}),e}function isStateConstant(ke){if(ke instanceof CompoundExpression&&ke.name==="feature-state")return!1;let e=!0;return ke.eachChild(Te=>{e&&!isStateConstant(Te)&&(e=!1)}),e}function isGlobalPropertyConstant(ke,e){if(ke instanceof CompoundExpression&&e.indexOf(ke.name)>=0)return!1;let Te=!0;return ke.eachChild(Oe=>{Te&&!isGlobalPropertyConstant(Oe,e)&&(Te=!1)}),Te}function success(ke){return{result:"success",value:ke}}function error(ke){return{result:"error",value:ke}}function supportsPropertyExpression(ke){return ke["property-type"]==="data-driven"||ke["property-type"]==="cross-faded-data-driven"}function supportsZoomExpression(ke){return!!ke.expression&&ke.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(ke){return!!ke.expression&&ke.expression.interpolated}function isFunction$1(ke){return typeof ke=="object"&&ke!==null&&!Array.isArray(ke)}class StyleExpression{constructor(e,Te){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext,this._defaultValue=Te?getDefaultValue(Te):null,this._enumValues=Te&&Te.type==="enum"?Te.values:null}evaluateWithoutErrorHandling(e,Te,Oe,Be,Ue,He){return this._evaluator.globals=e,this._evaluator.feature=Te,this._evaluator.featureState=Oe,this._evaluator.canonical=Be,this._evaluator.availableImages=Ue||null,this._evaluator.formattedSection=He,this.expression.evaluate(this._evaluator)}evaluate(e,Te,Oe,Be,Ue,He){this._evaluator.globals=e,this._evaluator.feature=Te||null,this._evaluator.featureState=Oe||null,this._evaluator.canonical=Be,this._evaluator.availableImages=Ue||null,this._evaluator.formattedSection=He||null;try{const We=this.expression.evaluate(this._evaluator);if(We==null||typeof We=="number"&&We!==We)return this._defaultValue;if(this._enumValues&&!(We in this._enumValues))throw new RuntimeError(`Expected value to be one of ${Object.keys(this._enumValues).map(Cn=>JSON.stringify(Cn)).join(", ")}, but found ${JSON.stringify(We)} instead.`);return We}catch(We){return this._warningHistory[We.message]||(this._warningHistory[We.message]=!0,typeof console<"u"&&console.warn(We.message)),this._defaultValue}}}function isExpression(ke){return Array.isArray(ke)&&ke.length>0&&typeof ke[0]=="string"&&ke[0]in expressions$1}function createExpression(ke,e){const Te=new ParsingContext(expressions$1,isExpressionConstant,[],e?getExpectedType(e):void 0),Oe=Te.parse(ke,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return Oe?success(new StyleExpression(Oe,e)):error(Te.errors)}class ZoomConstantExpression{constructor(e,Te){this.kind=e,this._styleExpression=Te,this.isStateDependent=e!=="constant"&&!isStateConstant(Te.expression)}evaluateWithoutErrorHandling(e,Te,Oe,Be,Ue,He){return this._styleExpression.evaluateWithoutErrorHandling(e,Te,Oe,Be,Ue,He)}evaluate(e,Te,Oe,Be,Ue,He){return this._styleExpression.evaluate(e,Te,Oe,Be,Ue,He)}}class ZoomDependentExpression{constructor(e,Te,Oe,Be){this.kind=e,this.zoomStops=Oe,this._styleExpression=Te,this.isStateDependent=e!=="camera"&&!isStateConstant(Te.expression),this.interpolationType=Be}evaluateWithoutErrorHandling(e,Te,Oe,Be,Ue,He){return this._styleExpression.evaluateWithoutErrorHandling(e,Te,Oe,Be,Ue,He)}evaluate(e,Te,Oe,Be,Ue,He){return this._styleExpression.evaluate(e,Te,Oe,Be,Ue,He)}interpolationFactor(e,Te,Oe){return this.interpolationType?Interpolate.interpolationFactor(this.interpolationType,e,Te,Oe):0}}function createPropertyExpression(ke,e){const Te=createExpression(ke,e);if(Te.result==="error")return Te;const Oe=Te.value.expression,Be=isFeatureConstant(Oe);if(!Be&&!supportsPropertyExpression(e))return error([new ExpressionParsingError("","data expressions not supported")]);const Ue=isGlobalPropertyConstant(Oe,["zoom"]);if(!Ue&&!supportsZoomExpression(e))return error([new ExpressionParsingError("","zoom expressions not supported")]);const He=findZoomCurve(Oe);if(!He&&!Ue)return error([new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(He instanceof ExpressionParsingError)return error([He]);if(He instanceof Interpolate&&!supportsInterpolation(e))return error([new ExpressionParsingError("",'"interpolate" expressions cannot be used with this property')]);if(!He)return success(Be?new ZoomConstantExpression("constant",Te.value):new ZoomConstantExpression("source",Te.value));const We=He instanceof Interpolate?He.interpolation:void 0;return success(Be?new ZoomDependentExpression("camera",Te.value,He.labels,We):new ZoomDependentExpression("composite",Te.value,He.labels,We))}function findZoomCurve(ke){let e=null;if(ke instanceof Let)e=findZoomCurve(ke.result);else if(ke instanceof Coalesce){for(const Te of ke.args)if(e=findZoomCurve(Te),e)break}else(ke instanceof Step||ke instanceof Interpolate)&&ke.input instanceof CompoundExpression&&ke.input.name==="zoom"&&(e=ke);return e instanceof ExpressionParsingError||ke.eachChild(Te=>{const Oe=findZoomCurve(Te);Oe instanceof ExpressionParsingError?e=Oe:!e&&Oe?e=new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&Oe&&e!==Oe&&(e=new ExpressionParsingError("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(ke){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,padding:PaddingType,projectionDefinition:ProjectionDefinitionType,resolvedImage:ResolvedImageType,variableAnchorOffsetCollection:VariableAnchorOffsetCollectionType};return ke.type==="array"?array(e[ke.value]||ValueType,ke.length):e[ke.type]}function getDefaultValue(ke){return ke.type==="color"&&isFunction$1(ke.default)?new Color(0,0,0,0):ke.type==="color"?Color.parse(ke.default)||null:ke.type==="padding"?Padding.parse(ke.default)||null:ke.type==="variableAnchorOffsetCollection"?VariableAnchorOffsetCollection.parse(ke.default)||null:ke.type==="projectionDefinition"?ProjectionDefinition.parse(ke.default)||null:ke.default===void 0?null:ke.default}function isExpressionFilter(ke){if(ke===!0||ke===!1)return!0;if(!Array.isArray(ke)||ke.length===0)return!1;switch(ke[0]){case"has":return ke.length>=2&&ke[1]!=="$id"&&ke[1]!=="$type";case"in":return ke.length>=3&&(typeof ke[1]!="string"||Array.isArray(ke[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return ke.length!==3||Array.isArray(ke[1])||Array.isArray(ke[2]);case"any":case"all":for(const e of ke.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const filterSpec={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function featureFilter(ke){if(ke==null)return{filter:()=>!0,needGeometry:!1};isExpressionFilter(ke)||(ke=convertFilter$1(ke));const e=createExpression(ke,filterSpec);if(e.result==="error")throw new Error(e.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));{const Te=geometryNeeded(ke);return{filter:(Oe,Be,Ue)=>e.value.evaluate(Oe,Be,{},Ue),needGeometry:Te}}}function compare(ke,e){return ke<e?-1:ke>e?1:0}function geometryNeeded(ke){if(!Array.isArray(ke))return!1;if(ke[0]==="within"||ke[0]==="distance")return!0;for(let e=1;e<ke.length;e++)if(geometryNeeded(ke[e]))return!0;return!1}function convertFilter$1(ke){if(!ke)return!0;const e=ke[0];return ke.length<=1?e!=="any":e==="=="?convertComparisonOp$1(ke[1],ke[2],"=="):e==="!="?convertNegation(convertComparisonOp$1(ke[1],ke[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp$1(ke[1],ke[2],e):e==="any"?convertDisjunctionOp(ke.slice(1)):e==="all"?["all"].concat(ke.slice(1).map(convertFilter$1)):e==="none"?["all"].concat(ke.slice(1).map(convertFilter$1).map(convertNegation)):e==="in"?convertInOp$1(ke[1],ke.slice(2)):e==="!in"?convertNegation(convertInOp$1(ke[1],ke.slice(2))):e==="has"?convertHasOp$1(ke[1]):e==="!has"?convertNegation(convertHasOp$1(ke[1])):!0}function convertComparisonOp$1(ke,e,Te){switch(ke){case"$type":return[`filter-type-${Te}`,e];case"$id":return[`filter-id-${Te}`,e];default:return[`filter-${Te}`,ke,e]}}function convertDisjunctionOp(ke){return["any"].concat(ke.map(convertFilter$1))}function convertInOp$1(ke,e){if(e.length===0)return!1;switch(ke){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(Te=>typeof Te!=typeof e[0])?["filter-in-large",ke,["literal",e.sort(compare)]]:["filter-in-small",ke,["literal",e]]}}function convertHasOp$1(ke){switch(ke){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",ke]}}function convertNegation(ke){return["!",ke]}function convertLiteral(ke){return typeof ke=="object"?["literal",ke]:ke}function convertFunction(ke,e){let Te=ke.stops;if(!Te)return convertIdentityFunction(ke,e);const Oe=Te&&typeof Te[0][0]=="object",Be=Oe||ke.property!==void 0,Ue=Oe||!Be;return Te=Te.map(He=>!Be&&e.tokens&&typeof He[1]=="string"?[He[0],convertTokenString(He[1])]:[He[0],convertLiteral(He[1])]),Oe?convertZoomAndPropertyFunction(ke,e,Te):Ue?convertZoomFunction(ke,e,Te):convertPropertyFunction(ke,e,Te)}function convertIdentityFunction(ke,e){const Te=["get",ke.property];if(ke.default===void 0)return e.type==="string"?["string",Te]:Te;if(e.type==="enum")return["match",Te,Object.keys(e.values),Te,ke.default];{const Oe=[e.type==="color"?"to-color":e.type,Te,convertLiteral(ke.default)];return e.type==="array"&&Oe.splice(1,0,e.value,e.length||null),Oe}}function getInterpolateOperator(ke){switch(ke.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(ke,e,Te){const Oe={},Be={},Ue=[];for(let We=0;We<Te.length;We++){const Cn=Te[We],An=Cn[0].zoom;Oe[An]===void 0&&(Oe[An]={zoom:An,type:ke.type,property:ke.property,default:ke.default},Be[An]=[],Ue.push(An)),Be[An].push([Cn[0].value,Cn[1]])}if(getFunctionType({},e)==="exponential"){const We=[getInterpolateOperator(ke),["linear"],["zoom"]];for(const Cn of Ue){const An=convertPropertyFunction(Oe[Cn],e,Be[Cn]);appendStopPair(We,Cn,An,!1)}return We}else{const We=["step",["zoom"]];for(const Cn of Ue){const An=convertPropertyFunction(Oe[Cn],e,Be[Cn]);appendStopPair(We,Cn,An,!0)}return fixupDegenerateStepCurve(We),We}}function coalesce(ke,e){if(ke!==void 0)return ke;if(e!==void 0)return e}function getFallback(ke,e){const Te=convertLiteral(coalesce(ke.default,e.default));return Te===void 0&&e.type==="resolvedImage"?"":Te}function convertPropertyFunction(ke,e,Te){const Oe=getFunctionType(ke,e),Be=["get",ke.property];if(Oe==="categorical"&&typeof Te[0][0]=="boolean"){const Ue=["case"];for(const He of Te)Ue.push(["==",Be,He[0]],He[1]);return Ue.push(getFallback(ke,e)),Ue}else if(Oe==="categorical"){const Ue=["match",Be];for(const He of Te)appendStopPair(Ue,He[0],He[1],!1);return Ue.push(getFallback(ke,e)),Ue}else if(Oe==="interval"){const Ue=["step",["number",Be]];for(const He of Te)appendStopPair(Ue,He[0],He[1],!0);return fixupDegenerateStepCurve(Ue),ke.default===void 0?Ue:["case",["==",["typeof",Be],"number"],Ue,convertLiteral(ke.default)]}else if(Oe==="exponential"){const Ue=ke.base!==void 0?ke.base:1,He=[getInterpolateOperator(ke),Ue===1?["linear"]:["exponential",Ue],["number",Be]];for(const We of Te)appendStopPair(He,We[0],We[1],!1);return ke.default===void 0?He:["case",["==",["typeof",Be],"number"],He,convertLiteral(ke.default)]}else throw new Error(`Unknown property function type ${Oe}`)}function convertZoomFunction(ke,e,Te,Oe=["zoom"]){const Be=getFunctionType(ke,e);let Ue,He=!1;if(Be==="interval")Ue=["step",Oe],He=!0;else if(Be==="exponential"){const We=ke.base!==void 0?ke.base:1;Ue=[getInterpolateOperator(ke),We===1?["linear"]:["exponential",We],Oe]}else throw new Error(`Unknown zoom function type "${Be}"`);for(const We of Te)appendStopPair(Ue,We[0],We[1],He);return fixupDegenerateStepCurve(Ue),Ue}function fixupDegenerateStepCurve(ke){ke[0]==="step"&&ke.length===3&&(ke.push(0),ke.push(ke[3]))}function appendStopPair(ke,e,Te,Oe){ke.length>3&&e===ke[ke.length-2]||(Oe&&ke.length===2||ke.push(e),ke.push(Te))}function getFunctionType(ke,e){return ke.type?ke.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(ke){const e=["concat"],Te=/{([^{}]+)}/g;let Oe=0;for(let Be=Te.exec(ke);Be!==null;Be=Te.exec(ke)){const Ue=ke.slice(Oe,Te.lastIndex-Be[0].length);Oe=Te.lastIndex,Ue.length>0&&e.push(Ue),e.push(["get",Be[1]])}if(e.length===1)return ke;if(Oe<ke.length)e.push(ke.slice(Oe));else if(e.length===2)return["to-string",e[1]];return e}const v8=v8Spec;var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={};function mb2css(ke,e,Te){var Oe=fontCache[ke];if(!Oe){Array.isArray(ke)||(ke=[ke]);for(var Be=400,Ue="normal",He=[],We,Cn,An=0,En=ke.length;An<En;++An){var Sn=ke[An],Tn=Sn.split(" "),Ln=Tn[Tn.length-1].toLowerCase();Ln=="normal"||Ln=="italic"||Ln=="oblique"?(Ue=Cn?Ue:Ln,Cn=!0,Tn.pop(),Ln=Tn[Tn.length-1].toLowerCase()):italicRE.test(Ln)&&(Ln=Ln.replace(italicRE,""),Ue=Cn?Ue:Tn[Tn.length-1].replace(Ln,""),Cn=!0);for(var Bn in fontWeights){var ei=Tn.length>1?Tn[Tn.length-2].toLowerCase():"";if(Ln==Bn||Ln==Bn.replace("-","")||ei+"-"+Ln==Bn){Be=We?Be:fontWeights[Bn],Tn.pop(),ei&&Bn.startsWith(ei)&&Tn.pop();break}}!We&&typeof Ln=="number"&&(Be=Ln,We=!0);var ni=Tn.join(sp).replace("Klokantech Noto Sans","Noto Sans");ni.indexOf(sp)!==-1&&(ni='"'+ni+'"'),He.push(ni)}Oe=fontCache[ke]=[Ue,Be,He]}return Oe[0]+sp+Oe[1]+sp+e+"px"+(Te?"/"+Te:"")+sp+Oe[2]}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,Te){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=Te===void 0?1:Te,this.down_=null;const Oe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Oe,this.pointerdownListenerKey_=listen(Oe,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(Oe,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let Te=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(Te),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Te=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(Te)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Oe=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(Oe)},250)}updateActivePointers_(e){const Te=e,Oe=Te.pointerId;if(Te.type==MapBrowserEventType.POINTERUP||Te.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[Oe];for(const Be in this.trackedTouches_)if(this.trackedTouches_[Be].target!==Te.target){delete this.trackedTouches_[Be];break}}else(Te.type==MapBrowserEventType.POINTERDOWN||Te.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[Oe]=Te);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const Te=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(Te),this.emulateClicks_&&!Te.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const Te=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Te),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const Oe=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(Oe,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(Oe,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Oe&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const Te=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Te)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const Te=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,Te))}handleTouchMove_(e){const Te=this.originalPointerMoveEvent_;(!Te||Te.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,Te){this.priorityFunction_=e,this.keyFunction_=Te,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,Te=this.priorities_,Oe=e[0];e.length==1?(e.length=0,Te.length=0):(e[0]=e.pop(),Te[0]=Te.pop(),this.siftUp_(0));const Be=this.keyFunction_(Oe);return delete this.queuedElements_[Be],Oe}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const Te=this.priorityFunction_(e);return Te!=DROP?(this.elements_.push(e),this.priorities_.push(Te),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const Te=this.elements_,Oe=this.priorities_,Be=Te.length,Ue=Te[e],He=Oe[e],We=e;for(;e<Be>>1;){const Cn=this.getLeftChildIndex_(e),An=this.getRightChildIndex_(e),En=An<Be&&Oe[An]<Oe[Cn]?An:Cn;Te[e]=Te[En],Oe[e]=Oe[En],e=En}Te[e]=Ue,Oe[e]=He,this.siftDown_(We,e)}siftDown_(e,Te){const Oe=this.elements_,Be=this.priorities_,Ue=Oe[Te],He=Be[Te];for(;Te>e;){const We=this.getParentIndex_(Te);if(Be[We]>He)Oe[Te]=Oe[We],Be[Te]=Be[We],Te=We;else break}Oe[Te]=Ue,Be[Te]=He}reprioritize(){const e=this.priorityFunction_,Te=this.elements_,Oe=this.priorities_;let Be=0;const Ue=Te.length;let He,We,Cn;for(We=0;We<Ue;++We)He=Te[We],Cn=e(He),Cn==DROP?delete this.queuedElements_[this.keyFunction_(He)]:(Oe[Be]=Cn,Te[Be++]=He);Te.length=Be,Oe.length=Be,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,Te){super(Oe=>e.apply(null,Oe),Oe=>Oe[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=Te,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const Te=super.enqueue(e);return Te&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),Te}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const Te=e.target,Oe=Te.getState();if(Oe===TileState.LOADED||Oe===TileState.ERROR||Oe===TileState.EMPTY){Oe!==TileState.ERROR&&Te.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const Be=Te.getKey();Be in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[Be],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,Te){let Oe=0;for(;this.tilesLoading_<e&&Oe<Te&&this.getCount()>0;){const Be=this.dequeue()[0],Ue=Be.getKey();Be.getState()===TileState.IDLE&&!(Ue in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Ue]=!0,++this.tilesLoading_,++Oe,Be.load())}}}function getTilePriority(ke,e,Te,Oe,Be){if(!ke||!(Te in ke.wantedTiles)||!ke.wantedTiles[Te][e.getKey()])return DROP;const Ue=ke.viewState.center,He=Oe[0]-Ue[0],We=Oe[1]-Ue[1];return 65536*Math.log(Be)+Math.sqrt(He*He+We*We)/Be}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const Te=e.className!==void 0?e.className:"ol-attribution",Oe=e.tipLabel!==void 0?e.tipLabel:"Attributions",Be=e.expandClassName!==void 0?e.expandClassName:Te+"-expand",Ue=e.collapseLabel!==void 0?e.collapseLabel:"",He=e.collapseClassName!==void 0?e.collapseClassName:Te+"-collapse";typeof Ue=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ue,this.collapseLabel_.className=He):this.collapseLabel_=Ue;const We=e.label!==void 0?e.label:"i";typeof We=="string"?(this.label_=document.createElement("span"),this.label_.textContent=We,this.label_.className=Be):this.label_=We;const Cn=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=Oe,this.toggleButton_.appendChild(Cn),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const An=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),En=this.element;En.className=An,En.appendChild(this.toggleButton_),En.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const Te=this.getMap().getAllLayers(),Oe=new Set(Te.flatMap(Be=>Be.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(Be=>Oe.add(Be)):Oe.add(this.attributions_)),!this.overrideCollapsible_){const Be=!Te.some(Ue=>{var He;return((He=Ue.getSource())==null?void 0:He.getAttributionsCollapsible())===!1});this.setCollapsible(Be)}return Array.from(Oe)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const Te=await Promise.all(this.collectSourceAttributions_(e).map(Be=>toPromise(()=>Be))),Oe=Te.length>0;if(this.renderedVisible_!=Oe&&(this.element.style.display=Oe?"":"none",this.renderedVisible_=Oe),!equals$2(Te,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=document.createElement("li");He.innerHTML=Te[Be],this.ulElement_.appendChild(He)}this.renderedAttributions_=Te}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const Te=e.className!==void 0?e.className:"ol-rotate",Oe=e.label!==void 0?e.label:"",Be=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof Oe=="string"?(this.label_=document.createElement("span"),this.label_.className=Be,this.label_.textContent=Oe):(this.label_=Oe,this.label_.classList.add(Be));const Ue=e.tipLabel?e.tipLabel:"Reset rotation",He=document.createElement("button");He.className=Te+"-reset",He.setAttribute("type","button"),He.title=Ue,He.appendChild(this.label_),He.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const We=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Cn=this.element;Cn.className=We,Cn.appendChild(He),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const Te=this.getMap().getView();if(!Te)return;const Oe=Te.getRotation();Oe!==void 0&&(this.duration_>0&&Oe%(2*Math.PI)!==0?Te.animate({rotation:0,duration:this.duration_,easing:easeOut}):Te.setRotation(0))}render(e){const Te=e.frameState;if(!Te)return;const Oe=Te.viewState.rotation;if(Oe!=this.rotation_){const Be="rotate("+Oe+"rad)";if(this.autoHide_){const Ue=this.element.classList.contains(CLASS_HIDDEN);!Ue&&Oe===0?this.element.classList.add(CLASS_HIDDEN):Ue&&Oe!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=Be}this.rotation_=Oe}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const Te=e.className!==void 0?e.className:"ol-zoom",Oe=e.delta!==void 0?e.delta:1,Be=e.zoomInClassName!==void 0?e.zoomInClassName:Te+"-in",Ue=e.zoomOutClassName!==void 0?e.zoomOutClassName:Te+"-out",He=e.zoomInLabel!==void 0?e.zoomInLabel:"+",We=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",Cn=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",An=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",En=document.createElement("button");En.className=Be,En.setAttribute("type","button"),En.title=Cn,En.appendChild(typeof He=="string"?document.createTextNode(He):He),En.addEventListener(EventType.CLICK,this.handleClick_.bind(this,Oe),!1);const Sn=document.createElement("button");Sn.className=Ue,Sn.setAttribute("type","button"),Sn.title=An,Sn.appendChild(typeof We=="string"?document.createTextNode(We):We),Sn.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-Oe),!1);const Tn=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Ln=this.element;Ln.className=Tn,Ln.appendChild(En),Ln.appendChild(Sn),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,Te){Te.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const Oe=this.getMap().getView();if(!Oe)return;const Be=Oe.getZoom();if(Be!==void 0){const Ue=Oe.getConstrainedZoom(Be+e);this.duration_>0?(Oe.getAnimating()&&Oe.cancelAnimations(),Oe.animate({zoom:Ue,duration:this.duration_,easing:easeOut})):Oe.setZoom(Ue)}}}function defaults$1(ke){ke=ke||{};const e=new Collection;return(ke.zoom!==void 0?ke.zoom:!0)&&e.push(new Zoom(ke.zoomOptions)),(ke.rotate!==void 0?ke.rotate:!0)&&e.push(new Rotate(ke.rotateOptions)),(ke.attribution!==void 0?ke.attribution:!0)&&e.push(new Attribution(ke.attributionOptions)),e}class GroupEvent extends BaseEvent{constructor(e,Te){super(e),this.layer=Te}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.layers;let Oe=e.layers;super(Te),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),Oe?Array.isArray(Oe)?Oe=new Collection(Oe.slice(),{unique:!0}):assert(typeof Oe.getArray=="function","Expected `layers` to be an array or a `Collection`"):Oe=new Collection(void 0,{unique:!0}),this.setLayers(Oe)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const Oe in this.listenerKeys_)this.listenerKeys_[Oe].forEach(unlistenByKey);clear$1(this.listenerKeys_);const Te=e.getArray();for(let Oe=0,Be=Te.length;Oe<Be;Oe++){const Ue=Te[Oe];this.registerLayerListeners_(Ue),this.dispatchEvent(new GroupEvent("addlayer",Ue))}this.changed()}registerLayerListeners_(e){const Te=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&Te.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=Te}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const Te=e.element;this.registerLayerListeners_(Te),this.dispatchEvent(new GroupEvent("addlayer",Te)),this.changed()}handleLayersRemove_(e){const Te=e.element,Oe=getUid(Te);this.listenerKeys_[Oe].forEach(unlistenByKey),delete this.listenerKeys_[Oe],this.dispatchEvent(new GroupEvent("removelayer",Te)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const Te=this.getLayers();if(Te){const Oe=Te.getArray();for(let Be=0,Ue=Oe.length;Be<Ue;++Be)this.dispatchEvent(new GroupEvent("removelayer",Oe[Be]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(Te){Te.getLayersArray(e)}),e}getLayerStatesArray(e){const Te=e!==void 0?e:[],Oe=Te.length;this.getLayers().forEach(function(He){He.getLayerStatesArray(Te)});const Be=this.getLayerState();let Ue=Be.zIndex;!e&&Be.zIndex===void 0&&(Ue=0);for(let He=Oe,We=Te.length;He<We;He++){const Cn=Te[He];Cn.opacity*=Be.opacity,Cn.visible=Cn.visible&&Be.visible,Cn.maxResolution=Math.min(Cn.maxResolution,Be.maxResolution),Cn.minResolution=Math.max(Cn.minResolution,Be.minResolution),Cn.minZoom=Math.max(Cn.minZoom,Be.minZoom),Cn.maxZoom=Math.min(Cn.maxZoom,Be.maxZoom),Be.extent!==void 0&&(Cn.extent!==void 0?Cn.extent=getIntersection(Cn.extent,Be.extent):Cn.extent=Be.extent),Cn.zIndex===void 0&&(Cn.zIndex=Ue)}return Te}getSourceState(){return"ready"}}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,Te){abstract()}calculateMatrices2D(e){const Te=e.viewState,Oe=e.coordinateToPixelTransform,Be=e.pixelToCoordinateTransform;compose(Oe,e.size[0]/2,e.size[1]/2,1/Te.resolution,-1/Te.resolution,-Te.rotation,-Te.center[0],-Te.center[1]),makeInverse(Be,Oe)}forEachFeatureAtCoordinate(e,Te,Oe,Be,Ue,He,We,Cn){let An;const En=Te.viewState;function Sn(ai,ci,Pi,vi){return Ue.call(He,ci,ai?Pi:null,vi)}const Tn=En.projection,Ln=wrapX$1(e.slice(),Tn),Bn=[[0,0]];if(Tn.canWrapX()&&Be){const ai=Tn.getExtent(),ci=getWidth(ai);Bn.push([-ci,0],[ci,0])}const ei=Te.layerStatesArray,ni=ei.length,ti=[],ri=[];for(let ai=0;ai<Bn.length;ai++)for(let ci=ni-1;ci>=0;--ci){const Pi=ei[ci],vi=Pi.layer;if(vi.hasRenderer()&&inView(Pi,En)&&We.call(Cn,vi)){const pi=vi.getRenderer(),Mi=vi.getSource();if(pi&&Mi){const Fi=Mi.getWrapX()?Ln:e,fi=Sn.bind(null,Pi.managed);ri[0]=Fi[0]+Bn[ai][0],ri[1]=Fi[1]+Bn[ai][1],An=pi.forEachFeatureAtCoordinate(ri,Te,Oe,fi,ti)}if(An)return An}}if(ti.length===0)return;const oi=1/ti.length;return ti.forEach((ai,ci)=>ai.distanceSq+=ci*oi),ti.sort((ai,ci)=>ai.distanceSq-ci.distanceSq),ti.some(ai=>An=ai.callback(ai.feature,ai.layer,ai.geometry)),An}hasFeatureAtCoordinate(e,Te,Oe,Be,Ue,He){return this.forEachFeatureAtCoordinate(e,Te,Oe,Be,TRUE,this,Ue,He)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(ke,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const Te=this.element_.style;Te.position="absolute",Te.width="100%",Te.height="100%",Te.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const Oe=e.getViewport();Oe.insertBefore(this.element_,Oe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,Te){const Oe=this.getMap();if(Oe.hasListener(e)){const Be=new RenderEvent(e,void 0,Te);Oe.dispatchEvent(Be)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const Te=e.layerStatesArray.sort((We,Cn)=>We.zIndex-Cn.zIndex);Te.some(We=>We.layer instanceof BaseVectorLayer&&We.layer.getDeclutter())&&(e.declutter={});const Be=e.viewState;this.children_.length=0;const Ue=[];let He=null;for(let We=0,Cn=Te.length;We<Cn;++We){const An=Te[We];e.layerIndex=We;const En=An.layer,Sn=En.getSourceState();if(!inView(An,Be)||Sn!="ready"&&Sn!="undefined"){En.unrender();continue}const Tn=En.render(e,He);Tn&&(Tn!==He&&(this.children_.push(Tn),He=Tn),Ue.push(An))}this.declutter(e,Ue),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,Te){if(e.declutter){for(let Oe=Te.length-1;Oe>=0;--Oe){const Be=Te[Oe],Ue=Be.layer;Ue.getDeclutter()&&Ue.renderDeclutter(e,Be)}Te.forEach(Oe=>Oe.layer.renderDeferred(e))}}}function removeLayerMapProperty(ke){if(ke instanceof Layer$1){ke.setMapInternal(null);return}ke instanceof LayerGroup&&ke.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(ke,e){if(ke instanceof Layer$1){ke.setMapInternal(e);return}if(ke instanceof LayerGroup){const Te=ke.getLayers().getArray();for(let Oe=0,Be=Te.length;Oe<Be;++Oe)setLayerMapProperty(Te[Oe],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const Te=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=Te.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Te.controls||defaults$1(),this.interactions=Te.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=Te.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(Te.values);const Oe=this;e.view&&!(e.view instanceof View)&&e.view.then(function(Be){Oe.setView(new View(Be))}),this.controls.addEventListener(CollectionEventType.ADD,Be=>{Be.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,Be=>{Be.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,Be=>{Be.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,Be=>{Be.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,Be=>{this.addOverlayInternal_(Be.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,Be=>{const Ue=Be.element.getId();Ue!==void 0&&delete this.overlayIdIndex_[Ue.toString()],Be.element.setMap(null)}),this.controls.forEach(Be=>{Be.setMap(this)}),this.interactions.forEach(Be=>{Be.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const Te=e.getId();Te!==void 0&&(this.overlayIdIndex_[Te.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,Te,Oe){if(!this.frameState_||!this.renderer_)return;const Be=this.getCoordinateFromPixelInternal(e);Oe=Oe!==void 0?Oe:{};const Ue=Oe.hitTolerance!==void 0?Oe.hitTolerance:0,He=Oe.layerFilter!==void 0?Oe.layerFilter:TRUE,We=Oe.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(Be,this.frameState_,Ue,We,Te,null,He,null)}getFeaturesAtPixel(e,Te){const Oe=[];return this.forEachFeatureAtPixel(e,function(Be){Oe.push(Be)},Te),Oe}getAllLayers(){const e=[];function Te(Oe){Oe.forEach(function(Be){Be instanceof LayerGroup?Te(Be.getLayers()):e.push(Be)})}return Te(this.getLayers()),e}hasFeatureAtPixel(e,Te){if(!this.frameState_||!this.renderer_)return!1;const Oe=this.getCoordinateFromPixelInternal(e);Te=Te!==void 0?Te:{};const Be=Te.layerFilter!==void 0?Te.layerFilter:TRUE,Ue=Te.hitTolerance!==void 0?Te.hitTolerance:0,He=Te.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(Oe,this.frameState_,Ue,He,Be,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const Oe=this.viewport_.getBoundingClientRect(),Be=this.getSize(),Ue=Oe.width/Be[0],He=Oe.height/Be[1],We="changedTouches"in e?e.changedTouches[0]:e;return[(We.clientX-Oe.left)/Ue,(We.clientY-Oe.top)/He]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const Te=this.frameState_;return Te?apply(Te.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const Te=this.overlayIdIndex_[e.toString()];return Te!==void 0?Te:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const Te=this.getLayerGroup();if(e instanceof Collection){Te.setLayers(e);return}const Oe=Te.getLayers();Oe.clear(),Oe.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let Te=0,Oe=e.length;Te<Oe;++Te){const Be=e[Te];if(!Be.visible)continue;const Ue=Be.layer.getRenderer();if(Ue&&!Ue.ready)return!0;const He=Be.layer.getSource();if(He&&He.loading)return!0}return!1}getPixelFromCoordinate(e){const Te=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Te)}getPixelFromCoordinateInternal(e){const Te=this.frameState_;return Te?apply(Te.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,Te,Oe,Be){return getTilePriority(this.frameState_,e,Te,Oe,Be)}handleBrowserEvent(e,Te){Te=Te||e.type;const Oe=new MapBrowserEvent(Te,this,e);this.handleMapBrowserEvent(Oe)}handleMapBrowserEvent(e){if(!this.frameState_)return;const Te=e.originalEvent,Oe=Te.type;if(Oe===PointerEventType.POINTERDOWN||Oe===EventType.WHEEL||Oe===EventType.KEYDOWN){const Be=this.getOwnerDocument(),Ue=this.viewport_.getRootNode?this.viewport_.getRootNode():Be,He=Te.target,We=Ue instanceof ShadowRoot?Ue.host===He?Ue.host.ownerDocument:Ue:Ue===Be?Be.documentElement:Ue;if(this.overlayContainerStopEvent_.contains(He)||!We.contains(He))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const Be=this.getInteractions().getArray().slice();for(let Ue=Be.length-1;Ue>=0;Ue--){const He=Be[Ue];if(He.getMap()!==this||!He.getActive()||!this.getTargetElement())continue;if(!He.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,Te=this.tileQueue_;if(!Te.isEmpty()){let Be=this.maxTilesLoading_,Ue=Be;if(e){const He=e.viewHints;if(He[ViewHint.ANIMATING]||He[ViewHint.INTERACTING]){const We=Date.now()-e.time>8;Be=We?0:8,Ue=We?0:2}}Te.getTilesLoading()<Be&&(Te.reprioritize(),Te.loadMoreTiles(Be,Ue))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const Oe=this.postRenderFunctions_;if(e)for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be](this,e);Oe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Oe=0,Be=this.targetChangeHandlerKeys_.length;Oe<Be;++Oe)unlistenByKey(this.targetChangeHandlerKeys_[Oe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Oe=this.targetElement_.getRootNode();Oe instanceof ShadowRoot&&this.resizeObserver_.unobserve(Oe.host),this.setSize(void 0)}const e=this.getTarget(),Te=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=Te,!Te)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{Te.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Ue in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Ue],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let Oe;if(this.keyboardEventTarget_)Oe=this.keyboardEventTarget_;else{const Ue=Te.getRootNode();Oe=Ue instanceof ShadowRoot?Ue.host:Te}this.targetChangeHandlerKeys_=[listen(Oe,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(Oe,EventType.KEYPRESS,this.handleBrowserEvent,this)];const Be=Te.getRootNode();Be instanceof ShadowRoot&&this.resizeObserver_.observe(Be.host),this.resizeObserver_.observe(Te)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let Te=0,Oe=e.length;Te<Oe;++Te){const Be=e[Te].layer;Be.hasRenderer()&&Be.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const Te=this.getSize(),Oe=this.getView(),Be=this.frameState_;let Ue=null;if(Te!==void 0&&hasArea(Te)&&Oe&&Oe.isDef()){const He=Oe.getHints(this.frameState_?this.frameState_.viewHints:void 0),We=Oe.getState();if(Ue={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(We.center,We.resolution,We.rotation,Te),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Te,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:We,viewHints:He,wantedTiles:{},mapId:getUid(this),renderTargets:{}},We.nextCenter&&We.nextResolution){const Cn=isNaN(We.nextRotation)?We.rotation:We.nextRotation;Ue.nextExtent=getForViewAndSize(We.nextCenter,We.nextResolution,Cn,Te)}}this.frameState_=Ue,this.renderer_.renderFrame(Ue),Ue&&(Ue.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Ue.postRenderFunctions),Be&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Ue.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,Be)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Ue.viewHints[ViewHint.ANIMATING]&&!Ue.viewHints[ViewHint.INTERACTING]&&!equals$1(Ue.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Ue)),clone$1(Ue.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Ue)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const Te=this.getLayerGroup();Te&&this.handleLayerRemove_(new GroupEvent("removelayer",Te)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const Te=this;e.then(function(Oe){Te.setView(new View(Oe))})}updateSize(){const e=this.getTargetElement();let Te;if(e){const Be=getComputedStyle(e),Ue=e.offsetWidth-parseFloat(Be.borderLeftWidth)-parseFloat(Be.paddingLeft)-parseFloat(Be.paddingRight)-parseFloat(Be.borderRightWidth),He=e.offsetHeight-parseFloat(Be.borderTopWidth)-parseFloat(Be.paddingTop)-parseFloat(Be.paddingBottom)-parseFloat(Be.borderBottomWidth);!isNaN(Ue)&&!isNaN(He)&&(Te=[Math.max(0,Ue),Math.max(0,He)],!hasArea(Te)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const Oe=this.getSize();Te&&(!Oe||!equals$2(Te,Oe))&&(this.setSize(Te),this.updateViewportSize_(Te))}updateViewportSize_(e){const Te=this.getView();Te&&Te.setViewportSize(e)}};function createOptionsInternal(ke){let e=null;ke.keyboardEventTarget!==void 0&&(e=typeof ke.keyboardEventTarget=="string"?document.getElementById(ke.keyboardEventTarget):ke.keyboardEventTarget);const Te={},Oe=ke.layers&&typeof ke.layers.getLayers=="function"?ke.layers:new LayerGroup({layers:ke.layers});Te[MapProperty.LAYERGROUP]=Oe,Te[MapProperty.TARGET]=ke.target,Te[MapProperty.VIEW]=ke.view instanceof View?ke.view:new View;let Be;ke.controls!==void 0&&(Array.isArray(ke.controls)?Be=new Collection(ke.controls.slice()):(assert(typeof ke.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),Be=ke.controls));let Ue;ke.interactions!==void 0&&(Array.isArray(ke.interactions)?Ue=new Collection(ke.interactions.slice()):(assert(typeof ke.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Ue=ke.interactions));let He;return ke.overlays!==void 0?Array.isArray(ke.overlays)?He=new Collection(ke.overlays.slice()):(assert(typeof ke.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),He=ke.overlays):He=new Collection,{controls:Be,interactions:Ue,keyboardEventTarget:e,overlays:He,values:Te}}const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(ke){const e="mapbox://";return ke.indexOf(e)!==0?"":ke.slice(e.length)}function normalizeSpriteUrl(ke,e,Te){const Oe=getMapboxPath(ke);if(!Oe)return decodeURI(new URL(ke,Te).href);const Be="sprites/";if(Oe.indexOf(Be)!==0)throw new Error(`unexpected sprites url: ${ke}`);const Ue=Oe.slice(Be.length);return`${mapboxBaseUrl}/styles/v1/${Ue}/sprite?access_token=${e}`}function normalizeStyleUrl(ke,e){const Te=getMapboxPath(ke);if(!Te)return decodeURI(new URL(ke,location.href).href);const Oe="styles/";if(Te.indexOf(Oe)!==0)throw new Error(`unexpected style url: ${ke}`);const Be=Te.slice(Oe.length);return`${mapboxBaseUrl}/styles/v1/${Be}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(ke,e,Te,Oe){const Be=new URL(ke,Oe||location.href),Ue=getMapboxPath(ke);if(!Ue)return e?(Be.searchParams.has(Te)||Be.searchParams.set(Te,e),[decodeURI(Be.href)]):[decodeURI(Be.href)];if(Ue==="mapbox.satellite"){const He=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${Ue}/{z}/{x}/{y}${He}.webp?access_token=${e}`]}return mapboxSubdomains.map(He=>`https://${He}.tiles.mapbox.com/v4/${Ue}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(ke){return ke.id||(ke.id=styleId++),ke.id}function getStyleFunctionKey(ke,e){return getStyleId(ke)+"."+getUid(e)}function getFunctionCache(ke){let e=functionCacheByStyleId[ke.id];return e||(e={},functionCacheByStyleId[getStyleId(ke)]=e),e}function getFilterCache(ke){let e=filterCacheByStyleId[ke.id];return e||(e={},filterCacheByStyleId[getStyleId(ke)]=e),e}function deg2rad(ke){return ke*Math.PI/180}const defaultResolutions=function(){const ke=[];for(let e=78271.51696402048;ke.length<=24;e/=2)ke.push(e);return ke}();function createCanvas(ke,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(ke,e);const Te=document.createElement("canvas");return Te.width=ke,Te.height=e,Te}function getZoomForResolution(ke,e){let Te=0;const Oe=e.length;for(;Te<Oe;++Te)if(e[Te]<ke&&Te+1<Oe){const Ue=e[Te]/e[Te+1];return Te+Math.log(e[Te]/ke)/Math.log(Ue)}return Oe-1}function getResolutionForZoom(ke,e){const Te=Math.floor(ke),Oe=Math.pow(2,ke-Te);return e[Te]/Oe}const pendingRequests={};function fetchResource(ke,e,Te={},Oe){if(e in pendingRequests)return Oe&&(Oe.url=pendingRequests[e][0].url),pendingRequests[e][1];const Be=Te.transformRequest&&Te.transformRequest(e,ke)||e,Ue=function(Cn){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))},He=function(Cn){return delete pendingRequests[e],Cn.ok?Cn.json():Promise.reject(new Error("Error fetching source "+e))},We=toPromise(()=>Be).then(Cn=>Cn instanceof Response?(Oe&&(Oe.url=Cn.url),He(Cn)):(Cn instanceof Request||(Cn=new Request(Cn)),Cn.headers.get("Accept")||Cn.headers.set("Accept","application/json"),Oe&&(Oe.url=Cn.url),fetch(Cn).then(He).catch(Ue))).catch(Ue);return pendingRequests[e]=[Be,We],We}function getGlStyle(ke,e){if(typeof ke=="string")if(ke.trim().startsWith("{"))try{const Te=JSON.parse(ke);return Promise.resolve(Te)}catch(Te){return Promise.reject(Te)}else return ke=normalizeStyleUrl(ke,e.accessToken),fetchResource("Style",ke,e);else return Promise.resolve(ke)}const tilejsonCache={};function getTileJson(ke,e,Te={}){const Oe=[e,JSON.stringify(ke)].toString();let Be=tilejsonCache[Oe];if(!Be||Te.transformRequest){let Ue;Te.transformRequest&&(Ue=(We,Cn)=>{const An=Te.transformRequest&&Te.transformRequest(Cn,"Tiles")||Cn;if(We instanceof VectorTile$1)We.setLoader((En,Sn,Tn)=>{const Ln=function(Bn){Bn.arrayBuffer().then(ei=>{const ti=We.getFormat().readFeatures(ei,{extent:En,featureProjection:Tn});We.setFeatures(ti)})};toPromise(()=>An).then(Bn=>{if(Bn instanceof Response)return Ln(Bn);fetch(Bn).then(Ln).catch(ei=>We.setState(TileState.ERROR))}).catch(Bn=>We.setState(TileState.ERROR))});else{const En=We.getImage();toPromise(()=>An).then(Sn=>{if(typeof Sn=="string"){En.src=Sn;return}const Tn=Ln=>Ln.blob().then(Bn=>{const ei=URL.createObjectURL(Bn);En.addEventListener("load",()=>URL.revokeObjectURL(ei)),En.addEventListener("error",()=>URL.revokeObjectURL(ei)),En.src=ei});if(Sn instanceof Response)return Tn(Sn);fetch(Sn).then(Tn).catch(Ln=>We.setState(TileState.ERROR))}).catch(Sn=>We.setState(TileState.ERROR))}});const He=ke.url;if(He&&!ke.tiles){const We=normalizeSourceUrl(He,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href);if(He.startsWith("mapbox://"))Be=Promise.resolve({tileJson:Object.assign({},ke,{url:void 0,tiles:We}),tileLoadFunction:Ue});else{const Cn={};Be=fetchResource("Source",We[0],Te,Cn).then(function(An){return An.tiles=An.tiles.map(function(En){return An.scheme==="tms"&&(En=En.replace("{y}","{-y}")),normalizeSourceUrl(En,Te.accessToken,Te.accessTokenParam||"access_token",Cn.url)[0]}),Promise.resolve({tileJson:An,tileLoadFunction:Ue})})}}else ke=Object.assign({},ke,{tiles:ke.tiles.map(function(We){return ke.scheme==="tms"&&(We=We.replace("{y}","{-y}")),normalizeSourceUrl(We,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href)[0]})}),Be=Promise.resolve({tileJson:Object.assign({},ke),tileLoadFunction:Ue});tilejsonCache[Oe]=Be}return Be}function drawIconHalo(ke,e,Te,Oe){const Be=[2*Te*e.pixelRatio+e.width,2*Te*e.pixelRatio+e.height],Ue=createCanvas(Be[0],Be[1]),He=Ue.getContext("2d");He.drawImage(ke,e.x,e.y,e.width,e.height,Te*e.pixelRatio,Te*e.pixelRatio,e.width,e.height);const We=He.getImageData(0,0,Be[0],Be[1]);He.globalCompositeOperation="destination-over",He.fillStyle=`rgba(${Oe.r*255},${Oe.g*255},${Oe.b*255},${Oe.a})`;const Cn=We.data;for(let An=0,En=We.width;An<En;++An)for(let Sn=0,Tn=We.height;Sn<Tn;++Sn){const Ln=(Sn*En+An)*4;Cn[Ln+3]>0&&He.arc(An,Sn,Te*e.pixelRatio,0,2*Math.PI)}return He.fill(),Ue}function smoothstep(ke,e,Te){const Oe=Math.max(0,Math.min(1,(Te-ke)/(e-ke)));return Oe*Oe*(3-2*Oe)}function drawSDF(ke,e,Te){const Oe=createCanvas(e.width,e.height),Be=Oe.getContext("2d");Be.drawImage(ke,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Ue=Be.getImageData(0,0,e.width,e.height),He=Ue.data;for(let We=0,Cn=Ue.width;We<Cn;++We)for(let An=0,En=Ue.height;An<En;++An){const Sn=(An*Cn+We)*4,Tn=He[Sn+3]/255,Ln=.75,Bn=.1,ei=smoothstep(Ln-Bn,Ln+Bn,Tn);ei>0?(He[Sn+0]=Math.round(255*Te.r*ei),He[Sn+1]=Math.round(255*Te.g*ei),He[Sn+2]=Math.round(255*Te.b*ei),He[Sn+3]=Math.round(255*ei)):He[Sn+3]=0}return Be.putImageData(Ue,0,0),Oe}const hairSpacePool=Array(256).join("");function applyLetterSpacing(ke,e){if(e>=.05){let Te="";const Oe=ke.split(`
`),Be=hairSpacePool.slice(0,Math.round(e/.1));for(let Ue=0,He=Oe.length;Ue<He;++Ue)Ue>0&&(Te+=`
`),Te+=Oe[Ue].split("").join(Be);return Te}return ke}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(ke,e){return getMeasureContext().measureText(ke).width+(ke.length-1)*e}const measureCache={};function wrapText(ke,e,Te,Oe){if(ke.indexOf(`
`)!==-1){const He=ke.split(`
`),We=[];for(let Cn=0,An=He.length;Cn<An;++Cn)We.push(wrapText(He[Cn],e,Te,Oe));return We.join(`
`)}const Be=Te+","+e+","+ke+","+Oe;let Ue=measureCache[Be];if(!Ue){const He=ke.split(" ");if(He.length>1){const We=getMeasureContext();We.font=e;const An=We.measureText("M").width*Te;let En="";const Sn=[];for(let Tn=0,Ln=He.length;Tn<Ln;++Tn){const Bn=He[Tn],ei=En+(En?" ":"")+Bn;measureText(ei,Oe)<=An?En=ei:(En&&Sn.push(En),En=Bn)}En&&Sn.push(En);for(let Tn=0,Ln=Sn.length;Tn<Ln&&Ln>1;++Tn){const Bn=Sn[Tn];if(measureText(Bn,Oe)<An*.35){const ei=Tn>0?measureText(Sn[Tn-1],Oe):1/0,ni=Tn<Ln-1?measureText(Sn[Tn+1],Oe):1/0;Sn.splice(Tn,1),Ln-=1,ei<ni?(Sn[Tn-1]+=" "+Bn,Tn-=1):Sn[Tn]=Bn+" "+Sn[Tn]}}for(let Tn=0,Ln=Sn.length-1;Tn<Ln;++Tn){const Bn=Sn[Tn],ei=Sn[Tn+1];if(measureText(Bn,Oe)>An*.7&&measureText(ei,Oe)<An*.6){const ni=Bn.split(" "),ti=ni.pop();measureText(ti,Oe)<An*.2&&(Sn[Tn]=ni.join(" "),Sn[Tn+1]=ti+" "+ei),Ln-=1}}Ue=Sn.join(`
`)}else Ue=ke;Ue=applyLetterSpacing(Ue,Oe),measureCache[Be]=Ue}return Ue}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(ke){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let Te=0,Oe=e.length;Te<Oe;++Te){const Be=e[Te];try{const Ue=Be.rules||Be.cssRules;if(Ue)for(let He=0,We=Ue.length;He<We;++He){const Cn=Ue[He];if(Cn.type==5){const An=Cn.cssText.match(fontFamilyRegEx);loadedFontFamilies[An[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return ke in loadedFontFamilies}const processedFontFamilies={};function getFonts(ke,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const Te=ke.toString();if(Te in processedFontFamilies)return processedFontFamilies[Te];const Oe=[];for(let Be=0,Ue=ke.length;Be<Ue;++Be){ke[Be]=ke[Be].replace("Arial Unicode MS","Arial");const He=ke[Be],We=mb2css(He,1);registerFont(We);const Cn=We.split(" ");Oe.push([Cn.slice(3).join(" ").replace(/"/g,""),Cn[1],Cn[0]])}for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const He=Oe[Be],We=He[0];if(!hasFontFamily(We)&&checkedFonts.get(`${He[2]}
${He[1]} 
${We}`)!==100){const Cn=e.replace("{font-family}",We.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",We.replace(/ /g,"+")).replace("{fontweight}",He[1]).replace("{-fontstyle}",He[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",He[2]);if(!document.querySelector('link[href="'+Cn+'"]')){const An=document.createElement("link");An.href=Cn,An.rel="stylesheet",document.head.appendChild(An)}}}return processedFontFamilies[Te]=ke,ke}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(ke,e){const Te=createPropertyExpression(ke,e);if(Te.result==="error")throw new Error(Te.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));return Te.value},emptyObj={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(ke,e,Te,Oe,Be,Ue,He){const We=ke.id;Ue||(Ue={},console.warn("No functionCache provided to getValue()")),Ue[We]||(Ue[We]={});const Cn=Ue[We];if(!Cn[Te]){let An=(ke[e]||emptyObj)[Te];const En=v8[`${e}_${ke.type}`][Te];An===void 0&&(An=En.default);let Sn=isExpression(An);if(!Sn&&isFunction$1(An)&&(An=convertFunction(An,En),Sn=!0),Sn){const Tn=expressionData(An,En);Cn[Te]=Tn.evaluate.bind(Tn)}else En.type=="color"&&(An=Color.parse(An)),Cn[Te]=function(){return An}}return zoomObj.zoom=Oe,Cn[Te](zoomObj,Be,He)}function getDeclutterMode(ke,e,Te,Oe,Be){return getValue(ke,"layout",`${Oe}-allow-overlap`,e,Te,Be)?getValue(ke,"layout",`${Oe}-ignore-placement`,e,Te,Be)?"none":"obstacle":"declutter"}function evaluateFilter(ke,e,Te,Oe,Be){return Be||console.warn("No filterCache provided to evaluateFilter()"),ke in Be||(Be[ke]=featureFilter(e).filter),zoomObj.zoom=Oe,Be[ke](zoomObj,Te)}function colorWithOpacity(ke,e){if(ke){if(ke.a===0||e===0)return;const Te=ke.a;return e=e===void 0?1:e,Te===0?"transparent":"rgba("+Math.round(ke.r*255/Te)+","+Math.round(ke.g*255/Te)+","+Math.round(ke.b*255/Te)+","+Te*e+")"}return ke}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(ke,e){return ke.replace(templateRegEx,function(Te){return e[Te.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(ke,e,Te,Oe=defaultResolutions,Be=void 0,Ue=void 0,He=void 0,We=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,ke)]=Array.from(arguments);let Cn,An,En;Ue&&toPromise(()=>Ue).then(async vi=>{let pi;if(typeof Image<"u"){const Mi=new Image;if(typeof vi=="string")Mi.crossOrigin="anonymous",Mi.src=vi;else{let Fi;vi instanceof Request?Fi=await fetch(vi):vi instanceof Response&&(Fi=vi);const fi=await Fi.blob();pi=URL.createObjectURL(fi),Mi.src=pi}Mi.addEventListener("load",function Fi(){Mi.removeEventListener("load",Fi),Cn=Mi,An=[Mi.width,Mi.height],ke.changed(),pi&&URL.revokeObjectURL(pi)}),Mi.addEventListener("error",function Fi(){URL.revokeObjectURL(pi),Mi.removeEventListener("error",Fi)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const Mi=self;Mi.postMessage({action:"loadImage",src:vi}),Mi.addEventListener("message",function(fi){fi.data.action==="imageLoaded"&&fi.data.src===vi&&(Cn=fi.data.image,An=[Cn.width,Cn.height])})}});const Sn=derefLayers(e.layers),Tn={},Ln=[],Bn={},ei={},ni=getFunctionCache(e),ti=getFilterCache(e);let ri;for(let vi=0,pi=Sn.length;vi<pi;++vi){const Mi=Sn[vi],Fi=Mi.id;if(typeof Te=="string"&&Mi.source==Te||Array.isArray(Te)&&Te.indexOf(Fi)!==-1){const fi=Mi["source-layer"];if(ri){if(Mi.source!==ri)throw new Error(`Layer "${Fi}" does not use source "${ri}`)}else{ri=Mi.source;const Oi=e.sources[ri];if(!Oi)throw new Error(`Source "${ri}" is not defined`);const Ni=Oi.type;if(Ni!=="vector"&&Ni!=="geojson")throw new Error(`Source "${ri}" is not of type "vector" or "geojson", but "${Ni}"`)}let ui=Tn[fi];ui||(ui=[],Tn[fi]=ui),ui.push({layer:Mi,index:vi}),Ln.push(Fi)}}const oi=new Stroke,ai=new Fill,ci=[],Pi=function(vi,pi,Mi){const Fi=vi.getProperties(),fi=Tn[Fi.layer];if(!fi)return;let ui=Oe.indexOf(pi);ui==-1&&(ui=getZoomForResolution(pi,Oe));const Oi=types[vi.getGeometry().getType()],Ni={id:vi.getId(),properties:Fi,type:Oi},nr=ke.get("mapbox-featurestate")[vi.getId()];let er=-1;for(let cr=0,ar=fi.length;cr<ar;++cr){const pr=fi[cr],rr=pr.layer,br=rr.id;if(Mi!==void 0&&Mi!==br)continue;const Li=rr.layout||emptyObj,ur=rr.paint||emptyObj;if(Li.visibility==="none"||"minzoom"in rr&&ui<rr.minzoom||"maxzoom"in rr&&ui>=rr.maxzoom)continue;const sr=rr.filter;if(!sr||evaluateFilter(br,sr,Ni,ui,ti)){let dr,vr,hr,mr,_r,Ar;const Vr=pr.index;if(Oi==3&&(rr.type=="fill"||rr.type=="fill-extrusion"))if(vr=getValue(rr,"paint",rr.type+"-opacity",ui,Ni,ni,nr),rr.type+"-pattern"in ur){const Sr=getValue(rr,"paint",rr.type+"-pattern",ui,Ni,ni,nr);if(Sr){const wr=typeof Sr=="string"?fromTemplate(Sr,Fi):Sr.toString();if(Cn&&Be&&Be[wr]){++er,Ar=ci[er],(!Ar||!Ar.getFill()||Ar.getStroke()||Ar.getText())&&(Ar=new Style$1({fill:new Fill}),ci[er]=Ar),hr=Ar.getFill(),Ar.setZIndex(Vr);const Br=wr+"."+vr;let Hr=ei[Br];if(!Hr){const qr=Be[wr],Xr=createCanvas(qr.width,qr.height),cs=Xr.getContext("2d");cs.globalAlpha=vr,cs.drawImage(Cn,qr.x,qr.y,qr.width,qr.height,0,0,qr.width,qr.height),Hr=cs.createPattern(Xr,"repeat"),ei[Br]=Hr}hr.setColor(Hr)}}}else dr=colorWithOpacity(getValue(rr,"paint",rr.type+"-color",ui,Ni,ni,nr),vr),rr.type+"-outline-color"in ur&&(_r=colorWithOpacity(getValue(rr,"paint",rr.type+"-outline-color",ui,Ni,ni,nr),vr)),_r||(_r=dr),(dr||_r)&&(++er,Ar=ci[er],(!Ar||dr&&!Ar.getFill()||!dr&&Ar.getFill()||_r&&!Ar.getStroke()||!_r&&Ar.getStroke()||Ar.getText())&&(Ar=new Style$1({fill:dr?new Fill:void 0,stroke:_r?new Stroke:void 0}),ci[er]=Ar),dr&&(hr=Ar.getFill(),hr.setColor(dr)),_r&&(mr=Ar.getStroke(),mr.setColor(_r),mr.setWidth(.5)),Ar.setZIndex(Vr));if(Oi!=1&&rr.type=="line"){"line-pattern"in ur?dr=void 0:dr=colorWithOpacity(getValue(rr,"paint","line-color",ui,Ni,ni,nr),getValue(rr,"paint","line-opacity",ui,Ni,ni,nr));const Sr=getValue(rr,"paint","line-width",ui,Ni,ni,nr);dr&&Sr>0&&(++er,Ar=ci[er],(!Ar||!Ar.getStroke()||Ar.getFill()||Ar.getText())&&(Ar=new Style$1({stroke:new Stroke}),ci[er]=Ar),mr=Ar.getStroke(),mr.setLineCap(getValue(rr,"layout","line-cap",ui,Ni,ni,nr)),mr.setLineJoin(getValue(rr,"layout","line-join",ui,Ni,ni,nr)),mr.setMiterLimit(getValue(rr,"layout","line-miter-limit",ui,Ni,ni,nr)),mr.setColor(dr),mr.setWidth(Sr),mr.setLineDash(ur["line-dasharray"]?getValue(rr,"paint","line-dasharray",ui,Ni,ni,nr).map(function(wr){return wr*Sr}):null),Ar.setZIndex(Vr))}let Gr=!1,Hi=null,gr=0,lr,Ki,Dr;if((Oi==1||Oi==2)&&"icon-image"in Li){const Sr=getValue(rr,"layout","icon-image",ui,Ni,ni,nr);if(Sr){lr=typeof Sr=="string"?fromTemplate(Sr,Fi):Sr.toString();let wr;const Br=We?We(ke,lr):void 0;if(Cn&&Be&&Be[lr]||Br){const Hr=getValue(rr,"layout","icon-rotation-alignment",ui,Ni,ni,nr);if(Oi==2){const qr=vi.getGeometry();if(qr.getFlatMidpoint||qr.getFlatMidpoints){const Xr=qr.getExtent();if(Math.sqrt(Math.max(Math.pow((Xr[2]-Xr[0])/pi,2),Math.pow((Xr[3]-Xr[1])/pi,2)))>150){const Qr=qr.getType()==="MultiLineString"?qr.getFlatMidpoints():qr.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),wr=renderFeature,renderFeatureCoordinates[0]=Qr[0],renderFeatureCoordinates[1]=Qr[1],getValue(rr,"layout","symbol-placement",ui,Ni,ni,nr)==="line"&&Hr==="map"){const vs=qr.getStride(),Ms=qr.getFlatCoordinates();for(let Ls=0,ps=Ms.length-vs;Ls<ps;Ls+=vs){const Ps=Ms[Ls],Es=Ms[Ls+1],Ds=Ms[Ls+vs],xs=Ms[Ls+vs+1],Xs=Math.min(Ps,Ds),_o=Math.max(Ps,Ds),Fs=Qr[0],Ss=Qr[1],Is=(xs-Es)*(Fs-Ps)-(Ds-Ps)*(Ss-Es);if(Math.abs(Is)<.001&&Fs<=_o&&Fs>=Xs){gr=Math.atan2(Es-xs,Ds-Ps);break}}}}}}if(Oi!==2||wr){const qr=getValue(rr,"layout","icon-size",ui,Ni,ni,nr),Xr=ur["icon-color"]!==void 0?getValue(rr,"paint","icon-color",ui,Ni,ni,nr):null;if(!Xr||Xr.a!==0){const cs=getValue(rr,"paint","icon-halo-color",ui,Ni,ni,nr),Qr=getValue(rr,"paint","icon-halo-width",ui,Ni,ni,nr);let bs=`${lr}.${qr}.${Qr}.${cs}`;if(Xr!==null&&(bs+=`.${Xr}`),Ki=Bn[bs],!Ki){const vs=getDeclutterMode(rr,ui,Ni,"icon",ni);let Ms;"icon-offset"in Li&&(Ms=getValue(rr,"layout","icon-offset",ui,Ni,ni,nr).slice(0),Ms[0]*=qr,Ms[1]*=-qr);let Ls=Xr?[Xr.r*255,Xr.g*255,Xr.b*255,Xr.a]:void 0;if(Br){const ps={color:Ls,rotateWithView:Hr==="map",displacement:Ms,declutterMode:vs,scale:qr};typeof Br=="string"?ps.src=Br:(ps.img=Br,ps.imgSize=[Br.width,Br.height]),Ki=new Icon(ps)}else{const ps=Be[lr];let Ps,Es,Ds;Qr?ps.sdf?(Ps=drawIconHalo(drawSDF(Cn,ps,Xr||[0,0,0,1]),{x:0,y:0,width:ps.width,height:ps.height,pixelRatio:ps.pixelRatio},Qr,cs),Ls=void 0):Ps=drawIconHalo(Cn,ps,Qr,cs):(ps.sdf?(En||(En=drawSDF(Cn,{x:0,y:0,width:An[0],height:An[1]},{r:1,g:1,b:1})),Ps=En):Ps=Cn,Es=[ps.width,ps.height],Ds=[ps.x,ps.y]),Ki=new Icon({color:Ls,img:Ps,imgSize:An,size:Es,offset:Ds,rotateWithView:Hr==="map",scale:qr/ps.pixelRatio,displacement:Ms,declutterMode:vs})}Bn[bs]=Ki}}Ki&&(++er,Ar=ci[er],(!Ar||!Ar.getImage()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[er]=Ar),Ar.setGeometry(wr),Ki.setRotation(gr+deg2rad(getValue(rr,"layout","icon-rotate",ui,Ni,ni,nr))),Ki.setOpacity(getValue(rr,"paint","icon-opacity",ui,Ni,ni,nr)),Ki.setAnchor(anchor[getValue(rr,"layout","icon-anchor",ui,Ni,ni,nr)]),Ar.setImage(Ki),Hi=Ar.getText(),Ar.setText(void 0),Ar.setZIndex(Vr),Gr=!0,Dr=!1)}else Dr=!0}}}if(Oi==1&&rr.type==="circle"){++er,Ar=ci[er],(!Ar||!Ar.getImage()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[er]=Ar);const Sr="circle-radius"in ur?getValue(rr,"paint","circle-radius",ui,Ni,ni,nr):5,wr=colorWithOpacity(getValue(rr,"paint","circle-stroke-color",ui,Ni,ni,nr),getValue(rr,"paint","circle-stroke-opacity",ui,Ni,ni,nr)),Br=getValue(rr,"paint","circle-translate",ui,Ni,ni,nr),Hr=colorWithOpacity(getValue(rr,"paint","circle-color",ui,Ni,ni,nr),getValue(rr,"paint","circle-opacity",ui,Ni,ni,nr)),qr=getValue(rr,"paint","circle-stroke-width",ui,Ni,ni,nr),Xr=Sr+"."+wr+"."+Hr+"."+qr+"."+Br[0]+"."+Br[1];Ki=Bn[Xr],Ki||(Ki=new CircleStyle({radius:Sr,displacement:[Br[0],-Br[1]],stroke:wr&&qr>0?new Stroke({width:qr,color:wr}):void 0,fill:Hr?new Fill({color:Hr}):void 0,declutterMode:"none"}),Bn[Xr]=Ki),Ar.setImage(Ki),Hi=Ar.getText(),Ar.setText(void 0),Ar.setGeometry(void 0),Ar.setZIndex(Vr),Gr=!0}let Nr,Ir,kr,Lr,Pr,Er;if("text-field"in Li){Lr=Math.round(getValue(rr,"layout","text-size",ui,Ni,ni,nr));const Sr=getValue(rr,"layout","text-font",ui,Ni,ni,nr);kr=getValue(rr,"layout","text-line-height",ui,Ni,ni,nr),Ir=mb2css(He?He(Sr,e.metadata?e.metadata["ol:webfonts"]:void 0):Sr,Lr,kr),Ir.includes("sans-serif")||(Ir+=",sans-serif"),Pr=getValue(rr,"layout","text-letter-spacing",ui,Ni,ni,nr),Er=getValue(rr,"layout","text-max-width",ui,Ni,ni,nr);const wr=getValue(rr,"layout","text-field",ui,Ni,ni,nr);typeof wr=="object"&&wr.sections?wr.sections.length===1?Nr=wr.toString():Nr=wr.sections.reduce((Br,Hr,qr)=>{const Xr=Hr.fontStack?Hr.fontStack.split(","):Sr,cs=mb2css(He?He(Xr):Xr,Lr*(Hr.scale||1),kr);let Qr=Hr.text;if(Qr===`
`)return Br.push(`
`,""),Br;if(Oi==2)return Br.push(applyLetterSpacing(Qr,Pr),cs),Br;Qr=wrapText(Qr,cs,Er,Pr).split(`
`);for(let bs=0,vs=Qr.length;bs<vs;++bs)bs>0&&Br.push(`
`,""),Br.push(Qr[bs],cs);return Br},[]):Nr=fromTemplate(wr,Fi).trim(),vr=getValue(rr,"paint","text-opacity",ui,Ni,ni,nr)}if(Nr&&vr&&!Dr){Gr||(++er,Ar=ci[er],(!Ar||!Ar.getText()||Ar.getFill()||Ar.getStroke())&&(Ar=new Style$1,ci[er]=Ar),Ar.setImage(void 0),Ar.setGeometry(void 0));const Sr=getDeclutterMode(rr,ui,Ni,"text",ni);Ar.getText()||Ar.setText(Hi),Hi=Ar.getText(),(!Hi||"getDeclutterMode"in Hi&&Hi.getDeclutterMode()!==Sr)&&(Hi=new Text({padding:[2,2,2,2],declutterMode:Sr}),Ar.setText(Hi));const wr=getValue(rr,"layout","text-transform",ui,Ni,ni,nr);wr=="uppercase"?Nr=Array.isArray(Nr)?Nr.map((xs,Xs)=>Xs%2?xs:xs.toUpperCase()):Nr.toUpperCase():wr=="lowercase"&&(Nr=Array.isArray(Nr)?Nr.map((xs,Xs)=>Xs%2?xs:xs.toLowerCase()):Nr.toLowerCase());const Br=Array.isArray(Nr)?Nr:Oi==2?applyLetterSpacing(Nr,Pr):wrapText(Nr,Ir,Er,Pr);if(Hi.setText(Br),Hi.setFont(Ir),Hi.setRotation(deg2rad(getValue(rr,"layout","text-rotate",ui,Ni,ni,nr))),typeof Hi.setKeepUpright=="function"){const xs=getValue(rr,"layout","text-keep-upright",ui,Ni,ni,nr);Hi.setKeepUpright(xs)}const Hr=getValue(rr,"layout","text-anchor",ui,Ni,ni,nr),qr=Gr||Oi==1?"point":getValue(rr,"layout","symbol-placement",ui,Ni,ni,nr);let Xr;if(qr==="line-center"?(Hi.setPlacement("line"),Xr="center"):Hi.setPlacement(qr),qr==="line"&&typeof Hi.setRepeat=="function"){const xs=getValue(rr,"layout","symbol-spacing",ui,Ni,ni,nr);Hi.setRepeat(xs*2)}Hi.setOverflow(qr==="point");let cs=getValue(rr,"paint","text-halo-width",ui,Ni,ni,nr);const Qr=getValue(rr,"layout","text-offset",ui,Ni,ni,nr),bs=getValue(rr,"paint","text-translate",ui,Ni,ni,nr);let vs=0,Ms=0;if(qr=="point"){Xr="center",Hr.indexOf("left")!==-1?(Xr="left",Ms=cs):Hr.indexOf("right")!==-1&&(Xr="right",Ms=-cs);const xs=getValue(rr,"layout","text-rotation-alignment",ui,Ni,ni,nr);Hi.setRotateWithView(xs=="map")}else Hi.setMaxAngle(deg2rad(getValue(rr,"layout","text-max-angle",ui,Ni,ni,nr))*Nr.length/Br.length),Hi.setRotateWithView(!1);Hi.setTextAlign(Xr);let Ls="middle";Hr.indexOf("bottom")==0?(Ls="bottom",vs=-cs-.5*(kr-1)*Lr):Hr.indexOf("top")==0&&(Ls="top",vs=cs+.5*(kr-1)*Lr),Hi.setTextBaseline(Ls);const ps=getValue(rr,"layout","text-justify",ui,Ni,ni,nr);Hi.setJustify(ps==="auto"?void 0:ps),Hi.setOffsetX(Qr[0]*Lr+Ms+bs[0]),Hi.setOffsetY(Qr[1]*Lr+vs+bs[1]),ai.setColor(colorWithOpacity(getValue(rr,"paint","text-color",ui,Ni,ni,nr),vr)),Hi.setFill(ai);const Ps=colorWithOpacity(getValue(rr,"paint","text-halo-color",ui,Ni,ni,nr),vr);if(Ps&&cs>0){oi.setColor(Ps),cs*=2;const xs=.5*Lr;oi.setWidth(cs<=xs?cs:xs),Hi.setStroke(oi)}else Hi.setStroke(void 0);const Es=getValue(rr,"layout","text-padding",ui,Ni,ni,nr),Ds=Hi.getPadding();Es!==Ds[0]&&(Ds[0]=Es,Ds[1]=Es,Ds[2]=Es,Ds[3]=Es),Ar.setZIndex(Vr)}}}if(er>-1)return ci.length=er+1,ci};return ke.setStyle(Pi),ke.set("mapbox-source",ri),ke.set("mapbox-layers",Ln),ke.set("mapbox-featurestate",ke.get("mapbox-featurestate")||{}),Pi}function getTileResolutions(ke,e=512){return ke.getExtent()?createXYZ({extent:ke.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(ke,e){return e.accessToken||(e=Object.assign({},e),new URL(ke).searchParams.forEach((Oe,Be)=>{e.accessToken=Oe,e.accessTokenParam=Be})),e}function applyStyle(ke,e,Te="",Oe={},Be=void 0){let Ue,He,We,Cn,An=!0;return typeof Te!="string"&&!Array.isArray(Te)?(We=Te,Cn=We.source||We.layers,Oe=We):Cn=Te,typeof Oe=="string"?(Ue=Oe,We={}):(Ue=Oe.styleUrl,We=Oe),We.updateSource===!1&&(An=!1),Be||(Be=We.resolutions),!Ue&&typeof e=="string"&&!e.trim().startsWith("{")&&(Ue=e),Ue&&(Ue=Ue.startsWith("data:")?location.href:normalizeStyleUrl(Ue,We.accessToken),We=completeOptions(Ue,We)),new Promise(function(En,Sn){getGlStyle(e,We).then(function(Tn){if(Tn.version!=8)return Sn(new Error("glStyle version 8 required."));if(!(ke instanceof VectorLayer||ke instanceof VectorTileLayer))return Sn(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Ln=ke instanceof VectorTileLayer?"vector":"geojson";if(Cn?Array.isArray(Cn)?He=Tn.layers.find(function(ai){return ai.id===Cn[0]}).source:He=Cn:(He=Object.keys(Tn.sources).find(function(ai){return Tn.sources[ai].type===Ln}),Cn=He),!He)return Sn(new Error(`No ${Ln} source found in the glStyle.`));function Bn(){if(!An)return Promise.resolve();if(ke instanceof VectorTileLayer)return setupVectorSource(Tn.sources[He],Ue,We).then(function(vi){const pi=ke.getSource();pi?vi!==pi&&(pi.setTileUrlFunction(vi.getTileUrlFunction()),typeof pi.setUrls=="function"&&typeof vi.getUrls=="function"&&pi.setUrls(vi.getUrls()),pi.format_||(pi.format_=vi.format_),pi.getAttributions()||pi.setAttributions(vi.getAttributions()),pi.getTileLoadFunction()===defaultLoadFunction&&pi.setTileLoadFunction(vi.getTileLoadFunction()),equivalent(pi.getProjection(),vi.getProjection())&&(pi.tileGrid=vi.getTileGrid())):ke.setSource(vi);const Mi=ke.getSource().getTileGrid();!isFinite(ke.getMaxResolution())&&!isFinite(ke.getMinZoom())&&Mi.getMinZoom()>0&&ke.setMaxResolution(getResolutionForZoom(Math.max(0,Mi.getMinZoom()-1e-12),Mi.getResolutions()))});const ai=Tn.sources[He];let ci=ke.getSource();(!ci||ci.get("mapbox-source")!==ai)&&(ci=setupGeoJSONSource(ai,Ue,We));const Pi=ke.getSource();return Pi?ci!==Pi&&(Pi.getAttributions()||Pi.setAttributions(ci.getAttributions()),Pi.format_||(Pi.format_=ci.getFormat()),Pi.url_=ci.getUrl()):ke.setSource(ci),Promise.resolve()}let ei,ni,ti,ri;function oi(){if(!ri&&(!Tn.sprite||ni)){if(We.projection&&!Be){const ci=get$3(We.projection).getUnits();ci!=="m"&&(Be=defaultResolutions.map(Pi=>Pi/METERS_PER_UNIT$1[ci]))}ri=stylefunction(ke,Tn,Cn,Be,ni,ti,(ai,ci=We.webfonts)=>getFonts(ai,ci),We.getImage),ke.getStyle()?Bn().then(En).catch(Sn):Sn(new Error(`Nothing to show for source [${He}]`))}else ri?(ke.setStyle(ri),Bn().then(En).catch(Sn)):Sn(new Error("Something went wrong trying to apply style."))}if(Tn.sprite){const ai=new URL(normalizeSpriteUrl(Tn.sprite,We.accessToken,Ue||location.href));ei=window.devicePixelRatio>=1.5?.5:1;const ci=ei==.5?"@2x":"";let Pi=ai.origin+ai.pathname+ci+".json"+ai.search;new Promise(function(vi,pi){fetchResource("Sprite",Pi,We).then(vi).catch(function(Mi){Pi=ai.origin+ai.pathname+".json"+ai.search,fetchResource("Sprite",Pi,We).then(vi).catch(pi)})}).then(function(vi){if(vi===void 0&&Sn(new Error("No sprites found.")),ni=vi,ti=ai.origin+ai.pathname+ci+".png"+ai.search,We.transformRequest){const pi=We.transformRequest(ti,"SpriteImage")||ti;(pi instanceof Request||pi instanceof Promise)&&(ti=pi)}oi()}).catch(function(vi){Sn(new Error(`Sprites cannot be loaded: ${Pi}: ${vi.message}`))})}else oi()}).catch(Sn)})}function extentFromTileJSON(ke,e){const Te=ke.bounds;if(Te){const Oe=fromLonLat([Te[0],Te[1]],e),Be=fromLonLat([Te[2],Te[3]],e);return[Oe[0],Oe[1],Be[0],Be[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(ke,e,Te){const Oe=new TileJSON({tileJSON:e,tileSize:ke.tileSize||e.tileSize||512}),Be=Oe.getTileJSON(),Ue=Oe.getTileGrid(),He=get$3(Te.projection||"EPSG:3857"),We=extentFromTileJSON(Be,He),Cn=He.getExtent(),An=Be.minzoom||0,En=Be.maxzoom||22,Sn={attributions:Oe.getAttributions(),projection:He,tileGrid:new TileGrid({origin:Cn?getTopLeft(Cn):Ue.getOrigin(0),extent:We||Ue.getExtent(),minZoom:An,resolutions:getTileResolutions(He,e.tileSize).slice(0,En+1),tileSize:Ue.getTileSize(0)})};return Array.isArray(Be.tiles)?Sn.urls=Be.tiles:Sn.url=Be.tiles,Sn}function setupVectorSource(ke,e,Te){return new Promise(function(Oe,Be){getTileJson(ke,e,Te).then(function({tileJson:Ue,tileLoadFunction:He}){const We=sourceOptionsFromTileJSON(ke,Ue,Te);We.tileLoadFunction=He,We.format=new MVT,Oe(new VectorTile(We))}).catch(Be)})}function getBboxTemplate(ke){return`{bbox-${(ke?ke.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(ke,e,Te){const Oe=Te.projection?new GeoJSON$1({dataProjection:Te.projection}):new GeoJSON$1,Be=ke.data,Ue={};if(typeof Be=="string"){const[We]=normalizeSourceUrl(Be,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(We)){const An=(Sn,Tn,Ln)=>{const Bn=getBboxTemplate(Ln);return We.replace(Bn,`${Sn.join(",")}`)},En=new VectorSource({attributions:ke.attribution,format:Oe,loader:(Sn,Tn,Ln,Bn,ei)=>{const ni=typeof An=="function"?An(Sn,Tn,Ln):An;fetchResource("GeoJSON",ni,Te).then(ti=>{const ri=En.getFormat().readFeatures(ti,{featureProjection:Ln});En.addFeatures(ri),Bn(ri)}).catch(ti=>{En.removeLoadedExtent(Sn),ei()})},strategy:bbox});return En.set("mapbox-source",ke),En}const Cn=new VectorSource({attributions:ke.attribution,format:Oe,url:We,loader:(An,En,Sn,Tn,Ln)=>{fetchResource("GeoJSON",We,Te).then(Bn=>{const ei=Cn.getFormat().readFeatures(Bn,{featureProjection:Sn});Cn.addFeatures(ei),Tn(ei)}).catch(Bn=>{Cn.removeLoadedExtent(An),Ln()})}});return Cn}Ue.features=Oe.readFeatures(Be,{featureProjection:"EPSG:3857"});const He=new VectorSource(Object.assign({attributions:ke.attribution,format:Oe},Ue));return He.set("mapbox-source",ke),He}var LayerMapBox=class extends VectorTileLayer{constructor(e,Te){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Oe=e.ssl===!1?"http://":"https://",Be=e.configuration;if(!Be){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=e.layer+"$GEOPORTAIL:GPP:TMS";if(Be=Config.configuration.getLayerConf(Ue),!Be)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var He=null,We="",Cn=e.style,An=0;An<Be.styles.length;An++){var En=Be.styles[An];if(Cn&&En.name===Cn){He=En.url,We=En.title;break}else if(!Cn&&En.current){Cn=En.name,He=En.url,We=En.title;break}}if(!He)throw new Error("ERROR : Style URL not found !?");He.replace(/(http|https):\/\//,Oe);var Sn=new VectorTile({state:"loading",format:new MVT});Sn._originators=Be.originators,Sn._legends=Be.legends,Sn._metadata=Be.metadata,Sn._description=Be.description,Sn._title=Be.title+" ("+We+")",Sn._quicklookUrl=Be.quicklookUrl;var Tn={source:Sn};return Helper.mergeParams(Tn,Te),e.olParams&&!Be.originators&&(Sn._originators=e.olParams.attributions),super(Tn),this.name=e.layer,this.service="TMS",this.protocol=Oe,this.sourceId=e.source,this.styleUrl=He,this.config=Be,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(Te){Te.ok&&Te.json().then(function(Oe){e.onStyleMapBoxLoad(Oe)})}).catch(function(Te){e.onStyleMapBoxError(Te)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var Te=e.sources[this.sourceId];if(!Te){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(Te.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var Oe=this.getSource();if(Te.url){Te.url.replace(/(http|https):\/\//,this.protocol);var Be=new TileJSON({url:Te.url}),Ue=this,He=Be.on("change",function(){if(Be.getState()==="ready"){var Cn=Be.getTileJSON();if(!Cn)return;Ue.set("mapbox-extensions",Cn);for(var An=Array.isArray(Cn.tiles)?Cn.tiles:[Cn.tiles],En=0;En<Te.tiles.length;En++)An[En].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(An),unByKey(He)}})}if(Te.tiles){for(var We=0;We<Te.tiles.length;We++)Te.tiles[We].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(Te.tiles)}applyStyle(this,e,this.sourceId).then(()=>{Oe.setState("ready"),this.set("mapbox-styles",e)}).catch(Cn=>{this.onStyleMapBoxError(Cn)})}onStyleMapBoxError(e){var Te=this.getSource();Te.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(ke,e){var Te=[...exceptions,e],Oe=[];if(ke&&ke.includes("left")){var Be=document.getElementById("position-container-bottom-left"),Ue=document.getElementById("position-container-top-left");Oe=[...Be.children,...Ue.children]}if(ke&&ke.includes("right")){var He=document.getElementById("position-container-bottom-right"),We=document.getElementById("position-container-top-right");Oe=[...He.children,...We.children]}return Oe.filter(Cn=>{var An=Cn.id.match(/(\w+)-[0-9]+/)[1],En=Te.includes(An),Sn=Cn.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(Sn==="true"&&!En)return Cn})}var PanelManager=function(ke,e){var Te=getSameSideOpenedPanel(ke,e);Te.length>0&&Te[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var ke=getComputedStyle(document.documentElement),e=ke.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var Te=new PositionFactory(this);Te.set(e)}}updatePosition(e){if(this.getMap()){var Te=new PositionFactory(this);Te.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Il,qf,Cd,af;class PositionFactory{constructor(e){Iu(this,Il);return this.caller=e,this.container=null,ac(this,Il,Cd).call(this,"top-left"),ac(this,Il,Cd).call(this,"top-right"),ac(this,Il,Cd).call(this,"bottom-left"),ac(this,Il,Cd).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(ac(this,Il,af).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&ac(this,Il,af).call(this,e,!0)}}Il=new WeakSet,qf=function(e){var Te=this.container.children["position-container-"+e];return!!Te},Cd=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!ac(this,Il,qf).call(this,e)){var Te=document.createElement("div");Te.id="position-container-"+e,Te.className="position position-container-"+e,this.container.appendChild(Te)}},af=function(e,Te){var Oe=this;const Be=En=>{var Sn=Oe.container.children["position-container-"+En];return Sn.children.length},Ue=En=>{var Sn=Oe.container.children["position-container-"+En],Tn=Sn.offsetWidth;return Tn},He=En=>{var Sn=Oe.container.children["position-container-"+En],Tn=Sn.offsetHeight;if(Te){En.includes("top")&&(Tn=0);for(let Ln=0;Ln<Sn.children.length;Ln++){if(Sn.children[Ln].id===Oe.caller.element.id){Tn=En.includes("bottom")?Tn-Oe.caller.element.offsetHeight:Tn*-1;break}Tn-=Sn.children[Ln].offsetHeight}}return Tn},We=En=>{En.style.top="unset",En.style.bottom="unset",En.style.left="unset",En.style.right="unset"};We(this.caller.element),this.caller.element.style.position="unset";var Cn=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(Cn.length!==0){var An=0;Cn.forEach(En=>{if(En.nodeName.toLowerCase()==="dialog"){switch(We(En),e.toLowerCase()){case"top-left":checkDsfr()?En.style.top="0px":En.style.top=Be(e)?He(e)+"px":"0px",En.style.left=Ue(e)+An+"px";break;case"bottom-left":checkDsfr()?En.style.top="0px":En.style.bottom=Be(e)?He(e)+"px":"0px",En.style.left=Ue(e)+An+"px";break;case"top-right":checkDsfr()?En.style.top="0px":En.style.top=Be(e)?He(e)+"px":"0px",En.style.right=Ue(e)+An+"px";break;case"bottom-right":checkDsfr()?En.style.top="0px":En.style.bottom=Be(e)?He(e)+"px":"0px",En.style.right=Ue(e)+An+"px";break}An+=En.offsetWidth}})}};var SelectorID={generate:function(){var ke=Math.floor(Date.now());return function(){return ke++}}(),name:function(ke){var e=null,Te=ke.lastIndexOf("-");return Te===-1?e=ke:e=ke.substring(0,Te),e},index:function(ke){var e=null,Te=this.name(ke),Oe=Te.lastIndexOf("_");return Oe!==-1&&(e=Te.substring(Oe+1)),e},uuid:function(ke){var e=null,Te=ke.lastIndexOf("-");return Te!==-1&&(e=parseInt(ke.substring(Te+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(ke,e){var Te=Object.keys(ke);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(ke);e&&(Oe=Oe.filter(function(Be){return Object.getOwnPropertyDescriptor(ke,Be).enumerable})),Te.push.apply(Te,Oe)}return Te}function _objectSpread2(ke){for(var e=1;e<arguments.length;e++){var Te=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(Te),!0).forEach(function(Oe){_defineProperty(ke,Oe,Te[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Te)):ownKeys(Object(Te)).forEach(function(Oe){Object.defineProperty(ke,Oe,Object.getOwnPropertyDescriptor(Te,Oe))})}return ke}function _typeof$1(ke){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(ke)}function _defineProperty(ke,e,Te){return e in ke?Object.defineProperty(ke,e,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ke[e]=Te,ke}function _extends(){return _extends=Object.assign||function(ke){for(var e=1;e<arguments.length;e++){var Te=arguments[e];for(var Oe in Te)Object.prototype.hasOwnProperty.call(Te,Oe)&&(ke[Oe]=Te[Oe])}return ke},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(ke,e){if(ke==null)return{};var Te={},Oe=Object.keys(ke),Be,Ue;for(Ue=0;Ue<Oe.length;Ue++)Be=Oe[Ue],!(e.indexOf(Be)>=0)&&(Te[Be]=ke[Be]);return Te}function _objectWithoutProperties(ke,e){if(ke==null)return{};var Te=_objectWithoutPropertiesLoose(ke,e),Oe,Be;if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(ke);for(Be=0;Be<Ue.length;Be++)Oe=Ue[Be],!(e.indexOf(Oe)>=0)&&Object.prototype.propertyIsEnumerable.call(ke,Oe)&&(Te[Oe]=ke[Oe])}return Te}var version="1.15.3";function userAgent(ke){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(ke)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(ke,e,Te){ke.addEventListener(e,Te,!IE11OrLess&&captureMode)}function off(ke,e,Te){ke.removeEventListener(e,Te,!IE11OrLess&&captureMode)}function matches(ke,e){if(e){if(e[0]===">"&&(e=e.substring(1)),ke)try{if(ke.matches)return ke.matches(e);if(ke.msMatchesSelector)return ke.msMatchesSelector(e);if(ke.webkitMatchesSelector)return ke.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(ke){return ke.host&&ke!==document&&ke.host.nodeType?ke.host:ke.parentNode}function closest(ke,e,Te,Oe){if(ke){Te=Te||document;do{if(e!=null&&(e[0]===">"?ke.parentNode===Te&&matches(ke,e):matches(ke,e))||Oe&&ke===Te)return ke;if(ke===Te)break}while(ke=getParentOrHost(ke))}return null}var R_SPACE=/\s+/g;function toggleClass(ke,e,Te){if(ke&&e)if(ke.classList)ke.classList[Te?"add":"remove"](e);else{var Oe=(" "+ke.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");ke.className=(Oe+(Te?" "+e:"")).replace(R_SPACE," ")}}function css(ke,e,Te){var Oe=ke&&ke.style;if(Oe){if(Te===void 0)return document.defaultView&&document.defaultView.getComputedStyle?Te=document.defaultView.getComputedStyle(ke,""):ke.currentStyle&&(Te=ke.currentStyle),e===void 0?Te:Te[e];!(e in Oe)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),Oe[e]=Te+(typeof Te=="string"?"":"px")}}function matrix(ke,e){var Te="";if(typeof ke=="string")Te=ke;else do{var Oe=css(ke,"transform");Oe&&Oe!=="none"&&(Te=Oe+" "+Te)}while(!e&&(ke=ke.parentNode));var Be=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Be&&new Be(Te)}function find(ke,e,Te){if(ke){var Oe=ke.getElementsByTagName(e),Be=0,Ue=Oe.length;if(Te)for(;Be<Ue;Be++)Te(Oe[Be],Be);return Oe}return[]}function getWindowScrollingElement(){var ke=document.scrollingElement;return ke||document.documentElement}function getRect(ke,e,Te,Oe,Be){if(!(!ke.getBoundingClientRect&&ke!==window)){var Ue,He,We,Cn,An,En,Sn;if(ke!==window&&ke.parentNode&&ke!==getWindowScrollingElement()?(Ue=ke.getBoundingClientRect(),He=Ue.top,We=Ue.left,Cn=Ue.bottom,An=Ue.right,En=Ue.height,Sn=Ue.width):(He=0,We=0,Cn=window.innerHeight,An=window.innerWidth,En=window.innerHeight,Sn=window.innerWidth),(e||Te)&&ke!==window&&(Be=Be||ke.parentNode,!IE11OrLess))do if(Be&&Be.getBoundingClientRect&&(css(Be,"transform")!=="none"||Te&&css(Be,"position")!=="static")){var Tn=Be.getBoundingClientRect();He-=Tn.top+parseInt(css(Be,"border-top-width")),We-=Tn.left+parseInt(css(Be,"border-left-width")),Cn=He+Ue.height,An=We+Ue.width;break}while(Be=Be.parentNode);if(Oe&&ke!==window){var Ln=matrix(Be||ke),Bn=Ln&&Ln.a,ei=Ln&&Ln.d;Ln&&(He/=ei,We/=Bn,Sn/=Bn,En/=ei,Cn=He+En,An=We+Sn)}return{top:He,left:We,bottom:Cn,right:An,width:Sn,height:En}}}function isScrolledPast(ke,e,Te){for(var Oe=getParentAutoScrollElement(ke,!0),Be=getRect(ke)[e];Oe;){var Ue=getRect(Oe)[Te],He=void 0;if(He=Be>=Ue,!He)return Oe;if(Oe===getWindowScrollingElement())break;Oe=getParentAutoScrollElement(Oe,!1)}return!1}function getChild(ke,e,Te,Oe){for(var Be=0,Ue=0,He=ke.children;Ue<He.length;){if(He[Ue].style.display!=="none"&&He[Ue]!==Sortable.ghost&&(Oe||He[Ue]!==Sortable.dragged)&&closest(He[Ue],Te.draggable,ke,!1)){if(Be===e)return He[Ue];Be++}Ue++}return null}function lastChild(ke,e){for(var Te=ke.lastElementChild;Te&&(Te===Sortable.ghost||css(Te,"display")==="none"||e&&!matches(Te,e));)Te=Te.previousElementSibling;return Te||null}function index(ke,e){var Te=0;if(!ke||!ke.parentNode)return-1;for(;ke=ke.previousElementSibling;)ke.nodeName.toUpperCase()!=="TEMPLATE"&&ke!==Sortable.clone&&(!e||matches(ke,e))&&Te++;return Te}function getRelativeScrollOffset(ke){var e=0,Te=0,Oe=getWindowScrollingElement();if(ke)do{var Be=matrix(ke),Ue=Be.a,He=Be.d;e+=ke.scrollLeft*Ue,Te+=ke.scrollTop*He}while(ke!==Oe&&(ke=ke.parentNode));return[e,Te]}function indexOfObject(ke,e){for(var Te in ke)if(ke.hasOwnProperty(Te)){for(var Oe in e)if(e.hasOwnProperty(Oe)&&e[Oe]===ke[Te][Oe])return Number(Te)}return-1}function getParentAutoScrollElement(ke,e){if(!ke||!ke.getBoundingClientRect)return getWindowScrollingElement();var Te=ke,Oe=!1;do if(Te.clientWidth<Te.scrollWidth||Te.clientHeight<Te.scrollHeight){var Be=css(Te);if(Te.clientWidth<Te.scrollWidth&&(Be.overflowX=="auto"||Be.overflowX=="scroll")||Te.clientHeight<Te.scrollHeight&&(Be.overflowY=="auto"||Be.overflowY=="scroll")){if(!Te.getBoundingClientRect||Te===document.body)return getWindowScrollingElement();if(Oe||e)return Te;Oe=!0}}while(Te=Te.parentNode);return getWindowScrollingElement()}function extend$1(ke,e){if(ke&&e)for(var Te in e)e.hasOwnProperty(Te)&&(ke[Te]=e[Te]);return ke}function isRectEqual(ke,e){return Math.round(ke.top)===Math.round(e.top)&&Math.round(ke.left)===Math.round(e.left)&&Math.round(ke.height)===Math.round(e.height)&&Math.round(ke.width)===Math.round(e.width)}var _throttleTimeout;function throttle(ke,e){return function(){if(!_throttleTimeout){var Te=arguments,Oe=this;Te.length===1?ke.call(Oe,Te[0]):ke.apply(Oe,Te),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(ke,e,Te){ke.scrollLeft+=e,ke.scrollTop+=Te}function clone(ke){var e=window.Polymer,Te=window.jQuery||window.Zepto;return e&&e.dom?e.dom(ke).cloneNode(!0):Te?Te(ke).clone(!0)[0]:ke.cloneNode(!0)}function getChildContainingRectFromElement(ke,e,Te){var Oe={};return Array.from(ke.children).forEach(function(Be){var Ue,He,We,Cn;if(!(!closest(Be,e.draggable,ke,!1)||Be.animated||Be===Te)){var An=getRect(Be);Oe.left=Math.min((Ue=Oe.left)!==null&&Ue!==void 0?Ue:1/0,An.left),Oe.top=Math.min((He=Oe.top)!==null&&He!==void 0?He:1/0,An.top),Oe.right=Math.max((We=Oe.right)!==null&&We!==void 0?We:-1/0,An.right),Oe.bottom=Math.max((Cn=Oe.bottom)!==null&&Cn!==void 0?Cn:-1/0,An.bottom)}}),Oe.width=Oe.right-Oe.left,Oe.height=Oe.bottom-Oe.top,Oe.x=Oe.left,Oe.y=Oe.top,Oe}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var ke=[],e;return{captureAnimationState:function(){if(ke=[],!!this.options.animation){var Oe=[].slice.call(this.el.children);Oe.forEach(function(Be){if(!(css(Be,"display")==="none"||Be===Sortable.ghost)){ke.push({target:Be,rect:getRect(Be)});var Ue=_objectSpread2({},ke[ke.length-1].rect);if(Be.thisAnimationDuration){var He=matrix(Be,!0);He&&(Ue.top-=He.f,Ue.left-=He.e)}Be.fromRect=Ue}})}},addAnimationState:function(Oe){ke.push(Oe)},removeAnimationState:function(Oe){ke.splice(indexOfObject(ke,{target:Oe}),1)},animateAll:function(Oe){var Be=this;if(!this.options.animation){clearTimeout(e),typeof Oe=="function"&&Oe();return}var Ue=!1,He=0;ke.forEach(function(We){var Cn=0,An=We.target,En=An.fromRect,Sn=getRect(An),Tn=An.prevFromRect,Ln=An.prevToRect,Bn=We.rect,ei=matrix(An,!0);ei&&(Sn.top-=ei.f,Sn.left-=ei.e),An.toRect=Sn,An.thisAnimationDuration&&isRectEqual(Tn,Sn)&&!isRectEqual(En,Sn)&&(Bn.top-Sn.top)/(Bn.left-Sn.left)===(En.top-Sn.top)/(En.left-Sn.left)&&(Cn=calculateRealTime(Bn,Tn,Ln,Be.options)),isRectEqual(Sn,En)||(An.prevFromRect=En,An.prevToRect=Sn,Cn||(Cn=Be.options.animation),Be.animate(An,Bn,Sn,Cn)),Cn&&(Ue=!0,He=Math.max(He,Cn),clearTimeout(An.animationResetTimer),An.animationResetTimer=setTimeout(function(){An.animationTime=0,An.prevFromRect=null,An.fromRect=null,An.prevToRect=null,An.thisAnimationDuration=null},Cn),An.thisAnimationDuration=Cn)}),clearTimeout(e),Ue?e=setTimeout(function(){typeof Oe=="function"&&Oe()},He):typeof Oe=="function"&&Oe(),ke=[]},animate:function(Oe,Be,Ue,He){if(He){css(Oe,"transition",""),css(Oe,"transform","");var We=matrix(this.el),Cn=We&&We.a,An=We&&We.d,En=(Be.left-Ue.left)/(Cn||1),Sn=(Be.top-Ue.top)/(An||1);Oe.animatingX=!!En,Oe.animatingY=!!Sn,css(Oe,"transform","translate3d("+En+"px,"+Sn+"px,0)"),this.forRepaintDummy=repaint(Oe),css(Oe,"transition","transform "+He+"ms"+(this.options.easing?" "+this.options.easing:"")),css(Oe,"transform","translate3d(0,0,0)"),typeof Oe.animated=="number"&&clearTimeout(Oe.animated),Oe.animated=setTimeout(function(){css(Oe,"transition",""),css(Oe,"transform",""),Oe.animated=!1,Oe.animatingX=!1,Oe.animatingY=!1},He)}}}}function repaint(ke){return ke.offsetWidth}function calculateRealTime(ke,e,Te,Oe){return Math.sqrt(Math.pow(e.top-ke.top,2)+Math.pow(e.left-ke.left,2))/Math.sqrt(Math.pow(e.top-Te.top,2)+Math.pow(e.left-Te.left,2))*Oe.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var Te in defaults)defaults.hasOwnProperty(Te)&&!(Te in e)&&(e[Te]=defaults[Te]);plugins.forEach(function(Oe){if(Oe.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,Te,Oe){var Be=this;this.eventCanceled=!1,Oe.cancel=function(){Be.eventCanceled=!0};var Ue=e+"Global";plugins.forEach(function(He){Te[He.pluginName]&&(Te[He.pluginName][Ue]&&Te[He.pluginName][Ue](_objectSpread2({sortable:Te},Oe)),Te.options[He.pluginName]&&Te[He.pluginName][e]&&Te[He.pluginName][e](_objectSpread2({sortable:Te},Oe)))})},initializePlugins:function(e,Te,Oe,Be){plugins.forEach(function(We){var Cn=We.pluginName;if(!(!e.options[Cn]&&!We.initializeByDefault)){var An=new We(e,Te,e.options);An.sortable=e,An.options=e.options,e[Cn]=An,_extends(Oe,An.defaults)}});for(var Ue in e.options)if(e.options.hasOwnProperty(Ue)){var He=this.modifyOption(e,Ue,e.options[Ue]);typeof He<"u"&&(e.options[Ue]=He)}},getEventProperties:function(e,Te){var Oe={};return plugins.forEach(function(Be){typeof Be.eventProperties=="function"&&_extends(Oe,Be.eventProperties.call(Te[Be.pluginName],e))}),Oe},modifyOption:function(e,Te,Oe){var Be;return plugins.forEach(function(Ue){e[Ue.pluginName]&&Ue.optionListeners&&typeof Ue.optionListeners[Te]=="function"&&(Be=Ue.optionListeners[Te].call(e[Ue.pluginName],Oe))}),Be}};function dispatchEvent(ke){var e=ke.sortable,Te=ke.rootEl,Oe=ke.name,Be=ke.targetEl,Ue=ke.cloneEl,He=ke.toEl,We=ke.fromEl,Cn=ke.oldIndex,An=ke.newIndex,En=ke.oldDraggableIndex,Sn=ke.newDraggableIndex,Tn=ke.originalEvent,Ln=ke.putSortable,Bn=ke.extraEventProperties;if(e=e||Te&&Te[expando],!!e){var ei,ni=e.options,ti="on"+Oe.charAt(0).toUpperCase()+Oe.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?ei=new CustomEvent(Oe,{bubbles:!0,cancelable:!0}):(ei=document.createEvent("Event"),ei.initEvent(Oe,!0,!0)),ei.to=He||Te,ei.from=We||Te,ei.item=Be||Te,ei.clone=Ue,ei.oldIndex=Cn,ei.newIndex=An,ei.oldDraggableIndex=En,ei.newDraggableIndex=Sn,ei.originalEvent=Tn,ei.pullMode=Ln?Ln.lastPutMode:void 0;var ri=_objectSpread2(_objectSpread2({},Bn),PluginManager.getEventProperties(Oe,e));for(var oi in ri)ei[oi]=ri[oi];Te&&Te.dispatchEvent(ei),ni[ti]&&ni[ti].call(e,ei)}}var _excluded=["evt"],pluginEvent=function(e,Te){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Be=Oe.evt,Ue=_objectWithoutProperties(Oe,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,Te,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:Be,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(We){_dispatchEvent({sortable:Te,name:We,originalEvent:Be})}},Ue))};function _dispatchEvent(ke){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},ke))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var ke=document.createElement("x");return ke.style.cssText="pointer-events:auto",ke.style.pointerEvents==="auto"}}(),_detectDirection=function(e,Te){var Oe=css(e),Be=parseInt(Oe.width)-parseInt(Oe.paddingLeft)-parseInt(Oe.paddingRight)-parseInt(Oe.borderLeftWidth)-parseInt(Oe.borderRightWidth),Ue=getChild(e,0,Te),He=getChild(e,1,Te),We=Ue&&css(Ue),Cn=He&&css(He),An=We&&parseInt(We.marginLeft)+parseInt(We.marginRight)+getRect(Ue).width,En=Cn&&parseInt(Cn.marginLeft)+parseInt(Cn.marginRight)+getRect(He).width;if(Oe.display==="flex")return Oe.flexDirection==="column"||Oe.flexDirection==="column-reverse"?"vertical":"horizontal";if(Oe.display==="grid")return Oe.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Ue&&We.float&&We.float!=="none"){var Sn=We.float==="left"?"left":"right";return He&&(Cn.clear==="both"||Cn.clear===Sn)?"vertical":"horizontal"}return Ue&&(We.display==="block"||We.display==="flex"||We.display==="table"||We.display==="grid"||An>=Be&&Oe[CSSFloatProperty]==="none"||He&&Oe[CSSFloatProperty]==="none"&&An+En>Be)?"vertical":"horizontal"},_dragElInRowColumn=function(e,Te,Oe){var Be=Oe?e.left:e.top,Ue=Oe?e.right:e.bottom,He=Oe?e.width:e.height,We=Oe?Te.left:Te.top,Cn=Oe?Te.right:Te.bottom,An=Oe?Te.width:Te.height;return Be===We||Ue===Cn||Be+He/2===We+An/2},_detectNearestEmptySortable=function(e,Te){var Oe;return sortables.some(function(Be){var Ue=Be[expando].options.emptyInsertThreshold;if(!(!Ue||lastChild(Be))){var He=getRect(Be),We=e>=He.left-Ue&&e<=He.right+Ue,Cn=Te>=He.top-Ue&&Te<=He.bottom+Ue;if(We&&Cn)return Oe=Be}}),Oe},_prepareGroup=function(e){function Te(Ue,He){return function(We,Cn,An,En){var Sn=We.options.group.name&&Cn.options.group.name&&We.options.group.name===Cn.options.group.name;if(Ue==null&&(He||Sn))return!0;if(Ue==null||Ue===!1)return!1;if(He&&Ue==="clone")return Ue;if(typeof Ue=="function")return Te(Ue(We,Cn,An,En),He)(We,Cn,An,En);var Tn=(He?We:Cn).options.group.name;return Ue===!0||typeof Ue=="string"&&Ue===Tn||Ue.join&&Ue.indexOf(Tn)>-1}}var Oe={},Be=e.group;(!Be||_typeof$1(Be)!="object")&&(Be={name:Be}),Oe.name=Be.name,Oe.checkPull=Te(Be.pull,!0),Oe.checkPut=Te(Be.put),Oe.revertClone=Be.revertClone,e.group=Oe},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(ke){if(ignoreNextClick)return ke.preventDefault(),ke.stopPropagation&&ke.stopPropagation(),ke.stopImmediatePropagation&&ke.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var Te=_detectNearestEmptySortable(e.clientX,e.clientY);if(Te){var Oe={};for(var Be in e)e.hasOwnProperty(Be)&&(Oe[Be]=e[Be]);Oe.target=Oe.rootEl=Te,Oe.preventDefault=void 0,Oe.stopPropagation=void 0,Te[expando]._onDragOver(Oe)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(ke,e){if(!(ke&&ke.nodeType&&ke.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(ke));this.el=ke,this.options=e=_extends({},e),ke[expando]=this;var Te={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(ke.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(ke,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(He,We){He.setData("Text",We.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,ke,Te);for(var Oe in Te)!(Oe in e)&&(e[Oe]=Te[Oe]);_prepareGroup(e);for(var Be in this)Be.charAt(0)==="_"&&typeof this[Be]=="function"&&(this[Be]=this[Be].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(ke,"pointerdown",this._onTapStart):(on(ke,"mousedown",this._onTapStart),on(ke,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(ke,"dragover",this),on(ke,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,Te){return typeof this.options.direction=="function"?this.options.direction.call(this,e,Te,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var Te=this,Oe=this.el,Be=this.options,Ue=Be.preventOnFilter,He=e.type,We=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,Cn=(We||e).target,An=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||Cn,En=Be.filter;if(_saveInputCheckedState(Oe),!dragEl&&!(/mousedown|pointerdown/.test(He)&&e.button!==0||Be.disabled)&&!An.isContentEditable&&!(!this.nativeDraggable&&Safari&&Cn&&Cn.tagName.toUpperCase()==="SELECT")&&(Cn=closest(Cn,Be.draggable,Oe,!1),!(Cn&&Cn.animated)&&lastDownEl!==Cn)){if(oldIndex=index(Cn),oldDraggableIndex=index(Cn,Be.draggable),typeof En=="function"){if(En.call(this,e,Cn,this)){_dispatchEvent({sortable:Te,rootEl:An,name:"filter",targetEl:Cn,toEl:Oe,fromEl:Oe}),pluginEvent("filter",Te,{evt:e}),Ue&&e.cancelable&&e.preventDefault();return}}else if(En&&(En=En.split(",").some(function(Sn){if(Sn=closest(An,Sn.trim(),Oe,!1),Sn)return _dispatchEvent({sortable:Te,rootEl:Sn,name:"filter",targetEl:Cn,fromEl:Oe,toEl:Oe}),pluginEvent("filter",Te,{evt:e}),!0}),En)){Ue&&e.cancelable&&e.preventDefault();return}Be.handle&&!closest(An,Be.handle,Oe,!1)||this._prepareDragStart(e,We,Cn)}}},_prepareDragStart:function(e,Te,Oe){var Be=this,Ue=Be.el,He=Be.options,We=Ue.ownerDocument,Cn;if(Oe&&!dragEl&&Oe.parentNode===Ue){var An=getRect(Oe);if(rootEl=Ue,dragEl=Oe,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=Oe,activeGroup=He.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(Te||e).clientX,clientY:(Te||e).clientY},tapDistanceLeft=tapEvt.clientX-An.left,tapDistanceTop=tapEvt.clientY-An.top,this._lastX=(Te||e).clientX,this._lastY=(Te||e).clientY,dragEl.style["will-change"]="all",Cn=function(){if(pluginEvent("delayEnded",Be,{evt:e}),Sortable.eventCanceled){Be._onDrop();return}Be._disableDelayedDragEvents(),!FireFox&&Be.nativeDraggable&&(dragEl.draggable=!0),Be._triggerDragStart(e,Te),_dispatchEvent({sortable:Be,name:"choose",originalEvent:e}),toggleClass(dragEl,He.chosenClass,!0)},He.ignore.split(",").forEach(function(En){find(dragEl,En.trim(),_disableDraggable)}),on(We,"dragover",nearestEmptyInsertDetectEvent),on(We,"mousemove",nearestEmptyInsertDetectEvent),on(We,"touchmove",nearestEmptyInsertDetectEvent),on(We,"mouseup",Be._onDrop),on(We,"touchend",Be._onDrop),on(We,"touchcancel",Be._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),He.delay&&(!He.delayOnTouchOnly||Te)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(We,"mouseup",Be._disableDelayedDrag),on(We,"touchend",Be._disableDelayedDrag),on(We,"touchcancel",Be._disableDelayedDrag),on(We,"mousemove",Be._delayedDragTouchMoveHandler),on(We,"touchmove",Be._delayedDragTouchMoveHandler),He.supportPointer&&on(We,"pointermove",Be._delayedDragTouchMoveHandler),Be._dragStartTimer=setTimeout(Cn,He.delay)}else Cn()}},_delayedDragTouchMoveHandler:function(e){var Te=e.touches?e.touches[0]:e;Math.max(Math.abs(Te.clientX-this._lastX),Math.abs(Te.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,Te){Te=Te||e.pointerType=="touch"&&e,!this.nativeDraggable||Te?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):Te?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,Te){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:Te}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var Oe=this.options;!e&&toggleClass(dragEl,Oe.dragClass,!1),toggleClass(dragEl,Oe.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:Te})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),Te=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==Te);)Te=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),Te)do{if(Te[expando]){var Oe=void 0;if(Oe=Te[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:Te}),Oe&&!this.options.dragoverBubble)break}e=Te}while(Te=getParentOrHost(Te));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var Te=this.options,Oe=Te.fallbackTolerance,Be=Te.fallbackOffset,Ue=e.touches?e.touches[0]:e,He=ghostEl&&matrix(ghostEl,!0),We=ghostEl&&He&&He.a,Cn=ghostEl&&He&&He.d,An=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),En=(Ue.clientX-tapEvt.clientX+Be.x)/(We||1)+(An?An[0]-ghostRelativeParentInitialScroll[0]:0)/(We||1),Sn=(Ue.clientY-tapEvt.clientY+Be.y)/(Cn||1)+(An?An[1]-ghostRelativeParentInitialScroll[1]:0)/(Cn||1);if(!Sortable.active&&!awaitingDragStarted){if(Oe&&Math.max(Math.abs(Ue.clientX-this._lastX),Math.abs(Ue.clientY-this._lastY))<Oe)return;this._onDragStart(e,!0)}if(ghostEl){He?(He.e+=En-(lastDx||0),He.f+=Sn-(lastDy||0)):He={a:1,b:0,c:0,d:1,e:En,f:Sn};var Tn="matrix(".concat(He.a,",").concat(He.b,",").concat(He.c,",").concat(He.d,",").concat(He.e,",").concat(He.f,")");css(ghostEl,"webkitTransform",Tn),css(ghostEl,"mozTransform",Tn),css(ghostEl,"msTransform",Tn),css(ghostEl,"transform",Tn),lastDx=En,lastDy=Sn,touchEvt=Ue}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,Te=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),Oe=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),Te.top+=ghostRelativeParent.scrollTop,Te.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,Oe.ghostClass,!1),toggleClass(ghostEl,Oe.fallbackClass,!0),toggleClass(ghostEl,Oe.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",Te.top),css(ghostEl,"left",Te.left),css(ghostEl,"width",Te.width),css(ghostEl,"height",Te.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,Te){var Oe=this,Be=e.dataTransfer,Ue=Oe.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),Oe.cloneId=_nextTick(function(){pluginEvent("clone",Oe),!Sortable.eventCanceled&&(Oe.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),Oe._hideClone(),_dispatchEvent({sortable:Oe,name:"clone"}))}),!Te&&toggleClass(dragEl,Ue.dragClass,!0),Te?(ignoreNextClick=!0,Oe._loopId=setInterval(Oe._emulateDragOver,50)):(off(document,"mouseup",Oe._onDrop),off(document,"touchend",Oe._onDrop),off(document,"touchcancel",Oe._onDrop),Be&&(Be.effectAllowed="move",Ue.setData&&Ue.setData.call(Oe,Be,dragEl)),on(document,"drop",Oe),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,Oe._dragStartId=_nextTick(Oe._dragStarted.bind(Oe,Te,e)),on(document,"selectstart",Oe),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var Te=this.el,Oe=e.target,Be,Ue,He,We=this.options,Cn=We.group,An=Sortable.active,En=activeGroup===Cn,Sn=We.sort,Tn=putSortable||An,Ln,Bn=this,ei=!1;if(_silent)return;function ni(ar,pr){pluginEvent(ar,Bn,_objectSpread2({evt:e,isOwner:En,axis:Ln?"vertical":"horizontal",revert:He,dragRect:Be,targetRect:Ue,canSort:Sn,fromSortable:Tn,target:Oe,completed:ri,onMove:function(br,Li){return _onMove(rootEl,Te,dragEl,Be,br,getRect(br),e,Li)},changed:oi},pr))}function ti(){ni("dragOverAnimationCapture"),Bn.captureAnimationState(),Bn!==Tn&&Tn.captureAnimationState()}function ri(ar){return ni("dragOverCompleted",{insertion:ar}),ar&&(En?An._hideClone():An._showClone(Bn),Bn!==Tn&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:An.options.ghostClass,!1),toggleClass(dragEl,We.ghostClass,!0)),putSortable!==Bn&&Bn!==Sortable.active?putSortable=Bn:Bn===Sortable.active&&putSortable&&(putSortable=null),Tn===Bn&&(Bn._ignoreWhileAnimating=Oe),Bn.animateAll(function(){ni("dragOverAnimationComplete"),Bn._ignoreWhileAnimating=null}),Bn!==Tn&&(Tn.animateAll(),Tn._ignoreWhileAnimating=null)),(Oe===dragEl&&!dragEl.animated||Oe===Te&&!Oe.animated)&&(lastTarget=null),!We.dragoverBubble&&!e.rootEl&&Oe!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!ar&&nearestEmptyInsertDetectEvent(e)),!We.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),ei=!0}function oi(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,We.draggable),_dispatchEvent({sortable:Bn,name:"change",toEl:Te,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),Oe=closest(Oe,We.draggable,Te,!0),ni("dragOver"),Sortable.eventCanceled)return ei;if(dragEl.contains(e.target)||Oe.animated&&Oe.animatingX&&Oe.animatingY||Bn._ignoreWhileAnimating===Oe)return ri(!1);if(ignoreNextClick=!1,An&&!We.disabled&&(En?Sn||(He=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,An,dragEl,e))&&Cn.checkPut(this,An,dragEl,e))){if(Ln=this._getDirection(e,Oe)==="vertical",Be=getRect(dragEl),ni("dragOverValid"),Sortable.eventCanceled)return ei;if(He)return parentEl=rootEl,ti(),this._hideClone(),ni("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),ri(!0);var ai=lastChild(Te,We.draggable);if(!ai||_ghostIsLast(e,Ln,this)&&!ai.animated){if(ai===dragEl)return ri(!1);if(ai&&Te===e.target&&(Oe=ai),Oe&&(Ue=getRect(Oe)),_onMove(rootEl,Te,dragEl,Be,Oe,Ue,e,!!Oe)!==!1)return ti(),ai&&ai.nextSibling?Te.insertBefore(dragEl,ai.nextSibling):Te.appendChild(dragEl),parentEl=Te,oi(),ri(!0)}else if(ai&&_ghostIsFirst(e,Ln,this)){var ci=getChild(Te,0,We,!0);if(ci===dragEl)return ri(!1);if(Oe=ci,Ue=getRect(Oe),_onMove(rootEl,Te,dragEl,Be,Oe,Ue,e,!1)!==!1)return ti(),Te.insertBefore(dragEl,ci),parentEl=Te,oi(),ri(!0)}else if(Oe.parentNode===Te){Ue=getRect(Oe);var Pi=0,vi,pi=dragEl.parentNode!==Te,Mi=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||Be,Oe.animated&&Oe.toRect||Ue,Ln),Fi=Ln?"top":"left",fi=isScrolledPast(Oe,"top","top")||isScrolledPast(dragEl,"top","top"),ui=fi?fi.scrollTop:void 0;lastTarget!==Oe&&(vi=Ue[Fi],pastFirstInvertThresh=!1,isCircumstantialInvert=!Mi&&We.invertSwap||pi),Pi=_getSwapDirection(e,Oe,Ue,Ln,Mi?1:We.swapThreshold,We.invertedSwapThreshold==null?We.swapThreshold:We.invertedSwapThreshold,isCircumstantialInvert,lastTarget===Oe);var Oi;if(Pi!==0){var Ni=index(dragEl);do Ni-=Pi,Oi=parentEl.children[Ni];while(Oi&&(css(Oi,"display")==="none"||Oi===ghostEl))}if(Pi===0||Oi===Oe)return ri(!1);lastTarget=Oe,lastDirection=Pi;var nr=Oe.nextElementSibling,er=!1;er=Pi===1;var cr=_onMove(rootEl,Te,dragEl,Be,Oe,Ue,e,er);if(cr!==!1)return(cr===1||cr===-1)&&(er=cr===1),_silent=!0,setTimeout(_unsilent,30),ti(),er&&!nr?Te.appendChild(dragEl):Oe.parentNode.insertBefore(dragEl,er?nr:Oe),fi&&scrollBy(fi,0,ui-fi.scrollTop),parentEl=dragEl.parentNode,vi!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(vi-getRect(Oe)[Fi])),oi(),ri(!0)}if(Te.contains(dragEl))return ri(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var Te=this.el,Oe=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(Te,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!Oe.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],Te,Oe=this.el.children,Be=0,Ue=Oe.length,He=this.options;Be<Ue;Be++)Te=Oe[Be],closest(Te,He.draggable,this.el,!1)&&e.push(Te.getAttribute(He.dataIdAttr)||_generateId(Te));return e},sort:function(e,Te){var Oe={},Be=this.el;this.toArray().forEach(function(Ue,He){var We=Be.children[He];closest(We,this.options.draggable,Be,!1)&&(Oe[Ue]=We)},this),Te&&this.captureAnimationState(),e.forEach(function(Ue){Oe[Ue]&&(Be.removeChild(Oe[Ue]),Be.appendChild(Oe[Ue]))}),Te&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,Te){return closest(e,Te||this.options.draggable,this.el,!1)},option:function(e,Te){var Oe=this.options;if(Te===void 0)return Oe[e];var Be=PluginManager.modifyOption(this,e,Te);typeof Be<"u"?Oe[e]=Be:Oe[e]=Te,e==="group"&&_prepareGroup(Oe)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(Te){Te.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(ke){ke.dataTransfer&&(ke.dataTransfer.dropEffect="move"),ke.cancelable&&ke.preventDefault()}function _onMove(ke,e,Te,Oe,Be,Ue,He,We){var Cn,An=ke[expando],En=An.options.onMove,Sn;return window.CustomEvent&&!IE11OrLess&&!Edge?Cn=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Cn=document.createEvent("Event"),Cn.initEvent("move",!0,!0)),Cn.to=e,Cn.from=ke,Cn.dragged=Te,Cn.draggedRect=Oe,Cn.related=Be||e,Cn.relatedRect=Ue||getRect(e),Cn.willInsertAfter=We,Cn.originalEvent=He,ke.dispatchEvent(Cn),En&&(Sn=En.call(An,Cn,He)),Sn}function _disableDraggable(ke){ke.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(ke,e,Te){var Oe=getRect(getChild(Te.el,0,Te.options,!0)),Be=getChildContainingRectFromElement(Te.el,Te.options,ghostEl),Ue=10;return e?ke.clientX<Be.left-Ue||ke.clientY<Oe.top&&ke.clientX<Oe.right:ke.clientY<Be.top-Ue||ke.clientY<Oe.bottom&&ke.clientX<Oe.left}function _ghostIsLast(ke,e,Te){var Oe=getRect(lastChild(Te.el,Te.options.draggable)),Be=getChildContainingRectFromElement(Te.el,Te.options,ghostEl),Ue=10;return e?ke.clientX>Be.right+Ue||ke.clientY>Oe.bottom&&ke.clientX>Oe.left:ke.clientY>Be.bottom+Ue||ke.clientX>Oe.right&&ke.clientY>Oe.top}function _getSwapDirection(ke,e,Te,Oe,Be,Ue,He,We){var Cn=Oe?ke.clientY:ke.clientX,An=Oe?Te.height:Te.width,En=Oe?Te.top:Te.left,Sn=Oe?Te.bottom:Te.right,Tn=!1;if(!He){if(We&&targetMoveDistance<An*Be){if(!pastFirstInvertThresh&&(lastDirection===1?Cn>En+An*Ue/2:Cn<Sn-An*Ue/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)Tn=!0;else if(lastDirection===1?Cn<En+targetMoveDistance:Cn>Sn-targetMoveDistance)return-lastDirection}else if(Cn>En+An*(1-Be)/2&&Cn<Sn-An*(1-Be)/2)return _getInsertDirection(e)}return Tn=Tn||He,Tn&&(Cn<En+An*Ue/2||Cn>Sn-An*Ue/2)?Cn>En+An/2?1:-1:0}function _getInsertDirection(ke){return index(dragEl)<index(ke)?1:-1}function _generateId(ke){for(var e=ke.tagName+ke.className+ke.src+ke.href+ke.textContent,Te=e.length,Oe=0;Te--;)Oe+=e.charCodeAt(Te);return Oe.toString(36)}function _saveInputCheckedState(ke){savedInputChecked.length=0;for(var e=ke.getElementsByTagName("input"),Te=e.length;Te--;){var Oe=e[Te];Oe.checked&&savedInputChecked.push(Oe)}}function _nextTick(ke){return setTimeout(ke,0)}function _cancelNextTick(ke){return clearTimeout(ke)}documentExists&&on(document,"touchmove",function(ke){(Sortable.active||awaitingDragStarted)&&ke.cancelable&&ke.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,Te){return!!closest(e,Te,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(ke){return ke[expando]};Sortable.mount=function(){for(var ke=arguments.length,e=new Array(ke),Te=0;Te<ke;Te++)e[Te]=arguments[Te];e[0].constructor===Array&&(e=e[0]),e.forEach(function(Oe){if(!Oe.prototype||!Oe.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Oe));Oe.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),Oe.utils)),PluginManager.mount(Oe)})};Sortable.create=function(ke,e){return new Sortable(ke,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function ke(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return ke.prototype={dragStarted:function(Te){var Oe=Te.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):Oe.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(Te){var Oe=Te.originalEvent;!this.options.dragOverBubble&&!Oe.rootEl&&this._handleAutoScroll(Oe)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(Te){this._handleAutoScroll(Te,!0)},_handleAutoScroll:function(Te,Oe){var Be=this,Ue=(Te.touches?Te.touches[0]:Te).clientX,He=(Te.touches?Te.touches[0]:Te).clientY,We=document.elementFromPoint(Ue,He);if(touchEvt$1=Te,Oe||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(Te,this.options,We,Oe);var Cn=getParentAutoScrollElement(We,!0);scrolling&&(!pointerElemChangedInterval||Ue!==lastAutoScrollX||He!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var An=getParentAutoScrollElement(document.elementFromPoint(Ue,He),!0);An!==Cn&&(Cn=An,clearAutoScrolls()),autoScroll(Te,Be.options,An,Oe)},10),lastAutoScrollX=Ue,lastAutoScrollY=He)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(We,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(Te,this.options,getParentAutoScrollElement(We,!1),!1)}}},_extends(ke,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(ke){clearInterval(ke.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(ke,e,Te,Oe){if(e.scroll){var Be=(ke.touches?ke.touches[0]:ke).clientX,Ue=(ke.touches?ke.touches[0]:ke).clientY,He=e.scrollSensitivity,We=e.scrollSpeed,Cn=getWindowScrollingElement(),An=!1,En;scrollRootEl!==Te&&(scrollRootEl=Te,clearAutoScrolls(),scrollEl=e.scroll,En=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(Te,!0)));var Sn=0,Tn=scrollEl;do{var Ln=Tn,Bn=getRect(Ln),ei=Bn.top,ni=Bn.bottom,ti=Bn.left,ri=Bn.right,oi=Bn.width,ai=Bn.height,ci=void 0,Pi=void 0,vi=Ln.scrollWidth,pi=Ln.scrollHeight,Mi=css(Ln),Fi=Ln.scrollLeft,fi=Ln.scrollTop;Ln===Cn?(ci=oi<vi&&(Mi.overflowX==="auto"||Mi.overflowX==="scroll"||Mi.overflowX==="visible"),Pi=ai<pi&&(Mi.overflowY==="auto"||Mi.overflowY==="scroll"||Mi.overflowY==="visible")):(ci=oi<vi&&(Mi.overflowX==="auto"||Mi.overflowX==="scroll"),Pi=ai<pi&&(Mi.overflowY==="auto"||Mi.overflowY==="scroll"));var ui=ci&&(Math.abs(ri-Be)<=He&&Fi+oi<vi)-(Math.abs(ti-Be)<=He&&!!Fi),Oi=Pi&&(Math.abs(ni-Ue)<=He&&fi+ai<pi)-(Math.abs(ei-Ue)<=He&&!!fi);if(!autoScrolls[Sn])for(var Ni=0;Ni<=Sn;Ni++)autoScrolls[Ni]||(autoScrolls[Ni]={});(autoScrolls[Sn].vx!=ui||autoScrolls[Sn].vy!=Oi||autoScrolls[Sn].el!==Ln)&&(autoScrolls[Sn].el=Ln,autoScrolls[Sn].vx=ui,autoScrolls[Sn].vy=Oi,clearInterval(autoScrolls[Sn].pid),(ui!=0||Oi!=0)&&(An=!0,autoScrolls[Sn].pid=setInterval((function(){Oe&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var nr=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*We:0,er=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*We:0;typeof En=="function"&&En.call(Sortable.dragged.parentNode[expando],er,nr,ke,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,er,nr)}).bind({layer:Sn}),24))),Sn++}while(e.bubbleScroll&&Tn!==Cn&&(Tn=getParentAutoScrollElement(Tn,!1)));scrolling=An}},30),drop=function(e){var Te=e.originalEvent,Oe=e.putSortable,Be=e.dragEl,Ue=e.activeSortable,He=e.dispatchSortableEvent,We=e.hideGhostForTarget,Cn=e.unhideGhostForTarget;if(Te){var An=Oe||Ue;We();var En=Te.changedTouches&&Te.changedTouches.length?Te.changedTouches[0]:Te,Sn=document.elementFromPoint(En.clientX,En.clientY);Cn(),An&&!An.el.contains(Sn)&&(He("spill"),this.onSpill({dragEl:Be,putSortable:Oe}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var Te=e.oldDraggableIndex;this.startIndex=Te},onSpill:function(e){var Te=e.dragEl,Oe=e.putSortable;this.sortable.captureAnimationState(),Oe&&Oe.captureAnimationState();var Be=getChild(this.sortable.el,this.startIndex,this.options);Be?this.sortable.el.insertBefore(Te,Be):this.sortable.el.appendChild(Te),this.sortable.animateAll(),Oe&&Oe.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var Te=e.dragEl,Oe=e.putSortable,Be=Oe||this.sortable;Be.captureAnimationState(),Te.parentNode&&Te.parentNode.removeChild(Te),Be.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(ke,e){let Te=".GPlayerName";checkDsfr()&&(Te=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(ke,{handle:Te,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}}):Sortable.create(ke,{handle:Te,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}})},_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPlayerSwitcher"),ke.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",ke},_createMainLayersShowElement:function(){var ke=document.createElement("input");return ke.id=this._addUID("GPshowLayersList"),ke.type="checkbox",ke},_createMainLayersElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPlayersList"),ke.className="GPpanel gpf-panel fr-modal",ke},_createMainLayersDivElement:function(){var ke=document.createElement("div");return ke.className="GPpanelBody gpf-panel__body_ls fr-modal__body",ke},_createMainPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),document.getElementById(ke._addUID("GPshowLayersList")).checked=Be,document.getElementById(ke._addUID("GPshowLayersList")).checked&&(document.getElementById(ke._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(ke._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),ke.onShowLayerSwitcherClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),document.getElementById(ke._addUID("GPshowLayersList")).checked&&(document.getElementById(ke._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(ke._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),ke.onShowLayerSwitcherClick(Oe)}),e},_createMainCounterLayersElement:function(){var ke=document.createElement("span");return ke.id=this._addUID("GPlayerCounter"),ke.className="GPlayerCounter",ke.innerHTML="0",ke},_createMainInfoElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPlayerInfoPanel"),ke.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",ke},_createMainInfoDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createLayersPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader gpf-panel__header_ls",ke},_createLayersPanelIconElement:function(){var ke=document.createElement("label");return ke.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",ke.title="Couches de donnes",ke},_createLayersPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="GPpanelTitle gpf-panel__title_ls",ke.id=this._addUID("GPlayersHeaderTitle"),ke.innerHTML="Couches de donnes",ke},_createLayersPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible fr-mx-1w",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(ke){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+ke.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(ke)),e.appendChild(this._createAdvancedToolShowElement(ke)),e.appendChild(this._createAdvancedToolElement(ke)),e},_createBasicToolElement:function(ke){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+ke.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(ke)),e.appendChild(this._createBasicToolVisibilityElement(ke)),e.appendChild(this._createBasicToolDragNDropElement(ke)),e},_createBasicToolDragNDropElement:function(ke){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+ke.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var Te=this;return e.addEventListener?e.addEventListener("click",function(Oe){Te._onStartDragAndDropLayerClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Te._onStartDragAndDropLayerClick(Oe)}),e},_createBasicToolNameElement:function(ke){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+ke.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=ke.description||ke.title,e.innerHTML=ke.title,e},_createBasicToolVisibilityElement:function(ke){var e=typeof ke.visibility<"u"?ke.visibility:!0,Te=document.createElement("button");Te.id=this._addUID("GPvisibilityPicto_ID_"+ke.id),Te.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Afficher/masquer la couche",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",e),Te.setAttribute("type","button");var Oe=this;return Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe._onVisibilityLayerClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe._onVisibilityLayerClick(Be)}),Te},_createAdvancedToolShowElement:function(ke){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+ke.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var Te=this;return e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be);var Ue=document.getElementById(Te._addUID("GPadvancedTools_ID_"+ke.id));Be?(Ue.classList.replace("GPelementVisible","GPelementHidden"),Ue.classList.replace("gpf-visible","gpf-hidden")):(Ue.classList.replace("GPelementHidden","GPelementVisible"),Ue.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(ke){var e=document.createElement("div");e.id=this._addUID("GPadvancedTools_ID_"+ke.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(ke)),checkDsfr()&&e.appendChild(this._createAdvancedToolEditionElement(ke)),e.appendChild(this._createAdvancedToolInformationElement(ke));for(var Te=this._createAdvancedToolOpacityElement(ke),Oe=0;Oe<Te.length;Oe++)e.appendChild(Te[Oe]);if(e.appendChild(this._createAdvancedToolExtentElement(ke)),checkDsfr()){var Be=document.createElement("button");Be.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",Be.setAttribute("aria-pressed",!1),Be.addEventListener?Be.addEventListener("click",function(He){var We=He.target.ariaPressed==="true";He.target.setAttribute("aria-pressed",!We)}):Be.attachEvent&&Be.attachEvent("onclick",function(He){var We=He.target.ariaPressed==="true";He.target.setAttribute("aria-pressed",!We)});var Ue=document.createElement("div");Ue.appendChild(this._createAdvancedToolDeleteElement(ke,!0)),Ue.appendChild(this._createAdvancedToolInformationElement(ke,!0)),Ue.appendChild(this._createAdvancedToolExtentElement(ke,!0)),e.appendChild(Be),e.appendChild(Ue)}return e},_createAdvancedToolDeleteElement:function(ke,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPremoveContextual_ID_"+ke.id):Te.id=this._addUID("GPremove_ID_"+ke.id),Te.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Supprimer la couche",Te.layerId=ke.id,e&&(Te.innerText="Supprimer"),Te.setAttribute("tabindex","0"),Te.setAttribute("type","button");var Oe=this;return Te.addEventListener?Te.addEventListener("click",function(Be){Oe._onDropLayerClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){Oe._onDropLayerClick(Be)}),Te},_createAdvancedToolEditionElement:function(ke){var e=document.createElement("button");e.id=this._addUID("GPedit_ID_"+ke.id),e.className="GPlayerEdit gpf-btn gpf-btn-icon gpf-btn-icon-ls-edit fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Editer la couche",e.layerId=ke.id,e.setAttribute("tabindex","0"),e.setAttribute("type","button"),ke.type!=="feature"&&(e.style.opacity="0",e.style.visibility="hidden");var Te=this;return e.addEventListener?e.addEventListener("click",function(Oe){Te._onEditLayerClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Te._onEditLayerClick(Oe)}),e},_createAdvancedToolInformationElement:function(ke,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPinfoContextual_ID_"+ke.id):Te.id=this._addUID("GPinfo_ID_"+ke.id),Te.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!ke.title||!ke.description)&&(Te.style.opacity="0",Te.style.visibility="hidden",e&&(Te.style.display="none")),Te.title="Informations/lgende",Te.layerId=ke.id,e&&(Te.innerText="Informations"),Te.setAttribute("tabindex","0"),Te.setAttribute("type","button");var Oe=this;return Te.addEventListener?Te.addEventListener("click",function(Be){Oe._onOpenLayerInfoClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){Oe._onOpenLayerInfoClick(Be)}),Te},_createAdvancedToolOpacityElement:function(ke){var e=[],Te=document.createElement("div");Te.id=this._addUID("GPopacity_ID_"+ke.id),Te.className="GPlayerOpacity fr-range fr-range--sm",Te.dataset.frJsRange="true",Te.title="Opacit";var Oe=typeof ke.opacity<"u"?ke.opacity:1;Oe=Math.round(Oe*100),Te.style.setProperty("--progress-right",Oe+"%");var Be=document.createElement("input");Be.id=this._addUID("GPopacityValueDiv_ID_"+ke.id),Be.type="range",Be.value=Oe,Be.ariaLabel="Opacit";var Ue=this;Be.addEventListener?Be.addEventListener("change",function(Cn){Ue._onChangeLayerOpacity(Cn)}):Be.attachEvent&&Be.attachEvent("onchange",function(Cn){Ue._onChangeLayerOpacity(Cn)}),Be.addEventListener?Be.addEventListener("input",function(Cn){Ue._onChangeLayerOpacity(Cn)}):Be.attachEvent&&Be.attachEvent("oninput",function(Cn){Ue._onChangeLayerOpacity(Cn)}),Te.appendChild(Be);var He=document.createElement("div");He.id=this._addUID("GPopacityValueDiv_ID_"+ke.id),He.className="GPlayerOpacityValue";var We=document.createElement("span");return We.id=this._addUID("GPopacityValue_ID_"+ke.id),We.className="gpf-range__output fr-range__output gpf-visible",We.innerHTML=Oe+"%",He.appendChild(We),e.push(Te),e.push(He),e},_createAdvancedToolExtentElement:function(ke,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPextentContextual_ID_"+ke.id):Te.id=this._addUID("GPextent_ID_"+ke.id),Te.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Zoomer dans l'tendue",Te.layerId=ke.id,e&&(Te.innerText="Zoomer"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!0),Te.setAttribute("type","button");var Oe=this;return Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe._onZoomToExtentClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe._onZoomToExtentClick(Be)}),Te},_createContainerLayerInfoElement:function(ke){var e=document.createElement("div"),Te=document.createElement("div");Te.className="gpf-panel__header_ls",e.appendChild(Te);var Oe=document.createElement("label");Oe.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",Oe.title="Informations",Te.appendChild(Oe);var Be=document.createElement("div");Be.id=this._addUID("GPlayerInfoTitle"),Be.innerHTML=ke.title,Be.className="gpf-panel__title_ls",Te.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPlayerInfoClose"),Ue.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer la fentre";var He=this,We=function(){document.getElementById(He._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(He._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(ke.id).classList.add("GPlayerInfoClosed"),document.getElementById(ke.id).classList.remove("GPlayerInfoOpened")};Ue.addEventListener?Ue.addEventListener("click",We):Ue.attachEvent&&Ue.attachEvent("onclick",We),this.addEventListener("layerswitcher:remove",Oi=>{parseInt(ke.id.split("-")[0].split("GPinfo_ID_")[1])===Oi.layer.id&&(document.getElementById(He._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(He._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),Te.appendChild(Ue),e.appendChild(Te);var Cn=document.createElement("div");if(Cn.id=this._addUID("GPlayerInfoContent"),Cn.className="gpf-panel__content fr-modal__content",e.appendChild(Cn),ke.quicklookUrl){var An=document.createElement("div");An.id=this._addUID("GPlayerInfoQuicklook"),An.title="Afficher un aperu de la couche";var En=document.createElement("a");En.href=ke.quicklookUrl,En.appendChild(An),Cn.appendChild(En)}var Sn=document.createElement("div");if(Sn.id=this._addUID("GPlayerInfoDescription"),Sn.innerHTML=ke.description,Cn.appendChild(Sn),ke.metadata){var Tn=document.createElement("div");Tn.id=this._addUID("GPlayerInfoMetadata");var Ln=document.createElement("div");Ln.className="GPlayerInfoSubtitle",Ln.innerHTML="Mtadonnes",Tn.appendChild(Ln);for(var Bn=0;Bn<ke.metadata.length;Bn++){var ei=ke.metadata[Bn].url,ni=document.createElement("div");ni.className="GPlayerInfoLink";var ti=document.createElement("a");ti.href=ei,ti.innerHTML=ei,ni.appendChild(ti),Tn.appendChild(ni)}ke.metadata.length!==0&&Cn.appendChild(Tn)}if(ke.legends){var ri=document.createElement("div");ri.id=this._addUID("GPlayerInfoLegend");var oi=document.createElement("div");oi.className="GPlayerInfoSubtitle",oi.innerHTML="Lgende",ri.appendChild(oi);for(var ai={},ci=ke.maxScaleDenominator||56e7,Pi=0;Pi<ke.legends.length;Pi++){var vi=ke.legends[Pi].minScaleDenominator;if(vi){var pi=vi.toString();vi=Math.round(parseInt(pi.substring(0,3),10)/10)*Math.pow(10,pi.length-2)}else vi=270;ai[vi]=ke.legends[Pi]}for(var Mi in ai)if(ai.hasOwnProperty(Mi)){var Fi=ai[Mi].url;if(typeof Fi=="string"&&Fi.toLowerCase().indexOf("nolegend.jpg")===-1){var fi=document.createElement("div");fi.className="GPlayerInfoLink",ci=ai[Mi].maxScaleDenominator||ci;var ui=document.createElement("a");ui.className="fr-link",ui.href=Fi,ui.target="_blank",ui.innerHTML="Du 1/"+Mi+" au 1/"+ci,fi.appendChild(ui),ri.appendChild(fi)}else delete ai[Mi]}Object.keys(ai).length!==0&&Cn.appendChild(ri)}return e}},logger$A=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class Wf extends ControlExtended{constructor(e){e=e||{};var Te=e.options||{},Oe=e.layers||[];if(super(Te),!(this instanceof Wf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(Oe))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof Te!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(Te,Oe),this.container=this._initContainer(Te),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",Oe=>{var Be=Oe.element,Ue;Be.hasOwnProperty("gpLayerId")?Ue=Be.gpLayerId:(Ue=this._layerId,Be.gpLayerId=Ue,this._layerId++),this._layers[Ue]||this.addLayer(Be)}),this._listeners.onRemoveListener=e.getLayers().on("remove",Oe=>{var Be=Oe.element,Ue=Be.gpLayerId;this._layers[Ue]&&this.removeLayer(Be)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var Te=this._layersOrder.length-1;Te>=0;Te--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,Te){var Oe=this.getMap();if(Te=Te||{},!e){logger$A.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var Be=e.gpLayerId;if(typeof Be>"u"){logger$A.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Ue=!1;if(Oe.getLayers().forEach(ni=>{ni.gpLayerId===Be&&(Ue=!0)}),!Ue){logger$A.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[Be]){for(var Tn in Te)Te.hasOwnProperty(Tn)&&(this._layers[Be][Tn]=Te[Tn]);if(Te.title){var Ln=document.getElementById(this._addUID("GPname_ID_"+Be));Ln&&(Ln.innerHTML=Te.title,Ln.title=Te.description||Te.title)}var Bn=document.getElementById(this._addUID("GPinfo_ID_"+Be));if(!document.getElementById(this._addUID("GPinfo_ID_"+Be))&&Te.description){var ei=document.getElementById(this._addUID("GPadvancedTools_ID_"+Be));ei&&ei.appendChild(this._createAdvancedToolInformationElement({id:Be}))}Bn&&Bn.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var He=this.getLayerInfo(e)||{},We=e.getOpacity(),Cn=e.getVisible(),An=this.isInRange(e,Oe),En={layer:e,id:Be,name:e.name,service:e.service,type:"",opacity:We??1,visibility:Cn??!0,inRange:An??!0,title:Te.title!=null?Te.title:He._title||Be,description:Te.description||He._description||null,legends:Te.legends||He._legends||[],metadata:Te.metadata||He._metadata||[],quicklookUrl:Te.quicklookUrl||He._quicklookUrl||null};this._layers[Be]=En;var Sn=this._createLayerDiv(En);this._layers[Be].div=Sn,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(En),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(Sn,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",ni=>this._updateLayerOpacity(ni)),this._listeners.updateLayerVisibility=e.on("change:visible",ni=>this._updateLayerVisibility(ni)),this._layers[Be].onZIndexChangeEvent==null&&(this._layers[Be].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[Be]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$A.trace(e);var Te=e.gpLayerId,Oe=document.getElementById(this._addUID("GPinfo_ID_"+Te));Oe&&Oe.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Te));Be&&this._layerListContainer.removeChild(Be);var Ue=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Ue,1),this._lastZIndex--;for(var He=this._layersOrder,We=0;We<He.length;We++)He[We].layer.setZIndex(this._lastZIndex-We);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[Te]}),delete this._layers[Te],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$A.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var Te=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&Te||!e&&!Te||(Te||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,Te){if(e){var Oe=e.gpLayerId;if(Oe==null){logger$A.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var Be=document.getElementById(this._addUID("GPremove_ID_"+Oe));Be&&(Te===!1?Be.style.display="none":Te===!0&&(Be.style.display="block"))}}getContainer(){return this.container}_initialize(e,Te){this.options={id:"",collapsed:!0,draggable:!1,counter:!1,panel:!1,gutter:!1,allowEdit:!1},Helper.assign(this.options,e),this.options.layers=Te,this._uid=this.options.id||SelectorID.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=this.options.collapsed!==void 0?this.options.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe].layer;if(Be){var Ue;Be.hasOwnProperty("gpLayerId")?Ue=Be.gpLayerId:(Ue=this._layerId,Be.gpLayerId=Ue,this._layerId++);var He=Te[Oe].config||{},We=Be.getOpacity(),Cn=Be.getVisible(),An={layer:Be,id:Ue,name:Be.name,service:Be.service,opacity:We??1,visibility:Cn??!0,title:He.title!=null?He.title:He.id?He.id:Ue,description:He.description||null,legends:He.legends||[],metadata:He.metadata||[],quicklookUrl:He.quicklookUrl||null};this._layers[Ue]=An}}}_initContainer(){var e=this._createMainContainerElement(),Te=this._createMainLayersShowElement();e.appendChild(Te),this.collapsed?this.collapsed=!0:(Te.checked="checked",this.collapsed=!1);var Oe=this,Be=function(ei){this.collapsed=!ei.target.checked,this.dispatchEvent("change:collapsed")};Te.addEventListener("click",function(ei){Be.call(Oe,ei)});var Ue=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Ue),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var He=this._layerSwitcherCounter=this._createMainCounterLayersElement();Ue.appendChild(He)}var We=this._createMainLayersElement();if(e.appendChild(We),this.options.panel){var Cn=this._createLayersPanelHeaderElement();We.appendChild(Cn);var An=this._createLayersPanelIconElement();Cn.appendChild(An);var En=this._createLayersPanelTitleElement();Cn.appendChild(En);var Sn=this._createLayersPanelCloseElement();Cn.appendChild(Sn)}var Tn=this._layerListContainer=this._createMainLayersDivElement();We.appendChild(Tn),this._createDraggableElement(Tn,this);var Ln=this._createMainInfoElement(),Bn=this._createMainInfoDivElement();return Ln.appendChild(Bn),e.appendChild(Ln),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(Cn=>{var An=null;Cn.hasOwnProperty("gpLayerId")?An=Cn.gpLayerId:(An=this._layerId,Cn.gpLayerId=An,this._layerId++);var En=this.getLayerInfo(Cn)||{};if(this._layers[An])this._layers[An].opacity=Cn.getOpacity(),this._layers[An].visibility=Cn.getVisible(),this._layers[An].inRange=this.isInRange(Cn,e);else{var Sn=Cn.getOpacity(),Tn=Cn.getVisible(),Ln=this.isInRange(Cn,e),Bn={layer:Cn,id:An,name:Cn.name,service:Cn.service,opacity:Sn??1,visibility:Tn??!0,inRange:Ln??!0,title:En._title||An,description:En._description||null,legends:En._legends||[],metadata:En._metadata||[],quicklookUrl:En._quicklookUrl||null};this._layers[An]=Bn}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=Cn.on("change:opacity",ni=>this._updateLayerOpacity(ni)),this._listeners._updateLayerVisibility=Cn.on("change:visible",ni=>this._updateLayerVisibility(ni)),Cn.getZIndex!==void 0){var ei=Cn.getZIndex()||0;(!this._layersIndex[ei]||!Array.isArray(this._layersIndex[ei]))&&(this._layersIndex[ei]=[]),this._layersIndex[ei].push(this._layers[An])}});for(var Te in this._layersIndex)if(this._layersIndex.hasOwnProperty(Te))for(var Oe=this._layersIndex[Te],Be=0;Be<Oe.length;Be++)this._layersOrder.unshift(Oe[Be]),this._lastZIndex++,Oe[Be].layer.setZIndex(this._lastZIndex),this._layers[Oe[Be].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Oe[Be].layer.gpLayerId].onZIndexChangeEvent=Oe[Be].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Ue=0;Ue<this._layersOrder.length;Ue++){var He=this._layersOrder[Ue],We=this._createLayerDiv(He);this._layerListContainer.querySelector("#"+We.id)||this._layerListContainer.appendChild(We),this._layers[He.id].div=We}}_createLayerDiv(e){var Te=e.legends&&e.legends.length!==0,Oe=e.metadata&&e.metadata.length!==0,Be=e.quicklookUrl;(Te||Oe||Be)&&(e.displayInformationElement=!0),e.type="",this.options.allowEdit&&(e.layer instanceof VectorLayer||e.layer instanceof VectorTileLayer)&&(e.type="feature");var Ue=this._createContainerLayerElement(e);return e.inRange||Ue.classList.add("outOfRange"),Ue}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this._showLayerSwitcherButton.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe].layer,Ue=e.target.value,He=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));He.innerHTML=Ue+"%",Be.setOpacity(Ue/100)}_updateLayerOpacity(e){var Te=e.target.getOpacity();Te>1&&(Te=1),Te<0&&(Te=0);var Oe=e.target.gpLayerId,Be=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+Oe));Be&&(Be.value=Math.round(Te*100));var Ue=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));Ue&&(Ue.innerHTML=Math.round(Te*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:Te,layer:this._layers[Oe]})}_onVisibilityLayerClick(e){var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe].layer;Be.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var Te=e.target.getVisible(),Oe=e.target.gpLayerId,Be=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+Oe));Be&&(Be.ariaPressed=Te),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:Te,layer:this._layers[Oe]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var Te,Oe;e.getLayers().forEach(An=>{Oe=An.gpLayerId,unByKey(this._layers[Oe].onZIndexChangeEvent),this._layers[Oe].onZIndexChangeEvent=null,Te=null,An.getZIndex!==void 0&&(Te=An.getZIndex(),(!this._layersIndex[Te]||!Array.isArray(this._layersIndex[Te]))&&(this._layersIndex[Te]=[]),this._layersIndex[Te].push(this._layers[Oe]))}),this._lastZIndex=0,this._layersOrder=[];for(var Be in this._layersIndex)if(this._layersIndex.hasOwnProperty(Be))for(var Ue=this._layersIndex[Be],He=0;He<Ue.length;He++)this._layersOrder.unshift(Ue[He]),this._lastZIndex++,this._layers[Ue[He].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Ue[He].layer.gpLayerId].onZIndexChangeEvent=Ue[He].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let An=0;An<this._layerListContainer.childNodes.length;An++){const En=this._layerListContainer.childNodes[An];En.id!==""&&En.remove()}for(var We=0;We<this._layersOrder.length;We++){var Cn=this._layersOrder[We];this._layerListContainer.appendChild(Cn.div)}}else logger$A.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe],Ue,He,We=document.getElementById(e.target.id);if(We.classList.contains("GPlayerInfoOpened")){We.classList.remove("GPlayerInfoOpened"),We.classList.add("GPlayerInfoClosed"),Ue=document.getElementById(this._addUID("GPlayerInfoPanel")),Ue.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Ue.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),He=document.getElementById(this._addUID("GPlayerInfoContent")),He&&He.parentNode.remove();return}We.classList.contains("GPlayerInfoClosed")&&(We.classList.remove("GPlayerInfoClosed"),We.classList.add("GPlayerInfoOpened")),Ue=document.getElementById(this._addUID("GPlayerInfoPanel")),Ue.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Ue.classList.add("GPlayerInfoPanelOpened","gpf-visible"),He=document.getElementById(this._addUID("GPlayerInfoContent")),He&&He.parentNode.remove();var Cn={id:Te,title:Be.title,description:Be.description,quicklookUrl:Be.quicklookUrl,metadata:Be.metadata,legends:Be.legends},An=Be.layer.getMaxResolution();An===1/0?Cn._maxScaleDenominator=56e7:Cn._maxScaleDenominator=Math.round(An/28e-5);var En=this._createContainerLayerInfoElement(Cn);Ue.firstChild.appendChild(En)}_onDropLayerClick(e){var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe].layer;this.getMap().getLayers().remove(Be)}_onEditLayerClick(e){var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe],Ue=this._layers[Oe].layer;this.dispatchEvent({type:"layerswitcher:edit",layer:Ue,options:Be})}_onEndDragAndDropLayerClick(e){logger$A.trace(e);var Te=this.getMap(),Oe=document.querySelectorAll("div.GPlayerSwitcher_layer"),Be=Oe.length;this._layersOrder=[];for(var Ue=0;Ue<Oe.length;Ue++){var He=Oe[Ue].id,We=SelectorID.index(He),Cn=this._layers[We].layer;unByKey(this._layers[We].onZIndexChangeEvent),this._layers[We].onZIndexChangeEvent=null,Cn.setZIndex&&(Cn.setZIndex(Be),this._layersOrder.push(this._layers[We]),Be--),this._layers[We].onZIndexChangeEvent==null&&(this._layers[We].onZIndexChangeEvent=Cn.on("change:zIndex",()=>this._updateLayersOrder()))}Te.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$A.debug(e)}_onZoomToExtentClick(e){logger$A.debug(e);var Te=e.target.id,Oe=SelectorID.index(Te),Be=this._layers[Oe],Ue=null,He=null,We=this.getMap();if(Be.layer.hasOwnProperty("gpResultLayerId")&&(Be.layer.gpResultLayerId.split(":")[0]==="layerimport"||Be.layer.gpResultLayerId.split(":")[0]==="drawing"||Be.layer.gpResultLayerId.split(":")[0]==="compute"||Be.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(We.getView()&&We.getSize()){var Cn=Be.layer.getExtent();if(!Cn){var An=Be.layer.getSource();An&&An.getExtent?Cn=An.getExtent():Cn=An.getTileGrid().getExtent()}Cn&&Cn[0]!==1/0&&We.getView().fit(Cn,We.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var En=Be.layer.name||Be.layer.getSource().name,Sn=Be.layer.service||Be.layer.getSource().service,Tn=Config.configuration.getLayerId(En,Sn);if(!Tn)throw"ERROR : Layer ID not found into the catalogue !?";var Ln=Config.configuration.getGlobalConstraints(Tn);if(Ln){if(!We||!We.getView())return;var Bn=We.getView(),ei=Bn.getProjection(),ni=[Ln.extent.left,Ln.extent.bottom,Ln.extent.right,Ln.extent.top],ti=Ln.crs;ti||(ti="EPSG:4326"),Ue=transformExtent(ni,ti,ei),Ue&&Bn.fit(Ue)}}catch(ri){He=ri}this.dispatchEvent({type:"layerswitcher:extent",extent:Ue,layer:Be,error:He})}_onMapMoveEnd(e){e.getLayers().forEach(Te=>{var Oe=Te.gpLayerId;if(this._layers[Oe]){var Be=this._layers[Oe],Ue;this.isInRange(Te,e)&&!Be.inRange?(Be.inRange=!0,Ue=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Ue.classList.remove("outOfRange")):!this.isInRange(Te,e)&&Be.inRange&&(Be.inRange=!1,Ue=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Ue.classList.add("outOfRange"))}})}getLayerDOMId(e){var Te=null;return this.getMap().getLayers().forEach(Oe=>{Oe===e&&(Te=Oe.hasOwnProperty("gpLayerId")?Oe.gpLayerId:null)}),Te!==null?this._addUID("GPlayerSwitcher_ID_"+Te):null}isInRange(e,Te){if(Te){var Oe=Te.getView().getResolution();if(Oe>e.getMaxResolution()||Oe<e.getMinResolution())return!1;var Be=Te.getView().calculateExtent(Te.getSize()),Ue=e.getExtent();return!(Ue&&!intersects$1(Be,Ue))}}getLayerInfo(e){var Te={};if(e.getProperties!==void 0&&e.getSource!==void 0){var Oe=e.getProperties(),Be=Oe.source;Be&&(Te._title=Be._title||Oe.title||Oe.id||"",Te._description=Be._description||Oe.description||"",Te._quicklookUrl=Be._quicklookUrl||Oe.quicklookUrl||"",Te._metadata=Be._metadata||Oe.metadata||[],Te._legends=Be._legends||Oe.legends||[])}return Te}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(ke,e,Te){let Oe=0,Be=0,Ue=0,He=0,We=0,Cn=0;e?e.addEventListener("mousedown",Sn,!0):ke.addEventListener("mousedown",Sn,!0);var An,En={bottom:0,left:0,right:0,top:0};function Sn(Bn){Bn=Bn||window.event,Bn.preventDefault(),Oe=Bn.clientX,Be=Bn.clientY,An=ke.getBoundingClientRect();const ei=Te.getBoundingClientRect();En={bottom:ei.bottom,left:ei.left,right:ei.right,top:ei.top},document.addEventListener("mouseup",Tn,!0),document.addEventListener("mousemove",Ln,!0)}function Tn(){We-=Ue,Cn-=He,document.removeEventListener("mouseup",Tn,!0),document.removeEventListener("mousemove",Ln,!0)}function Ln(Bn){Bn=Bn||window.event;let ei=Bn.clientX,ni=Bn.clientY,ti=Ue,ri=He;Ue=Oe-ei,He=Be-ni;var oi=An.left-Ue,ai=An.top-He;if(oi<En.left||ai<En.top||oi+An.width>En.right||ai+An.height>En.bottom)Ue=ti,He=ri;else{let ci=We-Ue,Pi=Cn-He;ke.style.transform="translate("+ci+"px,"+Pi+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,Te){this.data[e]=Te;const Oe=this.subscribers.map(async Be=>{await Be(e,Te)});await Promise.allSettled(Oe)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e},stringToHTML:function(ke){var e=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var Te=new DOMParser,Oe=Te.parseFromString(ke,"text/html");return Oe.body}var Be=document.createElement("div");return Be.innerHTML=ke,Be},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPgetFeatureInfo"),ke.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowGetFeatureInfoPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/dsactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowGetFeatureInfoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowGetFeatureInfoClick(Oe)}),e},_createGetFeatureInfoPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPgetFeatureInfoPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createGetFeatureInfoPanelDivElement:function(){var ke=document.createElement("div");return ke.className="GPpanelBody gpf-panel__body fr-modal__body",ke},_createGetFeatureInfoPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader gpf-panel__header fr-modal__header",ke},_createGetFeatureInfoPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="GetFeatureInfo",ke},_createGetFeatureInfoPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(Oe){e.setAttribute("aria-pressed",!1),ke.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(Oe){e.setAttribute("aria-pressed",!1),ke.onCloseGetFeatureInfoClick()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createGetFeatureInfoWaitingDiv:function(){var ke=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return ke},_createGetFeatureInfoAccordionGroup:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPgetFeatureInfoAccordionGroup"),ke.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",ke},_createGetFeatureInfoLayerAccordion:function(ke){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${ke}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${ke}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${ke}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),Te=e.firstChild,Oe=Te.querySelector("button, button.fr-accordion__btn");return Oe.addEventListener("click",Be=>{Be.currentTarget.ariaExpanded=Be.currentTarget.ariaExpanded!=="true";var Ue=document.getElementById(Be.currentTarget.getAttribute("aria-controls"));Be.currentTarget.ariaExpanded==="true"?(Ue.classList.add("fr-collapse--expanded"),Ue.classList.remove("GPelementHidden")):(Ue.classList.remove("fr-collapse--expanded"),Ue.classList.add("GPelementHidden"))}),Te}},logger$z=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class Yf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Yf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(Te);var Oe=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),Be=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();Oe.appendChild(Be);var Ue=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),He=this._createGetFeatureInfoPanelTitleElement();Ue.appendChild(He);var We=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return Be.appendChild(Cn),e.appendChild(Oe),logger$z.log(e),e}addEventsListeners(e){var Te=this;this.eventsListeners.singleclick=function(Oe){logger$z.trace(Oe),Te.onMapClick(Oe)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.layers=e.map.getLayers().getArray().filter(Oe=>{if(Oe.isVisible(e.map.getView())&&Oe.getOpacity()>0)return Oe}).sort((Oe,Be)=>Be.getZIndex()-Oe.getZIndex()),this.layers.length>0){var Te=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(Te),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else return}getGetFeatureInfoLayer(e){var Te={};let Oe=this.getLayerFormat(e);if(Te={format:Oe,layer:e},Oe==="wmts"){let Be=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});Te={...Te,url:Be}}if(Oe==="wms"){let Be=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});Te={...Te,url:Be}}return Te}getFeaturesAtClick(e){var Te=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(Oe,Be){e==Be&&Te.push(Oe)}),Te}async getGetFeatureInfoContent(e){var Te=null;if(e.format==="vector"){var Oe=this.getFeaturesAtClick(e.layer);return Oe&&(Te=this.features2html(Oe)),Te}else return fetch(e.url).then(Be=>Be.text()).then(Be=>{var Ue=!1;if((Be.trim().length===0||Be.indexOf("ServiceExceptionReport")!==-1||Be.indexOf("java.lang.NullPointerException")!==-1||Be.indexOf("java.lang.OutOfMemoryError")!==-1||Be.indexOf("not queryable")!==-1||Be.indexOf("No data")!==-1||Be.indexOf("non interrogeable")!==-1)&&(Ue=!0),Ue)return null;var He=this.stringToHTML(Be);return He&&He.innerHTML&&He.innerHTML.trim().length>0?Be:null}).catch(Be=>(logger$z.log(Be),Be))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var Te=e.layer.getProperties(),Oe=Te.source,Be="";Oe&&(Be=Oe._title||Oe.name||Te.title||Te.name||Oe.url_||"Couche de donnes")}return Be}displayGetFeatureInfo(){var e=this.layers.map(Oe=>this.getGetFeatureInfoLayer(Oe)),Te=e.map(Oe=>{var Be=this.getLayerTitle(Oe),Ue=null,He=this._createGetFeatureInfoLayerAccordion(Be);He.style.display="none";var We=!0;return new AsyncData({...Oe,layername:Be,content:Ue,contentDiv:He,pending:We})});for(let Oe=0;Oe<Te.length;Oe++)this.getFeatureInfoAccordionGroup.append(Te[Oe].data.contentDiv);Te.forEach(Oe=>{Oe.subscribe((Be,Ue)=>{Be=="content"&&(Oe.set("pending",!1),Oe.get("content")?(Oe.get("contentDiv").querySelector("div.fr-collapse").innerHTML=Oe.get("content"),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),Oe.get("contentDiv").style.display="block"):Oe.get("contentDiv").remove(),Te.filter(He=>He.get("pending")===!0).length==0&&Te.filter(He=>He.get("content")).length==0&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1))})}),Te.forEach(Oe=>{this.getGetFeatureInfoContent(Oe.data).then(Be=>{Oe.set("content",Be)})})}getLayerFormat(e){var Te=typeof e.getType=="function"?e.getType():null,Oe=e.getSource();if(Te){if(Te==="VECTOR"||Te==="VECTOR_TILE")return"vector";if(Te==="TILE")return Oe.tileGrid?"wmts":"wms";if(Te==="IMAGE")return"wms"}else{if(Oe instanceof TileWMS||Oe instanceof ImageWMS)return"wms";if(Oe instanceof WMTS$1)return"wmts";if(Oe instanceof VectorSource||Oe instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var Te=document.createElement("div");return e.forEach(function(Oe){var Be=Oe.getProperties();if(Be.hasOwnProperty("render"))Te.insertAdjacentHTML("beforeend",Be.render);else{if(Be.hasOwnProperty("name")){var Ue=document.createElement("div");Ue.className="gp-att-name-div",Ue.insertAdjacentHTML("afterbegin",Be.name),Te.appendChild(Ue)}if(Be.hasOwnProperty("description")){var He=document.createElement("div");He.className="gp-att-description-div",He.insertAdjacentHTML("afterbegin",Be.description),Te.appendChild(He)}var We=null,Cn=!1,An=null,En=null,Sn=null,Tn=["fill","fill-opacity","label-fill","label-fill-opacity","label-stroke","label-stroke-opacity","label-stroke-width","label-font","label-textAlign","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(We in Be)if(Be[We]!==void 0&&Tn.indexOf(We)===-1){Cn||(An=document.createElement("div"),An.className="gp-att-others-div",En=document.createElement("ul"),Cn=!0),Sn=document.createElement("li");var Ln=document.createElement("span");Ln.className="gp-attname-others-span",Ln.appendChild(document.createTextNode(We+" : ")),Sn.appendChild(Ln),Sn.appendChild(document.createTextNode(Be[We])),En.appendChild(Sn)}En&&(An.appendChild(En),Te.appendChild(An))}}),Te.hasChildNodes()?Te=Te.innerHTML:Te="",Te}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$z.trace(e)}onCloseGetFeatureInfoClick(e){logger$z.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$z.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(ke,e){var Te=ke%e;return Te*e<0?Te+e:Te},decimalToDMS:function(ke,e,Te){var Oe=this.modulo(ke+180,360)-180,Be=Math.abs(3600*Oe),Ue=Te||0,He=Math.pow(10,Ue),We=Math.floor(Be/3600),Cn=Math.floor((Be-We*3600)/60),An=Be-We*3600-Cn*60;An=Math.ceil(An*He)/He,An>=60&&(An=0,Cn+=1),Cn>=60&&(Cn=0,We+=1);var En=e.charAt(Oe<0?1:0);return{d:We,m:Cn,s:An,direction:En}},dmsToDecimal(ke,e,Te,Oe){var Be=ke+e/60+Te/3600;return(Oe=="S"||Oe=="O")&&(Be=Be*-1),Be},coordinateToDecimal(ke){var e={};return e.lat=ke[1].toFixed(6),e.lng=ke[0].toFixed(6),e.unit="",e},coordinateToDMS(ke){return{lng:MathUtils.decimalToDMS(ke[0],"EO",2),lat:MathUtils.decimalToDMS(ke[1],"NS",2),unit:"DMS"}},coordinateToRad(ke){var e={},Te=.017453292519943295;return e.lng=ke[0]*Te,e.lng=e.lng.toFixed(8),e.lat=ke[1]*Te,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(ke){var e={},Te=1.1111111111111112;return e.lng=ke[0]*Te,e.lng=e.lng.toFixed(8),e.lat=ke[1]*Te,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(ke){var e={};return e.x=ke[0].toFixed(2),e.y=ke[1].toFixed(2),e.unit="m",e},coordinateToKMeter(ke){var e={};return e.x=(ke[0]/1e3).toFixed(2),e.y=(ke[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(ke,e){var Te=e||10,Oe=parseInt(ke,Te);return!isNaN(Oe)&&isFinite(Oe)?Oe:null},isInteger:function(ke){if(isNaN(ke))return!1;var e=parseFloat(ke);return(e|0)===e},toFloat:function(ke){var e=parseFloat(ke);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"q",title:"Chercher un lieu"},{name:"category",title:"Type",value:["cimetire","arodrome","rservoir","administratif","construction linaire","construction ponctuelle","construction surfacique","cours d'eau","dtail hydrographique","dtail orographique","quipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par cble","zone d'activit ou d'intrt","zone d'habitation","lieu-dit non habit"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"address",title:"Adresse"},{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"}],CadastralParcel:[{name:"departmentcode",title:"Code dpartement (INSEE)",description:"Code INSEE du dpartement (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbe",description:"Commune absorbe : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractres (chiffre et/ou lettre)"},{name:"number",title:"Numro",description:"Numro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numro de la feuille cadastrale"}]},zoomToResultsByDefault:function(ke){var e=15,Te=ke.service,Oe=ke.fields,Be=ke.type,Ue={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return Te==="SuggestedLocation"&&Be==="PositionOfInterest"&&(e=Ue[Oe.classification]),Te==="GeocodedLocation"&&Be==="PositionOfInterest"&&(e=Ue[Oe.importance]||14),Be==="StreetAddress"&&(e=17),Be==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(ke){var e=ke.placeAttributes;if(e.label)return e.label;if(ke.type==="PositionOfInterest"){var Te=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?Te=Te+", "+e.category[1]:e.postcode&&(Te=Te+", "+e.postcode[0],e.city&&(Te=Te+" "+e.city[0])),Te}else return ke.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:ke.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(ke){if(ke.fullText)return ke.fullText;var e=[];return e.push(ke.street||""),e.push(ke.postalCode||""),e.push(ke.commune||""),ke.type==="PositionOfInterest"&&(e.push(ke.poi||""),e.push(ke.kind||"")),e.join(" - ")}};function globals(ke){ke("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),ke("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),ke("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)ke("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),ke("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");ke.WGS84=ke["EPSG:4326"],ke["EPSG:3785"]=ke["EPSG:3857"],ke.GOOGLE=ke["EPSG:3857"],ke["EPSG:900913"]=ke["EPSG:3857"],ke["EPSG:102113"]=ke["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(ke,e){if(ke[e])return ke[e];for(var Te=Object.keys(ke),Oe=e.toLowerCase().replace(ignoredChar,""),Be=-1,Ue,He;++Be<Te.length;)if(Ue=Te[Be],He=Ue.toLowerCase().replace(ignoredChar,""),He===Oe)return ke[Ue]}function projStr(ke){var e={},Te=ke.split("+").map(function(We){return We.trim()}).filter(function(We){return We}).reduce(function(We,Cn){var An=Cn.split("=");return An.push(!0),We[An[0].toLowerCase()]=An[1],We},{}),Oe,Be,Ue,He={proj:"projName",datum:"datumCode",rf:function(We){e.rf=parseFloat(We)},lat_0:function(We){e.lat0=We*D2R$1},lat_1:function(We){e.lat1=We*D2R$1},lat_2:function(We){e.lat2=We*D2R$1},lat_ts:function(We){e.lat_ts=We*D2R$1},lon_0:function(We){e.long0=We*D2R$1},lon_1:function(We){e.long1=We*D2R$1},lon_2:function(We){e.long2=We*D2R$1},alpha:function(We){e.alpha=parseFloat(We)*D2R$1},gamma:function(We){e.rectified_grid_angle=parseFloat(We)},lonc:function(We){e.longc=We*D2R$1},x_0:function(We){e.x0=parseFloat(We)},y_0:function(We){e.y0=parseFloat(We)},k_0:function(We){e.k0=parseFloat(We)},k:function(We){e.k0=parseFloat(We)},a:function(We){e.a=parseFloat(We)},b:function(We){e.b=parseFloat(We)},r:function(We){e.a=e.b=parseFloat(We)},r_a:function(){e.R_A=!0},zone:function(We){e.zone=parseInt(We,10)},south:function(){e.utmSouth=!0},towgs84:function(We){e.datum_params=We.split(",").map(function(Cn){return parseFloat(Cn)})},to_meter:function(We){e.to_meter=parseFloat(We)},units:function(We){e.units=We;var Cn=match(units,We);Cn&&(e.to_meter=Cn.to_meter)},from_greenwich:function(We){e.from_greenwich=We*D2R$1},pm:function(We){var Cn=match(exports$2,We);e.from_greenwich=(Cn||parseFloat(We))*D2R$1},nadgrids:function(We){We==="@null"?e.datumCode="none":e.nadgrids=We},axis:function(We){var Cn="ewnsud";We.length===3&&Cn.indexOf(We.substr(0,1))!==-1&&Cn.indexOf(We.substr(1,1))!==-1&&Cn.indexOf(We.substr(2,1))!==-1&&(e.axis=We)},approx:function(){e.approx=!0}};for(Oe in Te)Be=Te[Oe],Oe in He?(Ue=He[Oe],typeof Ue=="function"?Ue(Be):e[Ue]=Be):e[Oe]=Be;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(ke){if(typeof ke!="string")throw new Error("not a string");this.text=ke.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var ke=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(ke);){if(this.place>=this.text.length)return;ke=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(ke);case KEYWORD:return this.keyword(ke);case QUOTED:return this.quoted(ke);case AFTERQUOTE:return this.afterquote(ke);case NUMBER:return this.number(ke);case ENDED:return}};Parser.prototype.afterquote=function(ke){if(ke==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(ke)){this.word=this.word.trim(),this.afterItem(ke);return}throw new Error(`havn't handled "`+ke+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(ke){if(ke===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(ke==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(ke){if(digets.test(ke)){this.word+=ke;return}if(endThings.test(ke)){this.word=parseFloat(this.word),this.afterItem(ke);return}throw new Error(`havn't handled "`+ke+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(ke){if(ke==='"'){this.state=AFTERQUOTE;return}this.word+=ke};Parser.prototype.keyword=function(ke){if(keyword.test(ke)){this.word+=ke;return}if(ke==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(ke)){this.afterItem(ke);return}throw new Error(`havn't handled "`+ke+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(ke){if(latin.test(ke)){this.word=ke,this.state=KEYWORD;return}if(ke==='"'){this.word="",this.state=QUOTED;return}if(digets.test(ke)){this.word=ke,this.state=NUMBER;return}if(endThings.test(ke)){this.afterItem(ke);return}throw new Error(`havn't handled "`+ke+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(ke){var e=new Parser(ke);return e.output()}function mapit(ke,e,Te){Array.isArray(e)&&(Te.unshift(e),e=null);var Oe=e?{}:ke,Be=Te.reduce(function(Ue,He){return sExpr(He,Ue),Ue},Oe);e&&(ke[e]=Be)}function sExpr(ke,e){if(!Array.isArray(ke)){e[ke]=!0;return}var Te=ke.shift();if(Te==="PARAMETER"&&(Te=ke.shift()),ke.length===1){if(Array.isArray(ke[0])){e[Te]={},sExpr(ke[0],e[Te]);return}e[Te]=ke[0];return}if(!ke.length){e[Te]=!0;return}if(Te==="TOWGS84"){e[Te]=ke;return}if(Te==="AXIS"){Te in e||(e[Te]=[]),e[Te].push(ke);return}Array.isArray(Te)||(e[Te]={});var Oe;switch(Te){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[Te]={name:ke[0].toLowerCase(),convert:ke[1]},ke.length===3&&sExpr(ke[2],e[Te]);return;case"SPHEROID":case"ELLIPSOID":e[Te]={name:ke[0],a:ke[1],rf:ke[2]},ke.length===4&&sExpr(ke[3],e[Te]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":ke[0]=["name",ke[0]],mapit(e,Te,ke);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":ke[0]=["name",ke[0]],mapit(e,Te,ke),e[Te].type=Te;return;default:for(Oe=-1;++Oe<ke.length;)if(!Array.isArray(ke[Oe]))return sExpr(ke,e[Te]);return mapit(e,Te,ke)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(ke,e){var Te=e[0],Oe=e[1];!(Te in ke)&&Oe in ke&&(ke[Te]=ke[Oe],e.length===3&&(ke[Te]=e[2](ke[Te])))}function d2r(ke){return ke*D2R}function cleanWKT(ke){for(var e=Object.keys(ke),Te=0,Oe=e.length;Te<Oe;++Te){var Be=e[Te];knownTypes.indexOf(Be)!==-1&&setPropertiesFromWkt(ke[Be]),typeof ke[Be]=="object"&&cleanWKT(ke[Be])}}function setPropertiesFromWkt(ke){if(ke.AUTHORITY){var e=Object.keys(ke.AUTHORITY)[0];e&&e in ke.AUTHORITY&&(ke.title=e+":"+ke.AUTHORITY[e])}if(ke.type==="GEOGCS"?ke.projName="longlat":ke.type==="LOCAL_CS"?(ke.projName="identity",ke.local=!0):typeof ke.PROJECTION=="object"?ke.projName=Object.keys(ke.PROJECTION)[0]:ke.projName=ke.PROJECTION,ke.AXIS){for(var Te="",Oe=0,Be=ke.AXIS.length;Oe<Be;++Oe){var Ue=[ke.AXIS[Oe][0].toLowerCase(),ke.AXIS[Oe][1].toLowerCase()];Ue[0].indexOf("north")!==-1||(Ue[0]==="y"||Ue[0]==="lat")&&Ue[1]==="north"?Te+="n":Ue[0].indexOf("south")!==-1||(Ue[0]==="y"||Ue[0]==="lat")&&Ue[1]==="south"?Te+="s":Ue[0].indexOf("east")!==-1||(Ue[0]==="x"||Ue[0]==="lon")&&Ue[1]==="east"?Te+="e":(Ue[0].indexOf("west")!==-1||(Ue[0]==="x"||Ue[0]==="lon")&&Ue[1]==="west")&&(Te+="w")}Te.length===2&&(Te+="u"),Te.length===3&&(ke.axis=Te)}ke.UNIT&&(ke.units=ke.UNIT.name.toLowerCase(),ke.units==="metre"&&(ke.units="meter"),ke.UNIT.convert&&(ke.type==="GEOGCS"?ke.DATUM&&ke.DATUM.SPHEROID&&(ke.to_meter=ke.UNIT.convert*ke.DATUM.SPHEROID.a):ke.to_meter=ke.UNIT.convert));var He=ke.GEOGCS;ke.type==="GEOGCS"&&(He=ke),He&&(He.DATUM?ke.datumCode=He.DATUM.name.toLowerCase():ke.datumCode=He.name.toLowerCase(),ke.datumCode.slice(0,2)==="d_"&&(ke.datumCode=ke.datumCode.slice(2)),ke.datumCode==="new_zealand_1949"&&(ke.datumCode="nzgd49"),(ke.datumCode==="wgs_1984"||ke.datumCode==="world_geodetic_system_1984")&&(ke.PROJECTION==="Mercator_Auxiliary_Sphere"&&(ke.sphere=!0),ke.datumCode="wgs84"),ke.datumCode==="belge_1972"&&(ke.datumCode="rnb72"),He.DATUM&&He.DATUM.SPHEROID&&(ke.ellps=He.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),ke.ellps.toLowerCase().slice(0,13)==="international"&&(ke.ellps="intl"),ke.a=He.DATUM.SPHEROID.a,ke.rf=parseFloat(He.DATUM.SPHEROID.rf,10)),He.DATUM&&He.DATUM.TOWGS84&&(ke.datum_params=He.DATUM.TOWGS84),~ke.datumCode.indexOf("osgb_1936")&&(ke.datumCode="osgb36"),~ke.datumCode.indexOf("osni_1952")&&(ke.datumCode="osni52"),(~ke.datumCode.indexOf("tm65")||~ke.datumCode.indexOf("geodetic_datum_of_1965"))&&(ke.datumCode="ire65"),ke.datumCode==="ch1903+"&&(ke.datumCode="ch1903"),~ke.datumCode.indexOf("israel")&&(ke.datumCode="isr93")),ke.b&&!isFinite(ke.b)&&(ke.b=ke.a);function We(En){var Sn=ke.to_meter||1;return En*Sn}var Cn=function(En){return rename(ke,En)},An=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",We],["y0","false_northing",We],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];An.forEach(Cn),!ke.long0&&ke.longc&&(ke.projName==="Albers_Conic_Equal_Area"||ke.projName==="Lambert_Azimuthal_Equal_Area")&&(ke.long0=ke.longc),!ke.lat_ts&&ke.lat1&&(ke.projName==="Stereographic_South_Pole"||ke.projName==="Polar Stereographic (variant B)")?(ke.lat0=d2r(ke.lat1>0?90:-90),ke.lat_ts=ke.lat1):!ke.lat_ts&&ke.lat0&&ke.projName==="Polar_Stereographic"&&(ke.lat_ts=ke.lat0,ke.lat0=d2r(ke.lat0>0?90:-90))}function wkt(ke){var e=parseString(ke),Te=e[0],Oe={};return sExpr(e,Oe),cleanWKT(Oe),Oe[Te]}function defs(ke){var e=this;if(arguments.length===2){var Te=arguments[1];typeof Te=="string"?Te.charAt(0)==="+"?defs[ke]=projStr(arguments[1]):defs[ke]=wkt(arguments[1]):defs[ke]=Te}else if(arguments.length===1){if(Array.isArray(ke))return ke.map(function(Oe){Array.isArray(Oe)?defs.apply(e,Oe):defs(Oe)});if(typeof ke=="string"){if(ke in defs)return defs[ke]}else"EPSG"in ke?defs["EPSG:"+ke.EPSG]=ke:"ESRI"in ke?defs["ESRI:"+ke.ESRI]=ke:"IAU2000"in ke?defs["IAU2000:"+ke.IAU2000]=ke:console.log(ke);return}}globals(defs);function testObj(ke){return typeof ke=="string"}function testDef(ke){return ke in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(ke){return codeWords.some(function(e){return ke.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(ke){var e=match(ke,"authority");if(e){var Te=match(e,"epsg");return Te&&codes.indexOf(Te)>-1}}function checkProjStr(ke){var e=match(ke,"extension");if(e)return match(e,"proj4")}function testProj(ke){return ke[0]==="+"}function parse(ke){if(testObj(ke)){if(testDef(ke))return defs[ke];if(testWKT(ke)){var e=wkt(ke);if(checkMercator(e))return defs["EPSG:3857"];var Te=checkProjStr(e);return Te?projStr(Te):e}if(testProj(ke))return projStr(ke)}else return ke}function extend(ke,e){ke=ke||{};var Te,Oe;if(!e)return ke;for(Oe in e)Te=e[Oe],Te!==void 0&&(ke[Oe]=Te);return ke}function msfnz(ke,e,Te){var Oe=ke*e;return Te/Math.sqrt(1-Oe*Oe)}function sign(ke){return ke<0?-1:1}function adjust_lon(ke){return Math.abs(ke)<=SPI?ke:ke-sign(ke)*TWO_PI}function tsfnz(ke,e,Te){var Oe=ke*Te,Be=.5*ke;return Oe=Math.pow((1-Oe)/(1+Oe),Be),Math.tan(.5*(HALF_PI-e))/Oe}function phi2z(ke,e){for(var Te=.5*ke,Oe,Be,Ue=HALF_PI-2*Math.atan(e),He=0;He<=15;He++)if(Oe=ke*Math.sin(Ue),Be=HALF_PI-2*Math.atan(e*Math.pow((1-Oe)/(1+Oe),Te))-Ue,Ue+=Be,Math.abs(Be)<=1e-10)return Ue;return-9999}function init$x(){var ke=this.b/this.a;this.es=1-ke*ke,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(ke){var e=ke.x,Te=ke.y;if(Te*R2D>90&&Te*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var Oe,Be;if(Math.abs(Math.abs(Te)-HALF_PI)<=EPSLN)return null;if(this.sphere)Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Be=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*Te));else{var Ue=Math.sin(Te),He=tsfnz(this.e,Te,Ue);Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Be=this.y0-this.a*this.k0*Math.log(He)}return ke.x=Oe,ke.y=Be,ke}function inverse$v(ke){var e=ke.x-this.x0,Te=ke.y-this.y0,Oe,Be;if(this.sphere)Be=HALF_PI-2*Math.atan(Math.exp(-Te/(this.a*this.k0)));else{var Ue=Math.exp(-Te/(this.a*this.k0));if(Be=phi2z(this.e,Ue),Be===-9999)return null}return Oe=adjust_lon(this.long0+e/(this.a*this.k0)),ke.x=Oe,ke.y=Be,ke}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(ke){return ke}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(ke,e){var Te=projStore.length;return ke.names?(projStore[Te]=ke,ke.names.forEach(function(Oe){names$v[Oe.toLowerCase()]=Te}),this):(console.log(e),!0)}function get(ke){if(!ke)return!1;var e=ke.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(ke,e,Te,Oe){var Be=ke*ke,Ue=e*e,He=(Be-Ue)/Be,We=0;Oe?(ke*=1-He*(SIXTH+He*(RA4+He*RA6)),Be=ke*ke,He=0):We=Math.sqrt(He);var Cn=(Be-Ue)/Ue;return{es:He,e:We,ep2:Cn}}function sphere(ke,e,Te,Oe,Be){if(!ke){var Ue=match(exports$1,Oe);Ue||(Ue=WGS84),ke=Ue.a,e=Ue.b,Te=Ue.rf}return Te&&!e&&(e=(1-1/Te)*ke),(Te===0||Math.abs(ke-e)<EPSLN)&&(Be=!0,e=ke),{a:ke,b:e,rf:Te,sphere:Be}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(ke,e,Te,Oe,Be,Ue,He){var We={};return ke===void 0||ke==="none"?We.datum_type=PJD_NODATUM:We.datum_type=PJD_WGS84,e&&(We.datum_params=e.map(parseFloat),(We.datum_params[0]!==0||We.datum_params[1]!==0||We.datum_params[2]!==0)&&(We.datum_type=PJD_3PARAM),We.datum_params.length>3&&(We.datum_params[3]!==0||We.datum_params[4]!==0||We.datum_params[5]!==0||We.datum_params[6]!==0)&&(We.datum_type=PJD_7PARAM,We.datum_params[3]*=SEC_TO_RAD,We.datum_params[4]*=SEC_TO_RAD,We.datum_params[5]*=SEC_TO_RAD,We.datum_params[6]=We.datum_params[6]/1e6+1)),He&&(We.datum_type=PJD_GRIDSHIFT,We.grids=He),We.a=Te,We.b=Oe,We.es=Be,We.ep2=Ue,We}var loadedNadgrids={};function nadgrid(ke,e){var Te=new DataView(e),Oe=detectLittleEndian(Te),Be=readHeader(Te,Oe),Ue=readSubgrids(Te,Be,Oe),He={header:Be,subgrids:Ue};return loadedNadgrids[ke]=He,He}function getNadgrids(ke){if(ke===void 0)return null;var e=ke.split(",");return e.map(parseNadgridString)}function parseNadgridString(ke){if(ke.length===0)return null;var e=ke[0]==="@";return e&&(ke=ke.slice(1)),ke==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:ke,mandatory:!e,grid:loadedNadgrids[ke]||null,isNull:!1}}function secondsToRadians(ke){return ke/3600*Math.PI/180}function detectLittleEndian(ke){var e=ke.getInt32(8,!1);return e===11?!1:(e=ke.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(ke,e){return{nFields:ke.getInt32(8,e),nSubgridFields:ke.getInt32(24,e),nSubgrids:ke.getInt32(40,e),shiftType:decodeString(ke,56,64).trim(),fromSemiMajorAxis:ke.getFloat64(120,e),fromSemiMinorAxis:ke.getFloat64(136,e),toSemiMajorAxis:ke.getFloat64(152,e),toSemiMinorAxis:ke.getFloat64(168,e)}}function decodeString(ke,e,Te){return String.fromCharCode.apply(null,new Uint8Array(ke.buffer.slice(e,Te)))}function readSubgrids(ke,e,Te){for(var Oe=176,Be=[],Ue=0;Ue<e.nSubgrids;Ue++){var He=readGridHeader(ke,Oe,Te),We=readGridNodes(ke,Oe,He,Te),Cn=Math.round(1+(He.upperLongitude-He.lowerLongitude)/He.longitudeInterval),An=Math.round(1+(He.upperLatitude-He.lowerLatitude)/He.latitudeInterval);Be.push({ll:[secondsToRadians(He.lowerLongitude),secondsToRadians(He.lowerLatitude)],del:[secondsToRadians(He.longitudeInterval),secondsToRadians(He.latitudeInterval)],lim:[Cn,An],count:He.gridNodeCount,cvs:mapNodes(We)}),Oe+=176+He.gridNodeCount*16}return Be}function mapNodes(ke){return ke.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(ke,e,Te){return{name:decodeString(ke,e+8,e+16).trim(),parent:decodeString(ke,e+24,e+24+8).trim(),lowerLatitude:ke.getFloat64(e+72,Te),upperLatitude:ke.getFloat64(e+88,Te),lowerLongitude:ke.getFloat64(e+104,Te),upperLongitude:ke.getFloat64(e+120,Te),latitudeInterval:ke.getFloat64(e+136,Te),longitudeInterval:ke.getFloat64(e+152,Te),gridNodeCount:ke.getInt32(e+168,Te)}}function readGridNodes(ke,e,Te,Oe){for(var Be=e+176,Ue=16,He=[],We=0;We<Te.gridNodeCount;We++){var Cn={latitudeShift:ke.getFloat32(Be+We*Ue,Oe),longitudeShift:ke.getFloat32(Be+We*Ue+4,Oe),latitudeAccuracy:ke.getFloat32(Be+We*Ue+8,Oe),longitudeAccuracy:ke.getFloat32(Be+We*Ue+12,Oe)};He.push(Cn)}return He}function Projection(ke,e){if(!(this instanceof Projection))return new Projection(ke);e=e||function(An){if(An)throw An};var Te=parse(ke);if(typeof Te!="object"){e("Could not parse to valid json: "+ke);return}var Oe=Projection.projections.get(Te.projName);if(!Oe){e("Could not get projection name from: "+ke);return}if(Te.datumCode&&Te.datumCode!=="none"){var Be=match(datums,Te.datumCode);Be&&(Te.datum_params=Te.datum_params||(Be.towgs84?Be.towgs84.split(","):null),Te.ellps=Be.ellipse,Te.datumName=Be.datumName?Be.datumName:Te.datumCode)}Te.k0=Te.k0||1,Te.axis=Te.axis||"enu",Te.ellps=Te.ellps||"wgs84",Te.lat1=Te.lat1||Te.lat0;var Ue=sphere(Te.a,Te.b,Te.rf,Te.ellps,Te.sphere),He=eccentricity(Ue.a,Ue.b,Ue.rf,Te.R_A),We=getNadgrids(Te.nadgrids),Cn=Te.datum||datum(Te.datumCode,Te.datum_params,Ue.a,Ue.b,He.es,He.ep2,We);extend(this,Te),extend(this,Oe),this.a=Ue.a,this.b=Ue.b,this.rf=Ue.rf,this.sphere=Ue.sphere,this.es=He.es,this.e=He.e,this.ep2=He.ep2,this.datum=Cn,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(ke,e){return ke.datum_type!==e.datum_type||ke.a!==e.a||Math.abs(ke.es-e.es)>5e-11?!1:ke.datum_type===PJD_3PARAM?ke.datum_params[0]===e.datum_params[0]&&ke.datum_params[1]===e.datum_params[1]&&ke.datum_params[2]===e.datum_params[2]:ke.datum_type===PJD_7PARAM?ke.datum_params[0]===e.datum_params[0]&&ke.datum_params[1]===e.datum_params[1]&&ke.datum_params[2]===e.datum_params[2]&&ke.datum_params[3]===e.datum_params[3]&&ke.datum_params[4]===e.datum_params[4]&&ke.datum_params[5]===e.datum_params[5]&&ke.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(ke,e,Te){var Oe=ke.x,Be=ke.y,Ue=ke.z?ke.z:0,He,We,Cn,An;if(Be<-HALF_PI&&Be>-1.001*HALF_PI)Be=-HALF_PI;else if(Be>HALF_PI&&Be<1.001*HALF_PI)Be=HALF_PI;else{if(Be<-HALF_PI)return{x:-1/0,y:-1/0,z:ke.z};if(Be>HALF_PI)return{x:1/0,y:1/0,z:ke.z}}return Oe>Math.PI&&(Oe-=2*Math.PI),We=Math.sin(Be),An=Math.cos(Be),Cn=We*We,He=Te/Math.sqrt(1-e*Cn),{x:(He+Ue)*An*Math.cos(Oe),y:(He+Ue)*An*Math.sin(Oe),z:(He*(1-e)+Ue)*We}}function geocentricToGeodetic(ke,e,Te,Oe){var Be=1e-12,Ue=Be*Be,He=30,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi,ai=ke.x,ci=ke.y,Pi=ke.z?ke.z:0,vi,pi,Mi;if(We=Math.sqrt(ai*ai+ci*ci),Cn=Math.sqrt(ai*ai+ci*ci+Pi*Pi),We/Te<Be){if(vi=0,Cn/Te<Be)return pi=HALF_PI,Mi=-Oe,{x:ke.x,y:ke.y,z:ke.z}}else vi=Math.atan2(ci,ai);An=Pi/Cn,En=We/Cn,Sn=1/Math.sqrt(1-e*(2-e)*En*En),Bn=En*(1-e)*Sn,ei=An*Sn,oi=0;do oi++,Ln=Te/Math.sqrt(1-e*ei*ei),Mi=We*Bn+Pi*ei-Ln*(1-e*ei*ei),Tn=e*Ln/(Ln+Mi),Sn=1/Math.sqrt(1-Tn*(2-Tn)*En*En),ni=En*(1-Tn)*Sn,ti=An*Sn,ri=ti*Bn-ni*ei,Bn=ni,ei=ti;while(ri*ri>Ue&&oi<He);return pi=Math.atan(ti/Math.abs(ni)),{x:vi,y:pi,z:Mi}}function geocentricToWgs84(ke,e,Te){if(e===PJD_3PARAM)return{x:ke.x+Te[0],y:ke.y+Te[1],z:ke.z+Te[2]};if(e===PJD_7PARAM){var Oe=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=Te[4],Cn=Te[5],An=Te[6];return{x:An*(ke.x-Cn*ke.y+We*ke.z)+Oe,y:An*(Cn*ke.x+ke.y-He*ke.z)+Be,z:An*(-We*ke.x+He*ke.y+ke.z)+Ue}}}function geocentricFromWgs84(ke,e,Te){if(e===PJD_3PARAM)return{x:ke.x-Te[0],y:ke.y-Te[1],z:ke.z-Te[2]};if(e===PJD_7PARAM){var Oe=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=Te[4],Cn=Te[5],An=Te[6],En=(ke.x-Oe)/An,Sn=(ke.y-Be)/An,Tn=(ke.z-Ue)/An;return{x:En+Cn*Sn-We*Tn,y:-Cn*En+Sn+He*Tn,z:We*En-He*Sn+Tn}}}function checkParams(ke){return ke===PJD_3PARAM||ke===PJD_7PARAM}function datum_transform(ke,e,Te){if(compareDatums(ke,e)||ke.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return Te;var Oe=ke.a,Be=ke.es;if(ke.datum_type===PJD_GRIDSHIFT){var Ue=applyGridShift(ke,!1,Te);if(Ue!==0)return;Oe=SRS_WGS84_SEMIMAJOR,Be=SRS_WGS84_ESQUARED}var He=e.a,We=e.b,Cn=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(He=SRS_WGS84_SEMIMAJOR,We=SRS_WGS84_SEMIMINOR,Cn=SRS_WGS84_ESQUARED),Be===Cn&&Oe===He&&!checkParams(ke.datum_type)&&!checkParams(e.datum_type))return Te;if(Te=geodeticToGeocentric(Te,Be,Oe),checkParams(ke.datum_type)&&(Te=geocentricToWgs84(Te,ke.datum_type,ke.datum_params)),checkParams(e.datum_type)&&(Te=geocentricFromWgs84(Te,e.datum_type,e.datum_params)),Te=geocentricToGeodetic(Te,Cn,He,We),e.datum_type===PJD_GRIDSHIFT){var An=applyGridShift(e,!0,Te);if(An!==0)return}return Te}function applyGridShift(ke,e,Te){if(ke.grids===null||ke.grids.length===0)return console.log("Grid shift grids not found"),-1;var Oe={x:-Te.x,y:Te.y},Be={x:Number.NaN,y:Number.NaN},Ue=[];e:for(var He=0;He<ke.grids.length;He++){var We=ke.grids[He];if(Ue.push(We.name),We.isNull){Be=Oe;break}if(We.mandatory,We.grid===null){if(We.mandatory)return console.log("Unable to find mandatory grid '"+We.name+"'"),-1;continue}for(var Cn=We.grid.subgrids,An=0,En=Cn.length;An<En;An++){var Sn=Cn[An],Tn=(Math.abs(Sn.del[1])+Math.abs(Sn.del[0]))/1e4,Ln=Sn.ll[0]-Tn,Bn=Sn.ll[1]-Tn,ei=Sn.ll[0]+(Sn.lim[0]-1)*Sn.del[0]+Tn,ni=Sn.ll[1]+(Sn.lim[1]-1)*Sn.del[1]+Tn;if(!(Bn>Oe.y||Ln>Oe.x||ni<Oe.y||ei<Oe.x)&&(Be=applySubgridShift(Oe,e,Sn),!isNaN(Be.x)))break e}}return isNaN(Be.x)?(console.log("Failed to find a grid shift table for location '"+-Oe.x*R2D+" "+Oe.y*R2D+" tried: '"+Ue+"'"),-1):(Te.x=-Be.x,Te.y=Be.y,0)}function applySubgridShift(ke,e,Te){var Oe={x:Number.NaN,y:Number.NaN};if(isNaN(ke.x))return Oe;var Be={x:ke.x,y:ke.y};Be.x-=Te.ll[0],Be.y-=Te.ll[1],Be.x=adjust_lon(Be.x-Math.PI)+Math.PI;var Ue=nadInterpolate(Be,Te);if(e){if(isNaN(Ue.x))return Oe;Ue.x=Be.x-Ue.x,Ue.y=Be.y-Ue.y;var He=9,We=1e-12,Cn,An;do{if(An=nadInterpolate(Ue,Te),isNaN(An.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Cn={x:Be.x-(An.x+Ue.x),y:Be.y-(An.y+Ue.y)},Ue.x+=Cn.x,Ue.y+=Cn.y}while(He--&&Math.abs(Cn.x)>We&&Math.abs(Cn.y)>We);if(He<0)return console.log("Inverse grid shift iterator failed to converge."),Oe;Oe.x=adjust_lon(Ue.x+Te.ll[0]),Oe.y=Ue.y+Te.ll[1]}else isNaN(Ue.x)||(Oe.x=ke.x+Ue.x,Oe.y=ke.y+Ue.y);return Oe}function nadInterpolate(ke,e){var Te={x:ke.x/e.del[0],y:ke.y/e.del[1]},Oe={x:Math.floor(Te.x),y:Math.floor(Te.y)},Be={x:Te.x-1*Oe.x,y:Te.y-1*Oe.y},Ue={x:Number.NaN,y:Number.NaN},He;if(Oe.x<0||Oe.x>=e.lim[0]||Oe.y<0||Oe.y>=e.lim[1])return Ue;He=Oe.y*e.lim[0]+Oe.x;var We={x:e.cvs[He][0],y:e.cvs[He][1]};He++;var Cn={x:e.cvs[He][0],y:e.cvs[He][1]};He+=e.lim[0];var An={x:e.cvs[He][0],y:e.cvs[He][1]};He--;var En={x:e.cvs[He][0],y:e.cvs[He][1]},Sn=Be.x*Be.y,Tn=Be.x*(1-Be.y),Ln=(1-Be.x)*(1-Be.y),Bn=(1-Be.x)*Be.y;return Ue.x=Ln*We.x+Tn*Cn.x+Bn*En.x+Sn*An.x,Ue.y=Ln*We.y+Tn*Cn.y+Bn*En.y+Sn*An.y,Ue}function adjust_axis(ke,e,Te){var Oe=Te.x,Be=Te.y,Ue=Te.z||0,He,We,Cn,An={};for(Cn=0;Cn<3;Cn++)if(!(e&&Cn===2&&Te.z===void 0))switch(Cn===0?(He=Oe,"ew".indexOf(ke.axis[Cn])!==-1?We="x":We="y"):Cn===1?(He=Be,"ns".indexOf(ke.axis[Cn])!==-1?We="y":We="x"):(He=Ue,We="z"),ke.axis[Cn]){case"e":An[We]=He;break;case"w":An[We]=-He;break;case"n":An[We]=He;break;case"s":An[We]=-He;break;case"u":Te[We]!==void 0&&(An.z=He);break;case"d":Te[We]!==void 0&&(An.z=-He);break;default:return null}return An}function common(ke){var e={x:ke[0],y:ke[1]};return ke.length>2&&(e.z=ke[2]),ke.length>3&&(e.m=ke[3]),e}function checkSanity(ke){checkCoord(ke.x),checkCoord(ke.y)}function checkCoord(ke){if(typeof Number.isFinite=="function"){if(Number.isFinite(ke))return;throw new TypeError("coordinates must be finite numbers")}if(typeof ke!="number"||ke!==ke||!isFinite(ke))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(ke,e){return(ke.datum.datum_type===PJD_3PARAM||ke.datum.datum_type===PJD_7PARAM||ke.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&ke.datumCode!=="WGS84"}function transform(ke,e,Te,Oe){var Be;Array.isArray(Te)?Te=common(Te):Te={x:Te.x,y:Te.y,z:Te.z,m:Te.m};var Ue=Te.z!==void 0;if(checkSanity(Te),ke.datum&&e.datum&&checkNotWGS(ke,e)&&(Be=new Projection("WGS84"),Te=transform(ke,Be,Te,Oe),ke=Be),Oe&&ke.axis!=="enu"&&(Te=adjust_axis(ke,!1,Te)),ke.projName==="longlat")Te={x:Te.x*D2R$1,y:Te.y*D2R$1,z:Te.z||0};else if(ke.to_meter&&(Te={x:Te.x*ke.to_meter,y:Te.y*ke.to_meter,z:Te.z||0}),Te=ke.inverse(Te),!Te)return;if(ke.from_greenwich&&(Te.x+=ke.from_greenwich),Te=datum_transform(ke.datum,e.datum,Te),!!Te)return e.from_greenwich&&(Te={x:Te.x-e.from_greenwich,y:Te.y,z:Te.z||0}),e.projName==="longlat"?Te={x:Te.x*R2D,y:Te.y*R2D,z:Te.z||0}:(Te=e.forward(Te),e.to_meter&&(Te={x:Te.x/e.to_meter,y:Te.y/e.to_meter,z:Te.z||0})),Oe&&e.axis!=="enu"?adjust_axis(e,!0,Te):(Te&&!Ue&&delete Te.z,Te)}var wgs84=Projection("WGS84");function transformer(ke,e,Te,Oe){var Be,Ue,He;return Array.isArray(Te)?(Be=transform(ke,e,Te,Oe)||{x:NaN,y:NaN},Te.length>2?typeof ke.name<"u"&&ke.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof Be.z=="number"?[Be.x,Be.y,Be.z].concat(Te.slice(3)):[Be.x,Be.y,Te[2]].concat(Te.slice(3)):[Be.x,Be.y].concat(Te.slice(2)):[Be.x,Be.y]):(Ue=transform(ke,e,Te,Oe),He=Object.keys(Te),He.length===2||He.forEach(function(We){if(typeof ke.name<"u"&&ke.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(We==="x"||We==="y"||We==="z")return}else if(We==="x"||We==="y")return;Ue[We]=Te[We]}),Ue)}function checkProj(ke){return ke instanceof Projection?ke:ke.oProj?ke.oProj:Projection(ke)}function proj4(ke,e,Te){ke=checkProj(ke);var Oe=!1,Be;return typeof e>"u"?(e=ke,ke=wgs84,Oe=!0):(typeof e.x<"u"||Array.isArray(e))&&(Te=e,e=ke,ke=wgs84,Oe=!0),e=checkProj(e),Te?transformer(ke,e,Te):(Be={forward:function(Ue,He){return transformer(ke,e,Ue,He)},inverse:function(Ue,He){return transformer(e,ke,Ue,He)}},Oe&&(Be.oProj=e),Be)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$2=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(ke,e){return e=e||5,encode(LLtoUTM({lat:ke[1],lon:ke[0]}),e)}function inverse$u(ke){var e=UTMtoLL(decode(ke.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(ke){var e=UTMtoLL(decode(ke.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(ke){return ke*(Math.PI/180)}function radToDeg(ke){return 180*(ke/Math.PI)}function LLtoUTM(ke){var e=ke.lat,Te=ke.lon,Oe=6378137,Be=.00669438,Ue=.9996,He,We,Cn,An,En,Sn,Tn,Ln=degToRad(e),Bn=degToRad(Te),ei,ni;ni=Math.floor((Te+180)/6)+1,Te===180&&(ni=60),e>=56&&e<64&&Te>=3&&Te<12&&(ni=32),e>=72&&e<84&&(Te>=0&&Te<9?ni=31:Te>=9&&Te<21?ni=33:Te>=21&&Te<33?ni=35:Te>=33&&Te<42&&(ni=37)),He=(ni-1)*6-180+3,ei=degToRad(He),We=Be/(1-Be),Cn=Oe/Math.sqrt(1-Be*Math.sin(Ln)*Math.sin(Ln)),An=Math.tan(Ln)*Math.tan(Ln),En=We*Math.cos(Ln)*Math.cos(Ln),Sn=Math.cos(Ln)*(Bn-ei),Tn=Oe*((1-Be/4-3*Be*Be/64-5*Be*Be*Be/256)*Ln-(3*Be/8+3*Be*Be/32+45*Be*Be*Be/1024)*Math.sin(2*Ln)+(15*Be*Be/256+45*Be*Be*Be/1024)*Math.sin(4*Ln)-35*Be*Be*Be/3072*Math.sin(6*Ln));var ti=Ue*Cn*(Sn+(1-An+En)*Sn*Sn*Sn/6+(5-18*An+An*An+72*En-58*We)*Sn*Sn*Sn*Sn*Sn/120)+5e5,ri=Ue*(Tn+Cn*Math.tan(Ln)*(Sn*Sn/2+(5-An+9*En+4*En*En)*Sn*Sn*Sn*Sn/24+(61-58*An+An*An+600*En-330*We)*Sn*Sn*Sn*Sn*Sn*Sn/720));return e<0&&(ri+=1e7),{northing:Math.round(ri),easting:Math.round(ti),zoneNumber:ni,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(ke){var e=ke.northing,Te=ke.easting,Oe=ke.zoneLetter,Be=ke.zoneNumber;if(Be<0||Be>60)return null;var Ue=.9996,He=6378137,We=.00669438,Cn,An=(1-Math.sqrt(1-We))/(1+Math.sqrt(1-We)),En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi=Te-5e5,ai=e;Oe<"N"&&(ai-=1e7),ni=(Be-1)*6-180+3,Cn=We/(1-We),ei=ai/Ue,ti=ei/(He*(1-We/4-3*We*We/64-5*We*We*We/256)),ri=ti+(3*An/2-27*An*An*An/32)*Math.sin(2*ti)+(21*An*An/16-55*An*An*An*An/32)*Math.sin(4*ti)+151*An*An*An/96*Math.sin(6*ti),En=He/Math.sqrt(1-We*Math.sin(ri)*Math.sin(ri)),Sn=Math.tan(ri)*Math.tan(ri),Tn=Cn*Math.cos(ri)*Math.cos(ri),Ln=He*(1-We)/Math.pow(1-We*Math.sin(ri)*Math.sin(ri),1.5),Bn=oi/(En*Ue);var ci=ri-En*Math.tan(ri)/Ln*(Bn*Bn/2-(5+3*Sn+10*Tn-4*Tn*Tn-9*Cn)*Bn*Bn*Bn*Bn/24+(61+90*Sn+298*Tn+45*Sn*Sn-252*Cn-3*Tn*Tn)*Bn*Bn*Bn*Bn*Bn*Bn/720);ci=radToDeg(ci);var Pi=(Bn-(1+2*Sn+Tn)*Bn*Bn*Bn/6+(5-2*Tn+28*Sn-3*Tn*Tn+8*Cn+24*Sn*Sn)*Bn*Bn*Bn*Bn*Bn/120)/Math.cos(ri);Pi=ni+radToDeg(Pi);var vi;if(ke.accuracy){var pi=UTMtoLL({northing:ke.northing+ke.accuracy,easting:ke.easting+ke.accuracy,zoneLetter:ke.zoneLetter,zoneNumber:ke.zoneNumber});vi={top:pi.lat,right:pi.lon,bottom:ci,left:Pi}}else vi={lat:ci,lon:Pi};return vi}function getLetterDesignator(ke){var e="Z";return 84>=ke&&ke>=72?e="X":72>ke&&ke>=64?e="W":64>ke&&ke>=56?e="V":56>ke&&ke>=48?e="U":48>ke&&ke>=40?e="T":40>ke&&ke>=32?e="S":32>ke&&ke>=24?e="R":24>ke&&ke>=16?e="Q":16>ke&&ke>=8?e="P":8>ke&&ke>=0?e="N":0>ke&&ke>=-8?e="M":-8>ke&&ke>=-16?e="L":-16>ke&&ke>=-24?e="K":-24>ke&&ke>=-32?e="J":-32>ke&&ke>=-40?e="H":-40>ke&&ke>=-48?e="G":-48>ke&&ke>=-56?e="F":-56>ke&&ke>=-64?e="E":-64>ke&&ke>=-72?e="D":-72>ke&&ke>=-80&&(e="C"),e}function encode(ke,e){var Te="00000"+ke.easting,Oe="00000"+ke.northing;return ke.zoneNumber+ke.zoneLetter+get100kID(ke.easting,ke.northing,ke.zoneNumber)+Te.substr(Te.length-5,e)+Oe.substr(Oe.length-5,e)}function get100kID(ke,e,Te){var Oe=get100kSetForZone(Te),Be=Math.floor(ke/1e5),Ue=Math.floor(e/1e5)%20;return getLetter100kID(Be,Ue,Oe)}function get100kSetForZone(ke){var e=ke%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(ke,e,Te){var Oe=Te-1,Be=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(Oe),Ue=SET_ORIGIN_ROW_LETTERS.charCodeAt(Oe),He=Be+ke-1,We=Ue+e,Cn=!1;He>Z$1&&(He=He-Z$1+A$1-1,Cn=!0),(He===I$2||Be<I$2&&He>I$2||(He>I$2||Be<I$2)&&Cn)&&He++,(He===O$1||Be<O$1&&He>O$1||(He>O$1||Be<O$1)&&Cn)&&(He++,He===I$2&&He++),He>Z$1&&(He=He-Z$1+A$1-1),We>V$1?(We=We-V$1+A$1-1,Cn=!0):Cn=!1,(We===I$2||Ue<I$2&&We>I$2||(We>I$2||Ue<I$2)&&Cn)&&We++,(We===O$1||Ue<O$1&&We>O$1||(We>O$1||Ue<O$1)&&Cn)&&(We++,We===I$2&&We++),We>V$1&&(We=We-V$1+A$1-1);var An=String.fromCharCode(He)+String.fromCharCode(We);return An}function decode(ke){if(ke&&ke.length===0)throw"MGRSPoint coverting from nothing";for(var e=ke.length,Te=null,Oe="",Be,Ue=0;!/[A-Z]/.test(Be=ke.charAt(Ue));){if(Ue>=2)throw"MGRSPoint bad conversion from: "+ke;Oe+=Be,Ue++}var He=parseInt(Oe,10);if(Ue===0||Ue+3>e)throw"MGRSPoint bad conversion from: "+ke;var We=ke.charAt(Ue++);if(We<="A"||We==="B"||We==="Y"||We>="Z"||We==="I"||We==="O")throw"MGRSPoint zone letter "+We+" not handled: "+ke;Te=ke.substring(Ue,Ue+=2);for(var Cn=get100kSetForZone(He),An=getEastingFromChar(Te.charAt(0),Cn),En=getNorthingFromChar(Te.charAt(1),Cn);En<getMinNorthing(We);)En+=2e6;var Sn=e-Ue;if(Sn%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+ke;var Tn=Sn/2,Ln=0,Bn=0,ei,ni,ti,ri,oi;return Tn>0&&(ei=1e5/Math.pow(10,Tn),ni=ke.substring(Ue,Ue+Tn),Ln=parseFloat(ni)*ei,ti=ke.substring(Ue+Tn),Bn=parseFloat(ti)*ei),ri=Ln+An,oi=Bn+En,{easting:ri,northing:oi,zoneLetter:We,zoneNumber:He,accuracy:ei}}function getEastingFromChar(ke,e){for(var Te=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),Oe=1e5,Be=!1;Te!==ke.charCodeAt(0);){if(Te++,Te===I$2&&Te++,Te===O$1&&Te++,Te>Z$1){if(Be)throw"Bad character: "+ke;Te=A$1,Be=!0}Oe+=1e5}return Oe}function getNorthingFromChar(ke,e){if(ke>"V")throw"MGRSPoint given invalid Northing "+ke;for(var Te=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),Oe=0,Be=!1;Te!==ke.charCodeAt(0);){if(Te++,Te===I$2&&Te++,Te===O$1&&Te++,Te>V$1){if(Be)throw"Bad character: "+ke;Te=A$1,Be=!0}Oe+=1e5}return Oe}function getMinNorthing(ke){var e;switch(ke){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+ke}function Point(ke,e,Te){if(!(this instanceof Point))return new Point(ke,e,Te);if(Array.isArray(ke))this.x=ke[0],this.y=ke[1],this.z=ke[2]||0;else if(typeof ke=="object")this.x=ke.x,this.y=ke.y,this.z=ke.z||0;else if(typeof ke=="string"&&typeof e>"u"){var Oe=ke.split(",");this.x=parseFloat(Oe[0],10),this.y=parseFloat(Oe[1],10),this.z=parseFloat(Oe[2],10)||0}else this.x=ke,this.y=e,this.z=Te||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(ke){return new Point(toPoint(ke))};Point.prototype.toMGRS=function(ke){return forward$u([this.x,this.y],ke)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(ke){var e=[];e[0]=C00-ke*(C02+ke*(C04+ke*(C06+ke*C08))),e[1]=ke*(C22-ke*(C04+ke*(C06+ke*C08)));var Te=ke*ke;return e[2]=Te*(C44-ke*(C46+ke*C48)),Te*=ke,e[3]=Te*(C66-ke*C68),e[4]=Te*ke*C88,e}function pj_mlfn(ke,e,Te,Oe){return Te*=e,e*=e,Oe[0]*ke-Te*(Oe[1]+e*(Oe[2]+e*(Oe[3]+e*Oe[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(ke,e,Te){for(var Oe=1/(1-e),Be=ke,Ue=MAX_ITER$3;Ue;--Ue){var He=Math.sin(Be),We=1-e*He*He;if(We=(pj_mlfn(Be,He,Math.cos(Be),Te)-ke)*(We*Math.sqrt(We))*Oe,Be-=We,Math.abs(We)<EPSLN)return Be}return Be}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(ke){var e=ke.x,Te=ke.y,Oe=adjust_lon(e-this.long0),Be,Ue,He,We=Math.sin(Te),Cn=Math.cos(Te);if(this.es){var En=Cn*Oe,Sn=Math.pow(En,2),Tn=this.ep2*Math.pow(Cn,2),Ln=Math.pow(Tn,2),Bn=Math.abs(Cn)>EPSLN?Math.tan(Te):0,ei=Math.pow(Bn,2),ni=Math.pow(ei,2);Be=1-this.es*Math.pow(We,2),En=En/Math.sqrt(Be);var ti=pj_mlfn(Te,We,Cn,this.en);Ue=this.a*(this.k0*En*(1+Sn/6*(1-ei+Tn+Sn/20*(5-18*ei+ni+14*Tn-58*ei*Tn+Sn/42*(61+179*ni-ni*ei-479*ei)))))+this.x0,He=this.a*(this.k0*(ti-this.ml0+We*Oe*En/2*(1+Sn/12*(5-ei+9*Tn+4*Ln+Sn/30*(61+ni-58*ei+270*Tn-330*ei*Tn+Sn/56*(1385+543*ni-ni*ei-3111*ei))))))+this.y0}else{var An=Cn*Math.sin(Oe);if(Math.abs(Math.abs(An)-1)<EPSLN)return 93;if(Ue=.5*this.a*this.k0*Math.log((1+An)/(1-An))+this.x0,He=Cn*Math.cos(Oe)/Math.sqrt(1-Math.pow(An,2)),An=Math.abs(He),An>=1){if(An-1>EPSLN)return 93;He=0}else He=Math.acos(He);Te<0&&(He=-He),He=this.a*this.k0*(He-this.lat0)+this.y0}return ke.x=Ue,ke.y=He,ke}function inverse$t(ke){var e,Te,Oe,Be,Ue=(ke.x-this.x0)*(1/this.a),He=(ke.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+He/this.k0,Te=pj_inv_mlfn(e,this.es,this.en),Math.abs(Te)<HALF_PI){var Sn=Math.sin(Te),Tn=Math.cos(Te),Ln=Math.abs(Tn)>EPSLN?Math.tan(Te):0,Bn=this.ep2*Math.pow(Tn,2),ei=Math.pow(Bn,2),ni=Math.pow(Ln,2),ti=Math.pow(ni,2);e=1-this.es*Math.pow(Sn,2);var ri=Ue*Math.sqrt(e)/this.k0,oi=Math.pow(ri,2);e=e*Ln,Oe=Te-e*oi/(1-this.es)*.5*(1-oi/12*(5+3*ni-9*Bn*ni+Bn-4*ei-oi/30*(61+90*ni-252*Bn*ni+45*ti+46*Bn-oi/56*(1385+3633*ni+4095*ti+1574*ti*ni)))),Be=adjust_lon(this.long0+ri*(1-oi/6*(1+2*ni+Bn-oi/20*(5+28*ni+24*ti+8*Bn*ni+6*Bn-oi/42*(61+662*ni+1320*ti+720*ti*ni))))/Tn)}else Oe=HALF_PI*sign(He),Be=0;else{var We=Math.exp(Ue/this.k0),Cn=.5*(We-1/We),An=this.lat0+He/this.k0,En=Math.cos(An);e=Math.sqrt((1-Math.pow(En,2))/(1+Math.pow(Cn,2))),Oe=Math.asin(e),He<0&&(Oe=-Oe),Cn===0&&En===0?Be=0:Be=adjust_lon(Math.atan2(Cn,En)+this.long0)}return ke.x=Be,ke.y=Oe,ke}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(ke){var e=Math.exp(ke);return e=(e-1/e)/2,e}function hypot(ke,e){ke=Math.abs(ke),e=Math.abs(e);var Te=Math.max(ke,e),Oe=Math.min(ke,e)/(Te||1);return Te*Math.sqrt(1+Math.pow(Oe,2))}function log1py(ke){var e=1+ke,Te=e-1;return Te===0?ke:ke*Math.log(e)/Te}function asinhy(ke){var e=Math.abs(ke);return e=log1py(e*(1+e/(hypot(1,e)+1))),ke<0?-e:e}function gatg(ke,e){for(var Te=2*Math.cos(2*e),Oe=ke.length-1,Be=ke[Oe],Ue=0,He;--Oe>=0;)He=-Ue+Te*Be+ke[Oe],Ue=Be,Be=He;return e+He*Math.sin(2*e)}function clens(ke,e){for(var Te=2*Math.cos(e),Oe=ke.length-1,Be=ke[Oe],Ue=0,He;--Oe>=0;)He=-Ue+Te*Be+ke[Oe],Ue=Be,Be=He;return Math.sin(e)*He}function cosh(ke){var e=Math.exp(ke);return e=(e+1/e)/2,e}function clens_cmplx(ke,e,Te){for(var Oe=Math.sin(e),Be=Math.cos(e),Ue=sinh(Te),He=cosh(Te),We=2*Be*He,Cn=-2*Oe*Ue,An=ke.length-1,En=ke[An],Sn=0,Tn=0,Ln=0,Bn,ei;--An>=0;)Bn=Tn,ei=Sn,Tn=En,Sn=Ln,En=-Bn+We*Tn-Cn*Sn+ke[An],Ln=-ei+Cn*Tn+We*Sn;return We=Oe*He,Cn=Be*Ue,[We*En-Cn*Ln,We*Ln+Cn*En]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var ke=this.es/(1+Math.sqrt(1-this.es)),e=ke/(2-ke),Te=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),Te=Te*e,this.cgb[1]=Te*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=Te*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),Te=Te*e,this.cgb[2]=Te*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=Te*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),Te=Te*e,this.cgb[3]=Te*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=Te*(1237/630+e*(-12/5+e*(-24832/14175))),Te=Te*e,this.cgb[4]=Te*(4174/315+e*(-144838/6237)),this.cbg[4]=Te*(-734/315+e*(109598/31185)),Te=Te*e,this.cgb[5]=Te*(601676/22275),this.cbg[5]=Te*(444337/155925),Te=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+Te*(1/4+Te*(1/64+Te/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=Te*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=Te*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),Te=Te*e,this.utg[2]=Te*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=Te*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),Te=Te*e,this.utg[3]=Te*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=Te*(49561/161280+e*(-179/168+e*(6601661/7257600))),Te=Te*e,this.utg[4]=Te*(-4583/161280+e*(108847/3991680)),this.gtu[4]=Te*(34729/80640+e*(-3418889/1995840)),Te=Te*e,this.utg[5]=Te*(-20648693/638668800),this.gtu[5]=Te*(212378941/319334400);var Oe=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(Oe+clens(this.gtu,2*Oe))}function forward$s(ke){var e=adjust_lon(ke.x-this.long0),Te=ke.y;Te=gatg(this.cbg,Te);var Oe=Math.sin(Te),Be=Math.cos(Te),Ue=Math.sin(e),He=Math.cos(e);Te=Math.atan2(Oe,He*Be),e=Math.atan2(Ue*Be,hypot(Oe,Be*He)),e=asinhy(Math.tan(e));var We=clens_cmplx(this.gtu,2*Te,2*e);Te=Te+We[0],e=e+We[1];var Cn,An;return Math.abs(e)<=2.623395162778?(Cn=this.a*(this.Qn*e)+this.x0,An=this.a*(this.Qn*Te+this.Zb)+this.y0):(Cn=1/0,An=1/0),ke.x=Cn,ke.y=An,ke}function inverse$s(ke){var e=(ke.x-this.x0)*(1/this.a),Te=(ke.y-this.y0)*(1/this.a);Te=(Te-this.Zb)/this.Qn,e=e/this.Qn;var Oe,Be;if(Math.abs(e)<=2.623395162778){var Ue=clens_cmplx(this.utg,2*Te,2*e);Te=Te+Ue[0],e=e+Ue[1],e=Math.atan(sinh(e));var He=Math.sin(Te),We=Math.cos(Te),Cn=Math.sin(e),An=Math.cos(e);Te=Math.atan2(He*An,hypot(Cn,An*We)),e=Math.atan2(Cn,An*We),Oe=adjust_lon(e+this.long0),Be=gatg(this.cgb,Te)}else Oe=1/0,Be=1/0;return ke.x=Oe,ke.y=Be,ke}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(ke,e){if(ke===void 0){if(ke=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,ke<0)return 0;if(ke>60)return 60}return ke}var dependsOn="etmerc";function init$t(){var ke=adjust_zone(this.zone,this.long0);if(ke===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(ke)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(ke,e){return Math.pow((1-ke)/(1+ke),e)}var MAX_ITER$2=20;function init$s(){var ke=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*ke*ke),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(ke/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*ke,this.ratexp))}function forward$r(ke){var e=ke.x,Te=ke.y;return ke.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*Te+FORTPI),this.C)*srat(this.e*Math.sin(Te),this.ratexp))-HALF_PI,ke.x=this.C*e,ke}function inverse$r(ke){for(var e=1e-14,Te=ke.x/this.C,Oe=ke.y,Be=Math.pow(Math.tan(.5*Oe+FORTPI)/this.K,1/this.C),Ue=MAX_ITER$2;Ue>0&&(Oe=2*Math.atan(Be*srat(this.e*Math.sin(ke.y),-.5*this.e))-HALF_PI,!(Math.abs(Oe-ke.y)<e));--Ue)ke.y=Oe;return Ue?(ke.x=Te,ke.y=Oe,ke):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(ke){var e,Te,Oe,Be;return ke.x=adjust_lon(ke.x-this.long0),gauss.forward.apply(this,[ke]),e=Math.sin(ke.y),Te=Math.cos(ke.y),Oe=Math.cos(ke.x),Be=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*Te*Oe),ke.x=Be*Te*Math.sin(ke.x),ke.y=Be*(this.cosc0*e-this.sinc0*Te*Oe),ke.x=this.a*ke.x+this.x0,ke.y=this.a*ke.y+this.y0,ke}function inverse$q(ke){var e,Te,Oe,Be,Ue;if(ke.x=(ke.x-this.x0)/this.a,ke.y=(ke.y-this.y0)/this.a,ke.x/=this.k0,ke.y/=this.k0,Ue=hypot(ke.x,ke.y)){var He=2*Math.atan2(Ue,this.R2);e=Math.sin(He),Te=Math.cos(He),Be=Math.asin(Te*this.sinc0+ke.y*e*this.cosc0/Ue),Oe=Math.atan2(ke.x*e,Ue*this.cosc0*Te-ke.y*this.sinc0*e)}else Be=this.phic0,Oe=0;return ke.x=Oe,ke.y=Be,gauss.inverse.apply(this,[ke]),ke.x=adjust_lon(ke.x+this.long0),ke}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(ke,e,Te){return e*=Te,Math.tan(.5*(HALF_PI+ke))*Math.pow((1-e)/(1+e),.5*Te)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(ke){var e=ke.x,Te=ke.y,Oe=Math.sin(Te),Be=Math.cos(Te),Ue,He,We,Cn,An,En,Sn=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(Te+this.lat0)<=EPSLN?(ke.x=NaN,ke.y=NaN,ke):this.sphere?(Ue=2*this.k0/(1+this.sinlat0*Oe+this.coslat0*Be*Math.cos(Sn)),ke.x=this.a*Ue*Be*Math.sin(Sn)+this.x0,ke.y=this.a*Ue*(this.coslat0*Oe-this.sinlat0*Be*Math.cos(Sn))+this.y0,ke):(He=2*Math.atan(this.ssfn_(Te,Oe,this.e))-HALF_PI,Cn=Math.cos(He),We=Math.sin(He),Math.abs(this.coslat0)<=EPSLN?(An=tsfnz(this.e,Te*this.con,this.con*Oe),En=2*this.a*this.k0*An/this.cons,ke.x=this.x0+En*Math.sin(e-this.long0),ke.y=this.y0-this.con*En*Math.cos(e-this.long0),ke):(Math.abs(this.sinlat0)<EPSLN?(Ue=2*this.a*this.k0/(1+Cn*Math.cos(Sn)),ke.y=Ue*We):(Ue=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*We+this.cosX0*Cn*Math.cos(Sn))),ke.y=Ue*(this.cosX0*We-this.sinX0*Cn*Math.cos(Sn))+this.y0),ke.x=Ue*Cn*Math.sin(Sn)+this.x0,ke))}function inverse$p(ke){ke.x-=this.x0,ke.y-=this.y0;var e,Te,Oe,Be,Ue,He=Math.sqrt(ke.x*ke.x+ke.y*ke.y);if(this.sphere){var We=2*Math.atan(He/(2*this.a*this.k0));return e=this.long0,Te=this.lat0,He<=EPSLN?(ke.x=e,ke.y=Te,ke):(Te=Math.asin(Math.cos(We)*this.sinlat0+ke.y*Math.sin(We)*this.coslat0/He),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(ke.x,-1*ke.y)):e=adjust_lon(this.long0+Math.atan2(ke.x,ke.y)):e=adjust_lon(this.long0+Math.atan2(ke.x*Math.sin(We),He*this.coslat0*Math.cos(We)-ke.y*this.sinlat0*Math.sin(We))),ke.x=e,ke.y=Te,ke)}else if(Math.abs(this.coslat0)<=EPSLN){if(He<=EPSLN)return Te=this.lat0,e=this.long0,ke.x=e,ke.y=Te,ke;ke.x*=this.con,ke.y*=this.con,Oe=He*this.cons/(2*this.a*this.k0),Te=this.con*phi2z(this.e,Oe),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(ke.x,-1*ke.y))}else Be=2*Math.atan(He*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,He<=EPSLN?Ue=this.X0:(Ue=Math.asin(Math.cos(Be)*this.sinX0+ke.y*Math.sin(Be)*this.cosX0/He),e=adjust_lon(this.long0+Math.atan2(ke.x*Math.sin(Be),He*this.cosX0*Math.cos(Be)-ke.y*this.sinX0*Math.sin(Be)))),Te=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Ue)));return ke.x=e,ke.y=Te,ke}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var ke=this.lat0;this.lambda0=this.long0;var e=Math.sin(ke),Te=this.a,Oe=this.rf,Be=1/Oe,Ue=2*Be-Math.pow(Be,2),He=this.e=Math.sqrt(Ue);this.R=this.k0*Te*Math.sqrt(1-Ue)/(1-Ue*Math.pow(e,2)),this.alpha=Math.sqrt(1+Ue/(1-Ue)*Math.pow(Math.cos(ke),4)),this.b0=Math.asin(e/this.alpha);var We=Math.log(Math.tan(Math.PI/4+this.b0/2)),Cn=Math.log(Math.tan(Math.PI/4+ke/2)),An=Math.log((1+He*e)/(1-He*e));this.K=We-this.alpha*Cn+this.alpha*He/2*An}function forward$o(ke){var e=Math.log(Math.tan(Math.PI/4-ke.y/2)),Te=this.e/2*Math.log((1+this.e*Math.sin(ke.y))/(1-this.e*Math.sin(ke.y))),Oe=-this.alpha*(e+Te)+this.K,Be=2*(Math.atan(Math.exp(Oe))-Math.PI/4),Ue=this.alpha*(ke.x-this.lambda0),He=Math.atan(Math.sin(Ue)/(Math.sin(this.b0)*Math.tan(Be)+Math.cos(this.b0)*Math.cos(Ue))),We=Math.asin(Math.cos(this.b0)*Math.sin(Be)-Math.sin(this.b0)*Math.cos(Be)*Math.cos(Ue));return ke.y=this.R/2*Math.log((1+Math.sin(We))/(1-Math.sin(We)))+this.y0,ke.x=this.R*He+this.x0,ke}function inverse$o(ke){for(var e=ke.x-this.x0,Te=ke.y-this.y0,Oe=e/this.R,Be=2*(Math.atan(Math.exp(Te/this.R))-Math.PI/4),Ue=Math.asin(Math.cos(this.b0)*Math.sin(Be)+Math.sin(this.b0)*Math.cos(Be)*Math.cos(Oe)),He=Math.atan(Math.sin(Oe)/(Math.cos(this.b0)*Math.cos(Oe)-Math.sin(this.b0)*Math.tan(Be))),We=this.lambda0+He/this.alpha,Cn=0,An=Ue,En=-1e3,Sn=0;Math.abs(An-En)>1e-7;){if(++Sn>20)return;Cn=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Ue/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(An))/2)),En=An,An=2*Math.atan(Math.exp(Cn))-Math.PI/2}return ke.x=We,ke.y=An,ke}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(ke){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],Te=typeof ke.PROJECTION=="object"?Object.keys(ke.PROJECTION)[0]:ke.PROJECTION;return"no_uoff"in ke||"no_off"in ke||e.indexOf(Te)!==-1}function init$o(){var ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En=0,Sn,Tn=0,Ln=0,Bn=0,ei=0,ni=0,ti=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var ri=!1;"alpha"in this&&(ri=!0);var oi=!1;if("rectified_grid_angle"in this&&(oi=!0),ri&&(ti=this.alpha),oi&&(En=this.rectified_grid_angle*D2R$1),ri||oi)Tn=this.longc;else if(Ln=this.long1,ei=this.lat1,Bn=this.long2,ni=this.lat2,Math.abs(ei-ni)<=TOL||(ke=Math.abs(ei))<=TOL||Math.abs(ke-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(ni)-HALF_PI)<=TOL)throw new Error;var ai=1-this.es;e=Math.sqrt(ai),Math.abs(this.lat0)>EPSLN?(We=Math.sin(this.lat0),Te=Math.cos(this.lat0),ke=1-this.es*We*We,this.B=Te*Te,this.B=Math.sqrt(1+this.es*this.B*this.B/ai),this.A=this.B*this.k0*e/ke,Oe=this.B*e/(Te*Math.sqrt(ke)),Be=Oe*Oe-1,Be<=0?Be=0:(Be=Math.sqrt(Be),this.lat0<0&&(Be=-Be)),this.E=Be+=Oe,this.E*=Math.pow(tsfnz(this.e,this.lat0,We),this.B)):(this.B=1/e,this.A=this.k0,this.E=Oe=Be=1),ri||oi?(ri?(Sn=Math.asin(Math.sin(ti)/Oe),oi||(En=ti)):(Sn=En,ti=Math.asin(Oe*Math.sin(Sn))),this.lam0=Tn-Math.asin(.5*(Be-1/Be)*Math.tan(Sn))/this.B):(Ue=Math.pow(tsfnz(this.e,ei,Math.sin(ei)),this.B),He=Math.pow(tsfnz(this.e,ni,Math.sin(ni)),this.B),Be=this.E/Ue,Cn=(He-Ue)/(He+Ue),An=this.E*this.E,An=(An-He*Ue)/(An+He*Ue),ke=Ln-Bn,ke<-Math.pi?Bn-=TWO_PI:ke>Math.pi&&(Bn+=TWO_PI),this.lam0=adjust_lon(.5*(Ln+Bn)-Math.atan(An*Math.tan(.5*this.B*(Ln-Bn))/Cn)/this.B),Sn=Math.atan(2*Math.sin(this.B*adjust_lon(Ln-this.lam0))/(Be-1/Be)),En=ti=Math.asin(Oe*Math.sin(Sn))),this.singam=Math.sin(Sn),this.cosgam=Math.cos(Sn),this.sinrot=Math.sin(En),this.cosrot=Math.cos(En),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(Oe*Oe-1)/Math.cos(ti))),this.lat0<0&&(this.u_0=-this.u_0)),Be=.5*Sn,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-Be)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+Be))}function forward$n(ke){var e={},Te,Oe,Be,Ue,He,We,Cn,An;if(ke.x=ke.x-this.lam0,Math.abs(Math.abs(ke.y)-HALF_PI)>EPSLN){if(He=this.E/Math.pow(tsfnz(this.e,ke.y,Math.sin(ke.y)),this.B),We=1/He,Te=.5*(He-We),Oe=.5*(He+We),Ue=Math.sin(this.B*ke.x),Be=(Te*this.singam-Ue*this.cosgam)/Oe,Math.abs(Math.abs(Be)-1)<EPSLN)throw new Error;An=.5*this.ArB*Math.log((1-Be)/(1+Be)),We=Math.cos(this.B*ke.x),Math.abs(We)<TOL?Cn=this.A*ke.x:Cn=this.ArB*Math.atan2(Te*this.cosgam+Ue*this.singam,We)}else An=ke.y>0?this.v_pole_n:this.v_pole_s,Cn=this.ArB*ke.y;return this.no_rot?(e.x=Cn,e.y=An):(Cn-=this.u_0,e.x=An*this.cosrot+Cn*this.sinrot,e.y=Cn*this.cosrot-An*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(ke){var e,Te,Oe,Be,Ue,He,We,Cn={};if(ke.x=(ke.x-this.x0)*(1/this.a),ke.y=(ke.y-this.y0)*(1/this.a),this.no_rot?(Te=ke.y,e=ke.x):(Te=ke.x*this.cosrot-ke.y*this.sinrot,e=ke.y*this.cosrot+ke.x*this.sinrot+this.u_0),Oe=Math.exp(-this.BrA*Te),Be=.5*(Oe-1/Oe),Ue=.5*(Oe+1/Oe),He=Math.sin(this.BrA*e),We=(He*this.cosgam+Be*this.singam)/Ue,Math.abs(Math.abs(We)-1)<EPSLN)Cn.x=0,Cn.y=We<0?-HALF_PI:HALF_PI;else{if(Cn.y=this.E/Math.sqrt((1+We)/(1-We)),Cn.y=phi2z(this.e,Math.pow(Cn.y,1/this.B)),Cn.y===1/0)throw new Error;Cn.x=-this.rB*Math.atan2(Be*this.cosgam-He*this.singam,Math.cos(this.BrA*e))}return Cn.x+=this.lam0,Cn}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var ke=this.b/this.a;this.e=Math.sqrt(1-ke*ke);var e=Math.sin(this.lat1),Te=Math.cos(this.lat1),Oe=msfnz(this.e,e,Te),Be=tsfnz(this.e,this.lat1,e),Ue=Math.sin(this.lat2),He=Math.cos(this.lat2),We=msfnz(this.e,Ue,He),Cn=tsfnz(this.e,this.lat2,Ue),An=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(Oe/We)/Math.log(Be/Cn):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=Oe/(this.ns*Math.pow(Be,this.ns)),this.rh=this.a*this.f0*Math.pow(An,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(ke){var e=ke.x,Te=ke.y;Math.abs(2*Math.abs(Te)-Math.PI)<=EPSLN&&(Te=sign(Te)*(HALF_PI-2*EPSLN));var Oe=Math.abs(Math.abs(Te)-HALF_PI),Be,Ue;if(Oe>EPSLN)Be=tsfnz(this.e,Te,Math.sin(Te)),Ue=this.a*this.f0*Math.pow(Be,this.ns);else{if(Oe=Te*this.ns,Oe<=0)return null;Ue=0}var He=this.ns*adjust_lon(e-this.long0);return ke.x=this.k0*(Ue*Math.sin(He))+this.x0,ke.y=this.k0*(this.rh-Ue*Math.cos(He))+this.y0,ke}function inverse$m(ke){var e,Te,Oe,Be,Ue,He=(ke.x-this.x0)/this.k0,We=this.rh-(ke.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(He*He+We*We),Te=1):(e=-Math.sqrt(He*He+We*We),Te=-1);var Cn=0;if(e!==0&&(Cn=Math.atan2(Te*He,Te*We)),e!==0||this.ns>0){if(Te=1/this.ns,Oe=Math.pow(e/(this.a*this.f0),Te),Be=phi2z(this.e,Oe),Be===-9999)return null}else Be=-HALF_PI;return Ue=adjust_lon(Cn/this.ns+this.long0),ke.x=Ue,ke.y=Be,ke}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(ke){var e,Te,Oe,Be,Ue,He,We,Cn=ke.x,An=ke.y,En=adjust_lon(Cn-this.long0);return e=Math.pow((1+this.e*Math.sin(An))/(1-this.e*Math.sin(An)),this.alfa*this.e/2),Te=2*(Math.atan(this.k*Math.pow(Math.tan(An/2+this.s45),this.alfa)/e)-this.s45),Oe=-En*this.alfa,Be=Math.asin(Math.cos(this.ad)*Math.sin(Te)+Math.sin(this.ad)*Math.cos(Te)*Math.cos(Oe)),Ue=Math.asin(Math.cos(Te)*Math.sin(Oe)/Math.cos(Be)),He=this.n*Ue,We=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(Be/2+this.s45),this.n),ke.y=We*Math.cos(He)/1,ke.x=We*Math.sin(He)/1,this.czech||(ke.y*=-1,ke.x*=-1),ke}function inverse$l(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An=ke.x;ke.x=ke.y,ke.y=An,this.czech||(ke.y*=-1,ke.x*=-1),He=Math.sqrt(ke.x*ke.x+ke.y*ke.y),Ue=Math.atan2(ke.y,ke.x),Be=Ue/Math.sin(this.s0),Oe=2*(Math.atan(Math.pow(this.ro0/He,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(Oe)-Math.sin(this.ad)*Math.cos(Oe)*Math.cos(Be)),Te=Math.asin(Math.cos(Oe)*Math.sin(Be)/Math.cos(e)),ke.x=this.long0-Te/this.alfa,We=e,Cn=0;var En=0;do ke.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(We))/(1-this.e*Math.sin(We)),this.e/2))-this.s45),Math.abs(We-ke.y)<1e-10&&(Cn=1),We=ke.y,En+=1;while(Cn===0&&En<15);return En>=15?null:ke}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(ke,e,Te,Oe,Be){return ke*Be-e*Math.sin(2*Be)+Te*Math.sin(4*Be)-Oe*Math.sin(6*Be)}function e0fn(ke){return 1-.25*ke*(1+ke/16*(3+1.25*ke))}function e1fn(ke){return .375*ke*(1+.25*ke*(1+.46875*ke))}function e2fn(ke){return .05859375*ke*ke*(1+.75*ke)}function e3fn(ke){return ke*ke*ke*(35/3072)}function gN(ke,e,Te){var Oe=e*Te;return ke/Math.sqrt(1-Oe*Oe)}function adjust_lat(ke){return Math.abs(ke)<HALF_PI?ke:ke-sign(ke)*Math.PI}function imlfn(ke,e,Te,Oe,Be){var Ue,He;Ue=ke/e;for(var We=0;We<15;We++)if(He=(ke-(e*Ue-Te*Math.sin(2*Ue)+Oe*Math.sin(4*Ue)-Be*Math.sin(6*Ue)))/(e-2*Te*Math.cos(2*Ue)+4*Oe*Math.cos(4*Ue)-6*Be*Math.cos(6*Ue)),Ue+=He,Math.abs(He)<=1e-10)return Ue;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(ke){var e,Te,Oe=ke.x,Be=ke.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(Be)*Math.sin(Oe)),Te=this.a*(Math.atan2(Math.tan(Be),Math.cos(Oe))-this.lat0);else{var Ue=Math.sin(Be),He=Math.cos(Be),We=gN(this.a,this.e,Ue),Cn=Math.tan(Be)*Math.tan(Be),An=Oe*Math.cos(Be),En=An*An,Sn=this.es*He*He/(1-this.es),Tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Be);e=We*An*(1-En*Cn*(1/6-(8-Cn+8*Sn)*En/120)),Te=Tn-this.ml0+We*Ue/He*En*(.5+(5-Cn+6*Sn)*En/24)}return ke.x=e+this.x0,ke.y=Te+this.y0,ke}function inverse$k(ke){ke.x-=this.x0,ke.y-=this.y0;var e=ke.x/this.a,Te=ke.y/this.a,Oe,Be;if(this.sphere){var Ue=Te+this.lat0;Oe=Math.asin(Math.sin(Ue)*Math.cos(e)),Be=Math.atan2(Math.tan(e),Math.cos(Ue))}else{var He=this.ml0/this.a+Te,We=imlfn(He,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(We)-HALF_PI)<=EPSLN)return ke.x=this.long0,ke.y=HALF_PI,Te<0&&(ke.y*=-1),ke;var Cn=gN(this.a,this.e,Math.sin(We)),An=Cn*Cn*Cn/this.a/this.a*(1-this.es),En=Math.pow(Math.tan(We),2),Sn=e*this.a/Cn,Tn=Sn*Sn;Oe=We-Cn*Math.tan(We)/An*Sn*Sn*(.5-(1+3*En)*Sn*Sn/24),Be=Sn*(1-Tn*(En/3+(1+3*En)*En*Tn/15))/Math.cos(We)}return ke.x=adjust_lon(Be+this.long0),ke.y=adjust_lat(Oe),ke}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(ke,e){var Te;return ke>1e-7?(Te=ke*e,(1-ke*ke)*(e/(1-Te*Te)-.5/ke*Math.log((1-Te)/(1+Te)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var ke=Math.abs(this.lat0);if(Math.abs(ke-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(ke)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn=ke.x,Tn=ke.y;if(Sn=adjust_lon(Sn-this.long0),this.sphere){if(Ue=Math.sin(Tn),En=Math.cos(Tn),Oe=Math.cos(Sn),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Te=this.mode===this.EQUIT?1+En*Oe:1+this.sinph0*Ue+this.cosph0*En*Oe,Te<=EPSLN)return null;Te=Math.sqrt(2/Te),e=Te*En*Math.sin(Sn),Te*=this.mode===this.EQUIT?Ue:this.cosph0*Ue-this.sinph0*En*Oe}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Oe=-Oe),Math.abs(Tn+this.lat0)<EPSLN)return null;Te=FORTPI-Tn*.5,Te=2*(this.mode===this.S_POLE?Math.cos(Te):Math.sin(Te)),e=Te*Math.sin(Sn),Te*=Oe}}else{switch(We=0,Cn=0,An=0,Oe=Math.cos(Sn),Be=Math.sin(Sn),Ue=Math.sin(Tn),He=qsfnz(this.e,Ue),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(We=He/this.qp,Cn=Math.sqrt(1-We*We)),this.mode){case this.OBLIQ:An=1+this.sinb1*We+this.cosb1*Cn*Oe;break;case this.EQUIT:An=1+Cn*Oe;break;case this.N_POLE:An=HALF_PI+Tn,He=this.qp-He;break;case this.S_POLE:An=Tn-HALF_PI,He=this.qp+He;break}if(Math.abs(An)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:An=Math.sqrt(2/An),this.mode===this.OBLIQ?Te=this.ymf*An*(this.cosb1*We-this.sinb1*Cn*Oe):Te=(An=Math.sqrt(2/(1+Cn*Oe)))*We*this.ymf,e=this.xmf*An*Cn*Be;break;case this.N_POLE:case this.S_POLE:He>=0?(e=(An=Math.sqrt(He))*Be,Te=Oe*(this.mode===this.S_POLE?An:-An)):e=Te=0;break}}return ke.x=this.a*e+this.x0,ke.y=this.a*Te+this.y0,ke}function inverse$j(ke){ke.x-=this.x0,ke.y-=this.y0;var e=ke.x/this.a,Te=ke.y/this.a,Oe,Be,Ue,He,We,Cn,An;if(this.sphere){var En=0,Sn,Tn=0;if(Sn=Math.sqrt(e*e+Te*Te),Be=Sn*.5,Be>1)return null;switch(Be=2*Math.asin(Be),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Tn=Math.sin(Be),En=Math.cos(Be)),this.mode){case this.EQUIT:Be=Math.abs(Sn)<=EPSLN?0:Math.asin(Te*Tn/Sn),e*=Tn,Te=En*Sn;break;case this.OBLIQ:Be=Math.abs(Sn)<=EPSLN?this.lat0:Math.asin(En*this.sinph0+Te*Tn*this.cosph0/Sn),e*=Tn*this.cosph0,Te=(En-Math.sin(Be)*this.sinph0)*Sn;break;case this.N_POLE:Te=-Te,Be=HALF_PI-Be;break;case this.S_POLE:Be-=HALF_PI;break}Oe=Te===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,Te)}else{if(An=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,Te*=this.dd,Cn=Math.sqrt(e*e+Te*Te),Cn<EPSLN)return ke.x=this.long0,ke.y=this.lat0,ke;He=2*Math.asin(.5*Cn/this.rq),Ue=Math.cos(He),e*=He=Math.sin(He),this.mode===this.OBLIQ?(An=Ue*this.sinb1+Te*He*this.cosb1/Cn,We=this.qp*An,Te=Cn*this.cosb1*Ue-Te*this.sinb1*He):(An=Te*He/Cn,We=this.qp*An,Te=Cn*Ue)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Te=-Te),We=e*e+Te*Te,!We)return ke.x=this.long0,ke.y=this.lat0,ke;An=1-We/this.qp,this.mode===this.S_POLE&&(An=-An)}Oe=Math.atan2(e,Te),Be=authlat(Math.asin(An),this.apa)}return ke.x=adjust_lon(this.long0+Oe),ke.y=Be,ke}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(ke){var e,Te=[];return Te[0]=ke*P00,e=ke*ke,Te[0]+=e*P01,Te[1]=e*P10,e*=ke,Te[0]+=e*P02,Te[1]+=e*P11,Te[2]=e*P20,Te}function authlat(ke,e){var Te=ke+ke;return ke+e[0]*Math.sin(Te)+e[1]*Math.sin(Te+Te)+e[2]*Math.sin(Te+Te+Te)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(ke){return Math.abs(ke)>1&&(ke=ke>1?1:-1),Math.asin(ke)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(ke){var e=ke.x,Te=ke.y;this.sin_phi=Math.sin(Te),this.cos_phi=Math.cos(Te);var Oe=qsfnz(this.e3,this.sin_phi),Be=this.a*Math.sqrt(this.c-this.ns0*Oe)/this.ns0,Ue=this.ns0*adjust_lon(e-this.long0),He=Be*Math.sin(Ue)+this.x0,We=this.rh-Be*Math.cos(Ue)+this.y0;return ke.x=He,ke.y=We,ke}function inverse$i(ke){var e,Te,Oe,Be,Ue,He;return ke.x-=this.x0,ke.y=this.rh-ke.y+this.y0,this.ns0>=0?(e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),Oe=1):(e=-Math.sqrt(ke.x*ke.x+ke.y*ke.y),Oe=-1),Be=0,e!==0&&(Be=Math.atan2(Oe*ke.x,Oe*ke.y)),Oe=e*this.ns0/this.a,this.sphere?He=Math.asin((this.c-Oe*Oe)/(2*this.ns0)):(Te=(this.c-Oe*Oe)/this.ns0,He=this.phi1z(this.e3,Te)),Ue=adjust_lon(Be/this.ns0+this.long0),ke.x=Ue,ke.y=He,ke}function phi1z(ke,e){var Te,Oe,Be,Ue,He,We=asinz(.5*e);if(ke<EPSLN)return We;for(var Cn=ke*ke,An=1;An<=25;An++)if(Te=Math.sin(We),Oe=Math.cos(We),Be=ke*Te,Ue=1-Be*Be,He=.5*Ue*Ue/Oe*(e/(1-Cn)-Te/Ue+.5/ke*Math.log((1-Be)/(1+Be))),We=We+He,Math.abs(He)<=1e-7)return We;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An=ke.x,En=ke.y;return Oe=adjust_lon(An-this.long0),e=Math.sin(En),Te=Math.cos(En),Be=Math.cos(Oe),He=this.sin_p14*e+this.cos_p14*Te*Be,Ue=1,He>0||Math.abs(He)<=EPSLN?(We=this.x0+this.a*Ue*Te*Math.sin(Oe)/He,Cn=this.y0+this.a*Ue*(this.cos_p14*e-this.sin_p14*Te*Be)/He):(We=this.x0+this.infinity_dist*Te*Math.sin(Oe),Cn=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*Te*Be)),ke.x=We,ke.y=Cn,ke}function inverse$h(ke){var e,Te,Oe,Be,Ue,He;return ke.x=(ke.x-this.x0)/this.a,ke.y=(ke.y-this.y0)/this.a,ke.x/=this.k0,ke.y/=this.k0,(e=Math.sqrt(ke.x*ke.x+ke.y*ke.y))?(Be=Math.atan2(e,this.rc),Te=Math.sin(Be),Oe=Math.cos(Be),He=asinz(Oe*this.sin_p14+ke.y*Te*this.cos_p14/e),Ue=Math.atan2(ke.x*Te,e*this.cos_p14*Oe-ke.y*this.sin_p14*Te),Ue=adjust_lon(this.long0+Ue)):(He=this.phic0,Ue=0),ke.x=Ue,ke.y=He,ke}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(ke,e){var Te=1-(1-ke*ke)/(2*ke)*Math.log((1-ke)/(1+ke));if(Math.abs(Math.abs(e)-Te)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var Oe=Math.asin(.5*e),Be,Ue,He,We,Cn=0;Cn<30;Cn++)if(Ue=Math.sin(Oe),He=Math.cos(Oe),We=ke*Ue,Be=Math.pow(1-We*We,2)/(2*He)*(e/(1-ke*ke)-Ue/(1-We*We)+.5/ke*Math.log((1-We)/(1+We))),Oe+=Be,Math.abs(Be)<=1e-10)return Oe;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(ke){var e=ke.x,Te=ke.y,Oe,Be,Ue=adjust_lon(e-this.long0);if(this.sphere)Oe=this.x0+this.a*Ue*Math.cos(this.lat_ts),Be=this.y0+this.a*Math.sin(Te)/Math.cos(this.lat_ts);else{var He=qsfnz(this.e,Math.sin(Te));Oe=this.x0+this.a*this.k0*Ue,Be=this.y0+this.a*He*.5/this.k0}return ke.x=Oe,ke.y=Be,ke}function inverse$g(ke){ke.x-=this.x0,ke.y-=this.y0;var e,Te;return this.sphere?(e=adjust_lon(this.long0+ke.x/this.a/Math.cos(this.lat_ts)),Te=Math.asin(ke.y/this.a*Math.cos(this.lat_ts))):(Te=iqsfnz(this.e,2*ke.y*this.k0/this.a),e=adjust_lon(this.long0+ke.x/(this.a*this.k0))),ke.x=e,ke.y=Te,ke}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(ke){var e=ke.x,Te=ke.y,Oe=adjust_lon(e-this.long0),Be=adjust_lat(Te-this.lat0);return ke.x=this.x0+this.a*Oe*this.rc,ke.y=this.y0+this.a*Be,ke}function inverse$f(ke){var e=ke.x,Te=ke.y;return ke.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),ke.y=adjust_lat(this.lat0+(Te-this.y0)/this.a),ke}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(ke){var e=ke.x,Te=ke.y,Oe,Be,Ue,He=adjust_lon(e-this.long0);if(Ue=He*Math.sin(Te),this.sphere)Math.abs(Te)<=EPSLN?(Oe=this.a*He,Be=-1*this.a*this.lat0):(Oe=this.a*Math.sin(Ue)/Math.tan(Te),Be=this.a*(adjust_lat(Te-this.lat0)+(1-Math.cos(Ue))/Math.tan(Te)));else if(Math.abs(Te)<=EPSLN)Oe=this.a*He,Be=-1*this.ml0;else{var We=gN(this.a,this.e,Math.sin(Te))/Math.tan(Te);Oe=We*Math.sin(Ue),Be=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Te)-this.ml0+We*(1-Math.cos(Ue))}return ke.x=Oe+this.x0,ke.y=Be+this.y0,ke}function inverse$e(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An;if(Oe=ke.x-this.x0,Be=ke.y-this.y0,this.sphere)if(Math.abs(Be+this.a*this.lat0)<=EPSLN)e=adjust_lon(Oe/this.a+this.long0),Te=0;else{He=this.lat0+Be/this.a,We=Oe*Oe/this.a/this.a+He*He,Cn=He;var En;for(Ue=MAX_ITER$1;Ue;--Ue)if(En=Math.tan(Cn),An=-1*(He*(Cn*En+1)-Cn-.5*(Cn*Cn+We)*En)/((Cn-He)/En-1),Cn+=An,Math.abs(An)<=EPSLN){Te=Cn;break}e=adjust_lon(this.long0+Math.asin(Oe*Math.tan(Cn)/this.a)/Math.sin(Te))}else if(Math.abs(Be+this.ml0)<=EPSLN)Te=0,e=adjust_lon(this.long0+Oe/this.a);else{He=(this.ml0+Be)/this.a,We=Oe*Oe/this.a/this.a+He*He,Cn=He;var Sn,Tn,Ln,Bn,ei;for(Ue=MAX_ITER$1;Ue;--Ue)if(ei=this.e*Math.sin(Cn),Sn=Math.sqrt(1-ei*ei)*Math.tan(Cn),Tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Cn),Ln=this.e0-2*this.e1*Math.cos(2*Cn)+4*this.e2*Math.cos(4*Cn)-6*this.e3*Math.cos(6*Cn),Bn=Tn/this.a,An=(He*(Sn*Bn+1)-Bn-.5*Sn*(Bn*Bn+We))/(this.es*Math.sin(2*Cn)*(Bn*Bn+We-2*He*Bn)/(4*Sn)+(He-Bn)*(Sn*Ln-2/Math.sin(2*Cn))-Ln),Cn-=An,Math.abs(An)<=EPSLN){Te=Cn;break}Sn=Math.sqrt(1-this.es*Math.pow(Math.sin(Te),2))*Math.tan(Te),e=adjust_lon(this.long0+Math.asin(Oe*Sn/this.a)/Math.sin(Te))}return ke.x=e,ke.y=Te,ke}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(ke){var e,Te=ke.x,Oe=ke.y,Be=Oe-this.lat0,Ue=Te-this.long0,He=Be/SEC_TO_RAD*1e-5,We=Ue,Cn=1,An=0;for(e=1;e<=10;e++)Cn=Cn*He,An=An+this.A[e]*Cn;var En=An,Sn=We,Tn=1,Ln=0,Bn,ei,ni=0,ti=0;for(e=1;e<=6;e++)Bn=Tn*En-Ln*Sn,ei=Ln*En+Tn*Sn,Tn=Bn,Ln=ei,ni=ni+this.B_re[e]*Tn-this.B_im[e]*Ln,ti=ti+this.B_im[e]*Tn+this.B_re[e]*Ln;return ke.x=ti*this.a+this.x0,ke.y=ni*this.a+this.y0,ke}function inverse$d(ke){var e,Te=ke.x,Oe=ke.y,Be=Te-this.x0,Ue=Oe-this.y0,He=Ue/this.a,We=Be/this.a,Cn=1,An=0,En,Sn,Tn=0,Ln=0;for(e=1;e<=6;e++)En=Cn*He-An*We,Sn=An*He+Cn*We,Cn=En,An=Sn,Tn=Tn+this.C_re[e]*Cn-this.C_im[e]*An,Ln=Ln+this.C_im[e]*Cn+this.C_re[e]*An;for(var Bn=0;Bn<this.iterations;Bn++){var ei=Tn,ni=Ln,ti,ri,oi=He,ai=We;for(e=2;e<=6;e++)ti=ei*Tn-ni*Ln,ri=ni*Tn+ei*Ln,ei=ti,ni=ri,oi=oi+(e-1)*(this.B_re[e]*ei-this.B_im[e]*ni),ai=ai+(e-1)*(this.B_im[e]*ei+this.B_re[e]*ni);ei=1,ni=0;var ci=this.B_re[1],Pi=this.B_im[1];for(e=2;e<=6;e++)ti=ei*Tn-ni*Ln,ri=ni*Tn+ei*Ln,ei=ti,ni=ri,ci=ci+e*(this.B_re[e]*ei-this.B_im[e]*ni),Pi=Pi+e*(this.B_im[e]*ei+this.B_re[e]*ni);var vi=ci*ci+Pi*Pi;Tn=(oi*ci+ai*Pi)/vi,Ln=(ai*ci-oi*Pi)/vi}var pi=Tn,Mi=Ln,Fi=1,fi=0;for(e=1;e<=9;e++)Fi=Fi*pi,fi=fi+this.D[e]*Fi;var ui=this.lat0+fi*SEC_TO_RAD*1e5,Oi=this.long0+Mi;return ke.x=Oi,ke.y=ui,ke}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(ke){var e=ke.x,Te=ke.y,Oe=adjust_lon(e-this.long0),Be=this.x0+this.a*Oe,Ue=this.y0+this.a*Math.log(Math.tan(Math.PI/4+Te/2.5))*1.25;return ke.x=Be,ke.y=Ue,ke}function inverse$c(ke){ke.x-=this.x0,ke.y-=this.y0;var e=adjust_lon(this.long0+ke.x/this.a),Te=2.5*(Math.atan(Math.exp(.8*ke.y/this.a))-Math.PI/4);return ke.x=e,ke.y=Te,ke}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(ke){var e,Te,Oe=ke.x,Be=ke.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere){if(!this.m)Be=this.n!==1?Math.asin(this.n*Math.sin(Be)):Be;else for(var Ue=this.n*Math.sin(Be),He=MAX_ITER;He;--He){var We=(this.m*Be+Math.sin(Be)-Ue)/(this.m+Math.cos(Be));if(Be-=We,Math.abs(We)<EPSLN)break}e=this.a*this.C_x*Oe*(this.m+Math.cos(Be)),Te=this.a*this.C_y*Be}else{var Cn=Math.sin(Be),An=Math.cos(Be);Te=this.a*pj_mlfn(Be,Cn,An,this.en),e=this.a*Oe*An/Math.sqrt(1-this.es*Cn*Cn)}return ke.x=e,ke.y=Te,ke}function inverse$b(ke){var e,Te,Oe,Be;return ke.x-=this.x0,Oe=ke.x/this.a,ke.y-=this.y0,e=ke.y/this.a,this.sphere?(e/=this.C_y,Oe=Oe/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),Oe=adjust_lon(Oe+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(ke.y/this.a,this.es,this.en),Be=Math.abs(e),Be<HALF_PI?(Be=Math.sin(e),Te=this.long0+ke.x*Math.sqrt(1-this.es*Be*Be)/(this.a*Math.cos(e)),Oe=adjust_lon(Te)):Be-EPSLN<HALF_PI&&(Oe=this.long0)),ke.x=Oe,ke.y=e,ke}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(ke){for(var e=ke.x,Te=ke.y,Oe=adjust_lon(e-this.long0),Be=Te,Ue=Math.PI*Math.sin(Te);;){var He=-(Be+Math.sin(Be)-Ue)/(1+Math.cos(Be));if(Be+=He,Math.abs(He)<EPSLN)break}Be/=2,Math.PI/2-Math.abs(Te)<EPSLN&&(Oe=0);var We=.900316316158*this.a*Oe*Math.cos(Be)+this.x0,Cn=1.4142135623731*this.a*Math.sin(Be)+this.y0;return ke.x=We,ke.y=Cn,ke}function inverse$a(ke){var e,Te;ke.x-=this.x0,ke.y-=this.y0,Te=ke.y/(1.4142135623731*this.a),Math.abs(Te)>.999999999999&&(Te=.999999999999),e=Math.asin(Te);var Oe=adjust_lon(this.long0+ke.x/(.900316316158*this.a*Math.cos(e)));Oe<-Math.PI&&(Oe=-Math.PI),Oe>Math.PI&&(Oe=Math.PI),Te=(2*e+Math.sin(2*e))/Math.PI,Math.abs(Te)>1&&(Te=1);var Be=Math.asin(Te);return ke.x=Oe,ke.y=Be,ke}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(ke){var e=ke.x,Te=ke.y,Oe;if(this.sphere)Oe=this.a*(this.g-Te);else{var Be=mlfn(this.e0,this.e1,this.e2,this.e3,Te);Oe=this.a*(this.g-Be)}var Ue=this.ns*adjust_lon(e-this.long0),He=this.x0+Oe*Math.sin(Ue),We=this.y0+this.rh-Oe*Math.cos(Ue);return ke.x=He,ke.y=We,ke}function inverse$9(ke){ke.x-=this.x0,ke.y=this.rh-ke.y+this.y0;var e,Te,Oe,Be;this.ns>=0?(Te=Math.sqrt(ke.x*ke.x+ke.y*ke.y),e=1):(Te=-Math.sqrt(ke.x*ke.x+ke.y*ke.y),e=-1);var Ue=0;if(Te!==0&&(Ue=Math.atan2(e*ke.x,e*ke.y)),this.sphere)return Be=adjust_lon(this.long0+Ue/this.ns),Oe=adjust_lat(this.g-Te/this.a),ke.x=Be,ke.y=Oe,ke;var He=this.g-Te/this.a;return Oe=imlfn(He,this.e0,this.e1,this.e2,this.e3),Be=adjust_lon(this.long0+Ue/this.ns),ke.x=Be,ke.y=Oe,ke}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(ke){var e=ke.x,Te=ke.y,Oe=adjust_lon(e-this.long0),Be,Ue;Math.abs(Te)<=EPSLN&&(Be=this.x0+this.R*Oe,Ue=this.y0);var He=asinz(2*Math.abs(Te/Math.PI));(Math.abs(Oe)<=EPSLN||Math.abs(Math.abs(Te)-HALF_PI)<=EPSLN)&&(Be=this.x0,Te>=0?Ue=this.y0+Math.PI*this.R*Math.tan(.5*He):Ue=this.y0+Math.PI*this.R*-Math.tan(.5*He));var We=.5*Math.abs(Math.PI/Oe-Oe/Math.PI),Cn=We*We,An=Math.sin(He),En=Math.cos(He),Sn=En/(An+En-1),Tn=Sn*Sn,Ln=Sn*(2/An-1),Bn=Ln*Ln,ei=Math.PI*this.R*(We*(Sn-Bn)+Math.sqrt(Cn*(Sn-Bn)*(Sn-Bn)-(Bn+Cn)*(Tn-Bn)))/(Bn+Cn);Oe<0&&(ei=-ei),Be=this.x0+ei;var ni=Cn+Sn;return ei=Math.PI*this.R*(Ln*ni-We*Math.sqrt((Bn+Cn)*(Cn+1)-ni*ni))/(Bn+Cn),Te>=0?Ue=this.y0+ei:Ue=this.y0-ei,ke.x=Be,ke.y=Ue,ke}function inverse$8(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln;return ke.x-=this.x0,ke.y-=this.y0,Sn=Math.PI*this.R,Oe=ke.x/Sn,Be=ke.y/Sn,Ue=Oe*Oe+Be*Be,He=-Math.abs(Be)*(1+Ue),We=He-2*Be*Be+Oe*Oe,Cn=-2*He+1+2*Be*Be+Ue*Ue,Ln=Be*Be/Cn+(2*We*We*We/Cn/Cn/Cn-9*He*We/Cn/Cn)/27,An=(He-We*We/3/Cn)/Cn,En=2*Math.sqrt(-An/3),Sn=3*Ln/An/En,Math.abs(Sn)>1&&(Sn>=0?Sn=1:Sn=-1),Tn=Math.acos(Sn)/3,ke.y>=0?Te=(-En*Math.cos(Tn+Math.PI/3)-We/3/Cn)*Math.PI:Te=-(-En*Math.cos(Tn+Math.PI/3)-We/3/Cn)*Math.PI,Math.abs(Oe)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Ue-1+Math.sqrt(1+2*(Oe*Oe-Be*Be)+Ue*Ue))/2/Oe),ke.x=e,ke.y=Te,ke}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(ke){var e=ke.x,Te=ke.y,Oe=Math.sin(ke.y),Be=Math.cos(ke.y),Ue=adjust_lon(e-this.long0),He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi,ai,ci,Pi,vi,pi,Mi,Fi,fi,ui;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(ke.x=this.x0+this.a*(HALF_PI-Te)*Math.sin(Ue),ke.y=this.y0-this.a*(HALF_PI-Te)*Math.cos(Ue),ke):Math.abs(this.sin_p12+1)<=EPSLN?(ke.x=this.x0+this.a*(HALF_PI+Te)*Math.sin(Ue),ke.y=this.y0+this.a*(HALF_PI+Te)*Math.cos(Ue),ke):(vi=this.sin_p12*Oe+this.cos_p12*Be*Math.cos(Ue),ci=Math.acos(vi),Pi=ci?ci/Math.sin(ci):1,ke.x=this.x0+this.a*Pi*Be*Math.sin(Ue),ke.y=this.y0+this.a*Pi*(this.cos_p12*Oe-this.sin_p12*Be*Math.cos(Ue)),ke):(He=e0fn(this.es),We=e1fn(this.es),Cn=e2fn(this.es),An=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(En=this.a*mlfn(He,We,Cn,An,HALF_PI),Sn=this.a*mlfn(He,We,Cn,An,Te),ke.x=this.x0+(En-Sn)*Math.sin(Ue),ke.y=this.y0-(En-Sn)*Math.cos(Ue),ke):Math.abs(this.sin_p12+1)<=EPSLN?(En=this.a*mlfn(He,We,Cn,An,HALF_PI),Sn=this.a*mlfn(He,We,Cn,An,Te),ke.x=this.x0+(En+Sn)*Math.sin(Ue),ke.y=this.y0+(En+Sn)*Math.cos(Ue),ke):(Tn=Oe/Be,Ln=gN(this.a,this.e,this.sin_p12),Bn=gN(this.a,this.e,Oe),ei=Math.atan((1-this.es)*Tn+this.es*Ln*this.sin_p12/(Bn*Be)),ni=Math.atan2(Math.sin(Ue),this.cos_p12*Math.tan(ei)-this.sin_p12*Math.cos(Ue)),ni===0?pi=Math.asin(this.cos_p12*Math.sin(ei)-this.sin_p12*Math.cos(ei)):Math.abs(Math.abs(ni)-Math.PI)<=EPSLN?pi=-Math.asin(this.cos_p12*Math.sin(ei)-this.sin_p12*Math.cos(ei)):pi=Math.asin(Math.sin(Ue)*Math.cos(ei)/Math.sin(ni)),ti=this.e*this.sin_p12/Math.sqrt(1-this.es),ri=this.e*this.cos_p12*Math.cos(ni)/Math.sqrt(1-this.es),oi=ti*ri,ai=ri*ri,Mi=pi*pi,Fi=Mi*pi,fi=Fi*pi,ui=fi*pi,ci=Ln*pi*(1-Mi*ai*(1-ai)/6+Fi/8*oi*(1-2*ai)+fi/120*(ai*(4-7*ai)-3*ti*ti*(1-7*ai))-ui/48*oi),ke.x=this.x0+ci*Math.sin(ni),ke.y=this.y0+ci*Math.cos(ni),ke))}function inverse$7(ke){ke.x-=this.x0,ke.y-=this.y0;var e,Te,Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi,ai,ci,Pi,vi,pi;return this.sphere?(e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),e>2*HALF_PI*this.a?void 0:(Te=e/this.a,Oe=Math.sin(Te),Be=Math.cos(Te),Ue=this.long0,Math.abs(e)<=EPSLN?He=this.lat0:(He=asinz(Be*this.sin_p12+ke.y*Oe*this.cos_p12/e),We=Math.abs(this.lat0)-HALF_PI,Math.abs(We)<=EPSLN?this.lat0>=0?Ue=adjust_lon(this.long0+Math.atan2(ke.x,-ke.y)):Ue=adjust_lon(this.long0-Math.atan2(-ke.x,ke.y)):Ue=adjust_lon(this.long0+Math.atan2(ke.x*Oe,e*this.cos_p12*Be-ke.y*this.sin_p12*Oe))),ke.x=Ue,ke.y=He,ke)):(Cn=e0fn(this.es),An=e1fn(this.es),En=e2fn(this.es),Sn=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Tn=this.a*mlfn(Cn,An,En,Sn,HALF_PI),e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),Ln=Tn-e,He=imlfn(Ln/this.a,Cn,An,En,Sn),Ue=adjust_lon(this.long0+Math.atan2(ke.x,-1*ke.y)),ke.x=Ue,ke.y=He,ke):Math.abs(this.sin_p12+1)<=EPSLN?(Tn=this.a*mlfn(Cn,An,En,Sn,HALF_PI),e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),Ln=e-Tn,He=imlfn(Ln/this.a,Cn,An,En,Sn),Ue=adjust_lon(this.long0+Math.atan2(ke.x,ke.y)),ke.x=Ue,ke.y=He,ke):(e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),ni=Math.atan2(ke.x,ke.y),Bn=gN(this.a,this.e,this.sin_p12),ti=Math.cos(ni),ri=this.e*this.cos_p12*ti,oi=-ri*ri/(1-this.es),ai=3*this.es*(1-oi)*this.sin_p12*this.cos_p12*ti/(1-this.es),ci=e/Bn,Pi=ci-oi*(1+oi)*Math.pow(ci,3)/6-ai*(1+3*oi)*Math.pow(ci,4)/24,vi=1-oi*Pi*Pi/2-ci*Pi*Pi*Pi/6,ei=Math.asin(this.sin_p12*Math.cos(Pi)+this.cos_p12*Math.sin(Pi)*ti),Ue=adjust_lon(this.long0+Math.asin(Math.sin(ni)*Math.sin(Pi)/Math.cos(ei))),pi=Math.sin(ei),He=Math.atan2((pi-this.es*vi*this.sin_p12)*Math.tan(ei),pi*(1-this.es)),ke.x=Ue,ke.y=He,ke))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An=ke.x,En=ke.y;return Oe=adjust_lon(An-this.long0),e=Math.sin(En),Te=Math.cos(En),Be=Math.cos(Oe),He=this.sin_p14*e+this.cos_p14*Te*Be,Ue=1,(He>0||Math.abs(He)<=EPSLN)&&(We=this.a*Ue*Te*Math.sin(Oe),Cn=this.y0+this.a*Ue*(this.cos_p14*e-this.sin_p14*Te*Be)),ke.x=We,ke.y=Cn,ke}function inverse$6(ke){var e,Te,Oe,Be,Ue,He,We;return ke.x-=this.x0,ke.y-=this.y0,e=Math.sqrt(ke.x*ke.x+ke.y*ke.y),Te=asinz(e/this.a),Oe=Math.sin(Te),Be=Math.cos(Te),He=this.long0,Math.abs(e)<=EPSLN?(We=this.lat0,ke.x=He,ke.y=We,ke):(We=asinz(Be*this.sin_p14+ke.y*Oe*this.cos_p14/e),Ue=Math.abs(this.lat0)-HALF_PI,Math.abs(Ue)<=EPSLN?(this.lat0>=0?He=adjust_lon(this.long0+Math.atan2(ke.x,-ke.y)):He=adjust_lon(this.long0-Math.atan2(-ke.x,ke.y)),ke.x=He,ke.y=We,ke):(He=adjust_lon(this.long0+Math.atan2(ke.x*Oe,e*this.cos_p14*Be-ke.y*this.sin_p14*Oe)),ke.x=He,ke.y=We,ke))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(ke){var e={x:0,y:0},Te,Oe,Be,Ue,He,We,Cn={value:0};if(ke.x-=this.long0,this.es!==0?Te=Math.atan(this.one_minus_f_squared*Math.tan(ke.y)):Te=ke.y,Oe=ke.x,this.face===FACE_ENUM.TOP)Ue=HALF_PI-Te,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(Cn.value=AREA_ENUM.AREA_0,Be=Oe-HALF_PI):Oe>HALF_PI+FORTPI||Oe<=-(HALF_PI+FORTPI)?(Cn.value=AREA_ENUM.AREA_1,Be=Oe>0?Oe-SPI:Oe+SPI):Oe>-(HALF_PI+FORTPI)&&Oe<=-FORTPI?(Cn.value=AREA_ENUM.AREA_2,Be=Oe+HALF_PI):(Cn.value=AREA_ENUM.AREA_3,Be=Oe);else if(this.face===FACE_ENUM.BOTTOM)Ue=HALF_PI+Te,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(Cn.value=AREA_ENUM.AREA_0,Be=-Oe+HALF_PI):Oe<FORTPI&&Oe>=-FORTPI?(Cn.value=AREA_ENUM.AREA_1,Be=-Oe):Oe<-FORTPI&&Oe>=-(HALF_PI+FORTPI)?(Cn.value=AREA_ENUM.AREA_2,Be=-Oe-HALF_PI):(Cn.value=AREA_ENUM.AREA_3,Be=Oe>0?-Oe+SPI:-Oe-SPI);else{var An,En,Sn,Tn,Ln,Bn,ei;this.face===FACE_ENUM.RIGHT?Oe=qsc_shift_lon_origin(Oe,+HALF_PI):this.face===FACE_ENUM.BACK?Oe=qsc_shift_lon_origin(Oe,3.14159265359):this.face===FACE_ENUM.LEFT&&(Oe=qsc_shift_lon_origin(Oe,-HALF_PI)),Tn=Math.sin(Te),Ln=Math.cos(Te),Bn=Math.sin(Oe),ei=Math.cos(Oe),An=Ln*ei,En=Ln*Bn,Sn=Tn,this.face===FACE_ENUM.FRONT?(Ue=Math.acos(An),Be=qsc_fwd_equat_face_theta(Ue,Sn,En,Cn)):this.face===FACE_ENUM.RIGHT?(Ue=Math.acos(En),Be=qsc_fwd_equat_face_theta(Ue,Sn,-An,Cn)):this.face===FACE_ENUM.BACK?(Ue=Math.acos(-An),Be=qsc_fwd_equat_face_theta(Ue,Sn,-En,Cn)):this.face===FACE_ENUM.LEFT?(Ue=Math.acos(-En),Be=qsc_fwd_equat_face_theta(Ue,Sn,An,Cn)):(Ue=Be=0,Cn.value=AREA_ENUM.AREA_0)}return We=Math.atan(12/SPI*(Be+Math.acos(Math.sin(Be)*Math.cos(FORTPI))-HALF_PI)),He=Math.sqrt((1-Math.cos(Ue))/(Math.cos(We)*Math.cos(We))/(1-Math.cos(Math.atan(1/Math.cos(Be))))),Cn.value===AREA_ENUM.AREA_1?We+=HALF_PI:Cn.value===AREA_ENUM.AREA_2?We+=SPI:Cn.value===AREA_ENUM.AREA_3&&(We+=1.5*SPI),e.x=He*Math.cos(We),e.y=He*Math.sin(We),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,ke.x=e.x,ke.y=e.y,ke}function inverse$5(ke){var e={lam:0,phi:0},Te,Oe,Be,Ue,He,We,Cn,An,En,Sn={value:0};if(ke.x=(ke.x-this.x0)/this.a,ke.y=(ke.y-this.y0)/this.a,Oe=Math.atan(Math.sqrt(ke.x*ke.x+ke.y*ke.y)),Te=Math.atan2(ke.y,ke.x),ke.x>=0&&ke.x>=Math.abs(ke.y)?Sn.value=AREA_ENUM.AREA_0:ke.y>=0&&ke.y>=Math.abs(ke.x)?(Sn.value=AREA_ENUM.AREA_1,Te-=HALF_PI):ke.x<0&&-ke.x>=Math.abs(ke.y)?(Sn.value=AREA_ENUM.AREA_2,Te=Te<0?Te+SPI:Te-SPI):(Sn.value=AREA_ENUM.AREA_3,Te+=HALF_PI),En=SPI/12*Math.tan(Te),He=Math.sin(En)/(Math.cos(En)-1/Math.sqrt(2)),We=Math.atan(He),Be=Math.cos(Te),Ue=Math.tan(Oe),Cn=1-Be*Be*Ue*Ue*(1-Math.cos(Math.atan(1/Math.cos(We)))),Cn<-1?Cn=-1:Cn>1&&(Cn=1),this.face===FACE_ENUM.TOP)An=Math.acos(Cn),e.phi=HALF_PI-An,Sn.value===AREA_ENUM.AREA_0?e.lam=We+HALF_PI:Sn.value===AREA_ENUM.AREA_1?e.lam=We<0?We+SPI:We-SPI:Sn.value===AREA_ENUM.AREA_2?e.lam=We-HALF_PI:e.lam=We;else if(this.face===FACE_ENUM.BOTTOM)An=Math.acos(Cn),e.phi=An-HALF_PI,Sn.value===AREA_ENUM.AREA_0?e.lam=-We+HALF_PI:Sn.value===AREA_ENUM.AREA_1?e.lam=-We:Sn.value===AREA_ENUM.AREA_2?e.lam=-We-HALF_PI:e.lam=We<0?-We-SPI:-We+SPI;else{var Tn,Ln,Bn;Tn=Cn,En=Tn*Tn,En>=1?Bn=0:Bn=Math.sqrt(1-En)*Math.sin(We),En+=Bn*Bn,En>=1?Ln=0:Ln=Math.sqrt(1-En),Sn.value===AREA_ENUM.AREA_1?(En=Ln,Ln=-Bn,Bn=En):Sn.value===AREA_ENUM.AREA_2?(Ln=-Ln,Bn=-Bn):Sn.value===AREA_ENUM.AREA_3&&(En=Ln,Ln=Bn,Bn=-En),this.face===FACE_ENUM.RIGHT?(En=Tn,Tn=-Ln,Ln=En):this.face===FACE_ENUM.BACK?(Tn=-Tn,Ln=-Ln):this.face===FACE_ENUM.LEFT&&(En=Tn,Tn=Ln,Ln=-En),e.phi=Math.acos(-Bn)-HALF_PI,e.lam=Math.atan2(Ln,Tn),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var ei,ni,ti;ei=e.phi<0?1:0,ni=Math.tan(e.phi),ti=this.b/Math.sqrt(ni*ni+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-ti*ti)/(this.one_minus_f*ti)),ei&&(e.phi=-e.phi)}return e.lam+=this.long0,ke.x=e.lam,ke.y=e.phi,ke}function qsc_fwd_equat_face_theta(ke,e,Te,Oe){var Be;return ke<EPSLN?(Oe.value=AREA_ENUM.AREA_0,Be=0):(Be=Math.atan2(e,Te),Math.abs(Be)<=FORTPI?Oe.value=AREA_ENUM.AREA_0:Be>FORTPI&&Be<=HALF_PI+FORTPI?(Oe.value=AREA_ENUM.AREA_1,Be-=HALF_PI):Be>HALF_PI+FORTPI||Be<=-(HALF_PI+FORTPI)?(Oe.value=AREA_ENUM.AREA_2,Be=Be>=0?Be-SPI:Be+SPI):(Oe.value=AREA_ENUM.AREA_3,Be+=HALF_PI)),Be}function qsc_shift_lon_origin(ke,e){var Te=ke+e;return Te<-3.14159265359?Te+=TWO_PI:Te>3.14159265359&&(Te-=TWO_PI),Te}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(ke,e){return ke[0]+e*(ke[1]+e*(ke[2]+e*ke[3]))},poly3_der=function(ke,e){return ke[1]+e*(2*ke[2]+e*3*ke[3])};function newton_rapshon(ke,e,Te,Oe){for(var Be=e;Oe;--Oe){var Ue=ke(Be);if(Be-=Ue,Math.abs(Ue)<Te)break}return Be}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(ke){var e=adjust_lon(ke.x-this.long0),Te=Math.abs(ke.y),Oe=Math.floor(Te*C1);Oe<0?Oe=0:Oe>=NODES&&(Oe=NODES-1),Te=R2D*(Te-RC1*Oe);var Be={x:poly3_val(COEFS_X[Oe],Te)*e,y:poly3_val(COEFS_Y[Oe],Te)};return ke.y<0&&(Be.y=-Be.y),Be.x=Be.x*this.a*FXC+this.x0,Be.y=Be.y*this.a*FYC+this.y0,Be}function inverse$4(ke){var e={x:(ke.x-this.x0)/(this.a*FXC),y:Math.abs(ke.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=ke.y<0?-HALF_PI:HALF_PI;else{var Te=Math.floor(e.y*NODES);for(Te<0?Te=0:Te>=NODES&&(Te=NODES-1);;)if(COEFS_Y[Te][0]>e.y)--Te;else if(COEFS_Y[Te+1][0]<=e.y)++Te;else break;var Oe=COEFS_Y[Te],Be=5*(e.y-Oe[0])/(COEFS_Y[Te+1][0]-Oe[0]);Be=newton_rapshon(function(Ue){return(poly3_val(Oe,Ue)-e.y)/poly3_der(Oe,Ue)},Be,EPSLN,100),e.x/=poly3_val(COEFS_X[Te],Be),e.y=(5*Te+Be)*D2R$1,ke.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(ke){var e=geodeticToGeocentric(ke,this.es,this.a);return e}function inverse$3(ke){var e=geocentricToGeodetic(ke,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(Te){if(typeof this[Te]>"u")this[Te]=params[Te].def;else{if(params[Te].num&&isNaN(this[Te]))throw new Error("Invalid parameter value, must be numeric "+Te+" = "+this[Te]);params[Te].num&&(this[Te]=parseFloat(this[Te]))}params[Te].degrees&&(this[Te]=this[Te]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var ke=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(ke),this.sw=Math.sin(ke)}function forward$2(ke){ke.x-=this.long0;var e=Math.sin(ke.y),Te=Math.cos(ke.y),Oe=Math.cos(ke.x),Be,Ue;switch(this.mode){case mode.OBLIQ:Ue=this.sinph0*e+this.cosph0*Te*Oe;break;case mode.EQUIT:Ue=Te*Oe;break;case mode.S_POLE:Ue=-e;break;case mode.N_POLE:Ue=e;break}switch(Ue=this.pn1/(this.p-Ue),Be=Ue*Te*Math.sin(ke.x),this.mode){case mode.OBLIQ:Ue*=this.cosph0*e-this.sinph0*Te*Oe;break;case mode.EQUIT:Ue*=e;break;case mode.N_POLE:Ue*=-(Te*Oe);break;case mode.S_POLE:Ue*=Te*Oe;break}var He,We;return He=Ue*this.cg+Be*this.sg,We=1/(He*this.sw*this.h1+this.cw),Be=(Be*this.cg-Ue*this.sg)*this.cw*We,Ue=He*We,ke.x=Be*this.a,ke.y=Ue*this.a,ke}function inverse$2(ke){ke.x/=this.a,ke.y/=this.a;var e={x:ke.x,y:ke.y},Te,Oe,Be;Be=1/(this.pn1-ke.y*this.sw),Te=this.pn1*ke.x*Be,Oe=this.pn1*ke.y*this.cw*Be,ke.x=Te*this.cg+Oe*this.sg,ke.y=Oe*this.cg-Te*this.sg;var Ue=hypot(ke.x,ke.y);if(Math.abs(Ue)<EPSLN)e.x=0,e.y=ke.y;else{var He,We;switch(We=1-Ue*Ue*this.pfact,We=(this.p-Math.sqrt(We))/(this.pn1/Ue+Ue/this.pn1),He=Math.sqrt(1-We*We),this.mode){case mode.OBLIQ:e.y=Math.asin(He*this.sinph0+ke.y*We*this.cosph0/Ue),ke.y=(He-this.sinph0*Math.sin(e.y))*Ue,ke.x*=We*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(ke.y*We/Ue),ke.y=He*Ue,ke.x*=We;break;case mode.N_POLE:e.y=Math.asin(He),ke.y=-ke.y;break;case mode.S_POLE:e.y=-Math.asin(He);break}e.x=Math.atan2(ke.x,ke.y)}return ke.x=e.x+this.long0,ke.y=e.y,ke}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var ke=1-this.es,e=1/ke;this.radius_p=Math.sqrt(ke),this.radius_p2=ke,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(ke){var e=ke.x,Te=ke.y,Oe,Be,Ue,He;if(e=e-this.long0,this.shape==="ellipse"){Te=Math.atan(this.radius_p2*Math.tan(Te));var We=this.radius_p/hypot(this.radius_p*Math.cos(Te),Math.sin(Te));if(Be=We*Math.cos(e)*Math.cos(Te),Ue=We*Math.sin(e)*Math.cos(Te),He=We*Math.sin(Te),(this.radius_g-Be)*Be-Ue*Ue-He*He*this.radius_p_inv2<0)return ke.x=Number.NaN,ke.y=Number.NaN,ke;Oe=this.radius_g-Be,this.flip_axis?(ke.x=this.radius_g_1*Math.atan(Ue/hypot(He,Oe)),ke.y=this.radius_g_1*Math.atan(He/Oe)):(ke.x=this.radius_g_1*Math.atan(Ue/Oe),ke.y=this.radius_g_1*Math.atan(He/hypot(Ue,Oe)))}else this.shape==="sphere"&&(Oe=Math.cos(Te),Be=Math.cos(e)*Oe,Ue=Math.sin(e)*Oe,He=Math.sin(Te),Oe=this.radius_g-Be,this.flip_axis?(ke.x=this.radius_g_1*Math.atan(Ue/hypot(He,Oe)),ke.y=this.radius_g_1*Math.atan(He/Oe)):(ke.x=this.radius_g_1*Math.atan(Ue/Oe),ke.y=this.radius_g_1*Math.atan(He/hypot(Ue,Oe))));return ke.x=ke.x*this.a,ke.y=ke.y*this.a,ke}function inverse$1(ke){var e=-1,Te=0,Oe=0,Be,Ue,He,We;if(ke.x=ke.x/this.a,ke.y=ke.y/this.a,this.shape==="ellipse"){this.flip_axis?(Oe=Math.tan(ke.y/this.radius_g_1),Te=Math.tan(ke.x/this.radius_g_1)*hypot(1,Oe)):(Te=Math.tan(ke.x/this.radius_g_1),Oe=Math.tan(ke.y/this.radius_g_1)*hypot(1,Te));var Cn=Oe/this.radius_p;if(Be=Te*Te+Cn*Cn+e*e,Ue=2*this.radius_g*e,He=Ue*Ue-4*Be*this.C,He<0)return ke.x=Number.NaN,ke.y=Number.NaN,ke;We=(-Ue-Math.sqrt(He))/(2*Be),e=this.radius_g+We*e,Te*=We,Oe*=We,ke.x=Math.atan2(Te,e),ke.y=Math.atan(Oe*Math.cos(ke.x)/e),ke.y=Math.atan(this.radius_p_inv2*Math.tan(ke.y))}else if(this.shape==="sphere"){if(this.flip_axis?(Oe=Math.tan(ke.y/this.radius_g_1),Te=Math.tan(ke.x/this.radius_g_1)*Math.sqrt(1+Oe*Oe)):(Te=Math.tan(ke.x/this.radius_g_1),Oe=Math.tan(ke.y/this.radius_g_1)*Math.sqrt(1+Te*Te)),Be=Te*Te+Oe*Oe+e*e,Ue=2*this.radius_g*e,He=Ue*Ue-4*Be*this.C,He<0)return ke.x=Number.NaN,ke.y=Number.NaN,ke;We=(-Ue-Math.sqrt(He))/(2*Be),e=this.radius_g+We*e,Te*=We,Oe*=We,ke.x=Math.atan2(Te,e),ke.y=Math.atan(Oe*Math.cos(ke.x)/e)}return ke.x=ke.x+this.long0,ke}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$2=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(ke){var e=adjust_lon(ke.x-this.long0),Te=ke.y,Oe=Math.asin(M$2*Math.sin(Te)),Be=Oe*Oe,Ue=Be*Be*Be;return ke.x=e*Math.cos(Oe)/(M$2*(A1+3*A2*Be+Ue*(7*A3+9*A4*Be))),ke.y=Oe*(A1+A2*Be+Ue*(A3+A4*Be)),ke.x=this.a*ke.x+this.x0,ke.y=this.a*ke.y+this.y0,ke}function inverse(ke){ke.x=(ke.x-this.x0)/this.a,ke.y=(ke.y-this.y0)/this.a;var e=1e-9,Te=12,Oe=ke.y,Be,Ue,He,We,Cn,An;for(An=0;An<Te&&(Be=Oe*Oe,Ue=Be*Be*Be,He=Oe*(A1+A2*Be+Ue*(A3+A4*Be))-ke.y,We=A1+3*A2*Be+Ue*(7*A3+9*A4*Be),Oe-=Cn=He/We,!(Math.abs(Cn)<e));++An);return Be=Oe*Oe,Ue=Be*Be*Be,ke.x=M$2*ke.x*(A1+3*A2*Be+Ue*(7*A3+9*A4*Be))/Math.cos(Oe),ke.y=Math.asin(Math.sin(Oe)/M$2),ke.x=adjust_lon(ke.x+this.long0),ke}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var ke;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),ke=Math.cos(this.phi1),this.en),this.am1=ke/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(ke){var e=adjust_lon(ke.x-(this.long0||0)),Te=ke.y,Oe,Be,Ue;return Oe=this.am1+this.m1-pj_mlfn(Te,Be=Math.sin(Te),Ue=Math.cos(Te),this.en),Be=Ue*e/(Oe*Math.sqrt(1-this.es*Be*Be)),ke.x=Oe*Math.sin(Be),ke.y=this.am1-Oe*Math.cos(Be),ke.x=this.a*ke.x+(this.x0||0),ke.y=this.a*ke.y+(this.y0||0),ke}function e_inv(ke){ke.x=(ke.x-(this.x0||0))/this.a,ke.y=(ke.y-(this.y0||0))/this.a;var e,Te,Oe,Be;if(Te=hypot(ke.x,ke.y=this.am1-ke.y),Be=pj_inv_mlfn(this.am1+this.m1-Te,this.es,this.en),(e=Math.abs(Be))<HALF_PI)e=Math.sin(Be),Oe=Te*Math.atan2(ke.x,ke.y)*Math.sqrt(1-this.es*e*e)/Math.cos(Be);else if(Math.abs(e-HALF_PI)<=EPS10)Oe=0;else throw new Error;return ke.x=adjust_lon(Oe+(this.long0||0)),ke.y=adjust_lat(Be),ke}function s_fwd(ke){var e=adjust_lon(ke.x-(this.long0||0)),Te=ke.y,Oe,Be;return Be=this.cphi1+this.phi1-Te,Math.abs(Be)>EPS10?(ke.x=Be*Math.sin(Oe=e*Math.cos(Te)/Be),ke.y=this.cphi1-Be*Math.cos(Oe)):ke.x=ke.y=0,ke.x=this.a*ke.x+(this.x0||0),ke.y=this.a*ke.y+(this.y0||0),ke}function s_inv(ke){ke.x=(ke.x-(this.x0||0))/this.a,ke.y=(ke.y-(this.y0||0))/this.a;var e,Te,Oe=hypot(ke.x,ke.y=this.cphi1-ke.y);if(Te=this.cphi1+this.phi1-Oe,Math.abs(Te)>HALF_PI)throw new Error;return Math.abs(Math.abs(Te)-HALF_PI)<=EPS10?e=0:e=Oe*Math.atan2(ke.x,ke.y)/Math.cos(Te),ke.x=adjust_lon(e+(this.long0||0)),ke.y=adjust_lat(Te),ke}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(ke){ke.Proj.projections.add(tmerc),ke.Proj.projections.add(etmerc),ke.Proj.projections.add(utm),ke.Proj.projections.add(sterea),ke.Proj.projections.add(stere),ke.Proj.projections.add(somerc),ke.Proj.projections.add(omerc),ke.Proj.projections.add(lcc),ke.Proj.projections.add(krovak),ke.Proj.projections.add(cass),ke.Proj.projections.add(laea),ke.Proj.projections.add(aea),ke.Proj.projections.add(gnom),ke.Proj.projections.add(cea),ke.Proj.projections.add(eqc),ke.Proj.projections.add(poly),ke.Proj.projections.add(nzmg),ke.Proj.projections.add(mill),ke.Proj.projections.add(sinu),ke.Proj.projections.add(moll),ke.Proj.projections.add(eqdc),ke.Proj.projections.add(vandg),ke.Proj.projections.add(aeqd),ke.Proj.projections.add(ortho),ke.Proj.projections.add(qsc),ke.Proj.projections.add(robin),ke.Proj.projections.add(geocent),ke.Proj.projections.add(tpers),ke.Proj.projections.add(geos),ke.Proj.projections.add(eqearth),ke.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$y=LoggerByDefault.getLogger("CRS");function register(ke){const e=Object.keys(ke.defs);logger$y.trace("proj. codes :",e);const Te=e.length;let Oe,Be;for(Oe=0;Oe<Te;++Oe){const Ue=e[Oe];if(!get$3(Ue)){const He=ke.defs(Ue);addProjection(new Projection$1({code:Ue,axisOrientation:He.axis,metersPerUnit:He.to_meter,units:He.units}))}}for(Oe=0;Oe<Te;++Oe){const Ue=e[Oe],He=get$3(Ue);for(Be=0;Be<Te;++Be){const We=e[Be],Cn=get$3(We);if(!get$4(Ue,We))if(ke.defs[Ue]===ke.defs[We])addEquivalentProjections([He,Cn]);else{const An=ke(Ue,We);addCoordinateTransforms(He,Cn,An.forward,An.inverse)}}}}var Register={isLoaded:!1,get:function(ke){if(!(ke===""||ke===null||typeof ke>"u")){var e=ke.split(":");if(e.length===2){var Te=e[0],Oe=e[1];if(this.hasOwnProperty(Te)&&this[Te].hasOwnProperty(Oe))return this[Te][Oe]}}},exist:function(ke){if(ke===""||ke===null||typeof ke>"u")return!1;var e=ke.split(":");if(e.length!==2)return!1;var Te=e[0],Oe=e[1];return!(!this.hasOwnProperty(Te)||!this[Te].hasOwnProperty(Oe))},load:function(ke){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],Te=0;Te<e.length;Te++){var Oe=e[Te],Be=this[Oe];for(var Ue in Be)if(Be.hasOwnProperty(Ue)){var He=Oe+":"+Ue;ke.defs(He,this.get(He))}}this.isLoaded=!0}},loadByDefault:function(ke){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var Te in e)if(e.hasOwnProperty(Te)){var Oe=e[Te];for(var Be in Oe)if(Oe.hasOwnProperty(Be)){var Ue=Te+":"+Be;ke.defs(Ue,Oe[Be])}}},loadByName:function(ke,e){if(!this.exist(e))return!1;try{ke.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$x=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$x.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(ke){logger$x.error(ke)}}},loadByDefault:function(){if(logger$x.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(ke){logger$x.error(ke)}}},loadByName:function(ke){if(logger$x.trace("Loading a custom definition projection : ",ke),!Register.isLoaded){Register.loadByName(proj4,ke);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$x.error(e)}}},overload:function(){logger$x.trace("Loading projections aera (extent)");for(var ke in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(ke)){var e=this.projectionsExtent[ke],Te=get$3(ke),Oe=getTransform("EPSG:4326",Te),Be=applyTransform([e.bottom,e.right,e.top,e.left],Oe);Te.setExtent(Be),addProjection(Te),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(Te)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterTMS=!0,m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async ke=>{clear(),controller=new AbortController;let e=new URL(m_url),Te={text:ke,fields:m_fields,size:m_size};Object.keys(Te).forEach(Cn=>e.searchParams.append(Cn,Te[Cn]));var Oe=await fetch(e,{}),Be=await Oe.json();if(Oe.status!==200)throw new Error(Oe.message);if(!(!Be||Be.length===0)){for(let Cn=0;Cn<Be.length;Cn++){const An=Be[Cn];m_filterByLayerPriority.findIndex(Sn=>Sn.includes(An.source.layer_name))>=0&&(Be[Cn].score+=100)}Be.sort((Cn,An)=>An.score-Cn.score);var Ue=null;m_filterWMTSPriority&&(Ue=inventory(Be));for(let Cn=0;Cn<Be.length;Cn++){const An=Be[Cn];var He=m_filterByService.length===0||m_filterByService.includes(An.source.type);if(He){if(unique().length>=m_maximumResponses)break;var We={attribution:An.source.attribution||{},srs:An.source.srs||[],keywords:An.source.keywords||[],extent:An.source.extent||{},metadata:An.source.metadata_urls||[],name:An.source.layer_name||"",title:An.source.title||"",description:An.source.description,service:An.source.type||"",url:An.source.url||"",tech:An.source.tech||{},tags:An.source.tags||{},theme:An.source.theme||"",producer:An.source.producer||""};if(m_filterByProjection.length&&m_filterByProjection.includes(We.srs[0])||Ue&&Ue[We.name]&&We.service==="WMS"||We.service==="TMS"&&(We.styles=!1,We.metadata.length!==0&&/(\.json)$/i.test(We.metadata[0])&&(We.styles=!0),!We.styles&&m_filterTMS)||We.service==="WMTS"&&We.metadata.length!==0&&/(.json)$/i.test(We.metadata[0])&&m_filterTMS===!0)continue;m_suggestions.push(We)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((ke,e,Te)=>e===Te.findIndex(Oe=>Oe.service===ke.service&&Oe.name===ke.name&&Oe.title===ke.title&&Oe.description===ke.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=ke=>{var e={};for(let Te=0;Te<ke.length;Te++){const Oe=ke[Te].source.type,Be=ke[Te].source.layer_name;(Oe==="WMTS"||Oe==="WMS")&&(e[Be]===void 0&&(e[Be]=Oe==="WMTS"),e[Be]||(e[Be]=Oe==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(ke=>ke.name),getTitles=()=>unique().map(ke=>ke.title),setIndex=ke=>{m_index=ke},setFields=ke=>{m_fields=ke},setSuggestions=ke=>{m_suggestions=ke},setSize=ke=>{m_size=parseInt(ke)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=ke=>{m_maximumResponses=parseInt(ke)},setFiltersByService=ke=>{m_filterByService=ke===""?[]:ke.split(",")},setFiltersByProjection=ke=>{m_filterByProjection=ke===""?[]:ke.split(",")},setFiltersByLayerPriority=ke=>{m_filterByLayerPriority=ke===""?[]:ke.split(",")},setFilterWMTSPriority=ke=>{m_filterWMTSPriority=ke},setFilterTMS=ke=>{m_filterTMS=ke},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSuggestions,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority,setFilterTMS};var SearchEngineDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPsearchEngine"),ke.className="GPwidget gpf-widget",ke},_createSearchDivElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPshowSearchDiv"),ke},_createShowSearchEnginePictoElement:function(ke){var e=this;checkDsfr()&&(ke=!0);var Te=document.createElement("button");return Te.id=this._addUID("GPshowSearchEnginePicto"),Te.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",Te.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(Te.title="Rechercher"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!ke),Te.disabled=!ke,Te.setAttribute("type","button"),Te.addEventListener("click",function(Oe){if(checkDsfr()){var Be=document.getElementById(e._addUID("GPautocompleteResults")),Ue=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),He=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),We=He.length;if(!We)return;var Cn=null;Ue.length?Cn=Ue[0]:(Cn=He[0],Cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Cn.style.color="#000000",Cn.style["background-color"]="#CEDBEF"),Cn.click();return}var An=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!An),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var En=document.getElementById(e._addUID("GPshowAdvancedSearch"));En&&(En.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var Sn=document.getElementById(e._addUID("GPshowGeolocate"));Sn&&(Sn.style.display=null);var Tn=document.getElementById(e._addUID("GPshowSearchByCoordinate"));Tn&&(Tn.style.display=null);var Ln="#GPsearchInput-"+e._uid;document.querySelector(Ln+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(Oe)}),Te},_createSearchInputElement:function(ke){var e=this,Te=document.createElement("form");Te.id=this._addUID("GPsearchInput"),Te.className="gpf-panel__content fr-modal__content",Te.addEventListener("submit",function(Be){return Be.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(Be)),!1});var Oe=document.createElement("input");return Oe.id=this._addUID("GPsearchInputText"),Oe.className="GPsearchInputText gpf-input fr-input",Oe.type="text",Oe.placeholder=ke,Oe.autocomplete="off",Oe.addEventListener("keyup",function(Be){var Ue=Be.which||Be.keyCode;Ue===13||Ue===10||Ue===38||Ue===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Oe.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Be))}),Oe.addEventListener("keydown",function(Be){var Ue=Be.which||Be.keyCode;Ue===13&&Be.preventDefault();var He=document.getElementById(e._addUID("GPautocompleteResults"));if(He){var We=He.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Cn=He.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),An=Cn.length;if(An){var En=null;if(We.length)En=We[0];else if(En=Cn[0],En.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",En.style.color="#000000",En.style["background-color"]="#CEDBEF",Ue!==13)return;var Sn=parseInt(SelectorID.index(En.id),10),Tn=Sn===An-1?Cn[0]:Cn[Sn+1],Ln=Sn===0?Cn[An-1]:Cn[Sn-1];switch(En.style["background-color"]="",En.style.color="",Ln.style["background-color"]="",Ln.style.color="",Tn.style["background-color"]="",Tn.style.color="",Ue){case 38:En.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Ln.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Ln.style.color="#000000",Ln.style["background-color"]="#CEDBEF",En.scrollIntoView();break;case 40:En.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Tn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Tn.style.color="#000000",Tn.style["background-color"]="#CEDBEF",En.scrollIntoView();break;case 13:Be.preventDefault(),En.click(Be);break}En.focus()}}}),Te.appendChild(Oe),Te},_createSearchResetElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(Te){document.getElementById(ke._addUID("GPsearchInputText")).value="",document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),ke.onSearchResetClick()}),e},_createButtonsElement:function(){var ke=document.createElement("div");return ke.className="GPbuttonsContainer",ke},_createFirstLineWrapper:function(){var ke=document.createElement("div");return ke.className="GPsearchFirstLineWrapper",ke},_createRadioContainer:function(){var ke=document.createElement("div");return ke.className="GPsearchRadioContainer",ke},_createRadioElements:function(){var ke=document.createElement("div");ke.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Te=document.createElement("input");Te.id=this._addUID("GPsearchSplitLocations"),Te.type="radio",Te.name="GPsearchSplit",Te.value="address",Te.checked=!0,e.appendChild(Te);var Oe=document.createElement("label");Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GPsearchSplitLocations"),Oe.title="Adresses",Oe.innerHTML="Adresses",e.appendChild(Oe),Te.addEventListener?Te.addEventListener("change",function(){Te.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):Te.attachEvent&&Te.attachEvent("onchange",function(){Te.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var Be=document.createElement("div");Be.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ue=document.createElement("input");Ue.id=this._addUID("GPsearchSplitData"),Ue.type="radio",Ue.name="GPsearchSplit",Ue.value="data",Be.appendChild(Ue);var He=document.createElement("label");return He.className="gpf-label fr-label",He.htmlFor=this._addUID("GPsearchSplitData"),He.title="Cartes et donnes",He.innerHTML="Cartes et donnes",Be.appendChild(He),Ue.addEventListener?Ue.addEventListener("change",function(){Ue.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Ue.attachEvent&&Ue.attachEvent("onchange",function(){Ue.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),ke.appendChild(e),ke.appendChild(Be),[ke,Te,Ue]},_createShowAdvancedSearchElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowAdvancedSearch GPshowOpen gpf-btn gpf-btn-icon-search-advanced fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe);var Be="#GPsearchInput-"+ke._uid;Oe?(document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1)):(document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Be+" input").disabled=!0,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!0)),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la golocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe),ke.onShowSearchGeolocateClick(Te)}),e},_createShowSearchByCoordinateElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnes",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe);var Be="#GPsearchInput-"+ke._uid;Oe?(document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1)):(document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Be+" input").disabled=!0,document.querySelector(Be+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!0)),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPadvancedSearchPanel"),ke.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",ke},_createAdvancedSearchPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createGeocodeResultsElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPgeocodeResultsList"),ke.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",ke},_createGeocodeResultsDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke.appendChild(this._createGeocodeResultsHeaderElement()),ke},_createAutoCompleteElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPautoCompleteList"),ke.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",ke},_createCoordinateSearchPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPcoordinateSearchPanel"),ke.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",ke},_createCoordinateSearchPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createAutoCompleteListElement:function(){var ke=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(Te){document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(Te){document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var ke=document.createElement("div");return ke.id=this._addUID("GPautocompleteResultsLocation"),ke.className="GPelementHidden gpf-hidden gpf-select",ke.size=20,ke.autofocus=!0,ke},_createAutoCompletedLocationTitleElement(){var ke=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-loc",e.innerHTML="Lieux et adresses",ke.appendChild(e)},_createAutoCompletedLocationElement:function(ke,e){var Te=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsLocation")),Be=document.createElement("p");Be.id=this._addUID("AutoCompletedLocation_"+e),Be.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Ue=GeocodeUtils.getSuggestedLocationFreeform(ke);Be.innerHTML=Ue,Be.title=Ue,Be.addEventListener?Be.addEventListener("click",function(He){Te.onAutoCompletedResultsItemClick(He)},!1):Be.attachEvent&&Be.attachEvent("onclick",function(He){Te.onAutoCompletedResultsItemClick(He)}),Oe.appendChild(Be)},_createSearchedSuggestContainer(){var ke=document.createElement("div");return ke.id=this._addUID("GPautocompleteResultsSuggest"),ke.className="GPelementHidden gpf-hidden gpf-select",ke.size=6,ke.autofocus=!0,ke},_createSearchedSuggestTitleElement(){var ke=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-data",e.innerHTML="Cartes et donnes",ke.appendChild(e)},_createSearchedSuggestElement:function(ke,e){var Te=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),Be=document.createElement("p");Be.id=this._addUID("AutoCompletedSuggest_"+e),Be.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Be.innerHTML=ke.title+" ("+ke.service+")",Be.dataset.layer=ke.name,Be.title=`${ke.description} (nom technique : ${ke.name})`,Be.addEventListener?Be.addEventListener("click",function(Ue){Te.onSearchedResultsItemClick(Ue)},!1):Be.attachEvent&&Be.attachEvent("onclick",function(Ue){Te.onSearchedResultsItemClick(Ue)}),Oe.appendChild(Be)},_createAdvancedSearchPanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Recherche avance",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GPadvancedSearchClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche avance",Oe.addEventListener?Oe.addEventListener("click",function(){var Ue="#GPsearchInput-"+ke._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Ue="#GPsearchInput-"+ke._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(ke._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createAdvancedSearchPanelFormElement:function(ke){var e=this,Te=document.createElement("form");Te.id=this._addUID("GPadvancedSearchForm"),Te.className="gpf-panel__content fr-modal__content",Te.addEventListener("submit",function(He){He.preventDefault();for(var We=[],Cn="#GPadvancedSearchFilters-"+e._uid,An=document.querySelectorAll(Cn+" > div > div > input,select#category"),En=0;En<An.length;En++){var Sn=An[En];We.push({key:Sn.name,value:Sn.value})}return e.onGeocodingAdvancedSearchSubmit(He,We),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var Oe=document.createElement("div");Oe.className="GPflexInput gpf-flex-column ";var Be=document.createElement("label");Be.className="GPadvancedSearchCodeLabel gpf-label fr-label",Be.innerHTML="Recherche par",Oe.appendChild(Be);var Ue=this._createAdvancedSearchFormCodeElement(ke);return Oe.appendChild(Ue),Te.appendChild(Oe),Te},_createAdvancedSearchFormCodeElement:function(ke){var e=this,Te=document.createElement("select");Te.id=this._addUID("GPadvancedSearchCode"),Te.title="Choisir un type de recherche",Te.className="GPadvancedSearchCode gpf-select fr-select",Te.addEventListener("change",function(Ue){e.onGeocodingAdvancedSearchCodeChange(Ue)},!1),ke||(ke=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var Oe=0;Oe<ke.length;Oe++){var Be=document.createElement("option");Be.value=ke[Oe].id,Be.text=ke[Oe].title,Te.appendChild(Be)}return Te},_createAdvancedSearchFormInputElement:function(){var ke=document.createElement("input");return ke.type="submit",ke.id=this._addUID("GPadvancedSearchSubmit"),ke.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",ke.value="Chercher",ke},_createAdvancedSearchFormFiltersElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPadvancedSearchFilters"),ke},_createAdvancedSearchFiltersTableElement:function(ke,e){var Te=document.createElement("div");return Te.id=this._addUID(ke),e||(Te.style.display="none"),Te},_createAdvancedSearchFiltersAttributElement:function(ke){var e=null,Te=ke.name,Oe=ke.title,Be=ke.description,Ue=ke.code,He=ke.value,We=document.createElement("div");We.className="GPflexInput gpf-flex-column ";var Cn=document.createElement("label");if(Cn.className="GPadvancedSearchFilterLabel gpf-label fr-label",Cn.htmlFor=Te,Cn.title=Be||Oe,Cn.innerHTML=Oe,We.appendChild(Cn),Te==="category"){var An=document.createElement("select");if(An.id=Te,An.name=Te,An.title=Oe,An.className="GPadvancedSearchFilterInput gpf-select fr-select",He&&Array.isArray(He))for(var En=0;En<He.length;En++){var Sn=document.createElement("option");Sn.value=He[En],Sn.text=He[En],An.appendChild(Sn)}We.appendChild(An)}else{var Tn=document.createElement("input");if(Tn.id=Te,Tn.className="GPadvancedSearchFilterInput gpf-input fr-input",Tn.type="text",Tn.name=Te,He)if(Array.isArray(He)){var Ln=Te+"_list";Tn.setAttribute("list",Ln);var Bn=document.createElement("datalist");Bn.id=Ln;for(var En=0;En<He.length;++En){var Sn=document.createElement("option");Sn.value=He[En],Bn.appendChild(Sn)}We.appendChild(Bn)}else Tn.value=He;We.appendChild(Tn)}return e=document.getElementById(this._addUID(Ue)),e?e.appendChild(We):e=We,e},_createGeocodeResultsHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Rsultats de la recherche",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GPgeocodeResultsClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la fentre de rsultats",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createGeocodeResultsListElement:function(){var ke=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(Te){Te.ctrlKey||(document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),ke.onGeocodedResultsItemClick(Te)},!1):e.attachEvent&&e.attachEvent("onclick",function(Te){Te.ctrlKey||(document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),ke.onGeocodedResultsItemClick(Te)}),e},_createGeocodedLocationElement:function(ke,e){var Te=document.getElementById(this._addUID("GPgeocodeResults")),Oe=document.createElement("div");Oe.id=this._addUID("GeocodedLocation_"+e),Oe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof ke=="string"?Oe.innerHTML=ke:Oe.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(ke),Te.appendChild(Oe)},_createCoordinateSearchPanelHeaderElement(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Recherche par coordonnes",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GPcoordinateSearchClose"),Oe.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche par coordonnes",Oe.addEventListener?Oe.addEventListener("click",function(){var Ue="#GPsearchInput-"+ke._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1),document.getElementById(ke._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),ke.onCoordinateSearchClose()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Ue="#GPsearchInput-"+ke._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+ke._uid).disabled=!1),document.getElementById(ke._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),ke.onCoordinateSearchClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createCoordinateSearchPanelFormElement(){var ke=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(Te){return Te.preventDefault(),ke.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var ke=document.createElement("div");return ke.className="GPflexInput gpf-flex-column ",ke},_createCoordinateSearchSystemsLabelElement(){var ke=document.createElement("label");return ke.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",ke.innerHTML="Systme de rfrence",ke},_setCoordinateSearchSystemsSelectElement(ke){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,Te=document.createElement("select");Te.id=this._addUID("GPcoordinateSearchSystem"),Te.title="Choisir un systme de rference",Te.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onCoordinateSearchSystemChange(He)});for(var Oe=0;Oe<ke.length;Oe++){var Be=ke[Oe],Ue=document.createElement("option");Ue.value=Be.code,Ue.text=Be.label||Oe,Te.appendChild(Ue)}return Te},_createCoordinateSearchUnitsLabelElement(){var ke=document.createElement("label");return ke.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",ke.innerHTML="Units",ke},_setCoordinateSearchUnitsSelectElement(ke){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,Te=document.createElement("select");Te.id=this._addUID("GPcoordinateSearchUnits"),Te.title="Choisir un type d'unit",Te.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onCoordinateSearchUnitsChange(He)});for(var Oe=0;Oe<ke.length;Oe++){var Be=ke[Oe],Ue=document.createElement("option");Ue.value=Be.code?Be.code:Oe,Ue.text=Be.label||Oe,Te.appendChild(Ue)}return Te},_setCoordinateSearchLngLabelElement(ke){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=ke==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(ke){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",ke){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLngDMSElement(){var ke=document.createElement("div");return ke.id=this._addUID("GPcoordinateSearchLngDMS"),ke.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degr entre 0 et 180"
                type="number"
                required=""
                min="0"
                max="180">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,ke},_setCoordinateSearchLatLabelElement(ke){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=ke==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(ke){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",ke){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLatDMSElement(){var ke=document.createElement("div");return ke.id=this._addUID("GPcoordinateSearchLatDMS"),ke.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degr entre 0 et 85"
                type="number"
                required=""
                min="0"
                max="85">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,ke},_createCoordinateSearchSubmitElement(){var ke=document.createElement("input");return ke.type="submit",ke.id=this._addUID("GPcoordinateSearchSubmit"),ke.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",ke.value="Chercher",ke}},logger$w=LoggerByDefault.getLogger("searchengine"),SearchEngine=class Xf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$w.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,maximumEntries:5,serviceOptions:{maximumResponses:10},filterLayers:!0},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!1},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterTMS===!1&&Search$1.setFilterTMS(this.options.searchOptions.filterTMS),this.options.searchOptions.filterProjections&&Search$1.setFiltersByProjection(this.options.searchOptions.filterProjections)),Search$1.target.addEventListener("suggest",Be=>{logger$w.debug(Be);let Ue=Be.detail;Ue=this._filterResultsFromConfigLayers(Ue),this._fillSearchedSuggestListContainer(Ue)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var Te=this.options.markerStyle,Oe=this.options.markerUrl;Oe?this._markerUrl=Oe:this._markerUrl=Object.keys(Marker).indexOf(Te)===-1?Marker.lightOrange:Marker[Te],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var Te;if(e.resources)if(typeof e.resources=="object"){var Oe=e.resources.geocode;if(Oe)if(Array.isArray(Oe)){var Be=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(Te=0;Te<Oe.length;Te++)Be.indexOf(Oe[Te])===-1&&logger$w.log("[SearchEngine] options.resources.geocode : "+Oe[Te]+" is not a resource for geocode")}else logger$w.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),Oe=null;var Ue=e.resources.autocomplete;if(Ue)if(Array.isArray(Ue)){var He=["StreetAddress","PositionOfInterest"];for(Te=0;Te<Ue.length;Te++)He.indexOf(Ue[Te])===-1&&logger$w.log("[SearchEngine] options.resources.autocomplete : "+Ue[Te]+" is not a resource for autocomplete")}else logger$w.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Ue=null}else logger$w.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var Te=0;Te<e.length;Te++)switch(e[Te]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$w.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$w.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Gographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],Te=this.options.coordinateSearch.systems;if(Te)for(var Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];this._setSystem(Be)}if(this._coordinateSearchSystems.length===0)for(var Ue=0;Ue<e.length;Ue++)this._setSystem(e[Ue])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrs dcimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrs sexagsimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mtres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomtres",format:MathUtils.coordinateToKMeter}]},Te=this.options.coordinateSearch.units;if(Te){for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var Be=!1,Ue=0;Ue<e[Oe].length;Ue++)for(var He=e[Oe][Ue],We=0;We<Te.length;We++){var Cn=Te[We];He.code===Cn&&(Be=!0,this._coordinateSearchUnits[Oe]||(this._coordinateSearchUnits[Oe]=[]),this._coordinateSearchUnits[Oe].push(He))}Be||(this._coordinateSearchUnits[Oe]=e[Oe])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div gpf-widget-color";var Oe=document.createElement("button");return Oe.title="Fermer la pop-up",Oe.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",Te.appendChild(this._popupContent),Te.appendChild(Oe),Te}_initContainer(){var e=this._createMainContainerElement(),Te=this._createSearchDivElement(),Oe=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);Te.appendChild(Oe),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var Be=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&Be.appendChild(this._createSearchResetElement());var Ue=this;Be.addEventListener?Be.addEventListener("click",function(){Ue.onAutoCompleteInputClick()}):Be.attachEvent&&Be.attachEvent("onclick",function(){Ue.onAutoCompleteInputClick()}),Te.appendChild(Be);var He=this._createButtonsElement(),We=this._createFirstLineWrapper();if(We.appendChild(Te),We.appendChild(He),e.appendChild(We),checkDsfr()&&this.options.splitResults){var Cn=this._createRadioContainer();e.appendChild(Cn)}if(checkDsfr()&&this.options.splitResults){var An;[An,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),Cn.appendChild(An)}if(this.options.displayButtonGeolocate){var En=this._createShowGeolocateElement();He.appendChild(En)}if(this.options.displayButtonCoordinateSearch){var Sn=this._createShowSearchByCoordinateElement();He.appendChild(Sn);var Tn=this._createCoordinateSearchPanelElement(),Ln=this._createCoordinateSearchPanelDivElement(),Bn=this._createCoordinateSearchPanelHeaderElement(),ei=this._createCoordinateSearchPanelFormElement(),ni=null;ni=this._containerSystems=this.__createCoordinateSearchDivElement(),ei.appendChild(ni);var ti=this._createCoordinateSearchSystemsLabelElement(),ri=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);ni.appendChild(ti),ni.appendChild(ri),ni=this._containerUnits=this.__createCoordinateSearchDivElement(),ei.appendChild(ni);var oi=this._createCoordinateSearchUnitsLabelElement(),ai=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);ni.appendChild(oi),ni.appendChild(ai),ni=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),ei.appendChild(ni);var ci=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Pi=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);ni.appendChild(ci),ni.appendChild(Pi),ni=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),ei.appendChild(ni);var vi=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),pi=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);ni.appendChild(vi),ni.appendChild(pi);var Mi=this._createCoordinateSearchSubmitElement();ei.appendChild(Mi),Ln.appendChild(Bn),Ln.appendChild(ei),Tn.appendChild(Ln),e.appendChild(Tn)}if(this.options.displayButtonAdvancedSearch){var Fi=this._createShowAdvancedSearchElement();He.appendChild(Fi);var fi=this._createAdvancedSearchPanelElement(),ui=this._createAdvancedSearchPanelDivElement(),Oi=this._createAdvancedSearchPanelHeaderElement(),Ni=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),nr=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var er=this._createAdvancedSearchFormInputElement();Ni.appendChild(nr),Ni.appendChild(er),ui.appendChild(Oi),ui.appendChild(Ni),fi.appendChild(ui),e.appendChild(fi)}var cr=this._autocompleteContainer=this._createAutoCompleteElement(),ar=this._createAutoCompleteListElement(),pr=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),rr=this._containerResultsSuggest=this._createSearchedSuggestContainer();ar.appendChild(pr),ar.appendChild(rr),cr.appendChild(ar),e.appendChild(cr);var br=this._createGeocodeResultsElement(),Li=this._createGeocodeResultsDivElement();br.appendChild(Li);var ur=this._geocodedContainer=this._createGeocodeResultsListElement();return Li.appendChild(ur),e.appendChild(br),e}_setFilter(e){for(var Te=this._filterContainer,Oe=!1,Be=0;Be<this._advancedSearchCodes.length;Be++)if(this._advancedSearchCodes[Be].id===e){Oe=!0;break}if(!Oe){for(;Te.firstChild;)Te.removeChild(Te.firstChild);return}for(this._currentGeocodingCode=e;Te.firstChild;)Te.removeChild(Te.firstChild);var Ue=this._advancedSearchFilters[e];if(!(!Ue||Ue.length===0)){for(var He=this._createAdvancedSearchFiltersTableElement(e,!0),We=0;We<Ue.length;We++){var Cn=this._createAdvancedSearchFiltersAttributElement(Ue[We]);He.appendChild(Cn)}return Te.appendChild(He),Te}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$w.log(e);var Te={};Helper.assign(Te,this.options.autocompleteOptions.serviceOptions),Helper.assign(Te,e);var Oe=this.options.resources.autocomplete;Oe&&Array.isArray(Oe)&&(Te.type||(Te.type=Oe)),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$w.log(Te),Gp.Services.autoComplete(Te)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var Te=this._containerResultsLocation;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);if(Te.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&Te.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var Oe=0;Oe<e.length;Oe++)this._createAutoCompletedLocationElement(e[Oe],Oe)}}}_fillSearchedSuggestListContainer(e){this.options.searchOptions.maximumEntries&&(e=e.slice(0,this.options.searchOptions.maximumEntries));var Te=this._containerResultsSuggest;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);if(Te.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&Te.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let Oe=0;Oe<e.length;Oe++){const Be=e[Oe];this._createSearchedSuggestElement(Be,Oe)}}}_filterResultsFromConfigLayers(e){if(this.options.searchOptions.filterLayers){var Te={};if(this.options.searchOptions.filterLayersList)Te=this.options.searchOptions.filterLayersList;else{var Oe=window.Gp.Config.layers;for(let Ue in Oe)Oe.hasOwnProperty(Ue)&&(Te[Oe[Ue].name]=Oe[Ue].serviceParams.id.split(":")[1])}let Be=e.length;for(;Be--;)(!Te[e[Be].name]||e[Be].service.toUpperCase()!==Te[e[Be].name].toUpperCase())&&e.splice(Be,1)}return Search$1.setSuggestions(e),e}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$w.log(e);var Te={};Helper.assign(Te,this.options.geocodeOptions.serviceOptions),Helper.assign(Te,e);var Oe=this,Be=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Ue=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Ue){var He=function(An){e.onSuccess.call(Oe,An),Oe.options.geocodeOptions.serviceOptions.onSuccess.call(Oe,An)};Te.onSuccess=He}if(Be){var We=function(An){e.onFailure.call(Oe,An),Oe.options.geocodeOptions.serviceOptions.onFailure.call(Oe,An)};Te.onFailure=We}var Cn=this.options.resources.geocode;Cn&&(Te.index||(Te.index=Cn)),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$w.log(Te),Gp.Services.geocode(Te)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var Te=this._geocodedContainer;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);for(var Oe=0;Oe<e.length;Oe++)logger$w.log(e[Oe]),this._createGeocodedLocationElement(e[Oe],Oe);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,Te){var Oe=this.getMap().getView();Oe.setCenter(e),Oe.setZoom(Te)}_setMarker(e,Te){var Oe=this.getMap(),Be=this;if(this._marker!=null&&(Oe.removeOverlay(this._marker),this._marker=null),e){var Ue=document.createElement("img");Ue.src=this._markerUrl,Ue.addEventListener?Ue.addEventListener("click",function(){Be._onResultMarkerSelect(Te)}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){Be._onResultMarkerSelect(Te)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Ue,stopEvent:!1}),Oe.addOverlay(this._marker)}}_getZoom(e){var Te=this.getMap(),Oe=this.options.zoomTo,Be=null;if(typeof Oe=="function"&&(logger$w.trace("zoom function"),Be=Oe.call(this,e)),typeof Oe=="number"&&(logger$w.trace("zoom level"),Be=Oe),typeof Oe=="string")if(Oe==="auto")logger$w.trace("zoom auto"),Be=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$w.trace("zoom level parsing");var Ue=parseInt(Oe,10);isNaN(Ue)||(logger$w.trace("zoom parsing"),Be=Ue)}Number.isInteger=Number.isInteger||function(Cn){return typeof Cn=="number"&&isFinite(Cn)&&Math.floor(Cn)===Cn},(!Be||Be===""||!Number.isInteger(Be))&&(logger$w.trace("zoom not found, current zoom..."),Be=Te.getView().getZoom());var He=Te.minZoom,We=Te.maxZoom;return Be<He&&(logger$w.trace("zoom level min..."),Be=He),Be>We&&(logger$w.trace("zoom level max..."),Be=We),logger$w.trace("zoom",Be),Be}_onResultMarkerSelect(e){var Te=this.getMap(),Oe="";if(typeof e!="string")if(e.service==="GeocodedLocation"){Oe="<ul>";var Be=e.location.placeAttributes;for(var Ue in Be)Be.hasOwnProperty(Ue)&&Ue!=="trueGeometry"&&Ue!=="extraFields"&&Ue!=="houseNumberInfos"&&Ue!=="_count"&&(Oe+="<li>",Oe+='<span class="gp-attname-others-span">'+Ue.toUpperCase()+" : </span>",Oe+=Be[Ue],Oe+=" </li>");Oe+=" </ul>"}else e.service==="SuggestedLocation"?Oe=GeocodeUtils.getSuggestedLocationFreeform(e.location):Oe="sans informations.";else Oe=e;this._popupContent.innerHTML=Oe,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),Te.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$w.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$w.error("crs not defined !");return}if(e.label||(logger$w.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$w.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$w.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var Te=0;Te<this._coordinateSearchSystems.length;Te++){var Oe=this._coordinateSearchSystems[Te];e.crs===Oe.crs&&logger$w.info("crs '{}' already configured",Oe.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var Oe=this._showSearchEngineButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var Te=this.getMap().getView(),Oe=Te.getProjection().getCode(),Be=[e.coords.longitude,e.coords.latitude],Ue;if(Oe!=="EPSG:4326"?Ue=transform$1(Be,"EPSG:4326",Oe):Ue=Be,isNaN(Ue[0])||isNaN(Ue[1])){this._setMarker();return}if(this._setPosition(Ue,15),this._displayMarker){var He="<h6> Ma position </h6> longitude : "+Be[0]+"<br/> latitude : "+Be[1];this._setMarker(Ue,He)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Ue})})}onShowSearchByCoordinateClick(){var e=null,Te=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),Te=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,Te=this._coordinateSearchLatInput.value),!(!e||!Te)){var Oe=[e,Te],Be=this.getMap().getView(),Ue=Be.getProjection().getCode();if(Ue!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",Ue)),isNaN(Oe[0])||isNaN(Oe[1])){this._setMarker();return}this._setPosition(Oe,10),this._displayMarker&&this._setMarker(Oe,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:Oe})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var Te=e.querySelectorAll("[name]");if(Te){var Oe=MathUtils.toInteger(Te[0].value),Be=MathUtils.toInteger(Te[1].value),Ue=MathUtils.toInteger(Te[2].value),He=Te[3].options[Te[3].selectedIndex].text;return!Oe||!Be||!Ue||!He?void 0:MathUtils.dmsToDecimal(Oe,Be,Ue,He)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var Te=e.target.value;if(Te){if(this._currentGeocodingLocation=Te,Te.length<3){this._clearSuggestedLocation();return}var Oe=this.options.autocompleteOptions.triggerGeocode,Be=this.options.autocompleteOptions.triggerDelay,Ue=this.options.autocompleteOptions.maximumEntries,He=this.options.autocompleteOptions.prettifyResults,We=this;this._requestAutoComplete({text:Te,onSuccess:function(An){if(logger$w.log("request from AutoComplete",An),An){We._suggestedLocations=An.suggestedLocations,We._locationsToBeDisplayed=[];for(var En=0;En<We._suggestedLocations.length;En++){var Sn=We._suggestedLocations[En];Sn.position&&Sn.position.x===0&&Sn.position.y===0&&Sn.fullText?We._getGeocodeCoordinatesFromFullText(Sn,En):We._locationsToBeDisplayed.push(Sn)}He===!0&&We._prettifyAutocompleteResults(We._locationsToBeDisplayed),Ue&&(We._locationsToBeDisplayed=We._locationsToBeDisplayed.slice(0,Ue)),We._fillAutoCompletedLocationListContainer(We._locationsToBeDisplayed),We._triggerHandler&&(clearTimeout(We._triggerHandler),We._triggerHandler=null,logger$w.warn("Cancel a geocode request !"))}},onFailure:function(An){We._clearSuggestedLocation(),logger$w.log(An.message),An.message==="No suggestion matching the search"&&Oe&&(We._triggerHandler&&(clearTimeout(We._triggerHandler),logger$w.warn("Cancel the last geocode request !")),We._triggerHandler=setTimeout(function(){logger$w.warn("Launch a geocode request !"),We._requestGeocoding({location:Te,onSuccess:function(En){if(logger$w.log("request from Geocoding",En),En){We._locationsToBeDisplayed=[];for(var Sn=En.locations,Tn=0;Tn<Sn.length;Tn++){var Ln=Sn[Tn];Ln.fullText=GeocodeUtils.getGeocodedLocationFreeform(Ln),Ln.position={x:Ln.position.lon,y:Ln.position.lat},We._locationsToBeDisplayed.push(Ln)}We._fillAutoCompletedLocationListContainer(Sn)}},onFailure:function(En){logger$w.log(En.message)}})},Be))}}),this.options.resources.search&&Search$1.suggest(Te);var Cn=this.getMap();Cn.on("click",this._hideSuggestedLocation,this),Cn.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,Te){var Oe=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(Be){logger$w.log("request from Geocoding (coordinates null)",Be),Be.locations&&Be.locations.length!==0&&Be.locations[0].position&&Oe._suggestedLocations&&Oe._suggestedLocations[Te]&&(Oe._suggestedLocations[Te].position={lon:Be.locations[0].position.y,lat:Be.locations[0].position.x},Oe._locationsToBeDisplayed.unshift(Oe._suggestedLocations[Te]),Oe._fillAutoCompletedLocationListContainer(Oe._locationsToBeDisplayed))},onFailure:function(){Oe._suggestedLocations&&Oe._suggestedLocations[Te]&&Oe._createAutoCompletedLocationElement(Oe._suggestedLocations[Te],Te)}})}onAutoCompletedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(logger$w.log(Te),logger$w.log(this._locationsToBeDisplayed[Te]),!!Te){var Oe=[this._locationsToBeDisplayed[Te].position.x,this._locationsToBeDisplayed[Te].position.y],Be={service:"SuggestedLocation",location:this._locationsToBeDisplayed[Te]},Ue=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[Te]);this._setLabel(Ue),this._currentGeocodingLocation=Ue;var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",We));var Cn=this._getZoom(Be);this._setPosition(Oe,Cn),this._displayMarker&&this._setMarker(Oe,Be),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[Te]})}}onSearchedResultsItemClick(e){var Te=SelectorID.index(e.target.id),Oe=null;try{var Be=Search$1.getSuggestions()[Te];if(!Be)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Ue=Be.service,He=Be.name,We=null;switch(Ue){case"WMS":We=new LayerWMS({layer:He});break;case"WMTS":We=new LayerWMTS({layer:He});break;case"WFS":We=new LayerWFS({layer:He});break;case"TMS":We=new LayerMapBox({layer:He},{declutter:!0});default:break}if(We){var Cn=this.getMap();Cn.addLayer(We)}}}catch(An){Oe=An}this.dispatchEvent({type:"searchengine:search:click",suggest:Be,error:Oe})}onGeocodingSearchSubmit(e){var Te=e.target[0].value;if(Te){this._currentGeocodingLocation=Te;var Oe=this;this._requestGeocoding({query:Te,onSuccess:function(Be){if(logger$w.log("request from Geocoding",Be),Be){var Ue=Be.locations;Oe._fillGeocodedLocationListContainer(Ue)}},onFailure:function(Be){Oe._clearGeocodedLocation(),logger$w.log(Be.message)}})}}onGeocodedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(Te){var Oe=[this._geocodedLocations[Te].position.lon,this._geocodedLocations[Te].position.lat],Be={service:"GeocodedLocation",location:this._geocodedLocations[Te]},Ue=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[Te]);this._setLabel(Ue);var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",We));var Cn=this._getZoom(this.options.zoomTo);this._setPosition(Oe,Cn),this._displayMarker&&this._setMarker(Oe,Be),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[Te]})}}onGeocodingAdvancedSearchCodeChange(e){logger$w.log(e);var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;Oe&&this._setFilter(Oe)}onGeocodingAdvancedSearchSubmit(e,Te){if(logger$w.log(Te),!(!Te||Te.length===0)){for(var Oe,Be={},Ue=0;Ue<Te.length;Ue++){var He=Te[Ue];He.value&&(He.key==="section"&&(He.value=He.value.toUpperCase()),Be[He.key]=He.value)}var We=document.getElementById("GPsearchInputText-"+this._uid);Oe=We.value,this._currentGeocodingCode==="CadastralParcel"&&(Oe=""),this._currentGeocodingCode==="StreetAddress"&&(Oe=`${Be.address} ${Be.postcode} ${Be.city}`,Be={}),this._currentGeocodingCode==="PositionOfInterest"&&(Oe=Be.q,delete Be.q);var Cn=this;this._requestGeocoding({query:Oe,index:this._currentGeocodingCode,filters:Be,onSuccess:function(An){if(logger$w.log(An),An){var En=An.locations;Cn._fillGeocodedLocationListContainer(En)}},onFailure:function(An){Cn._clearGeocodedLocation(),logger$w.log(An.message)}})}}_getCadastralParcelRequestParams(e){var Te="",Oe,Be=e.department;Be?(Oe=Be.length,Oe===2?Te=Be:Oe===1?Te="0"+Be:Te=Be.substring(0,2)):Te="__";var Ue=e.commune;Ue?(Oe=Ue.length,Oe===3?Te+=Ue:Oe===2?Te+="_"+Ue:Oe===1?Te+="__"+Ue:Te+=Ue.substring(0,3)):Te+="___";var He=e.insee;He&&He.length===5&&(Te=He);var We=e.absorbedCity;We?(Oe=We.length,Oe===3?Te+=We:Oe<3?Oe===2?Te+="_"+We:Oe===1&&(Te+="__"+We):Te+=We.substring(0,3)):Te+="___";var Cn=e.section;Cn?(Oe=Cn.length,Oe===2?Te+=Cn:Oe===1?Te+="_"+Cn:Te+=Cn.substring(0,2)):Te+="__";var An=e.number;return An?(Oe=An.length,Oe===4?Te+=An:Oe===3?Te+="_"+An:Oe===2?Te+="__"+An:Oe===1?Te+="___"+An:Te+=An.substring(0,4)):Te+="___",logger$w.log("location : "+Te),Te}onCoordinateSearchSystemChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var Be=null,Ue=0;Ue<this._coordinateSearchSystems.length;++Ue)if(this._coordinateSearchSystems[Ue].code===Number(Oe)){Be=this._coordinateSearchSystems[Ue].type;break}if(!Be){logger$w.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(Oe)],Be!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=Be,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[Be][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[Be])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=Oe,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Te=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(Te),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),Te=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(Te)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var Te=e.length-1;Te>=0;Te--){var Oe=e[Te];(Oe.type==="StreetAddress"&&Oe.kind==="municipality"||Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="lieu-dit habit"&&Oe.poiType[1]==="zone d'habitation")&&e.splice(Te,1),Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="administratif"&&(Oe.poiType[1]==="dpartement"||Oe.poiType[1]==="rgion")&&(Oe.fullText=Oe.fullText+", "+Oe.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPmousePosition"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowMousePositionPictoElement:function(ke){var e=this,Te=document.createElement("button"),Oe=document.createElement("span");return Te.appendChild(Oe),Te.id=this._addUID("GPshowMousePositionPicto"),Te.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",Te.setAttribute("aria-label","Afficher les coordonnes du curseur"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button"),Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),e.onShowMousePositionClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),e.onShowMousePositionClick(Be)}),Te},_createMousePositionPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPmousePositionPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createMousePositionPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createMapCenter:function(){var ke=document.createElement("div");return ke.id="GPmapCenter",ke.className="",ke},_createMousePositionPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.id=this._addUID("GPmousePositionHeaderTitle"),ke.innerHTML="Coordonnes",ke},_createMousePositionPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader gpf-panel__header fr-modal__header",ke},_createMousePositionPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(ke._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(ke._addUID("GPshowMousePositionPicto")).click()}));var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createMousePositionPanelBasicElement:function(ke,e,Te,Oe){ke=typeof ke>"u"?!0:ke,e=typeof e>"u"?!0:e,Te=typeof Te>"u"?!1:Te;var Be=document.createElement("div");return Be.id=this._addUID("GPmousePositionBasicPanel"),Be.classList.add("fr-mx-1w"),Be.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,Te,Oe)),Be.appendChild(this._createMousePositionPanelEditToolsElement(Te)),Be.appendChild(this._createMousePositionPanelBasicAltitudeElement(ke)),Be},_createCoordinateElement:function(ke,e){var Te=this;if(["Lon","Lat"].indexOf(ke)===-1)return[];var Oe=[],Be=document.createElement("input");Be.id=this._addUID("GPmousePosition"+ke),Be.title=e===!0?"Cliquer pour saisir des coordonnes":"",Be.readOnly=!0,e&&(Be.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Be.addEventListener("change",function(He){this.classList.remove("error");var We=Te.validateExtentCoordinate(ke,this.value,He);We?this.classList.remove("error"):this.classList.add("error")})),Oe.push(Be);var Ue=document.createElement("span");return Ue.className="GPmousePositionUnits",Oe.push(Ue),Oe},_createDMSCoordinateElement:function(ke,e){if(["Lon","Lat"].indexOf(ke)===-1)return[];var Te=this,Oe=[],Be=document.createElement("input");Be.id=this._addUID("GPmousePosition"+ke+"Degrees"),Be.className="GPSexagesimal",Be.setAttribute("name","degrees"),Be.title=e===!0?"Cliquer pour saisir des coordonnes":"",Be.readOnly=!0,Be.dataset.min=0,Be.dataset.max=ke==="Lon"?180:90,e&&(Be.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Be.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSDegrees(ke,this);Ln?this.classList.remove("error"):this.classList.add("error")})),Oe.push(Be);var Ue=document.createElement("span");Ue.className="GPmousePositionSexagesimalLabel",Ue.innerHTML="",Oe.push(Ue);var He=document.createElement("input");He.id=this._addUID("GPmousePosition"+ke+"Minutes"),He.className="GPSexagesimal",He.setAttribute("name","minutes"),He.title=e===!0?"Cliquer pour saisir des coordonnes":"",He.readOnly=!0,He.dataset.min=0,He.dataset.max=59,e&&(He.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),He.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSElement(this);Ln?this.classList.remove("error"):this.classList.add("error")})),Oe.push(He);var We=document.createElement("span");We.className="GPmousePositionSexagesimalLabel",We.innerHTML="'",Oe.push(We);var Cn=document.createElement("input");Cn.id=this._addUID("GPmousePosition"+ke+"Seconds"),Cn.className="GPSexagesimalsec",Cn.setAttribute("name","seconds"),Cn.title=e===!0?"Cliquer pour saisir des coordonnes":"",Cn.readOnly=!0,Cn.dataset.min=0,Cn.dataset.max=59,e&&(Cn.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Cn.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSElement(this,!0);Ln?this.classList.remove("error"):this.classList.add("error")})),Oe.push(Cn);var An=document.createElement("span");An.className="GPmousePositionSexagesimalLabel",An.innerHTML="''",Oe.push(An);var En=document.createElement("select");En.id=this._addUID("GPmousePosition"+ke+"Direction"),En.className="GPmousePositionDirection",En.setAttribute("name","direction"),En.disabled=!0;var Sn=document.createElement("option");Sn.value=ke==="Lon"?"E":"N",Sn.innerHTML=ke==="Lon"?"E":"N",En.appendChild(Sn);var Tn=document.createElement("option");return Tn.value=ke==="Lon"?"O":"S",Tn.innerHTML=ke==="Lon"?"O":"S",En.appendChild(Tn),Oe.push(En),Oe},_createMousePositionPanelBasicCoordinateElement:function(ke,e,Te){var Oe=document.createElement("div");Oe.id=this._addUID("GPmousePositionCoordinate"),Oe.style.display=ke?"block":"none";var Be=document.createElement("div");Be.classList.add("fr-mb-1w");var Ue=document.createElement("span");Ue.className="GPmousePositionLabel",Ue.id=this._addUID("GPmousePositionLatLabel"),Ue.innerHTML="Latitude : ",Be.appendChild(Ue);var He=document.createElement("span");He.id=this._addUID("GPmousePositionLatCoordinate");var We;Te==="DMS"?We=this._createDMSCoordinateElement("Lat",e):We=this._createCoordinateElement("Lat",e);for(var Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn]);Be.appendChild(He),Oe.appendChild(Be);var An=document.createElement("div");An.classList.add("fr-mb-1w");var En=document.createElement("span");En.className="GPmousePositionLabel",En.id=this._addUID("GPmousePositionLonLabel"),En.innerHTML="Longitude : ",An.appendChild(En);var Sn=document.createElement("span");Sn.id=this._addUID("GPmousePositionLonCoordinate");var Tn;Te==="DMS"?Tn=this._createDMSCoordinateElement("Lon",e):Tn=this._createCoordinateElement("Lon",e);for(var Ln=0;Ln<Tn.length;Ln++)Sn.appendChild(Tn[Ln]);return An.appendChild(Sn),Oe.appendChild(An),Oe},_createMousePositionPanelBasicAltitudeElement:function(ke){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=ke?"block":"none";var Te=document.createElement("span");Te.className="GPmousePositionLabel",Te.innerHTML="Altitude : ",e.appendChild(Te);var Oe=document.createElement("span");Oe.className="GPmousePositionCoords",Oe.id=this._addUID("GPmousePositionAlt"),Oe.innerHTML="...",e.appendChild(Oe);var Be=document.createElement("span");return Be.className="GPmousePositionAltitudeUnits",Be.innerHTML="m",e.appendChild(Be),e},_createMousePositionPanelEditToolsElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPmousePositionPanelEditTools",Te.id=this._addUID("GPmousePositionPanelEditTools"),ke||(Te.style.display="none");var Oe=document.createElement("span");Oe.className="GPmousePositionEditTool",Oe.id=this._addUID("GPmousePositionLocate"),Oe.title=ke===!0?"Cliquer pour saisir des coordonnes":"",ke&&Oe.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),Te.appendChild(Oe);var Be=document.createElement("span");return Be.className="GPmousePositionEditTool",Be.id=this._addUID("GPmousePositionCloseEdit"),Be.title="Quitter la saisie des coordonnes",Be.style.display="none",ke&&Be.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),Te.appendChild(Be),Te},_createShowMousePositionSettingsElement:function(ke){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPshowMousePositionSettings"),Te.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",Te.title="Rglages",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!0),Te.addEventListener?Te.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionSettingsClick(Oe)}):Te.attachEvent&&Te.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionSettingsClick(Oe)}),Te},_createMousePositionSettingsElement:function(ke){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=ke===void 0||ke?"block":"none",e.classList.add("fr-m-1w");var Te=document.createElement("span");return Te.className="GPmousePositionSettingsLabel",Te.innerHTML="Systme de rfrence",e.appendChild(Te),e},_createMousePositionSettingsSystemsElement:function(ke){var e=this,Te=document.createElement("select");Te.id=this._addUID("GPmousePositionProjectionSystem"),Te.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",Te.addEventListener("change",function(He){e.onMousePositionProjectionSystemChange(He)}),Te.addEventListener("mouseover",function(He){He.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(He)}),Te.title="Type de systme";for(var Oe=0;Oe<ke.length;Oe++){var Be=ke[Oe],Ue=document.createElement("option");Ue.value=Be.code,Ue.text=Be.label||Oe,Te.appendChild(Ue)}return Te},_createMousePositionSettingsUnitsElement:function(ke){var e=this,Te=document.createElement("select");Te.id=this._addUID("GPmousePositionProjectionUnits"),Te.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onMousePositionProjectionUnitsChange(He)}),Te.title="Units du systme";for(var Oe=0;Oe<ke.length;Oe++){var Be=ke[Oe],Ue=document.createElement("option");Ue.value=Be.code?Be.code:Oe,Ue.text=Be.label||Oe,Te.appendChild(Ue)}return Te},_resetLabelElements:function(ke){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=ke==="Geographical"?"Latitude :":"X :";var Te=document.getElementById(this._addUID("GPmousePositionLonLabel"));Te.innerHTML=ke==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(ke){var e="";(ke==="M"||ke==="KM")&&(e=ke.toLowerCase());for(var Te=document.getElementsByClassName("GPmousePositionUnits"),Oe=0;Oe<Te.length;Oe++)Te[Oe].innerHTML=e},_resetCoordinateElements:function(ke,e,Te){for(var Oe=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));Oe.firstChild;)Oe.removeChild(Oe.firstChild);var Be;Te==="DMS"?Be=this._createDMSCoordinateElement("Lat",ke):Be=this._createCoordinateElement("Lat",ke);for(var Ue=0;Ue<Be.length;Ue++)Oe.appendChild(Be[Ue]);for(var He=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));He.firstChild;)He.removeChild(He.firstChild);var We;Te==="DMS"?We=this._createDMSCoordinateElement("Lon",ke):We=this._createCoordinateElement("Lon",ke);for(var Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn])},_setEditMode:function(ke){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=ke?"Aller  la position ...":"Cliquer pour saisir des coordonnes";var Te=document.getElementById(this._addUID("GPmousePositionCloseEdit"));Te.style.display=ke?"inline-block":"none";for(var Oe="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",Be=document.querySelectorAll(Oe+" input"),Ue=0;Ue<Be.length;Ue++)Be[Ue].readOnly=!ke,ke&&(Be[Ue].value="",Be[Ue].classList.remove("error"));for(var He=document.querySelectorAll(Oe+" select"),We=0;We<He.length;We++)He[We].disabled=!ke},_checkDMSElement:function(ke,e){var Te=e!==void 0,Oe=ke.value;if(Te&&(Oe=Oe.replace(",",".")),isNaN(Oe))return!1;var Be=parseFloat(Oe);if(!Te&&(Be|0)!==Be)return!1;var Ue=Number(ke.dataset.min),He=Number(ke.dataset.max);return Be>=Ue&&Be<=He},_checkDMSDegrees:function(ke,e){if(isNaN(e.value))return!1;var Te=parseFloat(e.value);if((Te|0)!==Te)return!1;var Oe=Number(e.dataset.min),Be=Number(e.dataset.max);if(Te<Oe||Te>Be)return!1;var Ue=document.getElementById(this._addUID("GPmousePosition"+ke+"Minutes")),He=document.getElementById(this._addUID("GPmousePosition"+ke+"Seconds"));return Te>=Be?(Ue.dataset.max=0,He.dataset.max=0):(Ue.dataset.max=59,He.dataset.max=59.9999),!0},GPdisplayCoords:function(ke){if(ke){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),Te=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(ke.x||ke.y?(Te.innerHTML="X : ",e.innerHTML="Y : "):ke.e||ke.n?(Te.innerHTML="E : ",e.innerHTML="N : "):(Te.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof ke.lat=="object"&&typeof ke.lng=="object"){var Oe={lng:"Lon",lat:"Lat"},Be=["Degrees","Minutes","Seconds"];for(var Ue in Oe)for(var He=0;He<Be.length;++He){var We="GPmousePosition"+Oe[Ue]+Be[He],Cn=document.getElementById(this._addUID(We)),An=Be[He].charAt(0).toLowerCase();Cn.value=ke[Ue][An]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=ke.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=ke.lat.direction}else{var En=document.getElementById(this._addUID("GPmousePositionLat")),Sn=document.getElementById(this._addUID("GPmousePositionLon"));En.value=ke.x||ke.lat||ke.e||"0",Sn.value=ke.y||ke.lng||ke.lon||ke.n||"0",En.title="Latitude",Sn.title="Longitude",En.type="text",Sn.type="text";for(var Tn=ke.unit===void 0?"":ke.unit,Ln=document.getElementsByClassName("GPmousePositionUnits"),Bn=0;Bn<Ln.length;++Bn)Ln[Bn].innerHTML=Tn}}},GPdisplayElevation:function(ke,e,Te,Oe){var Be=this,Ue;e||(e=500),clearTimeout(Ue),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",Te==null&&(Te=-99999),Oe==null&&(Oe=99980);var He=Te+Oe,We=Te-Oe;ke&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Ue=setTimeout(function(){Be.onRequestAltitude(ke,function(Cn){We<Cn&&Cn<He?Be.GPresetElevation():document.getElementById(Be._addUID("GPmousePositionAlt")).innerHTML=Cn})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$v=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var Te=this;if(e){var Oe=this._createMapCenter();if(e.getViewport().appendChild(Oe),!this.collapsed&&!this._isDesktop&&(Oe.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",He=>{this.onMouseMove(He)}):this.listenerKey=e.on("moveend",He=>this.onMapMove(He)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var Be=document.createElement("img");Be.id=this._addUID("GPmousePositionMarker"),Be.src=this._markerUrl,Be.title="Cliquer pour supprimer",Be.addEventListener("click",function(){Te._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:Be,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Ue=document.getElementById("GPshowMousePosition-"+this._uid);Ue.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var Te=0;Te<this._projectionSystems.length;Te++){var Oe=this._projectionSystems[Te];e.crs===Oe.crs&&logger$v.info("crs '{}' already configured",Oe.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var Be=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(Be){var Ue=document.createElement("option");Ue.value=e.code,Ue.text=e.label,Be.appendChild(Ue)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$v.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var Te=0;Te<e.length;Te++)this.addSystem(e[Te])}}removeSystem(e){if(!e||typeof e!="string"){logger$v.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var Te=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),Oe=null,Be=0;Be<this._projectionSystems.length;Be++){var Ue=this._projectionSystems[Be];if(e===Ue.crs){Oe=Ue.code,this._projectionSystems.splice(Be,1);break}}if(Oe==null){logger$v.log("[WARN] MousePosition:removeSystem - system not found");return}for(var He=[],We=0;We<this._projectionSystems.length;We++)He[Number(this._projectionSystems[We].code)]=We,this._projectionSystems[We].code=We;for(var Cn=null,An=0;An<Te.childNodes.length;An++){if(Oe===Te.childNodes[We].value){Cn=An;continue}Te.childNodes[We].value=He[Number(Te.childNodes[We].value)]}Cn!=null&&Te.removeChild(Te.childNodes[Cn]),this._currentProjectionSystems.code===Number(Oe)&&(Te.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(Te.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var Te in e.serviceOptions)e.serviceOptions.hasOwnProperty(Te)&&(this.options.altitude.serviceOptions[Te]=e.serviceOptions[Te])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var Te=e.altitude;this.options.altitude={triggerDelay:Te.triggerDelay!==void 0?Te.triggerDelay:200,responseDelay:Te.responseDelay!==void 0?Te.responseDelay:500,serviceOptions:Te.serviceOptions||{},noDataValue:Te.noDataValue!==void 0?Te.noDataValue:-99999,noDataValueTolerance:Te.noDataValueTolerance!==void 0?Te.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$v.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var Te=e.url;Te?Te.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[Te]!==void 0?Marker[Te]:Marker.lightOrange:this._markerUrl=Te:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Gographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II tendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],Te=this.options.systems,Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe];this.addSystem(Be)}if(this._projectionSystems.length===0)for(var Ue=0;Ue<e.length;Ue++)this.addSystem(e[Ue])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrs dcimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrs sexagsimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mtres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomtres",format:MathUtils.coordinateToKMeter}]},Te=this.options.units;for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var Be=!1,Ue=0;Ue<e[Oe].length;Ue++)for(var He=e[Oe][Ue],We=0;We<Te.length;We++){var Cn=Te[We];He.code===Cn&&(Be=!0,this._projectionUnits[Oe]||(this._projectionUnits[Oe]=[]),this._projectionUnits[Oe].push(He))}Be||(this._projectionUnits[Oe]=e[Oe])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],Te=this._projectionUnits[this._currentProjectionType],Oe=0;Oe<Te.length;++Oe)if(Te[Oe].code===this._currentProjectionUnits){e.push(Te[Oe].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),Te=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(Te);var Oe=this._panelMousePositionContainer=this._createMousePositionPanelElement(),Be=this._createMousePositionPanelDivElement();Oe.appendChild(Be);var Ue=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),He=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Ue.appendChild(He);var We=this._panelCloseButton=this._createMousePositionPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);Be.appendChild(Cn);var An=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);Be.appendChild(An);var En=this._createMousePositionSettingsElement(),Sn=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),Tn=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return En.appendChild(Sn),En.appendChild(Tn),Be.appendChild(En),e.appendChild(Oe),e}_setElevationPanel(e){var Te=null;e?(Te=document.getElementById("GPmousePositionAltitude-"+this._uid),Te.style.display=""):(Te=document.getElementById("GPmousePositionAltitude-"+this._uid),Te.style.display="none")}_setCoordinatesPanel(e){var Te=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?Te.style.display="":Te.style.display="none"}_setSettingsPanel(e){var Te=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),Oe=document.getElementById("GPmousePositionSettings-"+this._uid);e?(Te.style.display="",Oe.style.display=""):(Te.style.display="none",Oe.style.display="none")}_setTypeUnitsPanel(e){for(var Te=this._projectionUnitsContainer;Te.firstChild;)Te.removeChild(Te.firstChild);for(var Oe=this._projectionUnits[e],Be=0;Be<Oe.length;Be++){var Ue=Oe[Be],He=document.createElement("option");He.value=Ue.code?Ue.code:Be,He.text=Ue.label||Be,Te.appendChild(He)}var We=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||We==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,We),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(We),this._currentProjectionUnits=We}_setCoordinate(e,Te){var Oe={},Be=this._currentProjectionSystems.crs;if(!Be){logger$v.log("ERROR : system crs not found");return}e=transform$1(e,Te,Be);for(var Ue=this._currentProjectionSystems.type,He=null,We=this._projectionUnits[Ue],Cn=0;Cn<We.length;Cn++)if(We[Cn].code===this._currentProjectionUnits){He=We[Cn].format;break}if(!He||typeof He!="function"){logger$v.log("WARNING : coordinates format function not found");return}else Oe=He(e);!Oe||Object.keys(Oe).length===0||this.GPdisplayCoords(Oe)}_setElevation(e){var Te=this.options.altitude.responseDelay,Oe=this.options.altitude.noDataValue,Be=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,Te,Oe,Be)}onMoveStopped(e,Te){var Oe=transform$1(e,Te,"EPSG:4326");this._setElevation(Oe)}onMouseMove(e){var Te=this,Oe=e.coordinate;if(!(!e.map||!e.map.getView())){var Be=e.map.getView().getProjection();this._setCoordinate(Oe,Be),clearTimeout(this._timer),this._timer=setTimeout(function(){Te.onMoveStopped(Oe,Be)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,Te=this.getMap();if(!(!Te||!Te.getView())){var Oe=Te.getView(),Be=Oe.getCenter(),Ue=Oe.getProjection();this._setCoordinate(Be,Ue),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(Be,Ue)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,Te){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var Oe=this.options.altitude.serviceOptions||{},Be=Oe.protocol||"XHR",Ue=Oe.timeOut||0;Be==="JSONP"&&Ue===0&&(Ue=15e3);var He=Oe.outputFormat||"json",We=!0,We;Oe.zonly===!1?We=Oe.zonly:We=!0;var Cn=Oe.measures||!1,An=[{lon:e[0],lat:e[1]}],En=Oe.resource,Sn=this,Tn=Oe.rawResponse||!1,Ln=Oe.onSuccess||null,Bn=null,ei=null;Tn?Bn=function(ri){Ln&&Ln.call(this,ri),logger$v.log("alti service raw response : ",ri)}:Bn=function(ri){ri&&Object.keys(ri).length&&(Ln&&Ln.call(this,ri),Te.call(this,ri.elevations[0].z))},ei=function(ri){logger$v.log("[getAltitude] ERROR : "+ri.message)};var ni=Oe.apiKey||this.options.apiKey;typeof Oe.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Oe.ssl=this.options.ssl:Oe.ssl=!0);var ti=Oe.ssl;Gp.Services.getAltitude({apiKey:ni,protocol:Be,ssl:ti,timeOut:Ue,scope:Sn,outputFormat:He,rawResponse:Tn,onSuccess:Bn,onFailure:ei,zonly:We,measures:Cn,resource:En,positions:An})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var Oe=this._showMousePositionButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),Oe==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=Te.on("pointermove",Be=>{this.onMouseMove(Be)}):(this.listenerKey=Te.on("moveend",Be=>this.onMapMove(Be)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var Te=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=Te.on("pointermove",Oe=>{this.onMouseMove(Oe)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=Te.on("moveend",Oe=>this.onMapMove(Oe)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var Te=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),Oe=Te.value;if(!Oe||(Oe=Oe.replace(",","."),!MathUtils.isInteger(Oe)))return null;var Be=MathUtils.toInteger(Oe);if(Be<Number(Te.dataset.min)||Be>Number(Te.dataset.max))return null;var Ue=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,He=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),We=He.value;if(We&&(We=We.replace(",","."),MathUtils.isInteger(We))){var Cn=MathUtils.toInteger(We);Cn>=Number(He.dataset.min)&&Cn<=Number(He.dataset.max)&&(Be+=Cn/60)}var An=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),En=An.value;if(En){En=En.replace(",",".");var Sn=MathUtils.toFloat(En);Sn&&Sn>=Number(An.dataset.min)&&Sn<=Number(An.dataset.max)&&(Be+=Sn/3600)}return(Ue==="O"||Ue==="S")&&(Be=-Be),Be}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var Te=this._currentProjectionSystems.crs;if(!Te){logger$v.log("ERROR : system crs not found");return}var Oe=this.getMap().getView(),Be=transform$1(e,Te,Oe.getProjection());Oe.setCenter(Be),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Be)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var Te=document.getElementById(this._addUID("GPmousePositionLat")).value;if(Te=Te.replace(",","."),Te=MathUtils.toFloat(Te),Te!==null){var Oe=this._currentProjectionSystems.crs;if(!Oe){logger$v.log("ERROR : system crs not found");return}var Be;this._currentProjectionSystems.type==="Geographical"?Be=[this.convert(e),this.convert(Te)]:Be=[this.convert(Te),this.convert(e)];var Ue=transform$1(Be,this._currentProjectionSystems.crs,"EPSG:4326"),He=this._currentProjectionSystems.geoBBox;if(He){var We=[He.left,He.bottom,He.right,He.top];if(Ue[0]<We[0]||Ue[0]>We[2]||Ue[1]<We[1]||Ue[1]>We[3])return}var Cn=this.getMap().getView(),An=transform$1(Be,Oe,Cn.getProjection());Cn.setCenter(An),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(An)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var Te=this.getMap().getView(),Oe=Te.getCenter();e.call(this,Oe)}}}onMousePositionProjectionSystemChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;this._setCurrentSystem(Oe)}_setCurrentSystem(e){for(var Te=null,Oe=0;Oe<this._projectionSystems.length;++Oe)if(this._projectionSystems[Oe].code===Number(e)){Te=this._projectionSystems[Oe].type;break}if(!Te){logger$v.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],Te!==this._currentProjectionType&&this._setTypeUnitsPanel(Te),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$v.trace(e);var Te=this.getMap();if(!(!Te||!Te.getView())){var Oe=Te.getView(),Be=Oe.getProjection(),Ue=Oe.calculateExtent(Te.getSize());Ue=transformExtent(Ue,Be,"EPSG:4326");var He=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));He.innerHTML="";for(var We=0;We<this._projectionSystems.length;We++){var Cn=this._projectionSystems[We],An=null;if(Cn.geoBBox&&(Ue[0]>Cn.geoBBox.right||Ue[1]>Cn.geoBBox.top||Ue[2]<Cn.geoBBox.left||Ue[3]<Cn.geoBBox.bottom)){Cn===this._currentProjectionSystems&&(An=document.createElement("option"),An.value=Cn.code,An.text=Cn.label||We,An.setAttribute("selected","selected"),An.setAttribute("disabled","disabled"),He.appendChild(An));continue}var En=document.createElement("option");En.value=Cn.code,En.text=Cn.label||We,Cn===this._currentProjectionSystems&&En.setAttribute("selected","selected"),He.appendChild(En)}}}onMousePositionProjectionUnitsChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value,Be=this._currentProjectionUnits;this._currentProjectionUnits=Oe,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(Be==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var Te;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")Te=e;else if(this._currentProjectionUnits==="KM")Te=e*1e3;else if(this._currentProjectionUnits==="RAD"){var Oe=(180/Math.PI).toFixed(20);Te=(e*Oe).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var Be=.9.toFixed(20);Te=(e*Be).toFixed(20)}return Te}validateExtentCoordinate(e,Te){if(["Lon","Lat"].indexOf(e)===-1)return!1;var Oe=Te.replace(",",".");if(Oe=MathUtils.toFloat(Oe),Oe===null)return!1;Oe=this.convert(Oe);var Be=this._currentProjectionSystems.geoBBox;if(Be===void 0)return!0;var Ue=[Be.left,Be.bottom,Be.right,Be.top];return Ue=transformExtent(Ue,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(Oe<Ue[0]||Oe>Ue[2])||e==="Lon"&&(Oe<Ue[1]||Oe>Ue[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$u=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPdrawing"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowDrawingPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowDrawingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowDrawingClick(Oe)}),e},_createDrawingPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPdrawingPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createDrawingPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createDrawingToolsDivSections:function(){var ke=document.createElement("div");return ke.className="gpf-panel__content fr-px-3w fr-modal__content",ke},_createDrawingButtonsPluginDiv:function(){var ke=document.createElement("div");return ke.className="container-buttons-plugin fr-mx-2w",ke},_createDrawingPanelHeaderElement:function(){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",ke.appendChild(e);var Te=document.createElement("button");Te.id=this._addUID("GPdrawingPanelClose"),Te.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Te.title="Fermer le panneau";var Oe=this;Te.addEventListener?Te.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()},!1):Te.attachEvent&&Te.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Te.appendChild(Be),ke.appendChild(Te),ke},_createDrawingToolsSections:function(){var ke=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&ke.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&ke.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&ke.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),ke},_createDrawingToolSection:function(ke,e){var Te=document.createElement("div");Te.className="drawing-tool-section fr-mx-2w";var Oe=document.createElement("p");Oe.className="drawing-tool-section-title",Oe.innerHTML=ke,Te.appendChild(Oe);var Be=document.createElement("div");Be.className="drawing-tools-flex-display";var Ue=this;function He(An){Ue._handleDOMToolClick(An,this.id,Ue),Ue._handleToolClick(An,this.id,Ue)}for(var We in this.dtOptions)if(this.dtOptions[We].panel===e){var Cn=document.createElement("button");Cn.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",Cn.id=this._addUID("drawing-tool-"+this.dtOptions[We].id),Cn.title=this.dtOptions[We].label,Cn.addEventListener("click",He),Be.appendChild(Cn)}return Te.appendChild(Be),Te},_createSavingSection:function(ke,e){var Te=document.createElement("div");Te.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var Oe=document.createElement("button");Oe.title=e,Oe.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",Oe.id=this._addUID("drawing-export"),Oe.setAttribute("type","button"),Oe.textContent=ke;var Be=this;return Oe.onclick=function(){Be.onExportFeatureClick()},Te.appendChild(Oe),Te},_createMarkersChooser:function(ke){var e=document.createElement("div");e.className=ke.className;var Te=document.createElement("input");Te.type="checkbox",Te.className="gpf-custom-dropdown-toggle",Te.id=this._addUID("gpf-custom-dropdown-toggle"),e.appendChild(Te);var Oe=document.createElement("span");Oe.innerText="Slectionner le pictogramme :",e.appendChild(Oe);for(var Be=0;Be<this.options.markersList.length;Be++){var Ue=document.createElement("input");Ue.type="radio",Ue.name="gpf-dropdown-radio-style",Ue.value=this.options.markersList[Be].src,Ue.className="gpf-custom-dropdown-display",Ue.id=this._addUID(`gpf-custom-dropdown-display-${Be}`),e.appendChild(Ue),Be===0&&(Ue.checked=!0);var He=document.createElement("label");He.htmlFor=this._addUID("gpf-custom-dropdown-toggle"),He.className="fr-select GPselect gpf-select",e.appendChild(He);var We=document.createElement("img");We.src=this.options.markersList[Be].src,We.alt=`Option ${Be+1}`,He.appendChild(We)}var Cn=document.createElement("div");Cn.className="gpf-custom-dropdown-options",e.append(Cn);for(var Be=0;Be<this.options.markersList.length;Be++){var An=document.createElement("label");An.htmlFor=this._addUID(`gpf-custom-dropdown-display-${Be}`),An.className="gpf-custom-dropdown-option",Cn.appendChild(An);var En=document.createElement("img");En.src=this.options.markersList[Be].src,En.alt=`Option ${Be+1}`,An.appendChild(En),An.addEventListener("click",()=>{Te.click()})}return e},_createStylingElement:function(ke){var e=document.createElement("div");e.className=ke.className;var Te=document.createTextNode(ke.label);e.appendChild(Te);var Oe=document.createElement("input");try{Oe.type=ke.type}catch{Oe.type="text"}if(ke.type==="range"){e.dataset.frJsRange="true",e.title=ke.label;var Be=ke.defaultValue;Be=Math.round((Be-ke.min)/(ke.max-ke.min)*100),e.style.setProperty("--progress-right",Be+"%"),Oe.addEventListener("change",Ue=>{Ue.target.parentNode.style.setProperty("--progress-right",`${(Ue.target.value-ke.min)/(ke.max-ke.min)*100}%`)})}return Oe.id=ke.id,Oe.value=ke.defaultValue,ke.title&&(Oe.title=ke.title),ke.checked!==void 0&&(Oe.checked=ke.checked),ke.min!==void 0&&(Oe.min=ke.min),ke.max!==void 0&&(Oe.max=ke.max),ke.step!==void 0&&(Oe.step=ke.step),e.appendChild(Oe),e},_createStylingDiv:function(ke){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var Te=document.createElement("div");if(Te.className="gpf-modal__body fr-modal__body",e.appendChild(Te),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Be=document.createElement("div");Be.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Be.innerHTML="Modifier le style",Oe.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPdrawingStylePanelClose"),Ue.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){ke.applyFunc.call(this,"cancel")},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){ke.applyFunc.call(this,"cancel")});var He=document.createElement("span");He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),Oe.appendChild(Ue),Te.appendChild(Oe)}var We=document.createElement("div");We.className="gpf-panel__content fr-px-3w fr-modal__content",Te.appendChild(We);var Cn=document.createElement("div"),An=null,En=ke.geomType.toLowerCase();switch(En){case"point&text":case"point":An=this._createMarkersChooser({className:"gp-styling-option",defaultValue:ke.initValues.markerSrc}),Cn.appendChild(An),An=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:ke.initValues.markerSize*10}),Cn.appendChild(An),ke.initValues.markerCustom,En==="point&text"&&(An=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:ke.initValues.labelDisplay,defaultValue:ke.initValues.labelDisplay}),Cn.appendChild(An));break;case"text":An=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:ke.initValues.fillColor}),Cn.appendChild(An),An=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:ke.initValues.strokeColor}),Cn.appendChild(An),An=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:ke.initValues.strokeWidth}),Cn.appendChild(An);break;case"line":An=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:ke.initValues.strokeColor}),Cn.appendChild(An),An=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:ke.initValues.strokeWidth}),Cn.appendChild(An);break;case"polygon":An=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:ke.initValues.strokeColor}),Cn.appendChild(An),An=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:ke.initValues.strokeWidth}),Cn.appendChild(An),An=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:ke.initValues.fillColor}),Cn.appendChild(An),An=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent)  100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:ke.initValues.fillOpacity*10}),Cn.appendChild(An);break;default:logger$u.log("Unhandled geometry type for styling.")}We.appendChild(Cn);var Sn=document.createElement("div");Sn.className="gpf-flex-row",We.appendChild(Sn);var Tn=document.createElement("input");Tn.type="button",Tn.className="gp-styling-button fr-btn fr-btn--secondary",Tn.value=this.options.labels.applyToObject,Tn.onclick=function(){ke.applyFunc.call(this,"apply")};var Ln=document.createElement("input");Ln.type="button",Ln.value=this.options.labels.setAsDefault,Ln.className="gp-styling-button fr-btn fr-btn--tertiary",Ln.onclick=function(){ke.applyFunc.call(this,"default")},Sn.appendChild(Ln),Sn.appendChild(Tn);var Bn=document.createElement("input");return Bn.type="button",Bn.className="gp-styling-button closer",Bn.onclick=function(){ke.applyFunc.call(this,"cancel")},We.appendChild(Bn),e},_createLabelDiv:function(ke){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var Te=document.createElement("div");if(Te.className="gpf-modal__body fr-modal__body",e.appendChild(Te),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Be=document.createElement("div");Be.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Be.innerHTML="Ajouter une description",ke.geomType==="Text"&&(Be.innerHTML="Texte de l'annotation"),Oe.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPdrawingStylePanelClose"),Ue.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){ke.applyFunc.call(this,"cancel")},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){ke.applyFunc.call(this,"cancel")});var He=document.createElement("span");He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),Oe.appendChild(Ue),Te.appendChild(Oe)}var We=document.createElement("div");We.className="gpf-panel__content fr-px-3w fr-modal__content",Te.appendChild(We);var Cn=null;if(ke.geomType==="Text"?(Cn=document.createElement("input"),Cn.type="text",Cn.className="gp-input-label-style fr-input fr-mb-3w"):(Cn=document.createElement("textArea"),Cn.rows=2,Cn.cols=40,Cn.className="gp-textarea-att-label-style fr-input"),ke.text&&(Cn.value=ke.text),Cn.autocomplete="off",Cn.placeholder=ke.placeholder,Cn.id=ke.inputId,We.appendChild(Cn),Cn.onkeyup=function(Tn){ke.geomType==="Text"&&Tn.keyCode===13&&ke.applyFunc.call(this,ke.key,Cn.value,!0),Tn.keyCode===27&&ke.applyFunc.call(this,ke.key,Cn.value,!1)},ke.measure&&ke.geomType!=="Text"){var An=document.createElement("input");An.type="text",An.readonly=!0,An.className="gp-input-measure-style",An.value=ke.measure,We.appendChild(An)}var En=document.createElement("input");En.type="button",En.className="gp-styling-button fr-btn fr-btn--tertiary",En.value=this.options.labels.saveDescription,En.onclick=function(){ke.applyFunc.call(this,ke.key,Cn.value,!0)},We.appendChild(En);var Sn=document.createElement("input");return Sn.type="button",Sn.className="gp-styling-button closer",Sn.onclick=function(){ke.applyFunc.call(this,ke.key,Cn.value,!1)},We.appendChild(Sn),e},_handleDOMToolClick:function(ke,e,Te){for(var Oe in Te.dtOptions){var Be=Te._addUID("drawing-tool-"+Te.dtOptions[Oe].id),Ue=document.getElementById(Be);if(Be!==e){Ue.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.dtOptions[Oe].active=!1;continue}Te.dtOptions[Oe].active?Ue.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary":Ue.className="drawing-tool drawing-tool-active fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.dtOptions[Oe].active=!Te.dtOptions[Oe].active}}},logger$t=LoggerByDefault.getLogger("Drawing"),Zo,Drawing=(Zo=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",Te=>{Te.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$t.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$t.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$t.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var Te=null;switch(this.getExportFormat()){case"KML":Te=new KML({writeStyles:!0});break;case"GPX":Te=new GPX({});break;case"GEOJSON":Te=new GeoJSON({});break}if(!Te)return logger$t.log("Impossible to export : format unknown !?"),e;var Oe=this.layer.getSource().getProjection();return Oe=Oe||this.getMap().getView().getProjection(),e=Te.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:Oe}),e}setCollapsed(e){if(e===void 0){logger$t.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$t.log("no valid layer given for hosting drawn features.");return}var Te=this.getMap().getLayers();if(Te){var Oe=!1;Te.forEach(Be=>{Be===e&&(logger$t.trace("layer already in map. Not adding."),Oe=!0)}),Oe||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(Be=>{var Ue=Be.getStyle();if(typeof Ue=="function"){var He=Be.getStyleFunction();if(He){var We=He.call(this,Be,0);We&&We.length!==0&&Be.setStyle(Array.isArray(We)?We[0]:We)}}}),this.layer=e,this.getMap().getControls().forEach(Be=>{if(Be instanceof LayerSwitcher){var Ue=this.layer.gpLayerId;Be._layers[Ue].title===Ue&&Be.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}disable(){var e=this.getMap();Interactions.unset(e);for(var Te in this.dtOptions)if(this.dtOptions.hasOwnProperty(Te)&&this.dtOptions[Te].active){var Oe=this._addUID("drawing-tool-"+this.dtOptions[Te].id);document.getElementById(Oe).className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[Te].active=!1}}_getsMarkersOptionsFromSrc(e){for(var Te=null,Oe=0;Oe<this.options.markersList.length;Oe++)if(e&&this.options.markersList[Oe].src===e)return Te=this.options.markersList[Oe],Te;return Te}_getIconStyleOptions(e){var Te={};return Object.keys(e).forEach(Oe=>{switch(Oe){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":Te[Oe]=e[Oe];break}}),Te}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Zo.DefaultTools).forEach(Te=>{this.options.tools.hasOwnProperty(Te)||(this.options.tools[Te]=Zo.DefaultTools[Te])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Zo.DefaultCursorStyle).forEach(Te=>{this.options.cursorStyle.hasOwnProperty(Te)||(this.options.cursorStyle[Te]=Zo.DefaultCursorStyle[Te])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Zo.DefaultLabels).forEach(Te=>{this.options.labels.hasOwnProperty(Te)||(this.options.labels[Te]=Zo.DefaultLabels[Te])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Zo.DefaultStyles).forEach(Te=>{if(!e.defaultStyles.hasOwnProperty(Te)){this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}if(Te==="polyFillOpacity"&&(e.defaultStyles[Te]<0||e.defaultStyles[Te]>1)){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}if(Te==="strokeWidth"||Te==="polyStrokeWidth"){var Oe=parseInt(e.defaultStyles[Te],10);if(isNaN(Oe)||Oe<0){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}this.options.defaultStyles[Te]=Oe}if(Te==="markerSize"){var Be=parseFloat(e.defaultStyles[Te]);if(isNaN(Be)||Be<0){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}this.options.defaultStyles[Te]=Be}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.tooltipOvl=null,this.tooltipElem=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,Te=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});Te.gpResultLayerId="drawing",this.setLayer(Te)}_detectSupport(){var e=!0,Te=window.navigator.userAgent.toLowerCase();return(Te.indexOf("iphone")!==-1||Te.indexOf("ipod")!==-1||Te.indexOf("ipad")!==-1||Te.indexOf("android")!==-1||Te.indexOf("mobile")!==-1||Te.indexOf("blackberry")!==-1||Te.indexOf("tablet")!==-1||Te.indexOf("phone")!==-1||Te.indexOf("touch")!==-1)&&(e=!1),(Te.indexOf("msie")!==-1||Te.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),Te=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(Te);var Oe=this._drawingPanel=this._createDrawingPanelElement(),Be=this._createDrawingPanelDivElement();Oe.appendChild(Be);var Ue=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();Be.appendChild(Ue);var He=this._createDrawingToolsDivSections();Be.appendChild(He);for(var We=this._createDrawingToolsSections(),Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn]);var An=this._createDrawingButtonsPluginDiv();return He.appendChild(An),e.appendChild(Oe),e}_drawEndFeature(e,Te){var Oe=null;switch(Te){case"Point":Oe=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":Oe=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":Oe=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(Oe),this._updateMeasure(e,Te),this.options.popup.display){var Be=this,Ue=function(En,Sn,Tn){if(Be.getMap().removeOverlay(Be.popupOvl),Be.popupOvl=null,Tn&&Sn&&Sn.trim().length>0){var Ln={};Ln[En]=Sn.replace(/\n/g,"<br>"),e.setProperties(Ln)}},He=null,We=!0,Cn=this.options.popup.function;Cn&&typeof Cn=="function"&&(He=Cn.call(Be,{feature:e,geomType:Te,closeFunc:function(){Ue(null,!1)},saveFunc:function(En){Ue(En,!0)}}),He&&(We=!1,He.tabIndex=-1,He.onblur=function(){Be.getMap().removeOverlay(Be.popupOvl),Be.popupOvl=null})),We&&(He=this._createLabelDiv({applyFunc:Ue,inputId:this._addUID("att-input"),placeholder:"Saisir une description... (facultatif)",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:Te,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:He,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var An=e.getGeometry().getExtent();this.popupOvl.setPosition([(An[0]+An[2])/2,(An[1]+An[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{!Te||!Te.selected||Te.selected.length===0||(this.layer.getSource().removeFeature(Te.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!Te||!Te.selected||Te.selected.length===0)){var Oe=null,Be=null,Ue=null,He=null,We={},Cn=Te.selected[0].getGeometry(),An=Te.selected[0].getStyle();if(Cn instanceof Point$1||Cn instanceof MultiPoint){if(An&&An.getImage()&&typeof An.getImage().getSrc=="function"&&An.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(He="Point",typeof An.getImage().getSrc=="function"?(We.markerSrc=An.getImage().getSrc(),We.markerSize=An.getImage().getScale()||1,We.markerAnchor=An.getImage().getAnchor(),An.getImage().getColor()?(Oe=An.getImage().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.markerColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.markerColor=Be.hex,We.markerOpacity=Be.opacity):We.markerColor=this.options.markersList[0].color||"#ffffff"):(We.markerSrc=this.options.markersList[0].src,We.markerSize=this.options.markersList[0].scale||1,We.markerColor=this.options.markersList[0].color||"#ffffff",We.markerAnchor=this.options.markersList[0].anchor),We.markerCustom=!this._getsMarkersOptionsFromSrc(We.markerSrc)),An&&An.getText()){var En=Te.selected[0].getProperties().name;if(En&&(He=He==="Point"?"Point&Text":"Text",An.getText().getStroke()&&An.getText().getStroke().getColor()&&(Oe=An.getText().getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.strokeColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity),An.getText().getStroke()&&An.getText().getStroke().getWidth()&&(We.strokeWidth=An.getText().getStroke().getWidth()),An.getText().getFill()&&An.getText().getFill().getColor()&&(Oe=An.getText().getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.fillColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.fillColor=Be.hex,We.fillOpacity=Be.opacity),We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.textStrokeColor,We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.textStrokeWidth,We.fillColor=We.hasOwnProperty("fillColor")?We.fillColor:this.options.defaultStyles.textFillColor,He==="Point&Text")){var Sn=An.getText().getText();Sn||An.getText().setText(En);var Tn=Te.selected[0].get("checked");We.labelDisplay=Tn===void 0?this.options.defaultStyles.labelDisplay:Tn}}}else Cn instanceof LineString||Cn instanceof MultiLineString?(He="Line",An&&An.getStroke()&&(An.getStroke().getWidth()&&(We.strokeWidth=An.getStroke().getWidth()),An.getStroke().getColor()&&(Oe=An.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.strokeColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity)),We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.strokeWidth,We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.strokeColor):(Cn instanceof Polygon||Cn instanceof MultiPolygon)&&(He="Polygon",An&&An.getStroke()&&(An.getStroke().getWidth()&&(We.strokeWidth=An.getStroke().getWidth()),An.getStroke().getColor()&&(Oe=An.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.strokeColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity)),An&&An.getFill()&&An.getFill().getColor()&&(Oe=An.getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":We.fillColor=Oe,Be=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},We.fillColor=Be.hex,We.fillOpacity=Be.opacity),We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.polyStrokeWidth,We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.polyStrokeColor,We.fillColor=We.hasOwnProperty("fillColor")?We.fillColor:this.options.defaultStyles.polyFillColor,We.fillOpacity=We.hasOwnProperty("fillOpacity")?We.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!He){logger$t.log("Unhandled geometry type for styling.");return}var Ln=this,Bn=function(ni){if(ni==="cancel"){Ln.getMap().removeOverlay(Ue);return}var ti=ni!=="apply",ri=document.getElementById(Ln._addUID("fillColor")),oi=document.getElementById(Ln._addUID("fillOpacity")),ai=document.getElementById(Ln._addUID("strokeColor")),ci=document.getElementById(Ln._addUID("strokeWidth")),Pi=document.getElementById(Ln._addUID("markerSize"));switch(He.toLowerCase()){case"text":ti?(Ln.options.defaultStyles.textStrokeColor=ai.value,Ln.options.defaultStyles.textStrokeWidth=ci.value,Ln.options.defaultStyles.textFillColor=ri.value):Te.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:An.getText().getText(),fill:new Fill({color:ri.value}),stroke:new Stroke({color:ai.value,width:parseInt(ci.value,10)})})}));break;case"point&text":case"point":var vi=document.querySelector("input[type='checkbox']"),pi=null,Mi=parseInt(Pi.value,10)/10,Fi=document.querySelector("input[name='gpf-dropdown-radio-style']:checked");if(Fi&&(pi=Ln._getsMarkersOptionsFromSrc(Fi.value),pi.scale=Mi),ti){if(Ln.options.defaultStyles.markerSize=Mi,Ln.options.markersList.length>1){var fi=Ln.options.markersList.findIndex(function(Ni){return Ni===pi});fi>0&&(Ln.options.markersList.splice(fi,1),Ln.options.markersList.splice(0,0,pi))}He.toLowerCase()==="point&text"&&(Ln.options.defaultStyles.textStrokeColor=We.strokeColor,Ln.options.defaultStyles.textStrokeWidth=We.strokeWidth,Ln.options.defaultStyles.textFillColor=We.fillColor,Ln.options.defaultStyles.labelDisplay=We.labelDisplay)}else{var ui={};He.toLowerCase()==="point&text"&&(Te.selected[0].set("checked",vi.checked),ui={text:new Text({font:"16px sans",textAlign:"left",text:vi.checked?Te.selected[0].get("name"):"",fill:new Fill({color:We.fillColor}),stroke:new Stroke({color:We.strokeColor,width:parseInt(We.strokeWidth,10)})})}),pi?Te.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(Ln._getIconStyleOptions(pi))},ui))):Te.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:We.markerSrc,anchor:We.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Mi})},ui)))}break;case"line":ti?(Ln.options.defaultStyles.strokeColor=ai.value,Ln.options.defaultStyles.strokeWidth=parseInt(ci.value,10)):Te.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:ai.value})}));break;case"polygon":var Oi=parseInt(oi.value,10)/10;ti?(Ln.options.defaultStyles.polyStrokeColor=ai.value,Ln.options.defaultStyles.polyFillColor=ri.value,Ln.options.defaultStyles.polyFillOpacity=Oi,Ln.options.defaultStyles.polyStrokeWidth=parseInt(ci.value,10)):Te.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:ai.value}),fill:new Fill({color:ColorUtils.hexToRgba(ri.value,Oi)})}));break}ti||Ln.getMap().removeOverlay(Ue)},ei=this._createStylingDiv({geomType:He,initValues:We,applyFunc:Bn});Ue=new Overlay({element:ei,positioning:"top-center"}),this.getMap().addOverlay(Ue),Ue.setPosition(Te.mapBrowserEvent.coordinate),this.stylingOvl=Ue,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!Te||!Te.selected||Te.selected.length===0)){var Oe=null,Be=null,Ue=null,He=null,We=Te.selected[0].getGeometry(),Cn=Te.selected[0].getStyle();if(We instanceof Point$1||We instanceof MultiPoint){var An=Te.selected[0].getProperties().name;Cn&&Cn.getText()&&An?Be="Text":Cn&&Cn.getImage()&&(Be="Point")}else if(We instanceof LineString||We instanceof MultiLineString)Be="Line";else if(We instanceof Polygon||We instanceof MultiPolygon)Be="Polygon";else{logger$t.log("Geometry type for styling not supported .");return}if(!Be){logger$t.log("Unhandled geometry type for styling.");return}if(Be==="Text")Ue=Cn.getText().getText();else{var En=Te.selected[0].getProperties();En&&(En.hasOwnProperty("description")||En.hasOwnProperty("desc"))&&(Ue=En.description||En.desc),En&&En.hasOwnProperty("measure")&&(He=En.measure)}var Sn=this,Tn=function(Bn,ei,ni){if(Sn.getMap().removeOverlay(Oe),!!ni){var ti=Te.selected[0];if(Be==="Text"){var ri=ti.getStyle();ri.getText().setText(ei),ti.setProperties({name:ei}),ti.setStyle(ri);return}var oi={};oi[Bn]=ei.replace(/\n/g,"<br>"),ti.setProperties(oi)}},Ln=this._createLabelDiv({applyFunc:Tn,inputId:this._addUID("label-input"),placeholder:Be==="Text"?"Saisir un label...":"Saisir une description... (facultatif)",text:Ue,key:"description",measure:this.options.tools.measure?He:null,geomType:Be});Oe=new Overlay({element:Ln,positioning:"top-center"}),this.getMap().addOverlay(Oe),Oe.setPosition(Te.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=Oe,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,Te){logger$t.log(e);var Oe=null,Be=this.getMap().getView().getProjection();function Ue(ci,Pi){Pi=Pi||2;var vi=Math.pow(10,Pi);return Math.round(ci*vi)/vi}var He=Te||e.getProperties().type;switch(He){case"Point":var We=e.getGeometry().getCoordinates(),Cn=transform$1(We,Be,"EPSG:4326");Oe="lon : ",Oe+=Ue(Cn[0],4)+"",Oe+=" / ",Oe+="lat : ",Oe+=Ue(Cn[1],4)+"";break;case"LineString":for(var An=0,En=e.getGeometry().getCoordinates(),Sn=0,Tn=En.length-1;Sn<Tn;++Sn){var Ln=transform$1(En[Sn],Be,"EPSG:4326"),Bn=transform$1(En[Sn+1],Be,"EPSG:4326");An+=getDistance(Ln,Bn)}Oe=An>1e3?Ue(An/1e3,3)+" km":Ue(An,3)+" m";break;case"Polygon":var ei=0,ni=e.getGeometry().clone(),ti=ni.getLinearRing(0).getCoordinates();ei=Math.abs(getArea(new Polygon([ti])));var ri=ni.getLinearRings();if(ri.length>1)for(var oi=1;oi<ri.length;oi++){var ai=ri[oi].getCoordinates();ei-=Math.abs(getArea(new Polygon([ai])))}Oe=ei>1e6?Ue(ei/1e6,3)+" km^2":Ue(ei,2)+" m^2";break}e.setProperties({measure:Oe,type:He})}_handleToolClick(e,Te,Oe){var Be=Oe.getMap();if(!Be){logger$t.trace("Drawing control not attached to any map.");return}Interactions.unset(Be,{current:"Drawing"}),Oe.interactionCurrent&&(Be.removeInteraction(Oe.interactionCurrent),Oe.interactionCurrent=null),Oe.interactionSelectEdit&&(Be.removeInteraction(Oe.interactionSelectEdit),Oe.interactionSelectEdit=null),Oe.popupOvl&&(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null),Oe.stylingOvl&&(Oe.getMap().removeOverlay(Oe.stylingOvl),Oe.stylingOvl=null),Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null),this.layer||this._createEmptyLayer();const Ue=We=>{if(We.dragging||!Oe.tooltipOvl)return;const Cn=We.coordinate;Oe.tooltipOvl.setPosition(Cn)},He=()=>{Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null)};switch(Te){case this._addUID("drawing-tool-point"):Oe.dtOptions.points.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),Oe.interactionCurrent.on("drawend",function(We){Oe._drawEndFeature(We.feature,"Point")},Oe));break;case this._addUID("drawing-tool-line"):Oe.dtOptions.lines.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString",handleMoveEvent:Ue}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(We){Oe._drawEndFeature(We.feature,"LineString"),He()},Oe),Oe.interactionCurrent.on("drawabort",He,Oe));break;case this._addUID("drawing-tool-polygon"):Oe.dtOptions.polygons.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon",handleMoveEvent:Ue}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(We){Oe._drawEndFeature(We.feature,"Polygon"),He()},Oe),Oe.interactionCurrent.on("drawabort",He,Oe));break;case this._addUID("drawing-tool-holes"):Oe.dtOptions.holes.active&&(Oe.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),Be.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),Oe.interactionCurrent.on("drawstart",function(We){},Oe),Oe.interactionCurrent.on("drawend",function(We){var Cn=Oe.interactionSelectEdit.getFeatures();if(Cn.getLength()){for(var An=Cn.item(0),En=We.feature.getGeometry().getCoordinates()[0],Sn=!0,Tn=0;Tn<En.length;Tn++)if(!An.getGeometry().intersectsCoordinate(En[Tn])){Sn=!1;break}if(!Sn)return;An.getGeometry().appendLinearRing(new LinearRing(En)),We.feature=An,Oe._drawEndFeature(We.feature,"Polygon")}},Oe));break;case this._addUID("drawing-tool-text"):Oe.dtOptions.text.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),Oe.interactionCurrent.on("drawend",We=>{var Cn=function(En,Sn,Tn){if(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null,!Tn||!Sn){Oe.layer.getSource().removeFeature(We.feature);return}var Ln={};Ln[En]=Sn,We.feature.setProperties(Ln),We.feature.setStyle(new Style$1({image:new Icon(Oe._getIconStyleOptions(Oe.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:Sn,fill:new Fill({color:Oe.options.defaultStyles.textFillColor}),stroke:new Stroke({color:Oe.options.defaultStyles.textStrokeColor,width:3})})}))},An=this._createLabelDiv({applyFunc:Cn,inputId:Oe._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});Oe.popupOvl&&Oe.popupOvl.element.querySelector(".gp-styling-button.closer").click(),Oe.popupOvl=new Overlay({element:An,positioning:"top-center"}),Oe.getMap().addOverlay(Oe.popupOvl),Oe.popupOvl.setPosition(We.feature.getGeometry().getCoordinates()),document.getElementById(Oe._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):Oe.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,Oe.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),Oe.interactionSelectEdit.on("select",We=>{}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),Be.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),Oe.interactionCurrent.on("modifyend",We=>{var Cn=We.features.item(0);Oe._updateMeasure(Cn)}));break;case this._addUID("drawing-tool-display"):Oe.dtOptions.display.active&&(Oe.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):Oe.dtOptions.tooltip.active&&(Oe.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):Oe.dtOptions.remove.active&&(Oe.interactionCurrent=Oe._createRemoveInteraction());break;default:logger$t.trace("unhandled tool type")}Oe.interactionCurrent&&(Oe.interactionCurrent.setProperties({name:"Drawing",source:this}),Be.addInteraction(Oe.interactionCurrent),Oe.tooltipOvl&&Be.addOverlay(Oe.tooltipOvl)),logger$t.log("interactions",Be.getInteractions())}onShowDrawingClick(e){var Te=this._showDrawingButton.ariaPressed;Te==="true"&&this.onPanelOpen(),this.disable(),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onExportFeatureClick(){var e=this.exportFeatures();if(e){var Te=document.createElement("a"),Oe="utf-8";if(Te.setAttribute("href","data:"+this._exportMimeType+";charset="+Oe+","+encodeURIComponent(e)),Te.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var Be=document.createEvent("MouseEvents");Be.initEvent("click",!0,!0),Te.dispatchEvent(Be)}else Te.click()}}},Mc(Zo,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Mc(Zo,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Crer",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Crer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"diter",edit:"Editer les tracs",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer  l'objet",saveDescription:"Enregistrer",setAsDefault:"Dfinir par dfaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacit du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Mc(Zo,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#000091",polyFillOpacity:.7,polyStrokeColor:"#000091",polyStrokeWidth:4,strokeColor:"#FF7F00",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Mc(Zo,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Zo);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$s=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.className=this._addUID("GPlocationPoint"),ke.className+=" GPwidget gpf-widget ",ke},_createLocationPointElement:function(ke,e){var Te=document.createElement("div");return Te.id=this._addUID("GPlocationPoint_"+ke),Te.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",Te.style.cssText="",Te},_createLocationPointLabelElement:function(ke,e){var Te=this,Oe=document.createElement("button");return Oe.id=this._addUID("GPlocationOriginLabel_"+ke),Oe.innerHTML=e,Oe.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",Oe.setAttribute("type","button"),Oe.addEventListener("click",function(Be){for(var Ue=SelectorID.index(this.id),He=document.getElementsByClassName(Te._addUID("GPlocationPoint")),We=0;We<He.length;We++){var Cn=He[We].childNodes[0].id,An=SelectorID.index(Cn);document.getElementById(Te._addUID("GPlocationPoint_"+An)).style.cssText=""}document.getElementById(Te._addUID("GPlocationOriginCoords_"+Ue)).value="",document.getElementById(Te._addUID("GPlocationOrigin_"+Ue)).value="",document.getElementById(Te._addUID("GPlocationPoint_"+Ue)).style.cssText="",document.getElementById(Te._addUID("GPlocationOriginPointer_"+Ue)).checked=!1,document.getElementById(Te._addUID("GPlocationOrigin_"+Ue)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(Te._addUID("GPlocationOriginCoords_"+Ue)).className="GPelementHidden gpf-hidden",document.getElementById(Te._addUID("GPlocationStageRemove_"+Ue))&&(document.getElementById(Te._addUID("GPlocationStageRemove_"+Ue)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(Te._addUID("GPlocationStageAdd"))&&(document.getElementById(Te._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),Te.onLocationClearPointClick(Be)}),Oe},_createLocationAutoCompleteteInputElement:function(ke){var e=this,Te=document.createElement("input");return Te.id=this._addUID("GPlocationOrigin_"+ke),Te.className="GPelementShow gpf-show gpf-input fr-input",Te.type="text",Te.placeholder="Saisir une adresse, un lieu...",Te.autocomplete="off",Te.addEventListener("keyup",function(Oe){var Be=Oe.which||Oe.keyCode;if(!(Be===13||Be===10||Be===38||Be===40)){var Ue=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Ue)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Oe)}}),Te.addEventListener("keydown",function(Oe){var Be=Oe.which||Oe.keyCode,Ue=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+ke));if(Ue){var He=Ue.getElementsByClassName("GPautoCompleteProposal current"),We=Ue.getElementsByClassName("GPautoCompleteProposal"),Cn=We.length;if(Cn){var An=null;if(He.length)An=He[0];else{An=We[0],An.className="GPautoCompleteProposal current",An.style.color="#000000",An.style["background-color"]="#CEDBEF";return}var En=parseInt(SelectorID.index(An.id),10),Sn=En===Cn-1?We[0]:We[En+1],Tn=En===0?We[Cn-1]:We[En-1];switch(An.style["background-color"]="",An.style.color="",Tn.style["background-color"]="",Tn.style.color="",Sn.style["background-color"]="",Sn.style.color="",Be){case 38:logger$s.log("arrow up"),An.className="GPautoCompleteProposal",Tn.className="GPautoCompleteProposal current",Tn.style.color="#000000",Tn.style["background-color"]="#CEDBEF";break;case 40:logger$s.log("arrow down"),An.className="GPautoCompleteProposal",Sn.className="GPautoCompleteProposal current",Sn.style.color="#000000",Sn.style["background-color"]="#CEDBEF";break;case 13:logger$s.log("enter"),An.click(Oe);break}An.focus()}}}),Te},_createLocationCoordinateInputElement:function(ke){var e=this,Te=document.createElement("input");return Te.id=this._addUID("GPlocationOriginCoords_"+ke),Te.className="GPelementHidden gpf-input gpf-hidden fr-input",Te.type="text",Te.disabled=!1,Te.addEventListener("click",function(){var Oe=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+Oe)).click()}),Te},_createLocationPointerShowInputElement:function(ke){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+ke),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(ke){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPlocationOriginPointerImg_"+ke),Te.htmlFor=this._addUID("GPlocationOriginPointer_"+ke),Te.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",Te.title="Pointer un lieu sur la carte",Te.setAttribute("type","button"),Te.addEventListener("click",function(Oe){Oe.preventDefault(),Oe.stopPropagation();var Be=SelectorID.index(this.id),Ue=document.getElementsByClassName(e._addUID("GPlocationPoint")),He,We,Cn;for(He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),Be!==Cn&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+Cn)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Cn)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).value="",He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+Be)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).value="Pointer un lieu sur la carte",He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),Be===Cn?document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Be)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+Be)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).disabled=!0}e.onActivateMapPointClick(Oe)}),Te},_createLocationRemovePointElement:function(ke){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPlocationStageRemove_"+ke),Te.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",Te.title="Supprimer l'tape",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button"),Te.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be);var Ue=document.getElementsByClassName(e._addUID("GPlocationPoint")),He=Ue.length-1,We=Ue[0].childNodes[0].id,Cn=Ue[He].childNodes[0].id,An=SelectorID.index(We),En=SelectorID.index(Cn);if(ke!==An&&ke!==En){var Sn=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+Sn)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+Sn)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Sn)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Sn)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+Sn)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+Sn)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(Oe)}}),Te},_createLocationAddPointElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une tape",checkDsfr()&&(e.innerText="Ajouter une tape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(Te){for(var Oe=1,Be=0,Ue=document.getElementsByClassName(ke._addUID("GPlocationPoint")),He=1;He<Ue.length-1;He++){var We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We);document.getElementById(ke._addUID("GPlocationPoint_"+Cn))&&(document.getElementById(ke._addUID("GPlocationPoint_"+Cn)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?Oe===1&&(Oe=Cn):Be++)}Oe<Ue.length&&(document.getElementById(ke._addUID("GPlocationPoint_"+Oe)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(ke._addUID("GPlocationPoint_"+Oe)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),Be===4&&(document.getElementById(ke._addUID("GPlocationStageAdd")).style.display="none");var An=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!An),ke.onLocationAddPointClick(Te)}),e},_createLocationAutoCompleteElement:function(ke){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+ke),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(ke){var e=this,Te=document.createElement("div");return Te.id=this._addUID("GPlocationAutoCompleteResult_"+ke),Te.className="GPadvancedAutoCompleteResult gpf-panel__list",Te.addEventListener?Te.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+ke)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+ke)).classList.replace("gpf-hidden","gpf-visible")},!1):Te.attachEvent&&Te.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+ke)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+ke)).classList.replace("gpf-hidden","gpf-visible")}),Te},_createLocationAutoCompletedLocationElement:function(ke,e,Te){var Oe=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+ke)),Be=document.createElement("div");Be.id=this._addUID("AutoCompletedLocation_"+Te),Be.className="GPautoCompleteProposal gpf-panel__items",Be.title=GeocodeUtils.getSuggestedLocationFreeform(e),Be.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),Oe.appendChild(Be)},GPdisplayCoordinate:function(ke){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),Te=0;Te<e.length;Te++){var Oe=e[Te].childNodes[0].id,Be=SelectorID.index(Oe);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+Be)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+Be)).value=ke,document.getElementById(this._addUID("GPlocationOriginCoords_"+Be)).disabled=!1;for(var Ue=0;Ue<e.length;Ue++){Oe=e[Ue].childNodes[0].id;var He=SelectorID.index(Oe);document.getElementById(this._addUID("GPlocationPoint_"+He)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+He))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+He)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$r=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Zf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$r.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,Te){var Oe=this.getMap(),Be=Oe.getView().getProjection().getCode();Te||(Te=Be),this._setCoordinate(e,Te),e=transform$1(e,Te,Be),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,Te=this._createMainContainerElement(),Oe=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);Te.appendChild(Oe);var Be=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);Oe.appendChild(Be);var Ue=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Ue.addEventListener?Ue.addEventListener("click",()=>this.onAutoCompleteInputClick()):Ue.attachEvent&&Ue.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),Oe.appendChild(Ue);var He=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);Oe.appendChild(He);var We=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);Oe.appendChild(We);var Cn=this._inputShowPointer=this._createLocationPointerInputElement(e);if(Oe.appendChild(Cn),this.options.tag.addOption){var An=this._addPointElement=this._createLocationAddPointElement();Oe.appendChild(An)}if(this.options.tag.removeOption){var En=this._removePointElement=this._createLocationRemovePointElement(e);Oe.appendChild(En)}var Sn=this._suggestedContainer=this._createLocationAutoCompleteElement(e),Tn=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return Sn.appendChild(Tn),Te.appendChild(Sn),Te}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var Te=e.target.value;if(Te){var Oe=this.options.autocompleteOptions||{},Be=Oe.onSuccess||null,Ue=Oe.onFailure||null;if(this._currentLocation=Te,Te.length<3){this._clearSuggestedLocation();return}var He=this;this._requestAutoComplete({text:Te,maximumResponses:5,onSuccess:function(Cn){if(Cn){var An=Cn.suggestedLocations;He._fillAutoCompletedLocationListContainer(An),Be&&Be.call(this,Cn)}},onFailure:function(Cn){He._clearSuggestedLocation(),logger$r.log(Cn.message),Ue&&Ue.call(this,Cn)}});var We=this.getMap();We.on("click",()=>this._hideSuggestedLocation()),We.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(Te){var Oe=[this._suggestedLocations[Te].position.x,this._suggestedLocations[Te].position.y];this._coordinate=Oe;var Be={type:this._suggestedLocations[Te].type,fields:this._suggestedLocations[Te]},Ue=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[Te]);this._setLabel(Ue);var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",We)),this._setPosition(Oe),this._setMarker(Oe,Be,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",Te=>this.onMouseMapClick(Te)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$r.log("onRouteAddPointClick",e)}onMouseMapClick(e){var Te=e.coordinate;if(!(!e.map||!e.map.getView())){var Oe=e.map.getView().getProjection();this._setCoordinate(Te,Oe),this._setMarker([Te[0],Te[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var Te=this.getMap(),Oe=Te.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}_setCoordinate(e,Te){this._coordinate=transform$1(e,Te,"EPSG:4326");var Oe=this._coordinate[0].toFixed(4),Be=this._coordinate[1].toFixed(4),Ue=Be+" / "+Oe;this.GPdisplayCoordinate(Ue)}_setPosition(e){var Te=this.getMap().getView();Te.setCenter(e)}_setMarker(e,Te,Oe){var Be=this.getMap();if(this._marker!=null&&(Be.removeOverlay(this._marker),this._marker=null),e){var Ue=document.createElement("img");Ue.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Ue,stopEvent:!1}),Be.addOverlay(this._marker),Oe&&logger$r.log("marker information : ",Te)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$r.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$r.log(e);var Te={};Helper.assign(Te,this.options.autocompleteOptions),Helper.assign(Te,e);var Oe=this._resources.AutoCompletion||null;Oe&&Array.isArray(Oe)&&(Te.filterOptions||(Te.filterOptions={}),Te.filterOptions.type=Oe),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$r.log(Te),Gp.Services.autoComplete(Te)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var Te=this._suggestedList;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);for(var Oe=0;Oe<e.length;Oe++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[Oe],Oe);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e}},logger$q=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{layer:null,control:null,target:null,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:" ",button:""},callback:null},logger$q.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:null}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.buttonOptions=null,this.inputName=null,this.inputDesc=null,this.menu=null,this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer(),Te=e.querySelector(".container-buttons-plugin");this.options.target=Te||e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options={layer:null,control:null,target:null,download:!0,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",direction:"row",menu:!1,menuOptions:{above:!1,outside:!1,labelName:!0,labelDesc:!0,selectFormat:!0},icons:{menu:" ",button:"export"},callback:null};var Te=Helper.assign(this.options.icons,e.icons),Oe=Helper.assign(this.options.menuOptions,e.menuOptions);Helper.assign(this.options,e),Helper.assign(this.options.icons,Te),Helper.assign(this.options.menuOptions,Oe),logger$q.debug(this.options),this.options.layer,this.options.control,this.options.target;var Be=this.options.format;Be?this.setFormat(Be):this.setFormat(""),this.options.name||this.setName("export"),this.options.description||this.setDescription("export"),this.options.title||this.setTitle("Exporter"),this.options.kind||this.setKind("secondary"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.options.icons.menu+this.options.title);var Te=document.createElement("div");Te.id=this._addUID("GPexportContainer"),Te.className="GPexportMenuContainer gpf-export-menu-container gpf-export-menu-container-row-reverse",this.options.direction==="column"&&Te.classList.replace("gpf-export-menu-container-row-reverse","gpf-export-menu-container-column-reverse");var Oe=this.stringToHTML(`
            <div class="GPexportMenuHidden gpf-accordion fr-accordion ${this.menuClassHidden}">
                <h3 class="gpf-accordion__title fr-accordion__title">
                    <button type="button" 
                        id="GPexportBtnMenuContent-${this.uid}"
                        class="gpf-accordion__btn fr-accordion__btn" 
                        aria-expanded="false" aria-controls="GPexportMenuContent-${this.uid}">options</button>
                </h3>
                <div id="GPexportMenuContent-${this.uid}"
                    class="GPexportMenuContent fr-collapse fr-mx-2w">
                    <div id="GPexportMenuName-${this.uid}" 
                        class="GPexportMenuName">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputName-${this.uid}" title="Nom">Nom</label>
                        <input type="text" id="GPexportMenuInputName-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuDesc-${this.uid}"
                        class="GPexportMenuDesc">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputDesc-${this.uid}" title="Description">Description</label>
                        <input type="text" id="GPexportMenuInputDesc-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuFormat-${this.uid}">
                        <label class="GPlabel gpf-label fr-label" title="Formats">Formats</label>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGeojson-${this.uid}"
                                name="format" 
                                value="geojson">
                            <label class="fr-label container" for="GPmenuFormatGeojson-${this.uid}">GeoJSON
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatKml-${this.uid}"
                                name="format" 
                                value="kml">
                            <label class="fr-label container" for="GPmenuFormatKml-${this.uid}">KML
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGpx-${this.uid}"
                                name="format" 
                                value="gpx">
                            <label class="fr-label container" for="GPmenuFormatGpx-${this.uid}">GPX
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                    <div id="GPexportMenuButtons-${this.uid}" 
                        class="GPexportMenuButtons">
                        <button 
                            type="button"
                            id="GPexportMenuButtonValidate-${this.uid}" 
                            class="GPexportMenuButtonValidate GPsubmit gpf-btn gpf-btn-icon-export-validate fr-btn fr-btn--secondary fr-m-1w">
                            Valider
                        </button>
                        <button 
                            type="button"
                            id="GPexportMenuButtonCancel-${this.uid}" 
                            class="GPexportMenuButtonIconCancel GPsubmit gpf-btn gpf-btn-icon-export-cancel fr-btn fr-btn--secondary fr-m-1w">
                            Annuler
                        </button>
                    </div>
                </div>
            </div>
        `);if(this.menu=Oe.firstChild,this.menu){if(this.options.menu){var Be=this.menu.className;this.menu.className=Be.replace(this.menuClassHidden,"")}var Ue=this.options.format.toUpperCase(),He=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let ti=0;ti<He.length;ti++){var We=He[ti];We.id.toUpperCase().includes(Ue)&&(We.checked=!0),We.addEventListener("change",ri=>this.onChangeRadioFormat(ri))}this.buttonOptions=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid),this.buttonOptions&&this.buttonOptions.addEventListener("click",ti=>this.onClickButtonToggleOptions(ti)),this.inputName=this.menu.querySelector("#GPexportMenuInputName-"+this.uid),this.inputDesc=this.menu.querySelector("#GPexportMenuInputDesc-"+this.uid),this.inputName.addEventListener("change",ti=>this.onChangeInputName(ti)),this.inputName.addEventListener("focusin",ti=>this.onFocusInputName(ti)),this.inputDesc.addEventListener("change",ti=>this.onChangeInputDesc(ti)),this.inputDesc.addEventListener("focusin",ti=>this.onFocusInputDesc(ti));var Cn=this.menu.querySelector("#GPexportMenuButtonValidate-"+this.uid);Cn.addEventListener("click",ti=>this.onClickButtonValidate(ti));var An=this.menu.querySelector("#GPexportMenuButtonCancel-"+this.uid);if(An.addEventListener("click",ti=>this.onClickButtonCancel(ti)),this.options.menuOptions){if(this.options.menuOptions.outside){this.menu.classList.remove("gpf-accordion","fr-accordion");var En=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid);En.classList.add("gpf-hidden");var Sn=this.menu.querySelector("#GPexportMenuContent-"+this.uid);Sn.classList.remove("fr-collapse");var Tn=this.menu.querySelector("#GPexportMenuButtons-"+this.uid);Tn.classList.add("gpf-hidden")}if(this.options.menuOptions.above&&(Te.classList.replace("gpf-export-menu-container-row-reverse","gpf-export-menu-container-row"),Te.classList.replace("gpf-export-menu-container-column-reverse","gpf-export-menu-container-column")),!this.options.menuOptions.labelName){var Ln=this.menu.querySelector("#GPexportMenuName-"+this.uid);Ln.classList.add("gpf-hidden")}if(!this.options.menuOptions.labelDesc){var Bn=this.menu.querySelector("#GPexportMenuDesc-"+this.uid);Bn.classList.add("gpf-hidden")}if(!this.options.menuOptions.selectFormat){var ei=this.menu.querySelector("#GPexportMenuFormat-"+this.uid);ei.classList.add("gpf-hidden")}}}Te.appendChild(this.menu);var ni=this.stringToHTML(`
            <button 
                type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPexportButtonExportIcon GPsubmit gpf-btn gpf-btn-icon-export-submit fr-btn fr-m-1w">
                ${e}
            </button>
        `);switch(this.button=ni.firstChild,this.button&&this.button.addEventListener("click",ti=>this.onClickButtonExport(ti)),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}if(!this.options.icons.button)this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");else switch(this.options.icons.button){case"export":break;case"save":this.button.classList.replace("GPexportButtonExportIcon","GPexportButtonSaveIcon"),this.button.classList.replace("gpf-btn-icon-export-submit","gpf-btn-icon-save-submit");break;default:this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");break}Te.appendChild(this.button),this.container=Te}stringToHTML(e){var Te=function(){if(!window.DOMParser)return!1;var He=new DOMParser;try{He.parseFromString("x","text/html")}catch{return!1}return!0};if(Te()){var Oe=new DOMParser,Be=Oe.parseFromString(e,"text/html");return Be.body}var Ue=document.createElement("div");return Ue.innerHTML=e,Ue}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,Te,Oe){var Be=null;if(!e)return logger$q.warn("Impossible to export : no layer is hosting features."),Be;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$q.warn("Impossible to export : no features found."),Be;e.getSource().getFeatures().forEach(En=>{var Sn=En.getStyle();!Sn&&this.options.control&&typeof this.options.control.getStyle=="function"&&En.setStyle(this.options.control.getStyle())});var Ue={defaultStyle:Oe,extensions:{}};Te&&(Ue.extensions={"geoportail:compute":Te}),this.options.description&&(Ue.extensions.description=this.inputDesc&&this.inputDesc.value?this.inputDesc.value:this.options.description);var He=null;switch(this.options.format.toUpperCase()){case"KML":Ue.writeStyles=!0,Ue.showPointNames=!0,He=new KML(Ue);break;case"GPX":He=new GPX(Ue);break;case"GEOJSON":He=new GeoJSON(Ue);break}if(!He)return logger$q.warn("Impossible to export : format unknown !?"),Be;var We=e.getSource().getProjection(),Cn=this.getMap();Cn&&(We=We||Cn.getView().getProjection());var An=e.getSource().getFeatures();return Be=He.writeFeatures(An,{dataProjection:"EPSG:4326",featureProjection:We||"EPSG:3857"}),Be}onClickButtonExport(e){this.isPluggableControl()||logger$q.warn("Componant not pluggable with the control !");var Te=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getLayer():this.options.layer,Oe=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},Be=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Ue=this.exportFeatures(Te,Oe,Be);if(!(!Ue||Ue==="null")){if(this.dispatchEvent({type:"button:clicked",content:Ue,name:this.options.name,description:this.options.description,format:this.options.format,layer:Te}),this.options.download){var He=document.createElement("a"),We="utf-8";if(He.setAttribute("href","data:"+this.mimeType+";charset="+We+","+encodeURIComponent(Ue)),He.setAttribute("download",this.options.name+this.extension),document.createEvent){var Cn=document.createEvent("MouseEvents");Cn.initEvent("click",!0,!0),He.dispatchEvent(Cn)}else He.click()}this.options.callback&&typeof this.options.callback=="function"&&this.options.callback(Ue,Te)}}onChangeRadioFormat(e){this.setFormat(e.target.value)}onChangeInputName(e){this.setName(e.target.value)}onFocusInputName(e){var Te=this.getMap();Te&&this.options.control&&typeof this.options.control.disable=="function"&&this.options.control.disable()}onChangeInputDesc(e){this.setDescription(e.target.value)}onFocusInputDesc(e){var Te=this.getMap();Te&&this.options.control&&typeof this.options.control.disable=="function"&&this.options.control.disable()}onClickButtonToggleOptions(e){e.target.ariaExpanded=e.target.ariaExpanded!=="true";var Te=this.menu.querySelector("#"+e.target.getAttribute("aria-controls"));Te&&(e.target.ariaExpanded==="true"?(Te.classList.add("fr-collapse--expanded"),this.menu.classList.add("gpf-full-container"),this.menu.classList.add("gpf-accordion--opened"),Te.classList.remove("GPelementHidden")):(Te.classList.remove("fr-collapse--expanded"),this.menu.classList.remove("gpf-full-container"),this.menu.classList.remove("gpf-accordion--opened"),Te.classList.add("GPelementHidden")))}onClickButtonValidate(e){this.setName(this.inputName.value),this.setDescription(this.inputDesc.value),this.buttonOptions.click()}onClickButtonCancel(e){this.inputName.value="",this.inputDesc.value="",this.buttonOptions.click()}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setDescription(e){this.options.description=e}setTitle(e){this.options.title=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+e:e)}setKind(e){if(this.options.kind=e,this.button)switch(this.button.classList.remove("fr-btn--tertiary","gpf-btn--tertiary"),this.button.classList.remove("fr-btn--secondary","gpf-btn--secondary"),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}}setMenu(e){if(this.options.menu=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+this.options.title:this.options.title),this.menu&&this.options.menu){var Te=this.menu.className;this.menu.className=Te.replace(this.menuClassHidden,"");var Oe=this.options.format.toUpperCase(),Be=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let He=0;He<Be.length;He++){var Ue=Be[He];Ue.id.toUpperCase().includes(Oe)&&(Ue.checked=!0)}}}setMenuOptions(e){}setLayer(e){this.options.layer=e}setDownload(e){this.options.download=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$p=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GProute"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowRoutePictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowRoutePanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowRoutePanelClick(Oe)}),e},_createRoutePanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GProutePanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createRoutePanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createDrawingButtonsPluginDiv:function(){var ke=document.createElement("div");return ke.className="container-buttons-plugin fr-mx-2w",ke},_createRoutePanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Calcul d'itinraire",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GProutePanelClose"),Oe.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Masquer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowRoutePicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowRoutePicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createRoutePanelFooterElement:function(){var ke=document.createElement("div");return ke.className="GPpanelFooter gpf-panel__footer fr-modal__footer",ke},_createRoutePanelFormPointLabel:function(ke,e=!0){var Te=document.createElement("p");Te.innerHTML=ke;var Oe=e?"":" GPelementHidden gpf-hidden";return Te.className="GProutePointLabelP gpf-label fr-label"+Oe,Te},_createRoutePanelFormElement:function(){var ke=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(Te){logger$p.log(Te),Te.preventDefault();var Oe=document.getElementsByClassName(ke._addUID("GPlocationPoint")),Be=Oe[0].childNodes[0].id,Ue=Oe[Oe.length-1].childNodes[0].id,He=SelectorID.index(Be),We=SelectorID.index(Ue);if(document.getElementById(ke._addUID("GPlocationOrigin_"+He)).value===""&&document.getElementById(ke._addUID("GPlocationOriginCoords_"+He)).value===""||document.getElementById(ke._addUID("GPlocationOrigin_"+We)).value===""&&document.getElementById(ke._addUID("GPlocationOriginCoords_"+We)).value==="")return!1;ke._addRouteResultsStagesValuesElement(Oe);var Cn=null;document.getElementById(ke._addUID("GProuteComputationChoice"))&&(document.getElementById(ke._addUID("GProuteComputationFastest"))&&document.getElementById(ke._addUID("GProuteComputationFastest")).checked&&(Cn=document.getElementById(ke._addUID("GProuteComputationFastest")).value),document.getElementById(ke._addUID("GProuteComputationShortest"))&&document.getElementById(ke._addUID("GProuteComputationShortest")).checked&&(Cn=document.getElementById(ke._addUID("GProuteComputationShortest")).value));var An=null;document.getElementById(ke._addUID("GProuteTransportCar"))&&document.getElementById(ke._addUID("GProuteTransportCar")).checked&&(An=document.getElementById(ke._addUID("GProuteTransportCar")).value),document.getElementById(ke._addUID("GProuteTransportPedestrian"))&&document.getElementById(ke._addUID("GProuteTransportPedestrian")).checked&&(An=document.getElementById(ke._addUID("GProuteTransportPedestrian")).value);for(var En=[],Sn=document.getElementsByClassName("GProuteExclusionsOption"),Tn=0;Tn<Sn.length;Tn++){var Ln=Sn[Tn].htmlFor,Bn=document.getElementById(Ln);Bn.checked||En.push(Bn.value)}return ke.onRouteComputationSubmit({computation:Cn,transport:An,exclusions:En}),!1}),e},_createRoutePanelResultsElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GProuteResultsPanel"),ke.className="GPelementHidden gpf-hidden",ke.appendChild(this._createRouteResultsStagesElement()),ke.appendChild(this._createRouteResultsElement()),ke.appendChild(this._createRouteShowResultsDetailsElement()),ke.appendChild(this._createRouteResultsDetailsElement()),ke},_createRouteWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GProuteCalcWaitingContainer"),ke.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createRouteResultsStagesElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GProuteResultsStages"),ke},_addRouteResultsStagesValuesElement:function(ke){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<ke.length;e++){var Te=ke[e].childNodes[0].id,Oe=SelectorID.index(Te);if(document.getElementById(this._addUID("GPlocationPoint_"+Oe)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var Be=document.createElement("div");Be.className="GProuteResultsStages";var Ue=document.createElement("div");Ue.className="GProuteResultStageLabel",Ue.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+Oe)).innerHTML+" :",Be.appendChild(Ue);var He=document.createElement("div");He.className="GProuteResultStageValue";var We=document.getElementById(this._addUID("GPlocationOriginCoords_"+Oe)),Cn=We.value,An=We.className==="GPelementVisible gpf-visible";Cn!==null&&Cn!==""&&An?He.innerHTML=Cn:He.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+Oe)).value,Be.appendChild(He),He.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(Be)}}},_createRouteResultsElement:function(){var ke=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var Te=document.createElement("div");Te.id=this._addUID("GProuteResultsValues"),e.appendChild(Te);var Oe=document.createElement("div");Oe.id=this._addUID("GProuteResultsMode");var Be=document.createElement("select");Be.id=this._addUID("GProuteResultsComputationSelect"),Be.className="GPselect gpf-select fr-select",Be.addEventListener("change",function(An){ke.onRouteModeComputationChangeAndRun(An)});for(var Ue=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],He=0;He<Ue.length;He++){var We=document.createElement("option");We.value=Ue[He].code,We.text=Ue[He].label,Be.appendChild(We)}Oe.appendChild(Be),e.appendChild(Oe);var Cn=document.createElement("div");return Cn.id=this._addUID("GProuteResultsNew"),Cn.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",Cn.title="Modifier le calcul",Cn.addEventListener("click",function(An){document.getElementById(ke._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(ke._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",ke.onShowRouteResultsNewClick(An)}),e.appendChild(Cn),e},_addRouteResultsValuesElement:function(ke,e,Te){var Oe=document.getElementById(this._addUID("GProuteResultsValues"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);var Be=document.createElement("div");Be.className="GProuteResultsValue";var Ue=document.createElement("label");Ue.className="GProuteResultsValueLabel",Ue.innerHTML="Distance :",Be.appendChild(Ue);var He=0,We=parseInt(ke/1e3,10);if(!We)He=Math.round(ke)+" m";else{var Cn=Math.round(ke);Cn=Cn/1e3,He=Cn+" km"}var An=document.createElement("div");An.id=this._addUID("GProuteResultsValueDist"),An.innerHTML=He,Be.appendChild(An),Oe.appendChild(Be);var En=document.createElement("div");En.className="GProuteResultsValue";var Sn=document.createElement("label");Sn.className="GProuteResultsValueLabel",Sn.innerHTML="Dure :",En.appendChild(Sn);var Tn=document.createElement("div");return Tn.id=this._addUID("GProuteResultsValueDist"),Tn.innerHTML=Te(e),En.appendChild(Tn),Oe.appendChild(En),Oe},_createRouteShowResultsDetailsElement:function(){var ke=document.createElement("div");if(ke.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",ke.appendChild(e)}var Te=document.createElement("input");Te.id=this._addUID("GProuteResultsShowDetails"),Te.type="checkbox",ke.appendChild(Te);var Oe=document.createElement("label");if(Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GProuteResultsShowDetails"),Oe.innerHTML="Afficher le dtail",ke.appendChild(Oe),!checkDsfr()){var Be=document.createElement("label");Be.htmlFor=this._addUID("GProuteResultsShowDetails"),Be.innerHTML="Masquer le dtail",ke.appendChild(Be);var Ue=document.createElement("div");Ue.className="GPfakeBorder",ke.appendChild(Ue)}return ke},_createRouteResultsDetailsElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GProuteResultsDetails"),ke},_addRouteResultsDetailsElement:function(ke,e){var Te=this,Oe=document.getElementById(this._addUID("GProuteResultsDetails"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);for(var Be=0,Ue=0,He=0;He<ke.length;He++){var We=He+1,Cn=ke[He],An=document.createElement("div");An.className="GProuteResultsDetailsNumber",An.innerHTML=We+".",Oe.appendChild(An),Ue+=parseFloat(Cn.duration),Be+=parseFloat(Cn.distance);var En=0,Sn=parseInt(Be/1e3,10);if(!Sn)En=Math.round(Be)+" m";else{var Tn=Math.round(Be);Tn=Tn/1e3,En=Tn+" km"}var Ln=document.createElement("div");Ln.className="GProuteResultsDetailsInstruction",Ln.id=this._addUID("GProuteResultsDetailsInstruction_"+We),Ln.title="distance : "+En+" / temps : "+e(Ue),Ln.innerHTML=Cn.instruction,Ln.addEventListener("mouseover",function(Bn){Te.onRouteResultsDetailsMouseOver(Bn)}),Ln.addEventListener("mouseout",function(Bn){Te.onRouteResultsDetailsMouseOut(Bn)}),Ln.addEventListener("click",function(Bn){typeof Te.onRouteResultsDetailsClick=="function"&&Te.onRouteResultsDetailsClick(Bn)}),Oe.appendChild(Ln)}return Oe},_createRoutePanelFormPointElement:function(ke,e,Te){var Oe=this,Be=document.createElement("div");Be.id="GProutePoint"+ke,Be.className=Te?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Ue=document.createElement("label");Ue.id="GProuteOriginLabel"+ke,Ue.htmlFor="GProuteOrigin"+ke,Ue.innerHTML=e,Ue.addEventListener("click",function(){var En=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+En).value="";for(var Sn=1;Sn<8;Sn++)document.getElementById("GProutePoint"+Sn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+En).checked=!1,document.getElementById("GProuteOrigin"+En).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+En).className="GPelementHidden gpf-hidden"}),Be.appendChild(Ue);var He=document.createElement("input");He.id="GProuteOrigin"+ke,He.className="GPelementVisible gpf-visible",He.type="text",He.placeholder="Saisir une adresse, un lieu...",He.addEventListener("keyup",function(En){var Sn=En.which||En.keyCode;if(!(Sn===13||Sn===10)){var Tn=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+Tn).value.length>2?document.getElementById("GProuteAutoCompleteList"+Tn).style.display="block":document.getElementById("GProuteAutoCompleteList"+Tn).style.display="none",Oe.onAutoCompleteSearchText(En)}}),He.addEventListener("blur",function(){var En=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+En).style.display="none"}),Be.appendChild(He);var We=document.createElement("input");We.id="GProuteOriginCoords"+ke,We.className="GPelementHidden gpf-hidden",We.type="text",We.disabled=!0,Be.appendChild(We);var Cn=document.createElement("input");Cn.id="GProuteOriginPointer"+ke,Cn.type="checkbox",Be.appendChild(Cn);var An=document.createElement("label");return An.id="GProuteOriginPointerImg"+ke,An.htmlFor="GProuteOriginPointer"+ke,An.className="GProuteOriginPointerImg",An.title="Pointer un lieu sur la carte",An.addEventListener("click",function(En){En.preventDefault(),En.stopPropagation();var Sn=this.id.charAt(this.id.length-1),Tn;for(Tn=1;Tn<8;Tn++)Sn!==Tn&&(document.getElementById("GProuteOriginPointer"+Tn).checked=!1,document.getElementById("GProuteOriginCoords"+Tn).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+Tn).value="",document.getElementById("GProuteOrigin"+Tn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Tn).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+Sn).checked){for(document.getElementById("GProuteOriginCoords"+Sn).value="",Tn=1;Tn<8;Tn++)document.getElementById("GProutePoint"+Tn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Sn).checked=!1,document.getElementById("GProuteOrigin"+Sn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Sn).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+Sn).value="Pointer un lieu sur la carte",Tn=1;Tn<8;Tn++)Sn===Tn?document.getElementById("GProutePoint"+Tn).style.display="flex":document.getElementById("GProutePoint"+Tn).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Sn).checked=!0,document.getElementById("GProuteOrigin"+Sn).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+Sn).className="GPelementVisible gpf-visible"}Oe.onRouteMapPointClick(En)}),Be.appendChild(An),Be},_createRoutePanelFormRemoveStageElement:function(ke){var e=this,Te=document.createElement("div");return Te.id="GProuteStageRemove"+ke,Te.className="GProuteStageRemove",Te.title="Supprimer l'tape",ke!==1&&ke!==7&&Te.addEventListener("click",function(Oe){var Be=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+Be).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+Be).value="",document.getElementById("GProuteOrigin"+Be).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Be).value="",document.getElementById("GProuteOriginCoords"+Be).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(Oe)}),Te},_createRoutePanelFormAddStageElement:function(){var ke=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une tape",e.addEventListener("click",function(Te){for(var Oe=1,Be=0,Ue=2;Ue<7;Ue++)document.getElementById("GProutePoint"+Ue).className==="GPflexInput GProuteStageFlexInputHidden"?Oe===1&&(Oe=Ue):Be++;Oe<7&&(document.getElementById("GProutePoint"+Oe).className="GPflexInput GProuteStageFlexInput"),Be===4&&(document.getElementById("GProuteStageAdd").style.display="none"),ke.onRouteAddPointClick(Te)}),e},_createRoutePanelFormAutoCompleteListElement:function(ke){var e=this,Te=document.createElement("div");return Te.id="GProuteAutoCompleteList"+ke,Te.className="GPadvancedAutoCompleteList",Te.addEventListener?Te.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+ke).style.display="none"},!1):Te.attachEvent&&Te.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+ke).style.display="none"}),Te},_createRouteAutoCompletedLocationElement:function(ke,e,Te){var Oe=document.getElementById("GProuteAutoCompleteList"+e),Be=document.createElement("div");Be.id="AutoCompletedLocation"+Te,Be.className="GPautoCompleteProposal",Be.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(ke),Oe.appendChild(Be)},_createRoutePanelFormModeChoiceTransportElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GProuteTransportChoice");var Oe=document.createElement("label");Oe.className="GProuteModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de dplacement",Te.appendChild(Oe);var Be=document.createElement("div");Be.className="gpf-radio-btn-group";for(var Ue=0;Ue<ke.length;Ue++){var He=ke[Ue],We=document.createElement("div");if(We.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",He==="Voiture"){var Cn=document.createElement("input");Cn.id=this._addUID("GProuteTransportCar"),Cn.type="radio",Cn.name="GProuteTransport",Cn.value="Voiture",Ue===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(Tn){e.onRouteModeTransportChange(Tn)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(Tn){e.onRouteModeTransportChange(Tn)}),We.appendChild(Cn);var An=document.createElement("label");An.className="GProuteTransportImg gpf-label fr-label",An.htmlFor=this._addUID("GProuteTransportCar"),An.title="Voiture",An.innerHTML="Voiture",We.appendChild(An)}if(He==="Pieton"){var En=document.createElement("input");En.id=this._addUID("GProuteTransportPedestrian"),En.type="radio",En.name="GProuteTransport",En.value="Pieton",Ue===0&&(En.checked=!0),En.addEventListener?En.addEventListener("change",function(Tn){e.onRouteModeTransportChange(Tn)}):En.attachEvent&&En.attachEvent("onchange",function(Tn){e.onRouteModeTransportChange(Tn)}),We.appendChild(En);var Sn=document.createElement("label");Sn.className="GProuteTransportImg gpf-label fr-label",Sn.htmlFor=this._addUID("GProuteTransportPedestrian"),Sn.title="Piton",Sn.innerHTML="Piton",We.appendChild(Sn)}Be.appendChild(We)}return Te.appendChild(Be),Te},_createRoutePanelFormModeChoiceComputeElement:function(){var ke=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var Te=document.createElement("label");Te.className="GProuteComputationLabel gpf-label fr-label",Te.innerHTML="Mode de calcul",e.appendChild(Te);var Oe=document.createElement("div");Oe.className="gpf-radio-btn-group";var Be=document.createElement("div");Be.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ue=document.createElement("input");Ue.id=this._addUID("GProuteComputationFastest"),Ue.type="radio",Ue.name="GProuteComputation",Ue.value="fastest",Ue.checked=!0,Ue.addEventListener?Ue.addEventListener("change",function(En){ke.onRouteModeComputationChange(En)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(En){ke.onRouteModeComputationChange(En)}),Be.appendChild(Ue);var He=document.createElement("label");He.className="gpf-label fr-label",He.htmlFor=this._addUID("GProuteComputationFastest"),He.title="Plus rapide",He.innerHTML="Plus rapide",Be.appendChild(He),Oe.appendChild(Be);var We=document.createElement("div");We.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Cn=document.createElement("input");Cn.id=this._addUID("GProuteComputationShortest"),Cn.type="radio",Cn.name="GProuteComputation",Cn.value="shortest",Cn.addEventListener?Cn.addEventListener("change",function(En){ke.onRouteModeComputationChange(En)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(En){ke.onRouteModeComputationChange(En)}),We.appendChild(Cn);var An=document.createElement("label");return An.className="gpf-label fr-label",An.htmlFor=this._addUID("GProuteComputationShortest"),An.title="Plus court",An.innerHTML="Plus court",We.appendChild(An),Oe.appendChild(We),e.appendChild(Oe),e},_createShowRouteExclusionsPictoElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var Te="";return checkDsfr()&&(Te="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${Te} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowRouteExclusionsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowRouteExclusionsClick(Oe)}),e},_createRoutePanelFormExclusionsElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GProuteExclusions"),ke.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autoriss",ke.appendChild(e),ke},_createRoutePanelFormExclusionOptionsElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Be=ke[Oe];switch(Oe){case"toll":var Ue=document.createElement("input");Ue.id=this._addUID("GProuteExclusionsToll"),Ue.type="checkbox",Ue.value="Toll",Ue.name="Peage",Ue.checked=!Be,Ue.addEventListener?Ue.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(Ue);var He=document.createElement("label");He.className="GProuteExclusionsOption",He.htmlFor=this._addUID("GProuteExclusionsToll"),He.innerHTML="Pages",Te.appendChild(He);break;case"tunnel":var We=document.createElement("input");We.id=this._addUID("GProuteExclusionsTunnel"),We.type="checkbox",We.value="Tunnel",We.name="Tunnel",We.checked=!Be,We.addEventListener?We.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(We);var Cn=document.createElement("label");Cn.className="GProuteExclusionsOption",Cn.htmlFor=this._addUID("GProuteExclusionsTunnel"),Cn.innerHTML="Tunnels",Te.appendChild(Cn);break;case"bridge":var An=document.createElement("input");An.id=this._addUID("GProuteExclusionsBridge"),An.type="checkbox",An.value="Bridge",An.name="Ponts",An.checked=!Be,An.addEventListener?An.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):An.attachEvent&&An.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(An);var En=document.createElement("label");En.className="GProuteExclusionsOption",En.htmlFor=this._addUID("GProuteExclusionsBridge"),En.innerHTML="Ponts",Te.appendChild(En);break}}return Te},_createRouteSubmitFormElement:function(){var ke=document.createElement("input");return ke.id=this._addUID("GProuteSubmit"),ke.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",ke.type="submit",ke.value="Calculer l'itinraire",ke},_createRouteFormResetElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Rinitialiser les paramtres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Rinitialiser les paramtres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe),ke.onRouteResetClick(Te)}),e}},logger$o=LoggerByDefault.getLogger("route"),Route=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var Oe=this;this.export.on("button:clicked",Be=>{Oe.dispatchEvent({type:"export:compute",content:Be.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$o.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$o.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(Te){logger$o.log("no valid geojson given :"+Te.message)}}getData(){var e=[];for(let Oe=0;Oe<this._currentPoints.length;Oe++){const Be=this._currentPoints[Oe];e.push(Be.getCoordinate())}var Te={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(Te.results,this._currentRouteInformations),Te}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var Te=0;Te<e.points.length;Te++){const We=e.points[Te];We&&this._currentPoints[Te].setCoordinate(We,"EPSG:4326")}for(var Oe=0;Oe<this._currentPoints.length;Oe++){var Be=this._currentPoints[Oe];if(Be.getCoordinate()){var Ue=Oe+1+"-"+this._uid,He=Be.getCoordinate()[1].toFixed(4)+" / "+Be.getCoordinate()[0].toFixed(4);document.getElementById("GPlocationOriginCoords_"+Ue).value=He,document.getElementById("GPlocationOrigin_"+Ue).value=He,Oe>0&&Oe<6&&(document.getElementById("GPlocationPoint_"+Ue).className="GPflexInput GPelementHidden gpf-flex gpf-hidden ")}}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let Ln=0;Ln<this._currentPoints.length;Ln++){const Bn=this._currentPoints[Ln];var e=Ln+1,Te=Bn.getCoordinate();if(Te){var Oe=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);Oe.value=Te[1].toFixed(4)+" / "+Te[0].toFixed(4),Ln>0&&Ln<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var Be=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(Be);var Ue;this._currentTransport==="Pieton"?(Ue=document.getElementById("GProuteTransportPedestrian-"+this._uid),Ue&&(Ue.checked="true")):(Ue=document.getElementById("GProuteTransportCar-"+this._uid),Ue&&(Ue.checked="true"));var He=document.getElementById("GProuteComputationSelect-"+this._uid);He&&(He.value=this._currentComputation);var We=document.getElementById("GProuteExclusionsToll-"+this._uid);We&&(this._currentExclusions.indexOf("toll")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Cn&&(this._currentExclusions.indexOf("tunnel")!==-1?Cn.checked=!1:Cn.checked=!0);var An=document.getElementById("GProuteExclusionsBridge-"+this._uid);An&&(this._currentExclusions.indexOf("bridge")!==-1?An.checked=!1:An.checked=!0);var En=this._currentRouteInformations.totalDistance,Sn=this._currentRouteInformations.totalTime,Tn=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);Tn&&this._fillRouteResultsDetailsContainer(En,Sn,Tn),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinraire",description:"Itinraire bas sur un graphe"}},Helper.assign(this.options,e);var Te={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(Te,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var Te=0;Te<e.graphs.length;Te++)typeof e.graphs[Te]=="string"?(e.graphs[Te].toLowerCase()==="pieton"&&(e.graphs[Te]="Pieton"),e.graphs[Te].toLowerCase()==="voiture"&&(e.graphs[Te]="Voiture")):(logger$o.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[Te]=null);else logger$o.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var Te=this._container;if(Te.childElementCount>0)return Te;var Oe=this._showRouteButton=this._createShowRoutePictoElement();Te.appendChild(Oe);var Be=this._panelRouteContainer=this._createRoutePanelElement(),Ue=this._createRoutePanelDivElement();Be.appendChild(Ue);var He=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Ue.appendChild(He);var We=this._formRouteContainer=this._createRoutePanelFormElement();We.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var Cn=this._createRoutePanelFormPointsElement(e),An=0;An<Cn.length;An++)We.appendChild(Cn[An]);We.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),We.appendChild(this._showRouteExclusionsElement);var En=this._createRoutePanelFormExclusionsElement();En.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),We.appendChild(En);var Sn=this._createRoutePanelFooterElement();if(We.appendChild(Sn),!checkDsfr()){var Tn=this._createRouteFormResetElement();Sn.appendChild(Tn)}var Ln=this._createRouteSubmitFormElement();Sn.appendChild(Ln),Ue.appendChild(We);var Bn=this._resultsRouteContainer=this._createRoutePanelResultsElement();Ue.appendChild(Bn);var ei=this._createDrawingButtonsPluginDiv();Ue.appendChild(ei);var ni=this._waitingContainer=this._createRouteWaitingElement();return Ue.appendChild(ni),Te.appendChild(Be),Te.addEventListener&&Te.addEventListener("click",ti=>this._hideRouteSuggestedLocations(ti)),Te}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var Te=this.options.routeOptions;Te.graph&&(this._currentTransport=Te.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var Te in e)e.hasOwnProperty(Te)&&e[Te]&&this._currentExclusions.push(Te);var Oe=this.options.routeOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",Te.appendChild(this._popupContent),Te.appendChild(Oe),Te}_createRoutePanelFormPointsElement(e){var Te=[],Oe=1,Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(Be.setMap(e),this._addFormPointsEventListeners(Be),Te.push(this._createRoutePanelFormPointLabel("Dpart")),Te.push(Be._container),this._currentPoints.push(Be),Oe=2;Oe<7;Oe++){var Ue=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Ue.setMap(e),this._addFormPointsEventListeners(Ue),Te.push(this._createRoutePanelFormPointLabel("tape",!1)),Te.push(Ue._container),this._currentPoints.push(Ue)}var He=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return He.setMap(e),this._addFormPointsEventListeners(He),Te.push(this._createRoutePanelFormPointLabel("Arrive")),Te.push(He._container),this._currentPoints.push(He),Te}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",Te=>this.onRouteOriginLabelClick(Te)),e._inputShowPointer.addEventListener("click",Te=>this.onRouteOriginPointerClick(Te,e)),e._removePointElement&&e._removePointElement.addEventListener("click",Te=>{logger$o.trace("click on _removePointElement",Te)}),e._addPointElement&&e._addPointElement.addEventListener("click",Te=>{logger$o.trace("click on _addPointElement",Te)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",Te=>this.onRouteOriginLabelClick(Te)),e._inputShowPointer.attachEvent("onclick",Te=>this.onRouteOriginPointerClick(Te,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",Te=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",Te=>{})))}onRouteComputationSubmit(e){logger$o.log("onRouteComputationSubmit",e);var Te=this._currentPoints,Oe;if(Te[0]&&Te[0].getCoordinate){var Be=Te[0].getCoordinate();Oe={x:Be[0],y:Be[1]},logger$o.log("start",Oe)}var Ue,He=Te[Te.length-1];if(He&&He.getCoordinate){var We=He.getCoordinate();Ue={x:We[0],y:We[1]},logger$o.log("end",Ue)}for(var Cn=[],An=1;An<Te.length-1;An++)if(Te[An]&&Te[An].getCoordinate){var En=Te[An].getCoordinate();if(En){var Sn={x:En[0],y:En[1]};logger$o.log("step",Sn),Cn.push(Sn)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var Tn=this.options.routeOptions,Ln;Tn.resource?Ln=Tn.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(Ln="bdtopo-valhalla");var Bn=Tn.protocol||"XHR",ei=Tn.timeOut||0;Bn==="JSONP"&&ei===0&&(ei=15e3);var ni=Tn.onFailure!==null&&typeof Tn.onFailure=="function",ti=Tn.onSuccess!==null&&typeof Tn.onSuccess=="function",ri=this;this._requestRouting({startPoint:Oe,endPoint:Ue,viaPoints:Cn,graph:Tn.graph||this._currentTransport,routePreference:Tn.routePreference||this._currentComputation,exclusions:Tn.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:ei,protocol:Bn,resource:Ln,onSuccess:function(oi){logger$o.log(oi),oi&&ri._fillRouteResultsDetails(oi),ti&&Tn.onSuccess.call(ri,oi)},onFailure:function(oi){ri._hideWaitingContainer(),ri._clearRouteResultsDetails(),logger$o.log(oi.message),ni&&Tn.onFailure.call(ri,oi)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,Te){var Oe=this.getMap();Te._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=Oe.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){var Te=this._showRouteButton.ariaPressed;Te==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),!this._geojsonSections&&!this._waiting&&this._clear(),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var Te=e.target.value;Te&&(logger$o.log(Te),this._currentComputation=Te)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var Te=e.target.value;Te&&(this._currentTransport=Te)}onShowRouteExclusionsClick(e){logger$o.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var Te=e.target.value,Oe=e.target.checked;if(!(!Te||typeof Te!="string")){Te=Te.toLowerCase();for(var Be=!1,Ue=null,He=0;He<this._currentExclusions.length;He++)this._currentExclusions[He]===Te&&(Ue=He,Be=!0);!Be&&!Oe&&this._currentExclusions.push(Te),Be&&Oe&&this._currentExclusions.splice(Ue,1)}}onRouteResetClick(){for(var e=this._currentPoints,Te=0;Te<e.length;Te++)e[Te].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.dispatchEvent("route:newresults")}onRouteResultsDetailsMouseOver(e){var Te=e.target.id,Oe=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Be=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));Be.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var Te=e.target.id,Oe=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Be=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));Be.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$o.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var Te=e.totalDistance,Oe=e.totalTime,Be=this._simplifiedInstructions(e.routeInstructions);Be&&this._fillRouteResultsDetailsContainer(Te,Oe,Be);var Ue=e.routeGeometry;Ue&&this._fillRouteResultsDetailsGeometry(Ue,this._defaultFeatureStyle),Be&&Be[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(Be,this._defaultFeatureStyle);var He=e.bbox;if(He){var We=this.getMap(),Cn=[He.left,He.bottom,He.right,He.top],An=We.getView().getProjection().getCode();An!=="EPSG:4326"&&(Cn=transformExtent(Cn,"EPSG:4326",An)),We.getView().fit(Cn,We.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,Te,Oe){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,Te,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(Oe,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,Te){this._clearRouteResultsGeometry();var Oe=this.getMap();if(e){var Be={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Ue=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:Te}),He=Ue.readFeatures(Be,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:He}),style:Te,title:"Mon Itinraire"}),Oe.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,Te){this._clearRouteResultsFeatureGeometry();var Oe=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var Be=0;Be<e.length;Be++){for(var Ue=e[Be],He=Be+1,We=Ue.geometry.coordinates,Cn=0;Cn<We.length;Cn++)typeof We[Cn][0]=="string"&&(We[Cn][0]=parseFloat(We[Cn][0]),We[Cn][1]=parseFloat(We[Cn][1]));this._geojsonObject.features.push({type:"Feature",geometry:Ue.geometry,properties:{popupContent:"("+He+") distance : "+this._convertDistance(Ue.distance)+" / temps : "+this._convertSecondsToTime(Ue.duration)},id:He})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de dpart","marker-symbol":this.options.markersOpts.departure.url}});for(var An=1;An<this._currentPoints.length-1;An++)if(this._currentPoints[An]&&this._currentPoints[An].getCoordinate){var En=this._currentPoints[An].getCoordinate();En&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:En},properties:{description:"Point d'tape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrive","marker-symbol":this.options.markersOpts.arrival.url}});var Sn=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:Te}),Tn=this.getMap().getView().getProjection().getCode(),Ln=Sn.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Tn});this._geojsonSections=new VectorLayer({source:new VectorSource({features:Ln}),style:Te,opacity:.9,title:"Mon Itinraire"});var Bn;this._currentTransport==="Pieton"?(Bn="piton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(Bn="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),Oe.addLayer(this._geojsonSections),Oe.getControls().forEach(ei=>{if(ei instanceof LayerSwitcher){var ni=this._geojsonSections.gpLayerId;ei._layers[ni].title===ni&&ei.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+Bn+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",ei=>this._onResultsFeatureMouseOver(ei)),Oe.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",ei=>this._onResultsFeatureSelect(ei)),Oe.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var Te=e.selected[0],Oe=document.getElementById("GProuteResultsDetailsInstruction_"+Te.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var Be=e.deselected[0],Ue=document.getElementById("GProuteResultsDetailsInstruction_"+Be.getId()+"-"+this._uid);Ue&&Ue.classList&&Ue.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var Te=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),Te.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var Te=document.getElementById("GProuteComputationSelect-"+this._uid);Te&&(Te.value=this._currentComputation);var Oe=document.getElementById("GProuteExclusionsToll-"+this._uid);Oe&&(this._currentExclusions.indexOf("toll")!==-1?Oe.checked=!1:Oe.checked=!0);var Be=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Be&&(this._currentExclusions.indexOf("tunnel")!==-1?Be.checked=!1:Be.checked=!0);var Ue=document.getElementById("GProuteExclusionsBridge-"+this._uid);Ue&&(this._currentExclusions.indexOf("bridge")!==-1?Ue.checked=!1:Ue.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var Te=[],Oe=0;Oe<e.length;Oe++)e[Oe].id.indexOf(this._uid)!==-1&&Te.push(e[Oe]);for(var Be=1;Be<Te.length-1;Be++){var Ue=Te[Be].classList;if(Ue.length!==0)for(var He=0;He<Ue.length;He++)Ue[He]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(Be+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var Te=this._resultsRouteValuesContainer;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var Te=parseInt(e.target.id.split("_")[1][0],10)-1,Oe=0;Oe<this._currentPoints.length;Oe++)Oe!==parseInt(Te,10)&&this._currentPoints[Oe]._hideSuggestedLocation();else for(var Be=0;Be<this._currentPoints.length;Be++)this._currentPoints[Be]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var Te=this;this._timer=setTimeout(function(){Te._waiting===!0?Te._hideWaitingContainer():Te._timer&&clearTimeout(Te._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var Te=[],Oe=e[0];e.length===1&&Te.push(Oe);for(var Be=1;Be<e.length;Be++){var Ue=e[Be];if(Ue.instruction===Oe.instruction){Oe.distance=(parseFloat(Ue.distance)+parseFloat(Oe.distance)).toString(),Oe.duration=(parseFloat(Ue.duration)+parseFloat(Oe.duration)).toString();for(var He=1;He<Ue.geometry.coordinates.length;He++)Oe.geometry.coordinates.push(Ue.geometry.coordinates[He])}else Te.push(Oe),Oe=Ue,Be===e.length-1&&(Te.push(Ue),Oe=null)}return logger$o.log(Te),Te}_convertSecondsToTime(e){var Te="";e=Math.round(e);var Oe=Math.floor(e/(60*60)),Be=e%(60*60),Ue=Math.floor(Be/60);return Oe&&(Te=Oe+"h "),Te+=Ue+" min",Te}_convertDistance(e){var Te="",Oe=parseInt(e/1e3,10);return Oe?Te=Oe+" km":Te=parseInt(e,10)+" m",Te}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPisochron"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowIsoPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowIsoPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowIsoPanelClick(Oe)}),e},_createIsoPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPisochronPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createIsoPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createDrawingButtonsPluginDiv:function(){var ke=document.createElement("div");return ke.className="container-buttons-plugin fr-mx-2w",ke},_createIsoPanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Calcul d'isochrone",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GPisochronPanelClose"),Oe.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowIsochronPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowIsochronPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createIsoPanelFormElement:function(){var ke=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(Te){return Te.preventDefault(),ke.onIsoComputationSubmit(Te),!1}),e},_createIsoWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPisochronCalcWaitingContainer"),ke.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createIsoPanelFooterElement:function(){var ke=document.createElement("div");return ke.className="GPpanelFooter gpf-panel__footer fr-modal__footer",ke},_createIsoPanelFormPointLabel:function(){var ke=document.createElement("p");return ke.id=this._addUID("GPisochronPointLabelP"),ke.className="gpf-label fr-label",ke.innerHTML="Dpart",ke},_createIsoPanelFormTypeChoiceElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPisochronChoice"),ke.className="fr-mt-2w",ke},_createIsoPanelFormTypeChoiceChronElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltChron"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!ke,Oe.addEventListener?Oe.addEventListener("change",function(He){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(He)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),Oe.value="isochron",Te.appendChild(Oe);var Be=document.createElement("label");Be.className="GPisochronChoiceAltImg gpf-label fr-label",Be.htmlFor=this._addUID("GPisochronChoiceAltChron"),Be.innerHTML="Dure",Be.title="Dure",Te.appendChild(Be);var Ue=document.createElement("span");return Ue.id=this._addUID("GPisochronChoiceAltChronTxt"),Ue.className="gpf-hidden",Ue.innerHTML="Dure",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),Te.appendChild(Ue),Te},_createIsoPanelFormTypeChoiceDistElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltDist"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!ke,Oe.addEventListener?Oe.addEventListener("change",function(He){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(He)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),Oe.value="isodistance",Te.appendChild(Oe);var Be=document.createElement("label");Be.className="GPisochronChoiceAltImg gpf-label fr-label",Be.htmlFor=this._addUID("GPisochronChoiceAltDist"),Be.innerHTML="Distance",Be.title="Distance",Te.appendChild(Be);var Ue=document.createElement("span");return Ue.id=this._addUID("GPisochronChoiceAltDistTxt"),Ue.className="gpf-hidden",Ue.innerHTML="Distance",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),Te.appendChild(Ue),Te},_createIsoPanelFormLabelIsochronElement:function(ke){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=ke?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Dfinir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronValueChron"),Te.className=ke?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueChronInput1"),Oe.className="gpf-input fr-input",Oe.min="0",Oe.step="1",Oe.value="0",Oe.type="number",Oe.title="Temps",Oe.addEventListener?Oe.addEventListener("change",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(We)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(We)}),Te.appendChild(Oe);var Be=document.createElement("label");Be.innerHTML="h",Be.className="gpf-label fr-label",Te.appendChild(Be);var Ue=document.createElement("input");Ue.id=this._addUID("GPisochronValueChronInput2"),Ue.className="gpf-input fr-input",Ue.min="0",Ue.max="59",Ue.step="1",Ue.value="0",Ue.type="number",Ue.title="Heures",Ue.addEventListener?Ue.addEventListener("change",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(We)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(We)}),Te.appendChild(Ue);var He=document.createElement("label");return He.innerHTML="min",He.className="gpf-label fr-label",Te.appendChild(He),Te},_createIsoPanelFormLabelIsodistanceElement:function(ke){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=ke?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Dfinir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronValueDist"),Te.className=ke?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueDistInput"),Oe.className="gpf-input fr-input fr-ml-1w",Oe.min="0",Oe.step="any",Oe.value="0",Oe.type="number",Oe.title="Distance",Oe.addEventListener?Oe.addEventListener("change",function(Ue){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ue)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Ue){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ue)}),Te.appendChild(Oe);var Be=document.createElement("label");return Be.innerHTML="km",Be.className="gpf-label fr-label",Te.appendChild(Be),Te},_createIsoPanelFormModeChoiceTransportElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronTransportChoice");var Oe=document.createElement("label");Oe.className="GPisochronModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de dplacement",Te.appendChild(Oe);for(var Be=document.createElement("div"),Ue=0;Ue<ke.length;Ue++){var He=ke[Ue],We=document.createElement("div");if(We.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",He==="Voiture"){var Cn=document.createElement("input");Cn.id=this._addUID("GPisochronTransportCar"),Cn.type="radio",Cn.name="GPisochronTransport",Ue===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(Tn){e.onIsoModeTransportChange(Tn)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(Tn){e.onIsoModeTransportChange(Tn)}),Cn.value="Voiture",We.appendChild(Cn);var An=document.createElement("label");An.className="GPisochronTransportImg gpf-label fr-label",An.htmlFor=this._addUID("GPisochronTransportCar"),An.title="Voiture",An.innerHTML="Voiture",We.appendChild(An)}if(He==="Pieton"){var En=document.createElement("input");En.id=this._addUID("GPisochronTransportPedestrian"),En.type="radio",En.name="GPisochronTransport",Ue===0&&(En.checked=!0),En.addEventListener?En.addEventListener("change",function(Tn){e.onIsoModeTransportChange(Tn)}):En.attachEvent&&En.attachEvent("onchange",function(Tn){e.onIsoModeTransportChange(Tn)}),En.value="Pieton",We.appendChild(En);var Sn=document.createElement("label");Sn.className="GPisochronTransportImg gpf-label fr-label",Sn.htmlFor=this._addUID("GPisochronTransportPedestrian"),Sn.title="Piton",Sn.innerHTML="Piton",We.appendChild(Sn)}Be.appendChild(We)}return Te.appendChild(Be),Te},_createIsoPanelFormModeChoiceDirectionElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronDirectionChoice"),Te.className="fr-my-2w";var Oe=document.createElement("label");Oe.innerHTML="Dfinir un sens de parcours",Oe.className="fr-label",Te.appendChild(Oe);var Be=document.createElement("select");Be.id=this._addUID("GPisochronDirectionSelect"),Be.className="GPselect gpf-select fr-select",Be.title="Sens de parcours",Be.addEventListener("change",function(An){e.onIsoModeDirectionChange(An)});for(var Ue=0;Ue<ke.length;Ue++){var He=ke[Ue];if(He.toLowerCase()==="departure"){var We=document.createElement("option");Ue===0&&(We.selected="selected"),We.value="departure",We.text="Dpart",Be.appendChild(We)}if(He.toLowerCase()==="arrival"){var Cn=document.createElement("option");Ue===0&&(Cn.selected="selected"),Cn.value="arrival",Cn.text="Arrive",Be.appendChild(Cn)}}return Te.appendChild(Be),Te},_createShowIsoExclusionsPictoElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var Te="";return checkDsfr()&&(Te="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${Te} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowIsoSettingsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowIsoSettingsClick(Oe)}),e},_createIsoPanelFormExclusionsElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autoriss",ke.appendChild(e),ke},_createIsoPanelFormExclusionOptionsElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Be=ke[Oe];switch(Oe){case"toll":var Ue=document.createElement("input");Ue.id=this._addUID("GPisoExclusionsToll"),Ue.type="checkbox",Ue.name="Pages",Ue.checked=!Be,Ue.addEventListener?Ue.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),Ue.value="Toll",Te.appendChild(Ue);var He=document.createElement("label");He.className="GPisoExclusionsOption",He.htmlFor=this._addUID("GPisoExclusionsToll"),He.innerHTML="Pages",Te.appendChild(He);break;case"tunnel":var We=document.createElement("input");We.id=this._addUID("GPisoExclusionsTunnel"),We.type="checkbox",We.name="Tunnel",We.checked=!Be,We.addEventListener?We.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),We.value="Tunnel",Te.appendChild(We);var Cn=document.createElement("label");Cn.className="GPisoExclusionsOption",Cn.htmlFor=this._addUID("GPisoExclusionsTunnel"),Cn.innerHTML="Tunnels",Te.appendChild(Cn);break;case"bridge":var An=document.createElement("input");An.id=this._addUID("GPisoExclusionsBridge"),An.type="checkbox",An.name="Ponts",An.checked=!Be,An.addEventListener?An.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):An.attachEvent&&An.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),An.value="Bridge",Te.appendChild(An);var En=document.createElement("label");En.className="GPisoExclusionsOption",En.htmlFor=this._addUID("GPisoExclusionsBridge"),En.innerHTML="Ponts",Te.appendChild(En);break}}return Te},_createIsoSubmitFormElement:function(){var ke=document.createElement("input");return ke.id=this._addUID("GPisochronSubmit"),ke.className="GPsubmit gpf-btn fr-btn",ke.type="submit",ke.value="Calculer l'isochrone",ke},_createIsoFormResetElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Rinitialiser les paramtres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe),ke.onIsoResetClick(Te)}),e}},logger$n=LoggerByDefault.getLogger("isocurve"),Isocurve=class Qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var Oe=this;this.export.on("button:clicked",Be=>{Oe.dispatchEvent({type:"export:compute",content:Be.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(Te){logger$n.log("no valid geojson given :"+Te.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var Te=document.getElementById("GPlocationOriginPointer_1-"+this._uid);Te.checked=!0;var Oe=document.getElementById("GPlocationOrigin_1-"+this._uid),Be=document.getElementById("GPlocationOriginCoords_1-"+this._uid);Be.value=e.point,Oe.value=e.point[1].toFixed(4)+" / "+e.point[0].toFixed(4),this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,Te,Oe){this._clear();var Be=this._pictoIsoButton.ariaPressed;Be!=="true"&&this._pictoIsoButton.click();var Ue=this.getMap();if(Ue){var He={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(He,Oe),this._originPoint.setCoordinate(e);var We=this._originPoint.getCoordinate(),Cn=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Cn.value=We[0].toFixed(4)+" / "+We[1].toFixed(4),this._currentTransport=He.transport,He.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=He.exclusions,this._currentComputation=He.method,He.method==="time"){var An=Te.split(".");this._currentTimeHour=An[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=An[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=Te,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=He.direction,He.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),Te=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Te.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var Oe=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(Oe/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((Oe/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance bas sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var Te;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(Te=0;Te<e.methods.length;Te++)typeof e.methods[Te]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$n.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(Te=0;Te<e.graphs.length;Te++)typeof e.graphs[Te]!="string"?logger$n.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[Te].toLowerCase()==="pieton"&&(e.graphs[Te]="Pieton"),e.graphs[Te].toLowerCase()==="voiture"&&(e.graphs[Te]="Voiture"));else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(Te=0;Te<e.directions.length;Te++)typeof e.directions[Te]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$n.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var Te=this.options.isocurveOptions;Te.graph&&(this._currentTransport=Te.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var Te=this.options.isocurveOptions;Te.method&&(this._currentComputation=Te.method),Te.time&&(this._currentComputation="time"),Te.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var Te=this.options.isocurveOptions;Te.reverse||(this._currentDirection="departure"),Te.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var Te in e)e.hasOwnProperty(Te)&&e.k&&this._currentExclusions.push(Te);var Oe=this.options.isocurveOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initContainer(e){var Te=this._container;if(Te.childElementCount>0)return Te;var Oe=this._pictoIsoButton=this._createShowIsoPictoElement();Te.appendChild(Oe);var Be=this._IsoPanelContainer=this._createIsoPanelElement(),Ue=this._createIsoPanelDivElement();Be.appendChild(Ue);var He=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Ue.appendChild(He);var We=this._formContainer=this._createIsoPanelFormElement();We.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),We.appendChild(this._createIsoPanelFormPointLabel());var Cn=this._createIsoPanelFormPointElement(e);We.appendChild(Cn);for(var An=!1,En=!1,Sn=this._createIsoPanelFormTypeChoiceElement(),Tn=0;Tn<this.options.methods.length;Tn++)this.options.methods[Tn]==="time"&&(An=Tn===0,Sn.appendChild(this._createIsoPanelFormTypeChoiceChronElement(An))),this.options.methods[Tn]==="distance"&&(En=Tn===0,Sn.appendChild(this._createIsoPanelFormTypeChoiceDistElement(En)));if(We.appendChild(Sn),We.appendChild(this._createIsoPanelFormLabelIsochronElement(An)),We.appendChild(this._createIsoPanelFormValueIsochronElement(An)),We.appendChild(this._createIsoPanelFormLabelIsodistanceElement(En)),We.appendChild(this._createIsoPanelFormValueIsodistanceElement(En)),We.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){We.appendChild(this._createShowIsoExclusionsPictoElement());var Ln=this._createIsoPanelFormExclusionsElement();Ln.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),We.appendChild(Ln)}var Bn=this._createIsoPanelFooterElement();if(We.appendChild(Bn),!checkDsfr()){var ei=this._createIsoFormResetElement();Bn.appendChild(ei)}var ni=this._submitContainer=this._createIsoSubmitFormElement();Bn.appendChild(ni),Ue.appendChild(We);var ti=this._createDrawingButtonsPluginDiv();Ue.appendChild(ti);var ri=this._waitingContainer=this._createIsoWaitingElement();return Be.appendChild(ri),Te.appendChild(Be),Te.addEventListener&&Te.addEventListener("click",oi=>this._hideIsoSuggestedLocations(oi)),Te}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var Te=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer();var Oe=Te.getMap();Te._originPoint._inputShowPointerContainer.checked?(Te._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=Oe.on("click",()=>{Te._formContainer.className="gpf-panel__content fr-modal__content",Te.dispatchEvent("isocurve:drawend")})):(Te._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),Te.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer(),Te._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{Te._formContainer.className="gpf-panel__content fr-modal__content"}),Te.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer(),Te.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$n.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),Te={x:e[0],y:e[1]};logger$n.log("origin : ",Te);var Oe,Be;if(this._currentComputation.toLowerCase()==="time"){var Ue=document.getElementById("GPisochronValueChronInput1-"+this._uid),He=parseInt(Ue.value,10);isNaN&&isNaN(He)&&(He=0);var We=document.getElementById("GPisochronValueChronInput2-"+this._uid),Cn=parseInt(We.value,10);isNaN&&isNaN(Cn)&&(Cn=0),Oe=He*3600+Cn*60,logger$n.log("time : "+Oe)}if(this._currentComputation.toLowerCase()==="distance"){var An=document.getElementById("GPisochronValueDistInput-"+this._uid);Be=parseFloat(An.value)*1e3,logger$n.log("distance : "+Be)}if(!Oe&&!Be){logger$n.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var En=this.options.isocurveOptions||{},Sn=En.protocol||"XHR",Tn=En.timeOut||0;Sn==="JSONP"&&Tn===0&&(Tn=15e3);var Ln=En.onFailure!==null&&typeof En.onFailure=="function",Bn=En.onSuccess!==null&&typeof En.onSuccess=="function",ei=this,ni={position:Te,graph:En.graph||this._currentTransport,exclusions:En.exclusions||this._currentExclusions,method:En.method||this._currentComputation,smoothing:En.smoothing||!0,timeOut:Tn,protocol:Sn,resource:En.resource,onSuccess:function(ti){logger$n.log(ti),ti&&ei._drawIsoResults(ti),Bn&&En.onSuccess.call(ei,ti)},onFailure:function(ti){ei._hideWaitingContainer(),logger$n.log(ti.message),Ln&&En.onFailure.call(ei,ti)}};(this._currentDirection.toLowerCase()==="arrival"||En.reverse)&&(ni.reverse=!0),Oe&&(ni.time=Oe),Be&&(ni.distance=Be),this._requestIsoCurve(ni)}onShowIsoPanelClick(e){var Te=this._pictoIsoButton.ariaPressed;Te==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var Te=e.target.value;Te&&(Te==="isodistance"&&(this._currentComputation="distance"),Te==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var Te=e.target.value;Te&&(this._currentTransport=Te)}onIsoModeDirectionChange(e){var Te=e.target.value;Te&&(Te.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrive":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Dpart",this._currentDirection=Te)}onIsoExclusionsChange(e){var Te=e.target.value,Oe=e.target.checked;if(Te){for(var Be=!1,Ue=null,He=0;He<this._currentExclusions.length;He++)deepEqual(this._currentExclusions[He],Te.toLowerCase())&&(Ue=He,Be=!0);!Be&&!Oe&&this._currentExclusions.push(Te.toLowerCase()),Be&&Oe&&(this._currentExclusions[Ue]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var Te=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var Oe=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),Be=Te.getView().getProjection().getCode(),Ue=Oe.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Be}),Cn=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Ue}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+Cn});var He;if(this._currentTransport==="Pieton"?(He="piton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(He="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),Te.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Ue[0]&&Ue[0].getGeometry()&&Ue[0].getGeometry().getExtent()){var We=Ue[0].getGeometry().getExtent();Te.getView().fit(We,Te.getSize())}var Cn=this._currentComputation==="time"?"Isochrone":"Isodistance";Te.getControls().forEach(An=>{if(An instanceof LayerSwitcher){var En=this._geojsonLayer.gpLayerId;An._layers[En].title===En&&An.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+Cn+"/"+He+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var Te=document.getElementById("GPisochronValueChronInput2-"+this._uid);Te&&(Te.value="0");var Oe=document.getElementById("GPisochronValueDistInput-"+this._uid);Oe&&(Oe.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var Be;this._currentTransport==="Pieton"?(Be=document.getElementById("GPisochronTransportPedestrian-"+this._uid),Be&&(Be.checked="true")):(Be=document.getElementById("GPisochronTransportCar-"+this._uid),Be&&(Be.checked="true"));var Ue;this._currentComputation.toLowerCase()==="distance"?(Ue=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Ue&&(Ue.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Ue=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Ue&&(Ue.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var He=document.getElementById("GPisochronDirectionSelect-"+this._uid);He&&(He.value=this._currentDirection),He.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrive":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Dpart";var We=document.getElementById("GPisoExclusionsToll-"+this._uid);We&&(this._currentExclusions.indexOf("toll")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GPisoExclusionsTunnel-"+this._uid);Cn&&(this._currentExclusions.indexOf("tunnel")!==-1?Cn.checked=!1:Cn.checked=!0);var An=document.getElementById("GPisoExclusionsBridge-"+this._uid);An&&(this._currentExclusions.indexOf("bridge")!==-1?An.checked=!1:An.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var Te=this;this._timer=setTimeout(function(){Te._waiting===!0?Te._hideWaitingContainer():Te._timer&&clearTimeout(Te._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(ke,e){if(ke===e)return!0;if(typeof ke=="object"&&ke!=null&&typeof e=="object"&&e!=null){if(Object.keys(ke).length!==Object.keys(e).length)return!1;for(var Te in ke)if(e.hasOwnProperty(Te)){if(!deepEqual(ke[Te],e[Te]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPreverseGeocoding"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowReverseGeocodingPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowReverseGeocodingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowReverseGeocodingClick(Oe)}),e},_createReverseGeocodingWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),ke.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createReverseGeocodingResultsPanelElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPreverseGeocodingResultsPanel"),ke.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",ke},_createReverseGeocodingResultsListElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPreverseGeocodingResultsList"),ke.className="gpf-panel__list",ke.setAttribute("tabindex","0"),ke},_createReverseGeocodingResultElement:function(ke,e){var Te=this,Oe=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),Be=document.createElement("div");Be.id=this._addUID("GPreverseGeocodedLocation_"+e),Be.setAttribute("tabindex","0"),Be.className="GPautoCompleteProposal gpf-panel__items",Be.innerHTML=ke,Be.title=ke,Be.addEventListener?(Be.addEventListener("mouseover",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.addEventListener("focus",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.addEventListener("mouseout",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.addEventListener("blur",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.addEventListener("click",function(Ue){typeof Te.onReverseGeocodingResultClick=="function"&&Te.onReverseGeocodingResultClick(Ue)})):Be.attachEvent&&(Be.attachEvent("onmouseover",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.attachEvent("onmouseout",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.attachEvent("onclick",function(Ue){typeof Te.onReverseGeocodingResultClick=="function"&&Te.onReverseGeocodingResultClick(Ue)})),Oe.appendChild(Be)},_createReverseGeocodingPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPreverseGeocodingPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createReverseGeocodingPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createReverseGeocodingPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader gpf-panel__header fr-modal__header",ke},_createReverseGeocodingPanelReturnPictoElement:function(){var ke=this,e=document.createElement("button");if(e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPimportPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline fr-m-1w",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),checkDsfr()){var Te=document.createElement("span");Te.className="GPelementHidden gpf-visible",Te.innerHTML="Retour",e.appendChild(Te)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(ke._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(ke._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(ke._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(ke._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(ke._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),ke.onGPreverseGeocodingReturnPictoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(ke._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(ke._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(ke._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(ke._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(ke._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),ke.onGPreverseGeocodingReturnPictoClick(Oe)}),e},_createReverseGeocodingPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.id=this._addUID("GPreverseGeocodingHeaderTitle"),ke.innerHTML="Recherche inverse",ke},_createReverseGeocodingPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(ke._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(ke._addUID("GPshowReverseGeocodingPicto")).click()}));var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createReverseGeocodingPanelFormElement:function(){var ke=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(Te){Te.preventDefault(),ke.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(Te){Te.preventDefault(),ke.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var Oe=document.createElement("label");Oe.id="label-recherche-par",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Recherche par",Oe.title="Recherche par",Te.appendChild(Oe);var Be=document.createElement("select");Be.setAttribute("aria-labelledby","label-recherche-par"),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(An){e.onReverseGeocodingTypeChange(An)}):Be.attachEvent&&Be.attachEvent("onchange",function(An){e.onReverseGeocodingTypeChange(An)}),(!ke||!Array.isArray(ke))&&(ke=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Ue=0;Ue<ke.length;Ue++)switch(ke[Ue]){case"PositionOfInterest":var He=document.createElement("option");He.value="PositionOfInterest",He.text="Lieux/toponymes",Be.appendChild(He);break;case"StreetAddress":var We=document.createElement("option");We.value="StreetAddress",We.text="Adresses",Be.appendChild(We);break;case"CadastralParcel":var Cn=document.createElement("option");Cn.value="CadastralParcel",Cn.text="Parcelles cadastrales",Be.appendChild(Cn);break}return Te.appendChild(Be),Te},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(ke){var e=this,Te=document.createElement("div");Te.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var Oe=document.createElement("label");Oe.id="label-delimitation",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Dlimitation",Oe.title="Dlimitation",Te.appendChild(Oe);var Be=document.createElement("select");Be.setAttribute("aria-labelledby","label-delimitation"),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(An){e.onReverseGeocodingDelimitationChange(An)}):Be.attachEvent&&Be.attachEvent("onchange",function(An){e.onReverseGeocodingDelimitationChange(An)}),(!ke||!Array.isArray(ke))&&(ke=["Point","Circle","Extent"]);for(var Ue=0;Ue<ke.length;Ue++)switch(ke[Ue].toLowerCase()){case"point":var He=document.createElement("option");He.value="point",He.text="Pointer un lieu",Be.appendChild(He);break;case"circle":var We=document.createElement("option");We.value="circle",We.text="Dessiner un cercle",Be.appendChild(We);break;case"extent":var Cn=document.createElement("option");Cn.value="extent",Cn.text="Dessiner une emprise",Be.appendChild(Cn);break}return Te.appendChild(Be),Te},_createReverseGeocodingSubmitFormElement:function(){var ke=document.createElement("input");return ke.id=this._addUID("GPreverseGeocodingSubmit"),ke.className="GPsubmit gpf-btn fr-btn",ke.type="submit",ke.value="Rechercher",ke}},logger$m=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var Te=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(Te),this._inputFeaturesLayer!=null&&(Te.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var Te,Oe;if(e.resources){var Be=e.resources;if(Array.isArray(Be)){var Ue=["StreetAddress","PositionOfInterest","CadastralParcel"],He=[];for(Te=0;Te<Be.length;Te++)Ue.indexOf(Be[Te])===-1&&(He.push(Te),logger$m.log("[ReverseGeocode] options.resources : "+Be[Te]+" is not a resource for reverse geocode"));if(He.length!==0)for(Oe=0;Oe<He.length;Oe++)Be.splice(He[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.resources' parameter should be an array"),Be=null}if(e.delimitations){var We=e.delimitations;if(Array.isArray(We)){var Cn=["Circle","Point","Extent"],An=[];for(Te=0;Te<We.length;Te++)Cn.indexOf(We[Te])===-1&&(An.push(Te),logger$m.log("[ReverseGeocode] options.delimitations : "+We[Te]+" is not a delimitation for reverse geocode"));if(An.length!==0)for(Oe=0;Oe<An.length;Oe++)We.splice(An[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),We=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var Te=this.options.reverseGeocodeOptions;Te.filterOptions&&Array.isArray(Te.filterOptions.type)&&Te.filterOptions.type.length!==0&&(this._currentGeocodingType=Te.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var Te=e[0].toLowerCase();(Te==="point"||Te==="circle"||Te==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",Te.appendChild(this._popupContent),Te.appendChild(Oe),Te}_initContainer(){var e=this._createMainContainerElement(),Te=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(Te);var Oe=this._panelContainer=this._createReverseGeocodingPanelElement(),Be=this._createReverseGeocodingPanelDivElement();Oe.appendChild(Be);var Ue=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),He=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Ue.appendChild(He);var We=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Ue.appendChild(We);var Cn=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Ue.appendChild(Cn),Be.appendChild(Ue);var An=this._formContainer=this._createReverseGeocodingPanelFormElement();An.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),An.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var En=this._createReverseGeocodingSubmitFormElement();An.appendChild(En),Be.appendChild(An);var Sn=this._waitingContainer=this._createReverseGeocodingWaitingElement();Be.appendChild(Sn);var Tn=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),Ln=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return Tn.appendChild(Ln),Be.appendChild(Tn),e.appendChild(Oe),logger$m.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var Te=this._currentGeocodingDelimitation.toLowerCase();switch(Te){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(Oe=>{if(Oe instanceof LayerSwitcher){var Be=this._inputFeaturesLayer.gpLayerId;Oe._layers[Be].title===Be&&(Oe.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),Oe.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",Te=>{logger$m.log("on drawstart ",Te),this._inputFeatures.clear(),this._onDrawStart(Te,"point")}),this._mapInteraction.on("drawend",Te=>{logger$m.log("on drawend",Te),Te.feature&&Te.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource,geometryFunction:function(Te,Oe){const Be=Te[0],Ue=Te[Te.length-1],He=Be[0]-Ue[0],We=Be[1]-Ue[1],An=Math.min(Math.sqrt(He*He+We*We),500);return Oe?Oe.setCenterAndRadius(Be,An):Oe=new ol.geom.Circle(Be,An),Oe}}),this._mapInteraction.on("drawstart",Te=>{logger$m.log("on drawstart ",Te),this._inputFeatures.clear(),this._onDrawStart(Te,"circle")}),this._mapInteraction.on("drawend",Te=>{if(logger$m.log("on drawend",Te),Te.feature&&Te.feature.getGeometry){var Oe=Te.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=Oe,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$m.log("circle radius : ",Oe)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var Te=function(Oe,Be){Be||(Be=new Polygon([]));var Ue=Oe[0],He=Oe[1];const We=Ue[0]-He[0],Cn=Ue[1]-He[1],An=1e3,En=Math.max(-1e3,Math.min(We,An)),Sn=Math.max(-1e3,Math.min(Cn,An));return Be.setCoordinates([[Ue,[Ue[0],Ue[1]-Sn],[Ue[0]-En,Ue[1]-Sn],[Ue[0]-En,Ue[1]],Ue]]),Be};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:Te}),this._mapInteraction.on("drawstart",Oe=>{logger$m.log("on drawstart",Oe),this._inputFeatures.clear(),this._onDrawStart(Oe,"polygon")}),this._mapInteraction.on("drawend",Oe=>{logger$m.log("on drawend",Oe),this._onBoxDrawEnd(Oe)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,Te){var Oe;if(e.feature&&e.feature.getGeometry){var Be=e.feature.getGeometry();Te==="point"&&(Oe=Be.getCoordinates()),Te==="circle"&&(Oe=Be.getCenter()),Te==="polygon"&&(Oe=Be.getFirstCoordinate())}if(Oe){var Ue;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ue=this.options.reverseGeocodeOptions.srs;else{var He=this.getMap();if(!He||!He.getView())return;Ue=He.getView().getProjection()}var We=transform$1(Oe,Ue,"EPSG:4326");this._requestPosition={lon:We[0],lat:We[1]},logger$m.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var Te=e.feature.getGeometry().getCoordinates()[0],Oe=Te[0],Be=Te[2],Ue;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ue=this.options.reverseGeocodeOptions.srs;else{var He=this.getMap();if(!He||!He.getView())return;Ue=He.getView().getProjection()}var We=transform$1(Oe,Ue,"EPSG:4326"),Cn=transform$1(Be,Ue,"EPSG:4326"),An={};We[0]<Cn[0]?(An.left=We[0],An.right=Cn[0]):(An.left=Cn[0],An.right=We[0]),We[1]<Cn[1]?(An.bottom=We[1],An.top=Cn[1]):(An.bottom=Cn[1],An.top=We[1]),this._requestGeom={type:"Polygon",coordinates:[[[An.left,An.top],[An.left,An.bottom],[An.right,An.bottom],[An.right,An.top],[An.left,An.top]]]},logger$m.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,Te){if(Te=Te||this.getMap(),!!Te){var Oe=Te.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),Te=this.options.reverseGeocodeOptions,Oe=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var Be=Te.onFailure!==null&&typeof Te.onFailure=="function",Ue=Te.onSuccess!==null&&typeof Te.onSuccess=="function",He={apiKey:Te.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:Te.maximumResponses||18,timeOut:Te.timeOut||3e4,onSuccess:function(We){We.locations&&(logger$m.log("reverseGeocode results : ",We.locations),Oe._displayGeocodedLocations(We.locations)),Ue&&Te.onSuccess.call(Oe,We.locations)},onFailure:function(We){Oe._hideWaitingContainer(),Oe._clearResults(),Oe._clearInputFeatures(),Oe._activateMapInteraction(e),logger$m.log(We.message),Be&&Te.onFailure.call(Oe,We)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$m.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),He.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?He.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(He.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},He.maximumResponses=1):He.searchGeometry=this._requestGeom),logger$m.log("reverseGeocode request options : ",He),He}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Rsultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var Te=0;Te<e.length;Te++){var Oe=e[Te];logger$m.log(Oe);var Be=this._fillGeocodedLocationDescription(Oe);Be&&Be.length!==0&&this._createReverseGeocodingResultElement(Be,Te)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var Te=e.placeAttributes,Oe="";switch(e.type){case"StreetAddress":Te.street&&(Oe+=Te.housenumber?Te.housenumber+" ":"",Oe+=Te.street+", "),Oe+=Te.postcode+" "+Te.city;break;case"PositionOfInterest":Oe+=Te.toponym,Te.postcode&&Te.postcode.length===1&&(Oe+=", "+Te.postcode[0]),Oe+=" ("+Te.category.join(",")+")";break;case"CadastralParcel":Oe+=Te.id,Oe+=Te.city?" ("+Te.city+")":"";break;default:Oe+=Te.city?Te.city:"";break}return Oe}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var Te=this.getMap();this._createResultsLayer();for(var Oe=0;Oe<e.length;Oe++)this._addResultFeature(e[Oe],Oe);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var Be=this._resultsFeaturesSource.getExtent();Te.getView().fit(Be,Te.getSize())}}else{var Ue=this._resultsFeatures.item(0),He=Ue.getGeometry().getCoordinates();Te.getView().setCenter(He),Te.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",Cn=>this._onResultsFeatureMouseOver(Cn)),Te.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",Cn=>this._onResultsFeatureSelect(Cn)),Te.addInteraction(this._resultsSelectInteraction);var We="";switch(this._currentGeocodingType){case"StreetAddress":We="adresses";break;case"PositionOfInterest":We="toponymes";break;case"CadastralParcel":We="parcelles cadastrales";break}Te.getControls().forEach(Cn=>{if(Cn instanceof LayerSwitcher){var An=this._resultsFeaturesLayer.gpLayerId;Cn._layers[An].title===An&&(Cn.addLayer(this._resultsFeaturesLayer,{title:"Rsultats de la recherche inverse",description:"Rsultats de la recherche inverse sur les "+We}),Cn.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,Te){var Oe=this.getMap(),Be=[e.position.lon,e.position.lat];if(Be.length!==0){var Ue=Oe.getView(),He=Ue.getProjection().getCode();He!=="EPSG:4326"&&(Be=transform$1(Be,"EPSG:4326",He));var We=new Feature({geometry:new Point$1(Be)});We.setStyle(this._resultsDefaultStyle),We.setId(Te),We.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(We)}}_fillPopupContent(e){var Te="<ul>",Oe=e.placeAttributes;for(var Be in Oe)Oe.hasOwnProperty(Be)&&Be!=="trueGeometry"&&Be!=="extraFields"&&Be!=="houseNumberInfos"&&Be!=="_count"&&(Te+="<li>",Te+='<span class="gp-attname-others-span">'+Be.toUpperCase()+" : </span>",Te+=Oe[Be],Te+=" </li>");return Te+=" </ul>",Te}_onResultsFeatureMouseOver(e){var Te;if(e.selected.length!==0){if(Te=e.selected[0],Te.setStyle(this._resultsSelectedStyle),Te.getId()!=null){var Oe=document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid)}if(e.deselected.length!==0){Te=e.deselected[0],Te.setStyle(this._resultsDefaultStyle);var Be=document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid);Be&&Be.classList&&Be.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var Te=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),Te.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:Oe.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();if(Te){Interactions.unset(Te);var Oe=this._showReverseGeocodingButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(Te),this._inputFeaturesLayer!=null&&(Te.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(Te))}}onReverseGeocodingTypeChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;Oe&&(logger$m.log(Oe),this._currentGeocodingType=Oe)}onReverseGeocodingDelimitationChange(e){var Te=e.target.selectedIndex,Oe=e.target.options[Te].value;if(Oe){logger$m.log(Oe),this._currentGeocodingDelimitation=Oe;var Be=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(Be),this._activateMapInteraction(Be)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$m.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var Te=e.target.id,Oe=Te.substring(Te.indexOf("_")+1),Be=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:Be.getProperties().location})}onReverseGeocodingResultMouseOver(e){var Te=e.target.id,Oe=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var Be=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));Be.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var Te=e.target.id,Oe=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var Be=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));Be.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const Te=parse$1(e);return this.readFromDocument(Te)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType==Node.ELEMENT_NODE)return this.readFromNode(Te);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(ke){return ke.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"];function isV13(ke){return compareVersions(ke[0].version,"1.3")>=0}const PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),COMMON_CAPABILITY_PARSERS={Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)},CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_CAPABILITY_PARSERS,UserDefinedSymbolization:makeObjectPropertySetter(readUserDefinedSymbolization)}),CAPABILITY_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,COMMON_CAPABILITY_PARSERS);class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const Te=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return Te||null}}const COMMON_SERVICE_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString)},SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,COMMON_SERVICE_PARSERS),SERVICE_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_SERVICE_PARSERS,LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),COMMON_LAYER_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),Layer:makeObjectPropertyPusher(readLayer$1)},LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,SRS:makeObjectPropertyPusher(readString),Extent:makeObjectPropertySetter(readExtent),ScaleHint:makeObjectPropertyPusher(readScaleHint),LatLonBoundingBox:makeObjectPropertySetter((ke,e)=>readBoundingBox$1(ke,e,!1)),Layer:makeObjectPropertyPusher(readLayer$1)}),LAYER_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(ke,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,ke,e)}function readUserDefinedSymbolization(ke,e){return{SupportSLD:!!readBooleanString(ke.getAttribute("UserDefinedSymbolization")),UserLayer:!!readBooleanString(ke.getAttribute("UserLayer")),UserStyle:!!readBooleanString(ke.getAttribute("UserStyle")),RemoteWFS:!!readBooleanString(ke.getAttribute("RemoteWFS"))}}function readBoundingBox$1(ke,e,Te=!0){const Oe=[readDecimalString(ke.getAttribute("minx")),readDecimalString(ke.getAttribute("miny")),readDecimalString(ke.getAttribute("maxx")),readDecimalString(ke.getAttribute("maxy"))],Be=[readDecimalString(ke.getAttribute("resx")),readDecimalString(ke.getAttribute("resy"))],Ue={extent:Oe,res:Be};return Te&&(isV13(e)?Ue.crs=ke.getAttribute("CRS"):Ue.srs=ke.getAttribute("SRS")),Ue}function readEXGeographicBoundingBox(ke,e){const Te=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,ke,e);if(!Te)return;const Oe=Te.westBoundLongitude,Be=Te.southBoundLatitude,Ue=Te.eastBoundLongitude,He=Te.northBoundLatitude;if(!(Oe===void 0||Be===void 0||Ue===void 0||He===void 0))return[Oe,Be,Ue,He]}function readCapability(ke,e){return pushParseAndPop({},isV13(e)?CAPABILITY_PARSERS_V13:CAPABILITY_PARSERS,ke,e)}function readService(ke,e){return pushParseAndPop({},isV13(e)?SERVICE_PARSERS_V13:SERVICE_PARSERS,ke,e)}function readContactInformation(ke,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,ke,e)}function readContactPersonPrimary(ke,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,ke,e)}function readContactAddress(ke,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,ke,e)}function readException(ke,e){return pushParseAndPop([],EXCEPTION_PARSERS,ke,e)}function readCapabilityLayer(ke,e){const Te=pushParseAndPop({},isV13(e)?LAYER_PARSERS_V13:LAYER_PARSERS$1,ke,e);return Te.Layer===void 0?Object.assign(Te,readLayer$1(ke,e)):Te}function readLayer$1(ke,e){const Te=isV13(e),Oe=e[e.length-1],Be=pushParseAndPop({},Te?LAYER_PARSERS_V13:LAYER_PARSERS$1,ke,e);if(!Be)return;let Ue=readBooleanString(ke.getAttribute("queryable"));Ue===void 0&&(Ue=Oe.queryable),Be.queryable=Ue!==void 0?Ue:!1;let He=readNonNegativeIntegerString(ke.getAttribute("cascaded"));He===void 0&&(He=Oe.cascaded),Be.cascaded=He;let We=readBooleanString(ke.getAttribute("opaque"));We===void 0&&(We=Oe.opaque),Be.opaque=We!==void 0?We:!1;let Cn=readBooleanString(ke.getAttribute("noSubsets"));Cn===void 0&&(Cn=Oe.noSubsets),Be.noSubsets=Cn!==void 0?Cn:!1;let An=readDecimalString(ke.getAttribute("fixedWidth"));An||(An=Oe.fixedWidth),Be.fixedWidth=An;let En=readDecimalString(ke.getAttribute("fixedHeight"));En||(En=Oe.fixedHeight),Be.fixedHeight=En;const Sn=["Style","AuthorityURL"];Te?Sn.push("CRS"):Sn.push("SRS","Dimension"),Sn.forEach(function(Ln){if(Ln in Oe){const Bn=Be[Ln]||[];Be[Ln]=Bn.concat(Oe[Ln])}});const Tn=["BoundingBox","Attribution"];return Te?Tn.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):Tn.push("LatLonBoundingBox","ScaleHint","Extent"),Tn.forEach(function(Ln){if(!(Ln in Be)){const Bn=Oe[Ln];Be[Ln]=Bn}}),Be}function readDimension(ke,e){const Te={name:ke.getAttribute("name"),units:ke.getAttribute("units"),unitSymbol:ke.getAttribute("unitSymbol")};return isV13(e)&&Object.assign(Te,{default:ke.getAttribute("default"),multipleValues:readBooleanString(ke.getAttribute("multipleValues")),nearestValue:readBooleanString(ke.getAttribute("nearestValue")),current:readBooleanString(ke.getAttribute("current")),values:readString(ke)}),Te}function readExtent(ke,e){return{name:ke.getAttribute("name"),default:ke.getAttribute("default"),nearestValue:readBooleanString(ke.getAttribute("nearestValue"))}}function readScaleHint(ke,e){return{min:readDecimalString(ke.getAttribute("min")),max:readDecimalString(ke.getAttribute("max"))}}function readFormatOnlineresource(ke,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,ke,e)}function readRequest(ke,e){return pushParseAndPop({},REQUEST_PARSERS,ke,e)}function readDCPType(ke,e){return pushParseAndPop({},DCPTYPE_PARSERS,ke,e)}function readHTTP(ke,e){return pushParseAndPop({},HTTP_PARSERS$1,ke,e)}function readOperationType(ke,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,ke,e)}function readSizedFormatOnlineresource(ke,e){const Te=readFormatOnlineresource(ke,e);if(Te){const Oe=[readNonNegativeIntegerString(ke.getAttribute("width")),readNonNegativeIntegerString(ke.getAttribute("height"))];return Te.size=Oe,Te}}function readAuthorityURL(ke,e){const Te=readFormatOnlineresource(ke,e);if(Te)return Te.name=ke.getAttribute("name"),Te}function readMetadataURL(ke,e){const Te=readFormatOnlineresource(ke,e);if(Te)return Te.type=ke.getAttribute("type"),Te}function readStyle$1(ke,e){return pushParseAndPop({},STYLE_PARSERS$1,ke,e)}function readKeywordList(ke,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,ke,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const Te=pushParseAndPop({},PARSERS$1,e,[]);return Te||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(ke,e){return pushParseAndPop({},ADDRESS_PARSERS,ke,e)}function readAllowedValues(ke,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,ke,e)}function readConstraint(ke,e){const Te=ke.getAttribute("name");if(Te)return pushParseAndPop({name:Te},CONSTRAINT_PARSERS,ke,e)}function readContactInfo(ke,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,ke,e)}function readDcp(ke,e){return pushParseAndPop({},DCP_PARSERS,ke,e)}function readGet(ke,e){const Te=readHref(ke);if(Te)return pushParseAndPop({href:Te},REQUEST_METHOD_PARSERS,ke,e)}function readHttp(ke,e){return pushParseAndPop({},HTTP_PARSERS,ke,e)}function readOperation(ke,e){const Te=ke.getAttribute("name"),Oe=pushParseAndPop({},OPERATION_PARSERS,ke,e);if(!Oe)return;const Be=e[e.length-1];Be[Te]=Oe}function readOperationsMetadata(ke,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,ke,e)}function readPhone(ke,e){return pushParseAndPop({},PHONE_PARSERS,ke,e)}function readServiceIdentification(ke,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,ke,e)}function readServiceContact(ke,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,ke,e)}function readServiceProvider(ke,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,ke,e)}function readValue(ke,e){return readString(ke)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let Te=e.getAttribute("version");Te&&(Te=Te.trim());let Oe=this.owsParser_.readFromNode(e);return Oe?(Oe.version=Te,Oe=pushParseAndPop(Oe,PARSERS,e,[]),Oe||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(ke,e){return pushParseAndPop({},CONTENTS_PARSERS,ke,e)}function readLayer(ke,e){return pushParseAndPop({},LAYER_PARSERS,ke,e)}function readTileMatrixSet(ke,e){return pushParseAndPop({},TMS_PARSERS,ke,e)}function readStyle(ke,e){const Te=pushParseAndPop({},STYLE_PARSERS,ke,e);if(!Te)return;const Oe=ke.getAttribute("isDefault")==="true";return Te.isDefault=Oe,Te}function readTileMatrixSetLink(ke,e){return pushParseAndPop({},TMS_LINKS_PARSERS,ke,e)}function readDimensions(ke,e){return pushParseAndPop({},DIMENSION_PARSERS,ke,e)}function readResourceUrl(ke,e){const Te=ke.getAttribute("format"),Oe=ke.getAttribute("template"),Be=ke.getAttribute("resourceType"),Ue={};return Te&&(Ue.format=Te),Oe&&(Ue.template=Oe),Be&&(Ue.resourceType=Be),Ue}function readBoundingBox(ke,e){const Te=pushParseAndPop([],WGS84_BBOX_READERS,ke,e);if(Te.length==2)return boundingExtent(Te)}function readBoundingBoxWithCrs(ke,e){const Te=ke.getAttribute("crs"),Oe=pushParseAndPop([],WGS84_BBOX_READERS,ke,e);if(Oe.length==2)return{extent:boundingExtent(Oe),crs:Te}}function readLegendUrl(ke,e){const Te={};return Te.format=ke.getAttribute("format"),Te.href=readHref(ke),Te}function readCoordinates(ke,e){const Te=readString(ke).split(/\s+/);if(!Te||Te.length!=2)return;const Oe=+Te[0],Be=+Te[1];if(!(isNaN(Oe)||isNaN(Be)))return[Oe,Be]}function readTileMatrix(ke,e){return pushParseAndPop({},TM_PARSERS,ke,e)}function readTileMatrixLimitsList(ke,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,ke,e)}function readTileMatrixLimits(ke,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,ke,e)}var eventbus_min={exports:{}};(function(ke,e){(function(Te,Oe){ke.exports=Oe()})(commonjsGlobal,function(){var Te={};Te=function(){this.listeners={}},Te.prototype={addEventListener:function(Be,Ue,He){for(var We=[],Cn=arguments.length,An=0;An<Cn;An++)We.push(arguments[An]);We=We.length>3?We.splice(3,We.length-1):[],typeof this.listeners[Be]<"u"?this.listeners[Be].push({scope:He,callback:Ue,args:We}):this.listeners[Be]=[{scope:He,callback:Ue,args:We}]},removeEventListener:function(Be,Ue,He){if(typeof this.listeners[Be]<"u"){for(var We=this.listeners[Be].length,Cn=[],An=0;An<We;An++){var En=this.listeners[Be][An];En.scope==He&&En.callback==Ue||Cn.push(En)}this.listeners[Be]=Cn}},hasEventListener:function(Be,Ue,He){if(typeof this.listeners[Be]<"u"){var We=this.listeners[Be].length;if(Ue===void 0&&He===void 0)return We>0;for(var Cn=0;Cn<We;Cn++){var An=this.listeners[Be][Cn];if((!He||An.scope==He)&&An.callback==Ue)return!0}}return!1},dispatch:function(Be,Ue){for(var He={type:Be,target:Ue},We=[],Cn=arguments.length,An=0;An<Cn;An++)We.push(arguments[An]);if(We=We.length>2?We.splice(2,We.length-1):[],We=[He].concat(We),typeof this.listeners[Be]<"u")for(var En=this.listeners[Be].slice(),Sn=En.length,An=0;An<Sn;An++){var Tn=En[An];if(Tn&&Tn.callback){var Ln=We.concat(Tn.args);Tn.callback.apply(Tn.scope,Ln)}}},getEvents:function(){var Be="";for(var Ue in this.listeners)for(var He=this.listeners[Ue].length,We=0;We<He;We++){var Cn=this.listeners[Ue][We];Be+=Cn.scope&&Cn.scope.className?Cn.scope.className:"anonymous",Be+=" listen for '"+Ue+`'
`}return Be}};var Oe=new Te;return Oe})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$l=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$l.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,Te=!1,Oe=JSON.parse(JSON.stringify(this.options.obj)),Be={};Oe.paint&&(Te=!0,Be.paint=Oe.paint,Object.keys(Oe.paint).length===0&&logger$l.info("tag 'paint' is empty !")),Oe.layout&&(Te=!0,Be.layout=Oe.layout,Oe.layout.visibility&&delete Be.visibility,Object.keys(Oe.layout).length===0&&logger$l.info("tag 'layout' is empty !"));var Ue=document.createElement("div");Ue.className=this.name.container;var He=null;if(Te){var We=JSON.stringify(Be,null,4);He=this._syntaxHighlight(We)}var Cn=document.createElement("div");Cn.className=this.name.containerjson;var An=document.createElement("label");An.className=this.name.jsonlabel,An.innerHTML=this.options.title,Cn.appendChild(An);var En=document.createElement("pre");En.className=this.name.jsondisplay,En.innerHTML=He,En.addEventListener?En.addEventListener("click",function(Sn){e.options.tools.edition&&e.onEditJsonStyleMapBox(Sn)}):En.attachEvent&&En.attachEvent("onclick",function(Sn){e.options.tools.edition&&e.onEditJsonStyleMapBox(Sn)}),Cn.appendChild(En),Ue.appendChild(Cn),this.options.tools.scale&&Ue.appendChild(this._createElementToolsScale({min:Be.layout?Be.layout.minzoom:0,max:Be.layout?Be.layout.maxzoom:21})),this.options.tools.edition&&Ue.appendChild(this._createElementToolsEdition()),this.container=Ue}_createElementToolsScale(e){logger$l.trace("_createElementToolsScale");var Te=this,Oe=this.options.obj,Be=document.createElement("div");Be.className=this.name.containertoolsscale;var Ue=document.createElement("div");Ue.className=this.name.containertoolsminscale;var He=document.createElement("label");He.className=this.name.scalelabelmin,He.innerHTML="min :",Ue.appendChild(He);var We=document.createElement("input");We.className=this.name.scaleinputmin,We.type="range",We.value=e.min||0,We.title=e.min||0,We.disabled=!1,We.min=0,We.max=21,We.data=Oe,We.addEventListener?We.addEventListener("change",function(Sn){Te.onChangeStyleScaleMinMapBox(Sn)}):We.appendChild&&We.appendChild("onchange",function(Sn){Te.onChangeStyleScaleMinMapBox(Sn)}),Ue.appendChild(We),Be.appendChild(Ue);var Cn=document.createElement("div");Cn.className=this.name.containertoolsmaxscale;var An=document.createElement("label");An.className=this.name.scalelabelmax,An.innerHTML="max :",Cn.appendChild(An);var En=document.createElement("input");return En.className=this.name.scaleinputmin,En.type="range",En.value=e.max||21,En.title=e.max||21,En.disabled=!1,En.min=0,En.max=21,En.data=Oe,En.addEventListener?En.addEventListener("change",function(Sn){Te.onChangeStyleScaleMaxMapBox(Sn)}):En.appendChild&&En.appendChild("onchange",function(Sn){Te.onChangeStyleScaleMaxMapBox(Sn)}),Cn.appendChild(En),Be.appendChild(Cn),Be}_createElementToolsEdition(){logger$l.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(Te){var Oe="gp-json-number";return/^"/.test(Te)?/:$/.test(Te)?Oe="gp-json-key":Oe="gp-json-string":/true|false/.test(Te)?Oe="gp-json-boolean":/null/.test(Te)&&(Oe="gp-json-null"),"<span class='"+Oe+"'>"+Te+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$l.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$l.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$l.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$l.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$k=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$k.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,Te=this.options.obj,Oe=this.id||SelectorID.generate(),Be=document.createElement("div");Be.className=this.name.container,Be.title=Te.themesSummary||"";var Ue=Te.themes;if(Ue)for(var He=0;He<Ue.length;He++){var We=Ue[He],Cn=document.createElement("div");Cn.id=this.name.containerthemeID+He+"_"+Oe,Cn.className=this.name.containertheme,Cn.tabIndex=He;var An=We.url,En=We.selected||!1;if(An){var Sn=this.options.tools.button;if(Sn.visible){var Tn=Sn.type==="checkbox"?"checkbox":"radio",Ln=document.createElement("input");Ln.type=Tn,Ln.id=this.name.inputID+He+"_"+Oe,Ln.className=this.name.input,Ln.name=Oe,Ln.checked=En,Ln.data=An,Ln.addEventListener?Ln.addEventListener("click",function(ti){e.onClickThemeTitleMapBox(ti)}):Ln.attachEvent&&Ln.attachEvent("onclick",function(ti){e.onClickThemeTitleMapBox(ti)}),Cn.appendChild(Ln)}if(this.options.tools.thumbnails&&We.thumbnail){var Bn=document.createElement("img");Bn.id=this.name.imageID+He+"_"+Oe,Bn.className=this.name.image,Bn.src=We.thumbnail,Bn.alt=We.thumbnail,Bn.title=We.description||"",Bn.data=An,Bn.addEventListener?Bn.addEventListener("click",function(ti){e.onClickThemeImageMapBox(ti);var ri=ti.target.parentElement.childNodes;if(ri){var oi=ri[0];oi.tagName.toLowerCase()==="input"&&(oi.checked=!oi.checked)}}):Bn.attachEvent&&Bn.attachEvent("onclick",function(ti){e.onClickThemeImageMapBox(ti);var ri=ti.target.parentElement.childNodes;if(ri){var oi=ri[0];oi.tagName.toLowerCase()==="input"&&(oi.checked=!oi.checked)}}),Cn.appendChild(Bn)}if(We.name){var ei=document.createElement("label");ei.id=this.name.labelID+He+"_"+Oe,this.options.tools.button.visible&&(ei.htmlFor=Ln.id),ei.className=this.name.label,ei.innerHTML=We.name,ei.title=We.description||"",ei.data=An,this.options.tools.button.visible||(ei.addEventListener?ei.addEventListener("click",function(ti){e.onClickThemeTitleMapBox(ti)}):ei.attachEvent&&ei.attachEvent("onclick",function(ti){e.onClickThemeTitleMapBox(ti)})),Cn.appendChild(ei)}}else{var ni=document.createElement("label");ni.className=this.name.message,ni.innerHTML="Thme non disponible...",Cn.appendChild(ni)}Be.appendChild(Cn)}this.container=Be}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$k.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var Te=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),Be=0;Be<Oe.length;Be++){var Ue=Oe[Be];if(Ue.id!==e.target.previousSibling.id){var He=Ue.id.substring(Ue.id.lastIndexOf("_")+1);He===Te&&(Ue.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$k.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var Te=e.target.id.substring(e.target.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),Be=0;Be<Oe.length;Be++){var Ue=Oe[Be];if(Ue.id!==e.target.id){var He=Ue.id.substring(Ue.id.lastIndexOf("_")+1);He===Te&&(Ue.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$j=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$j.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,Te=!1,Oe=JSON.parse(JSON.stringify(this.options.obj));Oe.filter&&(Te=!0,Oe.filter.length===0&&logger$j.info("tag 'filter' is empty !"));var Be=document.createElement("div");Be.className=this.name.container;var Ue=null;Te&&(Ue=JSON.stringify(Oe.filter,null,4));var He=document.createElement("div");He.className=this.name.containerjson;var We=document.createElement("label");We.className=this.name.jsonlabel,We.innerHTML=this.options.title,He.appendChild(We);var Cn=document.createElement("pre");if(Cn.className=this.name.jsondisplay,Cn.innerHTML=Ue,Cn.addEventListener?Cn.addEventListener("click",function(En){e.options.tools.edition&&e.onEditJsonFilterMapBox(En)}):Cn.attachEvent&&Cn.attachEvent("onclick",function(En){e.options.tools.edition&&e.onEditJsonFilterMapBox(En)}),He.appendChild(Cn),Be.appendChild(He),this.options.tools.edition){var An=document.createElement("div");An.className=this.name.containertoolsedit,Be.appendChild(An)}this.container=Be}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$j.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$i=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$i.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacit du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacit du remplissage"}}_initContainer(){var e=this.options.obj,Te=document.createElement("div");Te.className=this.name.container;var Oe=Object.assign({},e.paint,e.layout),Be=Object.keys(Oe);if(Be.length===0){logger$i.info("tag 'paint' or 'layout' is empty !");return}for(var Ue={},He=!1,We=0;We<Be.length;We++){var Cn=Be[We];if(/fill-/.test(Cn)||/line-/.test(Cn)||/circle-/.test(Cn)||/background-/.test(Cn)||/text-/.test(Cn)||/icon-/.test(Cn)){He=!0;var An=e.title||"",En=Cn.split("-")[0];(En==="text"||En==="icon")&&(En="symbol"),this.legendRender=this._getProperties(En,Oe),Ue={edit:this.editable,title:An,type:this.legendRender.type,values:this.legendRender.values},Te.appendChild(this._createElementIconLegend(Ue));break}}He||(Ue={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},Te.appendChild(this._createElementIconLegend(Ue)),logger$i.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Ue),Te.appendChild(this.toolscontainer),this.container=Te}_getProperties(e,Te){if(e==="symbol"){var Oe=Te["text-field"],Be=Te["icon-image"];if(e=Oe&&Be?"icon":Oe?"text":Be?"icon":"unknow",e==="unknow"){logger$i.warn("type unknow !?");return}}var Ue={};for(const An in Te)if(Object.hasOwnProperty.call(Te,An)){const En=Te[An];if(Legend.PROPERTIES[e].includes(An)){var He=An.replace(e,"").slice(1),We=this._getValue(En);if(We){if((He==="pattern"||He==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[We])){var Cn=e+":"+He;logger$i.warn("sprites mandatory for key ",Cn);break}Ue[He]=We}}else logger$i.warn("property not supported : ",An)}return{type:e,values:Ue}}_renderThumbnail(e,Te){var Oe=this.rendercontainer;if(!Oe)return!1;var Be=null,Ue=3;switch(Te.color||(Te.color="#FFFFFF"),e){case"text":var He="font-size: 5em;font-weight: bold;";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,Oe.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%style%",He);break;case"icon":if(Te.image)Be="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[Te.image].x).replace("%y%",this.options.sprites.json[Te.image].y).replace(/%w%/g,this.options.sprites.json[Te.image].width).replace(/%h%/g,this.options.sprites.json[Te.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=Be;else{var We="fill: transparent;stroke-width: 10;";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,Oe.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%style%",We)}break;case"line":var Cn=Array.isArray(Te.dasharray)?Te.dasharray.join(" "):0;Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,Oe.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%stroke-opacity%",Te.opacity||1).replace("%stroke-dasharray%",Cn).replace("%stroke-width%",(Te.width||0)*Ue);break;case"circle":var An=Te["stroke-color"]||"#FFFFFF";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%stroke-color%",An.indexOf("rgb")===0?An:ColorUtils.hexToRgba(An,1)).replace("%stroke-opacity%",Te["stroke-opacity"]||1).replace("%stroke-width%",(Te["stroke-width"]||0)*Ue);break;case"background":case"fill":if(Te.pattern)Be="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[Te.pattern].x).replace("%y%",this.options.sprites.json[Te.pattern].y).replace(/%w%/g,this.options.sprites.json[Te.pattern].width).replace(/%h%/g,this.options.sprites.json[Te.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=Be;else{var En=Te["outline-color"]||"#FFFFFF";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%stroke-color%",En.indexOf("rgb")===0?En:ColorUtils.hexToRgba(En,1))}break;default:return logger$i.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var Te=null;if(typeof e=="string")Te=e;else if(typeof e=="number")Te=e;else if(Array.isArray(e)){var Oe=!0;e.forEach(Ue=>{typeof Ue!="number"&&(Oe=!1)}),Oe&&(Te=e)}else if(typeof e=="object"){if(Te=null,"stops"in e){e.stops.sort((Ue,He)=>{var We=Ue[0],Cn=He[0];return We>Cn?-1:We<Cn?1:0});var Be=e.stops.slice(-1);Te=Be[0][1]}}else logger$i.warn("value not supported !");return Te}_createElementIconLegend(e){var Te=this,Oe=document.createElement("div");Oe.className=this.name.containerlegendrender;var Be=this.rendercontainer=document.createElement("div");Be.className=this.name.legendrender,e.edit&&(Be.className+=" ",Be.className+=this.name.legendeditable,Be.addEventListener?Be.addEventListener("click",function(We){Te.onEditionLegendMapBox(We)}):Be.attachEvent&&Be.attachEvent("onclick",function(We){Te.onEditionLegendMapBox(We)}));var Ue=e.type;this._renderThumbnail(Ue,e.values)?Be.className+=e.edit?" legend-"+Ue:" legend-"+Ue+"-not-editable":Be.className+=" legend-unknow",Oe.appendChild(Be);var He=document.createElement("span");return He.className=this.name.legendtitle,He.innerHTML=e.title||"",Oe.appendChild(He),Oe}_createElementEditionLegend(e){var Te=this,Oe=document.createElement("div");if(Oe.className=this.name.containerlegendtools,!e.edit)return Oe;switch(e.type){case"line":Be.call(Te),Ue.call(Te),He.call(Te);break;case"background":case"fill":We.call(Te),Cn.call(Te);break}function Be(){var An=document.createElement("div");An.className="legend-styling-div";var En=document.createElement("label");En.className="legend-line",En.htmlFor=this.id?"line-color-"+this.id:"line-color",En.innerHTML=this.labels["line-color"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-color-"+this.id:"line-color",Sn.title="Selectionner une couleur de trait",Sn.type="color",Sn.value=e.values.color,Sn.setAttribute("data-id","line-color"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),An.appendChild(En),An.appendChild(Sn),Oe.appendChild(An)}function Ue(){var An=document.createElement("div");An.className="legend-styling-div";var En=document.createElement("label");En.className="legend-line",En.htmlFor=this.id?"line-width-"+this.id:"line-width",En.innerHTML=this.labels["line-width"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-width-"+this.id:"line-width",Sn.title=e.values.width,Sn.type="range",Sn.min="0",Sn.max="10",Sn.step="1",Sn.defaultValue=e.values.width,Sn.setAttribute("data-id","line-width"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{width:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{width:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),An.appendChild(En),An.appendChild(Sn),Oe.appendChild(An)}function He(){var An=document.createElement("div");An.className="legend-styling-div";var En=document.createElement("label");En.className="legend-line",En.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",En.innerHTML=this.labels["line-opacity"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-opacity-"+this.id:"line-opacity",Sn.title=e.values.opacity,Sn.type="range",Sn.min="0",Sn.max="1",Sn.step="0.1",Sn.defaultValue=e.values.opacity,Sn.setAttribute("data-id","line-opacity"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),An.appendChild(En),An.appendChild(Sn),Oe.appendChild(An)}function We(){var An=document.createElement("div");An.className="legend-styling-div";var En=document.createElement("label");En.className="legend-fill",En.htmlFor=this.id?"fill-color-"+this.id:"fill-color",En.innerHTML=this.labels["fill-color"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"fill-color-"+this.id:"fill-color",Sn.title="Selectionner une couleur de remplissage",Sn.type="color",Sn.value=e.values.color,Sn.setAttribute("data-id","fill-color"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),An.appendChild(En),An.appendChild(Sn),Oe.appendChild(An)}function Cn(){var An=document.createElement("div");An.className="legend-styling-div";var En=document.createElement("label");En.className="legend-fill",En.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",En.innerHTML=this.labels["fill-opacity"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"fill-opacity-"+this.id:"fill-opacity",Sn.title=e.values.opacity,Sn.type="range",Sn.min="0",Sn.max="1",Sn.step="0.1",Sn.defaultValue=e.values.opacity,Sn.setAttribute("data-id","fill-opacity"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),An.appendChild(En),An.appendChild(Sn),Oe.appendChild(An)}return Oe}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$i.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$i.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$h=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$h.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var Te={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=Te),Helper.mergeParams(this.options.obj,Te,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,Te=this.options.obj,Oe=document.createElement("div");Oe.className=this.name.container;var Be=document.createElement("div");if(Be.id=this.name.containertitle+"-"+this.options.position,Be.className=this.name.containertitle,this.options.tools.pin){var Ue=document.createElement("input");Ue.id=this.name.imagelabelinput+"-"+this.options.position,Ue.className=this.name.imagelabelinput,Ue.type="checkbox",Be.appendChild(Ue);var He=document.createElement("label");He.className=this.name.imagelabel,He.htmlFor=Ue.id,He.addEventListener?He.addEventListener("click",function(Tn){e.onClickLayerMapBox(Tn)}):He.attachEvent&&He.attachEvent("onclick",function(Tn){e.onClickLayerMapBox(Tn)}),Be.appendChild(He)}var We=function(){var Tn=document.createElement("div");if(Tn.id=this.name.containertools+"-"+this.options.position,Tn.className=this.name.containertools,this.options.tools.visibility){var Ln=document.createElement("input");Ln.id=this.name.visibilityinput+"-"+this.options.position,Ln.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,Ln.type="checkbox",Ln.checked="checked",Ln.addEventListener?Ln.addEventListener("click",function(ei){e.onVisibilityLayerMapBox(ei)}):Ln.attachEvent&&Ln.attachEvent("onclick",function(ei){e.onVisibilityLayerMapBox(ei)}),Tn.appendChild(Ln),this.DomVisibility=Ln;var Bn=document.createElement("label");Bn.htmlFor=this.name.visibilityinput+"-"+this.options.position,Bn.id=this.name.visibilitylabel+"-"+this.options.position,Bn.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,Bn.title="Afficher/masquer la couche",Tn.appendChild(Bn),Oe.appendChild(Tn)}this.options.tools.clone&&logger$h.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$h.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&We.apply(this),this.options.tools.type&&Te.type){var Cn=document.createElement("img");switch(Cn.className=this.name.typeimg,Te.type.toUpperCase()){case"SYMBOL-ICON":Cn.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":Cn.style["background-position"]="-194px 0";break;case"SYMBOL":Cn.style["background-position"]="-84px 0";break;case"LINE":Cn.style["background-position"]="-28px 0";break;case"FILL":Cn.style["background-position"]="-56px 0";break;case"BACKGROUND":Cn.style["background-position"]="-140px 0";break;case"CIRCLE":Cn.style["background-position"]="-168px 0";break;default:Cn.style["background-position"]="-112px 0"}Be.appendChild(Cn)}var An=document.createElement("div");An.id=this.name.containerlegend+"-"+this.options.position,An.className=this.name.containerlegend,Be.appendChild(An);var En=document.createElement("input");En.id=this.name.titleinput+"-"+this.options.position,En.className=this.name.titleinput,En.type="checkbox",Be.appendChild(En);var Sn=document.createElement("label");Sn.className=this.name.titlelabel,Sn.htmlFor=En.id,Sn.innerHTML=Te.id||Te["source-layer"]||Te.source,Sn.title=Te["source-layer"]||Te.source||Te.id,Sn.addEventListener?Sn.addEventListener("click",function(Tn){e.onClickLayerMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onclick",function(Tn){e.onClickLayerMapBox(Tn)}),Be.appendChild(Sn),this.DomToggle=Sn,Oe.appendChild(Be),this.options.tools.icon.anchor==="end"&&We.apply(this),this.container=Oe}add(){if(logger$h.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$h.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$h.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$h.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var Te=null,Oe=this.container.childNodes;if(Oe.length)for(var Be=this.options.tools.icon.anchor==="start"?1:0,Ue=Oe[Be].childNodes,He=0;He<Ue.length;He++){var We=Ue[He];We.id.indexOf(this.name.containerlegend)!==-1&&(Te=We)}if(Te){var Cn=e.getRenderContainer();Cn&&(Te.appendChild(Cn),this.bSlotLegend=!0)}}}visibility(e){if(logger$h.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$h.trace("collapse()"),this.DomToggle.click()}visible(){logger$h.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$h.trace("display()",e);var Te=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&Te),this.oFilter&&this.oFilter.display(e&&Te),this.oLegend&&this.oLegend.display(e&&Te)),Te}active(e){return logger$h.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$h.trace("onClickLayerMapBox",e);var Te=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),Oe=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+Te&&(document.getElementById(this.name.titleinput+Te).checked=!Oe),e.target.htmlFor===this.name.titleinput+Te&&document.getElementById(this.name.imagelabelinput+Te)&&(document.getElementById(this.name.imagelabelinput+Te).checked=!Oe),this.oStyle&&this.oStyle.display(!Oe),this.oFilter&&this.oFilter.display(!Oe),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!Oe)}onVisibilityLayerMapBox(e){logger$h.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$h.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$h.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$g=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$g.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Dtails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var Te=document.createElement("details");Te.className=this.name.details,Te.open=!this.options.collapse,e.appendChild(Te);var Oe=document.createElement("summary");Oe.className=this.name.summary,Oe.innerHTML=this.options.title,Te.appendChild(Oe),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$g.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$f=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$f.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$f.info("tag 'layers' is empty !");var Te=document.createElement("div");Te.className=this.name.container,this.container=Te}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$f.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$f.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e}},logger$e=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$e.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$e.info("La 'target' n'est pas renseigne (options.target)."),!this.options.style){logger$e.error("Le 'style' MapBox n'est pas renseign (options.style) !");return}this.options.events?this._initEvents():logger$e.warn("Les 'handlers' ne sont pas renseigns (options.events) !"),this.options.themes||logger$e.info("Les 'themes' MapBox ne sont pas renseigns (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$e.trace("Utilisation des outils MapBox par dfaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,Te=this.options.events;if(Te){for(var Oe in Te)if(Te.hasOwnProperty(Oe)){var Be=Te[Oe];Be&&(EventBus.hasEventListener(Oe,Be,e)||EventBus.addEventListener(Oe,Be,e))}}}_initContainer(){logger$e.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var Te=this.options.tools.themes;if(Te&&this.options.themes){if(this.options.tools.title){var Oe=document.createElement("div");Oe.id=this.name.titleThemesID+this.id,Oe.className=this.name.titleThemes,Oe.innerHTML="Liste des 'thmes'",e.appendChild(Oe)}var Be=new Themes({id:this.id,target:e,tools:typeof Te=="object"?Te:{},obj:this.options.themes});Be.add()}if(this.options.tools.search){var Ue=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Ue.add()}for(var He in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(He)){if(this.options.tools.layers){var We=Object.keys(this.mapbox.sources).length>1?1:0;if(We){var Cn=document.createElement("hr");Cn.className=this.name.sep,e.appendChild(Cn)}if(this.options.tools.title){var An=document.createElement("div");An.id=this.name.titleLayersID+this.id,An.className=this.name.titleLayers,An.innerHTML=We?"Liste des 'couches' ("+He+")":"Liste des 'couches'",e.appendChild(An)}}var En=this.mapbox.layers.slice();if(En.forEach(function(ar,pr){var rr=ar.metadata;rr?rr["geoportail:order"]=pr:ar.metadata={"geoportail:order":pr}}),this.options.tools.sort){var Sn=this.options.tools.sortBy,Tn=this.options.tools.sortOrder,Ln=function(ar,pr){var rr=0;if(ar.metadata&&ar.metadata["geoportail:group"]&&pr.metadata&&pr.metadata["geoportail:group"]){var br=null,Li=null;br=ar.metadata["geoportail:group"],Li=pr.metadata["geoportail:group"],rr=br.localeCompare(Li)}else switch(Sn){case"geom":rr=Tn==="asc"?ar.type.localeCompare(pr.type)||ar.id.localeCompare(pr.id):pr.type.localeCompare(ar.type)||pr.id.localeCompare(ar.id);break;case"class":rr=Tn==="asc"?ar["source-layer"].localeCompare(pr["source-layer"])||ar.id.localeCompare(pr.id):pr["source-layer"].localeCompare(ar["source-layer"])||pr.id.localeCompare(ar.id);break;case"id":default:rr=Tn==="asc"?ar.id.localeCompare(pr.id):pr.id.localeCompare(ar.id);break}return rr};En.sort(Ln)}logger$e.trace("Layers : ",En);var Bn=this.options.tools.sortBy,ei=this.options.tools.groupAuto,ni={};En.forEach(function(ar){var pr=ar.metadata;if(pr&&pr["geoportail:group"]){var rr=pr["geoportail:group"];ni[rr]=ni[rr]?ni[rr]+1:1}else{var br=null;switch(Bn){case"class":br=ar["source-layer"];break;case"geom":br=ar.type;break;case"id":default:br=ar.id;break}var Li=br;if(ei){var ur=/_|-|:|=/,sr=br.search(ur);Li=sr!==-1?br.substring(0,sr).trim():br}ni[Li]=ni[Li]?ni[Li]+1:1,pr?pr["geoportail:group"]=Li:ar.metadata={"geoportail:group":Li}}}),logger$e.trace("Groups : ",ni);var ti=document.createElement("div");ti.className=this.name.containerLayers,e.appendChild(ti);var ri;if(this.options.tools.collapse!==void 0){ri=document.createElement("details"),ri.className="",ri.open=!this.options.tools.collapse,ti.appendChild(ri);var oi=document.createElement("summary");oi.className="",oi.innerHTML="",ri.appendChild(oi)}for(var ai=this.options.tools.collapse!==void 0?ri:ti,ci=-1,Pi=0;Pi<En.length;Pi++){var vi=En[Pi];if(ci++,vi.source===He){if(this.options.tools.group&&this.options.tools.sort){var pi=vi.metadata;if(pi){var Mi=vi.metadata["geoportail:group"];if(Mi)if(ni[Mi]>1){ni[Mi]=-1;var Fi=new Group({id:this.id,target:this.options.tools.collapse!==void 0?ri:ti,title:Mi,collapse:!0});Fi.add(),ai=Fi.getContainer()}else ni[Mi]===1&&(ai=this.options.tools.collapse!==void 0?ri:ti);else ai=this.options.tools.collapse!==void 0?ri:ti}else ai=this.options.tools.collapse!==void 0?ri:ti}if(this.options.tools.layers){var fi=new Layer({id:this.id,target:ai,position:ci+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:vi.id,type:vi.type,source:vi.source,"source-layer":vi["source-layer"]}});fi.add(),vi.layout&&vi.layout.visibility&&vi.layout.visibility==="none"&&fi.visibility(!1),this.layers.push(fi)}if(this.options.tools.legend){var ui=this.options.tools.editable;typeof ui>"u"&&(ui=vi.editable);var Oi=new Legend({id:this.id,target:ai,sprites:this.sprites,obj:{id:vi.id,source:vi.source,title:vi.id,editable:typeof ui<"u"?ui:!1,paint:vi.paint,layout:vi.layout}});Oi.add(),Oi.display(!1),fi&&(fi.addLegend(Oi),fi.slotLegend())}if(this.options.tools.style){var Ni=new Style({id:this.id,target:ai,position:ci+"_"+this.id,obj:{id:vi.id,source:vi.source,layout:vi.layout,paint:vi.paint}});Ni.add(),Ni.display(!1),fi&&fi.addStyle(Ni),vi.layout&&vi.layout.visibility&&vi.layout.visibility==="none"&&fi.visibility(!1)}if(this.options.tools.filter){var nr=new Filter({id:this.id,target:ai,position:ci+"_"+this.id,obj:{id:vi.id,source:vi.source,filter:vi.Filter}});nr.add(),nr.display(!1),fi&&fi.addFilter(nr)}}else ci>=0&&ci--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var er=document.createElement("div");er.id=this.name.target;var cr=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;cr.appendChild(er)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var Te=this;if(e&&e.startsWith("mapbox://"))return new Promise((Ue,He)=>{logger$e.error("Protocole mapbox:// non gr !"),Ue(Te)});if(!e)return new Promise((Ue,He)=>{logger$e.error("Auncun sprites disponibles !"),Ue(Te)});var Oe=function(){var Ue=e+".png";return fetch(Ue,{credentials:"same-origin"}).then(function(He){if(He.ok)return He.blob().then(function(Cn){Te.sprites.url=Ue;var An=new Image;return An.src=Ue,An.decode().then(function(){Te.sprites.size={},Te.sprites.size.h=An.height,Te.sprites.size.w=An.width})}).catch(Cn=>{logger$e.warn("fetch image sprites exception :",Cn)});var We=new Error("HTTP status code: "+He.status);throw We}).catch(He=>new Promise((We,Cn)=>{logger$e.error("fetch image sprites exception :",He),Cn(He)}))},Be=function(){var Ue=e+".json";return fetch(Ue,{credentials:"same-origin"}).then(function(He){if(He.ok)return He.json().then(function(Cn){Te.sprites.json=Cn}).catch(Cn=>{logger$e.warn("fetch json sprites exception :",Cn)});var We=new Error("HTTP status code: "+He.status);throw We}).catch(He=>new Promise((We,Cn)=>{logger$e.error("fetch json sprites exception :",He),Cn(He)}))};return Promise.all([Oe(),Be()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(Te=>{logger$e.warn("fetch sprites exception :",Te)}):new Promise((Te,Oe)=>{e._initContainer(),Te(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(Te=>Te.json().then(Oe=>{e.mapbox=Oe}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(Oe=>{logger$e.warn("fetch sprites exception :",Oe)}):new Promise((Oe,Be)=>{e._initContainer(),Oe(e)})}).catch(Oe=>{logger$e.error("json exception :",Oe)})).catch(Te=>{logger$e.error("fetch exception :",Te)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,Te){this.context[e]=Te}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var Te=null,Oe=this.getLayer(e),Be=Oe.options.obj.id,Ue=0;Ue<this.mapbox.layers.length;Ue++){var He=this.mapbox.layers[Ue];if(He.id===Be){Te=He;break}}return Te}getLayerFromStyle(e){for(var Te=null,Oe=this.mapbox.layers[e],Be=0;Be<this.getLayers().length;Be++){var Ue=this.getLayer(Be);if(Oe.id===Ue.options.obj.id){Te=Ue;break}}return Te}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createLoadingElement:function(){var ke=document.createElement("div");return ke.id="GPmapLoading",ke.className="",ke},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimport"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowImportPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke._onShowImportClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke._onShowImportClick(Oe)}),e},_createImportPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPimportPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createImportPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createImportPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",ke},_createImportPanelReturnPictoElement:function(){var ke=this,e=document.createElement("button");if(e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline",checkDsfr()){var Te=document.createElement("span");Te.className="GPelementHidden",Te.innerHTML="Retour",e.appendChild(Te)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(ke._addUID("GPshowImportPicto")).click(),ke._onReturnPictoClick(Oe),document.getElementById(ke._addUID("GPshowImportPicto")).click()}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(ke._addUID("GPshowImportPicto")).click(),ke._onReturnPictoClick(Oe),document.getElementById(ke._addUID("GPshowImportPicto")).click()}),e},_createImportPanelTitleElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportHeaderTitle"),ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Import de donnes",ke},_createImportPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createImportPanelFormElement:function(){var ke=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(Te){Te.preventDefault(),ke._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(Te){Te.preventDefault(),ke._onImportSubmit()}),e},_createImportTypeLineElement:function(ke){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPimportTypeLine"),Te.className="GPimportInputLine";var Oe=document.createElement("label");Oe.id=this._addUID("GPimportTypeLabel"),Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Type de donne",Oe.title="Type de donne",Te.appendChild(Oe);var Be=document.createElement("select");Be.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(We){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(We)}):Be.attachEvent&&Be.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),Be.id=this._addUID("GPimportTypeSelect"),(!ke||!Array.isArray(ke))&&(ke=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Ue,He=0;He<ke.length;He++)Ue=document.createElement("option"),Ue.value=ke[He],Ue.text=ke[He]==="MAPBOX"?"Tuiles vectorielles":ke[He],Be.appendChild(Ue);return Te.appendChild(Be),Te},_createImportWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPimportWaitingContainer"),ke.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createImportStaticParamsContainer:function(ke){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),ke==="KML"||ke==="GPX"||ke==="GeoJSON"||ke==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var ke=document.createElement("div");ke.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",ke.appendChild(e);var Te=document.createElement("input");return Te.type="text",Te.id=this._addUID("GPimportName"),Te.className="GPinput gpf-input fr-input",ke.appendChild(Te),ke},_createStaticModeChoiceDiv:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportChoice"),ke.className="fr-my-1w",ke},_createStaticLocalChoiceDiv:function(){var ke=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var Te=document.createElement("input");Te.type="radio",Te.addEventListener?Te.addEventListener("change",function(Be){document.getElementById(ke._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(ke._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",ke._onStaticImportTypeChange(Be)}):Te.appendChild&&Te.appendChild("onchange",function(){document.getElementById(ke._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(ke._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",ke._onStaticImportTypeChange()}),Te.name="GPimportChoiceMode",Te.value="local",Te.checked=!0,Te.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(Te);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltLocal"),Oe.innerHTML="par fichier local",Oe.title="par fichier local",e.appendChild(Oe),e},_createStaticUrlChoiceDiv:function(){var ke=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var Te=document.createElement("input");Te.type="radio",Te.addEventListener?Te.addEventListener("change",function(Be){document.getElementById(ke._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(ke._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",ke._onStaticImportTypeChange(Be)}):Te.appendChild&&Te.appendChild("onchange",function(){document.getElementById(ke._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(ke._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",ke._onStaticImportTypeChange()}),Te.id=this._addUID("GPimportChoiceAltUrl"),Te.name="GPimportChoiceMode",Te.value="url",Te.checked=!1,e.appendChild(Te);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltUrl"),Oe.innerHTML="par URL",Oe.title="par URL",e.appendChild(Oe),e},_createStaticLocalInputDiv:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportValueLocal"),ke.className="GPimportInputLine",ke},_createStaticLocalInputLabel:function(){var ke=document.createElement("label");return ke.className="GPlabel gpf-label fr-label fr-mb-1w",ke.htmlFor=this._addUID("GPimportFile"),ke.innerHTML="Fichier local",ke.title="Fichier local",ke},_createStaticLocalInput:function(){var ke=document.createElement("input");return ke.type="file",ke.id=this._addUID("GPimportFile"),ke.className="GPimportInputFile gpf-upload fr-upload",ke},_createStaticUrlInputDiv:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportValueUrl"),ke.className="GPelementHidden gpf-hidden",ke},_createStaticUrlInputLabel:function(){var ke=document.createElement("label");return ke.className="GPlabel gpf-label fr-label",ke.htmlFor=this._addUID("GPimportUrl"),ke.innerHTML="URL",ke.title="URL",ke},_createStaticUrlInput:function(){var ke=document.createElement("input");return ke.type="text",ke.id=this._addUID("GPimportUrl"),ke.className="GPinput gpf-input fr-input",ke},_createServiceParamsContainer:function(ke){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),ke==="WMS"||ke==="WMTS"||ke==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var ke=document.createElement("div");return ke.className="GPimportInputLine",ke},_createServiceUrlInputLabel:function(){var ke=document.createElement("label");return ke.className="GPlabel gpf-label fr-label",ke.htmlFor=this._addUID("GPimportServiceUrl"),ke.innerHTML="URL du service",ke.title="URL du service",ke},_createServiceUrlInput:function(){var ke=document.createElement("input");return ke.type="text",ke.id=this._addUID("GPimportServiceUrl"),ke.className="GPinput gpf-input fr-input",ke},_createImportSubmitFormElement:function(){var ke=document.createElement("input");return ke.id=this._addUID("GPimportSubmit"),ke.className="GPsubmit gpf-btn fr-btn",ke.type="submit",ke.value="Importer",ke},_createImportGetCapPanelElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportGetCapPanel"),ke.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",ke},_createImportGetCapPanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Couches accessibles",Te.title="Couches accessibles",e.appendChild(Te);var Oe=document.createElement("button");Oe.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.id=this._addUID("GPimportGetCapPanelClose"),Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click(),document.getElementById(ke._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),ke._onGetCapPanelClose()}):Oe.attachEvent&&Oe.attachEvent("click",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click(),document.getElementById(ke._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(ke._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),ke._onGetCapPanelClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createImportGetCapResultsContainer:function(){var ke=document.createElement("div");return ke.className="GPimportGetCapRoot gpf-panel__list",ke.id=this._addUID("GPimportGetCapResults"),ke},_addImportGetCapResultListRubrique:function(ke,e){var Te=document.createElement("ul");return Te.className="GPimportGetCapListRubrique",Te.title=ke,e.appendChild(Te),e},_addImportGetCapResultRubrique:function(ke,e){var Te=document.createElement("li");Te.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var Oe=document.createElement("input");Oe.id="GPimportGetCapRubrique-"+SelectorID.generate(),Oe.className="GPimportGetCapRubrique",Oe.type="checkbox",Te.appendChild(Oe);var Be=document.createElement("label");return Be.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",Be.htmlFor=Oe.id,Be.innerHTML=ke,Be.title=ke,Te.appendChild(Be),e.appendChild(Te),e},_addImportGetCapResultListLayer:function(ke){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",ke.appendChild(e),ke},_addImportGetCapResultLayer:function(ke,e,Te){var Oe=document.createElement("li");Oe.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",Oe.innerHTML=ke.content,Oe.title=ke.title,Oe.id="GPimportGetCapProposal_"+e;var Be=this;return Oe.addEventListener?Oe.addEventListener("click",function(Ue){Be._onGetCapResponseLayerClick(Ue)}):Oe.attachEvent&&Oe.attachEvent("onclick",function(){Be._onGetCapResponseLayerClick()}),Te.appendChild(Oe),Te},_createImportMapBoxPanelElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPimportMapBoxPanel"),ke.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",ke},_createImportMapBoxPanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("button");Te.id=this._addUID("GPimportMapBoxPanelReturnPicto"),Te.title="Nouvel import",Te.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",Te.addEventListener?Te.addEventListener("click",function(He){document.getElementById(ke._addUID("GPshowImportPicto")).click(),ke._onMapBoxReturnPictoClick(He)}):Te.attachEvent&&Te.attachEvent("onclick",function(He){document.getElementById(ke._addUID("GPshowImportPicto")).click(),ke._onMapBoxReturnPictoClick(He)}),e.appendChild(Te);var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Edition des styles",Oe.title="Edition des styles",e.appendChild(Oe);var Be=document.createElement("button");Be.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.id=this._addUID("GPimportMapBoxPanelClose"),Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click(),document.getElementById(ke._addUID("GPimportMapBoxPanel")).style.display="none",ke._onMapBoxPanelClose()}):Be.attachEvent&&Be.attachEvent("click",function(){document.getElementById(ke._addUID("GPshowImportPicto")).click(),document.getElementById(ke._addUID("GPimportMapBoxPanel")).style.display="none",ke._onMapBoxPanelClose()});var Ue=document.createElement("span");return Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),e.appendChild(Be),e},_createImportMapBoxResultsContainer:function(){var ke=document.createElement("div");return ke.className="GPimportMapBoxpRoot",ke.id=this._addUID("GPimportMapBoxResults"),ke}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(ke){return ke?this._toolboxId+"-"+ke:this._toolboxId},getButtonID:function(ke){return ke?this._buttonId+"-"+ke:this._buttonId},getWidgetID:function(ke){return ke?this._widgetId+"-"+ke:this._widgetId},_createToolBoxContainerElement:function(ke){var e=document.createElement("div");e.id=this.getToolBoxID(ke),e.className="GPshowAdvancedToolPicto";var Te=document.createElement("button");Te.id=this.getButtonID(ke),Te.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button");var Oe=this;Te.addEventListener("click",function(Ue){var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He),this.blur();var We=document.getElementById(Oe.getWidgetID(ke));We.style.display==="block"?We.style.display="none":We.style.display="block"}),e.appendChild(Te);var Be=document.createElement("div");return Be.id=this.getWidgetID(ke),Be.addEventListener("click",function(){},!1),e.appendChild(Be),e}},logger$d=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(ke,e){if(logger$d.trace("ToolBox.add()",e),!ke){logger$d.trace("map doesn't exist !?");return}var Te=typeof window<"u"?window:typeof self<"u"?self:null;Te&&(this._toolbox=Te.gpShareMeasureToolBox||{});var Oe=ke.getTargetElement(),Be=Oe.ownerDocument,Ue=Oe.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Ue]=SelectorID.generate()):this._toolbox[Ue]||(this._toolbox[Ue]=SelectorID.generate());var He=this._toolbox[Ue];if(!Be.getElementById(this.getToolBoxID(He))){logger$d.trace("create toolbox !");var We=this._createToolBoxContainerElement(He);We.style.pointerEvents="auto";var Cn=Oe.getElementsByClassName("ol-overlaycontainer-stopevent");Cn[0].appendChild(We)}var An=Be.getElementById(this.getWidgetID(He));e.setTarget(An),Te&&(Te.gpShareMeasureToolBox=this._toolbox),logger$d.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$c=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var ke=this.CLASSNAME;logger$c.trace("["+ke+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(ke){if(!ke.dragging){var e=ke.coordinate;if(this.sketch){var Te,Oe=this.sketch.getGeometry();if(Te=this.format(Oe),Oe.getType()==="LineString")e=Oe.getLastCoordinate();else if(Oe.getType()==="Polygon")e=Oe.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=Te,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(ke,e){ke.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap(),Oe=Te.getTargetElement().id,Be=typeof window<"u"?window:typeof self<"u"?self:null;Be&&(this.tools=Be.gpShareMeasures||{});var Ue=this.CLASSNAME;for(var He in this.tools)if(this.tools.hasOwnProperty(He))for(var We=this.tools[He],Cn=0;Cn<We.length;Cn++){var An=We[Cn];An&&An.active&&He!==Ue&&An.map.id===Oe&&(An.active=!1,An.instance!==null&&An.instance.clean())}Interactions.unset(Te,{current:"Measures"});var En=this._pictoContainer.ariaPressed;if(En==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var Sn=0;Sn<this.tools[Ue].length;Sn++)this.tools[Ue][Sn].map.id===Oe&&(this.tools[Ue][Sn].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var Tn=0;Tn<this.tools[Ue].length;Tn++)this.tools[Ue][Tn].map.id===Oe&&(this.tools[Ue][Tn].active=!1)}},clearMeasureToolTip:function(){var ke=this.getMap();if(ke)for(var e=ke.getTargetElement(),Te=e.getElementsByClassName("ol-overlaycontainer"),Oe=0;Oe<Te.length;Oe++){for(var Be=Te[Oe],Ue=Be.children.length,He=[],We=0;We<Ue;We++){var Cn=Be.children[We];if(Cn.children.length!==0){var An=Cn.children[0];(An.className==="GPmeasureTooltip GPmeasureTooltip-static"||An.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&He.push(Cn)}}for(var En=0;En<He.length;En++)Be.removeChild(He[En])}},clearMeasure:function(){var ke=this.getMap();this.measureVector&&(ke.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(ke.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(ke){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),ke.addOverlay(this.measureTooltip)},createHelpTooltip:function(ke){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),ke.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(ke){this.options.styles=ke||{},logger$c.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$c.trace("style finish",this.options.styles.finish);var Te={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(Te.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(Te.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(Te)},addMeasureInteraction:function(ke){var e=this.getMap(),Te=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(Oe){return Oe.originalEvent.ctrlKey?(Te.sketch&&this.removeLastPoint(),!1):!0},type:ke,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",Oe=>{Te.sketch=Oe.feature}),this.measureDraw.on("drawend",()=>{if(Te.sketch){var Oe,Be,Ue=Te.sketch.getGeometry();if(Oe=Te.format(Ue),Ue.getType()==="LineString")Be=Ue.getLastCoordinate();else if(Ue.getType()==="Polygon")Be=Ue.getInteriorPoint().getCoordinates();else return;Te.measureTooltipElement.innerHTML=Oe,Te.measureTooltip.setPosition(Be)}Te.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",Te.measureTooltip.setOffset([0,-7]),Te.sketch=null,Te.measureTooltipElement=null,Te.createMeasureTooltip(e)})},initMeasureInteraction:function(){var ke=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",ke.addLayer(this.measureVector),ke.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var Te=this.measureVector.gpLayerId;e._layers[Te].title===Te&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPelevationPath"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowElevationPathPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimtrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowElevationPathClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowElevationPathClick(Oe)}),e},_createElevationPathPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPelevationPathPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createElevationPathPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createDrawingButtonsPluginDiv:function(){var ke=document.createElement("div");return ke.className="container-buttons-plugin fr-mx-2w",ke},_createElevationPathPanelHeaderElement:function(){var ke=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var Te=document.createElement("button");Te.id=this._addUID("GPelevationPathPanelInfo"),Te.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",Te.title="Informations",Te.addEventListener?Te.addEventListener("click",function(){ke.onOpenElevationPathInfoClick()}):Te.attachEvent&&Te.attachEvent("onclick",function(){ke.onOpenElevationPathInfoClick()}),e.appendChild(Te)}var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Profil Altimtrique",e.appendChild(Oe);var Be=document.createElement("button");Be.id=this._addUID("GPelevationPathPanelReduce"),Be.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",Be.title="Masquer le panneau",Be.addEventListener?Be.addEventListener("click",function(We){typeof ke.onReduceElevationPathPanelClick=="function"&&ke.onReduceElevationPathPanelClick()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(We){typeof ke.onReduceElevationPathPanelClick=="function"&&ke.onReduceElevationPathPanelClick()}),e.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPelevationPathPanelClose"),Ue.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowElevationPathPicto")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowElevationPathPicto")).click()});var He=document.createElement("span");return He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),e.appendChild(Ue),e},_createElevationPathPanelProfilElement:function(){var ke=document.createElement("div");ke.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",ke.appendChild(e),ke},_createElevationPathWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPelevationPathCalcWaitingContainer"),ke.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createElevationPathInformationsElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(ke.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",ke.appendChild(e),ke},_addElevationPathInformationsItem:function(ke,e){var Te=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(Te){var Oe=document.createElement("p");Oe.className="GPelevationPathInformations";var Be=document.createElement("span");Be.innerText=ke;var Ue=document.createElement("span");Ue.innerText=e,Oe.appendChild(Be),Oe.appendChild(Ue),Te.appendChild(Oe)}return Te}},ProfileElevationPathDOM={_getCssProperty:function(ke,e){return window.getComputedStyle(ke,null).getPropertyValue(e)},_getTextWidth:function(ke,e,Te=null){var Oe=this.canvas||(this.canvas=document.createElement("canvas")),Be=Oe.getContext("2d");Te===null?Be.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:Be.font=Te;var Ue=Be.measureText(ke);return Ue.width},_dataZToSvgY:function(ke,e,Te,Oe){return e-(ke-Te)*Oe-.5},_dataDistToSvgX:function(ke,e,Te,Oe){return e-Te+ke*Oe},_svgXToDataDist:function(ke,e,Te,Oe){return(ke+Te-e)/Oe},_arrayBisect:function(ke,e){let Te;if(ke.length===0)return 0;for(Te=0;Te<ke.length;Te++)if(e<ke[Te].dist)return Te;return Te-1},displayProfileByDefault:function(ke,e,Te,Oe){var Be=Te;if(!e||!ke)return;const Ue={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Ue.fontFamily="Marianne",Ue.strokeColor="#2F4077",Ue.fillColor="#2F4077",Ue.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const He={top:25,right:15,bottom:10,left:10};var We=Be.options.displayProfileOptions,Cn=ke.points,An=JSON.parse(JSON.stringify(Cn));An.sort(function(Rs,As){return Rs.z-As.z});var En=An[0].z,Sn=An[An.length-1].z,Tn=ke.distance;let Ln="m";const Bn=document.createElement("div");Bn.id="profileElevationByDefault",e.appendChild(Bn);var ei=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),ni=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const ti=ni-He.top-He.bottom,ri=ei-He.left-He.right,oi=17,ai=this._getTextWidth(Math.round(Sn).toLocaleString()+",88",e,`400 10 ${Ue.fontFamily}`),ci=17,Pi=15,vi=15,pi=this._getTextWidth(Math.round(Tn).toLocaleString()+",5",e),Mi=1,Fi=ti-ci-Pi,fi=ri-oi-ai,ui=document.createElementNS("http://www.w3.org/2000/svg","svg");ui.id="profileElevationByDefaultSvg",ui.setAttribute("style","display: block; margin: auto; overflow: visible;"),ui.setAttribute("viewBox",`0 0 ${ei} ${ni}`),ui.setAttribute("width","100%"),ui.setAttribute("height","100%");const Oi=Math.floor(Fi/vi);let Ni;Sn===En?Ni=.1:Ni=Math.pow(10,Math.ceil(Math.log((Sn-En)/Oi)/Math.log(10)))/2;let nr=Math.floor(En/Ni)*Ni,er=Math.ceil(Sn/Ni)*Ni;er===Sn&&(er+=Ni),nr=Math.round(nr*100)/100,er=Math.round(er*100)/100;let cr=Math.round((er-nr)/Ni);cr+1>Oi&&(Ni=Math.pow(10,Math.ceil(Math.log((Sn-En)/Oi)/Math.log(10))),nr=Math.floor(En/Ni)*Ni,er=Math.ceil(Sn/Ni)*Ni,er===Sn&&(er+=Ni),nr=Math.round(nr*100)/100,er=Math.round(er*100)/100,cr=Math.floor((er-nr)/Ni)),cr=Math.max(Math.round(cr),1);const ar=document.createElementNS("http://www.w3.org/2000/svg","g");ar.setAttribute("class","profile-z-vertical");const pr=document.createElementNS("http://www.w3.org/2000/svg","g"),rr=Fi/cr;let br;Sn===En?br=Fi/.2:br=Fi/(er-nr);let Li,ur,sr,dr,vr,hr;for(let Rs=0;Rs<=cr;Rs++)Li=document.createElementNS("http://www.w3.org/2000/svg","text"),Li.setAttribute("class","profile-z-graduation"),Li.setAttribute("font-family",Ue.fontFamily),Li.setAttribute("font-size","10px"),Li.setAttribute("fill","#5E5E5E"),Li.textContent=(Math.round(100*(nr+Rs*Ni))/100).toLocaleString(),ur=Fi-Rs*rr,Li.setAttribute("transform",`translate(${oi+ai-8}, ${ur+5})`),Li.setAttribute("text-anchor","end"),ar.appendChild(Li),sr=Math.round(ur)-.5,dr=document.createElementNS("http://www.w3.org/2000/svg","g"),vr=document.createElementNS("http://www.w3.org/2000/svg","path"),vr.setAttribute("cs","100,100"),vr.setAttribute("stroke-width","1"),Rs!==0?vr.setAttribute("stroke-opacity","0.2"):vr.setAttribute("stroke-opacity","1"),vr.setAttribute("stroke","#000000"),vr.setAttribute("fill","none"),vr.setAttribute("d",`M${oi+ai},${sr} L${fi+oi+ai},${sr}`),hr=document.createElementNS("http://www.w3.org/2000/svg","path"),hr.setAttribute("cs","100,100"),hr.setAttribute("stroke-width","1"),hr.setAttribute("stroke-opacity","1"),hr.setAttribute("stroke","#000000"),hr.setAttribute("fill","none"),hr.setAttribute("d",`M${oi+ai},${sr} L${oi+ai+5},${sr}`),hr.setAttribute("transform","translate(-5, 0)"),dr.appendChild(hr),dr.appendChild(vr),pr.appendChild(dr);var mr=document.createElementNS("http://www.w3.org/2000/svg","text");mr.setAttribute("class","profile-z-legend"),mr.setAttribute("font-family",Ue.fontFamily),mr.setAttribute("font-size","11px"),mr.setAttribute("fill","#5E5E5E"),mr.textContent="Altitude (m)",mr.setAttribute("transform",`translate(${oi-8}, ${Math.round(Fi/2)}) rotate(-90)`),mr.setAttribute("text-anchor","middle"),ar.appendChild(mr),ui.appendChild(ar),ui.appendChild(pr),Tn>2e3&&(Tn/=1e3,Ln="km");const _r=Math.floor(fi/pi);let Ar=Math.pow(10,Math.ceil(Math.log(Tn/_r)/Math.log(10)))/2;const Vr=Tn;let Gr=Math.floor(Vr/Ar);Gr>_r?(Ar=Math.pow(10,Math.ceil(Math.log(Tn/_r)/Math.log(10))),Gr=Math.floor(Vr/Ar)):Gr<Mi&&(Ar=Math.pow(10,Math.ceil(Math.log(Tn/_r)/Math.log(10))-1),Gr=Math.floor(Vr/Ar)),Gr=Math.max(Gr,1);const Hi=Ar*Gr,gr=document.createElementNS("http://www.w3.org/2000/svg","g");gr.setAttribute("class","profile-x-vertical");const lr=document.createElementNS("http://www.w3.org/2000/svg","g"),Ki=fi/Vr,Dr=(Vr-Hi)*Ki,Nr=Math.round((fi-Dr)/Gr);let Ir,kr,Lr,Pr,Er,Sr;for(let Rs=0;Rs<=Gr+1;Rs++)Ir=document.createElementNS("http://www.w3.org/2000/svg","text"),Ir.setAttribute("class","profile-x-graduation"),Ir.setAttribute("font-family",Ue.fontFamily),Ir.setAttribute("font-size","10px"),Ir.setAttribute("fill","#5E5E5E"),Rs!==Gr+1&&(Ir.textContent=(Math.round(100*Rs*Ar)/100).toLocaleString()),kr=oi+ai+Rs*Nr,Rs===Gr+1&&(kr=oi+ai+fi),Ir.setAttribute("transform",`translate(${kr}, ${Fi+Pi+5})`),Ir.setAttribute("text-anchor","middle"),gr.appendChild(Ir),Lr=kr-.5,Pr=document.createElementNS("http://www.w3.org/2000/svg","g"),Er=document.createElementNS("http://www.w3.org/2000/svg","path"),Er.setAttribute("cs","100,100"),Er.setAttribute("stroke-width","1"),Rs!==0?Er.setAttribute("stroke-opacity","0.2"):Er.setAttribute("stroke-opacity","1"),Er.setAttribute("stroke","#000000"),Er.setAttribute("fill","none"),Er.setAttribute("d",`M${Lr},${Fi} L${Lr},0`),Sr=document.createElementNS("http://www.w3.org/2000/svg","path"),Sr.setAttribute("cs","100,100"),Sr.setAttribute("stroke-width","1"),Sr.setAttribute("stroke-opacity","1"),Sr.setAttribute("stroke","#000000"),Sr.setAttribute("fill","none"),Sr.setAttribute("d",`M${Lr},${Fi} L${Lr},${Fi-5}`),Sr.setAttribute("transform","translate(0, 5)"),Pr.appendChild(Sr),Pr.appendChild(Er),lr.appendChild(Pr);var wr=document.createElementNS("http://www.w3.org/2000/svg","text");wr.setAttribute("class","profile-x-legend"),wr.setAttribute("font-family",Ue.fontFamily),wr.setAttribute("font-size","11px"),wr.setAttribute("fill","#5E5E5E"),wr.textContent=`Distance (${Ln})`,wr.setAttribute("transform",`translate(${oi+ai+fi/2}, ${Fi+Pi+ci+3})`),wr.setAttribute("text-anchor","middle"),gr.appendChild(wr),ui.appendChild(gr),ui.appendChild(lr);const Br=document.createElementNS("http://www.w3.org/2000/svg","g");let Hr=1;Ln==="km"&&(Hr=1e3);let qr=this._dataDistToSvgX(Cn[0].dist/Hr,ri,fi,Ki),Xr=this._dataZToSvgY(Cn[0].z,Fi,nr,br),cs=`M${qr},${Xr}`;for(let Rs=1;Rs<Cn.length;Rs++)qr=this._dataDistToSvgX(Cn[Rs].dist/Hr,ri,fi,Ki),Xr=this._dataZToSvgY(Cn[Rs].z,Fi,nr,br),cs+=` L${qr},${Xr}`;const Qr=document.createElementNS("http://www.w3.org/2000/svg","path");Qr.setAttribute("cs","100,100"),Qr.setAttribute("stroke-width","1"),Qr.setAttribute("stroke-opacity","1"),Qr.setAttribute("stroke",Ue.strokeColor),Qr.setAttribute("fill","none"),Qr.setAttribute("d",cs),cs+=` L${qr},${Fi}`,cs+=` L${ri-fi},${Fi}`;const bs=document.createElementNS("http://www.w3.org/2000/svg","path");bs.setAttribute("cs","100,100"),bs.setAttribute("stroke-width","1"),bs.setAttribute("stroke-opacity","0"),bs.setAttribute("stroke","#000000"),bs.setAttribute("fill",Ue.fillColor),bs.setAttribute("fill-opacity","0.2"),bs.setAttribute("d",cs),Br.appendChild(Qr),Br.appendChild(bs),ui.appendChild(Br);const vs=document.createElementNS("http://www.w3.org/2000/svg","g"),Ms=document.createElementNS("http://www.w3.org/2000/svg","rect");Ms.setAttribute("width",fi),Ms.setAttribute("height",Fi),Ms.setAttribute("transform",`translate(${ri-fi},0)`),Ms.setAttribute("visibility","hidden"),Ms.setAttribute("pointer-events","all");const Ls=JSON.parse(JSON.stringify(Cn));Ls.sort(function(Rs,As){return Rs.dist-As.dist});const ps=document.createElementNS("http://www.w3.org/2000/svg","line");ps.setAttribute("id","focusLineX"),ps.setAttribute("class","focusLine-default"),ps.setAttribute("fill","none"),ps.setAttribute("stroke",Ue.focusLineColor),ps.setAttribute("stroke-width","0.5px"),ps.setAttribute("visibility","hidden");const Ps=document.createElementNS("http://www.w3.org/2000/svg","line");Ps.setAttribute("id","focusLineY"),Ps.setAttribute("class","focusLine-default"),Ps.setAttribute("fill","none"),Ps.setAttribute("stroke",Ue.focusLineColor),Ps.setAttribute("stroke-width","0.5px"),Ps.setAttribute("visibility","hidden");const Es=document.createElementNS("http://www.w3.org/2000/svg","circle");Es.setAttribute("id","focusCircle"),Es.setAttribute("r",4),Es.setAttribute("class","circle-default focusCircle-default"),Es.setAttribute("fill",Ue.focusLineColor),Es.setAttribute("visibility","hidden"),vs.appendChild(Es),vs.appendChild(ps),vs.appendChild(Ps);const Ds=document.createElementNS("http://www.w3.org/2000/svg","text"),xs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Xs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),_o=document.createElementNS("http://www.w3.org/2000/svg","tspan");Ds.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Ue.fontFamily}; z-index:50;`),Ds.style.pointerEvents="none",Ds.style.position="fixed",Ds.setAttribute("class","tooltipInit"),Ds.setAttribute("text-anchor","middle"),Bn.appendChild(Ds),xs.setAttribute("class","altiPathValue"),xs.setAttribute("x","0"),xs.setAttribute("dy","-.7em"),Xs.setAttribute("class","altiPathValue"),Xs.setAttribute("x","0"),Xs.setAttribute("dy","1em"),_o.setAttribute("class","altiPathCoords"),_o.setAttribute("x","0"),_o.setAttribute("dy","1em"),Ds.appendChild(xs),We.currentSlope&&Ds.appendChild(Xs),Ds.appendChild(_o);const Fs=document.createElementNS("http://www.w3.org/2000/svg","g");vs.appendChild(Fs);const Ss=document.createElementNS("http://www.w3.org/2000/svg","path");Ss.setAttribute("cs","100,100"),Ss.setAttribute("fill","#FFFFFF"),Ss.setAttribute("stroke","#CCCCCC"),Ss.setAttribute("fill-opacity","0.8"),Ss.setAttribute("stroke-width","1"),Ss.setAttribute("stroke-opacity","1");const Is=document.createElementNS("http://www.w3.org/2000/svg","path");Is.setAttribute("cs","100,100"),Is.setAttribute("fill","#FFFFFF"),Is.setAttribute("stroke","#000000"),Is.setAttribute("fill-opacity","0"),Is.setAttribute("stroke-width","1"),Is.setAttribute("stroke-opacity","0.4"),Is.setAttribute("transform","translate(1,1)"),Fs.appendChild(Is),Fs.appendChild(Ss),Fs.appendChild(Ds),Fs.setAttribute("class","tooltipInit"),Fs.style.pointerEvents="none";function oa(){ps.setAttribute("visibility","visible"),Ps.setAttribute("visibility","visible"),Es.setAttribute("visibility","visible"),Oe.__createProfileMarker(Be,Cn[0]),Ds.classList.remove("tooltipInit"),Fs.classList.remove("tooltipInit"),Ds.classList.remove("tooltipFadeOut"),Fs.classList.remove("tooltipFadeOut"),Ds.classList.add("tooltipFadeIn"),Fs.classList.add("tooltipFadeIn")}function qs(){ps.setAttribute("visibility","hidden"),Ps.setAttribute("visibility","hidden"),Es.setAttribute("visibility","hidden"),Oe.__removeProfileMarker(Be),Ds.classList.remove("tooltipFadeIn"),Fs.classList.remove("tooltipFadeIn"),Ds.classList.add("tooltipFadeOut"),Fs.classList.add("tooltipFadeOut")}function Eo(Rs){const As=ui.createSVGPoint();As.x=Rs.clientX,As.y=Rs.clientY;const bo=As.matrixTransform(ui.getScreenCTM().inverse()),Us=this._svgXToDataDist(bo.x,ri,fi,Ki)*Hr,zs=Math.max(1,this._arrayBisect(Ls,Us)),Ws=Cn[zs-1],yo=Cn[zs];let Co=Ws;Us-Ws.dist>yo.dist-Us&&(Co=yo);const qa=this._dataDistToSvgX(Co.dist/Hr,ri,fi,Ki),ma=this._dataZToSvgY(Co.z,Fi,nr,br);Es.setAttribute("cx",qa),Es.setAttribute("cy",ma),ps.setAttribute("x1",qa),ps.setAttribute("y1",Fi),ps.setAttribute("x2",qa),ps.setAttribute("y2",0),Ps.setAttribute("x1",oi+ai),Ps.setAttribute("y1",ma),Ps.setAttribute("x2",fi+oi+ai),Ps.setAttribute("y2",ma),Oe.__updateProfileMarker(Be,Co);const Pa=`Altitude : ${Co.z.toLocaleString()} m`,Fa=`Pente : ${Co.slope} %`,xa=`(lat : ${Co.lat.toLocaleString()} / lon : ${Co.lon.toLocaleString()})`;xs.innerHTML=Pa,Xs.innerHTML=Fa,_o.innerHTML=xa;const aa=Math.max(this._getTextWidth(xa,_o),this._getTextWidth(Pa,xs));let la;Co.dist>Tn*Hr/2?(la=`M -0.5 -0.5 l -6 6 l 0 16 l -${aa+10} 0 l 0 -44 l ${aa+10} 0 l 0 16 l 6 6`,Ds.setAttribute("transform",`translate(${-(aa/2+12)},0)`)):Co.dist<=Tn*Hr/2&&(la=`M -0.5 -0.5 l 6 6 l 0 16 l ${aa+10} 0 l 0 -44 l -${aa+10} 0 l 0 16 l -6 6`,Ds.setAttribute("transform",`translate(${aa/2+12},0)`)),Ss.setAttribute("d",la),Is.setAttribute("d",la),Fs.setAttribute("transform",`translate(${qa},${ma})`),Fs.style.transform=`translate(${qa}px,${ma}px)`}return Ms.addEventListener("pointerover",oa),Ms.addEventListener("pointerout",qs),Ms.addEventListener("pointermove",Eo.bind(this)),vs.appendChild(Ms),ui.appendChild(vs),Bn.appendChild(ui),e},displayProfileRaw:function(ke,e,Te,Oe){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var Be=ke&&ke.points?ke.points:{},Ue=document.createElement("textarea");return Ue.id="profilElevationResults",Ue.rows=10,Ue.cols=50,Ue.style.width="100%",Ue.innerHTML=JSON.stringify(Be,void 0,4),Ue.addEventListener("mouseover",function(He){Oe.__customRawProfileMouseOverEvent(Te,He)}),e.appendChild(Ue),e}},displayProfileLibD3:function(ke,e,Te,Oe){var Be=Te;if(e&&ke){for(;e.firstChild;)e.removeChild(e.firstChild);var Ue=ke.points;if(ke.distance>2e3){ke.unit="km";for(let pi=0;pi<Ue.length;pi++)Ue[pi].dist/=1e3}var He=Be.options.displayProfileOptions,We={top:20,right:20,bottom:30,left:40},Cn=window.getComputedStyle(e).getPropertyValue("width"),An=window.getComputedStyle(e).getPropertyValue("height"),En=Cn.replace(/px/,"")-We.left-We.right,Sn=An.replace(/px/,"")-We.top-We.bottom,Tn=d3.scale.linear().range([0,En]),Ln=d3.scale.linear().range([Sn,0]),Bn=d3.svg.axis().scale(Tn).orient("bottom").ticks(5),ei=d3.svg.axis().scale(Ln).orient("left").ticks(5),ni=d3.svg.line().interpolate("basis").x(function(pi){return Tn(pi.dist)}).y(function(pi){return Ln(pi.z)}),ti=d3.svg.area().interpolate("basis").x(function(pi){return Tn(pi.dist)}).y0(Sn).y1(function(pi){return Ln(pi.z)}),ri=d3.select(e).append("svg").attr("width",En+We.left+We.right).attr("height",Sn+We.top+We.bottom).append("g").attr("transform","translate("+We.left+","+We.top+")"),oi=d3.extent(Ue,function(pi){return pi.dist});Tn.domain(oi);var ai=[0,d3.max(Ue,function(pi){return pi.z})];Ln.domain(ai),ri.append("path").datum(Ue).attr("class","area-d3").attr("d",ti),ri.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+Sn+")").call(Bn).append("text").attr("y",-15).attr("dy",".71em").attr("x",En).text("Distance ("+ke.unit+")"),ri.append("g").attr("class","y axis-d3").call(ei).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),ri.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+Sn+")").call(Bn.orient("bottom").tickSize(-Sn,0,0).tickFormat("")),ri.append("g").attr("class","grid-d3 horizontal").call(ei.orient("left").tickSize(-En,0,0).tickFormat("")),ri.append("path").datum(Ue).attr("class","line-d3").attr("d",ni),ri.selectAll("circle").data(Ue).enter().append("circle").attr("cx",function(pi){return Tn(pi.dist)}).attr("cy",function(pi){return Ln(pi.z)}).attr("r",0).attr("class","circle-d3");var ci=ri.append("g").style("display","none");ci.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),ci.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),ci.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var Pi=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),vi=d3.bisector(function(pi){return pi.dist}).left;return ri.append("rect").attr("class","overlay-d3").attr("width",En).attr("height",Sn).on("mouseover",function(){ci.style("display",null),Oe.__createProfileMarker(Be,Ue[0])}).on("mouseout",function(){ci.style("display","none"),Oe.__removeProfileMarker(Be),Pi.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var pi=d3.mouse(this),Mi=Tn.invert(pi[0]),Fi=Math.max(1,vi(Ue,Mi)),fi=Ue[Fi-1],ui=Ue[Fi],Oi=Mi-fi[0]>ui[0]-Mi?ui:fi,Ni=Tn(Oi.dist),nr=Ln(Oi.z);ci.select("#focusCircle").attr("cx",Ni).attr("cy",nr),ci.select("#focusLineX").attr("x1",Ni).attr("y1",Ln(ai[0])).attr("x2",Ni).attr("y2",Ln(ai[1])),ci.select("#focusLineY").attr("x1",Tn(oi[0])).attr("y1",nr).attr("x2",Tn(oi[1])).attr("y2",nr),Oe.__updateProfileMarker(Be,Oi),Pi.transition().duration(200).style("opacity",.9);var er="";er+=" Altitude : "+Oi.z+" m",He.currentSlope&&(er+="<br/> Pente : "+Oi.slope+" %"),er+="<br/> (Lat : "+Oi.lat+"/ Lon : "+Oi.lon+")",Pi.html(er).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),ri}},displayProfileLibAmCharts:function(ke,e,Te,Oe){var Be=Te;if(e&&ke){var Ue=ke.points,He="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",We=Be.options.displayProfileOptions.currentSlope;if(We&&(He+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),He+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),ke.distance>2e3){ke.unit="km";for(let Tn=0;Tn<Ue.length;Tn++)Ue[Tn].dist/=1e3}for(let Tn=0;Tn<Ue.length;Tn++){var Cn=Ue[Tn].dist,An=100;Cn>100?An=1:Cn>10&&(An=10),Cn=Math.round(Cn*An)/An,Ue[Tn].dist=Cn}var En={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+ke.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:He,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Ue},Sn=AmCharts.makeChart(e,En);return Sn.addListener("changed",function(Tn){var Ln=Tn.chart.dataProvider[Tn.index];Oe.__updateProfileMarker(Be,Ln)}),Sn}}},logger$b=LoggerByDefault.getLogger("elevationpath"),fa,ElevationPath=(fa=class extends ControlExtended{constructor(e){if(logger$b.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof fa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var Te=e;Te._marker&&(Te._measureSource.removeFeature(Te._marker),Te._marker=null)}static __createProfileMarker(e,Te){var Oe=e;Oe._marker&&(Oe._measureSource.removeFeature(Oe._marker),Oe._marker=null);var Be=Oe.getMap(),Ue=Be.getView().getProjection(),He=transform$1([Te.lon,Te.lat],"EPSG:4326",Ue),We=Oe._measureSource.getFeatures()[0].getGeometry().getClosestPoint(He),Cn=new Point$1(We);Oe._marker=new Feature({geometry:Cn}),logger$b.trace(Cn),Oe._marker.setStyle(Oe._markerStyle),Oe._measureSource.addFeature(Oe._marker)}static __updateProfileMarker(e,Te){var Oe=e;fa.__removeProfileMarker(Oe),fa.__createProfileMarker(Oe,Te)}static __customRawProfileOperation(e,Te){logger$b.log("__customRawProfileOperation");for(var Oe=e,Be=Te.points,Ue=Oe.getMap().getView().getProjection(),He=0;He<Be.length;He++){var We=Be[He],Cn=transform$1([We.lon,We.lat],"EPSG:4326",Ue),An=new Point$1(Cn);Oe._marker=new Feature({geometry:An}),logger$b.trace(An);var En=fa.DEFAULT_STYLES.RESULTS,Sn=new CircleStyle({radius:En.imageRadius,stroke:new Stroke({color:En.imageStrokeColor,width:En.imageStrokeWidth}),fill:new Fill({color:En.imageFillColor})});Oe._marker.setStyle(new Style$1({image:Sn})),Oe._measureSource.addFeature(Oe._marker)}}static __customRawProfileMouseOverEvent(e,Te){logger$b.log("__customRawProfileMouseOverEvent",e,Te)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,Te,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$b.log("Lib. AmCharts is not loaded !");return}var Be=ProfileElevationPathDOM.displayProfileLibAmCharts(e,Te,Oe,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_LIB_D3(e,Te,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$b.log("Lib. D3 is not loaded !");return}var Be=ProfileElevationPathDOM.displayProfileLibD3(e,Te,Oe,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_RAW(e,Te,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_RAW");var Be=ProfileElevationPathDOM.displayProfileRaw(e,Te,Oe,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_BY_DEFAULT(e,Te,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var Be=ProfileElevationPathDOM.displayProfileByDefault(e,Te,Oe,fa);Be&&(this._profile=Be)}setMap(e){if(logger$b.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var Oe=this;this.export.on("button:clicked",Be=>{Oe.dispatchEvent({type:"export:compute",content:Be.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$b.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$b.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$b.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),Te=new GeoJSON({defaultStyle:this._drawStyleFinish}),Oe=Te.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return Oe}getStyle(){return this._drawStyleFinish}clean(e){logger$b.trace("ElevationPath::clean");var Te=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(Te,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$b.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimtrique",description:"Mon profil altimtrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var Te=e.displayProfileOptions||{};this.export=null;var Oe=Te.apply;this.options.displayProfileOptions.apply=typeof Oe=="function"?Oe:fa.DISPLAY_PROFILE_BY_DEFAULT;var Be=Te.target;this.options.displayProfileOptions.target=typeof Be<"u"?Be:null;var Ue=e.stylesOptions||{};this.options.stylesOptions.draw=Ue.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Ue.marker||{},this._createStylingMarker()}_initializeContainer(){logger$b.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(Te),this.options.active&&this._pictoButton.click();var Oe=this._panelContainer=this._createElevationPathPanelElement(),Be=this._createElevationPathPanelDivElement();Oe.appendChild(Be);var Ue=this._createElevationPathPanelHeaderElement();Be.appendChild(Ue);var He=this._createElevationPathPanelProfilElement();this._profileContainer=He.firstChild,Be.appendChild(He);var We=this._waitingContainer=this._createElevationPathWaitingElement();Be.appendChild(We);var Cn=this._infoContainer=this._createElevationPathInformationsElement();Be.appendChild(Cn);var An=this._createDrawingButtonsPluginDiv();return Be.appendChild(An),this.options.displayProfileOptions.target===null&&e.appendChild(Oe),e}_createStylingMarker(){logger$b.trace("ElevationPath::_createStylingMarker ");var e=fa.DEFAULT_STYLES.MARKER;logger$b.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$b.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$b.trace("style start",e.start);var Te={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(Te.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(Te.stroke=e.start),this._drawStyleStart=new Style$1(Te),logger$b.trace("style finish",e.finish);var Oe={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(Oe.stroke=e.finish),this._drawStyleFinish=new Style$1(Oe)}_createStylingProfile(){logger$b.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$b.trace("style profile",e);var Te=fa.DEFAULT_STYLES.PROFILE;Object.keys(Te).forEach(Oe=>{if(!e.hasOwnProperty(Oe))e[Oe]=Te[Oe];else{var Be=Te[Oe];typeof Be=="object"&&(Helper.mergeParams(Be,e[Oe]),e[Oe]=Be)}})}_initMeasureInteraction(e){logger$b.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(Te=>{if(Te instanceof LayerSwitcher){var Oe=this._measureVector.gpLayerId;Te._layers[Oe].title===Oe&&Te.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$b.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",Te=>{logger$b.trace("drawstart",Te),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=Te.feature;for(var Oe=this._measureSource.getFeatures(),Be=0;Be<Oe.length;Be++)this._measureSource.removeFeature(Oe[Be]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",Te=>{logger$b.trace("drawend",Te),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,Te){logger$b.trace("ElevationPath::_removeMeasureInteraction()"),e&&(Te&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=[],Te=this.getMap(),Oe=Te.getView().getProjection(),Be="EPSG:4326",Ue=this._currentSketch.getGeometry().getCoordinates(),He=0;He<Ue.length;He++){var We=Ue[He],Cn=We;Oe!==Be&&(Cn=transform$1(We,Oe,Be)),e.push({lon:Math.round(Cn[0]*1e8)/1e8,lat:Math.round(Cn[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=0,Te=this.getMap(),Oe=Te.getView().getProjection(),Be="EPSG:4326",Ue=this._currentSketch.getGeometry().getCoordinates(),He=0,We=Ue.length-1;He<We;++He){var Cn=transform$1(Ue[He],Oe,Be),An=transform$1(Ue[He+1],Oe,Be);Cn[0]=Math.round(Cn[0]*1e8)/1e8,Cn[1]=Math.round(Cn[1]*1e8)/1e8,An[0]=Math.round(An[0]*1e8)/1e8,An[1]=Math.round(An[1]*1e8)/1e8,e+=getDistance(Cn,An)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=this.getMap(),Te=e.getView().getProjection(),Oe="EPSG:4326",Be=[],Ue=this._currentSketch.getGeometry().getCoordinates(),He=0;He<Ue.length;He++){var We=transform$1(Ue[He],Te,Oe);We[0]=Math.round(We[0]*1e8)/1e8,We[1]=Math.round(We[1]*1e8)/1e8,Be.push(We)}return Be}_requestService(){logger$b.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$b.trace("geometry",e),!e){logger$b.warn("missing geometry !?");return}var Te={};Helper.mergeParams(Te,this.options.elevationOptions),Helper.mergeParams(Te,{apiKey:Te.apiKey||this.options.apiKey}),typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),Helper.mergeParams(Te,{ssl:Te.ssl});var Oe=this,Be=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Ue=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",He=function(An){logger$b.trace(An),An&&(Oe._panelContainer.style.display="block",Oe._data&&(Oe._data={}),Oe._data=Oe._computeElevationMeasure(An.elevations),Oe._displayProfile(Oe._data),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0)),Ue&&Oe.options.elevationOptions.onSuccess.call(Oe,Oe.getData())},We=function(An){Oe._panelContainer.style.display="none",logger$b.error(An.message),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0),Be&&Oe.options.elevationOptions.onFailure.call(Oe,An)};Helper.mergeParams(Te,{onSuccess:He,onFailure:We});var Cn=Te.sampling||200;Cn>0&&Helper.mergeParams(Te,{sampling:Cn}),Helper.mergeParams(Te,{positions:e}),logger$b.trace("options du service",Te),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(Te)}_computeElevationMeasure(e){logger$b.trace("ElevationPath::_computeElevationMeasure",e);var Te=e,Oe="m",Be=this._getSketchCoords();if(Be){Te[0].dist=0,Te[0].slope=0,Te[0].oldlat=Te[0].lat,Te[0].oldlon=Te[0].lon,Te[0].lat=Math.round(Te[0].lat*1e5)/1e5,Te[0].lon=Math.round(Te[0].lon*1e5)/1e5;var Ue=0,He=0,We=0,Cn=0,An=0,En=0,Sn=[];console.log(Te);for(var Tn=1;Tn<Te.length;Tn++){var Ln=[Te[Tn].lon,Te[Tn].lat],Bn=getDistance(Ln,[Te[Tn-1].oldlon,Te[Tn-1].oldlat]),ei=Bn+An,ni=Te[Tn].z,ti=Te[Tn-1].z;ni<0&&(ni=0),ti<0&&(ti=0);var ri=ni-ti;ri<0?(Ue+=Bn,Cn+=ri):ri>0&&(He+=Bn,We+=ri),An=ei,Te[Tn].dist=ei,Sn.push(An),En+=ri?Math.abs(Math.round(ri/ei*100)):0,Te[Tn].slope=ri?Math.abs(Math.round(ri/ei*100)):0;var oi=Te[Tn].slope;oi>15&&oi<30?Te[Tn].color="#005b4c":oi>30&&oi<45?Te[Tn].color="#00362d":oi>45?Te[Tn].color="#00120f":Te[Tn].color="#00B798",Te[Tn].oldlat=Te[Tn].lat,Te[Tn].oldlon=Te[Tn].lon,Te[Tn].lat=Math.round(Te[Tn].lat*1e5)/1e5,Te[Tn].lon=Math.round(Te[Tn].lon*1e5)/1e5}logger$b.trace("List Distances",Sn);for(var ai=Te[0].z,ci=Te[0].z,Pi=Te[0].slope,vi=0;vi<Te.length;vi++){var pi=Te[vi];pi.z<-100&&(pi.z=0),pi.z>ci&&(ci=pi.z),pi.z<ai&&(ai=pi.z),pi.slope>Pi&&(Pi=pi.slope)}return{greaterSlope:Pi,meanSlope:Math.round(En/Te.length),distancePlus:He,distanceMinus:Ue,ascendingElevation:We,descendingElevation:Cn,altMin:ai.toLocaleString(),altMax:ci.toLocaleString(),distance:this._getLength(),unit:Oe,points:Te}}}_displayProfile(e){logger$b.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var Te=this.options.displayProfileOptions.target;Te&&Te.appendChild(this._panelContainer),Te=this._profileContainer;var Oe=this,Be=this.options.displayProfileOptions.apply;Be.call(this,e,Te,Oe);var Ue=this.options.displayProfileOptions,He=document.getElementById("GPelevationPathPanelInfo-"+this._uid);He&&(Ue.totalDistance||Ue.greaterSlope||Ue.meanSlope||Ue.ascendingElevation||Ue.descendingElevation)&&(He.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$b.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,Te=this.options.displayProfileOptions.meanSlope,Oe=this.options.displayProfileOptions.greaterSlope,Be=this.options.displayProfileOptions.ascendingElevation,Ue=this.options.displayProfileOptions.descendingElevation,He=this._infoContainer;if(He.childElementCount)for(;He.firstChild;)He.removeChild(He.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : ",Math.round(this._data.distance).toLocaleString()+" m"),Be&&this._addElevationPathInformationsItem("Dnivel positif : ",this._data.ascendingElevation.toLocaleString()+" m"),Ue&&this._addElevationPathInformationsItem("Dnivel ngatif : ",this._data.descendingElevation.toLocaleString()+" m"),Te&&this._addElevationPathInformationsItem("Pente moyenne : ",this._data.meanSlope.toLocaleString()+" %"),Oe&&this._addElevationPathInformationsItem("Plus forte pente : ",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),Te=0;Te<e.length;Te++)this._measureSource.removeFeature(e[Te])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){var Te=this._pictoButton.ariaPressed;Te==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe,{current:"ElevationPath"}),Te==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(Oe),this._addMeasureInteraction(Oe)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(Oe,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(Oe,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Mc(fa,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),fa);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$a=LoggerByDefault.getLogger("layerimport"),wo,LayerImport=(wo=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof wo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var Te=this;e.getLayers().on("remove",function(Oe){Oe.element.gpResultLayerId==="layerimport:MAPBOX"&&Oe.element.gpEditorId&&Te._mapBoxPanel&&Te._importPanel&&(Te.cleanMapBoxResults(Oe.element.gpEditorId),Te._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),Te._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},Te),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$a.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var Te=[],Oe=0;Oe<e.layerTypes.length;Oe++)Te.push(e.layerTypes[Oe]);this.options.layerTypes=Te}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var Te=e.layerTypes;if(!Array.isArray(Te))logger$a.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var Oe=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],Be=[],Ue=0;Ue<Te.length;Ue++)typeof Te[Ue]!="string"?(Be.push(Ue),logger$a.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+Te[Ue]+")")):(Te[Ue]=Te[Ue].toUpperCase(),Oe.indexOf(Te[Ue])===-1&&(Be.push(Ue),logger$a.log("[ol.control.LayerImport] options.layerTypes : "+Te[Ue]+" is not a supported type")),Te[Ue]==="GEOJSON"&&(Te[Ue]="GeoJSON"),Te[Ue]==="MAPBOX"&&(Te[Ue]="MAPBOX"));if(Be.length!==0)for(var He=Be.length-1;He>=0;He--)Te.splice(Be[He],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var Te=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:Te.image,stroke:Te.stroke,fill:Te.fill,text:Te.text});var Oe=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:Oe.image,stroke:Oe.stroke,fill:Oe.fill,text:Oe.text});var Be=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:Be.image,stroke:Be.stroke,fill:Be.fill,text:Be.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),Te=this._showImportButton=this._createShowImportPictoElement();e.appendChild(Te);var Oe=this._importPanel=this._createImportPanelElement(),Be=this._createImportPanelDivElement();Oe.appendChild(Be);var Ue=this._importPanelHeader=this._createImportPanelHeaderElement(),He=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Ue.appendChild(He);var We=this._importPanelTitle=this._createImportPanelTitleElement();Ue.appendChild(We);var Cn=this._panelCloseButton=this._createImportPanelCloseElement();Ue.appendChild(Cn),Be.appendChild(Ue);var An=this._formContainer=this._initInputFormElement();Be.appendChild(An);var En=this._getCapPanel=this._createImportGetCapPanelElement(),Sn=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();En.appendChild(Sn),Be.appendChild(En);var Tn=this._mapBoxPanel=this._createImportMapBoxPanelElement(),Ln=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();Tn.appendChild(Ln);var Bn=this._loadingContainer=this._createLoadingElement();Tn.appendChild(Bn),Be.appendChild(Tn);var ei=this._waitingContainer=this._createImportWaitingElement();return Be.appendChild(ei),e.appendChild(Oe),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),Te=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(Te);var Oe=this._createImportStaticParamsContainer(this.options.layerTypes[0]),Be=this._createStaticNameLabel();Oe.appendChild(Be);var Ue=this._createStaticModeChoiceDiv(),He=this._createStaticLocalChoiceDiv();Ue.appendChild(He);var We=this._createStaticUrlChoiceDiv();Ue.appendChild(We),Oe.appendChild(Ue);var Cn=this._createStaticLocalInputDiv();Cn.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),Cn.appendChild(this._staticLocalImportInput),Oe.appendChild(Cn);var An=this._createStaticUrlInputDiv();An.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),An.appendChild(this._staticUrlImportInput),Oe.appendChild(An),e.appendChild(Oe);var En=this._createServiceParamsContainer(this.options.layerTypes[0]),Sn=this._createServiceUrlDiv();Sn.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),Sn.appendChild(this._serviceUrlImportInput),En.appendChild(Sn),e.appendChild(En);var Tn=this._createImportSubmitFormElement();return e.appendChild(Tn),e}_onShowImportClick(e){var Te=this._showImportButton.ariaPressed;Te==="true"&&this.onPanelOpen();var Oe=this.getMap();Interactions.unset(Oe),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._onGetCapPanelClose(),this._onMapBoxPanelClose(),this._loadingContainer.className=""}_onImportSubmit(){logger$a.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,Te=document.getElementById(this._addUID("GPimportName"));Te&&(e=Te.value||"",logger$a.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$a.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$a.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var Te=this._staticUrlImportInput.value;if(logger$a.log("url : ",Te),Te.length===0){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}Te.trim&&(Te=Te.trim()),this._url=Te,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(Te=ProxyUtils.proxifyUrl(Te,this.options.webServicesOptions));var Oe=this;Gp.Protocols.XHR.call({url:Te,method:"GET",timeOut:15e3,onResponse:function(Be){Oe._hideWaitingContainer(),Oe._addFeaturesFromImportStaticLayer(Be,e)},onFailure:function(Be){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",Be)}})}_importStaticLayerFromLocalFile(e){var Te=this._staticLocalImportInput.files[0];if(!Te){logger$a.warn("[ol.control.LayerImport] missing file");return}this._file=Te,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var Oe=new FileReader,Be=this;Oe.onerror=Ue=>{Be._hideWaitingContainer(),logger$a.error("error fileReader : ",Ue)},Oe.onprogress=()=>{logger$a.log("onprogress")},Oe.onloadstart=()=>{Be._displayWaitingContainer(),logger$a.log("onloadstart")},Oe.onabort=()=>{Be._hideWaitingContainer(),logger$a.log("onabort")},Oe.onloadend=Ue=>{logger$a.log("onloadend : ",Ue)},Oe.onload=Ue=>{logger$a.log("fileReader onload - file content : ",Ue.target.result),Be._hideWaitingContainer(),Be._addFeaturesFromImportStaticLayer(Ue.target.result,e)},Oe.readAsText(Te)}_addFeaturesFromImportStaticLayer(e,Te){var Oe=this.getMap();if(!(!Oe||!e)){var Be=null,Ue=null,He=null,We=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var Cn=this,An=JSON.parse(e),En=An.sources,Sn=Object.keys(En).length>1?1:0;for(var Tn in En)if(En.hasOwnProperty(Tn)){var Ln="",Bn="",ei=null,ni=null,ti=null,ri=null;if(An.metadata){for(var oi in An.metadata)if(An.metadata.hasOwnProperty(oi)){var ai=oi.split(":");if(ai[0]==="geoportail"){var ci=ai[1];if(ci==="title"){Ln=An.metadata[oi];continue}if(ci==="description"){Bn=An.metadata[oi];continue}if(ci==="quicklookUrl"){ei=An.metadata[oi];continue}if(ci==="legends"){ni=An.metadata[oi];continue}if(ci==="metadata"){ti=An.metadata[oi];continue}if(ci==="originators"){ri=An.metadata[oi];continue}}}}Ln||(Ln="Couche MapBox"),Bn||(Bn="Couche MapBox"),Ln=Sn?Ln+"("+Tn+")":Ln;var Pi=En[Tn],vi=Pi.type;if(vi==="vector"){var pi=Pi.url,Mi=Pi.tiles,Fi=An.sprite;if(pi&&pi.indexOf("mapbox://")===0){var fi=this._url;if(fi){if(Mi=["a","b","c","d"].map(function(lr){var Ki=pi.replace("mapbox://",""),Dr=fi.split("?")[1];return"https://"+lr+".tiles.mapbox.com/v4/"+Ki+"/{z}/{x}/{y}.vector.pbf?"+Dr}),Fi.indexOf("mapbox://")===0){var ui=fi.split("?");An.sprite=ui[0]+"/sprite?"+ui[1]}}else logger$a.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Mi)He=new MVT({featureClass:Feature}),Ue=new VectorTile({attributions:Pi.attribution,format:He,urls:Mi}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ti,Ue._legends=ni,Ue._originators=ri,Ue.on("tileloadstart",function(lr){Cn._loadingContainer.className="GPmapLoadingVisible"}),Ue.on("tileloadend",function(lr){Cn._loadingContainer.className=""}),Ue.on("tileloaderror",function(lr){Cn._loadingContainer.className=""}),Be=new VectorTileLayer({source:Ue,visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType;else if(pi){He=new MVT({featureClass:Feature}),Be=new VectorTileLayer({visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType;var Oi=new TileJSON({url:pi}),Ni=Oi.on("change",function(){if(Oi.getState()==="ready"){for(var lr=Oi.getTileJSON(),Ki=Array.isArray(lr.tiles)?lr.tiles:[lr.tiles],Dr=0;Dr<Ki.length;Dr++){var Nr=Ki[Dr];Nr.indexOf("http")!==0&&(Ki[Dr]=pi+Nr)}Ue=new VectorTile({attributions:Oi.getAttributions()||lr.attribution,format:He,urls:Ki}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ti,Ue._legends=ni,Ue._originators=ri,Ue.on("tileloadstart",function(Ir){Cn._loadingContainer.className="GPmapLoadingVisible"}),Ue.on("tileloadend",function(Ir){Cn._loadingContainer.className=""}),Be.setSource(Ue),Be.set("mapbox-extension",lr.vector_layers),unByKey(Ni)}})}}else if(vi==="geojson"){var nr=Pi.data;He=new GeoJSON,Ue=new VectorTile({attributions:Pi.attribution,format:He,url:nr}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ti,Ue._legends=ni,Ue._originators=ri,Be=new VectorTileLayer({source:Ue,visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$a.warn("Type MapBox format unknown !");return}var er=JSON.parse(JSON.stringify(An));if(Sn){for(var cr=er.layers,ar=0;ar<cr.length;ar++){var pr=cr[ar];if(pr.source!==Tn){cr.splice(ar,1);continue}}for(var rr in er.sources)er.sources.hasOwnProperty(rr)&&rr!==Tn&&delete er.sources[rr]}var br={id:Tn,styles:er,layer:Be,options:{title:Te||Ln,description:Bn,quicklookUrl:ei,metadata:ti,legends:ni,originators:ri}};(function(lr){var Ki=()=>{applyStyle(lr.layer,lr.styles,{source:lr.id}).then(function(){var Ir=!0;lr.layer.setVisible(Ir);var kr=1;lr.layer.setOpacity(kr)}).then(function(){var Ir=Oe.getView().getProjection().getCode();Oe.getView()&&lr.styles.center&&lr.styles.center.length&&Oe.getView().setCenter(transform$1(lr.styles.center,"EPSG:4326",Ir)),Oe.getView()&&(lr.styles.zoom||lr.styles.zoom===0)&&Oe.getView().setZoom(lr.styles.zoom);var kr=lr.layer.getSource();if(Oe.getView()&&Oe.getSize()){var Lr=null;kr&&kr.getExtent?Lr=kr.getExtent():Lr=kr.getTileGrid().getExtent(),Lr&&Lr[0]!==1/0&&Oe.getView().fit(Lr,Oe.getSize())}}).then(function(){Cn._hideFormContainer(),Cn._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),Cn._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),Cn._importPanelTitle.innerHTML="Edition des styles";var Ir=new Editor({target:Cn._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(lr.styles)),scope:this,events:{"editor:onloaded":Cn._onLoadedMapBox,"editor:layer:onclickvisibility":Cn._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":Cn._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":Cn._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":Cn._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":Cn._onDisplayLayerSourceMapBox},tools:Cn.options.vectorStyleOptions.MapBox.editor});return Ir.setContext("map",Oe),Ir.setContext("layer",lr.layer),Ir.createElement().then(function(){if(Ir.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demande !?")}).then(function(){Cn.options.vectorStyleOptions.MapBox.display&&(Cn._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),Cn._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),Cn._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),Cn._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),Cn._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),Cn._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var kr=Cn._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Lr=0;Lr<kr.length;Lr++){const Pr=kr[Lr];Pr.textContent==="bckgrd"&&(Pr.textContent="Couleur de remplissage")}}).then(function(){lr.layer.set("mapbox-editor",Ir.getID()),setTimeout(function(){Oe.dispatchEvent({id:Ir.getID(),type:"editor:loaded",style:lr.styles,layer:lr.layer})},100)}).catch(function(kr){throw kr})}).then(function(){Oe.dispatchEvent({id:lr.id,type:"render:success",style:lr.styles})}).catch(function(Ir){logger$a.error(Ir),Oe.dispatchEvent({id:lr.id,type:"render:failure",error:Ir})})};logger$a.warn(lr.layer);var Dr=Oe.get("mapbox-styles")||{},Nr=lr.id;Dr[Nr]=lr.styles,Oe.set("mapbox-styles",Dr),lr.layer.set("mapbox-styles",lr.styles),Oe.addLayer(lr.layer),Cn.dispatchEvent({type:"layerimport:mapbox:added",name:Te,data:e,layer:lr.layer,format:Cn._currentImportType.toLowerCase()||"mapbox"}),lr.layer.getSource()?Ki():lr.layer.once("change:source",Ki),Oe.getControls().forEach(Ir=>{Ir instanceof LayerSwitcher&&Ir.addLayer(lr.layer,lr.options)})})(br)}}else{this._currentImportType==="KML"?(We=this.options.vectorStyleOptions.KML.defaultStyle,He=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[We]})):this._currentImportType==="GPX"?(We=this.options.vectorStyleOptions.GPX.defaultStyle,He=new GPX({defaultStyle:We})):this._currentImportType==="GeoJSON"&&(We=this.options.vectorStyleOptions.GeoJSON.defaultStyle,He=new GeoJSON({defaultStyle:We}));var Li=He.readProjection(e),ur=this._getMapProjectionCode(),sr=null;sr=He.readFeatures(e,{dataProjection:Li,featureProjection:ur}),logger$a.log("loaded features : ",sr),Ue=new VectorSource({features:new Collection}),Ue.addFeatures(sr),logger$a.trace(Ue),Ue._title=Ue._description=Te,Be=new VectorLayer({source:Ue,style:We}),Be.gpResultLayerId="layerimport:"+this._currentImportType;var dr=He.readRootExtensions("geoportail:compute");if(dr&&Object.keys(dr).length!==0){var vr={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},hr=dr.type,mr=dr.transport;if(hr){var _r=vr[hr].name,Ar=mr?_r+" ("+mr+")":_r,Vr=vr[hr].class;if(Vr){Be.gpResultLayerId="layerimport:COMPUTE",Be.set("control",hr),Be.set("name",_r),Be.set("graph",mr),Be.set("data",dr),Be.set("title",Ar);var Gr=new GeoJSON({defaultStyle:We}),Hi=Gr.writeFeatures(sr,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});Be.set("geojson",Hi),this.getMap().getControls().forEach(lr=>{lr instanceof Vr&&(lr.setData(dr),lr.setLayer(Be),lr.init())})}}}if(Oe.addLayer(Be),Oe.getView()&&Oe.getSize()&&Ue.getExtent){var gr=Ue.getExtent();gr&&gr[0]!==1/0&&Oe.getView().fit(gr,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:Te,data:e,layer:Be,format:this._currentImportType.toLowerCase()})}}}_addFeaturesFromImportStaticLayerUrl(e,Te){var Oe=this.getMap();if(!(!Oe||!e)){var Be,Ue,He;if(this._currentImportType==="MAPBOX"?logger$a.trace("Not yet implemented !"):(this._currentImportType==="KML"?He=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?He=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(He=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),Be=new VectorSource({url:e,format:He}),this._currentImportType==="GPX"&&Be.forEachFeature(function(Cn){Cn.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GPX feature"),Cn.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&Be.forEachFeature(function(Cn){Cn.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GeoJSON feature"),Cn.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),Be._title=Be._description=Te,Ue=new VectorLayer({source:Be})),Ue.gpResultLayerId="layerimport:"+this._currentImportType,Oe.addLayer(Ue),Oe.getView()&&Oe.getSize()&&Be.getExtent){var We=Be.getExtent();We&&We[0]!==1/0&&Oe.getView().fit(We,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:Te,url:e,layer:Ue,format:this._currentImportType.toLowerCase()})}}_onLoadedMapBox(e){var Te=e.target.data.obj,Oe=this.getContext("layer");Oe.get("mapbox-source")===Te.source&&(Oe.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var Te=e.target.data.obj,Oe=e.target.srcElement,Be=this.getContext("layer");if(Be.get("mapbox-source")===Te.source&&Be.get("mapbox-editor")===e.target.editorID){for(var Ue=Be.get("mapbox-styles"),He=Ue.layers,We=0;We<He.length;We++)if(He[We].id===Te.id){var Cn=He[We].layout;Cn?Cn.visibility=Oe.checked?"visible":"none":He[We].layout={visibility:Oe.checked?"visible":"none"};break}applyStyle(Be,Ue,{source:Te.source}).then(function(){}).catch(function(An){logger$a.error(An)})}}_onChangeScaleMinSourceMapBox(e){var Te=e.target.data.obj,Oe=e.target.srcElement,Be=this.getContext("layer");if(Be.get("mapbox-source")===Te.source&&Be.get("mapbox-editor")===e.target.editorID){for(var Ue=Be.get("mapbox-styles"),He=Ue.layers,We=0;We<He.length;We++)if(He[We].id===Te.id){He[We].minzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(Be,Ue,{source:Te.source}).then(function(){}).catch(function(Cn){logger$a.error(Cn)})}}_onChangeScaleMaxSourceMapBox(e){var Te=e.target.data.obj,Oe=e.target.srcElement,Be=this.getContext("layer");if(Be.get("mapbox-source")===Te.source&&Be.get("mapbox-editor")===e.target.editorID){for(var Ue=Be.get("mapbox-styles"),He=Ue.layers,We=0;We<He.length;We++)if(He[We].id===Te.id){He[We].maxzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(Be,Ue,{source:Te.source}).then(function(){}).catch(function(Cn){logger$a.error(Cn)})}}_onChangeLegendValueSourceMapBox(e){var Te=e.target.data.obj,Oe=e.target.srcElement,Be=this.getContext("layer");if(Be.get("mapbox-source")===Te.source&&Be.get("mapbox-editor")===e.target.editorID){for(var Ue=Be.get("mapbox-styles"),He=Ue.layers,We=0;We<He.length;We++)if(He[We].id===Te.id){var Cn=He[We].paint;Cn&&(Cn[Oe.dataset.id]=Oe.value);break}applyStyle(Be,Ue,{source:Te.source,updateSource:!0}).then(function(){}).catch(function(An){logger$a.error(An)})}}_onDisplayLayerSourceMapBox(e){var Te=e.target.data.obj,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===Te.source&&Oe.get("mapbox-editor")===e.target.editorID){var Be=e.target.currentTarget.parentNode.id,Ue=Be.substring(Be.indexOf("-")+1,Be.indexOf("_")),He=this.getLayer(Ue);He.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$a.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$a.log("url : ",e),e.trim&&(e=e.trim());var Te=e.indexOf("?");Te<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":Te===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var Oe=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(Be){Oe._hideWaitingContainer(),Oe._displayGetCapResponseLayers(Be)},onFailure:function(Be){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] getCapabilities request failed : ",Be)}})}_displayGetCapResponseLayers(e){var Te,Oe,Be={content:null,title:null},Ue;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){Te=new WMSCapabilities;var He=this._getCapResponseWMS=Te.read(e);if(logger$a.log("getCapabilities response : ",He),He&&He.Capability&&He.Capability.Layer){var We=He.Capability.Layer;if(Array.isArray(We))for(var Cn=0;Cn<We.length;Cn++)this._displayGetCapResponseWMSLayer(We[Cn]);else this._displayGetCapResponseWMSLayer(We)}}else if(this._currentImportType==="WMTS"){Te=new WMTSCapabilities;var An=this._getCapResponseWMTS=Te.read(e);if(logger$a.log("getCapabilities response : ",An),An&&An.Contents&&An.Contents.Layer&&(Oe=An.Contents.Layer,Array.isArray(Oe))){this._getCapResponseWMTSLayers=Oe;for(var En=0;En<Oe.length;En++)if(Ue=this._getWMTSLayerProjection(Oe[En],An),Ue&&typeof Ue=="string")if(get$3(Ue)||get$3(Ue.toUpperCase()))Be={content:Oe[En].Title,title:Oe[En].Abstract||Oe[En].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(Be,En,this._getCapResultsListContainer);else{logger$a.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",Oe[En]);continue}}}}_displayGetCapResponseWMSLayer(e,Te){if(!e){logger$a.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$a.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var Oe=this._getMapProjectionCode(),Be,Ue={content:null,title:null};if(Te){var He,We,Cn=["CRS","Style"];for(We=0;We<Cn.length;We++)if(He=Cn[We],Array.isArray(Te[He])&&Te[He].length!==0)if(Array.isArray(e[He])&&e[He].length!==0)for(var An=0;An<Te[He].length;An++)e[He].indexOf(Te[He][An])===-1&&e[He].push(Te[He][An]);else e[He]=Te[He];var En=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(We=0;We<En.length;We++)He=En[We],Te[He]&&!e[He]&&(e[He]=Te[He])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var Sn=e?e._container:Te._container,Tn=e?e.Title:Te.Title;e._container=this._addImportGetCapResultListRubrique(Tn,Sn).lastChild;for(var Ln=0;Ln<e.Layer.length;Ln++){for(var Bn=!1,ei=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),ni=0;ni<ei.length;ni++)ei[ni].title===e.Title&&(Bn=!0,e.Layer[Ln]._container=ei[ni].parentElement);Bn||(e.Layer[Ln]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[Ln],e)}}}else{var ti=this._getCapResponseWMSLayers.length;if(Be=this._getWMSLayerProjection(e,Oe),!Be)logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=Be,Ue={content:e.Title,title:e.Abstract||e.Title};var ri=e._container;ri.localName==="ul"&&(ri=ri.lastChild),this._addImportGetCapResultLayer(Ue,ti,ri),this._getCapResponseWMSLayers[ti]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var Te=parseInt(e.target.id.substr(23),10);if(isNaN(Te))return;var Oe;this._currentImportType==="WMS"?(Oe=this._getCapResponseWMSLayers[Te],this._addGetCapWMSLayer(Oe)):this._currentImportType==="WMTS"&&(Oe=this._getCapResponseWMTSLayers[Te],this._addGetCapWMTSLayer(Oe))}}_addGetCapWMSLayer(e){var Te=this.getMap();if(!Te){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var Oe=this._getMapProjectionCode(),Be={},Ue=this._getWMSLayerGetMapUrl();if(Ue)Be.url=Ue;else{var He=this._getCapRequestUrl.indexOf("?");He!==-1?Be.url=this._getCapRequestUrl.substring(0,He):Be.url=this._getCapRequestUrl}if(Be.params={},e.Name)Be.params.LAYERS=e.Name;else{logger$a.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}Be.params.SERVICE="WMS",this._getCapResponseWMS.version&&(Be.params.VERSION=this._getCapResponseWMS.version);var We=e._projection;if(We)We!==Oe&&(Be.projection=We);else{logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var Cn;if(e.Style&&Array.isArray(e.Style)){var An=e.Style[0];Be.params.STYLES=An.Name,An.LegendURL&&Array.isArray(An.LegendURL)&&An.LegendURL.length!==0&&(Cn=An.LegendURL[0].OnlineResource)}var En=new TileWMS(Be);this._getWMSLayerInfoForLayerSwitcher(e,Cn,En);var Sn={};Sn.source=En,this._getWMSLayerMinMaxResolution(e,Oe,Sn),this._getWMSLayerExtent(e,Oe,Sn);var Tn=new TileLayer(Sn);if(Tn.setExtent(Sn.extent),Tn.gpResultLayerId="layerimport:WMS",e.queryable&&(Tn.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(Tn.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),Te.addLayer(Tn),Te.getView()&&Te.getSize()&&Tn.getExtent){var Ln=Tn.getExtent();Ln&&Ln[0]!==1/0&&Te.getView().fit(Ln,Te.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Name,data:e,layer:Tn,format:"wms"})}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var Te=this._getCapResponseWMS.Capability.Request.GetMap;if(Te.DCPType&&Array.isArray(Te.DCPType)&&Te.DCPType.length!==0){var Oe=Te.DCPType[0];Oe&&Oe.HTTP&&Oe.HTTP.Get&&(e=Oe.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,Te){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}var Be=e.CRS;if(Array.isArray(Be)){if(Be.includes(Te))return Oe=Te,Oe;var Ue,He;for(He=0;He<Be.length;He++)if(Ue=Be[He],Ue&&typeof Ue=="string"&&(get$3(Ue)||get$3(Ue.toUpperCase())))return Oe=Ue,Oe}return Oe}_getWMSLayerMinMaxResolution(e,Te,Oe){var Be=get$3(Te).getUnits();if(Be==="m")e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*28e-5);else if(Be==="degrees"){var Ue=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*Ue),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*Ue)}}_getWMSLayerExtent(e,Te,Oe){if(!e){logger$a.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var Be=e.EX_GeographicBoundingBox,Ue=e.BoundingBox;if(Be&&Array.isArray(Be))Te==="EPSG:4326"?Oe.extent=Be:Oe.extent=transformExtent(Be,"EPSG:4326",Te);else if(Ue&&Array.isArray(Ue)){for(var He,We,Cn=0;Cn<Ue.length;Cn++)if(He=Ue[Cn].crs,We=Ue[Cn].extent,He){if(He===Te){Oe.extent=We;break}else if(typeof He=="string"){var An=get$3(He)?get$3(He):get$3(He.toUpperCase());if(An){if(An.getUnits()==="degrees"&&He.toUpperCase().indexOf("EPSG")===0){var En=[We[1],We[0],We[3],We[2]];Oe.extent=transformExtent(En,An,Te)}else Oe.extent=transformExtent(We,An,Te);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,Te,Oe){if(e.Title?(Oe._title=e.Title,Oe._description=e.Abstract?e.Abstract:e.Title):(Oe._title=e.Name,Oe._description=e.Abstract?e.Abstract:e.Name),Te&&(Oe._legends=[{url:Te}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){Oe._metadata=[];for(var Be=0;Be<e.MetadataURL.length;Be++){var Ue=e.MetadataURL[Be].OnlineResource;Ue&&Oe._metadata.push({url:Ue})}}if(e.Attribution){var He=e.Attribution;Oe._originators={},He.OnlineResource&&(Oe._originators.url=He.OnlineResource),He.Title&&(Oe._originators.name=Oe._originators.attribution=He.Title),He.LogoURL&&He.LogoURL.OnlineResource&&(Oe._originators.logo=He.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$a.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var Te=this.getMap();if(Te){var Oe={};Oe.layer=e.Identifier,this._getCapResponseWMTS.version&&(Oe.version=this._getCapResponseWMTS.version);var Be=this._getWMTSLayerGetTileUrl();if(Be)Oe.url=Be;else{var Ue=this._getCapRequestUrl.indexOf("?");Ue!==-1?Oe.url=this._getCapRequestUrl.substring(0,Ue):Oe.url=this._getCapRequestUrl}var He=this._getTMSParams(e);Oe.matrixSet=He.tms,Oe.projection=He.projCode,Oe.tileGrid=new WMTSTileGrid({resolutions:He.resolutions,matrixIds:He.matrixIds,origin:He.origin});var We,Cn;if(e.Style&&Array.isArray(e.Style))for(var An,En=0;En<e.Style.length&&(An=e.Style[En],We=An.Identifier,!An.isDefault);En++)An.LegendURL&&Array.isArray(An.LegendURL)&&An.LegendURL.length!==0&&(Cn=An.LegendURL[0].href);We==null&&logger$a.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),Oe.style=We;var Sn;e.Format&&Array.isArray(e.Format)&&(Sn=e.Format[0]),Sn==null&&logger$a.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),Oe.format=Sn;var Tn=new WMTS$1(Oe);e.Title?(Tn._title=e.Title,Tn._description=e.Abstract?e.Abstract:e.Title):(Tn._title=e.Identifier,Tn._description=e.Abstract?e.Abstract:e.Identifier),Cn&&(Tn._legends=[{url:Cn}]);var Ln={};Ln.source=Tn,Ln.extent=this._getWMTSLayerExtent(e);var Bn;try{Bn=new TileLayer(Ln),Bn.setExtent(Ln.extent)}catch(ni){logger$a.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",ni);return}if(Bn.gpResultLayerId="layerimport:WMTS",Te.addLayer(Bn),Te.getView()&&Te.getSize()&&Bn.getExtent){var ei=Bn.getExtent();ei&&ei[0]!==1/0&&Te.getView().fit(ei,Te.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Identifier,data:e,layer:Bn,format:"wmts"})}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var Te=this._getCapResponseWMTS.OperationsMetadata.GetTile;Te.DCP&&Te.DCP.HTTP&&Te.DCP.HTTP.Get&&Array.isArray(Te.DCP.HTTP.Get)&&Te.DCP.HTTP.Get.length!==0&&(e=Te.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,Te){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}if(!Te||typeof Te!="object"){logger$a.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var Be=e.TileMatrixSetLink[0].TileMatrixSet,Ue;if(Te.Contents&&Array.isArray(Te.Contents.TileMatrixSet)){for(var He=Te.Contents.TileMatrixSet,We=0;We<He.length;We++)if(He[We].Identifier===Be&&He[We].TileMatrix){var Cn=He[We];Ue=Cn.SupportedCRS,Ue&&typeof Ue=="string"&&(get$3(Ue)||get$3(Ue.toUpperCase()))&&(Oe=Ue);break}}}return Oe}_getTMSParams(e){var Te={},Oe=[],Be=[],Ue=[],He,We,Cn,An=this.getMap();if(An){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(He=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var En=this._getCapResponseWMTS.Contents.TileMatrixSet,Sn=0;Sn<En.length;Sn++)if(En[Sn].Identifier===He&&En[Sn].TileMatrix){var Tn=En[Sn],Ln,Bn,ei,ni,ti;if(Tn.SupportedCRS&&(We=Tn.SupportedCRS,Cn=get$3(We)),Cn&&Cn.getUnits&&(ti=Cn.getUnits()),Array.isArray(Tn.TileMatrix))for(var ri=0;ri<Tn.TileMatrix.length;ri++)Ln=Tn.TileMatrix[ri],Ln.Identifier!=null&&(Bn=parseInt(Ln.Identifier,10),Oe.push(Bn)),ei=Ln.ScaleDenominator,ti==="degrees"?ni=ei*28e-5*180/(Math.PI*6378137):ni=ei*28e-5,Be.push(ni),Ue=Ln.TopLeftCorner;Be.sort!==void 0&&Be.sort(function(oi,ai){return ai-oi}),Oe.sort!==void 0&&Oe.sort(function(oi,ai){return oi-ai})}}else logger$a.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return Te.tms=He,Te.projCode=We,Te.matrixIds=Oe,Te.resolutions=Be,Te.origin=Ue,Te}}_getWMTSLayerExtent(e){var Te,Oe=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(Te=transformExtent(e.WGS84BoundingBox,"EPSG:4326",Oe)),Te}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$a.warn("unable to get layerimport's map");return}var Te=e.getView().getProjection().getCode();return Te}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de donnes"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var Te=this._mapBoxResultsListContainer.childNodes;for(let Oe=0;Oe<Te.length;Oe++){const Be=Te[Oe];Be.id==="GPEditorMapBoxContainer_ID_"+e&&Be.remove()}}}},Mc(wo,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),wo);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$9=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class lf extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof lf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var Te=e.getControls();Te.forEach(Oe=>{if(!(Oe instanceof lf)&&Oe){for(var Be=Oe.element.classList,Ue=0;Ue<Be.length;Ue++)if(Be[Ue]==="ol-attribution"){Te.remove(Oe);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var Te={},Oe=e.getView(),Be=Oe.calculateExtent(e.getSize()),Ue=Oe.getProjection().getCode(),He=transformExtent(Be,Ue,"EPSG:4326"),We=[He[3],He[0],He[1],He[2]],Cn=Oe.getZoom(),An=e.getLayers().getArray(),En=0;En<An.length;En++)if(An[En].getSource)this._updateLayerAttributions(An[En],Te,We,Ue,Cn);else if(An[En].getLayers){var Sn=An[En].getLayers();Sn.forEach(Tn=>{Tn.getSource?this._updateLayerAttributions(Tn,Te,We,Ue,Cn):logger$9.log("cannot find layer source in layergroup ",An[En])})}}_updateLayerAttributions(e,Te,Oe,Be,Ue){if(!e){logger$9.trace("layer is null !?");return}var He=e.getSource();if(!He){logger$9.trace("source is not yet loaded !");return}Te||(Te={});var We=[],Cn=e.getVisible(),An=He._originators;if(typeof An<"u"&&He.setAttributions(),An&&Cn){for(var En=LayerUtils.getAttributions({extent:Oe,crs:Be,zoom:Ue,visibility:Cn,originators:An}),Sn=0;Sn<En.length;Sn++){var Tn=En[Sn];Te.hasOwnProperty(Tn)||(We.push(Tn),Te[Tn]=!0)}We.length!==0&&(He.setAttributions(We),this.dispatchEvent({type:"attributions:update",attributions:We}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPmeasureLength"),ke.className="GPwidget gpf-widget gpf-widget-button",ke},_createShowMeasureLengthPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureLengthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureLengthClick(Oe)}),e}},logger$8=LoggerByDefault.getLogger("measurelength"),MeasureLength=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$8.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$8.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.unit=typeof e.unit<"u"?e.unit:null,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$8.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$8.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$8.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveHandle(Te)),e.un("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$8.trace("call MeasureLength::format()");var Te=this.getMap(),Oe;if(this.options.geodesic){var Be=e.getCoordinates();Oe=0;for(var Ue=Te.getView().getProjection(),He=0,We=Be.length-1;He<We;++He){var Cn=transform$1(Be[He],Ue,"EPSG:4326"),An=transform$1(Be[He+1],Ue,"EPSG:4326");Oe+=getDistance(Cn,An)}}else Oe=Math.round(e.getLength()*100)/100;var En;return this.options.unit==="km"?En=Math.round(Oe/1e3*100)/100+" km":this.options.unit==="m"?En=Math.round(Oe*100)/100+" m":Oe>1e3?En=Math.round(Oe/1e3*100)/100+" km":En=Math.round(Oe*100)/100+" m",En}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$8.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPmeasureArea"),ke.className="GPwidget gpf-widget gpf-widget-button",ke},_createShowMeasureAreaPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureAreaClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureAreaClick(Oe)}),e}},logger$7=LoggerByDefault.getLogger("measurearea"),MeasureArea=class np extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof np))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$7.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveHandler(Te)),e.un("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureArea::format()");var Te;if(this.options.geodesic){var Oe=e.clone(),Be=Oe.getLinearRing(0).getCoordinates();Te=Math.abs(getArea(new Polygon([Be])))}else Te=e.getArea();var Ue;return Te>1e6?Ue=Math.round(Te/1e6*100)/100+" km<sup>2</sup>":Te>1e5?Ue=Math.round(Te/1e6*1e3)/1e3+" km<sup>2</sup>":Te>1e3?Ue=Math.round(Te/10)*10+" m<sup>2</sup>":Ue=Math.round(Te*100)/100+" m<sup>2</sup>",Ue}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPmeasureAzimuth"),ke.className="GPwidget gpf-widget gpf-widget-button",ke},_createShowMeasureAzimuthPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureAzimuthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowMeasureAzimuthClick(Oe)}),e}},logger$6=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class ip extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ip))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$6.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveAzimutHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveAzimutHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveAzimutHandler(Te)),e.un("pointermove",Te=>this.onPointerMoveAzimutHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureAzimuth::format()");var Te=this.getMap(),Oe=Te.getView().getProjection(),Be=transform$1(e.getFirstCoordinate(),Oe,"EPSG:4326"),Ue=transform$1(e.getLastCoordinate(),Oe,"EPSG:4326");if(!this.options.geodesic){var He=getDistance(Be,Ue);if(logger$6.trace("measure between 2 points with geodesic method",He),He>500){var We=500/He;logger$6.trace("%",We),Ue=transform$1(e.getCoordinateAt(We),Oe,"EPSG:4326")}}var Cn=Math.PI/180,An=180/Math.PI,En=Cn*Be[0],Sn=Cn*Ue[0],Tn=Cn*Be[1],Ln=Cn*Ue[1],Bn=Math.sin(Sn-En)*Math.cos(Ln),ei=Math.cos(Tn)*Math.sin(Ln)-Math.sin(Tn)*Math.cos(Ln)*Math.cos(Sn-En),ni=Math.atan2(Bn,ei),ti=An*ni;logger$6.trace("azimut",ti),ti<0&&(ti+=360);var ri=Math.round(ti*100)/100+" ";return ri}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var Te=this.sketch.getGeometry();Te.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var Te="ol-custom-zoom";e.className=Te,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var Oe=document.createElement("div");Oe.id=Te,Oe.classList.add("position"),Oe.classList.add(Te),this.container.appendChild(Oe)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,Te=this.element.childNodes;for(let Be=0;Be<Te.length;Be++){const Ue=Te[Be];if(Ue.classList.contains(this.options.className+"-in")){Ue.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ue.id="GPzoomIn",Ue.innerHTML="",Ue.removeAttribute("title"),Ue.setAttribute("aria-label","Zoomer");var Oe=document.createElement("span");Ue.appendChild(Oe),Ue.addEventListener?Ue.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Ue.classList.contains(this.options.className+"-out")){Ue.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ue.id="GPzoomOut",Ue.innerHTML="",Ue.removeAttribute("title"),Ue.setAttribute("aria-label","Dzoomer");var Oe=document.createElement("span");Ue.appendChild(Oe),Ue.addEventListener?Ue.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var Te=e.getControls();Te.forEach(Oe=>{Oe.element.classList.contains("ol-zoom")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const Te=e.label!==void 0?e.label:"";this.labelNode_=typeof Te=="string"?document.createTextNode(Te):Te;const Oe=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof Oe=="string"?document.createTextNode(Oe):Oe;const Be=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=Be,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const Te=e.getOwnerDocument();if(isFullScreenSupported(Te))if(isFullScreen(Te))exitFullScreen(Te);else{let Oe;this.source_?Oe=typeof this.source_=="string"?Te.getElementById(this.source_):this.source_:Oe=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(Oe):requestFullScreen(Oe)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const Te=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),Te!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,Te){Te?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const Te=this.getMap();Te&&Te.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let Oe=0,Be=e.length;Oe<Be;++Oe)unlistenByKey(e[Oe]);e.length=0;const Te=this.getMap();if(Te){const Oe=Te.getOwnerDocument();isFullScreenSupported(Oe)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let Be=0,Ue=events.length;Be<Ue;++Be)e.push(listen(Oe,events[Be],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(ke){const e=ke.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&ke.fullscreenEnabled)}function isFullScreen(ke){return!!(ke.webkitIsFullScreen||ke.fullscreenElement)}function requestFullScreen(ke){ke.requestFullscreen?ke.requestFullscreen():ke.webkitRequestFullscreen&&ke.webkitRequestFullscreen()}function requestFullScreenWithKeys(ke){ke.webkitRequestFullscreen?ke.webkitRequestFullscreen():requestFullScreen(ke)}function exitFullScreen(ke){ke.exitFullscreen?ke.exitFullscreen():ke.webkitExitFullscreen&&ke.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var Te="ol-custom-full-screen";e.className=e.className||Te,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||Te+"-true",e.inactiveClassName=e.inactiveClassName||Te+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein cran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var Oe=document.createElement("div");Oe.id=Te,Oe.classList.add("position"),Oe.classList.add(Te),this.container.appendChild(Oe)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],Te=document.createElement("span");e.appendChild(Te),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var Te=e.getControls();Te.forEach(Oe=>{Oe.element.classList.contains("ol-full-screen")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const Te=e.className!==void 0?e.className:"ol-overviewmap",Oe=e.tipLabel!==void 0?e.tipLabel:"Overview map",Be=e.collapseLabel!==void 0?e.collapseLabel:"";typeof Be=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Be):this.collapseLabel_=Be;const Ue=e.label!==void 0?e.label:"";typeof Ue=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Ue):this.label_=Ue;const He=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,We=document.createElement("button");We.setAttribute("type","button"),We.title=Oe,We.appendChild(He),We.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const Cn=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=Cn,e.layers&&e.layers.forEach(function(ti){Cn.addLayer(ti)});const An=document.createElement("div");An.className="ol-overviewmap-box",An.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:An}),this.ovmap_.addOverlay(this.boxOverlay_);const En=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),Sn=this.element;Sn.className=En,Sn.appendChild(this.ovmapDiv_),Sn.appendChild(We);const Tn=this.boxOverlay_,Ln=this.boxOverlay_.getElement(),Bn=ti=>({clientX:ti.clientX,clientY:ti.clientY}),ei=function(ti){const ri=Bn(ti),oi=Cn.getEventCoordinate(ri);Tn.setPosition(oi)},ni=ti=>{const ri=Cn.getEventCoordinateInternal(ti),oi=this.getMap();oi.getView().setCenterInternal(ri);const ai=oi.getOwnerDocument();ai.removeEventListener("pointermove",ei),ai.removeEventListener("pointerup",ni)};this.ovmapDiv_.addEventListener("pointerdown",ti=>{const ri=this.getMap().getOwnerDocument();ti.target===Ln&&ri.addEventListener("pointermove",ei),ri.addEventListener("pointerup",ni)})}setMap(e){const Te=this.getMap();if(e!==Te){if(Te){const Oe=Te.getView();Oe&&this.unbindView_(Oe),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const Oe=e.getView();Oe&&this.bindView_(Oe),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const Te=e.oldValue;Te&&this.unbindView_(Te);const Oe=this.getMap().getView();this.bindView_(Oe)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const Te=new View({projection:e.getProjection()});this.ovmap_.setView(Te)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),Te=this.ovmap_;if(!e.isRendered()||!Te.isRendered())return;const Oe=e.getSize(),Ue=e.getView().calculateExtentInternal(Oe);if(this.viewExtent_&&equals$1(Ue,this.viewExtent_))return;this.viewExtent_=Ue;const He=Te.getSize(),Cn=Te.getView().calculateExtentInternal(He),An=Te.getPixelFromCoordinateInternal(getTopLeft(Ue)),En=Te.getPixelFromCoordinateInternal(getBottomRight(Ue)),Sn=Math.abs(An[0]-En[0]),Tn=Math.abs(An[1]-En[1]),Ln=He[0],Bn=He[1];Sn<Ln*MIN_RATIO||Tn<Bn*MIN_RATIO||Sn>Ln*MAX_RATIO||Tn>Bn*MAX_RATIO?this.resetExtent_():containsExtent(Cn,Ue)||this.recenter_()}resetExtent_(){const e=this.getMap(),Te=this.ovmap_,Oe=e.getSize(),Ue=e.getView().calculateExtentInternal(Oe),He=Te.getView(),We=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,Cn=1/(Math.pow(2,We/2)*MIN_RATIO);scaleFromCenter(Ue,Cn),He.fitInternal(fromExtent(Ue))}recenter_(){const e=this.getMap(),Te=this.ovmap_,Oe=e.getView();Te.getView().setCenterInternal(Oe.getCenterInternal())}updateBox_(){const e=this.getMap(),Te=this.ovmap_;if(!e.isRendered()||!Te.isRendered())return;const Oe=e.getSize(),Be=e.getView(),Ue=Te.getView(),He=this.rotateWithView_?0:-Be.getRotation(),We=this.boxOverlay_,Cn=this.boxOverlay_.getElement(),An=Be.getCenter(),En=Be.getResolution(),Sn=Ue.getResolution(),Tn=Oe[0]*En/Sn,Ln=Oe[1]*En/Sn;if(We.setPosition(An),Cn){Cn.style.width=Tn+"px",Cn.style.height=Ln+"px";const Bn="rotate("+He+"rad)";Cn.style.transform=Bn}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const Te={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var Oe="ol-overviewmap";e.className=e.className||Oe,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte gnrale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:Te})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var Oe=document.createElement("div");Oe.id=Te,Oe.classList.add("position"),Oe.classList.add(Te),this.container.appendChild(Oe)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,Te=e[1];Te.id="GPshowOverviewMap-"+this._uid,Te.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!this.options.collapsed),Te.setAttribute("type","button"),Te.removeAttribute("title"),Te.setAttribute("aria-label",this.options.tipLabel);var Oe=this;Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe.dispatchEvent({type:"overviewmap:toggle",status:Ue})}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),Oe.dispatchEvent({type:"overviewmap:toggle",status:Ue})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPlegends"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowLegendsPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les lgendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowLegendsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowLegendsClick(Oe)}),e},_createLegendsPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPlegendsPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createLegendsPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__legends",ke},_createLegendsPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__header_legends",ke},_createLegendsPanelIconElement:function(){var ke=document.createElement("label");return ke.className="gpf-btn-header-legends gpf-btn-icon-header-legends",ke.title="Lgendes",ke},_createLegendsPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__title_legends",ke.innerHTML="Lgendes",ke},_createLegendsPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var ke=document.createElement("div");return ke.className="legends-entries gpf-panel__body fr-modal__body",ke},_createLegendEntry:function(ke){const e=Ue=>{var He=function(){if(!window.DOMParser)return!1;var En=new DOMParser;try{En.parseFromString("x","text/html")}catch{return!1}return!0};if(He()){var We=new DOMParser,Cn=We.parseFromString(Ue,"text/html");return Cn.body}var An=document.createElement("div");return An.innerHTML=Ue,An};if(ke&&ke.legends&&ke.legends.length){var Te=ke.legends[0].url,Oe=e(`
                    <div
                        id="${ke.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${ke.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${ke.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${ke.id}" class="legend-entry-image gpf-hidden">
                            <img src="${Te}" alt="${ke.desc}">
                        </div>
                    </div>
                `),Be=Oe.firstChild.querySelector("button");return Be&&Be.addEventListener("click",Ue=>{var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He);var We=document.getElementById("GPlegend_ID_"+ke.id);He?We.classList.replace("gpf-visible","gpf-hidden"):We.classList.replace("gpf-hidden","gpf-visible")}),Oe.firstChild}}},logger$5=LoggerByDefault.getLogger("legends"),Legends=class rp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof rp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var Te=this;e.getLayers().forEach(Oe=>{Te.add(Oe)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let Te=0;Te<e.length;Te++)this.add(layer)}add(e){if(e){var Te=this._createLegendEntry(this.getMetaInformations(e));if(Te)return this.exist(Te)?!1:(this.panelLegendsEntriesContainer.prepend(Te),this.legends.push({obj:e,dom:Te}),!0)}return!1}remove(e){var Te=!1;if(e)for(let Oe=0;Oe<this.legends.length;Oe++){const Be=this.legends[Oe];if(e.name===Be.obj.name&&e.service===Be.obj.service){Be.dom&&this.legends[Oe].dom.remove(),this.legends.splice(Oe,1),Te=!0;break}}return Te}exist(e){var Te=!1;for(let Oe=0;Oe<this.legends.length;Oe++)if(this.legends[Oe].dom.id===e.id){Te=!0;break}return Te}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(Te);var Oe=this.panelLegendsContainer=this._createLegendsPanelElement(),Be=this._createLegendsPanelDivElement();Oe.appendChild(Be);var Ue=this.panelLegendsEntriesContainer=this._createLegendElement();if(Oe.appendChild(Ue),this.options.panel){var He=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),We=this._createLegendsPanelIconElement();He.appendChild(We);var Cn=this._createLegendsPanelTitleElement();He.appendChild(Cn);var An=this.buttonLegendsClose=this._createLegendsPanelCloseElement();He.appendChild(An),Be.appendChild(He)}return e.appendChild(Oe),logger$5.log(e),e}addEventsListeners(e){var Te=this;this.eventsListeners["layer:add"]=function(Oe){if(logger$5.trace(Oe),!Te.add(Oe.element)){logger$5.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(Oe){if(logger$5.trace(Oe),!Te.remove(Oe.element)){logger$5.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(Oe){logger$5.trace(Oe)},this.eventsListeners["view:change:resolution"]=function(Oe){logger$5.trace(Oe);var Be=Te.getMap();for(let Tn=0;Tn<Te.legends.length;Tn++){const Ln=Te.legends[Tn];var Ue=Te.getMetaInformations(Ln.obj);if(Ue){var He=Be.getView().getResolution()||Be.getView().getResolutionForZoom(Be.getZoom()),We=He*3570,Cn=Ue.legends.slice(),An=Cn[0];for(let Bn=0;Bn<Cn.length;++Bn){const ei=Cn[Bn];ei.minScaleDenominator||(ei.minScaleDenominator=0),(We>An.minScaleDenominator&&ei.minScaleDenominator>An.minScaleDenominator&&ei.minScaleDenominator<We||We<An.minScaleDenominator&&ei.minScaleDenominator<An.minScaleDenominator)&&(An=ei)}if(Ue.legends[0]!==An){Ue.legends=[],Ue.legends.push(An);var En=Te._createLegendEntry(Ue),Sn=Ln.dom;Sn.replaceWith(En),Ln.dom=En}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e);var Te=this.buttonLegendsShow.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=ke=>{var e=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var Te=new DOMParser,Oe=Te.parseFromString(ke,"text/html");return Oe.body}var Be=document.createElement("div");return Be.innerHTML=ke,Be};var CatalogDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPcatalog"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowCatalogPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de donnes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowCatalogClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowCatalogClick(Oe)}),e},_createCatalogPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPcatalogPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createCatalogPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createCatalogPanelContentDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__content fr-modal__content",ke},_createCatalogPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpanelHeader gpf-panel__header fr-modal__header",ke},_createCatalogPanelTitleElement:function(ke){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=ke,e},_createCatalogPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowCatalogPicto")).click(),ke.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowCatalogPicto")).click(),ke.onCloseCatalogClick()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createCatalogContentDivElement:function(){var ke=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return ke.firstChild},_createCatalogContentTitleElement:function(ke){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${ke}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var ke=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donne" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(ke);const Te=e.attachShadow({mode:"open"});Te.innerHTML=ke.trim();var Oe=Te.getElementById("search-button");Oe&&Oe.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var Be=Te.getElementById("search-input");return Be&&Be.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),Te},_createCatalogWaitingElement:function(){var ke=document.createElement("div");ke.id=this._addUID("GPcatalogCalcWaitingContainer"),ke.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",ke.appendChild(e),ke},_createCatalogContentCategoriesTabs:function(ke){var e="",Te=(ei,ni,ti,ri)=>{var oi="GPtabButton fr-tabs__tab",ai="false",ci=-1;return ri&&(oi="GPtabButton GPtabButtonActive fr-tabs__tab",ai="true",ci=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${ei}_${ni}" class="${oi}" tabindex="${ci}" role="tabbutton" aria-selected="${ai}" aria-controls="tabpanel-${ei}-panel_${ni}">${ti}</button>
            </li>
            `},Oe="",Be=ei=>{var ni=ei.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${ei.id}" name="radio-inline" ${ni} aria-controls="tabcontent-${ei.id}">
                    <label class="fr-label" for="radio-inline_${ei.id}">
                        ${ei.title}
                    </label>
                </div>
            </div>
            `},Ue=(ei,ni)=>{var ti="";for(let oi=0;oi<ni.length;oi++){const ai=ni[oi];Oe+=Be(ai);var ri="";ai.default||(ri="GPelementHidden gpf-hidden"),ti+=`<div class="tabcontent ${ri}" role="tabpanel-section" id="tabcontent-${ai.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${ei}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${Oe}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${ti}
            `},He="",We=(ei,ni,ti,ri)=>{var oi="GPtabContent fr-tabs__panel",ai=-1;ti&&(oi="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",ai=0);var ci='<div class="tabcontent"></div>';return ri&&(ci=Ue(ni,ri)),`
            <!-- panneaux -->
            <div id="tabpanel-${ei}-panel_${ni}" class="${oi}" role="tabpanel" aria-labelledby="tabbutton-${ei}_${ni}" tabindex="${ai}" style="max-height: 250px;overflow-y: auto;">
                ${ci}
            </div>
            `};for(let ei=0;ei<ke.length;ei++){const ni=ke[ei];e+=Te(ei,ni.id,ni.title,ni.default),He+=We(ei,ni.id,ni.default,ni.items)}var Cn=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du systme d'onglet]">
                    ${e}
                </ul>
                ${He}
            </div>
        </div>
        `,An=stringToHTML(Cn.trim());const En=An.attachShadow({mode:"open"});En.innerHTML=Cn.trim();var Sn=En.querySelectorAll('[role="tabpanel-section"]'),Tn=En.querySelectorAll('[name="radio-inline"]');Tn&&Tn.forEach(ei=>{ei.addEventListener("change",ni=>{for(let ri=0;ri<Sn.length;ri++){const oi=Sn[ri];oi.classList.add("gpf-hidden"),oi.classList.add("GPelementHidden")}var ti=document.getElementById(ni.target.getAttribute("aria-controls"));ti.classList.remove("gpf-hidden"),ti.classList.remove("GPelementHidden")})});var Ln=En.querySelectorAll('[role="tabpanel"]'),Bn=En.querySelectorAll('[role="tabbutton"]');return Bn&&Bn.forEach(ei=>{ei.addEventListener("click",ni=>{for(let ri=0;ri<Bn.length;ri++){const oi=Bn[ri];oi.setAttribute("tabindex",-1),oi.ariaSelected=!1,oi.classList.remove("GPtabButtonActive")}ni.target.setAttribute("tabindex",0),ni.target.ariaSelected=!0,ni.target.classList.add("GPtabButtonActive");for(let ri=0;ri<Ln.length;ri++){const oi=Ln[ri];oi.setAttribute("tabindex",-1),oi.classList.remove("fr-tabs__panel--selected"),oi.classList.remove("GPtabContentSelected"),oi.classList.add("gpf-hidden"),oi.classList.add("GPelementHidden")}var ti=document.getElementById(ni.target.getAttribute("aria-controls"));ti.setAttribute("tabindex",0),ti.classList.add("fr-tabs__panel--selected"),ti.classList.add("GPtabContentSelected"),ti.classList.remove("gpf-hidden"),ti.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(ni)})}),En},_createCatalogContentCategoryTabContent:function(ke,e){var Te=Object.values(e),Oe="",Be=(oi,ai,ci,Pi,vi)=>`
            <div class="fr-fieldset__element" id="fieldset-${vi}_${ai}-${Pi}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${vi}"
                        id="checkboxes-${vi}-${oi}_${ai}-${Pi}"
                        type="checkbox"
                        data-layer="${ai}:${Pi}"
                        aria-describedby="checkboxes-messages-${vi}-${oi}_${ai}-${Pi}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${vi}-${oi}_${ai}-${Pi}" title="nom technique : ${ai}">
                        ${ci} (${Pi})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${vi}-${oi}_${ai}-${Pi}" aria-live="assertive"></div>
                </div>
            </div>
            `,Ue=(oi,ai,ci,Pi,vi)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${ai}" aria-expanded="false" aria-controls="accordion-${oi}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${ai}"></span>${ci}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${oi}">
                    ${vi}
                </div>
            </section>
            `,He=ke.section;He&&(Te=Te.sort((oi,ai)=>oi[ke.filter.field].localeCompare(ai[ke.filter.field])));var We={};for(let oi=0;oi<Te.length;oi++){const ai=Te[oi];if(He){var Cn=ai[ke.filter.field];Cn&&(We.hasOwnProperty(Cn)||(We[Cn]=""),We[Cn]+=Be(oi,ai.name,ai.title,ai.service,ke.id))}else Oe+=Be(oi,ai.name,ai.title,ai.service,ke.id)}if(He){for(const oi in We)if(Object.prototype.hasOwnProperty.call(We,oi)){const ai=We[oi];var An=[...ai.matchAll(/fr-fieldset__element/g)].length,En=Math.abs(Array.from(oi).reduce((ci,Pi)=>Math.imul(31,ci)+Pi.charCodeAt(0)|0,0));Oe+=Ue(En,ke.id,oi,An,ai)}}var Sn=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${ke.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${Oe}
            </fieldset>
        `,Tn=stringToHTML(Sn);const Ln=Tn.attachShadow({mode:"open"});Ln.innerHTML=Sn.trim();var Bn=`checkboxes-${ke.id}`,ei=Ln.querySelectorAll('[name="'+Bn+'"]');ei&&ei.forEach(oi=>{oi.addEventListener("click",ai=>{this.onSelectCatalogEntryClick(ai)})});var ni=`button-collapse-${ke.id}`,ti=Ln.querySelectorAll('[role="'+ni+'"]');ti&&ti.forEach(oi=>{oi.addEventListener("click",ai=>{ai.target.ariaExpanded=ai.target.ariaExpanded!=="true";var ci=document.getElementById(ai.target.getAttribute("aria-controls"));ci&&(ai.target.ariaExpanded==="true"?(ci.classList.add("fr-collapse--expanded"),ci.classList.remove("GPelementHidden")):(ci.classList.remove("fr-collapse--expanded"),ci.classList.add("GPelementHidden")))},!1)}),`${ke.id}`;var ri=Ln.querySelectorAll('[role="'+ni+'"]');return ri&&ri.forEach(oi=>{oi.addEventListener("click",ai=>{ai.target.parentElement.click()})}),Ln}},logger$4=LoggerByDefault.getLogger("widget"),Catalog=class op extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof op))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(Te=>{logger$4.trace(this,Te),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:Te})}).catch(Te=>{this.hideWaiting(),logger$4.error(Te)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Grer vos couches de donnes",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(Te=>{var Oe=Te.items;return Te.items&&(Oe=Te.items.map(Be=>({title:Be.title,id:Be.id||Math.abs(Array.from(Be.title).reduce((Ue,He)=>Math.imul(31,Ue)+He.charCodeAt(0)|0,0)),section:Be.hasOwnProperty("section")?Be.section:!1,default:Be.hasOwnProperty("default")?Be.default:!1,filter:Be.filter||null}))),{title:Te.title,id:Te.id||Math.abs(Array.from(Te.title).reduce((Be,Ue)=>Math.imul(31,Be)+Ue.charCodeAt(0)|0,0)),default:Te.hasOwnProperty("default")?Te.default:!1,filter:Te.filter||null,items:Oe||null}}),this.categoryId=(()=>{var Te=this.categories.findIndex(Oe=>Oe.default);return Te===-1&&(Te=0,this.categories[Te].default=!0),this.categories[Te].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(Te);var Oe=this.panelCatalogContainer=this._createCatalogPanelElement(),Be=this._createCatalogPanelDivElement();Oe.appendChild(Be);var Ue=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),He=this._createCatalogPanelTitleElement(this.options.titlePrimary);Ue.appendChild(He);var We=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this._createCatalogPanelContentDivElement(),An=this.contentCatalogContainer=this._createCatalogContentDivElement();An.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&An.appendChild(this._createCatalogContentSearchElement());var En=this.waitingContainer=this._createCatalogWaitingElement();return An.appendChild(En),Cn.appendChild(An),Be.appendChild(Cn),e.appendChild(Oe),e}initMapLayers(){var e=this.getMap();if(e){var Te=e.getLayers();Te.forEach(Oe=>{if(Oe.name&&Oe.service){this.layersListOnMap[Oe.name+":"+Oe.service]=Oe;var Be=document.querySelectorAll(`input[data-layer="${Oe.name}:${Oe.service}"]`);Be&&Be.forEach(Ue=>{Ue.checked=!0})}})}}async initLayersList(){var e=null,Te=this;const Oe=An=>{var En=Te.contentCatalogContainer,Sn=Te._createCatalogContentCategoriesTabs(this.categories);En.appendChild(Sn);var Tn=[];Te.categories.forEach(ei=>{if(ei.items)for(let ni=0;ni<ei.items.length;ni++){const ti=ei.items[ni];Tn.push(ti)}else Tn.push(ei)});var Ln=En.querySelectorAll(".tabcontent");for(let ei=0;ei<Ln.length;ei++){const ni=Ln[ei];var Bn=Be(Tn[ei],An);ni.appendChild(Te._createCatalogContentCategoryTabContent(Tn[ei],Bn))}},Be=(An,En)=>{var Sn=En,Tn=An.filter;if(Tn){Sn={};for(const Bn in En)if(Object.prototype.hasOwnProperty.call(En,Bn)){const ei=En[Bn];if(ei[Tn.field]){var Ln=Array.isArray(Tn.value)?Tn.value.includes(ei[Tn.field].toString()):Tn.value==="*"||ei[Tn.field].toString()===Tn.value;Ln&&(Sn[Bn]=ei,this.layersList[Bn].categories.push(An.id))}}}return Sn},Ue=(An,En)=>En;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const An in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,An)){const En=e.layers[An];var He=En.serviceParams.id.split(":").slice(-1)[0];En.service=He,En.categories=[]}var We=Ue(this.options.layerFilter,e.layers);return this.layersList=We,Oe(We),new Promise((An,En)=>{An(e)})}if(this.options.configuration.urls){var Cn=[];for(let An=0;An<this.options.configuration.urls.length;An++){const En=this.options.configuration.urls[An],Sn=function(){return fetch(En,{}).then(function(Tn){if(Tn.ok)return Tn.json().then(function(Bn){return Bn}).catch(Bn=>{logger$4.warn("fetch json exception :",Bn)});var Ln=new Error("HTTP status code: "+Tn.status);throw Ln}).catch(Tn=>new Promise((Ln,Bn)=>{logger$4.error("fetch json exception :",Tn),Bn(Tn)}))};Cn.push(Sn())}try{const An=await Promise.all(Cn);e=An[0];for(let Sn=1;Sn<An.length;Sn++){const Tn=An[Sn];Helper.mergeParams(e,Tn)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Sn in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Sn)){const Tn=e.layers[Sn];var He=Tn.serviceParams.id.split(":").slice(-1)[0];Tn.service=He,Tn.categories=[]}var We=Ue(this.options.layerFilter,e.layers);return this.layersList=We,Oe(We),await new Promise((Sn,Tn)=>{Sn(e)})}catch(An){return await new Promise((En,Sn)=>{Sn(An)})}}}addEventsListeners(e){var Te=this;this.eventsListeners["map:add"]=function(Oe){logger$4.trace(Oe);var Be=Oe.element.name,Ue=Oe.element.service;Te.layersListOnMap[Be+":"+Ue]=Oe.element;var He=document.querySelectorAll(`input[data-layer="${Be}:${Ue}"]`);He&&He.forEach(We=>{We.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(Oe){logger$4.trace(Oe);var Be=Oe.element.name,Ue=Oe.element.service;delete Te.layersListOnMap[Be+":"+Ue];var He=document.querySelectorAll(`input[data-layer="${Be}:${Ue}"]`);He&&He.forEach(We=>{We.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,Te){var Oe=null,Be=null;switch(Te){case"WMS":Be=new LayerWMS({layer:e});break;case"WMTS":Be=new LayerWMTS({layer:e});break;case"TMS":Be=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":Be=new LayerWFS({layer:e});break}if(Be){var Ue=this.getMap();Ue.addLayer(Be),this.layersListOnMap[e+":"+Te]=Be,Oe=Be.getConfiguration()}return Oe}removeLayer(e,Te){var Oe=null,Be=this.layersListOnMap[e+":"+Te];if(Be){Oe=Be.getConfiguration();var Ue=this.getMap();Ue.removeLayer(Be),delete this.layersListOnMap[e+":"+Te]}return Oe}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const Te=this.layersList[e];Te.hidden=!1,this.updateFilteredLayersListDOM(Te.name,Te.service,Te.hidden)}}setFilteredLayersList(e){var Te=this.options.search.criteria;for(const Be in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,Be)){const Ue=this.layersList[Be];var Oe="";for(let He=0;He<Te.length;He++){const We=Te[He];Ue[We]&&(Oe+=Ue[We].toLowerCase())}Ue.hidden=!Oe.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Ue.name,Ue.service,Ue.hidden)}}updateFilteredLayersListDOM(e,Te,Oe){var Be=[];this.categories.forEach(He=>{if(He.items)for(let We=0;We<He.items.length;We++){const Cn=He.items[We];Be.push(Cn.id)}else Be.push(He.id)});for(let He=0;He<Be.length;He++){const We=Be[He];var Ue=document.getElementById(`fieldset-${We}_${e}-${Te}`);Ue&&(Oe?(Ue.classList.add("gpf-hidden"),Ue.classList.add("GPelementHidden")):(Ue.classList.remove("gpf-hidden"),Ue.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e)}onCloseCatalogClick(e){logger$4.trace(e)}onSelectCatalogTabClick(e){logger$4.trace(e);var Te=e.target.id,Oe=Te.split("_")[1];this.categoryId=Oe}onSelectCatalogEntryClick(e){logger$4.trace(e);var Te=e.target.dataset.layer,Oe=Te.substring(0,Te.lastIndexOf(":")),Be=Te.substring(Te.lastIndexOf(":")+1),Ue={};e.target.checked?(this.options.addToMap&&(Ue=this.addLayer(Oe,Be)),this.dispatchEvent({type:"catalog:layer:add",name:Oe,service:Be,layer:Ue})):(this.options.addToMap&&(Ue=this.removeLayer(Oe,Be)),this.dispatchEvent({type:"catalog:layer:remove",name:Oe,service:Be,layer:Ue}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France mtropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Runion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Caldonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPterritories"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowTerritoriesPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Slecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowTerritoriesClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowTerritoriesClick(Oe)}),e},_createTerritoriesPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPterritoriesPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createTerritoriesPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__territories",ke},_createTerritoriesPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__header_territories",ke},_createTerritoriesPanelIconElement:function(){var ke=document.createElement("label");return ke.className="gpf-btn-header-territories gpf-btn-icon-header-territories",ke.title="Selecteur de territoires",ke},_createTerritoriesPanelTitleElement:function(ke){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=ke,e},_createTerritoriesPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowTerritoriesPicto")).click(),ke.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowTerritoriesPicto")).click(),ke.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var ke=document.createElement("div");return ke.className="territories-entries gpf-panel__body_territories fr-modal__body",ke},_createTerritoryEntry:function(ke){var e=this;const Te=An=>{var En=function(){if(!window.DOMParser)return!1;var Bn=new DOMParser;try{Bn.parseFromString("x","text/html")}catch{return!1}return!0};if(En()){var Sn=new DOMParser,Tn=Sn.parseFromString(An,"text/html");return Tn.body}var Ln=document.createElement("div");return Ln.innerHTML=An,Ln};if(ke){var Oe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",Be=ke.thumbnail||Oe,Ue=ke.icon||Oe,He=ke.id.toLowerCase(),We=Te(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${ke.description}">${ke.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${ke.id}" src="${Be}" width="100%" height="100%" title="${ke.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${He}">
                        <svg>       
                            <image id="icon-${ke.id}" xlink:href="${Ue}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),Cn=We.firstChild;return Cn&&Cn.addEventListener("click",An=>{e.onImageTerritoriesClick(An,ke.id)}),We.firstChild}}},logger$3=LoggerByDefault.getLogger("territories"),Territories=class ap extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ap))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let Te=0;Te<TerritoriesJson.length;Te++){const Oe=TerritoriesJson[Te];this.setTerritory(Oe)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var Te=this.territories.some(Be=>Be.data.id===e.id);if(e&&!Te){var Oe=this._createTerritoryEntry(e);if(Oe)return this.panelTerritoriesEntriesContainer.appendChild(Oe),this.territories.push({data:e,dom:Oe}),!0}return!1}removeTerritory(e){var Te=!1;if(e){for(let Oe=0;Oe<this.territories.length;Oe++)if(this.territories[Oe].data.id===e){this.territories[Oe].dom.remove(),this.territories.splice(Oe,1),Te=!0;break}}return Te}setCollapse(e){if(e===void 0){logger$3.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Slectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(Te);var Oe=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();Oe.classList.add("tiles-direction"),Oe.classList.add("tiles-"+this.options.tiles);var Be=this._createTerritoriesPanelDivElement();Oe.appendChild(Be);var Ue=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Ue.classList.add("tiles-direction"),Ue.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Ue.classList.add("tiles-reduce"),this.options.thumbnail?Ue.classList.add("tiles-thumbnail"):Ue.classList.add("tiles-icon"),Oe.appendChild(Ue),this.options.panel){var He=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),We=this._createTerritoriesPanelIconElement();He.appendChild(We);var Cn=this._createTerritoriesPanelTitleElement(this.options.title);He.appendChild(Cn);var An=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();He.appendChild(An),Be.appendChild(He)}return e.appendChild(Oe),logger$3.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$3.trace(e)}onImageTerritoriesClick(e,Te){logger$3.trace(e,Te);var Oe=this.territories.find(An=>An.data.id===Te);if(Oe){var Be=Oe.data.zoom,Ue=Oe.data.bbox||[];if(!Ue.length)return;var He=this.getMap(),We=He.getView().getProjection().getCode(),Cn=transformExtent(Ue,"EPSG:4326",We);He.getView().fit(Cn,He.getSize()),Be&&He.getView().setZoom(Be),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:Oe})}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(ke){var e=this._uid?ke+"-"+this._uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPcontrolList"),ke.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",ke},_createShowControlListPictoElement:function(){var ke=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),Te.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowControlListPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var Be=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Be),ke.onShowControlListPanelClick(Oe)}),e},_createControlListPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPcontrolListPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createControlListPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__body fr-modal__body",ke},_createControlListPanelHeaderElement:function(){var ke=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Mes outils",e.appendChild(Te);var Oe=document.createElement("button");Oe.id=this._addUID("GPcontrolListPanelClose"),Oe.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowControlListPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowControlListPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Oe.appendChild(Be),e.appendChild(Oe),e},_createControlListPanelContentElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__content fr-modal__content",ke},_createControlListPanelFooterElement:function(ke){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var Te=document.createElement("button");return Te.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),Te.innerText="+ Ajouter plus d'outils",Te.addEventListener("click",function(){ke.click()}),e.appendChild(Te),e},_createControlListPanelControl:function(ke){let e;try{e=ke.getContainer()}catch{e=ke.container}var Te=document.createElement("div"),Oe=e.querySelector(".GPshowOpen").cloneNode();Oe.id=Oe.id+"-controllist",Oe.classList.add("inside-control-list"),Te.appendChild(Oe);var Be=document.createElement("div"),Ue=document.createElement("span");if(Be.appendChild(Ue),e.querySelector(".GPshowOpen").ariaLabel?Ue.innerText=e.querySelector(".GPshowOpen").ariaLabel:e.querySelector(".GPpanelTitle")?Ue.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")&&(Ue.innerText=e.querySelector("[class^='gpf-btn-header-']").title),ke.description){var He=document.createElement("span");He.innerText=ke.description,Be.appendChild(He)}return Te.appendChild(Be),Te.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),Te}},logger$2=LoggerByDefault.getLogger("controlList"),ControlList=class lp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof lp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$2.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),Te=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(Te);var Oe=this._ControlListPanelContainer=this._createControlListPanelElement(),Be=this._createControlListPanelDivElement();Oe.appendChild(Be);var Ue=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();Be.appendChild(Ue);var He=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(Be.appendChild(He),this.controlCatalogElement){var We=this._createControlListPanelFooterElement(this.controlCatalogElement);Be.appendChild(We)}return e.appendChild(Oe),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var Oe=this._pictoControlListButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Ue=>{if(Ue.listable){let He=this._createControlListPanelControl(Ue);this._ControlListPanelContentContainer.appendChild(He)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);var OGCRequest={computeGenericGPFWFS:async function(ke,e,Te=0,Oe="geom",Be="",Ue=4326,He=!1,We,Cn){let An=Cn,En=We;Ue!==4326&&([An,En]=proj4(proj4.defs("EPSG:4326"),proj4.defs(`EPSG:${Ue}`),[Cn,We]));let Sn=`INTERSECTS(${Oe},Point(${An}%20${En}))`;Te>0&&(Sn=`DWITHIN(${Oe},Point(${An}%20${En}),${Te},kilometers)`),Be&&(Sn+=` ${Be}`);const Ln=await(await fetch(`https://data.geopf.fr/wfs/ows?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename=${ke}&outputFormat=json&count=50&CQL_FILTER=${Sn}`)).json(),Bn=[];return Ln.features.forEach(ei=>{const ni=[];e.forEach(ti=>{ni.push(ei.properties[ti])}),He&&ni.push(ei.geometry),e.length===1&&ni[0]!==null&&!He?Bn.push(ni[0]):(e.length>1||He)&&Bn.push(ni)}),Bn}},title="contextMenu",ContextMenuDOM={_addUID:function(ke){var e=this.uid?ke+"-"+this.uid:ke;return e},_createMainContainerElement:function(){var ke=document.createElement("div");return ke.id=this._addUID("GPpointInfo"),ke.className="GPpointInfo GPwidget gpf-widget",ke},_createShowPointInfoPictoElement:function(){var ke=this,e=document.createElement("button");return e.id=this._addUID("GPshowPointInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowPointInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-widget fr-btn",e.title=`${title}`,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe),ke.onShowPointInfoClick(Te)}):e.attachEvent&&e.attachEvent("onclick",function(Te){var Oe=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!Oe),ke.onShowPointInfoClick(Te)}),e},_createPointInfoPanelElement:function(){var ke=document.createElement("dialog");return ke.id=this._addUID("GPpointInfoPanel"),ke.className="GPpanel gpf-panel fr-modal",ke},_createPointInfoPanelDivElement:function(){var ke=document.createElement("div");return ke.className="gpf-panel__pointInfo",ke},_createPointInfoPanelHeaderElement:function(){var ke=document.createElement("div");return ke.className="GPpointInfoHeader gpf-panel__header_pointInfo",ke},_createPointInfoPanelIconElement:function(){var ke=document.createElement("label");return ke.className="GPpanelHeader gpf-btn-header-pointInfo gpf-btn-icon-header-pointInfo",ke.title="Adresse et coordonnes",ke},_createPointInfoPanelTitleElement:function(){var ke=document.createElement("div");return ke.className="GPpanelTitle gpf-panel__title_pointInfo fr-pt-4w",ke.innerHTML="Adresse et coordonnes",ke},_createPointInfoPanelCloseElement:function(){var ke=this,e=document.createElement("button");e.className="GPpanelClose GPpointInfoPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowPointInfoPicto")).click(),ke.onClosePointInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowPointInfoPicto")).click(),ke.onClosePointInfoClick()}),e},_createEntriesElement:function(){var ke=document.createElement("div");ke.className="point-info-content gpf-panel__body fr-modal__body";var e=document.createElement("div");return ke.appendChild(e),ke},_createPinDOMOverlay:function(ke){var e=document.createElement("div"),Te=document.createElement("img");return Te.src=ke,e.appendChild(Te),e}};/*!
  * ol-contextmenu - v5.5.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Wed Aug 07 2024 12:29:18 GMT+0000 (Coordinated Universal Time)
  */var k$1=Object.defineProperty,I$1=(ke,e,Te)=>e in ke?k$1(ke,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):ke[e]=Te,a$1=(ke,e,Te)=>I$1(ke,typeof e!="symbol"?e+"":e,Te),S$1={exports:{}};function x$2(){}x$2.prototype={on:function(ke,e,Te){var Oe=this.e||(this.e={});return(Oe[ke]||(Oe[ke]=[])).push({fn:e,ctx:Te}),this},once:function(ke,e,Te){var Oe=this;function Be(){Oe.off(ke,Be),e.apply(Te,arguments)}return Be._=e,this.on(ke,Be,Te)},emit:function(ke){var e=[].slice.call(arguments,1),Te=((this.e||(this.e={}))[ke]||[]).slice(),Oe=0,Be=Te.length;for(Oe;Oe<Be;Oe++)Te[Oe].fn.apply(Te[Oe].ctx,e);return this},off:function(ke,e){var Te=this.e||(this.e={}),Oe=Te[ke],Be=[];if(Oe&&e)for(var Ue=0,He=Oe.length;Ue<He;Ue++)Oe[Ue].fn!==e&&Oe[Ue].fn._!==e&&Be.push(Oe[Ue]);return Be.length?Te[ke]=Be:delete Te[ke],this}};S$1.exports=x$2;var _$1=S$1.exports.TinyEmitter=x$2,L$1=(ke=>(ke.CONTEXTMENU="contextmenu",ke.CLICK="click",ke.DBLCLICK="dblclick",ke))(L$1||{}),p$1=(ke=>(ke.BEFOREOPEN="beforeopen",ke.OPEN="open",ke.CLOSE="close",ke.ADD_MENU_ENTRY="add-menu-entry",ke))(p$1||{});let w$1=class extends MapBrowserEvent{constructor(e){super(e.type,e.map,e.originalEvent)}};const z$1={width:150,scrollAt:4,eventType:L$1.CONTEXTMENU,defaultItems:!0,items:[]},d$1="ol-ctx-menu",r={container:`${d$1}-container`,separator:`${d$1}-separator`,submenu:`${d$1}-submenu`,hidden:`${d$1}-hidden`,icon:`${d$1}-icon`,zoomIn:`${d$1}-zoom-in`,zoomOut:`${d$1}-zoom-out`,unselectable:"ol-unselectable"},C$1=[{text:"Zoom In",classname:`${r.zoomIn} ${r.icon}`,callback:(ke,e)=>{const Te=e.getView();Te.animate({zoom:Number(Te.getZoom())+1,duration:700,center:ke.coordinate})}},{text:"Zoom Out",classname:`${r.zoomOut} ${r.icon}`,callback:(ke,e)=>{const Te=e.getView();Te.animate({zoom:Number(Te.getZoom())-1,duration:700,center:ke.coordinate})}}];function y$1(ke){const e=document.createDocumentFragment(),Te=document.createElement("div");for(Te.innerHTML=ke;Te.firstChild;)e.append(Te.firstChild);return e}function P$1(ke){var Cn,An;const e=document.importNode(ke),Te=ke.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${Te}px`;const Oe=y$1("<span>Foo</span>"),Be=y$1("<span>Foo</span>"),Ue=document.createElement("li"),He=document.createElement("li");Ue.append(Oe),He.append(Be),e.append(Ue),e.append(He),(Cn=ke.parentNode)==null||Cn.append(e);const We=e.offsetHeight/2;return(An=ke.parentNode)==null||An.removeChild(e),We}function N$1({parentNode:ke,item:e,isSubmenu:Te=!1,isInsideSubmenu:Oe=!1,emitter:Be}){const Ue=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const En=`<span>${e.text}</span>`,Sn=y$1(En),Tn=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=r.icon:e.classname.includes(r.icon)===!1&&(e.classname+=` ${r.icon}`),Tn.setAttribute("style",`background-image:url(${e.icon})`)),Tn.id=Ue,Tn.className=e.classname,Tn.append(Sn),ke.append(Tn);const Ln={id:Ue,isSubmenu:Te,isInsideSubmenu:Oe,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return Be.emit(p$1.ADD_MENU_ENTRY,Ln,Tn),Tn}const He=`<li id="${Ue}" class="${r.separator}"><hr></li>`,We=y$1(He);ke.append(We);const Cn=ke.lastChild,An={id:Ue,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return Be.emit(p$1.ADD_MENU_ENTRY,An,Cn),Cn}function M$1({container:ke,items:e,menuWidth:Te,isInsideSubmenu:Oe,emitter:Be}){e.forEach(Ue=>{if(typeof Ue!="string"&&"items"in Ue&&Array.isArray(Ue.items)){const He=N$1({parentNode:ke,item:Ue,isSubmenu:!0,emitter:Be});He.classList.add(r.submenu);const We=document.createElement("ul");We.classList.add(r.container),We.style.width=`${Te}px`,He.append(We),M$1({emitter:Be,menuWidth:Te,container:We,items:Ue.items,isInsideSubmenu:!0})}else N$1({parentNode:ke,item:Ue,isSubmenu:!1,isInsideSubmenu:Oe,emitter:Be})})}function b$1(ke,e){if(!ke)throw new Error(e)}let R$1=class extends Control{constructor(e={}){b$1(typeof e=="object","@param `opts` should be object type!");const Te=document.createElement("div");super({element:Te}),a$1(this,"map"),a$1(this,"emitter",new _$1),a$1(this,"container"),a$1(this,"coordinate",[]),a$1(this,"pixel",[]),a$1(this,"contextMenuEventListener"),a$1(this,"entryCallbackEventListener"),a$1(this,"mapMoveListener"),a$1(this,"lineHeight",0),a$1(this,"disabled"),a$1(this,"opened"),a$1(this,"items",[]),a$1(this,"menuEntries",new Map),a$1(this,"options"),this.options={...z$1,...e};const Oe=document.createElement("ul");Te.append(Oe),Te.style.width=`${this.options.width}px`,Te.classList.add(r.container,r.unselectable,r.hidden),this.container=Te,this.contextMenuEventListener=Be=>{this.handleContextMenu(Be)},this.entryCallbackEventListener=Be=>{this.handleEntryCallback(Be)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return C$1}countItems(){return this.menuEntries.size}extend(e){b$1(Array.isArray(e),"@param `items` should be an Array."),M$1({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(r.hidden),this.dispatchEvent(p$1.CLOSE)}isOpen(){return this.opened}updatePosition(e){b$1(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(p$1.ADD_MENU_ENTRY,(Oe,Be)=>{this.handleAddMenuEntry(Oe,Be)},this),this.items=this.options.defaultItems?this.options.items.concat(C$1):this.options.items,M$1({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const Te=this.getMenuEntriesLength();this.lineHeight=Te>0?this.container.offsetHeight/Te:P$1(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(p$1.ADD_MENU_ENTRY)}removeMenuEntry(e){let Te=document.getElementById(e);Te==null||Te.remove(),Te=null,this.menuEntries.delete(e)}handleContextMenu(e){var Te;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.BEFOREOPEN})),!this.disabled&&(this.options.eventType===L$1.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(Te=e.target)==null||Te.addEventListener("pointerdown",Oe=>{this.opened&&(Oe.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(r.hidden),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],Te={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},Oe=this.getMenuEntriesLength(),Be={w:this.container.offsetWidth,h:Math.round(this.lineHeight*Oe)},Ue=Te.w>=Be.w?this.pixel[0]+5:this.pixel[0]-Be.w;this.container.style.left=`${Ue}px`,this.container.style.top=Te.h>=Be.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-Be.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",Te.w-=Be.w;const He=An=>Array.from(An.children).filter(En=>En.tagName==="LI"&&En.classList.contains(r.submenu));let We=0;const Cn=(An,En)=>{We+=1,He(An).forEach(Sn=>{const Tn=En>=Be.w?Be.w-8:(Be.w+8)*-1,Ln=Sn.querySelector(`ul.${r.container}`),Bn=Math.round(this.lineHeight*Array.from(Ln.children).filter(ei=>ei.tagName==="LI").length);Ln.style.left=`${Tn}px`,Ln.style.right="auto",Ln.style.top=Te.h>=Bn+Be.h?"0":`-${Ln.offsetHeight-25}px`,Ln.style.bottom="auto",Ln.style.zIndex=String(We),He(Ln).length>0&&Cn(Ln,En-Be.w)})};Cn(this.container.firstElementChild,Te.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var Ue;e.preventDefault(),e.stopPropagation();const Te=e.currentTarget,Oe=this.menuEntries.get(Te.id);if(!Oe)return;const Be={data:Oe.data,coordinate:this.coordinate};this.closeMenu(),(Ue=Oe.callback)==null||Ue.call(Oe,Be,this.map)}handleAddMenuEntry(e,Te){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&Te.addEventListener("click",this.entryCallbackEventListener,!1)}};var logger$1=LoggerByDefault.getLogger("contextMenu"),ContextMenu=class cp extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof cp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ContextMenu",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(e.addControl(this.contextmenu),e.addOverlay(this._marker),this.auto&&this.addEventsListeners()):this.auto&&this.removeEventsListeners(),super.setMap(e)}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!0,contextMenuItemsOptions:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonContextMenuShow=null,this.panelContextMenuContainer=null,this.panelContextMenuHeaderContainer=null,this.buttonContextMenuClose=null,this.panelContextMenuEntriesContainer=null,this.eventsListeners=[],this.controlList=[],this.itiPoints=new Array(7),this._marker=new Overlay({element:this._createPinDOMOverlay(Marker.lightOrange),stopEvent:!1,offset:Marker.defaultOffset});var Te=this.getAvailableContextMenuControls.call(this);this.contextMenuItemsOptions=[],e.contextMenuItemsOptions instanceof Array&&e.contextMenuItemsOptions&&e.contextMenuItemsOptions.length>0&&(this.contextMenuItemsOptions=e.contextMenuItemsOptions.map(Oe=>({...Oe,classname:"ol-context-menu-custom fr-text--md"}))),this.contextmenu=new R$1({defaultItems:!1,width:250,items:Te})}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonPointInfoShow=this._createShowPointInfoPictoElement();e.appendChild(Te);var Oe=this.panelPointInfoContainer=this._createPointInfoPanelElement(),Be=this._createPointInfoPanelDivElement();Oe.appendChild(Be);var Ue=this.panelPointInfoEntriesContainer=this._createEntriesElement();Oe.appendChild(Ue);var He=this.panelPointInfoHeaderContainer=this._createPointInfoPanelHeaderElement(),We=this._createPointInfoPanelIconElement();He.appendChild(We);var Cn=this._createPointInfoPanelTitleElement();He.appendChild(Cn);var An=this.buttonPointInfoClose=this._createPointInfoPanelCloseElement();return He.appendChild(An),Be.appendChild(He),e.appendChild(Oe),logger$1.log(e),e}addEventsListeners(){this.contextmenu.on("open",e=>{e.this=this,this.onOpenContextMenu(e)}),this.contextmenu.on("close",e=>{e.this=this,this.onCloseContextMenu(e)})}removeEventsListeners(){}getAvailableContextMenuControls(){var e=[{text:"Adresse / Coordonnes",classname:"ol-context-menu-custom fr-text--md",callback:this.displayAdressAndCoordinate.bind(this),control_CLASSNAME:"ContextMenu"},{text:"Itinraire depuis ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineStartPoint.bind(this),control_CLASSNAME:"Route"},{text:"Itinraire vers ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineEndPoint.bind(this),control_CLASSNAME:"Route"},{text:"Isochrone -  proximit",classname:"ol-context-menu-custom fr-text--md",callback:this.computeIsochrone.bind(this),control_CLASSNAME:"Isocurve"},{text:"Ajouter des cartes / donnes",classname:"ol-context-menu-custom fr-text--md",callback:this.openCatalogue.bind(this),control_CLASSNAME:"Catalog"},"separator",{text:"Afficher la lgende",classname:"ol-context-menu-custom fr-text--md",callback:this.displayLegend.bind(this),control_CLASSNAME:"Legends"}],Te=this.getMap(),Oe=[];Te&&(Oe=Te.getControls().getArray());var Be=e.filter(Ue=>{if(Oe.filter(We=>We.CLASSNAME&&We.CLASSNAME==Ue.control_CLASSNAME).length>0||Ue=="separator")return Ue});return Array.prototype.push.apply(Be,this.contextMenuItemsOptions),Be}defineStartPoint(e){let Te=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[0]=Te,Oe.setData({points:this.itiPoints})}defineEndPoint(e){let Te=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[6]=Te,Oe.setData({points:this.itiPoints})}to4326(e){return transform$1([parseFloat(e[0]),parseFloat(e[1])],"EPSG:3857","EPSG:4326")}computeIsochrone(e){var Te=this.getMap().getControls().getArray().filter(Ue=>Ue.CLASSNAME=="Isocurve")[0];Te._pictoIsoButton.click(),Te._pictoIsoButton.setAttribute("aria-pressed",!0);let Oe=this.to4326(e.coordinate);var Be=Te.getData();Be.point=Oe,Te.setData(Be)}displayLegend(e){var Te=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Legends")[0];Te.buttonLegendsShow.click(),Te.buttonLegendsShow.setAttribute("aria-pressed",!0)}openCatalogue(e){var Te=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Catalog")[0];Te.buttonCatalogShow.click(),Te.buttonCatalogShow.setAttribute("aria-pressed",!0)}displayAdressAndCoordinate(e){let Te=this.to4326(e.coordinate);this.panelPointInfoEntriesContainer.innerHTML="",this._marker.setPosition(fromLonLat(Te)),this.buttonPointInfoShow.click(),this.buttonPointInfoShow.setAttribute("aria-pressed",!0);var Oe=document.createElement("div");Oe.innerHTML=Te[0].toFixed(6)+", "+Te[1].toFixed(6);var Be=document.createElement("div"),Ue=document.createElement("div"),He=document.createElement("div");this.panelPointInfoEntriesContainer.appendChild(Oe),this.panelPointInfoEntriesContainer.appendChild(Be),this.panelPointInfoEntriesContainer.appendChild(Ue),this.panelPointInfoEntriesContainer.appendChild(He);var We={rawResponse:!1,scope:null,onSuccess:function(Sn){Sn.elevations.length>0&&Sn.elevations[0].z&&(He.innerHTML="Altitude : "+Sn.elevations[0].z+"m")},onFailure:function(Sn){},positions:[{lon:Te[0],lat:Te[1]}],outputFormat:"json"};Gp.Services.getAltitude(We);var Cn={onSuccess:function(Sn){Sn.locations.length>0&&(Ue.innerHTML="Parcelle : "+Sn.locations[0].placeAttributes.districtcode+" / "+Sn.locations[0].placeAttributes.section+" / "+Sn.locations[0].placeAttributes.number)},onFailure:function(Sn){},position:{lon:Te[0],lat:Te[1]},searchGeometry:{type:"Circle",coordinates:[Te[0],Te[1]],radius:100},index:"CadastralParcel",maximumResponses:1};Gp.Services.reverseGeocode(Cn);var An=async function(){let Sn={layer:"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune",attributes:["nom"]};const Tn=await OGCRequest.computeGenericGPFWFS(Sn.layer,Sn.attributes,Sn.around||0,Sn.geom_name||"geom",Sn.additional_cql||"",Sn.epsg||4326,Sn.get_geom||!1,Te[0],Te[1]);Tn.length&&(Be.innerHTML=Tn[0])},En={onSuccess:function(Sn){Sn.locations.length>0?Be.innerHTML=Sn.locations[0].placeAttributes.label:An()},onFailure:function(Sn){An()},position:{lon:Te[0],lat:Te[1]},searchGeometry:{type:"Circle",coordinates:[Te[0],Te[1]],radius:100},index:"StreetAddress",maximumResponses:1};Gp.Services.reverseGeocode(En)}onShowPointInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$1.trace(e);var Te=this.buttonPointInfoShow.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onClosePointInfoClick(e){logger$1.trace(e),this._marker.setPosition(void 0)}onCloseContextMenu(e){e.target.clear()}onOpenContextMenu(e){var Te=()=>{e.this.controlList=[];var Be=e.this.getMap().getControls().getArray().filter(Ue=>Ue.CLASSNAME=="Route");Be.length>0&&Be[0].on("route:newresults",()=>{e.this.itiPoints=new Array(7)})},Oe=e.this.getAvailableContextMenuControls();e.target.clear(),e.target.extend(Oe),Te()}};Object.assign(ContextMenu.prototype,ContextMenuDOM);Object.assign(ContextMenu.prototype,ContextMenu);Object.assign(ContextMenu.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ContextMenu=ContextMenu);function useUrlParams(ke){var e={},Te={};if(ke){const Ue=new URL(ke),He=new URLSearchParams(Ue.search);for(const[We,Cn]of He.entries())Te[We]=Cn}else Te=useUrlSearchParams("history");if(Te){const Ue=Object.keys(Te);for(let He=0;He<Ue.length;He++){const We=Ue[He];switch(We){case"c":var Oe=Te[We].split(",");e.lon=Oe[0],e.lat=Oe[1];var Be=fromLonLat(Oe);e.x=Be[0],e.y=Be[1],e.center=[e.lon,e.lat];break;case"l":e.layers=Te[We];break;case"w":e.controls=Te[We];break;case"z":e.zoom=parseInt(Te[We],10);break}}}return e}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!0,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!0,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0},ContextMenu:{id:"ContextMenu",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var ke=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&ke.push(useControls[e].id);return ke}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se reprer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Lgendes",id:"legends",name:useControls.Legends.id,hint:"Lgendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein cran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein cran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnes",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimtrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimtrique",disabled:useControls.ElevationPath.disable},{label:"Importer des donnes",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de donnes",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplmentaires non affichs",disabled:useControls.ControlList.disable},{label:"Menu contextuel",id:"contextMenu",name:useControls.ContextMenu.id,hint:"Menu contextuel au clic droit sur la carte",disabled:useControls.ContextMenu.disable}].filter(ke=>Object.keys(useControls).includes(ke.name)).filter(ke=>!ke.disabled)}function useControlsExtensionPosition(){return{shareOptions:"top-left",printOptions:"top-right",territoriesOptions:"bottom-left",layerSwitcherOptions:"top-right",legendsOptions:"top-right",getFeatureInfoOptions:"bottom-left",overviewMapOptions:"bottom-left",zoomOptions:"bottom-right",controlListOptions:"top-right",isocurveOptions:"top-right",routeOptions:"top-right",reverseGeocodeOptions:"top-right",fullscreenOptions:"bottom-right",measureLengthOptions:"top-right",measureAreaOptions:"top-right",measureAzimuthOptions:"top-right",elevationPathOptions:"top-right",layerImportOptions:"top-right",mousePositionOptions:"top-right",drawingOptions:"top-right"}}function useControlsPosition(){let ke=[],e=[];return useControlsExtensionPosition().shareOptions.includes("left")&&ke.push(useControls.Share.id),useControlsExtensionPosition().shareOptions.includes("right")&&e.push(useControls.Share.id),useControlsExtensionPosition().printOptions.includes("left")&&ke.push(useControls.Print.id),useControlsExtensionPosition().printOptions.includes("right")&&e.push(useControls.Print.id),useControlsExtensionPosition().layerSwitcherOptions.includes("left")&&ke.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().layerSwitcherOptions.includes("right")&&e.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().legendsOptions.includes("left")&&ke.push(useControls.Legends.id),useControlsExtensionPosition().legendsOptions.includes("right")&&e.push(useControls.Legends.id),useControlsExtensionPosition().routeOptions.includes("left")&&ke.push(useControls.Route.id),useControlsExtensionPosition().routeOptions.includes("right")&&e.push(useControls.Route.id),useControlsExtensionPosition().isocurveOptions.includes("left")&&ke.push(useControls.Isocurve.id),useControlsExtensionPosition().isocurveOptions.includes("right")&&e.push(useControls.Isocurve.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("left")&&ke.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("right")&&e.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().drawingOptions.includes("left")&&ke.push(useControls.Drawing.id),useControlsExtensionPosition().drawingOptions.includes("right")&&e.push(useControls.Drawing.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("left")&&ke.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("right")&&e.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().territoriesOptions.includes("left")&&ke.push(useControls.Territories.id),useControlsExtensionPosition().territoriesOptions.includes("right")&&e.push(useControls.Territories.id),useControlsExtensionPosition().measureLengthOptions.includes("left")&&ke.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureLengthOptions.includes("right")&&e.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureAreaOptions.includes("left")&&ke.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAreaOptions.includes("right")&&e.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAzimuthOptions.includes("left")&&ke.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().measureAzimuthOptions.includes("right")&&e.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().mousePositionOptions.includes("left")&&ke.push(useControls.MousePosition.id),useControlsExtensionPosition().mousePositionOptions.includes("right")&&e.push(useControls.MousePosition.id),useControlsExtensionPosition().elevationPathOptions.includes("left")&&ke.push(useControls.ElevationPath.id),useControlsExtensionPosition().elevationPathOptions.includes("right")&&e.push(useControls.ElevationPath.id),useControlsExtensionPosition().layerImportOptions.includes("left")&&ke.push(useControls.LayerImport.id),useControlsExtensionPosition().layerImportOptions.includes("right")&&e.push(useControls.LayerImport.id),useControlsExtensionPosition().controlListOptions.includes("left")&&ke.push(useControls.ControlList.id),useControlsExtensionPosition().controlListOptions.includes("right")&&e.push(useControls.ControlList.id),{left:ke,right:e}}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=ke=>NAMESPACE+"."+ke,useMapStore=defineStore("map",()=>{const ke=ref({});var e=useUrlParams(),Te=DEFAULT.CONTROLS.split(",");for(const sr in e)if(Object.prototype.hasOwnProperty.call(e,sr)){if(sr==="controls"){var Oe=e[sr].split(",");Te.forEach(function(vr){Oe.includes(vr)||(e[sr]=e[sr]+","+vr)})}const dr=e[sr];localStorage.setItem(ns(sr),dr)}var Be=useStorage(ns("zoom"),DEFAULT.ZOOM),Ue=useStorage(ns("x"),DEFAULT.X),He=useStorage(ns("y"),DEFAULT.Y),We=useStorage(ns("lon"),DEFAULT.LON),Cn=useStorage(ns("lat"),DEFAULT.LAT),An=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),En=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),Sn=ref();function Tn(){return Sn.value}function Ln(sr){Sn.value=sr}var Bn=computed(()=>{var sr=location.pathname.slice(-1),dr=sr==="/"?location.pathname.slice(0,-1):location.pathname,vr=location.origin+dr.replace("/embed","");return`${vr}?c=${ni.value}&z=${Math.round(Be.value)}&l=${ti.value}&w=${ai.value}&permalink=yes`}),ei=computed(()=>{var sr=location.pathname.slice(-1),dr=sr==="/"?location.pathname.slice(0,-1):location.pathname,vr=location.origin+(dr.includes("/embed")?dr:dr+"/embed");return`${vr}?c=${ni.value}&z=${Math.round(Be.value)}&l=${ti.value}&permalink=yes`}),ni=computed(()=>[We.value,Cn.value]),ti=useStorage(ns("layers"),DEFAULT.LAYERS);if(!ti.value){var ri=DEFAULT.LAYERS.split(",").filter(function(sr){return!!sr});for(let sr=0;sr<ri.length;sr++){var oi=ri[sr].replace(/\(.*\)/,"");oi&&Fi(oi)}}var ai=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!ai.value){var ci=DEFAULT.CONTROLS.split(",").filter(function(sr){return!!sr});for(let sr=0;sr<ci.length;sr++)Li(ci[sr])}localStorage.setItem(ns("center"),ni.value),localStorage.setItem(ns("permalink"),Bn.value),localStorage.setItem(ns("permalinkShare"),ei.value),watch(Be,()=>{localStorage.setItem(ns("zoom"),Math.round(Be.value))}),watch(Ue,()=>{localStorage.setItem(ns("x"),Ue.value)}),watch(He,()=>{localStorage.setItem(ns("y"),He.value)}),watch(We,()=>{localStorage.setItem(ns("lon"),We.value)}),watch(Cn,()=>{localStorage.setItem(ns("lat"),Cn.value)}),watch(ti,()=>{localStorage.setItem(ns("layers"),ti.value.toString())}),watch(Bn,()=>{localStorage.setItem(ns("permalink"),Bn.value.toString())}),watch(ei,()=>{localStorage.setItem(ns("permalinkShare"),ei.value.toString())}),watch(ni,()=>{localStorage.setItem(ns("center"),ni.value.toString())}),watch(An,()=>{localStorage.setItem(ns("firstVisit"),An.value)}),watch(En,()=>{localStorage.setItem(ns("noInformation"),En.value)}),watch(ai,()=>{localStorage.setItem(ns("controls"),ai.value.toString())});function Pi(){return ke.value}function vi(sr){ke.value=sr}function pi(){return ti.value.split(",").map(function(sr){const dr=/\(.*\)/gm;return sr.replace(dr,"")}).filter(sr=>sr!="")}function Mi(){ti.value=""}function Fi(sr){if(sr&&!pi().includes(sr)){var dr=ti.value===""?[]:ti.value.split(",");dr.push(sr+"(1;1;0)"),ti.value=dr.toString()}}function fi(sr){const dr=pi().indexOf(sr);if(dr!==-1){var vr=ti.value.split(",");vr.splice(dr,1),ti.value=vr.toString()}}function ui(sr,dr){const vr=pi().indexOf(sr);if(vr!==-1){var hr=ti.value.split(","),mr=hr[vr],_r=mr.substring(mr.indexOf("(")+1,mr.indexOf(")")),Ar=_r.split(";");for(const Vr in dr)if(Object.prototype.hasOwnProperty.call(dr,Vr)){const Gr=dr[Vr];Vr==="opacity"&&(Ar[0]=Gr),Vr==="visible"&&(Ar[1]=+Gr),Vr==="gray"&&(Ar[2]=+Gr)}ti.value=ti.value.replace(hr[vr],sr+"("+Ar.join(";")+")")}}function Oi(sr){if(sr){var dr=[];for(let hr=0;hr<sr.length;hr++){const mr=sr[hr],_r=pi().indexOf(mr);if(_r!==-1){var vr=ti.value.split(",")[_r];dr.push(vr)}}ti.value=dr.join(",")}}function Ni(sr){const dr=pi().indexOf(sr);if(dr!==-1){var vr=ti.value.split(","),hr=vr[dr],mr=hr.substring(hr.indexOf("(")+1,hr.indexOf(")")),_r=mr.split(";");return{opacity:Number(_r[0]),visible:!!Number(_r[1]),gray:!!Number(_r[2])}}}function nr(sr){}function er(sr){}function cr(sr,dr){}function ar(sr){}function pr(sr){}function rr(){return ai.value.split(",").filter(function(sr){return!!sr})}function br(){ai.value=""}function Li(sr){if(!rr().includes(sr)){var dr=ai.value===""?[]:ai.value.split(",");dr.push(sr),ai.value=dr.toString()}}function ur(sr){const dr=rr().indexOf(sr);if(dr!==-1){var vr=ai.value.split(",");vr.splice(dr,1),ai.value=vr.toString()}}return{map:ke,layers:ti,controls:ai,zoom:Be,center:ni,x:Ue,y:He,lon:We,lat:Cn,firstVisit:An,noInformation:En,permalink:Bn,permalinkShare:ei,menuCatalogueButton:Sn,getMap:Pi,setMap:vi,getmenuCatalogueButton:Tn,setmenuCatalogueButton:Ln,getLayers:pi,cleanLayers:Mi,addLayer:Fi,removeLayer:fi,updateLayerProperty:ui,updateLayerPosition:Oi,getLayerProperty:Ni,addBookmark:nr,removeBookmark:er,updateBookmarkProperty:cr,updateBookmarkPosition:ar,getBookmarkProperty:pr,getControls:rr,cleanControls:br,addControl:Li,removeControl:ur}}),mainMap="mainMap",printMap="printMap",_hoisted_1$j=["id"],__default__$u={name:"Map"},_sfc_main$U=Object.assign(__default__$u,{props:{mapId:String},setup(ke,{expose:e}){const Te=useMapStore(),Oe=ke,Be=ref(null),Ue=new Map$1({target:Oe.mapId,controls:[]});Ue.on("loadstart",function(){Ue.getTargetElement().classList.add("spinner")}),Ue.on("loadend",function(){Ue.getTargetElement().classList.remove("spinner")}),provide(Oe.mapId,Ue),onMounted(()=>{CRS.load(),Ue.setTarget(Be.value);const Cn=Be.value.getElementsByTagName("canvas");Cn.length&&(Cn[0].tabIndex=0),Oe.mapId==mainMap&&Te.setMap(Ue)});const He=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&Be.value.focus()};return e({mapRef:Be,updateSize:()=>{Ue.updateSize()}}),(Cn,An)=>(openBlock(),createElementBlock("div",{id:ke.mapId,ref_key:"mapRef",ref:Be,tabindex:"0",onMouseover:He},[renderSlot(Cn.$slots,"default")],40,_hoisted_1$j))}}),__default__$t={name:"View"},_sfc_main$T=Object.assign(__default__$t,{props:{zoom:Number,center:Array,mapId:String},setup(ke){const e=useMapStore(),Te=ke,Oe=inject(Te.mapId),Be=new View({zoom:Te.zoom,center:fromLonLat(Te.center)});return Be.on("change:center",Ue=>{if(Te.mapId==mainMap){e.x=Ue.target.getCenter()[0],e.y=Ue.target.getCenter()[1];var He=toLonLat(Ue.target.getCenter());e.lon=He[0],e.lat=He[1]}}),Be.on("change:resolution",Ue=>{e.zoom=Be.getZoom()}),onMounted(()=>{Oe&&Oe.setView(Be)}),(Ue,He)=>null}}),_sfc_main$S={__name:"FullScreen",props:{mapId:String,visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&Te.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility?Te.addControl(Oe.value):Te.removeControl(Oe.value)}),(Be,Ue)=>null}},useDataStore=defineStore("data",()=>{const ke=ref({}),e=ref([]),Te=ref([]),Oe=ref({}),Be=ref({}),Ue=ref({}),He=ref({}),We=ref([]),Cn=ref([]),An=ref(!1),En=ref(""),Sn="WMTS,WMS,TMS",Tn="IGNF:LAMB93,EPSG:2154";async function Ln(){try{const br="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/fullConfig.json",Li="https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/edito.json",ur="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/ign_scan_wsConfig.json",sr=await fetch(Li),dr=await fetch(br),vr=await fetch(ur),hr=await dr.json(),mr=await sr.json(),_r=await vr.json();var pr=[],rr=[];const Ar=Object.fromEntries(Object.keys(mr.layers).map(Gr=>{if(hr.layers.hasOwnProperty(Gr)||_r.layers.hasOwnProperty(Gr)){let Hi=mr.layers[Gr];return mr.layers[Gr].hasOwnProperty("thematic")&&mr.layers[Gr].thematic.length>0&&(typeof mr.layers[Gr].thematic=="string"&&(Hi.thematic=[mr.layers[Gr].thematic]),Array.isArray(mr.layers[Gr].thematic)&&pr.push(...mr.layers[Gr].thematic)),mr.layers[Gr].hasOwnProperty("producer")&&mr.layers[Gr].producer.length>0&&(typeof mr.layers[Gr].producer=="string"&&(Hi.producer=[mr.layers[Gr].producer]),Array.isArray(mr.layers[Gr].producer)&&rr.push(...mr.layers[Gr].producer)),[Gr,{...hr.layers[Gr],..._r.layers[Gr],...Hi}]}else return}).filter(Gr=>Gr)),Vr={...hr.layers,..._r.layers,...Ar};return Object.keys(Vr).map(Gr=>{if(Sn.split(",").some(Hi=>Vr[Gr].serviceParams.id.includes(Hi))&&!Tn.split(",").some(Hi=>Vr[Gr].defaultProjection.includes(Hi))){Vr[Gr].key=Gr;let Hi={};return Hi[Gr]=Vr[Gr],Hi[Gr].hasOwnProperty("thematic")||(Hi[Gr].thematic=["Autres"]),Hi[Gr].hasOwnProperty("producer")||(Hi[Gr].producer=[]),Hi}else delete Vr[Gr]}),We.value=mr.territories,He.value=mr.contacts,ke.value=mr.informations,Cn.value=mr.featured||[],Oe.value=Vr,Be.value.apiKeys={...hr.generalOptions.apiKeys,..._r.generalOptions.apiKeys},Ue.value=hr.tileMatrixSets,e.value=[...new Set(pr)].sort((Gr,Hi)=>Gr.localeCompare(Hi,"fr",{sensitivity:"base"})),e.value.push("Autres"),e.value=e.value.map(Gr=>[Gr,ri(Oe.value,Gr)]),Te.value=[...new Set(rr)].sort((Gr,Hi)=>Gr.localeCompare(Hi,"fr",{sensitivity:"base"})),Te.value=Te.value.map(Gr=>[Gr,ai(Oe.value,Gr)]),this.isLoaded=!0,Vr}catch(br){console.log(br),this.isLoaded=!1,En.value=br.message}}function Bn(){return We.value}function ei(){return He.value}function ni(){return ke.value}function ti(){return e}function ri(pr,rr){return Object.keys(pr).filter(br=>pr[br].thematic.includes(rr)).map(br=>(pr[br],pr[br])).sort((br,Li)=>br.title.localeCompare(Li.title,"fr",{sensitivity:"base"}))}function oi(){return Te}function ai(pr,rr){return Object.keys(pr).filter(br=>pr[br].producer.includes(rr)).map(br=>(pr[br],pr[br])).sort((br,Li)=>br.title.localeCompare(Li.title,"fr",{sensitivity:"base"}))}function ci(){return Cn.value}function Pi(){return Oe.value}function vi(){return Object.fromEntries(Object.entries(Oe.value).map(([pr,rr])=>[rr.name,rr.serviceParams.id.split(":")[1]]))}function pi(pr,rr){for(const br in Oe.value)if(Object.hasOwnProperty.call(Oe.value,br)){const Li=Oe.value[br];if(Li.name===pr&&Li.serviceParams.id.split(":")[1]===rr)return Li.name+"$GEOPORTAIL:"+Li.serviceParams.id}}function Mi(pr,rr){const br=this.getLayerIdByName(pr,rr);return this.getLayerByID(br)}function Fi(pr){return Oe.value[pr]}function fi(pr){return Object.values(Oe.value).filter(rr=>{if(pr&&rr.title==pr)return rr})}function ui(pr){var rr=[],br=Be.value.apiKeys;for(var Li in br){var ur=br[Li];ur.forEach(function(sr){sr===pr&&rr.push(Li)})}return rr}function Oi(pr,rr){var br=null;if((rr==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var Li=this.getLayerIdByName(pr,rr);br=this.getLayerParamsByID(Li)}return br}function Ni(pr){var rr=null;if(pr){rr={};var br=this.getLayerByID(pr),Li=this.getLayerKeysByID(pr);if(Li.length===0)return;for(var ur=0;ur<Li.length;ur++)br.serviceParams.serverUrl[Li[ur]]&&(rr.url=br.serviceParams.serverUrl[Li[ur]]);if(/\/v\//.test(rr.url)?rr.styles=" ":rr.styles=br.styles[0].name,rr.version=br.serviceParams.version,rr.format=br.formats[0].name,rr.projection=br.defaultProjection,rr.minScale=br.globalConstraint.minScaleDenominator,rr.maxScale=br.globalConstraint.maxScaleDenominator,rr.extent=br.globalConstraint.bbox,rr.legends=br.legends,rr.title=br.title,rr.description=br.description,br.wmtsOptions){rr.tileMatrixSetLimits=br.wmtsOptions.tileMatrixSetLimits;var sr=br.wmtsOptions.tileMatrixSetLink;if(sr){rr.TMSLink=sr;var dr=this.getTileMatrixSetByID(sr);rr.matrixIds=Object.keys(dr.tileMatrices),rr.tileMatrices=dr.tileMatrices,rr.nativeResolutions=dr.nativeResolutions}}}return rr}function nr(pr){var rr=null;if(pr){var br=this.getLayerByID(pr);rr={},rr.projection=br.defaultProjection,rr.minScale=br.globalConstraint.minScaleDenominator,rr.maxScale=br.globalConstraint.maxScaleDenominator,rr.extent=br.globalConstraint.bbox}return rr}function er(pr,rr){var br=this.getLayerIdByName(pr,rr);return this.getGlobalConstraintsByID(br)}function cr(){return Ue.value}function ar(pr){return Ue.value[pr]}return{error:En,isLoaded:An,filterProjections:Tn,filterServices:Sn,fetchData:Ln,getTerritories:Bn,getContacts:ei,getInformations:ni,getThematics:ti,getProducers:oi,getFeatured:ci,getLayers:Pi,getLayersSignatures:vi,getLayerKeysByID:ui,getLayerIdByName:pi,getLayerByName:Mi,getLayerByID:Fi,getLayerByTitle:fi,getTileMatrixSets:cr,getTileMatrixSetByID:ar,getLayerParamsByName:Oi,getLayerParamsByID:Ni,getGlobalConstraintsByID:nr,getGlobalConstraintsByName:er}});function useActionButtonEulerian(ke){ke.setAttribute("data-fr-analytics-action",ke.title),ke.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$R={__name:"ReverseGeocode",props:{mapId:String,visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(ke){const e=ke,Te=dist.useLogger();useDataStore();const Oe=inject(e.mapId),Be=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(Be.value),Be.value.on("reverseGeocode:onclickresult",Ue),Be.value.on("reverseGeocode:compute",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(Be.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(Be.value),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(We)}});const Ue=We=>{Te.debug(We)},He=We=>{Te.debug(We)};return(We,Cn)=>null}},_sfc_main$Q={__name:"SearchEngine",props:{mapId:String,visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=useMapStore(),Be=useDataStore(),Ue=inject(e.mapId),He=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(Ue.addControl(He.value),He.value.on("searchengine:search:click",We),He.value.on("searchengine:autocomplete:click",Cn),He.value.on("searchengine:geocode:click",An),He.value.on("searchengine:coordinates:click",En),He.value.on("searchengine:geolocation:click",Sn))}),onBeforeUpdate(()=>{e.visibility||Ue.removeControl(He.value)}),onUpdated(()=>{e.visibility&&Ue.addControl(He.value)}),onUnmounted(()=>{});const We=Tn=>{var Ln=Be.getLayerIdByName(Tn.suggest.name,Tn.suggest.service);Oe.addLayer(Ln),Te.debug("onClickSearch",Ln)},Cn=Tn=>{},An=Tn=>{},En=Tn=>{},Sn=Tn=>{};return(Tn,Ln)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const Te=document.createElement("div");Te.style.pointerEvents="none",super({element:Te,render:e.render,target:e.target}),this.on,this.once,this.un;const Oe=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=Oe+"-inner",this.element.className=Oe+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const Te=e.center,Oe=e.projection,Be=this.getUnits(),Ue=Be=="degrees"?"degrees":"m";let He=getPointResolution(Oe,e.resolution,Te,Ue);const We=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,Cn=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let An=We*He,En="";if(Be=="degrees"){const oi=METERS_PER_UNIT$1.degrees;An*=oi,An<oi/60?(En="",He*=3600):An<oi?(En="",He*=60):En=""}else if(Be=="imperial")An<.9144?(En="in",He/=.0254):An<1609.344?(En="ft",He/=.3048):(En="mi",He/=1609.344);else if(Be=="nautical")He/=1852,En="NM";else if(Be=="metric")An<1e-6?(En="nm",He*=1e9):An<.001?(En="m",He*=1e6):An<1?(En="mm",He*=1e3):An<1e3?En="m":(En="km",He/=1e3);else if(Be=="us")An<.9144?(En="in",He*=39.37):An<1609.344?(En="ft",He/=.30480061):(En="mi",He/=1609.3472);else throw new Error("Invalid units");let Sn=3*Math.floor(Math.log(We*He)/Math.log(10)),Tn,Ln,Bn,ei=0,ni,ti;for(;;){Bn=Math.floor(Sn/3);const oi=Math.pow(10,Bn);if(Tn=LEADING_DIGITS[(Sn%3+3)%3]*oi,Ln=Math.round(Tn/He),isNaN(Ln)){this.element.style.display="none",this.renderedVisible_=!1;return}if(Cn!==void 0&&Ln>=Cn){Tn=ei,Ln=ni,Bn=ti;break}else if(Ln>=We)break;ei=Tn,ni=Ln,ti=Bn,++Sn}const ri=this.scaleBar_?this.createScaleBar(Ln,Tn,En):Tn.toFixed(Bn<0?-Bn:0)+" "+En;this.renderedHTML_!=ri&&(this.innerElement_.innerHTML=ri,this.renderedHTML_=ri),this.renderedWidth_!=Ln&&(this.innerElement_.style.width=Ln+"px",this.renderedWidth_=Ln),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,Te,Oe){const Be=this.getScaleForResolution(),Ue=Be<1?Math.round(1/Be).toLocaleString()+" : 1":"1 : "+Math.round(Be).toLocaleString(),He=this.scaleBarSteps_,We=e/He,Cn=[this.createMarker("absolute")];for(let En=0;En<He;++En){const Sn=En%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";Cn.push(`<div><div class="ol-scale-singlebar ${Sn}" style="width: ${We}px;"></div>`+this.createMarker("relative")+(En%2===0||He===2?this.createStepText(En,e,!1,Te,Oe):"")+"</div>")}return Cn.push(this.createStepText(He,e,!0,Te,Oe)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Ue+"</div>":"")+Cn.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,Te,Oe,Be,Ue){const We=(e===0?0:Math.round(Be/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Ue),Cn=e===0?-3:Te/this.scaleBarSteps_*-1,An=e===0?0:Te/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${Cn}px;text-align: ${e===0?"left":"center"};min-width: ${An}px;left: ${Oe?Te+"px":"unset"};">`+We+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),Te=this.dpi_||DEFAULT_DPI,Oe=1e3/25.4;return e*Oe*Te}render(e){const Te=e.frameState;Te?this.viewState_=Te.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$P={__name:"ScaleLine",props:{mapId:String,visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&Te.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(Oe.value)}),onUpdated(()=>{e.visibility&&Te.addControl(Oe.value)}),(Be,Ue)=>null}},_sfc_main$O={__name:"OverviewMap",props:{mapId:String,visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=inject(e.mapId),Be=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Ue=useMatchMedia("SM");watch(Ue,()=>{if(e.visibility&&!Ue.value){if(Oe.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}else Oe.removeControl(Be.value)}),onMounted(()=>{if(e.visibility&&!Ue.value&&(Oe.addControl(Be.value),Be.value.on("overviewmap:toggle",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ue.value){if(Oe.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}else Oe.removeControl(Be.value)});function He(We){Te.debug(We)}return(We,Cn)=>null}},_sfc_main$N={__name:"Zoom",props:{mapId:String,visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=inject(e.mapId),Be=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(Oe.addControl(Be.value),Be.value.on("zoom:in",Ue),Be.value.on("zoom:out",He))}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(Be.value)}),onUpdated(()=>{e.visibility&&Oe.addControl(Be.value)});function Ue(We){Te.debug(We)}function He(We){Te.debug(We)}return(We,Cn)=>null}},_sfc_main$M={__name:"LayerSwitcher",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=useMapStore(),Be=useDataStore(),Ue=inject("emitter"),He=inject(e.mapId),We=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(He.addControl(We.value),e.analytic){var ei=We.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(ei)}We.value.on("layerswitcher:add",Cn),We.value.on("layerswitcher:remove",An),We.value.on("layerswitcher:edit",Bn),We.value.on("layerswitcher:extent",En),We.value.on("layerswitcher:change:opacity",Sn),We.value.on("layerswitcher:change:visibility",Tn),We.value.on("layerswitcher:change:position",Ln)}}),onBeforeUpdate(()=>{if(!e.visibility&&(He.removeControl(We.value),e.analytic)){var ei=We.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(ei)}}),onUpdated(()=>{e.visibility&&He.addControl(We.value)});const Cn=ei=>{Te.debug("onAddLayer",ei);var ni=ei.layer,ti=null;if(ni.name&&ni.service)ti=Be.getLayerIdByName(ni.name,ni.service),ti&&Oe.addLayer(ti);else{var ri=ni.layer.gpResultLayerId;ri&&(ni.layer.gpResultLayerDiv=ni.div,ti=ri.split(":").pop(),ri.startsWith("bookmark")&&ti&&Oe.addBookmark(ti))}Te.debug("onAddLayer",ti),ti?push$1.success({title:t.layerswitcher.title,message:t.layerswitcher.add_success}):push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.add_failed})},An=ei=>{Te.debug("onRemoveLayer",ei);var ni=ei.layer,ti=null;if(ni.name&&ni.service)ti=Be.getLayerIdByName(ni.name,ni.service),ti&&Oe.removeLayer(ti);else{var ri=ni.layer.gpResultLayerId;ri&&(ti=ri.split(":").pop(),ri.startsWith("bookmark")&&ti&&Oe.removeBookmark(ti))}Te.debug("onRemoveLayer",ti),ti?push$1.success({title:t.layerswitcher.title,message:t.layerswitcher.remove_success}):push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.remove_failed})},En=ei=>{Te.debug("onZoomToExtentLayer",ei);var ni=ei.layer;if(ei.error){var ti=Be.getGlobalConstraintsByName(ni.name,ni.service);if(ti){var ri=He.getView(),oi=ri.getProjection(),ai=[ti.extent.left,ti.extent.bottom,ti.extent.right,ti.extent.top],ci=ti.crs;ci||(ci="EPSG:4326");var Pi=transformExtent(ai,ci,oi);Pi&&ri.fit(Pi)}}},Sn=ei=>{Te.debug("onChangeOpacityLayer",ei);var ni=ei.layer,ti=null;if(ni.name&&ni.service)ti=Be.getLayerIdByName(ni.name,ni.service),ti&&Oe.updateLayerProperty(ti,{opacity:ei.opacity});else{var ri=ni.layer.gpResultLayerId;ri&&ri.startsWith("bookmark")&&(ti=ri.split(":").pop(),ti&&Oe.updateBookmarkProperty(ti,{opacity:ei.opacity}))}},Tn=ei=>{Te.debug("onChangeVisibilityLayer",ei);var ni=ei.layer,ti=null;if(ni.name&&ni.service)ti=Be.getLayerIdByName(ni.name,ni.service),ti&&Oe.updateLayerProperty(ti,{visible:ei.visibility});else{var ri=ni.layer.gpResultLayerId;ri&&ri.startsWith("bookmark")&&(ti=ri.split(":").pop(),ti&&Oe.updateBookmarkProperty(ti,{visible:ei.visibility}))}},Ln=ei=>{Te.debug("onChangePositionLayer",ei),Oe.updateLayerPosition(ei.layers.reverse().map(ni=>{if(ni.name&&ni.service)return Be.getLayerIdByName(ni.name,ni.service)}))},Bn=ei=>{Te.debug("onClickEditLayer",ei);var ni=ei.layer.gpResultLayerId.toLowerCase();if(ni&&(ni.toLowerCase().includes("drawing")||ni.toLowerCase().includes("layerimport:kml")||ni.toLowerCase().includes("layerimport:gpx")||ni.toLowerCase().includes("layerimport:geojson")||ni.toLowerCase().includes("bookmark:drawing-kml")||ni.toLowerCase().includes("bookmark:import-kml")||ni.toLowerCase().includes("bookmark:import-gpx")||ni.toLowerCase().includes("bookmark:import-geojson"))){Ue.dispatchEvent("vector:edit:clicked",ei);return}push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.failed_not_yet_implemented})};return(ei,ni)=>null}},_sfc_main$L={__name:"Legends",props:{mapId:String,visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(Oe.value),e.analytic){var Be=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(Oe.value)}),(Be,Ue)=>null}},_sfc_main$K={__name:"Drawing",props:{mapId:String,visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(ke){const e=inject("emitter");var Te=inject("services");const Oe=useMapStore(),Be=dist.useLogger(),Ue=ke,He=inject(Ue.mapId),We=ref(new Drawing(Ue.drawingOptions)),Cn=ref(new ButtonExport({title:"Exporter",kind:"secondary",download:!0,name:"Mon croquis",description:"",control:We.value,menu:!0,menuOptions:{outside:!0,above:!0,selectFormat:!1,labelDesc:!1},direction:"column",format:"kml",icons:{menu:"",button:"export"}})),An=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,name:"Mon croquis",description:"",control:We.value,menu:!1,format:"kml",icons:{menu:"",button:"save"}}));onMounted(()=>{if(Ue.visibility){if(He.addControl(We.value),He.addControl(Cn.value),He.addControl(An.value),Ue.analytic){var ei=We.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ei)}An.value.on("button:clicked",Sn),Cn.value.on("button:clicked",Bn),We.value.on("change:collapsed",En)}}),onBeforeUpdate(()=>{if(Ue.visibility){if(He.addControl(We.value),He.addControl(Cn.value),He.addControl(An.value),Ue.analytic){var ei=We.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ei)}An.value.on("button:clicked",Sn),Cn.value.on("button:clicked",Bn),We.value.on("change:collapsed",En)}else He.removeControl(An.value),He.removeControl(We.value),He.removeControl(Cn.value)}),e.addEventListener("vector:edit:clicked",ei=>{We.value&&(We.value.setCollapsed(!1),We.value.setLayer(ei.layer));var ni=ei.layer.gpResultLayerId.toLowerCase();if(ni){var ti;ni.includes("drawing")||ni.includes("kml")?ti="kml":ni.includes("geojson")?ti="geojson":ni.includes("gpx")?ti="gpx":ti="kml",Cn.value.setFormat(ti),An.value.setFormat(ti)}});const En=ei=>{Be.debug(ei),ei.target.collapsed&&We.value.setLayer()},Sn=ei=>{if(Be.debug(ei),!Te.authenticated){push$1.warning({title:t.auth.title,message:t.auth.not_authentificated});return}var ni=ei.layer.gpResultLayerId.toLowerCase(),ti=ni.split(":")[0],ri={layer:ei.layer,content:ei.content,name:Cn.value.inputName.value||ei.name,description:ei.description,format:ei.format.toLowerCase(),type:ni.split(":")[0]},oi;if(ti!=="bookmark")oi=Tn(ri);else{var ai=ni.split(":")[2],ti=ni.split(":")[1].split("-")[0];ri.type=ti,ri.uuid=ai,oi=Ln(ri)}oi.then(()=>{push$1.success({title:t.drawing.title,message:t.drawing.save_success})}).catch(ci=>{console.error(ci),push$1.error({title:t.drawing.title,message:t.drawing.save_failed})})},Tn=async ei=>{try{const oi=await Te.setDocument(ei);var ni=oi.uuid,ti=oi.action;if(Oe.addBookmark(ni),ei.layer.gpResultLayerId&&(ei.layer.gpResultLayerId=`bookmark:${ei.type}-${ei.format.toLowerCase()}:${ni}`),ei.layer.gpResultLayerDiv){var ri=ei.layer.gpResultLayerDiv.querySelector("label[id^=GPname_ID_]");ri&&(ri.innerHTML=ei.name,ri.title=ei.description)}e.dispatchEvent("document:saved",{uuid:ni,action:ti})}catch(oi){throw console.error(oi),oi}},Ln=async ei=>{try{const oi=await Te.updateGeometryDocument(ei);var ni=oi.uuid,ti=oi.action;if(ei.layer.gpResultLayerDiv){var ri=ei.layer.gpResultLayerDiv.querySelector("label[id^=GPname_ID_]");ri&&(ri.innerHTML=ei.name,ri.title=ei.description)}e.dispatchEvent("document:updated",{uuid:ni,action:ti})}catch(oi){throw console.error(oi),oi}},Bn=ei=>{};return(ei,ni)=>null}},_sfc_main$J={__name:"Isocurve",props:{mapId:String,visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(ke){const e=ke,Te=dist.useLogger();useDataStore();const Oe=inject(e.mapId),Be=ref(new Isocurve(e.isocurveOptions)),Ue=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,direction:"column",icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility){if(Oe.addControl(Be.value),Oe.addControl(Ue.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(En)}Be.value.on("isocurve:drawstart",He),Be.value.on("socurve:drawend",We),Be.value.on("isocurve:compute",Cn),Ue.value.on("button:clicked",An)}}),onBeforeUpdate(()=>{e.visibility||(Oe.removeControl(Be.value),Oe.removeControl(Ue.value))}),onUpdated(()=>{if(e.visibility){if(Oe.addControl(Be.value),Oe.addControl(Ue.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(En)}Be.value.on("isocurve:drawstart",He),Be.value.on("socurve:drawend",We),Be.value.on("isocurve:compute",Cn),Ue.value.on("button:clicked",An)}});const He=En=>{Te.debug(En)},We=En=>{Te.debug(En)},Cn=En=>{Te.debug(En)},An=En=>{Te.debug(En)};return(En,Sn)=>null}},_sfc_main$I={__name:"Route",props:{mapId:String,visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(ke){const e=ke,Te=dist.useLogger();useDataStore();const Oe=inject(e.mapId),Be=ref(new Route(e.routeOptions)),Ue=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,direction:"column",icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility&&(Oe.addControl(Be.value),Oe.addControl(Ue.value),Be.value.on("route:drawstart",He),Be.value.on("route:drawend",We),Be.value.on("route:compute",Cn),Ue.value.on("button:clicked",An),e.analytic)){var En=Be.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(En)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(Be.value)}),onUpdated(()=>{if(e.visibility){if(Oe.addControl(Be.value),Oe.addControl(Ue.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(En)}Be.value.on("route:drawstart",He),Be.value.on("route:drawend",We),Be.value.on("route:compute",Cn),Ue.value.on("button:clicked",An)}});const He=En=>{Te.debug(En)},We=En=>{Te.debug(En)},Cn=En=>{Te.debug(En)},An=En=>{Te.debug(En)};return(En,Sn)=>null}},_sfc_main$H={__name:"MeasureLength",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(Oe.value),e.analytic){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(Oe.value)}),(Be,Ue)=>null}},_sfc_main$G={__name:"MeasureArea",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(Oe.value),e.analytic){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(Oe.value)}),(Be,Ue)=>null}},_sfc_main$F={__name:"MeasureAzimuth",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(ke){const e=ke,Te=inject(e.mapId),Oe=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(Oe.value),e.analytic){var Be=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(Oe.value)}),(Be,Ue)=>null}},_sfc_main$E={__name:"MousePosition",props:{mapId:String,visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(ke){const e=ke;dist.useLogger();const Te=inject(e.mapId),Oe=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Be)}}),(Be,Ue)=>null}},_sfc_main$D={__name:"ElevationPath",props:{mapId:String,visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=inject(e.mapId),Be=ref(new ElevationPath(e.elevationPathOptions)),Ue=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility&&(Oe.addControl(Be.value),Oe.addControl(Ue.value),Be.value.on("elevationpath:drawstart",He),Be.value.on("elevationpath:drawend",We),Be.value.on("elevationpath:compute",Cn),Ue.value.on("button:clicked",An),e.analytic)){var En=Be.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(En)}}),onBeforeUpdate(()=>{e.visibility||(Oe.removeControl(Be.value),Oe.removeControl(Ue.value))}),onUpdated(()=>{if(e.visibility){if(Oe.addControl(Be.value),Oe.addControl(Ue.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(En)}Be.value.on("elevationpath:drawstart",He),Be.value.on("elevationpath:drawend",We),Be.value.on("elevationpath:compute",Cn),Ue.value.on("button:clicked",An)}});const He=En=>{Te.debug(En)},We=En=>{Te.debug(En)},Cn=En=>{Te.debug(En)},An=En=>{Te.debug(En)};return(En,Sn)=>null}},_sfc_main$C={__name:"Territories",props:{mapId:String,visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=useDataStore(),Be=inject(e.mapId),Ue=ref(new Territories(e.territoriesOptions));function He(){var Cn=Oe.getTerritories();for(let An=0;An<Cn.length;An++){const En=Cn[An];Ue.value.setTerritory(En)}}onMounted(()=>{if(e.visibility){if(He(),Be.addControl(Ue.value),e.analytic){var Cn=Ue.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Cn)}Ue.value.on("territories:change",We)}}),onBeforeUpdate(()=>{e.visibility||Be.removeControl(Ue.value)}),onUpdated(()=>{if(e.visibility){if(He(),Be.addControl(Ue.value),e.analytic){var Cn=Ue.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Cn)}Ue.value.on("territories:change",We)}});const We=Cn=>{Te.debug(Cn)};return(Cn,An)=>null}},_sfc_main$B={__name:"GetFeatureInfo",props:{mapId:String,visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=inject(e.mapId),Be=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Ue=useMatchMedia("SM");watch(Ue,()=>{if(e.visibility&&!Ue.value){if(Oe.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}else Oe.removeControl(Be.value)}),onMounted(()=>{if(e.visibility&&!Ue.value&&(Oe.addControl(Be.value),Be.value.on("GetFeatureInfo:toggle",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ue.value){if(Oe.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}else Oe.removeControl(Be.value)});function He(We){Te.debug(We)}return(We,Cn)=>null}},__default__$s={name:"LayerImport"},_sfc_main$A=Object.assign(__default__$s,{props:{mapId:String,visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(ke){const e=ke,Te=dist.useLogger(),Oe=inject(e.mapId),Be=ref(new LayerImport(e.layerImportOptions));inject("emitter").addEventListener("layerimport:open:clicked",En=>{Be.value&&Be.value.setCollapsed(!En.open)}),onMounted(()=>{if(e.visibility){if(Oe.addControl(Be.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(En)}Be.value.on("layerimport:vector:saved",He),Be.value.on("layerimport:service:saved",We),Be.value.on("layerimport:mapbox:saved",Cn),Be.value.on("layerimport:compute:saved",An)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(Be.value)}),onUpdated(()=>{if(e.visibility){if(Oe.addControl(Be.value),e.analytic){var En=Be.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(En)}Be.value.on("layerimport:vector:added",He),Be.value.on("layerimport:service:added",We),Be.value.on("layerimport:mapbox:added",Cn),Be.value.on("layerimport:compute:added",An)}});const He=En=>{Te.debug(En)},We=En=>{Te.debug(En)},Cn=En=>{Te.debug(En)},An=En=>{Te.debug(En)};return(En,Sn)=>null}}),selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$z={__name:"ControlList",props:{mapId:String,visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(ke){const e=ke;dist.useLogger();const Te=inject(e.mapId),Oe=ref(new ControlList(e.controlListOptions)),Be=useMatchMedia("SM"),Ue=useMatchMediaHeight("XS");return watch(Be,()=>{e.visibility&&!Be.value&&!Ue.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}),watch(Ue,()=>{e.visibility&&!Be.value&&!Ue.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(Te.removeControl(Oe.value),e.visibility){if(Te.addControl(Oe.value),e.analytic){var He=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}!Be.value&&!Ue.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var He=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(Te.addControl(Oe.value),e.analytic)){var He=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),(He,We)=>null}},_sfc_main$y={__name:"ContextMenu",props:{mapId:String,visibility:Boolean,analytic:Boolean,contextMenuOptions:Object},setup(ke){const e=useMatchMedia("SM"),Te=ke,Oe=inject(Te.mapId),Be=ref(new ContextMenu(Te.contextMenuOptions));return onMounted(()=>{Te.visibility&&!e.value&&Oe.addControl(Be.value)}),onBeforeUpdate(()=>{Te.visibility&&!e.value?Oe.addControl(Be.value):Oe.removeControl(Be.value)}),(Ue,He)=>null}},IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",__default__$r={name:"Controls"},_sfc_main$x=Object.assign(__default__$r,{props:{controlOptions:Array,mapId:String},setup(ke){LoggerByDefault.enableAll();const e=ke,Te=useMapStore(),Oe=useDataStore();dist.useLogger().debug(e.controlOptions);const Ue={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:Oe.filterServices,filterWMTSPriority:!0,filterProjections:Oe.filterProjections,filterLayersPriority:Oe.getFeatured().toString(),filterLayers:!0,filterTMS:!0,filterLayersList:Oe.getLayersSignatures(),serviceOptions:{maximumResponses:50},maximumEntries:5},autocompleteOptions:{serviceOptions:{maximumResponses:10},prettifyResults:!0,maximumEntries:5},markerUrl:IconGeolocationSVG},He={options:{id:"2",position:useControlsExtensionPosition().layerSwitcherOptions,collapsed:!0,panel:!0,counter:!0,allowEdit:!0}},We={id:"3",position:useControlsExtensionPosition().legendsOptions,panel:!0,auto:!0,draggable:!1},Cn={id:"4",units:"metric",bar:!1},An={id:"5",position:useControlsExtensionPosition().territoriesOptions,panel:!0,title:"Slectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},En={id:"6",position:useControlsExtensionPosition().getFeatureInfoOptions},Sn={id:"7",position:useControlsExtensionPosition().overviewMapOptions},Tn={id:"8",position:useControlsExtensionPosition().fullscreenOptions},Ln={position:useControlsExtensionPosition().zoomOptions,id:"9"},Bn={position:useControlsExtensionPosition().controlListOptions,id:"10",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},ei={id:"11",position:useControlsExtensionPosition().drawingOptions,gutter:!1,listable:!0,tools:{export:!1}},ni={id:"12",position:useControlsExtensionPosition().reverseGeocodeOptions,gutter:!1,listable:!0},ti={position:useControlsExtensionPosition().isocurveOptions,id:"13",gutter:!1,listable:!0},ri={position:useControlsExtensionPosition().routeOptions,id:"14",gutter:!1,listable:!0},oi={id:"15",position:useControlsExtensionPosition().measureLengthOptions,gutter:!1,listable:!0},ai={position:useControlsExtensionPosition().measureAreaOptions,id:"16",gutter:!1,listable:!0},ci={position:useControlsExtensionPosition().measureAzimuthOptions,gutter:!1,listable:!0,id:"17"},Pi={position:useControlsExtensionPosition().mousePositionOptions,id:"18",gutter:!1,listable:!0,systems:[{label:"Gographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II tendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France mtropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France mtropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France mtropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Runion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynsie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynsie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynsie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynsie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (le de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (les Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (les Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (les St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Strographique polaire (Terre Adlie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (les du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (les du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Caldonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},vi={id:"19",position:useControlsExtensionPosition().elevationPathOptions,gutter:!1,listable:!0},pi={id:"20",position:useControlsExtensionPosition().layerImportOptions,gutter:!1,listable:!0},Mi=inject("refModalPrint"),Fi=inject("refModalShare"),fi=computed(()=>({contextMenuItemsOptions:[{text:"Imprimer la carte",callback:function(){Mi.value.onModalPrintOpen()}},{text:"Partager la carte",callback:function(){Fi.value.onModalShareOpen()}},{text:"Ajouter des donnes",callback:()=>{Te.getmenuCatalogueButton().firstChild.click()}}]}));return(ui,Oi)=>{const Ni=_sfc_main$R,nr=_sfc_main$S;return openBlock(),createElementBlock(Fragment,null,[ke.controlOptions?(openBlock(),createBlock(_sfc_main$M,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":He,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$L,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":We,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$I,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":ri,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$J,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":ti,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(Ni,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":ni,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(nr,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":Tn,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$N,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":Ln,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$Q,{key:7,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Ue,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:8,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":En,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$P,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":Cn,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$O,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":Sn,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:11,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":An,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$H,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":oi,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$G,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":ai,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$F,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":ci,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:15,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":Pi,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$K,{key:16,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":ei,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:17,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":vi,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:18,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":pi,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:19,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":Bn,"map-id":ke.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),ke.controlOptions?(openBlock(),createBlock(_sfc_main$y,{key:20,visibility:e.controlOptions.includes(unref(useControls).ContextMenu.id),analytic:unref(useControls).ContextMenu.analytic,"context-menu-options":unref(fi),"map-id":ke.mapId},null,8,["visibility","analytic","context-menu-options","map-id"])):createCommentVNode("",!0)],64)}}}),_sfc_main$w={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(ke){const e=ke,Te=dist.useLogger();Te.debug(e.layerOptions);const Oe=useDataStore(),Be=inject(e.mapId);var Ue=null;return onMounted(()=>{var He=Oe.getLayerByName(e.layerOptions.name,e.layerOptions.service),We=Oe.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);He.params=We,Te.debug("layer to add",He);var Cn=e.layerOptions.service,An=e.layerOptions.name,En={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},Sn={preload:1/0,cacheSize:1024};switch(Cn){case"WMS":Ue=new LayerWMS({layer:An,configuration:He,apiKey:"ign_scan_ws",olParams:Object.assign(En,Sn)});break;case"WMTS":Ue=new LayerWMTS({layer:An,configuration:He,apiKey:"ign_scan_ws",olParams:Object.assign(En,Sn)});break;case"TMS":En.declutter=!0,Ue=new LayerMapBox({layer:An,configuration:He,apiKey:"ign_scan_ws"},En);break}Ue&&Be.addLayer(Ue)}),onUnmounted(()=>{Be.removeLayer(Ue)}),(He,We)=>(openBlock(),createElementBlock("div",null,[renderSlot(He.$slots,"default")]))}},_sfc_main$v={__name:"Layers",props:{selectedLayers:Object,mapId:String},setup(ke){const e=ke;dist.useLogger();var Te=computed(()=>toRaw(e.selectedLayers).map(Oe=>({name:Oe.name,service:Oe.serviceParams.id.split(":")[1],key:Oe.key,opacity:Oe.hasOwnProperty("opacity")?Oe.opacity:1,visible:Oe.hasOwnProperty("visible")?Oe.visible:!0,gray:Oe.hasOwnProperty("gray")?Oe.gray:!0})));return(Oe,Be)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Te),Ue=>(openBlock(),createBlock(_sfc_main$w,{key:Ue.key,"layer-options":Ue,"map-id":ke.mapId},null,8,["layer-options","map-id"]))),128))}},__default__$q={name:"Carto"},_sfc_main$u=Object.assign(__default__$q,{props:{selectedControls:Array,selectedLayers:Object},setup(ke){const e=ke,Te=useMapStore(),Oe=ref(null),Be=computed(()=>Oe.value&&Oe.value.mapRef);return(Ue,He)=>(openBlock(),createBlock(_sfc_main$U,{class:"map",ref_key:"refMap",ref:Oe,mapId:unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$T,{"map-Id":unref(mainMap),center:unref(Te).center,zoom:unref(Te).zoom},null,8,["map-Id","center","zoom"]),unref(Be)?(openBlock(),createBlock(_sfc_main$x,{key:0,"control-options":e.selectedControls,"map-id":unref(mainMap)},null,8,["control-options","map-id"])):createCommentVNode("",!0),createVNode(_sfc_main$v,{"map-Id":unref(mainMap),"selected-layers":e.selectedLayers},null,8,["map-Id","selected-layers"])]),_:1},8,["mapId"]))}}),Carto=_export_sfc(_sfc_main$u,[["__scopeId","data-v-d1592877"]]),_hoisted_1$i={class:"menu-content-list"},_hoisted_2$b={class:"menu-collapse-icon-wrapper"},_hoisted_3$3={class:"menu-content"},__default__$p={name:"MenuLateralWrapper"},_sfc_main$t=Object.assign(__default__$p,{props:mergeModels({side:String,visibility:Boolean,id:String,width:Number,padding:Number},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(ke,{expose:e}){useCssVars(ti=>({"0bb05539":unref(Sn),"75a5da05":unref(Tn),"216e5600":unref(Ln)}));const Te=ke,Oe="ion:close",Be=.8325,Ue=computed(()=>({scale:Be.value,name:Oe})),He=Te.width||550,We=Te.padding||30,Cn=useModel(ke,"modelValue",!1),An=ref(He),En=ref(We),Sn=computed(()=>An.value+"px"),Tn=computed(()=>En.value+"px"),Ln=computed(()=>An.value-En.value+"px"),Bn=ref();function ei(){Cn.value=!1}function ni(){Cn.value=!0}return e({widthMenu:An,closeMenu:ei,openMenu:ni}),(ti,ri)=>{const oi=Ie;return ke.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${Cn.value&&"is_expanded"} ${Te.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:Bn,class:"menu-logo-list"},[renderSlot(ti.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$b,[createVNode(oi,{id:Te.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:ei},{default:withCtx(()=>[ri[0]||(ri[0]=createTextVNode(" Fermer ")),createVNode(unref(ue$1),normalizeProps(guardReactiveProps(unref(Ue))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$3,[renderSlot(ti.$slots,"content",{},void 0,!0)])],512),[[vShow,Cn.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_2=_export_sfc(_sfc_main$t,[["__scopeId","data-v-4126ee55"]]),__default__$o={name:"MenuLateralButton"},_sfc_main$s=Object.assign(__default__$o,{props:{icon:String,id:String,active:Boolean,title:String,side:String,visibility:Boolean},emits:["tabClicked"],setup(ke,{expose:e,emit:Te}){const Oe=useMapStore(),Be=ke,Ue=Be.icon,He=Te,We=()=>{Be.side=="left"&&Sn(),Be.side=="right"&&En(),He("tabClicked",Be.id)},Cn=useControlsPosition();function An(ei){let ni=[...ei.element.children].filter(ti=>{if(ti.className.includes("GPshowOpen"))return ti});ni[0].getAttribute("aria-pressed")==="true"&&ni[0].click()}function En(ei){Oe.getMap().getControls().getArray().forEach(ni=>{Cn.right.includes(ni.CLASSNAME)&&An(ni)})}function Sn(){Oe.getMap().getControls().getArray().forEach(ei=>{Cn.left.includes(ei.CLASSNAME)&&An(ei)})}function Tn(){console.log("click on button"+Be.id),Ln.value.children[0].click()}const Ln=ref(null),Bn=ref(Be.id);return e({clickButton:Tn,button:Ln,id:Bn}),onMounted(()=>{Be.id=="MenuCatalogue"&&Oe.setmenuCatalogueButton(Ln.value)}),(ei,ni)=>{const ti=Ie;return openBlock(),createElementBlock("div",{ref_key:"button",ref:Ln},[createVNode(ti,{id:unref(Bn),secondary:"","aria-label":ke.title,class:normalizeClass(`${ke.active?"active":""}  navBarIcon ${ke.visibility?"":"invisibleNavButton"} navButton`),icon:unref(Ue),iconOnly:!0,onClick:We},null,8,["id","aria-label","class","icon"])],512)}}}),__unplugin_components_1=_export_sfc(_sfc_main$s,[["__scopeId","data-v-0cff27f5"]]),_hoisted_1$h={class:"container"},__default__$n={name:"MenuTierce"},_sfc_main$r=Object.assign(__default__$n,{emits:["openControl","onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onBookMarksOpen"],setup(ke,{emit:e}){const Te=useMapStore(),Oe=e;function Be(En){Te.getMap().getControls().getArray().forEach(Sn=>{Sn.CLASSNAME===En&&([...Sn.element.children].filter(Ln=>{if(Ln.className.includes("GPshowOpen"))return Ln})[0].click(),Oe("openControl"))})}const Ue="mingcute:file-import-line",He=.8325;computed(()=>({scale:He.value,name:Ue}));var We=inject("services"),Cn=computed(()=>We.authenticated);const An=ref({authenticatedProperty:!Cn.value});return(En,Sn)=>{const Tn=Ie;return openBlock(),createElementBlock("div",_hoisted_1$h,[createVNode(Tn,{tertiary:"","no-outline":"",class:normalizeClass(unref(An)),onClick:Sn[0]||(Sn[0]=Ln=>En.$emit("onBookMarksOpen")),icon:"ri-bookmark-line"},{default:withCtx(()=>Sn[5]||(Sn[5]=[createTextVNode(" Mes enregistrements ")])),_:1},8,["class"]),Sn[10]||(Sn[10]=createBaseVNode("hr",null,null,-1)),createVNode(Tn,{tertiary:"","no-outline":"",icon:"mingcute:file-import-line",onClick:Sn[1]||(Sn[1]=Ln=>Be("LayerImport"))},{default:withCtx(()=>Sn[6]||(Sn[6]=[createTextVNode(" Importer des donnes ")])),_:1}),createVNode(Tn,{tertiary:"","no-outline":"",icon:"ant-design:link-outlined",onClick:Sn[2]||(Sn[2]=Ln=>En.$emit("onModalShareOpen"))},{default:withCtx(()=>Sn[7]||(Sn[7]=[createTextVNode(" Partager, intgrer la carte ")])),_:1}),createVNode(Tn,{tertiary:"","no-outline":"",icon:"material-symbols:print-outline",onClick:Sn[3]||(Sn[3]=Ln=>En.$emit("onModalPrintOpen")),class:"tierce-print"},{default:withCtx(()=>Sn[8]||(Sn[8]=[createTextVNode(" Imprimer ")])),_:1}),Sn[11]||(Sn[11]=createBaseVNode("hr",null,null,-1)),createVNode(Tn,{tertiary:"","no-outline":"",onClick:Sn[4]||(Sn[4]=Ln=>En.$emit("onModalThemeOpen"))},{default:withCtx(()=>Sn[9]||(Sn[9]=[createBaseVNode("span",{class:"fr-icon-theme-fill fr-link--icon-left"},null,-1),createTextVNode(" Paramtres d'affichage ")])),_:1})])}}}),MenuTierce=_export_sfc(_sfc_main$r,[["__scopeId","data-v-6edb3783"]]),_hoisted_1$g={class:"fr-container"},_hoisted_2$a={class:"bookmark-buttons-container"},__default__$m={name:"MenuBookMarkNoData"},_sfc_main$q=Object.assign(__default__$m,{setup(ke){const e=inject("emitter"),Te=[{label:"Enregistrer une carte",icon:"fr-icon-save-line",disabled:!0,iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{}},{label:"Consulter le catalogue",icon:"fr-icon-highlight",iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{e.dispatchEvent("catalog:open:clicked",{open:!0,componentName:"MenuCatalogue"})}},{label:"Ajouter une donne",icon:"fr-icon-upload-line",iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{e.dispatchEvent("layerimport:open:clicked",{open:!0,componentName:"LayerImport"})}}];return(Oe,Be)=>{const Ue=qe;return openBlock(),createElementBlock("div",_hoisted_1$g,[Be[0]||(Be[0]=createBaseVNode("div",{class:"bookmark-content-container"},[createBaseVNode("h4",null," Aucun enregistrement pour le moment "),createBaseVNode("div",null," Enregsitrer vos cartes et donnes cres sur votre espace afin de les retrouver et de les utiliser  tout moment. "),createBaseVNode("div",{id:"location-france"})],-1)),createBaseVNode("div",_hoisted_2$a,[createVNode(Ue,{buttons:Te})])])}}}),MenuBookMarkNoData=_export_sfc(_sfc_main$q,[["__scopeId","data-v-af0dd14e"]]),DEFAULT_STYLE=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),createVectorLayer=ke=>{var e=null,Te=null,Oe=null;switch(ke.format.toLowerCase()){case"geojson":e=new GeoJSON$1,ke.extended&&(e=new GeoJSON({defaultStyle:DEFAULT_STYLE}));break;case"kml":e=new KML$1,ke.extended&&(e=new KML({defaultStyle:DEFAULT_STYLE}));break;case"gpx":e=new GPX$1,ke.extended&&(e=new GPX({defaultStyle:DEFAULT_STYLE,readExtensions:function(Be,Ue){this.readExtensions(Be,Ue)}}));break}if(!e)throw new Error(t.ol.failed_format(ke.format));if(ke.data){const Be=e.readProjection(ke.data);Te=new VectorSource({features:e.readFeatures(ke.data,{dataProjection:Be,featureProjection:"EPSG:3857"})})}if(ke.url&&(Te=new VectorSource({format:e,url:ke.url})),!Te)throw new Error(t.ol.failed_source("vecteur"));if(Te._title=ke.title,Te._description=ke.description,Oe=new VectorLayer({source:Te,visible:!0}),!Oe)throw new Error(t.ol.failed_layer("vecteur"));return Oe.gpResultLayerId="bookmark:"+ke.type+"-"+ke.format.toLowerCase()+":"+ke.id,Oe},createServiceLayer=ke=>{var e=null;if(ke.format==="wmts"){const Be=new WMTSTileGrid({origin:[ke.data.topLeftCorner.x,ke.data.topLeftCorner.y],resolutions:ke.data.resolutions,matrixIds:ke.data.matrixIds});var Te=new WMTS$1({url:ke.data.url,version:ke.data.version,layer:ke.data.layer,matrixSet:ke.data.tileMatrixSet,format:ke.data.outputFormat,projection:"EPSG:3857",tileGrid:Be,style:ke.data.styleName,attributions:""});if(!Te)throw new Error(t.ol.failed_source("service wmts"));if(Te._title=ke.data.title||ke.title,Te._description=ke.data.description||ke.description,e=new TileLayer({source:Te}),!e)throw new Error(t.ol.failed_layer("service wmts"))}else{var Oe=new TileWMS({url:ke.data.url,params:{LAYERS:ke.data.layers,SERVICE:ke.data.format,VERSION:ke.data.version,STYLES:ke.data.stylesName},projection:ke.data.projection||"EPSG:3857",attributions:""});if(!Oe)throw new Error(t.ol.failed_source("service wms"));if(Oe._title=ke.data.title||ke.title,Oe._description=ke.data.description||ke.description,e=new TileLayer({source:Oe}),!e)throw new Error(t.ol.failed_layer("service wms"));e.gpGFIparams={queryable:ke.data.queryable,formats:ke.data.gfiFormat}}if(e&&!e.getExtent()){const Be=get$3("EPSG:3857");e.setExtent(Be.getExtent())}return e&&(e.gpResultLayerId="bookmark:"+ke.format.toLowerCase()+":"+ke.id),e},createMapBoxLayer=ke=>{const e=Oe=>{var Be=null,Ue=Oe.data,He=Ue.sources,We=Object.keys(He)[0],Cn=He[We],An=Cn.type;if(An==="vector"){var En=Cn.tiles;if(!En)throw new Error("Source 'tiles' uniquement !");var Sn=new MVT({featureClass:Feature}),Tn=new VectorTile({attributions:"",format:Sn,urls:En});Tn._title=Oe.title,Tn._description=Oe.description,Be=new VectorTileLayer({source:Tn,visible:!1,declutter:!0}),Be.gpResultLayerId="bookmark:"+Oe.format.toLowerCase()+":"+Oe.id;var Ln=()=>{applyStyle(Be,Ue,{source:We}).then(()=>{Be.setVisible(!0),Be.setOpacity(1)}).catch(Bn=>{throw Bn})};Be.getSource()?Ln():Be.once("change:source",Ln)}else throw new Error("Type 'vector' uniquement !");return Be};if(ke.url)return fetch(ke.url).then(Oe=>{if(Oe.ok)return Oe.json().then(Be=>e({...ke,data:Be})).catch(Be=>{throw Be})}).catch(Oe=>{throw Oe});if(ke.data)try{var Te=e(ke);return Promise.resolve(Te)}catch(Oe){return Promise.reject(Oe)}},getLayersFromPermalink=ke=>{const e=useMapStore();var Te=useUrlParams(ke);for(const Oe in Te)if(Object.prototype.hasOwnProperty.call(Te,Oe)&&Oe==="layers"){const Be=Te[Oe];e[Oe]=Be}},_hoisted_1$f={class:"container-bookmark-entry"},_hoisted_2$9={class:"container-bookmark-entry-advanced-options"},_hoisted_3$2={class:"container-bookmark-entry-advanced-infos fr-hint-text"},_hoisted_4$1={key:0},_hoisted_5$1={key:1},_hoisted_6$1={ref:"div-rename",class:"container-bookmark-entry-rename fr-hidden"},_hoisted_7={class:"container-bookmark-entry-buttons-rename"},__default__$l={name:"MenuBookMarkEntry"},_sfc_main$p=Object.assign(__default__$l,{props:{type:String,data:Object},setup(ke){const e=useMapStore(),Te=ke,Oe=inject("services"),Be=inject("emitter"),Ue=ei=>{Oe.getDocumentById(ei.id).then(ni=>{var ti=null;switch(ei.type){case"drawing":ti=Oe.getDrawing;break;case"import":ti=Oe.getImport;break;case"compute":throw ti=Oe.getCompute,new Error(t.bookmark.failed_not_yet_implemented(ei.type));case"service":ti=Oe.getService;break;case"carte":ti=Oe.getCartes;break}if(!ti)throw new Error(t.bookmark.failed_type_unknow(ei.type));ti.call(Oe,ei.id).then(ri=>{var oi={},ai={},ci=null;if(ei.type==="carte"){getLayersFromPermalink(ri),push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data("permalien")});return}else if(ei.type==="service")if(oi={id:ei.id,title:ei.name,description:ni.description,format:ni.extra.format},ni.extra.format==="mapbox"){ai=ni.extra.target&&ni.extra.target==="internal"?{data:ri}:{url:ri},createMapBoxLayer({...oi,...ai}).then(Pi=>{e.getMap().addLayer(Pi),push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data("mapbox")})}).catch(Pi=>{throw t.ol.failed_mapbox(Pi)});return}else ai={data:ri},ci=createServiceLayer({...oi,...ai});else if(oi={id:ei.id,extended:!0,title:ei.name,description:ni.description,format:ni.extra.format,type:ei.type},ni.extra.format==="mapbox"){ai={data:ri},createMapBoxLayer({...oi,...ai}).then(Pi=>{e.getMap().addLayer(Pi),push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data("mapbox")})}).catch(Pi=>{throw t.ol.failed_mapbox(Pi)});return}else ai=ni.extra.target&&ni.extra.target==="external"?{url:ri}:{data:ri},ci=createVectorLayer({...oi,...ai});e.getMap().addLayer(ci),push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data(ni.extra.format)})}).catch(ri=>{throw ri})}).catch(ni=>{console.error(ni),push$1.error({title:t.bookmark.title,message:t.bookmark.failed_add_data(ni.message)})})};onBeforeMount(()=>{}),onMounted(()=>{});const He=useTemplateRef("div-rename"),We=ref(""),Cn=ei=>{console.debug(ei),He.value.classList.toggle("fr-hidden"),We.value=Te.data.name},An=ei=>{console.debug(ei);var ni={uuid:Te.data.id,type:Te.data.type};Oe.deleteDocument(ni).then(ti=>{Be.dispatchEvent("document:deleted",{uuid:ti.uuid,action:ti.action})}).then(()=>{})},En=ei=>{console.debug(ei);var ni={uuid:Te.data.id,type:Te.data.type};Oe.exportDocument(ni).then(ti=>(Be.dispatchEvent("document:exported",{uuid:ti.uuid,action:ti.action}),ti)).then(ti=>{var ri=ti.extra.mimeType,oi=ti.extra.content,ai=ti.extra.name,ci=ti.extra.ext,Pi=ai.includes(ci)?ai:ai+"."+ci,vi=document.createElement("a"),pi="utf-8";if(vi.setAttribute("href","data:"+ri+";charset="+pi+","+encodeURIComponent(oi)),vi.setAttribute("download",Pi),document.createEvent){var Mi=document.createEvent("MouseEvents");Mi.initEvent("click",!0,!0),vi.dispatchEvent(Mi)}else vi.click()})},Sn=ei=>{console.debug(ei);var ni={uuid:Te.data.id,type:Te.data.type,name:We.value};We.value!==Te.data.name&&Oe.renameDocument(ni).then(ti=>{Be.dispatchEvent("document:updated",{uuid:ti.uuid,action:ti.action})}).then(()=>{He.value.classList.toggle("fr-hidden")}).then(()=>{})},Tn=ei=>{He.value.classList.toggle("fr-hidden")},Ln=[{label:"Renommer",icon:"fr-icon-edit-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:Cn},{label:"Supprimer",icon:"fr-icon-delete-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:An}],Bn=[...Ln,{label:"Exporter",icon:"fr-icon-download-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:En}];return(ei,ni)=>{const ti=Ie,ri=qe,oi=ze;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$f,[createVNode(ti,{"data-id":ke.data.id,"data-type":ke.data.type,title:ke.data.name,class:"button-bookmark-entry",tertiary:"","no-outline":"",icon:ke.data.icon,onClick:ni[0]||(ni[0]=ai=>Ue(ke.data))},{default:withCtx(()=>[createTextVNode(toDisplayString(ke.data.name),1)]),_:1},8,["data-id","data-type","title","icon"]),createBaseVNode("div",_hoisted_2$9,[ke.data.type==="carte"?(openBlock(),createBlock(ri,{key:0,buttons:Ln,inlineLayoutWhen:"",size:"sm"})):(openBlock(),createBlock(ri,{key:1,buttons:Bn,inlineLayoutWhen:"",size:"sm"}))])]),createBaseVNode("div",_hoisted_3$2,[createBaseVNode("span",null,toDisplayString(ke.data.type_fr),1),ke.data.format?(openBlock(),createElementBlock("span",_hoisted_4$1," - "+toDisplayString(ke.data.format),1)):createCommentVNode("",!0),ke.data.date?(openBlock(),createElementBlock("span",_hoisted_5$1," - "+toDisplayString(ke.data.date),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_6$1,[createVNode(oi,{modelValue:unref(We),"onUpdate:modelValue":ni[1]||(ni[1]=ai=>isRef(We)?We.value=ai:null),label:"Renommer",placeholder:""},null,8,["modelValue"]),createBaseVNode("div",_hoisted_7,[createVNode(ti,{size:"sm",icon:"ri:close-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:Tn}),createVNode(ti,{size:"sm",icon:"ri:check-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:Sn})])],512),renderSlot(ei.$slots,"default")],64)}}}),_hoisted_1$e={class:"fr-container fr-p-1w"},_hoisted_2$8={key:0},_hoisted_3$1={class:"search-bookmark fr-p-1w"},_hoisted_4={class:"tabs-bookmark fr-p-1w"},_hoisted_5={class:"container-bookmark-map-item fr-p-1w"},_hoisted_6={class:"container-bookmark-data-item fr-p-1w"},__default__$k={name:"MenuBookMarkDataList"},_sfc_main$o=Object.assign(__default__$k,{props:{title:String},setup(ke){const e=inject("emitter"),Te=ref("");function Oe(ni){Te.value=ni}const Be="Liste des donnes",Ue=[{title:"Cartes",tabId:"tab-bookmark-maps",panelId:"tab-content-bookmark-maps"},{title:"Donnes",tabId:"tab-bookmark-data",panelId:"tab-content-bookmark-data"}],He=ref(0),We=inject("services"),Cn=ni=>{var ti=ni;return We.labels.includes(ni)?(ni==="drawing"&&(ti="croquis"),ni==="compute"&&(ti="calcul")):ti=ni,ti},An=ni=>{var ti="";return We.labels.includes(ni)?(ni==="drawing"&&(ti="fr-icon-edit-line"),ni==="import"&&(ti="fr-icon-file-download-line"),ni==="service"&&(ti="fr-icon-cloud-line"),ni==="compute"&&(ti="fr-icon-settings-5-line")):ti="fr-icon-pencil-line",ti},En=ref(null),Sn=computed(()=>{En.value&&console.log("update data !");var ni=[];for(const ci in We.documents)if(Object.prototype.hasOwnProperty.call(We.documents,ci)){if(ci==="carte")continue;var ti=We.documents[ci];if(!ti)continue;for(let Pi=0;Pi<ti.length;Pi++){var ri=ti[Pi],oi=["geojson","gpx","kml","json"],ai=oi.find(vi=>ri.name.includes(vi));ni.push({id:ri._id,name:ai?ri.name.replace(ai,"").slice(0,-1):ri.name,format:ai||"",type:ci,type_fr:Cn(ci),icon:An(ci),date:""})}}return ni.filter(ci=>!Te.value||ci.name.includes(Te.value))}),Tn=computed(()=>{En.value&&console.log("update map !");var ni=[];if(We.documents.carte)for(let ti=0;ti<We.documents.carte.length;ti++){const ri=We.documents.carte[ti];ni.push({id:ri._id,name:ri.name,format:null,type:"carte",type_fr:"permalien",icon:"fr-icon-link",date:""})}return ni.filter(ti=>!Te.value||ti.name.includes(Te.value))}),Ln=ni=>{console.log(ni);var ti=Date.now();En.value=Object.assign(ni,{timestamp:ti})};e.addEventListener("document:saved",Ln),e.addEventListener("document:updated",Ln),e.addEventListener("document:deleted",Ln),e.addEventListener("document:exported",Ln);const Bn=()=>{},ei=()=>{e.dispatchEvent("layerimport:open:clicked",{open:!0,componentName:"LayerImport"})};return onBeforeMount(()=>{}),onMounted(()=>{}),(ni,ti)=>{const ri=Ze,oi=Ie,ai=Ut$1,ci=ou;return openBlock(),createElementBlock("div",_hoisted_1$e,[ke.title?(openBlock(),createElementBlock("h4",_hoisted_2$8,toDisplayString(ke.title),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$1,[createVNode(ri,{modelValue:unref(Te),"onUpdate:modelValue":[ti[0]||(ti[0]=Pi=>isRef(Te)?Te.value=Pi:null),Oe],label:"Rechercher un enregistrement"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_4,[createVNode(ci,{id:"tabs-bookmark","tab-list-name":Be,"tab-titles":Ue,modelValue:unref(He),"onUpdate:modelValue":ti[3]||(ti[3]=Pi=>isRef(He)?He.value=Pi:null)},{default:withCtx(()=>[createVNode(ai,{"panel-id":"tab-content-bookmark-maps","tab-id":"tab-bookmark-maps"},{default:withCtx(()=>[createVNode(oi,{label:"Enregistrer la carte",disabled:"",tertiary:"",size:"sm",class:"button-action",icon:"fr-icon-save-line",onClick:ti[1]||(ti[1]=Pi=>Bn())}),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Tn),Pi=>(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(_sfc_main$p,{data:Pi,type:"map"},null,8,["data"])]))),256))]),_:1}),createVNode(ai,{"panel-id":"tab-content-bookmark-data","tab-id":"tab-bookmark-data"},{default:withCtx(()=>[createVNode(oi,{label:"Ajouter une donne",tertiary:"",size:"sm",class:"button-action",icon:"fr-icon-upload-line",onClick:ti[2]||(ti[2]=Pi=>ei())}),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Sn),Pi=>(openBlock(),createElementBlock("div",_hoisted_6,[createVNode(_sfc_main$p,{data:Pi,type:"data"},null,8,["data"])]))),256))]),_:1})]),_:1},8,["modelValue"])])])}}}),MenuBookMarkDataList=_export_sfc(_sfc_main$o,[["__scopeId","data-v-157df847"]]),_hoisted_1$d={key:0},_hoisted_2$7={key:1},__default__$j={name:"MenuBookMarkLoggued"},_sfc_main$n=Object.assign(__default__$j,{setup(ke){var e=inject("services");const Te=inject("emitter"),Oe=()=>{var He=!0;for(const We in e.documents)if(Object.prototype.hasOwnProperty.call(e.documents,We)){const Cn=e.documents[We];Cn&&Cn.length&&(He=!1)}return He};var Be=ref(!1),Ue=computed(()=>{var He=Oe();return Be.value?Oe():He});return Te.addEventListener("service:documents:loaded",He=>{Be.value=!Be.value}),Te.addEventListener("document:saved",He=>{Be.value=!Be.value}),Te.addEventListener("document:deleted",He=>{Be.value=!Be.value}),Te.addEventListener("document:updated",He=>{Be.value=!Be.value}),onMounted(()=>{}),(He,We)=>unref(Ue)?(openBlock(),createElementBlock("div",_hoisted_1$d,[createVNode(MenuBookMarkNoData)])):(openBlock(),createElementBlock("div",_hoisted_2$7,[createVNode(MenuBookMarkDataList,{title:"Mes enregistrements"})]))}}),_hoisted_1$c={class:"container"},__default__$i={name:"MenuBookMarks"},_sfc_main$m=Object.assign(__default__$i,{setup(ke){var e=inject("services"),Te=computed(()=>e.authenticated);return(Oe,Be)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[unref(Te)?(openBlock(),createBlock(_sfc_main$n,{key:0})):createCommentVNode("",!0)]))}}),MenuBookMarks=_export_sfc(_sfc_main$m,[["__scopeId","data-v-8ca3b4ab"]]),__default__$h={name:"LeftMenuTool"},_sfc_main$l=Object.assign(__default__$h,{props:{},emits:["onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onModalLoginOpen"],setup(ke,{emit:e}){const Te="left",Oe=ref(),Be=computed(()=>[{componentName:"MenuTierce",icon:"ri-menu-fill",title:"Menu carte",visibility:!0},{componentName:"MenuBookMarks",icon:"ri-bookmark-line",title:"Mes Enregistrements",visibility:!1}]),Ue=ref("MenuCatalogueContent"),He=ref(null),We=300;function Cn(Tn){An(Tn)&&Oe.value?He.value.closeMenu():(Ue.value=Tn+"Content",Tn==="MenuBookMarks"?He.value.widthMenu=400:He.value.widthMenu=We,He.value.openMenu())}function An(Tn){return Ue.value.replace("Content","")===Tn}var En=inject("services");computed(()=>En.authenticated);function Sn(){}return useTemplateRef("tabs"),(Tn,Ln)=>(openBlock(),createBlock(__unplugin_components_2,{ref_key:"wrapper",ref:He,side:Te,visibility:!0,width:We,padding:16,id:"MenuCatalogueContentClose",modelValue:unref(Oe),"onUpdate:modelValue":Ln[3]||(Ln[3]=Bn=>isRef(Oe)?Oe.value=Bn:null)},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuTierceContent",class:normalizeClass([unref(Ue)==="MenuTierceContent"?"activeTab":"inactiveTab"])},[createVNode(MenuTierce,{onOnModalShareOpen:Ln[0]||(Ln[0]=Bn=>Tn.$emit("onModalShareOpen")),onOnModalPrintOpen:Ln[1]||(Ln[1]=Bn=>Tn.$emit("onModalPrintOpen")),onOnModalThemeOpen:Ln[2]||(Ln[2]=Bn=>Tn.$emit("onModalThemeOpen")),onOnBookMarksOpen:Sn})],2),createBaseVNode("div",{id:"MenuBookMarksContent",class:normalizeClass([unref(Ue)==="MenuBookMarksContent"?"activeTab":"inactiveTab"])},[createVNode(MenuBookMarks)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),Bn=>(openBlock(),createBlock(__unplugin_components_1,{ref_for:!0,ref:"tabs",side:Te,icon:Bn.icon,visibility:Bn.visibility,id:Bn.componentName,active:An(Bn.componentName),title:Bn.title,onTabClicked:Cn},null,8,["icon","visibility","id","active","title"]))),256))]),_:1},8,["modelValue"]))}}),LeftMenuTool=_export_sfc(_sfc_main$l,[["__scopeId","data-v-a9a81e2f"]]),_hoisted_1$b=["innerHTML"],__default__$g={name:"LayerCatalogue"},_sfc_main$k=Object.assign(__default__$g,{props:{layer:Object,active:Boolean},setup(ke){const e=useMapStore(),Te=ke,Oe=ref(Te.active);function Be(Ue,He){Oe.value=Ue,Oe.value?e.addLayer(He.key):e.removeLayer(He.key)}return onUpdated(()=>{Oe.value=Te.active}),(Ue,He)=>{const We=lt$2;return openBlock(),createElementBlock(Fragment,null,[createVNode(We,{"model-value":unref(Oe),label:ke.layer.title,"onUpdate:modelValue":He[0]||(He[0]=Cn=>Be(Cn,ke.layer))},null,8,["model-value","label"]),createBaseVNode("div",{class:"layer-description",innerHTML:ke.layer.description},null,8,_hoisted_1$b)],64)}}}),__default__$f={name:"LayerList"},_sfc_main$j=Object.assign(__default__$f,{props:{layers:Array,selectedLayers:Object,listName:String},setup(ke){const e=ke;function Te(Oe){let Be=Oe.key?Oe.key:Oe.name;return Be=Be+"-"+e.listName,Be}return(Oe,Be)=>(openBlock(),createElementBlock("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.layers,Ue=>(openBlock(),createElementBlock("div",{key:Te(Ue)},[createVNode(_sfc_main$k,{active:ke.selectedLayers?ke.selectedLayers.filter(He=>He.key==Ue.key).length>0:!1,layer:Ue},null,8,["active","layer"])]))),128))]))}}),__default__$e={name:"MenuCatalogueThematique"},_sfc_main$i=Object.assign(__default__$e,{props:{thematicLabel:String,id:Number,layersCount:Number},setup(ke){const e=ke,Te=computed(()=>e.thematicLabel+` (${e.layersCount})`);return(Oe,Be)=>{const Ue=Da;return openBlock(),createBlock(Ue,{id:"accordion-"+ke.id,title:unref(Te)},{default:withCtx(()=>[renderSlot(Oe.$slots,"default")]),_:3},8,["id","title"])}}}),_hoisted_1$a={class:"catalogue-content-with-radio-btn"},__default__$d={name:"DataLayerCatalogue"},_sfc_main$h=Object.assign(__default__$d,{props:{dataLayers:Object,currDataFilter:String,selectedLayers:Object},setup(ke){const e=ke,Te=useDataStore(),Oe=computed(()=>Te.getThematics().value.map(We=>{const Cn=We[1].filter(En=>e.dataLayers.map(Sn=>Sn.key).includes(En.key));return[We[0],Cn]})),Be=computed(()=>Te.getProducers().value.map(We=>{const Cn=We[1].filter(En=>e.dataLayers.map(Sn=>Sn.key).includes(En.key));return[We[0],Cn]})),Ue=ref(-1),He=ref(-1);return(We,Cn)=>{const An=_sfc_main$j,En=_sfc_main$i,Sn=Ta;return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(Sn,{modelValue:unref(Ue),"onUpdate:modelValue":Cn[0]||(Cn[0]=Tn=>isRef(Ue)?Ue.value=Tn:null)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),(Tn,Ln)=>(openBlock(),createElementBlock("div",{key:Tn[0]},[Tn[1].length>0?withDirectives((openBlock(),createBlock(En,{id:Ln,"thematic-label":Tn[0],"layers-count":Tn[1].length,key:Tn[0]+"-menuCatalogueThematique"},{default:withCtx(()=>[(openBlock(),createBlock(An,{key:Tn[0],"list-name":Tn[0],"selected-layers":ke.selectedLayers,layers:Tn[1]},null,8,["list-name","selected-layers","layers"]))]),_:2},1032,["id","thematic-label","layers-count"])),[[vShow,ke.currDataFilter==="producteur"]]):createCommentVNode("",!0)]))),128))]),_:1},8,["modelValue"]),createVNode(Sn,{modelValue:unref(He),"onUpdate:modelValue":Cn[1]||(Cn[1]=Tn=>isRef(He)?He.value=Tn:null)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe),(Tn,Ln)=>(openBlock(),createElementBlock("div",{key:Tn[0]},[Tn[1].length>0?withDirectives((openBlock(),createBlock(En,{id:Ln,"thematic-label":Tn[0],"layers-count":Tn[1].length,key:Tn[0]+"-menuCatalogueThematique"},{default:withCtx(()=>[(openBlock(),createBlock(An,{key:Tn[0],"list-name":Tn[0],"selected-layers":ke.selectedLayers,layers:Tn[1]},null,8,["list-name","selected-layers","layers"]))]),_:2},1032,["id","thematic-label","layers-count"])),[[vShow,ke.currDataFilter==="theme"]]):createCommentVNode("",!0)]))),128))]),_:1},8,["modelValue"]),withDirectives(createBaseVNode("div",null,[createVNode(An,{"list-name":"tout","selected-layers":ke.selectedLayers,layers:e.dataLayers},null,8,["selected-layers","layers"])],512),[[vShow,ke.currDataFilter=="tout"]])])}}});function useSearchInArray(ke,e,Te){return ke.filter(Oe=>{if(Te.map(Be=>{if(Oe.hasOwnProperty(Be)&&Oe[Be]&&Oe[Be].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return Oe})}const _hoisted_1$9={class:"catalogue-container"},_hoisted_2$6={class:"catalogue-search-bar"},__default__$c={name:"CatalogueMenu"},_sfc_main$g=Object.assign(__default__$c,{props:{layers:Object,selectedLayers:Object},setup(ke){const e=dist.useLogger();useMapStore();const Te=ke;e.debug(Te.layers);const Oe=ref(""),Be=ref(""),Ue=useDebounceFn(()=>{Be.value=Oe.value},300);watch(Oe,()=>{Ue()});const He=computed(()=>useSearchInArray(Object.values(Te.layers),Be.value,["title","description","name"])),We=computed(()=>He.value.filter(ei=>{if(ei.hasOwnProperty("base")&&ei.base)return ei})),Cn=computed(()=>He.value.filter(ei=>{if(!ei.hasOwnProperty("base")||!ei.base)return ei})),An="Liste des couches",En=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Donnes",tabId:"tab-1",panelId:"tab-content-1"}],Sn=ref(!0),Tn=ref(0),Ln=[{label:"Producteur",value:"producteur"},{label:"Thme",value:"theme"},{label:"Tout",value:"tout"}],Bn=ref("producteur");return(ei,ni)=>{const ti=Ze,ri=Ut$1,oi=Bi,ai=ou;return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$6,[createVNode(ti,{modelValue:unref(Oe),"onUpdate:modelValue":ni[0]||(ni[0]=ci=>isRef(Oe)?Oe.value=ci:null)},null,8,["modelValue"])]),createVNode(ai,{"tab-list-name":An,"tab-titles":En,modelValue:unref(Tn),"onUpdate:modelValue":ni[2]||(ni[2]=ci=>isRef(Tn)?Tn.value=ci:null)},{default:withCtx(()=>[createVNode(ri,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",asc:unref(Sn)},{default:withCtx(()=>[createVNode(_sfc_main$j,{"list-name":"baseLayer","selected-layers":ke.selectedLayers,layers:unref(We)},null,8,["selected-layers","layers"])]),_:1},8,["asc"]),createVNode(ri,{"panel-id":"tab-content-1","tab-id":"tab-1",asc:unref(Sn)},{default:withCtx(()=>[createVNode(oi,{inline:!0,"model-value":unref(Bn),small:!0,name:"filtre",options:Ln,"onUpdate:modelValue":ni[1]||(ni[1]=ci=>Bn.value=ci)},null,8,["model-value"]),createVNode(_sfc_main$h,{"data-layers":unref(Cn),"curr-data-filter":unref(Bn),"selected-layers":ke.selectedLayers},null,8,["data-layers","curr-data-filter","selected-layers"])]),_:1},8,["asc"])]),_:1},8,["modelValue"])])}}}),__unplugin_components_0=_export_sfc(_sfc_main$g,[["__scopeId","data-v-257709e6"]]),_hoisted_1$8={class:"control-list-element"},__default__$b={name:"ControlListElement"},_sfc_main$f=Object.assign(__default__$b,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ke){const e=ke,Te=useModel(ke,"modelValue"),Oe=ref();return watch(Oe,Be=>{Be===!0&&!Te.value.includes(e.controlListElementOptions.name)&&(Te.value=[...Te.value,e.controlListElementOptions.name]),Be===!1&&(Te.value=Te.value.filter(Ue=>Ue!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(Be,Ue)=>{const He=Su;return openBlock(),createElementBlock("tr",_hoisted_1$8,[Ue[1]||(Ue[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(He,mergeProps({disabled:ke.controlListElementOptions.disabled,hint:ke.controlListElementOptions.hint,inputId:ke.controlListElementOptions.id,label:ke.controlListElementOptions.label,labelLeft:"",modelValue:Te.value===!0||Array.isArray(Te.value)&&Te.value.includes(ke.controlListElementOptions.name),"onUpdate:modelValue":Ue[0]||(Ue[0]=We=>isRef(Oe)?Oe.value=We:null)},Be.$attrs),null,16,["disabled","hint","inputId","label","modelValue"])])])}}}),ControlListElement=_export_sfc(_sfc_main$f,[["__scopeId","data-v-c8a00218"]]),_hoisted_1$7={class:"control-container"},_hoisted_2$5={class:"control-search-bar"},_hoisted_3={class:"control-content"},__default__$a={name:"MenuControl"},_sfc_main$e=Object.assign(__default__$a,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ke){dist.useLogger();const e=useMapStore(),Te=ke,Oe=useModel(ke,"modelValue"),Be=useControlsMenuOptions(),Ue=computed(()=>Be.filter(Cn=>{if(Cn.label.toLowerCase().includes(He.value.toLowerCase())||Cn.hint.toLowerCase().includes(He.value.toLowerCase())||Cn.name.toLowerCase().includes(He.value.toLowerCase()))return Cn}));computed(()=>Te.selectedControls?Ue.value.filter(Cn=>{if(Te.selectedControls.includes(Cn.name))return Cn}):[]),ref(0),ref(!0);const He=ref("");function We(Cn){He.value=Cn}return watch(Oe,Cn=>{e.cleanControls();for(let An=0;An<Cn.length;An++){const En=Cn[An];e.addControl(En)}}),onMounted(()=>{}),onUpdated(()=>{}),(Cn,An)=>{const En=Ze;return openBlock(),createElementBlock("div",_hoisted_1$7,[An[1]||(An[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$5,[createVNode(En,{"model-value":unref(He),"onUpdate:modelValue":We},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ue),(Sn,Tn)=>(openBlock(),createBlock(ControlListElement,{key:Tn,modelValue:Oe.value,"onUpdate:modelValue":An[0]||(An[0]=Ln=>Oe.value=Ln),"model-value":Te.selectedControls,"control-list-element-options":Sn},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$e,[["__scopeId","data-v-27e46f0d"]]),__default__$9={name:"RightMenuTool"},_sfc_main$d=Object.assign(__default__$9,{props:{selectedControls:{Object},selectedLayers:{Object}},setup(ke){const e=useDataStore(),Te="right",Oe=computed(()=>[{componentName:"MenuCatalogue",icon:"octicon:book-24",title:"Catalogue de donnes",visibility:!0},{componentName:"MenuControl",icon:"ri:tools-line",title:"Catalogue d'outils",visibility:!0}]),Be=ref("MenuControlContent"),Ue=ref(),He=ref(null);function We(En){An(En)&&Ue.value?He.value.closeMenu():(Be.value=En+"Content",He.value.openMenu())}inject("emitter").addEventListener("catalog:open:clicked",En=>{We(En.componentName)});function An(En){return Be.value.replace("Content","")===En}return(En,Sn)=>{const Tn=__unplugin_components_0,Ln=__unplugin_components_1,Bn=__unplugin_components_2;return openBlock(),createBlock(Bn,{side:Te,visibility:!0,width:500,id:unref(Be),modelValue:unref(Ue),"onUpdate:modelValue":Sn[0]||(Sn[0]=ei=>isRef(Ue)?Ue.value=ei:null),ref_key:"wrapper",ref:He},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(Be)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[createVNode(Tn,{"selected-layers":ke.selectedLayers,layers:unref(e).getLayers()},null,8,["selected-layers","layers"])],2),createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(Be)==="MenuControlContent"?"activeTab":"inactiveTab"])},[createVNode(MenuControl,{"selected-controls":ke.selectedControls},null,8,["selected-controls"])],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe),ei=>(openBlock(),createBlock(Ln,{visibility:ei.visibility,side:Te,icon:ei.icon,id:ei.componentName,active:An(ei.componentName),title:ei.title,onTabClicked:We},null,8,["visibility","icon","id","active","title"]))),256))]),_:1},8,["id","modelValue"])}}}),RightMenuTool=_export_sfc(_sfc_main$d,[["__scopeId","data-v-315f1184"]]),__default__$8={name:"ModalLogin"},_sfc_main$c=Object.assign(__default__$8,{setup(ke,{expose:e}){const Te=useEulerian(),Oe=useRouter(),Be="Se connecter  cartes.gouv.fr",Ue="fr-icon-account-fill",He=[{label:"Se connecter",onClick(){We.value=!1,Oe.push({path:"/login"})}},{label:"Annuler",tertiary:!0,onClick(){We.value=!1}}],We=ref(!1);We.value&&Te.pause();const Cn=()=>{We.value=!0,Te.pause()},An=()=>{We.value=!1,Te.resume()};return e({openModalLogin:Cn,onModalLoginClose:An}),(En,Sn)=>{const Tn=Vt$1;return openBlock(),createBlock(Tn,{opened:unref(We),title:Be,size:"md",icon:Ue,"is-alert":!0,actions:He,onClose:An},{default:withCtx(()=>Sn[0]||(Sn[0]=[createBaseVNode("p",null,"Pour enregistrer vos donnes, vous devez vous identifier ou crer un compte sur cartes.gouv.fr ",-1)])),_:1},8,["opened"])}}}),_hoisted_1$6={class:"title-copy"},_hoisted_2$4={class:"fr-hint-text hint-class"},__default__$7={},_sfc_main$b=Object.assign(__default__$7,{__name:"TextCopyToClipboard",props:{copiedText:String,label:String,description:String},setup(ke){const e=useMatchMedia("SM"),Te=ke;ref("");const{copy:Oe}=useClipboard({}),Be="ri:file-copy-line",Ue="ic:outline-check",He="Copier",We="Copi",Cn=ref(Be),An=ref(He),En=ref(.8325),Sn=computed(()=>typeof Cn.value=="string"?{scale:En.value,name:Cn.value}:{scale:En.value,...Cn.value});function Tn(){Oe(Te.copiedText),Cn.value=Ue,An.value=We,setTimeout(()=>{Cn.value=Be,An.value=He},5e3)}return onMounted(()=>{}),(Ln,Bn)=>{const ei=Ie;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",null,toDisplayString(ke.label),1),createVNode(ei,{secondary:"",iconRight:"",iconOnly:unref(e),icon:unref(Sn),onClick:Bn[0]||(Bn[0]=ni=>Tn())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(An)),1)]),_:1},8,["iconOnly","icon"])]),createBaseVNode("p",_hoisted_2$4,toDisplayString(ke.description),1)])}}}),TextCopyToClipboard=_export_sfc(_sfc_main$b,[["__scopeId","data-v-a850ee97"]]),__default__$6={},_sfc_main$a=Object.assign(__default__$6,{__name:"ShareModal",setup(ke,{expose:e}){const Te=useEulerian(),Oe=useDataStore(),Be=useMapStore(),Ue="Partager une carte",He="lg",We=ref(!1),Cn=()=>{We.value=!0,Te.pause()},An=()=>{We.value=!1,Te.resume()},En=Oe.getContacts(),Sn=computed(()=>encodeURI(Be.permalink).replaceAll("&","%26")),Tn=computed(()=>({address:En.mail,subject:"Cartes  consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite  consulter cette carte sur Cartes.gouv.fr :%0A${Sn.value}`})),Ln=computed(()=>({to:`mailto:${Tn.value.address}?subject=${Tn.value.subject}&body=${Tn.value.body}`,label:"Envoyer un mail"})),Bn=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:En.networks.facebook+"?display=popup&u="+Be.permalink},{name:"linkedin",label:"Partager sur LinkedIn",url:En.networks.linkedin+"?url="+Be.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:En.networks.instagram}]),ei=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${Be.permalinkShare}"
    allowfullscreen>
  </iframe>`);return ref(null),onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),e({onModalShareOpen:Cn,onModalShareClose:An}),(ni,ti)=>{const ri=vd,oi=ze,ai=Vt$1;return openBlock(),createBlock(ai,{opened:unref(We),title:Ue,size:He,onClose:An},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(ri,{copyLabel:"Copier dans le presse-papier",mail:unref(Ln),networks:unref(Bn),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(oi,{modelValue:unref(Be).permalink,"onUpdate:modelValue":ti[0]||(ti[0]=ci=>unref(Be).permalink=ci),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"",descriptionId:""},{label:withCtx(()=>[createVNode(TextCopyToClipboard,{copiedText:unref(Be).permalink,label:"Lien permanent",description:"Toute personne ayant ce lien peut visualiser votre carte sans avoir  se crer de compte."},null,8,["copiedText"])]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(oi,{modelValue:unref(ei),"onUpdate:modelValue":ti[1]||(ti[1]=ci=>isRef(ei)?ei.value=ci:null),placeholder:"",isTextarea:"","label-visible":"",readonly:"",descriptionId:"",style:{height:"200px"}},{label:withCtx(()=>[createVNode(TextCopyToClipboard,{copiedText:unref(ei),label:"Iframe",description:"Insrer directement dans vos mails,  Rseaux sociaux ..."},null,8,["copiedText"])]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])}}}),ShareModal=_export_sfc(_sfc_main$a,[["__scopeId","data-v-236093cd"]]);function _typeof(ke){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(ke)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(ke,e){for(var Te=new u16(31),Oe=0;Oe<31;++Oe)Te[Oe]=e+=1<<ke[Oe-1];for(var Be=new i32(Te[30]),Oe=1;Oe<30;++Oe)for(var Ue=Te[Oe];Ue<Te[Oe+1];++Ue)Be[Ue]=Ue-Te[Oe]<<5|Oe;return{b:Te,r:Be}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(ke,e,Te){for(var Oe=ke.length,Be=0,Ue=new u16(e);Be<Oe;++Be)ke[Be]&&++Ue[ke[Be]-1];var He=new u16(e);for(Be=1;Be<e;++Be)He[Be]=He[Be-1]+Ue[Be-1]<<1;var We;if(Te){We=new u16(1<<e);var Cn=15-e;for(Be=0;Be<Oe;++Be)if(ke[Be])for(var An=Be<<4|ke[Be],En=e-ke[Be],Sn=He[ke[Be]-1]++<<En,Tn=Sn|(1<<En)-1;Sn<=Tn;++Sn)We[rev[Sn]>>Cn]=An}else for(We=new u16(Oe),Be=0;Be<Oe;++Be)ke[Be]&&(We[Be]=rev[He[ke[Be]-1]++]>>15-ke[Be]);return We},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(ke){for(var e=ke[0],Te=1;Te<ke.length;++Te)ke[Te]>e&&(e=ke[Te]);return e},bits=function(ke,e,Te){var Oe=e/8|0;return(ke[Oe]|ke[Oe+1]<<8)>>(e&7)&Te},bits16=function(ke,e){var Te=e/8|0;return(ke[Te]|ke[Te+1]<<8|ke[Te+2]<<16)>>(e&7)},shft=function(ke){return(ke+7)/8|0},slc=function(ke,e,Te){return(Te==null||Te>ke.length)&&(Te=ke.length),new u8(ke.subarray(e,Te))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(ke,e,Te){var Oe=new Error(e||ec[ke]);if(Oe.code=ke,Error.captureStackTrace&&Error.captureStackTrace(Oe,err),!Te)throw Oe;return Oe},inflt=function(ke,e,Te,Oe){var Be=ke.length,Ue=0;if(!Be||e.f&&!e.l)return Te||new u8(0);var He=!Te,We=He||e.i!=2,Cn=e.i;He&&(Te=new u8(Be*3));var An=function(Vr){var Gr=Te.length;if(Vr>Gr){var Hi=new u8(Math.max(Gr*2,Vr));Hi.set(Te),Te=Hi}},En=e.f||0,Sn=e.p||0,Tn=e.b||0,Ln=e.l,Bn=e.d,ei=e.m,ni=e.n,ti=Be*8;do{if(!Ln){En=bits(ke,Sn,1);var ri=bits(ke,Sn+1,3);if(Sn+=3,ri)if(ri==1)Ln=flrm,Bn=fdrm,ei=9,ni=5;else if(ri==2){var Pi=bits(ke,Sn,31)+257,vi=bits(ke,Sn+10,15)+4,pi=Pi+bits(ke,Sn+5,31)+1;Sn+=14;for(var Mi=new u8(pi),Fi=new u8(19),fi=0;fi<vi;++fi)Fi[clim[fi]]=bits(ke,Sn+fi*3,7);Sn+=vi*3;for(var ui=max(Fi),Oi=(1<<ui)-1,Ni=hMap(Fi,ui,1),fi=0;fi<pi;){var nr=Ni[bits(ke,Sn,Oi)];Sn+=nr&15;var oi=nr>>4;if(oi<16)Mi[fi++]=oi;else{var er=0,cr=0;for(oi==16?(cr=3+bits(ke,Sn,3),Sn+=2,er=Mi[fi-1]):oi==17?(cr=3+bits(ke,Sn,7),Sn+=3):oi==18&&(cr=11+bits(ke,Sn,127),Sn+=7);cr--;)Mi[fi++]=er}}var ar=Mi.subarray(0,Pi),pr=Mi.subarray(Pi);ei=max(ar),ni=max(pr),Ln=hMap(ar,ei,1),Bn=hMap(pr,ni,1)}else err(1);else{var oi=shft(Sn)+4,ai=ke[oi-4]|ke[oi-3]<<8,ci=oi+ai;if(ci>Be){Cn&&err(0);break}We&&An(Tn+ai),Te.set(ke.subarray(oi,ci),Tn),e.b=Tn+=ai,e.p=Sn=ci*8,e.f=En;continue}if(Sn>ti){Cn&&err(0);break}}We&&An(Tn+131072);for(var rr=(1<<ei)-1,br=(1<<ni)-1,Li=Sn;;Li=Sn){var er=Ln[bits16(ke,Sn)&rr],ur=er>>4;if(Sn+=er&15,Sn>ti){Cn&&err(0);break}if(er||err(2),ur<256)Te[Tn++]=ur;else if(ur==256){Li=Sn,Ln=null;break}else{var sr=ur-254;if(ur>264){var fi=ur-257,dr=fleb[fi];sr=bits(ke,Sn,(1<<dr)-1)+fl[fi],Sn+=dr}var vr=Bn[bits16(ke,Sn)&br],hr=vr>>4;vr||err(3),Sn+=vr&15;var pr=fd[hr];if(hr>3){var dr=fdeb[hr];pr+=bits16(ke,Sn)&(1<<dr)-1,Sn+=dr}if(Sn>ti){Cn&&err(0);break}We&&An(Tn+131072);var mr=Tn+sr;if(Tn<pr){var _r=Ue-pr,Ar=Math.min(pr,mr);for(_r+Tn<0&&err(3);Tn<Ar;++Tn)Te[Tn]=Oe[_r+Tn]}for(;Tn<mr;++Tn)Te[Tn]=Te[Tn-pr]}}e.l=Ln,e.p=Li,e.b=Tn,e.f=En,Ln&&(En=1,e.m=ei,e.d=Bn,e.n=ni)}while(!En);return Tn!=Te.length&&He?slc(Te,0,Tn):Te.subarray(0,Tn)},wbits=function(ke,e,Te){Te<<=e&7;var Oe=e/8|0;ke[Oe]|=Te,ke[Oe+1]|=Te>>8},wbits16=function(ke,e,Te){Te<<=e&7;var Oe=e/8|0;ke[Oe]|=Te,ke[Oe+1]|=Te>>8,ke[Oe+2]|=Te>>16},hTree=function(ke,e){for(var Te=[],Oe=0;Oe<ke.length;++Oe)ke[Oe]&&Te.push({s:Oe,f:ke[Oe]});var Be=Te.length,Ue=Te.slice();if(!Be)return{t:et$1,l:0};if(Be==1){var He=new u8(Te[0].s+1);return He[Te[0].s]=1,{t:He,l:1}}Te.sort(function(ci,Pi){return ci.f-Pi.f}),Te.push({s:-1,f:25001});var We=Te[0],Cn=Te[1],An=0,En=1,Sn=2;for(Te[0]={s:-1,f:We.f+Cn.f,l:We,r:Cn};En!=Be-1;)We=Te[Te[An].f<Te[Sn].f?An++:Sn++],Cn=Te[An!=En&&Te[An].f<Te[Sn].f?An++:Sn++],Te[En++]={s:-1,f:We.f+Cn.f,l:We,r:Cn};for(var Tn=Ue[0].s,Oe=1;Oe<Be;++Oe)Ue[Oe].s>Tn&&(Tn=Ue[Oe].s);var Ln=new u16(Tn+1),Bn=ln(Te[En-1],Ln,0);if(Bn>e){var Oe=0,ei=0,ni=Bn-e,ti=1<<ni;for(Ue.sort(function(Pi,vi){return Ln[vi.s]-Ln[Pi.s]||Pi.f-vi.f});Oe<Be;++Oe){var ri=Ue[Oe].s;if(Ln[ri]>e)ei+=ti-(1<<Bn-Ln[ri]),Ln[ri]=e;else break}for(ei>>=ni;ei>0;){var oi=Ue[Oe].s;Ln[oi]<e?ei-=1<<e-Ln[oi]++-1:++Oe}for(;Oe>=0&&ei;--Oe){var ai=Ue[Oe].s;Ln[ai]==e&&(--Ln[ai],++ei)}Bn=e}return{t:new u8(Ln),l:Bn}},ln=function(ke,e,Te){return ke.s==-1?Math.max(ln(ke.l,e,Te+1),ln(ke.r,e,Te+1)):e[ke.s]=Te},lc=function(ke){for(var e=ke.length;e&&!ke[--e];);for(var Te=new u16(++e),Oe=0,Be=ke[0],Ue=1,He=function(Cn){Te[Oe++]=Cn},We=1;We<=e;++We)if(ke[We]==Be&&We!=e)++Ue;else{if(!Be&&Ue>2){for(;Ue>138;Ue-=138)He(32754);Ue>2&&(He(Ue>10?Ue-11<<5|28690:Ue-3<<5|12305),Ue=0)}else if(Ue>3){for(He(Be),--Ue;Ue>6;Ue-=6)He(8304);Ue>2&&(He(Ue-3<<5|8208),Ue=0)}for(;Ue--;)He(Be);Ue=1,Be=ke[We]}return{c:Te.subarray(0,Oe),n:e}},clen=function(ke,e){for(var Te=0,Oe=0;Oe<e.length;++Oe)Te+=ke[Oe]*e[Oe];return Te},wfblk=function(ke,e,Te){var Oe=Te.length,Be=shft(e+2);ke[Be]=Oe&255,ke[Be+1]=Oe>>8,ke[Be+2]=ke[Be]^255,ke[Be+3]=ke[Be+1]^255;for(var Ue=0;Ue<Oe;++Ue)ke[Be+Ue+4]=Te[Ue];return(Be+4+Oe)*8},wblk=function(ke,e,Te,Oe,Be,Ue,He,We,Cn,An,En){wbits(e,En++,Te),++Be[256];for(var Sn=hTree(Be,15),Tn=Sn.t,Ln=Sn.l,Bn=hTree(Ue,15),ei=Bn.t,ni=Bn.l,ti=lc(Tn),ri=ti.c,oi=ti.n,ai=lc(ei),ci=ai.c,Pi=ai.n,vi=new u16(19),pi=0;pi<ri.length;++pi)++vi[ri[pi]&31];for(var pi=0;pi<ci.length;++pi)++vi[ci[pi]&31];for(var Mi=hTree(vi,7),Fi=Mi.t,fi=Mi.l,ui=19;ui>4&&!Fi[clim[ui-1]];--ui);var Oi=An+5<<3,Ni=clen(Be,flt)+clen(Ue,fdt)+He,nr=clen(Be,Tn)+clen(Ue,ei)+He+14+3*ui+clen(vi,Fi)+2*vi[16]+3*vi[17]+7*vi[18];if(Cn>=0&&Oi<=Ni&&Oi<=nr)return wfblk(e,En,ke.subarray(Cn,Cn+An));var er,cr,ar,pr;if(wbits(e,En,1+(nr<Ni)),En+=2,nr<Ni){er=hMap(Tn,Ln,0),cr=Tn,ar=hMap(ei,ni,0),pr=ei;var rr=hMap(Fi,fi,0);wbits(e,En,oi-257),wbits(e,En+5,Pi-1),wbits(e,En+10,ui-4),En+=14;for(var pi=0;pi<ui;++pi)wbits(e,En+3*pi,Fi[clim[pi]]);En+=3*ui;for(var br=[ri,ci],Li=0;Li<2;++Li)for(var ur=br[Li],pi=0;pi<ur.length;++pi){var sr=ur[pi]&31;wbits(e,En,rr[sr]),En+=Fi[sr],sr>15&&(wbits(e,En,ur[pi]>>5&127),En+=ur[pi]>>12)}}else er=flm,cr=flt,ar=fdm,pr=fdt;for(var pi=0;pi<We;++pi){var dr=Oe[pi];if(dr>255){var sr=dr>>18&31;wbits16(e,En,er[sr+257]),En+=cr[sr+257],sr>7&&(wbits(e,En,dr>>23&31),En+=fleb[sr]);var vr=dr&31;wbits16(e,En,ar[vr]),En+=pr[vr],vr>3&&(wbits16(e,En,dr>>5&8191),En+=fdeb[vr])}else wbits16(e,En,er[dr]),En+=cr[dr]}return wbits16(e,En,er[256]),En+cr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(ke,e,Te,Oe,Be,Ue){var He=Ue.z||ke.length,We=new u8(Oe+He+5*(1+Math.ceil(He/7e3))+Be),Cn=We.subarray(Oe,We.length-Be),An=Ue.l,En=(Ue.r||0)&7;if(e){En&&(Cn[0]=Ue.r>>3);for(var Sn=deo[e-1],Tn=Sn>>13,Ln=Sn&8191,Bn=(1<<Te)-1,ei=Ue.p||new u16(32768),ni=Ue.h||new u16(Bn+1),ti=Math.ceil(Te/3),ri=2*ti,oi=function(gr){return(ke[gr]^ke[gr+1]<<ti^ke[gr+2]<<ri)&Bn},ai=new i32(25e3),ci=new u16(288),Pi=new u16(32),vi=0,pi=0,Mi=Ue.i||0,Fi=0,fi=Ue.w||0,ui=0;Mi+2<He;++Mi){var Oi=oi(Mi),Ni=Mi&32767,nr=ni[Oi];if(ei[Ni]=nr,ni[Oi]=Ni,fi<=Mi){var er=He-Mi;if((vi>7e3||Fi>24576)&&(er>423||!An)){En=wblk(ke,Cn,0,ai,ci,Pi,pi,Fi,ui,Mi-ui,En),Fi=vi=pi=0,ui=Mi;for(var cr=0;cr<286;++cr)ci[cr]=0;for(var cr=0;cr<30;++cr)Pi[cr]=0}var ar=2,pr=0,rr=Ln,br=Ni-nr&32767;if(er>2&&Oi==oi(Mi-br))for(var Li=Math.min(Tn,er)-1,ur=Math.min(32767,Mi),sr=Math.min(258,er);br<=ur&&--rr&&Ni!=nr;){if(ke[Mi+ar]==ke[Mi+ar-br]){for(var dr=0;dr<sr&&ke[Mi+dr]==ke[Mi+dr-br];++dr);if(dr>ar){if(ar=dr,pr=br,dr>Li)break;for(var vr=Math.min(br,dr-2),hr=0,cr=0;cr<vr;++cr){var mr=Mi-br+cr&32767,_r=ei[mr],Ar=mr-_r&32767;Ar>hr&&(hr=Ar,nr=mr)}}}Ni=nr,nr=ei[Ni],br+=Ni-nr&32767}if(pr){ai[Fi++]=268435456|revfl[ar]<<18|revfd[pr];var Vr=revfl[ar]&31,Gr=revfd[pr]&31;pi+=fleb[Vr]+fdeb[Gr],++ci[257+Vr],++Pi[Gr],fi=Mi+ar,++vi}else ai[Fi++]=ke[Mi],++ci[ke[Mi]]}}for(Mi=Math.max(Mi,fi);Mi<He;++Mi)ai[Fi++]=ke[Mi],++ci[ke[Mi]];En=wblk(ke,Cn,An,ai,ci,Pi,pi,Fi,ui,Mi-ui,En),An||(Ue.r=En&7|Cn[En/8|0]<<3,En-=7,Ue.h=ni,Ue.p=ei,Ue.i=Mi,Ue.w=fi)}else{for(var Mi=Ue.w||0;Mi<He+An;Mi+=65535){var Hi=Mi+65535;Hi>=He&&(Cn[En/8|0]=An,Hi=He),En=wfblk(Cn,En+1,ke.subarray(Mi,Hi))}Ue.i=He}return slc(We,0,Oe+shft(En)+Be)},adler=function(){var ke=1,e=0;return{p:function(Te){for(var Oe=ke,Be=e,Ue=Te.length|0,He=0;He!=Ue;){for(var We=Math.min(He+2655,Ue);He<We;++He)Be+=Oe+=Te[He];Oe=(Oe&65535)+15*(Oe>>16),Be=(Be&65535)+15*(Be>>16)}ke=Oe,e=Be},d:function(){return ke%=65521,e%=65521,(ke&255)<<24|(ke&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(ke,e,Te,Oe,Be){if(!Be&&(Be={l:1},e.dictionary)){var Ue=e.dictionary.subarray(-32768),He=new u8(Ue.length+ke.length);He.set(Ue),He.set(ke,Ue.length),ke=He,Be.w=Ue.length}return dflt(ke,e.level==null?6:e.level,e.mem==null?Be.l?Math.ceil(Math.max(8,Math.min(13,Math.log(ke.length)))*1.5):20:12+e.mem,Te,Oe,Be)},wbytes=function(ke,e,Te){for(;Te;++e)ke[e]=Te,Te>>>=8},zlh=function(ke,e){var Te=e.level,Oe=Te==0?0:Te<6?1:Te==9?3:2;if(ke[0]=120,ke[1]=Oe<<6|(e.dictionary&&32),ke[1]|=31-(ke[0]<<8|ke[1])%31,e.dictionary){var Be=adler();Be.p(e.dictionary),wbytes(ke,2,Be.d())}},zls=function(ke,e){return((ke[0]&15)!=8||ke[0]>>4>7||(ke[0]<<8|ke[1])%31)&&err(6,"invalid zlib data"),(ke[1]>>5&1)==1&&err(6,"invalid zlib data: "+(ke[1]&32?"need":"unexpected")+" dictionary"),(ke[1]>>3&4)+2};function zlibSync(ke,e){e||(e={});var Te=adler();Te.p(ke);var Oe=dopt(ke,e,e.dictionary?6:2,4);return zlh(Oe,e),wbytes(Oe,Oe.length-4,Te.d()),Oe}function unzlibSync(ke,e){return inflt(ke.subarray(zls(ke),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(ke){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(ke){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(ke){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(ke))}};function o(ke,e,Te){var Oe=new XMLHttpRequest;Oe.open("GET",ke),Oe.responseType="blob",Oe.onload=function(){l(Oe.response,e,Te)},Oe.onerror=function(){a.error("could not download file")},Oe.send()}function s(ke){var e=new XMLHttpRequest;e.open("HEAD",ke,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(ke){try{ke.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),ke.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(ke,e,Te){var Oe=n.URL||n.webkitURL,Be=document.createElement("a");e=e||ke.name||"download",Be.download=e,Be.rel="noopener",typeof ke=="string"?(Be.href=ke,Be.origin!==location.origin?s(Be.href)?o(ke,e,Te):c(Be,Be.target="_blank"):c(Be)):(Be.href=Oe.createObjectURL(ke),setTimeout(function(){Oe.revokeObjectURL(Be.href)},4e4),setTimeout(function(){c(Be)},0))}:"msSaveOrOpenBlob"in navigator?function(ke,e,Te){if(e=e||ke.name||"download",typeof ke=="string")if(s(ke))o(ke,e,Te);else{var Oe=document.createElement("a");Oe.href=ke,Oe.target="_blank",setTimeout(function(){c(Oe)})}else navigator.msSaveOrOpenBlob(function(Be,Ue){return Ue===void 0?Ue={autoBom:!1}:_typeof(Ue)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ue={autoBom:!Ue}),Ue.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Be.type)?new Blob(["\uFEFF",Be],{type:Be.type}):Be}(ke,Te),e)}:function(ke,e,Te,Oe){if((Oe=Oe||open("","_blank"))&&(Oe.document.title=Oe.document.body.innerText="downloading..."),typeof ke=="string")return o(ke,e,Te);var Be=ke.type==="application/octet-stream",Ue=/constructor/i.test(n.HTMLElement)||n.safari,He=/CriOS\/[\d]+/.test(navigator.userAgent);if((He||Be&&Ue)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var We=new FileReader;We.onloadend=function(){var En=We.result;En=He?En:En.replace(/^data:[^;]*;/,"data:attachment/file;"),Oe?Oe.location.href=En:location=En,Oe=null},We.readAsDataURL(ke)}else{var Cn=n.URL||n.webkitURL,An=Cn.createObjectURL(ke);Oe?Oe.location=An:location.href=An,Oe=null,setTimeout(function(){Cn.revokeObjectURL(An)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(ke){var e;ke=ke||"",this.ok=!1,ke.charAt(0)=="#"&&(ke=ke.substr(1,6)),ke={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[ke=(ke=ke.replace(/ /g,"")).toLowerCase()]||ke;for(var Te=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(We){return[parseInt(We[1]),parseInt(We[2]),parseInt(We[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(We){return[parseInt(We[1],16),parseInt(We[2],16),parseInt(We[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(We){return[parseInt(We[1]+We[1],16),parseInt(We[2]+We[2],16),parseInt(We[3]+We[3],16)]}}],Oe=0;Oe<Te.length;Oe++){var Be=Te[Oe].re,Ue=Te[Oe].process,He=Be.exec(ke);He&&(e=Ue(He),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var We=this.r.toString(16),Cn=this.g.toString(16),An=this.b.toString(16);return We.length==1&&(We="0"+We),Cn.length==1&&(Cn="0"+Cn),An.length==1&&(An="0"+An),"#"+We+Cn+An}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(ke,e){var Te=ke[0],Oe=ke[1],Be=ke[2],Ue=ke[3];Te=g(Te,Oe,Be,Ue,e[0],7,-680876936),Ue=g(Ue,Te,Oe,Be,e[1],12,-389564586),Be=g(Be,Ue,Te,Oe,e[2],17,606105819),Oe=g(Oe,Be,Ue,Te,e[3],22,-1044525330),Te=g(Te,Oe,Be,Ue,e[4],7,-176418897),Ue=g(Ue,Te,Oe,Be,e[5],12,1200080426),Be=g(Be,Ue,Te,Oe,e[6],17,-1473231341),Oe=g(Oe,Be,Ue,Te,e[7],22,-45705983),Te=g(Te,Oe,Be,Ue,e[8],7,1770035416),Ue=g(Ue,Te,Oe,Be,e[9],12,-1958414417),Be=g(Be,Ue,Te,Oe,e[10],17,-42063),Oe=g(Oe,Be,Ue,Te,e[11],22,-1990404162),Te=g(Te,Oe,Be,Ue,e[12],7,1804603682),Ue=g(Ue,Te,Oe,Be,e[13],12,-40341101),Be=g(Be,Ue,Te,Oe,e[14],17,-1502002290),Te=m(Te,Oe=g(Oe,Be,Ue,Te,e[15],22,1236535329),Be,Ue,e[1],5,-165796510),Ue=m(Ue,Te,Oe,Be,e[6],9,-1069501632),Be=m(Be,Ue,Te,Oe,e[11],14,643717713),Oe=m(Oe,Be,Ue,Te,e[0],20,-373897302),Te=m(Te,Oe,Be,Ue,e[5],5,-701558691),Ue=m(Ue,Te,Oe,Be,e[10],9,38016083),Be=m(Be,Ue,Te,Oe,e[15],14,-660478335),Oe=m(Oe,Be,Ue,Te,e[4],20,-405537848),Te=m(Te,Oe,Be,Ue,e[9],5,568446438),Ue=m(Ue,Te,Oe,Be,e[14],9,-1019803690),Be=m(Be,Ue,Te,Oe,e[3],14,-187363961),Oe=m(Oe,Be,Ue,Te,e[8],20,1163531501),Te=m(Te,Oe,Be,Ue,e[13],5,-1444681467),Ue=m(Ue,Te,Oe,Be,e[2],9,-51403784),Be=m(Be,Ue,Te,Oe,e[7],14,1735328473),Te=v(Te,Oe=m(Oe,Be,Ue,Te,e[12],20,-1926607734),Be,Ue,e[5],4,-378558),Ue=v(Ue,Te,Oe,Be,e[8],11,-2022574463),Be=v(Be,Ue,Te,Oe,e[11],16,1839030562),Oe=v(Oe,Be,Ue,Te,e[14],23,-35309556),Te=v(Te,Oe,Be,Ue,e[1],4,-1530992060),Ue=v(Ue,Te,Oe,Be,e[4],11,1272893353),Be=v(Be,Ue,Te,Oe,e[7],16,-155497632),Oe=v(Oe,Be,Ue,Te,e[10],23,-1094730640),Te=v(Te,Oe,Be,Ue,e[13],4,681279174),Ue=v(Ue,Te,Oe,Be,e[0],11,-358537222),Be=v(Be,Ue,Te,Oe,e[3],16,-722521979),Oe=v(Oe,Be,Ue,Te,e[6],23,76029189),Te=v(Te,Oe,Be,Ue,e[9],4,-640364487),Ue=v(Ue,Te,Oe,Be,e[12],11,-421815835),Be=v(Be,Ue,Te,Oe,e[15],16,530742520),Te=b(Te,Oe=v(Oe,Be,Ue,Te,e[2],23,-995338651),Be,Ue,e[0],6,-198630844),Ue=b(Ue,Te,Oe,Be,e[7],10,1126891415),Be=b(Be,Ue,Te,Oe,e[14],15,-1416354905),Oe=b(Oe,Be,Ue,Te,e[5],21,-57434055),Te=b(Te,Oe,Be,Ue,e[12],6,1700485571),Ue=b(Ue,Te,Oe,Be,e[3],10,-1894986606),Be=b(Be,Ue,Te,Oe,e[10],15,-1051523),Oe=b(Oe,Be,Ue,Te,e[1],21,-2054922799),Te=b(Te,Oe,Be,Ue,e[8],6,1873313359),Ue=b(Ue,Te,Oe,Be,e[15],10,-30611744),Be=b(Be,Ue,Te,Oe,e[6],15,-1560198380),Oe=b(Oe,Be,Ue,Te,e[13],21,1309151649),Te=b(Te,Oe,Be,Ue,e[4],6,-145523070),Ue=b(Ue,Te,Oe,Be,e[11],10,-1120210379),Be=b(Be,Ue,Te,Oe,e[2],15,718787259),Oe=b(Oe,Be,Ue,Te,e[9],21,-343485551),ke[0]=_(Te,ke[0]),ke[1]=_(Oe,ke[1]),ke[2]=_(Be,ke[2]),ke[3]=_(Ue,ke[3])}function p(ke,e,Te,Oe,Be,Ue){return e=_(_(e,ke),_(Oe,Ue)),_(e<<Be|e>>>32-Be,Te)}function g(ke,e,Te,Oe,Be,Ue,He){return p(e&Te|~e&Oe,ke,e,Be,Ue,He)}function m(ke,e,Te,Oe,Be,Ue,He){return p(e&Oe|Te&~Oe,ke,e,Be,Ue,He)}function v(ke,e,Te,Oe,Be,Ue,He){return p(e^Te^Oe,ke,e,Be,Ue,He)}function b(ke,e,Te,Oe,Be,Ue,He){return p(Te^(e|~Oe),ke,e,Be,Ue,He)}function y(ke){var e,Te=ke.length,Oe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=ke.length;e+=64)d(Oe,w(ke.substring(e-64,e)));ke=ke.substring(e-64);var Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<ke.length;e++)Be[e>>2]|=ke.charCodeAt(e)<<(e%4<<3);if(Be[e>>2]|=128<<(e%4<<3),e>55)for(d(Oe,Be),e=0;e<16;e++)Be[e]=0;return Be[14]=8*Te,d(Oe,Be),Oe}function w(ke){var e,Te=[];for(e=0;e<64;e+=4)Te[e>>2]=ke.charCodeAt(e)+(ke.charCodeAt(e+1)<<8)+(ke.charCodeAt(e+2)<<16)+(ke.charCodeAt(e+3)<<24);return Te}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(ke){for(var e="",Te=0;Te<4;Te++)e+=N[ke>>8*Te+4&15]+N[ke>>8*Te&15];return e}function A(ke){return String.fromCharCode((255&ke)>>0,(65280&ke)>>8,(16711680&ke)>>16,(4278190080&ke)>>24)}function x(ke){return y(ke).map(A).join("")}var S=function(ke){for(var e=0;e<ke.length;e++)ke[e]=L(ke[e]);return ke.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(ke,e){if(S){var Te=(65535&ke)+(65535&e);return(ke>>16)+(e>>16)+(Te>>16)<<16|65535&Te}return ke+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(ke,e){var Te,Oe,Be,Ue;if(ke!==Te){for(var He=(Be=ke,Ue=1+(256/ke.length>>0),new Array(Ue+1).join(Be)),We=[],Cn=0;Cn<256;Cn++)We[Cn]=Cn;var An=0;for(Cn=0;Cn<256;Cn++){var En=We[Cn];An=(An+En+He.charCodeAt(Cn))%256,We[Cn]=We[An],We[An]=En}Te=ke,Oe=We}else We=Oe;var Sn=e.length,Tn=0,Ln=0,Bn="";for(Cn=0;Cn<Sn;Cn++)Ln=(Ln+(En=We[Tn=(Tn+1)%256]))%256,We[Tn]=We[Ln],We[Ln]=En,He=We[(We[Tn]+We[Ln])%256],Bn+=String.fromCharCode(e.charCodeAt(Cn)^He);return Bn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(ke,e,Te,Oe){this.v=1,this.r=2;var Be=192;ke.forEach(function(We){if(k.perm!==void 0)throw new Error("Invalid permission: "+We);Be+=k[We]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var Ue=(e+this.padding).substr(0,32),He=(Te+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ue,He),this.P=-(1+(255^Be)),this.encryptionKey=x(Ue+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Oe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(ke){if(/[^\u0000-\u00ff]/.test(ke))throw new Error("Invalid PDF Name Object: "+ke+", Only accept ASCII characters.");for(var e="",Te=ke.length,Oe=0;Oe<Te;Oe++){var Be=ke.charCodeAt(Oe);Be<33||Be===35||Be===37||Be===40||Be===41||Be===47||Be===60||Be===62||Be===91||Be===93||Be===123||Be===125||Be>126?e+="#"+("0"+Be.toString(16)).slice(-2):e+=ke[Oe]}return e}function C(ke){if(_typeof(ke)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(Te,Oe,Be){if(Be=Be||!1,typeof Te!="string"||typeof Oe!="function"||typeof Be!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(Te)||(e[Te]={});var Ue=Math.random().toString(35);return e[Te][Ue]=[Oe,!!Be],Ue},this.unsubscribe=function(Te){for(var Oe in e)if(e[Oe][Te])return delete e[Oe][Te],Object.keys(e[Oe]).length===0&&delete e[Oe],!0;return!1},this.publish=function(Te){if(e.hasOwnProperty(Te)){var Oe=Array.prototype.slice.call(arguments,1),Be=[];for(var Ue in e[Te]){var He=e[Te][Ue];try{He[0].apply(ke,Oe)}catch(We){n.console&&a.error("jsPDF PubSub Error",We.message,We)}He[1]&&Be.push(Ue)}Be.length&&Be.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(ke){if(!(this instanceof j))return new j(ke);var e="opacity,stroke-opacity".split(",");for(var Te in ke)ke.hasOwnProperty(Te)&&e.indexOf(Te)>=0&&(this[Te]=ke[Te]);this.id="",this.objectNumber=-1}function O(ke,e){this.gState=ke,this.matrix=e,this.id="",this.objectNumber=-1}function B(ke,e,Te,Oe,Be){if(!(this instanceof B))return new B(ke,e,Te,Oe,Be);this.type=ke==="axial"?2:3,this.coords=e,this.colors=Te,O.call(this,Oe,Be)}function M(ke,e,Te,Oe,Be){if(!(this instanceof M))return new M(ke,e,Te,Oe,Be);this.boundingBox=ke,this.xStep=e,this.yStep=Te,this.stream="",this.cloneIndex=0,O.call(this,Oe,Be)}function E(ke){var e,Te=typeof arguments[0]=="string"?arguments[0]:"p",Oe=arguments[1],Be=arguments[2],Ue=arguments[3],He=[],We=1,Cn=16,An="S",En=null;_typeof(ke=ke||{})==="object"&&(Te=ke.orientation,Oe=ke.unit||Oe,Be=ke.format||Be,Ue=ke.compress||ke.compressPdf||Ue,(En=ke.encryption||null)!==null&&(En.userPassword=En.userPassword||"",En.ownerPassword=En.ownerPassword||"",En.userPermissions=En.userPermissions||[]),We=typeof ke.userUnit=="number"?Math.abs(ke.userUnit):1,ke.precision!==void 0&&(e=ke.precision),ke.floatPrecision!==void 0&&(Cn=ke.floatPrecision),An=ke.defaultPathOperation||"S"),He=ke.filters||(Ue===!0?["FlateEncode"]:He),Oe=Oe||"mm",Te=(""+(Te||"P")).toLowerCase();var Sn=ke.putOnlyUsedFonts||!1,Tn={},Ln={internal:{},__private__:{}};Ln.__private__.PubSub=C;var Bn="1.3",ei=Ln.__private__.getPdfVersion=function(){return Bn};Ln.__private__.setPdfVersion=function(li){Bn=li};var ni={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ln.__private__.getPageFormats=function(){return ni};var ti=Ln.__private__.getPageFormat=function(li){return ni[li]};Be=Be||"a4";var ri={COMPAT:"compat",ADVANCED:"advanced"},oi=ri.COMPAT;function ai(){this.saveGraphicsState(),Ki(new As(Qr,0,0,-Qr,0,Cc()*Qr).toString()+" cm"),this.setFontSize(this.getFontSize()/Qr),An="n",oi=ri.ADVANCED}function ci(){this.restoreGraphicsState(),An="S",oi=ri.COMPAT}var Pi=Ln.__private__.combineFontStyleAndFontWeight=function(li,Vi){if(li=="bold"&&Vi=="normal"||li=="bold"&&Vi==400||li=="normal"&&Vi=="italic"||li=="bold"&&Vi=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Vi&&(li=Vi==400||Vi==="normal"?li==="italic"?"italic":"normal":Vi!=700&&Vi!=="bold"||li!=="normal"?(Vi==700?"bold":Vi)+""+li:"bold"),li};Ln.advancedAPI=function(li){var Vi=oi===ri.COMPAT;return Vi&&ai.call(this),typeof li!="function"||(li(this),Vi&&ci.call(this)),this},Ln.compatAPI=function(li){var Vi=oi===ri.ADVANCED;return Vi&&ci.call(this),typeof li!="function"||(li(this),Vi&&ai.call(this)),this},Ln.isAdvancedAPI=function(){return oi===ri.ADVANCED};var vi,pi=function(li){if(oi!==ri.ADVANCED)throw new Error(li+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Mi=Ln.roundToPrecision=Ln.__private__.roundToPrecision=function(li,Vi){var Cr=e||Vi;if(isNaN(li)||isNaN(Cr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return li.toFixed(Cr).replace(/0+$/,"")};vi=Ln.hpf=Ln.__private__.hpf=typeof Cn=="number"?function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(li,Cn)}:Cn==="smart"?function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(li,li>-1&&li<1?16:5)}:function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.hpf");return Mi(li,16)};var Fi=Ln.f2=Ln.__private__.f2=function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.f2");return Mi(li,2)},fi=Ln.__private__.f3=function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.f3");return Mi(li,3)},ui=Ln.scale=Ln.__private__.scale=function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.scale");return oi===ri.COMPAT?li*Qr:oi===ri.ADVANCED?li:void 0},Oi=function(li){return oi===ri.COMPAT?Cc()-li:oi===ri.ADVANCED?li:void 0},Ni=function(li){return ui(Oi(li))};Ln.__private__.setPrecision=Ln.setPrecision=function(li){typeof parseInt(li,10)=="number"&&(e=parseInt(li,10))};var nr,er="00000000000000000000000000000000",cr=Ln.__private__.getFileId=function(){return er},ar=Ln.__private__.setFileId=function(li){return er=li!==void 0&&/^[a-fA-F0-9]{32}$/.test(li)?li.toUpperCase():er.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),En!==null&&(pa=new I(En.userPermissions,En.userPassword,En.ownerPassword,er)),er};Ln.setFileId=function(li){return ar(li),this},Ln.getFileId=function(){return cr()};var pr=Ln.__private__.convertDateToPDFDate=function(li){var Vi=li.getTimezoneOffset(),Cr=Vi<0?"+":"-",Tr=Math.floor(Math.abs(Vi/60)),jr=Math.abs(Vi%60),Kr=[Cr,sr(Tr),"'",sr(jr),"'"].join("");return["D:",li.getFullYear(),sr(li.getMonth()+1),sr(li.getDate()),sr(li.getHours()),sr(li.getMinutes()),sr(li.getSeconds()),Kr].join("")},rr=Ln.__private__.convertPDFDateToDate=function(li){var Vi=parseInt(li.substr(2,4),10),Cr=parseInt(li.substr(6,2),10)-1,Tr=parseInt(li.substr(8,2),10),jr=parseInt(li.substr(10,2),10),Kr=parseInt(li.substr(12,2),10),as=parseInt(li.substr(14,2),10);return new Date(Vi,Cr,Tr,jr,Kr,as,0)},br=Ln.__private__.setCreationDate=function(li){var Vi;if(li===void 0&&(li=new Date),li instanceof Date)Vi=pr(li);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(li))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Vi=li}return nr=Vi},Li=Ln.__private__.getCreationDate=function(li){var Vi=nr;return li==="jsDate"&&(Vi=rr(nr)),Vi};Ln.setCreationDate=function(li){return br(li),this},Ln.getCreationDate=function(li){return Li(li)};var ur,sr=Ln.__private__.padd2=function(li){return("0"+parseInt(li)).slice(-2)},dr=Ln.__private__.padd2Hex=function(li){return("00"+(li=li.toString())).substr(li.length)},vr=0,hr=[],mr=[],_r=0,Ar=[],Vr=[],Gr=!1,Hi=mr,gr=function(){vr=0,_r=0,mr=[],hr=[],Ar=[],ma=yo(),Pa=yo()};Ln.__private__.setCustomOutputDestination=function(li){Gr=!0,Hi=li};var lr=function(li){Gr||(Hi=li)};Ln.__private__.resetCustomOutputDestination=function(){Gr=!1,Hi=mr};var Ki=Ln.__private__.out=function(li){return li=li.toString(),_r+=li.length+1,Hi.push(li),Hi},Dr=Ln.__private__.write=function(li){return Ki(arguments.length===1?li.toString():Array.prototype.join.call(arguments," "))},Nr=Ln.__private__.getArrayBuffer=function(li){for(var Vi=li.length,Cr=new ArrayBuffer(Vi),Tr=new Uint8Array(Cr);Vi--;)Tr[Vi]=li.charCodeAt(Vi);return Cr},Ir=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ln.__private__.getStandardFonts=function(){return Ir};var kr=ke.fontSize||16;Ln.__private__.setFontSize=Ln.setFontSize=function(li){return kr=oi===ri.ADVANCED?li/Qr:li,this};var Lr,Pr=Ln.__private__.getFontSize=Ln.getFontSize=function(){return oi===ri.COMPAT?kr:kr*Qr},Er=ke.R2L||!1;Ln.__private__.setR2L=Ln.setR2L=function(li){return Er=li,this},Ln.__private__.getR2L=Ln.getR2L=function(){return Er};var Sr,wr=Ln.__private__.setZoomMode=function(li){var Vi=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(li))Lr=li;else if(isNaN(li)){if(Vi.indexOf(li)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+li+'" is not recognized.');Lr=li}else Lr=parseInt(li,10)};Ln.__private__.getZoomMode=function(){return Lr};var Br,Hr=Ln.__private__.setPageMode=function(li){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(li)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+li+'" is not recognized.');Sr=li};Ln.__private__.getPageMode=function(){return Sr};var qr=Ln.__private__.setLayoutMode=function(li){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(li)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+li+'" is not recognized.');Br=li};Ln.__private__.getLayoutMode=function(){return Br},Ln.__private__.setDisplayMode=Ln.setDisplayMode=function(li,Vi,Cr){return wr(li),qr(Vi),Hr(Cr),this};var Xr={title:"",subject:"",author:"",keywords:"",creator:""};Ln.__private__.getDocumentProperty=function(li){if(Object.keys(Xr).indexOf(li)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xr[li]},Ln.__private__.getDocumentProperties=function(){return Xr},Ln.__private__.setDocumentProperties=Ln.setProperties=Ln.setDocumentProperties=function(li){for(var Vi in Xr)Xr.hasOwnProperty(Vi)&&li[Vi]&&(Xr[Vi]=li[Vi]);return this},Ln.__private__.setDocumentProperty=function(li,Vi){if(Object.keys(Xr).indexOf(li)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xr[li]=Vi};var cs,Qr,bs,vs,Ms,Ls={},ps={},Ps=[],Es={},Ds={},xs={},Xs={},_o=null,Fs=0,Ss=[],Is=new C(Ln),oa=ke.hotfixes||[],qs={},Eo={},Rs=[],As=function li(Vi,Cr,Tr,jr,Kr,as){if(!(this instanceof li))return new li(Vi,Cr,Tr,jr,Kr,as);isNaN(Vi)&&(Vi=1),isNaN(Cr)&&(Cr=0),isNaN(Tr)&&(Tr=0),isNaN(jr)&&(jr=1),isNaN(Kr)&&(Kr=0),isNaN(as)&&(as=0),this._matrix=[Vi,Cr,Tr,jr,Kr,as]};Object.defineProperty(As.prototype,"sx",{get:function(){return this._matrix[0]},set:function(li){this._matrix[0]=li}}),Object.defineProperty(As.prototype,"shy",{get:function(){return this._matrix[1]},set:function(li){this._matrix[1]=li}}),Object.defineProperty(As.prototype,"shx",{get:function(){return this._matrix[2]},set:function(li){this._matrix[2]=li}}),Object.defineProperty(As.prototype,"sy",{get:function(){return this._matrix[3]},set:function(li){this._matrix[3]=li}}),Object.defineProperty(As.prototype,"tx",{get:function(){return this._matrix[4]},set:function(li){this._matrix[4]=li}}),Object.defineProperty(As.prototype,"ty",{get:function(){return this._matrix[5]},set:function(li){this._matrix[5]=li}}),Object.defineProperty(As.prototype,"a",{get:function(){return this._matrix[0]},set:function(li){this._matrix[0]=li}}),Object.defineProperty(As.prototype,"b",{get:function(){return this._matrix[1]},set:function(li){this._matrix[1]=li}}),Object.defineProperty(As.prototype,"c",{get:function(){return this._matrix[2]},set:function(li){this._matrix[2]=li}}),Object.defineProperty(As.prototype,"d",{get:function(){return this._matrix[3]},set:function(li){this._matrix[3]=li}}),Object.defineProperty(As.prototype,"e",{get:function(){return this._matrix[4]},set:function(li){this._matrix[4]=li}}),Object.defineProperty(As.prototype,"f",{get:function(){return this._matrix[5]},set:function(li){this._matrix[5]=li}}),Object.defineProperty(As.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(As.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(As.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(As.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),As.prototype.join=function(li){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(vi).join(li)},As.prototype.multiply=function(li){var Vi=li.sx*this.sx+li.shy*this.shx,Cr=li.sx*this.shy+li.shy*this.sy,Tr=li.shx*this.sx+li.sy*this.shx,jr=li.shx*this.shy+li.sy*this.sy,Kr=li.tx*this.sx+li.ty*this.shx+this.tx,as=li.tx*this.shy+li.ty*this.sy+this.ty;return new As(Vi,Cr,Tr,jr,Kr,as)},As.prototype.decompose=function(){var li=this.sx,Vi=this.shy,Cr=this.shx,Tr=this.sy,jr=this.tx,Kr=this.ty,as=Math.sqrt(li*li+Vi*Vi),_s=(li/=as)*Cr+(Vi/=as)*Tr;Cr-=li*_s,Tr-=Vi*_s;var ws=Math.sqrt(Cr*Cr+Tr*Tr);return _s/=ws,li*(Tr/=ws)<Vi*(Cr/=ws)&&(li=-li,Vi=-Vi,_s=-_s,as=-as),{scale:new As(as,0,0,ws,0,0),translate:new As(1,0,0,1,jr,Kr),rotate:new As(li,Vi,-Vi,li,0,0),skew:new As(1,0,_s,1,0,0)}},As.prototype.toString=function(li){return this.join(" ")},As.prototype.inversed=function(){var li=this.sx,Vi=this.shy,Cr=this.shx,Tr=this.sy,jr=this.tx,Kr=this.ty,as=1/(li*Tr-Vi*Cr),_s=Tr*as,ws=-Vi*as,Gs=-Cr*as,Os=li*as;return new As(_s,ws,Gs,Os,-_s*jr-Gs*Kr,-ws*jr-Os*Kr)},As.prototype.applyToPoint=function(li){var Vi=li.x*this.sx+li.y*this.shx+this.tx,Cr=li.x*this.shy+li.y*this.sy+this.ty;return new ru(Vi,Cr)},As.prototype.applyToRectangle=function(li){var Vi=this.applyToPoint(li),Cr=this.applyToPoint(new ru(li.x+li.w,li.y+li.h));return new Bu(Vi.x,Vi.y,Cr.x-Vi.x,Cr.y-Vi.y)},As.prototype.clone=function(){var li=this.sx,Vi=this.shy,Cr=this.shx,Tr=this.sy,jr=this.tx,Kr=this.ty;return new As(li,Vi,Cr,Tr,jr,Kr)},Ln.Matrix=As;var bo=Ln.matrixMult=function(li,Vi){return Vi.multiply(li)},Us=new As(1,0,0,1,0,0);Ln.unitMatrix=Ln.identityMatrix=Us;var zs=function(li,Vi){if(!Ds[li]){var Cr=(Vi instanceof B?"Sh":"P")+(Object.keys(Es).length+1).toString(10);Vi.id=Cr,Ds[li]=Cr,Es[Cr]=Vi,Is.publish("addPattern",Vi)}};Ln.ShadingPattern=B,Ln.TilingPattern=M,Ln.addShadingPattern=function(li,Vi){return pi("addShadingPattern()"),zs(li,Vi),this},Ln.beginTilingPattern=function(li){pi("beginTilingPattern()"),Bd(li.boundingBox[0],li.boundingBox[1],li.boundingBox[2]-li.boundingBox[0],li.boundingBox[3]-li.boundingBox[1],li.matrix)},Ln.endTilingPattern=function(li,Vi){pi("endTilingPattern()"),Vi.stream=Vr[ur].join(`
`),zs(li,Vi),Is.publish("endTilingPattern",Vi),Rs.pop().restore()};var Ws=Ln.__private__.newObject=function(){var li=yo();return Co(li,!0),li},yo=Ln.__private__.newObjectDeferred=function(){return vr++,hr[vr]=function(){return _r},vr},Co=function(li,Vi){return Vi=typeof Vi=="boolean"&&Vi,hr[li]=_r,Vi&&Ki(li+" 0 obj"),li},qa=Ln.__private__.newAdditionalObject=function(){var li={objId:yo(),content:""};return Ar.push(li),li},ma=yo(),Pa=yo(),Fa=Ln.__private__.decodeColorString=function(li){var Vi=li.split(" ");if(Vi.length!==2||Vi[1]!=="g"&&Vi[1]!=="G")Vi.length===5&&(Vi[4]==="k"||Vi[4]==="K")&&(Vi=[(1-Vi[0])*(1-Vi[3]),(1-Vi[1])*(1-Vi[3]),(1-Vi[2])*(1-Vi[3]),"r"]);else{var Cr=parseFloat(Vi[0]);Vi=[Cr,Cr,Cr,"r"]}for(var Tr="#",jr=0;jr<3;jr++)Tr+=("0"+Math.floor(255*parseFloat(Vi[jr])).toString(16)).slice(-2);return Tr},xa=Ln.__private__.encodeColorString=function(li){var Vi;typeof li=="string"&&(li={ch1:li});var Cr=li.ch1,Tr=li.ch2,jr=li.ch3,Kr=li.ch4,as=li.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Cr=="string"&&Cr.charAt(0)!=="#"){var _s=new f(Cr);if(_s.ok)Cr=_s.toHex();else if(!/^\d*\.?\d*$/.test(Cr))throw new Error('Invalid color "'+Cr+'" passed to jsPDF.encodeColorString.')}if(typeof Cr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Cr)&&(Cr="#"+Cr[1]+Cr[1]+Cr[2]+Cr[2]+Cr[3]+Cr[3]),typeof Cr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Cr)){var ws=parseInt(Cr.substr(1),16);Cr=ws>>16&255,Tr=ws>>8&255,jr=255&ws}if(Tr===void 0||Kr===void 0&&Cr===Tr&&Tr===jr)if(typeof Cr=="string")Vi=Cr+" "+as[0];else switch(li.precision){case 2:Vi=Fi(Cr/255)+" "+as[0];break;case 3:default:Vi=fi(Cr/255)+" "+as[0]}else if(Kr===void 0||_typeof(Kr)==="object"){if(Kr&&!isNaN(Kr.a)&&Kr.a===0)return Vi=["1.","1.","1.",as[1]].join(" ");if(typeof Cr=="string")Vi=[Cr,Tr,jr,as[1]].join(" ");else switch(li.precision){case 2:Vi=[Fi(Cr/255),Fi(Tr/255),Fi(jr/255),as[1]].join(" ");break;default:case 3:Vi=[fi(Cr/255),fi(Tr/255),fi(jr/255),as[1]].join(" ")}}else if(typeof Cr=="string")Vi=[Cr,Tr,jr,Kr,as[2]].join(" ");else switch(li.precision){case 2:Vi=[Fi(Cr),Fi(Tr),Fi(jr),Fi(Kr),as[2]].join(" ");break;case 3:default:Vi=[fi(Cr),fi(Tr),fi(jr),fi(Kr),as[2]].join(" ")}return Vi},aa=Ln.__private__.getFilters=function(){return He},la=Ln.__private__.putStream=function(li){var Vi=(li=li||{}).data||"",Cr=li.filters||aa(),Tr=li.alreadyAppliedFilters||[],jr=li.addLength1||!1,Kr=Vi.length,as=li.objectId,_s=function(ga){return ga};if(En!==null&&as===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");En!==null&&(_s=pa.encryptor(as,0));var ws={};Cr===!0&&(Cr=["FlateEncode"]);var Gs=li.additionalKeyValues||[],Os=(ws=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Vi,Cr):{data:Vi,reverseChain:[]}).reverseChain+(Array.isArray(Tr)?Tr.join(" "):Tr.toString());if(ws.data.length!==0&&(Gs.push({key:"Length",value:ws.data.length}),jr===!0&&Gs.push({key:"Length1",value:Kr})),Os.length!=0)if(Os.split("/").length-1==1)Gs.push({key:"Filter",value:Os});else{Gs.push({key:"Filter",value:"["+Os+"]"});for(var Vs=0;Vs<Gs.length;Vs+=1)if(Gs[Vs].key==="DecodeParms"){for(var Io=[],xo=0;xo<ws.reverseChain.split("/").length-1;xo+=1)Io.push("null");Io.push(Gs[Vs].value),Gs[Vs].value="["+Io.join(" ")+"]"}}Ki("<<");for(var Jo=0;Jo<Gs.length;Jo++)Ki("/"+Gs[Jo].key+" "+Gs[Jo].value);Ki(">>"),ws.data.length!==0&&(Ki("stream"),Ki(_s(ws.data)),Ki("endstream"))},nc=Ln.__private__.putPage=function(li){var Vi=li.number,Cr=li.data,Tr=li.objId,jr=li.contentsObjId;Co(Tr,!0),Ki("<</Type /Page"),Ki("/Parent "+li.rootDictionaryObjId+" 0 R"),Ki("/Resources "+li.resourceDictionaryObjId+" 0 R"),Ki("/MediaBox ["+parseFloat(vi(li.mediaBox.bottomLeftX))+" "+parseFloat(vi(li.mediaBox.bottomLeftY))+" "+vi(li.mediaBox.topRightX)+" "+vi(li.mediaBox.topRightY)+"]"),li.cropBox!==null&&Ki("/CropBox ["+vi(li.cropBox.bottomLeftX)+" "+vi(li.cropBox.bottomLeftY)+" "+vi(li.cropBox.topRightX)+" "+vi(li.cropBox.topRightY)+"]"),li.bleedBox!==null&&Ki("/BleedBox ["+vi(li.bleedBox.bottomLeftX)+" "+vi(li.bleedBox.bottomLeftY)+" "+vi(li.bleedBox.topRightX)+" "+vi(li.bleedBox.topRightY)+"]"),li.trimBox!==null&&Ki("/TrimBox ["+vi(li.trimBox.bottomLeftX)+" "+vi(li.trimBox.bottomLeftY)+" "+vi(li.trimBox.topRightX)+" "+vi(li.trimBox.topRightY)+"]"),li.artBox!==null&&Ki("/ArtBox ["+vi(li.artBox.bottomLeftX)+" "+vi(li.artBox.bottomLeftY)+" "+vi(li.artBox.topRightX)+" "+vi(li.artBox.topRightY)+"]"),typeof li.userUnit=="number"&&li.userUnit!==1&&Ki("/UserUnit "+li.userUnit),Is.publish("putPage",{objId:Tr,pageContext:Ss[Vi],pageNumber:Vi,page:Cr}),Ki("/Contents "+jr+" 0 R"),Ki(">>"),Ki("endobj");var Kr=Cr.join(`
`);return oi===ri.ADVANCED&&(Kr+=`
Q`),Co(jr,!0),la({data:Kr,filters:aa(),objectId:jr}),Ki("endobj"),Tr},Nc=Ln.__private__.putPages=function(){var li,Vi,Cr=[];for(li=1;li<=Fs;li++)Ss[li].objId=yo(),Ss[li].contentsObjId=yo();for(li=1;li<=Fs;li++)Cr.push(nc({number:li,data:Vr[li],objId:Ss[li].objId,contentsObjId:Ss[li].contentsObjId,mediaBox:Ss[li].mediaBox,cropBox:Ss[li].cropBox,bleedBox:Ss[li].bleedBox,trimBox:Ss[li].trimBox,artBox:Ss[li].artBox,userUnit:Ss[li].userUnit,rootDictionaryObjId:ma,resourceDictionaryObjId:Pa}));Co(ma,!0),Ki("<</Type /Pages");var Tr="/Kids [";for(Vi=0;Vi<Fs;Vi++)Tr+=Cr[Vi]+" 0 R ";Ki(Tr+"]"),Ki("/Count "+Fs),Ki(">>"),Ki("endobj"),Is.publish("postPutPages")},qc=function(li){Is.publish("putFont",{font:li,out:Ki,newObject:Ws,putStream:la}),li.isAlreadyPutted!==!0&&(li.objectNumber=Ws(),Ki("<<"),Ki("/Type /Font"),Ki("/BaseFont /"+F(li.postScriptName)),Ki("/Subtype /Type1"),typeof li.encoding=="string"&&Ki("/Encoding /"+li.encoding),Ki("/FirstChar 32"),Ki("/LastChar 255"),Ki(">>"),Ki("endobj"))},Wc=function(){for(var li in Ls)Ls.hasOwnProperty(li)&&(Sn===!1||Sn===!0&&Tn.hasOwnProperty(li))&&qc(Ls[li])},Yc=function(li){li.objectNumber=Ws();var Vi=[];Vi.push({key:"Type",value:"/XObject"}),Vi.push({key:"Subtype",value:"/Form"}),Vi.push({key:"BBox",value:"["+[vi(li.x),vi(li.y),vi(li.x+li.width),vi(li.y+li.height)].join(" ")+"]"}),Vi.push({key:"Matrix",value:"["+li.matrix.toString()+"]"});var Cr=li.pages[1].join(`
`);la({data:Cr,additionalKeyValues:Vi,objectId:li.objectNumber}),Ki("endobj")},Xc=function(){for(var li in qs)qs.hasOwnProperty(li)&&Yc(qs[li])},Ad=function(li,Vi){var Cr,Tr=[],jr=1/(Vi-1);for(Cr=0;Cr<1;Cr+=jr)Tr.push(Cr);if(Tr.push(1),li[0].offset!=0){var Kr={offset:0,color:li[0].color};li.unshift(Kr)}if(li[li.length-1].offset!=1){var as={offset:1,color:li[li.length-1].color};li.push(as)}for(var _s="",ws=0,Gs=0;Gs<Tr.length;Gs++){for(Cr=Tr[Gs];Cr>li[ws+1].offset;)ws++;var Os=li[ws].offset,Vs=(Cr-Os)/(li[ws+1].offset-Os),Io=li[ws].color,xo=li[ws+1].color;_s+=dr(Math.round((1-Vs)*Io[0]+Vs*xo[0]).toString(16))+dr(Math.round((1-Vs)*Io[1]+Vs*xo[1]).toString(16))+dr(Math.round((1-Vs)*Io[2]+Vs*xo[2]).toString(16))}return _s.trim()},mh=function(li,Vi){Vi||(Vi=21);var Cr=Ws(),Tr=Ad(li.colors,Vi),jr=[];jr.push({key:"FunctionType",value:"0"}),jr.push({key:"Domain",value:"[0.0 1.0]"}),jr.push({key:"Size",value:"["+Vi+"]"}),jr.push({key:"BitsPerSample",value:"8"}),jr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),la({data:Tr,additionalKeyValues:jr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Cr}),Ki("endobj"),li.objectNumber=Ws(),Ki("<< /ShadingType "+li.type),Ki("/ColorSpace /DeviceRGB");var Kr="/Coords ["+vi(parseFloat(li.coords[0]))+" "+vi(parseFloat(li.coords[1]))+" ";li.type===2?Kr+=vi(parseFloat(li.coords[2]))+" "+vi(parseFloat(li.coords[3])):Kr+=vi(parseFloat(li.coords[2]))+" "+vi(parseFloat(li.coords[3]))+" "+vi(parseFloat(li.coords[4]))+" "+vi(parseFloat(li.coords[5])),Ki(Kr+="]"),li.matrix&&Ki("/Matrix ["+li.matrix.toString()+"]"),Ki("/Function "+Cr+" 0 R"),Ki("/Extend [true true]"),Ki(">>"),Ki("endobj")},vh=function(li,Vi){var Cr=yo(),Tr=Ws();Vi.push({resourcesOid:Cr,objectOid:Tr}),li.objectNumber=Tr;var jr=[];jr.push({key:"Type",value:"/Pattern"}),jr.push({key:"PatternType",value:"1"}),jr.push({key:"PaintType",value:"1"}),jr.push({key:"TilingType",value:"1"}),jr.push({key:"BBox",value:"["+li.boundingBox.map(vi).join(" ")+"]"}),jr.push({key:"XStep",value:vi(li.xStep)}),jr.push({key:"YStep",value:vi(li.yStep)}),jr.push({key:"Resources",value:Cr+" 0 R"}),li.matrix&&jr.push({key:"Matrix",value:"["+li.matrix.toString()+"]"}),la({data:li.stream,additionalKeyValues:jr,objectId:li.objectNumber}),Ki("endobj")},Kc=function(li){var Vi;for(Vi in Es)Es.hasOwnProperty(Vi)&&(Es[Vi]instanceof B?mh(Es[Vi]):Es[Vi]instanceof M&&vh(Es[Vi],li))},Ed=function(li){for(var Vi in li.objectNumber=Ws(),Ki("<<"),li)switch(Vi){case"opacity":Ki("/ca "+Fi(li[Vi]));break;case"stroke-opacity":Ki("/CA "+Fi(li[Vi]))}Ki(">>"),Ki("endobj")},yh=function(){var li;for(li in xs)xs.hasOwnProperty(li)&&Ed(xs[li])},xu=function(){for(var li in Ki("/XObject <<"),qs)qs.hasOwnProperty(li)&&qs[li].objectNumber>=0&&Ki("/"+li+" "+qs[li].objectNumber+" 0 R");Is.publish("putXobjectDict"),Ki(">>")},_h=function(){pa.oid=Ws(),Ki("<<"),Ki("/Filter /Standard"),Ki("/V "+pa.v),Ki("/R "+pa.r),Ki("/U <"+pa.toHexString(pa.U)+">"),Ki("/O <"+pa.toHexString(pa.O)+">"),Ki("/P "+pa.P),Ki(">>"),Ki("endobj")},Sd=function(){for(var li in Ki("/Font <<"),Ls)Ls.hasOwnProperty(li)&&(Sn===!1||Sn===!0&&Tn.hasOwnProperty(li))&&Ki("/"+li+" "+Ls[li].objectNumber+" 0 R");Ki(">>")},Ch=function(){if(Object.keys(Es).length>0){for(var li in Ki("/Shading <<"),Es)Es.hasOwnProperty(li)&&Es[li]instanceof B&&Es[li].objectNumber>=0&&Ki("/"+li+" "+Es[li].objectNumber+" 0 R");Is.publish("putShadingPatternDict"),Ki(">>")}},Zc=function(li){if(Object.keys(Es).length>0){for(var Vi in Ki("/Pattern <<"),Es)Es.hasOwnProperty(Vi)&&Es[Vi]instanceof Ln.TilingPattern&&Es[Vi].objectNumber>=0&&Es[Vi].objectNumber<li&&Ki("/"+Vi+" "+Es[Vi].objectNumber+" 0 R");Is.publish("putTilingPatternDict"),Ki(">>")}},Ah=function(){if(Object.keys(xs).length>0){var li;for(li in Ki("/ExtGState <<"),xs)xs.hasOwnProperty(li)&&xs[li].objectNumber>=0&&Ki("/"+li+" "+xs[li].objectNumber+" 0 R");Is.publish("putGStateDict"),Ki(">>")}},ko=function(li){Co(li.resourcesOid,!0),Ki("<<"),Ki("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Sd(),Ch(),Zc(li.objectOid),Ah(),xu(),Ki(">>"),Ki("endobj")},bd=function(){var li=[];Wc(),yh(),Xc(),Kc(li),Is.publish("putResources"),li.forEach(ko),ko({resourcesOid:Pa,objectOid:Number.MAX_SAFE_INTEGER}),Is.publish("postPutResources")},Id=function(){Is.publish("putAdditionalObjects");for(var li=0;li<Ar.length;li++){var Vi=Ar[li];Co(Vi.objId,!0),Ki(Vi.content),Ki("endobj")}Is.publish("postPutAdditionalObjects")},wd=function(li){ps[li.fontName]=ps[li.fontName]||{},ps[li.fontName][li.fontStyle]=li.id},Lu=function(li,Vi,Cr,Tr,jr){var Kr={id:"F"+(Object.keys(Ls).length+1).toString(10),postScriptName:li,fontName:Vi,fontStyle:Cr,encoding:Tr,isStandardFont:jr||!1,metadata:{}};return Is.publish("addFont",{font:Kr,instance:this}),Ls[Kr.id]=Kr,wd(Kr),Kr.id},Eh=function(li){for(var Vi=0,Cr=Ir.length;Vi<Cr;Vi++){var Tr=Lu.call(this,li[Vi][0],li[Vi][1],li[Vi][2],Ir[Vi][3],!0);Sn===!1&&(Tn[Tr]=!0);var jr=li[Vi][0].split("-");wd({id:Tr,fontName:jr[0],fontStyle:jr[1]||""})}Is.publish("addFonts",{fonts:Ls,dictionary:ps})},wl=function(li){return li.foo=function(){try{return li.apply(this,arguments)}catch(Tr){var Vi=Tr.stack||"";~Vi.indexOf(" at ")&&(Vi=Vi.split(" at ")[1]);var Cr="Error in function "+Vi.split(`
`)[0].split("<")[0]+": "+Tr.message;if(!n.console)throw new Error(Cr);n.console.error(Cr,Tr),n.alert&&alert(Cr)}},li.foo.bar=li,li.foo},Jc=function(li,Vi){var Cr,Tr,jr,Kr,as,_s,ws,Gs,Os;if(jr=(Vi=Vi||{}).sourceEncoding||"Unicode",as=Vi.outputEncoding,(Vi.autoencode||as)&&Ls[cs].metadata&&Ls[cs].metadata[jr]&&Ls[cs].metadata[jr].encoding&&(Kr=Ls[cs].metadata[jr].encoding,!as&&Ls[cs].encoding&&(as=Ls[cs].encoding),!as&&Kr.codePages&&(as=Kr.codePages[0]),typeof as=="string"&&(as=Kr[as]),as)){for(ws=!1,_s=[],Cr=0,Tr=li.length;Cr<Tr;Cr++)(Gs=as[li.charCodeAt(Cr)])?_s.push(String.fromCharCode(Gs)):_s.push(li[Cr]),_s[Cr].charCodeAt(0)>>8&&(ws=!0);li=_s.join("")}for(Cr=li.length;ws===void 0&&Cr!==0;)li.charCodeAt(Cr-1)>>8&&(ws=!0),Cr--;if(!ws)return li;for(_s=Vi.noBOM?[]:[254,255],Cr=0,Tr=li.length;Cr<Tr;Cr++){if((Os=(Gs=li.charCodeAt(Cr))>>8)>>8)throw new Error("Character at position "+Cr+" of string '"+li+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_s.push(Os),_s.push(Gs-(Os<<8))}return String.fromCharCode.apply(void 0,_s)},La=Ln.__private__.pdfEscape=Ln.pdfEscape=function(li,Vi){return Jc(li,Vi).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ru=Ln.__private__.beginPage=function(li){Vr[++Fs]=[],Ss[Fs]={objId:0,contentsObjId:0,userUnit:Number(We),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(li[0]),topRightY:Number(li[1])}},xd(Fs),lr(Vr[ur])},Pd=function(li,Vi){var Cr,Tr,jr;switch(Te=Vi||Te,typeof li=="string"&&(Cr=ti(li.toLowerCase()),Array.isArray(Cr)&&(Tr=Cr[0],jr=Cr[1])),Array.isArray(li)&&(Tr=li[0]*Qr,jr=li[1]*Qr),isNaN(Tr)&&(Tr=Be[0],jr=Be[1]),(Tr>14400||jr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Tr=Math.min(14400,Tr),jr=Math.min(14400,jr)),Be=[Tr,jr],Te.substr(0,1)){case"l":jr>Tr&&(Be=[jr,Tr]);break;case"p":Tr>jr&&(Be=[jr,Tr])}Ru(Be),Nd(Ou),Ki(kl),Fu!==0&&Ki(Fu+" J"),Gu!==0&&Ki(Gu+" j"),Is.publish("addPage",{pageNumber:Fs})},Sh=function(li){li>0&&li<=Fs&&(Vr.splice(li,1),Ss.splice(li,1),Fs--,ur>Fs&&(ur=Fs),this.setPage(ur))},xd=function(li){li>0&&li<=Fs&&(ur=li)},bh=Ln.__private__.getNumberOfPages=Ln.getNumberOfPages=function(){return Vr.length-1},Td=function(li,Vi,Cr){var Tr,jr=void 0;return Cr=Cr||{},li=li!==void 0?li:Ls[cs].fontName,Vi=Vi!==void 0?Vi:Ls[cs].fontStyle,Tr=li.toLowerCase(),ps[Tr]!==void 0&&ps[Tr][Vi]!==void 0?jr=ps[Tr][Vi]:ps[li]!==void 0&&ps[li][Vi]!==void 0?jr=ps[li][Vi]:Cr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+li+"', '"+Vi+"'. Refer to getFontList() for available fonts."),jr||Cr.noFallback||(jr=ps.times[Vi])==null&&(jr=ps.times.normal),jr},Ih=Ln.__private__.putInfo=function(){var li=Ws(),Vi=function(Tr){return Tr};for(var Cr in En!==null&&(Vi=pa.encryptor(li,0)),Ki("<<"),Ki("/Producer ("+La(Vi("jsPDF "+E.version))+")"),Xr)Xr.hasOwnProperty(Cr)&&Xr[Cr]&&Ki("/"+Cr.substr(0,1).toUpperCase()+Cr.substr(1)+" ("+La(Vi(Xr[Cr]))+")");Ki("/CreationDate ("+La(Vi(nr))+")"),Ki(">>"),Ki("endobj")},Mu=Ln.__private__.putCatalog=function(li){var Vi=(li=li||{}).rootDictionaryObjId||ma;switch(Ws(),Ki("<<"),Ki("/Type /Catalog"),Ki("/Pages "+Vi+" 0 R"),Lr||(Lr="fullwidth"),Lr){case"fullwidth":Ki("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ki("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ki("/OpenAction [3 0 R /Fit]");break;case"original":Ki("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Cr=""+Lr;Cr.substr(Cr.length-1)==="%"&&(Lr=parseInt(Lr)/100),typeof Lr=="number"&&Ki("/OpenAction [3 0 R /XYZ null null "+Fi(Lr)+"]")}switch(Br||(Br="continuous"),Br){case"continuous":Ki("/PageLayout /OneColumn");break;case"single":Ki("/PageLayout /SinglePage");break;case"two":case"twoleft":Ki("/PageLayout /TwoColumnLeft");break;case"tworight":Ki("/PageLayout /TwoColumnRight")}Sr&&Ki("/PageMode /"+Sr),Is.publish("putCatalog"),Ki(">>"),Ki("endobj")},wh=Ln.__private__.putTrailer=function(){Ki("trailer"),Ki("<<"),Ki("/Size "+(vr+1)),Ki("/Root "+vr+" 0 R"),Ki("/Info "+(vr-1)+" 0 R"),En!==null&&Ki("/Encrypt "+pa.oid+" 0 R"),Ki("/ID [ <"+er+"> <"+er+"> ]"),Ki(">>")},Ph=Ln.__private__.putHeader=function(){Ki("%PDF-"+Bn),Ki("%")},xh=Ln.__private__.putXRef=function(){var li="0000000000";Ki("xref"),Ki("0 "+(vr+1)),Ki("0000000000 65535 f ");for(var Vi=1;Vi<=vr;Vi++)typeof hr[Vi]=="function"?Ki((li+hr[Vi]()).slice(-10)+" 00000 n "):hr[Vi]!==void 0?Ki((li+hr[Vi]).slice(-10)+" 00000 n "):Ki("0000000000 00000 n ")},cc=Ln.__private__.buildDocument=function(){gr(),lr(mr),Is.publish("buildDocument"),Ph(),Nc(),Id(),bd(),En!==null&&_h(),Ih(),Mu();var li=_r;return xh(),wh(),Ki("startxref"),Ki(""+li),Ki("%%EOF"),lr(Vr[ur]),mr.join(`
`)},Qc=Ln.__private__.getBlob=function(li){return new Blob([Nr(li)],{type:"application/pdf"})},eu=Ln.output=Ln.__private__.output=wl(function(li,Vi){switch(typeof(Vi=Vi||{})=="string"?Vi={filename:Vi}:Vi.filename=Vi.filename||"generated.pdf",li){case void 0:return cc();case"save":Ln.save(Vi.filename);break;case"arraybuffer":return Nr(cc());case"blob":return Qc(cc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Qc(cc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Cr="",Tr=cc();try{Cr=h(Tr)}catch{Cr=h(unescape(encodeURIComponent(Tr)))}return"data:application/pdf;filename="+Vi.filename+";base64,"+Cr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var jr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Vi.pdfObjectUrl&&(jr=Vi.pdfObjectUrl,Kr="");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+jr+'"'+Kr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Vi)+");<\/script></body></html>",_s=n.open();return _s!==null&&_s.document.write(as),_s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ws='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Vi.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Vi.filename+'" width="500px" height="400px" /></body></html>',Gs=n.open();if(Gs!==null){Gs.document.write(ws);var Os=this;Gs.document.documentElement.querySelector("#pdfViewer").onload=function(){Gs.document.title=Vi.filename,Gs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Os.output("bloburl"))}}return Gs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Vi)+'"></iframe></body></html>',Io=n.open();if(Io!==null&&(Io.document.write(Vs),Io.document.title=Vi.filename),Io||typeof safari>"u")return Io;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Vi);default:return null}}),Ld=function(li){return Array.isArray(oa)===!0&&oa.indexOf(li)>-1};switch(Oe){case"pt":Qr=1;break;case"mm":Qr=72/25.4;break;case"cm":Qr=72/2.54;break;case"in":Qr=72;break;case"px":Qr=Ld("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qr=12;break;case"ex":Qr=6;break;default:if(typeof Oe!="number")throw new Error("Invalid unit: "+Oe);Qr=Oe}var pa=null;br(),ar();var Th=function(li){return En!==null?pa.encryptor(li,0):function(Vi){return Vi}},Rd=Ln.__private__.getPageInfo=Ln.getPageInfo=function(li){if(isNaN(li)||li%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ss[li].objId,pageNumber:li,pageContext:Ss[li]}},Ns=Ln.__private__.getPageInfoByObjId=function(li){if(isNaN(li)||li%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Vi in Ss)if(Ss[Vi].objId===li)break;return Rd(Vi)},Lh=Ln.__private__.getCurrentPageInfo=Ln.getCurrentPageInfo=function(){return{objId:Ss[ur].objId,pageNumber:ur,pageContext:Ss[ur]}};Ln.addPage=function(){return Pd.apply(this,arguments),this},Ln.setPage=function(){return xd.apply(this,arguments),lr.call(this,Vr[ur]),this},Ln.insertPage=function(li){return this.addPage(),this.movePage(ur,li),this},Ln.movePage=function(li,Vi){var Cr,Tr;if(li>Vi){Cr=Vr[li],Tr=Ss[li];for(var jr=li;jr>Vi;jr--)Vr[jr]=Vr[jr-1],Ss[jr]=Ss[jr-1];Vr[Vi]=Cr,Ss[Vi]=Tr,this.setPage(Vi)}else if(li<Vi){Cr=Vr[li],Tr=Ss[li];for(var Kr=li;Kr<Vi;Kr++)Vr[Kr]=Vr[Kr+1],Ss[Kr]=Ss[Kr+1];Vr[Vi]=Cr,Ss[Vi]=Tr,this.setPage(Vi)}return this},Ln.deletePage=function(){return Sh.apply(this,arguments),this},Ln.__private__.text=Ln.text=function(li,Vi,Cr,Tr,jr){var Kr,as,_s,ws,Gs,Os,Vs,Io,xo,Jo=(Tr=Tr||{}).scope||this;if(typeof li=="number"&&typeof Vi=="number"&&(typeof Cr=="string"||Array.isArray(Cr))){var ga=Cr;Cr=Vi,Vi=li,li=ga}if(arguments[3]instanceof As?(pi("The transform parameter of text() with a Matrix value"),xo=jr):(_s=arguments[4],ws=arguments[5],_typeof(Vs=arguments[3])==="object"&&Vs!==null||(typeof _s=="string"&&(ws=_s,_s=null),typeof Vs=="string"&&(ws=Vs,Vs=null),typeof Vs=="number"&&(_s=Vs,Vs=null),Tr={flags:Vs,angle:_s,align:ws})),isNaN(Vi)||isNaN(Cr)||li==null)throw new Error("Invalid arguments passed to jsPDF.text");if(li.length===0)return Jo;var ia="",Dl=!1,Ga=typeof Tr.lineHeightFactor=="number"?Tr.lineHeightFactor:Dc,sc=Jo.internal.scaleFactor;function Ud(ho){return ho=ho.split("	").join(Array(Tr.TabLen||9).join(" ")),La(ho,Vs)}function zu(ho){for(var go,$o=ho.concat(),na=[],pc=$o.length;pc--;)typeof(go=$o.shift())=="string"?na.push(go):Array.isArray(ho)&&(go.length===1||go[1]===void 0&&go[2]===void 0)?na.push(go[0]):na.push([go[0],go[1],go[2]]);return na}function $u(ho,go){var $o;if(typeof ho=="string")$o=go(ho)[0];else if(Array.isArray(ho)){for(var na,pc,Ju=ho.concat(),vu=[],Yd=Ju.length;Yd--;)typeof(na=Ju.shift())=="string"?vu.push(go(na)[0]):Array.isArray(na)&&typeof na[0]=="string"&&(pc=go(na[0],na[1],na[2]),vu.push([pc[0],pc[1],pc[2]]));$o=vu}return $o}var au=!1,Hu=!0;if(typeof li=="string")au=!0;else if(Array.isArray(li)){var qu=li.concat();as=[];for(var cu,ca=qu.length;ca--;)(typeof(cu=qu.shift())!="string"||Array.isArray(cu)&&typeof cu[0]!="string")&&(Hu=!1);au=Hu}if(au===!1)throw new Error('Type of text must be string or Array. "'+li+'" is not recognized.');typeof li=="string"&&(li=li.match(/[\r?\n]/)?li.split(/\r\n|\r|\n/g):[li]);var uu=kr/Jo.internal.scaleFactor,du=uu*(Ga-1);switch(Tr.baseline){case"bottom":Cr-=du;break;case"top":Cr+=uu-du;break;case"hanging":Cr+=uu-2*du;break;case"middle":Cr+=uu/2-du}if((Os=Tr.maxWidth||0)>0&&(typeof li=="string"?li=Jo.splitTextToSize(li,Os):Object.prototype.toString.call(li)==="[object Array]"&&(li=li.reduce(function(ho,go){return ho.concat(Jo.splitTextToSize(go,Os))},[]))),Kr={text:li,x:Vi,y:Cr,options:Tr,mutex:{pdfEscape:La,activeFontKey:cs,fonts:Ls,activeFontSize:kr}},Is.publish("preProcessText",Kr),li=Kr.text,_s=(Tr=Kr.options).angle,!(xo instanceof As)&&_s&&typeof _s=="number"){_s*=Math.PI/180,Tr.rotationDirection===0&&(_s=-_s),oi===ri.ADVANCED&&(_s=-_s);var hu=Math.cos(_s),Wu=Math.sin(_s);xo=new As(hu,Wu,-Wu,hu,0,0)}else _s&&_s instanceof As&&(xo=_s);oi!==ri.ADVANCED||xo||(xo=Us),(Gs=Tr.charSpace||iu)!==void 0&&(ia+=vi(ui(Gs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Io=Tr.horizontalScale)!==void 0&&(ia+=vi(100*Io)+` Tz
`),Tr.lang;var Ra=-1,Uh=Tr.renderingMode!==void 0?Tr.renderingMode:Tr.stroke,Yu=Jo.internal.getCurrentPageInfo().pageContext;switch(Uh){case 0:case!1:case"fill":Ra=0;break;case 1:case!0:case"stroke":Ra=1;break;case 2:case"fillThenStroke":Ra=2;break;case 3:case"invisible":Ra=3;break;case 4:case"fillAndAddForClipping":Ra=4;break;case 5:case"strokeAndAddPathForClipping":Ra=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ra=6;break;case 7:case"addToPathForClipping":Ra=7}var jd=Yu.usedRenderingMode!==void 0?Yu.usedRenderingMode:-1;Ra!==-1?ia+=Ra+` Tr
`:jd!==-1&&(ia+=`0 Tr
`),Ra!==-1&&(Yu.usedRenderingMode=Ra),ws=Tr.align||"left";var Wa,fu=kr*Ga,Vd=Jo.internal.pageSize.getWidth(),$d=Ls[cs];Gs=Tr.charSpace||iu,Os=Tr.maxWidth||0,Vs=Object.assign({autoencode:!0,noBOM:!0},Tr.flags);var Ac=[],Bc=function(ho){return Jo.getStringUnitWidth(ho,{font:$d,charSpace:Gs,fontSize:kr,doKerning:!1})*kr/sc};if(Object.prototype.toString.call(li)==="[object Array]"){var Ma;as=zu(li),ws!=="left"&&(Wa=as.map(Bc));var va,Ec=0;if(ws==="right"){Vi-=Wa[0],li=[],ca=as.length;for(var dc=0;dc<ca;dc++)dc===0?(va=rc(Vi),Ma=uc(Cr)):(va=ui(Ec-Wa[dc]),Ma=-fu),li.push([as[dc],va,Ma]),Ec=Wa[dc]}else if(ws==="center"){Vi-=Wa[0]/2,li=[],ca=as.length;for(var hc=0;hc<ca;hc++)hc===0?(va=rc(Vi),Ma=uc(Cr)):(va=ui((Ec-Wa[hc])/2),Ma=-fu),li.push([as[hc],va,Ma]),Ec=Wa[hc]}else if(ws==="left"){li=[],ca=as.length;for(var pu=0;pu<ca;pu++)li.push(as[pu])}else if(ws==="justify"&&$d.encoding==="Identity-H"){li=[],ca=as.length,Os=Os!==0?Os:Vd;for(var fc=0,Do=0;Do<ca;Do++)if(Ma=Do===0?uc(Cr):-fu,va=Do===0?rc(Vi):fc,Do<ca-1){var Xu=ui((Os-Wa[Do])/(as[Do].split(" ").length-1)),ya=as[Do].split(" ");li.push([ya[0]+" ",va,Ma]),fc=0;for(var Ya=1;Ya<ya.length;Ya++){var gu=(Bc(ya[Ya-1]+" "+ya[Ya])-Bc(ya[Ya]))*sc+Xu;Ya==ya.length-1?li.push([ya[Ya],gu,0]):li.push([ya[Ya]+" ",gu,0]),fc-=gu}}else li.push([as[Do],va,Ma]);li.push(["",fc,0])}else{if(ws!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(li=[],ca=as.length,Os=Os!==0?Os:Vd,Do=0;Do<ca;Do++)Ma=Do===0?uc(Cr):-fu,va=Do===0?rc(Vi):0,Do<ca-1?Ac.push(vi(ui((Os-Wa[Do])/(as[Do].split(" ").length-1)))):Ac.push(0),li.push([as[Do],va,Ma])}}var Wd=typeof Tr.R2L=="boolean"?Tr.R2L:Er;Wd===!0&&(li=$u(li,function(ho,go,$o){return[ho.split("").reverse().join(""),go,$o]})),Kr={text:li,x:Vi,y:Cr,options:Tr,mutex:{pdfEscape:La,activeFontKey:cs,fonts:Ls,activeFontSize:kr}},Is.publish("postProcessText",Kr),li=Kr.text,Dl=Kr.mutex.isHex||!1;var Ku=Ls[cs].encoding;Ku!=="WinAnsiEncoding"&&Ku!=="StandardEncoding"||(li=$u(li,function(ho,go,$o){return[Ud(ho),go,$o]})),as=zu(li),li=[];for(var Uc,jc,Sc,Vc=0,mu=1,zc=Array.isArray(as[0])?mu:Vc,bc="",Zu=function(ho,go,$o){var na="";return $o instanceof As?($o=typeof Tr.angle=="number"?bo($o,new As(1,0,0,1,ho,go)):bo(new As(1,0,0,1,ho,go),$o),oi===ri.ADVANCED&&($o=bo(new As(1,0,0,-1,0,0),$o)),na=$o.join(" ")+` Tm
`):na=vi(ho)+" "+vi(go)+` Td
`,na},Xa=0;Xa<as.length;Xa++){switch(bc="",zc){case mu:Sc=(Dl?"<":"(")+as[Xa][0]+(Dl?">":")"),Uc=parseFloat(as[Xa][1]),jc=parseFloat(as[Xa][2]);break;case Vc:Sc=(Dl?"<":"(")+as[Xa]+(Dl?">":")"),Uc=rc(Vi),jc=uc(Cr)}Ac!==void 0&&Ac[Xa]!==void 0&&(bc=Ac[Xa]+` Tw
`),Xa===0?li.push(bc+Zu(Uc,jc,xo)+Sc):zc===Vc?li.push(bc+Sc):zc===mu&&li.push(bc+Zu(Uc,jc,xo)+Sc)}li=zc===Vc?li.join(` Tj
T* `):li.join(` Tj
`),li+=` Tj
`;var Ka=`BT
/`;return Ka+=cs+" "+kr+` Tf
`,Ka+=vi(kr*Ga)+` TL
`,Ka+=Fc+`
`,Ka+=ia,Ka+=li,Ki(Ka+="ET"),Tn[cs]=!0,Jo};var Rh=Ln.__private__.clip=Ln.clip=function(li){return Ki(li==="evenodd"?"W*":"W"),this};Ln.clipEvenOdd=function(){return Rh("evenodd")},Ln.__private__.discardPath=Ln.discardPath=function(){return Ki("n"),this};var ic=Ln.__private__.isValidStyle=function(li){var Vi=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(li)!==-1&&(Vi=!0),Vi};Ln.__private__.setDefaultPathOperation=Ln.setDefaultPathOperation=function(li){return ic(li)&&(An=li),this};var Md=Ln.__private__.getStyle=Ln.getStyle=function(li){var Vi=An;switch(li){case"D":case"S":Vi="S";break;case"F":Vi="f";break;case"FD":case"DF":Vi="B";break;case"f":case"f*":case"B":case"B*":Vi=li}return Vi},kd=Ln.close=function(){return Ki("h"),this};Ln.stroke=function(){return Ki("S"),this},Ln.fill=function(li){return tu("f",li),this},Ln.fillEvenOdd=function(li){return tu("f*",li),this},Ln.fillStroke=function(li){return tu("B",li),this},Ln.fillStrokeEvenOdd=function(li){return tu("B*",li),this};var tu=function(li,Vi){_typeof(Vi)==="object"?kh(Vi,li):Ki(li)},ku=function(li){li===null||oi===ri.ADVANCED&&li===void 0||(li=Md(li),Ki(li))};function Mh(li,Vi,Cr,Tr,jr){var Kr=new M(Vi||this.boundingBox,Cr||this.xStep,Tr||this.yStep,this.gState,jr||this.matrix);Kr.stream=this.stream;var as=li+"$$"+this.cloneIndex+++"$$";return zs(as,Kr),Kr}var kh=function(li,Vi){var Cr=Ds[li.key],Tr=Es[Cr];if(Tr instanceof B)Ki("q"),Ki(Nh(Vi)),Tr.gState&&Ln.setGState(Tr.gState),Ki(li.matrix.toString()+" cm"),Ki("/"+Cr+" sh"),Ki("Q");else if(Tr instanceof M){var jr=new As(1,0,0,-1,0,Cc());li.matrix&&(jr=jr.multiply(li.matrix||Us),Cr=Mh.call(Tr,li.key,li.boundingBox,li.xStep,li.yStep,jr).id),Ki("q"),Ki("/Pattern cs"),Ki("/"+Cr+" scn"),Tr.gState&&Ln.setGState(Tr.gState),Ki(Vi),Ki("Q")}},Nh=function(li){switch(li){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Nu=Ln.moveTo=function(li,Vi){return Ki(vi(ui(li))+" "+vi(Ni(Vi))+" m"),this},Oc=Ln.lineTo=function(li,Vi){return Ki(vi(ui(li))+" "+vi(Ni(Vi))+" l"),this},yc=Ln.curveTo=function(li,Vi,Cr,Tr,jr,Kr){return Ki([vi(ui(li)),vi(Ni(Vi)),vi(ui(Cr)),vi(Ni(Tr)),vi(ui(jr)),vi(Ni(Kr)),"c"].join(" ")),this};Ln.__private__.line=Ln.line=function(li,Vi,Cr,Tr,jr){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||isNaN(Tr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.line");return oi===ri.COMPAT?this.lines([[Cr-li,Tr-Vi]],li,Vi,[1,1],jr||"S"):this.lines([[Cr-li,Tr-Vi]],li,Vi,[1,1]).stroke()},Ln.__private__.lines=Ln.lines=function(li,Vi,Cr,Tr,jr,Kr){var as,_s,ws,Gs,Os,Vs,Io,xo,Jo,ga,ia,Dl;if(typeof li=="number"&&(Dl=Cr,Cr=Vi,Vi=li,li=Dl),Tr=Tr||[1,1],Kr=Kr||!1,isNaN(Vi)||isNaN(Cr)||!Array.isArray(li)||!Array.isArray(Tr)||!ic(jr)||typeof Kr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Nu(Vi,Cr),as=Tr[0],_s=Tr[1],Gs=li.length,ga=Vi,ia=Cr,ws=0;ws<Gs;ws++)(Os=li[ws]).length===2?(ga=Os[0]*as+ga,ia=Os[1]*_s+ia,Oc(ga,ia)):(Vs=Os[0]*as+ga,Io=Os[1]*_s+ia,xo=Os[2]*as+ga,Jo=Os[3]*_s+ia,ga=Os[4]*as+ga,ia=Os[5]*_s+ia,yc(Vs,Io,xo,Jo,ga,ia));return Kr&&kd(),ku(jr),this},Ln.path=function(li){for(var Vi=0;Vi<li.length;Vi++){var Cr=li[Vi],Tr=Cr.c;switch(Cr.op){case"m":Nu(Tr[0],Tr[1]);break;case"l":Oc(Tr[0],Tr[1]);break;case"c":yc.apply(this,Tr);break;case"h":kd()}}return this},Ln.__private__.rect=Ln.rect=function(li,Vi,Cr,Tr,jr){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||isNaN(Tr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.rect");return oi===ri.COMPAT&&(Tr=-Tr),Ki([vi(ui(li)),vi(Ni(Vi)),vi(ui(Cr)),vi(ui(Tr)),"re"].join(" ")),ku(jr),this},Ln.__private__.triangle=Ln.triangle=function(li,Vi,Cr,Tr,jr,Kr,as){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||isNaN(Tr)||isNaN(jr)||isNaN(Kr)||!ic(as))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Cr-li,Tr-Vi],[jr-Cr,Kr-Tr],[li-jr,Vi-Kr]],li,Vi,[1,1],as,!0),this},Ln.__private__.roundedRect=Ln.roundedRect=function(li,Vi,Cr,Tr,jr,Kr,as){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||isNaN(Tr)||isNaN(jr)||isNaN(Kr)||!ic(as))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _s=4/3*(Math.SQRT2-1);return jr=Math.min(jr,.5*Cr),Kr=Math.min(Kr,.5*Tr),this.lines([[Cr-2*jr,0],[jr*_s,0,jr,Kr-Kr*_s,jr,Kr],[0,Tr-2*Kr],[0,Kr*_s,-jr*_s,Kr,-jr,Kr],[2*jr-Cr,0],[-jr*_s,0,-jr,-Kr*_s,-jr,-Kr],[0,2*Kr-Tr],[0,-Kr*_s,jr*_s,-Kr,jr,-Kr]],li+jr,Vi,[1,1],as,!0),this},Ln.__private__.ellipse=Ln.ellipse=function(li,Vi,Cr,Tr,jr){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||isNaN(Tr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kr=4/3*(Math.SQRT2-1)*Cr,as=4/3*(Math.SQRT2-1)*Tr;return Nu(li+Cr,Vi),yc(li+Cr,Vi-as,li+Kr,Vi-Tr,li,Vi-Tr),yc(li-Kr,Vi-Tr,li-Cr,Vi-as,li-Cr,Vi),yc(li-Cr,Vi+as,li-Kr,Vi+Tr,li,Vi+Tr),yc(li+Kr,Vi+Tr,li+Cr,Vi+as,li+Cr,Vi),ku(jr),this},Ln.__private__.circle=Ln.circle=function(li,Vi,Cr,Tr){if(isNaN(li)||isNaN(Vi)||isNaN(Cr)||!ic(Tr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(li,Vi,Cr,Cr,Tr)},Ln.setFont=function(li,Vi,Cr){return Cr&&(Vi=Pi(Vi,Cr)),cs=Td(li,Vi,{disableWarning:!1}),this};var Oh=Ln.__private__.getFont=Ln.getFont=function(){return Ls[Td.apply(Ln,arguments)]};Ln.__private__.getFontList=Ln.getFontList=function(){var li,Vi,Cr={};for(li in ps)if(ps.hasOwnProperty(li))for(Vi in Cr[li]=[],ps[li])ps[li].hasOwnProperty(Vi)&&Cr[li].push(Vi);return Cr},Ln.addFont=function(li,Vi,Cr,Tr,jr){var Kr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kr.indexOf(arguments[3])!==-1?jr=arguments[3]:arguments[3]&&Kr.indexOf(arguments[3])==-1&&(Cr=Pi(Cr,Tr)),jr=jr||"Identity-H",Lu.call(this,li,Vi,Cr,jr)};var Dc,Ou=ke.lineWidth||.200025,nu=Ln.__private__.getLineWidth=Ln.getLineWidth=function(){return Ou},Nd=Ln.__private__.setLineWidth=Ln.setLineWidth=function(li){return Ou=li,Ki(vi(ui(li))+" w"),this};Ln.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(li,Vi){if(li=li||[],Vi=Vi||0,isNaN(Vi)||!Array.isArray(li))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return li=li.map(function(Cr){return vi(ui(Cr))}).join(" "),Vi=vi(ui(Vi)),Ki("["+li+"] "+Vi+" d"),this};var Od=Ln.__private__.getLineHeight=Ln.getLineHeight=function(){return kr*Dc};Ln.__private__.getLineHeight=Ln.getLineHeight=function(){return kr*Dc};var Dd=Ln.__private__.setLineHeightFactor=Ln.setLineHeightFactor=function(li){return typeof(li=li||1.15)=="number"&&(Dc=li),this},Fd=Ln.__private__.getLineHeightFactor=Ln.getLineHeightFactor=function(){return Dc};Dd(ke.lineHeight);var rc=Ln.__private__.getHorizontalCoordinate=function(li){return ui(li)},uc=Ln.__private__.getVerticalCoordinate=function(li){return oi===ri.ADVANCED?li:Ss[ur].mediaBox.topRightY-Ss[ur].mediaBox.bottomLeftY-ui(li)},Dh=Ln.__private__.getHorizontalCoordinateString=Ln.getHorizontalCoordinateString=function(li){return vi(rc(li))},_c=Ln.__private__.getVerticalCoordinateString=Ln.getVerticalCoordinateString=function(li){return vi(uc(li))},kl=ke.strokeColor||"0 G";Ln.__private__.getStrokeColor=Ln.getDrawColor=function(){return Fa(kl)},Ln.__private__.setStrokeColor=Ln.setDrawColor=function(li,Vi,Cr,Tr){return kl=xa({ch1:li,ch2:Vi,ch3:Cr,ch4:Tr,pdfColorType:"draw",precision:2}),Ki(kl),this};var Du=ke.fillColor||"0 g";Ln.__private__.getFillColor=Ln.getFillColor=function(){return Fa(Du)},Ln.__private__.setFillColor=Ln.setFillColor=function(li,Vi,Cr,Tr){return Du=xa({ch1:li,ch2:Vi,ch3:Cr,ch4:Tr,pdfColorType:"fill",precision:2}),Ki(Du),this};var Fc=ke.textColor||"0 g",Fh=Ln.__private__.getTextColor=Ln.getTextColor=function(){return Fa(Fc)};Ln.__private__.setTextColor=Ln.setTextColor=function(li,Vi,Cr,Tr){return Fc=xa({ch1:li,ch2:Vi,ch3:Cr,ch4:Tr,pdfColorType:"text",precision:3}),this};var iu=ke.charSpace,Gh=Ln.__private__.getCharSpace=Ln.getCharSpace=function(){return parseFloat(iu||0)};Ln.__private__.setCharSpace=Ln.setCharSpace=function(li){if(isNaN(li))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return iu=li,this};var Fu=0;Ln.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ln.__private__.setLineCap=Ln.setLineCap=function(li){var Vi=Ln.CapJoinStyles[li];if(Vi===void 0)throw new Error("Line cap style of '"+li+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fu=Vi,Ki(Vi+" J"),this};var Gu=0;Ln.__private__.setLineJoin=Ln.setLineJoin=function(li){var Vi=Ln.CapJoinStyles[li];if(Vi===void 0)throw new Error("Line join style of '"+li+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gu=Vi,Ki(Vi+" j"),this},Ln.__private__.setLineMiterLimit=Ln.__private__.setMiterLimit=Ln.setLineMiterLimit=Ln.setMiterLimit=function(li){if(li=li||0,isNaN(li))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ki(vi(ui(li))+" M"),this},Ln.GState=j,Ln.setGState=function(li){(li=typeof li=="string"?xs[Xs[li]]:Gd(null,li)).equals(_o)||(Ki("/"+li.id+" gs"),_o=li)};var Gd=function(li,Vi){if(!li||!Xs[li]){var Cr=!1;for(var Tr in xs)if(xs.hasOwnProperty(Tr)&&xs[Tr].equals(Vi)){Cr=!0;break}if(Cr)Vi=xs[Tr];else{var jr="GS"+(Object.keys(xs).length+1).toString(10);xs[jr]=Vi,Vi.id=jr}return li&&(Xs[li]=Vi.id),Is.publish("addGState",Vi),Vi}};Ln.addGState=function(li,Vi){return Gd(li,Vi),this},Ln.saveGraphicsState=function(){return Ki("q"),Ps.push({key:cs,size:kr,color:Fc}),this},Ln.restoreGraphicsState=function(){Ki("Q");var li=Ps.pop();return cs=li.key,kr=li.size,Fc=li.color,_o=null,this},Ln.setCurrentTransformationMatrix=function(li){return Ki(li.toString()+" cm"),this},Ln.comment=function(li){return Ki("#"+li),this};var ru=function(li,Vi){var Cr=li||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Cr},set:function(Kr){isNaN(Kr)||(Cr=parseFloat(Kr))}});var Tr=Vi||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Tr},set:function(Kr){isNaN(Kr)||(Tr=parseFloat(Kr))}});var jr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return jr},set:function(Kr){jr=Kr.toString()}}),this},Bu=function(li,Vi,Cr,Tr){ru.call(this,li,Vi),this.type="rect";var jr=Cr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return jr},set:function(as){isNaN(as)||(jr=parseFloat(as))}});var Kr=Tr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kr},set:function(as){isNaN(as)||(Kr=parseFloat(as))}}),this},Uu=function(){this.page=Fs,this.currentPage=ur,this.pages=Vr.slice(0),this.pagesContext=Ss.slice(0),this.x=bs,this.y=vs,this.matrix=Ms,this.width=Gc(ur),this.height=Cc(ur),this.outputDestination=Hi,this.id="",this.objectNumber=-1};Uu.prototype.restore=function(){Fs=this.page,ur=this.currentPage,Ss=this.pagesContext,Vr=this.pages,bs=this.x,vs=this.y,Ms=this.matrix,ju(ur,this.width),Vu(ur,this.height),Hi=this.outputDestination};var Bd=function(li,Vi,Cr,Tr,jr){Rs.push(new Uu),Fs=ur=0,Vr=[],bs=li,vs=Vi,Ms=jr,Ru([Cr,Tr])},Bh=function(li){if(Eo[li])Rs.pop().restore();else{var Vi=new Uu,Cr="Xo"+(Object.keys(qs).length+1).toString(10);Vi.id=Cr,Eo[li]=Cr,qs[Cr]=Vi,Is.publish("addFormObject",Vi),Rs.pop().restore()}};for(var su in Ln.beginFormObject=function(li,Vi,Cr,Tr,jr){return Bd(li,Vi,Cr,Tr,jr),this},Ln.endFormObject=function(li){return Bh(li),this},Ln.doFormObject=function(li,Vi){var Cr=qs[Eo[li]];return Ki("q"),Ki(Vi.toString()+" cm"),Ki("/"+Cr.id+" Do"),Ki("Q"),this},Ln.getFormObject=function(li){var Vi=qs[Eo[li]];return{x:Vi.x,y:Vi.y,width:Vi.width,height:Vi.height,matrix:Vi.matrix}},Ln.save=function(li,Vi){return li=li||"generated.pdf",(Vi=Vi||{}).returnPromise=Vi.returnPromise||!1,Vi.returnPromise===!1?(l(Qc(cc()),li),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Cr,Tr){try{var jr=l(Qc(cc()),li);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Cr(jr)}catch(Kr){Tr(Kr.message)}})},E.API)E.API.hasOwnProperty(su)&&(su==="events"&&E.API.events.length?function(li,Vi){var Cr,Tr,jr;for(jr=Vi.length-1;jr!==-1;jr--)Cr=Vi[jr][0],Tr=Vi[jr][1],li.subscribe.apply(li,[Cr].concat(typeof Tr=="function"?[Tr]:Tr))}(Is,E.API.events):Ln[su]=E.API[su]);var Gc=Ln.getPageWidth=function(li){return(Ss[li=li||ur].mediaBox.topRightX-Ss[li].mediaBox.bottomLeftX)/Qr},ju=Ln.setPageWidth=function(li,Vi){Ss[li].mediaBox.topRightX=Vi*Qr+Ss[li].mediaBox.bottomLeftX},Cc=Ln.getPageHeight=function(li){return(Ss[li=li||ur].mediaBox.topRightY-Ss[li].mediaBox.bottomLeftY)/Qr},Vu=Ln.setPageHeight=function(li,Vi){Ss[li].mediaBox.topRightY=Vi*Qr+Ss[li].mediaBox.bottomLeftY};return Ln.internal={pdfEscape:La,getStyle:Md,getFont:Oh,getFontSize:Pr,getCharSpace:Gh,getTextColor:Fh,getLineHeight:Od,getLineHeightFactor:Fd,getLineWidth:nu,write:Dr,getHorizontalCoordinate:rc,getVerticalCoordinate:uc,getCoordinateString:Dh,getVerticalCoordinateString:_c,collections:{},newObject:Ws,newAdditionalObject:qa,newObjectDeferred:yo,newObjectDeferredBegin:Co,getFilters:aa,putStream:la,events:Is,scaleFactor:Qr,pageSize:{getWidth:function(){return Gc(ur)},setWidth:function(li){ju(ur,li)},getHeight:function(){return Cc(ur)},setHeight:function(li){Vu(ur,li)}},encryptionOptions:En,encryption:pa,getEncryptor:Th,output:eu,getNumberOfPages:bh,pages:Vr,out:Ki,f2:Fi,f3:fi,getPageInfo:Rd,getPageInfoByObjId:Ns,getCurrentPageInfo:Lh,getPDFVersion:ei,Point:ru,Rectangle:Bu,Matrix:As,hasHotfix:Ld},Object.defineProperty(Ln.internal.pageSize,"width",{get:function(){return Gc(ur)},set:function(li){ju(ur,li)},enumerable:!0,configurable:!0}),Object.defineProperty(Ln.internal.pageSize,"height",{get:function(){return Cc(ur)},set:function(li){Vu(ur,li)},enumerable:!0,configurable:!0}),Eh.call(Ln,Ir),cs="F1",Pd(Be,Te),Is.publish("initialized"),Ln}I.prototype.lsbFirstWord=function(ke){return String.fromCharCode(ke>>0&255,ke>>8&255,ke>>16&255,ke>>24&255)},I.prototype.toHexString=function(ke){return ke.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(ke){for(var e=[],Te=0;Te<ke.length;Te+=2)e.push(String.fromCharCode(parseInt(ke.substr(Te,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(ke,e){return P(x(e).substr(0,5),ke)},I.prototype.encryptor=function(ke,e){var Te=x(this.encryptionKey+String.fromCharCode(255&ke,ke>>8&255,ke>>16&255,255&e,e>>8&255)).substr(0,10);return function(Oe){return P(Te,Oe)}},j.prototype.equals=function(ke){var e,Te="id,objectNumber,equals";if(!ke||_typeof(ke)!==_typeof(this))return!1;var Oe=0;for(e in this)if(!(Te.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!ke.hasOwnProperty(e)||this[e]!==ke[e])return!1;Oe++}for(e in ke)ke.hasOwnProperty(e)&&Te.indexOf(e)<0&&Oe--;return Oe===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(ke){return ke.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(ke){return ke.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(ke){return ke.toFixed(2)},z=function(ke){return ke.toFixed(5)};q.__acroform__={};var H=function(ke,e){ke.prototype=Object.create(e.prototype),ke.prototype.constructor=ke},W=function(ke){return ke*D},V=function(ke){var e=new ut,Te=At.internal.getHeight(ke)||0,Oe=At.internal.getWidth(ke)||0;return e.BBox=[0,0,Number(U(Oe)),Number(U(Te))],e},G=q.__acroform__.setBit=function(ke,e){if(ke=ke||0,e=e||0,isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return ke|=1<<e},Y=q.__acroform__.clearBit=function(ke,e){if(ke=ke||0,e=e||0,isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return ke&=~(1<<e)},J=q.__acroform__.getBit=function(ke,e){if(isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return ke&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(ke,e){if(isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(ke,e-1)},K=q.__acroform__.setBitForPdf=function(ke,e){if(isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(ke,e-1)},Z=q.__acroform__.clearBitForPdf=function(ke,e){if(isNaN(ke)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(ke,e-1)},$=q.__acroform__.calculateCoordinates=function(ke,e){var Te=e.internal.getHorizontalCoordinate,Oe=e.internal.getVerticalCoordinate,Be=ke[0],Ue=ke[1],He=ke[2],We=ke[3],Cn={};return Cn.lowerLeft_X=Te(Be)||0,Cn.lowerLeft_Y=Oe(Ue+We)||0,Cn.upperRight_X=Te(Be+He)||0,Cn.upperRight_Y=Oe(Ue)||0,[Number(U(Cn.lowerLeft_X)),Number(U(Cn.lowerLeft_Y)),Number(U(Cn.upperRight_X)),Number(U(Cn.upperRight_Y))]},Q=function(ke){if(ke.appearanceStreamContent)return ke.appearanceStreamContent;if(ke.V||ke.DV){var e=[],Te=ke._V||ke.DV,Oe=tt(ke,Te),Be=ke.scope.internal.getFont(ke.fontName,ke.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(ke.scope.__private__.encodeColorString(ke.color)),e.push("/"+Be+" "+U(Oe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(Oe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ue=V(ke);return Ue.scope=ke.scope,Ue.stream=e.join(`
`),Ue}},tt=function(ke,e){var Te=ke.fontSize===0?ke.maxFontSize:ke.fontSize,Oe={text:"",fontSize:""},Be=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Be=ke.multiline?Be.map(function(fi){return fi.split(`
`)}):Be.map(function(fi){return[fi]});var Ue=Te,He=At.internal.getHeight(ke)||0;He=He<0?-He:He;var We=At.internal.getWidth(ke)||0;We=We<0?-We:We;var Cn=function(fi,ui,Oi){if(fi+1<Be.length){var Ni=ui+" "+Be[fi+1][0];return et(Ni,ke,Oi).width<=We-4}return!1};Ue++;e:for(;Ue>0;){e="",Ue--;var An,En,Sn=et("3",ke,Ue).height,Tn=ke.multiline?He-Ue:(He-Sn)/2,Ln=Tn+=2,Bn=0,ei=0,ni=0;if(Ue<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,ke,Ue=12).width+", FieldWidth:"+We+`
`;break}for(var ti="",ri=0,oi=0;oi<Be.length;oi++)if(Be.hasOwnProperty(oi)){var ai=!1;if(Be[oi].length!==1&&ni!==Be[oi].length-1){if((Sn+2)*(ri+2)+2>He)continue e;ti+=Be[oi][ni],ai=!0,ei=oi,oi--}else{ti=(ti+=Be[oi][ni]+" ").substr(ti.length-1)==" "?ti.substr(0,ti.length-1):ti;var ci=parseInt(oi),Pi=Cn(ci,ti,Ue),vi=oi>=Be.length-1;if(Pi&&!vi){ti+=" ",ni=0;continue}if(Pi||vi){if(vi)ei=ci;else if(ke.multiline&&(Sn+2)*(ri+2)+2>He)continue e}else{if(!ke.multiline||(Sn+2)*(ri+2)+2>He)continue e;ei=ci}}for(var pi="",Mi=Bn;Mi<=ei;Mi++){var Fi=Be[Mi];if(ke.multiline){if(Mi===ei){pi+=Fi[ni]+" ",ni=(ni+1)%Fi.length;continue}if(Mi===Bn){pi+=Fi[Fi.length-1]+" ";continue}}pi+=Fi[0]+" "}switch(pi=pi.substr(pi.length-1)==" "?pi.substr(0,pi.length-1):pi,En=et(pi,ke,Ue).width,ke.textAlign){case"right":An=We-En-2;break;case"center":An=(We-En)/2;break;case"left":default:An=2}e+=U(An)+" "+U(Ln)+` Td
`,e+="("+R(pi)+`) Tj
`,e+=-U(An)+` 0 Td
`,Ln=-(Ue+2),En=0,Bn=ai?ei:ei+1,ri++,ti=""}break}return Oe.text=e,Oe.fontSize=Ue,Oe},et=function(ke,e,Te){var Oe=e.scope.internal.getFont(e.fontName,e.fontStyle),Be=e.scope.getStringUnitWidth(ke,{font:Oe,fontSize:parseFloat(Te),charSpace:0})*parseFloat(Te);return{height:e.scope.getStringUnitWidth("3",{font:Oe,fontSize:parseFloat(Te),charSpace:0})*parseFloat(Te)*1.5,width:Be}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(ke,e){var Te={type:"reference",object:ke};e.internal.getPageInfo(ke.page).pageContext.annotations.find(function(Oe){return Oe.type===Te.type&&Oe.object===Te.object})===void 0&&e.internal.getPageInfo(ke.page).pageContext.annotations.push(Te)},it=function(ke,e){for(var Te in ke)if(ke.hasOwnProperty(Te)){var Oe=Te,Be=ke[Te];e.internal.newObjectDeferredBegin(Be.objId,!0),_typeof(Be)==="object"&&typeof Be.putStream=="function"&&Be.putStream(),delete ke[Oe]}},at=function(ke,e){if(e.scope=ke,ke.internal!==void 0&&(ke.internal.acroformPlugin===void 0||ke.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,ke.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),ke.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=ke.internal.scaleFactor,ke.internal.acroformPlugin.acroFormDictionaryRoot=new ht,ke.internal.acroformPlugin.acroFormDictionaryRoot.scope=ke,ke.internal.acroformPlugin.acroFormDictionaryRoot._eventID=ke.internal.events.subscribe("postPutResources",function(){(function(Te){Te.internal.events.unsubscribe(Te.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete Te.internal.acroformPlugin.acroFormDictionaryRoot._eventID,Te.internal.acroformPlugin.printedOut=!0})(ke)}),ke.internal.events.subscribe("buildDocument",function(){(function(Te){Te.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Oe=Te.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Be in Oe)if(Oe.hasOwnProperty(Be)){var Ue=Oe[Be];Ue.objId=void 0,Ue.hasAnnotation&&nt(Ue,Te)}})(ke)}),ke.internal.events.subscribe("putCatalog",function(){(function(Te){if(Te.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");Te.internal.write("/AcroForm "+Te.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(ke)}),ke.internal.events.subscribe("postPutPages",function(Te){(function(Oe,Be){var Ue=!Oe;for(var He in Oe||(Be.internal.newObjectDeferredBegin(Be.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Be.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Oe=Oe||Be.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Oe.hasOwnProperty(He)){var We=Oe[He],Cn=[],An=We.Rect;if(We.Rect&&(We.Rect=$(We.Rect,Be)),Be.internal.newObjectDeferredBegin(We.objId,!0),We.DA=At.createDefaultAppearanceStream(We),_typeof(We)==="object"&&typeof We.getKeyValueListForStream=="function"&&(Cn=We.getKeyValueListForStream()),We.Rect=An,We.hasAppearanceStream&&!We.appearanceStreamContent){var En=Q(We);Cn.push({key:"AP",value:"<</N "+En+">>"}),Be.internal.acroformPlugin.xForms.push(En)}if(We.appearanceStreamContent){var Sn="";for(var Tn in We.appearanceStreamContent)if(We.appearanceStreamContent.hasOwnProperty(Tn)){var Ln=We.appearanceStreamContent[Tn];if(Sn+="/"+Tn+" ",Sn+="<<",Object.keys(Ln).length>=1||Array.isArray(Ln)){for(var He in Ln)if(Ln.hasOwnProperty(He)){var Bn=Ln[He];typeof Bn=="function"&&(Bn=Bn.call(Be,We)),Sn+="/"+He+" "+Bn+" ",Be.internal.acroformPlugin.xForms.indexOf(Bn)>=0||Be.internal.acroformPlugin.xForms.push(Bn)}}else typeof(Bn=Ln)=="function"&&(Bn=Bn.call(Be,We)),Sn+="/"+He+" "+Bn,Be.internal.acroformPlugin.xForms.indexOf(Bn)>=0||Be.internal.acroformPlugin.xForms.push(Bn);Sn+=">>"}Cn.push({key:"AP",value:`<<
`+Sn+">>"})}Be.internal.putStream({additionalKeyValues:Cn,objectId:We.objId}),Be.internal.out("endobj")}Ue&&it(Be.internal.acroformPlugin.xForms,Be)})(Te,ke)}),ke.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(ke,e,Te){var Oe=function(He){return He};if(Array.isArray(ke)){for(var Be="[",Ue=0;Ue<ke.length;Ue++)switch(Ue!==0&&(Be+=" "),_typeof(ke[Ue])){case"boolean":case"number":case"object":Be+=ke[Ue].toString();break;case"string":ke[Ue].substr(0,1)!=="/"?(e!==void 0&&Te&&(Oe=Te.internal.getEncryptor(e)),Be+="("+R(Oe(ke[Ue].toString()))+")"):Be+=ke[Ue].toString()}return Be+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(ke,e,Te){var Oe=function(Be){return Be};return e!==void 0&&Te&&(Oe=Te.internal.getEncryptor(e)),(ke=ke||"").toString(),ke="("+R(Oe(ke))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(ke){this._objId=ke}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var ke=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:ke,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var ke=[],e=Object.getOwnPropertyNames(this).filter(function(Ue){return Ue!="content"&&Ue!="appearanceStreamContent"&&Ue!="scope"&&Ue!="objId"&&Ue.substring(0,1)!="_"});for(var Te in e)if(Object.getOwnPropertyDescriptor(this,e[Te]).configurable===!1){var Oe=e[Te],Be=this[Oe];Be&&(Array.isArray(Be)?ke.push({key:Oe,value:ot(Be,this.objId,this.scope)}):Be instanceof ct?(Be.scope=this.scope,ke.push({key:Oe,value:Be.objId+" 0 R"})):typeof Be!="function"&&ke.push({key:Oe,value:Be}))}return ke};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var ke,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(Te){e=Te}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(Te){ke=Te.trim()},get:function(){return ke||null}})};H(ut,ct);var ht=function(){ct.call(this);var ke,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(ke){var Te=function(Oe){return Oe};return this.scope&&(Te=this.scope.internal.getEncryptor(this.objId)),"("+R(Te(ke))+")"}},set:function(Te){ke=Te}})};H(ht,ct);var lt=function ke(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(ti){if(isNaN(ti))throw new Error('Invalid value "'+ti+'" for attribute F supplied.');e=ti}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(ti){ti?this.F=K(e,3):this.F=Z(e,3)}});var Te=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(ti){if(isNaN(ti))throw new Error('Invalid value "'+ti+'" for attribute Ff supplied.');Te=ti}});var Oe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Oe.length!==0)return Oe},set:function(ti){Oe=ti!==void 0?ti:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[0])?0:Oe[0]},set:function(ti){Oe[0]=ti}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[1])?0:Oe[1]},set:function(ti){Oe[1]=ti}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[2])?0:Oe[2]},set:function(ti){Oe[2]=ti}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[3])?0:Oe[3]},set:function(ti){Oe[3]=ti}});var Be="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Be},set:function(ti){switch(ti){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Be=ti;break;default:throw new Error('Invalid value "'+ti+'" for attribute FT supplied.')}}});var Ue=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ue||Ue.length<1){if(this instanceof yt)return;Ue="FieldObject"+ke.FieldNum++}var ti=function(ri){return ri};return this.scope&&(ti=this.scope.internal.getEncryptor(this.objId)),"("+R(ti(Ue))+")"},set:function(ti){Ue=ti.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ue},set:function(ti){Ue=ti}});var He="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return He},set:function(ti){He=ti}});var We="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return We},set:function(ti){We=ti}});var Cn=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Cn},set:function(ti){Cn=ti}});var An=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return An===void 0?50/D:An},set:function(ti){An=ti}});var En="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return En},set:function(ti){En=ti}});var Sn="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Sn||this instanceof yt||this instanceof Nt))return st(Sn,this.objId,this.scope)},set:function(ti){ti=ti.toString(),Sn=ti}});var Tn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Tn)return this instanceof mt?Tn:st(Tn,this.objId,this.scope)},set:function(ti){ti=ti.toString(),Tn=this instanceof mt?ti:ti.substr(0,1)==="("?T(ti.substr(1,ti.length-2)):T(ti)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Tn.substr(1,Tn.length-1)):Tn},set:function(ti){ti=ti.toString(),Tn=this instanceof mt?"/"+ti:ti}});var Ln=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ln)return Ln},set:function(ti){this.V=ti}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ln)return this instanceof mt?Ln:st(Ln,this.objId,this.scope)},set:function(ti){ti=ti.toString(),Ln=this instanceof mt?ti:ti.substr(0,1)==="("?T(ti.substr(1,ti.length-2)):T(ti)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ln.substr(1,Ln.length-1)):Ln},set:function(ti){ti=ti.toString(),Ln=this instanceof mt?"/"+ti:ti}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Bn,ei=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return ei},set:function(ti){ti=!!ti,ei=ti}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Bn)return Bn},set:function(ti){Bn=ti}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(ti){ti?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(ti){ti?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(ti){ti?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var ni=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(ni!==null)return ni},set:function(ti){if([0,1,2].indexOf(ti)===-1)throw new Error('Invalid value "'+ti+'" for attribute Q supplied.');ni=ti}}),Object.defineProperty(this,"textAlign",{get:function(){var ti;switch(ni){case 0:default:ti="left";break;case 1:ti="center";break;case 2:ti="right"}return ti},configurable:!0,enumerable:!0,set:function(ti){switch(ti){case"right":case 2:ni=2;break;case"center":case 1:ni=1;break;case"left":case 0:default:ni=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var ke=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return ke},set:function(Te){ke=Te}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return ke},set:function(Te){ke=Te}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(Te){var Oe,Be;Be=[],typeof(Oe=Te)=="string"&&(Be=function(Ue,He,We){We||(We=1);for(var Cn,An=[];Cn=He.exec(Ue);)An.push(Cn[We]);return An}(Oe,/\((.*?)\)/g)),e=Be}}),this.getOptions=function(){return e},this.setOptions=function(Te){e=Te,this.sort&&e.sort()},this.addOption=function(Te){Te=(Te=Te||"").toString(),e.push(Te),this.sort&&e.sort()},this.removeOption=function(Te,Oe){for(Oe=Oe||!1,Te=(Te=Te||"").toString();e.indexOf(Te)!==-1&&(e.splice(e.indexOf(Te),1),Oe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(Te){Te?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(Te){this.combo===!0&&(Te?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(Te){Te?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(Te){Te?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(Te){Te?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(Te){Te?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(Te){Te?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(Te){Te?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(Te){Te?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(Te){Te?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var ke,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Te=function(Ue){return Ue};if(this.scope&&(Te=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var Oe,Be=[];for(Oe in Be.push("<<"),e)Be.push("/"+Oe+" ("+R(Te(e[Oe]))+")");return Be.push(">>"),Be.join(`
`)}},set:function(Te){_typeof(Te)==="object"&&(e=Te)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(Te){typeof Te=="string"&&(e.CA=Te)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return ke},set:function(Te){ke=Te}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return ke.substr(1,ke.length-1)},set:function(Te){ke="/"+Te}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var ke=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return ke},set:function(e){ke=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var ke,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return ke},set:function(Be){ke=Be}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Be){e=Be}});var Te,Oe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Be=function(We){return We};this.scope&&(Be=this.scope.internal.getEncryptor(this.objId));var Ue,He=[];for(Ue in He.push("<<"),Oe)He.push("/"+Ue+" ("+R(Be(Oe[Ue]))+")");return He.push(">>"),He.join(`
`)},set:function(Be){_typeof(Be)==="object"&&(Oe=Be)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Oe.CA||""},set:function(Be){typeof Be=="string"&&(Oe.CA=Be)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(Be){Te=Be}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Te.substr(1,Te.length-1)},set:function(Be){Te="/"+Be}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(ke){if(!("createAppearanceStream"in ke)||!("getCA"in ke))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var Te=this.Kids[e];Te.appearanceStreamContent=ke.createAppearanceStream(Te.optionName),Te.caption=ke.getCA()}},bt.prototype.createOption=function(ke){var e=new yt;return e.Parent=this,e.optionName=ke,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var ke=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return ke},set:function(e){ke=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return ke},set:function(e){Number.isInteger(e)&&(ke=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(ke){ke?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[],Oe=ke.scope.internal.getFont(ke.fontName,ke.fontStyle).id,Be=ke.scope.__private__.encodeColorString(ke.color),Ue=tt(ke,ke.caption);return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(ke))+" "+U(At.internal.getHeight(ke))+" re"),Te.push("f"),Te.push("BMC"),Te.push("q"),Te.push("0 0 1 rg"),Te.push("/"+Oe+" "+U(Ue.fontSize)+" Tf "+Be),Te.push("BT"),Te.push(Ue.text),Te.push("ET"),Te.push("Q"),Te.push("EMC"),e.stream=Te.join(`
`),e},YesNormal:function(ke){var e=V(ke);e.scope=ke.scope;var Te=ke.scope.internal.getFont(ke.fontName,ke.fontStyle).id,Oe=ke.scope.__private__.encodeColorString(ke.color),Be=[],Ue=At.internal.getHeight(ke),He=At.internal.getWidth(ke),We=tt(ke,ke.caption);return Be.push("1 g"),Be.push("0 0 "+U(He)+" "+U(Ue)+" re"),Be.push("f"),Be.push("q"),Be.push("0 0 1 rg"),Be.push("0 0 "+U(He-1)+" "+U(Ue-1)+" re"),Be.push("W"),Be.push("n"),Be.push("0 g"),Be.push("BT"),Be.push("/"+Te+" "+U(We.fontSize)+" Tf "+Oe),Be.push(We.text),Be.push("ET"),Be.push("Q"),e.stream=Be.join(`
`),e},OffPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[];return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(ke))+" "+U(At.internal.getHeight(ke))+" re"),Te.push("f"),e.stream=Te.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(ke){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[ke]=At.RadioButton.Circle.YesNormal,e.D[ke]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[],Oe=At.internal.getWidth(ke)<=At.internal.getHeight(ke)?At.internal.getWidth(ke)/4:At.internal.getHeight(ke)/4;Oe=Number((.9*Oe).toFixed(5));var Be=At.internal.Bezier_C,Ue=Number((Oe*Be).toFixed(5));return Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(ke)/2)+" "+z(At.internal.getHeight(ke)/2)+" cm"),Te.push(Oe+" 0 m"),Te.push(Oe+" "+Ue+" "+Ue+" "+Oe+" 0 "+Oe+" c"),Te.push("-"+Ue+" "+Oe+" -"+Oe+" "+Ue+" -"+Oe+" 0 c"),Te.push("-"+Oe+" -"+Ue+" -"+Ue+" -"+Oe+" 0 -"+Oe+" c"),Te.push(Ue+" -"+Oe+" "+Oe+" -"+Ue+" "+Oe+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e},YesPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[],Oe=At.internal.getWidth(ke)<=At.internal.getHeight(ke)?At.internal.getWidth(ke)/4:At.internal.getHeight(ke)/4;Oe=Number((.9*Oe).toFixed(5));var Be=Number((2*Oe).toFixed(5)),Ue=Number((Be*At.internal.Bezier_C).toFixed(5)),He=Number((Oe*At.internal.Bezier_C).toFixed(5));return Te.push("0.749023 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(ke)/2)+" "+z(At.internal.getHeight(ke)/2)+" cm"),Te.push(Be+" 0 m"),Te.push(Be+" "+Ue+" "+Ue+" "+Be+" 0 "+Be+" c"),Te.push("-"+Ue+" "+Be+" -"+Be+" "+Ue+" -"+Be+" 0 c"),Te.push("-"+Be+" -"+Ue+" -"+Ue+" -"+Be+" 0 -"+Be+" c"),Te.push(Ue+" -"+Be+" "+Be+" -"+Ue+" "+Be+" 0 c"),Te.push("f"),Te.push("Q"),Te.push("0 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(ke)/2)+" "+z(At.internal.getHeight(ke)/2)+" cm"),Te.push(Oe+" 0 m"),Te.push(Oe+" "+He+" "+He+" "+Oe+" 0 "+Oe+" c"),Te.push("-"+He+" "+Oe+" -"+Oe+" "+He+" -"+Oe+" 0 c"),Te.push("-"+Oe+" -"+He+" -"+He+" -"+Oe+" 0 -"+Oe+" c"),Te.push(He+" -"+Oe+" "+Oe+" -"+He+" "+Oe+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e},OffPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[],Oe=At.internal.getWidth(ke)<=At.internal.getHeight(ke)?At.internal.getWidth(ke)/4:At.internal.getHeight(ke)/4;Oe=Number((.9*Oe).toFixed(5));var Be=Number((2*Oe).toFixed(5)),Ue=Number((Be*At.internal.Bezier_C).toFixed(5));return Te.push("0.749023 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(ke)/2)+" "+z(At.internal.getHeight(ke)/2)+" cm"),Te.push(Be+" 0 m"),Te.push(Be+" "+Ue+" "+Ue+" "+Be+" 0 "+Be+" c"),Te.push("-"+Ue+" "+Be+" -"+Be+" "+Ue+" -"+Be+" 0 c"),Te.push("-"+Be+" -"+Ue+" -"+Ue+" -"+Be+" 0 -"+Be+" c"),Te.push(Ue+" -"+Be+" "+Be+" -"+Ue+" "+Be+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e}},Cross:{createAppearanceStream:function(ke){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[ke]=At.RadioButton.Cross.YesNormal,e.D[ke]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[],Oe=At.internal.calculateCross(ke);return Te.push("q"),Te.push("1 1 "+U(At.internal.getWidth(ke)-2)+" "+U(At.internal.getHeight(ke)-2)+" re"),Te.push("W"),Te.push("n"),Te.push(U(Oe.x1.x)+" "+U(Oe.x1.y)+" m"),Te.push(U(Oe.x2.x)+" "+U(Oe.x2.y)+" l"),Te.push(U(Oe.x4.x)+" "+U(Oe.x4.y)+" m"),Te.push(U(Oe.x3.x)+" "+U(Oe.x3.y)+" l"),Te.push("s"),Te.push("Q"),e.stream=Te.join(`
`),e},YesPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=At.internal.calculateCross(ke),Oe=[];return Oe.push("0.749023 g"),Oe.push("0 0 "+U(At.internal.getWidth(ke))+" "+U(At.internal.getHeight(ke))+" re"),Oe.push("f"),Oe.push("q"),Oe.push("1 1 "+U(At.internal.getWidth(ke)-2)+" "+U(At.internal.getHeight(ke)-2)+" re"),Oe.push("W"),Oe.push("n"),Oe.push(U(Te.x1.x)+" "+U(Te.x1.y)+" m"),Oe.push(U(Te.x2.x)+" "+U(Te.x2.y)+" l"),Oe.push(U(Te.x4.x)+" "+U(Te.x4.y)+" m"),Oe.push(U(Te.x3.x)+" "+U(Te.x3.y)+" l"),Oe.push("s"),Oe.push("Q"),e.stream=Oe.join(`
`),e},OffPushDown:function(ke){var e=V(ke);e.scope=ke.scope;var Te=[];return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(ke))+" "+U(At.internal.getHeight(ke))+" re"),Te.push("f"),e.stream=Te.join(`
`),e}}},createDefaultAppearanceStream:function(ke){var e=ke.scope.internal.getFont(ke.fontName,ke.fontStyle).id,Te=ke.scope.__private__.encodeColorString(ke.color);return"/"+e+" "+ke.fontSize+" Tf "+Te}};At.internal={Bezier_C:.551915024494,calculateCross:function(ke){var e=At.internal.getWidth(ke),Te=At.internal.getHeight(ke),Oe=Math.min(e,Te);return{x1:{x:(e-Oe)/2,y:(Te-Oe)/2+Oe},x2:{x:(e-Oe)/2+Oe,y:(Te-Oe)/2},x3:{x:(e-Oe)/2,y:(Te-Oe)/2},x4:{x:(e-Oe)/2+Oe,y:(Te-Oe)/2+Oe}}}},At.internal.getWidth=function(ke){var e=0;return _typeof(ke)==="object"&&(e=W(ke.Rect[2])),e},At.internal.getHeight=function(ke){var e=0;return _typeof(ke)==="object"&&(e=W(ke.Rect[3])),e};var xt=q.addField=function(ke){if(at(this,ke),!(ke instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=ke).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),ke.page=ke.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(ke){return ke.reduce(function(e,Te,Oe){return e[Te]=Oe,e},{})}(function(ke){ke.__addimage__={};var e="UNKNOWN",Te={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Oe=ke.__addimage__.getImageFileTypeByImageData=function(fi,ui){var Oi,Ni,nr,er,cr,ar=e;if((ui=ui||e)==="RGBA"||fi.data!==void 0&&fi.data instanceof Uint8ClampedArray&&"height"in fi&&"width"in fi)return"RGBA";if(Pi(fi))for(cr in Te)for(nr=Te[cr],Oi=0;Oi<nr.length;Oi+=1){for(er=!0,Ni=0;Ni<nr[Oi].length;Ni+=1)if(nr[Oi][Ni]!==void 0&&nr[Oi][Ni]!==fi[Ni]){er=!1;break}if(er===!0){ar=cr;break}}else for(cr in Te)for(nr=Te[cr],Oi=0;Oi<nr.length;Oi+=1){for(er=!0,Ni=0;Ni<nr[Oi].length;Ni+=1)if(nr[Oi][Ni]!==void 0&&nr[Oi][Ni]!==fi.charCodeAt(Ni)){er=!1;break}if(er===!0){ar=cr;break}}return ar===e&&ui!==e&&(ar=ui),ar},Be=function fi(ui){for(var Oi=this.internal.write,Ni=this.internal.putStream,nr=(0,this.internal.getFilters)();nr.indexOf("FlateEncode")!==-1;)nr.splice(nr.indexOf("FlateEncode"),1);ui.objectId=this.internal.newObject();var er=[];if(er.push({key:"Type",value:"/XObject"}),er.push({key:"Subtype",value:"/Image"}),er.push({key:"Width",value:ui.width}),er.push({key:"Height",value:ui.height}),ui.colorSpace===ni.INDEXED?er.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ui.palette.length/3-1)+" "+("sMask"in ui&&ui.sMask!==void 0?ui.objectId+2:ui.objectId+1)+" 0 R]"}):(er.push({key:"ColorSpace",value:"/"+ui.colorSpace}),ui.colorSpace===ni.DEVICE_CMYK&&er.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),er.push({key:"BitsPerComponent",value:ui.bitsPerComponent}),"decodeParameters"in ui&&ui.decodeParameters!==void 0&&er.push({key:"DecodeParms",value:"<<"+ui.decodeParameters+">>"}),"transparency"in ui&&Array.isArray(ui.transparency)){for(var cr="",ar=0,pr=ui.transparency.length;ar<pr;ar++)cr+=ui.transparency[ar]+" "+ui.transparency[ar]+" ";er.push({key:"Mask",value:"["+cr+"]"})}ui.sMask!==void 0&&er.push({key:"SMask",value:ui.objectId+1+" 0 R"});var rr=ui.filter!==void 0?["/"+ui.filter]:void 0;if(Ni({data:ui.data,additionalKeyValues:er,alreadyAppliedFilters:rr,objectId:ui.objectId}),Oi("endobj"),"sMask"in ui&&ui.sMask!==void 0){var br="/Predictor "+ui.predictor+" /Colors 1 /BitsPerComponent "+ui.bitsPerComponent+" /Columns "+ui.width,Li={width:ui.width,height:ui.height,colorSpace:"DeviceGray",bitsPerComponent:ui.bitsPerComponent,decodeParameters:br,data:ui.sMask};"filter"in ui&&(Li.filter=ui.filter),fi.call(this,Li)}if(ui.colorSpace===ni.INDEXED){var ur=this.internal.newObject();Ni({data:pi(new Uint8Array(ui.palette)),objectId:ur}),Oi("endobj")}},Ue=function(){var fi=this.internal.collections.addImage_images;for(var ui in fi)Be.call(this,fi[ui])},He=function(){var fi,ui=this.internal.collections.addImage_images,Oi=this.internal.write;for(var Ni in ui)Oi("/I"+(fi=ui[Ni]).index,fi.objectId,"0","R")},We=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ue),this.internal.events.subscribe("putXobjectDict",He))},Cn=function(){var fi=this.internal.collections.addImage_images;return We.call(this),fi},An=function(){return Object.keys(this.internal.collections.addImage_images).length},En=function(fi){return typeof ke["process"+fi.toUpperCase()]=="function"},Sn=function(fi){return _typeof(fi)==="object"&&fi.nodeType===1},Tn=function(fi,ui){if(fi.nodeName==="IMG"&&fi.hasAttribute("src")){var Oi=""+fi.getAttribute("src");if(Oi.indexOf("data:image/")===0)return u(unescape(Oi).split("base64,").pop());var Ni=ke.loadFile(Oi,!0);if(Ni!==void 0)return Ni}if(fi.nodeName==="CANVAS"){if(fi.width===0||fi.height===0)throw new Error("Given canvas must have data. Canvas width: "+fi.width+", height: "+fi.height);var nr;switch(ui){case"PNG":nr="image/png";break;case"WEBP":nr="image/webp";break;case"JPEG":case"JPG":default:nr="image/jpeg"}return u(fi.toDataURL(nr,1).split("base64,").pop())}},Ln=function(fi){var ui=this.internal.collections.addImage_images;if(ui){for(var Oi in ui)if(fi===ui[Oi].alias)return ui[Oi]}},Bn=function(fi,ui,Oi){return fi||ui||(fi=-96,ui=-96),fi<0&&(fi=-1*Oi.width*72/fi/this.internal.scaleFactor),ui<0&&(ui=-1*Oi.height*72/ui/this.internal.scaleFactor),fi===0&&(fi=ui*Oi.width/Oi.height),ui===0&&(ui=fi*Oi.height/Oi.width),[fi,ui]},ei=function(fi,ui,Oi,Ni,nr,er){var cr=Bn.call(this,Oi,Ni,nr),ar=this.internal.getCoordinateString,pr=this.internal.getVerticalCoordinateString,rr=Cn.call(this);if(Oi=cr[0],Ni=cr[1],rr[nr.index]=nr,er){er*=Math.PI/180;var br=Math.cos(er),Li=Math.sin(er),ur=function(dr){return dr.toFixed(4)},sr=[ur(br),ur(Li),ur(-1*Li),ur(br),0,0,"cm"]}this.internal.write("q"),er?(this.internal.write([1,"0","0",1,ar(fi),pr(ui+Ni),"cm"].join(" ")),this.internal.write(sr.join(" ")),this.internal.write([ar(Oi),"0","0",ar(Ni),"0","0","cm"].join(" "))):this.internal.write([ar(Oi),"0","0",ar(Ni),ar(fi),pr(ui+Ni),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nr.index+" Do"),this.internal.write("Q")},ni=ke.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};ke.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ti=ke.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ri=ke.__addimage__.sHashCode=function(fi){var ui,Oi,Ni=0;if(typeof fi=="string")for(Oi=fi.length,ui=0;ui<Oi;ui++)Ni=(Ni<<5)-Ni+fi.charCodeAt(ui),Ni|=0;else if(Pi(fi))for(Oi=fi.byteLength/2,ui=0;ui<Oi;ui++)Ni=(Ni<<5)-Ni+fi[ui],Ni|=0;return Ni},oi=ke.__addimage__.validateStringAsBase64=function(fi){(fi=fi||"").toString().trim();var ui=!0;return fi.length===0&&(ui=!1),fi.length%4!=0&&(ui=!1),/^[A-Za-z0-9+/]+$/.test(fi.substr(0,fi.length-2))===!1&&(ui=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(fi.substr(-2))===!1&&(ui=!1),ui},ai=ke.__addimage__.extractImageFromDataUrl=function(fi){var ui=(fi=fi||"").split("base64,"),Oi=null;if(ui.length===2){var Ni=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ui[0]);Array.isArray(Ni)&&(Oi={mimeType:Ni[1],charset:Ni[2],data:ui[1]})}return Oi},ci=ke.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};ke.__addimage__.isArrayBuffer=function(fi){return ci()&&fi instanceof ArrayBuffer};var Pi=ke.__addimage__.isArrayBufferView=function(fi){return ci()&&typeof Uint32Array<"u"&&(fi instanceof Int8Array||fi instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&fi instanceof Uint8ClampedArray||fi instanceof Int16Array||fi instanceof Uint16Array||fi instanceof Int32Array||fi instanceof Uint32Array||fi instanceof Float32Array||fi instanceof Float64Array)},vi=ke.__addimage__.binaryStringToUint8Array=function(fi){for(var ui=fi.length,Oi=new Uint8Array(ui),Ni=0;Ni<ui;Ni++)Oi[Ni]=fi.charCodeAt(Ni);return Oi},pi=ke.__addimage__.arrayBufferToBinaryString=function(fi){for(var ui="",Oi=Pi(fi)?fi:new Uint8Array(fi),Ni=0;Ni<Oi.length;Ni+=8192)ui+=String.fromCharCode.apply(null,Oi.subarray(Ni,Ni+8192));return ui};ke.addImage=function(){var fi,ui,Oi,Ni,nr,er,cr,ar,pr;if(typeof arguments[1]=="number"?(ui=e,Oi=arguments[1],Ni=arguments[2],nr=arguments[3],er=arguments[4],cr=arguments[5],ar=arguments[6],pr=arguments[7]):(ui=arguments[1],Oi=arguments[2],Ni=arguments[3],nr=arguments[4],er=arguments[5],cr=arguments[6],ar=arguments[7],pr=arguments[8]),_typeof(fi=arguments[0])==="object"&&!Sn(fi)&&"imageData"in fi){var rr=fi;fi=rr.imageData,ui=rr.format||ui||e,Oi=rr.x||Oi||0,Ni=rr.y||Ni||0,nr=rr.w||rr.width||nr,er=rr.h||rr.height||er,cr=rr.alias||cr,ar=rr.compression||ar,pr=rr.rotation||rr.angle||pr}var br=this.internal.getFilters();if(ar===void 0&&br.indexOf("FlateEncode")!==-1&&(ar="SLOW"),isNaN(Oi)||isNaN(Ni))throw new Error("Invalid coordinates passed to jsPDF.addImage");We.call(this);var Li=Mi.call(this,fi,ui,cr,ar);return ei.call(this,Oi,Ni,nr,er,Li,pr),this};var Mi=function(fi,ui,Oi,Ni){var nr,er,cr;if(typeof fi=="string"&&Oe(fi)===e){fi=unescape(fi);var ar=Fi(fi,!1);(ar!==""||(ar=ke.loadFile(fi,!0))!==void 0)&&(fi=ar)}if(Sn(fi)&&(fi=Tn(fi,ui)),ui=Oe(fi,ui),!En(ui))throw new Error("addImage does not support files of type '"+ui+"', please ensure that a plugin for '"+ui+"' support is added.");if(((cr=Oi)==null||cr.length===0)&&(Oi=function(pr){return typeof pr=="string"||Pi(pr)?ri(pr):Pi(pr.data)?ri(pr.data):null}(fi)),(nr=Ln.call(this,Oi))||(ci()&&(fi instanceof Uint8Array||ui==="RGBA"||(er=fi,fi=vi(fi))),nr=this["process"+ui.toUpperCase()](fi,An.call(this),Oi,function(pr){return pr&&typeof pr=="string"&&(pr=pr.toUpperCase()),pr in ke.image_compression?pr:ti.NONE}(Ni),er)),!nr)throw new Error("An unknown error occurred whilst processing the image.");return nr},Fi=ke.__addimage__.convertBase64ToBinaryString=function(fi,ui){var Oi;ui=typeof ui!="boolean"||ui;var Ni,nr="";if(typeof fi=="string"){Ni=(Oi=ai(fi))!==null?Oi.data:fi;try{nr=u(Ni)}catch(er){if(ui)throw oi(Ni)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+er.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return nr};ke.getImageProperties=function(fi){var ui,Oi,Ni="";if(Sn(fi)&&(fi=Tn(fi)),typeof fi=="string"&&Oe(fi)===e&&((Ni=Fi(fi,!1))===""&&(Ni=ke.loadFile(fi)||""),fi=Ni),Oi=Oe(fi),!En(Oi))throw new Error("addImage does not support files of type '"+Oi+"', please ensure that a plugin for '"+Oi+"' support is added.");if(!ci()||fi instanceof Uint8Array||(fi=vi(fi)),!(ui=this["process"+Oi.toUpperCase()](fi)))throw new Error("An unknown error occurred whilst processing the image");return ui.fileType=Oi,ui}})(E.API),function(ke){var e=function(Te){if(Te!==void 0&&Te!="")return!0};E.API.events.push(["addPage",function(Te){this.internal.getPageInfo(Te.pageNumber).pageContext.annotations=[]}]),ke.events.push(["putPage",function(Te){for(var Oe,Be,Ue,He=this.internal.getCoordinateString,We=this.internal.getVerticalCoordinateString,Cn=this.internal.getPageInfoByObjId(Te.objId),An=Te.pageContext.annotations,En=!1,Sn=0;Sn<An.length&&!En;Sn++)switch((Oe=An[Sn]).type){case"link":(e(Oe.options.url)||e(Oe.options.pageNumber))&&(En=!0);break;case"reference":case"text":case"freetext":En=!0}if(En!=0){this.internal.write("/Annots [");for(var Tn=0;Tn<An.length;Tn++){Oe=An[Tn];var Ln=this.internal.pdfEscape,Bn=this.internal.getEncryptor(Te.objId);switch(Oe.type){case"reference":this.internal.write(" "+Oe.object.objId+" 0 R ");break;case"text":var ei=this.internal.newAdditionalObject(),ni=this.internal.newAdditionalObject(),ti=this.internal.getEncryptor(ei.objId),ri=Oe.title||"Note";Ue="<</Type /Annot /Subtype /Text "+(Be="/Rect ["+He(Oe.bounds.x)+" "+We(Oe.bounds.y+Oe.bounds.h)+" "+He(Oe.bounds.x+Oe.bounds.w)+" "+We(Oe.bounds.y)+"] ")+"/Contents ("+Ln(ti(Oe.contents))+")",Ue+=" /Popup "+ni.objId+" 0 R",Ue+=" /P "+Cn.objId+" 0 R",Ue+=" /T ("+Ln(ti(ri))+") >>",ei.content=Ue;var oi=ei.objId+" 0 R";Ue="<</Type /Annot /Subtype /Popup "+(Be="/Rect ["+He(Oe.bounds.x+30)+" "+We(Oe.bounds.y+Oe.bounds.h)+" "+He(Oe.bounds.x+Oe.bounds.w+30)+" "+We(Oe.bounds.y)+"] ")+" /Parent "+oi,Oe.open&&(Ue+=" /Open true"),Ue+=" >>",ni.content=Ue,this.internal.write(ei.objId,"0 R",ni.objId,"0 R");break;case"freetext":Be="/Rect ["+He(Oe.bounds.x)+" "+We(Oe.bounds.y)+" "+He(Oe.bounds.x+Oe.bounds.w)+" "+We(Oe.bounds.y+Oe.bounds.h)+"] ";var ai=Oe.color||"#000000";Ue="<</Type /Annot /Subtype /FreeText "+Be+"/Contents ("+Ln(Bn(Oe.contents))+")",Ue+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ai+")",Ue+=" /Border [0 0 0]",Ue+=" >>",this.internal.write(Ue);break;case"link":if(Oe.options.name){var ci=this.annotations._nameMap[Oe.options.name];Oe.options.pageNumber=ci.page,Oe.options.top=ci.y}else Oe.options.top||(Oe.options.top=0);if(Be="/Rect ["+Oe.finalBounds.x+" "+Oe.finalBounds.y+" "+Oe.finalBounds.w+" "+Oe.finalBounds.h+"] ",Ue="",Oe.options.url)Ue="<</Type /Annot /Subtype /Link "+Be+"/Border [0 0 0] /A <</S /URI /URI ("+Ln(Bn(Oe.options.url))+") >>";else if(Oe.options.pageNumber)switch(Ue="<</Type /Annot /Subtype /Link "+Be+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Oe.options.pageNumber).objId+" 0 R",Oe.options.magFactor=Oe.options.magFactor||"XYZ",Oe.options.magFactor){case"Fit":Ue+=" /Fit]";break;case"FitH":Ue+=" /FitH "+Oe.options.top+"]";break;case"FitV":Oe.options.left=Oe.options.left||0,Ue+=" /FitV "+Oe.options.left+"]";break;case"XYZ":default:var Pi=We(Oe.options.top);Oe.options.left=Oe.options.left||0,Oe.options.zoom===void 0&&(Oe.options.zoom=0),Ue+=" /XYZ "+Oe.options.left+" "+Pi+" "+Oe.options.zoom+"]"}Ue!=""&&(Ue+=" >>",this.internal.write(Ue))}}this.internal.write("]")}}]),ke.createAnnotation=function(Te){var Oe=this.internal.getCurrentPageInfo();switch(Te.type){case"link":this.link(Te.bounds.x,Te.bounds.y,Te.bounds.w,Te.bounds.h,Te);break;case"text":case"freetext":Oe.pageContext.annotations.push(Te)}},ke.link=function(Te,Oe,Be,Ue,He){var We=this.internal.getCurrentPageInfo(),Cn=this.internal.getCoordinateString,An=this.internal.getVerticalCoordinateString;We.pageContext.annotations.push({finalBounds:{x:Cn(Te),y:An(Oe),w:Cn(Te+Be),h:An(Oe+Ue)},options:He,type:"link"})},ke.textWithLink=function(Te,Oe,Be,Ue){var He,We,Cn=this.getTextWidth(Te),An=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ue.maxWidth!==void 0){We=Ue.maxWidth;var En=this.splitTextToSize(Te,We).length;He=Math.ceil(An*En)}else We=Cn,He=An;return this.text(Te,Oe,Be,Ue),Be+=.2*An,Ue.align==="center"&&(Oe-=Cn/2),Ue.align==="right"&&(Oe-=Cn),this.link(Oe,Be-An,We,He,Ue),Cn},ke.getTextWidth=function(Te){var Oe=this.internal.getFontSize();return this.getStringUnitWidth(Te)*Oe/this.internal.scaleFactor}}(E.API),function(ke){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},Te={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Oe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Be=[1570,1571,1573,1575];ke.__arabicParser__={};var Ue=ke.__arabicParser__.isInArabicSubstitutionA=function(ei){return e[ei.charCodeAt(0)]!==void 0},He=ke.__arabicParser__.isArabicLetter=function(ei){return typeof ei=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(ei)},We=ke.__arabicParser__.isArabicEndLetter=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length<=2},Cn=ke.__arabicParser__.isArabicAlfLetter=function(ei){return He(ei)&&Be.indexOf(ei.charCodeAt(0))>=0};ke.__arabicParser__.arabicLetterHasIsolatedForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=1};var An=ke.__arabicParser__.arabicLetterHasFinalForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=2};ke.__arabicParser__.arabicLetterHasInitialForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=3};var En=ke.__arabicParser__.arabicLetterHasMedialForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length==4},Sn=ke.__arabicParser__.resolveLigatures=function(ei){var ni=0,ti=Te,ri="",oi=0;for(ni=0;ni<ei.length;ni+=1)ti[ei.charCodeAt(ni)]!==void 0?(oi++,typeof(ti=ti[ei.charCodeAt(ni)])=="number"&&(ri+=String.fromCharCode(ti),ti=Te,oi=0),ni===ei.length-1&&(ti=Te,ri+=ei.charAt(ni-(oi-1)),ni-=oi-1,oi=0)):(ti=Te,ri+=ei.charAt(ni-oi),ni-=oi,oi=0);return ri};ke.__arabicParser__.isArabicDiacritic=function(ei){return ei!==void 0&&Oe[ei.charCodeAt(0)]!==void 0};var Tn=ke.__arabicParser__.getCorrectForm=function(ei,ni,ti){return He(ei)?Ue(ei)===!1?-1:!An(ei)||!He(ni)&&!He(ti)||!He(ti)&&We(ni)||We(ei)&&!He(ni)||We(ei)&&Cn(ni)||We(ei)&&We(ni)?0:En(ei)&&He(ni)&&!We(ni)&&He(ti)&&An(ti)?3:We(ei)||!He(ti)?1:2:-1},Ln=function(ei){var ni=0,ti=0,ri=0,oi="",ai="",ci="",Pi=(ei=ei||"").split("\\s+"),vi=[];for(ni=0;ni<Pi.length;ni+=1){for(vi.push(""),ti=0;ti<Pi[ni].length;ti+=1)oi=Pi[ni][ti],ai=Pi[ni][ti-1],ci=Pi[ni][ti+1],He(oi)?(ri=Tn(oi,ai,ci),vi[ni]+=ri!==-1?String.fromCharCode(e[oi.charCodeAt(0)][ri]):oi):vi[ni]+=oi;vi[ni]=Sn(vi[ni])}return vi.join(" ")},Bn=ke.__arabicParser__.processArabic=ke.processArabic=function(){var ei,ni=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ti=[];if(Array.isArray(ni)){var ri=0;for(ti=[],ri=0;ri<ni.length;ri+=1)Array.isArray(ni[ri])?ti.push([Ln(ni[ri][0]),ni[ri][1],ni[ri][2]]):ti.push([Ln(ni[ri])]);ei=ti}else ei=Ln(ni);return typeof arguments[0]=="string"?ei:(arguments[0].text=ei,arguments[0])};ke.events.push(["preProcessText",Bn])}(E.API),E.API.autoPrint=function(ke){var e;switch((ke=ke||{}).variant=ke.variant||"non-conform",ke.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(ke){var e=function(){var Te=void 0;Object.defineProperty(this,"pdf",{get:function(){return Te},set:function(We){Te=We}});var Oe=150;Object.defineProperty(this,"width",{get:function(){return Oe},set:function(We){Oe=isNaN(We)||Number.isInteger(We)===!1||We<0?150:We,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Oe+1)}});var Be=300;Object.defineProperty(this,"height",{get:function(){return Be},set:function(We){Be=isNaN(We)||Number.isInteger(We)===!1||We<0?300:We,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Be+1)}});var Ue=[];Object.defineProperty(this,"childNodes",{get:function(){return Ue},set:function(We){Ue=We}});var He={};Object.defineProperty(this,"style",{get:function(){return He},set:function(We){He=We}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(Te,Oe){var Be;if((Te=Te||"2d")!=="2d")return null;for(Be in Oe)this.pdf.context2d.hasOwnProperty(Be)&&(this.pdf.context2d[Be]=Oe[Be]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},ke.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(ke){var e={left:0,top:0,bottom:0,right:0},Te=!1,Oe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Be.call(this))},Be=function(){this.internal.__cell__.lastCell=new Ue,this.internal.__cell__.pages=1},Ue=function(){var Cn=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Cn},set:function(ei){Cn=ei}});var An=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return An},set:function(ei){An=ei}});var En=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return En},set:function(ei){En=ei}});var Sn=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Sn},set:function(ei){Sn=ei}});var Tn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Tn},set:function(ei){Tn=ei}});var Ln=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ln},set:function(ei){Ln=ei}});var Bn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Bn},set:function(ei){Bn=ei}}),this};Ue.prototype.clone=function(){return new Ue(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ue.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},ke.setHeaderFunction=function(Cn){return Oe.call(this),this.internal.__cell__.headerFunction=typeof Cn=="function"?Cn:void 0,this},ke.getTextDimensions=function(Cn,An){Oe.call(this);var En=(An=An||{}).fontSize||this.getFontSize(),Sn=An.font||this.getFont(),Tn=An.scaleFactor||this.internal.scaleFactor,Ln=0,Bn=0,ei=0,ni=this;if(!Array.isArray(Cn)&&typeof Cn!="string"){if(typeof Cn!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Cn=String(Cn)}var ti=An.maxWidth;ti>0?typeof Cn=="string"?Cn=this.splitTextToSize(Cn,ti):Object.prototype.toString.call(Cn)==="[object Array]"&&(Cn=Cn.reduce(function(oi,ai){return oi.concat(ni.splitTextToSize(ai,ti))},[])):Cn=Array.isArray(Cn)?Cn:[Cn];for(var ri=0;ri<Cn.length;ri++)Ln<(ei=this.getStringUnitWidth(Cn[ri],{font:Sn})*En)&&(Ln=ei);return Ln!==0&&(Bn=Cn.length),{w:Ln/=Tn,h:Math.max((Bn*En*this.getLineHeightFactor()-En*(this.getLineHeightFactor()-1))/Tn,0)}},ke.cellAddPage=function(){Oe.call(this),this.addPage();var Cn=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ue(Cn.left,Cn.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var He=ke.cell=function(){var Cn;Cn=arguments[0]instanceof Ue?arguments[0]:new Ue(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Oe.call(this);var An=this.internal.__cell__.lastCell,En=this.internal.__cell__.padding,Sn=this.internal.__cell__.margins||e,Tn=this.internal.__cell__.tableHeaderRow,Ln=this.internal.__cell__.printHeaders;return An.lineNumber!==void 0&&(An.lineNumber===Cn.lineNumber?(Cn.x=(An.x||0)+(An.width||0),Cn.y=An.y||0):An.y+An.height+Cn.height+Sn.bottom>this.getPageHeight()?(this.cellAddPage(),Cn.y=Sn.top,Ln&&Tn&&(this.printHeaderRow(Cn.lineNumber,!0),Cn.y+=Tn[0].height)):Cn.y=An.y+An.height||Cn.y),Cn.text[0]!==void 0&&(this.rect(Cn.x,Cn.y,Cn.width,Cn.height,Te===!0?"FD":void 0),Cn.align==="right"?this.text(Cn.text,Cn.x+Cn.width-En,Cn.y+En,{align:"right",baseline:"top"}):Cn.align==="center"?this.text(Cn.text,Cn.x+Cn.width/2,Cn.y+En,{align:"center",baseline:"top",maxWidth:Cn.width-En-En}):this.text(Cn.text,Cn.x+En,Cn.y+En,{align:"left",baseline:"top",maxWidth:Cn.width-En-En})),this.internal.__cell__.lastCell=Cn,this};ke.table=function(Cn,An,En,Sn,Tn){if(Oe.call(this),!En)throw new Error("No data for PDF table.");var Ln,Bn,ei,ni,ti=[],ri=[],oi=[],ai={},ci={},Pi=[],vi=[],pi=(Tn=Tn||{}).autoSize||!1,Mi=Tn.printHeaders!==!1,Fi=Tn.css&&Tn.css["font-size"]!==void 0?16*Tn.css["font-size"]:Tn.fontSize||12,fi=Tn.margins||Object.assign({width:this.getPageWidth()},e),ui=typeof Tn.padding=="number"?Tn.padding:3,Oi=Tn.headerBackgroundColor||"#c8c8c8",Ni=Tn.headerTextColor||"#000";if(Be.call(this),this.internal.__cell__.printHeaders=Mi,this.internal.__cell__.margins=fi,this.internal.__cell__.table_font_size=Fi,this.internal.__cell__.padding=ui,this.internal.__cell__.headerBackgroundColor=Oi,this.internal.__cell__.headerTextColor=Ni,this.setFontSize(Fi),Sn==null)ri=ti=Object.keys(En[0]),oi=ti.map(function(){return"left"});else if(Array.isArray(Sn)&&_typeof(Sn[0])==="object")for(ti=Sn.map(function(rr){return rr.name}),ri=Sn.map(function(rr){return rr.prompt||rr.name||""}),oi=Sn.map(function(rr){return rr.align||"left"}),Ln=0;Ln<Sn.length;Ln+=1)ci[Sn[Ln].name]=Sn[Ln].width*(19.049976/25.4);else Array.isArray(Sn)&&typeof Sn[0]=="string"&&(ri=ti=Sn,oi=ti.map(function(){return"left"}));if(pi||Array.isArray(Sn)&&typeof Sn[0]=="string")for(Ln=0;Ln<ti.length;Ln+=1){for(ai[ni=ti[Ln]]=En.map(function(rr){return rr[ni]}),this.setFont(void 0,"bold"),Pi.push(this.getTextDimensions(ri[Ln],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Bn=ai[ni],this.setFont(void 0,"normal"),ei=0;ei<Bn.length;ei+=1)Pi.push(this.getTextDimensions(Bn[ei],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ci[ni]=Math.max.apply(null,Pi)+ui+ui,Pi=[]}if(Mi){var nr={};for(Ln=0;Ln<ti.length;Ln+=1)nr[ti[Ln]]={},nr[ti[Ln]].text=ri[Ln],nr[ti[Ln]].align=oi[Ln];var er=We.call(this,nr,ci);vi=ti.map(function(rr){return new Ue(Cn,An,ci[rr],er,nr[rr].text,void 0,nr[rr].align)}),this.setTableHeaderRow(vi),this.printHeaderRow(1,!1)}var cr=Sn.reduce(function(rr,br){return rr[br.name]=br.align,rr},{});for(Ln=0;Ln<En.length;Ln+=1){"rowStart"in Tn&&Tn.rowStart instanceof Function&&Tn.rowStart({row:Ln,data:En[Ln]},this);var ar=We.call(this,En[Ln],ci);for(ei=0;ei<ti.length;ei+=1){var pr=En[Ln][ti[ei]];"cellStart"in Tn&&Tn.cellStart instanceof Function&&Tn.cellStart({row:Ln,col:ei,data:pr},this),He.call(this,new Ue(Cn,An,ci[ti[ei]],ar,pr,Ln+2,cr[ti[ei]]))}}return this.internal.__cell__.table_x=Cn,this.internal.__cell__.table_y=An,this};var We=function(Cn,An){var En=this.internal.__cell__.padding,Sn=this.internal.__cell__.table_font_size,Tn=this.internal.scaleFactor;return Object.keys(Cn).map(function(Ln){var Bn=Cn[Ln];return this.splitTextToSize(Bn.hasOwnProperty("text")?Bn.text:Bn,An[Ln]-En-En)},this).map(function(Ln){return this.getLineHeightFactor()*Ln.length*Sn/Tn+En+En},this).reduce(function(Ln,Bn){return Math.max(Ln,Bn)},0)};ke.setTableHeaderRow=function(Cn){Oe.call(this),this.internal.__cell__.tableHeaderRow=Cn},ke.printHeaderRow=function(Cn,An){if(Oe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var En;if(Te=!0,typeof this.internal.__cell__.headerFunction=="function"){var Sn=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ue(Sn[0],Sn[1],Sn[2],Sn[3],void 0,-1)}this.setFont(void 0,"bold");for(var Tn=[],Ln=0;Ln<this.internal.__cell__.tableHeaderRow.length;Ln+=1){En=this.internal.__cell__.tableHeaderRow[Ln].clone(),An&&(En.y=this.internal.__cell__.margins.top||0,Tn.push(En)),En.lineNumber=Cn;var Bn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),He.call(this,En),this.setTextColor(Bn)}Tn.length>0&&this.setTableHeaderRow(Tn),this.setFont(void 0,"normal"),Te=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(ke){var e=ke.family.replace(/"|'/g,"").toLowerCase(),Te=function(Ue){return Pt[Ue=Ue||"normal"]?Ue:"normal"}(ke.style),Oe=function(Ue){if(!Ue)return 400;if(typeof Ue=="number")return Ue>=100&&Ue<=900&&Ue%100==0?Ue:400;if(/^\d00$/.test(Ue))return parseInt(Ue);switch(Ue){case"bold":return 700;case"normal":default:return 400}}(ke.weight),Be=function(Ue){return typeof It[Ue=Ue||"normal"]=="number"?Ue:"normal"}(ke.stretch);return{family:e,style:Te,weight:Oe,stretch:Be,src:ke.src||[],ref:ke.ref||{name:e,style:[Be,Te,Oe].join(" ")}}}function Ot(ke,e,Te,Oe){var Be;for(Be=Te;Be>=0&&Be<e.length;Be+=Oe)if(ke[e[Be]])return ke[e[Be]];for(Be=Te;Be>=0&&Be<e.length;Be-=Oe)if(ke[e[Be]])return ke[e[Be]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(ke){return[ke.stretch,ke.style,ke.weight,ke.family].join(" ")}function qt(ke,e,Te){for(var Oe=(Te=Te||{}).defaultFontFamily||"times",Be=Object.assign({},Bt,Te.genericFontFamilies||{}),Ue=null,He=null,We=0;We<e.length;++We)if(Be[(Ue=jt(e[We])).family]&&(Ue.family=Be[Ue.family]),ke.hasOwnProperty(Ue.family)){He=ke[Ue.family];break}if(!(He=He||ke[Oe]))throw new Error("Could not find a font-family for the rule '"+Et(Ue)+"' and default family '"+Oe+"'.");if(He=function(Cn,An){if(An[Cn])return An[Cn];var En=It[Cn],Sn=En<=It.normal?-1:1,Tn=Ot(An,kt,En,Sn);if(!Tn)throw new Error("Could not find a matching font-stretch value for "+Cn);return Tn}(Ue.stretch,He),He=function(Cn,An){if(An[Cn])return An[Cn];for(var En=Pt[Cn],Sn=0;Sn<En.length;++Sn)if(An[En[Sn]])return An[En[Sn]];throw new Error("Could not find a matching font-style for "+Cn)}(Ue.style,He),!(He=function(Cn,An){if(An[Cn])return An[Cn];if(Cn===400&&An[500])return An[500];if(Cn===500&&An[400])return An[400];var En=Ct[Cn],Sn=Ot(An,Ft,En,Cn<400?-1:1);if(!Sn)throw new Error("Could not find a matching font-weight for value "+Cn);return Sn}(Ue.weight,He)))throw new Error("Failed to resolve a font for the rule '"+Et(Ue)+"'.");return He}function Dt(ke){return ke.trimLeft()}function Rt(ke,e){for(var Te=0;Te<ke.length;){if(ke.charAt(Te)===e)return[ke.substring(0,Te),ke.substring(Te+1)];Te+=1}return null}function Tt(ke){var e=ke.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],ke.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(ke){var e,Te,Oe,Be,Ue,He,We,Cn,An,En=function(Li){return Li=Li||{},this.isStrokeTransparent=Li.isStrokeTransparent||!1,this.strokeOpacity=Li.strokeOpacity||1,this.strokeStyle=Li.strokeStyle||"#000000",this.fillStyle=Li.fillStyle||"#000000",this.isFillTransparent=Li.isFillTransparent||!1,this.fillOpacity=Li.fillOpacity||1,this.font=Li.font||"10px sans-serif",this.textBaseline=Li.textBaseline||"alphabetic",this.textAlign=Li.textAlign||"left",this.lineWidth=Li.lineWidth||1,this.lineJoin=Li.lineJoin||"miter",this.lineCap=Li.lineCap||"butt",this.path=Li.path||[],this.transform=Li.transform!==void 0?Li.transform.clone():new Cn,this.globalCompositeOperation=Li.globalCompositeOperation||"normal",this.globalAlpha=Li.globalAlpha||1,this.clip_path=Li.clip_path||[],this.currentPoint=Li.currentPoint||new He,this.miterLimit=Li.miterLimit||10,this.lastPoint=Li.lastPoint||new He,this.lineDashOffset=Li.lineDashOffset||0,this.lineDash=Li.lineDash||[],this.margin=Li.margin||[0,0,0,0],this.prevPageLastElemOffset=Li.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Li.ignoreClearRect!="boolean"||Li.ignoreClearRect,this};ke.events.push(["initialized",function(){this.context2d=new Sn(this),e=this.internal.f2,Te=this.internal.getCoordinateString,Oe=this.internal.getVerticalCoordinateString,Be=this.internal.getHorizontalCoordinate,Ue=this.internal.getVerticalCoordinate,He=this.internal.Point,We=this.internal.Rectangle,Cn=this.internal.Matrix,An=new En}]);var Sn=function(Li){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ur=Li;Object.defineProperty(this,"pdf",{get:function(){return ur}});var sr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return sr},set:function(lr){sr=!!lr}});var dr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return dr},set:function(lr){dr=!!lr}});var vr=0;Object.defineProperty(this,"posX",{get:function(){return vr},set:function(lr){isNaN(lr)||(vr=lr)}});var hr=0;Object.defineProperty(this,"posY",{get:function(){return hr},set:function(lr){isNaN(lr)||(hr=lr)}}),Object.defineProperty(this,"margin",{get:function(){return An.margin},set:function(lr){var Ki;typeof lr=="number"?Ki=[lr,lr,lr,lr]:((Ki=new Array(4))[0]=lr[0],Ki[1]=lr.length>=2?lr[1]:Ki[0],Ki[2]=lr.length>=3?lr[2]:Ki[0],Ki[3]=lr.length>=4?lr[3]:Ki[1]),An.margin=Ki}});var mr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return mr},set:function(lr){mr=lr}});var _r=0;Object.defineProperty(this,"lastBreak",{get:function(){return _r},set:function(lr){_r=lr}});var Ar=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ar},set:function(lr){Ar=lr}}),Object.defineProperty(this,"ctx",{get:function(){return An},set:function(lr){lr instanceof En&&(An=lr)}}),Object.defineProperty(this,"path",{get:function(){return An.path},set:function(lr){An.path=lr}});var Vr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Vr},set:function(lr){Vr=lr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(lr){var Ki;Ki=Tn(lr),this.ctx.fillStyle=Ki.style,this.ctx.isFillTransparent=Ki.a===0,this.ctx.fillOpacity=Ki.a,this.pdf.setFillColor(Ki.r,Ki.g,Ki.b,{a:Ki.a}),this.pdf.setTextColor(Ki.r,Ki.g,Ki.b,{a:Ki.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(lr){var Ki=Tn(lr);this.ctx.strokeStyle=Ki.style,this.ctx.isStrokeTransparent=Ki.a===0,this.ctx.strokeOpacity=Ki.a,Ki.a===0?this.pdf.setDrawColor(255,255,255):(Ki.a,this.pdf.setDrawColor(Ki.r,Ki.g,Ki.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(lr){["butt","round","square"].indexOf(lr)!==-1&&(this.ctx.lineCap=lr,this.pdf.setLineCap(lr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(lr){isNaN(lr)||(this.ctx.lineWidth=lr,this.pdf.setLineWidth(lr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(lr){["bevel","round","miter"].indexOf(lr)!==-1&&(this.ctx.lineJoin=lr,this.pdf.setLineJoin(lr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(lr){isNaN(lr)||(this.ctx.miterLimit=lr,this.pdf.setMiterLimit(lr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(lr){this.ctx.textBaseline=lr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(lr){["right","end","center","left","start"].indexOf(lr)!==-1&&(this.ctx.textAlign=lr)}});var Gr=null;function Hi(lr,Ki){if(Gr===null){var Dr=function(Nr){var Ir=[];return Object.keys(Nr).forEach(function(kr){Nr[kr].forEach(function(Lr){var Pr=null;switch(Lr){case"bold":Pr={family:kr,weight:"bold"};break;case"italic":Pr={family:kr,style:"italic"};break;case"bolditalic":Pr={family:kr,weight:"bold",style:"italic"};break;case"":case"normal":Pr={family:kr}}Pr!==null&&(Pr.ref={name:kr,style:Lr},Ir.push(Pr))})}),Ir}(lr.getFontList());Gr=function(Nr){for(var Ir={},kr=0;kr<Nr.length;++kr){var Lr=jt(Nr[kr]),Pr=Lr.family,Er=Lr.stretch,Sr=Lr.style,wr=Lr.weight;Ir[Pr]=Ir[Pr]||{},Ir[Pr][Er]=Ir[Pr][Er]||{},Ir[Pr][Er][Sr]=Ir[Pr][Er][Sr]||{},Ir[Pr][Er][Sr][wr]=Lr}return Ir}(Dr.concat(Ki))}return Gr}var gr=null;Object.defineProperty(this,"fontFaces",{get:function(){return gr},set:function(lr){Gr=null,gr=lr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(lr){var Ki;if(this.ctx.font=lr,(Ki=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(lr))!==null){var Dr=Ki[1],Nr=(Ki[2],Ki[3]),Ir=Ki[4],kr=(Ki[5],Ki[6]),Lr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ir)[2];Ir=Math.floor(Lr==="px"?parseFloat(Ir)*this.pdf.internal.scaleFactor:Lr==="em"?parseFloat(Ir)*this.pdf.getFontSize():parseFloat(Ir)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ir);var Pr=function(Xr){var cs,Qr,bs=[],vs=Xr.trim();if(vs==="")return Wt;if(vs in Mt)return[Mt[vs]];for(;vs!=="";){switch(Qr=null,cs=(vs=Dt(vs)).charAt(0)){case'"':case"'":Qr=Rt(vs.substring(1),cs);break;default:Qr=Tt(vs)}if(Qr===null||(bs.push(Qr[0]),(vs=Dt(Qr[1]))!==""&&vs.charAt(0)!==","))return Wt;vs=vs.replace(/^,/,"")}return bs}(kr);if(this.fontFaces){var Er=qt(Hi(this.pdf,this.fontFaces),Pr.map(function(Xr){return{family:Xr,stretch:"normal",weight:Nr,style:Dr}}));this.pdf.setFont(Er.ref.name,Er.ref.style)}else{var Sr="";(Nr==="bold"||parseInt(Nr,10)>=700||Dr==="bold")&&(Sr="bold"),Dr==="italic"&&(Sr+="italic"),Sr.length===0&&(Sr="normal");for(var wr="",Br={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hr=0;Hr<Pr.length;Hr++){if(this.pdf.internal.getFont(Pr[Hr],Sr,{noFallback:!0,disableWarning:!0})!==void 0){wr=Pr[Hr];break}if(Sr==="bolditalic"&&this.pdf.internal.getFont(Pr[Hr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)wr=Pr[Hr],Sr="bold";else if(this.pdf.internal.getFont(Pr[Hr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){wr=Pr[Hr],Sr="normal";break}}if(wr===""){for(var qr=0;qr<Pr.length;qr++)if(Br[Pr[qr]]){wr=Br[Pr[qr]];break}}wr=wr===""?"Times":wr,this.pdf.setFont(wr,Sr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(lr){this.ctx.globalCompositeOperation=lr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(lr){this.ctx.globalAlpha=lr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(lr){this.ctx.lineDashOffset=lr,br.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(lr){this.ctx.lineDash=lr,br.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(lr){this.ctx.ignoreClearRect=!!lr}})};Sn.prototype.setLineDash=function(Li){this.lineDash=Li},Sn.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Sn.prototype.fill=function(){ai.call(this,"fill",!1)},Sn.prototype.stroke=function(){ai.call(this,"stroke",!1)},Sn.prototype.beginPath=function(){this.path=[{type:"begin"}]},Sn.prototype.moveTo=function(Li,ur){if(isNaN(Li)||isNaN(ur))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var sr=this.ctx.transform.applyToPoint(new He(Li,ur));this.path.push({type:"mt",x:sr.x,y:sr.y}),this.ctx.lastPoint=new He(Li,ur)},Sn.prototype.closePath=function(){var Li=new He(0,0),ur=0;for(ur=this.path.length-1;ur!==-1;ur--)if(this.path[ur].type==="begin"&&_typeof(this.path[ur+1])==="object"&&typeof this.path[ur+1].x=="number"){Li=new He(this.path[ur+1].x,this.path[ur+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new He(Li.x,Li.y)},Sn.prototype.lineTo=function(Li,ur){if(isNaN(Li)||isNaN(ur))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var sr=this.ctx.transform.applyToPoint(new He(Li,ur));this.path.push({type:"lt",x:sr.x,y:sr.y}),this.ctx.lastPoint=new He(sr.x,sr.y)},Sn.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ai.call(this,null,!0)},Sn.prototype.quadraticCurveTo=function(Li,ur,sr,dr){if(isNaN(sr)||isNaN(dr)||isNaN(Li)||isNaN(ur))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var vr=this.ctx.transform.applyToPoint(new He(sr,dr)),hr=this.ctx.transform.applyToPoint(new He(Li,ur));this.path.push({type:"qct",x1:hr.x,y1:hr.y,x:vr.x,y:vr.y}),this.ctx.lastPoint=new He(vr.x,vr.y)},Sn.prototype.bezierCurveTo=function(Li,ur,sr,dr,vr,hr){if(isNaN(vr)||isNaN(hr)||isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var mr=this.ctx.transform.applyToPoint(new He(vr,hr)),_r=this.ctx.transform.applyToPoint(new He(Li,ur)),Ar=this.ctx.transform.applyToPoint(new He(sr,dr));this.path.push({type:"bct",x1:_r.x,y1:_r.y,x2:Ar.x,y2:Ar.y,x:mr.x,y:mr.y}),this.ctx.lastPoint=new He(mr.x,mr.y)},Sn.prototype.arc=function(Li,ur,sr,dr,vr,hr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr)||isNaN(vr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(hr=!!hr,!this.ctx.transform.isIdentity){var mr=this.ctx.transform.applyToPoint(new He(Li,ur));Li=mr.x,ur=mr.y;var _r=this.ctx.transform.applyToPoint(new He(0,sr)),Ar=this.ctx.transform.applyToPoint(new He(0,0));sr=Math.sqrt(Math.pow(_r.x-Ar.x,2)+Math.pow(_r.y-Ar.y,2))}Math.abs(vr-dr)>=2*Math.PI&&(dr=0,vr=2*Math.PI),this.path.push({type:"arc",x:Li,y:ur,radius:sr,startAngle:dr,endAngle:vr,counterclockwise:hr})},Sn.prototype.arcTo=function(Li,ur,sr,dr,vr){throw new Error("arcTo not implemented.")},Sn.prototype.rect=function(Li,ur,sr,dr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Li,ur),this.lineTo(Li+sr,ur),this.lineTo(Li+sr,ur+dr),this.lineTo(Li,ur+dr),this.lineTo(Li,ur),this.lineTo(Li+sr,ur),this.lineTo(Li,ur)},Sn.prototype.fillRect=function(Li,ur,sr,dr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ln.call(this)){var vr={};this.lineCap!=="butt"&&(vr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(vr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Li,ur,sr,dr),this.fill(),vr.hasOwnProperty("lineCap")&&(this.lineCap=vr.lineCap),vr.hasOwnProperty("lineJoin")&&(this.lineJoin=vr.lineJoin)}},Sn.prototype.strokeRect=function(Li,ur,sr,dr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Bn.call(this)||(this.beginPath(),this.rect(Li,ur,sr,dr),this.stroke())},Sn.prototype.clearRect=function(Li,ur,sr,dr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Li,ur,sr,dr))},Sn.prototype.save=function(Li){Li=typeof Li!="boolean"||Li;for(var ur=this.pdf.internal.getCurrentPageInfo().pageNumber,sr=0;sr<this.pdf.internal.getNumberOfPages();sr++)this.pdf.setPage(sr+1),this.pdf.internal.out("q");if(this.pdf.setPage(ur),Li){this.ctx.fontSize=this.pdf.internal.getFontSize();var dr=new En(this.ctx);this.ctxStack.push(this.ctx),this.ctx=dr}},Sn.prototype.restore=function(Li){Li=typeof Li!="boolean"||Li;for(var ur=this.pdf.internal.getCurrentPageInfo().pageNumber,sr=0;sr<this.pdf.internal.getNumberOfPages();sr++)this.pdf.setPage(sr+1),this.pdf.internal.out("Q");this.pdf.setPage(ur),Li&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Sn.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Tn=function(Li){var ur,sr,dr,vr;if(Li.isCanvasGradient===!0&&(Li=Li.getColor()),!Li)return{r:0,g:0,b:0,a:0,style:Li};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Li))ur=0,sr=0,dr=0,vr=0;else{var hr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Li);if(hr!==null)ur=parseInt(hr[1]),sr=parseInt(hr[2]),dr=parseInt(hr[3]),vr=1;else if((hr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Li))!==null)ur=parseInt(hr[1]),sr=parseInt(hr[2]),dr=parseInt(hr[3]),vr=parseFloat(hr[4]);else{if(vr=1,typeof Li=="string"&&Li.charAt(0)!=="#"){var mr=new f(Li);Li=mr.ok?mr.toHex():"#000000"}Li.length===4?(ur=Li.substring(1,2),ur+=ur,sr=Li.substring(2,3),sr+=sr,dr=Li.substring(3,4),dr+=dr):(ur=Li.substring(1,3),sr=Li.substring(3,5),dr=Li.substring(5,7)),ur=parseInt(ur,16),sr=parseInt(sr,16),dr=parseInt(dr,16)}}return{r:ur,g:sr,b:dr,a:vr,style:Li}},Ln=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Bn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Sn.prototype.fillText=function(Li,ur,sr,dr){if(isNaN(ur)||isNaN(sr)||typeof Li!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(dr=isNaN(dr)?void 0:dr,!Ln.call(this)){var vr=ar(this.ctx.transform.rotation),hr=this.ctx.transform.scaleX;ui.call(this,{text:Li,x:ur,y:sr,scale:hr,angle:vr,align:this.textAlign,maxWidth:dr})}},Sn.prototype.strokeText=function(Li,ur,sr,dr){if(isNaN(ur)||isNaN(sr)||typeof Li!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Bn.call(this)){dr=isNaN(dr)?void 0:dr;var vr=ar(this.ctx.transform.rotation),hr=this.ctx.transform.scaleX;ui.call(this,{text:Li,x:ur,y:sr,scale:hr,renderingMode:"stroke",angle:vr,align:this.textAlign,maxWidth:dr})}},Sn.prototype.measureText=function(Li){if(typeof Li!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ur=this.pdf,sr=this.pdf.internal.scaleFactor,dr=ur.internal.getFontSize(),vr=ur.getStringUnitWidth(Li)*dr/ur.internal.scaleFactor,hr=function(mr){var _r=(mr=mr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _r}}),this};return new hr({width:vr*=Math.round(96*sr/72*1e4)/1e4})},Sn.prototype.scale=function(Li,ur){if(isNaN(Li)||isNaN(ur))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var sr=new Cn(Li,0,0,ur,0,0);this.ctx.transform=this.ctx.transform.multiply(sr)},Sn.prototype.rotate=function(Li){if(isNaN(Li))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ur=new Cn(Math.cos(Li),Math.sin(Li),-Math.sin(Li),Math.cos(Li),0,0);this.ctx.transform=this.ctx.transform.multiply(ur)},Sn.prototype.translate=function(Li,ur){if(isNaN(Li)||isNaN(ur))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var sr=new Cn(1,0,0,1,Li,ur);this.ctx.transform=this.ctx.transform.multiply(sr)},Sn.prototype.transform=function(Li,ur,sr,dr,vr,hr){if(isNaN(Li)||isNaN(ur)||isNaN(sr)||isNaN(dr)||isNaN(vr)||isNaN(hr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var mr=new Cn(Li,ur,sr,dr,vr,hr);this.ctx.transform=this.ctx.transform.multiply(mr)},Sn.prototype.setTransform=function(Li,ur,sr,dr,vr,hr){Li=isNaN(Li)?1:Li,ur=isNaN(ur)?0:ur,sr=isNaN(sr)?0:sr,dr=isNaN(dr)?1:dr,vr=isNaN(vr)?0:vr,hr=isNaN(hr)?0:hr,this.ctx.transform=new Cn(Li,ur,sr,dr,vr,hr)};var ei=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Sn.prototype.drawImage=function(Li,ur,sr,dr,vr,hr,mr,_r,Ar){var Vr=this.pdf.getImageProperties(Li),Gr=1,Hi=1,gr=1,lr=1;dr!==void 0&&_r!==void 0&&(gr=_r/dr,lr=Ar/vr,Gr=Vr.width/dr*_r/dr,Hi=Vr.height/vr*Ar/vr),hr===void 0&&(hr=ur,mr=sr,ur=0,sr=0),dr!==void 0&&_r===void 0&&(_r=dr,Ar=vr),dr===void 0&&_r===void 0&&(_r=Vr.width,Ar=Vr.height);for(var Ki,Dr=this.ctx.transform.decompose(),Nr=ar(Dr.rotate.shx),Ir=new Cn,kr=(Ir=(Ir=(Ir=Ir.multiply(Dr.translate)).multiply(Dr.skew)).multiply(Dr.scale)).applyToRectangle(new We(hr-ur*gr,mr-sr*lr,dr*Gr,vr*Hi)),Lr=ni.call(this,kr),Pr=[],Er=0;Er<Lr.length;Er+=1)Pr.indexOf(Lr[Er])===-1&&Pr.push(Lr[Er]);if(oi(Pr),this.autoPaging)for(var Sr=Pr[0],wr=Pr[Pr.length-1],Br=Sr;Br<wr+1;Br++){this.pdf.setPage(Br);var Hr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=Br===1?this.posY+this.margin[0]:this.margin[0],Xr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cs=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qr=Br===1?0:Xr+(Br-2)*cs;if(this.ctx.clip_path.length!==0){var bs=this.path;Ki=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(Ki,this.posX+this.margin[3],-Qr+qr+this.ctx.prevPageLastElemOffset),ci.call(this,"fill",!0),this.path=bs}var vs=JSON.parse(JSON.stringify(kr));vs=ri([vs],this.posX+this.margin[3],-Qr+qr+this.ctx.prevPageLastElemOffset)[0];var Ms=(Br>Sr||Br<wr)&&ei.call(this);Ms&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hr,cs,null).clip().discardPath()),this.pdf.addImage(Li,"JPEG",vs.x,vs.y,vs.w,vs.h,null,null,Nr),Ms&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Li,"JPEG",kr.x,kr.y,kr.w,kr.h,null,null,Nr)};var ni=function(Li,ur,sr){var dr=[];ur=ur||this.pdf.internal.pageSize.width,sr=sr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var vr=this.posY+this.ctx.prevPageLastElemOffset;switch(Li.type){default:case"mt":case"lt":dr.push(Math.floor((Li.y+vr)/sr)+1);break;case"arc":dr.push(Math.floor((Li.y+vr-Li.radius)/sr)+1),dr.push(Math.floor((Li.y+vr+Li.radius)/sr)+1);break;case"qct":var hr=pr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Li.x1,Li.y1,Li.x,Li.y);dr.push(Math.floor((hr.y+vr)/sr)+1),dr.push(Math.floor((hr.y+hr.h+vr)/sr)+1);break;case"bct":var mr=rr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Li.x1,Li.y1,Li.x2,Li.y2,Li.x,Li.y);dr.push(Math.floor((mr.y+vr)/sr)+1),dr.push(Math.floor((mr.y+mr.h+vr)/sr)+1);break;case"rect":dr.push(Math.floor((Li.y+vr)/sr)+1),dr.push(Math.floor((Li.y+Li.h+vr)/sr)+1)}for(var _r=0;_r<dr.length;_r+=1)for(;this.pdf.internal.getNumberOfPages()<dr[_r];)ti.call(this);return dr},ti=function(){var Li=this.fillStyle,ur=this.strokeStyle,sr=this.font,dr=this.lineCap,vr=this.lineWidth,hr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Li,this.strokeStyle=ur,this.font=sr,this.lineCap=dr,this.lineWidth=vr,this.lineJoin=hr},ri=function(Li,ur,sr){for(var dr=0;dr<Li.length;dr++)switch(Li[dr].type){case"bct":Li[dr].x2+=ur,Li[dr].y2+=sr;case"qct":Li[dr].x1+=ur,Li[dr].y1+=sr;case"mt":case"lt":case"arc":default:Li[dr].x+=ur,Li[dr].y+=sr}return Li},oi=function(Li){return Li.sort(function(ur,sr){return ur-sr})},ai=function(Li,ur){for(var sr,dr,vr=this.fillStyle,hr=this.strokeStyle,mr=this.lineCap,_r=this.lineWidth,Ar=Math.abs(_r*this.ctx.transform.scaleX),Vr=this.lineJoin,Gr=JSON.parse(JSON.stringify(this.path)),Hi=JSON.parse(JSON.stringify(this.path)),gr=[],lr=0;lr<Hi.length;lr++)if(Hi[lr].x!==void 0)for(var Ki=ni.call(this,Hi[lr]),Dr=0;Dr<Ki.length;Dr+=1)gr.indexOf(Ki[Dr])===-1&&gr.push(Ki[Dr]);for(var Nr=0;Nr<gr.length;Nr++)for(;this.pdf.internal.getNumberOfPages()<gr[Nr];)ti.call(this);if(oi(gr),this.autoPaging)for(var Ir=gr[0],kr=gr[gr.length-1],Lr=Ir;Lr<kr+1;Lr++){this.pdf.setPage(Lr),this.fillStyle=vr,this.strokeStyle=hr,this.lineCap=mr,this.lineWidth=Ar,this.lineJoin=Vr;var Pr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Er=Lr===1?this.posY+this.margin[0]:this.margin[0],Sr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Br=Lr===1?0:Sr+(Lr-2)*wr;if(this.ctx.clip_path.length!==0){var Hr=this.path;sr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(sr,this.posX+this.margin[3],-Br+Er+this.ctx.prevPageLastElemOffset),ci.call(this,Li,!0),this.path=Hr}if(dr=JSON.parse(JSON.stringify(Gr)),this.path=ri(dr,this.posX+this.margin[3],-Br+Er+this.ctx.prevPageLastElemOffset),ur===!1||Lr===0){var qr=(Lr>Ir||Lr<kr)&&ei.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pr,wr,null).clip().discardPath()),ci.call(this,Li,ur),qr&&this.pdf.restoreGraphicsState()}this.lineWidth=_r}else this.lineWidth=Ar,ci.call(this,Li,ur),this.lineWidth=_r;this.path=Gr},ci=function(Li,ur){if((Li!=="stroke"||ur||!Bn.call(this))&&(Li==="stroke"||ur||!Ln.call(this))){for(var sr,dr,vr=[],hr=this.path,mr=0;mr<hr.length;mr++){var _r=hr[mr];switch(_r.type){case"begin":vr.push({begin:!0});break;case"close":vr.push({close:!0});break;case"mt":vr.push({start:_r,deltas:[],abs:[]});break;case"lt":var Ar=vr.length;if(hr[mr-1]&&!isNaN(hr[mr-1].x)&&(sr=[_r.x-hr[mr-1].x,_r.y-hr[mr-1].y],Ar>0)){for(;Ar>=0;Ar--)if(vr[Ar-1].close!==!0&&vr[Ar-1].begin!==!0){vr[Ar-1].deltas.push(sr),vr[Ar-1].abs.push(_r);break}}break;case"bct":sr=[_r.x1-hr[mr-1].x,_r.y1-hr[mr-1].y,_r.x2-hr[mr-1].x,_r.y2-hr[mr-1].y,_r.x-hr[mr-1].x,_r.y-hr[mr-1].y],vr[vr.length-1].deltas.push(sr);break;case"qct":var Vr=hr[mr-1].x+2/3*(_r.x1-hr[mr-1].x),Gr=hr[mr-1].y+2/3*(_r.y1-hr[mr-1].y),Hi=_r.x+2/3*(_r.x1-_r.x),gr=_r.y+2/3*(_r.y1-_r.y),lr=_r.x,Ki=_r.y;sr=[Vr-hr[mr-1].x,Gr-hr[mr-1].y,Hi-hr[mr-1].x,gr-hr[mr-1].y,lr-hr[mr-1].x,Ki-hr[mr-1].y],vr[vr.length-1].deltas.push(sr);break;case"arc":vr.push({deltas:[],abs:[],arc:!0}),Array.isArray(vr[vr.length-1].abs)&&vr[vr.length-1].abs.push(_r)}}dr=ur?null:Li==="stroke"?"stroke":"fill";for(var Dr=!1,Nr=0;Nr<vr.length;Nr++)if(vr[Nr].arc)for(var Ir=vr[Nr].abs,kr=0;kr<Ir.length;kr++){var Lr=Ir[kr];Lr.type==="arc"?pi.call(this,Lr.x,Lr.y,Lr.radius,Lr.startAngle,Lr.endAngle,Lr.counterclockwise,void 0,ur,!Dr):Oi.call(this,Lr.x,Lr.y),Dr=!0}else if(vr[Nr].close===!0)this.pdf.internal.out("h"),Dr=!1;else if(vr[Nr].begin!==!0){var Pr=vr[Nr].start.x,Er=vr[Nr].start.y;Ni.call(this,vr[Nr].deltas,Pr,Er),Dr=!0}dr&&Mi.call(this,dr),ur&&Fi.call(this)}},Pi=function(Li){var ur=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,sr=ur*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Li-sr;case"top":return Li+ur-sr;case"hanging":return Li+ur-2*sr;case"middle":return Li+ur/2-sr;case"ideographic":return Li;case"alphabetic":default:return Li}},vi=function(Li){return Li+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Sn.prototype.createLinearGradient=function(){var Li=function(){};return Li.colorStops=[],Li.addColorStop=function(ur,sr){this.colorStops.push([ur,sr])},Li.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Li.isCanvasGradient=!0,Li},Sn.prototype.createPattern=function(){return this.createLinearGradient()},Sn.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pi=function(Li,ur,sr,dr,vr,hr,mr,_r,Ar){for(var Vr=er.call(this,sr,dr,vr,hr),Gr=0;Gr<Vr.length;Gr++){var Hi=Vr[Gr];Gr===0&&(Ar?fi.call(this,Hi.x1+Li,Hi.y1+ur):Oi.call(this,Hi.x1+Li,Hi.y1+ur)),nr.call(this,Li,ur,Hi.x2,Hi.y2,Hi.x3,Hi.y3,Hi.x4,Hi.y4)}_r?Fi.call(this):Mi.call(this,mr)},Mi=function(Li){switch(Li){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Fi=function(){this.pdf.clip(),this.pdf.discardPath()},fi=function(Li,ur){this.pdf.internal.out(Te(Li)+" "+Oe(ur)+" m")},ui=function(Li){var ur;switch(Li.align){case"right":case"end":ur="right";break;case"center":ur="center";break;case"left":case"start":default:ur="left"}var sr=this.pdf.getTextDimensions(Li.text),dr=Pi.call(this,Li.y),vr=vi.call(this,dr)-sr.h,hr=this.ctx.transform.applyToPoint(new He(Li.x,dr)),mr=this.ctx.transform.decompose(),_r=new Cn;_r=(_r=(_r=_r.multiply(mr.translate)).multiply(mr.skew)).multiply(mr.scale);for(var Ar,Vr,Gr,Hi=this.ctx.transform.applyToRectangle(new We(Li.x,dr,sr.w,sr.h)),gr=_r.applyToRectangle(new We(Li.x,vr,sr.w,sr.h)),lr=ni.call(this,gr),Ki=[],Dr=0;Dr<lr.length;Dr+=1)Ki.indexOf(lr[Dr])===-1&&Ki.push(lr[Dr]);if(oi(Ki),this.autoPaging)for(var Nr=Ki[0],Ir=Ki[Ki.length-1],kr=Nr;kr<Ir+1;kr++){this.pdf.setPage(kr);var Lr=kr===1?this.posY+this.margin[0]:this.margin[0],Pr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Er=this.pdf.internal.pageSize.height-this.margin[2],Sr=Er-this.margin[0],wr=this.pdf.internal.pageSize.width-this.margin[1],Br=wr-this.margin[3],Hr=kr===1?0:Pr+(kr-2)*Sr;if(this.ctx.clip_path.length!==0){var qr=this.path;Ar=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(Ar,this.posX+this.margin[3],-1*Hr+Lr),ci.call(this,"fill",!0),this.path=qr}var Xr=ri([JSON.parse(JSON.stringify(gr))],this.posX+this.margin[3],-Hr+Lr+this.ctx.prevPageLastElemOffset)[0];Li.scale>=.01&&(Vr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vr*Li.scale),Gr=this.lineWidth,this.lineWidth=Gr*Li.scale);var cs=this.autoPaging!=="text";if(cs||Xr.y+Xr.h<=Er){if(cs||Xr.y>=Lr&&Xr.x<=wr){var Qr=cs?Li.text:this.pdf.splitTextToSize(Li.text,Li.maxWidth||wr-Xr.x)[0],bs=ri([JSON.parse(JSON.stringify(Hi))],this.posX+this.margin[3],-Hr+Lr+this.ctx.prevPageLastElemOffset)[0],vs=cs&&(kr>Nr||kr<Ir)&&ei.call(this);vs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Br,Sr,null).clip().discardPath()),this.pdf.text(Qr,bs.x,bs.y,{angle:Li.angle,align:ur,renderingMode:Li.renderingMode}),vs&&this.pdf.restoreGraphicsState()}}else Xr.y<Er&&(this.ctx.prevPageLastElemOffset+=Er-Xr.y);Li.scale>=.01&&(this.pdf.setFontSize(Vr),this.lineWidth=Gr)}else Li.scale>=.01&&(Vr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vr*Li.scale),Gr=this.lineWidth,this.lineWidth=Gr*Li.scale),this.pdf.text(Li.text,hr.x+this.posX,hr.y+this.posY,{angle:Li.angle,align:ur,renderingMode:Li.renderingMode,maxWidth:Li.maxWidth}),Li.scale>=.01&&(this.pdf.setFontSize(Vr),this.lineWidth=Gr)},Oi=function(Li,ur,sr,dr){sr=sr||0,dr=dr||0,this.pdf.internal.out(Te(Li+sr)+" "+Oe(ur+dr)+" l")},Ni=function(Li,ur,sr){return this.pdf.lines(Li,ur,sr,null,null)},nr=function(Li,ur,sr,dr,vr,hr,mr,_r){this.pdf.internal.out([e(Be(sr+Li)),e(Ue(dr+ur)),e(Be(vr+Li)),e(Ue(hr+ur)),e(Be(mr+Li)),e(Ue(_r+ur)),"c"].join(" "))},er=function(Li,ur,sr,dr){for(var vr=2*Math.PI,hr=Math.PI/2;ur>sr;)ur-=vr;var mr=Math.abs(sr-ur);mr<vr&&dr&&(mr=vr-mr);for(var _r=[],Ar=dr?-1:1,Vr=ur;mr>1e-5;){var Gr=Vr+Ar*Math.min(mr,hr);_r.push(cr.call(this,Li,Vr,Gr)),mr-=Math.abs(Gr-Vr),Vr=Gr}return _r},cr=function(Li,ur,sr){var dr=(sr-ur)/2,vr=Li*Math.cos(dr),hr=Li*Math.sin(dr),mr=vr,_r=-hr,Ar=mr*mr+_r*_r,Vr=Ar+mr*vr+_r*hr,Gr=4/3*(Math.sqrt(2*Ar*Vr)-Vr)/(mr*hr-_r*vr),Hi=mr-Gr*_r,gr=_r+Gr*mr,lr=Hi,Ki=-gr,Dr=dr+ur,Nr=Math.cos(Dr),Ir=Math.sin(Dr);return{x1:Li*Math.cos(ur),y1:Li*Math.sin(ur),x2:Hi*Nr-gr*Ir,y2:Hi*Ir+gr*Nr,x3:lr*Nr-Ki*Ir,y3:lr*Ir+Ki*Nr,x4:Li*Math.cos(sr),y4:Li*Math.sin(sr)}},ar=function(Li){return 180*Li/Math.PI},pr=function(Li,ur,sr,dr,vr,hr){var mr=Li+.5*(sr-Li),_r=ur+.5*(dr-ur),Ar=vr+.5*(sr-vr),Vr=hr+.5*(dr-hr),Gr=Math.min(Li,vr,mr,Ar),Hi=Math.max(Li,vr,mr,Ar),gr=Math.min(ur,hr,_r,Vr),lr=Math.max(ur,hr,_r,Vr);return new We(Gr,gr,Hi-Gr,lr-gr)},rr=function(Li,ur,sr,dr,vr,hr,mr,_r){var Ar,Vr,Gr,Hi,gr,lr,Ki,Dr,Nr,Ir,kr,Lr,Pr,Er,Sr=sr-Li,wr=dr-ur,Br=vr-sr,Hr=hr-dr,qr=mr-vr,Xr=_r-hr;for(Vr=0;Vr<41;Vr++)Nr=(Ki=(Gr=Li+(Ar=Vr/40)*Sr)+Ar*((gr=sr+Ar*Br)-Gr))+Ar*(gr+Ar*(vr+Ar*qr-gr)-Ki),Ir=(Dr=(Hi=ur+Ar*wr)+Ar*((lr=dr+Ar*Hr)-Hi))+Ar*(lr+Ar*(hr+Ar*Xr-lr)-Dr),Vr==0?(kr=Nr,Lr=Ir,Pr=Nr,Er=Ir):(kr=Math.min(kr,Nr),Lr=Math.min(Lr,Ir),Pr=Math.max(Pr,Nr),Er=Math.max(Er,Ir));return new We(Math.round(kr),Math.round(Lr),Math.round(Pr-kr),Math.round(Er-Lr))},br=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Li,ur,sr=(Li=this.ctx.lineDash,ur=this.ctx.lineDashOffset,JSON.stringify({lineDash:Li,lineDashOffset:ur}));this.prevLineDash!==sr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=sr)}}})(E.API),function(ke){var e=function(Ue){var He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei;for(We=[],Cn=0,An=(Ue+=He="\0\0\0\0".slice(Ue.length%4||4)).length;An>Cn;Cn+=4)(En=(Ue.charCodeAt(Cn)<<24)+(Ue.charCodeAt(Cn+1)<<16)+(Ue.charCodeAt(Cn+2)<<8)+Ue.charCodeAt(Cn+3))!==0?(Sn=(En=((En=((En=((En=(En-(ei=En%85))/85)-(Bn=En%85))/85)-(Ln=En%85))/85)-(Tn=En%85))/85)%85,We.push(Sn+33,Tn+33,Ln+33,Bn+33,ei+33)):We.push(122);return function(ni,ti){for(var ri=ti;ri>0;ri--)ni.pop()}(We,He.length),String.fromCharCode.apply(String,We)+"~>"},Te=function(Ue){var He,We,Cn,An,En,Sn=String,Tn="length",Ln=255,Bn="charCodeAt",ei="slice",ni="replace";for(Ue[ei](-2),Ue=Ue[ei](0,-2)[ni](/\s/g,"")[ni]("z","!!!!!"),Cn=[],An=0,En=(Ue+=He="uuuuu"[ei](Ue[Tn]%5||5))[Tn];En>An;An+=5)We=52200625*(Ue[Bn](An)-33)+614125*(Ue[Bn](An+1)-33)+7225*(Ue[Bn](An+2)-33)+85*(Ue[Bn](An+3)-33)+(Ue[Bn](An+4)-33),Cn.push(Ln&We>>24,Ln&We>>16,Ln&We>>8,Ln&We);return function(ti,ri){for(var oi=ri;oi>0;oi--)ti.pop()}(Cn,He[Tn]),Sn.fromCharCode.apply(Sn,Cn)},Oe=function(Ue){var He=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ue=Ue.replace(/\s/g,"")).indexOf(">")!==-1&&(Ue=Ue.substr(0,Ue.indexOf(">"))),Ue.length%2&&(Ue+="0"),He.test(Ue)===!1)return"";for(var We="",Cn=0;Cn<Ue.length;Cn+=2)We+=String.fromCharCode("0x"+(Ue[Cn]+Ue[Cn+1]));return We},Be=function(Ue){for(var He=new Uint8Array(Ue.length),We=Ue.length;We--;)He[We]=Ue.charCodeAt(We);return Ue=(He=zlibSync(He)).reduce(function(Cn,An){return Cn+String.fromCharCode(An)},"")};ke.processDataByFilters=function(Ue,He){var We=0,Cn=Ue||"",An=[];for(typeof(He=He||[])=="string"&&(He=[He]),We=0;We<He.length;We+=1)switch(He[We]){case"ASCII85Decode":case"/ASCII85Decode":Cn=Te(Cn),An.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Cn=e(Cn),An.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Cn=Oe(Cn),An.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Cn=Cn.split("").map(function(En){return("0"+En.charCodeAt().toString(16)).slice(-2)}).join("")+">",An.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Cn=Be(Cn),An.push("/FlateDecode");break;default:throw new Error('The filter: "'+He[We]+'" is not implemented')}return{data:Cn,reverseChain:An.reverse().join(" ")}}}(E.API),function(ke){ke.loadFile=function(e,Te,Oe){return function(Be,Ue,He){Ue=Ue!==!1,He=typeof He=="function"?He:function(){};var We=void 0;try{We=function(Cn,An,En){var Sn=new XMLHttpRequest,Tn=0,Ln=function(Bn){var ei=Bn.length,ni=[],ti=String.fromCharCode;for(Tn=0;Tn<ei;Tn+=1)ni.push(ti(255&Bn.charCodeAt(Tn)));return ni.join("")};if(Sn.open("GET",Cn,!An),Sn.overrideMimeType("text/plain; charset=x-user-defined"),An===!1&&(Sn.onload=function(){Sn.status===200?En(Ln(this.responseText)):En(void 0)}),Sn.send(null),An&&Sn.status===200)return Ln(Sn.responseText)}(Be,Ue,He)}catch{}return We}(e,Te,Oe)},ke.loadImageFile=ke.loadFile}(E.API),function(ke){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(He){return Promise.reject(new Error("Could not load html2canvas: "+He))}).then(function(He){return He.default?He.default:He})}function Te(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(He){return Promise.reject(new Error("Could not load dompurify: "+He))}).then(function(He){return He.default?He.default:He})}var Oe=function(He){var We=_typeof(He);return We==="undefined"?"undefined":We==="string"||He instanceof String?"string":We==="number"||He instanceof Number?"number":We==="function"||He instanceof Function?"function":He&&He.constructor===Array?"array":He&&He.nodeType===1?"element":We==="object"?"object":"unknown"},Be=function(He,We){var Cn=document.createElement(He);for(var An in We.className&&(Cn.className=We.className),We.innerHTML&&We.dompurify&&(Cn.innerHTML=We.dompurify.sanitize(We.innerHTML)),We.style)Cn.style[An]=We.style[An];return Cn},Ue=function He(We){var Cn=Object.assign(He.convert(Promise.resolve()),JSON.parse(JSON.stringify(He.template))),An=He.convert(Promise.resolve(),Cn);return An=(An=An.setProgress(1,He,1,[He])).set(We)};(Ue.prototype=Object.create(Promise.prototype)).constructor=Ue,Ue.convert=function(He,We){return He.__proto__=We||Ue.prototype,He},Ue.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ue.prototype.from=function(He,We){return this.then(function(){switch(We=We||function(Cn){switch(Oe(Cn)){case"string":return"string";case"element":return Cn.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(He)){case"string":return this.then(Te).then(function(Cn){return this.set({src:Be("div",{innerHTML:He,dompurify:Cn})})});case"element":return this.set({src:He});case"canvas":return this.set({canvas:He});case"img":return this.set({img:He});default:return this.error("Unknown source type.")}})},Ue.prototype.to=function(He){switch(He){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ue.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var He={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},We=function Cn(An,En){for(var Sn=An.nodeType===3?document.createTextNode(An.nodeValue):An.cloneNode(!1),Tn=An.firstChild;Tn;Tn=Tn.nextSibling)En!==!0&&Tn.nodeType===1&&Tn.nodeName==="SCRIPT"||Sn.appendChild(Cn(Tn,En));return An.nodeType===1&&(An.nodeName==="CANVAS"?(Sn.width=An.width,Sn.height=An.height,Sn.getContext("2d").drawImage(An,0,0)):An.nodeName!=="TEXTAREA"&&An.nodeName!=="SELECT"||(Sn.value=An.value),Sn.addEventListener("load",function(){Sn.scrollTop=An.scrollTop,Sn.scrollLeft=An.scrollLeft},!0)),Sn}(this.prop.src,this.opt.html2canvas.javascriptEnabled);We.tagName==="BODY"&&(He.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Be("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Be("div",{className:"html2pdf__container",style:He}),this.prop.container.appendChild(We),this.prop.container.firstChild.appendChild(Be("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ue.prototype.toCanvas=function(){var He=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(He).then(e).then(function(We){var Cn=Object.assign({},this.opt.html2canvas);return delete Cn.onrendered,We(this.prop.container,Cn)}).then(function(We){(this.opt.html2canvas.onrendered||function(){})(We),this.prop.canvas=We,document.body.removeChild(this.prop.overlay)})},Ue.prototype.toContext2d=function(){var He=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(He).then(e).then(function(We){var Cn=this.opt.jsPDF,An=this.opt.fontFaces,En=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Sn=Object.assign({async:!0,allowTaint:!0,scale:En,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Sn.onrendered,Cn.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Cn.context2d.posX=this.opt.x,Cn.context2d.posY=this.opt.y,Cn.context2d.margin=this.opt.margin,Cn.context2d.fontFaces=An,An)for(var Tn=0;Tn<An.length;++Tn){var Ln=An[Tn],Bn=Ln.src.find(function(ei){return ei.format==="truetype"});Bn&&Cn.addFont(Bn.url,Ln.ref.name,Ln.ref.style)}return Sn.windowHeight=Sn.windowHeight||0,Sn.windowHeight=Sn.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Sn.windowHeight,Cn.context2d.save(!0),We(this.prop.container,Sn)}).then(function(We){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(We),this.prop.canvas=We,document.body.removeChild(this.prop.overlay)})},Ue.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var He=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=He})},Ue.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ue.prototype.output=function(He,We,Cn){return(Cn=Cn||"pdf").toLowerCase()==="img"||Cn.toLowerCase()==="image"?this.outputImg(He,We):this.outputPdf(He,We)},Ue.prototype.outputPdf=function(He,We){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(He,We)})},Ue.prototype.outputImg=function(He){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(He){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+He+'" is not supported.'}})},Ue.prototype.save=function(He){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(He?{filename:He}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ue.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ue.prototype.set=function(He){if(Oe(He)!=="object")return this;var We=Object.keys(He||{}).map(function(Cn){if(Cn in Ue.template.prop)return function(){this.prop[Cn]=He[Cn]};switch(Cn){case"margin":return this.setMargin.bind(this,He.margin);case"jsPDF":return function(){return this.opt.jsPDF=He.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,He.pageSize);default:return function(){this.opt[Cn]=He[Cn]}}},this);return this.then(function(){return this.thenList(We)})},Ue.prototype.get=function(He,We){return this.then(function(){var Cn=He in Ue.template.prop?this.prop[He]:this.opt[He];return We?We(Cn):Cn})},Ue.prototype.setMargin=function(He){return this.then(function(){switch(Oe(He)){case"number":He=[He,He,He,He];case"array":if(He.length===2&&(He=[He[0],He[1],He[0],He[1]]),He.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=He}).then(this.setPageSize)},Ue.prototype.setPageSize=function(He){function We(Cn,An){return Math.floor(Cn*An/72*96)}return this.then(function(){(He=He||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(He.inner={width:He.width-this.opt.margin[1]-this.opt.margin[3],height:He.height-this.opt.margin[0]-this.opt.margin[2]},He.inner.px={width:We(He.inner.width,He.k),height:We(He.inner.height,He.k)},He.inner.ratio=He.inner.height/He.inner.width),this.prop.pageSize=He})},Ue.prototype.setProgress=function(He,We,Cn,An){return He!=null&&(this.progress.val=He),We!=null&&(this.progress.state=We),Cn!=null&&(this.progress.n=Cn),An!=null&&(this.progress.stack=An),this.progress.ratio=this.progress.val/this.progress.state,this},Ue.prototype.updateProgress=function(He,We,Cn,An){return this.setProgress(He?this.progress.val+He:null,We||null,Cn?this.progress.n+Cn:null,An?this.progress.stack.concat(An):null)},Ue.prototype.then=function(He,We){var Cn=this;return this.thenCore(He,We,function(An,En){return Cn.updateProgress(null,null,1,[An]),Promise.prototype.then.call(this,function(Sn){return Cn.updateProgress(null,An),Sn}).then(An,En).then(function(Sn){return Cn.updateProgress(1),Sn})})},Ue.prototype.thenCore=function(He,We,Cn){Cn=Cn||Promise.prototype.then,He&&(He=He.bind(this)),We&&(We=We.bind(this));var An=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ue.convert(Object.assign({},this),Promise.prototype),En=Cn.call(An,He,We);return Ue.convert(En,this.__proto__)},Ue.prototype.thenExternal=function(He,We){return Promise.prototype.then.call(this,He,We)},Ue.prototype.thenList=function(He){var We=this;return He.forEach(function(Cn){We=We.thenCore(Cn)}),We},Ue.prototype.catch=function(He){He&&(He=He.bind(this));var We=Promise.prototype.catch.call(this,He);return Ue.convert(We,this)},Ue.prototype.catchExternal=function(He){return Promise.prototype.catch.call(this,He)},Ue.prototype.error=function(He){return this.then(function(){throw new Error(He)})},Ue.prototype.using=Ue.prototype.set,Ue.prototype.saveAs=Ue.prototype.save,Ue.prototype.export=Ue.prototype.output,Ue.prototype.run=Ue.prototype.then,E.getPageSize=function(He,We,Cn){if(_typeof(He)==="object"){var An=He;He=An.orientation,We=An.unit||We,Cn=An.format||Cn}We=We||"mm",Cn=Cn||"a4",He=(""+(He||"P")).toLowerCase();var En,Sn=(""+Cn).toLowerCase(),Tn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(We){case"pt":En=1;break;case"mm":En=72/25.4;break;case"cm":En=72/2.54;break;case"in":En=72;break;case"px":En=.75;break;case"pc":case"em":En=12;break;case"ex":En=6;break;default:throw"Invalid unit: "+We}var Ln,Bn=0,ei=0;if(Tn.hasOwnProperty(Sn))Bn=Tn[Sn][1]/En,ei=Tn[Sn][0]/En;else try{Bn=Cn[1],ei=Cn[0]}catch{throw new Error("Invalid format: "+Cn)}if(He==="p"||He==="portrait")He="p",ei>Bn&&(Ln=ei,ei=Bn,Bn=Ln);else{if(He!=="l"&&He!=="landscape")throw"Invalid orientation: "+He;He="l",Bn>ei&&(Ln=ei,ei=Bn,Bn=Ln)}return{width:ei,height:Bn,unit:We,k:En,orientation:He}},ke.html=function(He,We){(We=We||{}).callback=We.callback||function(){},We.html2canvas=We.html2canvas||{},We.html2canvas.canvas=We.html2canvas.canvas||this.canvas,We.jsPDF=We.jsPDF||this,We.fontFaces=We.fontFaces?We.fontFaces.map(jt):null;var Cn=new Ue(We);return We.worker?Cn:Cn.from(He).doCallback()}}(E.API),E.API.addJS=function(ke){return Ht=ke,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(ke){var e;ke.events.push(["postPutResources",function(){var Te=this,Oe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Be=Te.outline.render().split(/\r\n/),Ue=0;Ue<Be.length;Ue++){var He=Be[Ue],We=Oe.exec(He);if(We!=null){var Cn=We[1];Te.internal.newObjectDeferredBegin(Cn,!1)}Te.internal.write(He)}if(this.outline.createNamedDestinations){var An=this.internal.pages.length,En=[];for(Ue=0;Ue<An;Ue++){var Sn=Te.internal.newObject();En.push(Sn);var Tn=Te.internal.getPageInfo(Ue+1);Te.internal.write("<< /D["+Tn.objId+" 0 R /XYZ null null null]>> endobj")}var Ln=Te.internal.newObject();for(Te.internal.write("<< /Names [ "),Ue=0;Ue<En.length;Ue++)Te.internal.write("(page_"+(Ue+1)+")"+En[Ue]+" 0 R");Te.internal.write(" ] >>","endobj"),e=Te.internal.newObject(),Te.internal.write("<< /Dests "+Ln+" 0 R"),Te.internal.write(">>","endobj")}}]),ke.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),ke.events.push(["initialized",function(){var Te=this;Te.outline={createNamedDestinations:!1,root:{children:[]}},Te.outline.add=function(Oe,Be,Ue){var He={title:Be,options:Ue,children:[]};return Oe==null&&(Oe=this.root),Oe.children.push(He),He},Te.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=Te,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},Te.outline.genIds_r=function(Oe){Oe.id=Te.internal.newObjectDeferred();for(var Be=0;Be<Oe.children.length;Be++)this.genIds_r(Oe.children[Be])},Te.outline.renderRoot=function(Oe){this.objStart(Oe),this.line("/Type /Outlines"),Oe.children.length>0&&(this.line("/First "+this.makeRef(Oe.children[0])),this.line("/Last "+this.makeRef(Oe.children[Oe.children.length-1]))),this.line("/Count "+this.count_r({count:0},Oe)),this.objEnd()},Te.outline.renderItems=function(Oe){for(var Be=this.ctx.pdf.internal.getVerticalCoordinateString,Ue=0;Ue<Oe.children.length;Ue++){var He=Oe.children[Ue];this.objStart(He),this.line("/Title "+this.makeString(He.title)),this.line("/Parent "+this.makeRef(Oe)),Ue>0&&this.line("/Prev "+this.makeRef(Oe.children[Ue-1])),Ue<Oe.children.length-1&&this.line("/Next "+this.makeRef(Oe.children[Ue+1])),He.children.length>0&&(this.line("/First "+this.makeRef(He.children[0])),this.line("/Last "+this.makeRef(He.children[He.children.length-1])));var We=this.count=this.count_r({count:0},He);if(We>0&&this.line("/Count "+We),He.options&&He.options.pageNumber){var Cn=Te.internal.getPageInfo(He.options.pageNumber);this.line("/Dest ["+Cn.objId+" 0 R /XYZ 0 "+Be(0)+" 0]")}this.objEnd()}for(var An=0;An<Oe.children.length;An++)this.renderItems(Oe.children[An])},Te.outline.line=function(Oe){this.ctx.val+=Oe+`\r
`},Te.outline.makeRef=function(Oe){return Oe.id+" 0 R"},Te.outline.makeString=function(Oe){return"("+Te.internal.pdfEscape(Oe)+")"},Te.outline.objStart=function(Oe){this.ctx.val+=`\r
`+Oe.id+` 0 obj\r
<<\r
`},Te.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},Te.outline.count_r=function(Oe,Be){for(var Ue=0;Ue<Be.children.length;Ue++)Oe.count++,this.count_r(Oe,Be.children[Ue]);return Oe.count}}])}(E.API),function(ke){var e=[192,193,194,195,196,197,198,199];ke.processJPEG=function(Te,Oe,Be,Ue,He,We){var Cn,An=this.decode.DCT_DECODE,En=null;if(typeof Te=="string"||this.__addimage__.isArrayBuffer(Te)||this.__addimage__.isArrayBufferView(Te)){switch(Te=He||Te,Te=this.__addimage__.isArrayBuffer(Te)?new Uint8Array(Te):Te,(Cn=function(Sn){for(var Tn,Ln=256*Sn.charCodeAt(4)+Sn.charCodeAt(5),Bn=Sn.length,ei={width:0,height:0,numcomponents:1},ni=4;ni<Bn;ni+=2){if(ni+=Ln,e.indexOf(Sn.charCodeAt(ni+1))!==-1){Tn=256*Sn.charCodeAt(ni+5)+Sn.charCodeAt(ni+6),ei={width:256*Sn.charCodeAt(ni+7)+Sn.charCodeAt(ni+8),height:Tn,numcomponents:Sn.charCodeAt(ni+9)};break}Ln=256*Sn.charCodeAt(ni+2)+Sn.charCodeAt(ni+3)}return ei}(Te=this.__addimage__.isArrayBufferView(Te)?this.__addimage__.arrayBufferToBinaryString(Te):Te)).numcomponents){case 1:We=this.color_spaces.DEVICE_GRAY;break;case 4:We=this.color_spaces.DEVICE_CMYK;break;case 3:We=this.color_spaces.DEVICE_RGB}En={data:Te,width:Cn.width,height:Cn.height,colorSpace:We,bitsPerComponent:8,filter:An,index:Oe,alias:Be}}return En}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var ke,e,Te;function Oe(Ue){var He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi;for(this.data=Ue,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Sn=null;;){switch(He=this.readUInt32(),Bn=(function(){var ai,ci;for(ci=[],ai=0;ai<4;++ai)ci.push(String.fromCharCode(this.data[this.pos++]));return ci}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(He);break;case"fcTL":Sn&&this.animation.frames.push(Sn),this.pos+=4,Sn={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},En=this.readUInt16(),An=this.readUInt16()||100,Sn.delay=1e3*En/An,Sn.disposeOp=this.data[this.pos++],Sn.blendOp=this.data[this.pos++],Sn.data=[];break;case"IDAT":case"fdAT":for(Bn==="fdAT"&&(this.pos+=4,He-=4),Ue=(Sn!=null?Sn.data:void 0)||this.imgData,ti=0;0<=He?ti<He:ti>He;0<=He?++ti:--ti)Ue.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Cn=this.palette.length/3,this.transparency.indexed=this.read(He),this.transparency.indexed.length>Cn)throw new Error("More transparent colors than palette size");if((ei=Cn-this.transparency.indexed.length)>0)for(ri=0;0<=ei?ri<ei:ri>ei;0<=ei?++ri:--ri)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(He)[0];break;case 2:this.transparency.rgb=this.read(He)}break;case"tEXt":Tn=(ni=this.read(He)).indexOf(0),Ln=String.fromCharCode.apply(String,ni.slice(0,Tn)),this.text[Ln]=String.fromCharCode.apply(String,ni.slice(Tn+1));break;case"IEND":return Sn&&this.animation.frames.push(Sn),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(oi=this.colorType)===4||oi===6,We=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*We,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=He}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}Oe.prototype.read=function(Ue){var He,We;for(We=[],He=0;0<=Ue?He<Ue:He>Ue;0<=Ue?++He:--He)We.push(this.data[this.pos++]);return We},Oe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.decodePixels=function(Ue){var He=this.pixelBitlength/8,We=new Uint8Array(this.width*this.height*He),Cn=0,An=this;if(Ue==null&&(Ue=this.imgData),Ue.length===0)return new Uint8Array(0);function En(Sn,Tn,Ln,Bn){var ei,ni,ti,ri,oi,ai,ci,Pi,vi,pi,Mi,Fi,fi,ui,Oi,Ni,nr,er,cr,ar,pr,rr=Math.ceil((An.width-Sn)/Ln),br=Math.ceil((An.height-Tn)/Bn),Li=An.width==rr&&An.height==br;for(ui=He*rr,Fi=Li?We:new Uint8Array(ui*br),ai=Ue.length,fi=0,ni=0;fi<br&&Cn<ai;){switch(Ue[Cn++]){case 0:for(ri=nr=0;nr<ui;ri=nr+=1)Fi[ni++]=Ue[Cn++];break;case 1:for(ri=er=0;er<ui;ri=er+=1)ei=Ue[Cn++],oi=ri<He?0:Fi[ni-He],Fi[ni++]=(ei+oi)%256;break;case 2:for(ri=cr=0;cr<ui;ri=cr+=1)ei=Ue[Cn++],ti=(ri-ri%He)/He,Oi=fi&&Fi[(fi-1)*ui+ti*He+ri%He],Fi[ni++]=(Oi+ei)%256;break;case 3:for(ri=ar=0;ar<ui;ri=ar+=1)ei=Ue[Cn++],ti=(ri-ri%He)/He,oi=ri<He?0:Fi[ni-He],Oi=fi&&Fi[(fi-1)*ui+ti*He+ri%He],Fi[ni++]=(ei+Math.floor((oi+Oi)/2))%256;break;case 4:for(ri=pr=0;pr<ui;ri=pr+=1)ei=Ue[Cn++],ti=(ri-ri%He)/He,oi=ri<He?0:Fi[ni-He],fi===0?Oi=Ni=0:(Oi=Fi[(fi-1)*ui+ti*He+ri%He],Ni=ti&&Fi[(fi-1)*ui+(ti-1)*He+ri%He]),ci=oi+Oi-Ni,Pi=Math.abs(ci-oi),pi=Math.abs(ci-Oi),Mi=Math.abs(ci-Ni),vi=Pi<=pi&&Pi<=Mi?oi:pi<=Mi?Oi:Ni,Fi[ni++]=(ei+vi)%256;break;default:throw new Error("Invalid filter algorithm: "+Ue[Cn-1])}if(!Li){var ur=((Tn+fi*Bn)*An.width+Sn)*He,sr=fi*ui;for(ri=0;ri<rr;ri+=1){for(var dr=0;dr<He;dr+=1)We[ur++]=Fi[sr++];ur+=(Ln-1)*He}}fi++}}return Ue=unzlibSync(Ue),An.interlaceMethod==1?(En(0,0,8,8),En(4,0,8,8),En(0,4,4,8),En(2,0,4,4),En(0,2,2,4),En(1,0,2,2),En(0,1,1,2)):En(0,0,1,1),We},Oe.prototype.decodePalette=function(){var Ue,He,We,Cn,An,En,Sn,Tn,Ln;for(We=this.palette,En=this.transparency.indexed||[],An=new Uint8Array((En.length||0)+We.length),Cn=0,Ue=0,He=Sn=0,Tn=We.length;Sn<Tn;He=Sn+=3)An[Cn++]=We[He],An[Cn++]=We[He+1],An[Cn++]=We[He+2],An[Cn++]=(Ln=En[Ue++])!=null?Ln:255;return An},Oe.prototype.copyToImageData=function(Ue,He){var We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti;if(Cn=this.colors,ei=null,We=this.hasAlphaChannel,this.palette.length&&(ei=(ti=this._decodedPalette)!=null?ti:this._decodedPalette=this.decodePalette(),Cn=4,We=!0),Bn=(An=Ue.data||Ue).length,Sn=ei||He,En=Tn=0,Cn===1)for(;En<Bn;)Ln=ei?4*He[En/4]:Tn,ni=Sn[Ln++],An[En++]=ni,An[En++]=ni,An[En++]=ni,An[En++]=We?Sn[Ln++]:255,Tn=Ln;else for(;En<Bn;)Ln=ei?4*He[En/4]:Tn,An[En++]=Sn[Ln++],An[En++]=Sn[Ln++],An[En++]=Sn[Ln++],An[En++]=We?Sn[Ln++]:255,Tn=Ln},Oe.prototype.decode=function(){var Ue;return Ue=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ue,this.decodePixels()),Ue};var Be=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),Te=e.getContext("2d")}catch{return!1}return!0}return!1};return Be(),ke=function(Ue){var He;if(Be()===!0)return Te.width=Ue.width,Te.height=Ue.height,Te.clearRect(0,0,Ue.width,Ue.height),Te.putImageData(Ue,0,0),(He=new Image).src=e.toDataURL(),He;throw new Error("This method requires a Browser with Canvas-capability.")},Oe.prototype.decodeFrames=function(Ue){var He,We,Cn,An,En,Sn,Tn,Ln;if(this.animation){for(Ln=[],We=En=0,Sn=(Tn=this.animation.frames).length;En<Sn;We=++En)He=Tn[We],Cn=Ue.createImageData(He.width,He.height),An=this.decodePixels(new Uint8Array(He.data)),this.copyToImageData(Cn,An),He.imageData=Cn,Ln.push(He.image=ke(Cn));return Ln}},Oe.prototype.renderFrame=function(Ue,He){var We,Cn,An;return We=(Cn=this.animation.frames)[He],An=Cn[He-1],He===0&&Ue.clearRect(0,0,this.width,this.height),(An!=null?An.disposeOp:void 0)===1?Ue.clearRect(An.xOffset,An.yOffset,An.width,An.height):(An!=null?An.disposeOp:void 0)===2&&Ue.putImageData(An.imageData,An.xOffset,An.yOffset),We.blendOp===0&&Ue.clearRect(We.xOffset,We.yOffset,We.width,We.height),Ue.drawImage(We.image,We.xOffset,We.yOffset)},Oe.prototype.animate=function(Ue){var He,We,Cn,An,En,Sn,Tn=this;return We=0,Sn=this.animation,An=Sn.numFrames,Cn=Sn.frames,En=Sn.numPlays,(He=function(){var Ln,Bn;if(Ln=We++%An,Bn=Cn[Ln],Tn.renderFrame(Ue,Ln),An>1&&We/An<En)return Tn.animation._timeout=setTimeout(He,Bn.delay)})()},Oe.prototype.stopAnimation=function(){var Ue;return clearTimeout((Ue=this.animation)!=null?Ue._timeout:void 0)},Oe.prototype.render=function(Ue){var He,We;return Ue._png&&Ue._png.stopAnimation(),Ue._png=this,Ue.width=this.width,Ue.height=this.height,He=Ue.getContext("2d"),this.animation?(this.decodeFrames(He),this.animate(He)):(We=He.createImageData(this.width,this.height),this.copyToImageData(We,this.decodePixels()),He.putImageData(We,0,0))},Oe}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(ke){var e=0;if(ke[e++]!==71||ke[e++]!==73||ke[e++]!==70||ke[e++]!==56||(ke[e++]+1&253)!=56||ke[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var Te=ke[e++]|ke[e++]<<8,Oe=ke[e++]|ke[e++]<<8,Be=ke[e++],Ue=Be>>7,He=1<<(7&Be)+1;ke[e++],ke[e++];var We=null,Cn=null;Ue&&(We=e,Cn=He,e+=3*He);var An=!0,En=[],Sn=0,Tn=null,Ln=0,Bn=null;for(this.width=Te,this.height=Oe;An&&e<ke.length;)switch(ke[e++]){case 33:switch(ke[e++]){case 255:if(ke[e]!==11||ke[e+1]==78&&ke[e+2]==69&&ke[e+3]==84&&ke[e+4]==83&&ke[e+5]==67&&ke[e+6]==65&&ke[e+7]==80&&ke[e+8]==69&&ke[e+9]==50&&ke[e+10]==46&&ke[e+11]==48&&ke[e+12]==3&&ke[e+13]==1&&ke[e+16]==0)e+=14,Bn=ke[e++]|ke[e++]<<8,e++;else for(e+=12;;){if(!((fi=ke[e++])>=0))throw Error("Invalid block size");if(fi===0)break;e+=fi}break;case 249:if(ke[e++]!==4||ke[e+4]!==0)throw new Error("Invalid graphics extension block.");var ei=ke[e++];Sn=ke[e++]|ke[e++]<<8,Tn=ke[e++],!(1&ei)&&(Tn=null),Ln=ei>>2&7,e++;break;case 254:for(;;){if(!((fi=ke[e++])>=0))throw Error("Invalid block size");if(fi===0)break;e+=fi}break;default:throw new Error("Unknown graphic control label: 0x"+ke[e-1].toString(16))}break;case 44:var ni=ke[e++]|ke[e++]<<8,ti=ke[e++]|ke[e++]<<8,ri=ke[e++]|ke[e++]<<8,oi=ke[e++]|ke[e++]<<8,ai=ke[e++],ci=ai>>6&1,Pi=1<<(7&ai)+1,vi=We,pi=Cn,Mi=!1;ai>>7&&(Mi=!0,vi=e,pi=Pi,e+=3*Pi);var Fi=e;for(e++;;){var fi;if(!((fi=ke[e++])>=0))throw Error("Invalid block size");if(fi===0)break;e+=fi}En.push({x:ni,y:ti,width:ri,height:oi,has_local_palette:Mi,palette_offset:vi,palette_size:pi,data_offset:Fi,data_length:e-Fi,transparent_index:Tn,interlaced:!!ci,delay:Sn,disposal:Ln});break;case 59:An=!1;break;default:throw new Error("Unknown gif block: 0x"+ke[e-1].toString(16))}this.numFrames=function(){return En.length},this.loopCount=function(){return Bn},this.frameInfo=function(ui){if(ui<0||ui>=En.length)throw new Error("Frame index out of range.");return En[ui]},this.decodeAndBlitFrameBGRA=function(ui,Oi){var Ni=this.frameInfo(ui),nr=Ni.width*Ni.height,er=new Uint8Array(nr);$t(ke,Ni.data_offset,er,nr);var cr=Ni.palette_offset,ar=Ni.transparent_index;ar===null&&(ar=256);var pr=Ni.width,rr=Te-pr,br=pr,Li=4*(Ni.y*Te+Ni.x),ur=4*((Ni.y+Ni.height)*Te+Ni.x),sr=Li,dr=4*rr;Ni.interlaced===!0&&(dr+=4*Te*7);for(var vr=8,hr=0,mr=er.length;hr<mr;++hr){var _r=er[hr];if(br===0&&(br=pr,(sr+=dr)>=ur&&(dr=4*rr+4*Te*(vr-1),sr=Li+(pr+rr)*(vr<<1),vr>>=1)),_r===ar)sr+=4;else{var Ar=ke[cr+3*_r],Vr=ke[cr+3*_r+1],Gr=ke[cr+3*_r+2];Oi[sr++]=Gr,Oi[sr++]=Vr,Oi[sr++]=Ar,Oi[sr++]=255}--br}},this.decodeAndBlitFrameRGBA=function(ui,Oi){var Ni=this.frameInfo(ui),nr=Ni.width*Ni.height,er=new Uint8Array(nr);$t(ke,Ni.data_offset,er,nr);var cr=Ni.palette_offset,ar=Ni.transparent_index;ar===null&&(ar=256);var pr=Ni.width,rr=Te-pr,br=pr,Li=4*(Ni.y*Te+Ni.x),ur=4*((Ni.y+Ni.height)*Te+Ni.x),sr=Li,dr=4*rr;Ni.interlaced===!0&&(dr+=4*Te*7);for(var vr=8,hr=0,mr=er.length;hr<mr;++hr){var _r=er[hr];if(br===0&&(br=pr,(sr+=dr)>=ur&&(dr=4*rr+4*Te*(vr-1),sr=Li+(pr+rr)*(vr<<1),vr>>=1)),_r===ar)sr+=4;else{var Ar=ke[cr+3*_r],Vr=ke[cr+3*_r+1],Gr=ke[cr+3*_r+2];Oi[sr++]=Ar,Oi[sr++]=Vr,Oi[sr++]=Gr,Oi[sr++]=255}--br}}}function $t(ke,e,Te,Oe){for(var Be=ke[e++],Ue=1<<Be,He=Ue+1,We=He+1,Cn=Be+1,An=(1<<Cn)-1,En=0,Sn=0,Tn=0,Ln=ke[e++],Bn=new Int32Array(4096),ei=null;;){for(;En<16&&Ln!==0;)Sn|=ke[e++]<<En,En+=8,Ln===1?Ln=ke[e++]:--Ln;if(En<Cn)break;var ni=Sn&An;if(Sn>>=Cn,En-=Cn,ni!==Ue){if(ni===He)break;for(var ti=ni<We?ni:ei,ri=0,oi=ti;oi>Ue;)oi=Bn[oi]>>8,++ri;var ai=oi;if(Tn+ri+(ti!==ni?1:0)>Oe)return void a.log("Warning, gif stream longer than expected.");Te[Tn++]=ai;var ci=Tn+=ri;for(ti!==ni&&(Te[Tn++]=ai),oi=ti;ri--;)oi=Bn[oi],Te[--ci]=255&oi,oi>>=8;ei!==null&&We<4096&&(Bn[We++]=ei<<8|ai,We>=An+1&&Cn<12&&(++Cn,An=An<<1|1)),ei=ni}else We=He+1,An=(1<<(Cn=Be+1))-1,ei=null}return Tn!==Oe&&a.log("Warning, gif stream shorter than expected."),Te}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(ke){var e,Te,Oe,Be,Ue,He=Math.floor,We=new Array(64),Cn=new Array(64),An=new Array(64),En=new Array(64),Sn=new Array(65535),Tn=new Array(65535),Ln=new Array(64),Bn=new Array(64),ei=[],ni=0,ti=7,ri=new Array(64),oi=new Array(64),ai=new Array(64),ci=new Array(256),Pi=new Array(2048),vi=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pi=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mi=[0,1,2,3,4,5,6,7,8,9,10,11],Fi=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],fi=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ui=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Oi=[0,1,2,3,4,5,6,7,8,9,10,11],Ni=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nr=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function er(Li,ur){for(var sr=0,dr=0,vr=new Array,hr=1;hr<=16;hr++){for(var mr=1;mr<=Li[hr];mr++)vr[ur[dr]]=[],vr[ur[dr]][0]=sr,vr[ur[dr]][1]=hr,dr++,sr++;sr*=2}return vr}function cr(Li){for(var ur=Li[0],sr=Li[1]-1;sr>=0;)ur&1<<sr&&(ni|=1<<ti),sr--,--ti<0&&(ni==255?(ar(255),ar(0)):ar(ni),ti=7,ni=0)}function ar(Li){ei.push(Li)}function pr(Li){ar(Li>>8&255),ar(255&Li)}function rr(Li,ur,sr,dr,vr){for(var hr,mr=vr[0],_r=vr[240],Ar=function(Ir,kr){var Lr,Pr,Er,Sr,wr,Br,Hr,qr,Xr,cs,Qr=0;for(Xr=0;Xr<8;++Xr){Lr=Ir[Qr],Pr=Ir[Qr+1],Er=Ir[Qr+2],Sr=Ir[Qr+3],wr=Ir[Qr+4],Br=Ir[Qr+5],Hr=Ir[Qr+6];var bs=Lr+(qr=Ir[Qr+7]),vs=Lr-qr,Ms=Pr+Hr,Ls=Pr-Hr,ps=Er+Br,Ps=Er-Br,Es=Sr+wr,Ds=Sr-wr,xs=bs+Es,Xs=bs-Es,_o=Ms+ps,Fs=Ms-ps;Ir[Qr]=xs+_o,Ir[Qr+4]=xs-_o;var Ss=.707106781*(Fs+Xs);Ir[Qr+2]=Xs+Ss,Ir[Qr+6]=Xs-Ss;var Is=.382683433*((xs=Ds+Ps)-(Fs=Ls+vs)),oa=.5411961*xs+Is,qs=1.306562965*Fs+Is,Eo=.707106781*(_o=Ps+Ls),Rs=vs+Eo,As=vs-Eo;Ir[Qr+5]=As+oa,Ir[Qr+3]=As-oa,Ir[Qr+1]=Rs+qs,Ir[Qr+7]=Rs-qs,Qr+=8}for(Qr=0,Xr=0;Xr<8;++Xr){Lr=Ir[Qr],Pr=Ir[Qr+8],Er=Ir[Qr+16],Sr=Ir[Qr+24],wr=Ir[Qr+32],Br=Ir[Qr+40],Hr=Ir[Qr+48];var bo=Lr+(qr=Ir[Qr+56]),Us=Lr-qr,zs=Pr+Hr,Ws=Pr-Hr,yo=Er+Br,Co=Er-Br,qa=Sr+wr,ma=Sr-wr,Pa=bo+qa,Fa=bo-qa,xa=zs+yo,aa=zs-yo;Ir[Qr]=Pa+xa,Ir[Qr+32]=Pa-xa;var la=.707106781*(aa+Fa);Ir[Qr+16]=Fa+la,Ir[Qr+48]=Fa-la;var nc=.382683433*((Pa=ma+Co)-(aa=Ws+Us)),Nc=.5411961*Pa+nc,qc=1.306562965*aa+nc,Wc=.707106781*(xa=Co+Ws),Yc=Us+Wc,Xc=Us-Wc;Ir[Qr+40]=Xc+Nc,Ir[Qr+24]=Xc-Nc,Ir[Qr+8]=Yc+qc,Ir[Qr+56]=Yc-qc,Qr++}for(Xr=0;Xr<64;++Xr)cs=Ir[Xr]*kr[Xr],Ln[Xr]=cs>0?cs+.5|0:cs-.5|0;return Ln}(Li,ur),Vr=0;Vr<64;++Vr)Bn[vi[Vr]]=Ar[Vr];var Gr=Bn[0]-sr;sr=Bn[0],Gr==0?cr(dr[0]):(cr(dr[Tn[hr=32767+Gr]]),cr(Sn[hr]));for(var Hi=63;Hi>0&&Bn[Hi]==0;)Hi--;if(Hi==0)return cr(mr),sr;for(var gr,lr=1;lr<=Hi;){for(var Ki=lr;Bn[lr]==0&&lr<=Hi;)++lr;var Dr=lr-Ki;if(Dr>=16){gr=Dr>>4;for(var Nr=1;Nr<=gr;++Nr)cr(_r);Dr&=15}hr=32767+Bn[lr],cr(vr[(Dr<<4)+Tn[hr]]),cr(Sn[hr]),lr++}return Hi!=63&&cr(mr),sr}function br(Li){Li=Math.min(Math.max(Li,1),100),Ue!=Li&&(function(ur){for(var sr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],dr=0;dr<64;dr++){var vr=He((sr[dr]*ur+50)/100);vr=Math.min(Math.max(vr,1),255),We[vi[dr]]=vr}for(var hr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],mr=0;mr<64;mr++){var _r=He((hr[mr]*ur+50)/100);_r=Math.min(Math.max(_r,1),255),Cn[vi[mr]]=_r}for(var Ar=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Vr=0,Gr=0;Gr<8;Gr++)for(var Hi=0;Hi<8;Hi++)An[Vr]=1/(We[vi[Vr]]*Ar[Gr]*Ar[Hi]*8),En[Vr]=1/(Cn[vi[Vr]]*Ar[Gr]*Ar[Hi]*8),Vr++}(Li<50?Math.floor(5e3/Li):Math.floor(200-2*Li)),Ue=Li)}this.encode=function(Li,ur){ur&&br(ur),ei=new Array,ni=0,ti=7,pr(65496),pr(65504),pr(16),ar(74),ar(70),ar(73),ar(70),ar(0),ar(1),ar(1),ar(0),pr(1),pr(1),ar(0),ar(0),function(){pr(65499),pr(132),ar(0);for(var Pr=0;Pr<64;Pr++)ar(We[Pr]);ar(1);for(var Er=0;Er<64;Er++)ar(Cn[Er])}(),function(Pr,Er){pr(65472),pr(17),ar(8),pr(Er),pr(Pr),ar(3),ar(1),ar(17),ar(0),ar(2),ar(17),ar(1),ar(3),ar(17),ar(1)}(Li.width,Li.height),function(){pr(65476),pr(418),ar(0);for(var Pr=0;Pr<16;Pr++)ar(pi[Pr+1]);for(var Er=0;Er<=11;Er++)ar(Mi[Er]);ar(16);for(var Sr=0;Sr<16;Sr++)ar(Fi[Sr+1]);for(var wr=0;wr<=161;wr++)ar(fi[wr]);ar(1);for(var Br=0;Br<16;Br++)ar(ui[Br+1]);for(var Hr=0;Hr<=11;Hr++)ar(Oi[Hr]);ar(17);for(var qr=0;qr<16;qr++)ar(Ni[qr+1]);for(var Xr=0;Xr<=161;Xr++)ar(nr[Xr])}(),pr(65498),pr(12),ar(3),ar(1),ar(0),ar(2),ar(17),ar(3),ar(17),ar(0),ar(63),ar(0);var sr=0,dr=0,vr=0;ni=0,ti=7,this.encode.displayName="_encode_";for(var hr,mr,_r,Ar,Vr,Gr,Hi,gr,lr,Ki=Li.data,Dr=Li.width,Nr=Li.height,Ir=4*Dr,kr=0;kr<Nr;){for(hr=0;hr<Ir;){for(Vr=Ir*kr+hr,Hi=-1,gr=0,lr=0;lr<64;lr++)Gr=Vr+(gr=lr>>3)*Ir+(Hi=4*(7&lr)),kr+gr>=Nr&&(Gr-=Ir*(kr+1+gr-Nr)),hr+Hi>=Ir&&(Gr-=hr+Hi-Ir+4),mr=Ki[Gr++],_r=Ki[Gr++],Ar=Ki[Gr++],ri[lr]=(Pi[mr]+Pi[_r+256>>0]+Pi[Ar+512>>0]>>16)-128,oi[lr]=(Pi[mr+768>>0]+Pi[_r+1024>>0]+Pi[Ar+1280>>0]>>16)-128,ai[lr]=(Pi[mr+1280>>0]+Pi[_r+1536>>0]+Pi[Ar+1792>>0]>>16)-128;sr=rr(ri,An,sr,e,Oe),dr=rr(oi,En,dr,Te,Be),vr=rr(ai,En,vr,Te,Be),hr+=32}kr+=8}if(ti>=0){var Lr=[];Lr[1]=ti+1,Lr[0]=(1<<ti+1)-1,cr(Lr)}return pr(65497),new Uint8Array(ei)},ke=ke||50,function(){for(var Li=String.fromCharCode,ur=0;ur<256;ur++)ci[ur]=Li(ur)}(),e=er(pi,Mi),Te=er(ui,Oi),Oe=er(Fi,fi),Be=er(Ni,nr),function(){for(var Li=1,ur=2,sr=1;sr<=15;sr++){for(var dr=Li;dr<ur;dr++)Tn[32767+dr]=sr,Sn[32767+dr]=[],Sn[32767+dr][1]=sr,Sn[32767+dr][0]=dr;for(var vr=-(ur-1);vr<=-Li;vr++)Tn[32767+vr]=sr,Sn[32767+vr]=[],Sn[32767+vr][1]=sr,Sn[32767+vr][0]=ur-1+vr;Li<<=1,ur<<=1}}(),function(){for(var Li=0;Li<256;Li++)Pi[Li]=19595*Li,Pi[Li+256>>0]=38470*Li,Pi[Li+512>>0]=7471*Li+32768,Pi[Li+768>>0]=-11059*Li,Pi[Li+1024>>0]=-21709*Li,Pi[Li+1280>>0]=32768*Li+8421375,Pi[Li+1536>>0]=-27439*Li,Pi[Li+1792>>0]=-5329*Li}(),br(ke)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(ke,e){if(this.pos=0,this.buffer=ke,this.datav=new DataView(ke.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(ke){function e(pi){if(!pi)throw Error("assert :P")}function Te(pi,Mi,Fi){for(var fi=0;4>fi;fi++)if(pi[Mi+fi]!=Fi.charCodeAt(fi))return!0;return!1}function Oe(pi,Mi,Fi,fi,ui){for(var Oi=0;Oi<ui;Oi++)pi[Mi+Oi]=Fi[fi+Oi]}function Be(pi,Mi,Fi,fi){for(var ui=0;ui<fi;ui++)pi[Mi+ui]=Fi}function Ue(pi){return new Int32Array(pi)}function He(pi,Mi){for(var Fi=[],fi=0;fi<pi;fi++)Fi.push(new Mi);return Fi}function We(pi,Mi){var Fi=[];return function fi(ui,Oi,Ni){for(var nr=Ni[Oi],er=0;er<nr&&(ui.push(Ni.length>Oi+1?[]:new Mi),!(Ni.length<Oi+1));er++)fi(ui[er],Oi+1,Ni)}(Fi,0,pi),Fi}var Cn=function(){var pi=this;function Mi(ii,si){for(var di=1<<si-1>>>0;ii&di;)di>>>=1;return di?(ii&di-1)+di:ii}function Fi(ii,si,di,Ri,ji){e(!(Ri%di));do ii[si+(Ri-=di)]=ji;while(0<Ri)}function fi(ii,si,di,Ri,ji){if(e(2328>=ji),512>=ji)var tr=Ue(512);else if((tr=Ue(ji))==null)return 0;return function(ir,or,fr,yr,Rr,zr){var $r,Fr,rs=or,Wr=1<<fr,Mr=Ue(16),Or=Ue(16);for(e(Rr!=0),e(yr!=null),e(ir!=null),e(0<fr),Fr=0;Fr<Rr;++Fr){if(15<yr[Fr])return 0;++Mr[yr[Fr]]}if(Mr[0]==Rr)return 0;for(Or[1]=0,$r=1;15>$r;++$r){if(Mr[$r]>1<<$r)return 0;Or[$r+1]=Or[$r]+Mr[$r]}for(Fr=0;Fr<Rr;++Fr)$r=yr[Fr],0<yr[Fr]&&(zr[Or[$r]++]=Fr);if(Or[15]==1)return(yr=new ui).g=0,yr.value=zr[0],Fi(ir,rs,1,Wr,yr),Wr;var es,ss=-1,ts=Wr-1,Cs=0,gs=1,Ts=1,ms=1<<fr;for(Fr=0,$r=1,Rr=2;$r<=fr;++$r,Rr<<=1){if(gs+=Ts<<=1,0>(Ts-=Mr[$r]))return 0;for(;0<Mr[$r];--Mr[$r])(yr=new ui).g=$r,yr.value=zr[Fr++],Fi(ir,rs+Cs,Rr,ms,yr),Cs=Mi(Cs,$r)}for($r=fr+1,Rr=2;15>=$r;++$r,Rr<<=1){if(gs+=Ts<<=1,0>(Ts-=Mr[$r]))return 0;for(;0<Mr[$r];--Mr[$r]){if(yr=new ui,(Cs&ts)!=ss){for(rs+=ms,es=1<<(ss=$r)-fr;15>ss&&!(0>=(es-=Mr[ss]));)++ss,es<<=1;Wr+=ms=1<<(es=ss-fr),ir[or+(ss=Cs&ts)].g=es+fr,ir[or+ss].value=rs-or-ss}yr.g=$r-fr,yr.value=zr[Fr++],Fi(ir,rs+(Cs>>fr),Rr,ms,yr),Cs=Mi(Cs,$r)}}return gs!=2*Or[15]-1?0:Wr}(ii,si,di,Ri,ji,tr)}function ui(){this.value=this.g=0}function Oi(){this.value=this.g=0}function Ni(){this.G=He(5,ui),this.H=Ue(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=He(ca,Oi)}function nr(ii,si,di,Ri){e(ii!=null),e(si!=null),e(2147483648>Ri),ii.Ca=254,ii.I=0,ii.b=-8,ii.Ka=0,ii.oa=si,ii.pa=di,ii.Jd=si,ii.Yc=di+Ri,ii.Zc=4<=Ri?di+Ri-4+1:di,hr(ii)}function er(ii,si){for(var di=0;0<si--;)di|=_r(ii,128)<<si;return di}function cr(ii,si){var di=er(ii,si);return mr(ii)?-di:di}function ar(ii,si,di,Ri){var ji,tr=0;for(e(ii!=null),e(si!=null),e(4294967288>Ri),ii.Sb=Ri,ii.Ra=0,ii.u=0,ii.h=0,4<Ri&&(Ri=4),ji=0;ji<Ri;++ji)tr+=si[di+ji]<<8*ji;ii.Ra=tr,ii.bb=Ri,ii.oa=si,ii.pa=di}function pr(ii){for(;8<=ii.u&&ii.bb<ii.Sb;)ii.Ra>>>=8,ii.Ra+=ii.oa[ii.pa+ii.bb]<<hu-8>>>0,++ii.bb,ii.u-=8;sr(ii)&&(ii.h=1,ii.u=0)}function rr(ii,si){if(e(0<=si),!ii.h&&si<=du){var di=ur(ii)&uu[si];return ii.u+=si,pr(ii),di}return ii.h=1,ii.u=0}function br(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Li(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ur(ii){return ii.Ra>>>(ii.u&hu-1)>>>0}function sr(ii){return e(ii.bb<=ii.Sb),ii.h||ii.bb==ii.Sb&&ii.u>hu}function dr(ii,si){ii.u=si,ii.h=sr(ii)}function vr(ii){ii.u>=Wu&&(e(ii.u>=Wu),pr(ii))}function hr(ii){e(ii!=null&&ii.oa!=null),ii.pa<ii.Zc?(ii.I=(ii.oa[ii.pa++]|ii.I<<8)>>>0,ii.b+=8):(e(ii!=null&&ii.oa!=null),ii.pa<ii.Yc?(ii.b+=8,ii.I=ii.oa[ii.pa++]|ii.I<<8):ii.Ka?ii.b=0:(ii.I<<=8,ii.b+=8,ii.Ka=1))}function mr(ii){return er(ii,1)}function _r(ii,si){var di=ii.Ca;0>ii.b&&hr(ii);var Ri=ii.b,ji=di*si>>>8,tr=(ii.I>>>Ri>ji)+0;for(tr?(di-=ji,ii.I-=ji+1<<Ri>>>0):di=ji+1,Ri=di,ji=0;256<=Ri;)ji+=8,Ri>>=8;return Ri=7^ji+Ra[Ri],ii.b-=Ri,ii.Ca=(di<<Ri)-1,tr}function Ar(ii,si,di){ii[si+0]=di>>24&255,ii[si+1]=di>>16&255,ii[si+2]=di>>8&255,ii[si+3]=di>>0&255}function Vr(ii,si){return ii[si+0]<<0|ii[si+1]<<8}function Gr(ii,si){return Vr(ii,si)|ii[si+2]<<16}function Hi(ii,si){return Vr(ii,si)|Vr(ii,si+2)<<16}function gr(ii,si){var di=1<<si;return e(ii!=null),e(0<si),ii.X=Ue(di),ii.X==null?0:(ii.Mb=32-si,ii.Xa=si,1)}function lr(ii,si){e(ii!=null),e(si!=null),e(ii.Xa==si.Xa),Oe(si.X,0,ii.X,0,1<<si.Xa)}function Ki(){this.X=[],this.Xa=this.Mb=0}function Dr(ii,si,di,Ri){e(di!=null),e(Ri!=null);var ji=di[0],tr=Ri[0];return ji==0&&(ji=(ii*tr+si/2)/si),tr==0&&(tr=(si*ji+ii/2)/ii),0>=ji||0>=tr?0:(di[0]=ji,Ri[0]=tr,1)}function Nr(ii,si){return ii+(1<<si)-1>>>si}function Ir(ii,si){return((4278255360&ii)+(4278255360&si)>>>0&4278255360)+((16711935&ii)+(16711935&si)>>>0&16711935)>>>0}function kr(ii,si){pi[si]=function(di,Ri,ji,tr,ir,or,fr){var yr;for(yr=0;yr<ir;++yr){var Rr=pi[ii](or[fr+yr-1],ji,tr+yr);or[fr+yr]=Ir(di[Ri+yr],Rr)}}}function Lr(){this.ud=this.hd=this.jd=0}function Pr(ii,si){return((4278124286&(ii^si))>>>1)+(ii&si)>>>0}function Er(ii){return 0<=ii&&256>ii?ii:0>ii?0:255<ii?255:void 0}function Sr(ii,si){return Er(ii+(ii-si+.5>>1))}function wr(ii,si,di){return Math.abs(si-di)-Math.abs(ii-di)}function Br(ii,si,di,Ri,ji,tr,ir){for(Ri=tr[ir-1],di=0;di<ji;++di)tr[ir+di]=Ri=Ir(ii[si+di],Ri)}function Hr(ii,si,di,Ri,ji){var tr;for(tr=0;tr<di;++tr){var ir=ii[si+tr],or=ir>>8&255,fr=16711935&(fr=(fr=16711935&ir)+((or<<16)+or));Ri[ji+tr]=(4278255360&ir)+fr>>>0}}function qr(ii,si){si.jd=ii>>0&255,si.hd=ii>>8&255,si.ud=ii>>16&255}function Xr(ii,si,di,Ri,ji,tr){var ir;for(ir=0;ir<Ri;++ir){var or=si[di+ir],fr=or>>>8,yr=or,Rr=255&(Rr=(Rr=or>>>16)+((ii.jd<<24>>24)*(fr<<24>>24)>>>5));yr=255&(yr=(yr=yr+((ii.hd<<24>>24)*(fr<<24>>24)>>>5))+((ii.ud<<24>>24)*(Rr<<24>>24)>>>5)),ji[tr+ir]=(4278255360&or)+(Rr<<16)+yr}}function cs(ii,si,di,Ri,ji){pi[si]=function(tr,ir,or,fr,yr,Rr,zr,$r,Fr){for(fr=zr;fr<$r;++fr)for(zr=0;zr<Fr;++zr)yr[Rr++]=ji(or[Ri(tr[ir++])])},pi[ii]=function(tr,ir,or,fr,yr,Rr,zr){var $r=8>>tr.b,Fr=tr.Ea,rs=tr.K[0],Wr=tr.w;if(8>$r)for(tr=(1<<tr.b)-1,Wr=(1<<$r)-1;ir<or;++ir){var Mr,Or=0;for(Mr=0;Mr<Fr;++Mr)Mr&tr||(Or=Ri(fr[yr++])),Rr[zr++]=ji(rs[Or&Wr]),Or>>=$r}else pi["VP8LMapColor"+di](fr,yr,rs,Wr,Rr,zr,ir,or,Fr)}}function Qr(ii,si,di,Ri,ji){for(di=si+di;si<di;){var tr=ii[si++];Ri[ji++]=tr>>16&255,Ri[ji++]=tr>>8&255,Ri[ji++]=tr>>0&255}}function bs(ii,si,di,Ri,ji){for(di=si+di;si<di;){var tr=ii[si++];Ri[ji++]=tr>>16&255,Ri[ji++]=tr>>8&255,Ri[ji++]=tr>>0&255,Ri[ji++]=tr>>24&255}}function vs(ii,si,di,Ri,ji){for(di=si+di;si<di;){var tr=(ir=ii[si++])>>16&240|ir>>12&15,ir=ir>>0&240|ir>>28&15;Ri[ji++]=tr,Ri[ji++]=ir}}function Ms(ii,si,di,Ri,ji){for(di=si+di;si<di;){var tr=(ir=ii[si++])>>16&248|ir>>13&7,ir=ir>>5&224|ir>>3&31;Ri[ji++]=tr,Ri[ji++]=ir}}function Ls(ii,si,di,Ri,ji){for(di=si+di;si<di;){var tr=ii[si++];Ri[ji++]=tr>>0&255,Ri[ji++]=tr>>8&255,Ri[ji++]=tr>>16&255}}function ps(ii,si,di,Ri,ji,tr){if(tr==0)for(di=si+di;si<di;)Ar(Ri,((tr=ii[si++])[0]>>24|tr[1]>>8&65280|tr[2]<<8&16711680|tr[3]<<24)>>>0),ji+=32;else Oe(Ri,ji,ii,si,di)}function Ps(ii,si){pi[si][0]=pi[ii+"0"],pi[si][1]=pi[ii+"1"],pi[si][2]=pi[ii+"2"],pi[si][3]=pi[ii+"3"],pi[si][4]=pi[ii+"4"],pi[si][5]=pi[ii+"5"],pi[si][6]=pi[ii+"6"],pi[si][7]=pi[ii+"7"],pi[si][8]=pi[ii+"8"],pi[si][9]=pi[ii+"9"],pi[si][10]=pi[ii+"10"],pi[si][11]=pi[ii+"11"],pi[si][12]=pi[ii+"12"],pi[si][13]=pi[ii+"13"],pi[si][14]=pi[ii+"0"],pi[si][15]=pi[ii+"0"]}function Es(ii){return ii==zh||ii==$h||ii==nh||ii==Hh}function Ds(){this.eb=[],this.size=this.A=this.fb=0}function xs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ds,this.f.kb=new xs,this.sd=null}function _o(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Fs(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ss(ii){return alert("todo:WebPSamplerProcessPlane"),ii.T}function Is(ii,si){var di=ii.T,Ri=si.ba.f.RGBA,ji=Ri.eb,tr=Ri.fb+ii.ka*Ri.A,ir=Ja[si.ba.S],or=ii.y,fr=ii.O,yr=ii.f,Rr=ii.N,zr=ii.ea,$r=ii.W,Fr=si.cc,rs=si.dc,Wr=si.Mc,Mr=si.Nc,Or=ii.ka,es=ii.ka+ii.T,ss=ii.U,ts=ss+1>>1;for(Or==0?ir(or,fr,null,null,yr,Rr,zr,$r,yr,Rr,zr,$r,ji,tr,null,null,ss):(ir(si.ec,si.fc,or,fr,Fr,rs,Wr,Mr,yr,Rr,zr,$r,ji,tr-Ri.A,ji,tr,ss),++di);Or+2<es;Or+=2)Fr=yr,rs=Rr,Wr=zr,Mr=$r,Rr+=ii.Rc,$r+=ii.Rc,tr+=2*Ri.A,ir(or,(fr+=2*ii.fa)-ii.fa,or,fr,Fr,rs,Wr,Mr,yr,Rr,zr,$r,ji,tr-Ri.A,ji,tr,ss);return fr+=ii.fa,ii.j+es<ii.o?(Oe(si.ec,si.fc,or,fr,ss),Oe(si.cc,si.dc,yr,Rr,ts),Oe(si.Mc,si.Nc,zr,$r,ts),di--):1&es||ir(or,fr,null,null,yr,Rr,zr,$r,yr,Rr,zr,$r,ji,tr+Ri.A,null,null,ss),di}function oa(ii,si,di){var Ri=ii.F,ji=[ii.J];if(Ri!=null){var tr=ii.U,ir=si.ba.S,or=ir==th||ir==nh;si=si.ba.f.RGBA;var fr=[0],yr=ii.ka;fr[0]=ii.T,ii.Kb&&(yr==0?--fr[0]:(--yr,ji[0]-=ii.width),ii.j+ii.ka+ii.T==ii.o&&(fr[0]=ii.o-ii.j-yr));var Rr=si.eb;yr=si.fb+yr*si.A,ii=go(Ri,ji[0],ii.width,tr,fr,Rr,yr+(or?0:3),si.A),e(di==fr),ii&&Es(ir)&&Ka(Rr,yr,or,tr,fr,si.A)}return 0}function qs(ii){var si=ii.ma,di=si.ba.S,Ri=11>di,ji=di==Jd||di==eh||di==th||di==Vh||di==12||Es(di);if(si.memory=null,si.Ib=null,si.Jb=null,si.Nd=null,!Hu(si.Oa,ii,ji?11:12))return 0;if(ji&&Es(di)&&as(),ii.da)alert("todo:use_scaling");else{if(Ri){if(si.Ib=Ss,ii.Kb){if(di=ii.U+1>>1,si.memory=Ue(ii.U+2*di),si.memory==null)return 0;si.ec=si.memory,si.fc=0,si.cc=si.ec,si.dc=si.fc+ii.U,si.Mc=si.cc,si.Nc=si.dc+di,si.Ib=Is,as()}}else alert("todo:EmitYUV");ji&&(si.Jb=oa,Ri&&jr())}if(Ri&&!yf){for(ii=0;256>ii;++ii)xp[ii]=89858*(ii-128)+rh>>ih,Rp[ii]=-22014*(ii-128)+rh,Lp[ii]=-45773*(ii-128),Tp[ii]=113618*(ii-128)+rh>>ih;for(ii=hd;ii<Yh;++ii)si=76283*(ii-16)+rh>>ih,Mp[ii-hd]=Ga(si,255),kp[ii-hd]=Ga(si+8>>4,15);yf=1}return 1}function Eo(ii){var si=ii.ma,di=ii.U,Ri=ii.T;return e(!(1&ii.ka)),0>=di||0>=Ri?0:(di=si.Ib(ii,si),si.Jb!=null&&si.Jb(ii,si,di),si.Dc+=di,1)}function Rs(ii){ii.ma.memory=null}function As(ii,si,di,Ri){return rr(ii,8)!=47?0:(si[0]=rr(ii,14)+1,di[0]=rr(ii,14)+1,Ri[0]=rr(ii,1),rr(ii,3)!=0?0:!ii.h)}function bo(ii,si){if(4>ii)return ii+1;var di=ii-2>>1;return(2+(1&ii)<<di)+rr(si,di)+1}function Us(ii,si){return 120<si?si-120:1<=(di=((di=pp[si-1])>>4)*ii+(8-(15&di)))?di:1;var di}function zs(ii,si,di){var Ri=ur(di),ji=ii[si+=255&Ri].g-8;return 0<ji&&(dr(di,di.u+8),Ri=ur(di),si+=ii[si].value,si+=Ri&(1<<ji)-1),dr(di,di.u+ii[si].g),ii[si].value}function Ws(ii,si,di){return di.g+=ii.g,di.value+=ii.value<<si>>>0,e(8>=di.g),ii.g}function yo(ii,si,di){var Ri=ii.xc;return e((si=Ri==0?0:ii.vc[ii.md*(di>>Ri)+(si>>Ri)])<ii.Wb),ii.Ya[si]}function Co(ii,si,di,Ri){var ji=ii.ab,tr=ii.c*si,ir=ii.C;si=ir+si;var or=di,fr=Ri;for(Ri=ii.Ta,di=ii.Ua;0<ji--;){var yr=ii.gc[ji],Rr=ir,zr=si,$r=or,Fr=fr,rs=(fr=Ri,or=di,yr.Ea);switch(e(Rr<zr),e(zr<=yr.nc),yr.hc){case 2:jd($r,Fr,(zr-Rr)*rs,fr,or);break;case 0:var Wr=Rr,Mr=zr,Or=fr,es=or,ss=(ms=yr).Ea;Wr==0&&(Uh($r,Fr,null,null,1,Or,es),Br($r,Fr+1,0,0,ss-1,Or,es+1),Fr+=ss,es+=ss,++Wr);for(var ts=1<<ms.b,Cs=ts-1,gs=Nr(ss,ms.b),Ts=ms.K,ms=ms.w+(Wr>>ms.b)*gs;Wr<Mr;){var Ys=Ts,Ks=ms,Hs=1;for(Yu($r,Fr,Or,es-ss,1,Or,es);Hs<ss;){var js=(Hs&~Cs)+ts;js>ss&&(js=ss),(0,Ac[Ys[Ks++]>>8&15])($r,Fr+ +Hs,Or,es+Hs-ss,js-Hs,Or,es+Hs),Hs=js}Fr+=ss,es+=ss,++Wr&Cs||(ms+=gs)}zr!=yr.nc&&Oe(fr,or-rs,fr,or+(zr-Rr-1)*rs,rs);break;case 1:for(rs=$r,Mr=Fr,ss=($r=yr.Ea)-(es=$r&~(Or=(Fr=1<<yr.b)-1)),Wr=Nr($r,yr.b),ts=yr.K,yr=yr.w+(Rr>>yr.b)*Wr;Rr<zr;){for(Cs=ts,gs=yr,Ts=new Lr,ms=Mr+es,Ys=Mr+$r;Mr<ms;)qr(Cs[gs++],Ts),Bc(Ts,rs,Mr,Fr,fr,or),Mr+=Fr,or+=Fr;Mr<Ys&&(qr(Cs[gs++],Ts),Bc(Ts,rs,Mr,ss,fr,or),Mr+=ss,or+=ss),++Rr&Or||(yr+=Wr)}break;case 3:if($r==fr&&Fr==or&&0<yr.b){for(Mr=fr,$r=rs=or+(zr-Rr)*rs-(es=(zr-Rr)*Nr(yr.Ea,yr.b)),Fr=fr,Or=or,Wr=[],es=(ss=es)-1;0<=es;--es)Wr[es]=Fr[Or+es];for(es=ss-1;0<=es;--es)Mr[$r+es]=Wr[es];Wa(yr,Rr,zr,fr,rs,fr,or)}else Wa(yr,Rr,zr,$r,Fr,fr,or)}or=Ri,fr=di}fr!=di&&Oe(Ri,di,or,fr,tr)}function qa(ii,si){var di=ii.V,Ri=ii.Ba+ii.c*ii.C,ji=si-ii.C;if(e(si<=ii.l.o),e(16>=ji),0<ji){var tr=ii.l,ir=ii.Ta,or=ii.Ua,fr=tr.width;if(Co(ii,ji,di,Ri),ji=or=[or],e((di=ii.C)<(Ri=si)),e(tr.v<tr.va),Ri>tr.o&&(Ri=tr.o),di<tr.j){var yr=tr.j-di;di=tr.j,ji[0]+=yr*fr}if(di>=Ri?di=0:(ji[0]+=4*tr.v,tr.ka=di-tr.j,tr.U=tr.va-tr.v,tr.T=Ri-di,di=1),di){if(or=or[0],11>(di=ii.ca).S){var Rr=di.f.RGBA,zr=(Ri=di.S,ji=tr.U,tr=tr.T,yr=Rr.eb,Rr.A),$r=tr;for(Rr=Rr.fb+ii.Ma*Rr.A;0<$r--;){var Fr=ir,rs=or,Wr=ji,Mr=yr,Or=Rr;switch(Ri){case Zd:Ma(Fr,rs,Wr,Mr,Or);break;case Jd:va(Fr,rs,Wr,Mr,Or);break;case zh:va(Fr,rs,Wr,Mr,Or),Ka(Mr,Or,0,Wr,1,0);break;case cf:hc(Fr,rs,Wr,Mr,Or);break;case eh:ps(Fr,rs,Wr,Mr,Or,1);break;case $h:ps(Fr,rs,Wr,Mr,Or,1),Ka(Mr,Or,0,Wr,1,0);break;case th:ps(Fr,rs,Wr,Mr,Or,0);break;case nh:ps(Fr,rs,Wr,Mr,Or,0),Ka(Mr,Or,1,Wr,1,0);break;case Vh:Ec(Fr,rs,Wr,Mr,Or);break;case Hh:Ec(Fr,rs,Wr,Mr,Or),ho(Mr,Or,Wr,1,0);break;case uf:dc(Fr,rs,Wr,Mr,Or);break;default:e(0)}or+=fr,Rr+=zr}ii.Ma+=tr}else alert("todo:EmitRescaledRowsYUVA");e(ii.Ma<=di.height)}}ii.C=si,e(ii.C<=ii.i)}function ma(ii){var si;if(0<ii.ua)return 0;for(si=0;si<ii.Wb;++si){var di=ii.Ya[si].G,Ri=ii.Ya[si].H;if(0<di[1][Ri[1]+0].g||0<di[2][Ri[2]+0].g||0<di[3][Ri[3]+0].g)return 0}return 1}function Pa(ii,si,di,Ri,ji,tr){if(ii.Z!=0){var ir=ii.qd,or=ii.rd;for(e(wc[ii.Z]!=null);si<di;++si)wc[ii.Z](ir,or,Ri,ji,Ri,ji,tr),ir=Ri,or=ji,ji+=tr;ii.qd=ir,ii.rd=or}}function Fa(ii,si){var di=ii.l.ma,Ri=di.Z==0||di.Z==1?ii.l.j:ii.C;if(Ri=ii.C<Ri?Ri:ii.C,e(si<=ii.l.o),si>Ri){var ji=ii.l.width,tr=di.ca,ir=di.tb+ji*Ri,or=ii.V,fr=ii.Ba+ii.c*Ri,yr=ii.gc;e(ii.ab==1),e(yr[0].hc==3),Vd(yr[0],Ri,si,or,fr,tr,ir),Pa(di,Ri,si,tr,ir,ji)}ii.C=ii.Ma=si}function xa(ii,si,di,Ri,ji,tr,ir){var or=ii.$/Ri,fr=ii.$%Ri,yr=ii.m,Rr=ii.s,zr=di+ii.$,$r=zr;ji=di+Ri*ji;var Fr=di+Ri*tr,rs=280+Rr.ua,Wr=ii.Pb?or:16777216,Mr=0<Rr.ua?Rr.Wa:null,Or=Rr.wc,es=zr<Fr?yo(Rr,fr,or):null;e(ii.C<tr),e(Fr<=ji);var ss=!1;e:for(;;){for(;ss||zr<Fr;){var ts=0;if(or>=Wr){var Cs=zr-di;e((Wr=ii).Pb),Wr.wd=Wr.m,Wr.xd=Cs,0<Wr.s.ua&&lr(Wr.s.Wa,Wr.s.vb),Wr=or+mp}if(fr&Or||(es=yo(Rr,fr,or)),e(es!=null),es.Qb&&(si[zr]=es.qb,ss=!0),!ss)if(vr(yr),es.jc){ts=yr,Cs=si;var gs=zr,Ts=es.pd[ur(ts)&ca-1];e(es.jc),256>Ts.g?(dr(ts,ts.u+Ts.g),Cs[gs]=Ts.value,ts=0):(dr(ts,ts.u+Ts.g-256),e(256<=Ts.value),ts=Ts.value),ts==0&&(ss=!0)}else ts=zs(es.G[0],es.H[0],yr);if(yr.h)break;if(ss||256>ts){if(!ss)if(es.nd)si[zr]=(es.qb|ts<<8)>>>0;else{if(vr(yr),ss=zs(es.G[1],es.H[1],yr),vr(yr),Cs=zs(es.G[2],es.H[2],yr),gs=zs(es.G[3],es.H[3],yr),yr.h)break;si[zr]=(gs<<24|ss<<16|ts<<8|Cs)>>>0}if(ss=!1,++zr,++fr>=Ri&&(fr=0,++or,ir!=null&&or<=tr&&!(or%16)&&ir(ii,or),Mr!=null))for(;$r<zr;)ts=si[$r++],Mr.X[(506832829*ts&4294967295)>>>Mr.Mb]=ts}else if(280>ts){if(ts=bo(ts-256,yr),Cs=zs(es.G[4],es.H[4],yr),vr(yr),Cs=Us(Ri,Cs=bo(Cs,yr)),yr.h)break;if(zr-di<Cs||ji-zr<ts)break e;for(gs=0;gs<ts;++gs)si[zr+gs]=si[zr+gs-Cs];for(zr+=ts,fr+=ts;fr>=Ri;)fr-=Ri,++or,ir!=null&&or<=tr&&!(or%16)&&ir(ii,or);if(e(zr<=ji),fr&Or&&(es=yo(Rr,fr,or)),Mr!=null)for(;$r<zr;)ts=si[$r++],Mr.X[(506832829*ts&4294967295)>>>Mr.Mb]=ts}else{if(!(ts<rs))break e;for(ss=ts-280,e(Mr!=null);$r<zr;)ts=si[$r++],Mr.X[(506832829*ts&4294967295)>>>Mr.Mb]=ts;ts=zr,e(!(ss>>>(Cs=Mr).Xa)),si[ts]=Cs.X[ss],ss=!0}ss||e(yr.h==sr(yr))}if(ii.Pb&&yr.h&&zr<ji)e(ii.m.h),ii.a=5,ii.m=ii.wd,ii.$=ii.xd,0<ii.s.ua&&lr(ii.s.vb,ii.s.Wa);else{if(yr.h)break e;ir!=null&&ir(ii,or>tr?tr:or),ii.a=0,ii.$=zr-di}return 1}return ii.a=3,0}function aa(ii){e(ii!=null),ii.vc=null,ii.yc=null,ii.Ya=null;var si=ii.Wa;si!=null&&(si.X=null),ii.vb=null,e(ii!=null)}function la(){var ii=new Bh;return ii==null?null:(ii.a=0,ii.xb=ff,Ps("Predictor","VP8LPredictors"),Ps("Predictor","VP8LPredictors_C"),Ps("PredictorAdd","VP8LPredictorsAdd"),Ps("PredictorAdd","VP8LPredictorsAdd_C"),jd=Hr,Bc=Xr,Ma=Qr,va=bs,Ec=vs,dc=Ms,hc=Ls,pi.VP8LMapColor32b=fu,pi.VP8LMapColor8b=$d,ii)}function nc(ii,si,di,Ri,ji){var tr=1,ir=[ii],or=[si],fr=Ri.m,yr=Ri.s,Rr=null,zr=0;e:for(;;){if(di)for(;tr&&rr(fr,1);){var $r=ir,Fr=or,rs=Ri,Wr=1,Mr=rs.m,Or=rs.gc[rs.ab],es=rr(Mr,2);if(rs.Oc&1<<es)tr=0;else{switch(rs.Oc|=1<<es,Or.hc=es,Or.Ea=$r[0],Or.nc=Fr[0],Or.K=[null],++rs.ab,e(4>=rs.ab),es){case 0:case 1:Or.b=rr(Mr,3)+2,Wr=nc(Nr(Or.Ea,Or.b),Nr(Or.nc,Or.b),0,rs,Or.K),Or.K=Or.K[0];break;case 3:var ss,ts=rr(Mr,8)+1,Cs=16<ts?0:4<ts?1:2<ts?2:3;if($r[0]=Nr(Or.Ea,Cs),Or.b=Cs,ss=Wr=nc(ts,1,0,rs,Or.K)){var gs,Ts=ts,ms=Or,Ys=1<<(8>>ms.b),Ks=Ue(Ys);if(Ks==null)ss=0;else{var Hs=ms.K[0],js=ms.w;for(Ks[0]=ms.K[0][0],gs=1;gs<1*Ts;++gs)Ks[gs]=Ir(Hs[js+gs],Ks[gs-1]);for(;gs<4*Ys;++gs)Ks[gs]=0;ms.K[0]=null,ms.K[0]=Ks,ss=1}}Wr=ss;break;case 2:break;default:e(0)}tr=Wr}}if(ir=ir[0],or=or[0],tr&&rr(fr,1)&&!(tr=1<=(zr=rr(fr,4))&&11>=zr)){Ri.a=3;break e}var Qs;if(Qs=tr)t:{var Js,Bs,ea,ka=Ri,ta=ir,Na=or,Zs=zr,Ua=di,za=ka.m,ra=ka.s,da=[null],Aa=1,Qa=0,oc=gp[Zs];n:for(;;){if(Ua&&rr(za,1)){var sa=rr(za,3)+2,mc=Nr(ta,sa),$c=Nr(Na,sa),yu=mc*$c;if(!nc(mc,$c,0,ka,da))break n;for(da=da[0],ra.xc=sa,Js=0;Js<yu;++Js){var Pc=da[Js]>>8&65535;da[Js]=Pc,Pc>=Aa&&(Aa=Pc+1)}}if(za.h)break n;for(Bs=0;5>Bs;++Bs){var To=df[Bs];!Bs&&0<Zs&&(To+=1<<Zs),Qa<To&&(Qa=To)}var Xh=He(Aa*oc,ui),Af=Aa,Ef=He(Af,Ni);if(Ef==null)var oh=null;else e(65536>=Af),oh=Ef;var gd=Ue(Qa);if(oh==null||gd==null||Xh==null){ka.a=1;break n}var ah=Xh;for(Js=ea=0;Js<Aa;++Js){var tc=oh[Js],_u=tc.G,Au=tc.H,Sf=0,lh=1,bf=0;for(Bs=0;5>Bs;++Bs){To=df[Bs],_u[Bs]=ah,Au[Bs]=ea,!Bs&&0<Zs&&(To+=1<<Zs);r:{var ch,Kh=To,uh=ka,md=gd,Dp=ah,Fp=ea,Zh=0,xc=uh.m,Bp=rr(xc,1);if(Be(md,0,0,Kh),Bp){var Up=rr(xc,1)+1,jp=rr(xc,1),If=rr(xc,jp==0?1:8);md[If]=1,Up==2&&(md[If=rr(xc,8)]=1);var dh=1}else{var wf=Ue(19),Pf=rr(xc,4)+4;if(19<Pf){uh.a=3;var hh=0;break r}for(ch=0;ch<Pf;++ch)wf[fp[ch]]=rr(xc,3);var Jh=void 0,yd=void 0,xf=uh,Vp=wf,fh=Kh,Tf=md,Qh=0,Tc=xf.m,Lf=8,Rf=He(128,ui);i:for(;fi(Rf,0,7,Vp,19);){if(rr(Tc,1)){var zp=2+2*rr(Tc,3);if((Jh=2+rr(Tc,zp))>fh)break i}else Jh=fh;for(yd=0;yd<fh&&Jh--;){vr(Tc);var Mf=Rf[0+(127&ur(Tc))];dr(Tc,Tc.u+Mf.g);var bu=Mf.value;if(16>bu)Tf[yd++]=bu,bu!=0&&(Lf=bu);else{var $p=bu==16,kf=bu-16,Hp=dp[kf],Nf=rr(Tc,up[kf])+Hp;if(yd+Nf>fh)break i;for(var qp=$p?Lf:0;0<Nf--;)Tf[yd++]=qp}}Qh=1;break i}Qh||(xf.a=3),dh=Qh}(dh=dh&&!xc.h)&&(Zh=fi(Dp,Fp,8,md,Kh)),dh&&Zh!=0?hh=Zh:(uh.a=3,hh=0)}if(hh==0)break n;if(lh&&hp[Bs]==1&&(lh=ah[ea].g==0),Sf+=ah[ea].g,ea+=hh,3>=Bs){var _d,tf=gd[0];for(_d=1;_d<To;++_d)gd[_d]>tf&&(tf=gd[_d]);bf+=tf}}if(tc.nd=lh,tc.Qb=0,lh&&(tc.qb=(_u[3][Au[3]+0].value<<24|_u[1][Au[1]+0].value<<16|_u[2][Au[2]+0].value)>>>0,Sf==0&&256>_u[0][Au[0]+0].value&&(tc.Qb=1,tc.qb+=_u[0][Au[0]+0].value<<8)),tc.jc=!tc.Qb&&6>bf,tc.jc){var ph,vc=tc;for(ph=0;ph<ca;++ph){var Lc=ph,Rc=vc.pd[Lc],gh=vc.G[0][vc.H[0]+Lc];256<=gh.value?(Rc.g=gh.g+256,Rc.value=gh.value):(Rc.g=0,Rc.value=0,Lc>>=Ws(gh,8,Rc),Lc>>=Ws(vc.G[1][vc.H[1]+Lc],16,Rc),Lc>>=Ws(vc.G[2][vc.H[2]+Lc],0,Rc),Ws(vc.G[3][vc.H[3]+Lc],24,Rc))}}}ra.vc=da,ra.Wb=Aa,ra.Ya=oh,ra.yc=Xh,Qs=1;break t}Qs=0}if(!(tr=Qs)){Ri.a=3;break e}if(0<zr){if(yr.ua=1<<zr,!gr(yr.Wa,zr)){Ri.a=1,tr=0;break e}}else yr.ua=0;var nf=Ri,Of=ir,Wp=or,rf=nf.s,sf=rf.xc;if(nf.c=Of,nf.i=Wp,rf.md=Nr(Of,sf),rf.wc=sf==0?-1:(1<<sf)-1,di){Ri.xb=Sp;break e}if((Rr=Ue(ir*or))==null){Ri.a=1,tr=0;break e}tr=(tr=xa(Ri,Rr,0,ir,or,or,null))&&!fr.h;break e}return tr?(ji!=null?ji[0]=Rr:(e(Rr==null),e(di)),Ri.$=0,di||aa(yr)):aa(yr),tr}function Nc(ii,si){var di=ii.c*ii.i,Ri=di+si+16*si;return e(ii.c<=si),ii.V=Ue(Ri),ii.V==null?(ii.Ta=null,ii.Ua=0,ii.a=1,0):(ii.Ta=ii.V,ii.Ua=ii.Ba+di+si,1)}function qc(ii,si){var di=ii.C,Ri=si-di,ji=ii.V,tr=ii.Ba+ii.c*di;for(e(si<=ii.l.o);0<Ri;){var ir=16<Ri?16:Ri,or=ii.l.ma,fr=ii.l.width,yr=fr*ir,Rr=or.ca,zr=or.tb+fr*di,$r=ii.Ta,Fr=ii.Ua;Co(ii,ir,ji,tr),$o($r,Fr,Rr,zr,yr),Pa(or,di,di+ir,Rr,zr,fr),Ri-=ir,ji+=ir*ii.c,di+=ir}e(di==si),ii.C=ii.Ma=si}function Wc(){this.ub=this.yd=this.td=this.Rb=0}function Yc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xc(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ue(4),this.Lb=Ue(4)}function Ad(){this.Yb=function(){var ii=[];return function si(di,Ri,ji){for(var tr=ji[Ri],ir=0;ir<tr&&(di.push(ji.length>Ri+1?[]:0),!(ji.length<Ri+1));ir++)si(di[ir],Ri+1,ji)}(ii,0,[3,11]),ii}()}function mh(){this.jb=Ue(3),this.Wc=We([4,8],Ad),this.Xc=We([4,17],Ad)}function vh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ue(4),this.od=new Ue(4)}function Kc(){this.ld=this.La=this.dd=this.tc=0}function Ed(){this.Na=this.la=0}function yh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xu(){this.ad=Ue(384),this.Za=0,this.Ob=Ue(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _h(){this.uc=this.M=this.Nb=0,this.wa=Array(new Kc),this.Y=0,this.ya=Array(new xu),this.aa=0,this.l=new Zc}function Sd(){this.y=Ue(16),this.f=Ue(8),this.ea=Ue(8)}function Ch(){this.cb=this.a=0,this.sc="",this.m=new br,this.Od=new Wc,this.Kc=new Yc,this.ed=new vh,this.Qa=new Xc,this.Ic=this.$c=this.Aa=0,this.D=new _h,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=He(8,br),this.ia=0,this.pb=He(4,yh),this.Pa=new mh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sd),this.Hd=0,this.rb=Array(new Ed),this.sb=0,this.wa=Array(new Kc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xu),this.L=this.aa=0,this.gd=We([4,2],Kc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ah(){var ii=new Ch;return ii!=null&&(ii.a=0,ii.sc="OK",ii.cb=0,ii.Xb=0,Qu||(Qu=wd)),ii}function ko(ii,si,di){return ii.a==0&&(ii.a=si,ii.sc=di,ii.cb=0),0}function bd(ii,si,di){return 3<=di&&ii[si+0]==157&&ii[si+1]==1&&ii[si+2]==42}function Id(ii,si){if(ii==null)return 0;if(ii.a=0,ii.sc="OK",si==null)return ko(ii,2,"null VP8Io passed to VP8GetHeaders()");var di=si.data,Ri=si.w,ji=si.ha;if(4>ji)return ko(ii,7,"Truncated header.");var tr=di[Ri+0]|di[Ri+1]<<8|di[Ri+2]<<16,ir=ii.Od;if(ir.Rb=!(1&tr),ir.td=tr>>1&7,ir.yd=tr>>4&1,ir.ub=tr>>5,3<ir.td)return ko(ii,3,"Incorrect keyframe parameters.");if(!ir.yd)return ko(ii,4,"Frame not displayable.");Ri+=3,ji-=3;var or=ii.Kc;if(ir.Rb){if(7>ji)return ko(ii,7,"cannot parse picture header");if(!bd(di,Ri,ji))return ko(ii,3,"Bad code word");or.c=16383&(di[Ri+4]<<8|di[Ri+3]),or.Td=di[Ri+4]>>6,or.i=16383&(di[Ri+6]<<8|di[Ri+5]),or.Ud=di[Ri+6]>>6,Ri+=7,ji-=7,ii.za=or.c+15>>4,ii.Ub=or.i+15>>4,si.width=or.c,si.height=or.i,si.Da=0,si.j=0,si.v=0,si.va=si.width,si.o=si.height,si.da=0,si.ib=si.width,si.hb=si.height,si.U=si.width,si.T=si.height,Be((tr=ii.Pa).jb,0,255,tr.jb.length),e((tr=ii.Qa)!=null),tr.Cb=0,tr.Bb=0,tr.Fb=1,Be(tr.Zb,0,0,tr.Zb.length),Be(tr.Lb,0,0,tr.Lb)}if(ir.ub>ji)return ko(ii,7,"bad partition length");nr(tr=ii.m,di,Ri,ir.ub),Ri+=ir.ub,ji-=ir.ub,ir.Rb&&(or.Ld=mr(tr),or.Kd=mr(tr)),or=ii.Qa;var fr,yr=ii.Pa;if(e(tr!=null),e(or!=null),or.Cb=mr(tr),or.Cb){if(or.Bb=mr(tr),mr(tr)){for(or.Fb=mr(tr),fr=0;4>fr;++fr)or.Zb[fr]=mr(tr)?cr(tr,7):0;for(fr=0;4>fr;++fr)or.Lb[fr]=mr(tr)?cr(tr,6):0}if(or.Bb)for(fr=0;3>fr;++fr)yr.jb[fr]=mr(tr)?er(tr,8):255}else or.Bb=0;if(tr.Ka)return ko(ii,3,"cannot parse segment header");if((or=ii.ed).zd=mr(tr),or.Tb=er(tr,6),or.wb=er(tr,3),or.Pc=mr(tr),or.Pc&&mr(tr)){for(yr=0;4>yr;++yr)mr(tr)&&(or.vd[yr]=cr(tr,6));for(yr=0;4>yr;++yr)mr(tr)&&(or.od[yr]=cr(tr,6))}if(ii.L=or.Tb==0?0:or.zd?1:2,tr.Ka)return ko(ii,3,"cannot parse filter header");var Rr=ji;if(ji=fr=Ri,Ri=fr+Rr,or=Rr,ii.Xb=(1<<er(ii.m,2))-1,Rr<3*(yr=ii.Xb))di=7;else{for(fr+=3*yr,or-=3*yr,Rr=0;Rr<yr;++Rr){var zr=di[ji+0]|di[ji+1]<<8|di[ji+2]<<16;zr>or&&(zr=or),nr(ii.Jc[+Rr],di,fr,zr),fr+=zr,or-=zr,ji+=3}nr(ii.Jc[+yr],di,fr,or),di=fr<Ri?0:5}if(di!=0)return ko(ii,di,"cannot parse partitions");for(di=er(fr=ii.m,7),ji=mr(fr)?cr(fr,4):0,Ri=mr(fr)?cr(fr,4):0,or=mr(fr)?cr(fr,4):0,yr=mr(fr)?cr(fr,4):0,fr=mr(fr)?cr(fr,4):0,Rr=ii.Qa,zr=0;4>zr;++zr){if(Rr.Cb){var $r=Rr.Zb[zr];Rr.Fb||($r+=di)}else{if(0<zr){ii.pb[zr]=ii.pb[0];continue}$r=di}var Fr=ii.pb[zr];Fr.Sc[0]=qh[Ga($r+ji,127)],Fr.Sc[1]=Wh[Ga($r+0,127)],Fr.Eb[0]=2*qh[Ga($r+Ri,127)],Fr.Eb[1]=101581*Wh[Ga($r+or,127)]>>16,8>Fr.Eb[1]&&(Fr.Eb[1]=8),Fr.Qc[0]=qh[Ga($r+yr,117)],Fr.Qc[1]=Wh[Ga($r+fr,127)],Fr.lc=$r+fr}if(!ir.Rb)return ko(ii,4,"Not a key frame.");for(mr(tr),ir=ii.Pa,di=0;4>di;++di){for(ji=0;8>ji;++ji)for(Ri=0;3>Ri;++Ri)for(or=0;11>or;++or)yr=_r(tr,Ap[di][ji][Ri][or])?er(tr,8):_p[di][ji][Ri][or],ir.Wc[di][ji].Yb[Ri][or]=yr;for(ji=0;17>ji;++ji)ir.Xc[di][ji]=ir.Wc[di][Ep[ji]]}return ii.kc=mr(tr),ii.kc&&(ii.Bd=er(tr,8)),ii.cb=1}function wd(ii,si,di,Ri,ji,tr,ir){var or=si[ji].Yb[di];for(di=0;16>ji;++ji){if(!_r(ii,or[di+0]))return ji;for(;!_r(ii,or[di+1]);)if(or=si[++ji].Yb[0],di=0,ji==16)return 16;var fr=si[ji+1].Yb;if(_r(ii,or[di+2])){var yr=ii,Rr=0;if(_r(yr,($r=or)[(zr=di)+3]))if(_r(yr,$r[zr+6])){for(or=0,zr=2*(Rr=_r(yr,$r[zr+8]))+($r=_r(yr,$r[zr+9+Rr])),Rr=0,$r=vp[zr];$r[or];++or)Rr+=Rr+_r(yr,$r[or]);Rr+=3+(8<<zr)}else _r(yr,$r[zr+7])?(Rr=7+2*_r(yr,165),Rr+=_r(yr,145)):Rr=5+_r(yr,159);else Rr=_r(yr,$r[zr+4])?3+_r(yr,$r[zr+5]):2;or=fr[2]}else Rr=1,or=fr[1];fr=ir+yp[ji],0>(yr=ii).b&&hr(yr);var zr,$r=yr.b,Fr=(zr=yr.Ca>>1)-(yr.I>>$r)>>31;--yr.b,yr.Ca+=Fr,yr.Ca|=1,yr.I-=(zr+1&Fr)<<$r,tr[fr]=((Rr^Fr)-Fr)*Ri[(0<ji)+0]}return 16}function Lu(ii){var si=ii.rb[ii.sb-1];si.la=0,si.Na=0,Be(ii.zc,0,0,ii.zc.length),ii.ja=0}function Eh(ii,si){if(ii==null)return 0;if(si==null)return ko(ii,2,"NULL VP8Io parameter in VP8Decode().");if(!ii.cb&&!Id(ii,si))return 0;if(e(ii.cb),si.ac==null||si.ac(si)){si.ob&&(ii.L=0);var di=sh[ii.L];if(ii.L==2?(ii.yb=0,ii.zb=0):(ii.yb=si.v-di>>4,ii.zb=si.j-di>>4,0>ii.yb&&(ii.yb=0),0>ii.zb&&(ii.zb=0)),ii.Va=si.o+15+di>>4,ii.Hb=si.va+15+di>>4,ii.Hb>ii.za&&(ii.Hb=ii.za),ii.Va>ii.Ub&&(ii.Va=ii.Ub),0<ii.L){var Ri=ii.ed;for(di=0;4>di;++di){var ji;if(ii.Qa.Cb){var tr=ii.Qa.Lb[di];ii.Qa.Fb||(tr+=Ri.Tb)}else tr=Ri.Tb;for(ji=0;1>=ji;++ji){var ir=ii.gd[di][ji],or=tr;if(Ri.Pc&&(or+=Ri.vd[0],ji&&(or+=Ri.od[0])),0<(or=0>or?0:63<or?63:or)){var fr=or;0<Ri.wb&&(fr=4<Ri.wb?fr>>2:fr>>1)>9-Ri.wb&&(fr=9-Ri.wb),1>fr&&(fr=1),ir.dd=fr,ir.tc=2*or+fr,ir.ld=40<=or?2:15<=or?1:0}else ir.tc=0;ir.La=ji}}}di=0}else ko(ii,6,"Frame setup failed"),di=ii.a;if(di=di==0){if(di){ii.$c=0,0<ii.Aa||(ii.Ic=Op);e:{di=ii.Ic,Ri=4*(fr=ii.za);var yr=32*fr,Rr=fr+1,zr=0<ii.L?fr*(0<ii.Aa?2:1):0,$r=(ii.Aa==2?2:1)*fr;if((ir=Ri+832+(ji=3*(16*di+sh[ii.L])/2*yr)+(tr=ii.Fa!=null&&0<ii.Fa.length?ii.Kc.c*ii.Kc.i:0))!=ir)di=0;else{if(ir>ii.Vb){if(ii.Vb=0,ii.Ec=Ue(ir),ii.Fc=0,ii.Ec==null){di=ko(ii,1,"no memory during frame initialization.");break e}ii.Vb=ir}ir=ii.Ec,or=ii.Fc,ii.Ac=ir,ii.Bc=or,or+=Ri,ii.Gd=He(yr,Sd),ii.Hd=0,ii.rb=He(Rr+1,Ed),ii.sb=1,ii.wa=zr?He(zr,Kc):null,ii.Y=0,ii.D.Nb=0,ii.D.wa=ii.wa,ii.D.Y=ii.Y,0<ii.Aa&&(ii.D.Y+=fr),e(!0),ii.oc=ir,ii.pc=or,or+=832,ii.ya=He($r,xu),ii.aa=0,ii.D.ya=ii.ya,ii.D.aa=ii.aa,ii.Aa==2&&(ii.D.aa+=fr),ii.R=16*fr,ii.B=8*fr,fr=(yr=sh[ii.L])*ii.R,yr=yr/2*ii.B,ii.sa=ir,ii.ta=or+fr,ii.qa=ii.sa,ii.ra=ii.ta+16*di*ii.R+yr,ii.Ha=ii.qa,ii.Ia=ii.ra+8*di*ii.B+yr,ii.$c=0,or+=ji,ii.mb=tr?ir:null,ii.nb=tr?or:null,e(or+tr<=ii.Fc+ii.Vb),Lu(ii),Be(ii.Ac,ii.Bc,0,Ri),di=1}}if(di){if(si.ka=0,si.y=ii.sa,si.O=ii.ta,si.f=ii.qa,si.N=ii.ra,si.ea=ii.Ha,si.Vd=ii.Ia,si.fa=ii.R,si.Rc=ii.B,si.F=null,si.J=0,!Yd){for(di=-255;255>=di;++di)na[255+di]=0>di?-di:di;for(di=-1020;1020>=di;++di)pc[1020+di]=-128>di?-128:127<di?127:di;for(di=-112;112>=di;++di)Ju[112+di]=-16>di?-16:15<di?15:di;for(di=-255;510>=di;++di)vu[255+di]=0>di?0:255<di?255:di;Yd=1}pu=Ih,fc=Sh,Xu=xd,ya=bh,Ya=Td,Do=Pd,gu=Du,Wd=Fc,Ku=Gh,Uc=Fu,jc=Fh,Sc=iu,Vc=Gu,mu=Gd,zc=Fd,bc=rc,Zu=uc,Xa=Dh,$l[0]=ic,$l[1]=wh,$l[2]=Lh,$l[3]=Rh,$l[4]=Md,$l[5]=tu,$l[6]=kd,$l[7]=ku,$l[8]=kh,$l[9]=Mh,Ic[0]=Ld,Ic[1]=xh,Ic[2]=cc,Ic[3]=Qc,Ic[4]=pa,Ic[5]=Th,Ic[6]=Rd,gc[0]=yc,gc[1]=Ph,gc[2]=Nh,gc[3]=Nu,gc[4]=Dc,gc[5]=Oh,gc[6]=Ou,di=1}else di=0}di&&(di=function(Fr,rs){for(Fr.M=0;Fr.M<Fr.Va;++Fr.M){var Wr,Mr=Fr.Jc[Fr.M&Fr.Xb],Or=Fr.m,es=Fr;for(Wr=0;Wr<es.za;++Wr){var ss=Or,ts=es,Cs=ts.Ac,gs=ts.Bc+4*Wr,Ts=ts.zc,ms=ts.ya[ts.aa+Wr];if(ts.Qa.Bb?ms.$b=_r(ss,ts.Pa.jb[0])?2+_r(ss,ts.Pa.jb[2]):_r(ss,ts.Pa.jb[1]):ms.$b=0,ts.kc&&(ms.Ad=_r(ss,ts.Bd)),ms.Za=!_r(ss,145)+0,ms.Za){var Ys=ms.Ob,Ks=0;for(ts=0;4>ts;++ts){var Hs,js=Ts[0+ts];for(Hs=0;4>Hs;++Hs){js=Cp[Cs[gs+Hs]][js];for(var Qs=hf[_r(ss,js[0])];0<Qs;)Qs=hf[2*Qs+_r(ss,js[Qs])];js=-Qs,Cs[gs+Hs]=js}Oe(Ys,Ks,Cs,gs,4),Ks+=4,Ts[0+ts]=js}}else js=_r(ss,156)?_r(ss,128)?1:3:_r(ss,163)?2:0,ms.Ob[0]=js,Be(Cs,gs,js,4),Be(Ts,0,js,4);ms.Dd=_r(ss,142)?_r(ss,114)?_r(ss,183)?1:3:2:0}if(es.m.Ka)return ko(Fr,7,"Premature end-of-partition0 encountered.");for(;Fr.ja<Fr.za;++Fr.ja){if(es=Mr,ss=(Or=Fr).rb[Or.sb-1],Cs=Or.rb[Or.sb+Or.ja],Wr=Or.ya[Or.aa+Or.ja],gs=Or.kc?Wr.Ad:0)ss.la=Cs.la=0,Wr.Za||(ss.Na=Cs.Na=0),Wr.Hc=0,Wr.Gc=0,Wr.ia=0;else{var Js,Bs;if(ss=Cs,Cs=es,gs=Or.Pa.Xc,Ts=Or.ya[Or.aa+Or.ja],ms=Or.pb[Ts.$b],ts=Ts.ad,Ys=0,Ks=Or.rb[Or.sb-1],js=Hs=0,Be(ts,Ys,0,384),Ts.Za)var ea=0,ka=gs[3];else{Qs=Ue(16);var ta=ss.Na+Ks.Na;if(ta=Qu(Cs,gs[1],ta,ms.Eb,0,Qs,0),ss.Na=Ks.Na=(0<ta)+0,1<ta)pu(Qs,0,ts,Ys);else{var Na=Qs[0]+3>>3;for(Qs=0;256>Qs;Qs+=16)ts[Ys+Qs]=Na}ea=1,ka=gs[0]}var Zs=15&ss.la,Ua=15&Ks.la;for(Qs=0;4>Qs;++Qs){var za=1&Ua;for(Na=Bs=0;4>Na;++Na)Zs=Zs>>1|(za=(ta=Qu(Cs,ka,ta=za+(1&Zs),ms.Sc,ea,ts,Ys))>ea)<<7,Bs=Bs<<2|(3<ta?3:1<ta?2:ts[Ys+0]!=0),Ys+=16;Zs>>=4,Ua=Ua>>1|za<<7,Hs=(Hs<<8|Bs)>>>0}for(ka=Zs,ea=Ua>>4,Js=0;4>Js;Js+=2){for(Bs=0,Zs=ss.la>>4+Js,Ua=Ks.la>>4+Js,Qs=0;2>Qs;++Qs){for(za=1&Ua,Na=0;2>Na;++Na)ta=za+(1&Zs),Zs=Zs>>1|(za=0<(ta=Qu(Cs,gs[2],ta,ms.Qc,0,ts,Ys)))<<3,Bs=Bs<<2|(3<ta?3:1<ta?2:ts[Ys+0]!=0),Ys+=16;Zs>>=2,Ua=Ua>>1|za<<5}js|=Bs<<4*Js,ka|=Zs<<4<<Js,ea|=(240&Ua)<<Js}ss.la=ka,Ks.la=ea,Ts.Hc=Hs,Ts.Gc=js,Ts.ia=43690&js?0:ms.ia,gs=!(Hs|js)}if(0<Or.L&&(Or.wa[Or.Y+Or.ja]=Or.gd[Wr.$b][Wr.Za],Or.wa[Or.Y+Or.ja].La|=!gs),es.Ka)return ko(Fr,7,"Premature end-of-file encountered.")}if(Lu(Fr),Or=rs,es=1,Wr=(Mr=Fr).D,ss=0<Mr.L&&Mr.M>=Mr.zb&&Mr.M<=Mr.Va,Mr.Aa==0)e:{if(Wr.M=Mr.M,Wr.uc=ss,$u(Mr,Wr),es=1,Wr=(Bs=Mr.D).Nb,ss=(js=sh[Mr.L])*Mr.R,Cs=js/2*Mr.B,Qs=16*Wr*Mr.R,Na=8*Wr*Mr.B,gs=Mr.sa,Ts=Mr.ta-ss+Qs,ms=Mr.qa,ts=Mr.ra-Cs+Na,Ys=Mr.Ha,Ks=Mr.Ia-Cs+Na,Ua=(Zs=Bs.M)==0,Hs=Zs>=Mr.Va-1,Mr.Aa==2&&$u(Mr,Bs),Bs.uc)for(za=(ta=Mr).D.M,e(ta.D.uc),Bs=ta.yb;Bs<ta.Hb;++Bs){ea=Bs,ka=za;var ra=(da=(To=ta).D).Nb;Js=To.R;var da=da.wa[da.Y+ea],Aa=To.sa,Qa=To.ta+16*ra*Js+16*ea,oc=da.dd,sa=da.tc;if(sa!=0)if(e(3<=sa),To.L==1)0<ea&&bc(Aa,Qa,Js,sa+4),da.La&&Xa(Aa,Qa,Js,sa),0<ka&&zc(Aa,Qa,Js,sa+4),da.La&&Zu(Aa,Qa,Js,sa);else{var mc=To.B,$c=To.qa,yu=To.ra+8*ra*mc+8*ea,Pc=To.Ha,To=To.Ia+8*ra*mc+8*ea;ra=da.ld,0<ea&&(Wd(Aa,Qa,Js,sa+4,oc,ra),Uc($c,yu,Pc,To,mc,sa+4,oc,ra)),da.La&&(Sc(Aa,Qa,Js,sa,oc,ra),mu($c,yu,Pc,To,mc,sa,oc,ra)),0<ka&&(gu(Aa,Qa,Js,sa+4,oc,ra),Ku($c,yu,Pc,To,mc,sa+4,oc,ra)),da.La&&(jc(Aa,Qa,Js,sa,oc,ra),Vc($c,yu,Pc,To,mc,sa,oc,ra))}}if(Mr.ia&&alert("todo:DitherRow"),Or.put!=null){if(Bs=16*Zs,Zs=16*(Zs+1),Ua?(Or.y=Mr.sa,Or.O=Mr.ta+Qs,Or.f=Mr.qa,Or.N=Mr.ra+Na,Or.ea=Mr.Ha,Or.W=Mr.Ia+Na):(Bs-=js,Or.y=gs,Or.O=Ts,Or.f=ms,Or.N=ts,Or.ea=Ys,Or.W=Ks),Hs||(Zs-=js),Zs>Or.o&&(Zs=Or.o),Or.F=null,Or.J=null,Mr.Fa!=null&&0<Mr.Fa.length&&Bs<Zs&&(Or.J=Vu(Mr,Or,Bs,Zs-Bs),Or.F=Mr.mb,Or.F==null&&Or.F.length==0)){es=ko(Mr,3,"Could not decode alpha data.");break e}Bs<Or.j&&(js=Or.j-Bs,Bs=Or.j,e(!(1&js)),Or.O+=Mr.R*js,Or.N+=Mr.B*(js>>1),Or.W+=Mr.B*(js>>1),Or.F!=null&&(Or.J+=Or.width*js)),Bs<Zs&&(Or.O+=Or.v,Or.N+=Or.v>>1,Or.W+=Or.v>>1,Or.F!=null&&(Or.J+=Or.v),Or.ka=Bs-Or.j,Or.U=Or.va-Or.v,Or.T=Zs-Bs,es=Or.put(Or))}Wr+1!=Mr.Ic||Hs||(Oe(Mr.sa,Mr.ta-ss,gs,Ts+16*Mr.R,ss),Oe(Mr.qa,Mr.ra-Cs,ms,ts+8*Mr.B,Cs),Oe(Mr.Ha,Mr.Ia-Cs,Ys,Ks+8*Mr.B,Cs))}if(!es)return ko(Fr,6,"Output aborted.")}return 1}(ii,si)),si.bc!=null&&si.bc(si),di&=1}return di?(ii.cb=0,di):0}function wl(ii,si,di,Ri,ji){ji=ii[si+di+32*Ri]+(ji>>3),ii[si+di+32*Ri]=-256&ji?0>ji?0:255:ji}function Jc(ii,si,di,Ri,ji,tr){wl(ii,si,0,di,Ri+ji),wl(ii,si,1,di,Ri+tr),wl(ii,si,2,di,Ri-tr),wl(ii,si,3,di,Ri-ji)}function La(ii){return(20091*ii>>16)+ii}function Ru(ii,si,di,Ri){var ji,tr=0,ir=Ue(16);for(ji=0;4>ji;++ji){var or=ii[si+0]+ii[si+8],fr=ii[si+0]-ii[si+8],yr=(35468*ii[si+4]>>16)-La(ii[si+12]),Rr=La(ii[si+4])+(35468*ii[si+12]>>16);ir[tr+0]=or+Rr,ir[tr+1]=fr+yr,ir[tr+2]=fr-yr,ir[tr+3]=or-Rr,tr+=4,si++}for(ji=tr=0;4>ji;++ji)or=(ii=ir[tr+0]+4)+ir[tr+8],fr=ii-ir[tr+8],yr=(35468*ir[tr+4]>>16)-La(ir[tr+12]),wl(di,Ri,0,0,or+(Rr=La(ir[tr+4])+(35468*ir[tr+12]>>16))),wl(di,Ri,1,0,fr+yr),wl(di,Ri,2,0,fr-yr),wl(di,Ri,3,0,or-Rr),tr++,Ri+=32}function Pd(ii,si,di,Ri){var ji=ii[si+0]+4,tr=35468*ii[si+4]>>16,ir=La(ii[si+4]),or=35468*ii[si+1]>>16;Jc(di,Ri,0,ji+ir,ii=La(ii[si+1]),or),Jc(di,Ri,1,ji+tr,ii,or),Jc(di,Ri,2,ji-tr,ii,or),Jc(di,Ri,3,ji-ir,ii,or)}function Sh(ii,si,di,Ri,ji){Ru(ii,si,di,Ri),ji&&Ru(ii,si+16,di,Ri+4)}function xd(ii,si,di,Ri){fc(ii,si+0,di,Ri,1),fc(ii,si+32,di,Ri+128,1)}function bh(ii,si,di,Ri){var ji;for(ii=ii[si+0]+4,ji=0;4>ji;++ji)for(si=0;4>si;++si)wl(di,Ri,si,ji,ii)}function Td(ii,si,di,Ri){ii[si+0]&&ya(ii,si+0,di,Ri),ii[si+16]&&ya(ii,si+16,di,Ri+4),ii[si+32]&&ya(ii,si+32,di,Ri+128),ii[si+48]&&ya(ii,si+48,di,Ri+128+4)}function Ih(ii,si,di,Ri){var ji,tr=Ue(16);for(ji=0;4>ji;++ji){var ir=ii[si+0+ji]+ii[si+12+ji],or=ii[si+4+ji]+ii[si+8+ji],fr=ii[si+4+ji]-ii[si+8+ji],yr=ii[si+0+ji]-ii[si+12+ji];tr[0+ji]=ir+or,tr[8+ji]=ir-or,tr[4+ji]=yr+fr,tr[12+ji]=yr-fr}for(ji=0;4>ji;++ji)ir=(ii=tr[0+4*ji]+3)+tr[3+4*ji],or=tr[1+4*ji]+tr[2+4*ji],fr=tr[1+4*ji]-tr[2+4*ji],yr=ii-tr[3+4*ji],di[Ri+0]=ir+or>>3,di[Ri+16]=yr+fr>>3,di[Ri+32]=ir-or>>3,di[Ri+48]=yr-fr>>3,Ri+=64}function Mu(ii,si,di){var Ri,ji=si-32,tr=Ba,ir=255-ii[ji-1];for(Ri=0;Ri<di;++Ri){var or,fr=tr,yr=ir+ii[si-1];for(or=0;or<di;++or)ii[si+or]=fr[yr+ii[ji+or]];si+=32}}function wh(ii,si){Mu(ii,si,4)}function Ph(ii,si){Mu(ii,si,8)}function xh(ii,si){Mu(ii,si,16)}function cc(ii,si){var di;for(di=0;16>di;++di)Oe(ii,si+32*di,ii,si-32,16)}function Qc(ii,si){var di;for(di=16;0<di;--di)Be(ii,si,ii[si-1],16),si+=32}function eu(ii,si,di){var Ri;for(Ri=0;16>Ri;++Ri)Be(si,di+32*Ri,ii,16)}function Ld(ii,si){var di,Ri=16;for(di=0;16>di;++di)Ri+=ii[si-1+32*di]+ii[si+di-32];eu(Ri>>5,ii,si)}function pa(ii,si){var di,Ri=8;for(di=0;16>di;++di)Ri+=ii[si-1+32*di];eu(Ri>>4,ii,si)}function Th(ii,si){var di,Ri=8;for(di=0;16>di;++di)Ri+=ii[si+di-32];eu(Ri>>4,ii,si)}function Rd(ii,si){eu(128,ii,si)}function Ns(ii,si,di){return ii+2*si+di+2>>2}function Lh(ii,si){var di,Ri=si-32;for(Ri=new Uint8Array([Ns(ii[Ri-1],ii[Ri+0],ii[Ri+1]),Ns(ii[Ri+0],ii[Ri+1],ii[Ri+2]),Ns(ii[Ri+1],ii[Ri+2],ii[Ri+3]),Ns(ii[Ri+2],ii[Ri+3],ii[Ri+4])]),di=0;4>di;++di)Oe(ii,si+32*di,Ri,0,Ri.length)}function Rh(ii,si){var di=ii[si-1],Ri=ii[si-1+32],ji=ii[si-1+64],tr=ii[si-1+96];Ar(ii,si+0,16843009*Ns(ii[si-1-32],di,Ri)),Ar(ii,si+32,16843009*Ns(di,Ri,ji)),Ar(ii,si+64,16843009*Ns(Ri,ji,tr)),Ar(ii,si+96,16843009*Ns(ji,tr,tr))}function ic(ii,si){var di,Ri=4;for(di=0;4>di;++di)Ri+=ii[si+di-32]+ii[si-1+32*di];for(Ri>>=3,di=0;4>di;++di)Be(ii,si+32*di,Ri,4)}function Md(ii,si){var di=ii[si-1+0],Ri=ii[si-1+32],ji=ii[si-1+64],tr=ii[si-1-32],ir=ii[si+0-32],or=ii[si+1-32],fr=ii[si+2-32],yr=ii[si+3-32];ii[si+0+96]=Ns(Ri,ji,ii[si-1+96]),ii[si+1+96]=ii[si+0+64]=Ns(di,Ri,ji),ii[si+2+96]=ii[si+1+64]=ii[si+0+32]=Ns(tr,di,Ri),ii[si+3+96]=ii[si+2+64]=ii[si+1+32]=ii[si+0+0]=Ns(ir,tr,di),ii[si+3+64]=ii[si+2+32]=ii[si+1+0]=Ns(or,ir,tr),ii[si+3+32]=ii[si+2+0]=Ns(fr,or,ir),ii[si+3+0]=Ns(yr,fr,or)}function kd(ii,si){var di=ii[si+1-32],Ri=ii[si+2-32],ji=ii[si+3-32],tr=ii[si+4-32],ir=ii[si+5-32],or=ii[si+6-32],fr=ii[si+7-32];ii[si+0+0]=Ns(ii[si+0-32],di,Ri),ii[si+1+0]=ii[si+0+32]=Ns(di,Ri,ji),ii[si+2+0]=ii[si+1+32]=ii[si+0+64]=Ns(Ri,ji,tr),ii[si+3+0]=ii[si+2+32]=ii[si+1+64]=ii[si+0+96]=Ns(ji,tr,ir),ii[si+3+32]=ii[si+2+64]=ii[si+1+96]=Ns(tr,ir,or),ii[si+3+64]=ii[si+2+96]=Ns(ir,or,fr),ii[si+3+96]=Ns(or,fr,fr)}function tu(ii,si){var di=ii[si-1+0],Ri=ii[si-1+32],ji=ii[si-1+64],tr=ii[si-1-32],ir=ii[si+0-32],or=ii[si+1-32],fr=ii[si+2-32],yr=ii[si+3-32];ii[si+0+0]=ii[si+1+64]=tr+ir+1>>1,ii[si+1+0]=ii[si+2+64]=ir+or+1>>1,ii[si+2+0]=ii[si+3+64]=or+fr+1>>1,ii[si+3+0]=fr+yr+1>>1,ii[si+0+96]=Ns(ji,Ri,di),ii[si+0+64]=Ns(Ri,di,tr),ii[si+0+32]=ii[si+1+96]=Ns(di,tr,ir),ii[si+1+32]=ii[si+2+96]=Ns(tr,ir,or),ii[si+2+32]=ii[si+3+96]=Ns(ir,or,fr),ii[si+3+32]=Ns(or,fr,yr)}function ku(ii,si){var di=ii[si+0-32],Ri=ii[si+1-32],ji=ii[si+2-32],tr=ii[si+3-32],ir=ii[si+4-32],or=ii[si+5-32],fr=ii[si+6-32],yr=ii[si+7-32];ii[si+0+0]=di+Ri+1>>1,ii[si+1+0]=ii[si+0+64]=Ri+ji+1>>1,ii[si+2+0]=ii[si+1+64]=ji+tr+1>>1,ii[si+3+0]=ii[si+2+64]=tr+ir+1>>1,ii[si+0+32]=Ns(di,Ri,ji),ii[si+1+32]=ii[si+0+96]=Ns(Ri,ji,tr),ii[si+2+32]=ii[si+1+96]=Ns(ji,tr,ir),ii[si+3+32]=ii[si+2+96]=Ns(tr,ir,or),ii[si+3+64]=Ns(ir,or,fr),ii[si+3+96]=Ns(or,fr,yr)}function Mh(ii,si){var di=ii[si-1+0],Ri=ii[si-1+32],ji=ii[si-1+64],tr=ii[si-1+96];ii[si+0+0]=di+Ri+1>>1,ii[si+2+0]=ii[si+0+32]=Ri+ji+1>>1,ii[si+2+32]=ii[si+0+64]=ji+tr+1>>1,ii[si+1+0]=Ns(di,Ri,ji),ii[si+3+0]=ii[si+1+32]=Ns(Ri,ji,tr),ii[si+3+32]=ii[si+1+64]=Ns(ji,tr,tr),ii[si+3+64]=ii[si+2+64]=ii[si+0+96]=ii[si+1+96]=ii[si+2+96]=ii[si+3+96]=tr}function kh(ii,si){var di=ii[si-1+0],Ri=ii[si-1+32],ji=ii[si-1+64],tr=ii[si-1+96],ir=ii[si-1-32],or=ii[si+0-32],fr=ii[si+1-32],yr=ii[si+2-32];ii[si+0+0]=ii[si+2+32]=di+ir+1>>1,ii[si+0+32]=ii[si+2+64]=Ri+di+1>>1,ii[si+0+64]=ii[si+2+96]=ji+Ri+1>>1,ii[si+0+96]=tr+ji+1>>1,ii[si+3+0]=Ns(or,fr,yr),ii[si+2+0]=Ns(ir,or,fr),ii[si+1+0]=ii[si+3+32]=Ns(di,ir,or),ii[si+1+32]=ii[si+3+64]=Ns(Ri,di,ir),ii[si+1+64]=ii[si+3+96]=Ns(ji,Ri,di),ii[si+1+96]=Ns(tr,ji,Ri)}function Nh(ii,si){var di;for(di=0;8>di;++di)Oe(ii,si+32*di,ii,si-32,8)}function Nu(ii,si){var di;for(di=0;8>di;++di)Be(ii,si,ii[si-1],8),si+=32}function Oc(ii,si,di){var Ri;for(Ri=0;8>Ri;++Ri)Be(si,di+32*Ri,ii,8)}function yc(ii,si){var di,Ri=8;for(di=0;8>di;++di)Ri+=ii[si+di-32]+ii[si-1+32*di];Oc(Ri>>4,ii,si)}function Oh(ii,si){var di,Ri=4;for(di=0;8>di;++di)Ri+=ii[si+di-32];Oc(Ri>>3,ii,si)}function Dc(ii,si){var di,Ri=4;for(di=0;8>di;++di)Ri+=ii[si-1+32*di];Oc(Ri>>3,ii,si)}function Ou(ii,si){Oc(128,ii,si)}function nu(ii,si,di){var Ri=ii[si-di],ji=ii[si+0],tr=3*(ji-Ri)+jh[1020+ii[si-2*di]-ii[si+di]],ir=Xd[112+(tr+4>>3)];ii[si-di]=Ba[255+Ri+Xd[112+(tr+3>>3)]],ii[si+0]=Ba[255+ji-ir]}function Nd(ii,si,di,Ri){var ji=ii[si+0],tr=ii[si+di];return Za[255+ii[si-2*di]-ii[si-di]]>Ri||Za[255+tr-ji]>Ri}function Od(ii,si,di,Ri){return 4*Za[255+ii[si-di]-ii[si+0]]+Za[255+ii[si-2*di]-ii[si+di]]<=Ri}function Dd(ii,si,di,Ri,ji){var tr=ii[si-3*di],ir=ii[si-2*di],or=ii[si-di],fr=ii[si+0],yr=ii[si+di],Rr=ii[si+2*di],zr=ii[si+3*di];return 4*Za[255+or-fr]+Za[255+ir-yr]>Ri?0:Za[255+ii[si-4*di]-tr]<=ji&&Za[255+tr-ir]<=ji&&Za[255+ir-or]<=ji&&Za[255+zr-Rr]<=ji&&Za[255+Rr-yr]<=ji&&Za[255+yr-fr]<=ji}function Fd(ii,si,di,Ri){var ji=2*Ri+1;for(Ri=0;16>Ri;++Ri)Od(ii,si+Ri,di,ji)&&nu(ii,si+Ri,di)}function rc(ii,si,di,Ri){var ji=2*Ri+1;for(Ri=0;16>Ri;++Ri)Od(ii,si+Ri*di,1,ji)&&nu(ii,si+Ri*di,1)}function uc(ii,si,di,Ri){var ji;for(ji=3;0<ji;--ji)Fd(ii,si+=4*di,di,Ri)}function Dh(ii,si,di,Ri){var ji;for(ji=3;0<ji;--ji)rc(ii,si+=4,di,Ri)}function _c(ii,si,di,Ri,ji,tr,ir,or){for(tr=2*tr+1;0<ji--;){if(Dd(ii,si,di,tr,ir))if(Nd(ii,si,di,or))nu(ii,si,di);else{var fr=ii,yr=si,Rr=di,zr=fr[yr-2*Rr],$r=fr[yr-Rr],Fr=fr[yr+0],rs=fr[yr+Rr],Wr=fr[yr+2*Rr],Mr=27*(es=jh[1020+3*(Fr-$r)+jh[1020+zr-rs]])+63>>7,Or=18*es+63>>7,es=9*es+63>>7;fr[yr-3*Rr]=Ba[255+fr[yr-3*Rr]+es],fr[yr-2*Rr]=Ba[255+zr+Or],fr[yr-Rr]=Ba[255+$r+Mr],fr[yr+0]=Ba[255+Fr-Mr],fr[yr+Rr]=Ba[255+rs-Or],fr[yr+2*Rr]=Ba[255+Wr-es]}si+=Ri}}function kl(ii,si,di,Ri,ji,tr,ir,or){for(tr=2*tr+1;0<ji--;){if(Dd(ii,si,di,tr,ir))if(Nd(ii,si,di,or))nu(ii,si,di);else{var fr=ii,yr=si,Rr=di,zr=fr[yr-Rr],$r=fr[yr+0],Fr=fr[yr+Rr],rs=Xd[112+((Wr=3*($r-zr))+4>>3)],Wr=Xd[112+(Wr+3>>3)],Mr=rs+1>>1;fr[yr-2*Rr]=Ba[255+fr[yr-2*Rr]+Mr],fr[yr-Rr]=Ba[255+zr+Wr],fr[yr+0]=Ba[255+$r-rs],fr[yr+Rr]=Ba[255+Fr-Mr]}si+=Ri}}function Du(ii,si,di,Ri,ji,tr){_c(ii,si,di,1,16,Ri,ji,tr)}function Fc(ii,si,di,Ri,ji,tr){_c(ii,si,1,di,16,Ri,ji,tr)}function Fh(ii,si,di,Ri,ji,tr){var ir;for(ir=3;0<ir;--ir)kl(ii,si+=4*di,di,1,16,Ri,ji,tr)}function iu(ii,si,di,Ri,ji,tr){var ir;for(ir=3;0<ir;--ir)kl(ii,si+=4,1,di,16,Ri,ji,tr)}function Gh(ii,si,di,Ri,ji,tr,ir,or){_c(ii,si,ji,1,8,tr,ir,or),_c(di,Ri,ji,1,8,tr,ir,or)}function Fu(ii,si,di,Ri,ji,tr,ir,or){_c(ii,si,1,ji,8,tr,ir,or),_c(di,Ri,1,ji,8,tr,ir,or)}function Gu(ii,si,di,Ri,ji,tr,ir,or){kl(ii,si+4*ji,ji,1,8,tr,ir,or),kl(di,Ri+4*ji,ji,1,8,tr,ir,or)}function Gd(ii,si,di,Ri,ji,tr,ir,or){kl(ii,si+4,1,ji,8,tr,ir,or),kl(di,Ri+4,1,ji,8,tr,ir,or)}function ru(){this.ba=new Xs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Fs,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Bu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Uu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bd(){this.ua=0,this.Wa=new Ki,this.vb=new Ki,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ni,this.yc=new ui}function Bh(){this.xb=this.a=0,this.l=new Zc,this.ca=new Xs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Li,this.Pb=0,this.wd=new Li,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bd,this.ab=0,this.gc=He(4,Uu),this.Oc=0}function su(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gc(ii,si,di,Ri,ji,tr,ir){for(ii=ii==null?0:ii[si+0],si=0;si<ir;++si)ji[tr+si]=ii+di[Ri+si]&255,ii=ji[tr+si]}function ju(ii,si,di,Ri,ji,tr,ir){var or;if(ii==null)Gc(null,null,di,Ri,ji,tr,ir);else for(or=0;or<ir;++or)ji[tr+or]=ii[si+or]+di[Ri+or]&255}function Cc(ii,si,di,Ri,ji,tr,ir){if(ii==null)Gc(null,null,di,Ri,ji,tr,ir);else{var or,fr=ii[si+0],yr=fr,Rr=fr;for(or=0;or<ir;++or)yr=Rr+(fr=ii[si+or])-yr,Rr=di[Ri+or]+(-256&yr?0>yr?0:255:yr)&255,yr=fr,ji[tr+or]=Rr}}function Vu(ii,si,di,Ri){var ji=si.width,tr=si.o;if(e(ii!=null&&si!=null),0>di||0>=Ri||di+Ri>tr)return null;if(!ii.Cc){if(ii.ga==null){var ir;if(ii.ga=new su,(ir=ii.ga==null)||(ir=si.width*si.o,e(ii.Gb.length==0),ii.Gb=Ue(ir),ii.Uc=0,ii.Gb==null?ir=0:(ii.mb=ii.Gb,ii.nb=ii.Uc,ii.rc=null,ir=1),ir=!ir),!ir){ir=ii.ga;var or=ii.Fa,fr=ii.P,yr=ii.qc,Rr=ii.mb,zr=ii.nb,$r=fr+1,Fr=yr-1,rs=ir.l;if(e(or!=null&&Rr!=null&&si!=null),wc[0]=null,wc[1]=Gc,wc[2]=ju,wc[3]=Cc,ir.ca=Rr,ir.tb=zr,ir.c=si.width,ir.i=si.height,e(0<ir.c&&0<ir.i),1>=yr)si=0;else if(ir.$a=or[fr+0]>>0&3,ir.Z=or[fr+0]>>2&3,ir.Lc=or[fr+0]>>4&3,fr=or[fr+0]>>6&3,0>ir.$a||1<ir.$a||4<=ir.Z||1<ir.Lc||fr)si=0;else if(rs.put=Eo,rs.ac=qs,rs.bc=Rs,rs.ma=ir,rs.width=si.width,rs.height=si.height,rs.Da=si.Da,rs.v=si.v,rs.va=si.va,rs.j=si.j,rs.o=si.o,ir.$a)e:{e(ir.$a==1),si=la();t:for(;;){if(si==null){si=0;break e}if(e(ir!=null),ir.mc=si,si.c=ir.c,si.i=ir.i,si.l=ir.l,si.l.ma=ir,si.l.width=ir.c,si.l.height=ir.i,si.a=0,ar(si.m,or,$r,Fr),!nc(ir.c,ir.i,1,si,null)||(si.ab==1&&si.gc[0].hc==3&&ma(si.s)?(ir.ic=1,or=si.c*si.i,si.Ta=null,si.Ua=0,si.V=Ue(or),si.Ba=0,si.V==null?(si.a=1,si=0):si=1):(ir.ic=0,si=Nc(si,ir.c)),!si))break t;si=1;break e}ir.mc=null,si=0}else si=Fr>=ir.c*ir.i;ir=!si}if(ir)return null;ii.ga.Lc!=1?ii.Ga=0:Ri=tr-di}e(ii.ga!=null),e(di+Ri<=tr);e:{if(si=(or=ii.ga).c,tr=or.l.o,or.$a==0){if($r=ii.rc,Fr=ii.Vc,rs=ii.Fa,fr=ii.P+1+di*si,yr=ii.mb,Rr=ii.nb+di*si,e(fr<=ii.P+ii.qc),or.Z!=0)for(e(wc[or.Z]!=null),ir=0;ir<Ri;++ir)wc[or.Z]($r,Fr,rs,fr,yr,Rr,si),$r=yr,Fr=Rr,Rr+=si,fr+=si;else for(ir=0;ir<Ri;++ir)Oe(yr,Rr,rs,fr,si),$r=yr,Fr=Rr,Rr+=si,fr+=si;ii.rc=$r,ii.Vc=Fr}else{if(e(or.mc!=null),si=di+Ri,e((ir=or.mc)!=null),e(si<=ir.i),ir.C>=si)si=1;else if(or.ic||jr(),or.ic){or=ir.V,$r=ir.Ba,Fr=ir.c;var Wr=ir.i,Mr=(rs=1,fr=ir.$/Fr,yr=ir.$%Fr,Rr=ir.m,zr=ir.s,ir.$),Or=Fr*Wr,es=Fr*si,ss=zr.wc,ts=Mr<es?yo(zr,yr,fr):null;e(Mr<=Or),e(si<=Wr),e(ma(zr));t:for(;;){for(;!Rr.h&&Mr<es;){if(yr&ss||(ts=yo(zr,yr,fr)),e(ts!=null),vr(Rr),256>(Wr=zs(ts.G[0],ts.H[0],Rr)))or[$r+Mr]=Wr,++Mr,++yr>=Fr&&(yr=0,++fr<=si&&!(fr%16)&&Fa(ir,fr));else{if(!(280>Wr)){rs=0;break t}Wr=bo(Wr-256,Rr);var Cs,gs=zs(ts.G[4],ts.H[4],Rr);if(vr(Rr),!(Mr>=(gs=Us(Fr,gs=bo(gs,Rr)))&&Or-Mr>=Wr)){rs=0;break t}for(Cs=0;Cs<Wr;++Cs)or[$r+Mr+Cs]=or[$r+Mr+Cs-gs];for(Mr+=Wr,yr+=Wr;yr>=Fr;)yr-=Fr,++fr<=si&&!(fr%16)&&Fa(ir,fr);Mr<es&&yr&ss&&(ts=yo(zr,yr,fr))}e(Rr.h==sr(Rr))}Fa(ir,fr>si?si:fr);break t}!rs||Rr.h&&Mr<Or?(rs=0,ir.a=Rr.h?5:3):ir.$=Mr,si=rs}else si=xa(ir,ir.V,ir.Ba,ir.c,ir.i,si,qc);if(!si){Ri=0;break e}}di+Ri>=tr&&(ii.Cc=1),Ri=1}if(!Ri)return null;if(ii.Cc&&((Ri=ii.ga)!=null&&(Ri.mc=null),ii.ga=null,0<ii.Ga))return alert("todo:WebPDequantizeLevels"),null}return ii.nb+di*ji}function li(ii,si,di,Ri,ji,tr){for(;0<ji--;){var ir,or=ii,fr=si+(di?1:0),yr=ii,Rr=si+(di?0:3);for(ir=0;ir<Ri;++ir){var zr=yr[Rr+4*ir];zr!=255&&(zr*=32897,or[fr+4*ir+0]=or[fr+4*ir+0]*zr>>23,or[fr+4*ir+1]=or[fr+4*ir+1]*zr>>23,or[fr+4*ir+2]=or[fr+4*ir+2]*zr>>23)}si+=tr}}function Vi(ii,si,di,Ri,ji){for(;0<Ri--;){var tr;for(tr=0;tr<di;++tr){var ir=ii[si+2*tr+0],or=15&(yr=ii[si+2*tr+1]),fr=4369*or,yr=(240&yr|yr>>4)*fr>>16;ii[si+2*tr+0]=(240&ir|ir>>4)*fr>>16&240|(15&ir|ir<<4)*fr>>16>>4&15,ii[si+2*tr+1]=240&yr|or}si+=ji}}function Cr(ii,si,di,Ri,ji,tr,ir,or){var fr,yr,Rr=255;for(yr=0;yr<ji;++yr){for(fr=0;fr<Ri;++fr){var zr=ii[si+fr];tr[ir+4*fr]=zr,Rr&=zr}si+=di,ir+=or}return Rr!=255}function Tr(ii,si,di,Ri,ji){var tr;for(tr=0;tr<ji;++tr)di[Ri+tr]=ii[si+tr]>>8}function jr(){Ka=li,ho=Vi,go=Cr,$o=Tr}function Kr(ii,si,di){pi[ii]=function(Ri,ji,tr,ir,or,fr,yr,Rr,zr,$r,Fr,rs,Wr,Mr,Or,es,ss){var ts,Cs=ss-1>>1,gs=or[fr+0]|yr[Rr+0]<<16,Ts=zr[$r+0]|Fr[rs+0]<<16;e(Ri!=null);var ms=3*gs+Ts+131074>>2;for(si(Ri[ji+0],255&ms,ms>>16,Wr,Mr),tr!=null&&(ms=3*Ts+gs+131074>>2,si(tr[ir+0],255&ms,ms>>16,Or,es)),ts=1;ts<=Cs;++ts){var Ys=or[fr+ts]|yr[Rr+ts]<<16,Ks=zr[$r+ts]|Fr[rs+ts]<<16,Hs=gs+Ys+Ts+Ks+524296,js=Hs+2*(Ys+Ts)>>3;ms=js+gs>>1,gs=(Hs=Hs+2*(gs+Ks)>>3)+Ys>>1,si(Ri[ji+2*ts-1],255&ms,ms>>16,Wr,Mr+(2*ts-1)*di),si(Ri[ji+2*ts-0],255&gs,gs>>16,Wr,Mr+(2*ts-0)*di),tr!=null&&(ms=Hs+Ts>>1,gs=js+Ks>>1,si(tr[ir+2*ts-1],255&ms,ms>>16,Or,es+(2*ts-1)*di),si(tr[ir+2*ts+0],255&gs,gs>>16,Or,es+(2*ts+0)*di)),gs=Ys,Ts=Ks}1&ss||(ms=3*gs+Ts+131074>>2,si(Ri[ji+ss-1],255&ms,ms>>16,Wr,Mr+(ss-1)*di),tr!=null&&(ms=3*Ts+gs+131074>>2,si(tr[ir+ss-1],255&ms,ms>>16,Or,es+(ss-1)*di)))}}function as(){Ja[Zd]=bp,Ja[Jd]=pf,Ja[cf]=Ip,Ja[eh]=gf,Ja[th]=mf,Ja[Vh]=vf,Ja[uf]=wp,Ja[zh]=pf,Ja[$h]=gf,Ja[nh]=mf,Ja[Hh]=vf}function _s(ii){return ii&-16384?0>ii?0:255:ii>>Pp}function ws(ii,si){return _s((19077*ii>>8)+(26149*si>>8)-14234)}function Gs(ii,si,di){return _s((19077*ii>>8)-(6419*si>>8)-(13320*di>>8)+8708)}function Os(ii,si){return _s((19077*ii>>8)+(33050*si>>8)-17685)}function Vs(ii,si,di,Ri,ji){Ri[ji+0]=ws(ii,di),Ri[ji+1]=Gs(ii,si,di),Ri[ji+2]=Os(ii,si)}function Io(ii,si,di,Ri,ji){Ri[ji+0]=Os(ii,si),Ri[ji+1]=Gs(ii,si,di),Ri[ji+2]=ws(ii,di)}function xo(ii,si,di,Ri,ji){var tr=Gs(ii,si,di);si=tr<<3&224|Os(ii,si)>>3,Ri[ji+0]=248&ws(ii,di)|tr>>5,Ri[ji+1]=si}function Jo(ii,si,di,Ri,ji){var tr=240&Os(ii,si)|15;Ri[ji+0]=240&ws(ii,di)|Gs(ii,si,di)>>4,Ri[ji+1]=tr}function ga(ii,si,di,Ri,ji){Ri[ji+0]=255,Vs(ii,si,di,Ri,ji+1)}function ia(ii,si,di,Ri,ji){Io(ii,si,di,Ri,ji),Ri[ji+3]=255}function Dl(ii,si,di,Ri,ji){Vs(ii,si,di,Ri,ji),Ri[ji+3]=255}function Ga(ii,si){return 0>ii?0:ii>si?si:ii}function sc(ii,si,di){pi[ii]=function(Ri,ji,tr,ir,or,fr,yr,Rr,zr){for(var $r=Rr+(-2&zr)*di;Rr!=$r;)si(Ri[ji+0],tr[ir+0],or[fr+0],yr,Rr),si(Ri[ji+1],tr[ir+0],or[fr+0],yr,Rr+di),ji+=2,++ir,++fr,Rr+=2*di;1&zr&&si(Ri[ji+0],tr[ir+0],or[fr+0],yr,Rr)}}function Ud(ii,si,di){return di==0?ii==0?si==0?6:5:si==0?4:0:di}function zu(ii,si,di,Ri,ji){switch(ii>>>30){case 3:fc(si,di,Ri,ji,0);break;case 2:Do(si,di,Ri,ji);break;case 1:ya(si,di,Ri,ji)}}function $u(ii,si){var di,Ri,ji=si.M,tr=si.Nb,ir=ii.oc,or=ii.pc+40,fr=ii.oc,yr=ii.pc+584,Rr=ii.oc,zr=ii.pc+600;for(di=0;16>di;++di)ir[or+32*di-1]=129;for(di=0;8>di;++di)fr[yr+32*di-1]=129,Rr[zr+32*di-1]=129;for(0<ji?ir[or-1-32]=fr[yr-1-32]=Rr[zr-1-32]=129:(Be(ir,or-32-1,127,21),Be(fr,yr-32-1,127,9),Be(Rr,zr-32-1,127,9)),Ri=0;Ri<ii.za;++Ri){var $r=si.ya[si.aa+Ri];if(0<Ri){for(di=-1;16>di;++di)Oe(ir,or+32*di-4,ir,or+32*di+12,4);for(di=-1;8>di;++di)Oe(fr,yr+32*di-4,fr,yr+32*di+4,4),Oe(Rr,zr+32*di-4,Rr,zr+32*di+4,4)}var Fr=ii.Gd,rs=ii.Hd+Ri,Wr=$r.ad,Mr=$r.Hc;if(0<ji&&(Oe(ir,or-32,Fr[rs].y,0,16),Oe(fr,yr-32,Fr[rs].f,0,8),Oe(Rr,zr-32,Fr[rs].ea,0,8)),$r.Za){var Or=ir,es=or-32+16;for(0<ji&&(Ri>=ii.za-1?Be(Or,es,Fr[rs].y[15],4):Oe(Or,es,Fr[rs+1].y,0,4)),di=0;4>di;di++)Or[es+128+di]=Or[es+256+di]=Or[es+384+di]=Or[es+0+di];for(di=0;16>di;++di,Mr<<=2)Or=ir,es=or+_f[di],$l[$r.Ob[di]](Or,es),zu(Mr,Wr,16*+di,Or,es)}else if(Or=Ud(Ri,ji,$r.Ob[0]),Ic[Or](ir,or),Mr!=0)for(di=0;16>di;++di,Mr<<=2)zu(Mr,Wr,16*+di,ir,or+_f[di]);for(di=$r.Gc,Or=Ud(Ri,ji,$r.Dd),gc[Or](fr,yr),gc[Or](Rr,zr),Mr=Wr,Or=fr,es=yr,255&($r=di>>0)&&(170&$r?Xu(Mr,256,Or,es):Ya(Mr,256,Or,es)),$r=Rr,Mr=zr,255&(di>>=8)&&(170&di?Xu(Wr,320,$r,Mr):Ya(Wr,320,$r,Mr)),ji<ii.Ub-1&&(Oe(Fr[rs].y,0,ir,or+480,16),Oe(Fr[rs].f,0,fr,yr+224,8),Oe(Fr[rs].ea,0,Rr,zr+224,8)),di=8*tr*ii.B,Fr=ii.sa,rs=ii.ta+16*Ri+16*tr*ii.R,Wr=ii.qa,$r=ii.ra+8*Ri+di,Mr=ii.Ha,Or=ii.Ia+8*Ri+di,di=0;16>di;++di)Oe(Fr,rs+di*ii.R,ir,or+32*di,16);for(di=0;8>di;++di)Oe(Wr,$r+di*ii.B,fr,yr+32*di,8),Oe(Mr,Or+di*ii.B,Rr,zr+32*di,8)}}function au(ii,si,di,Ri,ji,tr,ir,or,fr){var yr=[0],Rr=[0],zr=0,$r=fr!=null?fr.kd:0,Fr=fr??new Bu;if(ii==null||12>di)return 7;Fr.data=ii,Fr.w=si,Fr.ha=di,si=[si],di=[di],Fr.gb=[Fr.gb];e:{var rs=si,Wr=di,Mr=Fr.gb;if(e(ii!=null),e(Wr!=null),e(Mr!=null),Mr[0]=0,12<=Wr[0]&&!Te(ii,rs[0],"RIFF")){if(Te(ii,rs[0]+8,"WEBP")){Mr=3;break e}var Or=Hi(ii,rs[0]+4);if(12>Or||4294967286<Or){Mr=3;break e}if($r&&Or>Wr[0]-8){Mr=7;break e}Mr[0]=Or,rs[0]+=12,Wr[0]-=12}Mr=0}if(Mr!=0)return Mr;for(Or=0<Fr.gb[0],di=di[0];;){e:{var es=ii;Wr=si,Mr=di;var ss=yr,ts=Rr,Cs=rs=[0];if((ms=zr=[zr])[0]=0,8>Mr[0])Mr=7;else{if(!Te(es,Wr[0],"VP8X")){if(Hi(es,Wr[0]+4)!=10){Mr=3;break e}if(18>Mr[0]){Mr=7;break e}var gs=Hi(es,Wr[0]+8),Ts=1+Gr(es,Wr[0]+12);if(2147483648<=Ts*(es=1+Gr(es,Wr[0]+15))){Mr=3;break e}Cs!=null&&(Cs[0]=gs),ss!=null&&(ss[0]=Ts),ts!=null&&(ts[0]=es),Wr[0]+=18,Mr[0]-=18,ms[0]=1}Mr=0}}if(zr=zr[0],rs=rs[0],Mr!=0)return Mr;if(Wr=!!(2&rs),!Or&&zr)return 3;if(tr!=null&&(tr[0]=!!(16&rs)),ir!=null&&(ir[0]=Wr),or!=null&&(or[0]=0),ir=yr[0],rs=Rr[0],zr&&Wr&&fr==null){Mr=0;break}if(4>di){Mr=7;break}if(Or&&zr||!Or&&!zr&&!Te(ii,si[0],"ALPH")){di=[di],Fr.na=[Fr.na],Fr.P=[Fr.P],Fr.Sa=[Fr.Sa];e:{gs=ii,Mr=si,Or=di;var ms=Fr.gb;ss=Fr.na,ts=Fr.P,Cs=Fr.Sa,Ts=22,e(gs!=null),e(Or!=null),es=Mr[0];var Ys=Or[0];for(e(ss!=null),e(Cs!=null),ss[0]=null,ts[0]=null,Cs[0]=0;;){if(Mr[0]=es,Or[0]=Ys,8>Ys){Mr=7;break e}var Ks=Hi(gs,es+4);if(4294967286<Ks){Mr=3;break e}var Hs=8+Ks+1&-2;if(Ts+=Hs,0<ms&&Ts>ms){Mr=3;break e}if(!Te(gs,es,"VP8 ")||!Te(gs,es,"VP8L")){Mr=0;break e}if(Ys[0]<Hs){Mr=7;break e}Te(gs,es,"ALPH")||(ss[0]=gs,ts[0]=es+8,Cs[0]=Ks),es+=Hs,Ys-=Hs}}if(di=di[0],Fr.na=Fr.na[0],Fr.P=Fr.P[0],Fr.Sa=Fr.Sa[0],Mr!=0)break}di=[di],Fr.Ja=[Fr.Ja],Fr.xa=[Fr.xa];e:if(ms=ii,Mr=si,Or=di,ss=Fr.gb[0],ts=Fr.Ja,Cs=Fr.xa,gs=Mr[0],es=!Te(ms,gs,"VP8 "),Ts=!Te(ms,gs,"VP8L"),e(ms!=null),e(Or!=null),e(ts!=null),e(Cs!=null),8>Or[0])Mr=7;else{if(es||Ts){if(ms=Hi(ms,gs+4),12<=ss&&ms>ss-12){Mr=3;break e}if($r&&ms>Or[0]-8){Mr=7;break e}ts[0]=ms,Mr[0]+=8,Or[0]-=8,Cs[0]=Ts}else Cs[0]=5<=Or[0]&&ms[gs+0]==47&&!(ms[gs+4]>>5),ts[0]=Or[0];Mr=0}if(di=di[0],Fr.Ja=Fr.Ja[0],Fr.xa=Fr.xa[0],si=si[0],Mr!=0)break;if(4294967286<Fr.Ja)return 3;if(or==null||Wr||(or[0]=Fr.xa?2:1),ir=[ir],rs=[rs],Fr.xa){if(5>di){Mr=7;break}or=ir,$r=rs,Wr=tr,ii==null||5>di?ii=0:5<=di&&ii[si+0]==47&&!(ii[si+4]>>5)?(Or=[0],ms=[0],ss=[0],ar(ts=new Li,ii,si,di),As(ts,Or,ms,ss)?(or!=null&&(or[0]=Or[0]),$r!=null&&($r[0]=ms[0]),Wr!=null&&(Wr[0]=ss[0]),ii=1):ii=0):ii=0}else{if(10>di){Mr=7;break}or=rs,ii==null||10>di||!bd(ii,si+3,di-3)?ii=0:($r=ii[si+0]|ii[si+1]<<8|ii[si+2]<<16,Wr=16383&(ii[si+7]<<8|ii[si+6]),ii=16383&(ii[si+9]<<8|ii[si+8]),1&$r||3<($r>>1&7)||!($r>>4&1)||$r>>5>=Fr.Ja||!Wr||!ii?ii=0:(ir&&(ir[0]=Wr),or&&(or[0]=ii),ii=1))}if(!ii||(ir=ir[0],rs=rs[0],zr&&(yr[0]!=ir||Rr[0]!=rs)))return 3;fr!=null&&(fr[0]=Fr,fr.offset=si-fr.w,e(4294967286>si-fr.w),e(fr.offset==fr.ha-di));break}return Mr==0||Mr==7&&zr&&fr==null?(tr!=null&&(tr[0]|=Fr.na!=null&&0<Fr.na.length),Ri!=null&&(Ri[0]=ir),ji!=null&&(ji[0]=rs),0):Mr}function Hu(ii,si,di){var Ri=si.width,ji=si.height,tr=0,ir=0,or=Ri,fr=ji;if(si.Da=ii!=null&&0<ii.Da,si.Da&&(or=ii.cd,fr=ii.bd,tr=ii.v,ir=ii.j,11>di||(tr&=-2,ir&=-2),0>tr||0>ir||0>=or||0>=fr||tr+or>Ri||ir+fr>ji))return 0;if(si.v=tr,si.j=ir,si.va=tr+or,si.o=ir+fr,si.U=or,si.T=fr,si.da=ii!=null&&0<ii.da,si.da){if(!Dr(or,fr,di=[ii.ib],tr=[ii.hb]))return 0;si.ib=di[0],si.hb=tr[0]}return si.ob=ii!=null&&ii.ob,si.Kb=ii==null||!ii.Sd,si.da&&(si.ob=si.ib<3*Ri/4&&si.hb<3*ji/4,si.Kb=0),1}function qu(ii){if(ii==null)return 2;if(11>ii.S){var si=ii.f.RGBA;si.fb+=(ii.height-1)*si.A,si.A=-si.A}else si=ii.f.kb,ii=ii.height,si.O+=(ii-1)*si.fa,si.fa=-si.fa,si.N+=(ii-1>>1)*si.Ab,si.Ab=-si.Ab,si.W+=(ii-1>>1)*si.Db,si.Db=-si.Db,si.F!=null&&(si.J+=(ii-1)*si.lb,si.lb=-si.lb);return 0}function cu(ii,si,di,Ri){if(Ri==null||0>=ii||0>=si)return 2;if(di!=null){if(di.Da){var ji=di.cd,tr=di.bd,ir=-2&di.v,or=-2&di.j;if(0>ir||0>or||0>=ji||0>=tr||ir+ji>ii||or+tr>si)return 2;ii=ji,si=tr}if(di.da){if(!Dr(ii,si,ji=[di.ib],tr=[di.hb]))return 2;ii=ji[0],si=tr[0]}}Ri.width=ii,Ri.height=si;e:{var fr=Ri.width,yr=Ri.height;if(ii=Ri.S,0>=fr||0>=yr||!(ii>=Zd&&13>ii))ii=2;else{if(0>=Ri.Rd&&Ri.sd==null){ir=tr=ji=si=0;var Rr=(or=fr*Cf[ii])*yr;if(11>ii||(tr=(yr+1)/2*(si=(fr+1)/2),ii==12&&(ir=(ji=fr)*yr)),(yr=Ue(Rr+2*tr+ir))==null){ii=1;break e}Ri.sd=yr,11>ii?((fr=Ri.f.RGBA).eb=yr,fr.fb=0,fr.A=or,fr.size=Rr):((fr=Ri.f.kb).y=yr,fr.O=0,fr.fa=or,fr.Fd=Rr,fr.f=yr,fr.N=0+Rr,fr.Ab=si,fr.Cd=tr,fr.ea=yr,fr.W=0+Rr+tr,fr.Db=si,fr.Ed=tr,ii==12&&(fr.F=yr,fr.J=0+Rr+2*tr),fr.Tc=ir,fr.lb=ji)}if(si=1,ji=Ri.S,tr=Ri.width,ir=Ri.height,ji>=Zd&&13>ji)if(11>ji)ii=Ri.f.RGBA,si&=(or=Math.abs(ii.A))*(ir-1)+tr<=ii.size,si&=or>=tr*Cf[ji],si&=ii.eb!=null;else{ii=Ri.f.kb,or=(tr+1)/2,Rr=(ir+1)/2,fr=Math.abs(ii.fa),yr=Math.abs(ii.Ab);var zr=Math.abs(ii.Db),$r=Math.abs(ii.lb),Fr=$r*(ir-1)+tr;si&=fr*(ir-1)+tr<=ii.Fd,si&=yr*(Rr-1)+or<=ii.Cd,si=(si&=zr*(Rr-1)+or<=ii.Ed)&fr>=tr&yr>=or&zr>=or,si&=ii.y!=null,si&=ii.f!=null,si&=ii.ea!=null,ji==12&&(si&=$r>=tr,si&=Fr<=ii.Tc,si&=ii.F!=null)}else si=0;ii=si?0:2}}return ii!=0||di!=null&&di.fd&&(ii=qu(Ri)),ii}var ca=64,uu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],du=24,hu=32,Wu=8,Ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kr("Predictor0","PredictorAdd0"),pi.Predictor0=function(){return 4278190080},pi.Predictor1=function(ii){return ii},pi.Predictor2=function(ii,si,di){return si[di+0]},pi.Predictor3=function(ii,si,di){return si[di+1]},pi.Predictor4=function(ii,si,di){return si[di-1]},pi.Predictor5=function(ii,si,di){return Pr(Pr(ii,si[di+1]),si[di+0])},pi.Predictor6=function(ii,si,di){return Pr(ii,si[di-1])},pi.Predictor7=function(ii,si,di){return Pr(ii,si[di+0])},pi.Predictor8=function(ii,si,di){return Pr(si[di-1],si[di+0])},pi.Predictor9=function(ii,si,di){return Pr(si[di+0],si[di+1])},pi.Predictor10=function(ii,si,di){return Pr(Pr(ii,si[di-1]),Pr(si[di+0],si[di+1]))},pi.Predictor11=function(ii,si,di){var Ri=si[di+0];return 0>=wr(Ri>>24&255,ii>>24&255,(si=si[di-1])>>24&255)+wr(Ri>>16&255,ii>>16&255,si>>16&255)+wr(Ri>>8&255,ii>>8&255,si>>8&255)+wr(255&Ri,255&ii,255&si)?Ri:ii},pi.Predictor12=function(ii,si,di){var Ri=si[di+0];return(Er((ii>>24&255)+(Ri>>24&255)-((si=si[di-1])>>24&255))<<24|Er((ii>>16&255)+(Ri>>16&255)-(si>>16&255))<<16|Er((ii>>8&255)+(Ri>>8&255)-(si>>8&255))<<8|Er((255&ii)+(255&Ri)-(255&si)))>>>0},pi.Predictor13=function(ii,si,di){var Ri=si[di-1];return(Sr((ii=Pr(ii,si[di+0]))>>24&255,Ri>>24&255)<<24|Sr(ii>>16&255,Ri>>16&255)<<16|Sr(ii>>8&255,Ri>>8&255)<<8|Sr(ii>>0&255,Ri>>0&255))>>>0};var Uh=pi.PredictorAdd0;pi.PredictorAdd1=Br,kr("Predictor2","PredictorAdd2"),kr("Predictor3","PredictorAdd3"),kr("Predictor4","PredictorAdd4"),kr("Predictor5","PredictorAdd5"),kr("Predictor6","PredictorAdd6"),kr("Predictor7","PredictorAdd7"),kr("Predictor8","PredictorAdd8"),kr("Predictor9","PredictorAdd9"),kr("Predictor10","PredictorAdd10"),kr("Predictor11","PredictorAdd11"),kr("Predictor12","PredictorAdd12"),kr("Predictor13","PredictorAdd13");var Yu=pi.PredictorAdd2;cs("ColorIndexInverseTransform","MapARGB","32b",function(ii){return ii>>8&255},function(ii){return ii}),cs("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(ii){return ii},function(ii){return ii>>8&255});var jd,Wa=pi.ColorIndexInverseTransform,fu=pi.MapARGB,Vd=pi.VP8LColorIndexInverseTransformAlpha,$d=pi.MapAlpha,Ac=pi.VP8LPredictorsAdd=[];Ac.length=16,(pi.VP8LPredictors=[]).length=16,(pi.VP8LPredictorsAdd_C=[]).length=16,(pi.VP8LPredictors_C=[]).length=16;var Bc,Ma,va,Ec,dc,hc,pu,fc,Do,Xu,ya,Ya,gu,Wd,Ku,Uc,jc,Sc,Vc,mu,zc,bc,Zu,Xa,Ka,ho,go,$o,na=Ue(511),pc=Ue(2041),Ju=Ue(225),vu=Ue(767),Yd=0,jh=pc,Xd=Ju,Ba=vu,Za=na,Zd=0,Jd=1,cf=2,eh=3,th=4,Vh=5,uf=6,zh=7,$h=8,nh=9,Hh=10,up=[2,3,7],dp=[3,3,11],df=[280,256,256,256,40],hp=[0,1,1,1,0],fp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mp=8,qh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qu=null,vp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_p=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ap=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ep=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ic=[],$l=[],gc=[],Sp=1,ff=2,wc=[],Ja=[];Kr("UpsampleRgbLinePair",Vs,3),Kr("UpsampleBgrLinePair",Io,3),Kr("UpsampleRgbaLinePair",Dl,4),Kr("UpsampleBgraLinePair",ia,4),Kr("UpsampleArgbLinePair",ga,4),Kr("UpsampleRgba4444LinePair",Jo,2),Kr("UpsampleRgb565LinePair",xo,2);var bp=pi.UpsampleRgbLinePair,Ip=pi.UpsampleBgrLinePair,pf=pi.UpsampleRgbaLinePair,gf=pi.UpsampleBgraLinePair,mf=pi.UpsampleArgbLinePair,vf=pi.UpsampleRgba4444LinePair,wp=pi.UpsampleRgb565LinePair,ih=16,rh=1<<ih-1,hd=-227,Yh=482,Pp=6,yf=0,xp=Ue(256),Tp=Ue(256),Lp=Ue(256),Rp=Ue(256),Mp=Ue(Yh-hd),kp=Ue(Yh-hd);sc("YuvToRgbRow",Vs,3),sc("YuvToBgrRow",Io,3),sc("YuvToRgbaRow",Dl,4),sc("YuvToBgraRow",ia,4),sc("YuvToArgbRow",ga,4),sc("YuvToRgba4444Row",Jo,2),sc("YuvToRgb565Row",xo,2);var _f=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sh=[0,2,8],Np=[8,7,6,4,4,2,2,2,1,1,1,1],Op=1;this.WebPDecodeRGBA=function(ii,si,di,Ri,ji){var tr=Jd,ir=new ru,or=new Xs;ir.ba=or,or.S=tr,or.width=[or.width],or.height=[or.height];var fr=or.width,yr=or.height,Rr=new _o;if(Rr==null||ii==null)var zr=2;else e(Rr!=null),zr=au(ii,si,di,Rr.width,Rr.height,Rr.Pd,Rr.Qd,Rr.format,null);if(zr!=0?fr=0:(fr!=null&&(fr[0]=Rr.width[0]),yr!=null&&(yr[0]=Rr.height[0]),fr=1),fr){or.width=or.width[0],or.height=or.height[0],Ri!=null&&(Ri[0]=or.width),ji!=null&&(ji[0]=or.height);e:{if(Ri=new Zc,(ji=new Bu).data=ii,ji.w=si,ji.ha=di,ji.kd=1,si=[0],e(ji!=null),((ii=au(ji.data,ji.w,ji.ha,null,null,null,si,null,ji))==0||ii==7)&&si[0]&&(ii=4),(si=ii)==0){if(e(ir!=null),Ri.data=ji.data,Ri.w=ji.w+ji.offset,Ri.ha=ji.ha-ji.offset,Ri.put=Eo,Ri.ac=qs,Ri.bc=Rs,Ri.ma=ir,ji.xa){if((ii=la())==null){ir=1;break e}if(function($r,Fr){var rs=[0],Wr=[0],Mr=[0];t:for(;;){if($r==null)return 0;if(Fr==null)return $r.a=2,0;if($r.l=Fr,$r.a=0,ar($r.m,Fr.data,Fr.w,Fr.ha),!As($r.m,rs,Wr,Mr)){$r.a=3;break t}if($r.xb=ff,Fr.width=rs[0],Fr.height=Wr[0],!nc(rs[0],Wr[0],1,$r,null))break t;return 1}return e($r.a!=0),0}(ii,Ri)){if(Ri=(si=cu(Ri.width,Ri.height,ir.Oa,ir.ba))==0){t:{Ri=ii;n:for(;;){if(Ri==null){Ri=0;break t}if(e(Ri.s.yc!=null),e(Ri.s.Ya!=null),e(0<Ri.s.Wb),e((di=Ri.l)!=null),e((ji=di.ma)!=null),Ri.xb!=0){if(Ri.ca=ji.ba,Ri.tb=ji.tb,e(Ri.ca!=null),!Hu(ji.Oa,di,eh)){Ri.a=2;break n}if(!Nc(Ri,di.width)||di.da)break n;if((di.da||Es(Ri.ca.S))&&jr(),11>Ri.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ri.ca.f.kb.F!=null&&jr()),Ri.Pb&&0<Ri.s.ua&&Ri.s.vb.X==null&&!gr(Ri.s.vb,Ri.s.Wa.Xa)){Ri.a=1;break n}Ri.xb=0}if(!xa(Ri,Ri.V,Ri.Ba,Ri.c,Ri.i,di.o,qa))break n;ji.Dc=Ri.Ma,Ri=1;break t}e(Ri.a!=0),Ri=0}Ri=!Ri}Ri&&(si=ii.a)}else si=ii.a}else{if((ii=new Ah)==null){ir=1;break e}if(ii.Fa=ji.na,ii.P=ji.P,ii.qc=ji.Sa,Id(ii,Ri)){if((si=cu(Ri.width,Ri.height,ir.Oa,ir.ba))==0){if(ii.Aa=0,di=ir.Oa,e((ji=ii)!=null),di!=null){if(0<(fr=0>(fr=di.Md)?0:100<fr?255:255*fr/100)){for(yr=Rr=0;4>yr;++yr)12>(zr=ji.pb[yr]).lc&&(zr.ia=fr*Np[0>zr.lc?0:zr.lc]>>3),Rr|=zr.ia;Rr&&(alert("todo:VP8InitRandom"),ji.ia=1)}ji.Ga=di.Id,100<ji.Ga?ji.Ga=100:0>ji.Ga&&(ji.Ga=0)}Eh(ii,Ri)||(si=ii.a)}}else si=ii.a}si==0&&ir.Oa!=null&&ir.Oa.fd&&(si=qu(ir.ba))}ir=si}tr=ir!=0?null:11>tr?or.f.RGBA.eb:or.f.kb.y}else tr=null;return tr};var Cf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function An(pi,Mi){for(var Fi="",fi=0;fi<4;fi++)Fi+=String.fromCharCode(pi[Mi++]);return Fi}function En(pi,Mi){return(pi[Mi+0]<<0|pi[Mi+1]<<8|pi[Mi+2]<<16)>>>0}function Sn(pi,Mi){return(pi[Mi+0]<<0|pi[Mi+1]<<8|pi[Mi+2]<<16|pi[Mi+3]<<24)>>>0}new Cn;var Tn=[0],Ln=[0],Bn=[],ei=new Cn,ni=ke,ti=function(pi,Mi){var Fi={},fi=0,ui=!1,Oi=0,Ni=0;if(Fi.frames=[],!function(ur,sr,dr,vr){for(var hr=0;hr<vr;hr++)if(ur[sr+hr]!=dr.charCodeAt(hr))return!0;return!1}(pi,Mi,"RIFF",4)){var nr,er;for(Sn(pi,Mi+=4),Mi+=8;Mi<pi.length;){var cr=An(pi,Mi),ar=Sn(pi,Mi+=4);Mi+=4;var pr=ar+(1&ar);switch(cr){case"VP8 ":case"VP8L":Fi.frames[fi]===void 0&&(Fi.frames[fi]={}),(Li=Fi.frames[fi]).src_off=ui?Ni:Mi-8,Li.src_size=Oi+ar+8,fi++,ui&&(ui=!1,Oi=0,Ni=0);break;case"VP8X":(Li=Fi.header={}).feature_flags=pi[Mi];var rr=Mi+4;Li.canvas_width=1+En(pi,rr),rr+=3,Li.canvas_height=1+En(pi,rr),rr+=3;break;case"ALPH":ui=!0,Oi=pr+8,Ni=Mi-8;break;case"ANIM":(Li=Fi.header).bgcolor=Sn(pi,Mi),rr=Mi+4,Li.loop_count=(nr=pi)[(er=rr)+0]<<0|nr[er+1]<<8,rr+=2;break;case"ANMF":var br,Li;(Li=Fi.frames[fi]={}).offset_x=2*En(pi,Mi),Mi+=3,Li.offset_y=2*En(pi,Mi),Mi+=3,Li.width=1+En(pi,Mi),Mi+=3,Li.height=1+En(pi,Mi),Mi+=3,Li.duration=En(pi,Mi),Mi+=3,br=pi[Mi++],Li.dispose=1&br,Li.blend=br>>1&1}cr!="ANMF"&&(Mi+=pr)}return Fi}}(ni,0);ti.response=ni,ti.rgbaoutput=!0,ti.dataurl=!1;var ri=ti.header?ti.header:null,oi=ti.frames?ti.frames:null;if(ri){ri.loop_counter=ri.loop_count,Tn=[ri.canvas_height],Ln=[ri.canvas_width];for(var ai=0;ai<oi.length&&oi[ai].blend!=0;ai++);}var ci=oi[0],Pi=ei.WebPDecodeRGBA(ni,ci.src_off,ci.src_size,Ln,Tn);ci.rgba=Pi,ci.imgwidth=Ln[0],ci.imgheight=Tn[0];for(var vi=0;vi<Ln[0]*Tn[0]*4;vi++)Bn[vi]=Pi[vi];return this.width=Ln,this.height=Tn,this.data=Bn,this}(function(ke){var e=function(){return typeof zlibSync=="function"},Te=function(Tn,Ln,Bn,ei){var ni=4,ti=He;switch(ei){case ke.image_compression.FAST:ni=1,ti=Ue;break;case ke.image_compression.MEDIUM:ni=6,ti=We;break;case ke.image_compression.SLOW:ni=9,ti=Cn}Tn=Oe(Tn,Ln,Bn,ti);var ri=zlibSync(Tn,{level:ni});return ke.__addimage__.arrayBufferToBinaryString(ri)},Oe=function(Tn,Ln,Bn,ei){for(var ni,ti,ri,oi=Tn.length/Ln,ai=new Uint8Array(Tn.length+oi),ci=En(),Pi=0;Pi<oi;Pi+=1){if(ri=Pi*Ln,ni=Tn.subarray(ri,ri+Ln),ei)ai.set(ei(ni,Bn,ti),ri+Pi);else{for(var vi,pi=ci.length,Mi=[];vi<pi;vi+=1)Mi[vi]=ci[vi](ni,Bn,ti);var Fi=Sn(Mi.concat());ai.set(Mi[Fi],ri+Pi)}ti=ni}return ai},Be=function(Tn){var Ln=Array.apply([],Tn);return Ln.unshift(0),Ln},Ue=function(Tn,Ln){var Bn,ei=[],ni=Tn.length;ei[0]=1;for(var ti=0;ti<ni;ti+=1)Bn=Tn[ti-Ln]||0,ei[ti+1]=Tn[ti]-Bn+256&255;return ei},He=function(Tn,Ln,Bn){var ei,ni=[],ti=Tn.length;ni[0]=2;for(var ri=0;ri<ti;ri+=1)ei=Bn&&Bn[ri]||0,ni[ri+1]=Tn[ri]-ei+256&255;return ni},We=function(Tn,Ln,Bn){var ei,ni,ti=[],ri=Tn.length;ti[0]=3;for(var oi=0;oi<ri;oi+=1)ei=Tn[oi-Ln]||0,ni=Bn&&Bn[oi]||0,ti[oi+1]=Tn[oi]+256-(ei+ni>>>1)&255;return ti},Cn=function(Tn,Ln,Bn){var ei,ni,ti,ri,oi=[],ai=Tn.length;oi[0]=4;for(var ci=0;ci<ai;ci+=1)ei=Tn[ci-Ln]||0,ni=Bn&&Bn[ci]||0,ti=Bn&&Bn[ci-Ln]||0,ri=An(ei,ni,ti),oi[ci+1]=Tn[ci]-ri+256&255;return oi},An=function(Tn,Ln,Bn){if(Tn===Ln&&Ln===Bn)return Tn;var ei=Math.abs(Ln-Bn),ni=Math.abs(Tn-Bn),ti=Math.abs(Tn+Ln-Bn-Bn);return ei<=ni&&ei<=ti?Tn:ni<=ti?Ln:Bn},En=function(){return[Be,Ue,He,We,Cn]},Sn=function(Tn){var Ln=Tn.map(function(Bn){return Bn.reduce(function(ei,ni){return ei+Math.abs(ni)},0)});return Ln.indexOf(Math.min.apply(null,Ln))};ke.processPNG=function(Tn,Ln,Bn,ei){var ni,ti,ri,oi,ai,ci,Pi,vi,pi,Mi,Fi,fi,ui,Oi,Ni,nr=this.decode.FLATE_DECODE,er="";if(this.__addimage__.isArrayBuffer(Tn)&&(Tn=new Uint8Array(Tn)),this.__addimage__.isArrayBufferView(Tn)){if(Tn=(ri=new Kt(Tn)).imgData,ti=ri.bits,ni=ri.colorSpace,ai=ri.colors,[4,6].indexOf(ri.colorType)!==-1){if(ri.bits===8){pi=(vi=ri.pixelBitlength==32?new Uint32Array(ri.decodePixels().buffer):ri.pixelBitlength==16?new Uint16Array(ri.decodePixels().buffer):new Uint8Array(ri.decodePixels().buffer)).length,Fi=new Uint8Array(pi*ri.colors),Mi=new Uint8Array(pi);var cr,ar=ri.pixelBitlength-ri.bits;for(Oi=0,Ni=0;Oi<pi;Oi++){for(ui=vi[Oi],cr=0;cr<ar;)Fi[Ni++]=ui>>>cr&255,cr+=ri.bits;Mi[Oi]=ui>>>cr&255}}if(ri.bits===16){pi=(vi=new Uint32Array(ri.decodePixels().buffer)).length,Fi=new Uint8Array(pi*(32/ri.pixelBitlength)*ri.colors),Mi=new Uint8Array(pi*(32/ri.pixelBitlength)),fi=ri.colors>1,Oi=0,Ni=0;for(var pr=0;Oi<pi;)ui=vi[Oi++],Fi[Ni++]=ui>>>0&255,fi&&(Fi[Ni++]=ui>>>16&255,ui=vi[Oi++],Fi[Ni++]=ui>>>0&255),Mi[pr++]=ui>>>16&255;ti=8}ei!==ke.image_compression.NONE&&e()?(Tn=Te(Fi,ri.width*ri.colors,ri.colors,ei),Pi=Te(Mi,ri.width,1,ei)):(Tn=Fi,Pi=Mi,nr=void 0)}if(ri.colorType===3&&(ni=this.color_spaces.INDEXED,ci=ri.palette,ri.transparency.indexed)){var rr=ri.transparency.indexed,br=0;for(Oi=0,pi=rr.length;Oi<pi;++Oi)br+=rr[Oi];if((br/=255)===pi-1&&rr.indexOf(0)!==-1)oi=[rr.indexOf(0)];else if(br!==pi){for(vi=ri.decodePixels(),Mi=new Uint8Array(vi.length),Oi=0,pi=vi.length;Oi<pi;Oi++)Mi[Oi]=rr[vi[Oi]];Pi=Te(Mi,ri.width,1)}}var Li=function(ur){var sr;switch(ur){case ke.image_compression.FAST:sr=11;break;case ke.image_compression.MEDIUM:sr=13;break;case ke.image_compression.SLOW:sr=14;break;default:sr=12}return sr}(ei);return nr===this.decode.FLATE_DECODE&&(er="/Predictor "+Li+" "),er+="/Colors "+ai+" /BitsPerComponent "+ti+" /Columns "+ri.width,(this.__addimage__.isArrayBuffer(Tn)||this.__addimage__.isArrayBufferView(Tn))&&(Tn=this.__addimage__.arrayBufferToBinaryString(Tn)),(Pi&&this.__addimage__.isArrayBuffer(Pi)||this.__addimage__.isArrayBufferView(Pi))&&(Pi=this.__addimage__.arrayBufferToBinaryString(Pi)),{alias:Bn,data:Tn,index:Ln,filter:nr,decodeParameters:er,transparency:oi,palette:ci,sMask:Pi,predictor:Li,width:ri.width,height:ri.height,bitsPerComponent:ti,colorSpace:ni}}}})(E.API),function(ke){ke.processGIF89A=function(e,Te,Oe,Be){var Ue=new Zt(e),He=Ue.width,We=Ue.height,Cn=[];Ue.decodeAndBlitFrameRGBA(0,Cn);var An={data:Cn,width:He,height:We},En=new Qt(100).encode(An,100);return ke.processJPEG.call(this,En,Te,Oe,Be)},ke.processGIF87A=ke.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var ke=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(ke);for(var e=0;e<ke;e++){var Te=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Be,green:Oe,blue:Te,quad:Ue}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var ke="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[ke]()}catch(Te){a.log("bit decode error:"+Te)}},te.prototype.bit1=function(){var ke,e=Math.ceil(this.width/8),Te=e%4;for(ke=this.height-1;ke>=0;ke--){for(var Oe=this.bottom_up?ke:this.height-1-ke,Be=0;Be<e;Be++)for(var Ue=this.datav.getUint8(this.pos++,!0),He=Oe*this.width*4+8*Be*4,We=0;We<8&&8*Be+We<this.width;We++){var Cn=this.palette[Ue>>7-We&1];this.data[He+4*We]=Cn.blue,this.data[He+4*We+1]=Cn.green,this.data[He+4*We+2]=Cn.red,this.data[He+4*We+3]=255}Te!==0&&(this.pos+=4-Te)}},te.prototype.bit4=function(){for(var ke=Math.ceil(this.width/2),e=ke%4,Te=this.height-1;Te>=0;Te--){for(var Oe=this.bottom_up?Te:this.height-1-Te,Be=0;Be<ke;Be++){var Ue=this.datav.getUint8(this.pos++,!0),He=Oe*this.width*4+2*Be*4,We=Ue>>4,Cn=15&Ue,An=this.palette[We];if(this.data[He]=An.blue,this.data[He+1]=An.green,this.data[He+2]=An.red,this.data[He+3]=255,2*Be+1>=this.width)break;An=this.palette[Cn],this.data[He+4]=An.blue,this.data[He+4+1]=An.green,this.data[He+4+2]=An.red,this.data[He+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var ke=this.width%4,e=this.height-1;e>=0;e--){for(var Te=this.bottom_up?e:this.height-1-e,Oe=0;Oe<this.width;Oe++){var Be=this.datav.getUint8(this.pos++,!0),Ue=Te*this.width*4+4*Oe;if(Be<this.palette.length){var He=this.palette[Be];this.data[Ue]=He.red,this.data[Ue+1]=He.green,this.data[Ue+2]=He.blue,this.data[Ue+3]=255}else this.data[Ue]=255,this.data[Ue+1]=255,this.data[Ue+2]=255,this.data[Ue+3]=255}ke!==0&&(this.pos+=4-ke)}},te.prototype.bit15=function(){for(var ke=this.width%3,e=parseInt("11111",2),Te=this.height-1;Te>=0;Te--){for(var Oe=this.bottom_up?Te:this.height-1-Te,Be=0;Be<this.width;Be++){var Ue=this.datav.getUint16(this.pos,!0);this.pos+=2;var He=(Ue&e)/e*255|0,We=(Ue>>5&e)/e*255|0,Cn=(Ue>>10&e)/e*255|0,An=Ue>>15?255:0,En=Oe*this.width*4+4*Be;this.data[En]=Cn,this.data[En+1]=We,this.data[En+2]=He,this.data[En+3]=An}this.pos+=ke}},te.prototype.bit16=function(){for(var ke=this.width%3,e=parseInt("11111",2),Te=parseInt("111111",2),Oe=this.height-1;Oe>=0;Oe--){for(var Be=this.bottom_up?Oe:this.height-1-Oe,Ue=0;Ue<this.width;Ue++){var He=this.datav.getUint16(this.pos,!0);this.pos+=2;var We=(He&e)/e*255|0,Cn=(He>>5&Te)/Te*255|0,An=(He>>11)/e*255|0,En=Be*this.width*4+4*Ue;this.data[En]=An,this.data[En+1]=Cn,this.data[En+2]=We,this.data[En+3]=255}this.pos+=ke}},te.prototype.bit24=function(){for(var ke=this.height-1;ke>=0;ke--){for(var e=this.bottom_up?ke:this.height-1-ke,Te=0;Te<this.width;Te++){var Oe=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),He=e*this.width*4+4*Te;this.data[He]=Ue,this.data[He+1]=Be,this.data[He+2]=Oe,this.data[He+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var ke=this.height-1;ke>=0;ke--)for(var e=this.bottom_up?ke:this.height-1-ke,Te=0;Te<this.width;Te++){var Oe=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),He=this.datav.getUint8(this.pos++,!0),We=e*this.width*4+4*Te;this.data[We]=Ue,this.data[We+1]=Be,this.data[We+2]=Oe,this.data[We+3]=He}},te.prototype.getData=function(){return this.data},function(ke){ke.processBMP=function(e,Te,Oe,Be){var Ue=new te(e,!1),He=Ue.width,We=Ue.height,Cn={data:Ue.getData(),width:He,height:We},An=new Qt(100).encode(Cn,100);return ke.processJPEG.call(this,An,Te,Oe,Be)}}(E.API),ee.prototype.getData=function(){return this.data},function(ke){ke.processWEBP=function(e,Te,Oe,Be){var Ue=new ee(e),He=Ue.width,We=Ue.height,Cn={data:Ue.getData(),width:He,height:We},An=new Qt(100).encode(Cn,100);return ke.processJPEG.call(this,An,Te,Oe,Be)}}(E.API),E.API.processRGBA=function(ke,e,Te){for(var Oe=ke.data,Be=Oe.length,Ue=new Uint8Array(Be/4*3),He=new Uint8Array(Be/4),We=0,Cn=0,An=0;An<Be;An+=4){var En=Oe[An],Sn=Oe[An+1],Tn=Oe[An+2],Ln=Oe[An+3];Ue[We++]=En,Ue[We++]=Sn,Ue[We++]=Tn,He[Cn++]=Ln}var Bn=this.__addimage__.arrayBufferToBinaryString(Ue);return{alpha:this.__addimage__.arrayBufferToBinaryString(He),data:Bn,index:e,alias:Te,colorSpace:"DeviceRGB",bitsPerComponent:8,width:ke.width,height:ke.height}},E.API.setLanguage=function(ke){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[ke]!==void 0&&(this.internal.languageSettings.languageCode=ke,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(ke,e){var Te,Oe,Be=(e=e||{}).font||this.internal.getFont(),Ue=e.fontSize||this.internal.getFontSize(),He=e.charSpace||this.internal.getCharSpace(),We=e.widths?e.widths:Be.metadata.Unicode.widths,Cn=We.fof?We.fof:1,An=e.kerning?e.kerning:Be.metadata.Unicode.kerning,En=An.fof?An.fof:1,Sn=e.doKerning!==!1,Tn=0,Ln=ke.length,Bn=0,ei=We[0]||Cn,ni=[];for(Te=0;Te<Ln;Te++)Oe=ke.charCodeAt(Te),typeof Be.metadata.widthOfString=="function"?ni.push((Be.metadata.widthOfGlyph(Be.metadata.characterToGlyph(Oe))+He*(1e3/Ue)||0)/1e3):(Tn=Sn&&_typeof(An[Oe])==="object"&&!isNaN(parseInt(An[Oe][Bn],10))?An[Oe][Bn]/En:0,ni.push((We[Oe]||ei)/Cn+Tn)),Bn=Oe;return ni},Yt=Vt.getStringUnitWidth=function(ke,e){var Te=(e=e||{}).fontSize||this.internal.getFontSize(),Oe=e.font||this.internal.getFont(),Be=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(ke=Vt.processArabic(ke)),typeof Oe.metadata.widthOfString=="function"?Oe.metadata.widthOfString(ke,Te,Be)/Te:Gt.apply(this,arguments).reduce(function(Ue,He){return Ue+He},0)},Jt=function(ke,e,Te,Oe){for(var Be=[],Ue=0,He=ke.length,We=0;Ue!==He&&We+e[Ue]<Te;)We+=e[Ue],Ue++;Be.push(ke.slice(0,Ue));var Cn=Ue;for(We=0;Ue!==He;)We+e[Ue]>Oe&&(Be.push(ke.slice(Cn,Ue)),We=0,Cn=Ue),We+=e[Ue],Ue++;return Cn!==Ue&&Be.push(ke.slice(Cn,Ue)),Be},Xt=function(ke,e,Te){Te||(Te={});var Oe,Be,Ue,He,We,Cn,An,En=[],Sn=[En],Tn=Te.textIndent||0,Ln=0,Bn=0,ei=ke.split(" "),ni=Gt.apply(this,[" ",Te])[0];if(Cn=Te.lineIndent===-1?ei[0].length+2:Te.lineIndent||0){var ti=Array(Cn).join(" "),ri=[];ei.map(function(ai){(ai=ai.split(/\s*\n/)).length>1?ri=ri.concat(ai.map(function(ci,Pi){return(Pi&&ci.length?`
`:"")+ci})):ri.push(ai[0])}),ei=ri,Cn=Yt.apply(this,[ti,Te])}for(Ue=0,He=ei.length;Ue<He;Ue++){var oi=0;if(Oe=ei[Ue],Cn&&Oe[0]==`
`&&(Oe=Oe.substr(1),oi=1),Tn+Ln+(Bn=(Be=Gt.apply(this,[Oe,Te])).reduce(function(ai,ci){return ai+ci},0))>e||oi){if(Bn>e){for(We=Jt.apply(this,[Oe,Be,e-(Tn+Ln),e]),En.push(We.shift()),En=[We.pop()];We.length;)Sn.push([We.shift()]);Bn=Be.slice(Oe.length-(En[0]?En[0].length:0)).reduce(function(ai,ci){return ai+ci},0)}else En=[Oe];Sn.push(En),Tn=Bn+Cn,Ln=ni}else En.push(Oe),Tn+=Ln+Bn,Ln=ni}return An=Cn?function(ai,ci){return(ci?ti:"")+ai.join(" ")}:function(ai){return ai.join(" ")},Sn.map(An)},Vt.splitTextToSize=function(ke,e,Te){var Oe,Be=(Te=Te||{}).fontSize||this.internal.getFontSize(),Ue=(function(En){if(En.widths&&En.kerning)return{widths:En.widths,kerning:En.kerning};var Sn=this.internal.getFont(En.fontName,En.fontStyle);return Sn.metadata.Unicode?{widths:Sn.metadata.Unicode.widths||{0:1},kerning:Sn.metadata.Unicode.kerning||{}}:{font:Sn.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,Te);Oe=Array.isArray(ke)?ke:String(ke).split(/\r?\n/);var He=1*this.internal.scaleFactor*e/Be;Ue.textIndent=Te.textIndent?1*Te.textIndent*this.internal.scaleFactor/Be:0,Ue.lineIndent=Te.lineIndent;var We,Cn,An=[];for(We=0,Cn=Oe.length;We<Cn;We++)An=An.concat(Xt.apply(this,[Oe[We],He,Ue]));return An},function(ke){ke.__fontmetrics__=ke.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",Te={},Oe={},Be=0;Be<e.length;Be++)Te[e[Be]]="0123456789abcdef"[Be],Oe["0123456789abcdef"[Be]]=e[Be];var Ue=function(Sn){return"0x"+parseInt(Sn,10).toString(16)},He=ke.__fontmetrics__.compress=function(Sn){var Tn,Ln,Bn,ei,ni=["{"];for(var ti in Sn){if(Tn=Sn[ti],isNaN(parseInt(ti,10))?Ln="'"+ti+"'":(ti=parseInt(ti,10),Ln=(Ln=Ue(ti).slice(2)).slice(0,-1)+Oe[Ln.slice(-1)]),typeof Tn=="number")Tn<0?(Bn=Ue(Tn).slice(3),ei="-"):(Bn=Ue(Tn).slice(2),ei=""),Bn=ei+Bn.slice(0,-1)+Oe[Bn.slice(-1)];else{if(_typeof(Tn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Tn)+".");Bn=He(Tn)}ni.push(Ln+Bn)}return ni.push("}"),ni.join("")},We=ke.__fontmetrics__.uncompress=function(Sn){if(typeof Sn!="string")throw new Error("Invalid argument passed to uncompress.");for(var Tn,Ln,Bn,ei,ni={},ti=1,ri=ni,oi=[],ai="",ci="",Pi=Sn.length-1,vi=1;vi<Pi;vi+=1)(ei=Sn[vi])=="'"?Tn?(Bn=Tn.join(""),Tn=void 0):Tn=[]:Tn?Tn.push(ei):ei=="{"?(oi.push([ri,Bn]),ri={},Bn=void 0):ei=="}"?((Ln=oi.pop())[0][Ln[1]]=ri,Bn=void 0,ri=Ln[0]):ei=="-"?ti=-1:Bn===void 0?Te.hasOwnProperty(ei)?(ai+=Te[ei],Bn=parseInt(ai,16)*ti,ti=1,ai=""):ai+=ei:Te.hasOwnProperty(ei)?(ci+=Te[ei],ri[Bn]=parseInt(ci,16)*ti,ti=1,Bn=void 0,ci=""):ci+=ei;return ni},Cn={codePages:["WinAnsiEncoding"],WinAnsiEncoding:We("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},An={Unicode:{Courier:Cn,"Courier-Bold":Cn,"Courier-BoldOblique":Cn,"Courier-Oblique":Cn,Helvetica:Cn,"Helvetica-Bold":Cn,"Helvetica-BoldOblique":Cn,"Helvetica-Oblique":Cn,"Times-Roman":Cn,"Times-Bold":Cn,"Times-BoldItalic":Cn,"Times-Italic":Cn}},En={Unicode:{"Courier-Oblique":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":We("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":We("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":We("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:We("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:We("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":We("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:We("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":We("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":We("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":We("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};ke.events.push(["addFont",function(Sn){var Tn=Sn.font,Ln=En.Unicode[Tn.postScriptName];Ln&&(Tn.metadata.Unicode={},Tn.metadata.Unicode.widths=Ln.widths,Tn.metadata.Unicode.kerning=Ln.kerning);var Bn=An.Unicode[Tn.postScriptName];Bn&&(Tn.metadata.Unicode.encoding=Bn,Tn.encoding=Bn.codePages[0])}])}(E.API),function(ke){var e=function(Te){for(var Oe=Te.length,Be=new Uint8Array(Oe),Ue=0;Ue<Oe;Ue++)Be[Ue]=Te.charCodeAt(Ue);return Be};ke.API.events.push(["addFont",function(Te){var Oe=void 0,Be=Te.font,Ue=Te.instance;if(!Be.isStandardFont){if(Ue===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Be.postScriptName+"').");if(typeof(Oe=Ue.existsFileInVFS(Be.postScriptName)===!1?Ue.loadFile(Be.postScriptName):Ue.getFileFromVFS(Be.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Be.postScriptName+"').");(function(He,We){We=/^\x00\x01\x00\x00/.test(We)?e(We):e(u(We)),He.metadata=ke.API.TTFFont.open(We),He.metadata.Unicode=He.metadata.Unicode||{encoding:{},kerning:{},widths:[]},He.metadata.glyIdsUsed=[0]})(Be,Oe)}}])}(E),function(ke){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-D3Dry0ie.js"),[])).catch(function(Te){return Promise.reject(new Error("Could not load canvg: "+Te))}).then(function(Te){return Te.default?Te.default:Te})}E.API.addSvgAsImage=function(Te,Oe,Be,Ue,He,We,Cn,An){if(isNaN(Oe)||isNaN(Be))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ue)||isNaN(He))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var En=document.createElement("canvas");En.width=Ue,En.height=He;var Sn=En.getContext("2d");Sn.fillStyle="#fff",Sn.fillRect(0,0,En.width,En.height);var Tn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ln=this;return e().then(function(Bn){return Bn.fromString(Sn,Te,Tn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Bn){return Bn.render(Tn)}).then(function(){Ln.addImage(En.toDataURL("image/jpeg",1),Oe,Be,Ue,He,Cn,An)})}}(),E.API.putTotalPages=function(ke){var e,Te=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(ke,"g"),Te=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(ke,this.internal.getFont()),"g"),Te=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Oe=1;Oe<=this.internal.getNumberOfPages();Oe++)for(var Be=0;Be<this.internal.pages[Oe].length;Be++)this.internal.pages[Oe][Be]=this.internal.pages[Oe][Be].replace(e,Te);return this},E.API.viewerPreferences=function(ke,e){var Te;ke=ke||{},e=e||!1;var Oe,Be,Ue,He={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},We=Object.keys(He),Cn=[],An=0,En=0,Sn=0;function Tn(Bn,ei){var ni,ti=!1;for(ni=0;ni<Bn.length;ni+=1)Bn[ni]===ei&&(ti=!0);return ti}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(He)),this.internal.viewerpreferences.isSubscribed=!1),Te=this.internal.viewerpreferences.configuration,ke==="reset"||e===!0){var Ln=We.length;for(Sn=0;Sn<Ln;Sn+=1)Te[We[Sn]].value=Te[We[Sn]].defaultValue,Te[We[Sn]].explicitSet=!1}if(_typeof(ke)==="object"){for(Be in ke)if(Ue=ke[Be],Tn(We,Be)&&Ue!==void 0){if(Te[Be].type==="boolean"&&typeof Ue=="boolean")Te[Be].value=Ue;else if(Te[Be].type==="name"&&Tn(Te[Be].valueSet,Ue))Te[Be].value=Ue;else if(Te[Be].type==="integer"&&Number.isInteger(Ue))Te[Be].value=Ue;else if(Te[Be].type==="array"){for(An=0;An<Ue.length;An+=1)if(Oe=!0,Ue[An].length===1&&typeof Ue[An][0]=="number")Cn.push(String(Ue[An]-1));else if(Ue[An].length>1){for(En=0;En<Ue[An].length;En+=1)typeof Ue[An][En]!="number"&&(Oe=!1);Oe===!0&&Cn.push([Ue[An][0]-1,Ue[An][1]-1].join(" "))}Te[Be].value="["+Cn.join(" ")+"]"}else Te[Be].value=Te[Be].defaultValue;Te[Be].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Bn,ei=[];for(Bn in Te)Te[Bn].explicitSet===!0&&(Te[Bn].type==="name"?ei.push("/"+Bn+" /"+Te[Bn].value):ei.push("/"+Bn+" "+Te[Bn].value));ei.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+ei.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=Te,this},function(ke){var e=function(){var Oe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Be=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ue=unescape(encodeURIComponent(Oe)),He=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),We=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Cn=unescape(encodeURIComponent("</x:xmpmeta>")),An=Ue.length+He.length+We.length+Be.length+Cn.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+An+" >>"),this.internal.write("stream"),this.internal.write(Be+Ue+He+We+Cn),this.internal.write("endstream"),this.internal.write("endobj")},Te=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};ke.addMetadata=function(Oe,Be){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Oe,namespaceuri:Be||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",Te),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(ke){var e=ke.API,Te=e.pdfEscape16=function(Ue,He){for(var We,Cn=He.metadata.Unicode.widths,An=["","0","00","000","0000"],En=[""],Sn=0,Tn=Ue.length;Sn<Tn;++Sn){if(We=He.metadata.characterToGlyph(Ue.charCodeAt(Sn)),He.metadata.glyIdsUsed.push(We),He.metadata.toUnicode[We]=Ue.charCodeAt(Sn),Cn.indexOf(We)==-1&&(Cn.push(We),Cn.push([parseInt(He.metadata.widthOfGlyph(We),10)])),We=="0")return En.join("");We=We.toString(16),En.push(An[4-We.length],We)}return En.join("")},Oe=function(Ue){var He,We,Cn,An,En,Sn,Tn;for(En=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Cn=[],Sn=0,Tn=(We=Object.keys(Ue).sort(function(Ln,Bn){return Ln-Bn})).length;Sn<Tn;Sn++)He=We[Sn],Cn.length>=100&&(En+=`
`+Cn.length+` beginbfchar
`+Cn.join(`
`)+`
endbfchar`,Cn=[]),Ue[He]!==void 0&&Ue[He]!==null&&typeof Ue[He].toString=="function"&&(An=("0000"+Ue[He].toString(16)).slice(-4),He=("0000"+(+He).toString(16)).slice(-4),Cn.push("<"+He+"><"+An+">"));return Cn.length&&(En+=`
`+Cn.length+` beginbfchar
`+Cn.join(`
`)+`
endbfchar
`),En+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ue){(function(He){var We=He.font,Cn=He.out,An=He.newObject,En=He.putStream;if(We.metadata instanceof ke.API.TTFFont&&We.encoding==="Identity-H"){for(var Sn=We.metadata.Unicode.widths,Tn=We.metadata.subset.encode(We.metadata.glyIdsUsed,1),Ln="",Bn=0;Bn<Tn.length;Bn++)Ln+=String.fromCharCode(Tn[Bn]);var ei=An();En({data:Ln,addLength1:!0,objectId:ei}),Cn("endobj");var ni=An();En({data:Oe(We.metadata.toUnicode),addLength1:!0,objectId:ni}),Cn("endobj");var ti=An();Cn("<<"),Cn("/Type /FontDescriptor"),Cn("/FontName /"+F(We.fontName)),Cn("/FontFile2 "+ei+" 0 R"),Cn("/FontBBox "+ke.API.PDFObject.convert(We.metadata.bbox)),Cn("/Flags "+We.metadata.flags),Cn("/StemV "+We.metadata.stemV),Cn("/ItalicAngle "+We.metadata.italicAngle),Cn("/Ascent "+We.metadata.ascender),Cn("/Descent "+We.metadata.decender),Cn("/CapHeight "+We.metadata.capHeight),Cn(">>"),Cn("endobj");var ri=An();Cn("<<"),Cn("/Type /Font"),Cn("/BaseFont /"+F(We.fontName)),Cn("/FontDescriptor "+ti+" 0 R"),Cn("/W "+ke.API.PDFObject.convert(Sn)),Cn("/CIDToGIDMap /Identity"),Cn("/DW 1000"),Cn("/Subtype /CIDFontType2"),Cn("/CIDSystemInfo"),Cn("<<"),Cn("/Supplement 0"),Cn("/Registry (Adobe)"),Cn("/Ordering ("+We.encoding+")"),Cn(">>"),Cn(">>"),Cn("endobj"),We.objectNumber=An(),Cn("<<"),Cn("/Type /Font"),Cn("/Subtype /Type0"),Cn("/ToUnicode "+ni+" 0 R"),Cn("/BaseFont /"+F(We.fontName)),Cn("/Encoding /"+We.encoding),Cn("/DescendantFonts ["+ri+" 0 R]"),Cn(">>"),Cn("endobj"),We.isAlreadyPutted=!0}})(Ue)}]),e.events.push(["putFont",function(Ue){(function(He){var We=He.font,Cn=He.out,An=He.newObject,En=He.putStream;if(We.metadata instanceof ke.API.TTFFont&&We.encoding==="WinAnsiEncoding"){for(var Sn=We.metadata.rawData,Tn="",Ln=0;Ln<Sn.length;Ln++)Tn+=String.fromCharCode(Sn[Ln]);var Bn=An();En({data:Tn,addLength1:!0,objectId:Bn}),Cn("endobj");var ei=An();En({data:Oe(We.metadata.toUnicode),addLength1:!0,objectId:ei}),Cn("endobj");var ni=An();Cn("<<"),Cn("/Descent "+We.metadata.decender),Cn("/CapHeight "+We.metadata.capHeight),Cn("/StemV "+We.metadata.stemV),Cn("/Type /FontDescriptor"),Cn("/FontFile2 "+Bn+" 0 R"),Cn("/Flags 96"),Cn("/FontBBox "+ke.API.PDFObject.convert(We.metadata.bbox)),Cn("/FontName /"+F(We.fontName)),Cn("/ItalicAngle "+We.metadata.italicAngle),Cn("/Ascent "+We.metadata.ascender),Cn(">>"),Cn("endobj"),We.objectNumber=An();for(var ti=0;ti<We.metadata.hmtx.widths.length;ti++)We.metadata.hmtx.widths[ti]=parseInt(We.metadata.hmtx.widths[ti]*(1e3/We.metadata.head.unitsPerEm));Cn("<</Subtype/TrueType/Type/Font/ToUnicode "+ei+" 0 R/BaseFont/"+F(We.fontName)+"/FontDescriptor "+ni+" 0 R/Encoding/"+We.encoding+" /FirstChar 29 /LastChar 255 /Widths "+ke.API.PDFObject.convert(We.metadata.hmtx.widths)+">>"),Cn("endobj"),We.isAlreadyPutted=!0}})(Ue)}]);var Be=function(Ue){var He,We=Ue.text||"",Cn=Ue.x,An=Ue.y,En=Ue.options||{},Sn=Ue.mutex||{},Tn=Sn.pdfEscape,Ln=Sn.activeFontKey,Bn=Sn.fonts,ei=Ln,ni="",ti=0,ri="",oi=Bn[ei].encoding;if(Bn[ei].encoding!=="Identity-H")return{text:We,x:Cn,y:An,options:En,mutex:Sn};for(ri=We,ei=Ln,Array.isArray(We)&&(ri=We[0]),ti=0;ti<ri.length;ti+=1)Bn[ei].metadata.hasOwnProperty("cmap")&&(He=Bn[ei].metadata.cmap.unicode.codeMap[ri[ti].charCodeAt(0)]),He||ri[ti].charCodeAt(0)<256&&Bn[ei].metadata.hasOwnProperty("Unicode")?ni+=ri[ti]:ni+="";var ai="";return parseInt(ei.slice(1))<14||oi==="WinAnsiEncoding"?ai=Tn(ni,ei).split("").map(function(ci){return ci.charCodeAt(0).toString(16)}).join(""):oi==="Identity-H"&&(ai=Te(ni,Bn[ei])),Sn.isHex=!0,{text:ai,x:Cn,y:An,options:En,mutex:Sn}};e.events.push(["postProcessText",function(Ue){var He=Ue.text||"",We=[],Cn={text:He,x:Ue.x,y:Ue.y,options:Ue.options,mutex:Ue.mutex};if(Array.isArray(He)){var An=0;for(An=0;An<He.length;An+=1)Array.isArray(He[An])&&He[An].length===3?We.push([Be(Object.assign({},Cn,{text:He[An][0]})).text,He[An][1],He[An][2]]):We.push(Be(Object.assign({},Cn,{text:He[An]})).text);Ue.text=We}else Ue.text=Be(Object.assign({},Cn,{text:He})).text}])}(E),function(ke){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};ke.existsFileInVFS=function(Te){return e.call(this),this.internal.vFS[Te]!==void 0},ke.addFileToVFS=function(Te,Oe){return e.call(this),this.internal.vFS[Te]=Oe,this},ke.getFileFromVFS=function(Te){return e.call(this),this.internal.vFS[Te]!==void 0?this.internal.vFS[Te]:null}}(E.API),function(ke){ke.__bidiEngine__=ke.prototype.__bidiEngine__=function(Oe){var Be,Ue,He,We,Cn,An,En,Sn=e,Tn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ln=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Bn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},ei={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},ni=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ti=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ri=!1,oi=0;this.__bidiEngine__={};var ai=function(fi){var ui=fi.charCodeAt(),Oi=ui>>8,Ni=ei[Oi];return Ni!==void 0?Sn[256*Ni+(255&ui)]:Oi===252||Oi===253?"AL":ti.test(Oi)?"L":Oi===8?"R":"N"},ci=function(fi){for(var ui,Oi=0;Oi<fi.length;Oi++){if((ui=ai(fi.charAt(Oi)))==="L")return!1;if(ui==="R")return!0}return!1},Pi=function(fi,ui,Oi,Ni){var nr,er,cr,ar,pr=ui[Ni];switch(pr){case"L":case"R":ri=!1;break;case"N":case"AN":break;case"EN":ri&&(pr="AN");break;case"AL":ri=!0,pr="R";break;case"WS":pr="N";break;case"CS":Ni<1||Ni+1>=ui.length||(nr=Oi[Ni-1])!=="EN"&&nr!=="AN"||(er=ui[Ni+1])!=="EN"&&er!=="AN"?pr="N":ri&&(er="AN"),pr=er===nr?er:"N";break;case"ES":pr=(nr=Ni>0?Oi[Ni-1]:"B")==="EN"&&Ni+1<ui.length&&ui[Ni+1]==="EN"?"EN":"N";break;case"ET":if(Ni>0&&Oi[Ni-1]==="EN"){pr="EN";break}if(ri){pr="N";break}for(cr=Ni+1,ar=ui.length;cr<ar&&ui[cr]==="ET";)cr++;pr=cr<ar&&ui[cr]==="EN"?"EN":"N";break;case"NSM":if(He&&!We){for(ar=ui.length,cr=Ni+1;cr<ar&&ui[cr]==="NSM";)cr++;if(cr<ar){var rr=fi[Ni],br=rr>=1425&&rr<=2303||rr===64286;if(nr=ui[cr],br&&(nr==="R"||nr==="AL")){pr="R";break}}}pr=Ni<1||(nr=ui[Ni-1])==="B"?"N":Oi[Ni-1];break;case"B":ri=!1,Be=!0,pr=oi;break;case"S":Ue=!0,pr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ri=!1;break;case"BN":pr="N"}return pr},vi=function(fi,ui,Oi){var Ni=fi.split("");return Oi&&pi(Ni,Oi,{hiLevel:oi}),Ni.reverse(),ui&&ui.reverse(),Ni.join("")},pi=function(fi,ui,Oi){var Ni,nr,er,cr,ar,pr=-1,rr=fi.length,br=0,Li=[],ur=oi?Ln:Tn,sr=[];for(ri=!1,Be=!1,Ue=!1,nr=0;nr<rr;nr++)sr[nr]=ai(fi[nr]);for(er=0;er<rr;er++){if(ar=br,Li[er]=Pi(fi,sr,Li,er),Ni=240&(br=ur[ar][Bn[Li[er]]]),br&=15,ui[er]=cr=ur[br][5],Ni>0)if(Ni===16){for(nr=pr;nr<er;nr++)ui[nr]=1;pr=-1}else pr=-1;if(ur[br][6])pr===-1&&(pr=er);else if(pr>-1){for(nr=pr;nr<er;nr++)ui[nr]=cr;pr=-1}sr[er]==="B"&&(ui[er]=0),Oi.hiLevel|=cr}Ue&&function(dr,vr,hr){for(var mr=0;mr<hr;mr++)if(dr[mr]==="S"){vr[mr]=oi;for(var _r=mr-1;_r>=0&&dr[_r]==="WS";_r--)vr[_r]=oi}}(sr,ui,rr)},Mi=function(fi,ui,Oi,Ni,nr){if(!(nr.hiLevel<fi)){if(fi===1&&oi===1&&!Be)return ui.reverse(),void(Oi&&Oi.reverse());for(var er,cr,ar,pr,rr=ui.length,br=0;br<rr;){if(Ni[br]>=fi){for(ar=br+1;ar<rr&&Ni[ar]>=fi;)ar++;for(pr=br,cr=ar-1;pr<cr;pr++,cr--)er=ui[pr],ui[pr]=ui[cr],ui[cr]=er,Oi&&(er=Oi[pr],Oi[pr]=Oi[cr],Oi[cr]=er);br=ar}br++}}},Fi=function(fi,ui,Oi){var Ni=fi.split(""),nr={hiLevel:oi};return Oi||(Oi=[]),pi(Ni,Oi,nr),function(er,cr,ar){if(ar.hiLevel!==0&&En)for(var pr,rr=0;rr<er.length;rr++)cr[rr]===1&&(pr=ni.indexOf(er[rr]))>=0&&(er[rr]=ni[pr+1])}(Ni,Oi,nr),Mi(2,Ni,ui,Oi,nr),Mi(1,Ni,ui,Oi,nr),Ni.join("")};return this.__bidiEngine__.doBidiReorder=function(fi,ui,Oi){if(function(nr,er){if(er)for(var cr=0;cr<nr.length;cr++)er[cr]=cr;We===void 0&&(We=ci(nr)),An===void 0&&(An=ci(nr))}(fi,ui),He||!Cn||An)if(He&&Cn&&We^An)oi=We?1:0,fi=vi(fi,ui,Oi);else if(!He&&Cn&&An)oi=We?1:0,fi=Fi(fi,ui,Oi),fi=vi(fi,ui);else if(!He||We||Cn||An){if(He&&!Cn&&We^An)fi=vi(fi,ui),We?(oi=0,fi=Fi(fi,ui,Oi)):(oi=1,fi=Fi(fi,ui,Oi),fi=vi(fi,ui));else if(He&&We&&!Cn&&An)oi=1,fi=Fi(fi,ui,Oi),fi=vi(fi,ui);else if(!He&&!Cn&&We^An){var Ni=En;We?(oi=1,fi=Fi(fi,ui,Oi),oi=0,En=!1,fi=Fi(fi,ui,Oi),En=Ni):(oi=0,fi=Fi(fi,ui,Oi),fi=vi(fi,ui),oi=1,En=!1,fi=Fi(fi,ui,Oi),En=Ni,fi=vi(fi,ui))}}else oi=0,fi=Fi(fi,ui,Oi);else oi=We?1:0,fi=Fi(fi,ui,Oi);return fi},this.__bidiEngine__.setOptions=function(fi){fi&&(He=fi.isInputVisual,Cn=fi.isOutputVisual,We=fi.isInputRtl,An=fi.isOutputRtl,En=fi.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Oe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],Te=new ke.__bidiEngine__({isInputVisual:!0});ke.API.events.push(["postProcessText",function(Oe){var Be=Oe.text,Ue=(Oe.x,Oe.y,Oe.options||{}),He=(Oe.mutex,Ue.lang,[]);if(Ue.isInputVisual=typeof Ue.isInputVisual!="boolean"||Ue.isInputVisual,Te.setOptions(Ue),Object.prototype.toString.call(Be)==="[object Array]"){var We=0;for(He=[],We=0;We<Be.length;We+=1)Object.prototype.toString.call(Be[We])==="[object Array]"?He.push([Te.doBidiReorder(Be[We][0]),Be[We][1],Be[We][2]]):He.push([Te.doBidiReorder(Be[We])]);Oe.text=He}else Oe.text=Te.doBidiReorder(Be);Te.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function ke(e){var Te;if(this.rawData=e,Te=this.contents=new ne(e),this.contents.pos=4,Te.readString(4)==="ttcf")throw new Error("TTCF not supported.");Te.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return ke.open=function(e){return new ke(e)},ke.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},ke.prototype.registerTTF=function(){var e,Te,Oe,Be,Ue;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var He,We,Cn,An;for(An=[],He=0,We=(Cn=this.bbox).length;He<We;He++)e=Cn[He],An.push(Math.round(e*this.scaleFactor));return An}).call(this),this.stemV=0,this.post.exists?(Oe=255&(Be=this.post.italic_angle),32768&(Te=Be>>16)&&(Te=-(1+(65535^Te))),this.italicAngle=+(Te+"."+Oe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ue=this.familyClass)===1||Ue===2||Ue===3||Ue===4||Ue===5||Ue===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},ke.prototype.characterToGlyph=function(e){var Te;return((Te=this.cmap.unicode)!=null?Te.codeMap[e]:void 0)||0},ke.prototype.widthOfGlyph=function(e){var Te;return Te=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*Te},ke.prototype.widthOfString=function(e,Te,Oe){var Be,Ue,He,We;for(He=0,Ue=0,We=(e=""+e).length;0<=We?Ue<We:Ue>We;Ue=0<=We?++Ue:--Ue)Be=e.charCodeAt(Ue),He+=this.widthOfGlyph(this.characterToGlyph(Be))+Oe*(1e3/Te)||0;return He*(Te/1e3)},ke.prototype.lineHeight=function(e,Te){var Oe;return Te==null&&(Te=!1),Oe=Te?this.lineGap:0,(this.ascender+Oe-this.decender)/1e3*e},ke}();var re,ne=function(){function ke(e){this.data=e??[],this.pos=0,this.length=this.data.length}return ke.prototype.readByte=function(){return this.data[this.pos++]},ke.prototype.writeByte=function(e){return this.data[this.pos++]=e},ke.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},ke.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},ke.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},ke.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},ke.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},ke.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},ke.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},ke.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},ke.prototype.readString=function(e){var Te,Oe;for(Oe=[],Te=0;0<=e?Te<e:Te>e;Te=0<=e?++Te:--Te)Oe[Te]=String.fromCharCode(this.readByte());return Oe.join("")},ke.prototype.writeString=function(e){var Te,Oe,Be;for(Be=[],Te=0,Oe=e.length;0<=Oe?Te<Oe:Te>Oe;Te=0<=Oe?++Te:--Te)Be.push(this.writeByte(e.charCodeAt(Te)));return Be},ke.prototype.readShort=function(){return this.readInt16()},ke.prototype.writeShort=function(e){return this.writeInt16(e)},ke.prototype.readLongLong=function(){var e,Te,Oe,Be,Ue,He,We,Cn;return e=this.readByte(),Te=this.readByte(),Oe=this.readByte(),Be=this.readByte(),Ue=this.readByte(),He=this.readByte(),We=this.readByte(),Cn=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^Te)+1099511627776*(255^Oe)+4294967296*(255^Be)+16777216*(255^Ue)+65536*(255^He)+256*(255^We)+(255^Cn)+1):72057594037927940*e+281474976710656*Te+1099511627776*Oe+4294967296*Be+16777216*Ue+65536*He+256*We+Cn},ke.prototype.writeLongLong=function(e){var Te,Oe;return Te=Math.floor(e/4294967296),Oe=4294967295&e,this.writeByte(Te>>24&255),this.writeByte(Te>>16&255),this.writeByte(Te>>8&255),this.writeByte(255&Te),this.writeByte(Oe>>24&255),this.writeByte(Oe>>16&255),this.writeByte(Oe>>8&255),this.writeByte(255&Oe)},ke.prototype.readInt=function(){return this.readInt32()},ke.prototype.writeInt=function(e){return this.writeInt32(e)},ke.prototype.read=function(e){var Te,Oe;for(Te=[],Oe=0;0<=e?Oe<e:Oe>e;Oe=0<=e?++Oe:--Oe)Te.push(this.readByte());return Te},ke.prototype.write=function(e){var Te,Oe,Be,Ue;for(Ue=[],Oe=0,Be=e.length;Oe<Be;Oe++)Te=e[Oe],Ue.push(this.writeByte(Te));return Ue},ke}(),ie=function(){var ke;function e(Te){var Oe,Be,Ue;for(this.scalarType=Te.readInt(),this.tableCount=Te.readShort(),this.searchRange=Te.readShort(),this.entrySelector=Te.readShort(),this.rangeShift=Te.readShort(),this.tables={},Be=0,Ue=this.tableCount;0<=Ue?Be<Ue:Be>Ue;Be=0<=Ue?++Be:--Be)Oe={tag:Te.readString(4),checksum:Te.readInt(),offset:Te.readInt(),length:Te.readInt()},this.tables[Oe.tag]=Oe}return e.prototype.encode=function(Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei;for(ei in Ln=Object.keys(Te).length,Cn=Math.log(2),Sn=16*Math.floor(Math.log(Ln)/Cn),He=Math.floor(Sn/Cn),En=16*Ln-Sn,(Be=new ne).writeInt(this.scalarType),Be.writeShort(Ln),Be.writeShort(Sn),Be.writeShort(He),Be.writeShort(En),Ue=16*Ln,An=Be.pos+Ue,We=null,Bn=[],Te)for(Tn=Te[ei],Be.writeString(ei),Be.writeInt(ke(Tn)),Be.writeInt(An),Be.writeInt(Tn.length),Bn=Bn.concat(Tn),ei==="head"&&(We=An),An+=Tn.length;An%4;)Bn.push(0),An++;return Be.write(Bn),Oe=2981146554-ke(Be.data),Be.pos=We+8,Be.writeUInt32(Oe),Be.data},ke=function(Te){var Oe,Be,Ue,He;for(Te=ve.call(Te);Te.length%4;)Te.push(0);for(Ue=new ne(Te),Be=0,Oe=0,He=Te.length;Oe<He;Oe=Oe+=4)Be+=Ue.readUInt32();return 4294967295&Be},e}(),ae={}.hasOwnProperty,oe=function(ke,e){for(var Te in e)ae.call(e,Te)&&(ke[Te]=e[Te]);function Oe(){this.constructor=ke}return Oe.prototype=e.prototype,ke.prototype=new Oe,ke.__super__=e.prototype,ke};re=function(){function ke(e){var Te;this.file=e,Te=this.file.directory.tables[this.tag],this.exists=!!Te,Te&&(this.offset=Te.offset,this.length=Te.length,this.parse(this.file.contents))}return ke.prototype.parse=function(){},ke.prototype.encode=function(){},ke.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},ke}();var se=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.revision=Te.readInt(),this.checkSumAdjustment=Te.readInt(),this.magicNumber=Te.readInt(),this.flags=Te.readShort(),this.unitsPerEm=Te.readShort(),this.created=Te.readLongLong(),this.modified=Te.readLongLong(),this.xMin=Te.readShort(),this.yMin=Te.readShort(),this.xMax=Te.readShort(),this.yMax=Te.readShort(),this.macStyle=Te.readShort(),this.lowestRecPPEM=Te.readShort(),this.fontDirectionHint=Te.readShort(),this.indexToLocFormat=Te.readShort(),this.glyphDataFormat=Te.readShort()},e.prototype.encode=function(Te){var Oe;return(Oe=new ne).writeInt(this.version),Oe.writeInt(this.revision),Oe.writeInt(this.checkSumAdjustment),Oe.writeInt(this.magicNumber),Oe.writeShort(this.flags),Oe.writeShort(this.unitsPerEm),Oe.writeLongLong(this.created),Oe.writeLongLong(this.modified),Oe.writeShort(this.xMin),Oe.writeShort(this.yMin),Oe.writeShort(this.xMax),Oe.writeShort(this.yMax),Oe.writeShort(this.macStyle),Oe.writeShort(this.lowestRecPPEM),Oe.writeShort(this.fontDirectionHint),Oe.writeShort(Te),Oe.writeShort(this.glyphDataFormat),Oe.data},e}(),ce=function(){function ke(e,Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=Te+e.readInt(),Sn=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Cn=0;Cn<256;++Cn)this.codeMap[Cn]=e.readByte();break;case 4:for(Ln=e.readUInt16(),Tn=Ln/2,e.pos+=6,Ue=function(){var ai,ci;for(ci=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)ci.push(e.readUInt16());return ci}(),e.pos+=2,ei=function(){var ai,ci;for(ci=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)ci.push(e.readUInt16());return ci}(),An=function(){var ai,ci;for(ci=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)ci.push(e.readUInt16());return ci}(),En=function(){var ai,ci;for(ci=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)ci.push(e.readUInt16());return ci}(),Be=(this.length-e.pos+this.offset)/2,We=function(){var ai,ci;for(ci=[],Cn=ai=0;0<=Be?ai<Be:ai>Be;Cn=0<=Be?++ai:--ai)ci.push(e.readUInt16());return ci}(),Cn=ti=0,oi=Ue.length;ti<oi;Cn=++ti)for(ni=Ue[Cn],Oe=ri=Bn=ei[Cn];Bn<=ni?ri<=ni:ri>=ni;Oe=Bn<=ni?++ri:--ri)En[Cn]===0?He=Oe+An[Cn]:(He=We[En[Cn]/2+(Oe-Bn)-(Tn-Cn)]||0)!==0&&(He+=An[Cn]),this.codeMap[Oe]=65535&He}e.pos=Sn}return ke.encode=function(e,Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti,ri,oi,ai,ci,Pi,vi,pi,Mi,Fi,fi,ui,Oi,Ni,nr,er,cr,ar,pr,rr,br,Li,ur,sr,dr,vr,hr,mr,_r,Ar,Vr,Gr;switch(Ni=new ne,He=Object.keys(e).sort(function(Hi,gr){return Hi-gr}),Te){case"macroman":for(ei=0,ni=function(){var Hi=[];for(Bn=0;Bn<256;++Bn)Hi.push(0);return Hi}(),ri={0:0},Ue={},nr=0,pr=He.length;nr<pr;nr++)ri[_r=e[Be=He[nr]]]==null&&(ri[_r]=++ei),Ue[Be]={old:e[Be],new:ri[e[Be]]},ni[Be]=ri[e[Be]];return Ni.writeUInt16(1),Ni.writeUInt16(0),Ni.writeUInt32(12),Ni.writeUInt16(0),Ni.writeUInt16(262),Ni.writeUInt16(0),Ni.write(ni),{charMap:Ue,subtable:Ni.data,maxGlyphID:ei+1};case"unicode":for(ui=[],Sn=[],oi=0,ri={},Oe={},ti=An=null,er=0,rr=He.length;er<rr;er++)ri[ci=e[Be=He[er]]]==null&&(ri[ci]=++oi),Oe[Be]={old:ci,new:ri[ci]},We=ri[ci]-Be,ti!=null&&We===An||(ti&&Sn.push(ti),ui.push(Be),An=We),ti=Be;for(ti&&Sn.push(ti),Sn.push(65535),ui.push(65535),Fi=2*(Mi=ui.length),pi=2*Math.pow(Math.log(Mi)/Math.LN2,2),Tn=Math.log(pi/2)/Math.LN2,vi=2*Mi-pi,Cn=[],Pi=[],Ln=[],Bn=cr=0,br=ui.length;cr<br;Bn=++cr){if(fi=ui[Bn],En=Sn[Bn],fi===65535){Cn.push(0),Pi.push(0);break}if(fi-(Oi=Oe[fi].new)>=32768)for(Cn.push(0),Pi.push(2*(Ln.length+Mi-Bn)),Be=ar=fi;fi<=En?ar<=En:ar>=En;Be=fi<=En?++ar:--ar)Ln.push(Oe[Be].new);else Cn.push(Oi-fi),Pi.push(0)}for(Ni.writeUInt16(3),Ni.writeUInt16(1),Ni.writeUInt32(12),Ni.writeUInt16(4),Ni.writeUInt16(16+8*Mi+2*Ln.length),Ni.writeUInt16(0),Ni.writeUInt16(Fi),Ni.writeUInt16(pi),Ni.writeUInt16(Tn),Ni.writeUInt16(vi),hr=0,Li=Sn.length;hr<Li;hr++)Be=Sn[hr],Ni.writeUInt16(Be);for(Ni.writeUInt16(0),mr=0,ur=ui.length;mr<ur;mr++)Be=ui[mr],Ni.writeUInt16(Be);for(Ar=0,sr=Cn.length;Ar<sr;Ar++)We=Cn[Ar],Ni.writeUInt16(We);for(Vr=0,dr=Pi.length;Vr<dr;Vr++)ai=Pi[Vr],Ni.writeUInt16(ai);for(Gr=0,vr=Ln.length;Gr<vr;Gr++)ei=Ln[Gr],Ni.writeUInt16(ei);return{charMap:Oe,subtable:Ni.data,maxGlyphID:oi+1}}},ke}(),ue=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(Te){var Oe,Be,Ue;for(Te.pos=this.offset,this.version=Te.readUInt16(),Ue=Te.readUInt16(),this.tables=[],this.unicode=null,Be=0;0<=Ue?Be<Ue:Be>Ue;Be=0<=Ue?++Be:--Be)Oe=new ce(Te,this.offset),this.tables.push(Oe),Oe.isUnicode&&this.unicode==null&&(this.unicode=Oe);return!0},e.encode=function(Te,Oe){var Be,Ue;return Oe==null&&(Oe="macroman"),Be=ce.encode(Te,Oe),(Ue=new ne).writeUInt16(0),Ue.writeUInt16(1),Be.table=Ue.data.concat(Be.subtable),Be},e}(),he=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.ascender=Te.readShort(),this.decender=Te.readShort(),this.lineGap=Te.readShort(),this.advanceWidthMax=Te.readShort(),this.minLeftSideBearing=Te.readShort(),this.minRightSideBearing=Te.readShort(),this.xMaxExtent=Te.readShort(),this.caretSlopeRise=Te.readShort(),this.caretSlopeRun=Te.readShort(),this.caretOffset=Te.readShort(),Te.pos+=8,this.metricDataFormat=Te.readShort(),this.numberOfMetrics=Te.readUInt16()},e}(),le=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(Te){if(Te.pos=this.offset,this.version=Te.readUInt16(),this.averageCharWidth=Te.readShort(),this.weightClass=Te.readUInt16(),this.widthClass=Te.readUInt16(),this.type=Te.readShort(),this.ySubscriptXSize=Te.readShort(),this.ySubscriptYSize=Te.readShort(),this.ySubscriptXOffset=Te.readShort(),this.ySubscriptYOffset=Te.readShort(),this.ySuperscriptXSize=Te.readShort(),this.ySuperscriptYSize=Te.readShort(),this.ySuperscriptXOffset=Te.readShort(),this.ySuperscriptYOffset=Te.readShort(),this.yStrikeoutSize=Te.readShort(),this.yStrikeoutPosition=Te.readShort(),this.familyClass=Te.readShort(),this.panose=function(){var Oe,Be;for(Be=[],Oe=0;Oe<10;++Oe)Be.push(Te.readByte());return Be}(),this.charRange=function(){var Oe,Be;for(Be=[],Oe=0;Oe<4;++Oe)Be.push(Te.readInt());return Be}(),this.vendorID=Te.readString(4),this.selection=Te.readShort(),this.firstCharIndex=Te.readShort(),this.lastCharIndex=Te.readShort(),this.version>0&&(this.ascent=Te.readShort(),this.descent=Te.readShort(),this.lineGap=Te.readShort(),this.winAscent=Te.readShort(),this.winDescent=Te.readShort(),this.codePageRange=function(){var Oe,Be;for(Be=[],Oe=0;Oe<2;Oe=++Oe)Be.push(Te.readInt());return Be}(),this.version>1))return this.xHeight=Te.readShort(),this.capHeight=Te.readShort(),this.defaultChar=Te.readShort(),this.breakChar=Te.readShort(),this.maxContext=Te.readShort()},e}(),fe=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(Te){var Oe,Be,Ue;switch(Te.pos=this.offset,this.format=Te.readInt(),this.italicAngle=Te.readInt(),this.underlinePosition=Te.readShort(),this.underlineThickness=Te.readShort(),this.isFixedPitch=Te.readInt(),this.minMemType42=Te.readInt(),this.maxMemType42=Te.readInt(),this.minMemType1=Te.readInt(),this.maxMemType1=Te.readInt(),this.format){case 65536:break;case 131072:var He;for(Be=Te.readUInt16(),this.glyphNameIndex=[],He=0;0<=Be?He<Be:He>Be;He=0<=Be?++He:--He)this.glyphNameIndex.push(Te.readUInt16());for(this.names=[],Ue=[];Te.pos<this.offset+this.length;)Oe=Te.readByte(),Ue.push(this.names.push(Te.readString(Oe)));return Ue;case 151552:return Be=Te.readUInt16(),this.offsets=Te.read(Be);case 196608:break;case 262144:return this.map=(function(){var We,Cn,An;for(An=[],He=We=0,Cn=this.file.maxp.numGlyphs;0<=Cn?We<Cn:We>Cn;He=0<=Cn?++We:--We)An.push(Te.readUInt32());return An}).call(this)}},e}(),de=function(ke,e){this.raw=ke,this.length=ke.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln;for(Te.pos=this.offset,Te.readShort(),Oe=Te.readShort(),Cn=Te.readShort(),Be=[],He=0;0<=Oe?He<Oe:He>Oe;He=0<=Oe?++He:--He)Be.push({platformID:Te.readShort(),encodingID:Te.readShort(),languageID:Te.readShort(),nameID:Te.readShort(),length:Te.readShort(),offset:this.offset+Cn+Te.readShort()});for(An={},He=Sn=0,Tn=Be.length;Sn<Tn;He=++Sn)Ue=Be[He],Te.pos=Ue.offset,En=Te.readString(Ue.length),We=new de(En,Ue),An[Ln=Ue.nameID]==null&&(An[Ln]=[]),An[Ue.nameID].push(We);this.strings=An,this.copyright=An[0],this.fontFamily=An[1],this.fontSubfamily=An[2],this.uniqueSubfamily=An[3],this.fontName=An[4],this.version=An[5];try{this.postscriptName=An[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=An[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=An[7],this.manufacturer=An[8],this.designer=An[9],this.description=An[10],this.vendorUrl=An[11],this.designerUrl=An[12],this.license=An[13],this.licenseUrl=An[14],this.preferredFamily=An[15],this.preferredSubfamily=An[17],this.compatibleFull=An[18],this.sampleText=An[19]},e}(),ge=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.numGlyphs=Te.readUInt16(),this.maxPoints=Te.readUInt16(),this.maxContours=Te.readUInt16(),this.maxCompositePoints=Te.readUInt16(),this.maxComponentContours=Te.readUInt16(),this.maxZones=Te.readUInt16(),this.maxTwilightPoints=Te.readUInt16(),this.maxStorage=Te.readUInt16(),this.maxFunctionDefs=Te.readUInt16(),this.maxInstructionDefs=Te.readUInt16(),this.maxStackElements=Te.readUInt16(),this.maxSizeOfInstructions=Te.readUInt16(),this.maxComponentElements=Te.readUInt16(),this.maxComponentDepth=Te.readUInt16()},e}(),me=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(Te){var Oe,Be,Ue,He,We,Cn,An;for(Te.pos=this.offset,this.metrics=[],Oe=0,Cn=this.file.hhea.numberOfMetrics;0<=Cn?Oe<Cn:Oe>Cn;Oe=0<=Cn?++Oe:--Oe)this.metrics.push({advance:Te.readUInt16(),lsb:Te.readInt16()});for(Ue=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var En,Sn;for(Sn=[],Oe=En=0;0<=Ue?En<Ue:En>Ue;Oe=0<=Ue?++En:--En)Sn.push(Te.readInt16());return Sn}(),this.widths=(function(){var En,Sn,Tn,Ln;for(Ln=[],En=0,Sn=(Tn=this.metrics).length;En<Sn;En++)He=Tn[En],Ln.push(He.advance);return Ln}).call(this),Be=this.widths[this.widths.length-1],An=[],Oe=We=0;0<=Ue?We<Ue:We>Ue;Oe=0<=Ue?++We:--We)An.push(this.widths.push(Be));return An},e.prototype.forGlyph=function(Te){return Te in this.metrics?this.metrics[Te]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[Te-this.metrics.length]}},e}(),ve=[].slice,be=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn;return Te in this.cache?this.cache[Te]:(He=this.file.loca,Oe=this.file.contents,Be=He.indexOf(Te),(Ue=He.lengthOf(Te))===0?this.cache[Te]=null:(Oe.pos=this.offset+Be,We=(Cn=new ne(Oe.read(Ue))).readShort(),En=Cn.readShort(),Tn=Cn.readShort(),An=Cn.readShort(),Sn=Cn.readShort(),this.cache[Te]=We===-1?new we(Cn,En,Tn,An,Sn):new ye(Cn,We,En,Tn,An,Sn),this.cache[Te]))},e.prototype.encode=function(Te,Oe,Be){var Ue,He,We,Cn,An;for(We=[],He=[],Cn=0,An=Oe.length;Cn<An;Cn++)Ue=Te[Oe[Cn]],He.push(We.length),Ue&&(We=We.concat(Ue.encode(Be)));return He.push(We.length),{table:We,offsets:He}},e}(),ye=function(){function ke(e,Te,Oe,Be,Ue,He){this.raw=e,this.numberOfContours=Te,this.xMin=Oe,this.yMin=Be,this.xMax=Ue,this.yMax=He,this.compound=!1}return ke.prototype.encode=function(){return this.raw.data},ke}(),we=function(){function ke(e,Te,Oe,Be,Ue){var He,We;for(this.raw=e,this.xMin=Te,this.yMin=Oe,this.xMax=Be,this.yMax=Ue,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],He=this.raw;We=He.readShort(),this.glyphOffsets.push(He.pos),this.glyphIDs.push(He.readUInt16()),32&We;)He.pos+=1&We?4:2,128&We?He.pos+=8:64&We?He.pos+=4:8&We&&(He.pos+=2)}return ke.prototype.encode=function(){var e,Te,Oe;for(Te=new ne(ve.call(this.raw.data)),e=0,Oe=this.glyphIDs.length;e<Oe;++e)Te.pos=this.glyphOffsets[e];return Te.data},ke}(),Ne=function(ke){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(Te){var Oe,Be;return Te.pos=this.offset,Oe=this.file.head.indexToLocFormat,this.offsets=Oe===0?(function(){var Ue,He;for(He=[],Be=0,Ue=this.length;Be<Ue;Be+=2)He.push(2*Te.readUInt16());return He}).call(this):(function(){var Ue,He;for(He=[],Be=0,Ue=this.length;Be<Ue;Be+=4)He.push(Te.readUInt32());return He}).call(this)},e.prototype.indexOf=function(Te){return this.offsets[Te]},e.prototype.lengthOf=function(Te){return this.offsets[Te+1]-this.offsets[Te]},e.prototype.encode=function(Te,Oe){for(var Be=new Uint32Array(this.offsets.length),Ue=0,He=0,We=0;We<Be.length;++We)if(Be[We]=Ue,He<Oe.length&&Oe[He]==We){++He,Be[We]=Ue;var Cn=this.offsets[We],An=this.offsets[We+1]-Cn;An>0&&(Ue+=An)}for(var En=new Array(4*Be.length),Sn=0;Sn<Be.length;++Sn)En[4*Sn+3]=255&Be[Sn],En[4*Sn+2]=(65280&Be[Sn])>>8,En[4*Sn+1]=(16711680&Be[Sn])>>16,En[4*Sn]=(4278190080&Be[Sn])>>24;return En},e}(),Le=function(){function ke(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return ke.prototype.generateCmap=function(){var e,Te,Oe,Be,Ue;for(Te in Be=this.font.cmap.tables[0].codeMap,e={},Ue=this.subset)Oe=Ue[Te],e[Te]=Be[Oe];return e},ke.prototype.glyphsFor=function(e){var Te,Oe,Be,Ue,He,We,Cn;for(Be={},He=0,We=e.length;He<We;He++)Be[Ue=e[He]]=this.font.glyf.glyphFor(Ue);for(Ue in Te=[],Be)(Oe=Be[Ue])!=null&&Oe.compound&&Te.push.apply(Te,Oe.glyphIDs);if(Te.length>0)for(Ue in Cn=this.glyphsFor(Te))Oe=Cn[Ue],Be[Ue]=Oe;return Be},ke.prototype.encode=function(e,Te){var Oe,Be,Ue,He,We,Cn,An,En,Sn,Tn,Ln,Bn,ei,ni,ti;for(Be in Oe=ue.encode(this.generateCmap(),"unicode"),He=this.glyphsFor(e),Ln={0:0},ti=Oe.charMap)Ln[(Cn=ti[Be]).old]=Cn.new;for(Bn in Tn=Oe.maxGlyphID,He)Bn in Ln||(Ln[Bn]=Tn++);return En=function(ri){var oi,ai;for(oi in ai={},ri)ai[ri[oi]]=oi;return ai}(Ln),Sn=Object.keys(En).sort(function(ri,oi){return ri-oi}),ei=function(){var ri,oi,ai;for(ai=[],ri=0,oi=Sn.length;ri<oi;ri++)We=Sn[ri],ai.push(En[We]);return ai}(),Ue=this.font.glyf.encode(He,ei,Ln),An=this.font.loca.encode(Ue.offsets,ei),ni={cmap:this.font.cmap.raw(),glyf:Ue.table,loca:An,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(Te)},this.font.os2.exists&&(ni["OS/2"]=this.font.os2.raw()),this.font.directory.encode(ni)},ke}();E.API.PDFObject=function(){var ke;function e(){}return ke=function(Te,Oe){return(Array(Oe+1).join("0")+Te).slice(-Oe)},e.convert=function(Te){var Oe,Be,Ue,He;if(Array.isArray(Te))return"["+function(){var We,Cn,An;for(An=[],We=0,Cn=Te.length;We<Cn;We++)Oe=Te[We],An.push(e.convert(Oe));return An}().join(" ")+"]";if(typeof Te=="string")return"/"+Te;if(Te!=null&&Te.isString)return"("+Te+")";if(Te instanceof Date)return"(D:"+ke(Te.getUTCFullYear(),4)+ke(Te.getUTCMonth(),2)+ke(Te.getUTCDate(),2)+ke(Te.getUTCHours(),2)+ke(Te.getUTCMinutes(),2)+ke(Te.getUTCSeconds(),2)+"Z)";if({}.toString.call(Te)==="[object Object]"){for(Be in Ue=["<<"],Te)He=Te[Be],Ue.push("/"+Be+" "+e.convert(He));return Ue.push(">>"),Ue.join(`
`)}return""+Te},e}();const _hoisted_1$5={class:"mt-10"},_hoisted_2$3={class:"print-preview-container"},__default__$5={},_sfc_main$9=Object.assign(__default__$5,{__name:"PrintModal",props:{visibility:Boolean,printOptions:Object},setup(ke,{expose:e}){useCssVars(pr=>({"6f67f528":unref(er),"2765ae41":unref(nr),"03aea05c":ni,"602ad150":unref(Ni),"139959d5":unref(Oi),c1f4adaa:unref(ui)}));const Te=useEulerian(),Oe=useMapStore(),Be=inject("selectedLayers"),Ue="Imprimer une carte",He="xl",We=[{label:"Portrait",value:"portrait",icon:"md-cropportrait-sharp"},{label:"Paysage",value:"landscape",icon:"md-croplandscape-sharp"}],Cn=ref(!1),An=()=>{Cn.value=!0,Te.pause()},En=()=>{Cn.value=!1,Te.resume()};e({onModalPrintClose:En,onModalPrintOpen:An});const Sn=ref(null),Tn=ref(null),Ln=ref(null),Bn=ref(null),ei=ref(null),ni="10px",ti=.264583333,ri=ref(!0),oi=ref(!1),ai=ref("Ma carte"),ci=ref("portrait"),Pi=ref(0),vi=ref("A4"),pi=computed(()=>{let pr={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};return{width:pr[vi.value].width,height:pr[vi.value].height}}),Mi=reactive(useElementSize(Ln,{width:0,height:0},{box:"border-box"})),Fi=reactive(useElementSize(Bn,{width:0,height:0},{box:"border-box"})),fi=reactive(useElementSize(Tn,{width:0,height:0},{box:"border-box"})),ui=computed(()=>{if(ci.value=="portrait")return Math.floor((Mi.height-fi.height)*ti)/pi.value.height;if(ci.value=="landscape"){let pr=Math.floor((Mi.width-Fi.width-parseInt(ni))*ti)/pi.value.height;return pi.value.height*pr+fi.height<Mi.height?Math.floor((Mi.height-fi.height)*ti)/pi.value.width:pr}}),Oi=computed(()=>{if(ci.value=="portrait")return pi.value.height+"mm";if(ci.value=="landscape")return pi.value.width+"mm"}),Ni=computed(()=>{if(ci.value=="portrait")return pi.value.width+"mm";if(ci.value=="landscape")return pi.value.height+"mm"}),nr=computed(()=>Mi.height+"px"),er=computed(()=>{if(ci.value=="portrait")return pi.value.width*ui.value/ti+"px";if(ci.value=="landscape")return pi.value.height*ui.value/ti+"px"}),cr=()=>{const pr={orientation:ci.value,unit:"mm",format:[parseInt(Oi.value),parseInt(Ni.value)]},rr=new E(pr),br=parseInt(Pi.value),Li=Sn.value.mapRef.getElementsByTagName("canvas")[0].width,ur=Sn.value.mapRef.getElementsByTagName("canvas")[0].height,sr=Sn.value.mapRef.getElementsByTagName("canvas")[0];if(Sn.value.mapRef.getElementsByTagName("canvas").length<2){var dr=document.createElement("canvas");dr.classList=["fixedoverlay"],dr.width=Li,dr.height=ur,Sn.value.mapRef.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",dr)}else var dr=Sn.value.mapRef.getElementsByTagName("canvas")[1];dr.style.display="none",dr.getContext("2d").reset();const hr=sr.toDataURL("image/png"),mr=Li*ti-br*2,_r=(ur-fi.height)*ti-br*2,Ar=br,Vr=fi.height*ti+br;if(rr.addImage(hr,"PNG",Ar,Vr,mr,_r),ri.value){const Gr=Sn.value.mapRef.getElementsByClassName("ol-scale-line")[0],Hi=Gr.children[0],gr=getComputedStyle(Gr),lr=getComputedStyle(Hi),Ki=parseInt(gr.left),Dr=parseInt(gr.bottom),Nr=Hi.innerHTML,Ir=parseInt(lr.width),kr=parseInt(lr.lineHeight),Lr=ur-Dr-kr,Pr=dr.getContext("2d");Pr.beginPath(),Pr.fillStyle="rgba(255, 255, 255, 0.75)",Pr.rect(Ki,Lr,Ir,kr),Pr.fillRect(Ki,Lr,Ir,kr),Pr.font=lr.font,Pr.textAlign="center",Pr.fillStyle="#000000",Pr.fillText(Nr,Ki+Ir/2,Lr+kr/2),Pr.beginPath(),Pr.moveTo(Ki,Lr),Pr.lineTo(Ki,Lr+kr),Pr.lineTo(Ki,Lr+kr),Pr.lineTo(Ki+Ir,Lr+kr),Pr.lineTo(Ki+Ir,Lr),Pr.lineWidth=1,Pr.lineCap="round",Pr.strokeStyle="#666666",Pr.stroke();const Er=dr.toDataURL("image/png");rr.addImage(Er,"PNG",Ar,Vr,mr,_r)}rr.save("carte.pdf")},ar={id:"4",units:"metric",bar:!1};return(pr,rr)=>{const br=Ji,Li=ld,ur=lt$2,sr=Ie,dr=_sfc_main$v,vr=_sfc_main$P,hr=Vt$1;return openBlock(),createBlock(hr,{opened:unref(Cn),title:Ue,size:He,onClose:En},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:Ln,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:Bn,class:"print-form"},[createVNode(br,{inline:!1,modelValue:unref(ci),"onUpdate:modelValue":rr[0]||(rr[0]=mr=>isRef(ci)?ci.value=mr:null),options:We,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>rr[3]||(rr[3]=[createTextVNode("Mise en Page")])),_:1},8,["modelValue"]),createVNode(Li,{modelValue:unref(vi),"onUpdate:modelValue":rr[1]||(rr[1]=mr=>isRef(vi)?vi.value=mr:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createBaseVNode("div",_hoisted_1$5,[createVNode(ur,{modelValue:unref(ri),"onUpdate:modelValue":rr[2]||(rr[2]=mr=>isRef(ri)?ri.value=mr:null),name:"checkbox-simple",label:unref(ri)?"Dsactiver l'chelle":"Afficher l'chelle"},null,8,["modelValue","label"])]),createVNode(sr,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:cr})],512),createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",{ref_key:"printPreview",ref:ei,class:"print-preview"},[unref(oi)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:Tn,class:"map-title"},toDisplayString(unref(ai)),513)):createCommentVNode("",!0),unref(Cn)?(openBlock(),createBlock(_sfc_main$U,{key:1,class:"map",ref_key:"refMap",ref:Sn,"map-Id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$T,{"map-Id":unref(printMap),center:unref(Oe).center,zoom:unref(Oe).zoom},null,8,["map-Id","center","zoom"]),createVNode(dr,{"map-Id":unref(printMap),"selected-layers":unref(Be)},null,8,["map-Id","selected-layers"]),createVNode(vr,{visibility:unref(ri),"scale-line-options":ar,"map-id":unref(printMap)},null,8,["visibility","map-id"])]),_:1},8,["map-Id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])}}}),PrintModal=_export_sfc(_sfc_main$9,[["__scopeId","data-v-89871f69"]]),_hoisted_1$4={id:"map-and-tools-container"},_hoisted_2$2={class:"modal-container"},_sfc_main$8=defineComponent({__name:"CartoAndTools",setup(ke){const e=useMapStore(),Te=useDataStore(),Oe=ref({}),Be=ref({}),Ue=ref({}),He=ref({});provide("refModalPrint",He),provide("refModalShare",Ue);const We=()=>{Ue.value.onModalShareOpen()},Cn=()=>{Oe.value.openModalTheme()},An=()=>{He.value.onModalPrintOpen()},En=()=>{Be.value.openModalLogin()},Sn=computed(()=>e.getLayers().map(ei=>{var ni=Te.getLayerByID(ei),ti=e.getLayerProperty(ei);return ni.opacity=ti.opacity,ni.visible=ti.visible,ni.gray=ti.gray,ni})),Tn=computed(()=>e.getControls()),Ln=ref(null);return provide("selectedLayers",Sn),(Bn,ei)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(LeftMenuTool,{onOnModalShareOpen:We,onOnModalPrintOpen:An,onOnModalThemeOpen:Cn,onOnModalLoginOpen:En}),createVNode(Carto,{ref_key:"cartoRef",ref:Ln,"selected-layers":unref(Sn),"selected-controls":unref(Tn)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,{"selected-layers":unref(Sn),"selected-controls":unref(Tn)},null,8,["selected-layers","selected-controls"]),createBaseVNode("div",_hoisted_2$2,[createVNode(_sfc_main$X,{ref_key:"refModalTheme",ref:Oe},null,512),createVNode(PrintModal,{ref_key:"refModalPrint",ref:He},null,512),createVNode(ShareModal,{ref_key:"refModalShare",ref:Ue},null,512),createVNode(_sfc_main$c,{ref_key:"refModalLogin",ref:Be},null,512)])]))}}),CartoAndTools=_export_sfc(_sfc_main$8,[["__scopeId","data-v-a318085e"]]),_sfc_main$7={},_hoisted_1$3={class:"loader"};function _sfc_render(ke,e){return openBlock(),createElementBlock("span",_hoisted_1$3)}const Patience=_export_sfc(_sfc_main$7,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$6={__name:"StoreData",props:{},async setup(ke){let e,Te;const Oe=dist.useLogger(),Be=useDataStore(),{fetchData:Ue}=Be,He=([e,Te]=withAsyncContext(()=>Ue()),e=await e,Te(),e);return Oe.debug(He),(We,Cn)=>unref(Be).isLoaded&&!unref(Be).error?renderSlot(We.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$4={},_sfc_main$5=Object.assign(__default__$4,{__name:"ModalInformation",setup(ke){const e=useEulerian(),Te=useMapStore(),Be=useDataStore().getInformations(),Ue=Be.title,He=Be.description,We=Be.type,Cn=Be.version,An=ref(Be.opened&&Cn!==parseInt(Te.noInformation,10));An.value&&e.pause();const En=()=>{An.value=!1,e.resume()},Sn=()=>{An.value=!1,Te.noInformation=Cn,e.resume()};return(Tn,Ln)=>{const Bn=Sa,ei=Vt$1;return openBlock(),createBlock(ei,{opened:unref(An),title:unref(Ue),size:"md",onClose:En},{default:withCtx(()=>[createVNode(Bn,{description:unref(He),type:unref(We)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:Sn},Ln[0]||(Ln[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$2={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$4=defineComponent({__name:"Load",setup(ke){return(e,Te)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(_sfc_main$5)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1$1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__$3={},_sfc_main$3=Object.assign(__default__$3,{__name:"Embed",setup(ke){const e=useMapStore(),Te=useDataStore(),Oe=computed(()=>e.getLayers().map(Cn=>{var An=Te.getLayerByID(Cn),En=e.getLayerProperty(Cn);return An.opacity=En.opacity,An.visible=En.visible,An.gray=En.gray,An})),Be=["ScaleLine","Zoom"];function Ue(){var We=document.querySelector(".fr-header");We.classList.add("gpf-hidden")}function He(){var We=document.querySelector(".fr-footer");We.classList.add("gpf-hidden")}return onMounted(()=>{Ue(),He()}),(We,Cn)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(Carto,{"selected-layers":unref(Oe),"selected-controls":Be},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),__default__$2={},_sfc_main$2=Object.assign(__default__$2,{__name:"Login",setup(ke){const e=useRouter(),Te=inject("services");return onMounted(()=>{const Oe=location.search,Be=new URLSearchParams(Oe);var Ue=Be.get("code"),He=Be.get("session_state"),We=Be.get("state"),Cn=Be.get("success"),An=Be.get("authentication_failed");if(!Oe){Te.getAccessLogin().then(Sn=>{location.href=Sn});return}var En=0;Te.mode==="local"&&Ue&&He&&We?En=1:Te.mode==="remote"&&An!==null?En=parseInt(An,10):Te.mode==="remote"&&Cn!==null?En=parseInt(Cn,10):En=0,e.push({path:"/",query:{from:"login",success:En}})}),(Oe,Be)=>renderSlot(Oe.$slots,"default")}}),__default__$1={},_sfc_main$1=Object.assign(__default__$1,{__name:"Logout",setup(ke){const e=useRouter(),Te=inject("services");return onMounted(()=>{const Oe=location.search,Be=new URLSearchParams(Oe);var Ue=Be.get("session_state"),He=Be.get("success");if(!Oe){Te.getAccessLogout().then(Cn=>{location.href=Cn});return}var We=0;Te.mode==="local"&&Ue?We=1:Te.mode==="remote"&&He!==null?We=parseInt(He,10):We=0,e.push({path:"/",query:{from:"logout",success:We}})}),(Oe,Be)=>renderSlot(Oe.$slots,"default")}}),_hoisted_1={class:"fr-container fr-p-2w"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Bookmarks",setup(ke){useRouter(),inject("services");const e="Favoris",Te="Not yet implemented !";return onBeforeMount(()=>{}),onMounted(()=>{}),(Oe,Be)=>{const Ue=Sa;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",null,toDisplayString(e)),createVNode(Ue,{type:"info",title:"Information",description:Te,closed:!1,closeable:!1})]),renderSlot(Oe.$slots,"default")],64)}}}),MAIN_TITLE="Le service public des cartes et donnes du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/embed",name:"Carte embarque",component:_sfc_main$3},{path:"/login",name:"Se connecter",component:_sfc_main$2},{path:"/logout",name:"Se deconnecter",component:_sfc_main$1},{path:"/bookmarks",name:"Favoris",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(ke=>{if(ke.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(ke.href),!1;const e=ke.meta.title?`${ke.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});async function waitingPrepareApp(){return Promise.resolve()}var storage=localStorage.getItem("service");const services=createServices(storage?JSON.parse(storage).connexion:{}),eulerian=createEulerian({verbose:!0,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia(),notivue=createNotivue$1({position:"bottom-center",limit:10,enqueue:!0,avoidDuplicates:!1,notifications:{global:{duration:3e3}}}),bus=createBusEvent(),store=storePlugin({stores:["service"],storage:localStorage});pinia.use(store);const app=createApp(_sfc_main$V);app.use(pinia);app.use(router);app.use(logger);app.use(eulerian);app.use(services);app.use(notivue);app.use(bus);waitingPrepareApp().then(()=>{app.mount("#app")});export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g};
//# sourceMappingURL=index-BwqgyME5.js.map
