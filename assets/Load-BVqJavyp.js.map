{"version":3,"file":"Load-BVqJavyp.js","sources":["../../src/components/menu/MenuLateralWrapper.vue","../../src/components/menu/MenuLateralNavButton.vue","../../src/components/menu/MenuTierce.vue","../../src/components/menu/bookmarks/MenuBookMarkNoData.vue","../../src/components/menu/bookmarks/MenuBookMarkEntry.vue","../../src/components/menu/bookmarks/MenuBookMarkDataList.vue","../../src/components/menu/bookmarks/MenuBookMarkLoggued.vue","../../src/components/menu/MenuBookMarks.vue","../../src/components/menu/LeftMenuTool.vue","../../src/components/menu/ControlListElement.vue","../../src/components/menu/MenuControl.vue","../../src/components/menu/RightMenuTool.vue","../../src/components/modals/ModalLogin.vue","../../src/components/utils/TextCopyToClipboard.vue","../../src/components/carte/control/ShareModal.vue","../../src/components/modals/ModalSave.vue","../../src/components/modals/ModalWelcome.vue","../../src/components/CartoAndTools.vue","../../src/components/modals/ModalInformation.vue","../../src/views/Load.vue"],"sourcesContent":["<script lang=\"js\">\n  /**\n   * @description\n   *\n   * @property { String } side position sur la carte du menu : valeur possible 'left' ou 'right'\n   * @property { Boolean } visibility  boolean assurant l'activation du menu\n   * @property { Number } width  largeur du menu déplié, défaut 550\n   * @property { Number } padding  padding à gauche et à droite, défaut 30\n   *\n   */\n  export default {\n    name: 'MenuLateralWrapper'\n  };\n</script>\n\n<script setup lang=\"js\">\nimport { VIcon } from '@gouvminint/vue-dsfr'\nimport { useMapStore } from \"@/stores/mapStore\";\nimport { useControlsPosition } from '@/composables/controls';\n\nconst mapStore = useMapStore();\nconst rightControls = useControlsPosition().right;\nconst hasControls = computed(() => {\n  return mapStore.getControls().filter(c => rightControls.includes(c)).length > 3;\n})\nconst props = defineProps({\n  side: String,\n  visibility: Boolean,\n  id: String,\n  width: Number,\n  padding: Number\n})\nconst icon = \"fr-icon-close-line\"\n\nconst widthValue = props.width || 550\nconst paddingValue = props.padding || 30\nconst is_expanded = defineModel(false)\nconst widthMenu = ref(widthValue)\nconst padding = ref(paddingValue)\nconst cssWidthMenu = computed(() => {\n  return widthMenu.value + \"px\";\n})\nconst cssPadding = computed(() => {\n  return padding.value + \"px\";\n})\nconst cssWidthMenuContent = computed(() => {\n  return widthMenu.value - padding.value + \"px\";\n})\n\nconst menuTabs = ref()\n\nfunction closeMenu() {\n  is_expanded.value = false\n}\nfunction openMenu() {\n  // cas particulier des fenêtres d'annotation\n    const closeButton1 = document.querySelector('.gp-label-div button.GPpanelClose');\n    if (closeButton1) {\n      closeButton1.click();\n    }\n    const closeButton2 = document.querySelector('.gp-styling-div button.GPpanelClose');\n    if (closeButton2) {\n      closeButton2.click();\n    }\n  is_expanded.value = true\n}\n\ndefineExpose({\n  widthMenu,\n  closeMenu,\n  openMenu\n})\n</script>\n\n<template>\n  <div\n    v-if=\"visibility\"\n    class=\"menu-toggle-wrap\"\n    :class=\"`${is_expanded && 'is_expanded'} ${props.side}`\"\n  >\n    <div\n      ref=\"menuTabs\"\n      class=\"menu-logo-list\"\n    >\n      <slot name=\"navButtons\" />\n    </div>\n\n    <div\n      v-show=\"is_expanded\"\n      class=\"menu-content-list\"\n    >\n      <div class=\"menu-collapse-icon-wrapper\">\n        <DsfrButton\n          :id=\"props.id\"\n          tertiary\n          no-outline\n          class=\"menu-collapse-icon\"\n          @click=\"closeMenu\"\n        >\n          Fermer\n          <span\n            :class=\"icon\" \n            aria-hidden=\"true\"\n          />\n        </DsfrButton>\n      </div>\n\n      <div class=\"menu-content\">\n        <slot name=\"content\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n  .left .navButton[aria-label]:hover::before {\n    padding: .5rem .5rem 0.5rem 1.25rem;\n    background-size: .375rem .5rem,.375rem .5rem,1px, 100%,calc(100% - 0.5rem) 100%;\n    background-position: 0.125rem 50%, 0% 50%,0.375rem 100%,0.375rem 100%;\n    background-image: conic-gradient(from 56.31deg at 0% 50%,transparent 0deg,var(--background-overlap-grey) 0deg,var(--background-overlap-grey) 67.38deg,transparent 67.38deg),conic-gradient(from 56.31deg at 0% 50%,transparent 0deg,var(--border-default-grey) 0deg,var(--border-default-grey) 67.38deg,transparent 67.38deg),linear-gradient(90deg,var(--border-default-grey),var(--border-default-grey)),linear-gradient(90deg,var(--background-overlap-grey),var(--background-overlap-grey));\n    transform: translateX(32px);\n  }\n\n  .right .navButton[aria-label]:hover::before {\n    transform: translateX(calc(-100% - 8px));\n    padding: .5rem 1.25rem .5rem .5rem;\n    background-size: .375rem .5rem, .375rem .5rem, 1px 100%, 100%;\n    background-position: calc(100% - 0.125rem) 50%, 100% 50%, calc(100% - 0.375rem) 0, calc(100% - 0.375rem) 0;\n    background-image: conic-gradient(from 236.31deg at 100% 50%, transparent 0deg, var(--background-overlap-grey) 0deg, var(--background-overlap-grey) 67.38deg, transparent 67.38deg), conic-gradient(from 236.31deg at 100% 50%, transparent 0deg, var(--border-default-grey) 0deg, var(--border-default-grey) 67.38deg, transparent 67.38deg), linear-gradient(90deg, var(--border-default-grey), var(--border-default-grey)), linear-gradient(90deg, var(--background-overlap-grey), var(--background-overlap-grey));\n  }\n\n  .navButton[aria-label]:hover .vicon {\n    position: absolute;\n  }\n</style>\n\n<style scoped lang=\"scss\">\n.left {\n  .menu-logo-list {\n    left: 10px;\n  }\n  .menu-content-list {\n    left: 60px;\n  }\n}\n.right {\n  .menu-logo-list {\n    right: 16px;\n  // hack pour positionnement du layer switcher\n    ::v-deep(div:has(> #MenuControl)) {\n      padding-top: 106px; /* ajoute un grand espace avant MenuControl */\n      @media (max-width: 576px){\n        padding-top: 102px; /* ajoute un grand espace avant MenuControl */\n      }\n      }\n    ::v-deep(button[id=\"MenuControl\"]) {\n          border-bottom-left-radius: v-bind(\"hasControls ? '0px' : '4px'\");\n          border-bottom-right-radius: v-bind(\"hasControls ? '0px' : '4px'\");\n      }\n  }\n  .menu-content-list {\n    right: 60px;\n  }\n}\n\n.menu-collapse-icon {\n    margin-bottom: 20px;\n    &:hover{\n      color : var(--text-action-high-blue-france);\n    }\n}\n\n.menu-collapse-icon-wrapper{\n  text-align: right;\n  margin-right: 10px;\n  margin-top: 10px;\n}\n\n.menu-toggle-wrap {\n    height: calc(76.8vh - 24px);\n    z-index: 1;\n    &.is_expanded {\n      // passe par dessus les controls openlayers\n      z-index: 4000;\n      .menu-content-list {\n        width: v-bind(cssWidthMenu);\n      }\n    }\n}\n\n.menu-content-list {\n  height: inherit;\n  background-color: var(--background-default-grey);\n  padding-left: v-bind(cssPadding);\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n}\n.menu-content {\n  width : v-bind(cssWidthMenuContent);\n}\n.menu-logo-list {\n  flex-direction: column;\n  display: flex;\n  row-gap: 4px;\n  margin-top: 12px;\n  width: 40px;\n  position: absolute;\n  pointer-events: none;\n  // hack pour positionnement du layer switcher\n  ::v-deep(button) {\n    pointer-events: all;\n  }\n}\n\n/* FIXME : le bouton widget n'est pas intégré à la grille des widgets\nOn gère donc sa position de manière absolue\nEn mode petit écran on le positionne tout en haut en attendant mieux */\n@media (max-width: 382px) {\n  .menu-logo-list {\n    margin-top: 210px;\n  }\n}\n\n@media (max-width: 576px){\n  .menu-logo-list {\n    margin-top: 63px;\n  }\n\n}\n\n/* Petits écrans */\n@media (max-width: 576px) {\n  // FIXME : on cache les bouton \"rouage\" et \"catalogue\" si la recherche avancée est ouverte ou si les résultats d'autocompletion sont visibles\n  #mainMap:has(dialog[id^=\"GPadvancedSearchPanel\"].GPelementVisible) ~ .menu-toggle-wrap > .menu-logo-list,\n  .menu-toggle-wrap:has(~ #mainMap dialog[id^=\"GPadvancedSearchPanel\"].GPelementVisible) > .menu-logo-list,\n  #mainMap:has(.GPautoCompleteList.GPelementVisible) ~ .menu-toggle-wrap > .menu-logo-list,\n  .menu-toggle-wrap:has(~ #mainMap .GPautoCompleteList.GPelementVisible) > .menu-logo-list {\n    display : none;\n  }\n}\n\n@media (max-width: 627px) {\n  // FIXME : on cache les bouton \"rouage\" et \"catalogue\" si un menu latéral est ouvert.\n  // Cette instruction contourne le css scopé pour selectionner le menu suivant (tild) si le menu scopé est expanded\n  .menu-toggle-wrap:has(~ .menu-toggle-wrap.is_expanded) > .menu-logo-list,\n  .menu-toggle-wrap.is_expanded ~ .menu-toggle-wrap > .menu-logo-list {\n    display : none;\n  }\n\n  /* Les panels de gestion des widgets et du catalogue prennent toute la largeur\n  sur petits écrans (<627px de large) et passent au dessus du reste */\n  .menu-toggle-wrap {\n    z-index: 1001;\n    &.is_expanded {\n      .menu-content-list {\n        width: 100%;\n      }\n    }\n  }\n\n  .left {\n    .menu-content-list {\n      left: 0px;\n    }\n  }\n\n  .right {\n    .menu-content-list {\n      right: 0px;\n    }\n  }\n}\n</style>\n","<script lang=\"js\">\n  /**\n   * @description\n   *\n   * @property { String | Object } icon nom de l'icône à afficher\n   * @property { String } id du menu à ouvrir au clic sur l'icône\n   * @property { Boolean } active boolean assurant le style actif ou inactif du bouton\n   * @property { Boolean } title label du bouton\n   *\n   */\n  export default {\n    name: 'MenuLateralButton'\n  };\n</script>\n\n<script setup lang=\"js\">\nimport { useControlsPosition } from '@/composables/controls'\nimport { useMapStore } from \"@/stores/mapStore\"\nimport { useDomStore } from \"@/stores/domStore\"\n\nconst mapStore = useMapStore();\nconst domStore = useDomStore();\n\nconst props = defineProps({\n    icon: {\n        type: [String, Object],\n        default: ''\n    },\n    id: String,\n    active: Boolean,\n    title: String,\n    side: String,\n    visibility: Boolean,\n    secondary: Boolean\n})\n\nconst icon = props.icon\n\nconst emit = defineEmits(['tabClicked'])\n\nconst tabClicked = () => {\n  if(props.side == \"left\") {\n      closeLeftPanels()\n  }\n  if(props.side == \"right\") {\n    closeRightPanels()\n  }\n  emit(\"tabClicked\", props.id);\n}\n\nconst controlsPosition = useControlsPosition()\n\nfunction closePanel(control) {\n  let button = [...control.element.children].filter(e => {\n  if (e.className.includes(\"GPshowOpen\"))\n      return e\n  })\n  if (button[0].getAttribute(\"aria-pressed\") === \"true\")\n    button[0].click()\n}\nfunction closeRightPanels(event) {\n  mapStore.getMap().getControls().getArray().forEach(control => {\n    if (controlsPosition.right.includes(control.CLASSNAME)) {\n      closePanel(control)\n    }\n  })\n}\nfunction closeLeftPanels() {\n  mapStore.getMap().getControls().getArray().forEach(control => {\n    if (controlsPosition.left.includes(control.CLASSNAME)) {\n      closePanel(control)\n    }\n  })\n}\n\nfunction clickButton() {\n  console.log(\"click on button\" + props.id)\n  button.value.children[0].click()\n}\nconst button = ref(null)\nconst id = ref(props.id)\ndefineExpose({\n  clickButton,\n  button,\n  id\n})\n\nonMounted(() => {\n  if (props.id == \"MenuCatalogue\") {\n    domStore.setmenuCatalogueButton(button.value)\n  }\n})\n</script>\n\n<template>\n  <div ref=\"button\">\n    <DsfrButton\n      :id=\"id\"\n      :secondary=\"secondary\"\n      :aria-label=\"title\"\n      :class=\"`${active ? 'active': ''}  navBarIcon ${visibility ? '' : 'invisibleNavButton'} navButton` \"\n      :icon=\"icon\"\n      :icon-only=\"true\"\n      @click=\"tabClicked\"\n    />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.noclick {\n    pointer-events: none;\n}\n\n.navButton {\n  width: 40px;\n  height: 40px;\n  border-radius: 4px;\n  box-shadow: var(--raised-shadow);\n}\n\n.navButton.fr-btn--secondary {\n  background-color: var(--background-default-grey);\n}\n\n.invisibleNavButton {\n  display: none;\n}\n\n.navButton[aria-label]:hover::before {\n  content: attr(aria-label);\n  position: relative;\n  top: 0;\n  color: var(--text-default-grey);\n  font-size: .75rem;\n  width: fit-content;\n  white-space: nowrap;\n  background-repeat: no-repeat;\n  filter: drop-shadow(0 2px 6px rgba(0,0,18,.16));\n  filter: drop-shadow(var(--overlap-shadow));\n}\n\n</style>\n","<script lang=\"js\">\n  /**\n   * @description\n   * Menu de liens vers différents contenu\n   * 1- ouverture d'un widget extension (ex : layerImport)\n   * 2- ouverture d'une modal (ex: Print, parmaètres d'affichage)\n   * 3- panel menuWrapper (ex: mes enregistrements)\n   *\n   * Les interactions pour ouvrir et fermer les fenêtres sont spécifiques à chacun de ces cas.\n   *\n   */\n  export default {\n    name: 'MenuTierce'\n  };\n</script>\n\n<script setup lang=\"js\">\nimport { useMapStore } from \"@/stores/mapStore\"\nimport { useDomStore } from \"@/stores/domStore\"\n\nconst emitter = inject('emitter');\n\nconst domStore = useDomStore();\nconst mapStore = useMapStore();\n\nconst emit = defineEmits([\n  'openControl',\n  'onModalShareOpen',\n  'onModalPrintOpen',\n  'onBookMarksOpen'\n]);\n\nconst isCompact = ref(domStore.getIsHeaderCompact())\n\nfunction onOpenControlReporting() {\n  // on active le controle\n  mapStore.addControl(\"Reporting\");\n  // envoi d'un evenement pour l'ouverture du contrôle\n  setTimeout(() => {\n    emitter.dispatchEvent(\"reporting:open:clicked\", {\n      open : true,\n      componentName: \"Reporting\"\n    });\n    emit(\"openControl\");\n  }, 0);\n}\n\nfunction openControl(controlName) {\n  mapStore.getMap().getControls().getArray().forEach(control => {\n    if (control.CLASSNAME === controlName) {\n      let button = [...control.element.children].filter((e) => {\n        if (e.className.includes(\"GPshowOpen\"))\n            return e;\n        })\n        button[0].click();\n        emit(\"openControl\");\n      }\n  })\n}\n\nfunction onToggleHeaderCompact() {\n  isCompact.value = !isCompact.value\n  domStore.setIsHeaderCompact(isCompact.value);\n}\n\nconst icon = \"mingcute:file-import-line\"\nconst defaultScale = 0.8325;\nconst iconProps = computed(() => typeof icon === 'string'\n  ? { scale: defaultScale.value, name: icon }\n  : { scale: defaultScale.value, ...icon },\n);\n\n// INFO\n// on active / desactive le bouton \"Mes enregistrements\" selon\n// si on est authentifié ou pas\nvar service = inject('services');\nvar authenticatedValue = computed(() => service.authenticated);\n// INFO\n// on est sur un faux \"disabled\" du bouton\n// car on souhaite que les evenements soient toujours actifs\nconst authenticatedClass = ref({\n  authenticatedProperty: !authenticatedValue.value\n});\n\nconst BookmarksButton = ref(null)\nonMounted(() => {\n    domStore.setBookmarksButton(BookmarksButton.value)\n})\n</script>\n\n<template>\n  <div class=\"container\">\n    <div ref=\"BookmarksButton\">\n      <DsfrButton\n        tertiary\n        no-outline\n        :class=\"authenticatedClass\"\n        icon=\"ri-bookmark-line\"\n        @click=\"$emit('onBookMarksOpen')\"\n      >\n        Mes enregistrements\n      </DsfrButton>\n    </div>\n    <hr>\n    <DsfrButton\n      tertiary\n      no-outline\n      icon=\"ri:file-upload-line\"\n      @click=\"openControl('LayerImport')\"\n    >\n      Importer des données\n    </DsfrButton>\n    <DsfrButton\n      tertiary\n      no-outline\n      icon=\"ri:share-2-fill\"\n      @click=\"$emit('onModalShareOpen')\"\n    >\n      Partager, intégrer la carte\n    </DsfrButton>\n    <DsfrButton\n      tertiary\n      no-outline\n      icon=\"fr-icon-printer-line\"\n      class=\"tierce-print\"\n      @click=\"$emit('onModalPrintOpen')\"\n    >\n      Imprimer\n    </DsfrButton>\n\n    <DsfrButton\n      tertiary\n      no-outline\n      icon=\"fr-icon-feedback-line\"\n      @click=\"onOpenControlReporting()\"\n    >\n      Signaler une anomalie\n    </DsfrButton>\n    <hr>\n\n    <DsfrButton\n      tertiary\n      no-outline\n      icon=\"ri:layout-top-line\"\n      @click=\"onToggleHeaderCompact\"\n    >\n      <div class=\"compact-toggle\">\n        Affichage compact\n        <DsfrToggleSwitch\n          v-model=\"isCompact\"\n          no-text\n          label-left\n          @click.stop\n          @click=\"domStore.setIsHeaderCompact(!isCompact)\"\n        />\n      </div>\n    </DsfrButton>\n  </div>\n</template>\n\n<style scoped>\n.authenticatedProperty {\n  --hover: inherit;\n  --active: inherit;\n  background-color: transparent;\n  color: var(--text-disabled-grey);\n}\n\na {\n  text-decoration: none;\n}\n.container {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 32px);\n  max-height: calc(76.8vh - 70px);\n  overflow-y: auto;\n  scrollbar-width: thin;\n}\n\n:deep(button) {\n  font-size: 0.875rem;\n  color: var(--text-action-high-grey);\n}\n\n@media (max-width: 576px) {\n  .tierce-print {\n    display: none;\n  }\n}\n\n@media (max-height: 576px) {\n  .tierce-print {\n    display: none;\n  }\n}\n\n.compact-toggle {\n  display: flex;\n  justify-content: space-between;\n}\n</style>\n","<script lang=\"js\">\n/**\n * @description\n * Menu des Favoris sans documents disponible\n * dans l'espace de l'utilisateur\n * \n * @fires emitter#catalog:open:clicked\n * @fires emitter#leftmenu:close\n * @fires emitter#layerimport:open:clicked\n * @todo impl. handler sur l'enregistrement de la carte\n */\nexport default {\n  name: 'MenuBookMarkNoData'\n};\n</script>\n\n<script setup lang=\"js\">\nimport { useMapStore } from '@/stores/mapStore';\nimport { inject } from 'vue';\n\n// lib notification\nimport { push } from 'notivue'\nimport t from '@/features/translation';\n\nconst mapStore = useMapStore();\nconst service = inject('services');\nconst emitter = inject('emitter');\n\nconst createTempCarteDocument = async (data) => {\n  // enregistrement du permalien dans un document temporaire\n  try {\n    const o = await service.setDocument(data)\n    var uuid = o.uuid;\n    var action = o.action;\n\n    // emettre un event pour prévenir l'ajout d'un document\n    // au composant des favoris\n    emitter.dispatchEvent(\"document:saved\", {\n      uuid : uuid,\n      action : action // added, updated, deleted\n    });\n\n    return o;\n  } catch (e) {\n    console.error(e);\n    throw e;\n  }\n};\n\nconst buttons = [\n  {\n    label: 'Enregistrer une carte',\n    icon: \"fr-icon-save-line\",\n    iconOnly: false,\n    iconRight: false,\n    secondary: true,\n    class: 'bookmark-button-container',\n    onclick: () => {\n      // realiser un enregistrement du permalien\n      // dans l'espace personnel\n      // - creer un document generique afin d'ouvrir le menu\n      // - proposer de renommer l'enregistrement\n      const name = \"Ma carte\";\n\n      // recupèrer le permalien\n      var permalink = mapStore.permalink;\n      \n      const data = {\n        name : name,\n        description : \"permalien\",\n        format : \"json\",\n        target : \"internal\",\n        type : \"carte\",\n        content : JSON.stringify({\n          name : name,\n          date : new Date().toISOString(),\n          permalink : permalink\n        })\n      };\n\n      createTempCarteDocument(data)\n      .then(() => {\n        // notification\n        push.success({\n          title: t.bookmark.title,\n          message: t.bookmark.success_save_map\n        });\n      })\n      .catch((e) => {\n        console.error(e);\n        push.error({\n          title: t.bookmark.title,\n          message: t.bookmark.failed_save_map\n        });\n      });\n    }\n  },\n  {\n    label: 'Annoter la carte',\n    icon: \"fr-icon-pencil-line\",\n    iconOnly: false,\n    iconRight: false,\n    tertiary: true,\n    class: 'bookmark-button-container',\n    onclick: async () => {\n      // envoi d'un evenement pour l'ouverture du catalogue\n      if (!mapStore.getControls().includes(\"Drawing\")) {\n        // activer le controle de dessin\n        mapStore.addControl(\"Drawing\");\n        await nextTick();\n      }\n      emitter.dispatchEvent(\"drawing:open:clicked\", {\n        open : true,\n        componentName: \"Drawing\"\n      });\n    }\n  },\n  {\n    label: 'Importer une donnée',\n    icon: \"fr-icon-upload-line\",\n    iconOnly: false,\n    iconRight: false,\n    tertiary: true,\n    class: 'bookmark-button-container',\n    onclick: () => {\n      // envoi d'un evenement pour l'ouverture du contrôle d'import de données\n      emitter.dispatchEvent(\"layerimport:open:clicked\", {\n        open : true,\n        componentName: \"LayerImport\"\n      });\n      emitter.dispatchEvent(\"leftmenu:close\", {\n        open : false,\n        componentName: \"LeftMenu\"\n      });\n    }\n  }\n];\n</script>\n\n<template>\n  <div class=\"fr-container\">\n    <div class=\"bookmark-content-container\">\n      <h4>\n        Aucun enregistrement pour le moment\n      </h4>\n      <div>\n        Enregsitrer vos cartes et données créées sur votre espace afin de les retrouver\n        et de les utiliser à tout moment.\n      </div>\n      <div id=\"location-france\" />\n    </div>\n    <div class=\"bookmark-buttons-container\">\n      <DsfrButtonGroup\n        :buttons=\"buttons\"\n      />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.bookmark-content-container {\n  width: 100%;\n  text-align: center;\n}\n#location-france {\n  display: inline-block;\n  background-image: url(../../../assets/location-france.svg);\n  background-repeat: no-repeat;\n  height: 80px;\n  width: 80px;\n}\n.bookmark-buttons-container {}\n</style>\n\n<style>\n/* HACK : centrage des boutons */\n.bookmark-button-container {\n  display: flex;\n  width: 100%;\n  justify-content: center !important;\n}\n/* HACK : sinon imposible d'avoir l'icone et le label */\n.fr-btns-group:not(.fr-btns-group--sm):not(.fr-btns-group--lg):not([class^=fr-btns-group--icon-]):not([class*=\" fr-btns-group--icon-\"]) .fr-btn[class*=\" fr-icon-\"] {\n  max-width: unset;\n}\n</style>","<script lang=\"js\">\n/**\n * @description\n * Entrée d'un favori :\n * - nom\n * - icone en fonction du type de données\n * - type de données\n * - date (creer et modifier)\n * - menu options : renommer, partager, supprimer\n * \n * En cliquant sur une entrée, la donnée est ajoutée à la carte.\n * On procede :\n * - récupèration des informations complementaires\n * - téléchargement du fichier\n * - enregistrement de l'ID dans la couche native : \n *   ex. gpResultLayerId = 'bookmark:drawing-kml:3fa85f64-5717-4562-b3fc-2c963f66afa5'\n * \n * @todo gestion des exceptions sur les actions avec notification\n * @todo le type service mapbox est à mettre en place\n * @todo le type compute est à mettre en place\n */\nexport default {\n  name: 'MenuBookMarkEntry'\n};\n</script>\n\n<script setup lang=\"js\">\n\nimport { ref, inject, onBeforeMount, onMounted, useTemplateRef } from 'vue';\n\nimport { getLayersFromPermalink } from '@/features/permalink.js';\nimport { toShare } from '@/features/share.js';\n\n// lib notification\nimport { push } from 'notivue'\nimport t from '@/features/translation';\n\nimport { useClipboard } from '@vueuse/core'\nimport { useMapStore } from \"@/stores/mapStore\";\nimport { useLogger } from 'vue-logger-plugin';\n\nconst mapStore = useMapStore();\nconst log = useLogger();\n\nconst clipboardSource = ref('');\nconst { copy } = useClipboard({ clipboardSource });\n\n/**\n * Options :\n * - type : 'map' ou 'data'\n * - data : {id, name, type, type_fr, icon, date}\n */\nconst props = defineProps({\n  type :  {\n    type: String,\n    default: ''\n  },\n  data : {\n    type: Object,\n    default: () => ({})\n  }\n});\n\nconst service = inject('services');\nconst emitter = inject('emitter');\n\n/**\n * Gestionnaire d'evenement d'affichage de la couche sur la carte\n * \n * @param data - { id, name, type }\n */\nconst onAddData = (data) => {\n  service.getDocumentById(data.id)\n  .then((document) => {\n    var fct = null;\n    switch (data.type) {\n      case \"drawing\":\n        fct = service.getDrawing;\n        break;\n      case \"import\":\n        fct = service.getImport;\n        break;\n      case \"compute\":\n        // Ce type de données doit initialisé un contrôle : \n        // - isochrone\n        // - profil altimétrique\n        // - itineraire\n        fct = service.getCompute;\n        break;\n      case \"service\":\n        fct = service.getService;\n        break;\n      case \"carte\":\n        fct = service.getCartes;\n        break;\n      default:\n        break;\n    }\n    if (!fct) {\n      throw new Error(t.bookmark.failed_type_unknow(data.type));\n    }\n    var permalink = false;\n    // appel de la requête de télechargement du fichier\n    fct.call(service, data.id)\n    .then((response) => {\n      \n      if (data.type === \"carte\") {\n        getLayersFromPermalink(response);\n        push.success({\n          title: t.bookmark.title,\n          message: t.bookmark.success_add_data(\"permalien\")\n        });\n        return;\n      }\n      if (data.type === \"service\") {\n        permalink = true;\n      }\n      if (data.type === \"drawing\") {\n        permalink = true;\n      }\n      if (data.type === \"import\") {\n        permalink = true;\n      }\n      if (data.type === \"compute\") {\n        // INFO\n        // On emet un event vers le controle, et on lui passe le\n        // informations du calcul du document\n        // ex. emitter.dispatch('route:compute:called', {...});\n        // Le controle va se charger de l'initialisation via l'abonnement\n        // à l'evenement\n        permalink = true;\n      }\n      \n      // ajout du document dans le permalien pour partage\n      if (permalink) {\n        var url = toShare(document, {\n          opacity: 1, \n          visible: true,\n          grayscale: false\n        });\n        mapStore.addBookmark(url);\n      }\n    })\n    .then(() => {\n      if (mapStore.isPermalink()) {\n        // on ne notifie pas l'ajout d'une couche du permalien\n        return;\n      }\n      push.success({\n        title: t.bookmark.title,\n        message: t.bookmark.success_add_data(document.extra.format),\n      });\n    })\n    .catch((e) => {\n      throw e;\n    });\n  })\n  .catch((e) => {\n    console.error(e);\n    push.error({\n      title: t.bookmark.title,\n      message: t.bookmark.failed_add_data(e.message),\n    });\n  })\n};\n\nonBeforeMount(() => {});\n\nonMounted(() => {});\n\nconst refDivRename = useTemplateRef('div-rename');\nconst rename = ref('');\n\nconst onClickButtonRename = (e) => {\n  console.debug(e);\n  refDivRename.value.classList.toggle(\"fr-hidden\");\n  rename.value = props.data.name;\n};\nconst onClickButtonDelete = (e) => {\n  console.debug(e);\n  var data = {\n    uuid : props.data.id,\n    type : props.data.type\n  };\n  service.deleteDocument(data)\n    .then((o) => {\n      // emettre un event pour prévenir de la suppression d'un document\n      // au composant des favoris\n      emitter.dispatchEvent(\"document:deleted\", {\n        uuid : o.uuid,\n        action : o.action // added, updated, deleted\n      });\n    })\n    .then(() => {\n      // TODO\n      // prevenir l'utilisateur que le document supprimé\n      // ne sera plus disponible sur les cartes enregistrées\n      // et donc sur le permalien !\n    });\n};\nconst onClickButtonExport = (e) => {\n  console.debug(e);\n  var data = {\n    uuid : props.data.id,\n    type : props.data.type\n  };\n  service.exportDocument(data)\n  .then((o) => {\n    // emettre un event pour prévenir de l'export d'un document\n    // au composant des favoris\n    emitter.dispatchEvent(\"document:exported\", {\n      uuid : o.uuid,\n      action : o.action // added, updated, deleted\n    });\n    return o;\n  })\n  .then((o) => {\n    var mimeType = o.extra.mimeType;\n    var content = o.extra.content;\n    var name = o.extra.name;\n    var ext = o.extra.ext;\n  \n    // au cas où...\n    var filename = (name.includes(ext)) ? name : name + \".\" + ext;\n  \n    var link = document.createElement(\"a\");\n    // determiner le bon charset !\n    var charset = \"utf-8\";\n    link.setAttribute(\"href\", \"data:\" + mimeType + \";charset=\" + charset + \",\" + encodeURIComponent(content));\n    link.setAttribute(\"download\", filename);\n    if (document.createEvent) {\n      var event = document.createEvent(\"MouseEvents\");\n      event.initEvent(\"click\", true, true);\n      link.dispatchEvent(event);\n    } else {\n      link.click();\n    }\n  });\n};\nconst onClickButtonCopyPermalink = (e) => {\n  console.debug(e);\n  var data = {\n    uuid : props.data.id,\n    type : props.data.type\n  };\n\n  service.getCartes(data.uuid)\n  .then((response) => {\n    copy(response);\n  })\n  .then(() => {\n    push.success({\n      title: t.bookmark.title,\n      message: t.bookmark.success_copy_permalink\n    });\n  })\n  .catch((e) => {\n    console.error(e);\n    push.error({\n      title: t.bookmark.title,\n      message: t.bookmark.failed_add_data(e.message),\n    });\n  });\n\n}\n\nconst onClickButtonValidateRename = (e) => {\n  log.debug(e);\n  var data = {\n    uuid : props.data.id,\n    type : props.data.type,\n    name : rename.value\n  };\n  \n  if (rename.value === props.data.name) {\n    return;\n  }\n\n  service.renameDocument(data)\n  .then((o) => {\n    // emettre un event pour prévenir la modification d'un document\n    // au composant des favoris\n    emitter.dispatchEvent(\"document:updated\", {\n      uuid : o.uuid,\n      action : o.action // added, updated, deleted\n    });\n  })\n  .then(() => {\n    // FIXME\n    // doit on fermer dés que l'action est realisée ?\n    refDivRename.value.classList.toggle(\"fr-hidden\");\n  })\n  .then(() => {\n    // FIXME\n    // doit on modifier les informations du gestionnaire de couche ?\n    // ex. modifier Name\n  });\n\n};\nconst onClickButtonCancelRename  = (e) => {\n  log.debug(e);\n  refDivRename.value.classList.toggle(\"fr-hidden\");\n};\n\n// INFO\n// on ajoute des informations utiles directement dans le dataset des boutons\n// - data-id : uuid\n// - data-type : ex. drawing, import, carte...\nconst buttonsCommon = [\n  {\n    label: 'Renommer',\n    icon: \"fr-icon-edit-line\",\n    \"data-id\": props.data.id,\n    \"data-type\": props.data.type,\n    \"data-name\": props.data.name,\n    disabled: false,\n    iconOnly: true,\n    iconRight: false,\n    secondary: true,\n    noOutline: true,\n    style: \"margin: unset;box-shadow: unset;\",\n    class: 'bookmark-button-container-advanced',\n    onclick: onClickButtonRename\n  },\n  {\n    label: 'Supprimer',\n    icon: \"fr-icon-delete-line\",\n    \"data-id\": props.data.id,\n    \"data-type\": props.data.type,\n    \"data-name\": props.data.name,\n    disabled: false,\n    iconOnly: true,\n    iconRight: false,\n    secondary: true,\n    noOutline: true, \n    style: \"margin: unset;box-shadow: unset;\",\n    class: 'bookmark-button-container-advanced',\n    onclick: onClickButtonDelete\n  }\n];\nconst buttonsMap = [\n  ...buttonsCommon,\n  {\n    label: 'Copier',\n    icon: \"fr-icon-link\",\n    \"data-id\": props.data.id,\n    \"data-type\": props.data.type,\n    \"data-name\": props.data.name,\n    disabled: false,\n    iconOnly: true,\n    iconRight: false,\n    secondary: true,\n    noOutline: true,\n    style: \"margin: unset;box-shadow: unset;\",\n    class: 'bookmark-button-container-advanced',\n    onclick: onClickButtonCopyPermalink\n  }\n];\n\nconst buttonsData = [\n  ...buttonsCommon,\n  {\n    label: 'Exporter',\n    icon: \"fr-icon-download-line\",\n    \"data-id\": props.data.id,\n    \"data-type\": props.data.type,\n    \"data-name\": props.data.name,\n    disabled: false,\n    iconOnly: true,\n    iconRight: false,\n    secondary: true,\n    noOutline: true,\n    style: \"margin: unset;box-shadow: unset;\",\n    class: 'bookmark-button-container-advanced',\n    onclick: onClickButtonExport\n  }\n];\n\n</script>\n\n<template>\n  <!-- Menu d'un favori -->\n  <div class=\"container-bookmark-entry\">\n    <!-- Bouton de selection d'un favori à afficher sur la carte -->\n    <DsfrButton \n      :data-id=\"data.id\"\n      :data-type=\"data.type\"\n      :title=\"data.name\"\n      class=\"button-bookmark-entry\"\n      tertiary\n      no-outline\n      :icon=\"data.icon\"\n      @click=\"onAddData(data)\"\n    >\n      {{ data.name }}\n    </DsfrButton>\n    <!-- Groupe d'action : \n     - renommer\n     - exporter\n     - supprimer\n    -->\n    <div class=\"container-bookmark-entry-advanced-options\">\n      <DsfrButtonGroup\n        v-if=\"data.type === 'carte'\"\n        :buttons=\"buttonsMap\"\n        inline-layout-when\n        size=\"sm\"\n      />\n      <DsfrButtonGroup\n        v-else\n        :buttons=\"buttonsData\"\n        inline-layout-when\n        size=\"sm\"\n      />\n    </div>\n  </div>\n  <!-- Informations :\n    - type : service, calcul, croquis, import\n    - format? : geojson, ...\n    - date?\n  -->\n  <div class=\"container-bookmark-entry-advanced-infos fr-hint-text\">\n    <span v-if=\"data.type_fr\"> {{ data.type_fr }}</span>\n    <span v-if=\"data.format\"> {{ data.format }}</span>\n    <span v-if=\"data.date\"> {{ data.date }}</span>\n  </div>\n  <!-- Menu pour renommer un favori -->\n  <div\n    ref=\"div-rename\"\n    class=\"container-bookmark-entry-rename fr-hidden\"\n  >\n    <DsfrInput\n      v-model=\"rename\"\n      label=\"Renommer\"\n      placeholder=\"\"\n    />\n    <div class=\"container-bookmark-entry-buttons-rename\">\n      <DsfrButton\n        size=\"sm\"\n        icon=\"ri:close-line\"\n        tertiary\n        no-outline\n        class=\"fr-p-1w\"\n        @click=\"onClickButtonCancelRename\"\n      />\n      <DsfrButton\n        size=\"sm\"\n        icon=\"ri:check-line\"\n        tertiary\n        no-outline\n        class=\"fr-p-1w\"\n        @click=\"onClickButtonValidateRename\"\n      />\n    </div>\n  </div>\n  <slot />\n</template>\n\n<style>\n.container-bookmark-entry {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  align-content: center;\n  align-items: baseline;\n}\n.button-bookmark-entry {\n  width: 210px;\n}\n.button-bookmark-entry > span {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n.container-bookmark-entry-rename {\n  display: flex;\n}\n.container-bookmark-entry-buttons-rename {\n  display: flex;\n}\n\n\n/* FIXME ne marche pas !? */\n.bookmark-button-container-advanced {\n  margin: unset;\n  box-shadow: unset;\n}\n</style>","<script lang=\"js\">\n/**\n * @description\n * Liste des Favoris avec les documents suivants : \n * - cartes ou permaliens\n * - données : croquis, imports, calculs et services\n * \n * @fires emitter#layerimport:open:clicked\n * @todo gestion de l'accessibilité des onglets\n * @todo obtenir plus d'informations complementaires sur les documents\n * @todo mécanisme de date (tag extra de l'API Entrepôt): creation et modification\n */\nexport default {\n  name: 'MenuBookMarkDataList'\n};\n</script>\n\n<script setup lang=\"js\">\n\nimport MenuBookMarkEntry from '@/components/menu/bookmarks/MenuBookMarkEntry.vue';\nimport { useMapStore } from '@/stores/mapStore';\nimport { inject } from 'vue';\n\n// lib notification\nimport { push } from 'notivue'\nimport t from '@/features/translation';\n\nconst mapStore = useMapStore();\nconst service = inject('services');\nconst emitter = inject('emitter');\n\n// options\nconst props = defineProps({\n  title: String\n});\n\n// recherche de données\nconst searchString = ref('');\nfunction updateSearch(e) {\n  searchString.value = e;\n}\n\n// gestion des onglets\nconst tabListName = 'Liste des données';\nconst tabTitles = [\n  { title: \"Cartes\", tabId: 'tab-bookmark-maps', panelId: 'tab-content-bookmark-maps'},\n  { title: 'Données', tabId: 'tab-bookmark-data', panelId: 'tab-content-bookmark-data' }\n];\n\nconst selectedIndex = ref(0);\n\n// mapping label i18n FR\nconst i18n = (label) => {\n  var mapping = label;\n  if (service.labels.includes(label)) {\n      if (label === \"drawing\") {\n        mapping = \"croquis\";\n      }\n      if (label === \"compute\") {\n        mapping = \"calcul\";\n      }\n  } else {\n      mapping = label;\n  }\n  return mapping;\n};\n// mapping label icon (dsfr)\nconst icon = (label) => {\n  var icon = \"\";\n  if (service.labels.includes(label)) {\n      if (label === \"drawing\") {\n        icon = \"ri:pencil-line\";\n      }\n      if (label === \"import\") {\n        icon = \"ri:file-upload-line\";\n      }\n      if (label === \"service\") {\n        icon = \"ri:cloud-line\";\n      }\n      if (label === \"compute\") {\n        icon = \"ri:settings-5-line\";\n      }\n  } else {\n      icon = \"ri:pencil-line\";\n  }\n  return icon;\n};\n\nconst update = ref(null);\n\n// liste des données avec filtre sur la recherche (sur le nom complet)\nconst lstData = computed(() => {\n  if (update.value) {\n    console.log(\"update data !\");\n  }\n  var data = [];\n  for (const type in service.documents) {\n    if (Object.prototype.hasOwnProperty.call(service.documents, type)) {\n      if (type === \"carte\") {\n        continue;\n      }\n      var documents = service.documents[type];\n      if (!documents) {\n        continue;\n      } \n      for (let i = 0; i < documents.length; i++) {\n        var document = documents[i];\n        // INFO\n        // on a des informations partielles sur les documents...\n        var extensions = [ \".geojson\", \".gpx\", \".kml\", \".json\"];\n        var ext = extensions.find((ext) => document.name.includes(ext));\n        data.push({\n          id : document._id,\n          name : (ext) ? document.name.replace(ext, \"\").slice(0, -1) : document.name,\n          type : type,\n          type_fr : \"\", // no translation; if needed, use i18n(type)\n          icon : icon(type)\n        });\n      }\n    }\n  }\n  return data.filter((el) => !searchString.value || el.name.includes(searchString.value) );\n});\n\n//  liste des cartes avec filtre sur la recherche (sur le nom complet)\nconst lstMap = computed(() => {\n  if (update.value) {\n    console.log(\"update map !\");\n  }\n  var map = [];\n  if (service.documents.carte) {\n    for (let i = 0; i < service.documents.carte.length; i++) {\n      const document = service.documents.carte[i];\n      map.push({\n        id : document._id,\n        name : document.name,\n        type : \"carte\",\n        type_fr : \"\", // no translation, otherwise e.g. \"carte\", \"permalien\"\n        icon : \"ri-map-2-line\",\n      });\n    }\n  }\n  return map.filter((el) => !searchString.value || el.name.includes(searchString.value) );\n});\n\nconst onUpdateBookmark = (e) => {\n  console.log(e);\n  // mise à jour du menu si \n  // - nouveau document\n  // - mise à jour\n  // - suppression\n  // attention à la mise à jour du même document !\n  var timestamp = Date.now();\n  update.value = Object.assign(e, { timestamp : timestamp });\n}\n\n// abonnements\nemitter.addEventListener(\"document:saved\", onUpdateBookmark);\nemitter.addEventListener(\"document:updated\", onUpdateBookmark);\nemitter.addEventListener(\"document:deleted\", onUpdateBookmark);\nemitter.addEventListener(\"document:exported\", onUpdateBookmark);\n\n/**\n * gestionnaire d'evenements\n * \n * Action d'enregistrement du document sur l'espace personnel :\n * - un permalien pour \"Enregistrer la carte\"\n * - une donnée de type vecteur ou service pour \"Ajouter une donnée\"\n * @fires emitter#layerimport:open:clicked\n */\nconst addMap = () => {\n  refDivMapName.value.classList.toggle(\"fr-hidden\");\n};\nconst addData = () => {\n  // envoi d'un evenement pour l'ouverture du contrôle d'import de données\n  // et le widget realise l'enregistrement automatique dans l'espace personnel\n      // envoi d'un evenement pour l'ouverture du contrôle d'import de données\n      emitter.dispatchEvent(\"layerimport:open:clicked\", {\n        open : true,\n        componentName: \"LayerImport\"\n      });\n      emitter.dispatchEvent(\"leftmenu:close\", {\n        open : false,\n        componentName: \"LeftMenu\"\n      });\n};\n\nconst refDivMapName = useTemplateRef('div-map-name');\nconst name = ref('');\n\nconst onClickMapButtonValidateName = (e) => {\n  refDivMapName.value.classList.toggle(\"fr-hidden\");\n  // recupèrer le permalien\n  var permalink = mapStore.permalink;\n  \n  // fournir un nom au document via UI avec bouton valider / annuler \n  const data = {\n    name : name.value,\n    description : \"permalien\",\n    format : \"json\",\n    target : \"internal\",\n    type : \"carte\",\n    content : JSON.stringify({\n      name : name.value,\n      date : new Date().toISOString(),\n      permalink : permalink\n    })\n  };\n\n  createCarteDocument(data)\n  .then(() => {\n    // refDivMapName.value.classList.toggle(\"fr-hidden\");\n  })\n  .then(() => {\n    name.value = \"\";\n  })\n  .then(() => {\n    // notification\n    push.success({\n      title: t.bookmark.title,\n      message: t.bookmark.success_save_map\n    });\n  })\n  .catch((e) => {\n    console.error(e);\n    push.error({\n      title: t.bookmark.title,\n      message: t.bookmark.failed_save_map\n    });\n  });\n  \n};\nconst onClickMapButtonCancelName  = (e) => {\n  refDivMapName.value.classList.toggle(\"fr-hidden\");\n};\n\nconst createCarteDocument = async (data) => {\n  // enregistrement du permalien dans un document\n  // avec le nom fourni par l'utilisateur\n  try {\n    const o = await service.setDocument(data)\n    var uuid = o.uuid;\n    var action = o.action;\n\n    // emettre un event pour prévenir l'ajout d'un document\n    // au composant des favoris\n    emitter.dispatchEvent(\"document:saved\", {\n      uuid : uuid,\n      action : action // added, updated, deleted\n    });\n\n    return o;\n  } catch (e) {\n    console.error(e);\n    throw e;\n  }\n};\n\nonBeforeMount(() => {});\n\nonMounted(() => {});\n\n</script>\n\n<template>\n  <div class=\"fr-container fr-p-1w\">\n    <h4 v-if=\"title\">\n      {{ title }}\n    </h4>\n    <!-- Module de recherche des données utilisateur -->\n    <div class=\"search-bookmark fr-p-1w\">\n      <DsfrSearchBar\n        v-model=\"searchString\"\n        label=\"Rechercher un enregistrement\"\n        @update:model-value=\"updateSearch\"\n      />\n    </div>\n\n    <!-- Module d'affichage des données sur 2 rubriques : \n      - cartes : permaliens\n      - données : croquis, imports, calculs et services\n    -->\n    <div class=\"tabs-bookmark fr-p-1w\">\n      <DsfrTabs\n        id=\"tabs-bookmark\"\n        v-model=\"selectedIndex\"\n        :tab-list-name=\"tabListName\"\n        :tab-titles=\"tabTitles\"\n      >\n        <!-- TODO Ajouter l'accessibilité avec l'update vers la v6 ou sup\n        <template #tab-items>\n          <DsfrTabItem\n            v-for=\"(tab, index) of tabTitles\"\n            :key=\"tab.tabId\"\n            :tab-id=\"tab.tabId\"\n            :panel-id=\"tab.panelId\"\n            @click=\"selectedTabBookmarkIndex = index\"\n            @next=\"selectNext()\"\n            @previous=\"selectPrevious()\"\n            @first=\"selectFirst()\"\n            @last=\"selectLast()\">\n            {{ tab.title }}\n          </DsfrTabItem>\n        </template> \n        -->\n\n        <DsfrTabContent\n          panel-id=\"tab-content-bookmark-maps\"\n          tab-id=\"tab-bookmark-maps\"\n        >\n          <!-- Bouton pour enregistrer la carte -->\n          <DsfrButton\n            label=\"Enregistrer la carte\"\n            tertiary\n            size=\"sm\"\n            class=\"button-action\"\n            icon=\"fr-icon-save-line\"\n            @click=\"addMap()\"\n          />\n          <!-- Affichage du menu pour nommer le permalien dans les favoris -->\n          <div\n            ref=\"div-map-name\"\n            class=\"container-bookmark-map-name fr-hidden\"\n          >\n            <DsfrInput\n              v-model=\"name\"\n              label=\"Nommer\"\n              placeholder=\"\"\n            />\n            <div class=\"container-bookmark-map-buttons-name\">\n              <DsfrButton\n                size=\"sm\"\n                icon=\"ri:close-line\"\n                tertiary\n                no-outline\n                class=\"fr-p-1w\"\n                @click=\"onClickMapButtonCancelName\"\n              />\n              <DsfrButton\n                size=\"sm\"\n                icon=\"ri:check-line\"\n                tertiary\n                no-outline\n                class=\"fr-p-1w\"\n                @click=\"onClickMapButtonValidateName\"\n              />\n            </div>\n          </div>\n          <!-- Affichage des cartes ou permaliens -->\n          <div\n            v-for=\"map in lstMap\"\n            class=\"container-bookmark-map-item fr-p-1w\"\n          >\n            <MenuBookMarkEntry\n              :data=\"map\"\n              type=\"map\"\n            />\n          </div>\n        </DsfrTabContent>\n\n        <DsfrTabContent\n          panel-id=\"tab-content-bookmark-data\"\n          tab-id=\"tab-bookmark-data\"\n        >\n          <!-- Bouton pour importer un fichier -->\n          <DsfrButton\n            label=\"Ajouter une donnée\"\n            tertiary\n            size=\"sm\"\n            class=\"button-action\"\n            icon=\"fr-icon-upload-line\"\n            @click=\"addData()\"\n          />\n          <!-- Affichage des données :\n            - nom\n            - icone en fonction du type de données\n            - type de données\n            - date\n            - menu options : renommer, partager, supprimer\n          -->\n          <div\n            v-for=\"data in lstData\"\n            class=\"container-bookmark-data-item fr-p-1w\"\n          >\n            <MenuBookMarkEntry\n              :data=\"data\"\n              type=\"data\"\n            />\n          </div>\n        </DsfrTabContent>\n      </DsfrTabs>\n    </div>\n  </div>\n</template>\n\n<style>\n.container-bookmark-map-name {\n  display: flex;\n}\n.container-bookmark-map-buttons-name {\n  display: flex;\n}\n</style>\n\n<style lang=\"css\" scoped>\n#tab-content-bookmark-maps,\n#tab-content-bookmark-data {\n  overflow-y: scroll;\n  scrollbar-width: thin;\n  overflow-x: hidden;\n  max-height: calc(76.8vh - 270px);\n  padding: 1em;\n}\n.button-action {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n}\n</style>\n\n","<script lang=\"js\">\n/**\n * @description\n * Menu des Favoris en mode connecté \n * avec un menu avec ou sans documents disponible\n * \n * @listens emitter#service:documents:loaded\n */\nexport default {\n  name: 'MenuBookMarkLoggued'\n};\n</script>\n\n<script setup lang=\"js\">\nimport MenuBookMarkNoData from '@/components/menu/bookmarks/MenuBookMarkNoData.vue';\nimport MenuBookMarkDataList from '@/components/menu/bookmarks/MenuBookMarkDataList.vue';\n\nvar service = inject('services');\nconst emitter = inject('emitter');\n\nconst IsEmpty = () => {\n  var empty = true;\n  for (const key in service.documents) {\n    if (Object.prototype.hasOwnProperty.call(service.documents, key)) {\n      const element = service.documents[key];\n      if (element && element.length) {\n        empty = false;\n      }\n    }\n  }\n  return empty;\n};\nvar toggle = ref(false);\nvar documentsIsEmpty = computed(() => {\n  // INFO\n  // les promises sur les documents ne sont pas encore completement remontées !\n  // on met donc une ref 'toggle' qui est complété par l'evenement émis \n  // par le service\n  var value = IsEmpty();\n  if (toggle.value) {\n    return IsEmpty();\n  }\n  return value;\n});\n\n// INFO\n// abonnement à l'evenement du service sur les documents afin de \n// savoir quand tous les documents sont remontés\nemitter.addEventListener(\"service:documents:loaded\", (e) => {\n  toggle.value = !toggle.value;\n});\n// INFO\n// abonnement à l'evenement du service afin de \n// mettre à jour le menu si un document a été ajouté, modifié ou supprimé...\nemitter.addEventListener(\"document:saved\", (e) => {\n  toggle.value = !toggle.value;\n});\nemitter.addEventListener(\"document:deleted\", (e) => {\n  toggle.value = !toggle.value;\n});\nemitter.addEventListener(\"document:updated\", (e) => {\n  toggle.value = !toggle.value;\n});\n\nonMounted(() => {\n})\n\n</script>\n\n<template>\n  <div v-if=\"documentsIsEmpty\">\n    <!-- Mode connecté sans documents dans l'espace personnel -->\n    <MenuBookMarkNoData />\n  </div>\n  <div v-else>\n    <!-- Mode connecté avec des documents disponible -->\n    <MenuBookMarkDataList\n      title=\"Mes enregistrements\"\n    />\n  </div>\n</template>\n\n<style scoped>\n\n</style>","<script lang=\"js\">\n/**\n * @description\n * Menu des Favoris\n * \n */\nexport default {\n  name: 'MenuBookMarks'\n};\n</script>\n\n<script setup lang=\"js\">\n\nimport MenuBookMarkLoggued from '@/components/menu/bookmarks/MenuBookMarkLoggued.vue';\n\nvar service = inject('services');\nvar authenticated = computed(() => service.authenticated);\n\n</script>\n\n<template>\n  <div class=\"container\">\n    <!-- INFO\n      On affiche le menu des favoris si on est authentifié.\n      Sinon, une modale de connexion est proposée \n      (cf. src/components/menu/LeftMenuTool.vue ~ onBookMarksOpen())\n    -->\n    <MenuBookMarkLoggued v-if=\"authenticated\" />\n  </div>\n</template>\n\n<style scoped>\n  .container {}\n</style>","<script lang=\"js\">\n  /**\n   * @description\n   * ...\n   * @listens emitter#leftmenu:close\n   */\n  export default {\n    name: 'LeftMenuTool'\n  };\n</script>\n<script setup lang=\"js\">\nimport MenuLateralWrapper from '@/components/menu/MenuLateralWrapper.vue';\nimport MenuLateralNavButton from '@/components/menu/MenuLateralNavButton.vue';\nimport MenuTierce from '@/components/menu/MenuTierce.vue';\nimport MenuBookMarks from '@/components/menu/MenuBookMarks.vue';\n\nimport { useTemplateRef } from 'vue';\nimport { inject } from 'vue';\n\nimport { useDomStore } from '@/stores/domStore';\n\nconst domStore = useDomStore();\n\nconst props = defineProps({\n})\n\nconst side = \"left\"\nconst is_expanded = ref()\n\nconst leftControls = ref(null)\n\n// Ce tableau donne l'ordre des icones du menu lateral\nconst tabArray = computed(() => {\n    const arr = [\n        {\n            componentName : \"MenuTierce\",\n            icon : \"ri-menu-add-fill\",\n            title : \"Accéder à d'autres outils\",\n            visibility: true,\n            secondary: true\n        },\n        {\n            componentName : \"MenuBookMarks\",\n            icon : \"ri-bookmark-line\",\n            title : \"Mes Enregistrements\",\n            visibility : false, // bouton invisible\n            secondary : true\n          }\n    ];\n\n    return arr\n})\n\nconst activeTab = ref(\"MenuCatalogueContent\")\nconst wrapper = ref(null)\nconst width = 300;\n\n// Gestion de l'ouverture / fermeture du panneau\nfunction tabClicked(newTab) {\n  if (tabIsActive(newTab) && is_expanded.value) {\n    wrapper.value.closeMenu();\n  } else {\n    activeTab.value = newTab + \"Content\";\n    // on change la largeur du menu pour les favoris\n    if (newTab === \"MenuBookMarks\") {\n      wrapper.value.widthMenu = 400;\n    } else {\n      wrapper.value.widthMenu = width;\n    }\n    wrapper.value.openMenu();\n  }\n}\n\nfunction tabIsActive(componentName) {\n  return activeTab.value.replace(\"Content\" , '') === componentName ? true : false;\n}\n\n// abonnement sur la fermeture du catalogue sur un evenement emis\nconst emitter = inject('emitter');\nemitter.addEventListener(\"leftmenu:close\", (e) => {\n  wrapper.value.closeMenu();\n});\n\nvar service = inject('services');\nvar authenticated = computed(() => service.authenticated);\n/**\n * Ouverture du menu des favoris si on est connecté,\n * sinon, on ouvre la modale de connexion\n */\nfunction onBookMarksOpen() {\n  // desactivation de la connexion aux favoris\n  if (import.meta.env.IAM_DISABLE === '1') {\n    return;\n  }\n  // INFO\n  // on declenche le clic sur le bouton de 'MenuLateralNavButton' afin\n  // d'afficher le menu (cf. tabClicked()).\n  // cette classe expose\n  // - l'id\n  // - une méthode clickButton()\n  tabRefs.value.forEach((e) => {\n    if (e.id === \"MenuBookMarks\") {\n      if (authenticated.value) {\n        // on ouvre le menu des favoris\n        e.clickButton();\n      } else {\n        // on ouvre la modale de connexion\n        // sans déclencher l'ouverture des favoris\n        // on emet un evenement qui déclenche l'ouverture de la modale !\n        // (cf. src/components/CartoAndTools.vue ~ onModalLoginOpen())\n        emit('onModalLoginOpen');\n      }\n    }\n  })\n}\n\nfunction onOpenControl() {\n  // on ferme le menu lateral\n  wrapper.value.closeMenu();\n}\n\nconst tabRefs = useTemplateRef('tabs')\n\nconst emit = defineEmits([\n  'onModalShareOpen',\n  'onModalPrintOpen',\n  'onModalLoginOpen'\n])\n\n/**\n * Réinitialise le menu à \"fermé\" quand on ouvre un control extension\n * Excpetion pour l'overviewmap\n */\nwatch(() => domStore.getleftControlMenu(), (newVal) => {\n  leftControls.value = newVal\n  leftControls.value?.addEventListener(\"click\", function (e) {\n  if (!e.target.id.includes('OverviewMap') && e.target.ariaPressed == \"true\") {\n    is_expanded.value = false;\n  }\n})\n}, { immediate: true })\n</script>\n\n<template>\n  <MenuLateralWrapper\n    id=\"MenuCatalogueContentClose\"\n    ref=\"wrapper\"\n    v-model=\"is_expanded\"\n    :side=\"side\"\n    :visibility=\"true\"\n    :width=\"width\"\n    :padding=\"16\"\n  >\n    <template #content>\n      <div\n        id=\"MenuTierceContent\"\n        :class=\"[activeTab === 'MenuTierceContent' ? 'activeTab' : 'inactiveTab']\"\n      >\n        <MenuTierce\n          @on-modal-share-open=\"$emit('onModalShareOpen')\"\n          @on-modal-print-open=\"$emit('onModalPrintOpen')\"\n          @on-book-marks-open=\"onBookMarksOpen\"\n          @open-control=\"onOpenControl\"\n        />\n      </div>\n      <div\n        id=\"MenuBookMarksContent\"\n        :class=\"[activeTab === 'MenuBookMarksContent' ? 'activeTab' : 'inactiveTab']\"\n      >\n        <MenuBookMarks />\n      </div>\n    </template>\n    <template #navButtons>\n      <MenuLateralNavButton\n        v-for=\"tab in tabArray\"\n        :id=\"tab.componentName\"\n        :key=\"tab.componentName\"\n        ref=\"tabs\"\n        :side=\"side\"\n        :icon=\"tab.icon\"\n        :visibility=\"tab.visibility\"\n        :active=\"tabIsActive(tab.componentName)\"\n        :title=\"tab.title\"\n        :secondary=\"tab.secondary\"\n        @tab-clicked=\"tabClicked\"\n      />\n    </template>\n  </MenuLateralWrapper>\n</template>\n\n<style scoped lang=\"scss\">\n  .activeTab {\n      display : block;\n  }\n\n  .inactiveTab {\n      display : none;\n  }\n</style>\n","<script lang=\"js\">\n  /**\n   * @description \n   * Composant représentant un élément de la liste des contrôles dans le menu de gestion des outils.\n   * \n   * @property {Object} controlListElementOptions Options de l'élément de la liste des contrôles\n   * @property {Array} selectedControls Tableau des contrôles sélectionnés ajoutés à la carte\n   */\n  export default {\n    name: 'ControlListElement'\n  };\n</script>\n\n<script setup lang=\"js\">\nimport { VIcon } from '@gouvminint/vue-dsfr';\n\nconst props = defineProps({\n  controlListElementOptions: {\n    type: Object,\n    default: () => ({})\n  },\n  selectedControls: {\n    type: Array,\n    default: () => []\n  }\n});\n\nconst selectedControlsModel = defineModel({ type: Array, default: () => [] })\nconst isActive = ref()\n\nconst dsfrIcon = computed(() => typeof props.controlListElementOptions.icon === 'string' && props.controlListElementOptions.icon.startsWith('fr-icon-'))\n\nwatch(isActive, (value) => {\n  if(value === true && !selectedControlsModel.value.includes(props.controlListElementOptions.name)) {\n    selectedControlsModel.value = [...selectedControlsModel.value, props.controlListElementOptions.name]\n  }\n  if(value === false) {\n    selectedControlsModel.value = selectedControlsModel.value.filter(e => e !== props.controlListElementOptions.name);\n  }\n})\n\nconst onClick = () => {\n  isActive.value = !isActive.value\n}\n\nonMounted(() => {})\nonUpdated(() => {})\n\n</script>\n\n<template>\n  <tr class=\"control-list-element\">\n    <td class=\"control-list-element-img\">\n      <DsfrTooltip\n        on-hover\n        :content=\"controlListElementOptions.tooltip\"\n        @click=\"onClick()\"\n      >\n        <div>\n          <span\n            v-if=\"controlListElementOptions.svg\" \n            class=\"custom-svg-icon\" \n            v-html=\"controlListElementOptions.svg\"\n          />\n          <VIcon\n            v-else-if=\"!dsfrIcon\"\n            scale=\"1.25\"\n            :name=\"controlListElementOptions.icon\"\n          />\n          <span \n            v-else\n            :class=\"controlListElementOptions.icon\" \n            aria-hidden=\"true\"\n          />\n        </div>\n      </DsfrTooltip>\n    </td>\n    <td class=\"control-list-element-img\">\n      <DsfrTooltip\n        on-hover\n        :content=\"controlListElementOptions.tooltip\"\n      >\n        <DsfrToggleSwitch\n          v-model=\"isActive\"\n          :disabled=\"controlListElementOptions.disabled\"\n          :input-id=\"controlListElementOptions.id\"\n          :label=\"controlListElementOptions.label\"\n          label-left\n          :model-value=\"selectedControlsModel === true || (Array.isArray(selectedControlsModel) && selectedControlsModel.includes(controlListElementOptions.name))\"\n          v-bind=\"$attrs\"\n          class=\"control-list-element\"\n        />\n      </DsfrTooltip>\n    </td>\n  </tr> \n</template>\n\n<style scoped>\n.control-list-element {\n    margin-bottom: 20px;\n    max-width: 95%;\n}\n.control-list-element-img {\n  border: solid --background-default-grey;\n}\n\n.custom-svg-icon svg {\n  width: 19.2px;\n  height: 19.2px;\n  display: inline-block;\n  color: var(--test-default-grey);\n  fill: currentColor;\n}\n.custom-svg-icon{\n  display: inline-block;\n  vertical-align: middle; \n  color: var(--test-default-grey);\n  font-size: 1em;\n}\n\ntd {\n  vertical-align: top;\n  text-align: left;\n}\n\n</style>\n","<script lang=\"js\">\n  /**\n   * @description\n   * Composant représentant le menu de gestion des outils.\n   * \n   * @property {Object} selectedControls Tableau des contrôles sélectionnés ajoutés à la carte\n   * \n   */\n  export default {\n    name: 'MenuControl'\n  };\n</script>\n\n<script setup lang=\"js\">\nimport { useControlsMenuOptions } from '@/composables/controls';\nimport { useLogger } from 'vue-logger-plugin';\nimport { useMapStore } from \"@/stores/mapStore\";\nimport ControlListElement from './ControlListElement.vue';\n\nconst log = useLogger();\nconst mapStore = useMapStore();;\n\nconst props = defineProps({\n  selectedControls: {\n    type: Array,\n    default: () => []\n  }\n});\n\nconst selectedControlsModel = defineModel({ type: Array, default: () => [] });\n\nconst opts = useControlsMenuOptions();\n\nconst allOptions = computed(() => {\n  return opts.filter((opt) => {\n    if (opt.label.toLowerCase().includes(searchString.value.toLowerCase()) || \n        opt.hint.toLowerCase().includes(searchString.value.toLowerCase())  ||\n        opt.name.toLowerCase().includes(searchString.value.toLowerCase()))\n      return opt;\n  })\n});\n\nconst searchString = ref(\"\");\nfunction updateSearch(e) {\n  searchString.value = e;\n}\n\nwatch(selectedControlsModel, (values) => {\n  mapStore.cleanControls();\n  for (let index = 0; index < values.length; index++) {\n    const key = values[index];\n    mapStore.addControl(key);\n  }\n})\nonMounted(() => {})\nonUpdated(() => {})\n\n</script>\n\n<template>\n  <div class=\"control-container\">\n    <h4>Gestion d'outils</h4>\n    <div class=\"control-search-bar\">\n      <DsfrSearchBar\n        :model-value=\"searchString\"\n        @update:model-value=\"updateSearch\"\n      />\n    </div>\n    <div class=\"control-content\">\n      <table>\n        <ControlListElement\n          v-for=\"(opt, idx) in allOptions\"\n          :key=\"idx\"\n          v-model=\"selectedControlsModel\"\n          :model-value=\"props.selectedControls\"\n          :control-list-element-options=\"opt\"\n        />\n      </table>\n    </div>\n  </div>\n</template>\n\n<style scoped>\ntable {\n  border-spacing: 30px 1rem;\n  border-collapse: separate;\n}\n.control-search-bar {\n  margin-bottom: 30px;\n  margin-right: 40px;\n  top: 0px;\n}\n\n.control-content {\n  overflow-y: scroll;\n  scrollbar-width: thin;\n  overflow-x: hidden;\n}\n\n.control-container {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 60px);\n  max-height: calc(76.8vh - 96px);\n}\n</style>\n","<script lang=\"js\">\n  /**\n   * @description\n   * Composant définissant le menu latéral droit contenant les outils\n   * et le catalogue de données\n   * \n   * @property { Array } selectedControls liste des Controls sélectionnés ajoutés à la carte par l'utilisateur\n   * @property { Object } selectedLayers liste des Layers sélectionnés ajoutés à la carte par l'utilisateur\n   * @listens emitter#catalog:open:clicked\n   */\n  export default {\n    name: 'RightMenuTool'\n  };\n</script>\n<script setup lang=\"js\">\n\nimport MenuLateralWrapper from '@/components/menu/MenuLateralWrapper.vue';\nimport MenuLateralNavButton from '@/components/menu/MenuLateralNavButton.vue';\nimport MenuControl from '@/components/menu/MenuControl.vue';\n// import MenuCatalogue from '@/components/menu/catalogue/MenuCatalogue.vue';\nimport { inject } from 'vue';\n\n// import { useDataStore } from \"@/stores/dataStore\"\nimport { useDomStore } from '@/stores/domStore';\n\nconst domStore = useDomStore();\n\nconst props = defineProps({\n  selectedControls: {\n    type: Array,\n    default: () => []\n  },\n  selectedLayers: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\n// var dataStore = useDataStore()\n\n// Pour information, le menu lateral est un composant generique\n// qui permet d'afficher un menu lateral gauche ou droit\n// avec un ensemble d'ocatalognglets.\n\n// Pour ajouter un onglet, il faut :\n// 1. Ajouter l'onglet dans ce tableau\n// 2. Ajouter le composant dans le template (slot content)\n// 3. Ajouter le bouton dans le template (slot navButtons)\n// 4. Ajouter le composant importé en haut du script\n// 5. Ajouter le style de l'onglet en bas du fichier (si besoin)\n// 6. Ajouter la gestion de l'onglet dans le script (si besoin)\n// 7. Ajouter les props au composant (si besoin)\n// 8. Ajouter les events au composant (si besoin)\n// 9. Ajouter les emits au composant (si besoin)\n// 10. Ajouter les listeners au composant (si besoin)\n// 11. Utiliser les icones dans le fichier /src/iconscustom.ts (si besoin)\n\n// position du menu lateral\nconst side = \"right\";\nconst is_expanded = ref();\n\n// abonnement sur l'ouverture du catalogue sur un evenement emis\nconst rightControls = ref(null)\n\n\n// Ce tableau donne l'ordre des icones du menu lateral\nconst tabArray = computed(() => {\n    const arr = [\n        {\n            componentName : \"MenuControl\",\n            icon : \"ri:tools-line\",\n            title : \"Choisir mes outils\",\n            visibility : true,\n            secondary : true\n        }\n    ];\n\n    return arr;\n})\n\n// onglet actif\nconst activeTab = ref(\"MenuControlContent\");\nconst wrapper = ref(null);\nconst width = 500;\n\n// Gestion de l'ouverture / fermeture du panneau\nfunction tabClicked(newTab) {\n  if (tabIsActive(newTab) && is_expanded.value) {\n    wrapper.value.closeMenu();\n  } else {\n    activeTab.value = newTab + \"Content\";\n    // on change la largeur du menu pour les favoris\n    if (newTab === \"MenuBookMarks\") {\n      wrapper.value.widthMenu = 400;\n    } else {\n      wrapper.value.widthMenu = width;\n    }\n    wrapper.value.openMenu();\n  }\n}\n\n// fonction qui verifie si l'onglet est actif\nfunction tabIsActive(componentName) {\n  return activeTab.value.replace(\"Content\" , '') === componentName ? true : false;\n}\n\n/**\n * Réinitialise le menu à \"fermé\" quand on ouvre un control extension\n * Excpetion pour l'overviewmap\n */\n watch(() => domStore.getrightControlMenu(), (newVal) => {\n  rightControls.value = newVal\n  rightControls.value?.addEventListener(\"click\", function (e) {\n  if (e.target.ariaPressed == \"true\") {\n    is_expanded.value = false;\n  }\n})\n}, { immediate: true })\n</script>\n\n<template>\n  <!-- Wrapper du menu lateral -->\n  <MenuLateralWrapper\n    :id=\"activeTab\"\n    ref=\"wrapper\"\n    v-model=\"is_expanded\"\n    :side=\"side\"\n    :visibility=\"true\"\n    :width=\"500\"\n  >\n    <!-- Contenu du menu lateral -->\n    <template #content>\n      <!-- <div\n        id=\"MenuCatalogueContent\"\n        :class=\"[activeTab === 'MenuCatalogueContent' ? 'activeTab' : 'inactiveTab']\"\n      >\n        <MenuCatalogue\n          :selected-layers=\"props.selectedLayers\"\n          :layers=\"dataStore.getLayers()\"\n        />\n      </div>  -->\n     \n      <div\n        id=\"MenuControlContent\"\n        :class=\"[activeTab === 'MenuControlContent' ? 'activeTab' : 'inactiveTab']\"\n      >\n        <MenuControl \n          :selected-controls=\"props.selectedControls\"\n        />\n      </div>\n    </template>\n    <!-- Boutons de navigation du menu lateral -->\n    <template #navButtons>\n      <MenuLateralNavButton\n        v-for=\"tab in tabArray\"\n        :id=\"tab.componentName\"\n        :key=\"tab.componentName\"\n        :visibility=\"tab.visibility\"\n        :side=\"side\"\n        :icon=\"tab.icon\"\n        :active=\"tabIsActive(tab.componentName)\"\n        :title=\"tab.title\"\n        :secondary=\"tab.secondary\"\n        @click=\"tab.onClick\"\n        @tab-clicked=\"tabClicked\"\n      />\n    </template>\n  </MenuLateralWrapper>\n</template>\n\n\n\n<style scoped lang=\"scss\">\n  .activeTab {\n    display : block;\n  }\n\n  .inactiveTab {\n    display : none;\n  }\n</style>\n","<script lang=\"js\">\n/**\n * @description\n * Affichage d'une modale de connexion\n */\nexport default {\n  name: 'ModalLogin'\n};\n</script>\n\n<script setup lang=\"js\">\nimport { useRouter } from 'vue-router';\nimport { useEulerian } from '@/plugins/Eulerian';\nimport { useMapStore } from \"@/stores/mapStore\";\n\nconst eulerian = useEulerian();\nconst router = useRouter();\nconst store = useMapStore();\n\nconst title = \"Se connecter à cartes.gouv.fr\";\nconst icon = 'fr-icon-account-fill';\nconst actions = [\n  {\n    label: 'Se connecter',\n    onClick () {\n      // on renvoie vers la route de login\n      opened.value = false;\n      router.push({ path : '/login' });\n    }\n  },\n  {\n    label: 'Annuler',\n    tertiary: true,\n    onClick () {\n      opened.value = false;\n    }\n  },\n];\n\nconst opened = ref(false);\nconst style = ref({ display: \"none\" });\nconst active = ref(false);\n\nif (opened.value) {\n  eulerian.pause();\n}\n\nconst openModalLogin = (active) => {\n  style.value = (active) ? { display: \"block\" } : { display: \"none\" };\n  opened.value = true;\n  eulerian.pause();\n};\n\nconst onModalLoginClose = () => {\n  opened.value = false;\n  eulerian.resume();\n};\n\nconst onModalLoginNoInformation = (status) => {\n  console.log(status);\n  // enregistrer l'information dans le localStorage\n  store.noLoginInformation = status;\n};\n\ndefineExpose({\n  openModalLogin,\n  onModalLoginClose\n});\n\n</script>\n\n<template>\n  <DsfrModal \n    :opened=\"opened\" \n    :title=\"title\"\n    size=\"md\" \n    :icon=\"icon\"\n    :is-alert=\"true\"\n    :actions=\"actions\"\n    @close=\"onModalLoginClose\"\n  >\n    <!-- slot : c'est ici que l'on customise le contenu ! -->\n    <template #default>\n      <p>\n        Pour enregistrer vos données, vous devez vous identifier \n        ou créer un compte sur cartes.gouv.fr\n      </p>\n      <div :style=\"style\">\n        <DsfrCheckbox\n          :model-value=\"active\"\n          label=\"Ne plus afficher ce message\"\n          @update:model-value=\"onModalLoginNoInformation\"\n        />\n      </div>\n    </template>\n  </DsfrModal>\n</template>\n\n<style>\nbutton[title=\"ne plus afficher ce message\"] {\n  margin-top: 16px;\n}\n</style>","<script lang=\"js\">\n/**\n * @description\n * Panneau de partage de carte\n *\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrButton}\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrModal}\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrShare}\n */\nexport default {};\n</script>\n\n<script lang=\"js\" setup>\nimport { useClipboard } from '@vueuse/core'\nimport { useMatchMedia } from '@/composables/matchMedia';\n\nconst isSmallScreen = useMatchMedia('SM')\n\nconst props = defineProps({\n  copiedText: String,\n  label: String,\n  description : String\n});\nconst clipboardSource = ref('')\nconst { text, copy, copied, isSupported } = useClipboard({ clipboardSource })\n\n\nconst iconBeforeCopy = \"ri:file-copy-line\"\nconst iconAfterCopy = \"ic:outline-check\"\n\nconst BtnLabelBeforeCopy = \"Copier\"\nconst BtnLabelAfterCopy = \"Copié\"\n\nconst icon = ref(iconBeforeCopy)\nconst BtnLabel = ref(BtnLabelBeforeCopy)\nconst defaultScale = ref(0.8325);\nconst iconProps = computed(() => typeof icon.value === 'string'\n  ? { scale: defaultScale.value, name: icon.value }\n  : { scale: defaultScale.value, ...icon.value },\n);\n\nfunction copyAction() {\n    copy(props.copiedText)\n    icon.value = iconAfterCopy\n    BtnLabel.value = BtnLabelAfterCopy\n    setTimeout(() => {\n        icon.value = iconBeforeCopy\n        BtnLabel.value = BtnLabelBeforeCopy\n    }, 5000)\n}\n\n\nonMounted(() => {\n\n})\n</script>\n\n<template>\n  <div>\n    <div class=\"title-copy\">\n      <div>{{ label }}</div>            \n      <DsfrButton\n        secondary\n        icon-right\n        :icon-only=\"isSmallScreen\"\n        :icon=\"iconProps\"\n        @click=\"copyAction()\"\n      >\n        {{ BtnLabel }}\n      </DsfrButton>\n    </div>\n    <p class=\"fr-hint-text hint-class\">\n      {{ description }}\n    </p>            \n  </div>    \n</template>\n\n<style scoped>\n.title-copy {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n}\n</style>\n","<script lang=\"js\">\n/**\n * @description\n * Panneau de partage de carte\n *\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrButton}\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrModal}\n * {@link https://github.com/dnum-mi/vue-dsfr/tree/main/src/components/DsfrShare}\n */\nexport default {};\n</script>\n\n<script lang=\"js\" setup>\nimport { useDataStore }  from '@/stores/dataStore';\nimport { useMapStore }  from '@/stores/mapStore';\nimport { useEulerian } from '@/plugins/Eulerian.js';\nimport TextCopyToClipboard from '@/components/utils/TextCopyToClipboard.vue';\n\nconst eulerian = useEulerian();\nconst dataStore = useDataStore();\nconst mapStore = useMapStore();\n\n// paramètres du composant de la modale\nconst title = \"Partager une carte\";\nconst size = \"lg\";\n\nconst shareModalOpened = ref(false);\n\nconst onModalShareOpen = () => {\n  shareModalOpened.value = true;\n  eulerian.pause();\n};\nconst onModalShareClose = () => {\n  shareModalOpened.value = false;\n  eulerian.resume();\n};\n\n// les paramètres du composant de partage\nconst contacts = dataStore.getContacts();\nconst permalinkEncoded = computed(() => {\n  return encodeURI(mapStore.permalink).replaceAll(\"&\", \"%26\")\n})\nconst mail = computed(() => {\n  return  {\n    address : contacts.mail,\n    subject : \"Cartes à consulter sur cartes.gouv.fr\",\n    body : \"Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A\" + `${permalinkEncoded.value}`\n  }\n});\n\nconst shareMail = computed(() => {\n  return {\n    \"to\" : `mailto:${mail.value.address}?subject=${mail.value.subject}&body=${mail.value.body}`,\n    \"label\" : \"Envoyer un mail\"\n  };\n})\nconst shareNetworks = computed(() => {\n  return [\n    {\n    \"name\": \"facebook\",\n    \"label\": \"Partager sur Facebook\",\n    \"url\": contacts.networks.facebook + \"?display=popup&u=\" + mapStore.permalink\n    },\n    {\n      \"name\": \"linkedin\",\n      \"label\": \"Partager sur LinkedIn\",\n      \"url\": contacts.networks.linkedin + \"?url=\" + mapStore.permalink + \"&title=Ma%20carte%20IGN\"\n    },\n    {\n      \"name\": \"instagram\",\n      \"label\": \"Partager sur Instagram\",\n      \"url\": contacts.networks.instagram\n    }\n  ]\n});\n\n// creation de l'iframe de partage\nconst iframe = computed(() => {\n return `<iframe\n    width=\"600\" height=\"400\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"\n    sandbox=\"allow-forms allow-scripts allow-same-origin\"\n    src=\"${mapStore.permalinkShare}\"\n    allowfullscreen>\n  </iframe>`;\n});\n\nconst target = ref(null);\n\nonMounted(() => {\n  nextTick(function () {\n    //code here\n  })\n});\n\nonBeforeMount(() => {\n  nextTick(function () {\n    //code here\n  })\n});\n\ndefineExpose({\n  onModalShareOpen,\n  onModalShareClose\n})\n</script>\n\n<template>\n  <DsfrModal\n    :opened=\"shareModalOpened\"\n    :title=\"title\"\n    :size=\"size\"\n    @close=\"onModalShareClose\"\n  >\n    <!-- slot : c'est ici que l'on customise le contenu ! -->\n    <div>\n      <p>\n        <DsfrShare\n          :mail=\"shareMail\"\n          :networks=\"shareNetworks\"\n          title=\"Partages\"\n        />\n      </p>\n    </div>\n    <div>\n      <p>\n        <DsfrInput\n          v-model=\"mapStore.permalink\"\n          label=\"Lien permanent vers la carte\"\n          placeholder=\"\"\n          label-visible\n          readonly\n          description-id=\"\"\n        >\n          <template #label>\n            <TextCopyToClipboard\n              :copied-text=\"mapStore.permalink\"\n              label=\"Lien permanent\"\n              description=\"Toute personne ayant ce lien peut visualiser votre carte sans avoir à se créer de compte.\"\n            />\n          </template>\n        </DsfrInput>\n      </p>\n      <p>\n        <DsfrInput\n          v-model=\"iframe\"\n          placeholder=\"\"\n          is-textarea\n          label-visible\n          readonly\n          description-id=\"\"\n          style=\"height: 200px;\"\n        >\n          <template #label>\n            <TextCopyToClipboard\n              :copied-text=\"iframe\"\n              label=\"Iframe\"\n              description=\"Insérer directement dans vos mails,  Réseaux sociaux ...\"\n            />\n          </template>\n        </DsfrInput>\n      </p>\n    </div>\n  </DsfrModal>\n</template>\n\n<style>\n  .fr-btn--instagram::before {\n    -webkit-mask-image: url(\"../../../../node_modules/@gouvfr/dsfr/dist/icons/logo/instagram-line.svg\");\n    mask-image: url(\"../../../../node_modules/@gouvfr/dsfr/dist/icons/logo/instagram-line.svg\");\n  }\n\n  /* le composant share de vue dsfr ne permet pas de retirer le bouton de partage par défaut. On le cache en css */\n  ul.fr-btns-group button.fr-btn--copy {\n    display: none;\n  }\n</style>\n\n<style scoped>\n  \n  .share-iframe-input {\n    height: 200px;\n  }\n\n</style>\n","<script lang=\"js\">\n/**\n * @description\n * Affichage d'une modale de sauvegarde\n */\nexport default {\n  name: 'ModalSave'\n};\n</script>\n\n<script setup lang=\"js\">\nimport { useRouter } from 'vue-router';\nimport { useEulerian } from '@/plugins/Eulerian';\n\nconst eulerian = useEulerian();\nconst router = useRouter();\n\nvar delegateCbk = null;\n\nconst title = \"Sauvegarde sur l'espace personnel\";\nconst icon = 'fr-icon-save-fill';\nconst actions = [\n  {\n    label: 'Sauvegarder',\n    onClick () {\n      opened.value = false;\n      // on déclenche l'appel de la fonction de sauvegarde\n      // qui a été transmise par le composant parent\n      // et qui est stockée dans la variable delegateCbk\n      delegateCbk();\n    }\n  },\n  {\n    label: 'Annuler',\n    tertiary: true,\n    onClick () {\n      opened.value = false;\n      delegateCbk = null;\n    }\n  },\n];\n\nconst opened = ref(false);\n\nif (opened.value) {\n  eulerian.pause();\n}\nconst openModalSave = () => {\n  opened.value = true;\n  eulerian.pause();\n};\n\nconst onModalSaveClose = () => {\n  opened.value = false;\n  eulerian.resume();\n};\n\n/**\n * On transmet la fonction d'execution de la sauvegarde\n * @param cbk\n */\nconst onDelegateCbk = (cbk) => {\n  delegateCbk = cbk;\n}\n\ndefineExpose({\n  openModalSave,\n  onModalSaveClose,\n  onDelegateCbk\n});\n\n</script>\n\n<template>\n  <DsfrModal \n    :opened=\"opened\" \n    :title=\"title\"\n    size=\"md\" \n    :icon=\"icon\"\n    :is-alert=\"true\"\n    :actions=\"actions\"\n    @close=\"onModalSaveClose\"\n  >\n    <!-- slot : c'est ici que l'on customise le contenu ! -->\n    <template #default>\n      <p>\n        Voulez-vous enregistrer sur votre espace personnel la donnée importée ?\n      </p>\n    </template>\n  </DsfrModal>\n</template>\n\n<style>\n\n</style>","<script setup lang=\"ts\">\n// plugin local\nimport { useBaseUrl } from '@/composables/baseUrl';\n// plugin local\nimport { useEulerian } from '@/plugins/Eulerian';\n\nconst eulerian = useEulerian();\n\nconst welcomeModalOpened = ref(false);\n\nconst openModalWelcome = () => {\n  welcomeModalOpened.value = true;\n  eulerian.pause();\n}\n\nconst onWelcomeModalClose = () => {\n  welcomeModalOpened.value = false;\n  eulerian.resume();\n}\n\ndefineExpose({\n  openModalWelcome,\n  onWelcomeModalClose\n});\n\nconst size = \"lg\";\n\nconst logoText = \"République Française\";\n\nconst iconProps = ref({ scale: 1.25, name: 'ri:map-2-line' });\n\nonMounted(() => {\n});\n\n</script>\n\n<template>\n  <!-- Modale : Paramètres d’affichage -->\n  <DsfrModal \n    ref=\"modal\"\n    title=\"\"\n    :opened=\"welcomeModalOpened\" \n    :size=\"size\" \n    class=\"welcome-modal\"\n    @close=\"onWelcomeModalClose\"\n  >\n    <div class=\"fr-container\">\n      <div class=\"fr-grid-row logo-row\">\n        <DsfrLogo\n          :logo-text=\"logoText\"\n          data-testid=\"header-logo\"\n          class=\"maxwidth\"\n        />\n        <img\n          src=\"https://data.geopf.fr/annexes/ressources/header/cartes-gouv-logo.svg\"\n          alt=\"\"\n        >\n      </div>\n      <div class=\"fr-grid-row content\">\n        <h2>Bienvenue sur cartes.gouv.fr</h2>\n        <p>Retrouvez ici la référence de la cartographie publique pour explorer, connaître et piloter le territoire :</p>\n        <div><span class=\"icon vicon purple-glycine\"><VIcon v-bind=\"iconProps\" /></span>Accédez à une vaste bibliothèque de cartes et de données</div>\n        <div><span class=\"icon yellow-tournesol\"><i class=\"fr-icon-brush-line\" /></span>Créez et partagez vos propres cartes</div>\n        <div><span class=\"icon green-archipel\"><i class=\"fr-icon-database-line\" /></span>Hébergez vos données et vos cartes en toute autonomie</div>\n      </div>\n    </div>\n    <div class=\"fr-grid-row flex-end\">\n      <DsfrButton \n        secondary\n      >\n        <a :href=\"useBaseUrl() + '/decouvrir'\">En savoir plus</a>\n      </DsfrButton>\n      <DsfrButton \n        primary \n        icon=\"fr-icon-arrow-right-s-line\"\n        icon-right\n        @click=\"onWelcomeModalClose\"\n      >\n        Accéder aux cartes\n      </DsfrButton>\n    </div>\n  </DsfrModal>\n</template>\n<style scoped lang=\"scss\">\n.welcome-modal {\n  z-index: 10000;\n}\n.fr-container {\n    padding-left: 3rem;\n    padding-right: 3rem;  \n}\n.maxwidth {\n    max-width: 140px;\n}\n.flex-end {\n    justify-content: flex-end;\n    gap: 1rem;\n    margin-top: 1.5rem;\n}\nimg {\n    width: 4.5rem;\n    height: 4.5rem;\n}\n.logo-row {\n    align-items: center;\n    margin-bottom: 1.5rem;\n    scale: 0.595;\n    transform-origin: left;\n}\n.fr-container {\n    gap: 1.5rem;\n}\n.content {\n    div {\n        margin-bottom: 1rem;\n    }\n}\ndiv > span {\n    margin-right: 0.5rem;\n    border-radius: 50%;\n    height: 34px;\n    width: 34px;\n    i::before, svg:first-child {\n        scale: 0.9;\n    }\n}\n.icon {\n  display: inline-flex;\n  align-items: center; \n  justify-content: center;\n}\n.vicon {\n    margin-left: 0.1rem;\n}\n.yellow-tournesol {\n    background-color: var(--yellow-tournesol-925-125);\n}\n.purple-glycine {\n    background-color: var(--purple-glycine-925-125);\n}\n.green-archipel {\n    background-color: var(--green-archipel-925-125);\n}\n</style>","<script setup lang=\"ts\">\nimport Carto from \"@/components/carte/Carto.vue\";\nimport LeftMenuTool from \"@/components/menu/LeftMenuTool.vue\";\nimport RightMenuTool from \"@/components/menu/RightMenuTool.vue\";\n\nimport LoginModal from \"@/components/modals/ModalLogin.vue\";\nimport ShareModal from \"@/components/carte/control/ShareModal.vue\";\nimport PrintModal from \"@/components/carte/control/PrintModal.vue\";\nimport SaveModal from \"@/components/modals/ModalSave.vue\";\n\nimport ModalWelcome from \"@/components/modals/ModalWelcome.vue\";\n\nimport { useDataStore } from \"@/stores/dataStore\"\nimport { useMapStore } from \"@/stores/mapStore\"\nimport { useLogger } from 'vue-logger-plugin';\nimport { useAppStore } from \"@/stores/appStore\"\n\nimport { fromShare } from \"@/features/share\";\n\n// lib notification\nimport { push } from \"notivue\";\n\nconst mapStore = useMapStore();\nconst dataStore = useDataStore();\nconst appStore = useAppStore();\n\nconst refModalLogin = ref<InstanceType<typeof LoginModal> | null>(null);\nconst refModalShare = ref<InstanceType<typeof ShareModal> | null>(null);\nconst refModalSave = ref<InstanceType<typeof SaveModal> | null>(null);\n\nconst refModalWelcome = ref<InstanceType<typeof ModalWelcome> | null>(null);\n\nprovide(\"refModalShare\", refModalShare);\nprovide(\"refModalLogin\", refModalLogin);\nprovide(\"refModalSave\", refModalSave);\nprovide(\"refModalWelcome\", refModalWelcome);\n// Les gestionnaires d'évenements des modales\nconst onModalShareOpen = () => {\n  refModalShare.value.onModalShareOpen()\n}\n\nconst emitter = inject('emitter') as any;\nconst onModalPrintOpen = () => {\n  emitter.dispatchEvent('printmodal:open');\n}\nconst onModalLoginOpen = () => {\n  refModalLogin.value.openModalLogin(false)\n}\n\nconst notifyAndCleanLayer = (id: string) => {\n  // on ne peut pas la trouver, on ne l'ajoute pas\n  mapStore.removeLayer(id);\n  push.warning({\n    title: \"Exception\",\n    message: \"La couche \" + id + \" n'existe pas !\"\n  });\n};\n\nconst notifyAndCleanBookmark = (id: string) => {\n  // on ne peut pas la trouver, on ne l'ajoute pas\n  mapStore.removeBookmark(id);\n  push.warning({\n    title: \"Exception\",\n    message: \"Le bookmark \" + id + \" n'existe pas !\"\n  });\n};\n\n// INFO\n// Les listes sont initialisées via le mapStore, et\n// elles sont transmises à la cartographie à chaque fois\n// que le mapStore est modifié.\n// Chaque fois que des  modules modifient le mapStore en\n// ajoutant des couches (ex. LayerSwitcher), on repasse\n// via la reactivité dans ce cycle.\n\n// liste des couches utilisateurs disponibles\n// (cette liste est recalculée à chaque fois que le mapStore est modifié)\nconst selectedLayers = computed(() => {\n  var layersValided: any = [];\n  var layers = mapStore.getLayers();\n  for (let i = 0; i < layers.length; i++) {\n    var layerId = layers[i];\n    var layer = dataStore.getLayerByID(layerId);\n    if (!layer) {\n      notifyAndCleanLayer(layerId);\n      continue;\n    }\n    // les options de la couche sont récuperées dans le mapStore (permalink)\n    var props = mapStore.getLayerProperty(layerId);\n    // ajouter les options des couches\n    // ex. l'opacité et la visibilité\n    layer.position = props.position;\n    layer.opacity = props.opacity;\n    layer.visible = props.visible;\n    layer.grayscale = props.grayscale;\n    if (props.style) {\n      // INFO\n      // on ajoute le style de la couche si il est défini\n      // ex. pour les couches de type TMS / MapBox\n      layer.style = props.style;\n    }\n    layersValided.push(layer);\n  }\n  return layersValided;\n});\n\n// liste des favoris selectionnés par l'utilisateur, donc disponibles dans le permalien\n// (cette liste est recalculée à chaque fois que le mapStore est modifié)\nconst selectedBookmarks = computed(() => {\n  var bookmarksValided: any = [];\n  var bookmarks = mapStore.getBookmarks();\n  for (let i = 0; i < bookmarks.length; i++) {\n    var bookmark = bookmarks[i];\n    // transformer un partage d'URL en un objet\n    var obj = fromShare(decodeURIComponent(bookmark));\n    if (!obj) {\n      // on ne peut pas le transformer, on ne l'ajoute pas\n      notifyAndCleanBookmark(bookmark);\n      continue;\n    }\n    // INFO\n    // on a une condition spéciale pour écarter les documents\n    // que l'on ne souhaite pas intégrer dans le mécanisme de reactivité\n    //  ex. les favoris issus de l'outil de dessin\n    //  car le widget Drawing a son propre mécanisme\n    //  d'ajout de couche sur la carte...\n    if (!obj.stop) {\n      // on ajoute une clef unique... c'est un besoin interne\n      obj.key = obj.id;\n      /*\n      * Liste des paramètres utiles (liste non exhaustive):\n      * - url\n      * - id\n      * - name\n      * - description\n      * - format\n      * - opacity\n      * - visible\n      * - grayscale\n      * - position\n      * - type (ex. drawing, import, service...)\n      * - stop\n      * - ...\n      */\n      bookmarksValided.push(obj);\n    }\n  }\n  return bookmarksValided;\n});\n\n// liste des contrôles utilisateurs disponibles\n// (cette liste est recalculée à chaque fois que le mapStore est modifié)\nconst selectedControls = computed(() => {\n  let controls = mapStore.getControls();\n  return controls;\n});\n\nconst cartoRef = ref(null); // FIXME Référence au composant Carto utilisée ?\n\nonMounted(() => {\n  if (appStore.siteOpened && refModalWelcome.value) {\n    refModalWelcome.value.openModalWelcome();\n  }\n});\n\nprovide(\"selectedLayers\", selectedLayers);\n</script>\n\n<template>\n  <div id=\"map-and-tools-container\">\n    <!-- Le menu de gauche : le menu tierce (et les favoris)\n     il y figure la liste des abonnements aux evenements sur le clic\n     d'un élement du menu tierce\n    -->\n    <LeftMenuTool\n      @on-modal-share-open=\"onModalShareOpen\"\n      @on-modal-print-open=\"onModalPrintOpen\"\n      @on-modal-login-open=\"onModalLoginOpen\"\n    />\n\n    <!-- Module cartographique :\n     - liste des couches selectionnées\n     - liste des controles selectionnés\n    -->\n    <Carto\n      ref=\"cartoRef\"\n      :selected-layers=\"selectedLayers\"\n      :selected-controls=\"selectedControls\"\n      :selected-bookmarks=\"selectedBookmarks\"\n    />\n\n    <!-- Le menu des contrôles et le catalogue -->\n    <RightMenuTool\n      :selected-layers=\"selectedLayers\"\n      :selected-controls=\"selectedControls\"\n    />\n    <!-- Liste des modales -->\n    <div class=\"modal-container\">\n      <ShareModal ref=\"refModalShare\" />\n      <LoginModal ref=\"refModalLogin\" />\n      <SaveModal ref=\"refModalSave\" />\n      <!-- Modale : Welcome (+ Eulerian) -->\n      <ModalWelcome ref=\"refModalWelcome\" />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n  #map-and-tools-container{\n    margin-left: 0;\n    width: inherit;\n    height: inherit;\n    display: flex;\n  }\n</style>","<script lang=\"js\">\n/**\n * @see https://vue-ds.fr/composants/DsfrAlert\n * @description\n * Affichage d'une modale d'alertes afin de prévenir \n * les utilisateurs d'une opération de maintenance\n * \n * Cette modale est configurable via le fichier d'alertes : \n * ```json\n * {\n *    \"id\": \"edef2f50-4b68-4d3b-bf90-7c247b97b04f\",\n *    \"title\": \"Test 1\",\n *    \"description\": \"Test alerte 1\",\n *    \"link\": {\n *      \"url\": \"/niveau-de-service\",\n *      \"label\": \"En savoir plus\"\n *    },\n *    \"severity\": \"warning\",\n *    \"details\": \"C'est les détails\",\n *    \"date\": \"2025-06-24T20:48:07.455Z\",\n *    \"visibility\": {\n *      \"homepage\": false,\n *      \"contact\": false,\n *      \"map\": true,\n *      \"serviceLevel\": true\n *    }\n * }\n * ```\n * \n * Le champ **type** permet de choisir le type d'alerte :\n * - error (Erreur), \n * - success (Succès), \n * - warning (Avertissement),\n * - info (Information)\n * \n * Le champ **opened** permet d'activer (true) / désactiver (false) la modale au chargement du site.\n * \n */\nexport default {};\n</script>\n<script setup lang=\"js\">\nimport { useDataStore } from \"@/stores/dataStore\";\nimport { useMapStore } from \"@/stores/mapStore\";\nimport { useEulerian } from '@/plugins/Eulerian';\nimport { useBaseUrl } from '@/composables/baseUrl';\n\nconst eulerian = useEulerian();\nconst data = useDataStore();\n\nconst title = \"Messages d'informations\";\nconst alerts = computed(() => {\n  var lstAlerts = data.getAlerts();\n  for (let index = 0; index < lstAlerts.length; index++) {\n    const element = lstAlerts[index];\n    element.closed = false;\n  }\n  return lstAlerts;\n});\n\nconst description = (alert) => {\n  // INFO\n  // link : par défaut, url relative à cartes.gouv.fr\n  var url = alert.link.url;\n  if (url.startsWith('/')) {\n    url = useBaseUrl() + alert.link.url;\n  }\n  var message = `${alert.description} - ${alert.details} <a href=\"${url}\" title=\"ouvre une nouvelle fenêtre\" target=\"_blank\" class=\"fr-notice__link\">${alert.link.label}</a>`;\n  return `${message}`;\n};\n\nconst opened = ref(alerts.value.length !== 0);\n\nif (opened.value) {\n  eulerian.pause();\n}\nconst onModalInformationClose = () => {\n  opened.value = false;\n  eulerian.resume();\n};\n\nconst onClose = (id) => {\n  alerts.value.forEach((alert) => {\n    if (alert.id === id) {\n      alert.closed = true // mettre la propriété closed à true pour cette alerte\n    }\n  })\n}\n</script>\n\n<template>\n  <DsfrModal \n    :opened=\"opened\" \n    :title=\"title\"\n    size=\"md\" \n    @close=\"onModalInformationClose\"\n  >\n    <!-- slot : c'est ici que l'on customise le contenu ! -->\n    <DsfrAlert\n      v-for=\"alert in alerts\"\n      :key=\"`alert-${alert.id}`\"\n      :type=\"alert.severity\"\n      :title=\"alert.title\"\n      :closed=\"alert.closed\"\n      :closeable=true\n      @close=\"onClose(alert.id)\"\n    >\n      <div v-html=\"description(alert)\"></div>\n    </DsfrAlert>\n  </DsfrModal>\n</template>\n\n<style></style>","<script setup lang=\"ts\">\nimport CartoAndTools from '@/components/CartoAndTools.vue'\nimport Patience from '@/components/utils/Patience.vue'\nimport StoreData from '@/components/StoreData.vue';\nimport ModalInformation from '@/components/modals/ModalInformation.vue'\n</script>\n\n<template>\n  <Suspense>\n    <!-- Chargement du dataStore avec une patience \n          avant afficahge de la cartographie \n      -->\n    <StoreData>\n      <!-- Modale : Informations -->\n      <div class=\"fr-container fr-container--fluid fr-container-md\">\n        <ModalInformation />\n      </div>\n      <CartoAndTools />\n    </StoreData>\n\n    <!-- loading state via #fallback slot -->\n    <template #fallback>\n      <div class=\"patience-container\">\n        <Patience />\n      </div>\n    </template>\n  </Suspense>\n</template>\n\n<style>\n  .patience-container{\n    margin-left: 0;\n    width: inherit;\n    height: 76.8vh;\n    display: flex;\n  }\n</style>"],"names":["__default__","mapStore","useMapStore","rightControls","useControlsPosition","hasControls","computed","c","props","__props","icon","widthValue","paddingValue","is_expanded","_useModel","widthMenu","ref","padding","cssWidthMenu","cssPadding","cssWidthMenuContent","menuTabs","closeMenu","openMenu","closeButton1","closeButton2","__expose","_createElementBlock","_createElementVNode","_renderSlot","_ctx","_withDirectives","_hoisted_1","_hoisted_2","_createVNode","_component_DsfrButton","_hoisted_3","domStore","useDomStore","emit","__emit","tabClicked","closeLeftPanels","closeRightPanels","controlsPosition","closePanel","control","button","e","event","clickButton","id","onMounted","_unref","_normalizeClass","emitter","inject","isCompact","onOpenControlReporting","openControl","controlName","onToggleHeaderCompact","service","authenticatedValue","authenticatedClass","BookmarksButton","_openBlock","$emit","_cache","_component_DsfrToggleSwitch","$event","createTempCarteDocument","data","uuid","action","buttons","name","permalink","push","t","nextTick","_component_DsfrButtonGroup","log","useLogger","copy","useClipboard","onAddData","document","fct","response","getLayersFromPermalink","url","toShare","onBeforeMount","refDivRename","useTemplateRef","rename","onClickButtonRename","onClickButtonDelete","o","onClickButtonExport","mimeType","content","ext","filename","link","charset","onClickButtonCopyPermalink","onClickButtonValidateRename","onClickButtonCancelRename","buttonsCommon","buttonsMap","buttonsData","_createTextVNode","_toDisplayString","_createBlock","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_DsfrInput","_hoisted_8","searchString","updateSearch","tabListName","tabTitles","selectedIndex","label","update","lstData","type","documents","i","extensions","el","lstMap","map","onUpdateBookmark","timestamp","addMap","refDivMapName","addData","onClickMapButtonValidateName","createCarteDocument","onClickMapButtonCancelName","_component_DsfrSearchBar","_component_DsfrTabs","_component_DsfrTabContent","_Fragment","_renderList","MenuBookMarkEntry","IsEmpty","empty","key","element","toggle","documentsIsEmpty","value","MenuBookMarkNoData","MenuBookMarkDataList","authenticated","MenuBookMarkLoggued","side","leftControls","tabArray","activeTab","wrapper","width","newTab","tabIsActive","componentName","onBookMarksOpen","tabRefs","onOpenControl","watch","newVal","_a","MenuLateralWrapper","MenuTierce","MenuBookMarks","tab","MenuLateralNavButton","selectedControlsModel","isActive","dsfrIcon","onClick","onUpdated","_component_DsfrTooltip","VIcon","_mergeProps","$attrs","opts","useControlsMenuOptions","allOptions","opt","values","index","idx","ControlListElement","MenuControl","eulerian","useEulerian","router","useRouter","store","title","actions","opened","style","active","openModalLogin","onModalLoginClose","onModalLoginNoInformation","status","_component_DsfrModal","_component_DsfrCheckbox","isSmallScreen","useMatchMedia","iconBeforeCopy","iconAfterCopy","BtnLabelBeforeCopy","BtnLabelAfterCopy","BtnLabel","defaultScale","iconProps","copyAction","dataStore","useDataStore","size","shareModalOpened","onModalShareOpen","onModalShareClose","contacts","permalinkEncoded","mail","shareMail","shareNetworks","iframe","_component_DsfrShare","TextCopyToClipboard","delegateCbk","openModalSave","onModalSaveClose","cbk","logoText","welcomeModalOpened","openModalWelcome","onWelcomeModalClose","_component_DsfrLogo","_component_VIcon","useBaseUrl","appStore","useAppStore","refModalLogin","refModalShare","refModalSave","refModalWelcome","provide","onModalPrintOpen","onModalLoginOpen","notifyAndCleanLayer","notifyAndCleanBookmark","selectedLayers","layersValided","layers","layerId","layer","selectedBookmarks","bookmarksValided","bookmarks","bookmark","obj","fromShare","selectedControls","cartoRef","LeftMenuTool","Carto","RightMenuTool","ShareModal","LoginModal","SaveModal","ModalWelcome","alerts","lstAlerts","description","alert","message","onModalInformationClose","onClose","_component_DsfrAlert","_Suspense","Patience","StoreData","ModalInformation","CartoAndTools"],"mappings":"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"}