var ni=Object.defineProperty;var Ln=n=>{throw TypeError(n)};var ii=(n,e,t)=>e in n?ni(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ri=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var _n=(n,e,t)=>ii(n,typeof e!="symbol"?e+"":e,t),si=(n,e,t)=>e.has(n)||Ln("Cannot "+t);var On=(n,e,t)=>e.has(n)?Ln("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);var An=(n,e,t)=>(si(n,e,"access private method"),t);var oi=ri(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.0
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(n,e){const t=new Set(n.split(","));return i=>t.has(i)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),isModelListener=n=>n.startsWith("onUpdate:"),extend$5=Object.assign,remove=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(n,e)=>hasOwnProperty$1.call(n,e),isArray$1=Array.isArray,isMap=n=>toTypeString(n)==="[object Map]",isSet=n=>toTypeString(n)==="[object Set]",isDate=n=>toTypeString(n)==="[object Date]",isRegExp=n=>toTypeString(n)==="[object RegExp]",isFunction$1=n=>typeof n=="function",isString=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject$1=n=>n!==null&&typeof n=="object",isPromise=n=>(isObject$1(n)||isFunction$1(n))&&isFunction$1(n.then)&&isFunction$1(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject$1=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},def=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},looseToNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e},toNumber=n=>{const e=isString(n)?Number(n):NaN;return isNaN(e)?n:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(n){if(isArray$1(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=isString(i)?parseStringStyle(i):normalizeStyle(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(isString(n)||isObject$1(n))return n}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const e={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const i=t.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(n){let e="";if(isString(n))e=n;else if(isArray$1(n))for(let t=0;t<n.length;t++){const i=normalizeClass(n[t]);i&&(e+=i+" ")}else if(isObject$1(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function normalizeProps(n){if(!n)return null;let{class:e,style:t}=n;return e&&!isString(e)&&(n.class=normalizeClass(e)),t&&(n.style=normalizeStyle(t)),n}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}function looseCompareArrays(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=looseEqual(n[i],e[i]);return t}function looseEqual(n,e){if(n===e)return!0;let t=isDate(n),i=isDate(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=isSymbol(n),i=isSymbol(e),t||i)return n===e;if(t=isArray$1(n),i=isArray$1(e),t||i)return t&&i?looseCompareArrays(n,e):!1;if(t=isObject$1(n),i=isObject$1(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),d=e.hasOwnProperty(o);if(a&&!d||!a&&d||!looseEqual(n[o],e[o]))return!1}}return String(n)===String(e)}function looseIndexOf(n,e){return n.findIndex(t=>looseEqual(t,e))}const isRef$1=n=>!!(n&&n.__v_isRef===!0),toDisplayString=n=>isString(n)?n:n==null?"":isArray$1(n)||isObject$1(n)&&(n.toString===objectToString||!isFunction$1(n.toString))?isRef$1(n)?toDisplayString(n.value):JSON.stringify(n,replacer,2):String(n),replacer=(n,e)=>isRef$1(e)?replacer(n,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[stringifySymbol(i,s)+" =>"]=r,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>stringifySymbol(t))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,stringifySymbol=(n,e="")=>{var t;return isSymbol(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.0
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(n){return new EffectScope(n)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(n,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(n)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=batchedEffect,batchedEffect=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedEffect;function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;let n;for(;batchedEffect;){let e=batchedEffect;for(batchedEffect=void 0;e;){const t=e.nextEffect;if(e.nextEffect=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function prepareDeps(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(n){let e,t=n.depsTail;for(let i=t;i;i=i.prevDep)i.version===-1?(i===t&&(t=i.prevDep),removeSub(i),removeDep(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0;n.deps=e,n.depsTail=t}function isDirty(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&refreshComputed(e.dep.computed)===!1||e.dep.version!==e.version)return!0;return!!n._dirty}function refreshComputed(n){if(n.flags&2)return!1;if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===globalVersion))return;n.globalVersion=globalVersion;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&!isDirty(n)){n.flags&=-3;return}const t=activeSub,i=shouldTrack;activeSub=n,shouldTrack=!0;try{prepareDeps(n);const r=n.fn();(e.version===0||hasChanged(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{activeSub=t,shouldTrack=i,cleanupDeps(n),n.flags&=-3}}function removeSub(n){const{dep:e,prevSub:t,nextSub:i}=n;if(t&&(t.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=t,n.nextSub=void 0),e.subs===n&&(e.subs=t),!e.subs&&e.computed){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)removeSub(r)}}function removeDep(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function effect(n,e){n.effect instanceof ReactiveEffect&&(n=n.effect.fn);const t=new ReactiveEffect(n);e&&extend$5(t,e);try{t.run()}catch(r){throw t.stop(),r}const i=t.run.bind(t);return i.effect=t,i}function stop(n){n.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function cleanupEffect(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!activeSub||!shouldTrack)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink={dep:this,sub:activeSub,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,activeSub.flags&4&&addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=i)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()}finally{endBatch()}}}function addSub(n){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)addSub(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(n,e,t){if(shouldTrack&&activeSub){let i=targetMap.get(n);i||targetMap.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=new Dep),r.track()}}function trigger(n,e,t,i,r,s){const o=targetMap.get(n);if(!o){globalVersion++;return}let a=[];if(e==="clear")a=[...o.values()];else{const d=isArray$1(n),y=d&&isIntegerKey(t);if(d&&t==="length"){const v=Number(i);o.forEach((_,C)=>{(C==="length"||C===ARRAY_ITERATE_KEY||!isSymbol(C)&&C>=v)&&a.push(_)})}else{const v=_=>_&&a.push(_);switch(t!==void 0&&v(o.get(t)),y&&v(o.get(ARRAY_ITERATE_KEY)),e){case"add":d?y&&v(o.get("length")):(v(o.get(ITERATE_KEY)),isMap(n)&&v(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":d||(v(o.get(ITERATE_KEY)),isMap(n)&&v(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&v(o.get(ITERATE_KEY));break}}}startBatch();for(const d of a)d.trigger();endBatch()}function getDepFromReactive(n,e){var t;return(t=targetMap.get(n))==null?void 0:t.get(e)}function reactiveReadArray(n){const e=toRaw(n);return e===n?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(n)?e:e.map(toReactive))}function shallowReadArray(n){return track(n=toRaw(n),"iterate",ARRAY_ITERATE_KEY),n}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...n){return reactiveReadArray(this).concat(...n.map(e=>reactiveReadArray(e)))},entries(){return iterator(this,"entries",n=>(n[1]=toReactive(n[1]),n))},every(n,e){return apply$1(this,"every",n,e,void 0,arguments)},filter(n,e){return apply$1(this,"filter",n,e,t=>t.map(toReactive),arguments)},find(n,e){return apply$1(this,"find",n,e,toReactive,arguments)},findIndex(n,e){return apply$1(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return apply$1(this,"findLast",n,e,toReactive,arguments)},findLastIndex(n,e){return apply$1(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return apply$1(this,"forEach",n,e,void 0,arguments)},includes(...n){return searchProxy(this,"includes",n)},indexOf(...n){return searchProxy(this,"indexOf",n)},join(n){return reactiveReadArray(this).join(n)},lastIndexOf(...n){return searchProxy(this,"lastIndexOf",n)},map(n,e){return apply$1(this,"map",n,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...n){return noTracking(this,"push",n)},reduce(n,...e){return reduce(this,"reduce",n,e)},reduceRight(n,...e){return reduce(this,"reduceRight",n,e)},shift(){return noTracking(this,"shift")},some(n,e){return apply$1(this,"some",n,e,void 0,arguments)},splice(...n){return noTracking(this,"splice",n)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(n){return reactiveReadArray(this).toSorted(n)},toSpliced(...n){return reactiveReadArray(this).toSpliced(...n)},unshift(...n){return noTracking(this,"unshift",n)},values(){return iterator(this,"values",toReactive)}};function iterator(n,e,t){const i=shallowReadArray(n),r=i[e]();return i!==n&&!isShallow(n)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=t(s.value)),s}),r}const arrayProto=Array.prototype;function apply$1(n,e,t,i,r,s){const o=shallowReadArray(n),a=o!==n&&!isShallow(n),d=o[e];if(d!==arrayProto[e]){const _=d.apply(n,s);return a?toReactive(_):_}let y=t;o!==n&&(a?y=function(_,C){return t.call(this,toReactive(_),C,n)}:t.length>2&&(y=function(_,C){return t.call(this,_,C,n)}));const v=d.call(o,y,i);return a&&r?r(v):v}function reduce(n,e,t,i){const r=shallowReadArray(n);let s=t;return r!==n&&(isShallow(n)?t.length>3&&(s=function(o,a,d){return t.call(this,o,a,d,n)}):s=function(o,a,d){return t.call(this,o,toReactive(a),d,n)}),r[e](s,...i)}function searchProxy(n,e,t){const i=toRaw(n);track(i,"iterate",ARRAY_ITERATE_KEY);const r=i[e](...t);return(r===-1||r===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),i[e](...t)):r}function noTracking(n,e,t=[]){pauseTracking(),startBatch();const i=toRaw(n)[e].apply(n,t);return endBatch(),resetTracking(),i}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol));function hasOwnProperty(n){isSymbol(n)||(n=String(n));const e=toRaw(this);return track(e,"has",n),e.hasOwnProperty(n)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=isArray$1(e);if(!r){let d;if(o&&(d=arrayInstrumentations[t]))return d;if(t==="hasOwnProperty")return hasOwnProperty}const a=Reflect.get(e,t,isRef(e)?e:i);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(r||track(e,"get",t),s)?a:isRef(a)?o&&isIntegerKey(t)?a:a.value:isObject$1(a)?r?readonly(a):reactive(a):a}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const d=isReadonly(s);if(!isShallow(i)&&!isReadonly(i)&&(s=toRaw(s),i=toRaw(i)),!isArray$1(e)&&isRef(s)&&!isRef(i))return d?!1:(s.value=i,!0)}const o=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),a=Reflect.set(e,t,i,isRef(e)?e:r);return e===toRaw(r)&&(o?hasChanged(i,s)&&trigger(e,"set",t,i):trigger(e,"add",t,i)),a}deleteProperty(e,t){const i=hasOwn(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&trigger(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),i}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function get$6(n,e,t=!1,i=!1){n=n.__v_raw;const r=toRaw(n),s=toRaw(e);t||(hasChanged(e,s)&&track(r,"get",e),track(r,"get",s));const{has:o}=getProto(r),a=i?toShallow:t?toReadonly:toReactive;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function has$1(n,e=!1){const t=this.__v_raw,i=toRaw(t),r=toRaw(n);return e||(hasChanged(n,r)&&track(i,"has",n),track(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function size$2(n,e=!1){return n=n.__v_raw,!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$4(n,e=!1){!e&&!isShallow(n)&&!isReadonly(n)&&(n=toRaw(n));const t=toRaw(this);return getProto(t).has.call(t,n)||(t.add(n),trigger(t,"add",n,n)),this}function set$1(n,e,t=!1){!t&&!isShallow(e)&&!isReadonly(e)&&(e=toRaw(e));const i=toRaw(this),{has:r,get:s}=getProto(i);let o=r.call(i,n);o||(n=toRaw(n),o=r.call(i,n));const a=s.call(i,n);return i.set(n,e),o?hasChanged(e,a)&&trigger(i,"set",n,e):trigger(i,"add",n,e),this}function deleteEntry(n){const e=toRaw(this),{has:t,get:i}=getProto(e);let r=t.call(e,n);r||(n=toRaw(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&trigger(e,"delete",n,void 0),s}function clear$2(){const n=toRaw(this),e=n.size!==0,t=n.clear();return e&&trigger(n,"clear",void 0,void 0),t}function createForEach(n,e){return function(i,r){const s=this,o=s.__v_raw,a=toRaw(o),d=e?toShallow:n?toReadonly:toReactive;return!n&&track(a,"iterate",ITERATE_KEY),o.forEach((y,v)=>i.call(r,d(y),d(v),s))}}function createIterableMethod(n,e,t){return function(...i){const r=this.__v_raw,s=toRaw(r),o=isMap(s),a=n==="entries"||n===Symbol.iterator&&o,d=n==="keys"&&o,y=r[n](...i),v=t?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:_,done:C}=y.next();return C?{value:_,done:C}:{value:a?[v(_[0]),v(_[1])]:v(_),done:C}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function createInstrumentations(){const n={get(s){return get$6(this,s)},get size(){return size$2(this)},has:has$1,add:add$4,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},e={get(s){return get$6(this,s,!1,!0)},get size(){return size$2(this)},has:has$1,add(s){return add$4.call(this,s,!0)},set(s,o){return set$1.call(this,s,o,!0)},delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},t={get(s){return get$6(this,s,!0)},get size(){return size$2(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(s){return get$6(this,s,!0,!0)},get size(){return size$2(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,!1,!1),t[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),i[s]=createIterableMethod(s,!0,!0)}),[n,t,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,e){const t=e?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(hasOwn(t,r)&&r in i?t:i,r,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(n){return createReactiveObject(n,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(n,e,t,i,r){if(!isObject$1(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=getTargetType(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return n?!!n.__v_raw:!1}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return Object.isExtensible(n)&&def(n,"__v_skip",!0),n}const toReactive=n=>isObject$1(n)?reactive(n):n,toReadonly=n=>isObject$1(n)?readonly(n):n;function isRef(n){return n?n.__v_isRef===!0:!1}function ref(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||isShallow(e)||isReadonly(e);e=i?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=i?e:toReactive(e),this.dep.trigger())}}function triggerRef(n){n.dep.trigger()}function unref(n){return isRef(n)?n.value:n}function toValue$1(n){return isFunction$1(n)?n():unref(n)}const shallowUnwrapHandlers={get:(n,e,t)=>unref(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return isRef(r)&&!isRef(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Dep,{get:i,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(n){return new CustomRefImpl(n)}function toRefs(n){const e=isArray$1(n)?new Array(n.length):{};for(const t in n)e[t]=propertyToRef(n,t);return e}class ObjectRefImpl{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(n,e,t){return isRef(n)?n:isFunction$1(n)?new GetterRefImpl(n):isObject$1(n)&&arguments.length>1?propertyToRef(n,e,t):ref(n)}function propertyToRef(n,e,t){const i=n[e];return isRef(i)?i:new ObjectRefImpl(n,e,t)}class ComputedRefImpl{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){activeSub!==this&&(this.flags|=16,this.dep.notify())}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(n,e,t=!1){let i,r;return isFunction$1(n)?i=n:(i=n.get,r=n.set),new ComputedRefImpl(i,r,t)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(n,e=!1,t=activeWatcher){if(t){let i=cleanupMap.get(t);i||cleanupMap.set(t,i=[]),i.push(n)}}function watch$1(n,e,t=EMPTY_OBJ){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:a,call:d}=t,y=L=>r?L:isShallow(L)||r===!1||r===0?traverse(L,1):traverse(L);let v,_,C,E,S=!1,b=!1;if(isRef(n)?(_=()=>n.value,S=isShallow(n)):isReactive(n)?(_=()=>y(n),S=!0):isArray$1(n)?(b=!0,S=n.some(L=>isReactive(L)||isShallow(L)),_=()=>n.map(L=>{if(isRef(L))return L.value;if(isReactive(L))return y(L);if(isFunction$1(L))return d?d(L,2):L()})):isFunction$1(n)?e?_=d?()=>d(n,2):n:_=()=>{if(C){pauseTracking();try{C()}finally{resetTracking()}}const L=activeWatcher;activeWatcher=v;try{return d?d(n,3,[E]):n(E)}finally{activeWatcher=L}}:_=NOOP,e&&r){const L=_,k=r===!0?1/0:r;_=()=>traverse(L(),k)}const P=getCurrentScope(),x=()=>{v.stop(),P&&remove(P.effects,v)};if(s)if(e){const L=e;e=(...k)=>{L(...k),x()}}else{const L=_;_=()=>{L(),x()}}let T=b?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const R=L=>{if(!(!(v.flags&1)||!v.dirty&&!L))if(e){const k=v.run();if(r||S||(b?k.some((N,D)=>hasChanged(N,T[D])):hasChanged(k,T))){C&&C();const N=activeWatcher;activeWatcher=v;try{const D=[k,T===INITIAL_WATCHER_VALUE?void 0:b&&T[0]===INITIAL_WATCHER_VALUE?[]:T,E];d?d(e,3,D):e(...D),T=k}finally{activeWatcher=N}}}else v.run()};return a&&a(R),v=new ReactiveEffect(_),v.scheduler=o?()=>o(R,!1):R,E=L=>onWatcherCleanup(L,!1,v),C=v.onStop=()=>{const L=cleanupMap.get(v);if(L){if(d)d(L,4);else for(const k of L)k();cleanupMap.delete(v)}},e?i?R(!0):T=v.run():o?o(R.bind(null,!0),!0):v.run(),x.pause=v.pause.bind(v),x.resume=v.resume.bind(v),x.stop=x,x}function traverse(n,e=1/0,t){if(e<=0||!isObject$1(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,isRef(n))traverse(n.value,e,t);else if(isArray$1(n))for(let i=0;i<n.length;i++)traverse(n[i],e,t);else if(isSet(n)||isMap(n))n.forEach(i=>{traverse(i,e,t)});else if(isPlainObject$1(n)){for(const i in n)traverse(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&traverse(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.0
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(n,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,i=t&&t.appContext.config.warnHandler,r=getComponentTrace();if(i)callWithErrorHandling(i,t,11,[n+e.map(s=>{var o,a;return(a=(o=s.toString)==null?void 0:o.call(s))!=null?a:JSON.stringify(s)}).join(""),t&&t.proxy,r.map(({vnode:s})=>`at <${formatComponentName(t,s.type)}>`).join(`
`),r]);else{const s=[`[Vue warn]: ${n}`,...e];r.length&&s.push(`
`,...formatTrace(r)),console.warn(...s)}resetTracking(),isWarning=!1}function getComponentTrace(){let n=stack[stack.length-1];if(!n)return[];const e=[];for(;n;){const t=e[0];t&&t.vnode===n?t.recurseCount++:e.push({vnode:n,recurseCount:0});const i=n.component&&n.component.parent;n=i&&i.vnode}return e}function formatTrace(n){const e=[];return n.forEach((t,i)=>{e.push(...i===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:n,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",i=n.component?n.component.parent==null:!1,r=` at <${formatComponentName(n.component,n.type,i)}`,s=">"+t;return n.props?[r,...formatProps(n.props),s]:[r+s]}function formatProps(n){const e=[],t=Object.keys(n);return t.slice(0,3).forEach(i=>{e.push(...formatProp(i,n[i]))}),t.length>3&&e.push(" ..."),e}function formatProp(n,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${n}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${n}=${e}`]:isRef(e)?(e=formatProp(n,toRaw(e.value),!0),t?e:[`${n}=Ref<`,e,">"]):isFunction$1(e)?[`${n}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${n}=`,e])}function assertNumber(n,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(n,e,t,i){try{return i?n(...i):n()}catch(r){handleError(r,e,t)}}function callWithAsyncErrorHandling(n,e,t,i){if(isFunction$1(n)){const r=callWithErrorHandling(n,e,t,i);return r&&isPromise(r)&&r.catch(s=>{handleError(s,e,t)}),r}if(isArray$1(n)){const r=[];for(let s=0;s<n.length;s++)r.push(callWithAsyncErrorHandling(n[s],e,t,i));return r}}function handleError(n,e,t,i=!0){const r=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||EMPTY_OBJ;if(e){let a=e.parent;const d=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const v=a.ec;if(v){for(let _=0;_<v.length;_++)if(v[_](n,d,y)===!1)return}a=a.parent}if(s){pauseTracking(),callWithErrorHandling(s,null,10,[n,d,y]),resetTracking();return}}logError(n,t,r,i,o)}function logError(n,e,t,i=!0,r=!1){if(r)throw n;console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex$1(n){let e=isFlushing?flushIndex+1:0,t=queue.length;for(;e<t;){const i=e+t>>>1,r=queue[i],s=getId(r);s<n||s===n&&r.flags&2?e=i+1:t=i}return e}function queueJob(n){if(!(n.flags&1)){const e=getId(n),t=queue[queue.length-1];!t||!(n.flags&2)&&e>=getId(t)?queue.push(n):queue.splice(findInsertionIndex$1(e),0,n),n.flags&4||(n.flags|=1),queueFlush()}}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(n){isArray$1(n)?pendingPostFlushCbs.push(...n):activePostFlushCbs&&n.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,n):n.flags&1||(pendingPostFlushCbs.push(n),n.flags&4||(n.flags|=1)),queueFlush()}function flushPreFlushCbs(n,e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const i=queue[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;queue.splice(t,1),t--,i(),i.flags&=-2}}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,i)=>getId(t)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?n.flags&2?-1:1/0:n.id;function flushJobs(n){isFlushPending=!1,isFlushing=!0;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(callWithErrorHandling(e,e.i,e.i?15:14),e.flags&=-2)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(n,e){var t,i;devtools$1=n,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:r,args:s})=>devtools$1.emit(r,...s)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((i=(t=window.navigator)==null?void 0:t.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{setDevtoolsHook$1(s,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function pushScopeId(n){currentScopeId=n}function popScopeId(){currentScopeId=null}const withScopeId=n=>withCtx;function withCtx(n,e=currentRenderingInstance,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e);let o;try{o=n(...r)}finally{setCurrentRenderingInstance(s),i._d&&setBlockTracking(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function withDirectives(n,e){if(currentRenderingInstance===null)return n;const t=getComponentPublicInstance(currentRenderingInstance),i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,o,a,d=EMPTY_OBJ]=e[r];s&&(isFunction$1(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(o),i.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:d}))}return n}function invokeDirectiveHook(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let d=a.dir[i];d&&(pauseTracking(),callWithAsyncErrorHandling(d,t,8,[n.el,a,n,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=n=>n.__isTeleport,isTeleportDisabled=n=>n&&(n.disabled||n.disabled===""),isTeleportDeferred=n=>n&&(n.defer||n.defer===""),isTargetSVG=n=>typeof SVGElement<"u"&&n instanceof SVGElement,isTargetMathML=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,resolveTarget=(n,e)=>{const t=n&&n.to;return isString(t)?e?e(t):null:t},TeleportImpl={name:"Teleport",__isTeleport:!0,process(n,e,t,i,r,s,o,a,d,y){const{mc:v,pc:_,pbc:C,o:{insert:E,querySelector:S,createText:b,createComment:P}}=y,x=isTeleportDisabled(e.props);let{shapeFlag:T,children:R,dynamicChildren:L}=e;if(n==null){const k=e.el=b(""),N=e.anchor=b("");E(k,t,i),E(N,t,i);const D=(U,F)=>{T&16&&v(R,U,F,r,s,o,a,d)},G=()=>{const U=e.target=resolveTarget(e.props,S),F=prepareAnchor(U,e,b,E);U&&(o!=="svg"&&isTargetSVG(U)?o="svg":o!=="mathml"&&isTargetMathML(U)&&(o="mathml"),x||(D(U,F),updateCssVars(e)))};x&&(D(t,N),updateCssVars(e)),isTeleportDeferred(e.props)?queuePostRenderEffect(G,s):G()}else{e.el=n.el,e.targetStart=n.targetStart;const k=e.anchor=n.anchor,N=e.target=n.target,D=e.targetAnchor=n.targetAnchor,G=isTeleportDisabled(n.props),U=G?t:N,F=G?k:D;if(o==="svg"||isTargetSVG(N)?o="svg":(o==="mathml"||isTargetMathML(N))&&(o="mathml"),L?(C(n.dynamicChildren,L,U,r,s,o,a),traverseStaticChildren(n,e,!0)):d||_(n,e,U,F,r,s,o,a,!1),x)G?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):moveTeleport(e,t,k,y,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const B=e.target=resolveTarget(e.props,S);B&&moveTeleport(e,B,null,y,0)}else G&&moveTeleport(e,N,D,y,1);updateCssVars(e)}},remove(n,e,t,{um:i,o:{remove:r}},s){const{shapeFlag:o,children:a,anchor:d,targetStart:y,targetAnchor:v,target:_,props:C}=n;if(_&&(r(y),r(v)),s&&r(d),o&16){const E=s||!isTeleportDisabled(C);for(let S=0;S<a.length;S++){const b=a[S];i(b,e,t,E,!!b.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(n,e,t,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:d,children:y,props:v}=n,_=s===2;if(_&&i(o,e,t),(!_||isTeleportDisabled(v))&&d&16)for(let C=0;C<y.length;C++)r(y[C],e,t,2);_&&i(a,e,t)}function hydrateTeleport(n,e,t,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:d,insert:y,createText:v}},_){const C=e.target=resolveTarget(e.props,d);if(C){const E=C._lpa||C.firstChild;if(e.shapeFlag&16)if(isTeleportDisabled(e.props))e.anchor=_(o(n),e,a(n),t,i,r,s),e.targetStart=E,e.targetAnchor=E&&o(E);else{e.anchor=o(n);let S=E;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,C._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||prepareAnchor(C,e,v,y),_(E&&o(E),e,C,t,i,r,s)}updateCssVars(e)}return e.anchor&&o(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(n){const e=n.ctx;if(e&&e.ut){let t=n.targetStart;for(;t&&t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}function prepareAnchor(n,e,t,i){const r=e.targetStart=t(""),s=e.targetAnchor=t("");return r[TeleportEndKey]=s,n&&(i(r,n),i(s,n)),s}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=n=>{const e=n.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(n,{slots:e}){const t=getCurrentInstance(),i=useTransitionState();return()=>{const r=e.default&&getTransitionRawChildren(e.default(),!0);if(!r||!r.length)return;const s=findNonCommentChild(r),o=toRaw(n),{mode:a}=o;if(i.isLeaving)return emptyPlaceholder(s);const d=getInnerChild$1(s);if(!d)return emptyPlaceholder(s);let y=resolveTransitionHooks(d,o,i,t,C=>y=C);setTransitionHooks(d,y);const v=t.subTree,_=v&&getInnerChild$1(v);if(_&&_.type!==Comment&&!isSameVNodeType(d,_)&&recursiveGetSubtree(t).type!==Comment){const C=resolveTransitionHooks(_,o,i,t);if(setTransitionHooks(_,C),a==="out-in"&&d.type!==Comment)return i.isLeaving=!0,C.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update()},emptyPlaceholder(s);a==="in-out"&&d.type!==Comment&&(C.delayLeave=(E,S,b)=>{const P=getLeavingNodesForType(i,_);P[String(_.key)]=_,E[leaveCbKey]=()=>{S(),E[leaveCbKey]=void 0,delete y.delayedLeave},y.delayedLeave=b})}return s}}};function findNonCommentChild(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Comment){e=t;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function resolveTransitionHooks(n,e,t,i,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:d,onEnter:y,onAfterEnter:v,onEnterCancelled:_,onBeforeLeave:C,onLeave:E,onAfterLeave:S,onLeaveCancelled:b,onBeforeAppear:P,onAppear:x,onAfterAppear:T,onAppearCancelled:R}=e,L=String(n.key),k=getLeavingNodesForType(t,n),N=(U,F)=>{U&&callWithAsyncErrorHandling(U,i,9,F)},D=(U,F)=>{const B=F[1];N(U,F),isArray$1(U)?U.every(z=>z.length<=1)&&B():U.length<=1&&B()},G={mode:o,persisted:a,beforeEnter(U){let F=d;if(!t.isMounted)if(s)F=P||d;else return;U[leaveCbKey]&&U[leaveCbKey](!0);const B=k[L];B&&isSameVNodeType(n,B)&&B.el[leaveCbKey]&&B.el[leaveCbKey](),N(F,[U])},enter(U){let F=y,B=v,z=_;if(!t.isMounted)if(s)F=x||y,B=T||v,z=R||_;else return;let Y=!1;const X=U[enterCbKey$1]=q=>{Y||(Y=!0,q?N(z,[U]):N(B,[U]),G.delayedLeave&&G.delayedLeave(),U[enterCbKey$1]=void 0)};F?D(F,[U,X]):X()},leave(U,F){const B=String(n.key);if(U[enterCbKey$1]&&U[enterCbKey$1](!0),t.isUnmounting)return F();N(C,[U]);let z=!1;const Y=U[leaveCbKey]=X=>{z||(z=!0,F(),X?N(b,[U]):N(S,[U]),U[leaveCbKey]=void 0,k[B]===n&&delete k[B])};k[B]=n,E?D(E,[U,Y]):Y()},clone(U){const F=resolveTransitionHooks(U,e,t,i,r);return r&&r(F),F}};return G}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getInnerChild$1(n){if(!isKeepAlive(n))return isTeleport(n.type)&&n.children?findNonCommentChild(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&isFunction$1(t.default))return t.default()}}function setTransitionHooks(n,e){n.shapeFlag&6&&n.component?setTransitionHooks(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function getTransitionRawChildren(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Fragment?(o.patchFlag&128&&r++,i=i.concat(getTransitionRawChildren(o.children,e,a))):(e||o.type!==Comment)&&i.push(a!=null?cloneVNode(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(n,e){return isFunction$1(n)?extend$5({name:n.name},e,{setup:n}):n}function useId(){const n=getCurrentInstance();if(n)return(n.appContext.config.idPrefix||"v")+":"+n.ids[0]+n.ids[1]++}function markAsyncBoundary(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function setRef(n,e,t,i,r=!1){if(isArray$1(n)){n.forEach((C,E)=>setRef(C,e&&(isArray$1(e)?e[E]:e),t,i,r));return}if(isAsyncWrapper(i)&&!r)return;const s=i.shapeFlag&4?getComponentPublicInstance(i.component):i.el,o=r?null:s,{i:a,r:d}=n,y=e&&e.r,v=a.refs===EMPTY_OBJ?a.refs={}:a.refs,_=a.setupState;if(y!=null&&y!==d&&(isString(y)?(v[y]=null,hasOwn(_,y)&&(_[y]=null)):isRef(y)&&(y.value=null)),isFunction$1(d))callWithErrorHandling(d,a,12,[o,v]);else{const C=isString(d),E=isRef(d);if(C||E){const S=()=>{if(n.f){const b=C?hasOwn(_,d)?_[d]:v[d]:d.value;r?isArray$1(b)&&remove(b,s):isArray$1(b)?b.includes(s)||b.push(s):C?(v[d]=[s],hasOwn(_,d)&&(_[d]=v[d])):(d.value=[s],n.k&&(v[n.k]=d.value))}else C?(v[d]=o,hasOwn(_,d)&&(_[d]=o)):E&&(d.value=o,n.k&&(v[n.k]=o))};o?(S.id=-1,queuePostRenderEffect(S,t)):S()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",isMathMLContainer=n=>n.namespaceURI.includes("MathML"),getContainerType=n=>{if(n.nodeType===1){if(isSVGContainer(n))return"svg";if(isMathMLContainer(n))return"mathml"}},isComment=n=>n.nodeType===8;function createHydrationFunctions(n){const{mt:e,p:t,o:{patchProp:i,createText:r,nextSibling:s,parentNode:o,remove:a,insert:d,createComment:y}}=n,v=(R,L)=>{if(!L.hasChildNodes()){t(null,R,L),flushPostFlushCbs(),L._vnode=R;return}_(L.firstChild,R,null,null,null),flushPostFlushCbs(),L._vnode=R},_=(R,L,k,N,D,G=!1)=>{G=G||!!L.dynamicChildren;const U=isComment(R)&&R.data==="[",F=()=>b(R,L,k,N,D,U),{type:B,ref:z,shapeFlag:Y,patchFlag:X}=L;let q=R.nodeType;L.el=R,X===-2&&(G=!1,L.dynamicChildren=null);let K=null;switch(B){case Text$1:q!==3?L.children===""?(d(L.el=r(""),o(R),R),K=R):K=F():(R.data!==L.children&&(logMismatchError(),R.data=L.children),K=s(R));break;case Comment:T(R)?(K=s(R),x(L.el=R.content.firstChild,R,k)):q!==8||U?K=F():K=s(R);break;case Static:if(U&&(R=s(R),q=R.nodeType),q===1||q===3){K=R;const ee=!L.children.length;for(let te=0;te<L.staticCount;te++)ee&&(L.children+=K.nodeType===1?K.outerHTML:K.data),te===L.staticCount-1&&(L.anchor=K),K=s(K);return U?s(K):K}else F();break;case Fragment:U?K=S(R,L,k,N,D,G):K=F();break;default:if(Y&1)(q!==1||L.type.toLowerCase()!==R.tagName.toLowerCase())&&!T(R)?K=F():K=C(R,L,k,N,D,G);else if(Y&6){L.slotScopeIds=D;const ee=o(R);if(U?K=P(R):isComment(R)&&R.data==="teleport start"?K=P(R,R.data,"teleport end"):K=s(R),e(L,ee,null,k,N,getContainerType(ee),G),isAsyncWrapper(L)){let te;U?(te=createVNode(Fragment),te.anchor=K?K.previousSibling:ee.lastChild):te=R.nodeType===3?createTextVNode(""):createVNode("div"),te.el=R,L.component.subTree=te}}else Y&64?q!==8?K=F():K=L.type.hydrate(R,L,k,N,D,G,n,E):Y&128&&(K=L.type.hydrate(R,L,k,N,getContainerType(o(R)),D,G,n,_))}return z!=null&&setRef(z,null,N,L),K},C=(R,L,k,N,D,G)=>{G=G||!!L.dynamicChildren;const{type:U,props:F,patchFlag:B,shapeFlag:z,dirs:Y,transition:X}=L,q=U==="input"||U==="option";if(q||B!==-1){Y&&invokeDirectiveHook(L,null,k,"created");let K=!1;if(T(R)){K=needTransition(N,X)&&k&&k.vnode.props&&k.vnode.props.appear;const te=R.content.firstChild;K&&X.beforeEnter(te),x(te,R,k),L.el=R=te}if(z&16&&!(F&&(F.innerHTML||F.textContent))){let te=E(R.firstChild,L,R,k,N,D,G);for(;te;){isMismatchAllowed(R,1)||logMismatchError();const Oe=te;te=te.nextSibling,a(Oe)}}else z&8&&R.textContent!==L.children&&(isMismatchAllowed(R,0)||logMismatchError(),R.textContent=L.children);if(F){if(q||!G||B&48){const te=R.tagName.includes("-");for(const Oe in F)(q&&(Oe.endsWith("value")||Oe==="indeterminate")||isOn(Oe)&&!isReservedProp(Oe)||Oe[0]==="."||te)&&i(R,Oe,null,F[Oe],void 0,k)}else if(F.onClick)i(R,"onClick",null,F.onClick,void 0,k);else if(B&4&&isReactive(F.style))for(const te in F.style)F.style[te]}let ee;(ee=F&&F.onVnodeBeforeMount)&&invokeVNodeHook(ee,k,L),Y&&invokeDirectiveHook(L,null,k,"beforeMount"),((ee=F&&F.onVnodeMounted)||Y||K)&&queueEffectWithSuspense(()=>{ee&&invokeVNodeHook(ee,k,L),K&&X.enter(R),Y&&invokeDirectiveHook(L,null,k,"mounted")},N)}return R.nextSibling},E=(R,L,k,N,D,G,U)=>{U=U||!!L.dynamicChildren;const F=L.children,B=F.length;for(let z=0;z<B;z++){const Y=U?F[z]:F[z]=normalizeVNode(F[z]),X=Y.type===Text$1;R?(X&&!U&&z+1<B&&normalizeVNode(F[z+1]).type===Text$1&&(d(r(R.data.slice(Y.children.length)),k,s(R)),R.data=Y.children),R=_(R,Y,N,D,G,U)):X&&!Y.children?d(Y.el=r(""),k):(isMismatchAllowed(k,1)||logMismatchError(),t(null,Y,k,null,N,D,getContainerType(k),G))}return R},S=(R,L,k,N,D,G)=>{const{slotScopeIds:U}=L;U&&(D=D?D.concat(U):U);const F=o(R),B=E(s(R),L,F,k,N,D,G);return B&&isComment(B)&&B.data==="]"?s(L.anchor=B):(logMismatchError(),d(L.anchor=y("]"),F,B),B)},b=(R,L,k,N,D,G)=>{if(isMismatchAllowed(R.parentElement,1)||logMismatchError(),L.el=null,G){const B=P(R);for(;;){const z=s(R);if(z&&z!==B)a(z);else break}}const U=s(R),F=o(R);return a(R),t(null,L,F,U,k,N,getContainerType(F),D),U},P=(R,L="[",k="]")=>{let N=0;for(;R;)if(R=s(R),R&&isComment(R)&&(R.data===L&&N++,R.data===k)){if(N===0)return s(R);N--}return R},x=(R,L,k)=>{const N=L.parentNode;N&&N.replaceChild(R,L);let D=k;for(;D;)D.vnode.el===L&&(D.vnode.el=D.subTree.el=R),D=D.parent},T=R=>R.nodeType===1&&R.tagName.toLowerCase()==="template";return[v,_]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(allowMismatchAttr);)n=n.parentElement;const t=n&&n.getAttribute(allowMismatchAttr);if(t==null)return!1;if(t==="")return!0;{const i=t.split(",");return e===0&&i.includes("children")?!0:t.split(",").includes(MismatchTypeString[e])}}const hydrateOnIdle=(n=1e4)=>e=>{const t=requestIdleCallback(e,{timeout:n});return()=>cancelIdleCallback(t)},hydrateOnVisible=n=>(e,t)=>{const i=new IntersectionObserver(r=>{for(const s of r)if(s.isIntersecting){i.disconnect(),e();break}},n);return t(r=>i.observe(r)),()=>i.disconnect()},hydrateOnMediaQuery=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},hydrateOnInteraction=(n=[])=>(e,t)=>{isString(n)&&(n=[n]);let i=!1;const r=o=>{i||(i=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const a of n)o.removeEventListener(a,r)})};return t(o=>{for(const a of n)o.addEventListener(a,r,{once:!0})}),s};function forEachElement(n,e){if(isComment(n)&&n.data==="["){let t=1,i=n.nextSibling;for(;i;){if(i.nodeType===1)e(i);else if(isComment(i))if(i.data==="]"){if(--t===0)break}else i.data==="["&&t++;i=i.nextSibling}}else e(n)}const isAsyncWrapper=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(n){isFunction$1(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:i,delay:r=200,hydrate:s,timeout:o,suspensible:a=!0,onError:d}=n;let y=null,v,_=0;const C=()=>(_++,y=null,E()),E=()=>{let S;return y||(S=y=e().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),d)return new Promise((P,x)=>{d(b,()=>P(C()),()=>x(b),_+1)});throw b}).then(b=>S!==y&&y?y:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),v=b,b)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:E,__asyncHydrate(S,b,P){const x=s?()=>{const T=s(P,R=>forEachElement(S,R));T&&(b.bum||(b.bum=[])).push(T)}:P;v?x():E().then(()=>!b.isUnmounted&&x())},get __asyncResolved(){return v},setup(){const S=currentInstance;if(markAsyncBoundary(S),v)return()=>createInnerComp(v,S);const b=R=>{y=null,handleError(R,S,13,!i)};if(a&&S.suspense||isInSSRComponentSetup)return E().then(R=>()=>createInnerComp(R,S)).catch(R=>(b(R),()=>i?createVNode(i,{error:R}):null));const P=ref(!1),x=ref(),T=ref(!!r);return r&&setTimeout(()=>{T.value=!1},r),o!=null&&setTimeout(()=>{if(!P.value&&!x.value){const R=new Error(`Async component timed out after ${o}ms.`);b(R),x.value=R}},o),E().then(()=>{P.value=!0,S.parent&&isKeepAlive(S.parent.vnode)&&queueJob(S.parent.update)}).catch(R=>{b(R),x.value=R}),()=>{if(P.value&&v)return createInnerComp(v,S);if(x.value&&i)return createVNode(i,{error:x.value});if(t&&!T.value)return createVNode(t)}}})}function createInnerComp(n,e){const{ref:t,props:i,children:r,ce:s}=e.vnode,o=createVNode(n,i,r);return o.ref=t,o.ce=s,delete e.vnode.ce,o}const isKeepAlive=n=>n.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=getCurrentInstance(),i=t.ctx;if(!i.renderer)return()=>{const T=e.default&&e.default();return T&&T.length===1?T[0]:T};const r=new Map,s=new Set;let o=null;const a=t.suspense,{renderer:{p:d,m:y,um:v,o:{createElement:_}}}=i,C=_("div");i.activate=(T,R,L,k,N)=>{const D=T.component;y(T,R,L,0,a),d(D.vnode,T,R,L,D,a,k,T.slotScopeIds,N),queuePostRenderEffect(()=>{D.isDeactivated=!1,D.a&&invokeArrayFns(D.a);const G=T.props&&T.props.onVnodeMounted;G&&invokeVNodeHook(G,D.parent,T)},a)},i.deactivate=T=>{const R=T.component;invalidateMount(R.m),invalidateMount(R.a),y(T,C,null,1,a),queuePostRenderEffect(()=>{R.da&&invokeArrayFns(R.da);const L=T.props&&T.props.onVnodeUnmounted;L&&invokeVNodeHook(L,R.parent,T),R.isDeactivated=!0},a)};function E(T){resetShapeFlag(T),v(T,t,a,!0)}function S(T){r.forEach((R,L)=>{const k=getComponentName(R.type);k&&!T(k)&&b(L)})}function b(T){const R=r.get(T);R&&(!o||!isSameVNodeType(R,o))?E(R):o&&resetShapeFlag(o),r.delete(T),s.delete(T)}watch(()=>[n.include,n.exclude],([T,R])=>{T&&S(L=>matches$1(T,L)),R&&S(L=>!matches$1(R,L))},{flush:"post",deep:!0});let P=null;const x=()=>{P!=null&&(isSuspense(t.subTree.type)?queuePostRenderEffect(()=>{r.set(P,getInnerChild(t.subTree))},t.subTree.suspense):r.set(P,getInnerChild(t.subTree)))};return onMounted(x),onUpdated(x),onBeforeUnmount(()=>{r.forEach(T=>{const{subTree:R,suspense:L}=t,k=getInnerChild(R);if(T.type===k.type&&T.key===k.key){resetShapeFlag(k);const N=k.component.da;N&&queuePostRenderEffect(N,L);return}E(T)})}),()=>{if(P=null,!e.default)return null;const T=e.default(),R=T[0];if(T.length>1)return o=null,T;if(!isVNode(R)||!(R.shapeFlag&4)&&!(R.shapeFlag&128))return o=null,R;let L=getInnerChild(R);if(L.type===Comment)return o=null,L;const k=L.type,N=getComponentName(isAsyncWrapper(L)?L.type.__asyncResolved||{}:k),{include:D,exclude:G,max:U}=n;if(D&&(!N||!matches$1(D,N))||G&&N&&matches$1(G,N))return L.shapeFlag&=-257,o=L,R;const F=L.key==null?k:L.key,B=r.get(F);return L.el&&(L=cloneVNode(L),R.shapeFlag&128&&(R.ssContent=L)),P=F,B?(L.el=B.el,L.component=B.component,L.transition&&setTransitionHooks(L,L.transition),L.shapeFlag|=512,s.delete(F),s.add(F)):(s.add(F),U&&s.size>parseInt(U,10)&&b(s.values().next().value)),L.shapeFlag|=256,o=L,isSuspense(R.type)?R:L}}},KeepAlive=KeepAliveImpl;function matches$1(n,e){return isArray$1(n)?n.some(t=>matches$1(t,e)):isString(n)?n.split(",").includes(e):isRegExp(n)?(n.lastIndex=0,n.test(e)):!1}function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,t=currentInstance){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(injectHook(e,i,t),t){let r=t.parent;for(;r&&r.parent;)isKeepAlive(r.parent.vnode)&&injectToKeepAliveRoot(i,e,t,r),r=r.parent}}function injectToKeepAliveRoot(n,e,t,i){const r=injectHook(e,n,i,!0);onUnmounted(()=>{remove(i[e],r)},t)}function resetShapeFlag(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function getInnerChild(n){return n.shapeFlag&128?n.ssContent:n}function injectHook(n,e,t=currentInstance,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{pauseTracking();const a=setCurrentInstance(t),d=callWithAsyncErrorHandling(e,t,n,o);return a(),resetTracking(),d});return i?r.unshift(s):r.push(s),s}}const createHook=n=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...i)=>e(...i),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(n,e){return resolveAsset(COMPONENTS,n,!0,e)||n}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(n){return isString(n)?resolveAsset(COMPONENTS,n,!1)||n:n||NULL_DYNAMIC_COMPONENT}function resolveDirective(n){return resolveAsset(DIRECTIVES,n)}function resolveAsset(n,e,t=!0,i=!1){const r=currentRenderingInstance||currentInstance;if(r){const s=r.type;if(n===COMPONENTS){const a=getComponentName(s,!1);if(a&&(a===e||a===camelize(e)||a===capitalize(camelize(e))))return s}const o=resolve(r[n]||s[n],e)||resolve(r.appContext[n],e);return!o&&i?s:o}}function resolve(n,e){return n&&(n[e]||n[camelize(e)]||n[capitalize(camelize(e))])}function renderList(n,e,t,i){let r;const s=t&&t[i],o=isArray$1(n);if(o||isString(n)){const a=o&&isReactive(n);a&&(n=shallowReadArray(n)),r=new Array(n.length);for(let d=0,y=n.length;d<y;d++)r[d]=e(a?toReactive(n[d]):n[d],d,void 0,s&&s[d])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if(isObject$1(n))if(n[Symbol.iterator])r=Array.from(n,(a,d)=>e(a,d,void 0,s&&s[d]));else{const a=Object.keys(n);r=new Array(a.length);for(let d=0,y=a.length;d<y;d++){const v=a[d];r[d]=e(n[v],v,d,s&&s[d])}}else r=[];return t&&(t[i]=r),r}function createSlots(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(isArray$1(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function renderSlot(n,e,t={},i,r){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(t.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",t,i&&i())],64);let s=n[e];s&&s._c&&(s._d=!1),openBlock();const o=s&&ensureValidVNode(s(t)),a=createBlock(Fragment,{key:(t.key||o&&o.key||`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&n._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function ensureValidVNode(n){return n.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?n:null}function toHandlers(n,e){const t={};for(const i in n)t[e&&/[A-Z]/.test(i)?`on:${i}`:toHandlerKey(i)]=n[i];return t}const getPublicInstance=n=>n?isStatefulComponent(n)?getComponentPublicInstance(n):getPublicInstance(n.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>{queueJob(n.update)}),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,e)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn(n,e),PublicInstanceProxyHandlers={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:d}=n;let y;if(e[0]!=="$"){const E=o[e];if(E!==void 0)switch(E){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(hasSetupBinding(i,e))return o[e]=1,i[e];if(r!==EMPTY_OBJ&&hasOwn(r,e))return o[e]=2,r[e];if((y=n.propsOptions[0])&&hasOwn(y,e))return o[e]=3,s[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];shouldCacheAccess&&(o[e]=0)}}const v=publicPropertiesMap[e];let _,C;if(v)return e==="$attrs"&&track(n.attrs,"get",""),v(n);if((_=a.__cssModules)&&(_=_[e]))return _;if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];if(C=d.config.globalProperties,hasOwn(C,e))return C[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return hasSetupBinding(r,e)?(r[e]=t,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=t,!0):hasOwn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==EMPTY_OBJ&&hasOwn(n,o)||hasSetupBinding(e,o)||(a=s[0])&&hasOwn(a,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:hasOwn(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(n,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(n,e,n)},has(n,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(n){}function defineOptions(n){}function defineSlots(){return null}function defineModel(){}function withDefaults(n,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const n=getCurrentInstance();return n.setupContext||(n.setupContext=createSetupContext(n))}function normalizePropsOrEmits(n){return isArray$1(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function mergeDefaults(n,e){const t=normalizePropsOrEmits(n);for(const i in e){if(i.startsWith("__skip"))continue;let r=t[i];r?isArray$1(r)||isFunction$1(r)?r=t[i]={type:r,default:e[i]}:r.default=e[i]:r===null&&(r=t[i]={default:e[i]}),r&&e[`__skip_${i}`]&&(r.skipFactory=!0)}return t}function mergeModels(n,e){return!n||!e?n||e:isArray$1(n)&&isArray$1(e)?n.concat(e):extend$5({},normalizePropsOrEmits(n),normalizePropsOrEmits(e))}function createPropsRestProxy(n,e){const t={};for(const i in n)e.includes(i)||Object.defineProperty(t,i,{enumerable:!0,get:()=>n[i]});return t}function withAsyncContext(n){const e=getCurrentInstance();let t=n();return unsetCurrentInstance(),isPromise(t)&&(t=t.catch(i=>{throw setCurrentInstance(e),i})),[t,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),t=n.proxy,i=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:d,inject:y,created:v,beforeMount:_,mounted:C,beforeUpdate:E,updated:S,activated:b,deactivated:P,beforeDestroy:x,beforeUnmount:T,destroyed:R,unmounted:L,render:k,renderTracked:N,renderTriggered:D,errorCaptured:G,serverPrefetch:U,expose:F,inheritAttrs:B,components:z,directives:Y,filters:X}=e;if(y&&resolveInjections(y,i,null),o)for(const ee in o){const te=o[ee];isFunction$1(te)&&(i[ee]=te.bind(t))}if(r){const ee=r.call(t,t);isObject$1(ee)&&(n.data=reactive(ee))}if(shouldCacheAccess=!0,s)for(const ee in s){const te=s[ee],Oe=isFunction$1(te)?te.bind(t,t):isFunction$1(te.get)?te.get.bind(t,t):NOOP,ie=!isFunction$1(te)&&isFunction$1(te.set)?te.set.bind(t):NOOP,it=computed({get:Oe,set:ie});Object.defineProperty(i,ee,{enumerable:!0,configurable:!0,get:()=>it.value,set:oe=>it.value=oe})}if(a)for(const ee in a)createWatcher(a[ee],i,t,ee);if(d){const ee=isFunction$1(d)?d.call(t):d;Reflect.ownKeys(ee).forEach(te=>{provide(te,ee[te])})}v&&callHook$1(v,n,"c");function K(ee,te){isArray$1(te)?te.forEach(Oe=>ee(Oe.bind(t))):te&&ee(te.bind(t))}if(K(onBeforeMount,_),K(onMounted,C),K(onBeforeUpdate,E),K(onUpdated,S),K(onActivated,b),K(onDeactivated,P),K(onErrorCaptured,G),K(onRenderTracked,N),K(onRenderTriggered,D),K(onBeforeUnmount,T),K(onUnmounted,L),K(onServerPrefetch,U),isArray$1(F))if(F.length){const ee=n.exposed||(n.exposed={});F.forEach(te=>{Object.defineProperty(ee,te,{get:()=>t[te],set:Oe=>t[te]=Oe})})}else n.exposed||(n.exposed={});k&&n.render===NOOP&&(n.render=k),B!=null&&(n.inheritAttrs=B),z&&(n.components=z),Y&&(n.directives=Y),U&&markAsyncBoundary(n)}function resolveInjections(n,e,t=NOOP){isArray$1(n)&&(n=normalizeInject(n));for(const i in n){const r=n[i];let s;isObject$1(r)?"default"in r?s=inject(r.from||i,r.default,!0):s=inject(r.from||i):s=inject(r),isRef(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function callHook$1(n,e,t){callWithAsyncErrorHandling(isArray$1(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function createWatcher(n,e,t,i){let r=i.includes(".")?createPathGetter(t,i):()=>t[i];if(isString(n)){const s=e[n];isFunction$1(s)&&watch(r,s)}else if(isFunction$1(n))watch(r,n.bind(t));else if(isObject$1(n))if(isArray$1(n))n.forEach(s=>createWatcher(s,e,t,i));else{const s=isFunction$1(n.handler)?n.handler.bind(t):e[n.handler];isFunction$1(s)&&watch(r,s,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let d;return a?d=a:!r.length&&!t&&!i?d=e:(d={},r.length&&r.forEach(y=>mergeOptions$1(d,y,o,!0)),mergeOptions$1(d,e,o)),isObject$1(e)&&s.set(e,d),d}function mergeOptions$1(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&mergeOptions$1(n,s,t,!0),r&&r.forEach(o=>mergeOptions$1(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=internalOptionMergeStrats[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend$5(isFunction$1(n)?n.call(this,this):n,isFunction$1(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray$1(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend$5(Object.create(null),n,e):e}function mergeEmitsOrPropsOptions(n,e){return n?isArray$1(n)&&isArray$1(e)?[...new Set([...n,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const t=extend$5(Object.create(null),n);for(const i in e)t[i]=mergeAsArray(n[i],e[i]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,e){return function(i,r=null){isFunction$1(i)||(i=extend$5({},i)),r!=null&&!isObject$1(r)&&(r=null);const s=createAppContext(),o=new WeakSet,a=[];let d=!1;const y=s.app={_uid:uid$1++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:version$3,get config(){return s.config},set config(v){},use(v,..._){return o.has(v)||(v&&isFunction$1(v.install)?(o.add(v),v.install(y,..._)):isFunction$1(v)&&(o.add(v),v(y,..._))),y},mixin(v){return s.mixins.includes(v)||s.mixins.push(v),y},component(v,_){return _?(s.components[v]=_,y):s.components[v]},directive(v,_){return _?(s.directives[v]=_,y):s.directives[v]},mount(v,_,C){if(!d){const E=y._ceVNode||createVNode(i,r);return E.appContext=s,C===!0?C="svg":C===!1&&(C=void 0),_&&e?e(E,v):n(E,v,C),d=!0,y._container=v,v.__vue_app__=y,getComponentPublicInstance(E.component)}},onUnmount(v){a.push(v)},unmount(){d&&(callWithAsyncErrorHandling(a,y._instance,16),n(null,y._container),delete y._container.__vue_app__)},provide(v,_){return s.provides[v]=_,y},runWithContext(v){const _=currentApp;currentApp=y;try{return v()}finally{currentApp=_}}};return y}}let currentApp=null;function provide(n,e){if(currentInstance){let t=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===t&&(t=currentInstance.provides=Object.create(i)),t[n]=e}}function inject(n,e,t=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){const r=currentApp?currentApp._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&isFunction$1(e)?e.call(i&&i.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=n=>Object.getPrototypeOf(n)===internalObjectProto;function initProps(n,e,t,i=!1){const r={},s=createInternalObject();n.propsDefaults=Object.create(null),setFullProps(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:shallowReactive(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function updateProps(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=toRaw(r),[d]=n.propsOptions;let y=!1;if((i||o>0)&&!(o&16)){if(o&8){const v=n.vnode.dynamicProps;for(let _=0;_<v.length;_++){let C=v[_];if(isEmitListener(n.emitsOptions,C))continue;const E=e[C];if(d)if(hasOwn(s,C))E!==s[C]&&(s[C]=E,y=!0);else{const S=camelize(C);r[S]=resolvePropValue(d,a,S,E,n,!1)}else E!==s[C]&&(s[C]=E,y=!0)}}}else{setFullProps(n,e,r,s)&&(y=!0);let v;for(const _ in a)(!e||!hasOwn(e,_)&&((v=hyphenate(_))===_||!hasOwn(e,v)))&&(d?t&&(t[_]!==void 0||t[v]!==void 0)&&(r[_]=resolvePropValue(d,a,_,void 0,n,!0)):delete r[_]);if(s!==a)for(const _ in s)(!e||!hasOwn(e,_))&&(delete s[_],y=!0)}y&&trigger(n.attrs,"set","")}function setFullProps(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let d in e){if(isReservedProp(d))continue;const y=e[d];let v;r&&hasOwn(r,v=camelize(d))?!s||!s.includes(v)?t[v]=y:(a||(a={}))[v]=y:isEmitListener(n.emitsOptions,d)||(!(d in i)||y!==i[d])&&(i[d]=y,o=!0)}if(s){const d=toRaw(t),y=a||EMPTY_OBJ;for(let v=0;v<s.length;v++){const _=s[v];t[_]=resolvePropValue(r,d,_,y[_],n,!hasOwn(y,_))}}return o}function resolvePropValue(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=hasOwn(o,"default");if(a&&i===void 0){const d=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction$1(d)){const{propsDefaults:y}=r;if(t in y)i=y[t];else{const v=setCurrentInstance(r);i=y[t]=d.call(null,e),v()}}else i=d;r.ce&&r.ce._setProp(t,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===hyphenate(t))&&(i=!0))}return i}const mixinPropsCache=new WeakMap;function normalizePropsOptions(n,e,t=!1){const i=t?mixinPropsCache:e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let d=!1;if(!isFunction$1(n)){const v=_=>{d=!0;const[C,E]=normalizePropsOptions(_,e,!0);extend$5(o,C),E&&a.push(...E)};!t&&e.mixins.length&&e.mixins.forEach(v),n.extends&&v(n.extends),n.mixins&&n.mixins.forEach(v)}if(!s&&!d)return isObject$1(n)&&i.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let v=0;v<s.length;v++){const _=camelize(s[v]);validatePropName(_)&&(o[_]=EMPTY_OBJ)}else if(s)for(const v in s){const _=camelize(v);if(validatePropName(_)){const C=s[v],E=o[_]=isArray$1(C)||isFunction$1(C)?{type:C}:extend$5({},C),S=E.type;let b=!1,P=!0;if(isArray$1(S))for(let x=0;x<S.length;++x){const T=S[x],R=isFunction$1(T)&&T.name;if(R==="Boolean"){b=!0;break}else R==="String"&&(P=!1)}else b=isFunction$1(S)&&S.name==="Boolean";E[0]=b,E[1]=P,(b||hasOwn(E,"default"))&&a.push(_)}}const y=[o,a];return isObject$1(n)&&i.set(n,y),y}function validatePropName(n){return n[0]!=="$"&&!isReservedProp(n)}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$1(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,e,t)=>{if(e._n)return e;const i=withCtx((...r)=>normalizeSlotValue(e(...r)),t);return i._c=!1,i},normalizeObjectSlots=(n,e,t)=>{const i=n._ctx;for(const r in n){if(isInternalKey(r))continue;const s=n[r];if(isFunction$1(s))e[r]=normalizeSlot$1(r,s,i);else if(s!=null){const o=normalizeSlotValue(s);e[r]=()=>o}}},normalizeVNodeSlots=(n,e)=>{const t=normalizeSlotValue(e);n.slots.default=()=>t},assignSlots=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},initSlots=(n,e,t)=>{const i=n.slots=createInternalObject();if(n.vnode.shapeFlag&32){const r=e._;r?(assignSlots(i,e,t),t&&def(i,"_",r,!0)):normalizeObjectSlots(e,i)}else e&&normalizeVNodeSlots(n,e)},updateSlots=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:assignSlots(r,e,t):(s=!e.$stable,normalizeObjectSlots(e,r)),o=e}else e&&(normalizeVNodeSlots(n,e),o={default:1});if(s)for(const a in r)!isInternalKey(a)&&o[a]==null&&delete r[a]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function createHydrationRenderer(n){return baseCreateRenderer(n,createHydrationFunctions)}function baseCreateRenderer(n,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:d,setText:y,setElementText:v,parentNode:_,nextSibling:C,setScopeId:E=NOOP,insertStaticContent:S}=n,b=(H,W,$,de=null,ue=null,fe=null,Ge=void 0,Be=null,ye=!!W.dynamicChildren)=>{if(H===W)return;H&&!isSameVNodeType(H,W)&&(de=re(H),oe(H,ue,fe,!0),H=null),W.patchFlag===-2&&(ye=!1,W.dynamicChildren=null);const{type:pe,ref:J,shapeFlag:Q}=W;switch(pe){case Text$1:P(H,W,$,de);break;case Comment:x(H,W,$,de);break;case Static:H==null&&T(W,$,de,Ge);break;case Fragment:z(H,W,$,de,ue,fe,Ge,Be,ye);break;default:Q&1?k(H,W,$,de,ue,fe,Ge,Be,ye):Q&6?Y(H,W,$,de,ue,fe,Ge,Be,ye):(Q&64||Q&128)&&pe.process(H,W,$,de,ue,fe,Ge,Be,ye,se)}J!=null&&ue&&setRef(J,H&&H.ref,fe,W||H,!W)},P=(H,W,$,de)=>{if(H==null)i(W.el=a(W.children),$,de);else{const ue=W.el=H.el;W.children!==H.children&&y(ue,W.children)}},x=(H,W,$,de)=>{H==null?i(W.el=d(W.children||""),$,de):W.el=H.el},T=(H,W,$,de)=>{[H.el,H.anchor]=S(H.children,W,$,de,H.el,H.anchor)},R=({el:H,anchor:W},$,de)=>{let ue;for(;H&&H!==W;)ue=C(H),i(H,$,de),H=ue;i(W,$,de)},L=({el:H,anchor:W})=>{let $;for(;H&&H!==W;)$=C(H),r(H),H=$;r(W)},k=(H,W,$,de,ue,fe,Ge,Be,ye)=>{W.type==="svg"?Ge="svg":W.type==="math"&&(Ge="mathml"),H==null?N(W,$,de,ue,fe,Ge,Be,ye):U(H,W,ue,fe,Ge,Be,ye)},N=(H,W,$,de,ue,fe,Ge,Be)=>{let ye,pe;const{props:J,shapeFlag:Q,transition:ne,dirs:le}=H;if(ye=H.el=o(H.type,fe,J&&J.is,J),Q&8?v(ye,H.children):Q&16&&G(H.children,ye,null,de,ue,resolveChildrenNamespace(H,fe),Ge,Be),le&&invokeDirectiveHook(H,null,de,"created"),D(ye,H,H.scopeId,Ge,de),J){for(const be in J)be!=="value"&&!isReservedProp(be)&&s(ye,be,null,J[be],fe,de);"value"in J&&s(ye,"value",null,J.value,fe),(pe=J.onVnodeBeforeMount)&&invokeVNodeHook(pe,de,H)}le&&invokeDirectiveHook(H,null,de,"beforeMount");const ke=needTransition(ue,ne);ke&&ne.beforeEnter(ye),i(ye,W,$),((pe=J&&J.onVnodeMounted)||ke||le)&&queuePostRenderEffect(()=>{pe&&invokeVNodeHook(pe,de,H),ke&&ne.enter(ye),le&&invokeDirectiveHook(H,null,de,"mounted")},ue)},D=(H,W,$,de,ue)=>{if($&&E(H,$),de)for(let fe=0;fe<de.length;fe++)E(H,de[fe]);if(ue){let fe=ue.subTree;if(W===fe||isSuspense(fe.type)&&(fe.ssContent===W||fe.ssFallback===W)){const Ge=ue.vnode;D(H,Ge,Ge.scopeId,Ge.slotScopeIds,ue.parent)}}},G=(H,W,$,de,ue,fe,Ge,Be,ye=0)=>{for(let pe=ye;pe<H.length;pe++){const J=H[pe]=Be?cloneIfMounted(H[pe]):normalizeVNode(H[pe]);b(null,J,W,$,de,ue,fe,Ge,Be)}},U=(H,W,$,de,ue,fe,Ge)=>{const Be=W.el=H.el;let{patchFlag:ye,dynamicChildren:pe,dirs:J}=W;ye|=H.patchFlag&16;const Q=H.props||EMPTY_OBJ,ne=W.props||EMPTY_OBJ;let le;if($&&toggleRecurse($,!1),(le=ne.onVnodeBeforeUpdate)&&invokeVNodeHook(le,$,W,H),J&&invokeDirectiveHook(W,H,$,"beforeUpdate"),$&&toggleRecurse($,!0),(Q.innerHTML&&ne.innerHTML==null||Q.textContent&&ne.textContent==null)&&v(Be,""),pe?F(H.dynamicChildren,pe,Be,$,de,resolveChildrenNamespace(W,ue),fe):Ge||te(H,W,Be,null,$,de,resolveChildrenNamespace(W,ue),fe,!1),ye>0){if(ye&16)B(Be,Q,ne,$,ue);else if(ye&2&&Q.class!==ne.class&&s(Be,"class",null,ne.class,ue),ye&4&&s(Be,"style",Q.style,ne.style,ue),ye&8){const ke=W.dynamicProps;for(let be=0;be<ke.length;be++){const Ze=ke[be],mt=Q[Ze],ut=ne[Ze];(ut!==mt||Ze==="value")&&s(Be,Ze,mt,ut,ue,$)}}ye&1&&H.children!==W.children&&v(Be,W.children)}else!Ge&&pe==null&&B(Be,Q,ne,$,ue);((le=ne.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{le&&invokeVNodeHook(le,$,W,H),J&&invokeDirectiveHook(W,H,$,"updated")},de)},F=(H,W,$,de,ue,fe,Ge)=>{for(let Be=0;Be<W.length;Be++){const ye=H[Be],pe=W[Be],J=ye.el&&(ye.type===Fragment||!isSameVNodeType(ye,pe)||ye.shapeFlag&70)?_(ye.el):$;b(ye,pe,J,null,de,ue,fe,Ge,!0)}},B=(H,W,$,de,ue)=>{if(W!==$){if(W!==EMPTY_OBJ)for(const fe in W)!isReservedProp(fe)&&!(fe in $)&&s(H,fe,W[fe],null,ue,de);for(const fe in $){if(isReservedProp(fe))continue;const Ge=$[fe],Be=W[fe];Ge!==Be&&fe!=="value"&&s(H,fe,Be,Ge,ue,de)}"value"in $&&s(H,"value",W.value,$.value,ue)}},z=(H,W,$,de,ue,fe,Ge,Be,ye)=>{const pe=W.el=H?H.el:a(""),J=W.anchor=H?H.anchor:a("");let{patchFlag:Q,dynamicChildren:ne,slotScopeIds:le}=W;le&&(Be=Be?Be.concat(le):le),H==null?(i(pe,$,de),i(J,$,de),G(W.children||[],$,J,ue,fe,Ge,Be,ye)):Q>0&&Q&64&&ne&&H.dynamicChildren?(F(H.dynamicChildren,ne,$,ue,fe,Ge,Be),(W.key!=null||ue&&W===ue.subTree)&&traverseStaticChildren(H,W,!0)):te(H,W,$,J,ue,fe,Ge,Be,ye)},Y=(H,W,$,de,ue,fe,Ge,Be,ye)=>{W.slotScopeIds=Be,H==null?W.shapeFlag&512?ue.ctx.activate(W,$,de,Ge,ye):X(W,$,de,ue,fe,Ge,ye):q(H,W,ye)},X=(H,W,$,de,ue,fe,Ge)=>{const Be=H.component=createComponentInstance(H,de,ue);if(isKeepAlive(H)&&(Be.ctx.renderer=se),setupComponent(Be,!1,Ge),Be.asyncDep){if(ue&&ue.registerDep(Be,K,Ge),!H.el){const ye=Be.subTree=createVNode(Comment);x(null,ye,W,$)}}else K(Be,H,W,$,ue,fe,Ge)},q=(H,W,$)=>{const de=W.component=H.component;if(shouldUpdateComponent(H,W,$))if(de.asyncDep&&!de.asyncResolved){ee(de,W,$);return}else de.next=W,de.update();else W.el=H.el,de.vnode=W},K=(H,W,$,de,ue,fe,Ge)=>{const Be=()=>{if(H.isMounted){let{next:Q,bu:ne,u:le,parent:ke,vnode:be}=H;{const Pt=locateNonHydratedAsyncRoot(H);if(Pt){Q&&(Q.el=be.el,ee(H,Q,Ge)),Pt.asyncDep.then(()=>{H.isUnmounted||Be()});return}}let Ze=Q,mt;toggleRecurse(H,!1),Q?(Q.el=be.el,ee(H,Q,Ge)):Q=be,ne&&invokeArrayFns(ne),(mt=Q.props&&Q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(mt,ke,Q,be),toggleRecurse(H,!0);const ut=renderComponentRoot(H),Ot=H.subTree;H.subTree=ut,b(Ot,ut,_(Ot.el),re(Ot),H,ue,fe),Q.el=ut.el,Ze===null&&updateHOCHostEl(H,ut.el),le&&queuePostRenderEffect(le,ue),(mt=Q.props&&Q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(mt,ke,Q,be),ue)}else{let Q;const{el:ne,props:le}=W,{bm:ke,m:be,parent:Ze,root:mt,type:ut}=H,Ot=isAsyncWrapper(W);if(toggleRecurse(H,!1),ke&&invokeArrayFns(ke),!Ot&&(Q=le&&le.onVnodeBeforeMount)&&invokeVNodeHook(Q,Ze,W),toggleRecurse(H,!0),ne&&xt){const Pt=()=>{H.subTree=renderComponentRoot(H),xt(ne,H.subTree,H,ue,null)};Ot?ut.__asyncHydrate(ne,H,Pt):Pt()}else{mt.ce&&mt.ce._injectChildStyle(ut);const Pt=H.subTree=renderComponentRoot(H);b(null,Pt,$,de,H,ue,fe),W.el=Pt.el}if(be&&queuePostRenderEffect(be,ue),!Ot&&(Q=le&&le.onVnodeMounted)){const Pt=W;queuePostRenderEffect(()=>invokeVNodeHook(Q,Ze,Pt),ue)}(W.shapeFlag&256||Ze&&isAsyncWrapper(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&H.a&&queuePostRenderEffect(H.a,ue),H.isMounted=!0,W=$=de=null}};H.scope.on();const ye=H.effect=new ReactiveEffect(Be);H.scope.off();const pe=H.update=ye.run.bind(ye),J=H.job=ye.runIfDirty.bind(ye);J.i=H,J.id=H.uid,ye.scheduler=()=>queueJob(J),toggleRecurse(H,!0),pe()},ee=(H,W,$)=>{W.component=H;const de=H.vnode.props;H.vnode=W,H.next=null,updateProps(H,W.props,de,$),updateSlots(H,W.children,$),pauseTracking(),flushPreFlushCbs(H),resetTracking()},te=(H,W,$,de,ue,fe,Ge,Be,ye=!1)=>{const pe=H&&H.children,J=H?H.shapeFlag:0,Q=W.children,{patchFlag:ne,shapeFlag:le}=W;if(ne>0){if(ne&128){ie(pe,Q,$,de,ue,fe,Ge,Be,ye);return}else if(ne&256){Oe(pe,Q,$,de,ue,fe,Ge,Be,ye);return}}le&8?(J&16&&dt(pe,ue,fe),Q!==pe&&v($,Q)):J&16?le&16?ie(pe,Q,$,de,ue,fe,Ge,Be,ye):dt(pe,ue,fe,!0):(J&8&&v($,""),le&16&&G(Q,$,de,ue,fe,Ge,Be,ye))},Oe=(H,W,$,de,ue,fe,Ge,Be,ye)=>{H=H||EMPTY_ARR,W=W||EMPTY_ARR;const pe=H.length,J=W.length,Q=Math.min(pe,J);let ne;for(ne=0;ne<Q;ne++){const le=W[ne]=ye?cloneIfMounted(W[ne]):normalizeVNode(W[ne]);b(H[ne],le,$,null,ue,fe,Ge,Be,ye)}pe>J?dt(H,ue,fe,!0,!1,Q):G(W,$,de,ue,fe,Ge,Be,ye,Q)},ie=(H,W,$,de,ue,fe,Ge,Be,ye)=>{let pe=0;const J=W.length;let Q=H.length-1,ne=J-1;for(;pe<=Q&&pe<=ne;){const le=H[pe],ke=W[pe]=ye?cloneIfMounted(W[pe]):normalizeVNode(W[pe]);if(isSameVNodeType(le,ke))b(le,ke,$,null,ue,fe,Ge,Be,ye);else break;pe++}for(;pe<=Q&&pe<=ne;){const le=H[Q],ke=W[ne]=ye?cloneIfMounted(W[ne]):normalizeVNode(W[ne]);if(isSameVNodeType(le,ke))b(le,ke,$,null,ue,fe,Ge,Be,ye);else break;Q--,ne--}if(pe>Q){if(pe<=ne){const le=ne+1,ke=le<J?W[le].el:de;for(;pe<=ne;)b(null,W[pe]=ye?cloneIfMounted(W[pe]):normalizeVNode(W[pe]),$,ke,ue,fe,Ge,Be,ye),pe++}}else if(pe>ne)for(;pe<=Q;)oe(H[pe],ue,fe,!0),pe++;else{const le=pe,ke=pe,be=new Map;for(pe=ke;pe<=ne;pe++){const vt=W[pe]=ye?cloneIfMounted(W[pe]):normalizeVNode(W[pe]);vt.key!=null&&be.set(vt.key,pe)}let Ze,mt=0;const ut=ne-ke+1;let Ot=!1,Pt=0;const Wt=new Array(ut);for(pe=0;pe<ut;pe++)Wt[pe]=0;for(pe=le;pe<=Q;pe++){const vt=H[pe];if(mt>=ut){oe(vt,ue,fe,!0);continue}let Nt;if(vt.key!=null)Nt=be.get(vt.key);else for(Ze=ke;Ze<=ne;Ze++)if(Wt[Ze-ke]===0&&isSameVNodeType(vt,W[Ze])){Nt=Ze;break}Nt===void 0?oe(vt,ue,fe,!0):(Wt[Nt-ke]=pe+1,Nt>=Pt?Pt=Nt:Ot=!0,b(vt,W[Nt],$,null,ue,fe,Ge,Be,ye),mt++)}const Ft=Ot?getSequence(Wt):EMPTY_ARR;for(Ze=Ft.length-1,pe=ut-1;pe>=0;pe--){const vt=ke+pe,Nt=W[vt],Ut=vt+1<J?W[vt+1].el:de;Wt[pe]===0?b(null,Nt,$,Ut,ue,fe,Ge,Be,ye):Ot&&(Ze<0||pe!==Ft[Ze]?it(Nt,$,Ut,2):Ze--)}}},it=(H,W,$,de,ue=null)=>{const{el:fe,type:Ge,transition:Be,children:ye,shapeFlag:pe}=H;if(pe&6){it(H.component.subTree,W,$,de);return}if(pe&128){H.suspense.move(W,$,de);return}if(pe&64){Ge.move(H,W,$,se);return}if(Ge===Fragment){i(fe,W,$);for(let Q=0;Q<ye.length;Q++)it(ye[Q],W,$,de);i(H.anchor,W,$);return}if(Ge===Static){R(H,W,$);return}if(de!==2&&pe&1&&Be)if(de===0)Be.beforeEnter(fe),i(fe,W,$),queuePostRenderEffect(()=>Be.enter(fe),ue);else{const{leave:Q,delayLeave:ne,afterLeave:le}=Be,ke=()=>i(fe,W,$),be=()=>{Q(fe,()=>{ke(),le&&le()})};ne?ne(fe,ke,be):be()}else i(fe,W,$)},oe=(H,W,$,de=!1,ue=!1)=>{const{type:fe,props:Ge,ref:Be,children:ye,dynamicChildren:pe,shapeFlag:J,patchFlag:Q,dirs:ne,cacheIndex:le}=H;if(Q===-2&&(ue=!1),Be!=null&&setRef(Be,null,$,H,!0),le!=null&&(W.renderCache[le]=void 0),J&256){W.ctx.deactivate(H);return}const ke=J&1&&ne,be=!isAsyncWrapper(H);let Ze;if(be&&(Ze=Ge&&Ge.onVnodeBeforeUnmount)&&invokeVNodeHook(Ze,W,H),J&6)Qe(H.component,$,de);else{if(J&128){H.suspense.unmount($,de);return}ke&&invokeDirectiveHook(H,null,W,"beforeUnmount"),J&64?H.type.remove(H,W,$,se,de):pe&&!pe.hasOnce&&(fe!==Fragment||Q>0&&Q&64)?dt(pe,W,$,!1,!0):(fe===Fragment&&Q&384||!ue&&J&16)&&dt(ye,W,$),de&&ft(H)}(be&&(Ze=Ge&&Ge.onVnodeUnmounted)||ke)&&queuePostRenderEffect(()=>{Ze&&invokeVNodeHook(Ze,W,H),ke&&invokeDirectiveHook(H,null,W,"unmounted")},$)},ft=H=>{const{type:W,el:$,anchor:de,transition:ue}=H;if(W===Fragment){ct($,de);return}if(W===Static){L(H);return}const fe=()=>{r($),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(H.shapeFlag&1&&ue&&!ue.persisted){const{leave:Ge,delayLeave:Be}=ue,ye=()=>Ge($,fe);Be?Be(H.el,fe,ye):ye()}else fe()},ct=(H,W)=>{let $;for(;H!==W;)$=C(H),r(H),H=$;r(W)},Qe=(H,W,$)=>{const{bum:de,scope:ue,job:fe,subTree:Ge,um:Be,m:ye,a:pe}=H;invalidateMount(ye),invalidateMount(pe),de&&invokeArrayFns(de),ue.stop(),fe&&(fe.flags|=8,oe(Ge,H,W,$)),Be&&queuePostRenderEffect(Be,W),queuePostRenderEffect(()=>{H.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},dt=(H,W,$,de=!1,ue=!1,fe=0)=>{for(let Ge=fe;Ge<H.length;Ge++)oe(H[Ge],W,$,de,ue)},re=H=>{if(H.shapeFlag&6)return re(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const W=C(H.anchor||H.el),$=W&&W[TeleportEndKey];return $?C($):W};let Ve=!1;const je=(H,W,$)=>{H==null?W._vnode&&oe(W._vnode,null,null,!0):b(W._vnode||null,H,W,null,null,null,$),W._vnode=H,Ve||(Ve=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ve=!1)},se={p:b,um:oe,m:it,r:ft,mt:X,mc:G,pc:te,pbc:F,n:re,o:n};let pt,xt;return e&&([pt,xt]=e(se)),{render:je,hydrate:pt,createApp:createAppAPI(je,pt)}}function resolveChildrenNamespace({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function needTransition(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(n,e,t=!1){const i=n.children,r=e.children;if(isArray$1(i)&&isArray$1(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=cloneIfMounted(r[s]),a.el=o.el),!t&&a.patchFlag!==-2&&traverseStaticChildren(o,a)),a.type===Text$1&&(a.el=o.el)}}function getSequence(n){const e=n.slice(),t=[0];let i,r,s,o,a;const d=n.length;for(i=0;i<d;i++){const y=n[i];if(y!==0){if(r=t[t.length-1],n[r]<y){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<y?s=a+1:o=a;y<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function locateNonHydratedAsyncRoot(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(n,e){return doWatch(n,null,e)}function watchPostEffect(n,e){return doWatch(n,null,{flush:"post"})}function watchSyncEffect(n,e){return doWatch(n,null,{flush:"sync"})}function watch(n,e,t){return doWatch(n,e,t)}function doWatch(n,e,t=EMPTY_OBJ){const{immediate:i,deep:r,flush:s,once:o}=t,a=extend$5({},t);let d;if(isInSSRComponentSetup)if(s==="sync"){const C=useSSRContext();d=C.__watcherHandles||(C.__watcherHandles=[])}else if(!e||i)a.once=!0;else return{stop:NOOP,resume:NOOP,pause:NOOP};const y=currentInstance;a.call=(C,E,S)=>callWithAsyncErrorHandling(C,y,E,S);let v=!1;s==="post"?a.scheduler=C=>{queuePostRenderEffect(C,y&&y.suspense)}:s!=="sync"&&(v=!0,a.scheduler=(C,E)=>{E?C():queueJob(C)}),a.augmentJob=C=>{e&&(C.flags|=4),v&&(C.flags|=2,y&&(C.id=y.uid,C.i=y))};const _=watch$1(n,e,a);return d&&d.push(_),_}function instanceWatch(n,e,t){const i=this.proxy,r=isString(n)?n.includes(".")?createPathGetter(i,n):()=>i[n]:n.bind(i,i);let s;isFunction$1(e)?s=e:(s=e.handler,t=e);const o=setCurrentInstance(this),a=doWatch(r,s.bind(i),t);return o(),a}function createPathGetter(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function useModel(n,e,t=EMPTY_OBJ){const i=getCurrentInstance(),r=camelize(e),s=hyphenate(e),o=getModelModifiers(n,e),a=customRef((d,y)=>{let v,_=EMPTY_OBJ,C;return watchSyncEffect(()=>{const E=n[e];hasChanged(v,E)&&(v=E,y())}),{get(){return d(),t.get?t.get(v):v},set(E){const S=t.set?t.set(E):E;if(!hasChanged(S,v)&&!(_!==EMPTY_OBJ&&hasChanged(E,_)))return;const b=i.vnode.props;b&&(e in b||r in b||s in b)&&(`onUpdate:${e}`in b||`onUpdate:${r}`in b||`onUpdate:${s}`in b)||(v=E,y()),i.emit(`update:${e}`,S),hasChanged(E,S)&&hasChanged(E,_)&&!hasChanged(S,C)&&y(),_=E,C=S}}});return a[Symbol.iterator]=()=>{let d=0;return{next(){return d<2?{value:d++?o||EMPTY_OBJ:a,done:!1}:{done:!0}}}},a}const getModelModifiers=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${camelize(e)}Modifiers`]||n[`${hyphenate(e)}Modifiers`];function emit(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||EMPTY_OBJ;let r=t;const s=e.startsWith("update:"),o=s&&getModelModifiers(i,e.slice(7));o&&(o.trim&&(r=t.map(v=>isString(v)?v.trim():v)),o.number&&(r=t.map(looseToNumber)));let a,d=i[a=toHandlerKey(e)]||i[a=toHandlerKey(camelize(e))];!d&&s&&(d=i[a=toHandlerKey(hyphenate(e))]),d&&callWithAsyncErrorHandling(d,n,6,r);const y=i[a+"Once"];if(y){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,callWithAsyncErrorHandling(y,n,6,r)}}function normalizeEmitsOptions(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!isFunction$1(n)){const d=y=>{const v=normalizeEmitsOptions(y,e,!0);v&&(a=!0,extend$5(o,v))};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}return!s&&!a?(isObject$1(n)&&i.set(n,null),null):(isArray$1(s)?s.forEach(d=>o[d]=null):extend$5(o,s),isObject$1(n)&&i.set(n,o),o)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(n,e[0].toLowerCase()+e.slice(1))||hasOwn(n,hyphenate(e))||hasOwn(n,e))}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:d,render:y,renderCache:v,props:_,data:C,setupState:E,ctx:S,inheritAttrs:b}=n,P=setCurrentRenderingInstance(n);let x,T;try{if(t.shapeFlag&4){const L=r||i,k=L;x=normalizeVNode(y.call(k,L,v,_,E,C,S)),T=a}else{const L=e;x=normalizeVNode(L.length>1?L(_,{attrs:a,slots:o,emit:d}):L(_,null)),T=e.props?a:getFunctionalFallthrough(a)}}catch(L){blockStack.length=0,handleError(L,n,1),x=createVNode(Comment)}let R=x;if(T&&b!==!1){const L=Object.keys(T),{shapeFlag:k}=R;L.length&&k&7&&(s&&L.some(isModelListener)&&(T=filterModelListeners(T,s)),R=cloneVNode(R,T,!1,!0))}return t.dirs&&(R=cloneVNode(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&(R.transition=t.transition),x=R,setCurrentRenderingInstance(P),x}function filterSingleRoot(n,e=!0){let t;for(let i=0;i<n.length;i++){const r=n[i];if(isVNode(r)){if(r.type!==Comment||r.children==="v-if"){if(t)return;t=r}}else return}return t}const getFunctionalFallthrough=n=>{let e;for(const t in n)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=n[t]);return e},filterModelListeners=(n,e)=>{const t={};for(const i in n)(!isModelListener(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function shouldUpdateComponent(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:d}=e,y=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&d>=0){if(d&1024)return!0;if(d&16)return i?hasPropsChanged(i,o,y):!!o;if(d&8){const v=e.dynamicProps;for(let _=0;_<v.length;_++){const C=v[_];if(o[C]!==i[C]&&!isEmitListener(y,C))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,y):!0:!!o;return!1}function hasPropsChanged(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!isEmitListener(t,s))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const isSuspense=n=>n.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(n,e,t,i,r,s,o,a,d,y){if(n==null)mountSuspense(e,t,i,r,s,o,a,d,y);else{if(s&&s.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}patchSuspense(n,e,t,i,r,o,a,d,y)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(n,e){const t=n.props&&n.props[e];isFunction$1(t)&&t()}function mountSuspense(n,e,t,i,r,s,o,a,d){const{p:y,o:{createElement:v}}=d,_=v("div"),C=n.suspense=createSuspenseBoundary(n,r,i,e,_,t,s,o,a,d);y(null,C.pendingBranch=n.ssContent,_,null,i,C,s,o),C.deps>0?(triggerEvent(n,"onPending"),triggerEvent(n,"onFallback"),y(null,n.ssFallback,e,t,i,null,s,o),setActiveBranch(C,n.ssFallback)):C.resolve(!1,!0)}function patchSuspense(n,e,t,i,r,s,o,a,{p:d,um:y,o:{createElement:v}}){const _=e.suspense=n.suspense;_.vnode=e,e.el=n.el;const C=e.ssContent,E=e.ssFallback,{activeBranch:S,pendingBranch:b,isInFallback:P,isHydrating:x}=_;if(b)_.pendingBranch=C,isSameVNodeType(C,b)?(d(b,C,_.hiddenContainer,null,r,_,s,o,a),_.deps<=0?_.resolve():P&&(x||(d(S,E,t,i,r,null,s,o,a),setActiveBranch(_,E)))):(_.pendingId=suspenseId++,x?(_.isHydrating=!1,_.activeBranch=b):y(b,r,_),_.deps=0,_.effects.length=0,_.hiddenContainer=v("div"),P?(d(null,C,_.hiddenContainer,null,r,_,s,o,a),_.deps<=0?_.resolve():(d(S,E,t,i,r,null,s,o,a),setActiveBranch(_,E))):S&&isSameVNodeType(C,S)?(d(S,C,t,i,r,_,s,o,a),_.resolve(!0)):(d(null,C,_.hiddenContainer,null,r,_,s,o,a),_.deps<=0&&_.resolve()));else if(S&&isSameVNodeType(C,S))d(S,C,t,i,r,_,s,o,a),setActiveBranch(_,C);else if(triggerEvent(e,"onPending"),_.pendingBranch=C,C.shapeFlag&512?_.pendingId=C.component.suspenseId:_.pendingId=suspenseId++,d(null,C,_.hiddenContainer,null,r,_,s,o,a),_.deps<=0)_.resolve();else{const{timeout:T,pendingId:R}=_;T>0?setTimeout(()=>{_.pendingId===R&&_.fallback(E)},T):T===0&&_.fallback(E)}}function createSuspenseBoundary(n,e,t,i,r,s,o,a,d,y,v=!1){const{p:_,m:C,um:E,n:S,o:{parentNode:b,remove:P}}=y;let x;const T=isVNodeSuspensible(n);T&&e&&e.pendingBranch&&(x=e.pendingId,e.deps++);const R=n.props?toNumber(n.props.timeout):void 0,L=s,k={vnode:n,parent:e,parentComponent:t,namespace:o,container:i,hiddenContainer:r,deps:0,pendingId:suspenseId++,timeout:typeof R=="number"?R:-1,activeBranch:null,pendingBranch:null,isInFallback:!v,isHydrating:v,isUnmounted:!1,effects:[],resolve(N=!1,D=!1){const{vnode:G,activeBranch:U,pendingBranch:F,pendingId:B,effects:z,parentComponent:Y,container:X}=k;let q=!1;k.isHydrating?k.isHydrating=!1:N||(q=U&&F.transition&&F.transition.mode==="out-in",q&&(U.transition.afterLeave=()=>{B===k.pendingId&&(C(F,X,s===L?S(U):s,0),queuePostFlushCb(z))}),U&&(b(U.el)!==k.hiddenContainer&&(s=S(U)),E(U,Y,k,!0)),q||C(F,X,s,0)),setActiveBranch(k,F),k.pendingBranch=null,k.isInFallback=!1;let K=k.parent,ee=!1;for(;K;){if(K.pendingBranch){K.effects.push(...z),ee=!0;break}K=K.parent}!ee&&!q&&queuePostFlushCb(z),k.effects=[],T&&e&&e.pendingBranch&&x===e.pendingId&&(e.deps--,e.deps===0&&!D&&e.resolve()),triggerEvent(G,"onResolve")},fallback(N){if(!k.pendingBranch)return;const{vnode:D,activeBranch:G,parentComponent:U,container:F,namespace:B}=k;triggerEvent(D,"onFallback");const z=S(G),Y=()=>{k.isInFallback&&(_(null,N,F,z,U,null,B,a,d),setActiveBranch(k,N))},X=N.transition&&N.transition.mode==="out-in";X&&(G.transition.afterLeave=Y),k.isInFallback=!0,E(G,U,null,!0),X||Y()},move(N,D,G){k.activeBranch&&C(k.activeBranch,N,D,G),k.container=N},next(){return k.activeBranch&&S(k.activeBranch)},registerDep(N,D,G){const U=!!k.pendingBranch;U&&k.deps++;const F=N.vnode.el;N.asyncDep.catch(B=>{handleError(B,N,0)}).then(B=>{if(N.isUnmounted||k.isUnmounted||k.pendingId!==N.suspenseId)return;N.asyncResolved=!0;const{vnode:z}=N;handleSetupResult(N,B,!1),F&&(z.el=F);const Y=!F&&N.subTree.el;D(N,z,b(F||N.subTree.el),F?null:S(N.subTree),k,o,G),Y&&P(Y),updateHOCHostEl(N,z.el),U&&--k.deps===0&&k.resolve()})},unmount(N,D){k.isUnmounted=!0,k.activeBranch&&E(k.activeBranch,t,N,D),k.pendingBranch&&E(k.pendingBranch,t,N,D)}};return k}function hydrateSuspense(n,e,t,i,r,s,o,a,d){const y=e.suspense=createSuspenseBoundary(e,i,t,n.parentNode,document.createElement("div"),null,r,s,o,a,!0),v=d(n,y.pendingBranch=e.ssContent,t,y,s,o);return y.deps===0&&y.resolve(!1,!0),v}function normalizeSuspenseChildren(n){const{shapeFlag:e,children:t}=n,i=e&32;n.ssContent=normalizeSuspenseSlot(i?t.default:t),n.ssFallback=i?normalizeSuspenseSlot(t.fallback):createVNode(Comment)}function normalizeSuspenseSlot(n){let e;if(isFunction$1(n)){const t=isBlockTreeEnabled&&n._c;t&&(n._d=!1,openBlock()),n=n(),t&&(n._d=!0,e=currentBlock,closeBlock())}return isArray$1(n)&&(n=filterSingleRoot(n)),n=normalizeVNode(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray$1(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}function setActiveBranch(n,e){n.activeBranch=e;const{vnode:t,parentComponent:i}=n;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;t.el=r,i&&i.subTree===t&&(i.vnode.el=r,updateHOCHostEl(i,r))}function isVNodeSuspensible(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n,n<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,t,i,r,s){return setupBlock(createBaseVNode(n,e,t,i,r,s,!0))}function createBlock(n,e,t,i,r){return setupBlock(createVNode(n,e,t,i,r,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}function transformVNodeArgs(n){}const normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?isString(n)||isRef(n)||isFunction$1(n)?{i:currentRenderingInstance,r:n,k:e,f:!!t}:n:null);function createBaseVNode(n,e=null,t=null,i=0,r=null,s=n===Fragment?0:1,o=!1,a=!1){const d={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(d,t),s&128&&n.normalize(d)):t&&(d.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(d.patchFlag>0||s&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const a=cloneVNode(n,e,!0);return t&&normalizeChildren(a,t),isBlockTreeEnabled>0&&!s&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=a:currentBlock.push(a)),a.patchFlag=-2,a}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:d}=e;a&&!isString(a)&&(e.class=normalizeClass(a)),isObject$1(d)&&(isProxy(d)&&!isArray$1(d)&&(d=extend$5({},d)),e.style=normalizeStyle(d))}const o=isString(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$1(n)?4:isFunction$1(n)?2:0;return createBaseVNode(n,e,t,i,r,o,s,!0)}function guardReactiveProps(n){return n?isProxy(n)||isInternalObject(n)?extend$5({},n):n:null}function cloneVNode(n,e,t=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:d}=n,y=e?mergeProps(r||{},e):r,v={__v_isVNode:!0,__v_skip:!0,type:n.type,props:y,key:y&&normalizeKey(y),ref:e&&e.ref?t&&s?isArray$1(s)?s.concat(normalizeRef(e)):[s,normalizeRef(e)]:normalizeRef(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:d,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return d&&i&&setTransitionHooks(v,d.clone(v)),v}function createTextVNode(n=" ",e=0){return createVNode(Text$1,null,n,e)}function createStaticVNode(n,e){const t=createVNode(Static,null,n);return t.staticCount=e,t}function createCommentVNode(n="",e=!1){return e?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$1(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text$1,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),normalizeChildren(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!isInternalObject(e)?e._ctx=currentRenderingInstance:r===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),i&64?(t=16,e=[createTextVNode(e)]):t=8);n.children=e,n.shapeFlag|=t}function mergeProps(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(r==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(r)){const s=e[r],o=i[r];o&&s!==o&&!(isArray$1(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function invokeVNodeHook(n,e,t,i=null){callWithAsyncErrorHandling(n,e,7,[t,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||emptyAppContext,s={uid:uid++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,r),emitsOptions:normalizeEmitsOptions(i,r),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit.bind(null,s),n.ce&&n.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const n=getGlobalThis(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=n=>{const e=currentInstance;return internalSetCurrentInstance(n),n.scope.on(),()=>{n.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:i,children:r}=n.vnode,s=isStatefulComponent(n);initProps(n,i,s,e),initSlots(n,r,t);const o=s?setupStatefulComponent(n,e):void 0;return e&&setInSSRSetupState(!1),o}function setupStatefulComponent(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,PublicInstanceProxyHandlers);const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?createSetupContext(n):null,s=setCurrentInstance(n);pauseTracking();const o=callWithErrorHandling(i,n,0,[n.props,r]);if(resetTracking(),s(),isPromise(o)){if(isAsyncWrapper(n)||markAsyncBoundary(n),o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(a=>{handleSetupResult(n,a,e)}).catch(a=>{handleError(a,n,0)});n.asyncDep=o}else handleSetupResult(n,o,e)}else finishComponentSetup(n,e)}function handleSetupResult(n,e,t){isFunction$1(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject$1(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n,t)}let compile$1,installWithProxy;function registerRuntimeCompiler(n){compile$1=n,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(n,e,t){const i=n.type;if(!n.render){if(!e&&compile$1&&!i.render){const r=i.template||resolveMergedOptions(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:d}=i,y=extend$5(extend$5({isCustomElement:s,delimiters:a},o),d);i.render=compile$1(r,y)}}n.render=i.render||NOOP,installWithProxy&&installWithProxy(n)}{const r=setCurrentInstance(n);pauseTracking();try{applyOptions(n)}finally{resetTracking(),r()}}}const attrsProxyHandlers={get(n,e){return track(n,"get",""),n[e]}};function createSetupContext(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,attrsProxyHandlers),slots:n.slots,emit:n.emit,expose:e}}function getComponentPublicInstance(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](n)},has(e,t){return t in e||t in publicPropertiesMap}})):n.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=n=>n.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(n,e=!0){return isFunction$1(n)?n.displayName||n.name:n.name||e&&n.__name}function formatComponentName(n,e,t=!1){let i=getComponentName(e);if(!i&&e.__file){const r=e.__file.match(/([^/\\]+)\.\w+$/);r&&(i=r[1])}if(!i&&n&&n.parent){const r=s=>{for(const o in s)if(s[o]===e)return o};i=r(n.components||n.parent.type.components)||r(n.appContext.components)}return i?classify(i):t?"App":"Anonymous"}function isClassComponent(n){return isFunction$1(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup);function useTemplateRef(n){const e=getCurrentInstance(),t=shallowRef(null);if(e){const i=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(i,n,{enumerable:!0,get:()=>t.value,set:r=>t.value=r})}return t}function h$1(n,e,t){const i=arguments.length;return i===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(n,null,[e]):createVNode(n,e):createVNode(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&isVNode(t)&&(t=[t]),createVNode(n,e,t))}function initCustomFormatter(){}function withMemo(n,e,t,i){const r=t[i];if(r&&isMemoSame(r,n))return r;const s=e();return s.memo=n.slice(),s.cacheIndex=i,t[i]=s}function isMemoSame(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(hasChanged(t[i],e[i]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),!0}const version$3="3.5.0",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.0
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:n=>n})}catch{}const unsafeToTrustedHTML=policy?n=>policy.createHTML(n):n=>n,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?doc.createElementNS(svgNS,n):e==="mathml"?doc.createElementNS(mathmlNS,n):t?doc.createElement(n,{is:t}):doc.createElement(n);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=templateContainer.content;if(i==="svg"||i==="mathml"){const d=a.firstChild;for(;d.firstChild;)a.appendChild(d.firstChild);a.removeChild(d)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(n,{slots:e})=>h$1(BaseTransition,resolveTransitionProps(n),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(n,e=[])=>{isArray$1(n)?n.forEach(t=>t(...e)):n&&n(...e)},hasExplicitCallback=n=>n?isArray$1(n)?n.some(e=>e.length>1):n.length>1:!1;function resolveTransitionProps(n){const e={};for(const z in n)z in DOMTransitionPropsValidators||(e[z]=n[z]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:d=s,appearActiveClass:y=o,appearToClass:v=a,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:C=`${t}-leave-active`,leaveToClass:E=`${t}-leave-to`}=n,S=normalizeDuration(r),b=S&&S[0],P=S&&S[1],{onBeforeEnter:x,onEnter:T,onEnterCancelled:R,onLeave:L,onLeaveCancelled:k,onBeforeAppear:N=x,onAppear:D=T,onAppearCancelled:G=R}=e,U=(z,Y,X)=>{removeTransitionClass(z,Y?v:a),removeTransitionClass(z,Y?y:o),X&&X()},F=(z,Y)=>{z._isLeaving=!1,removeTransitionClass(z,_),removeTransitionClass(z,E),removeTransitionClass(z,C),Y&&Y()},B=z=>(Y,X)=>{const q=z?D:T,K=()=>U(Y,z,X);callHook(q,[Y,K]),nextFrame(()=>{removeTransitionClass(Y,z?d:s),addTransitionClass(Y,z?v:a),hasExplicitCallback(q)||whenTransitionEnds(Y,i,b,K)})};return extend$5(e,{onBeforeEnter(z){callHook(x,[z]),addTransitionClass(z,s),addTransitionClass(z,o)},onBeforeAppear(z){callHook(N,[z]),addTransitionClass(z,d),addTransitionClass(z,y)},onEnter:B(!1),onAppear:B(!0),onLeave(z,Y){z._isLeaving=!0;const X=()=>F(z,Y);addTransitionClass(z,_),addTransitionClass(z,C),forceReflow(),nextFrame(()=>{z._isLeaving&&(removeTransitionClass(z,_),addTransitionClass(z,E),hasExplicitCallback(L)||whenTransitionEnds(z,i,P,X))}),callHook(L,[z,X])},onEnterCancelled(z){U(z,!1),callHook(R,[z])},onAppearCancelled(z){U(z,!0),callHook(G,[z])},onLeaveCancelled(z){F(z),callHook(k,[z])}})}function normalizeDuration(n){if(n==null)return null;if(isObject$1(n))return[NumberOf(n.enter),NumberOf(n.leave)];{const e=NumberOf(n);return[e,e]}}function NumberOf(n){return toNumber(n)}function addTransitionClass(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[vtcKey]||(n[vtcKey]=new Set)).add(e)}function removeTransitionClass(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[vtcKey];t&&(t.delete(e),t.size||(n[vtcKey]=void 0))}function nextFrame(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let endId=0;function whenTransitionEnds(n,e,t,i){const r=n._endId=++endId,s=()=>{r===n._endId&&i()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:d}=getTransitionInfo(n,e);if(!o)return i();const y=o+"end";let v=0;const _=()=>{n.removeEventListener(y,C),s()},C=E=>{E.target===n&&++v>=d&&_()};setTimeout(()=>{v<d&&_()},a+1),n.addEventListener(y,C)}function getTransitionInfo(n,e){const t=window.getComputedStyle(n),i=S=>(t[S]||"").split(", "),r=i(`${TRANSITION}Delay`),s=i(`${TRANSITION}Duration`),o=getTimeout(r,s),a=i(`${ANIMATION}Delay`),d=i(`${ANIMATION}Duration`),y=getTimeout(a,d);let v=null,_=0,C=0;e===TRANSITION?o>0&&(v=TRANSITION,_=o,C=s.length):e===ANIMATION?y>0&&(v=ANIMATION,_=y,C=d.length):(_=Math.max(o,y),v=_>0?o>y?TRANSITION:ANIMATION:null,C=v?v===TRANSITION?s.length:d.length:0);const E=v===TRANSITION&&/\b(transform|all)(,|$)/.test(i(`${TRANSITION}Property`).toString());return{type:v,timeout:_,propCount:C,hasTransform:E}}function getTimeout(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>toMs(t)+toMs(n[i])))}function toMs(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(n,e,t){const i=n[vtcKey];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(n,{value:e},{transition:t}){n[vShowOriginalDisplay]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):setDisplay(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),setDisplay(n,!0),i.enter(n)):i.leave(n,()=>{setDisplay(n,!1)}):setDisplay(n,e))},beforeUnmount(n,{value:e}){setDisplay(n,e)}};function setDisplay(n,e){n.style.display=e?n[vShowOriginalDisplay]:"none",n[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(n){const e=getCurrentInstance();if(!e)return;const t=e.ut=(r=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>setVarsOnNode(s,r))},i=()=>{const r=n(e.proxy);e.ce?setVarsOnNode(e.ce,r):setVarsOnVNode(e.subTree,r),t(r)};onBeforeMount(()=>{watchPostEffect(i)}),onMounted(()=>{const r=new MutationObserver(i);r.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>r.disconnect())})}function setVarsOnVNode(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{setVarsOnVNode(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)setVarsOnNode(n.el,e);else if(n.type===Fragment)n.children.forEach(t=>setVarsOnVNode(t,e));else if(n.type===Static){let{el:t,anchor:i}=n;for(;t&&(setVarsOnNode(t,e),t!==i);)t=t.nextSibling}}function setVarsOnNode(n,e){if(n.nodeType===1){const t=n.style;let i="";for(const r in e)t.setProperty(`--${r}`,e[r]),i+=`--${r}: ${e[r]};`;t[CSS_VAR_TEXT]=i}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(n,e,t){const i=n.style,r=isString(t);let s=!1;if(t&&!r){if(e)if(isString(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&setStyle(i,a,"")}else for(const o in e)t[o]==null&&setStyle(i,o,"");for(const o in t)o==="display"&&(s=!0),setStyle(i,o,t[o])}else if(r){if(e!==t){const o=i[CSS_VAR_TEXT];o&&(t+=";"+o),i.cssText=t,s=displayRE.test(t)}}else e&&n.removeAttribute("style");vShowOriginalDisplay in n&&(n[vShowOriginalDisplay]=s?i.display:"",n[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(n,e,t){if(isArray$1(t))t.forEach(i=>setStyle(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=autoPrefix(n,e);importantRE.test(t)?n.setProperty(hyphenate(i),t.replace(importantRE,""),"important"):n[i]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const t=prefixCache[e];if(t)return t;let i=camelize(e);if(i!=="filter"&&i in n)return prefixCache[e]=i;i=capitalize(i);for(let r=0;r<prefixes.length;r++){const s=prefixes[r]+i;if(s in n)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,t,i,r,s=isSpecialBooleanAttr(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,t):t==null||s&&!includeBooleanAttr(t)?n.removeAttribute(e):n.setAttribute(e,s?"":isSymbol(t)?String(t):t)}function patchDOMProp(n,e,t,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?n.type==="checkbox"?"on":"":String(t);(o!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let s=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=includeBooleanAttr(t):t==null&&o==="string"?(t="",s=!0):o==="number"&&(t=0,s=!0)}try{n[e]=t}catch{}s&&n.removeAttribute(e)}function addEventListener(n,e,t,i){n.addEventListener(e,t,i)}function removeEventListener(n,e,t,i){n.removeEventListener(e,t,i)}const veiKey=Symbol("_vei");function patchEvent(n,e,t,i,r=null){const s=n[veiKey]||(n[veiKey]={}),o=s[e];if(i&&o)o.value=i;else{const[a,d]=parseName(e);if(i){const y=s[e]=createInvoker(i,r);addEventListener(n,a,y,d)}else o&&(removeEventListener(n,a,o,d),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let i;for(;i=n.match(optionsModifierRE);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),e]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,t.value),e,5,[i])};return t.value=n,t.attached=getNow(),t}function patchStopImmediatePropagation(n,e){if(isArray$1(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const isNativeOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,patchProp=(n,e,t,i,r,s)=>{const o=r==="svg";e==="class"?patchClass(n,i,o):e==="style"?patchStyle(n,t,i):isOn(e)?isModelListener(e)||patchEvent(n,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,i,o))?(patchDOMProp(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(n,e,i,o,s,e!=="value")):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),patchAttr(n,e,i,o))};function shouldSetAsProp(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&isNativeOn(e)&&isFunction$1(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:!!(e in n||n._isVueCE&&(/[A-Z]/.test(e)||!isString(t)))}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(n,e,t){const i=defineComponent(n,e);isPlainObject$1(i)&&extend$5(i,e);class r extends VueElement{constructor(o){super(i,o,t)}}return r.def=i,r}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(n,e)=>defineCustomElement(n,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},i=createApp){super(),this._def=e,this._props=t,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance.ce=void 0,this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const r of i)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(i,r=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=i;let a;if(s&&!isArray$1(s))for(const d in s){const y=s[d];(y===Number||y&&y.type===Number)&&(d in this._props&&(this._props[d]=toNumber(this._props[d])),(a||(a=Object.create(null)))[camelize(d)]=!0)}this._numberProps=a,r&&this._resolveProps(i),this.shadowRoot&&this._applyStyles(o),this._mount(i)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(i=>e(this._def=i,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const i in t)hasOwn(this,i)||Object.defineProperty(this,i,{get:()=>unref(t[i])})}_resolveProps(e){const{props:t}=e,i=isArray$1(t)?t:Object.keys(t||{});for(const r of Object.keys(this))r[0]!=="_"&&i.includes(r)&&this._setProp(r,this[r]);for(const r of i.map(camelize))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(s){this._setProp(r,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let i=t?this.getAttribute(e):REMOVAL;const r=camelize(e);t&&this._numberProps&&this._numberProps[r]&&(i=toNumber(i)),this._setProp(r,i,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,i=!0,r=!1){t!==this._props[e]&&(t===REMOVAL?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),r&&this._instance&&this._update(),i&&(t===!0?this.setAttribute(hyphenate(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e))))}_update(){render$1(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=createVNode(this._def,extend$5(e,this._props));return this._instance||(t.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,isPlainObject$1(o[0])?extend$5({detail:o},o[0]):{detail:o}))};i.emit=(s,...o)=>{r(s,o),hyphenate(s)!==s&&r(hyphenate(s),o)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const i=this._nonce;for(let r=e.length-1;r>=0;r--){const s=document.createElement("style");i&&s.setAttribute("nonce",i),s.textContent=e[r],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const i=t.nodeType===1&&t.getAttribute("slot")||"default";(e[i]||(e[i]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=this.querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let i=0;i<e.length;i++){const r=e[i],s=r.getAttribute("name")||"default",o=this._slots[s],a=r.parentNode;if(o)for(const d of o){if(t&&d.nodeType===1){const y=t+"-s",v=document.createTreeWalker(d,1);d.setAttribute(y,"");let _;for(;_=v.nextNode();)_.setAttribute(y,"")}a.insertBefore(d,r)}else for(;r.firstChild;)a.insertBefore(r.firstChild,r);a.removeChild(r)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(n){const e=getCurrentInstance(),t=e&&e.ce;return t||null}function useShadowRoot(){const n=useHost();return n&&n.shadowRoot}function useCssModule(n="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const t=e.type.__cssModules;if(!t)return EMPTY_OBJ;const i=t[n];return i||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=getCurrentInstance(),i=useTransitionState();let r,s;return onUpdated(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!hasCSSTransform(r[0].el,t.vnode.el,o))return;r.forEach(callPendingCbs),r.forEach(recordPosition);const a=r.filter(applyTranslation);forceReflow(),a.forEach(d=>{const y=d.el,v=y.style;addTransitionClass(y,o),v.transform=v.webkitTransform=v.transitionDuration="";const _=y[moveCbKey]=C=>{C&&C.target!==y||(!C||/transform$/.test(C.propertyName))&&(y.removeEventListener("transitionend",_),y[moveCbKey]=null,removeTransitionClass(y,o))};y.addEventListener("transitionend",_)})}),()=>{const o=toRaw(n),a=resolveTransitionProps(o);let d=o.tag||Fragment;if(r=[],s)for(let y=0;y<s.length;y++){const v=s[y];v.el&&v.el instanceof Element&&(r.push(v),setTransitionHooks(v,resolveTransitionHooks(v,a,i,t)),positionMap.set(v,v.el.getBoundingClientRect()))}s=e.default?getTransitionRawChildren(e.default()):[];for(let y=0;y<s.length;y++){const v=s[y];v.key!=null&&setTransitionHooks(v,resolveTransitionHooks(v,a,i,t))}return createVNode(d,null,s)}}},removeMode=n=>delete n.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(n){const e=n.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(n){newPositionMap.set(n,n.el.getBoundingClientRect())}function applyTranslation(n){const e=positionMap.get(n),t=newPositionMap.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function hasCSSTransform(n,e,t){const i=n.cloneNode(),r=n[vtcKey];r&&r.forEach(a=>{a.split(/\s+/).forEach(d=>d&&i.classList.remove(d))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(i);const{hasTransform:o}=getTransitionInfo(i);return s.removeChild(i),o}const getModelAssigner=n=>{const e=n.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[assignKey]=getModelAssigner(r);const s=i||r.props&&r.props.type==="number";addEventListener(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=looseToNumber(a)),n[assignKey](a)}),t&&addEventListener(n,"change",()=>{n.value=n.value.trim()}),e||(addEventListener(n,"compositionstart",onCompositionStart),addEventListener(n,"compositionend",onCompositionEnd),addEventListener(n,"change",onCompositionEnd))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:r,number:s}},o){if(n[assignKey]=getModelAssigner(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?looseToNumber(n.value):n.value,d=e??"";a!==d&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||r&&n.value.trim()===d)||(n.value=d))}},vModelCheckbox={deep:!0,created(n,e,t){n[assignKey]=getModelAssigner(t),addEventListener(n,"change",()=>{const i=n._modelValue,r=getValue$1(n),s=n.checked,o=n[assignKey];if(isArray$1(i)){const a=looseIndexOf(i,r),d=a!==-1;if(s&&!d)o(i.concat(r));else if(!s&&d){const y=[...i];y.splice(a,1),o(y)}}else if(isSet(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(getCheckboxValue(n,s))})},mounted:setChecked,beforeUpdate(n,e,t){n[assignKey]=getModelAssigner(t),setChecked(n,e,t)}};function setChecked(n,{value:e,oldValue:t},i){n._modelValue=e;let r;isArray$1(e)?r=looseIndexOf(e,i.props.value)>-1:isSet(e)?r=e.has(i.props.value):r=looseEqual(e,getCheckboxValue(n,!0)),n.checked!==r&&(n.checked=r)}const vModelRadio={created(n,{value:e},t){n.checked=looseEqual(e,t.props.value),n[assignKey]=getModelAssigner(t),addEventListener(n,"change",()=>{n[assignKey](getValue$1(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[assignKey]=getModelAssigner(i),e!==t&&(n.checked=looseEqual(e,i.props.value))}},vModelSelect={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const r=isSet(e);addEventListener(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?looseToNumber(getValue$1(o)):getValue$1(o));n[assignKey](n.multiple?r?new Set(s):s:s[0]),n._assigning=!0,nextTick(()=>{n._assigning=!1})}),n[assignKey]=getModelAssigner(i)},mounted(n,{value:e,modifiers:{number:t}}){setSelected(n,e)},beforeUpdate(n,e,t){n[assignKey]=getModelAssigner(t)},updated(n,{value:e,modifiers:{number:t}}){n._assigning||setSelected(n,e)}};function setSelected(n,e,t){const i=n.multiple,r=isArray$1(e);if(!(i&&!r&&!isSet(e))){for(let s=0,o=n.options.length;s<o;s++){const a=n.options[s],d=getValue$1(a);if(i)if(r){const y=typeof d;y==="string"||y==="number"?a.selected=e.some(v=>String(v)===String(d)):a.selected=looseIndexOf(e,d)>-1}else a.selected=e.has(d);else if(looseEqual(getValue$1(a),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!i&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function getValue$1(n){return"_value"in n?n._value:n.value}function getCheckboxValue(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const vModelDynamic={created(n,e,t){callModelHook(n,e,t,null,"created")},mounted(n,e,t){callModelHook(n,e,t,null,"mounted")},beforeUpdate(n,e,t,i){callModelHook(n,e,t,i,"beforeUpdate")},updated(n,e,t,i){callModelHook(n,e,t,i,"updated")}};function resolveDynamicModel(n,e){switch(n){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(n,e,t,i,r){const o=resolveDynamicModel(n.tagName,t.props&&t.props.type)[r];o&&o(n,e,t,i)}function initVModelForSSR(){vModelText.getSSRProps=({value:n})=>({value:n}),vModelRadio.getSSRProps=({value:n},e)=>{if(e.props&&looseEqual(e.props.value,n))return{checked:!0}},vModelCheckbox.getSSRProps=({value:n},e)=>{if(isArray$1(n)){if(e.props&&looseIndexOf(n,e.props.value)>-1)return{checked:!0}}else if(isSet(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},vModelDynamic.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>systemModifiers.some(t=>n[`${t}Key`]&&!e.includes(t))},withModifiers=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let o=0;o<e.length;o++){const a=modifierGuards[e[o]];if(a&&a(r,e))return}return n(r,...s)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(n,e)=>{const t=n._withKeys||(n._withKeys={}),i=e.join(".");return t[i]||(t[i]=r=>{if(!("key"in r))return;const s=hyphenate(r.key);if(e.some(o=>o===s||keyNames[o]===s))return n(r)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...n)=>{ensureRenderer().render(...n)},hydrate=(...n)=>{ensureHydrationRenderer().hydrate(...n)},createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=normalizeContainer(i);if(!r)return;const s=e._component;!isFunction$1(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,resolveRootNamespace(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e},createSSRApp=(...n)=>{const e=ensureHydrationRenderer().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=normalizeContainer(i);if(r)return t(r,!0,resolveRootNamespace(r))},e};function resolveRootNamespace(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function normalizeContainer(n){return isString(n)?document.querySelector(n):n}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.0
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$1,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));var isVue2=!1;/*!
 * pinia v2.2.2
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=n=>activePinia=n,piniaSymbol=Symbol();function isPlainObject(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var MutationType;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const n=effectScope(!0),e=n.run(()=>ref({}));let t=[],i=[];const r=markRaw({install(s){setActivePinia(r),r._a=s,s.provide(piniaSymbol,r),s.config.globalProperties.$pinia=r,i.forEach(o=>t.push(o)),i=[]},use(s){return!this._a&&!isVue2?i.push(s):t.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const noop$2=()=>{};function addSubscription(n,e,t,i=noop$2){n.push(e);const r=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),i())};return!t&&getCurrentScope()&&onScopeDispose(r),r}function triggerSubscriptions(n,...e){n.slice().forEach(t=>{t(...e)})}const fallbackRunWithContext=n=>n(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,i)=>n.set(i,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],r=n[t];isPlainObject(r)&&isPlainObject(i)&&n.hasOwnProperty(t)&&!isRef(i)&&!isReactive(i)?n[t]=mergeReactiveObjects(r,i):n[t]=i}return n}const skipHydrateSymbol=Symbol();function shouldHydrate(n){return!isPlainObject(n)||!n.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(n){return!!(isRef(n)&&n.effect)}function createOptionsStore(n,e,t,i){const{state:r,actions:s,getters:o}=e,a=t.state.value[n];let d;function y(){a||(t.state.value[n]=r?r():{});const v=toRefs(t.state.value[n]);return assign$1(v,s,Object.keys(o||{}).reduce((_,C)=>(_[C]=markRaw(computed(()=>{setActivePinia(t);const E=t._s.get(n);return o[C].call(E,E)})),_),{}))}return d=createSetupStore(n,y,e,t,i,!0),d}function createSetupStore(n,e,t={},i,r,s){let o;const a=assign$1({actions:{}},t),d={deep:!0};let y,v,_=[],C=[],E;const S=i.state.value[n];!s&&!S&&(i.state.value[n]={}),ref({});let b;function P(G){let U;y=v=!1,typeof G=="function"?(G(i.state.value[n]),U={type:MutationType.patchFunction,storeId:n,events:E}):(mergeReactiveObjects(i.state.value[n],G),U={type:MutationType.patchObject,payload:G,storeId:n,events:E});const F=b=Symbol();nextTick().then(()=>{b===F&&(y=!0)}),v=!0,triggerSubscriptions(_,U,i.state.value[n])}const x=s?function(){const{state:U}=t,F=U?U():{};this.$patch(B=>{assign$1(B,F)})}:noop$2;function T(){o.stop(),_=[],C=[],i._s.delete(n)}const R=(G,U="")=>{if(ACTION_MARKER in G)return G[ACTION_NAME]=U,G;const F=function(){setActivePinia(i);const B=Array.from(arguments),z=[],Y=[];function X(ee){z.push(ee)}function q(ee){Y.push(ee)}triggerSubscriptions(C,{args:B,name:F[ACTION_NAME],store:k,after:X,onError:q});let K;try{K=G.apply(this&&this.$id===n?this:k,B)}catch(ee){throw triggerSubscriptions(Y,ee),ee}return K instanceof Promise?K.then(ee=>(triggerSubscriptions(z,ee),ee)).catch(ee=>(triggerSubscriptions(Y,ee),Promise.reject(ee))):(triggerSubscriptions(z,K),K)};return F[ACTION_MARKER]=!0,F[ACTION_NAME]=U,F},L={_p:i,$id:n,$onAction:addSubscription.bind(null,C),$patch:P,$reset:x,$subscribe(G,U={}){const F=addSubscription(_,G,U.detached,()=>B()),B=o.run(()=>watch(()=>i.state.value[n],z=>{(U.flush==="sync"?v:y)&&G({storeId:n,type:MutationType.direct,events:E},z)},assign$1({},d,U)));return F},$dispose:T},k=reactive(L);i._s.set(n,k);const D=(i._a&&i._a.runWithContext||fallbackRunWithContext)(()=>i._e.run(()=>(o=effectScope()).run(()=>e({action:R}))));for(const G in D){const U=D[G];if(isRef(U)&&!isComputed(U)||isReactive(U))s||(S&&shouldHydrate(U)&&(isRef(U)?U.value=S[G]:mergeReactiveObjects(U,S[G])),i.state.value[n][G]=U);else if(typeof U=="function"){const F=R(U,G);D[G]=F,a.actions[G]=U}}return assign$1(k,D),assign$1(toRaw(k),D),Object.defineProperty(k,"$state",{get:()=>i.state.value[n],set:G=>{P(U=>{assign$1(U,G)})}}),i._p.forEach(G=>{assign$1(k,o.run(()=>G({store:k,app:i._a,pinia:i,options:a})))}),S&&s&&t.hydrate&&t.hydrate(k.$state,S),y=!0,v=!0,k}function defineStore(n,e,t){let i,r;const s=typeof e=="function";typeof n=="string"?(i=n,r=s?t:e):(r=n,i=n.id);function o(a,d){const y=hasInjectionContext();return a=a||(y?inject(piniaSymbol,null):null),a&&setActivePinia(a),a=activePinia,a._s.has(i)||(s?createSetupStore(i,e,r,a):createOptionsStore(i,r,a)),a._s.get(i)}return o.$id=i,o}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var dist={},logger$D={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$D,"__esModule",{value:!0});logger$D.useLogger=logger$D.createLogger=logger$D.VueLogger=void 0;const vue_1=require$$0,isProduction=!0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:n,caller:e})=>e?`[${n.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${n.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(t=>typeof console[t]=="function")}apply(e){const t=this._options||defaultOptions;this._options={...t,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...t){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const i=this._options.callerInfo?this.getCallerInfo():void 0,r={level:e,caller:i,argumentArray:t};if(await this.invokeHooks(this._options.beforeHooks,r),this._options.consoleEnabled){const s=this._options.prefixFormat({level:e,caller:i});this._consoleFunctions.indexOf(e)>=0?console[e](s,...t):console.log(s,...t)}await this.invokeHooks(this._options.afterHooks,r)}}installHooks(e){if(e&&e.length>0){for(const t of e)if(t.install)try{t.install(this._options)}catch(i){console.warn("LoggerHook install failure",i)}}}async invokeHooks(e,t){if(e&&e.length>0)for(const i of e)try{await i.run(t)}catch(r){console.warn("LoggerHook run failure",r)}}getCallerInfo(){const e=new Error;if(e.stack)try{const i=e.stack.split(`
`)[0].startsWith("Error")?4:3,r=e.stack.split(`
`)[i].trim().replace("(","").replace(")","");let s;r.indexOf("at ")>-1?s=r.substring(r.indexOf("at ")+3,r.lastIndexOf(" ")).split(".").reverse()[0]:r.indexOf("@")>-1&&(s=r.substring(0,r.indexOf("@")));const o=r.split(":").reverse(),a=o[2].substring(Math.max(o[2].lastIndexOf("/"),o[2].lastIndexOf("\\"))+1).split("?")[0],d=o[1];return{functionName:s,fileName:a,lineNumber:d}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$D.VueLogger=VueLogger;function createLogger(n={}){return new VueLogger(n)}logger$D.createLogger=createLogger;function useLogger(){const n=vue_1.inject(loggerSymbol);return!n&&!isProduction&&console.warn("vue-logger-plugin :: useLogger missing inject"),n}logger$D.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(n){for(let e=0;e<n.argumentArray.length;e++)n.argumentArray[e]!=null&&typeof n.argumentArray[e]=="object"&&(n.argumentArray[e]=JSON.stringify(n.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(n){for(let e=0;e<n.argumentArray.length;e++)n.argumentArray[e]!=null&&typeof n.argumentArray[e]=="object"&&(n.argumentArray[e]=JSON.parse(JSON.stringify(n.argumentArray[e])))}};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StringifyAndParseObjectsHook=n.StringifyObjectsHook=n.useLogger=n.createLogger=n.VueLogger=void 0;var e=logger$D;Object.defineProperty(n,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(n,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(n,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var t=hooks;Object.defineProperty(n,"StringifyObjectsHook",{enumerable:!0,get:function(){return t.StringifyObjectsHook}}),Object.defineProperty(n,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return t.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(n){return"/cartes.gouv.fr-entree-carto/"+n},seen={},__vitePreload=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=assetsURL(a),a in seen)return;seen[a]=!0;const d=a.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${y}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":scriptRel,d||(v.as="script",v.crossOrigin=""),v.href=a,o&&v.setAttribute("nonce",o),document.head.appendChild(v),d)return new Promise((_,C)=>{v.addEventListener("load",_),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug(e),window.dsfr={verbose:!0,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.load().then(()=>{console.debug("import dynamic dsfr !");var t=JSON.parse(localStorage.getItem(this.key));t&&(t.eulerianAnalytics||this.disable())})}async load(){await __vitePreload(()=>import("./dsfr.module-CRjuBBcN.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-DAEMC7qc.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}enable(){console.debug("enable"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable()}disable(){console.debug("disable"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.analytics.opt.disable()}isDisabled(){return window.dsfr.analytics.opt.isDisabled}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(n){return new Eulerian(n)}function useEulerian(){return inject(eulerianSymbol)}const l={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","&":"&amp;"};let h=0;var f=n=>n.replace(/[<>"&]/g,e=>l[e]||e),p=n=>n+h++;const u={},m=n=>{const{name:e,paths:t=[],d:i,polygons:r=[],points:s}=n;i&&t.push({d:i}),s&&r.push({points:s}),u[e]=Object.assign({},n,{paths:t,polygons:r}),u[e].minX||(u[e].minX=0),u[e].minY||(u[e].minY=0)},c=(...n)=>{for(const e of n)m(e)},g=defineComponent({name:"OhVueIcon",props:{name:{type:String,validator:n=>!n||n in u||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${n}".
Please make sure you have imported this icon before using it.`),!1)},title:String,fill:String,scale:{type:[Number,String],default:1},animation:{validator:n=>["spin","spin-pulse","wrench","ring","pulse","flash","float"].includes(n)},hover:Boolean,flip:{validator:n=>["horizontal","vertical","both"].includes(n)},speed:{validator:n=>n==="fast"||n==="slow"},label:String,inverse:Boolean},setup(n){const e=ref([]),t=reactive({outerScale:1.2,x:null,y:null}),i=reactive({width:0,height:0}),r=computed(()=>{const b=Number(n.scale);return isNaN(b)||b<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),t.outerScale):b*t.outerScale}),s=computed(()=>({"ov-icon":!0,"ov-inverse":n.inverse,"ov-flip-horizontal":n.flip==="horizontal","ov-flip-vertical":n.flip==="vertical","ov-flip-both":n.flip==="both","ov-spin":n.animation==="spin","ov-spin-pulse":n.animation==="spin-pulse","ov-wrench":n.animation==="wrench","ov-ring":n.animation==="ring","ov-pulse":n.animation==="pulse","ov-flash":n.animation==="flash","ov-float":n.animation==="float","ov-hover":n.hover,"ov-fast":n.speed==="fast","ov-slow":n.speed==="slow"})),o=computed(()=>n.name?u[n.name]:null),a=computed(()=>o.value?`${o.value.minX} ${o.value.minY} ${o.value.width} ${o.value.height}`:`0 0 ${y.value} ${v.value}`),d=computed(()=>{if(!o.value)return 1;const{width:b,height:P}=o.value;return Math.max(b,P)/16}),y=computed(()=>i.width||o.value&&o.value.width/d.value*r.value||0),v=computed(()=>i.height||o.value&&o.value.height/d.value*r.value||0),_=computed(()=>r.value!==1&&{fontSize:r.value+"em"}),C=computed(()=>{if(!o.value||!o.value.raw)return null;const b={};let P=o.value.raw;return P=P.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(x,T,R)=>{const L=p("vat-");return b[R]=L,` id="${L}"`}),P=P.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(x,T,R,L)=>{const k=T||L;return k&&b[k]?`#${b[k]}`:x}),P}),E=computed(()=>o.value&&o.value.attr?o.value.attr:{}),S=()=>{if(!n.name&&n.name!==null&&e.value.length===0)return void console.warn('Invalid prop: prop "name" is required.');if(o.value)return;let b=0,P=0;e.value.forEach(x=>{x.outerScale=r.value,b=Math.max(b,x.width),P=Math.max(P,x.height)}),i.width=b,i.height=P,e.value.forEach(x=>{x.x=(b-x.width)/2,x.y=(P-x.height)/2})};return onMounted(()=>{S()}),onUpdated(()=>{S()}),{...toRefs(t),children:e,icon:o,klass:s,style:_,width:y,height:v,box:a,attribs:E,raw:C}},created(){const n=this.$parent;n&&n.children&&n.children.push(this)},render(){const n=Object.assign({role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),width:this.width,height:this.height,viewBox:this.box},this.attribs);this.attribs.stroke?n.stroke=this.fill?this.fill:"currentColor":n.fill=this.fill?this.fill:"currentColor",this.x&&(n.x=this.x.toString()),this.y&&(n.y=this.y.toString());let e={class:this.klass,style:this.style};if(e=Object.assign(e,n),this.raw){const r=this.title?`<title>${f(this.title)}</title>${this.raw}`:this.raw;e.innerHTML=r}const t=this.title?[h$1("title",this.title)]:[],i=(r,s,o)=>h$1(r,{...s,key:`${r}-${o}`});return h$1("svg",e,this.raw?void 0:t.concat([this.$slots.default?this.$slots.default():this.icon?[...this.icon.paths.map((r,s)=>i("path",r,s)),...this.icon.polygons.map((r,s)=>i("polygon",r,s))]:[]]))}});function w(n,e){e===void 0&&(e={});var t=e.insertAt;if(n&&typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}w(`.ov-icon {
  display: inline-block;
  overflow: visible;
  vertical-align: -0.2em;
}
`);w(`/* ---------------- spin ---------------- */
.ov-spin:not(.ov-hover),
.ov-spin.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin {
  animation: ov-spin 1s linear infinite;
}

.ov-spin:not(.ov-hover).ov-fast,
.ov-spin.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-fast {
  animation: ov-spin 0.7s linear infinite;
}

.ov-spin:not(.ov-hover).ov-slow,
.ov-spin.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-slow {
  animation: ov-spin 2s linear infinite;
}

/* ---------------- spin-pulse ---------------- */

.ov-spin-pulse:not(.ov-hover),
.ov-spin-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse {
  animation: ov-spin 1s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-fast,
.ov-spin-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-fast {
  animation: ov-spin 0.7s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-slow,
.ov-spin-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-slow {
  animation: ov-spin 2s infinite steps(8);
}

@keyframes ov-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ---------------- wrench ---------------- */
.ov-wrench:not(.ov-hover),
.ov-wrench.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-wrench {
  animation: ov-wrench 2.5s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-fast,
.ov-wrench.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-fast {
  animation: ov-wrench 1.2s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-slow,
.ov-wrench.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-slow {
  animation: ov-wrench 3.7s ease infinite;
}

@keyframes ov-wrench {
  0% {
    transform: rotate(-12deg);
  }

  8% {
    transform: rotate(12deg);
  }

  10%, 28%, 30%, 48%, 50%, 68% {
    transform: rotate(24deg);
  }

  18%, 20%, 38%, 40%, 58%, 60% {
    transform: rotate(-24deg);
  }

  75%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- ring ---------------- */
.ov-ring:not(.ov-hover),
.ov-ring.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-ring {
  animation: ov-ring 2s ease infinite;
}

.ov-ring:not(.ov-hover).ov-fast,
.ov-ring.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-fast {
  animation: ov-ring 1s ease infinite;
}

.ov-ring:not(.ov-hover).ov-slow,
.ov-ring.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-slow {
  animation: ov-ring 3s ease infinite;
}

@keyframes ov-ring {
  0% {
    transform: rotate(-15deg);
  }

  2% {
    transform: rotate(15deg);
  }

  4%, 12% {
    transform: rotate(-18deg);
  }

  6% {
    transform: rotate(18deg);
  }

  8% {
    transform: rotate(-22deg);
  }

  10% {
    transform: rotate(22deg);
  }

  12% {
    transform: rotate(-18deg);
  }

  14% {
    transform: rotate(18deg);
  }

  16% {
    transform: rotate(-12deg);
  }

  18% {
    transform: rotate(12deg);
  }

  20%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- pulse ---------------- */
.ov-pulse:not(.ov-hover),
.ov-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-pulse {
  animation: ov-pulse 2s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-fast,
.ov-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-fast {
  animation: ov-pulse 1s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-slow,
.ov-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-slow {
  animation: ov-pulse 3s linear infinite;
}

@keyframes ov-pulse {
  0% {
    transform: scale(1.1);
  }

  50% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1.1);
  }
}

/* ---------------- flash ---------------- */
.ov-flash:not(.ov-hover),
.ov-flash.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-flash {
  animation: ov-flash 2s ease infinite;
}

.ov-flash:not(.ov-hover).ov-fast,
.ov-flash.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-fast {
  animation: ov-flash 1s ease infinite;
}

.ov-flash:not(.ov-hover).ov-slow,
.ov-flash.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-slow {
  animation: ov-flash 3s ease infinite;
}

@keyframes ov-flash {
  0%, 100%, 50%{
    opacity: 1;
  }
  25%, 75%{
    opacity: 0;
  }
}

/* ---------------- float ---------------- */
.ov-float:not(.ov-hover),
.ov-float.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-float {
  animation: ov-float 2s linear infinite;
}

.ov-float:not(.ov-hover).ov-fast,
.ov-float.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-fast {
  animation: ov-float 1s linear infinite;
}

.ov-float:not(.ov-hover).ov-slow,
.ov-float.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-slow {
  animation: ov-float 3s linear infinite;
}

@keyframes ov-float {
  0%, 100% {
    transform: translateY(-3px);
  }
  50% {
    transform: translateY(3px);
  }
}
`);w(`.ov-flip-horizontal {
  transform: scale(-1, 1);
}

.ov-flip-vertical {
  transform: scale(1, -1);
}

.ov-flip-both {
  transform: scale(-1, -1);
}

.ov-inverse {
  color: #fff;
}
`);const ra="abcdefghijklmnopqrstuvwyz0123456789",Ke=ra.repeat(10),la=()=>{const n=Math.floor(Math.random()*Ke.length);return Ke[n]},sa=n=>Array.from({length:n}).map(la).join(""),j=(n="",e="")=>(n?`${n}-`:"")+sa(5)+(e?`-${e}`:""),oa="(prefers-color-scheme: dark)",Me="vue-dsfr-scheme",Ie="light",_e="dark",ge="system",We="data-fr-theme",Pe=n=>{const e=n??(localStorage.getItem(Me)||ge);return[Ie,_e,ge].includes(e)?e:ge},Ue=(n,e)=>(n=Pe(n),n===ge?e!=null&&e.matches?_e:Ie:n),Ac=n=>{if(typeof window>"u")return;const e={scheme:localStorage.getItem(Me)||ge,dataThemeAttribute:We,...n},t=window.matchMedia&&window.matchMedia(oa),i=ref(Pe(e.scheme));localStorage.setItem(Me,i.value);const r=ref(Ue(i.value,t)),s=ref(i.value!==ge);watchEffect(()=>{var v;(v=document.body.parentElement)==null||v.setAttribute(e.dataThemeAttribute||We,r.value)}),t==null||t.addEventListener("change",v=>{s.value||(v.matches?r.value=_e:r.value=Ie)}),!s.value&&t!=null&&t.matches&&(r.value=_e);const o=v=>{if(i.value=Pe(v),localStorage.setItem(Me,i.value),[Ie,_e].includes(i.value)){r.value=i.value,s.value=!0;return}r.value=Ue(i.value,t),s.value=!1},a=document.documentElement,d={subtree:!1,childList:!1,attributes:!0},y=new MutationObserver(v=>{for(const _ of v)if(_.type==="attributes"&&_.attributeName==="data-fr-theme"){const C=_.target.getAttribute(_.attributeName);C!==i.value&&o(C)}});return y.observe(a,d),window.addEventListener("unload",()=>y.disconnect()),o(i.value),{setScheme:o,theme:computed(()=>r.value),scheme:computed(()=>i.value)}},ce=()=>{const n=ref(),e=ref(!1),t=ref(!1),i=()=>{if(!n.value)return;n.value.style.setProperty("--collapser","none");const r=n.value.offsetHeight;n.value.style.setProperty("--collapse",`${-r}px`),n.value.style.setProperty("--collapser","")};return{collapse:n,collapsing:e,cssExpanded:t,doExpand:r=>{n.value&&(r===!0&&n.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,i(),window.requestAnimationFrame(()=>{t.value=r})}))},adjust:i,onTransitionEnd:r=>{e.value=!1,n.value&&r===!1&&n.value.style.removeProperty("--collapse-max-height")}}},pa=["id"],ha={class:"alert-content"},va={class:"fr-alert__description"},ma=["title","aria-label"],ga=defineComponent({__name:"DsfrAlert",props:{closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>j("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(n,{emit:e}){const t=n,i=e,r=()=>i("close"),s=computed(()=>[`fr-alert--${t.type}`,{"fr-alert--sm":t.small}]);return(o,a)=>(openBlock(),createBlock(Transition,{name:"slide-fade"},{default:withCtx(()=>[o.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:o.id,class:normalizeClass(["fr-alert",s.value])},[createBaseVNode("div",ha,[o.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(o.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(o.title),1)]),_:1})),createBaseVNode("p",va,[renderSlot(o.$slots,"default",{},()=>[createTextVNode(toDisplayString(o.description),1)])])]),o.closeable?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--close",title:o.closeButtonLabel,"aria-label":o.closeButtonLabel,onClick:r},null,8,ma)):createCommentVNode("",!0)],10,pa))]),_:3}))}}),Ia=["title","disabled","aria-disabled"],La={key:1},Ca=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(n,{expose:e}){const t=n,i=computed(()=>["sm","small"].includes(t.size)),r=computed(()=>["md","medium"].includes(t.size)),s=computed(()=>["lg","large"].includes(t.size)),o=ref(null);e({focus:()=>{var v;(v=o.value)==null||v.focus()}});const a=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),d=computed(()=>t.iconOnly?1.25:.8325),y=computed(()=>typeof t.icon=="string"?{scale:d.value,name:t.icon}:{scale:d.value,...t.icon});return(v,_)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:o,class:normalizeClass(["fr-btn",{"fr-btn--secondary":v.secondary&&!v.tertiary,"fr-btn--tertiary":v.tertiary&&!v.secondary&&!v.noOutline,"fr-btn--tertiary-no-outline":v.tertiary&&!v.secondary&&v.noOutline,"fr-btn--sm":i.value,"fr-btn--md":r.value,"fr-btn--lg":s.value,"fr-btn--icon-right":!v.iconOnly&&a.value&&v.iconRight,"fr-btn--icon-left":!v.iconOnly&&a.value&&!v.iconRight,"inline-flex":!a.value,reverse:v.iconRight&&!a.value,"justify-center":!a.value&&v.iconOnly,[v.icon]:a.value}]),title:v.iconOnly?v.label:void 0,disabled:v.disabled,"aria-disabled":v.disabled,style:normalizeStyle(!a.value&&v.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:_[0]||(_[0]=C=>v.onClick?v.onClick(C):()=>{})},[v.icon&&!a.value?(openBlock(),createBlock(unref(g),normalizeProps(mergeProps({key:0},y.value)),null,16)):createCommentVNode("",!0),v.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",La,[createTextVNode(toDisplayString(v.label)+" ",1),renderSlot(v.$slots,"default",{},void 0,!0)]))],14,Ia))}}),ae=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},Ae=ae(Ca,[["__scopeId","data-v-d2e9ceaf"]]),Ee=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(n){const e=n,t=ref(null),i=computed(()=>["sm","small"].includes(e.size)),r=computed(()=>["md","medium"].includes(e.size)),s=computed(()=>["lg","large"].includes(e.size)),o=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),a=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),d=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),y=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),v=computed(()=>e.align==="center"),_=computed(()=>e.align==="right"),C=ref("auto"),E=computed(()=>`--equisized-width: ${C.value};`),S=async()=>{var b;let P=0;await new Promise(x=>setTimeout(x,100)),(b=t.value)==null||b.querySelectorAll(".fr-btn").forEach(x=>{const T=x,R=T.offsetWidth,L=window.getComputedStyle(T),k=+L.marginLeft.replace("px",""),N=+L.marginRight.replace("px","");T.style.width="var(--equisized-width)";const D=R+k+N;D>P&&(P=D)}),C.value=`${P}px`};return onMounted(async()=>{!t.value||!e.equisized||await S()}),(b,P)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:t,style:normalizeStyle(E.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":b.equisized,"fr-btns-group--sm":i.value,"fr-btns-group--md":r.value,"fr-btns-group--lg":s.value,"fr-btns-group--inline-sm":o.value||a.value,"fr-btns-group--inline-md":o.value||d.value,"fr-btns-group--inline-lg":o.value||y.value,"fr-btns-group--center":v.value,"fr-btns-group--right":_.value,"fr-btns-group--icon-right":b.iconRight,"fr-btns-group--inline-reverse":b.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.buttons,({onClick:x,...T},R)=>(openBlock(),createElementBlock("li",{key:R},[createVNode(Ae,mergeProps({ref_for:!0},T,{onClick:x}),null,16,["onClick"])]))),128)),renderSlot(b.$slots,"default")],6))}}),qa=["id","name","checked","data-testid","data-test"],Qa=["for"],Ga={key:0,class:"required"},Ka={key:0,class:"fr-hint-text"},Wa={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},ht=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:{id:{default:()=>j("basic","checkbox")},name:{},required:{type:Boolean},modelValue:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=computed(()=>t.errorMessage||t.validMessage),s=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),o=a=>{i("update:modelValue",a.target.checked)};return(a,d)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":a.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":a.errorMessage,"fr-checkbox-group--valid":!a.errorMessage&&a.validMessage,"fr-checkbox-group--sm":a.small}])},[createBaseVNode("input",mergeProps({id:a.id,name:a.name,type:"checkbox",checked:a.modelValue},a.$attrs,{"data-testid":`input-checkbox-${a.id}`,"data-test":`input-checkbox-${a.id}`,onChange:d[0]||(d[0]=y=>o(y))}),null,16,qa),createBaseVNode("label",{for:a.id,class:"fr-label"},[renderSlot(a.$slots,"label",{},()=>[createTextVNode(toDisplayString(a.label)+" ",1),renderSlot(a.$slots,"required-tip",{},()=>[a.required?(openBlock(),createElementBlock("span",Ga," *")):createCommentVNode("",!0)])]),a.hint?(openBlock(),createElementBlock("span",Ka,toDisplayString(a.hint),1)):createCommentVNode("",!0)],8,Qa),r.value?(openBlock(),createElementBlock("div",Wa,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",s.value])},toDisplayString(r.value),3)])):createCommentVNode("",!0)],2)],2))}}),Ua={class:"fr-form-group"},Za=["disabled","aria-labelledby","aria-invalid","role"],Ja=["id"],xa={key:0,class:"required"},en=["id"],tn=defineComponent({__name:"DsfrCheckboxSet",props:{titleId:{default:()=>j("checkbox","group")},disabled:{type:Boolean},inline:{type:Boolean},required:{type:Boolean},small:{type:Boolean},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},options:{default:()=>[]},modelValue:{default:()=>[]},ariaInvalid:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=computed(()=>t.errorMessage||t.validMessage),s=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),o=({name:d,checked:y})=>{const v=y?[...t.modelValue,d]:t.modelValue.filter(_=>_!==d);i("update:modelValue",v)},a=computed(()=>r.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(d,y)=>(openBlock(),createElementBlock("div",Ua,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":d.errorMessage,"fr-fieldset--valid":!d.errorMessage&&d.validMessage}]),disabled:d.disabled,"aria-labelledby":a.value,"aria-invalid":d.ariaInvalid,role:d.errorMessage||d.validMessage?"group":void 0},[createBaseVNode("legend",{id:d.titleId,class:"fr-fieldset__legend fr-text--regular"},[renderSlot(d.$slots,"legend",{},()=>[createTextVNode(toDisplayString(d.legend)+" ",1),renderSlot(d.$slots,"required-tip",{},()=>[d.required?(openBlock(),createElementBlock("span",xa," *")):createCommentVNode("",!0)])])],8,Ja),renderSlot(d.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.options,v=>(openBlock(),createBlock(ht,{id:v.id,key:v.id||v.name,name:v.name,label:v.label,disabled:v.disabled,"aria-disabled":v.disabled,small:d.small,inline:d.inline,"model-value":d.modelValue.includes(v.name),hint:v.hint,"onUpdate:modelValue":_=>o({name:v.name,checked:_})},null,8,["id","name","label","disabled","aria-disabled","small","inline","model-value","hint","onUpdate:modelValue"]))),128))]),r.value?(openBlock(),createElementBlock("div",{key:0,id:`messages-${d.titleId}`,class:"fr-messages-group",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",s.value])},[createBaseVNode("span",null,toDisplayString(r.value),1)],2)],8,en)):createCommentVNode("",!0)],10,Za)]))}}),an={class:"fr-consent-banner__content"},nn={class:"fr-text--sm"},rn={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},ln=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(n){const e=n,t=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),i=computed(()=>e.url?t.value?"a":"RouterLink":"a"),r=computed(()=>({[t.value?"href":"to"]:e.url}));return(s,o)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",an,[createBaseVNode("p",nn,[renderSlot(s.$slots,"default",{},()=>[createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page "),(openBlock(),createBlock(resolveDynamicComponent(i.value),mergeProps(r.value,{"data-testid":"link"}),{default:withCtx(()=>[createTextVNode(" Données personnelles et cookies ")]),_:1},16)),createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. ")])])]),createBaseVNode("ul",rn,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:o[0]||(o[0]=withModifiers(a=>s.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:o[1]||(o[1]=withModifiers(a=>s.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:o[2]||(o[2]=withModifiers(a=>s.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),ar=["innerHTML"],Le=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(n){const e=n,t=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(i,r)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":i.small&&!i.large,"fr-logo--lg":i.large&&!i.small}]),innerHTML:t.value},null,10,ar))}}),nr={class:"fr-footer__partners"},rr={key:0,class:"fr-footer__partners-title"},lr={class:"fr-footer__partners-logos"},sr={key:0,class:"fr-footer__partners-main"},or=["href"],ir=["src","alt"],dr={class:"fr-footer__partners-sub"},ur=["href"],cr=["src","alt"],bt=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(n){return(e,t)=>(openBlock(),createElementBlock("div",nr,[e.title?(openBlock(),createElementBlock("h4",rr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",lr,[e.mainPartner?(openBlock(),createElementBlock("div",sr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,ir)],8,or)])):createCommentVNode("",!0),createBaseVNode("div",dr,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(i,r)=>(openBlock(),createElementBlock("li",{key:r},[createBaseVNode("a",{class:"fr-footer__partners-link",href:i.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:i.logo,alt:i.name},null,8,cr)],8,ur)]))),128))])])])]))}}),Je=1,fr=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(n){const e=n,t=computed(()=>{var v;return(v=e.href)==null?void 0:v.startsWith("http")}),i=computed(()=>{var v;return(v=e.href)==null?void 0:v.startsWith("mailto")}),r=computed(()=>e.button?"button":t.value||i.value?"a":"RouterLink"),s=computed(()=>{if(!(!t.value&&!i.value))return e.href}),o=computed(()=>{if(!(t.value||i.value))return e.to}),a=computed(()=>o.value?{to:o.value}:{href:s.value}),d=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),y=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:Je,...e.iconAttrs??{}}:{scale:Je,...e.icon??{},...e.iconAttrs??{}});return(v,_)=>(openBlock(),createBlock(resolveDynamicComponent(r.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":d.value&&v.iconRight,"fr-btn--icon-left":d.value&&!v.iconRight,[String(v.icon)]:d.value}]},a.value,{target:v.target,onClick:withModifiers(v.onClick,["stop"])}),{default:withCtx(()=>{var C,E;return[!d.value&&(v.icon||(C=v.iconAttrs)!=null&&C.name)&&!v.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:0,class:"fr-mr-1w"},y.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(v.label)+" ",1),!d.value&&(v.icon||(E=v.iconAttrs)!=null&&E.name)&&v.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:1,class:"fr-ml-1w"},y.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),pr={id:"footer",class:"fr-footer",role:"contentinfo"},hr={key:0,class:"fr-footer__top"},vr={class:"fr-container"},mr={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},gr={class:"fr-container"},br={class:"fr-footer__body"},yr={key:0,class:"fr-footer__brand fr-enlarge-link"},kr=["href"],wr=["src","alt"],_r=["src","alt"],$r={key:1,class:"fr-footer__brand fr-enlarge-link"},Dr={class:"fr-footer__content"},Mr={class:"fr-footer__content-desc"},Ir={class:"fr-footer__content-list"},Lr=["href"],Cr={class:"fr-footer__bottom"},zr={class:"fr-footer__bottom-list"},Sr={key:0,class:"fr-footer__bottom-copy"},Tr=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:n=>[{label:`Accessibilité : ${n.a11yCompliance}`,to:n.a11yComplianceLink},{label:"Mentions légales",to:n.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:n.personalDataLink},{label:"Gestion des cookies",to:n.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention contraire, tous les textes de ce site sont sous"},licenceName:{default:"licence etalab-2.0"}},setup(n){const e=n,t=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),i=useSlots(),r=computed(()=>{var y;return(y=i["footer-link-lists"])==null?void 0:y.call(i).length}),s=computed(()=>{const y=e.licenceTo||e.licenceLinkProps.to;return y&&typeof y=="string"&&y.startsWith("http")}),o=computed(()=>s.value?"":e.licenceTo),a=computed(()=>s.value?e.licenceTo:""),d=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(y,v)=>{const _=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",pr,[r.value?(openBlock(),createElementBlock("div",hr,[createBaseVNode("div",vr,[createBaseVNode("div",mr,[renderSlot(y.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",gr,[createBaseVNode("div",br,[y.operatorImgSrc?(openBlock(),createElementBlock("div",yr,[createVNode(Le,{"logo-text":y.logoText},null,8,["logo-text"]),d.value?(openBlock(),createElementBlock("a",{key:0,href:y.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(y.operatorImgStyle),src:y.operatorImgSrc,alt:y.operatorImgAlt},null,12,wr)],8,kr)):(openBlock(),createBlock(_,{key:1,class:"fr-footer__brand-link",to:y.homeLink,title:y.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(y.operatorImgStyle),src:y.operatorImgSrc,alt:y.operatorImgAlt},null,12,_r)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",$r,[createVNode(_,{to:y.homeLink,title:y.homeTitle},{default:withCtx(()=>[createVNode(Le,{"logo-text":y.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",Dr,[createBaseVNode("p",Mr,[renderSlot(y.$slots,"description",{},()=>[createTextVNode(toDisplayString(y.descText),1)],!0)]),createBaseVNode("ul",Ir,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.ecosystemLinks,(C,E)=>(openBlock(),createElementBlock("li",{key:E,class:"fr-footer__content-item"},[createBaseVNode("a",{class:"fr-footer__content-link",href:C.href,target:"_blank",rel:"noopener noreferrer"},toDisplayString(C.label),9,Lr)]))),128))])])]),y.partners?(openBlock(),createBlock(bt,normalizeProps(mergeProps({key:0},y.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",Cr,[createBaseVNode("ul",zr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(C,E)=>(openBlock(),createElementBlock("li",{key:E,class:"fr-footer__bottom-item"},[createVNode(fr,mergeProps({ref_for:!0},C),null,16)]))),128))]),y.licenceText?(openBlock(),createElementBlock("div",Sr,[createBaseVNode("p",null,[createTextVNode(toDisplayString(y.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(s.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:s.value?null:o.value,href:a.value,target:s.value?"_blank":void 0,rel:"noopener noreferrer"},y.licenceLinkProps),{default:withCtx(()=>[createTextVNode(toDisplayString(y.licenceName),1)]),_:1},16,["to","href","target"]))])])):createCommentVNode("",!0)])])])}}}),Ar=ae(Tr,[["__scopeId","data-v-a64fdd76"]]),Yr=["for"],Or={key:0,class:"required"},jr={key:0,class:"fr-hint-text"},qr=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>j("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(n,{expose:e}){const t=n,i=useAttrs(),r=ref(null),s=()=>{var y;return(y=r.value)==null?void 0:y.focus()},o=computed(()=>t.isTextarea?"textarea":"input"),a=computed(()=>t.isWithWrapper||i.type==="date"||!!t.wrapperClass),d=computed(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:s}),(y,v)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(d.value),for:y.id},[renderSlot(y.$slots,"label",{},()=>[createTextVNode(toDisplayString(y.label)+" ",1),renderSlot(y.$slots,"required-tip",{},()=>["required"in y.$attrs&&y.$attrs.required!==!1?(openBlock(),createElementBlock("span",Or,"*")):createCommentVNode("",!0)],!0)],!0),y.hint?(openBlock(),createElementBlock("span",jr,toDisplayString(y.hint),1)):createCommentVNode("",!0)],10,Yr),a.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":y.isWithWrapper||y.$attrs.type==="date"},y.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(o.value),mergeProps({id:y.id},y.$attrs,{ref_key:"__input",ref:r,class:["fr-input",{"fr-input--error":y.isInvalid,"fr-input--valid":y.isValid}],value:y.modelValue,"aria-describedby":y.descriptionId||void 0,onInput:v[1]||(v[1]=_=>y.$emit("update:modelValue",_.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(o.value),mergeProps({key:0,id:y.id},y.$attrs,{ref_key:"__input",ref:r,class:["fr-input",{"fr-input--error":y.isInvalid,"fr-input--valid":y.isValid}],value:y.modelValue,"aria-describedby":y.descriptionId||void 0,onInput:v[0]||(v[0]=_=>y.$emit("update:modelValue",_.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),qe=ae(qr,[["__scopeId","data-v-771f90df"]]),Fe=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>j("search","input")},label:{default:""},labelVisible:{type:Boolean},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(n,{emit:e}){const t=e;return(i,r)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":i.large}]),role:"search"},[createVNode(qe,{id:i.id,type:"search",placeholder:i.placeholder,"model-value":i.modelValue,"label-visible":i.labelVisible,label:i.label,disabled:i.disabled,"aria-disabled":i.disabled,"onUpdate:modelValue":r[0]||(r[0]=s=>t("update:modelValue",s)),onKeydown:r[1]||(r[1]=withKeys(s=>t("search",i.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label-visible","label","disabled","aria-disabled"]),createVNode(Ae,{title:"Rechercher",disabled:i.disabled,"aria-disabled":i.disabled,onClick:r[2]||(r[2]=s=>t("search",i.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(i.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),xe=1,yt=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(n){const e=n,t=computed(()=>typeof e.path=="string"),i=computed(()=>{var _;return((_=e.href)==null?void 0:_.startsWith("http"))||t.value&&e.path.startsWith("http")}),r=computed(()=>{var _;return((_=e.href)==null?void 0:_.startsWith("mailto"))||t.value&&e.path.startsWith("mailto")}),s=computed(()=>e.button?"button":i.value||r.value?"a":"RouterLink"),o=computed(()=>{if(!(!i.value&&!r.value))return e.href!==void 0?e.href:e.path}),a=computed(()=>{if(!(i.value||r.value))return e.to||e.path}),d=computed(()=>a.value?{to:a.value}:{href:o.value}),y=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),v=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:xe,...e.iconAttrs??{}}:{scale:xe,...e.icon??{},...e.iconAttrs??{}});return(_,C)=>(openBlock(),createBlock(resolveDynamicComponent(s.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":y.value&&_.iconRight,"fr-btn--icon-left":y.value&&!_.iconRight,[String(_.icon)]:y.value}]},d.value,{target:_.target,onClick:withModifiers(_.onClick,["stop"])}),{default:withCtx(()=>{var E,S;return[!y.value&&(_.icon||(E=_.iconAttrs)!=null&&E.name)&&!_.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:0,class:"fr-mr-1w"},v.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(_.label)+" ",1),!y.value&&(_.icon||(S=_.iconAttrs)!=null&&S.name)&&_.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:1,class:"fr-ml-1w"},v.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Qr=["aria-label"],Gr={class:"fr-btns-group"},Ne=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(n,{emit:e}){const t=e;return(i,r)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":i.navAriaLabel},[createBaseVNode("ul",Gr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.links,(s,o)=>(openBlock(),createElementBlock("li",{key:o},[createVNode(yt,mergeProps({ref_for:!0},s,{"on-click":a=>{var d;t("linkClick",a),(d=s.onClick)==null||d.call(s,a)}}),null,16,["on-click"])]))),128))])],8,Qr))}}),Kr={role:"navigation",class:"fr-translate fr-nav"},Wr={class:"fr-nav__item"},Ur=["aria-controls","aria-expanded"],Zr={class:"fr-hidden-lg"},Jr=["id"],xr={class:"fr-menu__list"},el=["hreflang","lang","aria-current","href","onClick"],Xe=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>j("translate")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(n,{emit:e}){const t=n,i=e,{collapse:r,collapsing:s,cssExpanded:o,doExpand:a,onTransitionEnd:d}=ce(),y=ref(!1);function v(C){y.value=!1,i("select",C)}const _=computed(()=>t.languages.find(({codeIso:C})=>C===t.currentLanguage));return watch(y,(C,E)=>{C!==E&&a(C)}),(C,E)=>{var S,b;return openBlock(),createElementBlock("nav",Kr,[createBaseVNode("div",Wr,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":C.id,"aria-expanded":y.value,title:"Sélectionner une langue",type:"button",onClick:E[0]||(E[0]=withModifiers(P=>y.value=!y.value,["prevent","stop"]))},[createTextVNode(toDisplayString((S=_.value)==null?void 0:S.codeIso.toUpperCase()),1),createBaseVNode("span",Zr," - "+toDisplayString((b=_.value)==null?void 0:b.label),1)],8,Ur),createBaseVNode("div",{id:C.id,ref_key:"collapse",ref:r,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(o),"fr-collapsing":unref(s)}]),onTransitionend:E[1]||(E[1]=P=>unref(d)(y.value))},[createBaseVNode("ul",xr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(C.languages,(P,x)=>(openBlock(),createElementBlock("li",{key:x},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:P.codeIso,lang:P.codeIso,"aria-current":C.currentLanguage===P.codeIso?!0:void 0,href:`#${P.codeIso}`,onClick:withModifiers(T=>v(P),["prevent","stop"])},toDisplayString(`${P.codeIso.toUpperCase()} - ${P.label}`),9,el)]))),128))])],42,Jr)])])}}}),tl={role:"banner",class:"fr-header"},al={class:"fr-header__body"},nl={class:"fr-container width-inherit"},rl={class:"fr-header__body-row"},ll={class:"fr-header__brand fr-enlarge-link"},sl={class:"fr-header__brand-top"},ol={class:"fr-header__logo"},il={key:0,class:"fr-header__operator"},dl=["src","alt"],ul={key:1,class:"fr-header__navbar"},cl=["aria-label","title","data-fr-opened"],fl=["aria-label","title"],pl={key:0,class:"fr-header__service"},hl={class:"fr-header__service-title"},vl={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},ml={key:0,class:"fr-header__service-tagline"},gl={key:1,class:"fr-header__service"},bl=createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1),yl=[bl],kl={class:"fr-header__tools"},wl={key:0,class:"fr-header__tools-links"},_l={key:1,class:"fr-header__search fr-modal"},$l=["aria-label"],Dl={class:"fr-container"},Ml={class:"fr-header__menu-links"},Il={role:"navigation"},Ll={key:1,class:"flex justify-center items-center"},Cl={key:1,class:"fr-hidden fr-unhidden-lg"},zl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu modal"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","language-select"],setup(n,{emit:e}){const t=n,i=e,r=toRef(t,"languageSelector"),s=ref(!1),o=ref(!1),a=ref(!1),d=()=>{var P;a.value=!1,s.value=!1,o.value=!1,(P=document.getElementById("button-menu"))==null||P.focus()},y=P=>{P.key==="Escape"&&d()};onMounted(()=>{document.addEventListener("keydown",y)}),onUnmounted(()=>{document.removeEventListener("keydown",y)});const v=()=>{var P;a.value=!0,s.value=!0,o.value=!1,(P=document.getElementById("close-button"))==null||P.focus()},_=()=>{a.value=!0,s.value=!1,o.value=!0},C=d,E=useSlots(),S=computed(()=>{var P;return!!((P=E.operator)!=null&&P.call(E).length)||!!t.operatorImgSrc}),b=computed(()=>!!E.mainnav);return(P,x)=>{var T,R,L;const k=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",tl,[createBaseVNode("div",al,[createBaseVNode("div",nl,[createBaseVNode("div",rl,[createBaseVNode("div",ll,[createBaseVNode("div",sl,[createBaseVNode("div",ol,[createVNode(Le,{"logo-text":P.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),S.value?(openBlock(),createElementBlock("div",il,[renderSlot(P.$slots,"operator",{},()=>[P.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:P.operatorImgSrc,alt:P.operatorImgAlt,style:normalizeStyle(P.operatorImgStyle)},null,12,dl)):createCommentVNode("",!0)])])):createCommentVNode("",!0),P.showSearch||b.value||(T=P.quickLinks)!=null&&T.length?(openBlock(),createElementBlock("div",ul,[P.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":P.showSearchLabel,title:P.showSearchLabel,"data-fr-opened":o.value,onClick:x[0]||(x[0]=withModifiers(N=>_(),["prevent","stop"]))},null,8,cl)):createCommentVNode("",!0),b.value||(R=P.quickLinks)!=null&&R.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":v,"aria-controls":"header-navigation","aria-haspopup":"menu","aria-label":P.menuLabel,title:P.menuLabel,"data-testid":"open-menu-btn",onClick:x[1]||(x[1]=withModifiers(N=>v(),["prevent","stop"]))},null,8,fl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),P.serviceTitle?(openBlock(),createElementBlock("div",pl,[createVNode(k,mergeProps({to:P.homeTo,title:`${P.homeLabel} - ${P.serviceTitle}`},P.$attrs),{default:withCtx(()=>[createBaseVNode("p",hl,[createTextVNode(toDisplayString(P.serviceTitle)+" ",1),P.showBeta?(openBlock(),createElementBlock("span",vl," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),P.serviceDescription?(openBlock(),createElementBlock("p",ml,toDisplayString(P.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!P.serviceTitle&&P.showBeta?(openBlock(),createElementBlock("div",gl,yl)):createCommentVNode("",!0)]),createBaseVNode("div",kl,[(L=P.quickLinks)!=null&&L.length||r.value?(openBlock(),createElementBlock("div",wl,[s.value?createCommentVNode("",!0):(openBlock(),createBlock(Ne,{key:0,links:P.quickLinks,"nav-aria-label":P.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),r.value?(openBlock(),createBlock(Xe,mergeProps({key:1},r.value,{onSelect:x[2]||(x[2]=N=>i("language-select",N))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),P.showSearch?(openBlock(),createElementBlock("div",_l,[createVNode(Fe,{"searchbar-id":P.searchbarId,label:P.searchLabel,"model-value":P.modelValue,placeholder:P.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":x[3]||(x[3]=N=>i("update:modelValue",N)),onSearch:x[4]||(x[4]=N=>i("search",N))},null,8,["searchbar-id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),P.showSearch||b.value||P.quickLinks&&P.quickLinks.length||r.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":a.value}]),"aria-label":P.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",Dl,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:x[5]||(x[5]=withModifiers(N=>d(),["prevent","stop"]))},toDisplayString(P.closeMenuModalLabel),1),createBaseVNode("div",Ml,[r.value?(openBlock(),createBlock(Xe,mergeProps({key:0},r.value,{onSelect:x[6]||(x[6]=N=>r.value.currentLanguage=N.codeIso)}),null,16)):createCommentVNode("",!0),createBaseVNode("nav",Il,[s.value?(openBlock(),createBlock(Ne,{key:0,role:"navigation",links:P.quickLinks,"nav-aria-label":P.quickLinksAriaLabel,onLinkClick:unref(C)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0)])]),a.value?renderSlot(P.$slots,"mainnav",{key:0,hidemodal:d}):createCommentVNode("",!0),o.value?(openBlock(),createElementBlock("div",Ll,[createVNode(Fe,{"searchbar-id":P.searchbarId,"model-value":P.modelValue,placeholder:P.placeholder,"onUpdate:modelValue":x[7]||(x[7]=N=>i("update:modelValue",N)),onSearch:x[8]||(x[8]=N=>i("search",N))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,$l)):createCommentVNode("",!0),b.value&&!a.value?(openBlock(),createElementBlock("div",Cl,[renderSlot(P.$slots,"mainnav",{hidemodal:d})])):createCommentVNode("",!0),renderSlot(P.$slots,"default")])])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var kt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ce=kt.join(","),wt=typeof Element>"u",ve=wt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ze=!wt&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},Se=function n(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),s=r===""||r==="true",o=s||t&&e&&n(e.parentNode);return o},Pl=function(n){var e,t=n==null||(e=n.getAttribute)===null||e===void 0?void 0:e.call(n,"contenteditable");return t===""||t==="true"},_t=function(n,e,t){if(Se(n))return[];var i=Array.prototype.slice.apply(n.querySelectorAll(Ce));return e&&ve.call(n,Ce)&&i.unshift(n),i=i.filter(t),i},$t=function n(e,t,i){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!Se(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),d=a.length?a:o.children,y=n(d,!0,i);i.flatten?r.push.apply(r,y):r.push({scopeParent:o,candidates:y})}else{var v=ve.call(o,Ce);v&&i.filter(o)&&(t||!e.includes(o))&&r.push(o);var _=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),C=!Se(_,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(_&&C){var E=n(_===!0?o.children:_.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scopeParent:o,candidates:E})}else s.unshift.apply(s,o.children)}}return r},Dt=function(n){return!isNaN(parseInt(n.getAttribute("tabindex"),10))},he=function(n){if(!n)throw new Error("No node provided");return n.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(n.tagName)||Pl(n))&&!Dt(n)?0:n.tabIndex},Fl=function(n,e){var t=he(n);return t<0&&e&&!Dt(n)?0:t},Nl=function(n,e){return n.tabIndex===e.tabIndex?n.documentOrder-e.documentOrder:n.tabIndex-e.tabIndex},Mt=function(n){return n.tagName==="INPUT"},Xl=function(n){return Mt(n)&&n.type==="hidden"},Yl=function(n){var e=n.tagName==="DETAILS"&&Array.prototype.slice.apply(n.children).some(function(t){return t.tagName==="SUMMARY"});return e},Ol=function(n,e){for(var t=0;t<n.length;t++)if(n[t].checked&&n[t].form===e)return n[t]},jl=function(n){if(!n.name)return!0;var e=n.form||ze(n),t=function(s){return e.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=t(window.CSS.escape(n.name));else try{i=t(n.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var r=Ol(i,n.form);return!r||r===n},ql=function(n){return Mt(n)&&n.type==="radio"},Ql=function(n){return ql(n)&&!jl(n)},Gl=function(n){var e,t=n&&ze(n),i=(e=t)===null||e===void 0?void 0:e.host,r=!1;if(t&&t!==n){var s,o,a;for(r=!!((s=i)!==null&&s!==void 0&&(o=s.ownerDocument)!==null&&o!==void 0&&o.contains(i)||n!=null&&(a=n.ownerDocument)!==null&&a!==void 0&&a.contains(n));!r&&i;){var d,y,v;t=ze(i),i=(d=t)===null||d===void 0?void 0:d.host,r=!!((y=i)!==null&&y!==void 0&&(v=y.ownerDocument)!==null&&v!==void 0&&v.contains(i))}}return r},et=function(n){var e=n.getBoundingClientRect(),t=e.width,i=e.height;return t===0&&i===0},Kl=function(n,e){var t=e.displayCheck,i=e.getShadowRoot;if(getComputedStyle(n).visibility==="hidden")return!0;var r=ve.call(n,"details>summary:first-of-type"),s=r?n.parentElement:n;if(ve.call(s,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof i=="function"){for(var o=n;n;){var a=n.parentElement,d=ze(n);if(a&&!a.shadowRoot&&i(a)===!0)return et(n);n.assignedSlot?n=n.assignedSlot:!a&&d!==n.ownerDocument?n=d.host:n=a}n=o}if(Gl(n))return!n.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return et(n);return!1},Wl=function(n){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(n.tagName))for(var e=n.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var i=e.children.item(t);if(i.tagName==="LEGEND")return ve.call(e,"fieldset[disabled] *")?!0:!i.contains(n)}return!0}e=e.parentElement}return!1},Te=function(n,e){return!(e.disabled||Se(e)||Xl(e)||Kl(e,n)||Yl(e)||Wl(e))},Ye=function(n,e){return!(Ql(e)||he(e)<0||!Te(n,e))},Ul=function(n){var e=parseInt(n.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Zl=function n(e){var t=[],i=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,d=Fl(a,o),y=o?n(r.candidates):a;d===0?o?t.push.apply(t,y):t.push(a):i.push({documentOrder:s,tabIndex:d,item:r,isScope:o,content:y})}),i.sort(Nl).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(t)},Jl=function(n,e){e=e||{};var t;return e.getShadowRoot?t=$t([n],e.includeContainer,{filter:Ye.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Ul}):t=_t(n,e.includeContainer,Ye.bind(null,e)),Zl(t)},xl=function(n,e){e=e||{};var t;return e.getShadowRoot?t=$t([n],e.includeContainer,{filter:Te.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=_t(n,e.includeContainer,Te.bind(null,e)),t},me=function(n,e){if(e=e||{},!n)throw new Error("No node provided");return ve.call(n,Ce)===!1?!1:Ye(e,n)},es=kt.concat("iframe").join(","),Re=function(n,e){if(e=e||{},!n)throw new Error("No node provided");return ve.call(n,es)===!1?!1:Te(e,n)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function tt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function at(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tt(Object(t),!0).forEach(function(i){ts(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ts(n,e,t){return e=ns$1(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function as(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ns$1(n){var e=as(n,"string");return typeof e=="symbol"?e:String(e)}var nt={activateTrap:function(n,e){if(n.length>0){var t=n[n.length-1];t!==e&&t.pause()}var i=n.indexOf(e);i===-1||n.splice(i,1),n.push(e)},deactivateTrap:function(n,e){var t=n.indexOf(e);t!==-1&&n.splice(t,1),n.length>0&&n[n.length-1].unpause()}},rs=function(n){return n.tagName&&n.tagName.toLowerCase()==="input"&&typeof n.select=="function"},ls=function(n){return(n==null?void 0:n.key)==="Escape"||(n==null?void 0:n.key)==="Esc"||(n==null?void 0:n.keyCode)===27},$e=function(n){return(n==null?void 0:n.key)==="Tab"||(n==null?void 0:n.keyCode)===9},ss=function(n){return $e(n)&&!n.shiftKey},os=function(n){return $e(n)&&n.shiftKey},rt=function(n){return setTimeout(n,0)},lt$1=function(n,e){var t=-1;return n.every(function(i,r){return e(i)?(t=r,!1):!0}),t},we=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return typeof n=="function"?n.apply(void 0,t):n},De=function(n){return n.target.shadowRoot&&typeof n.composedPath=="function"?n.composedPath()[0]:n.target},is=[],ds=function(n,e){var t=(e==null?void 0:e.document)||document,i=(e==null?void 0:e.trapStack)||is,r=at({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ss,isKeyBackward:os},e),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,a=function(F,B,z){return F&&F[B]!==void 0?F[B]:r[z||B]},d=function(F,B){var z=typeof(B==null?void 0:B.composedPath)=="function"?B.composedPath():void 0;return s.containerGroups.findIndex(function(Y){var X=Y.container,q=Y.tabbableNodes;return X.contains(F)||(z==null?void 0:z.includes(X))||q.find(function(K){return K===F})})},y=function(F){var B=r[F];if(typeof B=="function"){for(var z=arguments.length,Y=new Array(z>1?z-1:0),X=1;X<z;X++)Y[X-1]=arguments[X];B=B.apply(void 0,Y)}if(B===!0&&(B=void 0),!B){if(B===void 0||B===!1)return B;throw new Error("`".concat(F,"` was specified but was not a node, or did not return a node"))}var q=B;if(typeof B=="string"&&(q=t.querySelector(B),!q))throw new Error("`".concat(F,"` as selector refers to no known node"));return q},v=function(){var F=y("initialFocus");if(F===!1)return!1;if(F===void 0||!Re(F,r.tabbableOptions))if(d(t.activeElement)>=0)F=t.activeElement;else{var B=s.tabbableGroups[0],z=B&&B.firstTabbableNode;F=z||y("fallbackFocus")}if(!F)throw new Error("Your focus-trap needs to have at least one focusable element");return F},_=function(){if(s.containerGroups=s.containers.map(function(F){var B=Jl(F,r.tabbableOptions),z=xl(F,r.tabbableOptions),Y=B.length>0?B[0]:void 0,X=B.length>0?B[B.length-1]:void 0,q=z.find(function(te){return me(te)}),K=z.slice().reverse().find(function(te){return me(te)}),ee=!!B.find(function(te){return he(te)>0});return{container:F,tabbableNodes:B,focusableNodes:z,posTabIndexesFound:ee,firstTabbableNode:Y,lastTabbableNode:X,firstDomTabbableNode:q,lastDomTabbableNode:K,nextTabbableNode:function(te){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ie=B.indexOf(te);return ie<0?Oe?z.slice(z.indexOf(te)+1).find(function(it){return me(it)}):z.slice(0,z.indexOf(te)).reverse().find(function(it){return me(it)}):B[ie+(Oe?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(F){return F.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(F){return F.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},C=function F(B){var z=B.activeElement;if(z)return z.shadowRoot&&z.shadowRoot.activeElement!==null?F(z.shadowRoot):z},E=function F(B){if(B!==!1&&B!==C(document)){if(!B||!B.focus){F(v());return}B.focus({preventScroll:!!r.preventScroll}),s.mostRecentlyFocusedNode=B,rs(B)&&B.select()}},S=function(F){var B=y("setReturnFocus",F);return B||(B===!1?!1:F)},b=function(F){var B=F.target,z=F.event,Y=F.isBackward,X=Y===void 0?!1:Y;B=B||De(z),_();var q=null;if(s.tabbableGroups.length>0){var K=d(B,z),ee=K>=0?s.containerGroups[K]:void 0;if(K<0)X?q=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:q=s.tabbableGroups[0].firstTabbableNode;else if(X){var te=lt$1(s.tabbableGroups,function(ct){var Qe=ct.firstTabbableNode;return B===Qe});if(te<0&&(ee.container===B||Re(B,r.tabbableOptions)&&!me(B,r.tabbableOptions)&&!ee.nextTabbableNode(B,!1))&&(te=K),te>=0){var Oe=te===0?s.tabbableGroups.length-1:te-1,ie=s.tabbableGroups[Oe];q=he(B)>=0?ie.lastTabbableNode:ie.lastDomTabbableNode}else $e(z)||(q=ee.nextTabbableNode(B,!1))}else{var it=lt$1(s.tabbableGroups,function(ct){var Qe=ct.lastTabbableNode;return B===Qe});if(it<0&&(ee.container===B||Re(B,r.tabbableOptions)&&!me(B,r.tabbableOptions)&&!ee.nextTabbableNode(B))&&(it=K),it>=0){var oe=it===s.tabbableGroups.length-1?0:it+1,ft=s.tabbableGroups[oe];q=he(B)>=0?ft.firstTabbableNode:ft.firstDomTabbableNode}else $e(z)||(q=ee.nextTabbableNode(B))}}else q=y("fallbackFocus");return q},P=function(F){var B=De(F);if(!(d(B,F)>=0)){if(we(r.clickOutsideDeactivates,F)){o.deactivate({returnFocus:r.returnFocusOnDeactivate});return}we(r.allowOutsideClick,F)||F.preventDefault()}},x=function(F){var B=De(F),z=d(B,F)>=0;if(z||B instanceof Document)z&&(s.mostRecentlyFocusedNode=B);else{F.stopImmediatePropagation();var Y,X=!0;if(s.mostRecentlyFocusedNode)if(he(s.mostRecentlyFocusedNode)>0){var q=d(s.mostRecentlyFocusedNode),K=s.containerGroups[q].tabbableNodes;if(K.length>0){var ee=K.findIndex(function(te){return te===s.mostRecentlyFocusedNode});ee>=0&&(r.isKeyForward(s.recentNavEvent)?ee+1<K.length&&(Y=K[ee+1],X=!1):ee-1>=0&&(Y=K[ee-1],X=!1))}}else s.containerGroups.some(function(te){return te.tabbableNodes.some(function(Oe){return he(Oe)>0})})||(X=!1);else X=!1;X&&(Y=b({target:s.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(s.recentNavEvent)})),E(Y||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},T=function(F){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=F;var z=b({event:F,isBackward:B});z&&($e(F)&&F.preventDefault(),E(z))},R=function(F){if(ls(F)&&we(r.escapeDeactivates,F)!==!1){F.preventDefault(),o.deactivate();return}(r.isKeyForward(F)||r.isKeyBackward(F))&&T(F,r.isKeyBackward(F))},L=function(F){var B=De(F);d(B,F)>=0||we(r.clickOutsideDeactivates,F)||we(r.allowOutsideClick,F)||(F.preventDefault(),F.stopImmediatePropagation())},k=function(){if(s.active)return nt.activateTrap(i,o),s.delayInitialFocusTimer=r.delayInitialFocus?rt(function(){E(v())}):E(v()),t.addEventListener("focusin",x,!0),t.addEventListener("mousedown",P,{capture:!0,passive:!1}),t.addEventListener("touchstart",P,{capture:!0,passive:!1}),t.addEventListener("click",L,{capture:!0,passive:!1}),t.addEventListener("keydown",R,{capture:!0,passive:!1}),o},N=function(){if(s.active)return t.removeEventListener("focusin",x,!0),t.removeEventListener("mousedown",P,!0),t.removeEventListener("touchstart",P,!0),t.removeEventListener("click",L,!0),t.removeEventListener("keydown",R,!0),o},D=function(F){var B=F.some(function(z){var Y=Array.from(z.removedNodes);return Y.some(function(X){return X===s.mostRecentlyFocusedNode})});B&&E(v())},G=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(D):void 0,U=function(){G&&(G.disconnect(),s.active&&!s.paused&&s.containers.map(function(F){G.observe(F,{subtree:!0,childList:!0})}))};return o={get active(){return s.active},get paused(){return s.paused},activate:function(F){if(s.active)return this;var B=a(F,"onActivate"),z=a(F,"onPostActivate"),Y=a(F,"checkCanFocusTrap");Y||_(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=t.activeElement,B==null||B();var X=function(){Y&&_(),k(),U(),z==null||z()};return Y?(Y(s.containers.concat()).then(X,X),this):(X(),this)},deactivate:function(F){if(!s.active)return this;var B=at({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},F);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,N(),s.active=!1,s.paused=!1,U(),nt.deactivateTrap(i,o);var z=a(B,"onDeactivate"),Y=a(B,"onPostDeactivate"),X=a(B,"checkCanReturnFocus"),q=a(B,"returnFocus","returnFocusOnDeactivate");z==null||z();var K=function(){rt(function(){q&&E(S(s.nodeFocusedBeforeActivation)),Y==null||Y()})};return q&&X?(X(S(s.nodeFocusedBeforeActivation)).then(K,K),this):(K(),this)},pause:function(F){if(s.paused||!s.active)return this;var B=a(F,"onPause"),z=a(F,"onPostPause");return s.paused=!0,B==null||B(),N(),U(),z==null||z(),this},unpause:function(F){if(!s.paused||!s.active)return this;var B=a(F,"onUnpause"),z=a(F,"onPostUnpause");return s.paused=!1,B==null||B(),_(),k(),U(),z==null||z(),this},updateContainerElements:function(F){var B=[].concat(F).filter(Boolean);return s.containers=B.map(function(z){return typeof z=="string"?t.querySelector(z):z}),s.active&&_(),U(),this}},o.updateContainerElements(n),o};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const us={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},cs=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},us),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(n,{slots:e,emit:t}){let i;const r=ref(null),s=computed(()=>{const a=r.value;return a&&(a instanceof HTMLElement?a:a.$el)});function o(){return i||(i=ds(s.value,{escapeDeactivates:n.escapeDeactivates,allowOutsideClick:n.allowOutsideClick,returnFocusOnDeactivate:n.returnFocusOnDeactivate,clickOutsideDeactivates:n.clickOutsideDeactivates,onActivate:()=>{t("update:active",!0),t("activate")},onDeactivate:()=>{t("update:active",!1),t("deactivate")},onPostActivate:()=>t("postActivate"),onPostDeactivate:()=>t("postDeactivate"),initialFocus:n.initialFocus,fallbackFocus:n.fallbackFocus,tabbableOptions:n.tabbableOptions,delayInitialFocus:n.delayInitialFocus,preventScroll:n.preventScroll}))}return onMounted(()=>{watch(()=>n.active,a=>{a&&s.value?o().activate():i&&(i.deactivate(),(!s.value||s.value.nodeType===Node.COMMENT_NODE)&&(i=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{i&&i.deactivate(),i=null}),{activate(){o().activate()},deactivate(){i&&i.deactivate()},renderImpl(){if(!e.default)return null;const a=e.default().filter(d=>d.type!==Comment);return!a||!a.length||a.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),a):cloneVNode(a[0],{ref:r})}}}}),fs=["aria-labelledby","role","open"],ps={class:"fr-container fr-container--fluid fr-container-md"},hs={class:"fr-grid-row fr-grid-row--center"},vs={class:"fr-modal__body"},ms={class:"fr-modal__header"},gs=["title"],bs={class:"fr-modal__content"},ys=["id"],ks={key:0,class:"fr-modal__footer"},st=2,ws=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>j("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(n,{emit:e}){const t=n,i=e,r=S=>{S.key==="Escape"&&_()},s=computed(()=>t.isAlert?"alertdialog":"dialog"),o=ref(null),a=ref();watch(()=>t.opened,S=>{var b,P;S?((b=a.value)==null||b.showModal(),setTimeout(()=>{var x;(x=o.value)==null||x.focus()},100)):(P=a.value)==null||P.close(),d(S)});function d(S){typeof window<"u"&&document.body.classList.toggle("modal-open",S)}onMounted(()=>{y(),d(t.opened)}),onBeforeUnmount(()=>{v(),d(!1)});function y(){document.addEventListener("keydown",r)}function v(){document.removeEventListener("keydown",r)}async function _(){var S;await nextTick(),(S=t.origin)==null||S.focus(),i("close")}const C=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),E=computed(()=>C.value?void 0:typeof t.icon=="string"?{name:t.icon,scale:st}:{scale:st,...t.icon??{}});return(S,b)=>S.opened?(openBlock(),createBlock(unref(cs),{key:0},{default:withCtx(()=>{var P,x;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:a,"aria-labelledby":S.modalId,role:s.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":S.opened}]),open:S.opened},[createBaseVNode("div",ps,[createBaseVNode("div",hs,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":S.size==="lg","fr-col-md-6":S.size==="md","fr-col-md-4":S.size==="sm"}])},[createBaseVNode("div",vs,[createBaseVNode("div",ms,[createBaseVNode("button",{ref_key:"closeBtn",ref:o,class:"fr-btn fr-btn--close",title:S.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:b[0]||(b[0]=T=>_())},[createBaseVNode("span",null,toDisplayString(S.closeButtonLabel),1)],8,gs)]),createBaseVNode("div",bs,[createBaseVNode("h1",{id:S.modalId,class:"fr-modal__title"},[C.value||E.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(S.icon)]:C.value})},[S.icon&&E.value?(openBlock(),createBlock(unref(g),normalizeProps(mergeProps({key:0},E.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(S.title),1)],8,ys),renderSlot(S.$slots,"default",{},void 0,!0)]),(P=S.actions)!=null&&P.length||S.$slots.footer?(openBlock(),createElementBlock("div",ks,[renderSlot(S.$slots,"footer",{},void 0,!0),(x=S.actions)!=null&&x.length?(openBlock(),createBlock(Ee,{key:0,align:"right",buttons:S.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,fs)]}),_:3})):createCommentVNode("",!0)}}),_s=ae(ws,[["__scopeId","data-v-43ec81d5"]]),$s=["id","aria-current"],Ds=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>j("nav","item")},active:{type:Boolean}},setup(n){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,$s))}}),It=ae(Ds,[["__scopeId","data-v-5909c19f"]]),Ms=["href"],ot=2,He=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>j("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(n){const e=n,t=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),i=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),r=computed(()=>i.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ot,name:e.icon}:{scale:ot,...e.icon||{}});return(s,o)=>{const a=resolveComponent("RouterLink");return t.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:s.to,onClick:o[0]||(o[0]=d=>s.$emit("toggleId",s.id))},toDisplayString(s.text),9,Ms)):(openBlock(),createBlock(a,{key:1,class:normalizeClass(["fr-nav__link",{[String(s.icon)]:i.value}]),"data-testid":"nav-router-link",to:s.to,onClick:o[1]||(o[1]=d=>s.$emit("toggleId",s.id))},{default:withCtx(()=>[s.icon&&r.value?(openBlock(),createBlock(unref(g),normalizeProps(mergeProps({key:0},r.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(s.text),1)]),_:1},8,["to","class"]))}}}),Is=["id","aria-current"],Lt=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>j("menu","item")},active:{type:Boolean}},setup(n){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,Is))}}),Ls=["aria-expanded","aria-current","aria-controls"],Cs=["id"],zs={class:"fr-menu__list"},Ct=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>j("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(n){const e=n,{collapse:t,collapsing:i,cssExpanded:r,doExpand:s,onTransitionEnd:o}=ce(),a=computed(()=>e.id===e.expandedId);return watch(a,(d,y)=>{d!==y&&s(d)}),onMounted(()=>{a.value&&s(!0)}),(d,y)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":d.active||void 0,"aria-controls":d.id,onClick:y[0]||(y[0]=v=>d.$emit("toggleId",d.id))},[createBaseVNode("span",null,toDisplayString(d.title),1)],8,Ls),createBaseVNode("div",{id:d.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(r),"fr-collapsing":unref(i)}]),"data-testid":"navigation-menu",onTransitionend:y[2]||(y[2]=v=>unref(o)(a.value))},[createBaseVNode("ul",zs,[renderSlot(d.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.links,(v,_)=>(openBlock(),createBlock(Lt,{key:_},{default:withCtx(()=>[createVNode(He,mergeProps({ref_for:!0},v,{onToggleId:y[1]||(y[1]=C=>d.$emit("toggleId",d.expandedId))}),null,16)]),_:2},1024))),128))])],42,Cs)],64))}}),Ss={class:"fr-col-12 fr-col-lg-3"},Ts={class:"fr-mega-menu__category"},As={class:"fr-mega-menu__list"},zt=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(n){return(e,t)=>(openBlock(),createElementBlock("div",Ss,[createBaseVNode("h5",Ts,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",As,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(i,r)=>(openBlock(),createElementBlock("li",{key:r,class:"fr-nav__link"},[createVNode(He,mergeProps({ref_for:!0},i),null,16)]))),128))])]))}}),Es=["aria-expanded","aria-current","aria-controls"],Hs=["id"],Bs={class:"fr-container fr-container--fluid fr-container-lg"},Vs={class:"fr-grid-row fr-grid-row-lg--gutters"},Rs={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Ps={class:"fr-mega-menu__leader"},Fs={class:"fr-h4 fr-mb-2v"},Ns={class:"fr-hidden fr-displayed-lg"},Xs=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>j("menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(n){const e=n,{collapse:t,collapsing:i,cssExpanded:r,doExpand:s,onTransitionEnd:o}=ce(),a=computed(()=>e.id===e.expandedId);return watch(a,(d,y)=>{d!==y&&s(d)}),onMounted(()=>{a.value&&s(!0)}),(d,y)=>{const v=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":d.active||void 0,"aria-controls":d.id,onClick:y[0]||(y[0]=_=>d.$emit("toggleId",d.id))},toDisplayString(d.title),9,Es),createBaseVNode("div",{id:d.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(r),"fr-collapsing":unref(i)}]),tabindex:"-1",onTransitionend:y[2]||(y[2]=_=>unref(o)(a.value))},[createBaseVNode("div",Bs,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:y[1]||(y[1]=_=>d.$emit("toggleId",d.id))}," Fermer "),createBaseVNode("div",Vs,[createBaseVNode("div",Rs,[createBaseVNode("div",Ps,[createBaseVNode("h4",Fs,toDisplayString(d.title),1),createBaseVNode("p",Ns,[createTextVNode(toDisplayString(d.description)+" ",1),renderSlot(d.$slots,"description",{},void 0,!0)]),createVNode(v,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:d.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(d.link.text),1)]),_:1},8,["to"])])]),renderSlot(d.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.menus,(_,C)=>(openBlock(),createBlock(zt,mergeProps({key:C,ref_for:!0},_),null,16))),128))])])],42,Hs)],64)}}}),St=ae(Xs,[["__scopeId","data-v-020a2672"]]),Ys=["id","aria-label"],Os={class:"fr-nav__list"},js=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>j("menu")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(n){const e=n,t=ref(void 0),i=a=>{if(a===t.value){t.value=void 0;return}t.value=a},r=a=>{if(a!==document.getElementById(e.id)){if(!(a!=null&&a.parentNode)){i(t.value);return}r(a.parentNode)}},s=a=>{r(a.target)},o=a=>{a.key==="Escape"&&i(t.value)};return onMounted(()=>{document.addEventListener("click",s),document.addEventListener("keydown",o)}),onUnmounted(()=>{document.removeEventListener("click",s),document.removeEventListener("keydown",o)}),(a,d)=>(openBlock(),createElementBlock("nav",{id:a.id,class:"fr-nav",role:"navigation","aria-label":a.label},[createBaseVNode("ul",Os,[renderSlot(a.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.navItems,(y,v)=>(openBlock(),createBlock(It,{key:v},{default:withCtx(()=>[y.to&&y.text?(openBlock(),createBlock(He,mergeProps({key:0,ref_for:!0},y,{"expanded-id":t.value,onToggleId:d[0]||(d[0]=_=>i(_))}),null,16,["expanded-id"])):y.title&&y.links?(openBlock(),createBlock(Ct,mergeProps({key:1,ref_for:!0},y,{"expanded-id":t.value,onToggleId:d[1]||(d[1]=_=>i(_))}),null,16,["expanded-id"])):y.title&&y.menus?(openBlock(),createBlock(St,mergeProps({key:2,ref_for:!0},y,{"expanded-id":t.value,onToggleId:d[2]||(d[2]=_=>i(_))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1024))),128))])],8,Ys))}}),wo=["id","name","value","checked","disabled"],_o=["for"],$o={key:0,class:"required"},Do={key:0,class:"fr-hint-text"},Mo={key:0,class:"fr-radio-rich__pictogram"},Io=["src"],Lo=["href"],Co=["href"],zo=["href"],Tt=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>j("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(n){const e=n,t={viewBox:"0 0 80 80",width:"80px",height:"80px"},i=computed(()=>!!e.img||!!e.svgPath);return(r,s)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":r.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":i.value,"fr-radio-group--sm":r.small}])},[createBaseVNode("input",mergeProps({id:r.id,type:"radio",name:r.name,value:r.value,checked:r.modelValue===r.value,disabled:r.disabled},r.$attrs,{onClick:s[0]||(s[0]=o=>r.$emit("update:modelValue",r.value))}),null,16,wo),createBaseVNode("label",{for:r.id,class:"fr-label"},[renderSlot(r.$slots,"label",{},()=>[createTextVNode(toDisplayString(r.label)+" ",1),renderSlot(r.$slots,"required-tip",{},()=>[r.$attrs.required?(openBlock(),createElementBlock("span",$o," *")):createCommentVNode("",!0)])]),r.hint?(openBlock(),createElementBlock("span",Do,toDisplayString(r.hint),1)):createCommentVNode("",!0)],8,_o),r.img||r.svgPath?(openBlock(),createElementBlock("div",Mo,[r.img?(openBlock(),createElementBlock("img",{key:0,src:r.img,class:"fr-artwork",alt:""},null,8,Io)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...t,...r.svgAttrs}),[createBaseVNode("use",{class:"fr-artwork-decorative",href:`${r.svgPath}#artwork-decorative`},null,8,Lo),createBaseVNode("use",{class:"fr-artwork-minor",href:`${r.svgPath}#artwork-minor`},null,8,Co),createBaseVNode("use",{class:"fr-artwork-major",href:`${r.svgPath}#artwork-major`},null,8,zo)],16))])):createCommentVNode("",!0)],2)],2))}}),So={class:"fr-form-group"},To=["disabled","aria-labelledby","aria-invalid","role"],Ao=["id"],Eo={key:0,class:"required"},Ho=["id"],Bo={class:"line-1"},Vo=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>j("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=computed(()=>t.errorMessage||t.validMessage),s=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),o=d=>{d!==t.modelValue&&i("update:modelValue",d)},a=computed(()=>r.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(d,y)=>(openBlock(),createElementBlock("div",So,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":d.errorMessage,"fr-fieldset--valid":d.validMessage}]),disabled:d.disabled,"aria-labelledby":a.value,"aria-invalid":d.ariaInvalid,role:d.errorMessage||d.validMessage?"group":void 0},[d.legend||d.$slots.legend?(openBlock(),createElementBlock("legend",{key:0,id:d.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(d.$slots,"legend",{},()=>[createTextVNode(toDisplayString(d.legend)+" ",1),renderSlot(d.$slots,"required-tip",{},()=>[d.required?(openBlock(),createElementBlock("span",Eo," *")):createCommentVNode("",!0)])])],8,Ao)):createCommentVNode("",!0),renderSlot(d.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.options,(v,_)=>(openBlock(),createBlock(Tt,mergeProps({key:typeof v.value=="boolean"?_:v.value||_,name:d.name,"aria-disabled":v.disabled,ref_for:!0},v,{small:d.small,inline:d.inline,"model-value":d.modelValue,"onUpdate:modelValue":y[0]||(y[0]=C=>o(C))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),r.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${d.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",s.value])},[createBaseVNode("span",Bo,toDisplayString(r.value),1)],2)],8,Ho)):createCommentVNode("",!0)],10,To)]))}}),Et=defineComponent({__name:"DsfrSideMenuListItem",props:{active:{type:Boolean}},setup(n){return(e,t)=>(openBlock(),createElementBlock("li",{class:normalizeClass(["fr-sidemenu__item",{"fr-sidemenu__item--active":e.active}])},[renderSlot(e.$slots,"default")],2))}}),ki=["aria-current","aria-expanded","aria-controls"],Ht=defineComponent({__name:"DsfrSideMenuButton",props:{active:{type:Boolean},expanded:{type:Boolean},controlId:{}},emits:["toggleExpand"],setup(n){return(e,t)=>(openBlock(),createElementBlock("button",{class:"fr-sidemenu__btn","aria-current":e.active?"page":void 0,"aria-expanded":!!e.expanded,"aria-controls":e.controlId,onClick:t[0]||(t[0]=i=>e.$emit("toggleExpand",e.controlId))},[renderSlot(e.$slots,"default")],8,ki))}}),wi=["id"],_i={class:"fr-sidemenu__list"},Bt=defineComponent({__name:"DsfrSideMenuList",props:{id:{},collapsable:{type:Boolean},expanded:{type:Boolean},menuItems:{default:()=>[]}},emits:["toggleExpand"],setup(n){const e=n,{collapse:t,collapsing:i,cssExpanded:r,doExpand:s,onTransitionEnd:o}=ce();watch(()=>e.expanded,(v,_)=>{v!==_&&s(v)}),onMounted(()=>{e.expanded&&s(!0)});const a=v=>typeof v=="string"&&v.startsWith("http"),d=v=>a(v)?"a":"RouterLink",y=v=>({[a(v)?"href":"to"]:v});return(v,_)=>{const C=resolveComponent("DsfrSideMenuList",!0);return openBlock(),createElementBlock("div",{id:v.id,ref_key:"collapse",ref:t,class:normalizeClass({"fr-collapse":v.collapsable,"fr-collapsing":unref(i),"fr-collapse--expanded":unref(r)}),onTransitionend:_[2]||(_[2]=E=>unref(o)(!!v.expanded))},[createBaseVNode("ul",_i,[renderSlot(v.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(v.menuItems,(E,S)=>(openBlock(),createBlock(Et,{key:S,active:E.active},{default:withCtx(()=>[E.menuItems?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(d(E.to)),mergeProps({key:0,class:"fr-sidemenu__link","aria-current":E.active?"page":void 0,ref_for:!0},y(E.to)),{default:withCtx(()=>[createTextVNode(toDisplayString(E.text),1)]),_:2},1040,["aria-current"])),E.menuItems?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(Ht,{active:!!E.active,expanded:!!E.expanded,"control-id":E.id,onToggleExpand:_[0]||(_[0]=b=>v.$emit("toggleExpand",b))},{default:withCtx(()=>[createTextVNode(toDisplayString(E.text),1)]),_:2},1032,["active","expanded","control-id"]),E.menuItems?(openBlock(),createBlock(C,{key:0,id:E.id,collapsable:"",expanded:E.expanded,"menu-items":E.menuItems,onToggleExpand:_[1]||(_[1]=b=>v.$emit("toggleExpand",b))},null,8,["id","expanded","menu-items"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0)]),_:2},1032,["active"]))),128))])],42,wi)}}}),$i=["aria-labelledby"],Di={class:"fr-sidemenu__inner"},Mi=["aria-controls","aria-expanded"],Ii=["id"],Li={class:"fr-sidemenu__title"},Ci=defineComponent({__name:"DsfrSideMenu",props:{buttonLabel:{default:"Dans cette rubrique"},id:{default:()=>j("sidemenu")},sideMenuListId:{default:()=>j("sidemenu","list")},collapseValue:{default:"-492px"},menuItems:{default:()=>{}},headingTitle:{default:""}},emits:["toggleExpand"],setup(n){const{collapse:e,collapsing:t,cssExpanded:i,doExpand:r,onTransitionEnd:s}=ce(),o=ref(!1);return watch(o,(a,d)=>{a!==d&&r(a)}),(a,d)=>(openBlock(),createElementBlock("nav",{class:"fr-sidemenu","aria-labelledby":a.id},[createBaseVNode("div",Di,[createBaseVNode("button",{class:"fr-sidemenu__btn","aria-controls":a.id,"aria-expanded":o.value,onClick:d[0]||(d[0]=withModifiers(y=>o.value=!o.value,["prevent","stop"]))},toDisplayString(a.buttonLabel),9,Mi),createBaseVNode("div",{id:a.id,ref_key:"collapse",ref:e,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(i),"fr-collapsing":unref(t)}]),onTransitionend:d[2]||(d[2]=y=>unref(s)(o.value))},[createBaseVNode("div",Li,toDisplayString(a.headingTitle),1),renderSlot(a.$slots,"default",{},()=>[createVNode(Bt,{id:a.sideMenuListId,"menu-items":a.menuItems,onToggleExpand:d[1]||(d[1]=y=>a.$emit("toggleExpand",y))},null,8,["id","menu-items"])])],42,Ii)])],8,$i))}}),Gi={role:"presentation"},Ki=["id","data-testid","tabindex","aria-selected","aria-controls"],Wi={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Vt=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},selected:{type:Boolean},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(n,{emit:e}){const t=n,i=e,r=ref(null);watch(()=>t.selected,a=>{var d;a&&((d=r.value)==null||d.focus())});const s={ArrowRight:"next",ArrowLeft:"previous",ArrowDown:"next",ArrowUp:"previous",Home:"first",End:"last"};function o(a){const d=a==null?void 0:a.key,y=s[d];y&&i(y)}return(a,d)=>(openBlock(),createElementBlock("li",Gi,[createBaseVNode("button",{id:a.tabId,ref_key:"button",ref:r,"data-testid":`test-${a.tabId}`,class:"fr-tabs__tab",tabindex:a.selected?0:-1,role:"tab",type:"button","aria-selected":a.selected,"aria-controls":a.panelId,onClick:d[0]||(d[0]=withModifiers(y=>a.$emit("click",y),["prevent"])),onKeydown:d[1]||(d[1]=y=>o(y))},[a.icon?(openBlock(),createElementBlock("span",Wi,[createVNode(unref(g),{name:a.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(a.$slots,"default")],40,Ki)]))}}),Ui=["id","aria-labelledby","tabindex"],Zi=defineComponent({__name:"DsfrTabContent",props:{asc:{type:Boolean},selected:{type:Boolean},panelId:{},tabId:{}},setup(n){useCssVars(s=>({"71a34239":i.value,"6beade6c":r.value}));const e=n,t={true:"100%",false:"-100%"},i=computed(()=>t[String(e.asc)]),r=computed(()=>t[String(!e.asc)]);return(s,o)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:s.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":s.selected}]),role:"tabpanel","aria-labelledby":s.tabId,tabindex:s.selected?0:-1},[renderSlot(s.$slots,"default",{},void 0,!0)],10,Ui),[[vShow,s.selected]])]),_:3}))}}),Rt=ae(Zi,[["__scopeId","data-v-f60b34d7"]]),Ji=["aria-label"],xi=defineComponent({__name:"DsfrTabs",props:{tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]},initialSelectedIndex:{default:0}},emits:["selectTab"],setup(n,{expose:e,emit:t}){const i=n,r=t,s=ref(i.initialSelectedIndex||0),o=reactive({}),a=ref(!0),d=ref(null),y=ref(null),v=ref(null),_=R=>s.value===R,C=()=>{var R,L;if(s.value<0||!v.value||!v.value.offsetHeight)return;const k=v.value.offsetHeight,N=(R=y.value)==null?void 0:R.querySelectorAll(".fr-tabs__panel")[s.value];if(!N||!N.offsetHeight)return;const D=N.offsetHeight;(L=y.value)==null||L.style.setProperty("--tabs-height",`${k+D}px`)},E=R=>{if(o[R])return o[R];const L=j("tab");return o[R]=L,L},S=async R=>{a.value=R>s.value,s.value=R,r("selectTab",R)},b=async()=>{const R=s.value===0?i.tabTitles.length-1:s.value-1;await S(R)},P=async()=>{const R=s.value===i.tabTitles.length-1?0:s.value+1;await S(R)},x=async()=>{await S(0)},T=async()=>{await S(i.tabTitles.length-1)};return onMounted(()=>{var R;window.ResizeObserver&&(d.value=new window.ResizeObserver(()=>{C()})),(R=y.value)==null||R.querySelectorAll(".fr-tabs__panel").forEach(L=>{var k;L&&((k=d.value)==null||k.observe(L))})}),onUnmounted(()=>{var R;(R=y.value)==null||R.querySelectorAll(".fr-tabs__panel").forEach(L=>{var k;L&&((k=d.value)==null||k.unobserve(L))})}),e({renderTabs:C,selectIndex:S,selectFirst:x,selectLast:T}),(R,L)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:y,class:"fr-tabs"},[createBaseVNode("ul",{ref_key:"tablist",ref:v,class:"fr-tabs__list",role:"tablist","aria-label":R.tabListName},[renderSlot(R.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(R.tabTitles,(k,N)=>(openBlock(),createBlock(Vt,{key:N,icon:k.icon,"panel-id":k.panelId||`${E(N)}-panel`,"tab-id":k.tabId||E(N),selected:_(N),onClick:D=>S(N),onNext:L[0]||(L[0]=D=>P()),onPrevious:L[1]||(L[1]=D=>b()),onFirst:L[2]||(L[2]=D=>x()),onLast:L[3]||(L[3]=D=>T())},{default:withCtx(()=>[createTextVNode(toDisplayString(k.title),1)]),_:2},1032,["icon","panel-id","tab-id","selected","onClick"]))),128))])],8,Ji),(openBlock(!0),createElementBlock(Fragment,null,renderList(R.tabContents,(k,N)=>{var D,G,U,F;return openBlock(),createBlock(Rt,{key:N,"panel-id":((G=(D=R.tabTitles)==null?void 0:D[N])==null?void 0:G.panelId)||`${E(N)}-panel`,"tab-id":((F=(U=R.tabTitles)==null?void 0:U[N])==null?void 0:F.tabId)||E(N),selected:_(N),asc:a.value},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(k),1)]),_:2},1032,["panel-id","tab-id","selected","asc"])}),128)),renderSlot(R.$slots,"default")],512))}});/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(n,e){const t={};for(const i in e){const r=e[i];t[i]=isArray(r)?r.map(n):n(r)}return t}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode$2(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,e,t="/"){let i,r={},s="",o="";const a=e.indexOf("#");let d=e.indexOf("?");return a<d&&a>=0&&(d=-1),d>-1&&(i=e.slice(0,d),s=e.slice(d+1,a>-1?a:e.length),r=n(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=resolveRelativePath(i??e,t),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:decode$2(o)}}function stringifyURL(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function isSameRouteLocation(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&isSameRouteRecord(e.matched[i],t.matched[r])&&isSameRouteLocationParams(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function isSameRouteRecord(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function isSameRouteLocationParams(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!isSameRouteLocationParamsValue(n[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(n,e){return isArray(n)?isEquivalentArray(n,e):isArray(e)?isEquivalentArray(e,n):n===e}function isEquivalentArray(n,e){return isArray(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function resolveRelativePath(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(o).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,e){return n.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=getElementPosition(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(n,e){return(history.state?history.state.position-e:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,e){scrollPositions.set(n,e)}function getSavedScrollPosition(n){const e=scrollPositions.get(n);return scrollPositions.delete(n),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let a=r.includes(n.slice(s))?n.slice(s).length:1,d=r.slice(a);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(t,n)+i+r}function useHistoryListeners(n,e,t,i){let r=[],s=[],o=null;const a=({state:C})=>{const E=createCurrentLocation(n,location),S=t.value,b=e.value;let P=0;if(C){if(t.value=E,e.value=C,o&&o===S){o=null;return}P=b?C.position-b.position:0}else i(E);r.forEach(x=>{x(t.value,S,{delta:P,type:NavigationType.pop,direction:P?P>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){o=t.value}function y(C){r.push(C);const E=()=>{const S=r.indexOf(C);S>-1&&r.splice(S,1)};return s.push(E),E}function v(){const{history:C}=window;C.state&&C.replaceState(assign({},C.state,{scroll:computeScrollPosition()}),"")}function _(){for(const C of s)C();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:d,listen:y,destroy:_}}function buildState(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:e,location:t}=window,i={value:createCurrentLocation(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(d,y,v){const _=n.indexOf("#"),C=_>-1?(t.host&&document.querySelector("base")?n:n.slice(_))+d:createBaseLocation()+n+d;try{e[v?"replaceState":"pushState"](y,"",C),r.value=y}catch(E){console.error(E),t[v?"replace":"assign"](C)}}function o(d,y){const v=assign({},e.state,buildState(r.value.back,d,r.value.forward,!0),y,{position:r.value.position});s(d,v,!0),i.value=d}function a(d,y){const v=assign({},r.value,e.state,{forward:d,scroll:computeScrollPosition()});s(v.current,v,!0);const _=assign({},buildState(i.value,d,null),{position:v.position+1},y);s(d,_,!1),i.value=d}return{location:i,state:r,push:a,replace:o}}function createWebHistory(n){n=normalizeBase(n);const e=useHistoryStateNavigation(n),t=useHistoryListeners(n,e.state,e.location,e.replace);function i(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=assign({location:"",base:n,go:i,createHref:createHref.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,e){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(n,e){return n instanceof Error&&NavigationFailureSymbol in n&&(e==null||!!(n.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),i=[];let r=t.start?"^":"";const s=[];for(const y of n){const v=y.length?[]:[90];t.strict&&!y.length&&(r+="/");for(let _=0;_<y.length;_++){const C=y[_];let E=40+(t.sensitive?.25:0);if(C.type===0)_||(r+="/"),r+=C.value.replace(REGEX_CHARS_RE,"\\$&"),E+=40;else if(C.type===1){const{value:S,repeatable:b,optional:P,regexp:x}=C;s.push({name:S,repeatable:b,optional:P});const T=x||BASE_PARAM_PATTERN;if(T!==BASE_PARAM_PATTERN){E+=10;try{new RegExp(`(${T})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${S}" (${T}): `+L.message)}}let R=b?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;_||(R=P&&y.length<2?`(?:/${R})`:"/"+R),P&&(R+="?"),r+=R,E+=20,P&&(E+=-8),b&&(E+=-20),T===".*"&&(E+=-50)}v.push(E)}i.push(v)}if(t.strict&&t.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(y){const v=y.match(o),_={};if(!v)return null;for(let C=1;C<v.length;C++){const E=v[C]||"",S=s[C-1];_[S.name]=E&&S.repeatable?E.split("/"):E}return _}function d(y){let v="",_=!1;for(const C of n){(!_||!v.endsWith("/"))&&(v+="/"),_=!1;for(const E of C)if(E.type===0)v+=E.value;else if(E.type===1){const{value:S,repeatable:b,optional:P}=E,x=S in y?y[S]:"";if(isArray(x)&&!b)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const T=isArray(x)?x.join("/"):x;if(!T)if(P)C.length<2&&(v.endsWith("/")?v=v.slice(0,-1):_=!0);else throw new Error(`Missing required param "${S}"`);v+=T}}return v||"/"}return{re:o,score:i,keys:s,parse:a,stringify:d}}function compareScoreArray(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=compareScoreArray(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(r))return-1}return r.length-i.length}function isLastScoreNegative(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(E){throw new Error(`ERR (${t})/"${y}": ${E}`)}let t=0,i=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,d,y="",v="";function _(){y&&(t===0?s.push({type:0,value:y}):t===1||t===2||t===3?(s.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:y,regexp:v,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),y="")}function C(){y+=d}for(;a<n.length;){if(d=n[a++],d==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:d==="/"?(y&&_(),o()):d===":"?(_(),t=1):C();break;case 4:C(),t=i;break;case 1:d==="("?t=2:VALID_PARAM_RE.test(d)?C():(_(),t=0,d!=="*"&&d!=="?"&&d!=="+"&&a--);break;case 2:d===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+d:t=3:v+=d;break;case 3:_(),t=0,d!=="*"&&d!=="?"&&d!=="+"&&a--,v="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${y}"`),_(),o(),r}function createRouteRecordMatcher(n,e,t){const i=tokensToParser(tokenizePath(n.path),t),r=assign(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function createRouterMatcher(n,e){const t=[],i=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function r(_){return i.get(_)}function s(_,C,E){const S=!E,b=normalizeRouteRecord(_);b.aliasOf=E&&E.record;const P=mergeOptions(e,_),x=[b];if("alias"in _){const L=typeof _.alias=="string"?[_.alias]:_.alias;for(const k of L)x.push(assign({},b,{components:E?E.record.components:b.components,path:k,aliasOf:E?E.record:b}))}let T,R;for(const L of x){const{path:k}=L;if(C&&k[0]!=="/"){const N=C.record.path,D=N[N.length-1]==="/"?"":"/";L.path=C.record.path+(k&&D+k)}if(T=createRouteRecordMatcher(L,C,P),E?E.alias.push(T):(R=R||T,R!==T&&R.alias.push(T),S&&_.name&&!isAliasRecord(T)&&o(_.name)),isMatchable(T)&&d(T),b.children){const N=b.children;for(let D=0;D<N.length;D++)s(N[D],T,E&&E.children[D])}E=E||T}return R?()=>{o(R)}:noop$1}function o(_){if(isRouteName(_)){const C=i.get(_);C&&(i.delete(_),t.splice(t.indexOf(C),1),C.children.forEach(o),C.alias.forEach(o))}else{const C=t.indexOf(_);C>-1&&(t.splice(C,1),_.record.name&&i.delete(_.record.name),_.children.forEach(o),_.alias.forEach(o))}}function a(){return t}function d(_){const C=findInsertionIndex(_,t);t.splice(C,0,_),_.record.name&&!isAliasRecord(_)&&i.set(_.record.name,_)}function y(_,C){let E,S={},b,P;if("name"in _&&_.name){if(E=i.get(_.name),!E)throw createRouterError(1,{location:_});P=E.record.name,S=assign(paramsFromLocation(C.params,E.keys.filter(R=>!R.optional).concat(E.parent?E.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),_.params&&paramsFromLocation(_.params,E.keys.map(R=>R.name))),b=E.stringify(S)}else if(_.path!=null)b=_.path,E=t.find(R=>R.re.test(b)),E&&(S=E.parse(b),P=E.record.name);else{if(E=C.name?i.get(C.name):t.find(R=>R.re.test(C.path)),!E)throw createRouterError(1,{location:_,currentLocation:C});P=E.record.name,S=assign({},C.params,_.params),b=E.stringify(S)}const x=[];let T=E;for(;T;)x.unshift(T.record),T=T.parent;return{name:P,path:b,params:S,matched:x,meta:mergeMetaFields(x)}}n.forEach(_=>s(_));function v(){t.length=0,i.clear()}return{addRoute:s,resolve:y,removeRoute:o,clearRoutes:v,getRoutes:a,getRecordMatcher:r}}function paramsFromLocation(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function normalizeRouteRecord(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function normalizeRecordProps(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function findInsertionIndex(n,e){let t=0,i=e.length;for(;t!==i;){const s=t+i>>1;comparePathParserScore(n,e[s])<0?i=s:t=s+1}const r=getInsertionAncestor(n);return r&&(i=e.lastIndexOf(r,i-1)),i}function getInsertionAncestor(n){let e=n;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(n,e)===0)return e}function isMatchable({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function parseQuery(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(PLUS_RE," "),o=s.indexOf("="),a=decode$2(o<0?s:s.slice(0,o)),d=o<0?null:decode$2(s.slice(o+1));if(a in e){let y=e[a];isArray(y)||(y=e[a]=[y]),y.push(d)}else e[a]=d}return e}function stringifyQuery(n){let e="";for(let t in n){const i=n[t];if(t=encodeQueryKey(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(i)?i.map(s=>s&&encodeQueryValue(s)):[i&&encodeQueryValue(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function normalizeQuery(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=isArray(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function guardToPromiseFn(n,e,t,i,r,s=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,d)=>{const y=C=>{C===!1?d(createRouterError(4,{from:t,to:e})):C instanceof Error?d(C):isRouteLocation(C)?d(createRouterError(2,{from:e,to:C})):(o&&i.enterCallbacks[r]===o&&typeof C=="function"&&o.push(C),a())},v=s(()=>n.call(i&&i.instances[r],e,t,y));let _=Promise.resolve(v);n.length<3&&(_=_.then(y)),_.catch(C=>d(C))})}function extractComponentsGuards(n,e,t,i,r=s=>s()){const s=[];for(const o of n)for(const a in o.components){let d=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(isRouteComponent(d)){const v=(d.__vccOpts||d)[e];v&&s.push(guardToPromiseFn(v,t,i,o,a,r))}else{let y=d();s.push(()=>y.then(v=>{if(!v)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const _=isESModule(v)?v.default:v;o.components[a]=_;const E=(_.__vccOpts||_)[e];return E&&guardToPromiseFn(E,t,i,o,a,r)()}))}}return s}function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function useLink(n){const e=inject(routerKey),t=inject(routeLocationKey),i=computed(()=>{const d=unref(n.to);return e.resolve(d)}),r=computed(()=>{const{matched:d}=i.value,{length:y}=d,v=d[y-1],_=t.matched;if(!v||!_.length)return-1;const C=_.findIndex(isSameRouteRecord.bind(null,v));if(C>-1)return C;const E=getOriginalPath(d[y-2]);return y>1&&getOriginalPath(v)===E&&_[_.length-1].path!==E?_.findIndex(isSameRouteRecord.bind(null,d[y-2])):C}),s=computed(()=>r.value>-1&&includesParams(t.params,i.value.params)),o=computed(()=>r.value>-1&&r.value===t.matched.length-1&&isSameRouteLocationParams(t.params,i.value.params));function a(d={}){return guardEvent(d)?e[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop$1):Promise.resolve()}return{route:i,href:computed(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(n,{slots:e}){const t=reactive(useLink(n)),{options:i}=inject(routerKey),r=computed(()=>({[getLinkClass(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:h$1("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!isArray(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,e,t)=>n??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=inject(routerViewLocationKey),r=computed(()=>n.route||i.value),s=inject(viewDepthKey,0),o=computed(()=>{let y=unref(s);const{matched:v}=r.value;let _;for(;(_=v[y])&&!_.components;)y++;return y}),a=computed(()=>r.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,a),provide(routerViewLocationKey,r);const d=ref();return watch(()=>[d.value,a.value,n.name],([y,v,_],[C,E,S])=>{v&&(v.instances[_]=y,E&&E!==v&&y&&y===C&&(v.leaveGuards.size||(v.leaveGuards=E.leaveGuards),v.updateGuards.size||(v.updateGuards=E.updateGuards))),y&&v&&(!E||!isSameRouteRecord(v,E)||!C)&&(v.enterCallbacks[_]||[]).forEach(b=>b(y))},{flush:"post"}),()=>{const y=r.value,v=n.name,_=a.value,C=_&&_.components[v];if(!C)return normalizeSlot(t.default,{Component:C,route:y});const E=_.props[v],S=E?E===!0?y.params:typeof E=="function"?E(y):E:null,P=h$1(C,assign({},S,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(_.instances[v]=null)},ref:d}));return normalizeSlot(t.default,{Component:P,route:y})||P}}});function normalizeSlot(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(n){const e=createRouterMatcher(n.routes,n),t=n.parseQuery||parseQuery,i=n.stringifyQuery||stringifyQuery,r=n.history,s=useCallbacks(),o=useCallbacks(),a=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let y=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=applyToParams.bind(null,re=>""+re),_=applyToParams.bind(null,encodeParam),C=applyToParams.bind(null,decode$2);function E(re,Ve){let je,se;return isRouteName(re)?(je=e.getRecordMatcher(re),se=Ve):se=re,e.addRoute(se,je)}function S(re){const Ve=e.getRecordMatcher(re);Ve&&e.removeRoute(Ve)}function b(){return e.getRoutes().map(re=>re.record)}function P(re){return!!e.getRecordMatcher(re)}function x(re,Ve){if(Ve=assign({},Ve||d.value),typeof re=="string"){const W=parseURL(t,re,Ve.path),$=e.resolve({path:W.path},Ve),de=r.createHref(W.fullPath);return assign(W,$,{params:C($.params),hash:decode$2(W.hash),redirectedFrom:void 0,href:de})}let je;if(re.path!=null)je=assign({},re,{path:parseURL(t,re.path,Ve.path).path});else{const W=assign({},re.params);for(const $ in W)W[$]==null&&delete W[$];je=assign({},re,{params:_(W)}),Ve.params=_(Ve.params)}const se=e.resolve(je,Ve),pt=re.hash||"";se.params=v(C(se.params));const xt=stringifyURL(i,assign({},re,{hash:encodeHash(pt),path:se.path})),H=r.createHref(xt);return assign({fullPath:xt,hash:pt,query:i===stringifyQuery?normalizeQuery(re.query):re.query||{}},se,{redirectedFrom:void 0,href:H})}function T(re){return typeof re=="string"?parseURL(t,re,d.value.path):assign({},re)}function R(re,Ve){if(y!==re)return createRouterError(8,{from:Ve,to:re})}function L(re){return D(re)}function k(re){return L(assign(T(re),{replace:!0}))}function N(re){const Ve=re.matched[re.matched.length-1];if(Ve&&Ve.redirect){const{redirect:je}=Ve;let se=typeof je=="function"?je(re):je;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=T(se):{path:se},se.params={}),assign({query:re.query,hash:re.hash,params:se.path!=null?{}:re.params},se)}}function D(re,Ve){const je=y=x(re),se=d.value,pt=re.state,xt=re.force,H=re.replace===!0,W=N(je);if(W)return D(assign(T(W),{state:typeof W=="object"?assign({},pt,W.state):pt,force:xt,replace:H}),Ve||je);const $=je;$.redirectedFrom=Ve;let de;return!xt&&isSameRouteLocation(i,se,je)&&(de=createRouterError(16,{to:$,from:se}),it(se,se,!0,!1)),(de?Promise.resolve(de):F($,se)).catch(ue=>isNavigationFailure(ue)?isNavigationFailure(ue,2)?ue:ie(ue):te(ue,$,se)).then(ue=>{if(ue){if(isNavigationFailure(ue,2))return D(assign({replace:H},T(ue.to),{state:typeof ue.to=="object"?assign({},pt,ue.to.state):pt,force:xt}),Ve||$)}else ue=z($,se,!0,H,pt);return B($,se,ue),ue})}function G(re,Ve){const je=R(re,Ve);return je?Promise.reject(je):Promise.resolve()}function U(re){const Ve=ct.values().next().value;return Ve&&typeof Ve.runWithContext=="function"?Ve.runWithContext(re):re()}function F(re,Ve){let je;const[se,pt,xt]=extractChangingRecords(re,Ve);je=extractComponentsGuards(se.reverse(),"beforeRouteLeave",re,Ve);for(const W of se)W.leaveGuards.forEach($=>{je.push(guardToPromiseFn($,re,Ve))});const H=G.bind(null,re,Ve);return je.push(H),dt(je).then(()=>{je=[];for(const W of s.list())je.push(guardToPromiseFn(W,re,Ve));return je.push(H),dt(je)}).then(()=>{je=extractComponentsGuards(pt,"beforeRouteUpdate",re,Ve);for(const W of pt)W.updateGuards.forEach($=>{je.push(guardToPromiseFn($,re,Ve))});return je.push(H),dt(je)}).then(()=>{je=[];for(const W of xt)if(W.beforeEnter)if(isArray(W.beforeEnter))for(const $ of W.beforeEnter)je.push(guardToPromiseFn($,re,Ve));else je.push(guardToPromiseFn(W.beforeEnter,re,Ve));return je.push(H),dt(je)}).then(()=>(re.matched.forEach(W=>W.enterCallbacks={}),je=extractComponentsGuards(xt,"beforeRouteEnter",re,Ve,U),je.push(H),dt(je))).then(()=>{je=[];for(const W of o.list())je.push(guardToPromiseFn(W,re,Ve));return je.push(H),dt(je)}).catch(W=>isNavigationFailure(W,8)?W:Promise.reject(W))}function B(re,Ve,je){a.list().forEach(se=>U(()=>se(re,Ve,je)))}function z(re,Ve,je,se,pt){const xt=R(re,Ve);if(xt)return xt;const H=Ve===START_LOCATION_NORMALIZED,W=isBrowser?history.state:{};je&&(se||H?r.replace(re.fullPath,assign({scroll:H&&W&&W.scroll},pt)):r.push(re.fullPath,pt)),d.value=re,it(re,Ve,je,H),ie()}let Y;function X(){Y||(Y=r.listen((re,Ve,je)=>{if(!Qe.listening)return;const se=x(re),pt=N(se);if(pt){D(assign(pt,{replace:!0}),se).catch(noop$1);return}y=se;const xt=d.value;isBrowser&&saveScrollPosition(getScrollKey(xt.fullPath,je.delta),computeScrollPosition()),F(se,xt).catch(H=>isNavigationFailure(H,12)?H:isNavigationFailure(H,2)?(D(H.to,se).then(W=>{isNavigationFailure(W,20)&&!je.delta&&je.type===NavigationType.pop&&r.go(-1,!1)}).catch(noop$1),Promise.reject()):(je.delta&&r.go(-je.delta,!1),te(H,se,xt))).then(H=>{H=H||z(se,xt,!1),H&&(je.delta&&!isNavigationFailure(H,8)?r.go(-je.delta,!1):je.type===NavigationType.pop&&isNavigationFailure(H,20)&&r.go(-1,!1)),B(se,xt,H)}).catch(noop$1)}))}let q=useCallbacks(),K=useCallbacks(),ee;function te(re,Ve,je){ie(re);const se=K.list();return se.length?se.forEach(pt=>pt(re,Ve,je)):console.error(re),Promise.reject(re)}function Oe(){return ee&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((re,Ve)=>{q.add([re,Ve])})}function ie(re){return ee||(ee=!re,X(),q.list().forEach(([Ve,je])=>re?je(re):Ve()),q.reset()),re}function it(re,Ve,je,se){const{scrollBehavior:pt}=n;if(!isBrowser||!pt)return Promise.resolve();const xt=!je&&getSavedScrollPosition(getScrollKey(re.fullPath,0))||(se||!je)&&history.state&&history.state.scroll||null;return nextTick().then(()=>pt(re,Ve,xt)).then(H=>H&&scrollToPosition(H)).catch(H=>te(H,re,Ve))}const oe=re=>r.go(re);let ft;const ct=new Set,Qe={currentRoute:d,listening:!0,addRoute:E,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:b,resolve:x,options:n,push:L,replace:k,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:K.add,isReady:Oe,install(re){const Ve=this;re.component("RouterLink",RouterLink),re.component("RouterView",RouterView),re.config.globalProperties.$router=Ve,Object.defineProperty(re.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!ft&&d.value===START_LOCATION_NORMALIZED&&(ft=!0,L(r.location).catch(pt=>{}));const je={};for(const pt in START_LOCATION_NORMALIZED)Object.defineProperty(je,pt,{get:()=>d.value[pt],enumerable:!0});re.provide(routerKey,Ve),re.provide(routeLocationKey,shallowReactive(je)),re.provide(routerViewLocationKey,d);const se=re.unmount;ct.add(re),re.unmount=function(){ct.delete(re),ct.size<1&&(y=START_LOCATION_NORMALIZED,Y&&Y(),Y=null,d.value=START_LOCATION_NORMALIZED,ft=!1,ee=!1),se()}}};function dt(re){return re.reduce((Ve,je)=>Ve.then(()=>U(je)),Promise.resolve())}return Qe}function extractChangingRecords(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(y=>isSameRouteRecord(y,a))?i.push(a):t.push(a));const d=n.matched[o];d&&(e.matched.find(y=>isSameRouteRecord(y,d))||r.push(d))}return[t,i,r]}function useRouter(){return inject(routerKey)}function useRoute(n){return inject(routeLocationKey)}function tryOnScopeDispose(n){return getCurrentScope()?(onScopeDispose(n),!0):!1}function toValue(n){return typeof n=="function"?n():unref(n)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$4=Object.prototype.toString,isObject=n=>toString$4.call(n)==="[object Object]",noop=()=>{};function createFilterWrapper(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return t}const bypassFilter=n=>n();function pausableFilter(n=bypassFilter){const e=ref(!0);function t(){e.value=!1}function i(){e.value=!0}const r=(...s)=>{e.value&&n(...s)};return{isActive:readonly(e),pause:t,resume:i,eventFilter:r}}function getLifeCycleTarget(n){return getCurrentInstance()}function watchWithFilter(n,e,t={}){const{eventFilter:i=bypassFilter,...r}=t;return watch(n,createFilterWrapper(i,e),r)}function watchPausable(n,e,t={}){const{eventFilter:i,...r}=t,{eventFilter:s,pause:o,resume:a,isActive:d}=pausableFilter(i);return{stop:watchWithFilter(n,e,{...r,eventFilter:s}),pause:o,resume:a,isActive:d}}function tryOnMounted(n,e=!0,t){getLifeCycleTarget()?onMounted(n,t):e?n():nextTick(n)}function unrefElement(n){var e;const t=toValue(n);return(e=t==null?void 0:t.$el)!=null?e:t}const defaultWindow=isClient?window:void 0;function useEventListener(...n){let e,t,i,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,i,r]=n,e=defaultWindow):[e,t,i,r]=n,!e)return noop;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(v=>v()),s.length=0},a=(v,_,C,E)=>(v.addEventListener(_,C,E),()=>v.removeEventListener(_,C,E)),d=watch(()=>[unrefElement(e),toValue(r)],([v,_])=>{if(o(),!v)return;const C=isObject(_)?{..._}:_;s.push(...t.flatMap(E=>i.map(S=>a(v,E,S,C))))},{immediate:!0,flush:"post"}),y=()=>{d(),o()};return tryOnScopeDispose(y),y}function useMounted(){const n=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{n.value=!0},e),n}function useSupported(n){const e=useMounted();return computed(()=>(e.value,!!n()))}function useMediaQuery(n,e={}){const{window:t=defaultWindow}=e,i=useSupported(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let r;const s=ref(!1),o=y=>{s.value=y.matches},a=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o))},d=watchEffect(()=>{i.value&&(a(),r=t.matchMedia(toValue(n)),"addEventListener"in r?r.addEventListener("change",o):r.addListener(o),s.value=r.matches)});return tryOnScopeDispose(()=>{d(),a(),r=void 0}),s}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(n,e){return handlers[n]||e}function guessSerializerType(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}const StorageSerializers={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(n,e,t,i={}){var r;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:d=!0,mergeDefaults:y=!1,shallow:v,window:_=defaultWindow,eventFilter:C,onError:E=F=>{console.error(F)},initOnMounted:S}=i,b=(v?shallowRef:ref)(typeof e=="function"?e():e);if(!t)try{t=getSSRHandler("getDefaultStorage",()=>{var F;return(F=defaultWindow)==null?void 0:F.localStorage})()}catch(F){E(F)}if(!t)return b;const P=toValue(e),x=guessSerializerType(P),T=(r=i.serializer)!=null?r:StorageSerializers[x],{pause:R,resume:L}=watchPausable(b,()=>N(b.value),{flush:s,deep:o,eventFilter:C});_&&a&&tryOnMounted(()=>{useEventListener(_,"storage",G),useEventListener(_,customStorageEventName,U),S&&G()}),S||G();function k(F,B){_&&_.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:n,oldValue:F,newValue:B,storageArea:t}}))}function N(F){try{const B=t.getItem(n);if(F==null)k(B,null),t.removeItem(n);else{const z=T.write(F);B!==z&&(t.setItem(n,z),k(B,z))}}catch(B){E(B)}}function D(F){const B=F?F.newValue:t.getItem(n);if(B==null)return d&&P!=null&&t.setItem(n,T.write(P)),P;if(!F&&y){const z=T.read(B);return typeof y=="function"?y(z,P):x==="object"&&!Array.isArray(z)?{...P,...z}:z}else return typeof B!="string"?B:T.read(B)}function G(F){if(!(F&&F.storageArea!==t)){if(F&&F.key==null){b.value=P;return}if(!(F&&F.key!==n)){R();try{(F==null?void 0:F.newValue)!==T.write(b.value)&&(b.value=D(F))}catch(B){E(B)}finally{F?nextTick(L):L()}}}}function U(F){G(F.detail)}return b}function useMatchMedia(n){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[n]!==void 0){const t="(max-width: "+e[n]+")";return useMediaQuery(t)}}function useBaseUrl(){return"https://cartes.gouv.fr"}function useHeaderParams(){return{serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")}}const LogoIGN="data:image/png;base64,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",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"gouvernement.fr",href:"https://gouvernement.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const title$1="Panneau de gestion des cookies",size$1="md",_sfc_main$y={__name:"ModalConsent",setup(n,{expose:e}){const t=useRouter(),i=useEulerian();var r=i.hasKey();const s=ref(!r),o=useBaseUrl()+"/donnees-personnelles",a=()=>{s.value=!0},d=()=>{s.value=!1,t.push({path:"/"})};e({openModalConsent:a,onModalConsentClose:d});const y=()=>{i.enable(),d()},v=()=>{i.disable(),d()};return(_,C)=>{const E=ln,S=_s;return openBlock(),createBlock(S,{opened:unref(s),title:title$1,size:size$1,onClose:d},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(E,{onAcceptAll:C[0]||(C[0]=b=>y()),onRefuseAll:C[1]||(C[1]=b=>v())},{default:withCtx(()=>[C[2]||(C[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:o},"Données personnelles et cookies")]),_:1})]),C[3]||(C[3]=createBaseVNode("hr",null,null,-1)),C[4]||(C[4]=createBaseVNode("p",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}},LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$x={__name:"ModalTheme",setup(n,{expose:e}){Ac();const t=ref(),i=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],{setScheme:r,theme:s}=Ac(),o=()=>{r(t.value)},a=ref(!1),d=()=>{a.value=!0},y=()=>{a.value=!1};return e({openModalTheme:d,onModalThemeClose:y}),(v,_)=>{const C=Vo,E=_s;return openBlock(),createBlock(E,{ref:"modal",opened:unref(a),title,size,onClose:y},{default:withCtx(()=>[createVNode(C,{modelValue:unref(t),"onUpdate:modelValue":[_[0]||(_[0]=S=>isRef(t)?t.value=S:null),o],legend,name:"fr-radios-theme",options:i},null,8,["modelValue"])]),_:1},8,["opened"])}}},_hoisted_1$5={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$w=defineComponent({__name:"Main",setup(n){dist.useLogger(),useMatchMedia("LG");const e=useHeaderParams(),t=useFooterParams(),i=ref(null),r=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:i.value?i.value.openModalTheme:null}]),s=ref(null),o=computed(()=>t.mandatoryLinks.map(y=>(y.label==="Gestion des cookies"&&(delete y.href,y.onclick=s.value?s.value.openModalConsent:null,y.to="/"),y))),a=useRoute(),d=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(a.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(a.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}];return(y,v)=>{const _=js,C=zl,E=resolveComponent("router-view"),S=Ar;return openBlock(),createElementBlock(Fragment,null,[createVNode(C,{modelValue:unref(e).serviceTitle,"onUpdate:modelValue":v[0]||(v[0]=b=>unref(e).serviceTitle=b),"service-title":unref(e).serviceTitle,"show-beta":!0,"service-description":unref(e).serviceDescription,"logo-text":unref(e).logoText,"quick-links":unref(e).quickLinks},{mainnav:withCtx(()=>[createVNode(_,{"nav-items":d})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createBaseVNode("div",null,[createVNode(E)]),createVNode(S,{"before-mandatory-links":unref(t).beforeMandatoryLinks,"after-mandatory-links":unref(r),"logo-text":unref(t).logoText,"desc-text":unref(t).descText,"home-link":unref(t).homeLink,partners:unref(t).partners,"licence-text":unref(t).licenceText,"licence-to":unref(t).licenceTo,"licence-name":unref(t).licenceName,"licence-link-props":unref(t).licenceLinkProps,"ecosystem-links":unref(t).ecosystemLinks,"mandatory-links":unref(o)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$5,[createVNode(_sfc_main$x,{ref_key:"refModalTheme",ref:i},null,512),createVNode(_sfc_main$y,{ref_key:"refModalConsent",ref:s},null,512)])],64)}}}),_sfc_main$v=defineComponent({__name:"App",setup(n){return(e,t)=>(openBlock(),createBlock(_sfc_main$w))}});class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(n,e,t){let i,r;t=t||ascending;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function ascending(n,e){return n>e?1:n<e?-1:0}function linearFindNearest(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function reverseSubArray(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function extend$4(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function equals$2(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function isSorted(n,e,t){const i=e||ascending;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||o===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!equals$2(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function toPromise(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(n){for(const e in n)delete n[e]}function isEmpty$1(n){let e;for(e in n)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new BaseEvent(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let d;for(let y=0,v=r.length;y<v;++y)if("handleEvent"in r[y]?d=r[y].handleEvent(s):d=r[y].call(this,s),d===!1||s.propagationStopped){d=!1;break}if(--o[i]===0){let y=a[i];for(delete a[i];y--;)this.removeEventListener(i,VOID);delete o[i]}return d}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=VOID,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const EventType$1={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function listenOnce(n,e,t,i){return listen(n,e,t,i,!0)}function unlistenByKey(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),clear$1(n))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType$1.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=listen(this,e[s],t);return r}return listen(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=listenOnce(this,e[s],t)}else i=listenOnce(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)unByKey(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)unlistenByKey(n[e]);else unlistenByKey(n)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(n){return n.ol_uid||(n.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,t)),i=ObjectEventType.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$3={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$3.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,r,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$3.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function assert(n,e){if(!n)throw new Error(e)}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(n){return set(n,1,0,0,1,0,0)}function multiply(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],d=e[0],y=e[1],v=e[2],_=e[3],C=e[4],E=e[5];return n[0]=t*d+r*y,n[1]=i*d+s*y,n[2]=t*v+r*_,n[3]=i*v+s*_,n[4]=t*C+r*E+o,n[5]=i*C+s*E+a,n}function set(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function setFromArray(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function apply(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function scale$3(n,e,t){return multiply(n,set(tmp_,e,0,0,t,0,0))}function makeScale(n,e,t){return set(n,e,0,0,t,0,0)}function translate$1(n,e,t){return multiply(n,set(tmp_,1,0,0,1,e,t))}function compose(n,e,t,i,r,s,o,a){const d=Math.sin(s),y=Math.cos(s);return n[0]=i*y,n[1]=r*d,n[2]=-i*d,n[3]=r*y,n[4]=o*i*y-a*i*d+e,n[5]=o*r*d+a*r*y+t,n}function makeInverse(n,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],d=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*d-o*a)/t,n[5]=-(i*d-r*a)/t,n}function determinant(n){return n[0]*n[3]-n[1]*n[2]}let transformStringDiv;function toString$3(n){const e="matrix("+n.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const t=transformStringDiv||(transformStringDiv=document.createElement("div"));return t.style.transform=e,t.style.transform}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(n){const e=createEmpty();for(let t=0,i=n.length;t<i;++t)extendCoordinate(e,n[t]);return e}function _boundingExtentXYs(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),s=Math.max.apply(null,n),o=Math.max.apply(null,e);return createOrUpdate$2(i,r,s,o,t)}function buffer(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function clone$1(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function closestSquaredDistanceXY(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function containsCoordinate(n,e){return containsXY(n,e[0],e[1])}function containsExtent(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function containsXY(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function coordinateRelationship(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let d=Relationship.UNKNOWN;return o<t?d=d|Relationship.LEFT:o>r&&(d=d|Relationship.RIGHT),a<i?d=d|Relationship.BELOW:a>s&&(d=d|Relationship.ABOVE),d===Relationship.UNKNOWN&&(d=Relationship.INTERSECTING),d}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function createOrUpdateEmpty(n){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,n)}function createOrUpdateFromCoordinate(n,e){const t=n[0],i=n[1];return createOrUpdate$2(t,i,t,i,e)}function createOrUpdateFromFlatCoordinates(n,e,t,i,r){const s=createOrUpdateEmpty(r);return extendFlatCoordinates(s,n,e,t,i)}function equals$1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function extend$3(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function extendCoordinate(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function extendFlatCoordinates(n,e,t,i,r){for(;t<i;t+=r)extendXY(n,e[t],e[t+1]);return n}function extendXY(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function forEachCorner(n,e){let t;return t=e(getBottomLeft(n)),t||(t=e(getBottomRight(n)),t)||(t=e(getTopRight(n)),t)||(t=e(getTopLeft(n)),t)?t:!1}function getArea$1(n){let e=0;return isEmpty(n)||(e=getWidth(n)*getHeight(n)),e}function getBottomLeft(n){return[n[0],n[1]]}function getBottomRight(n){return[n[2],n[1]]}function getCenter(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function getCorner(n,e){let t;if(e==="bottom-left")t=getBottomLeft(n);else if(e==="bottom-right")t=getBottomRight(n);else if(e==="top-left")t=getTopLeft(n);else if(e==="top-right")t=getTopRight(n);else throw new Error("Invalid corner");return t}function getForViewAndSize(n,e,t,i,r){const[s,o,a,d,y,v,_,C]=getRotatedViewport(n,e,t,i);return createOrUpdate$2(Math.min(s,a,y,_),Math.min(o,d,v,C),Math.max(s,a,y,_),Math.max(o,d,v,C),r)}function getRotatedViewport(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),d=r*o,y=r*a,v=s*o,_=s*a,C=n[0],E=n[1];return[C-d+_,E-y-v,C-d-_,E-y+v,C+d-_,E+y+v,C+d+_,E+y-v,C-d+_,E-y-v]}function getHeight(n){return n[3]-n[1]}function getIntersection(n,e,t){const i=t||createEmpty();return intersects$1(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):createOrUpdateEmpty(i),i}function getTopLeft(n){return[n[0],n[3]]}function getTopRight(n){return[n[2],n[3]]}function getWidth(n){return n[2]-n[0]}function intersects$1(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function isEmpty(n){return n[2]<n[0]||n[3]<n[1]}function returnOrUpdate(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function scaleFromCenter(n,e){const t=(n[2]-n[0])/2*(e-1),i=(n[3]-n[1])/2*(e-1);n[0]-=t,n[2]+=t,n[1]-=i,n[3]+=i}function intersectsSegment(n,e,t){let i=!1;const r=coordinateRelationship(n,e),s=coordinateRelationship(n,t);if(r===Relationship.INTERSECTING||s===Relationship.INTERSECTING)i=!0;else{const o=n[0],a=n[1],d=n[2],y=n[3],v=e[0],_=e[1],C=t[0],E=t[1],S=(E-_)/(C-v);let b,P;s&Relationship.ABOVE&&!(r&Relationship.ABOVE)&&(b=C-(E-y)/S,i=b>=o&&b<=d),!i&&s&Relationship.RIGHT&&!(r&Relationship.RIGHT)&&(P=E-(C-d)*S,i=P>=a&&P<=y),!i&&s&Relationship.BELOW&&!(r&Relationship.BELOW)&&(b=C-(E-a)/S,i=b>=o&&b<=d),!i&&s&Relationship.LEFT&&!(r&Relationship.LEFT)&&(P=E-(C-o)*S,i=P>=a&&P<=y)}return i}function applyTransform(n,e,t,i){if(isEmpty(n))return createOrUpdateEmpty(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const s=[],o=[];for(let a=0,d=r.length;a<d;a+=2)s.push(r[a]),o.push(r[a+1]);return _boundingExtentXYs(s,o,t)}function wrapX$2(n,e){const t=e.getExtent(),i=getCenter(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=getWidth(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function wrapAndSliceX(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];wrapX$2(n,e);const i=getWidth(t);if(getWidth(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(n,e){e=e||xyz.whitepoint[2].E;var t=n[0]/e[0],i=n[1]/e[1],r=n[2]/e[2],s,o,a;return s=t*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=t*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=t*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};rgb.xyz=function(n,e){var t=n[0]/255,i=n[1]/255,r=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=t*.41239079926595+i*.35758433938387+r*.18048078840183,o=t*.21263900587151+i*.71516867876775+r*.072192315360733,a=t*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||xyz.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var i,r,s,o,a,d,y,v,_,C,E,S,b;if(s=n[0],o=n[1],a=n[2],s===0)return[0,0,0];var P=.0011070564598794539;return e=e||"D65",t=t||2,_=xyz.whitepoint[t][e][0],C=xyz.whitepoint[t][e][1],E=xyz.whitepoint[t][e][2],S=4*_/(_+15*C+3*E),b=9*C/(_+15*C+3*E),i=o/(13*s)+S||0,r=a/(13*s)+b||0,y=s>8?C*Math.pow((s+16)/116,3):C*s*P,d=y*9*i/(4*r)||0,v=y*(12-3*i-20*r)/(4*r)||0,[d,y,v]}};xyz.luv=function(n,e,t){var i,r,s,o,a,d,y,v,_,C,E,S,b,P=.008856451679035631,x=903.2962962962961;e=e||"D65",t=t||2,_=xyz.whitepoint[t][e][0],C=xyz.whitepoint[t][e][1],E=xyz.whitepoint[t][e][2],S=4*_/(_+15*C+3*E),b=9*C/(_+15*C+3*E),d=n[0],y=n[1],v=n[2],i=4*d/(d+15*y+3*v)||0,r=9*y/(d+15*y+3*v)||0;var T=y/C;return s=T<=P?x*T:116*Math.pow(T,1/3)-16,o=13*s*(i-S),a=13*s*(r-b),[s,o,a]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],i=n[2],r,s,o;return o=i/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o),[e,r,s]},xyz:function(n){return luv.xyz(lchuv.luv(n))}};luv.lchuv=function(n){var e=n[0],t=n[1],i=n[2],r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};xyz.lchuv=function(n){return luv.lchuv(xyz.luv(n))};const names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(n){var v,_;var e,t=[],i=1,r;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),names$y[n])t=names$y[n].slice(),r="rgb";else if(n==="transparent")i=0,r="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),o=s.length,a=o<=4;i=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var d=e[1];r=d.replace(/a$/,"");var y=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(C,E){if(C[C.length-1]==="%")return C=parseFloat(C)/100,E===3?C:r==="rgb"?C*255:r[0]==="h"||r[0]==="l"&&!E?C*100:r==="lab"?C*125:r==="lch"?E<2?C*150:C*360:r[0]==="o"&&!E?C:r==="oklab"?C*.4:r==="oklch"?E<2?C*.4:C*360:C;if(r[E]==="h"||E===2&&r[r.length-1]==="h"){if(baseHues[C]!==void 0)return baseHues[C];if(C.endsWith("deg"))return parseFloat(C);if(C.endsWith("turn"))return parseFloat(C)*360;if(C.endsWith("grad"))return parseFloat(C)*360/400;if(C.endsWith("rad"))return parseFloat(C)*180/Math.PI}return C==="none"?0:parseFloat(C)}),i=t.length>y?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(C){return parseFloat(C)}),r=((_=(v=n.match(/([a-z])/ig))==null?void 0:v.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:r,values:t,alpha:i}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,i=n[2]/100,r,s,o,a,d,y=0;if(t===0)return d=i*255,[d,d,d];for(s=i<.5?i*(1+t):i+t-i*t,r=2*i-s,a=[0,0,0];y<3;)o=e+1/3*-(y-1),o<0?o++:o>1&&o--,d=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[y++]=d*255;return a}};rgb.hsl=function(n){var e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=s-r,a,d,y;return s===r?a=0:e===s?a=(t-i)/o:t===s?a=2+(i-e)/o:i===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),y=(r+s)/2,s===r?d=0:y<=.5?d=o/(s+r):d=o/(2-s-r),[a,d*100,y*100]};function rgba$1(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=parse$3(n);if(!t.space)return[];const i=t.space[0]==="h"?hsl.min:rgb.min,r=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],i[2]),r[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function clamp(n,e,t){return Math.min(Math.max(n,e),t)}function squaredSegmentDistance(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const d=((n-t)*o+(e-i)*a)/(o*o+a*a);d>1?(t=r,i=s):d>0&&(t+=o*d,i+=a*d)}return squaredDistance$1(n,e,t,i)}function squaredDistance$1(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function solveLinearSystem(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const d=Math.abs(n[a][i]);d>s&&(s=d,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const d=-n[a][i]/n[i][i];for(let y=i;y<e+1;y++)i==y?n[a][y]=0:n[a][y]+=d*n[i][y]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function toRadians(n){return n*Math.PI/180}function modulo(n,e){const t=n%e;return t*e<0?t+e:t}function lerp(n,e,t){return n+t*(e-n)}function toFixed(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function round(n,e){return Math.round(toFixed(n,e))}function floor(n,e){return Math.floor(toFixed(n,e))}function ceil(n,e){return Math.ceil(toFixed(n,e))}function asString(n){return typeof n=="string"?n:toString$2(n)}const MAX_CACHE_SIZE=1024,cache$1={};let cacheSize=0;function withAlpha(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function rgbaToLcha(n){const e=xyz.lchuv(rgb.xyz(n));return e[3]=n[3],e}function lchaToRgba(n){const e=xyz.rgb(lchuv.xyz(n));return e[3]=n[3],e}function fromString(n){if(cache$1.hasOwnProperty(n))return cache$1[n];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const i in cache$1)t++&3||(delete cache$1[i],--cacheSize)}const e=rgba$1(n);if(e.length!==4)throw new Error('Failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+n+'" as color');return normalize(e),cache$1[n]=e,++cacheSize,e}function asArray(n){return Array.isArray(n)?n:fromString(n)}function normalize(n){return n[0]=clamp(n[0]+.5|0,0,255),n[1]=clamp(n[1]+.5|0,0,255),n[2]=clamp(n[2]+.5|0,0,255),n[3]=clamp(n[3],0,1),n}function toString$2(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function isStringColor(n){try{return fromString(n),!0}catch{return!1}}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=getKey$1(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=getKey$1(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey$1(n,e,t){const i=t?asString(t):"null";return e+":"+n+":"+i}const shared=new IconImageCache,LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const EventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256,METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,i){return t/Math.cosh(i[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=HALF_SIZE*n[r]/180;let s=RADIUS$1*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>MAX_SAFE_Y?s=MAX_SAFE_Y:s<-MAX_SAFE_Y&&(s=-MAX_SAFE_Y),e[r+1]=s}return e}function toEPSG4326(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/HALF_SIZE,e[r+1]=360*Math.atan(Math.exp(n[r+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache={};function get$5(n){return cache[n]||cache[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(n,e){cache[n]=e}let transforms={};function add$2(n,e,t){const i=n.getCode(),r=e.getCode();i in transforms||(transforms[i]={}),transforms[i][r]=t}function get$4(n,e){let t;return n in transforms&&e in transforms[n]&&(t=transforms[n][e]),t}function padNumber(n,e,t){const i=t!==void 0?n.toFixed(t):""+n;let r=i.indexOf(".");return r=r===-1?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function compareVersions(n,e){const t=(""+n).split("."),i=(""+e).split(".");for(let r=0;r<Math.max(t.length,i.length);r++){const s=parseInt(t[r]||"0",10),o=parseInt(i[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function add$1(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function closestOnSegment(n,e){const t=n[0],i=n[1],r=e[0],s=e[1],o=r[0],a=r[1],d=s[0],y=s[1],v=d-o,_=y-a,C=v===0&&_===0?0:(v*(t-o)+_*(i-a))/(v*v+_*_||0);let E,S;return C<=0?(E=o,S=a):C>=1?(E=d,S=y):(E=o+C*v,S=a+C*_),[E,S]}function equals(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function rotate$1(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function scale$2(n,e){return n[0]*=e,n[1]*=e,n}function squaredDistance(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function distance(n,e){return Math.sqrt(squaredDistance(n,e))}function squaredDistanceToSegment(n,e){return squaredDistance(n,closestOnSegment(n,e))}function wrapX$1(n,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),i=getWorldsAway(n,e,t);i&&(n[0]-=i*t)}return n}function getWorldsAway(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||getWidth(i),r=Math.floor((n[0]-i[0])/t)),r}const DEFAULT_RADIUS=63710088e-1;function getDistance(n,e,t){t=t||DEFAULT_RADIUS;const i=toRadians(n[1]),r=toRadians(e[1]),s=(r-i)/2,o=toRadians(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function getAreaInternal(n,e){let t=0;const i=n.length;let r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){const a=n[o][0],d=n[o][1];t+=toRadians(a-r)*(2+Math.sin(toRadians(s))+Math.sin(toRadians(d))),r=a,s=d}return t*e*e/2}function getArea(n,e){e=e||{};const t=e.radius||DEFAULT_RADIUS,i=e.projection||"EPSG:3857",r=n.getType();r!=="GeometryCollection"&&(n=n.clone().transform(i,"EPSG:4326"));let s=0,o,a,d,y,v,_;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=n.getCoordinates(),s=Math.abs(getAreaInternal(o[0],t)),d=1,y=o.length;d<y;++d)s-=Math.abs(getAreaInternal(o[d],t));break}case"MultiPolygon":{for(o=n.getCoordinates(),d=0,y=o.length;d<y;++d)for(a=o[d],s+=Math.abs(getAreaInternal(a[0],t)),v=1,_=a.length;v<_;++v)s-=Math.abs(getAreaInternal(a[v],t));break}case"GeometryCollection":{const C=n.getGeometries();for(d=0,y=C.length;d<y;++d)s+=getArea(C[d],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function warn(...n){console.warn(...n)}let showCoordinateWarning=!0;function disableCoordinateWarning(n){showCoordinateWarning=!1}function cloneTransform(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function identityTransform(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function addProjection(n){add$3(n.getCode(),n),add$2(n,n,cloneTransform)}function addProjections(n){n.forEach(addProjection)}function get$3(n){return typeof n=="string"?get$5(n):n||null}function getPointResolution(n,e,t,i){n=get$3(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/METERS_PER_UNIT$1[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=getTransformFromProjections(n,get$3("EPSG:4326"));if(a===identityTransform&&o!=="degrees")r=e*n.getMetersPerUnit();else{let y=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];y=a(y,y,2);const v=getDistance(y.slice(0,2),y.slice(2,4)),_=getDistance(y.slice(4,6),y.slice(6,8));r=(v+_)/2}const d=i?METERS_PER_UNIT$1[i]:n.getMetersPerUnit();d!==void 0&&(r/=d)}}return r}function addEquivalentProjections(n){addProjections(n),n.forEach(function(e){n.forEach(function(t){e!==t&&add$2(e,t,cloneTransform)})})}function addEquivalentTransforms(n,e,t,i){n.forEach(function(r){e.forEach(function(s){add$2(r,s,t),add$2(s,r,i)})})}function createProjection(n,e){return n?typeof n=="string"?get$3(n):n:get$3(e)}function createTransformFromCoordinateTransform(n){return function(e,t,i){const r=e.length;i=i!==void 0?i:2,t=t!==void 0?t:new Array(r);for(let s=0;s<r;s+=i){const o=n(e.slice(s,s+i)),a=o.length;for(let d=0,y=i;d<y;++d)t[s+d]=d>=a?e[s+d]:o[d]}return t}}function addCoordinateTransforms(n,e,t,i){const r=get$3(n),s=get$3(e);add$2(r,s,createTransformFromCoordinateTransform(t)),add$2(s,r,createTransformFromCoordinateTransform(i))}function fromLonLat(n,e){return disableCoordinateWarning(),transform$1(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(n,e){const t=transform$1(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=modulo(i+180,360)-180),t}function equivalent(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||getTransformFromProjections(n,e)===cloneTransform)&&t}function getTransformFromProjections(n,e){const t=n.getCode(),i=e.getCode();let r=get$4(t,i);return r||(r=identityTransform),r}function getTransform(n,e){const t=get$3(n),i=get$3(e);return getTransformFromProjections(t,i)}function transform$1(n,e,t){return getTransform(e,t)(n,void 0,n.length)}function transformExtent(n,e,t,i){const r=getTransform(e,t);return applyTransform(n,r,void 0)}function toUserCoordinate(n,e){return n}function fromUserCoordinate(n,e){return showCoordinateWarning&&!equals(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function toUserExtent(n,e){return n}function fromUserExtent(n,e){return n}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();function createExtent(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const d=e?0:s[0]*r,y=e?0:s[1]*r,v=a?a[0]:0,_=a?a[1]:0;let C=n[0]+d/2+v,E=n[2]-d/2+v,S=n[1]+y/2+_,b=n[3]-y/2+_;C>E&&(C=(E+C)/2,E=C),S>b&&(S=(b+S)/2,b=S);let P=clamp(i[0],C,E),x=clamp(i[1],S,b);if(o&&t&&r){const T=30*r;P+=-T*Math.log(1+Math.max(0,C-i[0])/T)+T*Math.log(1+Math.max(0,i[0]-E)/T),x+=-T*Math.log(1+Math.max(0,S-i[1])/T)+T*Math.log(1+Math.max(0,i[1]-b)/T)}return[P,x]}}function none$1(n){return n}function getViewportClampedResolution(n,e,t,i){const r=getWidth(e)/t[0],s=getHeight(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function getSmoothClampedResolution(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),clamp(i,t/2,e*2)}function createSnapToResolutions(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const d=n[0],y=n[n.length-1],v=t?getViewportClampedResolution(d,t,o,i):d;if(a)return e?getSmoothClampedResolution(r,v,y):clamp(r,y,v);const _=Math.min(v,r),C=Math.floor(linearFindNearest(n,_,s));return n[C]>v&&C<n.length-1?n[C+1]:n[C]}}}function createSnapToPower(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,d,y){if(o!==void 0){const v=r?getViewportClampedResolution(e,r,d,s):e;if(y)return i?getSmoothClampedResolution(o,v,t):clamp(o,t,v);const _=1e-9,C=Math.ceil(Math.log(e/v)/Math.log(n)-_),E=-a*(.5-_)+.5,S=Math.min(v,o),b=Math.floor(Math.log(e/S)/Math.log(n)+E),P=Math.max(C,b),x=e/Math.pow(n,P);return clamp(x,t,v)}}}function createMinMaxResolution(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,d){if(s!==void 0){const y=i?getViewportClampedResolution(n,i,a,r):n;return!t||!d?clamp(s,e,y):getSmoothClampedResolution(s,y,e)}}}function disable(n){if(n!==void 0)return 0}function none(n){if(n!==void 0)return n}function createSnapToN(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(n){const e=toRadians(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}function easeIn(n){return Math.pow(n,3)}function easeOut(n){return 1-easeIn(1-n)}function inAndOut(n){return 3*n*n-2*n*n*n}function linear(n){return n}function transform2D(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const d=n[a],y=n[a+1];s[o++]=r[0]*d+r[2]*y+r[4],s[o++]=r[1]*d+r[3]*y+r[5]}return s&&s.length!=o&&(s.length=o),s}function rotate(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),d=Math.sin(r),y=s[0],v=s[1];let _=0;for(let C=e;C<t;C+=i){const E=n[C]-y,S=n[C+1]-v;o[_++]=y+E*a-S*d,o[_++]=v+E*d+S*a;for(let b=C+2;b<C+i;++b)o[_++]=n[b]}return o&&o.length!=_&&(o.length=_),o}function scale$1(n,e,t,i,r,s,o,a){a=a||[];const d=o[0],y=o[1];let v=0;for(let _=e;_<t;_+=i){const C=n[_]-d,E=n[_+1]-y;a[v++]=d+r*C,a[v++]=y+s*E;for(let S=_+2;S<_+i;++S)a[v++]=n[S]}return a&&a.length!=v&&(a.length=v),a}function translate(n,e,t,i,r,s,o){o=o||[];let a=0;for(let d=e;d<t;d+=i){o[a++]=n[d]+r,o[a++]=n[d+1]+s;for(let y=d+2;y<d+i;++y)o[a++]=n[y]}return o&&o.length!=a&&(o.length=a),o}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,i,r){return abstract()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,i){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const i=get$3(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const d=i.getExtent(),y=i.getWorldExtent(),v=getHeight(y)/getHeight(d);return compose(tmpTransform$1,y[0],y[3],v,-v,0,0,0),transform2D(s,0,s.length,a,tmpTransform$1,o),getTransform(i,t)(s,o,a)}:getTransform(i,t);return this.applyTransform(r),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,i){let r;if(e)r=getStrideForLayout(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=getLayoutForStride(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();rotate(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=getCenter(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();scale$1(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();translate(i,0,i.length,r,e,t,i),this.changed()}}}function getLayoutForStride(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function getStrideForLayout(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function transformGeom2D(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return transform2D(i,0,i.length,r,e,t)}function assignClosest(n,e,t,i,r,s,o){const a=n[e],d=n[e+1],y=n[t]-a,v=n[t+1]-d;let _;if(y===0&&v===0)_=e;else{const C=((r-a)*y+(s-d)*v)/(y*y+v*v);if(C>1)_=t;else if(C>0){for(let E=0;E<i;++E)o[E]=lerp(n[e+E],n[t+E],C);o.length=i;return}else _=e}for(let C=0;C<i;++C)o[C]=n[_+C];o.length=i}function maxSquaredDelta(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],d=n[e+1],y=squaredDistance$1(s,o,a,d);y>r&&(r=y),s=a,o=d}return r}function arrayMaxSquaredDelta(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=maxSquaredDelta(n,e,a,i,r),e=a}return r}function multiArrayMaxSquaredDelta(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=arrayMaxSquaredDelta(n,e,a,i,r),e=a[a.length-1]}return r}function assignClosestPoint(n,e,t,i,r,s,o,a,d,y,v){if(e==t)return y;let _,C;if(r===0){if(C=squaredDistance$1(o,a,n[e],n[e+1]),C<y){for(_=0;_<i;++_)d[_]=n[e+_];return d.length=i,C}return y}v=v||[NaN,NaN];let E=e+i;for(;E<t;)if(assignClosest(n,E-i,E,i,o,a,v),C=squaredDistance$1(o,a,v[0],v[1]),C<y){for(y=C,_=0;_<i;++_)d[_]=v[_];d.length=i,E+=i}else E+=i*Math.max((Math.sqrt(C)-Math.sqrt(y))/r|0,1);if(s&&(assignClosest(n,t-i,e,i,o,a,v),C=squaredDistance$1(o,a,v[0],v[1]),C<y)){for(y=C,_=0;_<i;++_)d[_]=v[_];d.length=i}return y}function assignClosestArrayPoint(n,e,t,i,r,s,o,a,d,y,v){v=v||[NaN,NaN];for(let _=0,C=t.length;_<C;++_){const E=t[_];y=assignClosestPoint(n,e,E,i,r,s,o,a,d,y,v),e=E}return y}function assignClosestMultiArrayPoint(n,e,t,i,r,s,o,a,d,y,v){v=v||[NaN,NaN];for(let _=0,C=t.length;_<C;++_){const E=t[_];y=assignClosestArrayPoint(n,e,E,i,r,s,o,a,d,y,v),e=E[E.length-1]}return y}function deflateCoordinate(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function deflateCoordinates(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function deflateCoordinatesArray(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const d=deflateCoordinates(n,e,t[o],i);r[s++]=d,e=d}return r.length=s,r}function deflateMultiCoordinatesArray(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const d=deflateCoordinatesArray(n,e,t[o],i,r[s]);d.length===0&&(d[0]=e),r[s++]=d,e=d[d.length-1]}return r.length=s,r}function douglasPeucker(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const d=new Array(a);d[0]=1,d[a-1]=1;const y=[e,t-i];let v=0;for(;y.length>0;){const _=y.pop(),C=y.pop();let E=0;const S=n[C],b=n[C+1],P=n[_],x=n[_+1];for(let T=C+i;T<_;T+=i){const R=n[T],L=n[T+1],k=squaredSegmentDistance(R,L,S,b,P,x);k>E&&(v=T,E=k)}E>r&&(d[(v-e)/i]=1,C+i<v&&y.push(C,v),v+i<_&&y.push(v,_))}for(let _=0;_<a;++_)d[_]&&(s[o++]=n[e+_*i],s[o++]=n[e+_*i+1]);return o}function douglasPeuckerArray(n,e,t,i,r,s,o,a){for(let d=0,y=t.length;d<y;++d){const v=t[d];o=douglasPeucker(n,e,v,i,r,s,o),a.push(o),e=v}return o}function snap(n,e){return e*Math.round(n/e)}function quantize(n,e,t,i,r,s,o){if(e==t)return o;let a=snap(n[e],r),d=snap(n[e+1],r);e+=i,s[o++]=a,s[o++]=d;let y,v;do if(y=snap(n[e],r),v=snap(n[e+1],r),e+=i,e==t)return s[o++]=y,s[o++]=v,o;while(y==a&&v==d);for(;e<t;){const _=snap(n[e],r),C=snap(n[e+1],r);if(e+=i,_==y&&C==v)continue;const E=y-a,S=v-d,b=_-a,P=C-d;if(E*P==S*b&&(E<0&&b<E||E==b||E>0&&b>E)&&(S<0&&P<S||S==P||S>0&&P>S)){y=_,v=C;continue}s[o++]=y,s[o++]=v,a=y,d=v,y=_,v=C}return s[o++]=y,s[o++]=v,o}function quantizeArray(n,e,t,i,r,s,o,a){for(let d=0,y=t.length;d<y;++d){const v=t[d];o=quantize(n,e,v,i,r,s,o),a.push(o),e=v}return o}function quantizeMultiArray(n,e,t,i,r,s,o,a){for(let d=0,y=t.length;d<y;++d){const v=t[d],_=[];o=quantizeArray(n,e,v,i,r,s,o,_),a.push(_),e=v[v.length-1]}return o}function inflateCoordinates(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function inflateCoordinatesArray(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const d=t[o];r[s++]=inflateCoordinates(n,e,d,i,r[s]),e=d}return r.length=s,r}function inflateMultiCoordinatesArray(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const d=t[o];r[s++]=d.length===1&&d[0]===e?[]:inflateCoordinatesArray(n,e,d,i,r[s]),e=d[d.length-1]}return r.length=s,r}function linearRing(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],d=n[e+1];r+=o*a-s*d,s=a,o=d}return r/2}function linearRings(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=linearRing(n,e,a,i),e=a}return r}function linearRingss$1(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=linearRings(n,e,a,i),e=a[a.length-1]}return r}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class kn extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new kn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=squaredDistance$1(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let d=0;d<a;++d)i[d]=s[d];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function linearRingContainsExtent(n,e,t,i,r){return!forEachCorner(r,function(o){return!linearRingContainsXY(n,e,t,i,o[0],o[1])})}function linearRingContainsXY(n,e,t,i,r,s){let o=0,a=n[t-i],d=n[t-i+1];for(;e<t;e+=i){const y=n[e],v=n[e+1];d<=s?v>s&&(y-a)*(s-d)-(r-a)*(v-d)>0&&o++:v<=s&&(y-a)*(s-d)-(r-a)*(v-d)<0&&o--,a=y,d=v}return o!==0}function linearRingsContainsXY(n,e,t,i,r,s){if(t.length===0||!linearRingContainsXY(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(linearRingContainsXY(n,t[o-1],t[o],i,r,s))return!1;return!0}function linearRingssContainsXY(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const d=t[o];if(linearRingsContainsXY(n,e,d,i,r,s))return!0;e=d[d.length-1]}return!1}function getInteriorPointOfArray(n,e,t,i,r,s,o){let a,d,y,v,_,C,E;const S=r[s+1],b=[];for(let T=0,R=t.length;T<R;++T){const L=t[T];for(v=n[L-i],C=n[L-i+1],a=e;a<L;a+=i)_=n[a],E=n[a+1],(S<=C&&E<=S||C<=S&&S<=E)&&(y=(S-C)/(E-C)*(_-v)+v,b.push(y)),v=_,C=E}let P=NaN,x=-1/0;for(b.sort(ascending),v=b[0],a=1,d=b.length;a<d;++a){_=b[a];const T=Math.abs(_-v);T>x&&(y=(v+_)/2,linearRingsContainsXY(n,e,t,i,y,S)&&(P=y,x=T)),v=_}return isNaN(P)&&(P=r[s]),o?(o.push(P,S,x),o):[P,S,x]}function getInteriorPointsOfMultiArray(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const d=t[o];s=getInteriorPointOfArray(n,e,d,i,r,2*o,s),e=d[d.length-1]}return s}function forEach(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function intersectsLineString(n,e,t,i,r){const s=extendFlatCoordinates(createEmpty(),n,e,t,i);return intersects$1(r,s)?containsExtent(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:forEach(n,e,t,i,function(o,a){return intersectsSegment(r,o,a)}):!1}function intersectsLineStringArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(intersectsLineString(n,e,t[s],i,r))return!0;e=t[s]}return!1}function intersectsLinearRing(n,e,t,i,r){return!!(intersectsLineString(n,e,t,i,r)||linearRingContainsXY(n,e,t,i,r[0],r[1])||linearRingContainsXY(n,e,t,i,r[0],r[3])||linearRingContainsXY(n,e,t,i,r[2],r[1])||linearRingContainsXY(n,e,t,i,r[2],r[3]))}function intersectsLinearRingArray(n,e,t,i,r){if(!intersectsLinearRing(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(linearRingContainsExtent(n,t[s-1],t[s],i,r)&&!intersectsLineString(n,t[s-1],t[s],i,r))return!1;return!0}function intersectsLinearRingMultiArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(intersectsLinearRingArray(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function coordinates(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function linearRingIsClockwise(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],d=n[e+1];r+=(a-s)*(d+o),s=a,o=d}return r===0?void 0:r>0}function linearRingsAreOriented(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],d=linearRingIsClockwise(n,e,a,i);if(s===0){if(r&&d||!r&&!d)return!1}else if(r&&!d||!r&&d)return!1;e=a}return!0}function linearRingssAreOriented(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!linearRingsAreOriented(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function orientLinearRings(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],d=linearRingIsClockwise(n,e,a,i);(s===0?r&&d||!r&&!d:r&&!d||!r&&d)&&coordinates(n,e,a,i),e=a}return e}function orientLinearRingsArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=orientLinearRings(n,e,t[s],i,r);return e}function inflateEnds(n,e){const t=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const d=e[o],y=linearRingIsClockwise(n,i,d,2);if(s===void 0&&(s=y),y===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,i=d}return t}class Polygon extends SimpleGeometry{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const d=i[o],y=new LinearRing(t.slice(s,d),e);r.push(y),s=d}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Polygon(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function fromExtent(n){if(isEmpty(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new Polygon(s,"XY",[s.length])}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ViewProperty)delete t[a];this.setProperties(t,!0);const i=createResolutionConstraint(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=createCenterConstraint(e),s=i.constraint,o=createRotationConstraint(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=fromUserCoordinate(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=fromUserCoordinate(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const v=arguments[r];v.center&&this.setCenterInternal(v.center),v.zoom!==void 0?this.setZoom(v.zoom):v.resolution&&this.setResolution(v.resolution),v.rotation!==void 0&&this.setRotation(v.rotation)}if(r===t){i&&animationCallback(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,d=this.targetRotation_;const y=[];for(;r<t;++r){const v=arguments[r],_={start:s,complete:!1,anchor:v.anchor,duration:v.duration!==void 0?v.duration:1e3,easing:v.easing||inAndOut,callback:i};if(v.center&&(_.sourceCenter=o,_.targetCenter=v.center.slice(),o=_.targetCenter),v.zoom!==void 0?(_.sourceResolution=a,_.targetResolution=this.getResolutionForZoom(v.zoom),a=_.targetResolution):v.resolution&&(_.sourceResolution=a,_.targetResolution=v.resolution,a=_.targetResolution),v.rotation!==void 0){_.sourceRotation=d;const C=modulo(v.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+C,d=_.targetRotation}isNoopAnimation(_)?_.complete=!0:s+=_.duration,y.push(_)}this.animations_.push(y),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&animationCallback(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const d=r[o];if(d.complete)continue;const y=e-d.start;let v=d.duration>0?y/d.duration:1;v>=1?(d.complete=!0,v=1):s=!1;const _=d.easing(v);if(d.sourceCenter){const C=d.sourceCenter[0],E=d.sourceCenter[1],S=d.targetCenter[0],b=d.targetCenter[1];this.nextCenter_=d.targetCenter;const P=C+_*(S-C),x=E+_*(b-E);this.targetCenter_=[P,x]}if(d.sourceResolution&&d.targetResolution){const C=_===1?d.targetResolution:d.sourceResolution+_*(d.targetResolution-d.sourceResolution);if(d.anchor){const E=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(C,0,E,!0);this.targetCenter_=this.calculateCenterZoom(S,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=C,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const C=_===1?modulo(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+_*(d.targetRotation-d.sourceRotation);if(d.anchor){const E=this.constraints_.rotation(C,!0);this.targetCenter_=this.calculateCenterRotate(E,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=C}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(s){this.animations_[i]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&animationCallback(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],rotate$1(i,e-this.getRotation()),add$1(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const i=this.getResolution();assert(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return assert(r!==void 0,"The view rotation is not defined"),getForViewAndSize(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=getWidth(e)/t[0],r=getHeight(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=calculateCenterOn(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=linearFindNearest(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=clamp(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,clamp(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const r=fromUserExtent(e,this.getProjection());i=fromExtent(r)}else if(e.getType()==="Circle"){const r=fromUserExtent(e.getExtent(),this.getProjection());i=fromExtent(r),i.rotate(this.getRotation(),getCenter(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,d=1/0,y=-1/0,v=-1/0;for(let _=0,C=s.length;_<C;_+=o){const E=s[_]*i-s[_+1]*r,S=s[_]*r+s[_+1]*i;a=Math.min(a,E),d=Math.min(d,S),y=Math.max(y,E),v=Math.max(v,S)}return[a,d,y,v]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);d=isNaN(d)?o:Math.max(d,o),d=this.getConstrainedResolution(d,s?0:1);const y=this.getRotation(),v=Math.sin(y),_=Math.cos(y),C=getCenter(a);C[0]+=(r[1]-r[3])/2*d,C[1]+=(r[0]-r[2])/2*d;const E=C[0]*_-C[1]*v,S=C[1]*_+C[0]*v,b=this.getConstrainedCenter([E,S],d),P=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:d,center:b,duration:t.duration,easing:t.easing},P):(this.targetResolution_=d,this.targetCenter_=b,this.applyTargetState_(!1,!0),animationCallback(P,!0))}centerOn(e,t,i){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(calculateCenterOn(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),d=calculateCenterOn(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-d[0],e[1]-d[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ViewProperty.ROTATION)!==r&&this.set(ViewProperty.ROTATION,r),this.get(ViewProperty.RESOLUTION)!==o&&(this.set(ViewProperty.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),a))&&this.set(ViewProperty.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),d=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=d,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!equals(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:d,resolution:a,duration:e,easing:easeOut,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,i){i=i&&fromUserCoordinate(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function animationCallback(n,e){setTimeout(function(){n(e)},0)}function createCenterConstraint(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return createExtent(n.extent,n.constrainOnlyCenter,t)}const e=createProjection(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none$1}function createResolutionConstraint(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:DEFAULT_MIN_ZOOM,a=n.maxZoom!==void 0?n.maxZoom:28;const d=n.zoomFactor!==void 0?n.zoomFactor:2,y=n.multiWorld!==void 0?n.multiWorld:!1,v=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,_=n.showFullExtent!==void 0?n.showFullExtent:!1,C=createProjection(n.projection,"EPSG:3857"),E=C.getExtent();let S=n.constrainOnlyCenter,b=n.extent;if(!y&&!b&&C.isGlobal()&&(S=!1,b=E),n.resolutions!==void 0){const P=n.resolutions;t=P[o],i=P[a]!==void 0?P[a]:P[P.length-1],n.constrainResolution?e=createSnapToResolutions(P,v,!S&&b,_):e=createMinMaxResolution(t,i,v,!S&&b,_)}else{const x=(E?Math.max(getWidth(E),getHeight(E)):360*METERS_PER_UNIT$1.degrees/C.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),T=x/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=n.maxResolution,t!==void 0?o=0:t=x/Math.pow(d,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(d,a):i=x/Math.pow(d,a):i=T),a=o+Math.floor(Math.log(t/i)/Math.log(d)),i=t/Math.pow(d,a-o),n.constrainResolution?e=createSnapToPower(d,t,i,v,!S&&b,_):e=createMinMaxResolution(t,i,v,!S&&b,_)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:d}}function createRotationConstraint(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none:typeof t=="number"?createSnapToN(t):none}return disable}function isNoopAnimation(n){return!(n.sourceCenter&&n.targetCenter&&!equals(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function calculateCenterOn(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,d=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,d+=(t[1]-e[1]/2)*i,o=-o;const y=a*s-d*o,v=d*s+a*o;return[y,v]}let Layer$1=class extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType$1.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return inView(r,t.viewState)&&(!s||intersects$1(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const r=e instanceof View?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,EventType.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);assert(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=listen(this,EventType$1.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function inView(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;compose(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,d){let y;const v=t.viewState;function _(L,k,N,D){return s.call(o,k,L?N:null,D)}const C=v.projection,E=wrapX$1(e.slice(),C),S=[[0,0]];if(C.canWrapX()&&r){const L=C.getExtent(),k=getWidth(L);S.push([-k,0],[k,0])}const b=t.layerStatesArray,P=b.length,x=[],T=[];for(let L=0;L<S.length;L++)for(let k=P-1;k>=0;--k){const N=b[k],D=N.layer;if(D.hasRenderer()&&inView(N,v)&&a.call(d,D)){const G=D.getRenderer(),U=D.getSource();if(G&&U){const F=U.getWrapX()?E:e,B=_.bind(null,N.managed);T[0]=F[0]+S[L][0],T[1]=F[1]+S[L][1],y=G.forEachFeatureAtCoordinate(T,t,i,B,x)}if(y)return y}}if(x.length===0)return;const R=1/x.length;return x.forEach((L,k)=>L.distanceSq+=k*R),x.sort((L,k)=>L.distanceSq-k.distanceSq),x.some(L=>y=L.callback(L.feature,L.layer,L.geometry)),y}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,TRUE,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(n,e){shared.expire()}class RenderEvent extends BaseEvent{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(n){const e=n.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=fontRegExMatchIndex.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[fontRegExMatchIndex[i]]=s)}return t.families=t.family.split(/,\s?/),t};function createCanvasContext2D(n,e,t,i){let r;return t&&t.length?r=t.shift():WORKER_OFFSCREEN_CANVAS?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function releaseCanvas(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function outerWidth(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function removeNode(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function removeChildren(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function replaceChildren(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(y,v,_){let C=!0;for(let E=0;E<i;++E){const S=t[E];if(o=measureTextWidth(y+" "+v+" "+e+S,r),_!=S){const b=measureTextWidth(y+" "+v+" "+e+_+","+S,r);C=C&&b!=o}}return!!C}function d(){let y=!0;const v=checkedFonts.getKeys();for(let _=0,C=v.length;_<C;++_){const E=v[_];checkedFonts.get(E)<100&&(a.apply(this,E.split(`
`))?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(E,100)):(checkedFonts.set(E,checkedFonts.get(E)+1,!0),y=!1))}y&&(clearInterval(s),s=void 0)}return function(y){const v=getFontParameters(y);if(!v)return;const _=v.families;for(let C=0,E=_.length;C<E;++C){const S=_[C],b=v.style+`
`+v.weight+`
`+S;checkedFonts.get(b)===void 0&&(checkedFonts.set(b,100,!0),a(v.style,v.weight,S)||(checkedFonts.set(b,0,!0),s===void 0&&(s=setInterval(d,32))))}}}(),measureTextHeight=function(){let n;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const i=getFontParameters(e),r=measureText$1(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);textHeights[e]=t}return t}}();function measureText$1(n,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),n!=measureFont&&(measureContext$1.font=n,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(n,e){return measureText$1(n,e).width}function measureAndCacheTextWidth(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,measureTextWidth(n,s)),0);return t[e]=i,i}function getTextDimensions(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,d=0;for(let y=0,v=e.length;y<=v;y+=2){const _=e[y];if(_===`
`||y===v){s=Math.max(s,o),r.push(o),o=0,a+=d;continue}const C=e[y+1]||n.font,E=measureTextWidth(C,_);t.push(E),o+=E;const S=measureTextHeight(C);i.push(S),d=Math.max(d,S)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function drawImageOrLabel(n,e,t,i,r,s,o,a,d,y,v){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(d,y),n.scale(v[0],v[1]),executeLabelInstructions(i,n)):v[0]<0||v[1]<0?(n.translate(d,y),n.scale(v[0],v[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,d,y,o*v[0],a*v[1]),n.restore()}function executeLabelInstructions(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new RenderEvent(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(EventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=t.length;o<a;++o){const d=t[o];e.layerIndex=o;const y=d.layer,v=y.getSourceState();if(!inView(d,i)||v!="ready"&&v!="undefined"){y.unrender();continue}const _=y.render(e,s);_&&(_!==s&&(this.children_.push(_),s=_),"getDeclutter"in y&&r.push(y))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(EventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let i=t.length-1;i>=0;--i)t[i].renderDeclutter(e);t.length=0}}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property$2={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property$2.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Collection(i.slice(),{unique:!0}):assert(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Collection(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new GroupEvent("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType$1.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=getUid(t);this.listenerKeys_[i].forEach(unlistenByKey),delete this.listenerKeys_[i],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property$2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new GroupEvent("removelayer",i[r]))}this.set(Property$2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const d=t[o];d.opacity*=r.opacity,d.visible=d.visible&&r.visible,d.maxResolution=Math.min(d.maxResolution,r.maxResolution),d.minResolution=Math.max(d.minResolution,r.minResolution),d.minZoom=Math.max(d.minZoom,r.minZoom),d.maxZoom=Math.min(d.maxZoom,r.maxZoom),r.extent!==void 0&&(d.extent!==void 0?d.extent=getIntersection(d.extent,r.extent):d.extent=r.extent),d.zIndex===void 0&&(d.zIndex=s)}return t}getSourceState(){return"ready"}}class MapEvent extends BaseEvent{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType$1.CLICK,DBLCLICK:EventType$1.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=listen(i,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(i,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType$1.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(i,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(i,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType$1.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const d=this.getLeftChildIndex_(e),y=this.getRightChildIndex_(e),v=y<r&&i[y]<i[d]?y:d;t[e]=t[v],i[e]=i[v],e=v}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,d;for(a=0;a<s;++a)o=t[a],d=e(o),d==DROP?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=d,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class TileQueue extends PriorityQueue{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType$1.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===TileState.LOADED||i===TileState.ERROR||i===TileState.EMPTY){i!==TileState.ERROR&&t.removeEventListener(EventType$1.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===TileState.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}function getTilePriority(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return DROP;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)unlistenByKey(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this),!1);const y=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),v=this.element;v.className=y,v.appendChild(this.toggleButton_),v.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,d=this.element;d.className=a,d.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(CLASS_HIDDEN);!s&&i===0?this.element.classList.add(CLASS_HIDDEN):s&&i!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=r}this.rotation_=i}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",y=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=r,v.setAttribute("type","button"),v.title=d,v.appendChild(typeof o=="string"?document.createTextNode(o):o),v.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=s,_.setAttribute("type","button"),_.title=y,_.appendChild(typeof a=="string"?document.createTextNode(a):a),_.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this,-i),!1);const C=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,E=this.element;E.className=C,E.appendChild(v),E.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:easeOut})):i.setZoom(s)}}}function defaults$2(n){n=n||{};const e=new Collection;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Zoom(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Rotate(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Attribution(n.attributionOptions)),e}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:linear,center:n.getConstrainedCenter(r)})}}function zoomByDelta(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();zoomByDelta(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}function all$1(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const altKeyOnly=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},focusWithTabindex=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?focus(n):!0},always$1=TRUE,mouseActionButton=function(n){const e=n.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(n){return n.type=="pointermove"},singleClick=function(n){return n.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(n){const e=n.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(n){const e=n.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(n){const e=n.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all$1(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all$1(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(centroid(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();scale$2(s,a.getResolution()),rotate$1(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),d=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===disable)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Polygon([r])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:easeOut})}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType$1.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Key.DOWN||r==Key.LEFT||r==Key.RIGHT||r==Key.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let d=0,y=0;r==Key.DOWN?y=-a:r==Key.LEFT?d=-a:r==Key.RIGHT?d=a:y=a;const v=[d,y];rotate$1(v,o.getRotation()),pan(o,v,this.duration_),i.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType$1.KEYDOWN||e.type==EventType$1.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();zoomByDelta(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class Kinetic{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all$1(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType$1.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==EventType$1.WHEEL&&(s=r.deltaY,FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const d=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),zoomByDelta(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const d=s-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==disable&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const d=e.map,y=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(centroid(this.targetPointers))),d.render(),y.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function defaults$1(n){n=n||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new DragRotate),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new DragPan({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new PinchRotate),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new PinchZoom({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new DragZoom({duration:n.zoomDuration})),e}function hasArea(n){return n[0]>0&&n[1]>0}function scale(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function toSize(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function removeLayerMapProperty(n){if(n instanceof Layer$1){n.setMapInternal(null);return}n instanceof LayerGroup&&n.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(n,e){if(n instanceof Layer$1){n.setMapInternal(e);return}if(n instanceof LayerGroup){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)setLayerMapProperty(t[i],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$2(),this.interactions=t.interactions||defaults$1({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof View)&&e.view.then(function(r){i.setView(new View(r))}),this.controls.addEventListener(CollectionEventType.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:TRUE,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof LayerGroup?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:TRUE,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return getTilePriority(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===PointerEventType.POINTERDOWN||i===EventType$1.WHEEL||i===EventType$1.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[ViewHint.ANIMATING]||o[ViewHint.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(EventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(EventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)unlistenByKey(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType$1.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType$1.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const s in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType$1.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType$1.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[listen(i,EventType$1.KEYDOWN,this.handleBrowserEvent,this),listen(i,EventType$1.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType$1.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType$1.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&hasArea(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:getUid(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const d=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=getForViewAndSize(a.nextCenter,a.nextResolution,d,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,r)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ViewHint.ANIMATING]&&!s.viewHints[ViewHint.INTERACTING]&&!equals$1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,s)),clone$1(s.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(EventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(i){t.setView(new View(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!equals$2(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new LayerGroup({layers:n.layers});t[MapProperty.LAYERGROUP]=i,t[MapProperty.TARGET]=n.target,t[MapProperty.VIEW]=n.view instanceof View?n.view:new View;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Collection(n.controls.slice()):(assert(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Collection(n.interactions.slice()):(assert(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Collection(n.overlays.slice()):(assert(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Collection,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const id="map",_sfc_main$u={__name:"Map",setup(n,{expose:e}){const t=ref(0);e({mapRef:t});const i=new Map$1({target:id,controls:[]});onMounted(()=>{i.setTarget(t.value);const s=document.getElementById(id).getElementsByTagName("canvas");s.length&&(s[0].tabIndex=0)});const r=()=>{document.activeElement.tagName!=="INPUT"&&t.value.focus()};return provide("map",i),(s,o)=>(openBlock(),createElementBlock("div",{id,ref_key:"mapRef",ref:t,tabindex:"0",onMouseover:r},[renderSlot(s.$slots,"default")],544))}},useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!1,analytic:!1},SearchEngine:{id:"SearchEngine",active:!0,disable:!1,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!1,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!1,analytic:!1},Legends:{id:"Legends",active:!0,disable:!1,analytic:!1},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!1,disable:!1,analytic:!1},Zoom:{id:"Zoom",active:!0,disable:!1,analytic:!1},Attributions:{id:"Attributions",active:!1,disable:!0,analytic:!1},Rotate:{id:"Rotate",active:!1,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!1},FullScreen:{id:"FullScreen",active:!0,disable:!1,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!1},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!1},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!1}};function getDefaultControls(){var n=[];for(var e in useControls)useControls[e].active===!0&&n.push(useControls[e].id);return n}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Attributions",id:"attributions",name:useControls.Attributions.id,hint:"Attributions",disabled:useControls.Attributions.disable},{label:"Rotation de la carte",id:"rotate",name:useControls.Rotate.id,hint:"Rotation de la carte",disabled:useControls.Rotate.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable}].filter(n=>Object.keys(useControls).includes(n.name))}var defaultControls=getDefaultControls().toString();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS",CONTROLS:defaultControls,X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=n=>NAMESPACE+"."+n,useMapStore=defineStore("map",()=>{const n=ref({});var e=useStorage(ns("zoom"),DEFAULT.ZOOM),t=useStorage(ns("x"),DEFAULT.X),i=useStorage(ns("y"),DEFAULT.Y),r=useStorage(ns("lon"),DEFAULT.LON),s=useStorage(ns("lat"),DEFAULT.LAT),o=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),a=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),d=computed(()=>{}),y=computed(()=>[t.value,i.value]),v=useStorage(ns("layers"),DEFAULT.LAYERS);if(!v.value){var _=DEFAULT.LAYERS.split(",").filter(function(G){return!!G});for(let G=0;G<_.length;G++)T(_[G])}var C=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!C.value){var E=DEFAULT.CONTROLS.split(",").filter(function(G){return!!G});for(let G=0;G<E.length;G++)N(E[G])}watch(e,()=>{localStorage.setItem(ns("zoom"),e.value)}),watch(t,()=>{localStorage.setItem(ns("x"),t.value)}),watch(i,()=>{localStorage.setItem(ns("y"),i.value)}),watch(r,()=>{localStorage.setItem(ns("lon"),r.value)}),watch(s,()=>{localStorage.setItem(ns("lat"),s.value)}),watch(v,()=>{localStorage.setItem(ns("layers"),v.value.toString())}),watch(d,()=>{localStorage.setItem(ns("permalink"),d.value.toString())}),watch(y,()=>{localStorage.setItem(ns("center"),y.value.toString())}),watch(o,()=>{localStorage.setItem(ns("firstVisit"),o.value)}),watch(a,()=>{localStorage.setItem(ns("noInformation"),a.value)}),watch(C,()=>{localStorage.setItem(ns("controls"),C.value.toString())});function S(){return n.value}function b(G){n.value=G}function P(){return v.value.split(",").filter(function(G){return!!G})}function x(){v.value=""}function T(G){if(!P().includes(G)){var U=P();U.push(G),v.value=U.toString()}}function R(G){const U=P().indexOf(G);if(U!==-1){var F=P();F.splice(U,1),v.value=F.toString()}}function L(){return C.value.split(",").filter(function(G){return!!G})}function k(){C.value=""}function N(G){if(!L().includes(G)){var U=L();U.push(G),C.value=U.toString()}}function D(G){const U=L().indexOf(G);if(U!==-1){var F=L();F.splice(U,1),C.value=F.toString()}}return{map:n,zoom:e,center:y,x:t,y:i,lon:r,lat:s,firstVisit:o,noInformation:a,getMap:S,setMap:b,getLayers:P,cleanLayers:x,addLayer:T,removeLayer:R,getControls:L,cleanControls:k,addControl:N,removeControl:D}}),_sfc_main$t={__name:"View",props:{zoom:Number,center:Array},setup(n){const e=useMapStore(),t=n,i=inject("map"),r=new View({zoom:t.zoom,center:t.center});return r.on("change:center",s=>{e.x=s.target.getCenter()[0],e.y=s.target.getCenter()[1];var o=toLonLat(s.target.getCenter());e.lon=o[0],e.lat=o[1]}),r.on("change:resolution",s=>{e.zoom=r.getZoom()}),onMounted(()=>{i&&(i.setView(r),e.setMap(i))}),(s,o)=>null}},name$1="geopf-extensions-openlayers",description$1="French Geoportal Extensions for OpenLayers libraries",version$2="1.0.0-beta.0-148",date$1="20/08/2024",module$1="src/index.js",directories={},engines={node:">=20"},repository$1={type:"git",url:"https://github.com/IGNF/geopf-extensions-openlayers.git"},author$1="IGNF",keywords$1=["geoportail","geoplateforme","javascript","OpenLayers 8"],license$1="AGPL-3.0",bugs={url:"https://github.com/IGNF/geopf-extensions-openlayers/issues"},homepage$1="https://github.com/IGNF/geopf-extensions-openlayers#readme",dependencies$1={"@gouvfr/dsfr":"^1.11.0","@mapbox/mapbox-gl-style-spec":"14.5.2",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.2",loglevel:"^1.9.1",ol:"8.2.0","ol-mapbox-style":"12.3.4",proj4:"2.11.0",sortablejs:"1.15.2",typescript:"^5.3.3","whatwg-fetch":"3.6.20","@xmldom/xmldom":"^0.8.10"},Pkg$1={name:name$1,description:description$1,version:version$2,date:date$1,module:module$1,directories,engines,repository:repository$1,author:author$1,keywords:keywords$1,license:license$1,bugs,homepage:homepage$1,dependencies:dependencies$1},Property$1={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$1.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$1.MAP,this.handleMapChanged),this.addChangeListener(Property$1.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$1.POSITION,this.handlePositionChanged),this.addChangeListener(Property$1.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$1.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$1.MAP)||null}getOffset(){return this.get(Property$1.OFFSET)}getPosition(){return this.get(Property$1.POSITION)}getPositioning(){return this.get(Property$1.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$1.ELEMENT,e)}setMap(e){this.set(Property$1.MAP,e)}setOffset(e){this.set(Property$1.OFFSET,e)}setPosition(e){this.set(Property$1.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$1.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[outerWidth(r),outerHeight(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!containsExtent(i,s)){const a=s[0]-i[0],d=i[2]-s[2],y=s[1]-i[1],v=i[3]-s[3],_=[0,0];if(a<0?_[0]=a-o:d<0&&(_[0]=Math.abs(d)+o),y<0?_[1]=y-o:v<0&&(_[1]=Math.abs(v)+o),_[0]!==0||_[1]!==0){const C=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(C);if(!E)return;const S=[E[0]+_[0],E[1]+_[1]],b=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(S),duration:b.duration,easing:b.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(Property$1.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let d="0%",y="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?d="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(d="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?y="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(y="-50%");const v=`translate(${d}, ${y}) translate(${o}, ${a})`;this.rendered.transform_!=v&&(this.rendered.transform_=v,i.transform=v)}getOptions(){return this.options}}class Tile extends Target{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(EventType$1.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?t=e:e.getState()==TileState.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:easeIn(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}let VectorTile$1=class extends Tile{constructor(e,t,i,r,s,o){super(e,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return assert(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate$1(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function getKeyZXY(n,e,t){return n+"/"+e+"/"+t}function getKey(n){return getKeyZXY(n[0],n[1],n[2])}function getCacheKeyForTileKey(n){const[e,t,i]=n.substring(n.lastIndexOf("/")+1,n.length).split(",").map(Number);return getKeyZXY(e,t,i)}function fromKey(n){return n.split("/").map(Number)}function hash(n){return(n[1]<<n[0])+n[2]}function withinExtentAndZ(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=fromKey(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(getKey(r.tileCoord)),r.release())})}}class TileRange{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new TileRange(n,e,t,i)}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(i)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new TileRange(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,d=r.maxY;a<=d;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,d=null,y=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):d=this.getTileCoordExtent(e,r);y>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=createOrUpdate(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(d,y,i),t(y,s))return!0;--y}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return createOrUpdate(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return createOrUpdate(s,o,s,o,i);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-r),y=Math.floor(s*d),v=Math.floor(o*d);if(t<r)return createOrUpdate(y,y,v,v,i);const _=Math.floor(d*(s+1))-1,C=Math.floor(d*(o+1))-1;return createOrUpdate(y,_,v,C,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const r=tmpTileCoord[1],s=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const o=tmpTileCoord[1],a=tmpTileCoord[2];return createOrUpdate(r,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=toSize(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,d=o+s[0]*r,y=a+s[1]*r;return createOrUpdate$2(o,a,d,y,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),d=this.getOrigin(o),y=toSize(this.getTileSize(o),this.tmpSize_);let v=a*(e-d[0])/i/y[0],_=a*(d[1]-t)/i/y[1];return r?(v=ceil(v,DECIMALS$1)-1,_=ceil(_,DECIMALS$1)-1):(v=floor(v,DECIMALS$1),_=floor(_,DECIMALS$1)),createOrUpdate$1(o,v,_,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),d=toSize(this.getTileSize(i),this.tmpSize_);let y=(e-o[0])/a/d[0],v=(o[1]-t)/a/d[1];return r?(y=ceil(y,DECIMALS$1)-1,v=ceil(v,DECIMALS$1)-1):(y=floor(y,DECIMALS$1),v=floor(v,DECIMALS$1)),createOrUpdate$1(i,y,v,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=linearFindNearest(this.resolutions_,e,t||0);return clamp(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(n){let e=n.getDefaultTileGrid();return e||(e=createForProjection(n),n.setDefaultTileGrid(e)),e}function wrapX(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=extentFromProjection(t);if(!containsCoordinate(s,r)){const o=getWidth(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function createForExtent(n,e,t,i){i=i!==void 0?i:"top-left";const r=resolutionsFromExtent(n,e,t);return new TileGrid({extent:n,origin:getCorner(n,i),resolutions:r,tileSize:t})}function createXYZ(n){const e=n||{},t=e.extent||get$3("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(i)}function resolutionsFromExtent(n,e,t,i){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const r=getHeight(n),s=getWidth(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let d=0;d<o;++d)a[d]=i/Math.pow(2,d);return a}function createForProjection(n,e,t,i){const r=extentFromProjection(n);return createForExtent(r,e,t,i)}function extentFromProjection(n){n=get$3(n);let e=n.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/n.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,d,y;for(let v=i.minX;v<=i.maxX;++v)for(let _=i.minY;_<=i.maxY;++_)d=getKeyZXY(t,v,_),y=!1,s.containsKey(d)&&(a=s.get(d),y=a.getState()===TileState.LOADED,y&&(y=r(a)!==!1)),y||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const t=this.getProjection();return assert(t===null||equivalent(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=toSize(r.getTileSize(e),this.tmpSize);return s==1?o:scale(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=wrapX(i,e,t)),withinExtentAndZ(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}function createFromTemplate(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,d){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const y=o[0],v=e.getFullTileRange(y);if(!v)throw new Error("The {-y} placeholder requires a tile grid with extent");return(v.getHeight()-o[2]-1).toString()})}}function createFromTemplates(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=createFromTemplate(n[r],e);return createFromTileUrlFunctions(i)}function createFromTileUrlFunctions(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=hash(e),s=modulo(r,n.length);return n[s](e,t,i)}}function expandUrl(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=getUid(t),r=t.getState();let s;r==TileState.LOADING?(this.tileLoadingKeys_[i]=!0,s=TileEventType.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==TileState.ERROR?TileEventType.TILELOADERROR:r==TileState.LOADED?TileEventType.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new TileSourceEvent(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=getKeyZXY(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,t,i,r){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(e){const t=getUid(e);return t in this.context_||(this.context_[t]=createCanvasContext2D(1,1,canvasPool$2)),this.context_[t]}hasContext(e){return getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];releaseCanvas(t),canvasPool$2.push(t.canvas),delete this.context_[e]}super.release()}}let withCredentials=!1;function loadFeaturesXhr(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=withCredentials,a.onload=function(d){if(!a.status||a.status>=200&&a.status<300){const y=e.getType();let v;y=="json"?v=JSON.parse(a.responseText):y=="text"?v=a.responseText:y=="xml"?(v=a.responseXML,v||(v=new DOMParser().parseFromString(a.responseText,"application/xml"))):y=="arraybuffer"&&(v=a.response),v?s(e.readFeatures(v,{extent:t,featureProjection:r}),e.readProjection(v)):o()}else o()},a.onerror=o,a.send()}function xhr(n,e){return function(t,i,r,s,o){const a=this;loadFeaturesXhr(n,e,t,i,r,function(d,y){a.addFeatures(d),s!==void 0&&s(d)},o||VOID)}}class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||extentFromProjection(t),r=e.tileGrid||createXYZ({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],i=this.tileCache;if(i.getCount()===0)return t;const r=fromKey(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==TileState.LOADED)return;const a=o.getSourceTiles();for(let d=0,y=a.length;d<y;++d){const v=a[d],_=v.tileCoord;if(intersects$1(e,s.getTileCoordExtent(_))){const C=v.getFeatures();if(C)for(let E=0,S=C.length;E<S;++E){const b=C[E],P=b.getGeometry();intersects$1(e,P.getExtent())&&t.push(b)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const i=this.getTileCacheForProjection(e),r=Object.keys(t).reduce((s,o)=>{const a=getCacheKeyForTileKey(o),d=i.peek(a);if(d){const y=d.sourceTiles;for(let v=0,_=y.length;v<_;++v)s[y[v].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(r)}getSourceTiles(e,t,i){if(i.getState()===TileState.IDLE){i.setState(TileState.LOADING);const r=i.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(r),a=r[0],d=s.getResolution(a);buffer(o,-d,o);const y=this.tileGrid,v=y.getExtent();v&&getIntersection(o,v,o);const _=y.getZForResolution(d,this.zDirection);y.forEachTileCoord(o,_,C=>{const E=this.tileUrlFunction(C,e,t),S=this.sourceTileCache.containsKey(E)?this.sourceTileCache.get(E):new this.tileClass(C,E?TileState.IDLE:TileState.EMPTY,E,this.format_,this.tileLoadFunction);i.sourceTiles.push(S);const b=S.getState();if(b<TileState.LOADED){const P=x=>{this.handleTileChange(x);const T=S.getState();if(T===TileState.LOADED||T===TileState.ERROR){const R=S.getKey();R in i.errorTileKeys?S.getState()===TileState.LOADED&&delete i.errorTileKeys[R]:i.loadingSourceTiles--,T===TileState.ERROR?i.errorTileKeys[R]=!0:S.removeEventListener(EventType$1.CHANGE,P),i.loadingSourceTiles===0&&i.setState(isEmpty$1(i.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};S.addEventListener(EventType$1.CHANGE,P),i.loadingSourceTiles++}b===TileState.IDLE&&(S.extent=y.getTileCoordExtent(C),S.projection=t,S.resolution=y.getResolution(C[0]),this.sourceTileCache.set(E,S),S.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(C=>C.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return i.sourceTiles}getTile(e,t,i,r,s){const o=getKeyZXY(e,t,i),a=this.getKey();let d;if(this.tileCache.containsKey(o)&&(d=this.tileCache.get(o),d.key===a))return d;const y=[e,t,i];let v=this.getTileCoordForTileUrlFunction(y,s);const _=this.getTileGrid().getExtent(),C=this.getTileGridForProjection(s);if(v&&_){const b=C.getTileCoordExtent(v);buffer(b,-C.getResolution(e),b),intersects$1(_,b)||(v=null)}let E=!0;if(v!==null){const b=this.tileGrid,P=C.getResolution(e),x=b.getZForResolution(P,1),T=C.getTileCoordExtent(v);buffer(T,-P,T),b.forEachTileCoord(T,x,R=>{E=E&&!this.tileUrlFunction(R,r,s)})}const S=new VectorRenderTile(y,E?TileState.EMPTY:TileState.IDLE,v,this.getSourceTiles.bind(this,r,s));return S.key=a,d?(S.interimTile=d,S.refreshInterimChain(),this.tileCache.replace(o,S)):this.tileCache.set(o,S),S}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(y,v){return r.getOrigin(v)}),a=s.map(function(y,v){return r.getTileSize(v)}),d=DEFAULT_MAX_ZOOM+1;for(let y=s.length;y<d;++y)s.push(s[y-1]/2),o.push(o[y-1]),a.push(a[y-1]);i=new TileGrid({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=toSize(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function defaultLoadFunction(n,e){n.setLoader(function(t,i,r){loadFeaturesXhr(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function quickselect(n,e,t,i,r){quickselectStep(n,e,t||0,i||n.length-1,r||defaultCompare)}function quickselectStep(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),d=.5*Math.exp(2*a/3),y=.5*Math.sqrt(a*d*(s-d)/s)*(o-s/2<0?-1:1),v=Math.max(t,Math.floor(e-o*d/s+y)),_=Math.min(i,Math.floor(e+(s-o)*d/s+y));quickselectStep(n,e,v,_,r)}var C=n[e],E=t,S=i;for(swap(n,t,e),r(n[i],C)>0&&swap(n,t,i);E<S;){for(swap(n,E,S),E++,S--;r(n[E],C)<0;)E++;for(;r(n[S],C)>0;)S--}r(n[t],C)===0?swap(n,t,S):(S++,swap(n,S,i)),S<=e&&(t=S+1),e<=S&&(i=S-1)}}function swap(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function defaultCompare(n,e){return n<e?-1:n>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!intersects(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],d=t.leaf?r(a):a;intersects(e,d)&&(t.leaf?i.push(a):contains(e,d)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!intersects(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(intersects(e,o)){if(t.leaf||contains(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,d,y;for(;i||s.length;){if(i||(i=s.pop(),d=s[s.length-1],a=o.pop(),y=!0),i.leaf){const v=findItem(e,i.children,t);if(v!==-1)return i.children.splice(v,1),s.push(i),this._condense(s),this}!y&&!i.leaf&&contains(i,r)?(s.push(i),o.push(a),a=0,d=i,i=i.children[0]):d?(a++,i=d.children[a],y=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=createNode(e.slice(t,i+1)),calcBBox(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=createNode([]),a.leaf=!1,a.height=r;const d=Math.ceil(s/o),y=d*Math.ceil(Math.sqrt(o));multiSelect(e,t,i,y,this.compareMinX);for(let v=t;v<=i;v+=y){const _=Math.min(v+y-1,i);multiSelect(e,v,_,d,this.compareMinY);for(let C=v;C<=_;C+=d){const E=Math.min(C+d-1,_);a.children.push(this._build(e,C,E,r-1))}}return calcBBox(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let d=0;d<t.children.length;d++){const y=t.children[d],v=bboxArea(y),_=enlargedArea(e,y)-v;_<o?(o=_,s=v<s?v:s,a=y):_===o&&v<s&&(s=v,a=y)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),extend$2(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=createNode(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,calcBBox(i,this.toBBox),calcBBox(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const d=distBBox(e,0,a,this.toBBox),y=distBBox(e,a,i,this.toBBox),v=intersectionArea(d,y),_=bboxArea(d)+bboxArea(y);v<s?(s=v,r=a,o=_<o?_:o):v===s&&_<o&&(o=_,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:compareNodeMinX,s=e.leaf?this.compareMinY:compareNodeMinY,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=distBBox(e,0,t,s),a=distBBox(e,i-t,i,s);let d=bboxMargin(o)+bboxMargin(a);for(let y=t;y<i-t;y++){const v=e.children[y];extend$2(o,e.leaf?s(v):v),d+=bboxMargin(o)}for(let y=i-t-1;y>=t;y--){const v=e.children[y];extend$2(a,e.leaf?s(v):v),d+=bboxMargin(a)}return d}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)extend$2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function calcBBox(n,e){distBBox(n,0,n.children.length,e,n)}function distBBox(n,e,t,i,r){r||(r=createNode(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];extend$2(r,n.leaf?i(o):o)}return r}function extend$2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function compareNodeMinX(n,e){return n.minX-e.minX}function compareNodeMinY(n,e){return n.minY-e.minY}function bboxArea(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function bboxMargin(n){return n.maxX-n.minX+(n.maxY-n.minY)}function enlargedArea(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function intersectionArea(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function contains(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function intersects(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function createNode(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;quickselect(n,o,e,t,r),s.push(e,o,o,t)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[getUid(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],d={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=d,this.items_[getUid(a)]=d}this.rbush_.load(i)}remove(e){const t=getUid(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[getUid(t)],r=[i.minX,i.minY,i.maxX,i.maxY];equals$1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType$1.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(assert(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}class Circle extends SimpleGeometry{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],d=o*o+a*a;if(d<r){if(d===0)for(let y=0;y<this.stride;++y)i[y]=s[y];else{const y=this.getRadius()/Math.sqrt(d);i[0]=s[0]+y*o,i[1]=s[1]+y*a;for(let v=2;v<this.stride;++v)i[v]=s[v]}return i.length=this.stride,d}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return createOrUpdate$2(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=deflateCoordinate(r,0,e,this.stride);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(rotate(i,0,i.length,r,e,t,i)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType$1.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<closestSquaredDistanceXY(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)extend$3(e,t[i].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],d=a.getSimplifiedGeometry(e);t.push(d),d!==a&&(r=!0)}if(r){const s=new GeometryCollection(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=getCenter(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}function interpolatePoint(n,e,t,i,r,s,o){let a,d;const y=(t-e)/i;if(y===1)a=e;else if(y===2)a=e,d=r;else if(y!==0){let v=n[e],_=n[e+1],C=0;const E=[0];for(let P=e+i;P<t;P+=i){const x=n[P],T=n[P+1];C+=Math.sqrt((x-v)*(x-v)+(T-_)*(T-_)),E.push(C),v=x,_=T}const S=r*C,b=binarySearch$1(E,S);b<0?(d=(S-E[-b-2])/(E[-b-1]-E[-b-2]),a=e+(-b-2)*i):a=e+b*i}o=o>1?o:2,s=s||new Array(o);for(let v=0;v<o;++v)s[v]=a===void 0?NaN:d===void 0?n[a+v]:lerp(n[a+v],n[a+i+v],d);return s}function lineStringCoordinateAtM(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,d=t/i;for(;a<d;){const C=a+d>>1;r<n[(C+1)*i-1]?d=C:a=C+1}const y=n[a*i-1];if(r==y)return n.slice((a-1)*i,(a-1)*i+i);const v=n[(a+1)*i-1],_=(r-y)/(v-y);o=[];for(let C=0;C<i-1;++C)o.push(lerp(n[(a-1)*i+C],n[a*i+C],_));return o.push(r),o}function lineStringsCoordinateAtM(n,e,t,i,r,s,o){if(o)return lineStringCoordinateAtM(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let d=0,y=t.length;d<y;++d){const v=t[d];if(e!=v){if(r<n[e+i-1])return null;if(r<=n[v-1])return lineStringCoordinateAtM(n,e,v,i,r,!1);e=v}}return null}function lineStringLength(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const d=n[a],y=n[a+1];o+=Math.sqrt((d-r)*(d-r)+(y-s)*(y-s)),r=d,s=y}return o}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,s=[],o=[];for(let d=0,y=r.length;d<y;++d){const v=r[d];extend$4(s,v.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const d=t[o],y=new LineString(e.slice(s,d),i);r.push(y),s=d}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const d=r[o],y=interpolatePoint(t,i,d,s,.5);extend$4(e,y),i=d}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new MultiLineString(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<closestSquaredDistanceXY(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,d=s.length;a<d;a+=o){const y=squaredDistance$1(e,t,s[a],s[a+1]);if(y<r){r=y;for(let v=0;v<o;++v)i[v]=s[a+v];i.length=o}}return r}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Point$1(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(containsXY(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function linearRingss(n,e,t,i){const r=[];let s=createEmpty();for(let o=0,a=t.length;o<a;++o){const d=t[o];s=createOrUpdateFromFlatCoordinates(n,e,d[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=d[d.length-1]}return r}class MultiPolygon extends SimpleGeometry{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,d=r.length;a<d;++a){const y=r[a],v=s.length,_=y.getEnds();for(let C=0,E=_.length;C<E;++C)_[C]+=v;extend$4(s,y.getFlatCoordinates()),o.push(_)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new MultiPolygon(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Polygon(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const d=i[o].slice(),y=d[d.length-1];if(s!==0)for(let _=0,C=d.length;_<C;++_)d[_]-=s;const v=new Polygon(t.slice(s,y),e,d);r.push(v),s=y}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,t,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=interpolatePoint(e,t,o,2,.5);extend$4(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=getHeight(i)/getHeight(t);compose(tmpTransform,i[0],i[3],r,-r,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=douglasPeucker(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=douglasPeuckerArray(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=quantizeArray(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new RenderFeature(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all(n,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(n,e){return[n]}class VectorSourceEvent extends BaseEvent{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Collection(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType$1.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof RenderFeature){const s=this.idIndex_[r];s instanceof RenderFeature?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:i=!1}else i=!1}return i&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],d=getUid(a);this.addToIndex_(d,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],d=getUid(a);this.setupChangeEvents_(d,a);const y=a.getGeometry();if(y){const v=y.getExtent();t.push(v),r.push(a)}else this.nullGeometryFeatures_[d]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(VectorEventType.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof RenderFeature||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof RenderFeature||r.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=wrapAndSliceX(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(d,function(y){if(t(y)){const v=y.getGeometry(),_=a;if(a=v instanceof RenderFeature?0:v.closestPointXY(i,r,o,a),a<_){s=y;const C=Math.sqrt(a);d[0]=i-C,d[1]=r-C,d[2]=i+C,d[3]=r+C}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=getUid(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const d=s[o];r.forEachInExtent(d,function(v){return containsExtent(v.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,d,t,i,v=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,v))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),r.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(equals$1(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=getUid(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_){const r=this.idIndex_[i];if(e instanceof RenderFeature&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?ImageState.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(EventType$1.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=ImageState.LOADED}).catch(i=>{this.state=ImageState.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[listenOnce(i,EventType$1.LOAD,function(){o=!0,s||e()})];return i.src&&IMAGE_DECODE?(s=!0,i.decode().then(function(){r&&e()}).catch(function(d){r&&(o?e():t())})):a.push(listenOnce(i,EventType$1.ERROR,t)),function(){r=!1,a.forEach(unlistenByKey)}}function load(n,e){return new Promise((t,i)=>{function r(){o(),t(n)}function s(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s)})}function decodeFallback(n,e){return e&&(n.src=e),n.src&&IMAGE_DECODE?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):load(n)}function decode$1(n,e){return e&&(n.src=e),n.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):decodeFallback(n)}class ImageTile extends Tile{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const n=createCanvasContext2D(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const d=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(T){const R=T[0]+"/"+T[1];return a[R]||(a[R]=d(T)),a[R]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&getWidth(r)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const y=getTopLeft(i),v=getTopRight(i),_=getBottomRight(i),C=getBottomLeft(i),E=this.transformInv_(y),S=this.transformInv_(v),b=this.transformInv_(_),P=this.transformInv_(C),x=MAX_SUBDIVISION+(o?Math.max(0,Math.ceil(Math.log2(getArea$1(i)/(o*o*256*256)))):0);if(this.addQuad_(y,v,_,C,E,S,b,P,x),this.wrapsXInSource_){let T=1/0;this.triangles_.forEach(function(R,L,k){T=Math.min(T,R.source[0][0],R.source[1][0],R.source[2][0])}),this.triangles_.forEach(R=>{if(Math.max(R.source[0][0],R.source[1][0],R.source[2][0])-T>this.sourceWorldWidth_/2){const L=[[R.source[0][0],R.source[0][1]],[R.source[1][0],R.source[1][1]],[R.source[2][0],R.source[2][1]]];L[0][0]-T>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-T>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-T>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const k=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-k<this.sourceWorldWidth_/2&&(R.source=L)}})}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,d,y){const v=boundingExtent([s,o,a,d]),_=this.sourceWorldWidth_?getWidth(v)/this.sourceWorldWidth_:null,C=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&_>.5&&_<1;let S=!1;if(y>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const P=boundingExtent([e,t,i,r]);S=getWidth(P)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||S}!E&&this.sourceProj_.isGlobal()&&_&&(S=_>MAX_TRIANGLE_WIDTH||S)}if(!S&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!intersects$1(v,this.maxSourceExtent_))return;let b=0;if(!S&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(d[0])||!isFinite(d[1]))){if(y>0)S=!0;else if(b=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),b!=1&&b!=2&&b!=4&&b!=8)return}if(y>0){if(!S){const P=[(e[0]+i[0])/2,(e[1]+i[1])/2],x=this.transformInv_(P);let T;E?T=(modulo(s[0],C)+modulo(a[0],C))/2-modulo(x[0],C):T=(s[0]+a[0])/2-x[0];const R=(s[1]+a[1])/2-x[1];S=T*T+R*R>this.errorThresholdSquared_}if(S){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const P=[(t[0]+i[0])/2,(t[1]+i[1])/2],x=this.transformInv_(P),T=[(r[0]+e[0])/2,(r[1]+e[1])/2],R=this.transformInv_(T);this.addQuad_(e,t,P,T,s,o,x,R,y-1),this.addQuad_(T,P,i,r,R,x,a,d,y-1)}else{const P=[(e[0]+t[0])/2,(e[1]+t[1])/2],x=this.transformInv_(P),T=[(i[0]+r[0])/2,(i[1]+r[1])/2],R=this.transformInv_(T);this.addQuad_(e,P,T,r,s,x,R,d,y-1),this.addQuad_(P,t,i,T,x,o,a,R,y-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}b&11||this.addTriangle_(e,i,r,s,a,d),b&14||this.addTriangle_(e,i,t,s,a,o),b&&(b&13||this.addTriangle_(t,r,e,o,d,s),b&7||this.addTriangle_(t,r,i,o,d,a))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,i,r){const s=t.source;extendCoordinate(e,s[0]),extendCoordinate(e,s[1]),extendCoordinate(e,s[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function verifyBrokenDiagonalRendering(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const n=createCanvasContext2D(6,6,canvasPool$1);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(n,4,5,4,0),drawTestTriangle(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(n),canvasPool$1.push(n.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(n,e,t,i){const r=transform$1(t,e,n);let s=getPointResolution(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const d=n.getExtent();if(!d||containsCoordinate(d,r)){const y=getPointResolution(n,s,r)/s;isFinite(y)&&y>0&&(s/=y)}return s}function calculateSourceExtentResolution(n,e,t,i){const r=getCenter(t);let s=calculateSourceResolution(n,e,r,i);return(!isFinite(s)||s<=0)&&forEachCorner(t,function(o){return s=calculateSourceResolution(n,e,o,i),isFinite(s)&&s>0}),s}function render(n,e,t,i,r,s,o,a,d,y,v,_,C){const E=createCanvasContext2D(Math.round(t*n),Math.round(t*e),canvasPool$1);if(_||(E.imageSmoothingEnabled=!1),d.length===0)return E.canvas;E.scale(t,t);function S(T){return Math.round(T*t)/t}E.globalCompositeOperation="lighter";const b=createEmpty();d.forEach(function(T,R,L){extend$3(b,T.extent)});let P;if(!C||d.length!==1||y!==0){const T=getWidth(b),R=getHeight(b);P=createCanvasContext2D(Math.round(t*T/i),Math.round(t*R/i),canvasPool$1),_||(P.imageSmoothingEnabled=!1);const L=t/i;d.forEach(function(k,N,D){const G=k.extent[0]-b[0],U=-(k.extent[3]-b[3]),F=getWidth(k.extent),B=getHeight(k.extent);k.image.width>0&&k.image.height>0&&P.drawImage(k.image,y,y,k.image.width-2*y,k.image.height-2*y,G*L,U*L,F*L,B*L)})}const x=getTopLeft(o);return a.getTriangles().forEach(function(T,R,L){const k=T.source,N=T.target;let D=k[0][0],G=k[0][1],U=k[1][0],F=k[1][1],B=k[2][0],z=k[2][1];const Y=S((N[0][0]-x[0])/s),X=S(-(N[0][1]-x[1])/s),q=S((N[1][0]-x[0])/s),K=S(-(N[1][1]-x[1])/s),ee=S((N[2][0]-x[0])/s),te=S(-(N[2][1]-x[1])/s),Oe=D,ie=G;D=0,G=0,U-=Oe,F-=ie,B-=Oe,z-=ie;const it=[[U,F,0,0,q-Y],[B,z,0,0,ee-Y],[0,0,U,F,K-X],[0,0,B,z,te-X]],oe=solveLinearSystem(it);if(!oe)return;if(E.save(),E.beginPath(),isBrokenDiagonalRendering()||!_){E.moveTo(q,K);const ct=4,Qe=Y-q,dt=X-K;for(let re=0;re<ct;re++)E.lineTo(q+S((re+1)*Qe/ct),K+S(re*dt/(ct-1))),re!=ct-1&&E.lineTo(q+S((re+1)*Qe/ct),K+S((re+1)*dt/(ct-1)));E.lineTo(ee,te)}else E.moveTo(q,K),E.lineTo(Y,X),E.lineTo(ee,te);E.clip(),E.transform(oe[0],oe[2],oe[1],oe[3],Y,X),E.translate(b[0]-Oe,b[3]-ie);let ft;if(P)ft=P.canvas,E.scale(i/t,-i/t);else{const ct=d[0],Qe=ct.extent;ft=ct.image,E.scale(getWidth(Qe)/ft.width,-getHeight(Qe)/ft.height)}E.drawImage(ft,0,0),E.restore()}),P&&(releaseCanvas(P),canvasPool$1.push(P.canvas)),v&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,a.getTriangles().forEach(function(T,R,L){const k=T.target,N=(k[0][0]-x[0])/s,D=-(k[0][1]-x[1])/s,G=(k[1][0]-x[0])/s,U=-(k[1][1]-x[1])/s,F=(k[2][0]-x[0])/s,B=-(k[2][1]-x[1])/s;E.beginPath(),E.moveTo(G,U),E.lineTo(N,D),E.lineTo(F,B),E.closePath(),E.stroke()}),E.restore()),E.canvas}class ReprojTile extends Tile{constructor(e,t,i,r,s,o,a,d,y,v,_,C){super(s,TileState.IDLE,C),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=a,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const E=r.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const P=S?getIntersection(E,S):E;if(getArea$1(P)===0){this.state=TileState.EMPTY;return}const x=e.getExtent();x&&(b?b=getIntersection(b,x):b=x);const T=r.getResolution(this.wrappedTileCoord_[0]),R=calculateSourceExtentResolution(e,i,P,T);if(!isFinite(R)||R<=0){this.state=TileState.EMPTY;return}const L=v!==void 0?v:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,i,P,b,R*L,T),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(R);let k=this.triangulation_.calculateSourceExtent();if(b&&(e.canWrapX()?(k[1]=clamp(k[1],b[1],b[3]),k[3]=clamp(k[3],b[1],b[3])):k=getIntersection(k,b)),!getArea$1(k))this.state=TileState.EMPTY;else{const N=t.getTileRangeForExtentAndZ(k,this.sourceZ_);for(let D=N.minX;D<=N.maxX;D++)for(let G=N.minY;G<=N.maxY;G++){const U=y(this.sourceZ_,D,G,a);U&&this.sourceTiles_.push(U)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==TileState.IDLE||i==TileState.LOADING){e++;const r=listen(t,EventType$1.CHANGE,function(s){const o=t.getState();(o==TileState.LOADED||o==TileState.ERROR||o==TileState.EMPTY)&&(unlistenByKey(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const i=getUid(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=getForProjection(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||equivalent(t,e))return this.tileCache;const i=getUid(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],d=this.getTileCoordForTileUrlFunction(a,s),y=d?this.tileUrlFunction(d,r,s):void 0,v=new this.tileClass(a,y!==void 0?TileState.IDLE:TileState.EMPTY,y!==void 0?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return v.key=o,v.addEventListener(EventType$1.CHANGE,this.handleTileChange.bind(this)),v}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||equivalent(o,s))return this.getTileInternal(e,t,i,r,o||s);const a=this.getTileCacheForProjection(s),d=[e,t,i];let y;const v=getKey(d);a.containsKey(v)&&(y=a.get(v));const _=this.getKey();if(y&&y.key==_)return y;const C=this.getTileGridForProjection(o),E=this.getTileGridForProjection(s),S=this.getTileCoordForTileUrlFunction(d,s),b=new ReprojTile(o,C,s,E,d,S,this.getTilePixelRatio(r),this.getGutter(),(P,x,T,R)=>this.getTileInternal(P,x,T,R,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return b.key=_,y?(b.interimTile=y,b.refreshInterimChain(),a.replace(v,b)):a.set(v,b),b}getTileInternal(e,t,i,r,s){let o=null;const a=getKeyZXY(e,t,i),d=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,r,s,d),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=d){const y=o;o=this.createTile_(e,t,i,r,s,d),y.getState()==TileState.IDLE?o.interimTile=y.interimTile:o.interimTile=y,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=get$3(e);if(i){const r=getUid(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(n,e){n.getImage().src=e}const DECIMALS=4;function appendParams(n,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const i=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+i}function fromResolutionLike(n){return Array.isArray(n)?Math.min(...n):n}class ReprojImage extends ImageWrapper{constructor(e,t,i,r,s,o,a){let d=e.getExtent();d&&e.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);let y=t.getExtent();y&&t.canWrapX()&&(y=y.slice(),y[0]=-1/0,y[2]=1/0);const v=y?getIntersection(i,y):i,_=getCenter(v),C=calculateSourceResolution(e,t,_,r),E=ERROR_THRESHOLD,S=new Triangulation(e,t,v,d,C*E,r),b=S.calculateSourceExtent(),P=isEmpty(b)?null:o(b,C,s),x=P?ImageState.IDLE:ImageState.EMPTY,T=P?P.getPixelRatio():1;super(i,r,T,x),this.targetProj_=t,this.maxSourceExtent_=d,this.triangulation_=S,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=P,this.sourcePixelRatio_=T,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,i=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(t,i,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType$1.CHANGE,function(t){const i=this.sourceImage_.getState();(i==ImageState.LOADED||i==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e),this.image=t}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=linearFindNearest(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const s=this.getProjection();if(!s||!r||equivalent(s,r))return s&&(r=s),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(s,r,e,t,i,(o,a,d)=>this.getImageInternal(o,a,d,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const s=getRequestExtent(e,t,i,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,s)||containsExtent(this.image.getExtent(),s))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===o||fromResolutionLike(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new ImageWrapper(s,o,i,this.loader),this.image.addEventListener(EventType$1.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case ImageState.LOADING:this.loading=!0,i=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,i=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,i=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new ImageSourceEvent(i,t))}}function defaultImageLoadFunction(n,e){n.getImage().src=e}function getRequestExtent(n,e,t,i){const r=e/t,s=getCenter(n),o=ceil(getWidth(n)/r,DECIMALS),a=ceil(getHeight(n)/r,DECIMALS),d=ceil((i-1)*o/2,DECIMALS),y=o+2*d,v=ceil((i-1)*a/2,DECIMALS),_=a+2*v;return getForViewAndSize(s,r,0,[y,_])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(n,e,t,i,r){r.WIDTH=t[0],r.HEIGHT=t[1];const s=i.getAxisOrientation();let o;const a=compareVersions(r.VERSION,"1.3")>=0;return r[a?"CRS":"SRS"]=i.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,r.BBOX=o.join(","),appendParams(n,r)}function getImageSrc(n,e,t,i,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,d=[round(getWidth(n)/a,DECIMALS),round(getHeight(n)/a,DECIMALS)];if(t!=1)switch(o){case"geoserver":const v=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+v:s.FORMAT_OPTIONS="dpi:"+v;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(r,n,d,i,s)}function getRequestParams(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},n)}function createLoader(n){const e=n.hidpi===void 0?!0:n.hidpi,t=get$3(n.projection||"EPSG:3857"),i=n.ratio||1.5,r=n.load||decode$1;return(s,o,a)=>{s=getRequestExtent(s,o,a,i),a!=1&&(!e||n.serverType===void 0)&&(a=1);const d=getImageSrc(s,o,a,t,n.url,getRequestParams(n.params,"GetMap"),n.serverType),y=new Image;return n.crossOrigin!==null&&(y.crossOrigin=n.crossOrigin),r(y,d).then(v=>({image:v,extent:s,pixelRatio:a}))}}function getFeatureInfoUrl(n,e,t){if(n.url===void 0)return;const i=get$3(n.projection||"EPSG:3857"),r=getForViewAndSize(e,t,0,GETFEATUREINFO_IMAGE_SIZE),s={QUERY_LAYERS:n.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,getRequestParams(n.params,"GetFeatureInfo"),n.params);const o=floor((e[0]-r[0])/t,DECIMALS),a=floor((r[3]-e[1])/t,DECIMALS),d=compareVersions(s.VERSION,"1.3")>=0;return s[d?"I":"X"]=o,s[d?"J":"Y"]=a,getRequestUrl(n.url,r,GETFEATUREINFO_IMAGE_SIZE,i,s)}function getLegendUrl(n,e){if(n.url===void 0)return;const t={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n.params===void 0||n.params.LAYER===void 0){const i=n.params.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;t.LAYER=i}if(e!==void 0){const i=get$3(n.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;t.SCALE=e*i/r}return Object.assign(t,n.params),appendParams(n.url,t)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params),i="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!i,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,i,r){const s=get$3(i),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const d=transform$1(e,s,o),y=calculateSourceResolution(o,s,e,t),v=a.getZForResolution(y,this.zDirection),_=a.getResolution(v),C=a.getTileCoordForCoordAndZ(d,v);if(a.getResolutions().length<=C[0])return;let E=a.getTileCoordExtent(C,this.tmpExtent_);const S=this.gutter_;S!==0&&(E=buffer(E,_*S,E));const b={QUERY_LAYERS:this.params_.LAYERS};Object.assign(b,getRequestParams(this.params_,"GetFeatureInfo"),r);const P=Math.floor((d[0]-E[0])/_),x=Math.floor((E[3]-d[1])/_);return b[this.v13_?"I":"X"]=P,b[this.v13_?"J":"Y"]=x,this.getRequestUrl_(C,E,1,o||s,b)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;i.LAYER=r}if(e!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=e*r/s}return Object.assign(i,t),appendParams(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,i,r,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const d=modulo(hash(e),o.length);a=o[d]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(e[0]),i,r,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=r.getResolution(e[0]);let o=r.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=buffer(o,s*a,o));const d=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,i,d)}}let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,i):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in i?i[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o,a,d){if(!o)return;const y={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(y,s);let v=e;return t=="KVP"?v=appendParams(v,y):v=v.replace(/\{(\w+?)\}/g,function(_,C){return y[C]}),v}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=e.params,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,i,r){const s=get$3(i),o=this.getProjection();o&&o!==s&&(t=calculateSourceResolution(o,s,e,t),e=transform$1(e,s,o));const a={url:this.url_,params:{...this.params_,...r},projection:o||s};return getFeatureInfoUrl(a,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,i,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),decode$1(s))})),super.getImageInternal(e,t,i,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}function asColorLike(n){return Array.isArray(n)?toString$2(n):n}class RegularShape extends ImageStyle{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const i=this.renderOptions_,r=createCanvasContext2D(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const N=r;r=s,s=N}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,d=s*Math.sin(a),y=Math.sqrt(s*s-d*d),v=r-y,_=Math.sqrt(d*d+v*v),C=_/d;if(e==="miter"&&C<=i)return C*t;const E=t/2/C,S=t/2*(v/_),P=Math.sqrt((r+E)*(r+E)+S*S)-r;if(this.radius2_===void 0||e==="bevel")return P*2;const x=r*Math.sin(a),T=Math.sqrt(r*r-x*x),R=s-T,k=Math.sqrt(x*x+R*R)/x;if(k<=i){const N=k*t/2-s-r;return 2*Math.max(P,N)}return P*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),a=this.stroke_.getWidth()??defaultLineWidth,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,i=this.stroke_.getMiterLimit()??defaultMiterLimit);const d=this.calculateLineJoinSize_(t,a,i),y=Math.max(this.radius_,this.radius2_||0),v=Math.ceil(2*y+d);return{strokeStyle:o,strokeWidth:a,size:v,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=defaultFillStyle),t.fillStyle=asColorLike(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=asArray(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const d=s+a*o,y=a%2===0?i:r;e.lineTo(y*Math.cos(d),y*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Nn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Nn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(assert(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(n,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),i=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return defaultStyles}function createEditingStyle(){const n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Style$1({stroke:new Stroke({color:e,width:i+2})}),new Style$1({stroke:new Stroke({color:t,width:i})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Style$1({image:new CircleStyle({radius:i*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:i/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function defaultGeometryFunction(n){return n.getGeometry()}let taintedTestContext=null;class IconImage extends Target{constructor(e,t,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?ImageState.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType$1.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=createCanvasContext2D(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=asString(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}}function get$2(n,e,t,i,r){let s=e===void 0?void 0:shared.get(e,t,r);return s||(s=new IconImage(n,n instanceof HTMLImageElement?n.src||void 0:e,t,i,r),shared.set(e,t,r,s)),s}function calculateScale(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;assert(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||getUid(o)),assert(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=ImageState.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?d=o.src?ImageState.LOADED:ImageState.IDLE:d=ImageState.LOADING:d=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(o,a,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let y,v;if(e.size)[y,v]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)y=_.width,v=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const C=()=>{if(this.unlistenImageChange(C),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(calculateScale(E[0],E[1],e.width,e.height))};this.listenImageChange(C);return}}y!==void 0&&this.setScale(calculateScale(y,v,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType$1.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType$1.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const NoneType=0,BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(n){const e=[];for(const t of namedTypes)includesType(n,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(n,e){return(n&e)===e}function overlapsType(n,e){return!!(n&e)}function isType(n,e){return n===e}class LiteralExpression{constructor(e,t){this.type=e,this.value=t}}class CallExpression{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(n){switch(n){case"string":return StringType$1;case"color":return ColorType$1;case"number":return NumberType$1;case"boolean":return BooleanType$1;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${n}`)}}function parse$2(n,e,t){switch(typeof n){case"boolean":return new LiteralExpression(BooleanType$1,n);case"number":return new LiteralExpression(NumberType$1,n);case"string":{let r=StringType$1;return isStringColor(n)&&(r|=ColorType$1),isType(r&t,NoneType)||(r&=t),new LiteralExpression(r,n)}}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return parseCallExpression(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=NumberArrayType;return(n.length===3||n.length===4)&&(i|=ColorType$1),t&&(i&=t),new LiteralExpression(i,n)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([n,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([n])=>n.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType$1|StringType$1,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType$1,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType$1,withNoArgs),[Ops.Resolution]:createParser(NumberType$1,withNoArgs),[Ops.Zoom]:createParser(NumberType$1,withNoArgs),[Ops.Time]:createParser(NumberType$1,withNoArgs),[Ops.Any]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.All]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.Not]:createParser(BooleanType$1,withArgsCount(1,1),parseArgsOfType(BooleanType$1)),[Ops.Equal]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(n=>{let e=NumberType$1|ColorType$1;for(let t=0;t<n.length;t++)e&=n[t].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType$1|ColorType$1),narrowArgsType),[Ops.Divide]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Add]:createParser(NumberType$1,withArgsCount(2,1/0),parseArgsOfType(NumberType$1)),[Ops.Subtract]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Clamp]:createParser(NumberType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Mod]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Pow]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Abs]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Floor]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Ceil]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Round]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Sin]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Cos]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Atan]:createParser(NumberType$1,withArgsCount(1,2),parseArgsOfType(NumberType$1)),[Ops.Sqrt]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Match]:createParser(n=>{let e=AnyType;for(let t=2;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Interpolate]:createParser(n=>{let e=ColorType$1|NumberType$1;for(let t=3;t<n.length;t+=2)e&=n[t].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(n=>{let e=AnyType;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType$1,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(n=>n.length===3||n.length===4?NumberArrayType|ColorType$1:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType$1)),[Ops.Color]:createParser(ColorType$1,withArgsCount(3,4),parseArgsOfType(NumberType$1)),[Ops.Band]:createParser(NumberType$1,withArgsCount(1,3),parseArgsOfType(NumberType$1)),[Ops.Palette]:createParser(ColorType$1,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(n,e){const t=parse$2(n[1],e);if(!(t instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),n.length===3){const i=parse$2(n[2],e);return[t,i]}return[t]}function withVarArgs(n,e,t,i){const r=n[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new LiteralExpression(AnyType,r)];const s=e.style.variables[r],o=parse$2(s,e);if(o.value=r,i&&!overlapsType(i,o.type))throw new Error(`The variable ${r} has type ${typeName(o.type)} but the following type was expected: ${typeName(i)}`);return[o]}function usesFeatureId(n,e){e.featureId=!0}function withNoArgs(n,e){const t=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function withArgsCount(n,e){return function(t,i){const r=t[0],s=t.length-1;if(n===e){if(s!==n){const o=n===1?"":"s";throw new Error(`Expected ${n} argument${o} for ${r}, got ${s}`)}}else if(s<n||s>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function parseArgsOfType(n){return function(e,t){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=parse$2(e[o+1],t);if(!overlapsType(n,a.type)){const d=typeName(n),y=typeName(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${d} but expected ${y}`)}a.type&=n,s[o]=a}return s}}function narrowArgsType(n,e,t){const i=n[0],r=n.length-1;let s=AnyType;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===NoneType)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=parse$2(n[a+1],e,s);return o}function withOddArgs(n,e){const t=n[0],i=n.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(i)} instead`)}function withEvenArgs(n,e){const t=n[0],i=n.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(i)} instead`)}function parseMatchArgs(n,e,t,i){const r=n.length-1;let o=parse$2(n[1],e).type;const a=parse$2(n[n.length-1],e);let d=i!==void 0?i&a.type:a.type;const y=new Array(r-2);for(let _=0;_<r-2;_+=2){const C=parse$2(n[_+2],e),E=parse$2(n[_+3],e);o&=C.type,d&=E.type,y[_]=C,y[_+1]=E}const v=StringType$1|NumberType$1|BooleanType$1;if(!overlapsType(v,o))throw new Error(`Expected an input of type ${typeName(v)} for the interpolate operation, got ${typeName(o)} instead`);if(isType(d,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(n));for(let _=0;_<r-2;_+=2){const C=parse$2(n[_+2],e,o),E=parse$2(n[_+3],e,d);y[_]=C,y[_+1]=E}return[parse$2(n[1],e,o),...y,parse$2(n[n.length-1],e,d)]}function parseInterpolateArgs(n,e,t,i){const r=n[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=parse$2(s,e);let o=parse$2(n[2],e);if(!overlapsType(NumberType$1,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(o.type)} instead`);o=parse$2(n[2],e,NumberType$1);const a=new Array(n.length-3);for(let d=0;d<a.length;d+=2){let y=parse$2(n[d+3],e);if(!overlapsType(NumberType$1,y.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(y.type)} at position ${d+2} instead`);let v=parse$2(n[d+4],e);if(!overlapsType(NumberType$1|ColorType$1,v.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(v.type)} at position ${d+3} instead`);y=parse$2(n[d+3],e,NumberType$1),v=parse$2(n[d+4],e,NumberType$1|ColorType$1),a[d]=y,a[d+1]=v}return[s,o,...a]}function parseCaseArgs(n,e,t,i){const r=parse$2(n[n.length-1],e);let s=i!==void 0?i&r.type:r.type;const o=new Array(n.length-1);for(let a=0;a<o.length-1;a+=2){const d=parse$2(n[a+1],e),y=parse$2(n[a+2],e);if(!overlapsType(BooleanType$1,d.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(d.type)} at position ${a} instead`);s&=y.type,o[a]=d,o[a+1]=y}if(isType(s,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(n));for(let a=0;a<o.length-1;a+=2)o[a+1]=parse$2(n[a+2],e,s);return o[o.length-1]=parse$2(n[n.length-1],e,s),o}function parseInArgs(n,e){let t=n[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let i=StringType$1|NumberType$1;const r=new Array(t.length);for(let o=0;o<r.length;o++){const a=parse$2(t[o],e);i&=a.type,r[o]=a}if(isType(i,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(n));return[parse$2(n[1],e,i),...r]}function parsePaletteArgs(n,e){const t=parse$2(n[1],e,NumberType$1);if(t.type!==NumberType$1)throw new Error(`The first argument of palette must be an number, got ${typeName(t.type)} instead`);const i=n[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const o=parse$2(i[s],e,ColorType$1);if(!(o instanceof LiteralExpression))throw new Error(`The palette color at index ${s} must be a literal value`);if(!overlapsType(o.type,ColorType$1))throw new Error(`The palette color at index ${s} should be of type color, got ${typeName(o.type)} instead`);r[s]=o}return[t,...r]}function createParser(n,...e){return function(t,i,r){const s=t[0];let o=[];for(let d=0;d<e.length;d++)o=e[d](t,i,o,r)||o;let a=typeof n=="function"?n(o):n;if(r!==void 0){if(!overlapsType(a,r))throw new Error(`The following expression was expected to return ${typeName(r)}, but returns ${typeName(a)} instead: ${JSON.stringify(t)}`);a&=r}if(a===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new CallExpression(a,s,...o)}}function parseCallExpression(n,e,t){const i=n[0],r=parsers[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(n,e,t)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(n,e,t){const i=parse$2(n,t);if(!overlapsType(e,i.type)){const r=typeName(e),s=typeName(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return compileExpression(i)}function compileExpression(n,e){if(n instanceof LiteralExpression){if(n.type===ColorType$1&&typeof n.value=="string"){const i=fromString(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case Ops.Number:case Ops.String:return compileAssertionExpression(n);case Ops.Get:case Ops.Var:return compileAccessorExpression(n);case Ops.Id:return i=>i.featureId;case Ops.Concat:{const i=n.args.map(r=>compileExpression(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case Ops.Resolution:return i=>i.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(n);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(n);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(n);case Ops.Match:return compileMatchExpression(n);case Ops.Interpolate:return compileInterpolateExpression(n);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=compileExpression(n.args[s]);switch(t){case Ops.Number:case Ops.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(n,e){const i=n.args[0].value;switch(n.operator){case Ops.Get:return r=>r.properties[i];case Ops.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function compileComparisonExpression(n,e){const t=n.operator,i=compileExpression(n.args[0]),r=compileExpression(n.args[1]);switch(t){case Ops.Equal:return s=>i(s)===r(s);case Ops.NotEqual:return s=>i(s)!==r(s);case Ops.LessThan:return s=>i(s)<r(s);case Ops.LessThanOrEqualTo:return s=>i(s)<=r(s);case Ops.GreaterThan:return s=>i(s)>r(s);case Ops.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=compileExpression(n.args[s]);switch(t){case Ops.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case Ops.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case Ops.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=compileExpression(n.args[s]);switch(t){case Ops.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case Ops.Divide:return s=>r[0](s)/r[1](s);case Ops.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case Ops.Subtract:return s=>r[0](s)-r[1](s);case Ops.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const d=r[2](s);return o>d?d:o};case Ops.Mod:return s=>r[0](s)%r[1](s);case Ops.Pow:return s=>Math.pow(r[0](s),r[1](s));case Ops.Abs:return s=>Math.abs(r[0](s));case Ops.Floor:return s=>Math.floor(r[0](s));case Ops.Ceil:return s=>Math.ceil(r[0](s));case Ops.Round:return s=>Math.round(r[0](s));case Ops.Sin:return s=>Math.sin(r[0](s));case Ops.Cos:return s=>Math.cos(r[0](s));case Ops.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Ops.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileMatchExpression(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=compileExpression(n.args[r]);return r=>{const s=i[0](r);for(let o=1;o<t;o+=2)if(s===i[o](r))return i[o+1](r);return i[t-1](r)}}function compileInterpolateExpression(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=compileExpression(n.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,d;for(let y=2;y<t;y+=2){const v=i[y](r);let _=i[y+1](r);const C=Array.isArray(_);if(C&&(_=withAlpha(_)),v>=o)return y===2?_:C?interpolateColor(s,o,a,d,v,_):interpolateNumber(s,o,a,d,v,_);a=v,d=_}return d}}function interpolateNumber(n,e,t,i,r,s){const o=r-t;if(o===0)return i;const a=e-t,d=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return i+d*(s-i)}function interpolateColor(n,e,t,i,r,s){if(r-t===0)return i;const a=rgbaToLcha(i),d=rgbaToLcha(s);let y=d[2]-a[2];y>180?y-=360:y<-180&&(y+=360);const v=[interpolateNumber(n,e,t,a[0],r,d[0]),interpolateNumber(n,e,t,a[1],r,d[1]),a[2]+interpolateNumber(n,e,t,0,r,y),interpolateNumber(n,e,t,i[3],r,s[3])];return normalize(lchaToRgba(v))}function always(n){return!0}function rulesToStyleFunction(n){const e=newParsingContext(),t=buildRuleSet(n,e),i=newEvaluationContext();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return t(i)}}function flatStylesToStyleFunction(n){const e=newParsingContext(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=buildStyle(n[o],e);const r=newEvaluationContext(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const y=o.getId();y!==void 0?r.featureId=y:r.featureId=null}let d=0;for(let y=0;y<t;++y){const v=i[y](r);v&&(s[d]=v,d+=1)}return s.length=d,s}}function buildRuleSet(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const s=n[r],o="filter"in s?buildExpression(s.filter,BooleanType$1,e):always;let a;if(Array.isArray(s.style)){const d=s.style.length;a=new Array(d);for(let y=0;y<d;++y)a[y]=buildStyle(s.style[y],e)}else a=[buildStyle(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const d=i[a].filter;if(d(r)&&!(n[a].else&&o)){o=!0;for(const y of i[a].styles){const v=y(r);v&&s.push(v)}}}return s}}function buildStyle(n,e){const t=buildFill(n,"",e),i=buildStroke(n,"",e),r=buildText(n,e),s=buildImage(n,e),o=numberEvaluator(n,"z-index",e);if(!t&&!i&&!r&&!s&&!isEmpty$1(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new Style$1;return function(d){let y=!0;if(t){const v=t(d);v&&(y=!1),a.setFill(v)}if(i){const v=i(d);v&&(y=!1),a.setStroke(v)}if(r){const v=r(d);v&&(y=!1),a.setText(v)}if(s){const v=s(d);v&&(y=!1),a.setImage(v)}return o&&a.setZIndex(o(d)),y?null:a}}function buildFill(n,e,t){const i=colorLikeEvaluator(n,e+"fill-color",t);if(!i)return null;const r=new Fill;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function buildStroke(n,e,t){const i=numberEvaluator(n,e+"stroke-width",t),r=colorLikeEvaluator(n,e+"stroke-color",t);if(!i&&!r)return null;const s=stringEvaluator(n,e+"stroke-line-cap",t),o=stringEvaluator(n,e+"stroke-line-join",t),a=numberArrayEvaluator(n,e+"stroke-line-dash",t),d=numberEvaluator(n,e+"stroke-line-dash-offset",t),y=numberEvaluator(n,e+"stroke-miter-limit",t),v=new Stroke;return function(_){if(r){const C=r(_);if(C==="none")return null;v.setColor(C)}if(i&&v.setWidth(i(_)),s){const C=s(_);if(C!=="butt"&&C!=="round"&&C!=="square")throw new Error("Expected butt, round, or square line cap");v.setLineCap(C)}if(o){const C=o(_);if(C!=="bevel"&&C!=="round"&&C!=="miter")throw new Error("Expected bevel, round, or miter line join");v.setLineJoin(C)}return a&&v.setLineDash(a(_)),d&&v.setLineDashOffset(d(_)),y&&v.setMiterLimit(y(_)),v}}function buildText(n,e){const t="text-",i=stringEvaluator(n,t+"value",e);if(!i)return null;const r=buildFill(n,t,e),s=buildFill(n,t+"background-",e),o=buildStroke(n,t,e),a=buildStroke(n,t+"background-",e),d=stringEvaluator(n,t+"font",e),y=numberEvaluator(n,t+"max-angle",e),v=numberEvaluator(n,t+"offset-x",e),_=numberEvaluator(n,t+"offset-y",e),C=booleanEvaluator(n,t+"overflow",e),E=stringEvaluator(n,t+"placement",e),S=numberEvaluator(n,t+"repeat",e),b=sizeLikeEvaluator(n,t+"scale",e),P=booleanEvaluator(n,t+"rotate-with-view",e),x=numberEvaluator(n,t+"rotation",e),T=stringEvaluator(n,t+"align",e),R=stringEvaluator(n,t+"justify",e),L=stringEvaluator(n,t+"baseline",e),k=numberArrayEvaluator(n,t+"padding",e),N=new Text({});return function(D){if(N.setText(i(D)),r&&N.setFill(r(D)),s&&N.setBackgroundFill(s(D)),o&&N.setStroke(o(D)),a&&N.setBackgroundStroke(a(D)),d&&N.setFont(d(D)),y&&N.setMaxAngle(y(D)),v&&N.setOffsetX(v(D)),_&&N.setOffsetY(_(D)),C&&N.setOverflow(C(D)),E){const G=E(D);if(G!=="point"&&G!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(G)}if(S&&N.setRepeat(S(D)),b&&N.setScale(b(D)),P&&N.setRotateWithView(P(D)),x&&N.setRotation(x(D)),T){const G=T(D);if(G!=="left"&&G!=="center"&&G!=="right"&&G!=="end"&&G!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(G)}if(R){const G=R(D);if(G!=="left"&&G!=="right"&&G!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(G)}if(L){const G=L(D);if(G!=="bottom"&&G!=="top"&&G!=="middle"&&G!=="alphabetic"&&G!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(G)}return k&&N.setPadding(k(D)),N}}function buildImage(n,e){return"icon-src"in n?buildIcon(n,e):"shape-points"in n?buildShape(n,e):"circle-radius"in n?buildCircle(n,e):null}function buildIcon(n,e){const t="icon-",i=t+"src",r=requireString(n[i],i),s=coordinateEvaluator(n,t+"anchor",e),o=sizeLikeEvaluator(n,t+"scale",e),a=numberEvaluator(n,t+"opacity",e),d=coordinateEvaluator(n,t+"displacement",e),y=numberEvaluator(n,t+"rotation",e),v=booleanEvaluator(n,t+"rotate-with-view",e),_=optionalIconOrigin(n,t+"anchor-origin"),C=optionalIconAnchorUnits(n,t+"anchor-x-units"),E=optionalIconAnchorUnits(n,t+"anchor-y-units"),S=optionalColorLike(n,t+"color"),b=optionalString(n,t+"cross-origin"),P=optionalNumberArray(n,t+"offset"),x=optionalIconOrigin(n,t+"offset-origin"),T=optionalNumber(n,t+"width"),R=optionalNumber(n,t+"height"),L=optionalSize(n,t+"size"),k=optionalDeclutterMode(n,t+"declutter"),N=new Icon({src:r,anchorOrigin:_,anchorXUnits:C,anchorYUnits:E,color:S,crossOrigin:b,offset:P,offsetOrigin:x,height:R,width:T,size:L,declutterMode:k});return function(D){return a&&N.setOpacity(a(D)),d&&N.setDisplacement(d(D)),y&&N.setRotation(y(D)),v&&N.setRotateWithView(v(D)),o&&N.setScale(o(D)),s&&N.setAnchor(s(D)),N}}function buildShape(n,e){const t="shape-",i=t+"points",r=requireNumber(n[i],i),s=buildFill(n,t,e),o=buildStroke(n,t,e),a=sizeLikeEvaluator(n,t+"scale",e),d=coordinateEvaluator(n,t+"displacement",e),y=numberEvaluator(n,t+"rotation",e),v=booleanEvaluator(n,t+"rotate-with-view",e),_=optionalNumber(n,t+"radius"),C=optionalNumber(n,t+"radius1"),E=optionalNumber(n,t+"radius2"),S=optionalNumber(n,t+"angle"),b=optionalDeclutterMode(n,t+"declutter-mode"),P=new RegularShape({points:r,radius:_,radius1:C,radius2:E,angle:S,declutterMode:b});return function(x){return s&&P.setFill(s(x)),o&&P.setStroke(o(x)),d&&P.setDisplacement(d(x)),y&&P.setRotation(y(x)),v&&P.setRotateWithView(v(x)),a&&P.setScale(a(x)),P}}function buildCircle(n,e){const t="circle-",i=buildFill(n,t,e),r=buildStroke(n,t,e),s=numberEvaluator(n,t+"radius",e),o=sizeLikeEvaluator(n,t+"scale",e),a=coordinateEvaluator(n,t+"displacement",e),d=numberEvaluator(n,t+"rotation",e),y=booleanEvaluator(n,t+"rotate-with-view",e),v=optionalDeclutterMode(n,t+"declutter-mode"),_=new CircleStyle({radius:5,declutterMode:v});return function(C){return s&&_.setRadius(s(C)),i&&_.setFill(i(C)),r&&_.setStroke(r(C)),a&&_.setDisplacement(a(C)),d&&_.setRotation(d(C)),y&&_.setRotateWithView(y(C)),o&&_.setScale(o(C)),_}}function numberEvaluator(n,e,t){if(!(e in n))return;const i=buildExpression(n[e],NumberType$1,t);return function(r){return requireNumber(i(r),e)}}function stringEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],StringType$1,t);return function(r){return requireString(i(r),e)}}function booleanEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],BooleanType$1,t);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function colorLikeEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],ColorType$1|StringType$1,t);return function(r){return requireColorLike(i(r),e)}}function numberArrayEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],NumberArrayType,t);return function(r){return requireNumberArray(i(r),e)}}function coordinateEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],NumberArrayType,t);return function(r){const s=requireNumberArray(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function sizeLikeEvaluator(n,e,t){if(!(e in n))return null;const i=buildExpression(n[e],NumberArrayType|NumberType$1,t);return function(r){return requireSizeLike(i(r),e)}}function optionalNumber(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(n,e){const t=n[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(n,e){const t=n[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function requireString(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function requireNumber(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function requireColorLike(n,e){if(typeof n=="string")return n;const t=requireNumberArray(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSizeLike(n,e){if(typeof n=="number")return n;const t=requireNumberArray(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}const Property={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(n){if(n===void 0)return createDefaultStyle;if(!n)return null;if(typeof n=="function"||n instanceof Style$1)return n;if(!Array.isArray(n))return flatStylesToStyleFunction([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Style$1){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!(o instanceof Style$1))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return rulesToStyleFunction(r)}return flatStylesToStyleFunction(n)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class CanvasBuilder extends VectorContext{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,d=e.length;a<d;a+=t)r[0]=e[a],r[1]=e[a+1],containsCoordinate(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let d=a.length;const y=this.getBufferedMaxExtent();o&&(t+=r);let v=e[t],_=e[t+1];const C=this.tmpCoordinate_;let E=!0,S,b,P;for(S=t+r;S<i;S+=r)C[0]=e[S],C[1]=e[S+1],P=coordinateRelationship(y,C),P!==b?(E&&(a[d++]=v,a[d++]=_,E=!1),a[d++]=C[0],a[d++]=C[1]):P===Relationship.INTERSECTING?(a[d++]=C[0],a[d++]=C[1],E=!1):E=!0,v=C[0],_=C[1],b=P;return(s&&E||S===t+r)&&(a[d++]=v,a[d++]=_),d}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const d=i[o],y=this.appendFlatLineCoordinates(e,t,d,r,!1,!1);s.push(y),t=d}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let d,y,v,_,C;switch(s){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),_=[];const E=e.getEndss();C=0;for(let S=0,b=E.length;S<b;++S){const P=[];C=this.drawCustomCoordinates_(d,C,E[S],o,P),_.push(P)}this.instructions.push([Instruction.CUSTOM,a,_,e,i,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,_,e,r||i,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":v=[],d=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),C=this.drawCustomCoordinates_(d,0,e.getEnds(),o,v),this.instructions.push([Instruction.CUSTOM,a,v,e,i,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,v,e,r||i,inflateCoordinatesArray]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),y=this.appendFlatLineCoordinates(d,0,d.length,o,!1,!1),this.instructions.push([Instruction.CUSTOM,a,y,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,y,e,r||i,inflateCoordinates]);break;case"MultiPoint":d=e.getFlatCoordinates(),y=this.appendFlatPointCoordinates(d,o),y>a&&(this.instructions.push([Instruction.CUSTOM,a,y,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,y,e,r||i,inflateCoordinates]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),y=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,a,y,e,i]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,y,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Instruction.END_GEOMETRY?o=t:s==Instruction.BEGIN_GEOMETRY&&(r[2]=t,reverseSubArray(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=asColorLike(r||defaultFillStyle)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=asColorLike(r||defaultStrokeStyle);const s=t.getLineCap();i.lineCap=s!==void 0?s:defaultLineCap;const o=t.getLineDash();i.lineDash=o?o.slice():defaultLineDash;const a=t.getLineDashOffset();i.lineDashOffset=a||defaultLineDashOffset;const d=t.getLineJoin();i.lineJoin=d!==void 0?d:defaultLineJoin;const y=t.getWidth();i.lineWidth=y!==void 0?y:defaultLineWidth;const v=t.getMiterLimit();i.miterLimit=v!==void 0?v:defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,d=e.lineWidth,y=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!equals$2(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=d||e.currentMiterLimit!=y)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=d,e.currentMiterLimit=y)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Instruction.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Instruction.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Instruction.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const o=e.getEnds(),a=e.getFlatCoordinates(),d=e.getStride();let y=0;for(let v=0,_=o.length;v<_;++v)y=this.drawFlatCoordinates_(a,y,o[v],d);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,d=i.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let y=0;y<d;++y){const v=i[y],_=this.coordinates.length,C=this.appendFlatLineCoordinates(e,t,v,r,!0,!a),E=[Instruction.MOVE_TO_LINE_TO,_,C];this.instructions.push(E),this.hitDetectionInstructions.push(E),a&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=v}return o&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),a&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const y=[Instruction.CIRCLE,d];this.instructions.push(beginPathInstruction,y),this.hitDetectionInstructions.push(beginPathInstruction,y),i.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),i.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(a,0,o,d),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),d=e.getStride();let y=0;for(let v=0,_=o.length;v<_;++v)y=this.drawFlatCoordinatess_(a,y,o[v],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=snap(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(n,e,t,i,r){const s=[];let o=t,a=0,d=e.slice(t,2);for(;a<n&&o+r<i;){const[y,v]=d.slice(-2),_=e[o+r],C=e[o+r+1],E=Math.sqrt((_-y)*(_-y)+(C-v)*(C-v));if(a+=E,a>=n){const S=(n-a+E)/E,b=lerp(y,_,S),P=lerp(v,C,S);d.push(b,P),s.push(d),d=[b,P],a==n&&(o+=r),a=0}else if(a<n)d.push(e[o+r],e[o+r+1]),o+=r;else{const S=E-a,b=lerp(y,_,S/E),P=lerp(v,C,S/E);d.push(b,P),s.push(d),d=[b,P],a=0,o+=r}}return a>0&&s.push(d),s}function matchingChunk(n,e,t,i,r){let s=t,o=t,a=0,d=0,y=t,v,_,C,E,S,b,P,x,T,R;for(_=t;_<i;_+=r){const L=e[_],k=e[_+1];S!==void 0&&(T=L-S,R=k-b,E=Math.sqrt(T*T+R*R),P!==void 0&&(d+=C,v=Math.acos((P*T+x*R)/(C*E)),v>n&&(d>a&&(a=d,s=y,o=_),d=0,y=_-r)),C=E,P=T,x=R),S=L,b=k}return d+=E,d>a?[y,_]:[s,o]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const d=e.getType();let y=null,v=e.getStride();if(s.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let _;if(y=e.getFlatCoordinates(),d=="LineString")_=[y.length];else if(d=="MultiLineString")_=e.getEnds();else if(d=="Polygon")_=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const b=e.getEndss();_=[];for(let P=0,x=b.length;P<x;++P)_.push(b[P][0])}this.beginGeometry(e,t);const C=s.repeat,E=C?void 0:s.textAlign;let S=0;for(let b=0,P=_.length;b<P;++b){let x;C?x=lineChunk(C*this.resolution,y,S,_[b],v):x=[y.slice(S,_[b])];for(let T=0,R=x.length;T<R;++T){const L=x[T];let k=0,N=L.length;if(E==null){const G=matchingChunk(s.maxAngle,L,0,L.length,2);k=G[0],N=G[1]}for(let G=k;G<N;G+=v)o.push(L[G],L[G+1]);const D=o.length;S=_[b],this.drawChars_(a,D),a=D}}this.endGeometry(t)}else{let _=s.overflow?null:[];switch(d){case"Point":case"MultiPoint":y=e.getFlatCoordinates();break;case"LineString":y=e.getFlatMidpoint();break;case"Circle":y=e.getCenter();break;case"MultiLineString":y=e.getFlatMidpoints(),v=2;break;case"Polygon":y=e.getFlatInteriorPoint(),s.overflow||_.push(y[2]/this.resolution),v=3;break;case"MultiPolygon":const x=e.getFlatInteriorPoints();y=[];for(let T=0,R=x.length;T<R;T+=3)s.overflow||_.push(x[T+2]/this.resolution),y.push(x[T],x[T+1]);if(y.length===0)return;v=2;break}const C=this.appendFlatPointCoordinates(y,v);if(C===a)return;if(_&&(C-a)/2!==y.length/v){let x=a/2;_=_.filter((T,R)=>{const L=o[(x+R)*2]===y[R*v]&&o[(x+R)*2+1]===y[R*v+1];return L||--x,L})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let E=s.padding;if(E!=defaultPadding&&(s.scale[0]<0||s.scale[1]<0)){let x=s.padding[0],T=s.padding[1],R=s.padding[2],L=s.padding[3];s.scale[0]<0&&(T=-T,L=-L),s.scale[1]<0&&(x=-x,R=-R),E=[x,T,R,L]}const S=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,a,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,E==defaultPadding?defaultPadding:E.map(function(x){return x*S}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const b=1/S,P=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,a,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[b,b],NaN,void 0,this.declutterImageWithText_,E,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),s.backgroundFill&&(this.state.fillStyle=P,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,y=TEXT_ALIGN[r.textBaseline],v=this.textOffsetY_*d,_=this.text_,C=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,y,r.overflow,a,r.maxAngle,d,v,s,C*d,_,o,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,y,r.overflow,a&&defaultFillStyle,r.maxAngle,d,v,s,C*d,_,o,1/d])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=asColorLike(o.getColor()||defaultFillStyle)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const S=a.getLineDash(),b=a.getLineDashOffset(),P=a.getWidth(),x=a.getMiterLimit();s.lineCap=a.getLineCap()||defaultLineCap,s.lineDash=S?S.slice():defaultLineDash,s.lineDashOffset=b===void 0?defaultLineDashOffset:b,s.lineJoin=a.getLineJoin()||defaultLineJoin,s.lineWidth=P===void 0?defaultLineWidth:P,s.miterLimit=x===void 0?defaultMiterLimit:x,s.strokeStyle=asColorLike(a.getColor()||defaultStrokeStyle)}i=this.textState_;const d=e.getFont()||defaultFont;registerFont(d);const y=e.getScaleArray();i.overflow=e.getOverflow(),i.font=d,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||defaultTextBaseline,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||defaultPadding,i.scale=y===void 0?[1,1]:y;const v=e.getOffsetX(),_=e.getOffsetY(),C=e.getRotateWithView(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=v===void 0?0:v,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=C===void 0?!1:C,this.textRotation_=E===void 0?0:E,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:getUid(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+getUid(r.fillStyle):""}this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=BATCH_CONSTRUCTORS[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType$1.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let r;try{pixelContext.drawImage(e,t,i,1,1,0,0,1,1),r=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=createCanvasContext2D();const d=o.canvas;s.appendChild(d),a=d.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=getTopLeft(i),s=getTopRight(i),o=getBottomRight(i),a=getBottomLeft(i);apply(t.coordinateToPixelTransform,r),apply(t.coordinateToPixelTransform,s),apply(t.coordinateToPixelTransform,o),apply(t.coordinateToPixelTransform,a);const d=this.inversePixelTransform;apply(d,r),apply(d,s),apply(d,o),apply(d,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new RenderEvent(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(EventType.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(EventType.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,a){const d=s/2,y=o/2,v=r/t,_=-v,C=-e[0]+a,E=-e[1];return compose(this.tempTransform,d,y,v,_,-i,C,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(n,e,t,i,r,s,o,a,d,y,v,_){let C=n[e],E=n[e+1],S=0,b=0,P=0,x=0;function T(){S=C,b=E,e+=i,C=n[e],E=n[e+1],x+=P,P=Math.sqrt((C-S)*(C-S)+(E-b)*(E-b))}do T();while(e<t-i&&x+P<s);let R=P===0?0:(s-x)/P;const L=lerp(S,C,R),k=lerp(b,E,R),N=e-i,D=x,G=s+a*d(y,r,v);for(;e<t-i&&x+P<G;)T();R=P===0?0:(G-x)/P;const U=lerp(S,C,R),F=lerp(b,E,R);let B;if(_){const K=[L,k,U,F];rotate(K,0,4,2,_,K,K),B=K[0]>K[2]}else B=L>U;const z=Math.PI,Y=[],X=N+i===e;e=N,P=0,x=D,C=n[e],E=n[e+1];let q;if(X){T(),q=Math.atan2(E-b,C-S),B&&(q+=q>0?-z:z);const K=(U+L)/2,ee=(F+k)/2;return Y[0]=[K,ee,(G-s)/2,q,r],Y}r=r.replace(/\n/g," ");for(let K=0,ee=r.length;K<ee;){T();let te=Math.atan2(E-b,C-S);if(B&&(te+=te>0?-z:z),q!==void 0){let ct=te-q;if(ct+=ct>z?-2*z:ct<-z?2*z:0,Math.abs(ct)>o)return null}q=te;const Oe=K;let ie=0;for(;K<ee;++K){const ct=B?ee-K-1:K,Qe=a*d(y,r[ct],v);if(e+i<t&&x+P<s+ie+Qe/2)break;ie+=Qe}if(K===Oe)continue;const it=B?r.substring(ee-Oe,ee-K):r.substring(Oe,K);R=P===0?0:(s+ie/2-x)/P;const oe=lerp(S,C,R),ft=lerp(b,E,R);Y.push([oe,ft,ie/2,te,it]),s+=ie}return Y}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(n){return n[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(n,e){return e==="start"?e=rtlRegEx.test(n)?"right":"left":e==="end"&&(e=rtlRegEx.test(n)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class Executor{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,d=this.textStates[t],y=this.pixelRatio,v=[d.scale[0]*y,d.scale[1]*y],_=Array.isArray(e),C=d.justify?TEXT_ALIGN[d.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,d.textAlign||defaultTextAlign),E=r&&o.lineWidth?o.lineWidth:0,S=_?e:e.split(`
`).reduce(createTextChunks,[]),{width:b,height:P,widths:x,heights:T,lineWidths:R}=getTextDimensions(d,S),L=b+E,k=[],N=(L+2)*v[0],D=(P+E)*v[1],G={width:N<0?Math.floor(N):Math.ceil(N),height:D<0?Math.floor(D):Math.ceil(D),contextInstructions:k};(v[0]!=1||v[1]!=1)&&k.push("scale",v),r&&(k.push("strokeStyle",o.strokeStyle),k.push("lineWidth",E),k.push("lineCap",o.lineCap),k.push("lineJoin",o.lineJoin),k.push("miterLimit",o.miterLimit),k.push("setLineDash",[o.lineDash]),k.push("lineDashOffset",o.lineDashOffset)),i&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const U=.5-C;let F=C*L+U*E;const B=[],z=[];let Y=0,X=0,q=0,K=0,ee;for(let te=0,Oe=S.length;te<Oe;te+=2){const ie=S[te];if(ie===`
`){X+=Y,Y=0,F=C*L+U*E,++K;continue}const it=S[te+1]||d.font;it!==ee&&(r&&B.push("font",it),i&&z.push("font",it),ee=it),Y=Math.max(Y,T[q]);const oe=[ie,F+U*x[q]+C*(x[q]-R[K]),.5*(E+Y)+X];F+=x[q],r&&B.push("strokeText",oe),i&&z.push("fillText",oe),++q}return Array.prototype.push.apply(k,B),Array.prototype.push.apply(k,z),this.labels_[s]=G,G}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,d,y,v,_,C,E,S,b,P){a*=C[0],d*=C[1];let x=i-a,T=r-d;const R=s+y>e?e-y:s,L=o+v>t?t-v:o,k=S[3]+R*C[0]+S[1],N=S[0]+L*C[1]+S[2],D=x-S[3],G=T-S[0];(b||_!==0)&&(p1[0]=D,p4[0]=D,p1[1]=G,p2[1]=G,p2[0]=D+k,p3[0]=p2[0],p3[1]=G+N,p4[1]=p3[1]);let U;return _!==0?(U=compose(create(),i,r,1,1,_,-i,-r),apply(U,p1),apply(U,p2),apply(U,p3),apply(U,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(D,D+k),Math.min(G,G+N),Math.max(D,D+k),Math.max(G,G+N),tmpExtent),E&&(x=Math.round(x),T=Math.round(T)),{drawImageX:x,drawImageY:T,drawImageW:R,drawImageH:L,originX:y,originY:v,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:P},canvasTransform:U,scale:C}}replayImageOrLabel_(e,t,i,r,s,o,a){const d=!!(o||a),y=r.declutterBox,v=e.canvas,_=a?a[2]*r.scale[0]/2:0;return y.minX-_<=v.width/t&&y.maxX+_>=0&&y.minY-_<=v.height/t&&y.maxY+_>=0&&(d&&this.replayTextBackground_(e,p1,p2,p3,p4,o,a),drawImageOrLabel(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=apply(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],d=this.pixelRatio,y=horizontalTextAlign(Array.isArray(e)?e[0]:e,s.textAlign||defaultTextAlign),v=TEXT_ALIGN[s.textBaseline||defaultTextBaseline],_=a&&a.lineWidth?a.lineWidth:0,C=o.width/d-2*s.scale[0],E=y*C+2*(.5-y)*_,S=v*o.height/d+2*(.5-v)*_;return{label:o,anchorX:E,anchorY:S}}execute_(e,t,i,r,s,o,a,d){let y;this.pixelCoordinates_&&equals$2(i,this.renderedTransform_)?y=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),y=transform2D(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),setFromArray(this.renderedTransform_,i));let v=0;const _=r.length;let C=0,E,S,b,P,x,T,R,L,k,N,D,G,U=0,F=0,B=null,z=null;const Y=this.coordinateCache_,X=this.viewRotation_,q=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:X},ee=this.instructions!=r||this.overlaps?0:200;let te,Oe,ie,it;for(;v<_;){const oe=r[v];switch(oe[0]){case Instruction.BEGIN_GEOMETRY:te=oe[1],it=oe[3],te.getGeometry()?a!==void 0&&!intersects$1(a,it.getExtent())?v=oe[2]+1:++v:v=oe[2];break;case Instruction.BEGIN_PATH:U>ee&&(this.fill_(e),U=0),F>ee&&(e.stroke(),F=0),!U&&!F&&(e.beginPath(),P=NaN,x=NaN),++v;break;case Instruction.CIRCLE:C=oe[1];const ct=y[C],Qe=y[C+1],dt=y[C+2],re=y[C+3],Ve=dt-ct,je=re-Qe,se=Math.sqrt(Ve*Ve+je*je);e.moveTo(ct+se,Qe),e.arc(ct,Qe,se,0,2*Math.PI,!0),++v;break;case Instruction.CLOSE_PATH:e.closePath(),++v;break;case Instruction.CUSTOM:C=oe[1],E=oe[2];const pt=oe[3],xt=oe[4],H=oe.length==6?oe[5]:void 0;K.geometry=pt,K.feature=te,v in Y||(Y[v]=[]);const W=Y[v];H?H(y,C,E,2,W):(W[0]=y[C],W[1]=y[C+1],W.length=2),xt(W,K),++v;break;case Instruction.DRAW_IMAGE:C=oe[1],E=oe[2],L=oe[3],S=oe[4],b=oe[5];let $=oe[6];const de=oe[7],ue=oe[8],fe=oe[9],Ge=oe[10];let Be=oe[11];const ye=oe[12];let pe=oe[13];const J=oe[14],Q=oe[15];if(!L&&oe.length>=20){k=oe[19],N=oe[20],D=oe[21],G=oe[22];const cn=this.drawLabelWithPointPlacement_(k,N,D,G);L=cn.label,oe[3]=L;const yn=oe[23];S=(cn.anchorX-yn)*this.pixelRatio,oe[4]=S;const hn=oe[24];b=(cn.anchorY-hn)*this.pixelRatio,oe[5]=b,$=L.height,oe[6]=$,pe=L.width,oe[13]=pe}let ne;oe.length>25&&(ne=oe[25]);let le,ke,be;oe.length>17?(le=oe[16],ke=oe[17],be=oe[18]):(le=defaultPadding,ke=!1,be=!1),Ge&&q?Be+=X:!Ge&&!q&&(Be-=X);let Ze=0;for(;C<E;C+=2){if(ne&&ne[Ze++]<pe/this.pixelRatio)continue;const cn=this.calculateImageOrLabelDimensions_(L.width,L.height,y[C],y[C+1],pe,$,S,b,ue,fe,Be,ye,s,le,ke||be,te),yn=[e,t,L,cn,de,ke?B:null,be?z:null];if(d){if(J==="none")continue;if(J==="obstacle"){d.insert(cn.declutterBox);continue}else{let hn,Gt;if(Q){const Kt=E-C;if(!Q[Kt]){Q[Kt]=yn;continue}if(hn=Q[Kt],delete Q[Kt],Gt=getDeclutterBox(hn),d.collides(Gt))continue}if(d.collides(cn.declutterBox))continue;hn&&(d.insert(Gt),this.replayImageOrLabel_.apply(this,hn)),d.insert(cn.declutterBox)}}this.replayImageOrLabel_.apply(this,yn)}++v;break;case Instruction.DRAW_CHARS:const mt=oe[1],ut=oe[2],Ot=oe[3],Pt=oe[4];G=oe[5];const Wt=oe[6],Ft=oe[7],vt=oe[8];D=oe[9];const Nt=oe[10];k=oe[11],N=oe[12];const Ut=[oe[13],oe[13]],Yt=this.textStates[N],jt=Yt.font,Zt=[Yt.scale[0]*Ft,Yt.scale[1]*Ft];let Jt;jt in this.widths_?Jt=this.widths_[jt]:(Jt={},this.widths_[jt]=Jt);const fn=lineStringLength(y,mt,ut,2),dn=Math.abs(Zt[0])*measureAndCacheTextWidth(jt,k,Jt);if(Pt||dn<=fn){const cn=this.textStates[N].textAlign,yn=(fn-dn)*horizontalTextAlign(k,cn),hn=drawTextOnPath(y,mt,ut,2,k,yn,Wt,Math.abs(Zt[0]),measureAndCacheTextWidth,jt,Jt,q?0:this.viewRotation_);e:if(hn){const Gt=[];let Kt,Cn,vn,Qt,un;if(D)for(Kt=0,Cn=hn.length;Kt<Cn;++Kt){un=hn[Kt],vn=un[4],Qt=this.createLabel(vn,N,"",D),S=un[2]+(Zt[0]<0?-Nt:Nt),b=Ot*Qt.height+(.5-Ot)*2*Nt*Zt[1]/Zt[0]-vt;const gn=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,un[0],un[1],Qt.width,Qt.height,S,b,0,0,un[3],Ut,!1,defaultPadding,!1,te);if(d&&d.collides(gn.declutterBox))break e;Gt.push([e,t,Qt,gn,1,null,null])}if(G)for(Kt=0,Cn=hn.length;Kt<Cn;++Kt){un=hn[Kt],vn=un[4],Qt=this.createLabel(vn,N,G,""),S=un[2],b=Ot*Qt.height-vt;const gn=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,un[0],un[1],Qt.width,Qt.height,S,b,0,0,un[3],Ut,!1,defaultPadding,!1,te);if(d&&d.collides(gn.declutterBox))break e;Gt.push([e,t,Qt,gn,1,null,null])}d&&d.load(Gt.map(getDeclutterBox));for(let gn=0,pn=Gt.length;gn<pn;++gn)this.replayImageOrLabel_.apply(this,Gt[gn])}}++v;break;case Instruction.END_GEOMETRY:if(o!==void 0){te=oe[1];const cn=o(te,it);if(cn)return cn}++v;break;case Instruction.FILL:ee?U++:this.fill_(e),++v;break;case Instruction.MOVE_TO_LINE_TO:for(C=oe[1],E=oe[2],Oe=y[C],ie=y[C+1],T=Oe+.5|0,R=ie+.5|0,(T!==P||R!==x)&&(e.moveTo(Oe,ie),P=T,x=R),C+=2;C<E;C+=2)Oe=y[C],ie=y[C+1],T=Oe+.5|0,R=ie+.5|0,(C==E-2||T!==P||R!==x)&&(e.lineTo(Oe,ie),P=T,x=R);++v;break;case Instruction.SET_FILL_STYLE:B=oe,this.alignFill_=oe[2],U&&(this.fill_(e),U=0,F&&(e.stroke(),F=0)),e.fillStyle=oe[1],++v;break;case Instruction.SET_STROKE_STYLE:z=oe,F&&(e.stroke(),F=0),this.setStrokeStyle_(e,oe),++v;break;case Instruction.STROKE:ee?F++:e.stroke(),++v;break;default:++v;break}}U&&this.fill_(e),F&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,d=compose(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),y=!this.hitDetectionContext_;y&&(this.hitDetectionContext_=createCanvasContext2D(a,a,void 0,{willReadFrequently:!0}));const v=this.hitDetectionContext_;v.canvas.width!==a||v.canvas.height!==a?(v.canvas.width=a,v.canvas.height=a):y||v.clearRect(0,0,a,a);let _;this.renderBuffer_!==void 0&&(_=createEmpty(),extendCoordinate(_,e),buffer(_,t*(this.renderBuffer_+r),_));const C=getPixelIndexArray(r);let E;function S(k,N){const D=v.getImageData(0,0,a,a).data;for(let G=0,U=C.length;G<U;G++)if(D[C[G]]>0){if(!o||E!=="Image"&&E!=="Text"||o.includes(k)){const F=(C[G]-3)/4,B=r-F%a,z=r-(F/a|0),Y=s(k,N,B*B+z*z);if(Y)return Y}v.clearRect(0,0,a,a);break}}const b=Object.keys(this.executorsByZIndex_).map(Number);b.sort(ascending);let P,x,T,R,L;for(P=b.length-1;P>=0;--P){const k=b[P].toString();for(T=this.executorsByZIndex_[k],x=ORDER.length-1;x>=0;--x)if(E=ORDER[x],R=T[E],R!==void 0&&(L=R.executeHitDetection(v,d,i,S,_),L))return L}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return transform2D(a,0,8,2,e,a),a}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||ORDER;let y,v,_,C,E,S;for(a&&d.reverse(),y=0,v=d.length;y<v;++y){const b=d[y].toString();for(E=this.executorsByZIndex_[b],_=0,C=o.length;_<C;++_){const P=o[_];S=E[P],S!==void 0&&S.execute(e,t,i,r,s,a)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(n){if(circlePixelIndexArrayCache[n]!==void 0)return circlePixelIndexArrayCache[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let d=i[a];d||(d=[],i[a]=d),d.push(((n+s)*e+(n+o))*4+3),s>0&&d.push(((n-s)*e+(n+o))*4+3),o>0&&(d.push(((n+s)*e+(n-o))*4+3),s>0&&d.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return circlePixelIndexArrayCache[n]=r,r}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?toFixed(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,t,i,r){if(!this.image_)return;const s=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,d=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=d*this.imageOpacity_);let y=this.imageRotation_;this.transformRotation_===0&&(y-=this.viewRotation_),this.imageRotateWithView_&&(y+=this.viewRotation_);for(let v=0,_=s.length;v<_;v+=2){const C=s[v]-this.imageAnchorX_,E=s[v+1]-this.imageAnchorY_;if(y!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=C+this.imageAnchorX_,b=E+this.imageAnchorY_;compose(a,S,b,1,1,y,-S,-b),o.save(),o.transform.apply(o,a),o.translate(S,b),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,C,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=d)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const d=s[t]+this.textOffsetX_,y=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(d-this.textOffsetX_,y-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,d,y),this.textFillState_&&o.fillText(this.text_,d,y))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let d=a.length;s&&(d-=2);for(let y=2;y<d;y+=2)o.lineTo(a[y],a[y+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let d=0,y=o.length;d<y;++d)s=this.moveToLineTo_(r,s,o[d],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,d=s.length;a<d;++a){const y=s[a];r=this.drawRings_(i,r,y,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:defaultTextAlign;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:asColorLike(i||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),d=t.getWidth(),y=t.getMiterLimit(),v=s||defaultLineDash;this.strokeState_={lineCap:r!==void 0?r:defaultLineCap,lineDash:this.pixelRatio_===1?v:v.map(_=>_*this.pixelRatio_),lineDashOffset:(o||defaultLineDashOffset)*this.pixelRatio_,lineJoin:a!==void 0?a:defaultLineJoin,lineWidth:(d!==void 0?d:defaultLineWidth)*this.pixelRatio_,miterLimit:y!==void 0?y:defaultMiterLimit,strokeStyle:asColorLike(i||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:asColorLike(E||defaultFillStyle)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),S=i.getLineCap(),b=i.getLineDash(),P=i.getLineDashOffset(),x=i.getLineJoin(),T=i.getWidth(),R=i.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:defaultLineCap,lineDash:b||defaultLineDash,lineDashOffset:P||defaultLineDashOffset,lineJoin:x!==void 0?x:defaultLineJoin,lineWidth:T!==void 0?T:defaultLineWidth,miterLimit:R!==void 0?R:defaultMiterLimit,strokeStyle:asColorLike(E||defaultStrokeStyle)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),d=e.getRotation(),y=e.getScaleArray(),v=e.getText(),_=e.getTextAlign(),C=e.getTextBaseline();this.textState_={font:r!==void 0?r:defaultFont,textAlign:_!==void 0?_:defaultTextAlign,textBaseline:C!==void 0?C:defaultTextBaseline},this.text_=v!==void 0?Array.isArray(v)?v.reduce((E,S,b)=>E+=b%2?" ":S,""):v:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(n,e,t,i,r,s,o){const a=n[0]*HIT_DETECT_RESOLUTION,d=n[1]*HIT_DETECT_RESOLUTION,y=createCanvasContext2D(a,d);y.imageSmoothingEnabled=!1;const v=y.canvas,_=new CanvasImmediateRenderer(y,HIT_DETECT_RESOLUTION,r,null,o),C=t.length,E=Math.floor((256*256*256-1)/C),S={};for(let P=1;P<=C;++P){const x=t[P-1],T=x.getStyleFunction()||i;if(!T)continue;let R=T(x,s);if(!R)continue;Array.isArray(R)||(R=[R]);const k=(P*E).toString(16).padStart(7,"#00000");for(let N=0,D=R.length;N<D;++N){const G=R[N],U=G.getGeometryFunction()(x);if(!U||!intersects$1(r,U.getExtent()))continue;const F=G.clone(),B=F.getFill();B&&B.setColor(k);const z=F.getStroke();z&&(z.setColor(k),z.setLineDash(null)),F.setText(void 0);const Y=G.getImage();if(Y){const ee=Y.getImageSize();if(!ee)continue;const te=createCanvasContext2D(ee[0],ee[1],void 0,{alpha:!1}),Oe=te.canvas;te.fillStyle=k,te.fillRect(0,0,Oe.width,Oe.height),F.setImage(new Icon({img:Oe,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}const X=F.getZIndex()||0;let q=S[X];q||(q={},S[X]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);const K=U.getType();if(K==="GeometryCollection"){const ee=U.getGeometriesArrayRecursive();for(let te=0,Oe=ee.length;te<Oe;++te){const ie=ee[te];q[ie.getType().replace("Multi","")].push(ie,F)}}else q[K.replace("Multi","")].push(U,F)}}const b=Object.keys(S).map(Number).sort(ascending);for(let P=0,x=b.length;P<x;++P){const T=S[b[P]];for(const R in T){const L=T[R];for(let k=0,N=L.length;k<N;k+=2){_.setStyle(L[k+1]);for(let D=0,G=e.length;D<G;++D)_.setTransform(e[D]),_.drawGeometry(L[k])}}}return y.getImageData(0,0,v.width,v.height)}function hitDetect(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*HIT_DETECT_RESOLUTION),s=Math.floor(Math.round(n[1])*HIT_DETECT_RESOLUTION),o=(clamp(r,0,t.width-1)+clamp(s,0,t.height-1)*t.width)*4,a=t.data[o],d=t.data[o+1],v=t.data[o+2]+256*(d+256*a),_=Math.floor((256*256*256-1)/e.length);v&&v%_===0&&i.push(e[v/_-1])}return i}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(n,e){return parseInt(getUid(n),10)-parseInt(getUid(e),10)}function getSquaredTolerance(n,e){const t=getTolerance(n,e);return t*t}function getTolerance(n,e){return SIMPLIFY_TOLERANCE*n/e}function renderCircleGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const d=n.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(s,o),d.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const d=(r||n).getBuilder(t.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}function renderFeature$1(n,e,t,i,r,s,o){let a=!1;const d=t.getImage();if(d){const y=d.getImageState();y==ImageState.LOADED||y==ImageState.ERROR?d.unlistenImageChange(r):(y==ImageState.IDLE&&d.load(),d.listenImageChange(r),a=!0)}return renderFeatureInternal(n,e,t,i,s,o),a}function renderFeatureInternal(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);if(t.getRenderer())renderGeometry(n,a,t,e);else{const y=GEOMETRY_RENDERERS[a.getType()];y(n,a,t,e,s)}}function renderGeometry(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)renderGeometry(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const d=GEOMETRY_RENDERERS[s[o].getType()];d(n,s[o],t,i,r)}}function renderLineStringGeometry(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiLineStringGeometry(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiPolygonGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,o),d.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const d=(r||n).getBuilder(t.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}function renderPointGeometry(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=ImageState.LOADED)return;let d=n;if(r){const v=s.getDeclutterMode();if(v!=="none")if(d=r,v==="obstacle"){const _=n.getBuilder(t.getZIndex(),"Image");_.setImageStyle(s,a),_.drawPoint(e,i)}else o&&o.getText()&&(a={})}const y=d.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,a),y.drawPoint(e,i)}if(o&&o.getText()){let d=n;r&&(d=r);const y=d.getBuilder(t.getZIndex(),"Text");y.setTextStyle(o,a),y.drawText(e,i)}}function renderMultiPointGeometry(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=ImageState.LOADED)return;let d=n;if(r){const v=s.getDeclutterMode();if(v!=="none")if(d=r,v==="obstacle"){const _=n.getBuilder(t.getZIndex(),"Image");_.setImageStyle(s,a),_.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const y=d.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,a),y.drawMultiPoint(e,i)}if(o&&o.getText()){let d=n;r&&(d=r);const y=d.getBuilder(t.getZIndex(),"Text");y.setTextStyle(o,a),y.drawText(e,i)}}function renderPolygonGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,o),d.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const d=(r||n).getBuilder(t.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,d=s.projection,y=s.rotation,v=d.getExtent(),_=this.getLayer().getSource(),C=t.pixelRatio,E=t.viewHints,S=!(E[ViewHint.ANIMATING]||E[ViewHint.INTERACTING]),b=this.compositionContext_,P=Math.round(t.size[0]*C),x=Math.round(t.size[1]*C),T=_.getWrapX()&&d.canWrapX(),R=T?getWidth(v):null,L=T?Math.ceil((r[2]-v[2])/R)+1:1;let k=T?Math.floor((r[0]-v[0])/R):0;do{const N=this.getRenderTransform(o,a,y,C,P,x,k*R);e.execute(b,1,N,y,S,void 0,i)}while(++k<L)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/i,1/i),makeInverse(this.inversePixelTransform,this.pixelTransform);const s=toString$3(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,d=this.replayGroup_,y=this.declutterExecutorGroup;let v=d&&!d.isEmpty()||y&&!y.isEmpty();if(!v&&!(this.getLayer().hasListener(EventType.PRERENDER)||this.getLayer().hasListener(EventType.POSTRENDER)))return null;const _=Math.round(e.size[0]*i),C=Math.round(e.size[1]*i);a.width!=_||a.height!=C?(a.width=_,a.height=C,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,_,C),this.preRender(o,e);const E=e.viewState;E.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let S=!1;if(v&&r.extent&&this.clipping){const b=fromUserExtent(r.extent);v=intersects$1(b,e.extent),S=v&&!containsExtent(b,e.extent),S&&this.clipUnrotated(this.compositionContext_,e,b)}return v&&this.renderWorlds(d,e),S&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==E.rotation&&(this.renderedRotation_=E.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];apply(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,d=this.wrappedRenderedExtent_,y=this.getLayer(),v=[],_=i[0]*HIT_DETECT_RESOLUTION,C=i[1]*HIT_DETECT_RESOLUTION;v.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,_,C,0).slice());const E=y.getSource(),S=a.getExtent();if(E.getWrapX()&&a.canWrapX()&&!containsExtent(S,d)){let b=d[0];const P=getWidth(S);let x=0,T;for(;b<S[0];)--x,T=P*x,v.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,_,C,T).slice()),b+=P;for(x=0,b=d[2];b>S[2];)++x,T=P*x,v.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,_,C,T).slice()),b-=P}this.hitDetectionImageData_=createHitDetectionImageData(i,v,this.renderedFeatures_,y.getStyleFunction(),d,s,o)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,d=this.getLayer(),y={},v=function(E,S,b){const P=getUid(E),x=y[P];if(x){if(x!==!0&&b<x.distanceSq){if(b===0)return y[P]=!0,s.splice(s.lastIndexOf(x),1),r(E,d,S);x.geometry=S,x.distanceSq=b}}else{if(b===0)return y[P]=!0,r(E,d,S);s.push(y[P]={feature:E,layer:d,geometry:S,distanceSq:b,callback:r})}};let _;const C=[this.replayGroup_];return this.declutterExecutorGroup&&C.push(this.declutterExecutorGroup),C.some(E=>_=E.forEachFeatureAtCoordinate(e,o,a,i,v,E===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(S=>S.value):null)),_}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[ViewHint.ANIMATING],s=e.viewHints[ViewHint.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,y=e.viewState,v=y.projection,_=y.resolution,C=e.pixelRatio,E=t.getRevision(),S=t.getRenderBuffer();let b=t.getRenderOrder();b===void 0&&(b=defaultOrder);const P=y.center.slice(),x=buffer(d,S*_),T=x.slice(),R=[x.slice()],L=v.getExtent();if(i.getWrapX()&&v.canWrapX()&&!containsExtent(L,e.extent)){const q=getWidth(L),K=Math.max(getWidth(x)/2,q);x[0]=L[0]-K,x[2]=L[2]+K,wrapX$1(P,v);const ee=wrapX$2(R[0],v);ee[0]<L[0]&&ee[2]<L[2]?R.push([ee[0]+q,ee[1],ee[2]+q,ee[3]]):ee[0]>L[0]&&ee[2]>L[2]&&R.push([ee[0]-q,ee[1],ee[2]-q,ee[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==E&&this.renderedRenderOrder_==b&&containsExtent(this.wrappedRenderedExtent_,x))return equals$2(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=P,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new BuilderGroup(getTolerance(_,C),x,_,C);let N;this.getLayer().getDeclutter()&&(N=new BuilderGroup(getTolerance(_,C),x,_,C));let D;for(let q=0,K=R.length;q<K;++q)i.loadFeatures(R[q],_,v);const G=getSquaredTolerance(_,C);let U=!0;const F=q=>{let K;const ee=q.getStyleFunction()||t.getStyleFunction();if(ee&&(K=ee(q,_)),K){const te=this.renderFeature(q,G,K,k,D,N);U=U&&!te}},B=toUserExtent(x),z=i.getFeaturesInExtent(B);b&&z.sort(b);for(let q=0,K=z.length;q<K;++q)F(z[q]);this.renderedFeatures_=z,this.ready=U;const Y=k.finish(),X=new ExecutorGroup(x,_,C,i.getOverlaps(),Y,t.getRenderBuffer());return N&&(this.declutterExecutorGroup=new ExecutorGroup(x,_,C,i.getOverlaps(),N.finish(),t.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=E,this.renderedRenderOrder_=b,this.renderedExtent_=T,this.wrappedRenderedExtent_=x,this.renderedCenter_=P,this.renderedProjection_=v,this.replayGroup_=X,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let d=0,y=i.length;d<y;++d)a=renderFeature$1(r,e,i[d],t,this.boundHandleStyleImageChange_,s,o)||a;else a=renderFeature$1(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(n,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();appendGeometryTraceTargets(n,s,t)}return t}function getSquaredDistance(n,e){return squaredDistance$1(n[0],n[1],e[0],e[1])}function getCoordinate(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function getCumulativeSquaredDistance(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o){const d=interpolateCoordinate(n,i),y=interpolateCoordinate(n,r);return getSquaredDistance(d,y)}let a=0;if(i<s){const d=interpolateCoordinate(n,i),y=getCoordinate(n,s);a+=getSquaredDistance(d,y)}if(o<r){const d=getCoordinate(n,o),y=interpolateCoordinate(n,r);a+=getSquaredDistance(d,y)}for(let d=s;d<o-1;++d){const y=getCoordinate(n,d),v=getCoordinate(n,d+1);a+=getSquaredDistance(y,v)}return a}function appendGeometryTraceTargets(n,e,t){if(e instanceof LineString){appendTraceTarget(n,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)appendTraceTarget(n,i[r],!1,t);return}if(e instanceof Polygon){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)appendTraceTarget(n,i[r],!0,t);return}if(e instanceof MultiPolygon){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,d=o.length;a<d;++a)appendTraceTarget(n,o[a],!0,t)}return}if(e instanceof GeometryCollection){const i=e.getGeometries();for(let r=0;r<i.length;++r)appendGeometryTraceTargets(n,i[r],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,d=NaN;for(let _=0;_<e.targets.length;++_){const C=e.targets[_],E=C.coordinates;let S=1/0,b;for(let P=0;P<E.length-1;++P){const x=E[P],T=E[P+1],R=getPointSegmentRelationship(r,s,x,T);R.squaredDistance<S&&(S=R.squaredDistance,b=P+R.along)}S<o&&(o=S,C.ring&&e.targetIndex===_&&(C.endIndex>C.startIndex?b<C.startIndex&&(b+=E.length):C.endIndex<C.startIndex&&b>C.startIndex&&(b-=E.length)),d=b,a=_)}const y=e.targets[a];let v=y.ring;if(e.targetIndex===a&&v){const _=interpolateCoordinate(y.coordinates,d),C=t.getPixelFromCoordinate(_);distance(C,e.startPx)>i&&(v=!1)}if(v){const _=y.coordinates,C=_.length,E=y.startIndex,S=d;if(E<S){const b=getCumulativeSquaredDistance(_,E,S);getCumulativeSquaredDistance(_,E,S-C)<b&&(d-=C)}else{const b=getCumulativeSquaredDistance(_,E,S);getCumulativeSquaredDistance(_,E,S+C)<b&&(d+=C)}}return sharedUpdateInfo.index=a,sharedUpdateInfo.endIndex=d,sharedUpdateInfo}function appendTraceTarget(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const d=e[o],y=e[o+1],v=getPointSegmentRelationship(r,s,d,y);if(v.squaredDistance===0){const _=o+v.along;i.push({coordinates:e,ring:t,startIndex:_,endIndex:_});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(n,e,t,i){const r=t[0],s=t[1],o=i[0],a=i[1],d=o-r,y=a-s;let v=0,_=r,C=s;return(d!==0||y!==0)&&(v=clamp(((n-r)*d+(e-s)*y)/(d*d+y*y),0,1),_+=d*v,C+=y*v),sharedRel.along=v,sharedRel.squaredDistance=toFixed(squaredDistance$1(n,e,_,C),10),sharedRel}function interpolateCoordinate(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],d=o[1],y=n[s],v=y[0]-a,_=y[1]-d;return[a+v*r,d+_*r]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if(r==="Circle")i=function(s,o,a){const d=o||new Circle([NaN,NaN]),y=fromUserCoordinate(s[0]),v=squaredDistance(y,fromUserCoordinate(s[s.length-1]));return d.setCenterAndRadius(y,Math.sqrt(v),this.geometryLayout_),d};else{let s;r==="Point"?s=Point$1:r==="LineString"?s=LineString:r==="Polygon"&&(s=Polygon),i=function(o,a,d){return a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always$1:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType$1.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===MapBrowserEventType.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=boundingExtent([i,r]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=getTraceTargets(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,r=e.startIndex<=t;i===r?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(getCoordinate(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(getCoordinate(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const i=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const d=t.targets[t.targetIndex];this.removeTracedCoordinates_(d.startIndex,d.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=interpolateCoordinate(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")r=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let d=0,y=s.length;d<y;d++){const v=s[d],_=a.getPixelFromCoordinate(v),C=e[0]-_[0],E=e[1]-_[1],S=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(C*C+E*E)<=S,i){this.finishCoordinate_=v;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=getStrideForLayout(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=getStrideForLayout(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const d=o[o.length-2].slice();o[o.length-1]=d,this.createOrUpdateSketchPoint_(d)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,r)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let r;if(t==="LineString"||t==="Circle")r=this.sketchCoords_;else if(t==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Feature(new Point$1(r)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const n=createEditingStyle();return function(e,t){return n[e.getGeometry().getType()]}}function getMode(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(i){return altKeyOnly(i)&&singleClick(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener(EventType$1.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,d=o.length;a<d;++a){const y=o[a].feature;y&&!i.includes(y)&&this.featuresBeingModified_.push(y)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType$1.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(boundingExtent(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,d=o.length-1;a<d;++a){const y=o.slice(a,a+2),v={feature:e,geometry:t,depth:[r],index:a,segment:y};this.rBush_.insert(boundingExtent(y),v)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,d=o.length-1;a<d;++a){const y=o.slice(a,a+2),v={feature:e,geometry:t,depth:[r],index:a,segment:y};this.rBush_.insert(boundingExtent(y),v)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,d=o.length;a<d;++a){const y=o[a];for(let v=0,_=y.length-1;v<_;++v){const C=y.slice(v,v+2),E={feature:e,geometry:t,depth:[a,r],index:v,segment:C};this.rBush_.insert(boundingExtent(C),E)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[i,i]},s={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(createOrUpdateFromCoordinate(i),r);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new Feature(new Point$1(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],d=a[0],y=d.feature;i.includes(y)||i.push(y);const v=d.geometry;r.includes(v)||r.push(v);const _=d.depth;let C;const E=d.segment,S=a[1];for(;t.length<v.getStride();)t.push(E[S][t.length]);switch(v.getType()){case"Point":C=t,E[0]=t,E[1]=t;break;case"MultiPoint":C=v.getCoordinates(),C[d.index]=t,E[0]=t,E[1]=t;break;case"LineString":C=v.getCoordinates(),C[d.index+S]=t,E[S]=t;break;case"MultiLineString":C=v.getCoordinates(),C[_[0]][d.index+S]=t,E[S]=t;break;case"Polygon":C=v.getCoordinates(),C[_[0]][d.index+S]=t,E[S]=t;break;case"MultiPolygon":C=v.getCoordinates(),C[_[1]][_[0]][d.index+S]=t,E[S]=t;break;case"Circle":if(E[0]=t,E[1]=t,d.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,v.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let b=distance(fromUserCoordinate(v.getCenter()),fromUserCoordinate(t));v.setRadius(b),this.changingFeature_=!1}break}C&&this.setGeometryCoordinates_(v,C)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){e.map.getView().getProjection();const r=[],s=i.getGeometry().getCoordinates(),o=boundingExtent([s]),a=this.rBush_.getInExtent(o),d={};a.sort(compareIndexes);for(let y=0,v=a.length;y<v;++y){const _=a[y],C=_.segment;let E=getUid(_.geometry);const S=_.depth;if(S&&(E+="-"+S.join("-")),d[E]||(d[E]=new Array(2)),_.geometry.getType()==="Circle"&&_.index===CIRCLE_CIRCUMFERENCE_INDEX){const b=closestOnSegmentData(t,_);equals(b,s)&&!d[E][0]&&(this.dragSegments_.push([_,0]),d[E][0]=_);continue}if(equals(C[0],s)&&!d[E][0]){this.dragSegments_.push([_,0]),d[E][0]=_;continue}if(equals(C[1],s)&&!d[E][1]){if(d[E][0]&&d[E][0].index===0){let b=_.geometry.getCoordinates();switch(_.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":b=b[S[1]];case"Polygon":if(_.index!==b[S[0]].length-2)continue;break}}this.dragSegments_.push([_,1]),d[E][1]=_;continue}getUid(C)in this.vertexSegments_&&!d[E][0]&&!d[E][1]&&this.insertVertexCondition_(e)&&r.push(_)}r.length&&this.willModifyFeatures_(e,[r]);for(let y=r.length-1;y>=0;--y)this.insertVertex_(r[y],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if(r.getType()==="Circle"){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(createOrUpdateFromCoordinate(s),o);let d=r;this.rBush_.update(d.getExtent(),a)}else this.rBush_.update(boundingExtent(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(d,y){return projectedDistanceToSegmentDataSquared(r,d)-projectedDistanceToSegmentDataSquared(r,y)};let o,a;if(this.hitDetection_){const d=typeof this.hitDetection_=="object"?y=>y===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(y,v,_)=>{_&&_.getType()==="Point"&&(_=new Point$1(toUserCoordinate(_.getCoordinates())));const C=_||y.getGeometry();if(y instanceof Feature&&this.features_.getArray().includes(y)){a=C;const E=y.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:y,geometry:a,segment:[E,E]}]}return!0},{layerFilter:d})}if(!o){const d=fromUserExtent(createOrUpdateFromCoordinate(r,tempExtent)),y=t.getView().getResolution()*this.pixelTolerance_,v=toUserExtent(buffer(d,y,tempExtent));o=this.rBush_.getInExtent(v)}if(o&&o.length>0){const d=o.sort(s)[0],y=d.segment;let v=closestOnSegmentData(r,d);const _=t.getPixelFromCoordinate(v);let C=distance(e,_);if(a||C<=this.pixelTolerance_){const E={};if(E[getUid(y)]=!0,this.snapToPointer_||(this.delta_[0]=v[0]-r[0],this.delta_[1]=v[1]-r[1]),d.geometry.getType()==="Circle"&&d.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(v,[d.feature],[d.geometry]);else{const S=t.getPixelFromCoordinate(y[0]),b=t.getPixelFromCoordinate(y[1]),P=squaredDistance(_,S),x=squaredDistance(_,b);C=Math.sqrt(Math.min(P,x)),this.snappedToVertex_=C<=this.pixelTolerance_,this.snappedToVertex_&&(v=P>x?y[1]:y[0]),this.createOrUpdateVertexFeature_(v,[d.feature],[d.geometry]);const T={};T[getUid(d.geometry)]=!0;for(let R=1,L=o.length;R<L;++R){const k=o[R].segment;if(equals(y[0],k[0])&&equals(y[1],k[1])||equals(y[0],k[1])&&equals(y[1],k[0])){const N=getUid(o[R].geometry);N in T||(T[N]=!0,E[getUid(k)]=!0)}else break}}this.vertexSegments_=E;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let d;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":d=s.getCoordinates(),d[o[0]].splice(a+1,0,t);break;case"Polygon":d=s.getCoordinates(),d[o[0]].splice(a+1,0,t);break;case"MultiPolygon":d=s.getCoordinates(),d[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":d=s.getCoordinates(),d.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,d);const y=this.rBush_;y.remove(e),this.updateSegmentIndices_(s,a,o,1);const v={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};y.insert(boundingExtent(v.segment),v),this.dragSegments_.push([v,1]);const _={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};y.insert(boundingExtent(_.segment),_),this.dragSegments_.push([_,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,r,s,o,a,d,y,v,_,C,E,S;for(d=e.length-1;d>=0;--d)o=e[d],E=o[0],S=getUid(E.feature),E.depth&&(S+="-"+E.depth.join("-")),S in t||(t[S]={}),o[1]===0?(t[S].right=E,t[S].index=E.index):o[1]==1&&(t[S].left=E,t[S].index=E.index+1);for(S in t){switch(C=t[S].right,v=t[S].left,y=t[S].index,_=y-1,v!==void 0?E=v:E=C,_<0&&(_=0),a=E.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[E.depth[0]].length>2&&(s[E.depth[0]].splice(y,1),i=!0);break;case"LineString":s.length>2&&(s.splice(y,1),i=!0);break;case"MultiPolygon":r=r[E.depth[1]];case"Polygon":r=r[E.depth[0]],r.length>4&&(y==r.length-1&&(y=0),r.splice(y,1),i=!0,y===0&&(r.pop(),r.push(r[0]),_=r.length-1));break}if(i){this.setGeometryCoordinates_(a,s);const b=[];if(v!==void 0&&(this.rBush_.remove(v),b.push(v.segment[0])),C!==void 0&&(this.rBush_.remove(C),b.push(C.segment[1])),v!==void 0&&C!==void 0){const P={depth:E.depth,feature:E.feature,geometry:E.geometry,index:_,segment:b};this.rBush_.insert(boundingExtent(P.segment),P)}this.updateSegmentIndices_(a,y,E.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||equals$2(s.depth,i))&&s.index>t&&(s.index+=r)})}}function compareIndexes(n,e){return n.index-e.index}function projectedDistanceToSegmentDataSquared(n,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const o=squaredDistance(s.getCenter(),fromUserCoordinate(n)),a=Math.sqrt(o)-s.getRadius();return a*a}}const r=fromUserCoordinate(n);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(r,tempSegment)}function closestOnSegmentData(n,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(i.getClosestPoint(fromUserCoordinate(n)));const r=fromUserCoordinate(n);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(r,tempSegment))}function getDefaultStyleFunction$1(){const n=createEditingStyle();return function(e,t){return n.Point}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof VectorLayer&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof Select&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const i=getUid(e);e.setStyle(originalFeatureStyles[i]),delete originalFeatureStyles[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),d=[],y=[];if(s){clear$1(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(v,_)=>{if(!(!(v instanceof Feature)||!this.filter_(v,_)))return this.addFeatureLayerAssociation_(v,_),y.push(v),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let v=a.getLength()-1;v>=0;--v){const _=a.item(v),C=y.indexOf(_);C>-1?y.splice(C,1):(a.remove(_),d.push(_))}y.length!==0&&a.extend(y)}else{o.forEachFeatureAtPixel(e.pixel,(v,_)=>{if(!(!(v instanceof Feature)||!this.filter_(v,_)))return(t||r)&&!a.getArray().includes(v)?(this.addFeatureLayerAssociation_(v,_),y.push(v)):(i||r)&&a.getArray().includes(v)&&(d.push(v),this.removeFeatureLayerAssociation_(v)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let v=d.length-1;v>=0;--v)a.remove(d[v]);a.extend(y)}return(y.length>0||d.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,y,d,e)),!0}}function getDefaultStyleFunction(){const n=createEditingStyle();return extend$4(n.Polygon,n.LineString),extend$4(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}var loglevel={exports:{}};(function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(commonjsGlobal,function(){var e=function(){},t="undefined",i=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},o=null;function a(b,P){var x=b[P];if(typeof x.bind=="function")return x.bind(b);try{return Function.prototype.bind.call(x,b)}catch{return function(){return Function.prototype.apply.apply(x,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function y(b){return b==="debug"&&(b="log"),typeof console===t?!1:b==="trace"&&i?d:console[b]!==void 0?a(console,b):console.log!==void 0?a(console,"log"):e}function v(){for(var b=this.getLevel(),P=0;P<r.length;P++){var x=r[P];this[x]=P<b?e:this.methodFactory(x,b,this.name)}if(this.log=this.debug,typeof console===t&&b<this.levels.SILENT)return"No console available for logging"}function _(b){return function(){typeof console!==t&&(v.call(this),this[b].apply(this,arguments))}}function C(b,P,x){return y(b)||_.apply(this,arguments)}function E(b,P){var x=this,T,R,L,k="loglevel";typeof b=="string"?k+=":"+b:typeof b=="symbol"&&(k=void 0);function N(B){var z=(r[B]||"silent").toUpperCase();if(!(typeof window===t||!k)){try{window.localStorage[k]=z;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+z+";"}catch{}}}function D(){var B;if(!(typeof window===t||!k)){try{B=window.localStorage[k]}catch{}if(typeof B===t)try{var z=window.document.cookie,Y=encodeURIComponent(k),X=z.indexOf(Y+"=");X!==-1&&(B=/^([^;]+)/.exec(z.slice(X+Y.length+1))[1])}catch{}return x.levels[B]===void 0&&(B=void 0),B}}function G(){if(!(typeof window===t||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function U(B){var z=B;if(typeof z=="string"&&x.levels[z.toUpperCase()]!==void 0&&(z=x.levels[z.toUpperCase()]),typeof z=="number"&&z>=0&&z<=x.levels.SILENT)return z;throw new TypeError("log.setLevel() called with invalid level: "+B)}x.name=b,x.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},x.methodFactory=P||C,x.getLevel=function(){return L??R??T},x.setLevel=function(B,z){return L=U(B),z!==!1&&N(L),v.call(x)},x.setDefaultLevel=function(B){R=U(B),D()||x.setLevel(B,!1)},x.resetLevel=function(){L=null,G(),v.call(x)},x.enableAll=function(B){x.setLevel(x.levels.TRACE,B)},x.disableAll=function(B){x.setLevel(x.levels.SILENT,B)},x.rebuild=function(){if(o!==x&&(T=U(o.getLevel())),v.call(x),o===x)for(var B in s)s[B].rebuild()},T=U(o?o.getLevel():"WARN");var F=D();F!=null&&(L=U(F)),v.call(x)}o=new E,o.getLogger=function(P){if(typeof P!="symbol"&&typeof P!="string"||P==="")throw new TypeError("You must supply a name when creating a logger.");var x=s[P];return x||(x=s[P]=new E(P,o.methodFactory)),x};var S=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=S),o},o.getLoggers=function(){return s},o.default=o,o})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(n){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=n||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(n,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),i=t.shift(),r=t,s=this[i];try{Array.isArray(r)&&r.length>0?s=s.replace("%var%",r.join(" - ")):s=s.replace("%var%","%var% (not specified)")}catch{}return s}},Helper$1={normalyzeParameters:function(n){var e=null;if(n){var t=[];for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];r||(r=""),t.push(i+"="+r)}e=t.join("&")}return e},normalyzeUrl:function(n,e,t){var i=n;if(n){if(n.split("?").length-1>=2){var r=n.search(/\?/)+1;i=n.substring(0,r)+n.slice(r).replace(/\?/g,"&")}var s=n.indexOf("?");s===-1&&(i+="?"),s!==-1&&s!==n.length-1&&(i+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),i+=e):i+=this.normalyzeParameters(e)),t&&(i=encodeURIComponent(i)),i},indent:function(n,e){var t=n||0;return new Array(t+1).join("	")+e}};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){function t(J){var Q=typeof J;return J!==null&&(Q==="object"||Q==="function")}function i(J){return typeof J=="function"}var r=void 0;Array.isArray?r=Array.isArray:r=function(J){return Object.prototype.toString.call(J)==="[object Array]"};var s=r,o=0,a=void 0,d=void 0,y=function(Q,ne){N[o]=Q,N[o+1]=ne,o+=2,o===2&&(d?d(D):U())};function v(J){d=J}function _(J){y=J}var C=typeof window<"u"?window:void 0,E=C||{},S=E.MutationObserver||E.WebKitMutationObserver,b=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",P=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){return function(){return process.nextTick(D)}}function T(){return typeof a<"u"?function(){a(D)}:k()}function R(){var J=0,Q=new S(D),ne=document.createTextNode("");return Q.observe(ne,{characterData:!0}),function(){ne.data=J=++J%2}}function L(){var J=new MessageChannel;return J.port1.onmessage=D,function(){return J.port2.postMessage(0)}}function k(){var J=setTimeout;return function(){return J(D,1)}}var N=new Array(1e3);function D(){for(var J=0;J<o;J+=2){var Q=N[J],ne=N[J+1];Q(ne),N[J]=void 0,N[J+1]=void 0}o=0}function G(){try{var J=Function("return this")().require("vertx");return a=J.runOnLoop||J.runOnContext,T()}catch{return k()}}var U=void 0;b?U=x():S?U=R():P?U=L():C===void 0&&typeof commonjsRequire=="function"?U=G():U=k();function F(J,Q){var ne=this,le=new this.constructor(Y);le[z]===void 0&&H(le);var ke=ne._state;if(ke){var be=arguments[ke-1];y(function(){return je(ke,le,be,ne._result)})}else re(ne,le,J,Q);return le}function B(J){var Q=this;if(J&&typeof J=="object"&&J.constructor===Q)return J;var ne=new Q(Y);return ft(ne,J),ne}var z=Math.random().toString(36).substring(2);function Y(){}var X=void 0,q=1,K=2;function ee(){return new TypeError("You cannot resolve a promise with itself")}function te(){return new TypeError("A promises callback cannot return that same promise.")}function Oe(J,Q,ne,le){try{J.call(Q,ne,le)}catch(ke){return ke}}function ie(J,Q,ne){y(function(le){var ke=!1,be=Oe(ne,Q,function(Ze){ke||(ke=!0,Q!==Ze?ft(le,Ze):Qe(le,Ze))},function(Ze){ke||(ke=!0,dt(le,Ze))},"Settle: "+(le._label||" unknown promise"));!ke&&be&&(ke=!0,dt(le,be))},J)}function it(J,Q){Q._state===q?Qe(J,Q._result):Q._state===K?dt(J,Q._result):re(Q,void 0,function(ne){return ft(J,ne)},function(ne){return dt(J,ne)})}function oe(J,Q,ne){Q.constructor===J.constructor&&ne===F&&Q.constructor.resolve===B?it(J,Q):ne===void 0?Qe(J,Q):i(ne)?ie(J,Q,ne):Qe(J,Q)}function ft(J,Q){if(J===Q)dt(J,ee());else if(t(Q)){var ne=void 0;try{ne=Q.then}catch(le){dt(J,le);return}oe(J,Q,ne)}else Qe(J,Q)}function ct(J){J._onerror&&J._onerror(J._result),Ve(J)}function Qe(J,Q){J._state===X&&(J._result=Q,J._state=q,J._subscribers.length!==0&&y(Ve,J))}function dt(J,Q){J._state===X&&(J._state=K,J._result=Q,y(ct,J))}function re(J,Q,ne,le){var ke=J._subscribers,be=ke.length;J._onerror=null,ke[be]=Q,ke[be+q]=ne,ke[be+K]=le,be===0&&J._state&&y(Ve,J)}function Ve(J){var Q=J._subscribers,ne=J._state;if(Q.length!==0){for(var le=void 0,ke=void 0,be=J._result,Ze=0;Ze<Q.length;Ze+=3)le=Q[Ze],ke=Q[Ze+ne],le?je(ne,le,ke,be):ke(be);J._subscribers.length=0}}function je(J,Q,ne,le){var ke=i(ne),be=void 0,Ze=void 0,mt=!0;if(ke){try{be=ne(le)}catch(ut){mt=!1,Ze=ut}if(Q===be){dt(Q,te());return}}else be=le;Q._state!==X||(ke&&mt?ft(Q,be):mt===!1?dt(Q,Ze):J===q?Qe(Q,be):J===K&&dt(Q,be))}function se(J,Q){try{Q(function(le){ft(J,le)},function(le){dt(J,le)})}catch(ne){dt(J,ne)}}var pt=0;function xt(){return pt++}function H(J){J[z]=pt++,J._state=void 0,J._result=void 0,J._subscribers=[]}function W(){return new Error("Array Methods must be provided an Array")}var $=function(){function J(Q,ne){this._instanceConstructor=Q,this.promise=new Q(Y),this.promise[z]||H(this.promise),s(ne)?(this.length=ne.length,this._remaining=ne.length,this._result=new Array(this.length),this.length===0?Qe(this.promise,this._result):(this.length=this.length||0,this._enumerate(ne),this._remaining===0&&Qe(this.promise,this._result))):dt(this.promise,W())}return J.prototype._enumerate=function(ne){for(var le=0;this._state===X&&le<ne.length;le++)this._eachEntry(ne[le],le)},J.prototype._eachEntry=function(ne,le){var ke=this._instanceConstructor,be=ke.resolve;if(be===B){var Ze=void 0,mt=void 0,ut=!1;try{Ze=ne.then}catch(Pt){ut=!0,mt=Pt}if(Ze===F&&ne._state!==X)this._settledAt(ne._state,le,ne._result);else if(typeof Ze!="function")this._remaining--,this._result[le]=ne;else if(ke===ye){var Ot=new ke(Y);ut?dt(Ot,mt):oe(Ot,ne,Ze),this._willSettleAt(Ot,le)}else this._willSettleAt(new ke(function(Pt){return Pt(ne)}),le)}else this._willSettleAt(be(ne),le)},J.prototype._settledAt=function(ne,le,ke){var be=this.promise;be._state===X&&(this._remaining--,ne===K?dt(be,ke):this._result[le]=ke),this._remaining===0&&Qe(be,this._result)},J.prototype._willSettleAt=function(ne,le){var ke=this;re(ne,void 0,function(be){return ke._settledAt(q,le,be)},function(be){return ke._settledAt(K,le,be)})},J}();function de(J){return new $(this,J).promise}function ue(J){var Q=this;return s(J)?new Q(function(ne,le){for(var ke=J.length,be=0;be<ke;be++)Q.resolve(J[be]).then(ne,le)}):new Q(function(ne,le){return le(new TypeError("You must pass an array to race."))})}function fe(J){var Q=this,ne=new Q(Y);return dt(ne,J),ne}function Ge(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Be(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ye=function(){function J(Q){this[z]=xt(),this._result=this._state=void 0,this._subscribers=[],Y!==Q&&(typeof Q!="function"&&Ge(),this instanceof J?se(this,Q):Be())}return J.prototype.catch=function(ne){return this.then(null,ne)},J.prototype.finally=function(ne){var le=this,ke=le.constructor;return i(ne)?le.then(function(be){return ke.resolve(ne()).then(function(){return be})},function(be){return ke.resolve(ne()).then(function(){throw be})}):le.then(ne,ne)},J}();ye.prototype.then=F,ye.all=de,ye.race=ue,ye.resolve=B,ye.reject=fe,ye._setScheduler=v,ye._setAsap=_,ye._asap=y;function pe(){var J=void 0;if(typeof commonjsGlobal<"u")J=commonjsGlobal;else if(typeof self<"u")J=self;else try{J=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Q=J.Promise;if(Q){var ne=null;try{ne=Object.prototype.toString.call(Q.resolve())}catch{}if(ne==="[object Promise]"&&!Q.cast)return}J.Promise=ye}return ye.polyfill=pe,ye.Promise=ye,ye})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(n){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!n.url)throw new Error("missing parameter : url is not defined !");if(!n.method)throw new Error("missing parameter : method is not defined !");n.format||(n.format="text");var t={};switch(t.url=n.url,t.data=n.data?n.data:null,t.method=n.method,t.timeOut=n.timeOut||0,t.scope=n.scope||this,t.proxy=n.proxy||null,t.content=n.content||null,t.headers=n.headers||{referer:"http://localhost"},n.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=n.content?n.content:"application/x-www-form-urlencoded",t.headers=n.headers?n.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(n.format){case"text":this.__call(t).then(function(i){e.trace(i),n.onResponse.call(this,i)}).catch(function(i){n.onFailure.call(this,i)});break;case"json":this.__callJSON(t).then(function(i){e.trace(i),n.onResponse.call(this,i)}).catch(function(i){n.onFailure.call(this,i)});break;case"xml":this.__callXML(t).then(function(i){e.trace(i),n.onResponse.call(this,i)}).catch(function(i){n.onFailure.call(this,i)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(n){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(i,r){var s=n.method==="POST"||n.method==="PUT"?1:0;n.data&&(typeof n.data=="object"&&Object.keys(n.data).length||typeof n.data=="string"&&n.data.length)&&!s&&(n.url=Helper$1.normalyzeUrl(n.url,n.data)),e.trace("URL = ",n.url);var o=null;if(typeof window>"u"){var a=require("node-fetch"),d={headers:{Referer:"https://localhost"}};return n.data&&typeof n.data=="string"&&s&&(d={method:n.method,body:n.data,headers:{"Content-Type":n.content,Referer:"https://localhost"}}),a(n.url,d).then(function(C){if(C.ok)i(C.text());else{var E="Errors Occured on Http Request (status : '"+C.statusText+"' | url : '"+C.url+"')",S=C.status;r({message:E,status:S})}}).catch(function(C){r({message:C,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),o=new XMLHttpRequest,o.open(n.method,n.url,!0),o.overrideMimeType=n.content;var y=null;n.timeOut>0&&(e.trace("XHR - TimeOut actif !"),y=window.setTimeout(function(){var C="TimeOut Occured on Http Request with XMLHttpRequest !";r({message:C,status:-1})},n.timeOut)),s&&(e.trace("data = ",n.data),o.setRequestHeader("Content-type",n.content)),o.onerror=function(C){console.log(C),r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(C){console.log(C),r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onreadystatechange=function(C){if(o.readyState===4)if(o.status===200)window.clearTimeout(y),i(o.response);else{var E="Errors Occured on Http Request (status : '"+C.target.statusText+"' | url : '"+C.target.responseURL+"' | response : '"+C.target.response+"')",S=C.target.status;r({message:E,status:S})}};var v=n.data&&s?n.data:null;o.send(v)}else if(window.XDomainRequest){e.trace("XDomainRequest"),o=new XDomainRequest,o.open(n.method,n.url),o.overrideMimeType=n.content,n.timeOut>0&&(o.timeout=n.timeout,e.trace("XHR - TimeOut actif !")),s&&o.setRequestHeader("Content-type",n.content),o.onerror=function(){r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onload=function(C){if(o.status===200)i(o.responseText);else{var E="Errors Occured on Http Request (status : '"+C.target.statusText+"' | url : '"+C.target.responseURL+"')",S=C.target.status;r({message:E,status:S})}};var _=n.data&&s?n.data:null;o.send(_)}else throw new Error("CORS not supported")});return t},__callJSON:function(n){return this.__call(n).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",n.url,e)})},__callXML:function(n){return this.__call(n).then(function(e){var t;if(typeof window>"u"){var i=require("@xmldom/xmldom").DOMParser;t=new i().parseFromString(e,"text/xml")}else if(window.DOMParser){var r=new window.DOMParser;t=r.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",n.url,e)})}},JSONP={uuid:function(){var n=Math.floor(Date.now());return function(){return n++}}(),call:function(n){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!n)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!n.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(n.timeOut||(e.info("setting 'options.timeOut' default value"),n.timeOut=0),!n.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof n.callbackSuffix=="string"?n.callbackSuffix:this.uuid(),i=!1,r=!1,s=n.url.indexOf("callback=");if(s!==-1){i=!0;var o=n.url.indexOf("&",s);o===-1&&(o=n.url.length);var a=n.url.substring(s+9,o);a&&(r=!0,n.callbackName=a,e.info("setting 'options.callbackName' value ("+n.callbackName+") from 'options.url' parameter"))}if(!i){var d=n.url.indexOf("?");d===-1?n.url=n.url+"?callback=":d===n.url.length?n.url=n.url+"callback=":n.url=n.url+"&callback=",e.info("setting callback default key in 'options.url' : "+n.url)}var y=n.callbackName?!0:r;if(r||(n.callbackName||(e.info("setting 'options.callbackName' default value"),n.callbackName="callback",(t||t==="")&&(n.callbackName+=t)),n.url=n.url.replace("callback=","callback="+n.callbackName),e.info("setting callback function name in 'options.url' : "+n.url)),n.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),n.onTimeOut=function(){console.log("TimeOut while invoking url : "+n.url)}),!y){var v=this,_=null;n.timeOut>0&&(_=window.setTimeout(function(){window[n.callbackName]=function(){},n.onTimeOut(),v._deleteScript(t)},n.timeOut)),window[n.callbackName]=function(C){window.clearTimeout(_),n.onResponse(C),v._deleteScript(t)}}this._createScript(t,n.url)},_createScript:function(n,e){var t,i=document.getElementById("results"+n);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+n),t.setAttribute("async","true");var r=document.documentElement||document.getElementsByTagName("head")[0];i===null?r.appendChild(t):r.replaceChild(t,i)},_deleteScript:function(n){var e=document.getElementById("results"+n);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(n){var e=n||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&n.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(n.protocol==="XHR"||n.format==="json"?e.wrap=!1:n.protocol==="JSONP"&&n.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper$1.normalyzeUrl(n.url,t)}switch(e.protocol){case"XHR":n.method==="GET"&&n.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(n){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=n;typeof n=="string"||n instanceof String?(this.message=n,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name="geoportal-access-lib",version$1="3.4.2",date="14/05/2024",description="French Geoportal resources access library",module="src/Gp.js",main="dist/GpServices-src.js",homepage="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords=["geoplateforme","geoportail","webservice","javascript","es6"],author="IGNF",license="CECILL-B",dependencies={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg={name,version:version$1,date,description,module,main,homepage,scripts,nyc,repository,keywords,author,license,dependencies,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(n){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(i){console.log("onSuccess - la reponse est la suivante : ",i)},onFailure:function(i){i.status===200||!i.status?console.log("onFailure : ",i.message):console.log("onFailure - Erreur (",i.status,") : ",i.message)}};for(var e in n)n.hasOwnProperty(e)&&(this.options[e]=n[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(i){console.log("onSuccess - la réponse brute du service est la suivante : ",i)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof n.httpMethod=="string"?n.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof n.protocol=="string"?n.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=n.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var n=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(n,s,t)}e.call(n);function t(o){this.logger.trace("CommonService::onBuildRequest : ",o),this.callService.call(n,s,i)}function i(o){this.logger.trace("CommonService::onCallService : ",o),this.analyzeResponse.call(n,s,r)}function r(o){if(this.logger.trace("CommonService::onAnalyzeResponse : ",o),o)this.options.onSuccess.call(this,o);else return s.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function s(o){this.logger.trace("CommonService::onError()");var a=o;a instanceof ErrorService||(a=new ErrorService(o.message)),this.options.onFailure.call(this,a)}},buildRequest:function(n,e){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(n,e){var t=null,i=this.request,r=!!(this.options.proxyURL&&this.options.protocol==="XHR"),s={"gp-access-lib":Pkg.version};this.options.apiKey&&(s.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,s,!1),r&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),i=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),i=this.request));var o=this,a={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:i,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(d){o.logger.trace("callService::onResponse()");var y=null;if(o.options.protocol==="XHR"&&(o.logger.trace("Response XHR",d),y=d),o.options.protocol==="JSONP")if(o.logger.trace("Response JSON",d),d)if(d.http)if(d.http.status!==200){n.call(o,new ErrorService({status:d.http.status,message:d.http.error,type:ErrorService.TYPE_SRVERR}));return}else y=d.xml,o.options.rawResponse&&(y=d);else y=d;else{n.call(o,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof o.options.onBeforeParse=="function"){var v=o.options.onBeforeParse(y);typeof v=="string"&&(y=v)}o.response=y,e.call(o,y)},onFailure:function(d){o.logger.trace("callService::onFailure()"),d.type=ErrorService.TYPE_SRVERR,n.call(o,new ErrorService(d))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),n.call(o,new ErrorService("TimeOut!"))}};Protocol.send(a)},analyzeResponse:function(n,e){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(n){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+n},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(n){Array.isArray(n)||(n=n.split(","));for(var e=[],t=0;t<n.length;t++)e[t]=this._key+n[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(n){if(n)return!!this.generalOptions.apiKeys[n]},getLayersId:function(n){return this.generalOptions.apiKeys[n]},getLayerId:function(n,e){if(!(!n||!e)){var t=null;if(this.layers){var i=this.layers;for(var r in i)if(i.hasOwnProperty(r)){var s=r.split("$");if(n===s[0]&&s[1]){var o=s[1].split(":"),a=s[1].split(";");if(a[1]===e.toUpperCase()){t=r;break}if(o[2]===e.toUpperCase()){t=r;break}}}}if(t)return t}},getLayersConf:function(n){var e={},t=this.getLayersId(n);if(t)for(var i=0;i<t.length;i++){var r=t[i];e[r]=this.layers[r]}return e},getLayerConf:function(n){if(this.layers)return this.layers[n]},getLayerParams:function(n,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var i=this.getLayerId(n,e);if(i){var r=this.getLayerConf(i),s=this.getLayerKey(i);if(s.length===0)return;for(var o=0;o<s.length;o++)r.serviceParams.serverUrl[s[o]]&&(t.url=r.serviceParams.serverUrl[s[o]]);if(/\/v\//.test(t.url)?t.styles=" ":t.styles=r.styles[0].name,t.version=r.serviceParams.version,t.format=r.formats[0].name,t.projection=r.defaultProjection,t.minScale=r.globalConstraint.minScaleDenominator,t.maxScale=r.globalConstraint.maxScaleDenominator,t.extent=r.globalConstraint.bbox,t.legends=r.legends,t.title=r.title,t.description=r.description,e==="WMS"&&(t.metadata=r.metadata),r.wmtsOptions){t.tileMatrixSetLimits=r.wmtsOptions.tileMatrixSetLimits;var a=r.wmtsOptions.tileMatrixSetLink;if(a){t.TMSLink=a;var d=this.getTMSConf(a);t.matrixIds=Object.keys(d.tileMatrices),t.tileMatrices=d.tileMatrices,t.nativeResolutions=d.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(n){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var i in t){var r=t[i];r.forEach(function(s){s===n&&e.push(i)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(n){if(this.tileMatrixSets)return this.tileMatrixSets[n]},getGlobalConstraints:function(n){var e={};if(n){var t=this.getLayerConf(n);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config$1(n){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=n.onSuccess!==null&&typeof n.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!n.apiKey&&!n.customConfigFile&&(n.apiKey="full"),this.options={},this.options.onSuccess=n.onSuccess,this.options.onFailure=n.onFailure,this.options.sync=n.sync||!1,this.options.listConfigUrls=n.customConfigFile?[n.customConfigFile]:Array.isArray(n.apiKey)?DefaultUrlService.Config.url(n.apiKey):DefaultUrlService.Config.url(n.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(n,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){n.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(n,e){this.options.sync?__callServiceSync.call(this,n,e):__callService.call(this,n,e)};var __callService=function(n,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var i=require("node-fetch");t=i}else t=window.fetch;var r=o=>t(o,{credentials:"same-origin"}).then(a=>{if(a.ok)return a.json().then(d=>d).catch(d=>{throw new Error("Exception Json : "+d)});throw new Error("Exception HTTP : "+a.status+" (status code) !")}).catch(a=>new Promise((d,y)=>{y(a)})),s=[];for(let o=0;o<this.listConfigUrls.length;o++){const a=this.listConfigUrls[o];s.push(r(a))}Promise.all(s).then(o=>{if(!o)throw new Error("results config empty !?");o.forEach(a=>{this.listConfigResults.push(a)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(o=>{n.call(this,o)})},__callServiceSync=function(n,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const r=this.listConfigUrls[t],s=new XMLHttpRequest;if(s.open("GET",r,!1),s.send(null),s.status===200){var i=JSON.parse(s.responseText);this.listConfigResults.push(i)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):n.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(n,e){var t=function(a){for(var d={},y={},v={},_=0;_<a.length;_++){if(!a[_].generalOptions||!a[_].layers)return;y={...y,...a[_].generalOptions.apiKeys},d={...d,...a[_].layers},v={...v,...a[_].tileMatrixSets}}var C={generalOptions:{apiKeys:y},layers:d,tileMatrixSets:v};return C},i=t(this.listConfigResults);if(!i){n.call(this,new Error("configuration structure not conforme !"));return}var r=new ConfigInterface;Object.assign(r,i);var s=typeof window<"u"?window:{};if(s.Gp||(s.Gp={}),s.Gp.Config){Object.assign(s.Gp.Config,r);for(var o in r)s.Gp.Config[o]=r[o]}else s.Gp.Config=r;e.call(this,s.Gp.Config)};function AltiRequest(n){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=n||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];i.lon&&i.lat&&e.push(i)}this.positions=e},getPositions:function(n){if(!n)return this.positions;var e=this.positions.length-1;return n>e||n<e?(this.logger.warn("index out of range !"),this.positions):this.positions[n]},addPositions:function(n){for(var e=0;e<n.length;e++){var t=n[e];t.lon&&t.lat&&this.positions.push(n[e])}},getLon:function(){for(var n=[],e=0;e<this.positions.length;e++)n.push(this.positions[e].lon);return this.logger.trace(n),n.join(this.delimiter)},getLat:function(){for(var n=[],e=0;e<this.positions.length;e++)n.push(this.positions[e].lat);return this.logger.trace(n),n.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"delimiter",v:this.delimiter}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"format",v:this.format}),n};function AltiElevationRequest(n){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(n){this._zonly=n}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"zonly",v:this.zonly}),n.push({k:"format",v:this.format}),n.push({k:"resource",v:this.resource}),n};function AltiProfilRequest(n){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(n){this._sampling=n}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"sampling",v:this.sampling}),n.push({k:"format",v:this.format}),n.push({k:"resource",v:this.resource}),n};function AltiRequestREST(n){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=n||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var n="";return this.method==="POST"?n=this.template.post.value:this.method==="GET"&&(n=this.template.get.value),n=n.replace(/__LON__/g,this.DataObject.getLon()),n=n.replace(/__LAT__/g,this.DataObject.getLat()),n=n.replace(/__INDENT__/g,this.DataObject.indent),n=n.replace(/__CRS__/g,this.DataObject.crs),n=n.replace(/__RESOURCE__/g,this.DataObject.resource),n=n.replace(/__MEASURES__/g,this.DataObject.measures),n=n+this.__addDataInputs(),this.logger.trace("traduction tmpl",n),this.requestString=n,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var n;if(this.method==="POST")n=this.template.post;else if(this.method==="GET")n=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=n.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=n.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(n){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=n||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var n=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return n.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var n="";if(this.method==="POST")n=this.template.post.value;else if(this.method==="GET")n=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return n=n.replace(/__SERVICE__/g,this.paramservice),n=n.replace(/__VERSION__/g,this.paramversion),n=n.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),n=n.replace(/__IDENTIFIER__/g,this.paramidentifier),n=n.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(n=n.replace(/__NAMESPACE__/g,this.namespaceByDefault),n=n.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),n=n.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),n?(this.requestString=n,this.logger.trace("traduction tmpl",n),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var n=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",i=this,r=this.DataObject.getData(),s=0;s<r.length;s++)(function(o){e&&(e=o===r.length-1?"":";"),t=t.concat(i.__addDataInput(n,r[o].k,r[o].v),e)})(s);return t},__addDataInput:function(n,e,t){var i=n;return i=i.replace(/__KEY__/g,e),i=i.replace(/__DATA__/g,t),i},setMethod:function(n){n==="GET"||n==="POST"?this.method=n:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(n){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!n.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(n.type){case"Elevation":n.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(n.param);break;case"Profil":n.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(n.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var i={data:t,method:n.method,param:n.wps},r=new WPS(i);if(!r.processRequestString())throw new Error("Enable to process request !");return r.requestString}},AltiRequestFactory={build:function(n){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,i={type:n.sampling?"Profil":"Elevation",method:n.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};i.param.positions=n.positions,i.param.format=n.outputFormat,i.param.sampling=n.sampling,i.param.zonly=n.zonly,i.param.measures=n.measures,i.param.resource=n.resource;var r=n.onError!==null&&typeof n.onError=="function",s=n.onSuccess!==null&&typeof n.onSuccess=="function",o=null;switch(n.api){case"REST":var a=new AltiRequestREST(i);if(!a.processRequestString()){if(o="Error in process request (rest) !",r){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}t=a.requestString;break;case"WPS":if(i.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(i),!t){if(o="Error in process request (wps) !",r){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or WPS) !",r){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}return s&&n.onSuccess.call(n.scope,t),t}};function XML$1(n){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,n&&(n.xmlString&&typeof n.xmlString=="string"&&(this.xmlString=n.xmlString,this.xmlDoc=__getXMLDOC(n.xmlString)),n.reader&&this.setReader(n.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(n){n&&typeof n=="string"&&(this.xmlString=n,this.xmlDoc=__getXMLDOC(n))},getReader:function(){return this.reader},setReader:function(n){n&&n.read&&typeof n.read=="function"&&(this.reader=n)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(n){this.xmlDoc=n},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var n=__getRootNode(this.xmlDoc);if(n){var e;return this.reader&&this.reader.read?e=this.reader.read(n):(e={},e[n.nodeName]=__readDefault(n)),e}else return{}}}};function __getXMLDOC(n){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(n,"text/xml")}else{var t,i,r="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(n);var s=i.parseError;if(s.errorCode)throw s.line&&s.linepos&&(r+="( ligne "+s.line+", colonne "+s.linepos),s.reason&&(r+=":  "+s.reason+")"),new Error(r);return i}else if(window.DOMParser){t=new window.DOMParser;try{i=t.parseFromString(n,"text/xml")}catch(y){throw y.message==="SyntaxError"?new Error(r):new Error("Erreur lors du parsing de la réponse du service : "+y.message)}if(i.getElementsByTagName("parsererror").length>0)for(var o=i.getElementsByTagName("parsererror"),a=0;a<o.length;a++){var d=o[a].innerHTML;if(d.indexOf("Huge input lookup")===-1)throw r+="("+d+")",new Error(r)}else if(!i.documentElement)throw new Error(r);return i}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(n){var e;return n.nodeType===9?e=n.documentElement:n.nodeType===1&&(e=n),e}function __readDefault(n){var e={};if(n.attributes.length>0){var t=__getAttributes(n);e.attributes=t}if(n.hasChildNodes()){for(var i={},r,s=n.childNodes,o=0;o<s.length;o++)if(r=s[o],r.nodeType===3)e.textContent=r.nodeValue;else if(r.nodeType===1)if(i=__readDefault(r),!e[r.nodeName])e[r.nodeName]=i;else{if(!Array.isArray(e[r.nodeName])){var a=e[r.nodeName];e[r.nodeName]=[],e[r.nodeName].push(a)}e[r.nodeName].push(i)}}return e}function __getAttributes(n){if(n.attributes.length>0){for(var e={},t=n.attributes,i=0;i<t.length;i++){var r=t[i];e[r.nodeName]=r.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(n){var e=new AltiResponse;if(n.hasChildNodes())for(var t=n.childNodes,i,r,s=0;s<t.length;s++)i=t[s],AltiResponseReader.READERS[i.nodeName]&&(r=AltiResponseReader.READERS[i.nodeName](i),e.elevations.push(r));return e},elevation:function(n){var e=new Elevation;if(n.hasChildNodes())for(var t=n.childNodes,i,r=0;r<t.length;r++)i=t[r],AltiResponseReader.READERS[i.nodeName]&&AltiResponseReader.READERS[i.nodeName](i,e);return e},lat:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(n,e){e.measures=[];var t;if(n.hasChildNodes())for(var i=n.childNodes,r,s,o=0;o<i.length;o++){t=new Measure,r=i[o],s=r.childNodes;for(var a=0;a<s.length;a++)if(AltiResponseReader.READERS[s[a].nodeName])AltiResponseReader.READERS[s[a].nodeName](s[a],t);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(n){var e={};if(n.hasChildNodes())for(var t=n.childNodes,i,r=0;r<t.length;r++)i=t[r],i.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(i));return e},exception:function(n){var e={},t=n.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var i=n.firstChild;return i&&i.nodeType===3&&(e.exception=i.nodeValue),e},error:function(n){var e={error:{}};if(n.hasChildNodes())for(var t=n.childNodes,i,r=0;r<t.length;r++){i=t[r];var s;i.nodeType===1&&i.nodeName==="code"&&(s=i.firstChild,s&&s.nodeType===3&&(e.error.code=s.nodeValue)),i.nodeType===1&&i.nodeName==="description"&&(s=i.firstChild,s&&s.nodeType===3&&(e.error.description=s.nodeValue))}return e}};AltiResponseReader.read=function(n){if(n.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(n);return e}else if(n.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(n);return t}else if(n.nodeName==="error"){var i=AltiResponseReader.READERS.error(n);return i}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(n){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{switch(n.outputFormat){case"xml":e.trace("analyze response : xml");try{var i=new XML$1({reader:AltiResponseReader});if(typeof n.response=="string"?i.setXMLString(n.response):i.setXMLDoc(n.response),t=i.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(_){var r=_.message;n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",r),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof n.response);var s=null;if(typeof n.response=="string"?s=JSON.parse(n.response):s=n.response,s&&s.error){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(s){var o=s.elevations,a=new AltiResponse,d;if(Array.isArray(o)&&o.length)for(var y=0;y<o.length;y++)d=new Elevation,typeof o[y]=="object"?(o[y].lon&&(d.lon=o[y].lon),o[y].lat&&(d.lat=o[y].lat),o[y].z&&(d.z=o[y].z),o[y].acc&&(d.acc=o[y].acc),o[y].measures&&(d.measures=o[y].measures)):typeof o[y]=="number"&&(d.z=o[y]),Array.isArray(a.elevations)&&a.elevations.push(d);t=a}if(!t){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var v=t.error.description;n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",v),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function Alti(n){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!n.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(n.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=n.positions,this.options.outputFormat=typeof n.outputFormat=="string"?n.outputFormat.toLowerCase():"xml",this.options.resource=n.resource||"ign_rge_alti_wld",this.options.sampling=n.sampling||null,this.options.api=typeof n.api=="string"?n.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=n.zonly||!1,this.options.measures=n.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var i=(n.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[i];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var r=this.options.serverUrl.lastIndexOf(".");if(r!==-1){var s=this.options.serverUrl.substring(r+1);if(s&&s.length<5)switch(this.logger.trace("Server Extension URL : "+s),s.toLowerCase()){case"json":case"xml":this.options.outputFormat=s.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(i){this.request=i,e.call(this,this.request)},onError:n,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(n){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=n||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var n={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(n[e]=this.filters[e]);return n},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var n=[];this.geocodeMethod==="search"&&n.push({k:"q",v:this.query}),this.index&&n.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&n.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(n.push({k:"lon",v:this.lon}),n.push({k:"lat",v:this.lat})),this.maxResp&&n.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&n.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)n.push({k:t,v:e[t]});return n};function GeocodeRequestREST(n){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var n="";const t=new GeocodeParamREST(this.settings).getParams();for(var i=0;i<t.length;i++){var r=t[i];n&&(n+="&"),n+=r.k+"="+r.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+n,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(n){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=n||{},i=new GeocodeRequestREST(t);if(!i.processRequestString())throw new Error("Error process request (rest) !");var r=i.requestString;return e.trace(r),r}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(n){var e=new GeocodeResponse;const t=JSON.parse(n);if(t.type==="FeatureCollection")for(var i=0;i<t.features.length;++i)_parseFeature(t.features[i],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var r=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:r,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(n,e){var t=new GeocodedLocation;if(n.geometry&&n.geometry.type==="Point"&&(t.position={lon:n.geometry.coordinates[0],lat:n.geometry.coordinates[1]}),n.properties){for(var i in n.properties)i==="score"?t.accuracy=n.properties[i]:i==="_type"?n.properties[i]==="address"?t.type="StreetAddress":n.properties[i]==="poi"?t.type="PositionOfInterest":(n.properties[i]==="parcel"||n.properties[i]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[i]=n.properties[i];n.properties._type==="address"&&(t.matchType=n.properties.number!==void 0&&n.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(n){return{exceptionReport:n}}var GeocodeReponseFactory={build:function(n){var e=null;if(n.response)if(n.rawResponse)e=n.response;else{try{if(e=new GeocodeResponseParser().parse(n.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(i){var t=i.message;typeof n.response=="string"?t+="('"+n.response+"')":t+="('"+n.response.documentElement.innerHTML+"')",n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}n.onSuccess.call(n.scope,e)}};function Geocode(n){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),i=0;i<t.length;i++){var r=t[i];(typeof e.filters[r]>"u"||typeof e.filters[r]=="object"&&Object.keys(e.filters[r]).length===0||typeof e.filters[r]=="string"&&e.filters[r].length===0||Array.isArray(e.filters[r])&&e.filters[r].length===0)&&delete this.options.filters[r]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(n){const e=n;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(n){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),i=0;i<t.length;i++){var r=t[i];(typeof e.filters[r]>"u"||typeof e.filters[r]=="object"&&Object.keys(e.filters[r]).length===0||typeof e.filters[r]=="string"&&e.filters[r].length===0||Array.isArray(e.filters[r])&&e.filters[r].length===0)&&delete this.options.filters[r]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(n){var e=n;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(n){return{type:"Polygon",coordinates:[[[n.left,n.top],[n.right,n.top],[n.right,n.bottom],[n.left,n.bottom],[n.left,n.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(n){return{type:"Circle",radius:n.radius,coordinates:[n.x,n.y]}};ReverseGeocode$1.prototype.polygon2Json=function(n){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<n.length;++t)e.coordinates[0].push([n[t].x,n[t].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(n){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{var i=null;if(typeof n.response=="string"?i=JSON.parse(n.response):i=n.response,i){if(i.error){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",i.error.description),status:i.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,i.results&&Array.isArray(i.results))for(var r=null,s=0;s<i.results.length;s++){var o=i.results[s];r=new SuggestedLocation,o&&(o.country==="StreetAddress"?(r.street=o.street,r.type="StreetAddress"):o.country==="PositionOfInterest"&&(r.poi=o.street,r.type="PositionOfInterest",r.poiType=o.poiType),r.position&&(r.position.x=o.x,r.position.y=o.y),r.kind=o.kind,r.commune=o.city,r.fullText=o.fulltext,r.postalCode=o.zipcode,r.classification=o.classification),t.suggestedLocations.push(r)}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function AutoComplete(n){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(n){const e=n;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(n,e){var t="";this.options.territory&&(t=this.options.territory);var i="";this.options.type&&(i=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:i,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:n,scope:this};AutoCompleteResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(n){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=n||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var n=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];n.push(t.x+","+t.y)}return n.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var n=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)n.push(JSON.stringify(this.constraints[e]));return n.join("|")}};RouteParamREST.prototype.getParams=function(){var n=[];return n.push({k:"resource",v:this.resource}),n.push({k:"start",v:this.start}),n.push({k:"end",v:this.end}),n.push({k:"geometryFormat",v:"geojson"}),this.optimization&&n.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&n.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&n.push({k:"profile",v:this.getProfile()}),this.constraints&&n.push({k:"constraints",v:this.getConstraints()}),this.crs&&n.push({k:"crs",v:this.crs}),this.distanceUnit&&n.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&n.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&n.push({k:"waysAttributes",v:this.getWaysAttributes()}),n};function RouteRequestREST(n){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var n=new RouteParamREST(this.settings),e=n.getParams(),t="",i=0;i<e.length;i++){var r=e[i];t&&(t+="&"),t+=r.k+"="+r.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(n){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,i=n||{},r=n.onError!==null&&typeof n.onError=="function",s=null,o=new RouteRequestREST(i);if(!o.processRequestString()){if(s="Error process request (rest) !",r){n.onError.call(n.scope,new ErrorService(s));return}throw new Error(s)}return t=o.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(n){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{e.trace("analyze response : json");var i;if(typeof n.response=="string"?i=JSON.parse(n.response):i=n.response,i){if(i.message){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",i.message)));return}var r=[],s=[],o=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(i.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(i.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(i.bbox[0]),t.bbox.bottom=parseFloat(i.bbox[1]),t.bbox.right=parseFloat(i.bbox[2]),t.bbox.top=parseFloat(i.bbox[3])),t.hasOwnProperty("routeGeometry")&&!n.geometryInInstructions&&(t.routeGeometry=i.geometry),t.hasOwnProperty("routeInstructions")&&n.geometryInInstructions){var a=i.portions,d;if(Array.isArray(a)&&a.length)for(d=0;d<a.length;d++)r.push(a[d]);if(r.length)for(d=0;d<r.length;d++)s.push(r[d].steps);if(s.length)for(d=0;d<s.length;d++)o=o.concat(s[d]);o.forEach(function(y){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=y.duration,t.routeInstructions[t.routeInstructions.length-1].distance=y.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=y.geometry,y.name==="Valeur non renseignée"&&(y.name=""),y.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Départ";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+y.instruction.type+"?";break}if(y.instruction.modifier)switch(y.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+y.instruction.modifier+"?";break}y.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${y.instruction.exit}e sortie`),y.attributes.name&&((y.attributes.name.nom_1_droite||y.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),y.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${y.attributes.name.nom_1_droite}`),y.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${y.attributes.name.toponyme}`))})}}if(!t){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function Route$1(n){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!n.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(n.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(n.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!n.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(n.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(n.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(n.outputFormat&&n.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=n.resource||"bdtopo-osrm",this.options.startPoint=n.startPoint,this.options.endPoint=n.endPoint,this.options.viaPoints=n.viaPoints||[],this.options.routePreference=n.routePreference||"fastest",n.graph?(n.graph==="Voiture"&&(this.options.graph="car"),n.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],n.constraints)if(Array.isArray(n.constraints))for(var e=0;e<n.constraints.length;e++)this.options.constraints.push(n.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},i={},r={};if(n.exclusions&&n.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var s=0;s<n.exclusions.length;s++){if(typeof n.exclusions[s]=="string")n.exclusions[s]=n.exclusions[s].toLowerCase();else continue;n.exclusions[s]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),n.exclusions[s]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),n.exclusions[s]==="bridge"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="pont",this.options.constraints.push(i))}}if(this.options.geometryInInstructions=n.geometryInInstructions||!1,this.options.provideBbox=n.provideBbox||!0,this.options.distanceUnit=n.distanceUnit||"m",this.options.timeUnit=n.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=n.srs||"EPSG:4326",this.options.waysAttributes=n.waysAttributes||[],!this.options.serverUrl){var o=DefaultUrlService.Route.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(n,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(n,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(n){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=n||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var n=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)n.push(JSON.stringify(this.constraints[e]));return n.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var n=[];return n.push({k:"resource",v:this.resource}),n.push({k:"point",v:this.getLocation()}),n.push({k:"direction",v:this.getDirection()}),n.push({k:"costType",v:this.costType}),n.push({k:"costValue",v:this.costValue}),n.push({k:"profile",v:this.profile}),n.push({k:"timeUnit",v:this.timeUnit}),n.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&n.push({k:"crs",v:this.crs}),this.constraints&&n.push({k:"constraints",v:this.getConstraints()}),n};function ProcessIsoCurveRequest(n){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var n="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),i=t.getParams();for(e=0;e<i.length;e++){var r=i[e];n&&(n+="&"),n+=r.k+"="+r.v}break;case"POST":this.logger.trace("Process POST Request");var s={};s.resource=this.settings.resource,s.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(s.costType="distance",s.costValue=this.settings.distance):(s.costType="time",s.costValue=this.settings.time),s.profile=this.settings.graph,this.settings.reverse?s.direction="arrival":s.direction="departure",s.constraints=this.settings.constraints,s.distanceUnit=this.settings.distanceUnit,s.timeUnit=this.settings.timeUnit,s.crs=this.settings.srs,n=JSON.stringify(s);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(n),this.requestString=n,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(n){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{e.trace("analyze response : json");var i;if(typeof n.response=="string"?i=JSON.parse(n.response):i=n.response,t=new ProcessIsoCurveResponse,i){i.costType==="distance"?(t.time="",t.distance=i.costValue):(t.time=i.costValue,t.distance=""),t.message="",t.id="",t.srs=i.crs,t.geometry=i.geometry;var r=i.point.split(",");t.location&&(t.location.x=r[0],t.location.y=r[1])}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",n.response)));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function ProcessIsoCurve(n){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!n.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(n.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(n.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!n.time&&!n.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!n.time&&n.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),n.time&&!n.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=n.resource||"bdtopo-valhalla",this.options.exclusions=n.exclusions||[],this.options.reverse=n.reverse||!1,this.options.srs=n.srs||"EPSG:4326",this.options.distanceUnit=n.distanceUnit||"m",this.options.timeUnit=n.timeUnit||"second",n.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,n.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,n.graph?(n.graph==="Voiture"&&(this.options.graph="car"),n.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],n.constraints)if(Array.isArray(n.constraints))for(var e=0;e<n.constraints.length;e++)this.options.constraints.push(n.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},i={},r={};if(n.exclusions&&n.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var s=0;s<n.exclusions.length;s++){if(typeof n.exclusions[s]=="string")n.exclusions[s]=n.exclusions[s].toLowerCase();else continue;n.exclusions[s]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),n.exclusions[s]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),n.exclusions[s]==="bridge"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="pont",this.options.constraints.push(i))}}if(this.options.outputFormat=typeof n.outputFormat=="string"?n.outputFormat.toLowerCase():"json",n.outputFormat&&n.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var o=DefaultUrlService.ProcessIsoCurve.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(n,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(i){n.call(this,new ErrorService(i.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:n,scope:this};ProcessIsoCurveResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(n){var e=new Config$1(n);e.call()},getAltitude:function(n){var e=new Alti(n);e.call()},geocode:function(n){var e=new Geocode(n);e.call()},reverseGeocode:function(n){var e=new ReverseGeocode$1(n);e.call()},autoComplete:function(n){var e=new AutoComplete(n);e.call()},route:function(n){var e=new Route$1(n);e.call()},isoCurve:function(n){var e=new ProcessIsoCurve(n);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(n){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=n||"default";return loglevelExports.getLogger(t)},disableAll:function(){var n=loglevelExports.getLoggers();for(const e in n)Object.hasOwnProperty.call(n,e)&&n[e].disableAll()},enableAll:function(){var n=loglevelExports.getLoggers();for(const e in n)Object.hasOwnProperty.call(n,e)&&n[e].enableAll()}},ProxyUtils={proxifyUrl:function(n,e){var t=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return n;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var i in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[i]),n.indexOf(e.noProxyDomains[i])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+n+" found in noProxyDomains list ("+e.noProxyDomains[i]+")."),n}return e.proxyUrl+encodeURIComponent(n)}},logger$C=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(n){var e=typeof n.getType=="function"?n.getType():null,t=n.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof TileWMS||t instanceof ImageWMS)return"wms";if(t instanceof WMTS$1)return"wmts";if(t instanceof VectorSource||t instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(n,e,t,i,r){if(logger$C.trace("[Gfi] : displayInfo..."),i||(i="text/html"),t!==null){var s=null,o=null,a=t;a=a.replace(/\n/g,""),a=a.replace(/(>)\s*(<)/g,"$1$2");var d=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var y=require("@xmldom/xmldom").DOMParser;o=new y,s=o.parseFromString(a,i)}else if(d.DOMParser)o=new d.DOMParser,s=o.parseFromString(a,i);else if(d.ActiveXObject)s=new d.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(a);else return logger$C.log("Incompatible environment for DOM Parser !"),!1;var v=s.getElementsByTagName("body");if(v&&v.length===1&&!v[0].hasChildNodes())return!1;var _=document.createElement("div");_.className="gp-feature-info-div";var C=document.createElement("input");C.type="button",C.className="gp-styling-button closer",C.onclick=function(){return n.featuresOverlay&&(n.removeOverlay(n.featuresOverlay),n.featuresOverlay=null),!1};var E=document.createElement("div");return E.className="gp-features-content-div",E.innerHTML=t,_.appendChild(E),_.appendChild(C),n.featuresOverlay&&(n.removeOverlay(n.featuresOverlay),n.featuresOverlay=null),n.featuresOverlay=new Overlay({element:_,autoPan:r.autoPan,autoPanAnimation:r.autoPanAnimation,autoPanMargin:r.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),n.addOverlay(n.featuresOverlay),n.featuresOverlay.setPosition(e),n.featuresOverlay.render(),!0}},features2html:function(n,e){var t=document.createElement("div");return e.forEach(function(i){var r=i.getProperties();if(r.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",r.render);else{if(r.hasOwnProperty("name")){var s=document.createElement("div");s.className="gp-att-name-div",s.insertAdjacentHTML("afterbegin",r.name),t.appendChild(s)}if(r.hasOwnProperty("description")){var o=document.createElement("div");o.className="gp-att-description-div",o.insertAdjacentHTML("afterbegin",r.description),t.appendChild(o)}var a=null,d=!1,y=null,v=null,_=null,C=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(a in r)if(r[a]!==void 0&&C.indexOf(a)===-1){d||(y=document.createElement("div"),y.className="gp-att-others-div",v=document.createElement("ul"),d=!0),_=document.createElement("li");var E=document.createElement("span");E.className="gp-attname-others-span",E.appendChild(document.createTextNode(a+" : ")),_.appendChild(E),_.appendChild(document.createTextNode(r[a])),v.appendChild(_)}v&&(y.appendChild(v),t.appendChild(y))}},n),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(n,e,t){var i=n.getPixelFromCoordinate(t);return n.hasFeatureAtPixel(i,function(r){return r===e})},displayVectorFeatureInfo:function(n,e,t,i){var r=n.getPixelFromCoordinate(e),s=[];if(n.forEachFeatureAtPixel(r,function(a,d){(!t||t.indexOf(d)>-1)&&s.push(a)}),s.length===0)return!1;var o=this.features2html(n,s);return o===null?!1:(this.displayInfo(n,e,o.innerHTML,"text/html",i),!0)},displayFeatureInfo:function(n,e,t,i,r){for(var s={},o=0;o<t.length;o++){var a=t[o],d=a.obj.getZIndex();s[d]||(s[d]=[]),s[d].push(a)}var y=[],v=Object.keys(s);v.sort(function(D,G){return G-D});for(var _=0;_<v.length;_++)for(var C=v[_],E=0;E<s[C].length;++E){var S=s[C][E].obj,b=s[C][E].infoFormat||"text/html",P=!0;if(S.minResolution&&S.minResolution>n.getResolution()&&(P=!1),P&&S.maxResolution&&S.maxResolution<n.getResolution()&&(P=!1),S.getVisible()&&P){var x=this.getLayerFormat(S);if(x==="vector"){this.layerGetFeatureAtCoordinates(n,S,e)&&y.push({format:x,scope:this,coordinate:e});continue}else if(x!=="wms"&&x!=="wmts"){logger$C.log("[ERROR] DisplayFeatureInfo - layer format '"+x+"' not allowed");continue}var T=n.getView().getResolution(),R=null;x==="wmts"?R=S.getSource().getFeatureInfoUrl.call(S.getSource(),e,T,n.getView().getProjection(),{INFOFORMAT:b}):R=S.getSource().getFeatureInfoUrl.call(S.getSource(),e,T,n.getView().getProjection(),{INFO_FORMAT:b}),y.push({format:b,url:ProxyUtils.proxifyUrl(R,i),scope:this,coordinate:e})}}var L=null;function k(D,G,U){if(D.length===0)return;var F=0;function B(z){F++,z||F===D.length?U():G(D[F],B)}G(D[0],B)}var N=this;k(y,function(D,G){if(D.format==="vector"){if(!L){L=[];for(var U=0;U<v.length;U++)for(var F=v[U],B=0;B<s[F].length;++B)L.push(s[F][B].obj)}G(D.scope.displayVectorFeatureInfo(n,D.coordinate,L,r))}else Gp.Protocols.XHR.call({url:D.url,method:"GET",scope:D.scope,onResponse:function(z){var Y=!1;(z.trim().length===0||z.indexOf("ServiceExceptionReport")!==-1||z.indexOf("java.lang.NullPointerException")!==-1||z.indexOf("java.lang.OutOfMemoryError")!==-1||z.indexOf("not queryable")!==-1)&&(Y=!0);var X=!Y&&N.displayInfo(n,D.coordinate,z,"text/html",r);G(X)},onFailure:function(z){logger$C.log(z),G(!1)}})},function(){logger$C.trace("Finish sync to GFI !")})},getPosition:function(n,e){if(n.coordinate)return n.coordinate;var t=[0,0];if(n.offsetX||n.offsetY)t[0]=n.offsetX,t[1]=n.offsetY;else if(n.pointerType==="touch"){var i=n.pointers[0];t[0]=i.pageX,t[1]=i.pageY}var r=e.getCoordinateFromPixel(t);return r},onDisplayFeatureInfo:function(n,e){if(e.isActive()){logger$C.trace(n);var t=e.getMap();if(n.type==="contextmenu"||n.type==="dblclick")n.preventDefault();else if(n.type==="singleclick"){for(var i=t.getInteractions().getArray(),r=0;r<i.length;r++)if(i[r].getActive()&&(i[r]instanceof Select||i[r]instanceof Modify||i[r]instanceof Draw))return}var s={};e._proxyUrl&&(s.proxyUrl=e._proxyUrl),e._noProxyDomains&&(s.noProxyDomains=e._noProxyDomains);var o={};e._autoPan&&(o.autoPan=e._autoPan),e._autoPanAnimation&&(o.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(o.autoPanMargin=e._autoPanMargin);for(var a=[],d=0;d<e._layers.length;++d){var y=e._layers[d].event?e._layers[d].event:e._defaultEvent;if(y===n.type){var v=a.push(e._layers[d])-1;a[v].infoFormat||(a[v].infoFormat=e._defaultInfoFormat)}}var _=this.getPosition(n,t);this.displayFeatureInfo(t,_,a,s,o)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});var Helper={detectSupport:function(){var n=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(n=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(n=!0),n},assign:function(n,e){n=n||{};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},mergeParams:function(n,e,t){if(!(typeof n>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var i in e)e.hasOwnProperty(i)&&(typeof e[i]=="object"?n.hasOwnProperty(i)?this.mergeParams(n[i],e[i],t):n[i]=e[i]:n.hasOwnProperty(i)?t&&(n[i]=e[i]):n[i]=e[i])}}},logger$B=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(n,e){logger$B.trace("unset()");var t={};Helper.mergeParams(t,this._options),Helper.mergeParams(t,e);for(var i=n.getInteractions().getArray(),r=0;r<i.length;r++)if(i[r].getActive()&&(i[r]instanceof Draw||i[r]instanceof Select||i[r]instanceof Modify)){var s=i[r].getProperties(),o=s.name;if(typeof o<"u"&&this._extensions.indexOf(o)>-1){if(t.current&&t.current===o)continue;i[r].setActive(!1);var a=s.source;if(typeof a<"u"&&a instanceof Control){for(var d in t)if(t.hasOwnProperty(d)){if(d==="current")continue;if(typeof a[d]=="function"){var y=Array.isArray(t[d])?t[d]:[t[d]];a[d].apply(a,y)}}}}else i[r].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,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IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,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czpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,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293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,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/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=get$3(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(n,e,t){const i=t?get$3(t.featureProjection):null,r=t?get$3(t.dataProjection):null;let s=n;if(i&&r&&!equivalent(i,r)){e&&(s=n.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(getTransform(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(d){for(let y=0,v=d.length;y<v;++y)d[y]=Math.round(d[y]*o)/o;return d};s===n&&(s=n.clone()),s.applyTransform(a)}return s}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(n,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(n,0,e,t)||(n=n.slice(),orientLinearRingsArray(n,0,e,t)),n):(linearRingsAreOriented(n,0,e,t)||(n=n.slice(),orientLinearRings(n,0,e,t)),n)}function createRenderFeature(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>createRenderFeature({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return transformGeometryWithOptions(new RenderFeature(i,i==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function createGeometry(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>createGeometry(r,e));return new GeometryCollection(i)}const t=GeometryConstructor[n.type];return transformGeometryWithOptions(new t(n.flatCoordinates,n.layout,n.ends),!1,e)}const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(n,e){return getDocument().createElementNS(n,e)}function getAllTextContent(n,e){return getAllTextContent_(n,e,[]).join("")}function getAllTextContent_(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let i;for(i=n.firstChild;i;i=i.nextSibling)getAllTextContent_(i,e,t)}return t}function isDocument(n){return"documentElement"in n}function parse$1(n){return new DOMParser().parseFromString(n,"application/xml")}function makeArrayExtender(n,e){return function(t,i){const r=n.call(e!==void 0?e:this,t,i);if(r!==void 0){const s=i[i.length-1];extend$4(s,r)}}}function makeArrayPusher(n,e){return function(t,i){const r=n.call(e!==void 0?e:this,t,i);r!==void 0&&i[i.length-1].push(r)}}function makeReplacer(n,e){return function(t,i){const r=n.call(this,t,i);r!==void 0&&(i[i.length-1]=r)}}function makeObjectPropertyPusher(n,e,t){return function(i,r){const s=n.call(this,i,r);if(s!==void 0){const o=r[r.length-1],a=i.localName;let d;a in o?d=o[a]:(d=[],o[a]=d),d.push(s)}}}function makeObjectPropertySetter(n,e,t){return function(i,r){const s=n.call(this,i,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:i.localName;o[a]=s}}}function makeChildAppender(n,e){return function(t,i,r){n.call(this,t,i,r),r[r.length-1].node.appendChild(t)}}function makeArraySerializer(n,e){let t,i;return function(r,s,o){if(t===void 0){t={};const a={};a[r.localName]=n,t[r.namespaceURI]=a,i=makeSimpleNodeFactory(r.localName)}serialize(t,i,s,o)}}function makeSimpleNodeFactory(n,e){return function(t,i,r){const o=i[i.length-1].node;let a=n;a===void 0&&(a=r);const d=o.namespaceURI;return createElementNS(d,a)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(n,e){const t=e.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=n[e[r]];return i}function makeStructureNS(n,e,t){t=t!==void 0?t:{};let i,r;for(i=0,r=n.length;i<r;++i)t[n[i]]=e;return t}function parseNode(n,e,t,i){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const s=n[r.namespaceURI];if(s!==void 0){const o=s[r.localName];o!==void 0&&o.call(i,r,t)}}}function pushParseAndPop(n,e,t,i,r){return i.push(n),parseNode(e,t,i,r),i.pop()}function serialize(n,e,t,i,r,s){const o=(r!==void 0?r:t).length;let a,d;for(let y=0;y<o;++y)a=t[y],a!==void 0&&(d=e.call(s!==void 0?s:this,a,i,r!==void 0?r[y]:void 0),d!==void 0&&n[d.namespaceURI][d.localName].call(s,d,a,i))}function pushSerializeAndPop(n,e,t,i,r,s,o){return r.push(n),serialize(e,t,i,r,s,o),r.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const i=parse$1(e);return this.readFeatureFromDocument(i,t)}return isDocument(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const i=parse$1(e);return this.readFeaturesFromDocument(i,t)}return isDocument(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&extend$4(i,this.readFeaturesFromNode(r,t));return i}readFeaturesFromNode(e,t){return abstract()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const i=parse$1(e);return this.readGeometryFromDocument(i,t)}return isDocument(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readProjectionFromDocument(t)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}function readBoolean(n){const e=getAllTextContent(n,!1);return readBooleanString(e)}function readBooleanString(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function readDateTime(n){const e=getAllTextContent(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function readDecimal(n){const e=getAllTextContent(n,!1);return readDecimalString(e)}function readDecimalString(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function readPositiveInteger(n){const e=getAllTextContent(n,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function readString(n){return getAllTextContent(n,!1).trim()}function writeBooleanTextNode(n,e){writeStringTextNode(n,e?"1":"0")}function writeCDATASection(n,e){n.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(n,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+padNumber(t.getUTCMonth()+1,2)+"-"+padNumber(t.getUTCDate(),2)+"T"+padNumber(t.getUTCHours(),2)+":"+padNumber(t.getUTCMinutes(),2)+":"+padNumber(t.getUTCSeconds(),2)+"Z";n.appendChild(getDocument().createTextNode(i))}function writeDecimalTextNode(n,e){const t=e.toPrecision();n.appendChild(getDocument().createTextNode(t))}function writeNonNegativeIntegerTextNode(n,e){const t=e.toString();n.appendChild(getDocument().createTextNode(t))}function writeStringTextNode(n,e){n.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(n){return 32/Math.min(n[0],n[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE]}let TEXTAREA;function defaultIconUrlFunction(n){return n}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const i=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=pushParseAndPop([],i,e,t,this);if(r)return r}readPlacemark_(e,t){const i=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,t,this);if(!i)return;const r=new Feature,s=e.getAttribute("id");s!==null&&r.setId(s);const o=t[0],a=i.geometry;if(a&&transformGeometryWithOptions(a,!1,o),r.setGeometry(a),delete i.geometry,this.extractStyles_){const d=i.Style,y=i.styleUrl,v=createFeatureStyleFunction(d,y,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(v)}return delete i.Style,r.setProperties(i,!0),r}readSharedStyle_(e,t){const i=e.getAttribute("id");if(i!==null){const r=readStyle$2.call(this,e,t);if(r){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+i,o).href:s="#"+i,this.sharedStyles_[s]=r}}}readSharedStyleMap_(e,t){const i=e.getAttribute("id");if(i===null)return;const r=readStyleMapValue.call(this,e,t);if(!r)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+i,o).href:s="#"+i,this.sharedStyles_[s]=r}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i||null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let i;const r=e.localName;if(r=="Document"||r=="Folder")return i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),i||[];if(r=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(r=="kml"){i=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&extend$4(i,o)}return i}return[]}readName(e){if(e){if(typeof e=="string"){const t=parse$1(e);return this.readNameFromDocument(t)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const i=this.readNameFromNode(t);if(i)return i}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&t.localName=="name")return readString(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const i=t.localName;if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){const r=this.readNameFromNode(t);if(r)return r}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const i=parse$1(e);extend$4(t,this.readNetworkLinksFromDocument(i))}else isDocument(e)?extend$4(t,this.readNetworkLinksFromDocument(e)):extend$4(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readNetworkLinksFromNode(i));return t}readNetworkLinksFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(NAMESPACE_URIS$4.includes(i.namespaceURI)&&i.localName=="NetworkLink"){const r=pushParseAndPop({},NETWORK_LINK_PARSERS,i,[]);t.push(r)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const r=i.localName;NAMESPACE_URIS$4.includes(i.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&extend$4(t,this.readNetworkLinksFromNode(i))}return t}readRegion(e){const t=[];if(typeof e=="string"){const i=parse$1(e);extend$4(t,this.readRegionFromDocument(i))}else isDocument(e)?extend$4(t,this.readRegionFromDocument(e)):extend$4(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readRegionFromNode(i));return t}readRegionFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(NAMESPACE_URIS$4.includes(i.namespaceURI)&&i.localName=="Region"){const r=pushParseAndPop({},REGION_PARSERS,i,[]);t.push(r)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const r=i.localName;NAMESPACE_URIS$4.includes(i.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&extend$4(t,this.readRegionFromNode(i))}return t}readCamera(e){const t=[];if(typeof e=="string"){const i=parse$1(e);extend$4(t,this.readCameraFromDocument(i))}else isDocument(e)?extend$4(t,this.readCameraFromDocument(e)):extend$4(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&extend$4(t,this.readCameraFromNode(i));return t}readCameraFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(NAMESPACE_URIS$4.includes(i.namespaceURI)&&i.localName==="Camera"){const r=pushParseAndPop({},CAMERA_PARSERS,i,[]);t.push(r)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const r=i.localName;NAMESPACE_URIS$4.includes(i.namespaceURI)&&(r==="Document"||r==="Folder"||r==="Placemark"||r==="kml")&&extend$4(t,this.readCameraFromNode(i))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=createElementNS(NAMESPACE_URIS$4[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",GX_NAMESPACE_URIS[0]),i.setAttributeNS(r,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const s={node:i},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=KML_SEQUENCE[i.namespaceURI],d=makeSequence(o,a);return pushSerializeAndPop(s,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,d,[t],a,this),i}};function createNameStyleFunction(n,e){const t=[0,0];let i="start";const r=n.getImage();if(r){const a=r.getSize();if(a&&a.length==2){const d=r.getScaleArray(),y=r.getAnchor();t[0]=d[0]*(a[0]-y[0]),t[1]=d[1]*(a[1]/2-y[1]),i="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||DEFAULT_TEXT_STYLE.getFont()),s.setScale(s.getScale()||DEFAULT_TEXT_STYLE.getScale()),s.setFill(s.getFill()||DEFAULT_TEXT_STYLE.getFill()),s.setStroke(s.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):s=DEFAULT_TEXT_STYLE.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(i),new Style$1({image:r,text:s})}function createFeatureStyleFunction(n,e,t,i,r){return function(s,o){let a=r,d="",y=[];if(a){const _=s.getGeometry();if(_)if(_ instanceof GeometryCollection)y=_.getGeometriesArrayRecursive().filter(function(C){const E=C.getType();return E==="Point"||E==="MultiPoint"}),a=y.length>0;else{const C=_.getType();a=C==="Point"||C==="MultiPoint"}}a&&(d=s.get("name"),a=a&&!!d,a&&/&[^&]+;/.test(d)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=d,d=TEXTAREA.value));let v=t;if(n?v=n:e&&(v=findStyle(e,t,i)),a){const _=createNameStyleFunction(v[0],d);if(y.length>0){_.setGeometry(new GeometryCollection(y));const C=new Style$1({geometry:v[0].getGeometry(),image:null,fill:v[0].getFill(),stroke:v[0].getStroke(),text:null});return[_,C].concat(v.slice(1))}return _}return v}}function findStyle(n,e,t){return Array.isArray(n)?n:typeof n=="string"?findStyle(t[n],e,t):e}function readColor(n){const e=getAllTextContent(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const i=t[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function readFlatCoordinates(n){let e=getAllTextContent(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let r;for(;r=i.exec(e);){const s=parseFloat(r[1]),o=parseFloat(r[2]),a=r[3]?parseFloat(r[3]):0;t.push(s,o,a),e=e.substr(r[0].length)}if(e==="")return t}function readURI(n){const e=getAllTextContent(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readStyleURL(n){const e=getAllTextContent(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readVec2(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let i;return e!=="insetPixels"?t!=="insetPixels"?i="bottom-left":i="top-left":t!=="insetPixels"?i="bottom-right":i="top-right",{x:parseFloat(n.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(n.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[t],origin:i}}function readScale(n){return readDecimal(n)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(n,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,n,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(n,e){const t=pushParseAndPop({},ICON_STYLE_PARSERS,n,e);if(!t)return;const i=e[e.length-1],r="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(r).length>0;let o;const a=r.href;a?o=a:s&&(o=DEFAULT_IMAGE_STYLE_SRC);let d,y,v,_="bottom-left";const C=t.hotSpot;C?(d=[C.x,C.y],y=C.xunits,v=C.yunits,_=C.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(d=DEFAULT_IMAGE_STYLE_ANCHOR,y=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,v=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):o.includes("arrow-reverse")?(d=[54,42],y=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,v=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):o.includes("paddle")&&(d=[32,1],y=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,v=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let E;const S=r.x,b=r.y;S!==void 0&&b!==void 0&&(E=[S,b]);let P;const x=r.w,T=r.h;x!==void 0&&T!==void 0&&(P=[x,T]);let R;const L=t.heading;L!==void 0&&(R=toRadians(L));const k=t.scale,N=t.color;if(s){o==DEFAULT_IMAGE_STYLE_SRC&&(P=DEFAULT_IMAGE_STYLE_SIZE);const D=new Icon({anchor:d,anchorOrigin:_,anchorXUnits:y,anchorYUnits:v,crossOrigin:this.crossOrigin_,offset:E,offsetOrigin:"bottom-left",rotation:R,scale:k,size:P,src:this.iconUrlFunction_(o),color:N}),G=D.getScaleArray()[0],U=D.getSize();if(U===null){const F=D.getImageState();if(F===ImageState.IDLE||F===ImageState.LOADING){const B=function(){const z=D.getImageState();if(!(z===ImageState.IDLE||z===ImageState.LOADING)){const Y=D.getSize();if(Y&&Y.length==2){const X=scaleForSize(Y);D.setScale(G*X)}D.unlistenImageChange(B)}};D.listenImageChange(B),F===ImageState.IDLE&&D.load()}}else if(U.length==2){const F=scaleForSize(U);D.setScale(G*F)}i.imageStyle=D}else i.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(n,e){const t=pushParseAndPop({},LABEL_STYLE_PARSERS,n,e);if(!t)return;const i=e[e.length-1],r=new Text({fill:new Fill({color:"color"in t?t.color:DEFAULT_COLOR}),scale:t.scale});i.textStyle=r}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(n,e){const t=pushParseAndPop({},LINE_STYLE_PARSERS,n,e);if(!t)return;const i=e[e.length-1],r=new Stroke({color:"color"in t?t.color:DEFAULT_COLOR,width:"width"in t?t.width:1});i.strokeStyle=r}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(n,e){const t=pushParseAndPop({},POLY_STYLE_PARSERS,n,e);if(!t)return;const i=e[e.length-1],r=new Fill({color:"color"in t?t.color:DEFAULT_COLOR});i.fillStyle=r;const s=t.fill;s!==void 0&&(i.fill=s);const o=t.outline;o!==void 0&&(i.outline=o)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(n,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,n,e)}function gxCoordParser(n,e){const i=e[e.length-1].coordinates,r=getAllTextContent(n,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(o){const a=parseFloat(o[1]),d=parseFloat(o[2]),y=parseFloat(o[3]);i.push([a,d,y])}else i.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(n,e){const t=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,n,e);if(t)return new MultiLineString(t)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(n,e){const t=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,n,e);if(!t)return;const i=[],r=t.coordinates,s=t.whens;for(let o=0,a=Math.min(r.length,s.length);o<a;++o)r[o].length==3&&i.push(r[o][0],r[o][1],r[o][2],s[o]);return new LineString(i,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(n,e){const t=pushParseAndPop({},ICON_PARSERS,n,e);return t||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(n,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,n,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(n,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,n,e),i=readFlatCoordinatesFromNode(n,e);if(i){const r=new LineString(i,"XYZ");return r.setProperties(t,!0),r}}function readLinearRing(n,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,n,e),i=readFlatCoordinatesFromNode(n,e);if(i){const r=new Polygon(i,"XYZ",[i.length]);return r.setProperties(t,!0),r}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(n,e){const t=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,n,e);if(!t)return null;if(t.length===0)return new GeometryCollection(t);let i,r=!0;const s=t[0].getType();let o;for(let a=1,d=t.length;a<d;++a)if(o=t[a],o.getType()!=s){r=!1;break}if(r){let a,d;if(s=="Point"){const y=t[0];a=y.getLayout(),d=y.getFlatCoordinates();for(let v=1,_=t.length;v<_;++v)o=t[v],extend$4(d,o.getFlatCoordinates());i=new MultiPoint(d,a),setCommonGeometryProperties(i,t)}else if(s=="LineString")i=new MultiLineString(t),setCommonGeometryProperties(i,t);else if(s=="Polygon")i=new MultiPolygon(t),setCommonGeometryProperties(i,t);else if(s=="GeometryCollection")i=new GeometryCollection(t);else throw new Error("Unknown geometry type found")}else i=new GeometryCollection(t);return i}function readPoint(n,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,n,e),i=readFlatCoordinatesFromNode(n,e);if(i){const r=new Point$1(i,"XYZ");return r.setProperties(t,!0),r}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(n,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,n,e),i=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,n,e);if(i&&i[0]){const r=i[0],s=[r.length];for(let a=1,d=i.length;a<d;++a)extend$4(r,i[a]),s.push(r.length);const o=new Polygon(r,"XYZ",s);return o.setProperties(t,!0),o}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(n,e){const t=pushParseAndPop({},STYLE_PARSERS$2,n,e,this);if(!t)return null;let i="fillStyle"in t?t.fillStyle:DEFAULT_FILL_STYLE;const r=t.fill;r!==void 0&&!r&&(i=null);let s;"imageStyle"in t?t.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(s=t.imageStyle):s=DEFAULT_IMAGE_STYLE;const o="textStyle"in t?t.textStyle:DEFAULT_TEXT_STYLE,a="strokeStyle"in t?t.strokeStyle:DEFAULT_STROKE_STYLE,d=t.outline;return d!==void 0&&!d?[new Style$1({geometry:function(y){const v=y.getGeometry(),_=v.getType();if(_==="GeometryCollection"){const C=v;return new GeometryCollection(C.getGeometriesArrayRecursive().filter(function(E){const S=E.getType();return S!=="Polygon"&&S!=="MultiPolygon"}))}if(_!=="Polygon"&&_!=="MultiPolygon")return v},fill:i,image:s,stroke:a,text:o,zIndex:void 0}),new Style$1({geometry:function(y){const v=y.getGeometry(),_=v.getType();if(_==="GeometryCollection"){const C=v;return new GeometryCollection(C.getGeometriesArrayRecursive().filter(function(E){const S=E.getType();return S==="Polygon"||S==="MultiPolygon"}))}if(_==="Polygon"||_==="MultiPolygon")return v},fill:i,stroke:null,zIndex:void 0})]:[new Style$1({fill:i,image:s,stroke:a,text:o,zIndex:void 0})]}function setCommonGeometryProperties(n,e){const t=e.length,i=new Array(e.length),r=new Array(e.length),s=new Array(e.length);let o,a,d;o=!1,a=!1,d=!1;for(let y=0;y<t;++y){const v=e[y];i[y]=v.get("extrude"),r[y]=v.get("tessellate"),s[y]=v.get("altitudeMode"),o=o||i[y]!==void 0,a=a||r[y]!==void 0,d=d||s[y]}o&&n.set("extrude",i),a&&n.set("tessellate",r),d&&n.set("altitudeMode",s)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(n,e){const t=n.getAttribute("name");parseNode(DATA_PARSERS,n,e);const i=e[e.length-1];t&&i.displayName?i[t]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:t!==null?i[t]=i.value:i.displayName!==null&&(i[i.displayName]=i.value),delete i.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(n,e){parseNode(EXTENDED_DATA_PARSERS,n,e)}function regionParser(n,e){parseNode(REGION_PARSERS,n,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(n,e){const t=pushParseAndPop({},PAIR_PARSERS,n,e,this);if(!t)return;const i=t.key;if(i&&i=="normal"){const r=t.styleUrl;r&&(e[e.length-1]=r);const s=t.Style;s&&(e[e.length-1]=s)}}function placemarkStyleMapParser(n,e){const t=readStyleMapValue.call(this,n,e);if(!t)return;const i=e[e.length-1];if(Array.isArray(t))i.Style=t;else if(typeof t=="string")i.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(n,e){parseNode(SCHEMA_DATA_PARSERS,n,e)}function simpleDataParser(n,e){const t=n.getAttribute("name");if(t!==null){const i=readString(n),r=e[e.length-1];r[t]=i}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(n,e){const t=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,n,e);if(!t)return;const i=e[e.length-1],r=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];i.extent=r,i.altitudeMode=t.altitudeMode,i.minAltitude=parseFloat(t.minAltitude),i.maxAltitude=parseFloat(t.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(n,e){const t=pushParseAndPop({},LOD_PARSERS,n,e);if(!t)return;const i=e[e.length-1];i.minLodPixels=parseFloat(t.minLodPixels),i.maxLodPixels=parseFloat(t.maxLodPixels),i.minFadeExtent=parseFloat(t.minFadeExtent),i.maxFadeExtent=parseFloat(t.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(n,e){const t=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,n,e);t.length>0&&e[e.length-1].push(...t)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(n,e){const t=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,n,e);if(t){const i=e[e.length-1];i[0]=t}}function linkParser(n,e){parseNode(LINK_PARSERS$1,n,e)}function whenParser(n,e){const i=e[e.length-1].whens,r=getAllTextContent(n,!1),s=Date.parse(r);i.push(isNaN(s)?0:s)}function writeColorTextNode(n,e){const t=asArray(e),r=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(r[s]).toString(16);r[s]=o.length==1?"0"+o:o}writeStringTextNode(n,r.join(""))}function writeCoordinatesTextNode(n,e,t){const i=t[t.length-1],r=i.layout,s=i.stride;let o;if(r=="XY"||r=="XYM")o=2;else if(r=="XYZ"||r=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let d="";if(a>0){d+=e[0];for(let y=1;y<o;++y)d+=","+e[y];for(let y=s;y<a;y+=s){d+=" "+e[y];for(let v=1;v<o;++v)d+=","+e[y+v]}}writeStringTextNode(n,d)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(n,e,t){n.setAttribute("name",e.name);const i={node:n},r=e.value;typeof r=="object"?(r!==null&&r.displayName&&pushSerializeAndPop(i,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[r.displayName],t,["displayName"]),r!==null&&r.value&&pushSerializeAndPop(i,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[r.value],t,["value"])):pushSerializeAndPop(i,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[r],t,["value"])}function writeDataNodeName(n,e){writeCDATASection(n,e)}function writeDataNodeValue(n,e){writeStringTextNode(n,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(n,e,t){const i=e[e.length-1].node;return createElementNS(i.namespaceURI,"Placemark")};function writeDocument(n,e,t){pushSerializeAndPop({node:n},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,t,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(n,e,t){const i={node:n},r=e.names,s=e.values,o=r.length;for(let a=0;a<o;a++)pushSerializeAndPop(i,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:r[a],value:s[a]}],t)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(n,e,t){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+t)};function writeIcon(n,e,t){const i={node:n},r=t[t.length-1].node;let s=ICON_SEQUENCE[r.namespaceURI],o=makeSequence(e,s);pushSerializeAndPop(i,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,o,t,s),s=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],o=makeSequence(e,s),pushSerializeAndPop(i,ICON_SERIALIZERS,GX_NODE_FACTORY,o,t,s)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(n,e,t){const i={node:n},r={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),d={href:s};if(o){d.w=o[0],d.h=o[1];const P=e.getAnchor(),x=e.getOrigin();if(x&&a&&x[0]!==0&&x[1]!==o[1]&&(d.x=x[0],d.y=a[1]-(x[1]+o[1])),P&&(P[0]!==o[0]/2||P[1]!==o[1]/2)){const T={x:P[0],xunits:"pixels",y:o[1]-P[1],yunits:"pixels"};r.hotSpot=T}}r.Icon=d;let y=e.getScaleArray()[0],v=o;if(v===null&&(v=DEFAULT_IMAGE_STYLE_SIZE),v.length==2){const P=scaleForSize(v);y=y/P}y!==1&&(r.scale=y);const _=e.getRotation();_!==0&&(r.heading=_);const C=e.getColor();C&&(r.color=C);const E=t[t.length-1].node,S=ICON_STYLE_SEQUENCE[E.namespaceURI],b=makeSequence(r,S);pushSerializeAndPop(i,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,b,t,S)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(n,e,t){const i={node:n},r={},s=e.getFill();s&&(r.color=s.getColor());const o=e.getScale();o&&o!==1&&(r.scale=o);const a=t[t.length-1].node,d=LABEL_STYLE_SEQUENCE[a.namespaceURI],y=makeSequence(r,d);pushSerializeAndPop(i,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,y,t,d)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(n,e,t){const i={node:n},r={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=LINE_STYLE_SEQUENCE[s.namespaceURI],a=makeSequence(r,o);pushSerializeAndPop(i,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,a,t,o)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(n,e,t){if(n){const i=e[e.length-1].node;return createElementNS(i.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[n.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(n,e,t){const i={node:n},r=e.getType();let s=[],o;if(r==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const d=a.getType();if(d==="MultiPoint")s=s.concat(a.getPoints());else if(d==="MultiLineString")s=s.concat(a.getLineStrings());else if(d==="MultiPolygon")s=s.concat(a.getPolygons());else if(d==="Point"||d==="LineString"||d==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=GEOMETRY_NODE_FACTORY;else if(r==="MultiPoint")s=e.getPoints(),o=POINT_NODE_FACTORY;else if(r==="MultiLineString")s=e.getLineStrings(),o=LINE_STRING_NODE_FACTORY;else if(r==="MultiPolygon")s=e.getPolygons(),o=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(i,MULTI_GEOMETRY_SERIALIZERS,o,s,t)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(n,e,t){pushSerializeAndPop({node:n},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],t)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(n,e,t){const i={node:n};e.getId()&&n.setAttribute("id",e.getId());const r=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(r||{}).sort().filter(function(E){return!s[E]}),a=e.getStyleFunction();if(a){const E=a(e,0);if(E){const S=Array.isArray(E)?E:[E];let b=S;if(e.getGeometry()&&(b=S.filter(function(P){const x=P.getGeometryFunction()(e);if(x){const T=x.getType();return T==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(R){const L=R.getType();return L==="Point"||L==="MultiPoint"}).length:T==="Point"||T==="MultiPoint"}})),this.writeStyles_){let P=S,x=S;e.getGeometry()&&(P=S.filter(function(T){const R=T.getGeometryFunction()(e);if(R){const L=R.getType();return L==="GeometryCollection"?R.getGeometriesArrayRecursive().filter(function(k){const N=k.getType();return N==="LineString"||N==="MultiLineString"}).length:L==="LineString"||L==="MultiLineString"}}),x=S.filter(function(T){const R=T.getGeometryFunction()(e);if(R){const L=R.getType();return L==="GeometryCollection"?R.getGeometriesArrayRecursive().filter(function(k){const N=k.getType();return N==="Polygon"||N==="MultiPolygon"}).length:L==="Polygon"||L==="MultiPolygon"}})),r.Style={pointStyles:b,lineStyles:P,polyStyles:x}}if(b.length&&r.name===void 0){const P=b[0].getText();P&&(r.name=P.getText())}}}const d=t[t.length-1].node,y=PLACEMARK_SEQUENCE[d.namespaceURI],v=makeSequence(r,y);if(pushSerializeAndPop(i,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,v,t,y),o.length>0){const E=makeSequence(r,o);pushSerializeAndPop(i,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:o,values:E}],t)}const _=t[0];let C=e.getGeometry();C&&(C=transformGeometryWithOptions(C,!0,_)),pushSerializeAndPop(i,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[C],t)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(n,e,t){const i=e.getFlatCoordinates(),r={node:n};r.layout=e.getLayout(),r.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const o=t[t.length-1].node,a=PRIMITIVE_GEOMETRY_SEQUENCE[o.namespaceURI],d=makeSequence(s,a);pushSerializeAndPop(r,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,d,t,a)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(n,e,t){const i=e.getLinearRings(),r=i.shift(),s={node:n};pushSerializeAndPop(s,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,i,t),pushSerializeAndPop(s,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[r],t)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(n,e,t){const i={node:n},r=e.getFill(),s=e.getStroke(),o={color:r?r.getColor():void 0,fill:r?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,d=POLY_STYLE_SEQUENCE[a.namespaceURI],y=makeSequence(o,d);pushSerializeAndPop(i,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,y,t,d)}function writeScaleTextNode(n,e){writeDecimalTextNode(n,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(n,e,t){const i={node:n},r={};if(e.pointStyles.length){const d=e.pointStyles[0].getText();d&&(r.LabelStyle=d);const y=e.pointStyles[0].getImage();y&&typeof y.getSrc=="function"&&(r.IconStyle=y)}if(e.lineStyles.length){const d=e.lineStyles[0].getStroke();d&&(r.LineStyle=d)}if(e.polyStyles.length){const d=e.polyStyles[0].getStroke();d&&!r.LineStyle&&(r.LineStyle=d),r.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=STYLE_SEQUENCE[s.namespaceURI],a=makeSequence(r,o);pushSerializeAndPop(i,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,a,t,o)}function writeVec2(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(n){if(n>255)throw new Error("'"+n+"'' is greater than 255(0xff);");var e=Number(n).toString(16);return("0"+e).slice(-2)},num:function(n){return parseInt(n,16)},arrayToRgba:function(n){if(!Array.isArray(n))throw new Error("Not an array !");var e=n[0],t=n[1],i=n[2],r=n[3]||1,s="rgba("+e+", "+t+", "+i+", "+parseFloat(r)+")";return s},arrayToHex:function(n){if(!Array.isArray(n))throw new Error("Not an array !");var e=n[0],t=n[1],i=n[2],r=n[3],s=[this.hex(e),this.hex(t),this.hex(i)],o={};return o.hex="#"+s.join(""),r&&(o.opacity=parseFloat(r)),o},rgbaToHex:function(n){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(n);if(!t)throw new Error("Invalid format: "+n);var i=t[1],r=t[2],s=t[3],o=t[4],a=[this.hex(i),this.hex(r),this.hex(s)],d={};return d.hex="#"+a.join(""),o&&(d.opacity=parseFloat(o)),d},hexToRgba:function(n,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!n)throw new Error("Invalid format");n=n.replace(t,function(s,o,a,d){return o+o+a+a+d+d});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);i=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null;var r=i?"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")":null;return r},isHex:function(n){if(!n||n.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(n);return!!t},isRGB:function(n){if(!n)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(n);return!!t}},logger$A=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var n=this.getStyle();if(n&&!(Array.isArray(n)&&n.length===0)){var e=n.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var i="rgba(";i+=t[0]+",",i+=t[1]+",",i+=t[2]+",",i+=t[3]+")",t=i}if(ColorUtils.isRGB(t)){var r=ColorUtils.rgbaToHex(t);this.set("fill",r.hex),this.set("fill-opacity",r.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var n=this.getStyle();if(n&&!(Array.isArray(n)&&n.length===0)){var e=n.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var i="rgba(";i+=t[0]+",",i+=t[1]+",",i+=t[2]+",",i+=t[3]+")",t=i}if(ColorUtils.isRGB(t)){var r=ColorUtils.rgbaToHex(t);this.set("stroke",r.hex),this.set("stroke-opacity",r.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var n=this.getStyle();if(n&&!(Array.isArray(n)&&n.length===0)){var e=this.get("name")!==void 0,t=n.getText();if(t&&e){var i=n.getText().getFill();if(i){var r=i.getColor();if(Array.isArray(r)){var s="rgba(";s+=r[0]+",",s+=r[1]+",",s+=r[2]+",",s+=r[3]+")",r=s}if(ColorUtils.isRGB(r)){var o=ColorUtils.rgbaToHex(r);this.set("label-fill",o.hex),this.set("label-fill-opacity",o.opacity)}else this.set("label-fill",r),this.set("label-fill-opacity",1)}var a=n.getText().getStroke();if(a){var d=a.getColor();if(Array.isArray(d)){var y="rgba(";y+=d[0]+",",y+=d[1]+",",y+=d[2]+",",y+=d[3]+")",d=y}if(ColorUtils.isRGB(d)){var v=ColorUtils.rgbaToHex(d);this.set("label-stroke",v.hex),this.set("label-stroke-opacity",v.opacity)}else this.set("label-stroke",d),this.set("label-stroke-opacity",1);this.set("label-stroke-width",a.getWidth())}this.set("label-font",n.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",n.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var n=this.getStyle();if(n&&!(Array.isArray(n)&&n.length===0)){var e=n.getImage();if(e)if(e instanceof Icon){var t=e.getColor();if(Array.isArray(t)){var i="rgba(";i+=t[0]+",",i+=t[1]+",",i+=t[2]+",",i+=t[3]+")",t=i}if(t){var r=ColorUtils.rgbaToHex(t);this.set("marker-color",r.hex)}var s=e.getScale();switch(Math.round(s*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var o=e.getSrc();o&&this.set("marker-symbol",o),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var a=e.getFill();if(a){var d=a.getColor();if(Array.isArray(d)){var y="rgba(";y+=d[0]+",",y+=d[1]+",",y+=d[2]+",",y+=d[3]+")",d=y}if(ColorUtils.isRGB(d)){var v=ColorUtils.rgbaToHex(d);this.set("circle-fill",v.hex),this.set("circle-fill-opacity",v.opacity)}else this.set("circle-fill",d),this.set("circle-fill-opacity",1)}var _=e.getStroke();if(_){var C=_.getColor();if(Array.isArray(C)){var E="rgba(";E+=C[0]+",",E+=C[1]+",",E+=C[2]+",",E+=C[3]+")",C=E}if(ColorUtils.isRGB(C)){var S=ColorUtils.rgbaToHex(C);this.set("circle-stroke",S.hex),this.set("circle-stroke-opacity",S.opacity)}else this.set("circle-stroke",C),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",_.getWidth())}var b=e.getRadius();this.set("circle-radius",b)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(n){var e=null,t={},i=null;if(n.get("marker-color")||n.get("marker-size")||n.get("marker-symbol")){i={},i.src=this.DEFAULT_ICON.src,i.anchor=this.DEFAULT_ICON.anchor;var r=n.get("marker-symbol");r&&r.search("data:image/png;base64")!==-1&&(i.src=r);var s=n.get("marker-color");ColorUtils.isHex(s)&&(i.color=ColorUtils.hexToRgba(s,1));var o=n.get("marker-size");if(o)switch(o){case"small":i.scale=.5;break;case"medium":i.scale=1;break;case"large":i.scale=1.5;break;default:i.scale=this.DEFAULT_ICON.scale;break}}var a=null;(n.get("stroke")||n.get("stroke-opacity")||n.get("stroke-width"))&&(a={},a.color=ColorUtils.hexToRgba(n.get("stroke"),+n.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),a.width=+n.get("stroke-width")||this.DEFAULT_STROKE.width);var d=null;(n.get("fill")||n.get("fill-opacity"))&&(d={},d.color=ColorUtils.hexToRgba(n.get("fill"),+n.get("fill-opacity")||this.DEFAULT_FILL.opacity));var y=null,v=null,_=n.get("name")!=="";_&&((n.get("label-fill")||n.get("label-fill-opacity"))&&(v={},v.color=ColorUtils.hexToRgba(n.get("label-fill"),+n.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(n.get("label-stroke")||n.get("label-stroke-opacity")||n.get("label-stroke-width"))&&(y={},y.color=ColorUtils.hexToRgba(n.get("label-stroke"),+n.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),y.width=+n.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var C=n.get("circle-radius")||this.DEFAULT_CIRCLE.radius,E=null;(n.get("circle-stroke")||n.get("circle-stroke-opacity")||n.get("circle-stroke-width"))&&(E={},E.color=ColorUtils.hexToRgba(n.get("circle-stroke"),+n.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),E.width=+n.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var S=null;(n.get("circle-fill")||n.get("circle-fill-opacity"))&&(S={},S.color=ColorUtils.hexToRgba(n.get("circle-fill"),+n.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity));var b=n.getGeometry().getType();switch(b){case"Circle":case"Point":case"MultiPoint":var P=!1,x={};if(E&&(x.stroke=new Stroke(E)),S&&(x.fill=new Fill(S)),Object.keys(x).length!==0&&(P=!0,x.radius=+C,t.image=new CircleStyle(x)),i&&(t.image=new Icon(i)),_){var T={};if(y&&(T.stroke=new Stroke(y)),v&&(T.fill=new Fill(v)),Object.keys(T).length!==0)T.text=n.get("name"),T.textAlign=n.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,T.font=n.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Text(Object.assign({},this.DEFAULT_TEXT,T));else if(i||P){var R=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(R){var L=R.clone();L.setText(n.get("name")),t.text=L}}}break;case"Polygon":case"MultiPolygon":a&&(t.stroke=new Stroke(a)),d&&(t.fill=new Fill(d));break;case"LineString":case"MultiLineString":if(a&&(t.stroke=new Stroke(a)),this.APPLY_CONVERT_GEOM_GPX&&d){var k=n.get("type");if(k&&(k==="Polygon"||k==="MultiPolygon")){t.fill=new Fill(d);var N=n.clone(),D=b==="LineString"?Polygon:MultiPolygon;n.setGeometry(new D([N.getGeometry().getCoordinates()]))}}break}return Object.keys(t).length!==0&&(e=new Style$1(t)),e},defineStyleFunctionByDefault:function(n){if(!n)return[];if(Object.keys(n).length===0)return[];var e=(t,i)=>{var r=null,s=t.getGeometry().getType();switch(s){case"Point":case"MultiPoint":var o={};if(n.getImage()&&(o.image=n.getImage()),n.getText()&&t.get("name")){var a=n.getText().clone();a.setText(t.get("name")),o.text=a}r=new Style$1(o);break;case"Circle":var d={},y={};if(n.getFill()&&(y.fill=n.getFill()),n.getStroke()&&(y.stroke=n.getStroke()),n.getText()&&t.get("name")){var v=n.getText().clone();v.setText(t.get("name")),d.text=v}Object.keys(y).length!==0&&(y.radius=3,d.image=new CircleStyle(y)),r=new Style$1(d);break;case"Polygon":case"MultiPolygon":var _={};n.getFill()&&(_.fill=n.getFill()),n.getStroke()&&(_.stroke=n.getStroke()),r=new Style$1(_);break;case"LineString":case"LinearRing":case"MultiLineString":var C={};n.getStroke()&&(C.stroke=n.getStroke()),r=new Style$1(C);break}return[r]};return e},definePropertiesFromStyleByType:function(n){var e=n.getGeometry().getType();switch(e){case"Point":case"MultiPoint":n.setPropertyMarker(),n.setPropertyLabel();break;case"LineString":case"MultiLineString":n.setPropertyStroke();break;case"Polygon":case"MultiPolygon":n.setPropertyStroke(),n.setPropertyFill();break}},definePropertiesFromStyle:function(n){var e=n.getStyle()||n.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,n,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,n.setStyle(e);else return}this.definePropertiesFromStyleByType(n)}},defineTagFromStyle:function(n,e){return logger$A.trace("todo..."),null}},logger$z=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(n){var e=null,t=null,i=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var r=require("@xmldom/xmldom").DOMParser;t=new r,e=t.parseFromString(n,"text/xml")}else i.DOMParser?(t=new i.DOMParser,e=t.parseFromString(n,"text/xml")):i.ActiveXObject?(e=new i.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(n)):logger$z.log("Incompatible environment for DOM Parser !");var s=e.querySelector("parsererror");return s?(console.error(s),null):(logger$z.trace(e),e)},toString:function(n){var e=new XMLSerializer,t=e.serializeToString(n);return logger$z.trace(t),t},format:function(n){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,i=/(<.+>)(.+\n)/g;n=n.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(i,`$1
$2`);for(var r="",s=n.split(`
`),o=0,a="other",d={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},y=0;y<s.length;y++){var v=s[y],_=!!v.match(/<.+\/>/),C=!!v.match(/<\/.+>/),E=!!v.match(/<[^!].*>/),S=_?"single":C?"closing":E?"opening":"other",b=a+"->"+S;a=S;var P="";o+=d[b];for(var x=0;x<o;x++)P+="	";b==="opening->closing"?r=r.substr(0,r.length-1)+v+`
`:r+=P+v+`
`}return logger$z.trace(r),r}},logger$y=LoggerByDefault.getLogger("extended KML format"),KML=class Dn extends KML$1{constructor(e){if(super(e),!(this instanceof Dn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,i){for(var r=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,s=r,o=0;o<r.length;o++){const re=r[o];if(re.nodeName==="Document"){s=re.childNodes;break}if(re.nodeName==="Placemark"){s=[re];break}}for(var a={},d=-1,y=0;y<s.length;y++){var v=s[y];switch(v.nodeName){case"Style":var _=v.attributes[0];if(_&&_.nodeName==="id"){var C=_.nodeValue,E=v;a[C]=E}break;case"Placemark":d++;for(var S=v.childNodes,b=!1,P=!1,x=!1,T=null,R=null,L=null,k=v,N=0;N<S.length;N++)switch(S[N].nodeName){case"Polygon":x=!0;break;case"LineString":P=!0;break;case"Point":b=!0;break;case"Style":R=S[N],T=S[N].childNodes;break;case"styleUrl":var D=S[N].textContent.slice(1);a[D]&&(T=a[D].childNodes);break;case"ExtendedData":L=S[N].childNodes;break;case"name":k=null;break}if(L){logger$y.log("ExtendedData :",L);var G=i.extendedData;G&&typeof G=="function"&&G(t[d],L)}if(k){logger$y.log("Name :",k);var U=i.nameData;U&&typeof U=="function"&&U(t[d],k)}if(b&&T&&T.length!==0){for(var F=null,B=null,z=0;z<T.length;z++)switch(T[z].nodeName){case"LabelStyle":F=T[z];break;case"IconStyle":B=T[z];break}var Y=t[d].getProperties().name,X=t[d].getProperties().description,q=Y||X;if(logger$y.trace(q),!B&&F){var K=i.labelStyle;K&&typeof K=="function"&&K(t[d],F)}else if(B&&!F){var ee=i.iconStyle;ee&&typeof ee=="function"&&ee(t[d],B)}else if(B&&F){var te=i.iconLabelStyle;te&&typeof te=="function"&&te(t[d],B,F)}}else{var Oe=t[d],ie=Oe.getStyle();if(ie&&typeof ie=="function"){var it=ie.call(this,Oe,0);it&&it.length!==0&&(ie=it[0])}if(x){var oe=i.polygonStyle;oe&&typeof oe=="function"&&oe(t[d],T)}if(P){var ft=i.lineStringStyle;ft&&typeof ft=="function"&&ft(t[d],T)}if(b&&ie){var ct=ie.getImage();if(ct&&ct instanceof CircleStyle){var Qe=i.circleStyle;Qe&&typeof Qe=="function"&&Qe(t[d],R)}else if(ct&&ct instanceof Icon){var dt=i.pointStyle;dt&&typeof dt=="function"&&dt(t[d],R)}}}break;default:logger$y.trace("tag is not processing !")}}}writeFeatures(e,t){logger$y.log("overload : ol.format.KML.writeFeatures");var i=super.writeFeaturesNode(e,t);if(i===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(i,this.extensions);var r=this._writeExtendStylesFeatures(i,e,t),s=Parser$1.format(r);return s===""?null:s}_writeExtendStylesFeatures(e,t,i){function r(E,S){var b=E.toString(16);b.charAt(0)==="#"&&(b=b.slice(1)),S=S||1,S=parseInt(S*255,10),S=S.toString(16);var P=S;return P=P+b.substr(4,2),P=P+b.substr(2,2),P=P+b.substr(0,2),P.toLowerCase()}var s=function(E,S){if(logger$y.trace("label with style :",S),!!E&&E.getStyle()instanceof Style$1){var b=E.getStyle().getText();if(!b)return;var P="Sans",x="16px",T=b.getFont();if(T){var R=T.split(" ",2);x=R[0],P=R[1]}var L=E.getStyle().getText().getStroke();if(!L)return;if(L instanceof Stroke){var k=r("#FFFFFF"),N=L.getColor();if(Array.isArray(N)){var D="rgba(";D+=N[0]+",",D+=N[1]+",",D+=N[2]+",",D+=N[3]+")",N=D}if(ColorUtils.isRGB(N)){var G=ColorUtils.rgbaToHex(N);k=r(G.hex,G.opacity)}else k=r(N);var U=L.getWidth()||"0",F="1";if(S&&S.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var B=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");B.setAttribute("fontSize",x),B.setAttribute("fontFamily",P),B.setAttribute("haloColor",k),B.setAttribute("haloRadius",U),B.setAttribute("haloOpacity",F),S.appendChild(B)}}var z=E.getStyle().getImage();if(!z)return;if(z instanceof CircleStyle){var Y=null,X=null;if(z.getStroke()){if(X=z.getStroke().getWidth(),Y=z.getStroke().getColor(),Array.isArray(Y)){var q="rgba(";q+=Y[0]+",",q+=Y[1]+",",q+=Y[2]+",",q+=Y[3]+")",Y=q}if(ColorUtils.isRGB(Y)){var K=ColorUtils.rgbaToHex(Y);Y=r(K.hex,K.opacity)}else Y=r(Y)}var ee=null;if(z.getFill()){if(ee=z.getFill().getColor(),Array.isArray(ee)){var te="rgba(";te+=ee[0]+",",te+=ee[1]+",",te+=ee[2]+",",te+=ee[3]+")",ee=te}if(ColorUtils.isRGB(ee)){var Oe=ColorUtils.rgbaToHex(ee);ee=r(Oe.hex,Oe.opacity)}else ee=r(ee)}if(S&&S.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var ie=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");ie.setAttribute("type","circle"),ie.setAttribute("radius",z.getRadius()),ie.setAttribute("fillColor",ee),ie.setAttribute("strokeColor",Y),ie.setAttribute("strokeWidth",X),S.appendChild(ie)}}}},o=function(E,S){if(logger$y.trace("marker with style (hotspot):",S),!!E&&E.getStyle()instanceof Style$1){var b=E.getStyle().getImage();if(!b)return;if(b instanceof Icon){var P=0,x=0,T="pixels",R="pixels",L=b.getSize(),k=b.getAnchor();if(k.length&&(P=k[0],x=k[1],R==="fraction"?x=x===1?0:1-x:x=R==="pixels"&&x===L[1]?0:L[1]-x),S&&S.getElementsByTagName("hotSpot").length===0){var N=document.createElementNS(e.namespaceURI,"hotSpot");N.setAttribute("x",P),N.setAttribute("y",x),N.setAttribute("xunits",T),N.setAttribute("yunits",R),S.appendChild(N)}}}},a=function(E,S){if(E&&E.getStyle()instanceof Style$1){var b=E.getStyle().getImage();if(!b)return;if(b instanceof CircleStyle){var P=null,x=null;if(b.getStroke()){if(x=b.getStroke().getWidth(),P=b.getStroke().getColor(),Array.isArray(P)){var T="rgba(";T+=P[0]+",",T+=P[1]+",",T+=P[2]+",",T+=P[3]+")",P=T}if(ColorUtils.isRGB(P)){var R=ColorUtils.rgbaToHex(P);P=r(R.hex,R.opacity)}else P=r(P)}var L=null;if(b.getFill()){if(L=b.getFill().getColor(),Array.isArray(L)){var k="rgba(";k+=L[0]+",",k+=L[1]+",",k+=L[2]+",",k+=L[3]+")",L=k}if(ColorUtils.isRGB(L)){var N=ColorUtils.rgbaToHex(L);L=r(N.hex,N.opacity)}else L=r(L)}if(S&&S.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var D=document.createElementNS(e.namespaceURI,"LabelStyle"),G=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");G.setAttribute("type","circle"),G.setAttribute("radius",b.getRadius()),G.setAttribute("fillColor",L),G.setAttribute("strokeColor",P),G.setAttribute("strokeWidth",x),D.appendChild(G),S.appendChild(D)}}}},d=function(E,S){},y=function(E,S,b){logger$y.trace("write an icon with a label"),o(E,S),s(E,b)},v=function(E,S){for(var b=0;b<S.length;b++){var P=S[b];if(P.nodeName==="name")return}var x=E.getProperties().name;if(x){var T=document.createElement("name");T.innerHTML=x,S.appendChild(T)}},_=function(E,S){if(S&&S.length){for(var b=[],P=0;P<S.length;P++){const T=S[P];if(T.nodeName==="Data"){var x=T.getAttribute("name");Styling.getListTags().includes(x)&&b.push(T)}}b&&b.length&&b.forEach(T=>{T.remove()})}};this._processKml(e,t,{labelStyle:s,iconStyle:o,iconLabelStyle:y,circleStyle:a,pointStyle:d,nameData:v,extendedData:_});var C=Parser$1.toString(e);return C||null}_writeRootExtensions(e,t){var i=document.createElementNS(e.namespaceURI,"ExtendedData");for(const a in t)if(Object.hasOwnProperty.call(t,a)){const d=t[a];var r=document.createElementNS(e.namespaceURI,"Data");r.setAttribute("name",a);var s=document.createTextNode(JSON.stringify(d));r.appendChild(s),i.appendChild(r)}var o=e.firstChild;e.insertBefore(i,o)}readFeatures(e,t){logger$y.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var i=this._readExtendStylesFeatures(e,t);return logger$y.trace("Styles étendus",i),i.forEach(r=>{Styling.definePropertiesFromStyle(r)}),i}_readExtendStylesFeatures(e,t){var i=super.readFeatures(e,t),r=null,s="";if(typeof e=="string"?s=e:s=e.documentElement.outerHTML,s=s.replace(/\n/g,""),s=s.replace(/(>)\s*(<)/g,"$1$2"),r=Parser$1.parse(s),r===null)return i;function o(C){var E="";E=E+C.substr(6,2),E=E+C.substr(4,2),E=E+C.substr(2,2);for(var S=parseInt(E,16).toString(16),b="",P=S.length||0,x=0;x<6-P;x++)b+="0";return S="#"+b+S,S}var a=function(C,E){if(logger$y.trace("label with style :",E),!!C){for(var S=C.getProperties().name,b=o("ff000000"),P="#FFFFFF",x=0,T="Sans",R="16px",L=null,k=5,N="#000000",D="#ffffff",G=1,U=!1,F=!1,B=E.childNodes,z=0;z<B.length;z++)switch(B[z].nodeName){case"scale":break;case"colorMode":break;case"color":b=o(B[z].textContent);break;case"LabelStyleSimpleExtensionGroup":U=!0;for(var Y=B[z].attributes,X=0;X<Y.length;X++)switch(Y[X].nodeName){case"fontFamily":T=Y[X].nodeValue;break;case"fontSize":R=Y[X].nodeValue;break;case"haloColor":P=o(Y[X].nodeValue);break;case"haloRadius":x=parseInt(Y[X].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":F=!0;for(var q=B[z].attributes,K=0;K<q.length;K++)switch(q[K].nodeName){case"type":L=q[K].nodeValue;break;case"radius":k=parseInt(q[K].nodeValue,10);break;case"fillColor":var ee=q[K].nodeValue,te=Math.round(ColorUtils.num(ee.substr(0,2))/255*10)/10,Oe=o(ee);N=ColorUtils.hexToRgba(Oe,te);break;case"strokeColor":var ie=q[K].nodeValue,it=Math.round(ColorUtils.num(ie.substr(0,2))/255*10)/10,oe=o(ie);D=ColorUtils.hexToRgba(oe,it);break;case"strokeWidth":G=parseInt(q[K].nodeValue,10);break}break}var ft=null;F&&L==="circle"?ft=new CircleStyle({radius:k,fill:new Fill({color:N}),stroke:new Stroke({color:D,width:G})}):U&&(ft=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),C.setStyle(new Style$1({image:ft,text:new Text({font:R+" "+T,textAlign:"left",text:S,fill:new Fill({color:b}),stroke:new Stroke({color:P,width:x})})}))}},d=function(C,E){logger$y.trace("hotspot :",E);for(var S=null,b=null,P=o("ffffffff"),x=!1,T=51,R=38,L=!1,k=25.5,N="pixels",D=38,G="pixels",U=E.childNodes,F=!1,B=0;B<U.length;B++)switch(U[B].nodeName){case"Icon":F=!0;for(var z=U[B].childNodes,Y=0;Y<z.length;Y++)switch(z[Y].nodeName){case"href":S=z[Y].textContent;break;case"gx:w":x=!0,T=parseFloat(z[Y].textContent);break;case"gx:h":x=!0,R=parseFloat(z[Y].textContent);break}break;case"hotSpot":L=!0;for(var X=U[B].attributes,q=0;q<X.length;q++)switch(X[q].nodeName){case"x":k=parseFloat(X[q].nodeValue);break;case"y":D=parseFloat(X[q].nodeValue);break;case"yunits":N=X[q].nodeValue;break;case"xunits":G=X[q].nodeValue;break}break;case"scale":b=parseFloat(U[B].textContent);break;case"color":P=o(U[B].textContent);break}var K=null;if(F){var ee={src:S||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:P,crossOrigin:"anonymous",scale:b||1};x&&Helper.mergeParams(ee,{size:[T,R]}),L&&Helper.mergeParams(ee,{anchor:[k,D],anchorOrigin:"bottom-left",anchorXUnits:N||"pixels",anchorYUnits:G||"pixels"}),K=new Icon(ee)}var te=C.getStyleFunction();if(te){var Oe=te(C,0);if(Oe&&!Array.isArray(Oe)&&(Oe=[Oe]),Oe&&Oe.length!==0){var ie=Oe.length===1?Oe[0]:Oe[Oe.length-1];C.setStyle(new Style$1({image:K,text:ie.getText()}))}}},y=function(C,E){if(logger$y.trace("extendData :",E),!!C){for(var S={},b=C.get("name")||"",P=C.get("description")||"",x=null,T=0;T<E.length;T++){var R=E[T],L=R.attributes[0],k=R.childNodes;if(L.nodeName==="name")switch(L.nodeValue){case"label":b=R.textContent,S.name=b;break;case"title":case"attributetitle":for(var N=0;N<k.length;N++)k[N].nodeName==="value"&&(x=k[N].textContent);break;default:S[L.nodeValue]=R.textContent;break}}x&&(P=P?x+" : "+P:x,S.description=P),Object.keys(S).length&&C.setProperties(S,!0)}},v=function(C,E,S){logger$y.trace("display icon and label"),a(C,S),d(C,E)},_=function(C,E){};return this._processKml(r,i,{lineStringStyle:_,polygonStyle:_,pointStyle:_,labelStyle:this.showPointNames_?a:null,iconStyle:d,iconLabelStyle:this.showPointNames_?v:d,extendedData:y}),i}readRootExtensions(e){for(var t={},i=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,r=i.childNodes,s=0;s<r.length;s++){var o=r[s];if(o.nodeName==="ExtendedData")for(var a=o.childNodes,d=0;d<a.length;d++){var y=a[d];if(y.nodeName==="Data"){var v=y.attributes[0];if(v&&v.nodeName==="name"&&v.nodeValue===e){t=JSON.parse(y.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const r=e[t];if(this.readExtensions_){const s=r.get("extensionsNode_")||null;this.readExtensions_(r,s)}r.set("extensionsNode_",void 0)}}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const i=FEATURE_READER[e.localName];if(!i)return null;const r=i(e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_([r]),r):null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:i},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[t]),i}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(n,e,t){const i=n.getGeometry();if(i){const r=GEOMETRY_TYPE_TO_NODENAME[i.getType()];if(r){const s=e[e.length-1].node;return createElementNS(s.namespaceURI,r)}}}function appendCoordinate(n,e,t,i){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(n.push(i.ele),delete i.ele,e.hasZ=!0):n.push(0),"time"in i?(n.push(i.time),delete i.time,e.hasM=!0):n.push(0),n}function applyLayoutOptions(n,e,t){let i="XY",r=2;if(n.hasZ&&n.hasM?(i="XYZM",r=4):n.hasZ?(i="XYZ",r=3):n.hasM&&(i="XYM",r=3),r!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*r]=e[s*4],e[s*r+1]=e[s*4+1],n.hasZ&&(e[s*r+2]=e[s*4+2]),n.hasM&&(e[s*r+2]=e[s*4+3]);if(e.length=e.length/4*r,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*r}return i}function parseLink(n,e){const t=e[e.length-1],i=n.getAttribute("href");i!==null&&(t.link=i),parseNode(LINK_PARSERS,n,e)}function parseExtensions(n,e){const t=e[e.length-1];t.extensionsNode_=n}function parseRtePt(n,e){const t=pushParseAndPop({},RTEPT_PARSERS,n,e);if(t){const i=e[e.length-1],r=i.flatCoordinates,s=i.layoutOptions;appendCoordinate(r,s,n,t)}}function parseTrkPt(n,e){const t=pushParseAndPop({},TRKPT_PARSERS,n,e);if(t){const i=e[e.length-1],r=i.flatCoordinates,s=i.layoutOptions;appendCoordinate(r,s,n,t)}}function parseTrkSeg(n,e){const t=e[e.length-1];parseNode(TRKSEG_PARSERS,n,e);const i=t.flatCoordinates;t.ends.push(i.length)}function readRte(n,e){const t=e[0],i=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,n,e);if(!i)return;const r=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const o=applyLayoutOptions(s,r),a=new LineString(r,o);transformGeometryWithOptions(a,!1,t);const d=new Feature(a);return d.setProperties(i,!0),d}function readTrk(n,e){const t=e[0],i=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,n,e);if(!i)return;const r=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const o=i.layoutOptions;delete i.layoutOptions;const a=applyLayoutOptions(o,r,s),d=new MultiLineString(r,a,s);transformGeometryWithOptions(d,!1,t);const y=new Feature(d);return y.setProperties(i,!0),y}function readWpt(n,e){const t=e[0],i=pushParseAndPop({},WPT_PARSERS,n,e);if(!i)return;const r={},s=appendCoordinate([],r,n,i),o=applyLayoutOptions(r,s),a=new Point$1(s,o);transformGeometryWithOptions(a,!1,t);const d=new Feature(a);return d.setProperties(i,!0),d}function writeLink(n,e,t){n.setAttribute("href",e);const r=t[t.length-1].properties,s=[r.linkText,r.linkType];pushSerializeAndPop({node:n},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,s,t,LINK_SEQUENCE)}function writeWptType(n,e,t){const i=t[t.length-1],s=i.node.namespaceURI,o=i.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const d=n.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[s]:WPT_TYPE_SEQUENCE[s],y=makeSequence(o,d);pushSerializeAndPop({node:n,properties:o},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,y,t,d)}function writeRte(n,e,t){const i=t[0],r=e.getProperties(),s={node:n};s.properties=r;const o=e.getGeometry();if(o.getType()=="LineString"){const v=transformGeometryWithOptions(o,!0,i);s.geometryLayout=v.getLayout(),r.rtept=v.getCoordinates()}const a=t[t.length-1].node,d=RTE_SEQUENCE[a.namespaceURI],y=makeSequence(r,d);pushSerializeAndPop(s,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,y,t,d)}function writeTrk(n,e,t){const i=t[0],r=e.getProperties(),s={node:n};s.properties=r;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const v=transformGeometryWithOptions(o,!0,i);r.trkseg=v.getLineStrings()}const a=t[t.length-1].node,d=TRK_SEQUENCE[a.namespaceURI],y=makeSequence(r,d);pushSerializeAndPop(s,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,y,t,d)}function writeTrkSeg(n,e,t){const i={node:n};i.geometryLayout=e.getLayout(),i.properties={},pushSerializeAndPop(i,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),t)}function writeWpt(n,e,t){const i=t[0],r=t[t.length-1];r.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=transformGeometryWithOptions(s,!0,i);r.geometryLayout=o.getLayout(),writeWptType(n,o.getCoordinates(),t)}}var GPX=class Gn extends GPX$1{constructor(e){if(super(e),!(this instanceof Gn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(i,r){this.readExtensions(i,r),t.call(this,i,r)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var i=super.readFeatures(e,t);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var r=this;return i.forEach(function(s,o,a){s.setId(o+1);var d=s.getProperties().desc;d&&s.setProperties({description:d});var y=s.getStyleFunction();if(!y){var v=Styling.defineStyleFunctionByDefault(r.options.defaultStyle);v&&s.setStyle(v)}}),i}writeFeatures(e,t){if(e.forEach(function(d,y,v){var _=d.getProperties().description;_&&d.setProperties({desc:_}),Styling.definePropertiesFromStyle(d);var C=d.getGeometry().getType();if(C==="Polygon"){var E=d.clone();E.set("type",C),E.setGeometry(new LineString(d.getGeometry().getCoordinates())),e.push(E),v.splice(y,1)}else if(C==="MultiPolygon"){var S=d.clone();S.set("type",C),S.setGeometry(new MultiLineString(d.getGeometry().getCoordinates())),e.push(S),v.splice(y,1)}}),this.options.orderBy!==void 0){var i=this.options.orderBy;if(i){var r=function(d,y){var v=d.get(i)||0,_=y.get(i)||0;return v.toString().localeCompare(_.toString(),void 0,{numeric:!0})};e.sort(r)}}var s=super.writeFeaturesNode(e,t);if(s===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(s,this.options.extensions),this.processExtensions_(s,e,{extensions:this.writeExtensions_});var o=Parser$1.toString(s);if(!o)return null;var a=Parser$1.format(o);return a===""?null:a}readExtensions(e,t){var i=t;if(!t){var r=e.getProperties();for(const d in r)if(Object.hasOwnProperty.call(r,d)){const y=r[d];if(y instanceof Node){i=y;break}}}if(!i){console.warn("node not found !");return}for(var s=0;s<i.childNodes.length;s++){var o=i.childNodes[s];o.nodeType===1&&e.set(o.nodeName,o.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var a=Styling.defineStyleFromProperties(e);a&&e.setStyle(a)}readRootExtensions(e){for(var t={},i=this.source.childNodes[0],r=i.childNodes,s=0;s<r.length;s++){var o=r[s];if(o.nodeName==="metadata")for(var a=o.childNodes,d=0;d<a.length;d++){var y=a[d];if(y.nodeName==="extensions")for(var v=y.childNodes,_=0;_<v.length;_++){var C=v[_];if(C.nodeName==="data"){var E=C.attributes[0];if(E&&E.nodeName==="name"&&E.nodeValue===e){t=JSON.parse(C.textContent);break}}}}}return t}writeRootExtensions_(e,t,i){var r=document.createElement("metadata"),s=document.createElement("extensions");function o(v,_){for(const T in _)if(Object.hasOwnProperty.call(_,T)){var C=_[T]||"",E=document.createElement(T);if(typeof C=="string"||typeof C=="number")E.innerHTML=C,v.appendChild(E);else if(C instanceof Array){E.setAttribute("type","array"),E.setAttribute("index",C.length);for(let R=0;R<C.length;R++){var S=C[R]||"",b=document.createElement("value");if(typeof S=="string"||typeof S=="number")b.innerHTML=S,E.appendChild(b);else if(S instanceof Array){b.setAttribute("type","array"),b.setAttribute("index",S.length);for(let L=0;L<S.length;L++){var P=S[L]||"",x=document.createElement("value");(typeof P=="string"||typeof P=="number")&&(x.innerHTML=P,b.appendChild(x))}E.appendChild(b)}else S instanceof Object&&E.appendChild(o(b,S))}v.appendChild(E)}else C instanceof Object&&v.appendChild(o(E,C))}return v}if(i)o(s,t);else for(const v in t)if(Object.hasOwnProperty.call(t,v)){const _=t[v];var a=document.createElement("data");a.setAttribute("name",v);var d=document.createTextNode(JSON.stringify(_));a.appendChild(d),s.appendChild(a)}r.appendChild(s);var y=e.firstChild;e.insertBefore(r,y)}writeExtensions_(e,t){var i=document.createElementNS(t.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(r=>{if(e.get(r)){var s=document.createElementNS(t.parentNode.namespaceURI,r);s.innerHTML=e.get(r),i.appendChild(s)}}),t.appendChild(i)}processExtensions_(e,t,i){for(var r=-1,s=e.childNodes,o=0;o<s.length;o++){var a=s[o];switch(a.nodeName){case"wpt":case"rte":case"trk":r++;var d=t[r],y=d.getStyle();if(y){var v=i.extensions;v&&typeof v=="function"&&v(d,a)}break;case"metadata":break;default:console.warn("nodename unknown :",a.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=readGeometryInternal(i.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:r,id:i.id,properties:i.properties},t);const s=new Feature;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(createGeometry(r,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,d=o.length;a<d;++a){const y=this.readFeatureFromObject(o[a],t);y&&r.push(y)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=get$3(t.properties.name);else if(t.type==="EPSG")i=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=writeGeometry(o,t),delete s[e.getGeometryName()]),isEmpty$1(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}};function readGeometryInternal(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=readPointGeometry(n);break}case"LineString":{t=readLineStringGeometry(n);break}case"Polygon":{t=readPolygonGeometry(n);break}case"MultiPoint":{t=readMultiPointGeometry(n);break}case"MultiLineString":{t=readMultiLineStringGeometry(n);break}case"MultiPolygon":{t=readMultiPolygonGeometry(n);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function readGeometry(n,e){const t=readGeometryInternal(n);return createGeometry(t,e)}function readGeometryCollectionGeometry(n,e){return n.geometries.map(function(i){return readGeometryInternal(i)})}function readPointGeometry(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(e[0].length)}}function readMultiLineStringGeometry(n){const e=n.coordinates,t=e[0][0].length,i=[],r=deflateCoordinatesArray(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:getLayoutForStride(t)}}function readMultiPointGeometry(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(e[0].length)}}function readMultiPolygonGeometry(n){const e=n.coordinates,t=[],i=e[0][0][0].length,r=deflateMultiCoordinatesArray(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:getLayoutForStride(i)}}function readPolygonGeometry(n){const e=n.coordinates,t=[],i=e[0][0].length,r=deflateCoordinatesArray(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:getLayoutForStride(i)}}function writeGeometry(n,e){n=transformGeometryWithOptions(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=writePointGeometry(n);break}case"LineString":{i=writeLineStringGeometry(n);break}case"Polygon":{i=writePolygonGeometry(n,e);break}case"MultiPoint":{i=writeMultiPointGeometry(n);break}case"MultiLineString":{i=writeMultiLineStringGeometry(n);break}case"MultiPolygon":{i=writeMultiPolygonGeometry(n,e);break}case"GeometryCollection":{i=writeGeometryCollectionGeometry(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function writeGeometryCollectionGeometry(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return writeGeometry(i,e)})}}function writeLineStringGeometry(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function writeMultiLineStringGeometry(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function writeMultiPointGeometry(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function writeMultiPolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function writePointGeometry(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function writePolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var GeoJSON=class Fn extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof Fn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var i=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),i.forEach(r=>{var s=r.getStyleFunction();if(s){var o=s.call(this,r,0);o&&o.length!==0&&r.setStyle(o[0])}else{var a=Styling.defineStyleFromProperties(r);if(a)r.setStyle(a);else{var d=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);d&&(r.setStyle(d),Styling.definePropertiesFromStyle(r))}}}),i}writeFeatures(e,t){e.forEach(function(r){Styling.definePropertiesFromStyle(r)});var i=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(i,this.options.extensions),JSON.stringify(i)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,i,r){var s=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,o=this.tileGrid,a=this.tileGrid.getTileCoordForCoordAndResolution(e,t),d=function(R,L,k){var N=[0,0,0],D=createEmpty(),G=R[1],U=R[2],F=L.getTileCoordExtent(R),B=k.getExtent();if(B!=null&&k.isGlobal()){var z=Math.ceil(getWidth(B)/getWidth(F));G=G%z,N[0]=R[0],N[1]=G,N[2]=R[2],F=L.getTileCoordExtent(N,D)}return intersects$1(F,B)?[R[0],G,U]:null},y=o.getTileCoordExtent(a),v=d(a,o,i);if(!(o.getResolutions().length<=a[0])){var _=o.getResolution(a[0]),C=o.getMatrixIds()[a[0]],E={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:v[1],TILEROW:v[2],TILEMATRIX:C,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(E,r);var S=Math.floor((e[0]-y[0])/(_/s)),b=Math.floor((y[3]-e[1])/(_/s)),P=o.getTileSize(a[0]);S=Math.min(S,(P[0]|P)-1),b=Math.max(b,0),E.I=S,E.J=b;var x=this.urls[0],T=Gp.Helper.normalyzeUrl(x,E);return T}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(n,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var i=n*28e-5;for(var r in t)if(t.hasOwnProperty(r)&&t[r]<=i)return r=parseInt(r,10),r;return 0},getAttributions:function(n){var e=n.zoom,t=[];if(n.originators!=null&&n.visibility)for(var i,r=0,s=n.originators.length;r<s;r++){i=!0;for(var o=n.originators[r],a=n.originators[r].constraints||[],d=0,y=a.length;d<y;d++){var v=a[d];i=!0;var _=this.getZoomLevelFromScaleDenominator(v.maxScaleDenominator,n.crs),C=this.getZoomLevelFromScaleDenominator(v.minScaleDenominator,n.crs)||21;_&&_>e&&(i=!1),i&&C&&C<e&&(i=!1);var E=v.bbox;if(i&&E){i=!1;var S=n.extent;if(S){var b=[E.top,E.left,E.bottom,E.right];if(this.intersects(S,b)){i=!0;break}}}}if(i){var P=o.logo,x=o.url,T=o.name?o.name:"",R=o.attribution,L=document.createElement("div");L.className="gp-control-attribution";var k=null;k=document.createElement("a"),k.className="gp-control-attribution-link",k.target="_blank",L.appendChild(k),x&&(k.href=x);var N=!!P,D=null;N?(D=document.createElement("img"),k?(D.className="gp-control-attribution-image",k.appendChild(D)):(D.className="",L.appendChild(D)),D.src=P,D.title=R||T,D.style.height="30px",D.style.width="30px"):T?k.textContent=T:R?k.textContent=R:x?k.textContent=x:k.textContent="",t.push(L.innerHTML+" ")}}return t},intersects:function(n,e){var t=n[1]<=e[3]&&e[1]<=n[3],i=n[2]<=e[0]&&e[2]<=n[0];return t&&i}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var n=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return n.Gp&&n.Gp.Config&&n.Gp.Config.layers&&Object.keys(n.Gp.Config.layers).length!==0?(this.configuration=n.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,i=t?t.params:null,r=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var s=Config.configuration.getLayerId(e.layer,"WMTS");if(!s)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(s),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");r=Config.configuration.getLayerKey(s)[0],i=Config.configuration.getLayerParams(e.layer,"WMTS")}var o=e.ssl===!1?"http://":"https://",a={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(i.url.includes("/private/")){var d=e.apiKey||r;if(!d)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");a.apikey=d}var y={url:Gp.Helper.normalyzeUrl(i.url.replace(/(http|https):\/\//,o),a,!1),version:i.version,style:i.styles,format:i.format,projection:i.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(i.minScale),layer:e.layer,matrixSet:i.TMSLink,tileGrid:new WMTSTileGrid({resolutions:i.nativeResolutions,matrixIds:i.matrixIds,origin:[Object.values(i.tileMatrices)[0].topLeftCorner.x,Object.values(i.tileMatrices)[0].topLeftCorner.y]})};return Helper.mergeParams(y,e.olParams),e.olParams&&!i.originators&&(i.originators=e.olParams.attributions),super(y),this._originators=i.originators,this._legends=e.legends||i.legends,this._metadata=e.metadata||i.metadata,this._description=e.description||i.description,this._title=e.title||i.title,this._quicklookUrl=e.quicklookUrl||i.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,i=t?t.params:null,r=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var s=Config.configuration.getLayerId(e.layer,"WMS");if(!s)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(s),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");r=Config.configuration.getLayerKey(s)[0],i=Config.configuration.getLayerParams(e.layer,"WMS")}var o=e.ssl===!1?"http://":"https://",a={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(i.url.includes("/private/")){var d=e.apiKey||r;if(!d)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");a.apikey=d}var y={url:Gp.Helper.normalyzeUrl(i.url.replace(/(http|https):\/\//,o),a,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:i.version,STYLES:i.styles,FORMAT:i.format}};return Helper.mergeParams(y,e.olParams),e.olParams&&!i.originators&&(i.originators=e.olParams.attributions),super(y),this._originators=i.originators,this._legends=e.legends||i.legends,this._metadata=e.metadata||i.metadata,this._title=e.title||i.title,this._description=e.description||i.description,this._quicklookUrl=e.quicklookUrl||i.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==TileState.LOADED||i==TileState.EMPTY||i==TileState.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let y=a.getSource().getTile(e,t,i,s,o);return y.getState()==TileState.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(y)||(y=y.getInterimTile()),y}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=apply(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!containsCoordinate(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,d=t.viewState,y=i.getRenderSource(),v=y.getTileGridForProjection(d.projection),_=y.getTilePixelRatio(t.pixelRatio);for(let C=v.getZForResolution(d.resolution);C>=v.getMinZoom();--C){const E=v.getTileCoordForCoordAndZ(r,C),S=y.getTile(C,E[1],E[2],o,a);if(!(S instanceof ImageTile||S instanceof ReprojTile)||S instanceof ReprojTile&&S.getState()===TileState.EMPTY)return null;if(S.getState()!==TileState.LOADED)continue;const b=v.getOrigin(C),P=toSize(v.getTileSize(C)),x=v.getResolution(C),T=Math.floor(_*((r[0]-b[0])/x-E[1]*P[0])),R=Math.floor(_*((b[1]-r[1])/x-E[2]*P[1])),L=Math.round(_*y.getGutterForProjection(d.projection));return this.getImageData(S.getImage(),T+L,R+L)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,d=r.rotation,y=e.pixelRatio,v=this.getLayer(),_=v.getSource(),C=_.getRevision(),E=_.getTileGridForProjection(s),S=E.getZForResolution(o,_.zDirection),b=E.getResolution(S);let P=e.extent;const x=e.viewState.resolution,T=_.getTilePixelRatio(y),R=Math.round(getWidth(P)/x*y),L=Math.round(getHeight(P)/x*y),k=i.extent&&fromUserExtent(i.extent);k&&(P=getIntersection(P,fromUserExtent(i.extent)));const N=b*R/2/T,D=b*L/2/T,G=[a[0]-N,a[1]-D,a[0]+N,a[1]+D],U=E.getTileRangeForExtentAndZ(P,S),F={};F[S]={};const B=this.createLoadedTileFinder(_,s,F),z=this.tmpExtent,Y=this.tmpTileRange_;this.newTiles_=!1;const X=d?getRotatedViewport(r.center,x,d,e.size):void 0;for(let ft=U.minX;ft<=U.maxX;++ft)for(let ct=U.minY;ct<=U.maxY;++ct){if(d&&!E.tileCoordIntersectsViewport([S,ft,ct],X))continue;const Qe=this.getTile(S,ft,ct,e);if(this.isDrawableTile(Qe)){const Ve=getUid(this);if(Qe.getState()==TileState.LOADED){F[S][Qe.tileCoord.toString()]=Qe;let je=Qe.inTransition(Ve);je&&i.opacity!==1&&(Qe.endTransition(Ve),je=!1),!this.newTiles_&&(je||!this.renderedTiles.includes(Qe))&&(this.newTiles_=!0)}if(Qe.getAlpha(Ve,e.time)===1)continue}const dt=E.getTileCoordChildTileRange(Qe.tileCoord,Y,z);let re=!1;dt&&(re=B(S+1,dt)),re||E.forEachTileCoordParentTileRange(Qe.tileCoord,B,Y,z)}const q=b/o*y/T;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/y,1/y,d,-R/2,-L/2);const K=toString$3(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));const ee=this.context,te=ee.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,R/2,L/2,q,q,0,-R/2,-L/2),te.width!=R||te.height!=L?(te.width=R,te.height=L):this.containerReused||ee.clearRect(0,0,R,L),k&&this.clipUnrotated(ee,e,k),_.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e),this.renderedTiles.length=0;let Oe=Object.keys(F).map(Number);Oe.sort(ascending);let ie,it,oe;i.opacity===1&&(!this.containerReused||_.getOpaque(e.viewState.projection))?Oe=Oe.reverse():(ie=[],it=[]);for(let ft=Oe.length-1;ft>=0;--ft){const ct=Oe[ft],Qe=_.getTilePixelSize(ct,y,s),re=E.getResolution(ct)/b,Ve=Qe[0]*re*q,je=Qe[1]*re*q,se=E.getTileCoordForCoordAndZ(getTopLeft(G),ct),pt=E.getTileCoordExtent(se),xt=apply(this.tempTransform,[T*(pt[0]-G[0])/b,T*(G[3]-pt[3])/b]),H=T*_.getGutterForProjection(s),W=F[ct];for(const $ in W){const de=W[$],ue=de.tileCoord,fe=se[1]-ue[1],Ge=Math.round(xt[0]-(fe-1)*Ve),Be=se[2]-ue[2],ye=Math.round(xt[1]-(Be-1)*je),pe=Math.round(xt[0]-fe*Ve),J=Math.round(xt[1]-Be*je),Q=Ge-pe,ne=ye-J,le=S===ct,ke=le&&de.getAlpha(getUid(this),e.time)!==1;let be=!1;if(!ke)if(ie){oe=[pe,J,pe+Q,J,pe+Q,J+ne,pe,J+ne];for(let Ze=0,mt=ie.length;Ze<mt;++Ze)if(S!==ct&&ct<it[Ze]){const ut=ie[Ze];intersects$1([pe,J,pe+Q,J+ne],[ut[0],ut[3],ut[4],ut[7]])&&(be||(ee.save(),be=!0),ee.beginPath(),ee.moveTo(oe[0],oe[1]),ee.lineTo(oe[2],oe[3]),ee.lineTo(oe[4],oe[5]),ee.lineTo(oe[6],oe[7]),ee.moveTo(ut[6],ut[7]),ee.lineTo(ut[4],ut[5]),ee.lineTo(ut[2],ut[3]),ee.lineTo(ut[0],ut[1]),ee.clip())}ie.push(oe),it.push(ct)}else ee.clearRect(pe,J,Q,ne);this.drawTileImage(de,e,pe,J,Q,ne,H,le),ie&&!ke?(be&&ee.restore(),this.renderedTiles.unshift(de)):this.renderedTiles.push(de),this.updateUsedTiles(e.usedTiles,_,de)}}return this.renderedRevision=C,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=y,this.renderedProjection=s,this.manageTilePyramid(e,_,E,y,s,P,S,v.getPreload()),this.scheduleExpireCache(e,_),this.postRender(ee,e),i.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,K!==te.style.transform&&(te.style.transform=K),this.container}drawTileImage(e,t,i,r,s,o,a,d){const y=this.getTileImage(e);if(!y)return;const v=getUid(this),_=t.layerStatesArray[t.layerIndex],C=_.opacity*(d?e.getAlpha(v,t.time):1),E=C!==this.context.globalAlpha;E&&(this.context.save(),this.context.globalAlpha=C),this.context.drawImage(y,a,a,y.width-2*a,y.height-2*a,i,r,s,o),E&&this.context.restore(),C!==_.opacity?t.animate=!0:d&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=(function(r,s,o){const a=getUid(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=getUid(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,d,y){const v=getUid(t);v in e.wantedTiles||(e.wantedTiles[v]={});const _=e.wantedTiles[v],C=e.tileQueue,E=i.getMinZoom(),S=e.viewState.rotation,b=S?getRotatedViewport(e.viewState.center,e.viewState.resolution,S,e.size):void 0;let P=0,x,T,R,L,k,N;for(N=E;N<=a;++N)for(T=i.getTileRangeForExtentAndZ(o,N,T),R=i.getResolution(N),L=T.minX;L<=T.maxX;++L)for(k=T.minY;k<=T.maxY;++k)S&&!i.tileCoordIntersectsViewport([N,L,k],b)||(a-N<=d?(++P,x=t.getTile(N,L,k,r,s),x.getState()==TileState.IDLE&&(_[x.getKey()]=!0,C.isKeyQueued(x.getKey())||C.enqueue([x,v,i.getTileCoordCenter(x.tileCoord),R])),y!==void 0&&y(x)):t.useTile(N,L,k,s));t.updateCacheSize(P,s)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var i=Config.configuration.getLayerId(e.layer,"WMTS");if(t=Config.configuration.getLayerConf(i),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var r;e.olParams&&e.olParams.sourceParams&&(r=e.olParams.sourceParams);var s=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:r}),o={source:s};if(s.getLayer()!==void 0&&t.globalConstraints&&t.globalConstraints.projection){var a;typeof t.globalConstraints.projection=="string"&&(a=get$3(t.globalConstraints.projection)),a&&a.getUnits()&&(a.getUnits()==="m"?(o.minResolution=(t.globalConstraints.minScale-1)*28e-5,o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):a.getUnits()==="degrees"&&(o.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(o,e.olParams),super(o),this.name=e.layer,this.service="WMTS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var i=Config.configuration.getLayerId(e.layer,"WMS");if(t=Config.configuration.getLayerConf(i),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var r;e.olParams&&e.olParams.sourceParams&&(r=e.olParams.sourceParams);var s=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:r}),o={source:s};if(s.getParams().LAYERS!==void 0&&r&&r.projection){var a=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];o.extent=transformExtent(a,"EPSG:4326",r.projection);var d;typeof r.projection=="string"?d=get$3(r.projection):typeof r.projection=="object"&&r.projection.getCode()&&(d=get$3(r.projection.getCode())),d&&d.getUnits()&&(d.getUnits()==="m"?(o.minResolution=(t.globalConstraints.minScale-1)*28e-5,o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):d.getUnits()==="degrees"&&(o.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(o,e.olParams),super(o),this.name=e.layer,this.service="WMS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create()}prepareTile(e,t,i){let r;const s=e.getState();return(s===TileState.LOADED||s===TileState.ERROR)&&(this.updateExecutorGroup_(e,t,i),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,d=o.projection,y=this.getLayer(),v=y.getSource().getTile(e,t,i,s,d),_=r.viewHints,C=!(_[ViewHint.ANIMATING]||_[ViewHint.INTERACTING]);return(C||!v.wantedResolution)&&(v.wantedResolution=a),this.prepareTile(v,s,d)&&(C||Date.now()-r.time<8)&&y.getRenderMode()!=="vector"&&this.renderTileImage_(v,r),super.getTile(e,t,i,r)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?getUid(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,d=e.getReplayState(r);if(!d.dirty&&d.renderedResolution===a&&d.renderedRevision==s&&d.renderedRenderOrder==o)return;const y=r.getSource(),v=r.getDeclutter(),_=y.getTileGrid(),E=y.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),S=y.getSourceTiles(t,i,e),b=getUid(r);delete e.hitDetectionImageData[b],e.executorGroups[b]=[],v&&(e.declutterExecutorGroups[b]=[]),d.dirty=!1;for(let P=0,x=S.length;P<x;++P){const T=S[P];if(T.getState()!=TileState.LOADED)continue;const R=T.tileCoord,L=_.getTileCoordExtent(R),k=getIntersection(E,L),N=buffer(k,r.getRenderBuffer()*a,this.tmpExtent),D=equals$1(L,k)?null:N,G=new BuilderGroup(0,N,a,t),U=v?new BuilderGroup(0,k,a,t):void 0,F=getSquaredTolerance(a,t),B=function(K){let ee;const te=K.getStyleFunction()||r.getStyleFunction();if(te&&(ee=te(K,a)),ee){const Oe=this.renderFeature(K,F,ee,G,U);d.dirty=d.dirty||Oe}},z=T.getFeatures();o&&o!==d.renderedRenderOrder&&z.sort(o);for(let K=0,ee=z.length;K<ee;++K){const te=z[K];(!D||intersects$1(D,te.getGeometry().getExtent()))&&B.call(this,te)}const Y=G.finish(),X=r.getRenderMode()!=="vector"&&v&&S.length===1?null:k,q=new ExecutorGroup(X,a,t,y.getOverlaps(),Y,r.getRenderBuffer());if(e.executorGroups[b].push(q),U){const K=new ExecutorGroup(null,a,t,y.getOverlaps(),U.finish(),r.getRenderBuffer());e.declutterExecutorGroups[b].push(K)}}d.renderedRevision=s,d.renderedRenderOrder=o,d.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,s){const o=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const d=this.getLayer(),v=d.getSource().getTileGridForProjection(t.viewState.projection),_=boundingExtent([e]);buffer(_,o*i,_);const C={},E=function(P,x,T){let R=P.getId();R===void 0&&(R=getUid(P));const L=C[R];if(L){if(L!==!0&&T<L.distanceSq){if(T===0)return C[R]=!0,s.splice(s.lastIndexOf(L),1),r(P,d,x);L.geometry=x,L.distanceSq=T}}else{if(T===0)return C[R]=!0,r(P,d,x);s.push(C[R]={feature:P,layer:d,geometry:x,distanceSq:T,callback:r})}},S=this.renderedTiles;let b;for(let P=0,x=S.length;!b&&P<x;++P){const T=S[P],R=v.getTileCoordExtent(T.wrappedTileCoord);if(!intersects$1(R,_))continue;const L=getUid(d),k=[T.executorGroups[L]],N=T.declutterExecutorGroups[L];N&&k.push(N),k.some(D=>{const G=D===N?t.declutterTree.all().map(U=>U.value):null;for(let U=0,F=D.length;U<F;++U)if(b=D[U].forEachFeatureAtCoordinate(e,o,a,i,E,G),b)return!0})}return b}getFeatures(e){return new Promise((t,i)=>{const r=this.getLayer(),s=getUid(r),o=r.getSource(),a=this.renderedProjection,d=a.getExtent(),y=this.renderedResolution,v=o.getTileGridForProjection(a),_=apply(this.renderedPixelToCoordinateTransform_,e.slice()),C=v.getTileCoordForCoordAndResolution(_,y);let E;for(let R=0,L=this.renderedTiles.length;R<L;++R)if(C.toString()===this.renderedTiles[R].tileCoord.toString()){if(E=this.renderedTiles[R],E.getState()===TileState.LOADED){const k=v.getTileCoordExtent(E.tileCoord);o.getWrapX()&&a.canWrapX()&&!containsExtent(d,k)&&wrapX$1(_,a);break}E=void 0}if(!E||E.loadingSourceTiles>0){t([]);return}const S=v.getTileCoordExtent(E.wrappedTileCoord),b=getTopLeft(S),P=[(_[0]-b[0])/y,(b[1]-_[1])/y],x=E.getSourceTiles().reduce(function(R,L){return R.concat(L.getFeatures())},[]);let T=E.hitDetectionImageData[s];if(!T){const R=toSize(v.getTileSize(v.getZForResolution(y,o.zDirection))),L=this.renderedRotation_,k=[this.getRenderTransform(v.getTileCoordCenter(E.wrappedTileCoord),y,0,HIT_DETECT_RESOLUTION,R[0]*HIT_DETECT_RESOLUTION,R[1]*HIT_DETECT_RESOLUTION,0)];T=createHitDetectionImageData(R,k,x,r.getStyleFunction(),v.getTileCoordExtent(E.wrappedTileCoord),E.getReplayState(r).renderedResolution,L),E.hitDetectionImageData[s]=T}t(hitDetect(P,x,T))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,i=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const r=e.viewHints,s=!(r[ViewHint.ANIMATING]||r[ViewHint.INTERACTING]),o=this.renderedTiles;for(let a=0,d=o.length;a<d;++a){const y=o[a],v=y.declutterExecutorGroups[getUid(this.getLayer())];if(v)for(let _=v.length-1;_>=0;--_)v[_].execute(this.context,1,this.getTileRenderTransform(y,e),e.viewState.rotation,s,void 0,e.declutterTree)}t.globalAlpha=i}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,s=r.center,o=r.resolution,a=r.rotation,d=t.size,y=Math.round(d[0]*i),v=Math.round(d[1]*i),C=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),E=e.tileCoord,S=C.getTileCoordExtent(e.wrappedTileCoord),b=C.getTileCoordExtent(E,this.tmpExtent)[0]-S[0];return multiply(scale$3(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,o,a,i,y,v,b))}postRender(e,t){const i=t.viewHints,r=!(i[ViewHint.ANIMATING]||i[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=s.getOpacity();const d=VECTOR_REPLAYS[o],y=t.viewState,v=y.rotation,_=s.getSource(),E=_.getTileGridForProjection(y.projection).getZForResolution(y.resolution,_.zDirection),S=this.renderedTiles,b=[],P=[];let x=!0;for(let T=S.length-1;T>=0;--T){const R=S[T];x=x&&!R.getReplayState(s).dirty;const L=R.executorGroups[getUid(s)].filter(U=>U.hasExecutors(d));if(L.length===0)continue;const k=this.getTileRenderTransform(R,t),N=R.tileCoord[0];let D=!1;const G=L[0].getClipCoords(k);if(G){for(let U=0,F=b.length;U<F;++U)if(E!==N&&N<P[U]){const B=b[U];intersects$1([G[0],G[3],G[4],G[7]],[B[0],B[3],B[4],B[7]])&&(D||(e.save(),D=!0),e.beginPath(),e.moveTo(G[0],G[1]),e.lineTo(G[2],G[3]),e.lineTo(G[4],G[5]),e.lineTo(G[6],G[7]),e.moveTo(B[6],B[7]),e.lineTo(B[4],B[5]),e.lineTo(B[2],B[3]),e.lineTo(B[0],B[1]),e.clip())}b.push(G),P.push(N)}for(let U=0,F=L.length;U<F;++U)L[U].execute(e,1,k,v,r,d);D&&e.restore()}e.globalAlpha=a,this.ready=x,super.postRender(e,t)}renderFeature(e,t,i,r,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,d=i.length;a<d;++a)o=renderFeature$1(r,e,i[a],t,this.boundHandleStyleImageChange_,void 0,s)||o;else o=renderFeature$1(r,e,i,t,this.boundHandleStyleImageChange_,void 0,s);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),s=i.getRevision(),o=e.executorGroups[getUid(i)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,d=a[0],y=i.getSource();let v=t.pixelRatio;const C=t.viewState.projection,E=y.getTileGridForProjection(C),S=E.getResolution(e.tileCoord[0]),b=t.pixelRatio/e.wantedResolution*S,P=E.getResolution(d),x=e.getContext(i);v=Math.round(Math.max(v,b/v));const T=y.getTilePixelSize(d,v,C);x.canvas.width=T[0],x.canvas.height=T[1];const R=v/b;if(R!==1){const D=reset(this.tmpTransform_);scale$3(D,R,R),x.setTransform.apply(x,D)}const L=E.getTileCoordExtent(a,this.tmpExtent),k=b/P,N=reset(this.tmpTransform_);scale$3(N,k,-k),translate$1(N,-L[0],-L[3]);for(let D=0,G=o.length;D<G;++D)o[D].execute(x,R,N,0,!0,IMAGE_REPLAYS[i.getRenderMode()]);r.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const i=e.renderMode||"hybrid";assert(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(n,e,t,i){const r=document.createElement("script"),s="olc_"+getUid(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(d){clearTimeout(a),o(),e(d)},document.head.appendChild(r)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const y=getTransformFromProjections(t,i);r=applyTransform(e.bounds,y)}const s=extentFromProjection(i),o=e.minzoom||0,a=e.maxzoom||22,d=createXYZ({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=d,this.tileUrlFunction=createFromTemplates(e.tiles,d),e.attribution&&!this.getAttributions()){const y=r!==void 0?r:s;this.setAttributions(function(v){return intersects$1(y,v.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(n,e,t,i,r){var s,o,a=r*8-i-1,d=(1<<a)-1,y=d>>1,v=-7,_=t?r-1:0,C=t?-1:1,E=n[e+_];for(_+=C,s=E&(1<<-v)-1,E>>=-v,v+=a;v>0;s=s*256+n[e+_],_+=C,v-=8);for(o=s&(1<<-v)-1,s>>=-v,v+=i;v>0;o=o*256+n[e+_],_+=C,v-=8);if(s===0)s=1-y;else{if(s===d)return o?NaN:(E?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-y}return(E?-1:1)*o*Math.pow(2,s-i)};ieee754$1.write=function(n,e,t,i,r,s){var o,a,d,y=s*8-r-1,v=(1<<y)-1,_=v>>1,C=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:s-1,S=i?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=v):(o=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?e+=C/d:e+=C*Math.pow(2,1-_),e*d>=2&&(o++,d/=2),o+_>=v?(a=0,o=v):o+_>=1?(a=(e*d-1)*Math.pow(2,r),o=o+_):(a=e*Math.pow(2,_-1)*Math.pow(2,r),o=0));r>=8;n[t+E]=a&255,E+=S,a/=256,r-=8);for(o=o<<r|a,y+=r;y>0;n[t+E]=o&255,E+=S,o/=256,y-=8);n[t+E-S]|=b*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(n,e,t){for(t=t||this.length;this.pos<t;){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=i&7,n(r,e,this),this.pos===s&&this.skip(i)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=readUInt32(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=readInt32(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,n},readSFixed64:function(){var n=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,n},readFloat:function(){var n=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e=this.buf,t,i;return i=e[this.pos++],t=i&127,i<128||(i=e[this.pos++],t|=(i&127)<<7,i<128)||(i=e[this.pos++],t|=(i&127)<<14,i<128)||(i=e[this.pos++],t|=(i&127)<<21,i<128)?t:(i=e[this.pos],t|=(i&15)<<28,readVarintRemainder(t,n,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2===1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,e,n):readUtf8(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==Pbf.Bytes)return n.push(this.readVarint(e));var t=readPackedEnd(this);for(n=n||[];this.pos<t;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readSVarint());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readBoolean());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readFloat());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readDouble());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readFixed32());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readSFixed32());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readFixed64());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Pbf.Bytes)return n.push(this.readSFixed64());var e=readPackedEnd(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=n&7;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else if(e===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),writeInt32(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),writeInt32(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),writeInt32(this.buf,n&-1,this.pos),writeInt32(this.buf,Math.floor(n*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),writeInt32(this.buf,n&-1,this.pos),writeInt32(this.buf,Math.floor(n*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(n){if(n=+n||0,n>268435455||n<0){writeBigVarint(n,this);return}this.realloc(4),this.buf[this.pos++]=n&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=n>>>7&127)))},writeSVarint:function(n){this.writeVarint(n<0?-n*2-1:n*2)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(n.length*4),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,n,this.pos);var t=this.pos-e;t>=128&&makeRoomForExtraLength(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(n){this.realloc(4),ieee754.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),ieee754.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=n[t]},writeRawMessage:function(n,e){this.pos++;var t=this.pos;n(e,this);var i=this.pos-t;i>=128&&makeRoomForExtraLength(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeMessage:function(n,e,t){this.writeTag(n,Pbf.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,writePackedVarint,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,writePackedSVarint,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,writePackedBoolean,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,writePackedFloat,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,writePackedDouble,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,writePackedFixed32,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,writePackedSFixed32,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,writePackedFixed64,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,writePackedSFixed64,e)},writeBytesField:function(n,e){this.writeTag(n,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,Pbf.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,!!e)}};function readVarintRemainder(n,e,t){var i=t.buf,r,s;if(s=i[t.pos++],r=(s&112)>>4,s<128||(s=i[t.pos++],r|=(s&127)<<3,s<128)||(s=i[t.pos++],r|=(s&127)<<10,s<128)||(s=i[t.pos++],r|=(s&127)<<17,s<128)||(s=i[t.pos++],r|=(s&127)<<24,s<128)||(s=i[t.pos++],r|=(s&1)<<31,s<128))return toNum(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(n){return n.type===Pbf.Bytes?n.readVarint()+n.pos:n.pos+1}function toNum(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function writeBigVarint(n,e){var t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,i,e),writeBigVarintHigh(i,e)}function writeBigVarintLow(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function writeBigVarintHigh(n,e){var t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function makeRoomForExtraLength(n,e,t){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(var r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function writePackedVarint(n,e){for(var t=0;t<n.length;t++)e.writeVarint(n[t])}function writePackedSVarint(n,e){for(var t=0;t<n.length;t++)e.writeSVarint(n[t])}function writePackedFloat(n,e){for(var t=0;t<n.length;t++)e.writeFloat(n[t])}function writePackedDouble(n,e){for(var t=0;t<n.length;t++)e.writeDouble(n[t])}function writePackedBoolean(n,e){for(var t=0;t<n.length;t++)e.writeBoolean(n[t])}function writePackedFixed32(n,e){for(var t=0;t<n.length;t++)e.writeFixed32(n[t])}function writePackedSFixed32(n,e){for(var t=0;t<n.length;t++)e.writeSFixed32(n[t])}function writePackedFixed64(n,e){for(var t=0;t<n.length;t++)e.writeFixed64(n[t])}function writePackedSFixed64(n,e){for(var t=0;t<n.length;t++)e.writeSFixed64(n[t])}function readUInt32(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+n[e+3]*16777216}function writeInt32(n,e,t){n[t]=e,n[t+1]=e>>>8,n[t+2]=e>>>16,n[t+3]=e>>>24}function readInt32(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}function readUtf8(n,e,t){for(var i="",r=e;r<t;){var s=n[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>t)break;var d,y,v;a===1?s<128&&(o=s):a===2?(d=n[r+1],(d&192)===128&&(o=(s&31)<<6|d&63,o<=127&&(o=null))):a===3?(d=n[r+1],y=n[r+2],(d&192)===128&&(y&192)===128&&(o=(s&15)<<12|(d&63)<<6|y&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(d=n[r+1],y=n[r+2],v=n[r+3],(d&192)===128&&(y&192)===128&&(v&192)===128&&(o=(s&15)<<18|(d&63)<<12|(y&63)<<6|v&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),r+=a}return i}function readUtf8TextDecoder(n,e,t){return utf8TextDecoder.decode(n.subarray(e,t))}function writeUtf8(n,e,t){for(var i=0,r,s;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(s)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=r;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}const PBF=getDefaultExportFromCjs$1(pbf);class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,d=0,y=0,v=0,_=0;for(;e.pos<s;){if(!a){const C=e.readVarint();o=C&7,a=C>>3}if(a--,o===1||o===2)d+=e.readSVarint(),y+=e.readSVarint(),o===1&&v>_&&(r.push(v),_=v),i.push(d,y),v+=2;else if(o===7)v>_&&(i.push(i[_],i[_+1]),v+=2);else throw new Error("Invalid command found in the PBF")}v>_&&(r.push(v),_=v)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const d=[],y=[];this.readRawGeometry_(e,t,d,y);const v=getGeometryType(r,y.length);if(this.featureClass_===RenderFeature)s=new this.featureClass_(v,d,y,2,o,a),s.transform(i.dataProjection);else{let _;if(v=="Polygon"){const S=inflateEnds(d,y);_=S.length>1?new MultiPolygon(d,"XY",S):new Polygon(d,"XY",y)}else _=v==="Point"?new Point$1(d,"XY"):v==="LineString"?new LineString(d,"XY"):v==="MultiPoint"?new MultiPoint(d,"XY"):v==="MultiLineString"?new MultiLineString(d,"XY",y):null;const C=this.featureClass_;s=new C,this.geometryName_&&s.setGeometryName(this.geometryName_);const E=transformGeometryWithOptions(_,!1,i);s.setGeometry(E),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=get$3(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const s=new PBF(e),o=s.readFields(layersPBFReader,{}),a=[];for(const d in o){if(i&&!i.includes(d))continue;const y=o[d],v=y?[0,0,y.extent,y.extent]:null;r.setExtent(v);for(let _=0,C=y.length;_<C;++_){const E=readRawFeature(s,y,_),S=this.createFeature_(s,E,t);S!==null&&a.push(S)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(layerPBFReader,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function layerPBFReader(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function featurePBFReader(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[r]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function readRawFeature(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(featurePBFReader,r,i),r}function getGeometryType(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(n){return n=Math.round(n),n<0?0:n>255?255:n}function clamp_css_float(n){return n<0?0:n>1?1:n}function parse_css_int(n){return n[n.length-1]==="%"?clamp_css_byte(parseFloat(n)/100*255):clamp_css_byte(parseInt(n))}function parse_css_float(n){return n[n.length-1]==="%"?clamp_css_float(parseFloat(n)/100):clamp_css_float(parseFloat(n))}function css_hue_to_rgb(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function parseCSSColor(n){var e=n.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var i=e.indexOf("("),r=e.indexOf(")");if(i!==-1&&r+1===e.length){var s=e.substr(0,i),o=e.substr(i+1,r-(i+1)).split(","),a=1;switch(s){case"rgba":if(o.length!==4)return null;a=parse_css_float(o.pop());case"rgb":return o.length!==3?null:[parse_css_int(o[0]),parse_css_int(o[1]),parse_css_int(o[2]),a];case"hsla":if(o.length!==4)return null;a=parse_css_float(o.pop());case"hsl":if(o.length!==3)return null;var d=(parseFloat(o[0])%360+360)%360/360,y=parse_css_float(o[1]),v=parse_css_float(o[2]),_=v<=.5?v*(y+1):v+y-v*y,C=v*2-_;return[clamp_css_byte(css_hue_to_rgb(C,_,d+1/3)*255),clamp_css_byte(css_hue_to_rgb(C,_,d)*255),clamp_css_byte(css_hue_to_rgb(C,_,d-1/3)*255),a];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,t,i,r=1){this.r=e,this.g=t,this.b=i,this.a=r}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCSSColor_1(e);if(t)return new Color(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,i,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(i)},${r})`}toArray(){const{r:e,g:t,b:i,a:r}=this;return r===0?[0,0,0,0]:[e*255/r,t*255/r,i*255/r,r]}toArray01(){const{r:e,g:t,b:i,a:r}=this;return r===0?[0,0,0,0]:[e/r,t/r,i/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:i,a:r}=this;return[e,t,i,r]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(n){return typeof n=="object"?["literal",n]:n}function convertFunction(n,e){let t=n.stops;if(!t)return convertIdentityFunction(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,s=i||!r;return t=t.map(o=>!r&&e.tokens&&typeof o[1]=="string"?[o[0],convertTokenString(o[1])]:[o[0],convertLiteral(o[1])]),i?convertZoomAndPropertyFunction(n,e,t):s?convertZoomFunction(n,e,t):convertPropertyFunction(n,e,t)}function convertIdentityFunction(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,convertLiteral(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function getInterpolateOperator(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(n,e,t){const i={},r={},s=[];for(let a=0;a<t.length;a++){const d=t[a],y=d[0].zoom;i[y]===void 0&&(i[y]={zoom:y,type:n.type,property:n.property,default:n.default},r[y]=[],s.push(y)),r[y].push([d[0].value,d[1]])}if(getFunctionType({},e)==="exponential"){const a=[getInterpolateOperator(n),["linear"],["zoom"]];for(const d of s){const y=convertPropertyFunction(i[d],e,r[d]);appendStopPair(a,d,y,!1)}return a}else{const a=["step",["zoom"]];for(const d of s){const y=convertPropertyFunction(i[d],e,r[d]);appendStopPair(a,d,y,!0)}return fixupDegenerateStepCurve(a),a}}function coalesce(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function getFallback(n,e){const t=convertLiteral(coalesce(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(n,e,t){const i=getFunctionType(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const o of t)s.push(["==",r,o[0]],o[1]);return s.push(getFallback(n,e)),s}else if(i==="categorical"){const s=["match",r];for(const o of t)appendStopPair(s,o[0],o[1],!1);return s.push(getFallback(n,e)),s}else if(i==="interval"){const s=["step",["number",r]];for(const o of t)appendStopPair(s,o[0],o[1],!0);return fixupDegenerateStepCurve(s),n.default===void 0?s:["case",["==",["typeof",r],"number"],s,convertLiteral(n.default)]}else if(i==="exponential"){const s=n.base!==void 0?n.base:1,o=[getInterpolateOperator(n),s===1?["linear"]:["exponential",s],["number",r]];for(const a of t)appendStopPair(o,a[0],a[1],!1);return n.default===void 0?o:["case",["==",["typeof",r],"number"],o,convertLiteral(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function convertZoomFunction(n,e,t,i=["zoom"]){const r=getFunctionType(n,e);let s,o=!1;if(r==="interval")s=["step",i],o=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;s=[getInterpolateOperator(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)appendStopPair(s,a[0],a[1],o);return fixupDegenerateStepCurve(s),s}function fixupDegenerateStepCurve(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function appendStopPair(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function getFunctionType(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const s=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(n,e){return{kind:"array",itemType:n,N:e}}function toString$1(n){if(n.kind==="array"){const e=toString$1(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${toString$1(n)} but found ${toString$1(e)} instead.`}function isValidType(n,e){return e.some(t=>t.kind===n.kind)}function isValidNativeType(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class Collator{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,t,i,r,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=s}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const i={};t.fontStack&&(i["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(i["font-scale"]=t.scale),t.textColor&&(i["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(i)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof Color$1)return!0;if(n instanceof Collator)return!0;if(n instanceof Formatted)return!0;if(n instanceof ResolvedImage)return!0;if(Array.isArray(n)){for(const e of n)if(!isValue(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!isValue(n[e]))return!1;return!0}else return!1}function typeOf(n){if(n===null)return NullType;if(typeof n=="string")return StringType;if(typeof n=="boolean")return BooleanType;if(typeof n=="number")return NumberType;if(n instanceof Color$1)return ColorType;if(n instanceof Collator)return CollatorType;if(n instanceof Formatted)return FormattedType;if(n instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=typeOf(i);if(!t)t=r;else{if(t===r)continue;t=ValueType;break}}return array$1(t||ValueType,e)}else return ObjectType}function toString(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Color$1||n instanceof Formatted||n instanceof ResolvedImage?n.toString():JSON.stringify(n)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const i=e[1];let r=typeOf(i);const s=t.expectedType;return r.kind==="array"&&r.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(r=s),new Literal(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const s=e[0];if(s==="array"){let a;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in types$2)||y==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=types$2[y],i++}else a=ValueType;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],i++}r=array$1(a,d)}else r=types$2[s];const o=[];for(;i<e.length;i++){const a=t.parse(e[i],i,ValueType);if(!a)return null;o.push(a)}return new Assertion(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(i))){if(t===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(i))} instead.`)}else return i}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);const r=e.N;(typeof r=="number"||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(i=>i.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let s=!1;for(let o=1;o<=e.length-1;++o){const a=e[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let d=null;if(a["font-scale"]&&(d=t.parse(a["font-scale"],1,NumberType),!d))return null;let y=null;if(a["text-font"]&&(y=t.parse(a["text-font"],1,array$1(StringType)),!y))return null;let v=null;if(a["text-color"]&&(v=t.parse(a["text-color"],1,ColorType),!v))return null;const _=r[r.length-1];_.scale=d,_.font=y,_.textColor=v}else{const d=t.parse(e[o],1,ValueType);if(!d)return null;const y=d.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,r.push({content:d,scale:null,font:null,textColor:null})}}return new FormatExpression(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return typeOf(r)===ResolvedImageType?new FormattedSection("",r,null,null,null):new FormattedSection(toString(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const i={};t.scale&&(i["font-scale"]=t.scale.serialize()),t.font&&(i["text-font"]=t.font.serialize()),t.textColor&&(i["text-color"]=t.textColor.serialize()),e.push(i)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,StringType);return i?new ImageExpression(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=ResolvedImage.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=types$1[i],s=[];for(let o=1;o<e.length;o++){const a=t.parse(e[o],o,ValueType);if(!a)return null;s.push(a)}return new Coercion(r,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Color$1)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=validateRGBA(t[0],t[1],t[2],t[3]),!i))return new Color$1(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError$1(i||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new RuntimeError$1(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:i,y:r}=this.featureTileCoord,s=i*t-e[0],o=r*t-e[1],a=this.featureDistanceData.bearing[0],d=this.featureDistanceData.bearing[1];return a*s+d*o}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color$1.parse(e)),t}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const i=e[0],r=CompoundExpression.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let d=null;for(const[y,v]of a){d=new ParsingContext$1(t.registry,t.path,null,t.scope);const _=[];let C=!1;for(let E=1;E<e.length;E++){const S=e[E],b=Array.isArray(y)?y[E-1]:y.type,P=d.parse(S,1+_.length,b);if(!P){C=!0;break}_.push(P)}if(!C){if(Array.isArray(y)&&y.length!==_.length){d.error(`Expected ${y.length} arguments, but found ${_.length} instead.`);continue}for(let E=0;E<_.length;E++){const S=Array.isArray(y)?y[E]:y.type,b=_[E];d.concat(E+1).checkSubtype(S,b.type)}if(d.errors.length===0)return new CompoundExpression(i,s,v,_)}}if(a.length===1)t.errors.push(...d.errors);else{const v=(a.length?a:o).map(([C])=>stringifySignature(C)).join(" | "),_=[];for(let C=1;C<e.length;C++){const E=t.parse(e[C],1+_.length);if(!E)return null;_.push(toString$1(E.type))}t.error(`Expected arguments of type ${v}, but found (${_.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const i in t)e[i]=CompoundExpression}}function stringifySignature(n){return Array.isArray(n)?`(${n.map(toString$1).join(", ")})`:`(${toString$1(n.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,t,i){this.type=CollatorType,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,BooleanType);if(!r)return null;const s=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,BooleanType);if(!s)return null;let o=null;return i.locale&&(o=t.parse(i.locale,1,StringType),!o)?null:new CollatorExpression(r,s,o)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function mercatorXfromLng(n){return(180+n)/360}function mercatorYfromLat(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function boxWithinBox(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function getTileCoordinates(n,e){const t=mercatorXfromLng(n[0]),i=mercatorYfromLat(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*EXTENT),Math.round(i*r*EXTENT)]}function onBoundary(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],s=n[0]-t[0],o=n[1]-t[1];return i*o-s*r===0&&i*s<=0&&r*o<=0}function rayIntersect(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function pointWithinPolygon(n,e){let t=!1;for(let i=0,r=e.length;i<r;i++){const s=e[i];for(let o=0,a=s.length;o<a-1;o++){if(onBoundary(n,s[o],s[o+1]))return!1;rayIntersect(n,s[o],s[o+1])&&(t=!t)}}return t}function pointWithinPolygons(n,e){for(let t=0;t<e.length;t++)if(pointWithinPolygon(n,e[t]))return!0;return!1}function perp(n,e){return n[0]*e[1]-n[1]*e[0]}function twoSided(n,e,t,i){const r=n[0]-t[0],s=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1],d=i[0]-t[0],y=i[1]-t[1],v=r*y-d*s,_=o*y-d*a;return v>0&&_<0||v<0&&_>0}function lineIntersectLine(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],s=[i[0]-t[0],i[1]-t[1]];return perp(s,r)===0?!1:!!(twoSided(n,e,t,i)&&twoSided(t,i,n,e))}function lineIntersectPolygon(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(lineIntersectLine(n,e,i[r],i[r+1]))return!0;return!1}function lineStringWithinPolygon(n,e){for(let t=0;t<n.length;++t)if(!pointWithinPolygon(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if(lineIntersectPolygon(n[t],n[t+1],e))return!1;return!0}function lineStringWithinPolygons(n,e){for(let t=0;t<e.length;t++)if(lineStringWithinPolygon(n,e[t]))return!0;return!1}function getTilePolygon(n,e,t){const i=[];for(let r=0;r<n.length;r++){const s=[];for(let o=0;o<n[r].length;o++){const a=getTileCoordinates(n[r][o],t);updateBBox(e,a),s.push(a)}i.push(s)}return i}function getTilePolygons(n,e,t){const i=[];for(let r=0;r<n.length;r++){const s=getTilePolygon(n[r],e,t);i.push(s)}return i}function updatePoint(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let s=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;s===0&&(s=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=s}updateBBox(e,n)}function resetBBox(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function getTilePoints(n,e,t,i){const r=Math.pow(2,i.z)*EXTENT,s=[i.x*EXTENT,i.y*EXTENT],o=[];if(!n)return o;for(const a of n)for(const d of a){const y=[d.x+s[0],d.y+s[1]];updatePoint(y,e,t,r),o.push(y)}return o}function getTileLines(n,e,t,i){const r=Math.pow(2,i.z)*EXTENT,s=[i.x*EXTENT,i.y*EXTENT],o=[];if(!n)return o;for(const a of n){const d=[];for(const y of a){const v=[y.x+s[0],y.y+s[1]];updateBBox(e,v),d.push(v)}o.push(d)}if(e[2]-e[0]<=r/2){resetBBox(e);for(const a of o)for(const d of a)updatePoint(d,e,t,r)}return o}function pointsWithinPolygons(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=getTilePolygon(e.coordinates,i,r),o=getTilePoints(n.geometry(),t,i,r);if(!boxWithinBox(t,i))return!1;for(const a of o)if(!pointWithinPolygon(a,s))return!1}if(e.type==="MultiPolygon"){const s=getTilePolygons(e.coordinates,i,r),o=getTilePoints(n.geometry(),t,i,r);if(!boxWithinBox(t,i))return!1;for(const a of o)if(!pointWithinPolygons(a,s))return!1}return!0}function linesWithinPolygons(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=getTilePolygon(e.coordinates,i,r),o=getTileLines(n.geometry(),t,i,r);if(!boxWithinBox(t,i))return!1;for(const a of o)if(!lineStringWithinPolygon(a,s))return!1}if(e.type==="MultiPolygon"){const s=getTilePolygons(e.coordinates,i,r),o=getTileLines(n.geometry(),t,i,r);if(!boxWithinBox(t,i))return!1;for(const a of o)if(!lineStringWithinPolygons(a,s))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const i=e[1];if(i.type==="FeatureCollection")for(let r=0;r<i.features.length;++r){const s=i.features[r].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new Within(i,i.features[r].geometry)}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Within(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Within(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(n){if(n instanceof CompoundExpression$1){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Within$1)return!1;let e=!0;return n.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(n){if(n instanceof CompoundExpression$1&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(n,e){if(n instanceof CompoundExpression$1&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!isGlobalPropertyConstant(i,e)&&(t=!1)}),t}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new Var(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,t=[],i,r=new Scope$1,s=[]){this.registry=e,this.path=t,this.key=t.map(o=>`[${o}]`).join(""),this.scope=r,this.errors=s,this.expectedType=i}parse(e,t,i,r,s={}){return t?this.concat(t,i,r)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,s,o){return o==="assert"?new Assertion$1(s,[r]):o==="coerce"?new Coercion$1(s,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[r];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,d=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&d.kind==="value")o=i(o,a,t.typeAnnotation||"assert");else if((a.kind==="color"||a.kind==="formatted"||a.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))o=i(o,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,d))return null}if(!(o instanceof Literal$1)&&o.type.kind!=="resolvedImage"&&isConstant(o)){const a=new EvaluationContext$1;try{o=new Literal$1(o.type,o.evaluate(a))}catch(d){return this.error(d.message),null}}return o}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,s=i?this.scope.concat(i):this.scope;return new ParsingContext(this.registry,r,t||null,s,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new ParsingError$1(i,e))}checkSubtype(e,t){const i=checkSubtype(e,t);return i&&this.error(i),i}}var ParsingContext$1=ParsingContext;function isConstant(n){if(n instanceof Var$1)return isConstant(n.boundExpression);if(n instanceof CompoundExpression$1&&n.name==="error")return!1;if(n instanceof CollatorExpression)return!1;if(n instanceof Within$1)return!1;const e=n instanceof Coercion$1||n instanceof Assertion$1;let t=!0;return n.eachChild(i=>{e?t=t&&isConstant(i):t=t&&i instanceof Literal$1}),t?isFeatureConstant(n)&&isGlobalPropertyConstant(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(n,e){const t=n.length-1;let i=0,r=t,s=0,o,a;for(;i<=r;)if(s=Math.floor((i+r)/2),o=n[s],a=n[s+1],o<=e){if(s===t||e<a)return s;i=s+1}else if(o>e)r=s-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,s]of i)this.labels.push(r),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,NumberType);if(!i)return null;const r=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let o=1;o<e.length;o+=2){const a=o===1?-1/0:e[o],d=e[o+1],y=o,v=o+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const _=t.parse(d,v,s);if(!_)return null;s=s||_.type,r.push([a,_])}return new Step(s,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const s=t.length;if(r>=t[s-1])return i[s-1].evaluate(e);const o=findStopLessThanOrEqualTo(t,r);return i[o].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(n,e,t,i){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=i,this.p2x=t,this.p2y=i}UnitBezier.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};UnitBezier.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};UnitBezier.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};UnitBezier.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,i,r,s,o;for(r=n,o=0;o<8;o++){if(s=this.sampleCurveX(r)-n,Math.abs(s)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}if(t=0,i=1,r=n,r<t)return t;if(r>i)return i;for(;t<i;){if(s=this.sampleCurveX(r),Math.abs(s-n)<e)return r;n>s?t=r:i=r,r=(i-t)*.5+t}return r};UnitBezier.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(n,e,t){return n*(1-t)+e*t}function color(n,e,t){return new Color$1(number(n.r,e.r,t),number(n.g,e.g,t),number(n.b,e.b,t),number(n.a,e.a,t))}function array(n,e,t){return n.map((i,r)=>number(i,e[r],t))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(n){return n>t3?Math.pow(n,1/3):n/t2+t0}function lab2xyz(n){return n>t1?n*n*n:t2*(n-t0)}function xyz2rgb(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function rgb2xyz(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function rgbToLab(n){const e=rgb2xyz(n.r),t=rgb2xyz(n.g),i=rgb2xyz(n.b),r=xyz2lab((.4124564*e+.3575761*t+.1804375*i)/Xn),s=xyz2lab((.2126729*e+.7151522*t+.072175*i)/Yn),o=xyz2lab((.0193339*e+.119192*t+.9503041*i)/Zn);return{l:116*s-16,a:500*(r-s),b:200*(s-o),alpha:n.a}}function labToRgb(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,i=isNaN(n.b)?e:e-n.b/200;return e=Yn*lab2xyz(e),t=Xn*lab2xyz(t),i=Zn*lab2xyz(i),new Color$1(xyz2rgb(3.2404542*t-1.5371385*e-.4985314*i),xyz2rgb(-.969266*t+1.8760108*e+.041556*i),xyz2rgb(.0556434*t-.2040259*e+1.0572252*i),n.alpha)}function interpolateLab(n,e,t){return{l:number(n.l,e.l,t),a:number(n.a,e.a,t),b:number(n.b,e.b,t),alpha:number(n.alpha,e.alpha,t)}}function rgbToHcl(n){const{l:e,a:t,b:i}=rgbToLab(n),r=Math.atan2(i,t)*rad2deg;return{h:r<0?r+360:r,c:Math.sqrt(t*t+i*i),l:e,alpha:n.a}}function hclToRgb(n){const e=n.h*deg2rad$1,t=n.c,i=n.l;return labToRgb({l:i,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function interpolateHue(n,e,t){const i=e-n;return n+t*(i>180||i<-180?i-360*Math.round(i/360):i)}function interpolateHcl(n,e,t){return{h:interpolateHue(n.h,e.h,t),c:number(n.c,e.c,t),l:number(n.l,e.l,t),alpha:number(n.alpha,e.alpha,t)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,t,i,r,s){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let s=0;if(e.name==="exponential")s=exponentialInterpolation(t,e.base,i,r);else if(e.name==="linear")s=exponentialInterpolation(t,1,i,r);else if(e.name==="cubic-bezier"){const o=e.controlPoints;s=new UnitBezier$1(o[0],o[1],o[2],o[3]).solve(exponentialInterpolation(t,1,i,r))}return s}static parse(e,t){let[i,r,s,...o]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const y=r[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:y}}else if(r[0]==="cubic-bezier"){const y=r.slice(1);if(y.length!==4||y.some(v=>typeof v!="number"||v<0||v>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:y}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,NumberType),!s)return null;const a=[];let d=null;i==="interpolate-hcl"||i==="interpolate-lab"?d=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let y=0;y<o.length;y+=2){const v=o[y],_=o[y+1],C=y+3,E=y+4;if(typeof v!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(a.length&&a[a.length-1][0]>=v)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',C);const S=t.parse(_,E,d);if(!S)return null;d=d||S.type,a.push([v,S])}return d.kind!=="number"&&d.kind!=="color"&&!(d.kind==="array"&&d.itemType.kind==="number"&&typeof d.N=="number")?t.error(`Type ${toString$1(d)} is not interpolatable.`):new Interpolate(d,i,r,s,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const s=t.length;if(r>=t[s-1])return i[s-1].evaluate(e);const o=findStopLessThanOrEqualTo(t,r),a=t[o],d=t[o+1],y=Interpolate.interpolationFactor(this.interpolation,r,a,d),v=i[o].evaluate(e),_=i[o+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](v,_,y):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(v),hcl.forward(_),y)):lab.reverse(lab.interpolate(lab.forward(v),lab.forward(_),y))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t}}function exponentialInterpolation(n,e,t,i){const r=i-t,s=n-t;return r===0?0:e===1?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const s=[];for(const a of e.slice(1)){const d=t.parse(a,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!d)return null;i=i||d.type,s.push(d)}return r&&s.some(a=>checkSubtype(r,a.type))?new Coalesce(ValueType,s):new Coalesce(i,s)}evaluate(e){let t=null,i=0,r;for(const s of this.args){if(i++,t=s.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(r||(r=t),t=null,i===this.args.length))return r;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let s=1;s<e.length-1;s+=2){const o=e[s];if(typeof o!="string")return t.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=t.parse(e[s+1],s+1);if(!a)return null;i.push([o,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new Let(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,i]of this.bindings)e.push(t,i.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;class At{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,NumberType),r=t.parse(e[2],2,array$1(t.expectedType||ValueType));if(!i||!r)return null;const s=r.type;return new At(s.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new RuntimeError$1(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new RuntimeError$1(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError$1(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var At$1=At;class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ValueType),r=t.parse(e[2],2,ValueType);return!i||!r?null:isValidType(i.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(i==null)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(i,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,t,i){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ValueType),r=t.parse(e[2],2,ValueType);if(!i||!r)return null;if(!isValidType(i.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(i.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,NumberType);return s?new IndexOf(i,r,s):null}else return new IndexOf(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(i,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return i.indexOf(t,r)}return i.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,t,i,r,s,o){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=s,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const s={},o=[];for(let y=2;y<e.length-1;y+=2){let v=e[y];const _=e[y+1];Array.isArray(v)||(v=[v]);const C=t.concat(y);if(v.length===0)return C.error("Expected at least one branch label.");for(const S of v){if(typeof S!="number"&&typeof S!="string")return C.error("Branch labels must be numbers or strings.");if(typeof S=="number"&&Math.abs(S)>Number.MAX_SAFE_INTEGER)return C.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof S=="number"&&Math.floor(S)!==S)return C.error("Numeric branch labels must be integer values.");if(!i)i=typeOf(S);else if(C.checkSubtype(i,typeOf(S)))return null;if(typeof s[String(S)]<"u")return C.error("Branch labels must be unique.");s[String(S)]=o.length}const E=t.parse(_,y,r);if(!E)return null;r=r||E.type,o.push(E)}const a=t.parse(e[1],1,ValueType);if(!a)return null;const d=t.parse(e[e.length-1],e.length-1,r);return!d||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new Match(i,r,a,s,o,d)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),i=[],r={};for(const o of t){const a=r[this.cases[o]];a===void 0?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[a][1].push(o)}const s=o=>this.inputType.kind==="number"?Number(o):o;for(const[o,a]of i)a.length===1?e.push(s(a[0])):e.push(a.map(s)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const a=t.parse(e[o],o,BooleanType);if(!a)return null;const d=t.parse(e[o+1],o+1,i);if(!d)return null;r.push([a,d]),i=i||d.type}const s=t.parse(e[e.length-1],e.length-1,i);return s?new Case(i,r,s):null}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ValueType),r=t.parse(e[2],2,NumberType);if(!i||!r)return null;if(!isValidType(i.type,[array$1(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${toString$1(i.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,NumberType);return s?new Slice(i.type,i,r,s):null}else return new Slice(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!isValidNativeType(t,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(i,r)}return t.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(n,e,t){return e===t}function neq(n,e,t){return e!==t}function lt(n,e,t){return e<t}function gt(n,e,t){return e>t}function lteq(n,e,t){return e<=t}function gteq(n,e,t){return e>=t}function eqCollate(n,e,t,i){return i.compare(e,t)===0}function neqCollate(n,e,t,i){return!eqCollate(n,e,t,i)}function ltCollate(n,e,t,i){return i.compare(e,t)<0}function gtCollate(n,e,t,i){return i.compare(e,t)>0}function lteqCollate(n,e,t,i){return i.compare(e,t)<=0}function gteqCollate(n,e,t,i){return i.compare(e,t)>=0}function makeComparison(n,e,t){const i=n!=="=="&&n!=="!=";return class Bn{constructor(s,o,a){this.type=BooleanType,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let d=o.parse(s[1],1,ValueType);if(!d)return null;if(!isComparableType(a,d.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${toString$1(d.type)}'.`);let y=o.parse(s[2],2,ValueType);if(!y)return null;if(!isComparableType(a,y.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${toString$1(y.type)}'.`);if(d.type.kind!==y.type.kind&&d.type.kind!=="value"&&y.type.kind!=="value")return o.error(`Cannot compare types '${toString$1(d.type)}' and '${toString$1(y.type)}'.`);i&&(d.type.kind==="value"&&y.type.kind!=="value"?d=new Assertion$1(y.type,[d]):d.type.kind!=="value"&&y.type.kind==="value"&&(y=new Assertion$1(d.type,[y])));let v=null;if(s.length===4){if(d.type.kind!=="string"&&y.type.kind!=="string"&&d.type.kind!=="value"&&y.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(v=o.parse(s[3],3,CollatorType),!v)return null}return new Bn(d,y,v)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(i&&this.hasUntypedArgument){const d=typeOf(o),y=typeOf(a);if(d.kind!==y.kind||!(d.kind==="string"||d.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${y.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const d=typeOf(o),y=typeOf(a);if(d.kind!=="string"||y.kind!=="string")return e(s,o,a)}return this.collator?t(s,o,a,this.collator.evaluate(s)):e(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(o=>{s.push(o.serialize())}),s}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt,ltCollate),GreaterThan=makeComparison(">",gt,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,t,i,r,s,o){this.type=StringType,this.number=e,this.locale=t,this.currency=i,this.unit=r,this.minFractionDigits=s,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,NumberType);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let s=null;if(r.locale&&(s=t.parse(r.locale,1,StringType),!s))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,StringType),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,StringType),!a))return null;let d=null;if(r["min-fraction-digits"]&&(d=t.parse(r["min-fraction-digits"],1,NumberType),!d))return null;let y=null;return r["max-fraction-digits"]&&(y=t.parse(r["max-fraction-digits"],1,NumberType),!y)?null:new NumberFormat(i,s,o,a,d,y)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${toString$1(i.type)} instead.`):new Length(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const s=r?r.evaluate(n):1,o=validateRGBA(e,t,i,s);if(o)throw new RuntimeError$1(o);return new Color$1(e/255*s,t/255*s,i/255*s,s)}function has(n,e){return n in e}function get$1(n,e){const t=e[n];return typeof t>"u"?null:t}function binarySearch(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function varargs(n){return{type:n}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(n,[e])=>{throw new RuntimeError$1(e.evaluate(n))}],typeof:[StringType,[ValueType],(n,[e])=>toString$1(typeOf(e.evaluate(n)))],"to-rgba":[array$1(NumberType,4),[ColorType],(n,[e])=>e.evaluate(n).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(n,[e])=>has(e.evaluate(n),n.properties())],[[StringType,ObjectType],(n,[e,t])=>has(e.evaluate(n),t.evaluate(n))]]},get:{type:ValueType,overloads:[[[StringType],(n,[e])=>get$1(e.evaluate(n),n.properties())],[[StringType,ObjectType],(n,[e,t])=>get$1(e.evaluate(n),t.evaluate(n))]]},"feature-state":[ValueType,[StringType],(n,[e])=>get$1(e.evaluate(n),n.featureState||{})],properties:[ObjectType,[],n=>n.properties()],"geometry-type":[StringType,[],n=>n.geometryType()],id:[ValueType,[],n=>n.id()],zoom:[NumberType,[],n=>n.globals.zoom],pitch:[NumberType,[],n=>n.globals.pitch||0],"distance-from-center":[NumberType,[],n=>n.distanceFromCenter()],"heatmap-density":[NumberType,[],n=>n.globals.heatmapDensity||0],"line-progress":[NumberType,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],n=>n.globals.skyRadialProgress||0],accumulated:[ValueType,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[NumberType,varargs(NumberType),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[NumberType,varargs(NumberType),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[NumberType],(n,[e])=>-e.evaluate(n)]]},"/":[NumberType,[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[NumberType,[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[NumberType,[NumberType],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))],log2:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[NumberType,[NumberType],(n,[e])=>Math.sin(e.evaluate(n))],cos:[NumberType,[NumberType],(n,[e])=>Math.cos(e.evaluate(n))],tan:[NumberType,[NumberType],(n,[e])=>Math.tan(e.evaluate(n))],asin:[NumberType,[NumberType],(n,[e])=>Math.asin(e.evaluate(n))],acos:[NumberType,[NumberType],(n,[e])=>Math.acos(e.evaluate(n))],atan:[NumberType,[NumberType],(n,[e])=>Math.atan(e.evaluate(n))],min:[NumberType,varargs(NumberType),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[NumberType,varargs(NumberType),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[NumberType,[NumberType],(n,[e])=>Math.abs(e.evaluate(n))],round:[NumberType,[NumberType],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[NumberType,[NumberType],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[BooleanType,[StringType,ValueType],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(n,[e])=>n.id()===e.value],"filter-type-==":[BooleanType,[StringType],(n,[e])=>n.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[BooleanType,[ValueType],(n,[e])=>e.value in n.properties()],"filter-has-id":[BooleanType,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(n,[e,t])=>binarySearch(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[varargs(BooleanType),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[varargs(BooleanType),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(n,[e])=>!e.evaluate(n)],"is-supported-script":[BooleanType,[StringType],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[StringType,[StringType],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[StringType,[StringType],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[StringType,varargs(ValueType),(n,e)=>e.map(t=>toString(t.evaluate(n))).join("")],"resolved-locale":[StringType,[CollatorType],(n,[e])=>e.evaluate(n).resolvedLocale()]});var definitions=expressions;function success(n){return{result:"success",value:n}}function error(n){return{result:"error",value:n}}function supportsPropertyExpression(n){return n["property-type"]==="data-driven"}function supportsZoomExpression(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(n){return!!n.expression&&n.expression.interpolated}function isFunction(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,s,o,a,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=d||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,s,o,a,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=d||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!==y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(v=>JSON.stringify(v)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console<"u"&&console.warn(y.message)),this._defaultValue}}}function isExpression(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in definitions}function createExpression(n,e){const t=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?success(new StyleExpression(i,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,s,o)}evaluate(e,t,i,r,s,o){return this._styleExpression.evaluate(e,t,i,r,s,o)}}class ZoomDependentExpression{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,s,o)}evaluate(e,t,i,r,s,o){return this._styleExpression.evaluate(e,t,i,r,s,o)}interpolationFactor(e,t,i){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,t,i):0}}function createPropertyExpression(n,e){if(n=createExpression(n,e),n.result==="error")return n;const t=n.value.expression,i=isFeatureConstant(t);if(!i&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const r=isGlobalPropertyConstant(t,["zoom","pitch","distance-from-center"]);if(!r&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const s=findZoomCurve(t);if(!s&&!r)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof ParsingError$1)return error([s]);if(s instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!s)return success(i?new ZoomConstantExpression("constant",n.value):new ZoomConstantExpression("source",n.value));const o=s instanceof Interpolate$1?s.interpolation:void 0;return success(i?new ZoomDependentExpression("camera",n.value,s.labels,o):new ZoomDependentExpression("composite",n.value,s.labels,o))}function findZoomCurve(n){let e=null;if(n instanceof Let$1)e=findZoomCurve(n.result);else if(n instanceof Coalesce$1){for(const t of n.args)if(e=findZoomCurve(t),e)break}else(n instanceof Step$1||n instanceof Interpolate$1)&&n.input instanceof CompoundExpression$1&&n.input.name==="zoom"&&(e=n);return e instanceof ParsingError$1||n.eachChild(t=>{const i=findZoomCurve(t);i instanceof ParsingError$1?e=i:!e&&i?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(n){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return n.type==="array"?array$1(e[n.value]||ValueType,n.length):e[n.type]}function getDefaultValue(n){return n.type==="color"&&(isFunction(n.default)||Array.isArray(n.default))?new Color$1(0,0,0,0):n.type==="color"?Color$1.parse(n.default)||null:n.default===void 0?null:n.default}function unbundle(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function deepUnbundle(n){if(Array.isArray(n))return n.map(deepUnbundle);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=deepUnbundle(n[t]);return e}return unbundle(n)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(n)||(n=convertFilter(n));const t=n;let i=!0;try{i=extractStaticFilter(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const r=spec[`filter_${e}`],s=createExpression(i,r);let o=null;if(s.result==="error")throw new Error(s.value.map(v=>`${v.key}: ${v.message}`).join(", "));o=(v,_,C)=>s.value.evaluate(v,_,{},C);let a=null,d=null;if(i!==t){const v=createExpression(t,r);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));a=(_,C,E,S,b)=>v.value.evaluate(_,C,{},E,void 0,void 0,S,b),d=!isFeatureConstant(v.value.expression)}o=o;const y=geometryNeeded(i);return{filter:o,dynamicFilter:a||void 0,needGeometry:y,needFeature:!!d}}function extractStaticFilter(n){if(!isDynamicFilter(n))return n;let e=deepUnbundle(n);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(n){if(!Array.isArray(n))return n;const e=collapsedExpression(n);return e===!0?e:e.map(t=>collapseDynamicBooleanExpressions(t))}function unionDynamicBranches(n){let e=!1;const t=[];if(n[0]==="case"){for(let i=1;i<n.length-1;i+=2)e=e||isDynamicFilter(n[i]),t.push(n[i+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||isDynamicFilter(n[1]);for(let i=2;i<n.length-1;i+=2)t.push(n[i+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||isDynamicFilter(n[1]);for(let i=1;i<n.length-1;i+=2)t.push(n[i+1])}e&&(n.length=0,n.push("any",...t));for(let i=1;i<n.length;i++)unionDynamicBranches(n[i])}function isDynamicFilter(n){if(!Array.isArray(n))return!1;if(isRootExpressionDynamic(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(isDynamicFilter(t))return!0}return!1}function isRootExpressionDynamic(n){return n==="pitch"||n==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(n){if(dynamicConditionExpressions.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(isDynamicFilter(t))return!0}return n}function compare(n,e){return n<e?-1:n>e?1:0}function geometryNeeded(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(geometryNeeded(n[e]))return!0;return!1}function convertFilter(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?convertComparisonOp(n[1],n[2],"=="):e==="!="?convertNegation(convertComparisonOp(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(n[1],n[2],e):e==="any"?convertDisjunctionOp(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(convertFilter)):e==="none"?["all"].concat(n.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(n[1],n.slice(2)):e==="!in"?convertNegation(convertInOp(n[1],n.slice(2))):e==="has"?convertHasOp(n[1]):e==="!has"?convertNegation(convertHasOp(n[1])):e==="within"?n:!0}function convertComparisonOp(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function convertDisjunctionOp(n){return["any"].concat(n.map(convertFilter))}function convertInOp(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(compare)]]:["filter-in-small",n,["literal",e]]}}function convertHasOp(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function convertNegation(n){return["!",n]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return refProperties.forEach(i=>{i in e&&(t[i]=e[i])}),t}function derefLayers(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=deref(n[t],e[n[t].ref]));return n}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(n,e,t){var i=fontCache[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,s="normal",o=[],a,d,y=0,v=n.length;y<v;++y){var _=n[y],C=_.split(" "),E=C[C.length-1].toLowerCase();E=="normal"||E=="italic"||E=="oblique"?(s=d?s:E,d=!0,C.pop(),E=C[C.length-1].toLowerCase()):italicRE.test(E)&&(E=E.replace(italicRE,""),s=d?s:C[C.length-1].replace(E,""),d=!0);for(var S in fontWeights){var b=C.length>1?C[C.length-2].toLowerCase():"";if(E==S||E==S.replace("-","")||b+"-"+E==S){r=a?r:fontWeights[S],C.pop(),b&&S.startsWith(b)&&C.pop();break}}!a&&typeof E=="number"&&(r=E,a=!0);var P=C.join(sp).replace("Klokantech Noto Sans","Noto Sans");P.indexOf(sp)!==-1&&(P='"'+P+'"'),o.push(P)}i=fontCache[n]=[s,r,o]}return i[0]+sp+i[1]+sp+e+"px"+(t?"/"+t:"")+sp+i[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function normalizeSpriteUrl(n,e,t){const i=getMapboxPath(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=i.slice(r.length);return`${mapboxBaseUrl}/styles/v1/${s}/sprite?access_token=${e}`}function normalizeStyleUrl(n,e){const t=getMapboxPath(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${mapboxBaseUrl}/styles/v1/${r}?&access_token=${e}`}function normalizeSourceUrl(n,e,t,i){const r=new URL(n,i),s=getMapboxPath(n);if(!s)return e&&(r.searchParams.has(t)||r.searchParams.set(t,e)),decodeURI(r.href);if(s==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${o}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(n){return n.id||(n.id=styleId++),n.id}function getStyleFunctionKey(n,e){return getStyleId(n)+"."+getUid(e)}function getFunctionCache(n){let e=functionCacheByStyleId[n.id];return e||(e={},functionCacheByStyleId[getStyleId(n)]=e),e}function getFilterCache(n){let e=filterCacheByStyleId[n.id];return e||(e={},filterCacheByStyleId[getStyleId(n)]=e),e}function deg2rad(n){return n*Math.PI/180}const defaultResolutions=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function createCanvas(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function getZoomForResolution(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return i-1}function getResolutionForZoom(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const pendingRequests={};function fetchResource(n,e,t={},i){if(e in pendingRequests)return i&&(i.request=pendingRequests[e][0]),pendingRequests[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,s=toPromise(()=>r).then(o=>(o instanceof Request||(o=new Request(o)),o.headers.get("Accept")||o.headers.set("Accept","application/json"),i&&(i.request=o),fetch(o).then(function(a){return delete pendingRequests[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(a){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[r,s],s}function getGlStyle(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=normalizeStyleUrl(n,e.accessToken),fetchResource("Style",n,e);else return Promise.resolve(n)}const tilejsonCache={};function getTileJson(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=tilejsonCache[i];if(!r||t.transformRequest){let s;t.transformRequest&&(s=(a,d)=>{const y=t.transformRequest&&t.transformRequest(d,"Tiles")||d;if(a instanceof VectorTile$1)a.setLoader((v,_,C)=>{toPromise(()=>y).then(E=>{fetch(E).then(S=>S.arrayBuffer()).then(S=>{const P=a.getFormat().readFeatures(S,{extent:v,featureProjection:C});a.setFeatures(P)}).catch(S=>a.setState(TileState.ERROR))})});else{const v=a.getImage();toPromise(()=>y).then(_=>{_ instanceof Request?fetch(_).then(C=>C.blob()).then(C=>{const E=URL.createObjectURL(C);v.addEventListener("load",()=>URL.revokeObjectURL(E)),v.addEventListener("error",()=>URL.revokeObjectURL(E)),v.src=E}).catch(C=>a.setState(TileState.ERROR)):v.src=_})}});const o=n.url;if(o&&!n.tiles){const a=normalizeSourceUrl(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:expandUrl(a)}),tileLoadFunction:s});else{const d={};r=fetchResource("Source",a,t,d).then(function(y){return y.tiles=y.tiles.map(function(v){return y.scheme==="tms"&&(v=v.replace("{y}","{-y}")),normalizeSourceUrl(v,t.accessToken,t.accessTokenParam||"access_token",d.request.url)}),Promise.resolve({tileJson:y,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),normalizeSourceUrl(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});tilejsonCache[i]=r}return r}function drawIconHalo(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=createCanvas(r[0],r[1]),o=s.getContext("2d");o.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,r[0],r[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const d=a.data;for(let y=0,v=a.width;y<v;++y)for(let _=0,C=a.height;_<C;++_){const E=(_*v+y)*4;d[E+3]>0&&o.arc(y,_,t*e.pixelRatio,0,2*Math.PI)}return o.fill(),s}function smoothstep(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function drawSDF(n,e,t){const i=createCanvas(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0,d=s.width;a<d;++a)for(let y=0,v=s.height;y<v;++y){const _=(y*d+a)*4,C=o[_+3]/255,E=.75,S=.1,b=smoothstep(E-S,E+S,C);b>0?(o[_+0]=Math.round(255*t.r*b),o[_+1]=Math.round(255*t.g*b),o[_+2]=Math.round(255*t.b*b),o[_+3]=Math.round(255*b)):o[_+3]=0}return r.putImageData(s,0,0),i}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=hairSpacePool.slice(0,Math.round(e/.1));for(let s=0,o=i.length;s<o;++s)s>0&&(t+=`
`),t+=i[s].split("").join(r);return t}return n}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(n,e){return getMeasureContext().measureText(n).width+(n.length-1)*e}const measureCache={};function wrapText(n,e,t,i){if(n.indexOf(`
`)!==-1){const o=n.split(`
`),a=[];for(let d=0,y=o.length;d<y;++d)a.push(wrapText(o[d],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let s=measureCache[r];if(!s){const o=n.split(" ");if(o.length>1){const a=getMeasureContext();a.font=e;const y=a.measureText("M").width*t;let v="";const _=[];for(let C=0,E=o.length;C<E;++C){const S=o[C],b=v+(v?" ":"")+S;measureText(b,i)<=y?v=b:(v&&_.push(v),v=S)}v&&_.push(v);for(let C=0,E=_.length;C<E&&E>1;++C){const S=_[C];if(measureText(S,i)<y*.35){const b=C>0?measureText(_[C-1],i):1/0,P=C<E-1?measureText(_[C+1],i):1/0;_.splice(C,1),E-=1,b<P?(_[C-1]+=" "+S,C-=1):_[C]=S+" "+_[C]}}for(let C=0,E=_.length-1;C<E;++C){const S=_[C],b=_[C+1];if(measureText(S,i)>y*.7&&measureText(b,i)<y*.6){const P=S.split(" "),x=P.pop();measureText(x,i)<y*.2&&(_[C]=P.join(" "),_[C+1]=x+" "+b),E-=1}}s=_.join(`
`)}else s=n;s=applyLetterSpacing(s,i),measureCache[r]=s}return s}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(n){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,i=e.length;t<i;++t){const r=e[t];try{const s=r.rules||r.cssRules;if(s)for(let o=0,a=s.length;o<a;++o){const d=s[o];if(d.type==5){const y=d.cssText.match(fontFamilyRegEx);loadedFontFamilies[y[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return n in loadedFontFamilies}const processedFontFamilies={};function getFonts(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const i=[];for(let r=0,s=n.length;r<s;++r){n[r]=n[r].replace("Arial Unicode MS","Arial");const o=n[r],a=mb2css(o,1);registerFont(a);const d=a.split(" ");i.push([d.slice(3).join(" ").replace(/"/g,""),d[1],d[0]])}for(let r=0,s=i.length;r<s;++r){const o=i[r],a=o[0];if(!hasFontFamily(a)&&checkedFonts.get(`${o[2]}
${o[1]} 
${a}`)!==100){const d=e.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+d+'"]')){const y=document.createElement("link");y.href=d,y.rel="stylesheet",document.head.appendChild(y)}}}return processedFontFamilies[t]=n,n}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(n,e){const t=createPropertyExpression(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(n,e,t,i,r,s,o){const a=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});const d=s[a];if(!d[t]){let y=(n[e]||emptyObj$1)[t];const v=spec[`${e}_${n.type}`][t];y===void 0&&(y=v.default);let _=isExpression(y);if(!_&&isFunction(y)&&(y=convertFunction(y,v),_=!0),_){const C=expressionData(y,v);d[t]=C.evaluate.bind(C)}else v.type=="color"&&(y=Color$1.parse(y)),d[t]=function(){return y}}return zoomObj.zoom=i,d[t](zoomObj,r,o)}function getDeclutterMode(n,e,t,i,r){return getValue(n,"layout",`${i}-allow-overlap`,e,t,r)?getValue(n,"layout",`${i}-ignore-placement`,e,t,r)?"none":"obstacle":"declutter"}function evaluateFilter(n,e,t,i,r){return r||console.warn("No filterCache provided to evaluateFilter()"),n in r||(r[n]=createFilter(e).filter),zoomObj.zoom=i,r[n](zoomObj,t)}function colorWithOpacity(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(n,e){return n.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(n,e,t,i=defaultResolutions,r=void 0,s=void 0,o=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,n)]=Array.from(arguments);let d,y,v;if(s){if(typeof Image<"u"){const D=new Image;let G;toPromise(()=>s).then(U=>{U instanceof Request?fetch(U).then(F=>F.blob()).then(F=>{G=URL.createObjectURL(F),D.src=G}).catch(()=>{}):(D.crossOrigin="anonymous",D.src=U,G&&URL.revokeObjectURL(G))}),D.onload=function(){d=D,y=[D.width,D.height],n.changed(),D.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const D=self;D.postMessage({action:"loadImage",src:s}),D.addEventListener("message",function(U){U.data.action==="imageLoaded"&&U.data.src===s&&(d=U.data.image,y=[d.width,d.height])})}}const _=derefLayers(e.layers),C={},E=[],S={},b={},P=getFunctionCache(e),x=getFilterCache(e);let T;for(let D=0,G=_.length;D<G;++D){const U=_[D],F=U.id;if(typeof t=="string"&&U.source==t||Array.isArray(t)&&t.indexOf(F)!==-1){const B=U["source-layer"];if(T){if(U.source!==T)throw new Error(`Layer "${F}" does not use source "${T}`)}else{T=U.source;const Y=e.sources[T];if(!Y)throw new Error(`Source "${T}" is not defined`);const X=Y.type;if(X!=="vector"&&X!=="geojson")throw new Error(`Source "${T}" is not of type "vector" or "geojson", but "${X}"`)}let z=C[B];z||(z=[],C[B]=z),z.push({layer:U,index:D}),E.push(F)}}const R=new Stroke,L=new Fill,k=[],N=function(D,G,U){const F=D.getProperties(),B=C[F.layer];if(!B)return;let z=i.indexOf(G);z==-1&&(z=getZoomForResolution(G,i));const Y=types[D.getGeometry().getType()],X={id:D.getId(),properties:F,type:Y},q=n.get("mapbox-featurestate")[D.getId()];let K=-1;for(let ee=0,te=B.length;ee<te;++ee){const Oe=B[ee],ie=Oe.layer,it=ie.id;if(U!==void 0&&U!==it)continue;const oe=ie.layout||emptyObj$1,ft=ie.paint||emptyObj$1;if(oe.visibility==="none"||"minzoom"in ie&&z<ie.minzoom||"maxzoom"in ie&&z>=ie.maxzoom)continue;const ct=ie.filter;if(!ct||evaluateFilter(it,ct,X,z,x)){let Qe,dt,re,Ve,je,se;const pt=Oe.index;if(Y==3&&(ie.type=="fill"||ie.type=="fill-extrusion"))if(dt=getValue(ie,"paint",ie.type+"-opacity",z,X,P,q),ie.type+"-pattern"in ft){const Q=getValue(ie,"paint",ie.type+"-pattern",z,X,P,q);if(Q){const ne=typeof Q=="string"?fromTemplate(Q,F):Q.toString();if(d&&r&&r[ne]){++K,se=k[K],(!se||!se.getFill()||se.getStroke()||se.getText())&&(se=new Style$1({fill:new Fill}),k[K]=se),re=se.getFill(),se.setZIndex(pt);const le=ne+"."+dt;let ke=b[le];if(!ke){const be=r[ne],Ze=createCanvas(be.width,be.height),mt=Ze.getContext("2d");mt.globalAlpha=dt,mt.drawImage(d,be.x,be.y,be.width,be.height,0,0,be.width,be.height),ke=mt.createPattern(Ze,"repeat"),b[le]=ke}re.setColor(ke)}}}else Qe=colorWithOpacity(getValue(ie,"paint",ie.type+"-color",z,X,P,q),dt),ie.type+"-outline-color"in ft&&(je=colorWithOpacity(getValue(ie,"paint",ie.type+"-outline-color",z,X,P,q),dt)),je||(je=Qe),(Qe||je)&&(++K,se=k[K],(!se||Qe&&!se.getFill()||!Qe&&se.getFill()||je&&!se.getStroke()||!je&&se.getStroke()||se.getText())&&(se=new Style$1({fill:Qe?new Fill:void 0,stroke:je?new Stroke:void 0}),k[K]=se),Qe&&(re=se.getFill(),re.setColor(Qe)),je&&(Ve=se.getStroke(),Ve.setColor(je),Ve.setWidth(.5)),se.setZIndex(pt));if(Y!=1&&ie.type=="line"){"line-pattern"in ft?Qe=void 0:Qe=colorWithOpacity(getValue(ie,"paint","line-color",z,X,P,q),getValue(ie,"paint","line-opacity",z,X,P,q));const Q=getValue(ie,"paint","line-width",z,X,P,q);Qe&&Q>0&&(++K,se=k[K],(!se||!se.getStroke()||se.getFill()||se.getText())&&(se=new Style$1({stroke:new Stroke}),k[K]=se),Ve=se.getStroke(),Ve.setLineCap(getValue(ie,"layout","line-cap",z,X,P,q)),Ve.setLineJoin(getValue(ie,"layout","line-join",z,X,P,q)),Ve.setMiterLimit(getValue(ie,"layout","line-miter-limit",z,X,P,q)),Ve.setColor(Qe),Ve.setWidth(Q),Ve.setLineDash(ft["line-dasharray"]?getValue(ie,"paint","line-dasharray",z,X,P,q).map(function(ne){return ne*Q}):null),se.setZIndex(pt))}let xt=!1,H=null,W=0,$,de,ue;if((Y==1||Y==2)&&"icon-image"in oe){const Q=getValue(ie,"layout","icon-image",z,X,P,q);if(Q){$=typeof Q=="string"?fromTemplate(Q,F):Q.toString();let ne;const le=a?a(n,$):void 0;if(d&&r&&r[$]||le){const ke=getValue(ie,"layout","icon-rotation-alignment",z,X,P,q);if(Y==2){const be=D.getGeometry();if(be.getFlatMidpoint||be.getFlatMidpoints){const Ze=be.getExtent();if(Math.sqrt(Math.max(Math.pow((Ze[2]-Ze[0])/G,2),Math.pow((Ze[3]-Ze[1])/G,2)))>150){const ut=be.getType()==="MultiLineString"?be.getFlatMidpoints():be.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),ne=renderFeature,renderFeatureCoordinates[0]=ut[0],renderFeatureCoordinates[1]=ut[1],getValue(ie,"layout","symbol-placement",z,X,P,q)==="line"&&ke==="map"){const Pt=be.getStride(),Wt=be.getFlatCoordinates();for(let Ft=0,vt=Wt.length-Pt;Ft<vt;Ft+=Pt){const Nt=Wt[Ft],Ut=Wt[Ft+1],Yt=Wt[Ft+Pt],jt=Wt[Ft+Pt+1],Zt=Math.min(Nt,Yt),Jt=Math.min(Ut,jt),fn=Math.max(Nt,Yt),dn=Math.max(Ut,jt);if(ut[0]>=Zt&&ut[0]<=fn&&ut[1]>=Jt&&ut[1]<=dn){W=Math.atan2(Ut-jt,Yt-Nt);break}}}}}}if(Y!==2||ne){const be=getValue(ie,"layout","icon-size",z,X,P,q),Ze=ft["icon-color"]!==void 0?getValue(ie,"paint","icon-color",z,X,P,q):null;if(!Ze||Ze.a!==0){const mt=getValue(ie,"paint","icon-halo-color",z,X,P,q),ut=getValue(ie,"paint","icon-halo-width",z,X,P,q);let Ot=`${$}.${be}.${ut}.${mt}`;if(Ze!==null&&(Ot+=`.${Ze}`),de=S[Ot],!de){const Pt=getDeclutterMode(ie,z,X,"icon",P);let Wt;"icon-offset"in oe&&(Wt=getValue(ie,"layout","icon-offset",z,X,P,q).slice(0),Wt[0]*=be,Wt[1]*=-be);let Ft=Ze?[Ze.r*255,Ze.g*255,Ze.b*255,Ze.a]:void 0;if(le){const vt={color:Ft,rotateWithView:ke==="map",displacement:Wt,declutterMode:Pt,scale:be};typeof le=="string"?vt.src=le:(vt.img=le,vt.imgSize=[le.width,le.height]),de=new Icon(vt)}else{const vt=r[$];let Nt,Ut,Yt;ut?vt.sdf?(Nt=drawIconHalo(drawSDF(d,vt,Ze||[0,0,0,1]),{x:0,y:0,width:vt.width,height:vt.height,pixelRatio:vt.pixelRatio},ut,mt),Ft=void 0):Nt=drawIconHalo(d,vt,ut,mt):(vt.sdf?(v||(v=drawSDF(d,{x:0,y:0,width:y[0],height:y[1]},{r:1,g:1,b:1,a:1})),Nt=v):Nt=d,Ut=[vt.width,vt.height],Yt=[vt.x,vt.y]),de=new Icon({color:Ft,img:Nt,imgSize:y,size:Ut,offset:Yt,rotateWithView:ke==="map",scale:be/vt.pixelRatio,displacement:Wt,declutterMode:Pt})}S[Ot]=de}}de&&(++K,se=k[K],(!se||!se.getImage()||se.getFill()||se.getStroke())&&(se=new Style$1,k[K]=se),se.setGeometry(ne),de.setRotation(W+deg2rad(getValue(ie,"layout","icon-rotate",z,X,P,q))),de.setOpacity(getValue(ie,"paint","icon-opacity",z,X,P,q)),de.setAnchor(anchor[getValue(ie,"layout","icon-anchor",z,X,P,q)]),se.setImage(de),H=se.getText(),se.setText(void 0),se.setZIndex(pt),xt=!0,ue=!1)}else ue=!0}}}if(Y==1&&ie.type==="circle"){++K,se=k[K],(!se||!se.getImage()||se.getFill()||se.getStroke())&&(se=new Style$1,k[K]=se);const Q="circle-radius"in ft?getValue(ie,"paint","circle-radius",z,X,P,q):5,ne=colorWithOpacity(getValue(ie,"paint","circle-stroke-color",z,X,P,q),getValue(ie,"paint","circle-stroke-opacity",z,X,P,q)),le=getValue(ie,"paint","circle-translate",z,X,P,q),ke=colorWithOpacity(getValue(ie,"paint","circle-color",z,X,P,q),getValue(ie,"paint","circle-opacity",z,X,P,q)),be=getValue(ie,"paint","circle-stroke-width",z,X,P,q),Ze=Q+"."+ne+"."+ke+"."+be+"."+le[0]+"."+le[1];de=S[Ze],de||(de=new CircleStyle({radius:Q,displacement:[le[0],-le[1]],stroke:ne&&be>0?new Stroke({width:be,color:ne}):void 0,fill:ke?new Fill({color:ke}):void 0,declutterMode:"none"}),S[Ze]=de),se.setImage(de),H=se.getText(),se.setText(void 0),se.setGeometry(void 0),se.setZIndex(pt),xt=!0}let fe,Ge,Be,ye,pe,J;if("text-field"in oe){ye=Math.round(getValue(ie,"layout","text-size",z,X,P,q));const Q=getValue(ie,"layout","text-font",z,X,P,q);Be=getValue(ie,"layout","text-line-height",z,X,P,q),Ge=mb2css(o?o(Q,e.metadata?e.metadata["ol:webfonts"]:void 0):Q,ye,Be),Ge.includes("sans-serif")||(Ge+=",sans-serif"),pe=getValue(ie,"layout","text-letter-spacing",z,X,P,q),J=getValue(ie,"layout","text-max-width",z,X,P,q);const ne=getValue(ie,"layout","text-field",z,X,P,q);typeof ne=="object"&&ne.sections?ne.sections.length===1?fe=ne.toString():fe=ne.sections.reduce((le,ke,be)=>{const Ze=ke.fontStack?ke.fontStack.split(","):Q,mt=mb2css(o?o(Ze):Ze,ye*(ke.scale||1),Be);let ut=ke.text;if(ut===`
`)return le.push(`
`,""),le;if(Y==2){le.push(applyLetterSpacing(ut,pe),mt);return}ut=wrapText(ut,mt,J,pe).split(`
`);for(let Ot=0,Pt=ut.length;Ot<Pt;++Ot)Ot>0&&le.push(`
`,""),le.push(ut[Ot],mt);return le},[]):fe=fromTemplate(ne,F).trim(),dt=getValue(ie,"paint","text-opacity",z,X,P,q)}if(fe&&dt&&!ue){xt||(++K,se=k[K],(!se||!se.getText()||se.getFill()||se.getStroke())&&(se=new Style$1,k[K]=se),se.setImage(void 0),se.setGeometry(void 0));const Q=getDeclutterMode(ie,z,X,"text",P);se.getText()||se.setText(H),H=se.getText(),(!H||"getDeclutterMode"in H&&H.getDeclutterMode()!==Q)&&(H=new Text({padding:[2,2,2,2],declutterMode:Q}),se.setText(H));const ne=getValue(ie,"layout","text-transform",z,X,P,q);ne=="uppercase"?fe=Array.isArray(fe)?fe.map((jt,Zt)=>Zt%2?jt:jt.toUpperCase()):fe.toUpperCase():ne=="lowercase"&&(fe=Array.isArray(fe)?fe.map((jt,Zt)=>Zt%2?jt:jt.toLowerCase()):fe.toLowerCase());const le=Array.isArray(fe)?fe:Y==2?applyLetterSpacing(fe,pe):wrapText(fe,Ge,J,pe);H.setText(le),H.setFont(Ge),H.setRotation(deg2rad(getValue(ie,"layout","text-rotate",z,X,P,q)));const ke=getValue(ie,"layout","text-anchor",z,X,P,q),be=xt||Y==1?"point":getValue(ie,"layout","symbol-placement",z,X,P,q);let Ze;if(be==="line-center"?(H.setPlacement("line"),Ze="center"):H.setPlacement(be),be==="line"&&typeof H.setRepeat=="function"){const jt=getValue(ie,"layout","symbol-spacing",z,X,P,q);H.setRepeat(jt*2)}H.setOverflow(be==="point");let mt=getValue(ie,"paint","text-halo-width",z,X,P,q);const ut=getValue(ie,"layout","text-offset",z,X,P,q),Ot=getValue(ie,"paint","text-translate",z,X,P,q);let Pt=0,Wt=0;if(be=="point"){Ze="center",ke.indexOf("left")!==-1?(Ze="left",Wt=mt):ke.indexOf("right")!==-1&&(Ze="right",Wt=-mt);const jt=getValue(ie,"layout","text-rotation-alignment",z,X,P,q);H.setRotateWithView(jt=="map")}else H.setMaxAngle(deg2rad(getValue(ie,"layout","text-max-angle",z,X,P,q))*fe.length/le.length),H.setRotateWithView(!1);H.setTextAlign(Ze);let Ft="middle";ke.indexOf("bottom")==0?(Ft="bottom",Pt=-mt-.5*(Be-1)*ye):ke.indexOf("top")==0&&(Ft="top",Pt=mt+.5*(Be-1)*ye),H.setTextBaseline(Ft);const vt=getValue(ie,"layout","text-justify",z,X,P,q);H.setJustify(vt==="auto"?void 0:vt),H.setOffsetX(ut[0]*ye+Wt+Ot[0]),H.setOffsetY(ut[1]*ye+Pt+Ot[1]),L.setColor(colorWithOpacity(getValue(ie,"paint","text-color",z,X,P,q),dt)),H.setFill(L);const Nt=colorWithOpacity(getValue(ie,"paint","text-halo-color",z,X,P,q),dt);if(Nt&&mt>0){R.setColor(Nt),mt*=2;const jt=.5*ye;R.setWidth(mt<=jt?mt:jt),H.setStroke(R)}else H.setStroke(void 0);const Ut=getValue(ie,"layout","text-padding",z,X,P,q),Yt=H.getPadding();Ut!==Yt[0]&&(Yt[0]=Ut,Yt[1]=Ut,Yt[2]=Ut,Yt[3]=Ut),se.setZIndex(pt)}}}if(K>-1)return k.length=K+1,k};return n.setStyle(N),n.set("mapbox-source",T),n.set("mapbox-layers",E),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),N}function getTileResolutions(n,e=512){return n.getExtent()?createXYZ({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function applyStyle(n,e,t="",i={},r=void 0){let s,o,a,d,y=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,d=a.source||a.layers,i=a):d=t,typeof i=="string"?(s=i,a={}):(s=i.styleUrl,a=i),a.updateSource===!1&&(y=!1),r||(r=a.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:normalizeStyleUrl(s,a.accessToken),a=completeOptions(s,a)),new Promise(function(v,_){getGlStyle(e,a).then(function(C){if(C.version!=8)return _(new Error("glStyle version 8 required."));if(!(n instanceof VectorLayer||n instanceof VectorTileLayer))return _(new Error("Can only apply to VectorLayer or VectorTileLayer"));const E=n instanceof VectorTileLayer?"vector":"geojson";if(d?Array.isArray(d)?o=C.layers.find(function(L){return L.id===d[0]}).source:o=d:(o=Object.keys(C.sources).find(function(L){return C.sources[L].type===E}),d=o),!o)return _(new Error(`No ${E} source found in the glStyle.`));function S(){if(!y)return Promise.resolve();if(n instanceof VectorTileLayer)return setupVectorSource(C.sources[o],s,a).then(function(D){const G=n.getSource();G?D!==G&&(G.setTileUrlFunction(D.getTileUrlFunction()),typeof G.setUrls=="function"&&typeof D.getUrls=="function"&&G.setUrls(D.getUrls()),G.format_||(G.format_=D.format_),G.getAttributions()||G.setAttributions(D.getAttributions()),G.getTileLoadFunction()===defaultLoadFunction&&G.setTileLoadFunction(D.getTileLoadFunction()),equivalent(G.getProjection(),D.getProjection())&&(G.tileGrid=D.getTileGrid())):n.setSource(D);const U=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&U.getMinZoom()>0&&n.setMaxResolution(getResolutionForZoom(Math.max(0,U.getMinZoom()-1e-12),U.getResolutions()))});const L=C.sources[o];let k=n.getSource();(!k||k.get("mapbox-source")!==L)&&(k=setupGeoJSONSource(L,s,a));const N=n.getSource();return N?k!==N&&(N.getAttributions()||N.setAttributions(k.getAttributions()),N.format_||(N.format_=k.getFormat()),N.url_=k.getUrl()):n.setSource(k),Promise.resolve()}let b,P,x,T;function R(){if(!T&&(!C.sprite||P)){if(a.projection&&!r){const k=get$3(a.projection).getUnits();k!=="m"&&(r=defaultResolutions.map(N=>N/METERS_PER_UNIT$1[k]))}T=stylefunction(n,C,d,r,P,x,(L,k=a.webfonts)=>getFonts(L,k),a.getImage),n.getStyle()?S().then(v).catch(_):_(new Error(`Nothing to show for source [${o}]`))}else T?(n.setStyle(T),S().then(v).catch(_)):_(new Error("Something went wrong trying to apply style."))}if(C.sprite){const L=new URL(normalizeSpriteUrl(C.sprite,a.accessToken,s||location.href));b=window.devicePixelRatio>=1.5?.5:1;const k=b==.5?"@2x":"";let N=L.origin+L.pathname+k+".json"+L.search;new Promise(function(D,G){fetchResource("Sprite",N,a).then(D).catch(function(U){N=L.origin+L.pathname+".json"+L.search,fetchResource("Sprite",N,a).then(D).catch(G)})}).then(function(D){if(D===void 0&&_(new Error("No sprites found.")),P=D,x=L.origin+L.pathname+k+".png"+L.search,a.transformRequest){const G=a.transformRequest(x,"SpriteImage")||x;(G instanceof Request||G instanceof Promise)&&(x=G)}R()}).catch(function(D){_(new Error(`Sprites cannot be loaded: ${N}: ${D.message}`))})}else R()}).catch(_)})}function extentFromTileJSON(n,e){const t=n.bounds;if(t){const i=fromLonLat([t[0],t[1]],e),r=fromLonLat([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(n,e,t){const i=new TileJSON({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),s=i.getTileGrid(),o=get$3(t.projection||"EPSG:3857"),a=extentFromTileJSON(r,o),d=o.getExtent(),y=r.minzoom||0,v=r.maxzoom||22,_={attributions:i.getAttributions(),projection:o,tileGrid:new TileGrid({origin:d?getTopLeft(d):s.getOrigin(0),extent:a||s.getExtent(),minZoom:y,resolutions:getTileResolutions(o,e.tileSize).slice(0,v+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?_.urls=r.tiles:_.url=r.tiles,_}function setupVectorSource(n,e,t){return new Promise(function(i,r){getTileJson(n,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=sourceOptionsFromTileJSON(n,s,t);a.tileLoadFunction=o,a.format=new MVT,i(new VectorTile(a))}).catch(r)})}function getBboxTemplate(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(n,e,t){const i=t.projection?new GeoJSON$1({dataProjection:t.projection}):new GeoJSON$1,r=n.data,s={};if(typeof r=="string"){const a=normalizeSourceUrl(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const y=(_,C,E)=>{const S=getBboxTemplate(E);return a.replace(S,`${_.join(",")}`)},v=new VectorSource({attributions:n.attribution,format:i,loader:(_,C,E,S,b)=>{const P=typeof y=="function"?y(_,C,E):y;fetchResource("GeoJSON",P,t).then(x=>{const T=v.getFormat().readFeatures(x,{featureProjection:E});v.addFeatures(T),S(T)}).catch(x=>{v.removeLoadedExtent(_),b()})},strategy:bbox});return v.set("mapbox-source",n),v}const d=new VectorSource({attributions:n.attribution,format:i,url:a,loader:(y,v,_,C,E)=>{fetchResource("GeoJSON",a,t).then(S=>{const b=d.getFormat().readFeatures(S,{featureProjection:_});d.addFeatures(b),C(b)}).catch(S=>{d.removeLoadedExtent(y),E()})}});return d}s.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const o=new VectorSource(Object.assign({attributions:n.attribution,format:i},s));return o.set("mapbox-source",n),o}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var i=e.ssl===!1?"http://":"https://",r=e.configuration;if(!r){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var s=e.layer+"$GEOPORTAIL:GPP:TMS";if(r=Config.configuration.getLayerConf(s),!r)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var o=null,a="",d=e.style,y=0;y<r.styles.length;y++){var v=r.styles[y];if(d&&v.name===d){o=v.url,a=v.title;break}else if(!d&&v.current){d=v.name,o=v.url,a=v.title;break}}if(!o)throw new Error("ERROR : Style URL not found !?");o.replace(/(http|https):\/\//,i);var _=new VectorTile({state:"loading",format:new MVT});_._originators=r.originators,_._legends=r.legends,_._metadata=r.metadata,_._description=r.description,_._title=r.title+" ("+a+")",_._quicklookUrl=r.quicklookUrl;var C={source:_};return Helper.mergeParams(C,t),e.olParams&&!r.originators&&(_._originators=e.olParams.attributions),super(C),this.name=e.layer,this.service="TMS",this.protocol=i,this.sourceId=e.source,this.styleUrl=o,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(i){e.onStyleMapBoxLoad(i)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var i=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var r=new TileJSON({url:t.url}),s=this,o=r.on("change",function(){if(r.getState()==="ready"){var d=r.getTileJSON();if(!d)return;s.set("mapbox-extensions",d);for(var y=Array.isArray(d.tiles)?d.tiles:[d.tiles],v=0;v<t.tiles.length;v++)y[v].replace(/(http|https):\/\//,this.protocol);i.setUrls(y),unByKey(o)}})}if(t.tiles){for(var a=0;a<t.tiles.length;a++)t.tiles[a].replace(/(http|https):\/\//,this.protocol);i.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{i.setState("ready"),this.set("mapbox-styles",e)}).catch(d=>{this.onStyleMapBoxError(d)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);var ControlExtended=class extends Control{constructor(e){super(e)}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var mn,Un,Pn,xn;class PositionFactory{constructor(e){On(this,mn);return this.caller=e,this.container=null,this.container=null,An(this,mn,Pn).call(this,"top-left"),An(this,mn,Pn).call(this,"top-right"),An(this,mn,Pn).call(this,"bottom-left"),An(this,mn,Pn).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(An(this,mn,xn).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&An(this,mn,xn).call(this,e,!0)}}mn=new WeakSet,Un=function(e){var t=this.container.children["position-container-"+e];return!!t},Pn=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!An(this,mn,Un).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},xn=function(e,t){var i=this;const r=y=>{var v=i.container.children["position-container-"+y];return v.children.length},s=y=>{var v=i.container.children["position-container-"+y],_=v.offsetWidth;return _},o=y=>{var v=i.container.children["position-container-"+y],_=v.offsetHeight;if(t){y.includes("top")&&(_=0);for(let C=0;C<v.children.length;C++){if(v.children[C].id===i.caller.element.id){_=y.includes("bottom")?_-i.caller.element.offsetHeight:_*-1;break}_-=v.children[C].offsetHeight}}return _},a=y=>{y.style.top="unset",y.style.bottom="unset",y.style.left="unset",y.style.right="unset"};a(this.caller.element),this.caller.element.style.position="unset";var d=Array.from(this.caller.element.getElementsByClassName("GPpanel"));d.length!==0&&d.forEach(y=>{if(y.nodeName.toLowerCase()==="dialog")switch(a(y),e.toLowerCase()){case"top-left":y.style.top=r(e)?o(e)+"px":"0px",y.style.left=s(e)+"px";break;case"bottom-left":y.style.bottom=r(e)?o(e)+"px":"0px",y.style.left=s(e)+"px";break;case"top-right":y.style.top=r(e)?o(e)+"px":"0px",y.style.right=s(e)+"px";break;case"bottom-right":y.style.bottom=r(e)?o(e)+"px":"0px",y.style.right=s(e)+"px";break}})};var SelectorID={generate:function(){var n=Math.floor(Date.now());return function(){return n++}}(),name:function(n){var e=null,t=n.lastIndexOf("-");return t===-1?e=n:e=n.substring(0,t),e},index:function(n){var e=null,t=this.name(n),i=t.lastIndexOf("_");return i!==-1&&(e=t.substring(i+1)),e},uuid:function(n){var e=null,t=n.lastIndexOf("-");return t!==-1&&(e=parseInt(n.substring(t+1),10)),e}};/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _objectSpread2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(i){_defineProperty(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _typeof(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}function _defineProperty(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _extends(){return _extends=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function _objectWithoutProperties(n,e){if(n==null)return{};var t=_objectWithoutPropertiesLoose(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var version="1.15.2";function userAgent(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(n,e,t){n.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(n,e,t){n.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function closest(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&matches(n,e):matches(n,e))||i&&n===t)return n;if(n===t)break}while(n=getParentOrHost(n))}return null}var R_SPACE=/\s+/g;function toggleClass(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(R_SPACE," ")}}function css(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function matrix(n,e){var t="";if(typeof n=="string")t=n;else do{var i=css(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function find(n,e,t){if(n){var i=n.getElementsByTagName(e),r=0,s=i.length;if(t)for(;r<s;r++)t(i[r],r);return i}return[]}function getWindowScrollingElement(){var n=document.scrollingElement;return n||document.documentElement}function getRect(n,e,t,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,d,y,v,_;if(n!==window&&n.parentNode&&n!==getWindowScrollingElement()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,d=s.bottom,y=s.right,v=s.height,_=s.width):(o=0,a=0,d=window.innerHeight,y=window.innerWidth,v=window.innerHeight,_=window.innerWidth),(e||t)&&n!==window&&(r=r||n.parentNode,!IE11OrLess))do if(r&&r.getBoundingClientRect&&(css(r,"transform")!=="none"||t&&css(r,"position")!=="static")){var C=r.getBoundingClientRect();o-=C.top+parseInt(css(r,"border-top-width")),a-=C.left+parseInt(css(r,"border-left-width")),d=o+s.height,y=a+s.width;break}while(r=r.parentNode);if(i&&n!==window){var E=matrix(r||n),S=E&&E.a,b=E&&E.d;E&&(o/=b,a/=S,_/=S,v/=b,d=o+v,y=a+_)}return{top:o,left:a,bottom:d,right:y,width:_,height:v}}}function isScrolledPast(n,e,t){for(var i=getParentAutoScrollElement(n,!0),r=getRect(n)[e];i;){var s=getRect(i)[t],o=void 0;if(o=r>=s,!o)return i;if(i===getWindowScrollingElement())break;i=getParentAutoScrollElement(i,!1)}return!1}function getChild(n,e,t,i){for(var r=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Sortable.ghost&&(i||o[s]!==Sortable.dragged)&&closest(o[s],t.draggable,n,!1)){if(r===e)return o[s];r++}s++}return null}function lastChild(n,e){for(var t=n.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Sortable.clone&&(!e||matches(n,e))&&t++;return t}function getRelativeScrollOffset(n){var e=0,t=0,i=getWindowScrollingElement();if(n)do{var r=matrix(n),s=r.a,o=r.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[e,t]}function indexOfObject(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function getParentAutoScrollElement(n,e){if(!n||!n.getBoundingClientRect)return getWindowScrollingElement();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=css(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(i||e)return t;i=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function isRectEqual(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var _throttleTimeout;function throttle(n,e){return function(){if(!_throttleTimeout){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function clone(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function getChildContainingRectFromElement(n,e,t){var i={};return Array.from(n.children).forEach(function(r){var s,o,a,d;if(!(!closest(r,e.draggable,n,!1)||r.animated||r===t)){var y=getRect(r);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,y.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,y.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,y.right),i.bottom=Math.max((d=i.bottom)!==null&&d!==void 0?d:-1/0,y.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(css(r,"display")==="none"||r===Sortable.ghost)){n.push({target:r,rect:getRect(r)});var s=_objectSpread2({},n[n.length-1].rect);if(r.thisAnimationDuration){var o=matrix(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(indexOfObject(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,o=0;n.forEach(function(a){var d=0,y=a.target,v=y.fromRect,_=getRect(y),C=y.prevFromRect,E=y.prevToRect,S=a.rect,b=matrix(y,!0);b&&(_.top-=b.f,_.left-=b.e),y.toRect=_,y.thisAnimationDuration&&isRectEqual(C,_)&&!isRectEqual(v,_)&&(S.top-_.top)/(S.left-_.left)===(v.top-_.top)/(v.left-_.left)&&(d=calculateRealTime(S,C,E,r.options)),isRectEqual(_,v)||(y.prevFromRect=v,y.prevToRect=_,d||(d=r.options.animation),r.animate(y,S,_,d)),d&&(s=!0,o=Math.max(o,d),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},d),y.thisAnimationDuration=d)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,r,s,o){if(o){css(i,"transition",""),css(i,"transform","");var a=matrix(this.el),d=a&&a.a,y=a&&a.d,v=(r.left-s.left)/(d||1),_=(r.top-s.top)/(y||1);i.animatingX=!!v,i.animatingY=!!_,css(i,"transform","translate3d("+v+"px,"+_+"px,0)"),this.forRepaintDummy=repaint(i),css(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),css(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){css(i,"transition",""),css(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function repaint(n){return n.offsetWidth}function calculateRealTime(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=e+"Global";plugins.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](_objectSpread2({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](_objectSpread2({sortable:t},i)))})},initializePlugins:function(e,t,i,r){plugins.forEach(function(a){var d=a.pluginName;if(!(!e.options[d]&&!a.initializeByDefault)){var y=new a(e,t,e.options);y.sortable=e,y.options=e.options,e[d]=y,_extends(i,y.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var i={};return plugins.forEach(function(r){typeof r.eventProperties=="function"&&_extends(i,r.eventProperties.call(t[r.pluginName],e))}),i},modifyOption:function(e,t,i){var r;return plugins.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],i))}),r}};function dispatchEvent(n){var e=n.sortable,t=n.rootEl,i=n.name,r=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,d=n.oldIndex,y=n.newIndex,v=n.oldDraggableIndex,_=n.newDraggableIndex,C=n.originalEvent,E=n.putSortable,S=n.extraEventProperties;if(e=e||t&&t[expando],!!e){var b,P=e.options,x="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?b=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(i,!0,!0)),b.to=o||t,b.from=a||t,b.item=r||t,b.clone=s,b.oldIndex=d,b.newIndex=y,b.oldDraggableIndex=v,b.newDraggableIndex=_,b.originalEvent=C,b.pullMode=E?E.lastPutMode:void 0;var T=_objectSpread2(_objectSpread2({},S),PluginManager.getEventProperties(i,e));for(var R in T)b[R]=T[R];t&&t.dispatchEvent(b),P[x]&&P[x].call(e,b)}}var _excluded=["evt"],pluginEvent=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=_objectWithoutProperties(i,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:r,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(a){_dispatchEvent({sortable:t,name:a,originalEvent:r})}},s))};function _dispatchEvent(n){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},n))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var i=css(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=getChild(e,0,t),o=getChild(e,1,t),a=s&&css(s),d=o&&css(o),y=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(s).width,v=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+getRect(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var _=a.float==="left"?"left":"right";return o&&(d.clear==="both"||d.clear===_)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||y>=r&&i[CSSFloatProperty]==="none"||o&&i[CSSFloatProperty]==="none"&&y+v>r)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,i){var r=i?e.left:e.top,s=i?e.right:e.bottom,o=i?e.width:e.height,a=i?t.left:t.top,d=i?t.right:t.bottom,y=i?t.width:t.height;return r===a||s===d||r+o/2===a+y/2},_detectNearestEmptySortable=function(e,t){var i;return sortables.some(function(r){var s=r[expando].options.emptyInsertThreshold;if(!(!s||lastChild(r))){var o=getRect(r),a=e>=o.left-s&&e<=o.right+s,d=t>=o.top-s&&t<=o.bottom+s;if(a&&d)return i=r}}),i},_prepareGroup=function(e){function t(s,o){return function(a,d,y,v){var _=a.options.group.name&&d.options.group.name&&a.options.group.name===d.options.group.name;if(s==null&&(o||_))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,d,y,v),o)(a,d,y,v);var C=(o?a:d).options.group.name;return s===!0||typeof s=="string"&&s===C||s.join&&s.indexOf(C)>-1}}var i={},r=e.group;(!r||_typeof(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(n){if(ignoreNextClick)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[expando]._onDragOver(i)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=_extends({},e),n[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);_prepareGroup(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(n,"pointerdown",this._onTapStart):(on(n,"mousedown",this._onTapStart),on(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(n,"dragover",this),on(n,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,s=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(a||e).target,y=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,v=r.filter;if(_saveInputCheckedState(i),!dragEl&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&Safari&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=closest(d,r.draggable,i,!1),!(d&&d.animated)&&lastDownEl!==d)){if(oldIndex=index(d),oldDraggableIndex=index(d,r.draggable),typeof v=="function"){if(v.call(this,e,d,this)){_dispatchEvent({sortable:t,rootEl:y,name:"filter",targetEl:d,toEl:i,fromEl:i}),pluginEvent("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(_){if(_=closest(y,_.trim(),i,!1),_)return _dispatchEvent({sortable:t,rootEl:_,name:"filter",targetEl:d,fromEl:i,toEl:i}),pluginEvent("filter",t,{evt:e}),!0}),v)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!closest(y,r.handle,i,!1)||this._prepareDragStart(e,a,d)}}},_prepareDragStart:function(e,t,i){var r=this,s=r.el,o=r.options,a=s.ownerDocument,d;if(i&&!dragEl&&i.parentNode===s){var y=getRect(i);if(rootEl=s,dragEl=i,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=i,activeGroup=o.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-y.left,tapDistanceTop=tapEvt.clientY-y.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",d=function(){if(pluginEvent("delayEnded",r,{evt:e}),Sortable.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!FireFox&&r.nativeDraggable&&(dragEl.draggable=!0),r._triggerDragStart(e,t),_dispatchEvent({sortable:r,name:"choose",originalEvent:e}),toggleClass(dragEl,o.chosenClass,!0)},o.ignore.split(",").forEach(function(v){find(dragEl,v.trim(),_disableDraggable)}),on(a,"dragover",nearestEmptyInsertDetectEvent),on(a,"mousemove",nearestEmptyInsertDetectEvent),on(a,"touchmove",nearestEmptyInsertDetectEvent),on(a,"mouseup",r._onDrop),on(a,"touchend",r._onDrop),on(a,"touchcancel",r._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(a,"mouseup",r._disableDelayedDrag),on(a,"touchend",r._disableDelayedDrag),on(a,"touchcancel",r._disableDelayedDrag),on(a,"mousemove",r._delayedDragTouchMoveHandler),on(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&on(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,o.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var i=this.options;!e&&toggleClass(dragEl,i.dragClass,!1),toggleClass(dragEl,i.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var i=void 0;if(i=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&o&&o.a,d=ghostEl&&o&&o.d,y=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),v=(s.clientX-tapEvt.clientX+r.x)/(a||1)+(y?y[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),_=(s.clientY-tapEvt.clientY+r.y)/(d||1)+(y?y[1]-ghostRelativeParentInitialScroll[1]:0)/(d||1);if(!Sortable.active&&!awaitingDragStarted){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ghostEl){o?(o.e+=v-(lastDx||0),o.f+=_-(lastDy||0)):o={a:1,b:0,c:0,d:1,e:v,f:_};var C="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");css(ghostEl,"webkitTransform",C),css(ghostEl,"mozTransform",C),css(ghostEl,"msTransform",C),css(ghostEl,"transform",C),lastDx=v,lastDy=_,touchEvt=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),i=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,i.ghostClass,!1),toggleClass(ghostEl,i.fallbackClass,!0),toggleClass(ghostEl,i.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,s=i.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),i.cloneId=_nextTick(function(){pluginEvent("clone",i),!Sortable.eventCanceled&&(i.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),i._hideClone(),_dispatchEvent({sortable:i,name:"clone"}))}),!t&&toggleClass(dragEl,s.dragClass,!0),t?(ignoreNextClick=!0,i._loopId=setInterval(i._emulateDragOver,50)):(off(document,"mouseup",i._onDrop),off(document,"touchend",i._onDrop),off(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,dragEl)),on(document,"drop",i),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,i._dragStartId=_nextTick(i._dragStarted.bind(i,t,e)),on(document,"selectstart",i),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,r,s,o,a=this.options,d=a.group,y=Sortable.active,v=activeGroup===d,_=a.sort,C=putSortable||y,E,S=this,b=!1;if(_silent)return;function P(te,Oe){pluginEvent(te,S,_objectSpread2({evt:e,isOwner:v,axis:E?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:_,fromSortable:C,target:i,completed:T,onMove:function(it,oe){return _onMove(rootEl,t,dragEl,r,it,getRect(it),e,oe)},changed:R},Oe))}function x(){P("dragOverAnimationCapture"),S.captureAnimationState(),S!==C&&C.captureAnimationState()}function T(te){return P("dragOverCompleted",{insertion:te}),te&&(v?y._hideClone():y._showClone(S),S!==C&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:y.options.ghostClass,!1),toggleClass(dragEl,a.ghostClass,!0)),putSortable!==S&&S!==Sortable.active?putSortable=S:S===Sortable.active&&putSortable&&(putSortable=null),C===S&&(S._ignoreWhileAnimating=i),S.animateAll(function(){P("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(i===dragEl&&!dragEl.animated||i===t&&!i.animated)&&(lastTarget=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!te&&nearestEmptyInsertDetectEvent(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function R(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,a.draggable),_dispatchEvent({sortable:S,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=closest(i,a.draggable,t,!0),P("dragOver"),Sortable.eventCanceled)return b;if(dragEl.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i)return T(!1);if(ignoreNextClick=!1,y&&!a.disabled&&(v?_||(o=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,y,dragEl,e))&&d.checkPut(this,y,dragEl,e))){if(E=this._getDirection(e,i)==="vertical",r=getRect(dragEl),P("dragOverValid"),Sortable.eventCanceled)return b;if(o)return parentEl=rootEl,x(),this._hideClone(),P("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),T(!0);var L=lastChild(t,a.draggable);if(!L||_ghostIsLast(e,E,this)&&!L.animated){if(L===dragEl)return T(!1);if(L&&t===e.target&&(i=L),i&&(s=getRect(i)),_onMove(rootEl,t,dragEl,r,i,s,e,!!i)!==!1)return x(),L&&L.nextSibling?t.insertBefore(dragEl,L.nextSibling):t.appendChild(dragEl),parentEl=t,R(),T(!0)}else if(L&&_ghostIsFirst(e,E,this)){var k=getChild(t,0,a,!0);if(k===dragEl)return T(!1);if(i=k,s=getRect(i),_onMove(rootEl,t,dragEl,r,i,s,e,!1)!==!1)return x(),t.insertBefore(dragEl,k),parentEl=t,R(),T(!0)}else if(i.parentNode===t){s=getRect(i);var N=0,D,G=dragEl.parentNode!==t,U=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||r,i.animated&&i.toRect||s,E),F=E?"top":"left",B=isScrolledPast(i,"top","top")||isScrolledPast(dragEl,"top","top"),z=B?B.scrollTop:void 0;lastTarget!==i&&(D=s[F],pastFirstInvertThresh=!1,isCircumstantialInvert=!U&&a.invertSwap||G),N=_getSwapDirection(e,i,s,E,U?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,isCircumstantialInvert,lastTarget===i);var Y;if(N!==0){var X=index(dragEl);do X-=N,Y=parentEl.children[X];while(Y&&(css(Y,"display")==="none"||Y===ghostEl))}if(N===0||Y===i)return T(!1);lastTarget=i,lastDirection=N;var q=i.nextElementSibling,K=!1;K=N===1;var ee=_onMove(rootEl,t,dragEl,r,i,s,e,K);if(ee!==!1)return(ee===1||ee===-1)&&(K=ee===1),_silent=!0,setTimeout(_unsilent,30),x(),K&&!q?t.appendChild(dragEl):i.parentNode.insertBefore(dragEl,K?q:i),B&&scrollBy(B,0,z-B.scrollTop),parentEl=dragEl.parentNode,D!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(D-getRect(i)[F])),R(),T(!0)}if(t.contains(dragEl))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,r=0,s=i.length,o=this.options;r<s;r++)t=i[r],closest(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var i={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];closest(a,this.options.draggable,r,!1)&&(i[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var r=PluginManager.modifyOption(this,e,t);typeof r<"u"?i[e]=r:i[e]=t,e==="group"&&_prepareGroup(i)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function _onMove(n,e,t,i,r,s,o,a){var d,y=n[expando],v=y.options.onMove,_;return window.CustomEvent&&!IE11OrLess&&!Edge?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=n,d.dragged=t,d.draggedRect=i,d.related=r||e,d.relatedRect=s||getRect(e),d.willInsertAfter=a,d.originalEvent=o,n.dispatchEvent(d),v&&(_=v.call(y,d,o)),_}function _disableDraggable(n){n.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(n,e,t){var i=getRect(getChild(t.el,0,t.options,!0)),r=getChildContainingRectFromElement(t.el,t.options,ghostEl),s=10;return e?n.clientX<r.left-s||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-s||n.clientY<i.bottom&&n.clientX<i.left}function _ghostIsLast(n,e,t){var i=getRect(lastChild(t.el,t.options.draggable)),r=getChildContainingRectFromElement(t.el,t.options,ghostEl),s=10;return e?n.clientX>r.right+s||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+s||n.clientX>i.right&&n.clientY>i.top}function _getSwapDirection(n,e,t,i,r,s,o,a){var d=i?n.clientY:n.clientX,y=i?t.height:t.width,v=i?t.top:t.left,_=i?t.bottom:t.right,C=!1;if(!o){if(a&&targetMoveDistance<y*r){if(!pastFirstInvertThresh&&(lastDirection===1?d>v+y*s/2:d<_-y*s/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)C=!0;else if(lastDirection===1?d<v+targetMoveDistance:d>_-targetMoveDistance)return-lastDirection}else if(d>v+y*(1-r)/2&&d<_-y*(1-r)/2)return _getInsertDirection(e)}return C=C||o,C&&(d<v+y*s/2||d>_-y*s/2)?d>v+y/2?1:-1:0}function _getInsertDirection(n){return index(dragEl)<index(n)?1:-1}function _generateId(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function _saveInputCheckedState(n){savedInputChecked.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&savedInputChecked.push(i)}}function _nextTick(n){return setTimeout(n,0)}function _cancelNextTick(n){return clearTimeout(n)}documentExists&&on(document,"touchmove",function(n){(Sortable.active||awaitingDragStarted)&&n.cancelable&&n.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(n){return n[expando]};Sortable.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),i.utils)),PluginManager.mount(i)})};Sortable.create=function(n,e){return new Sortable(n,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):i.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var r=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(touchEvt$1=t,i||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,a,i);var d=getParentAutoScrollElement(a,!0);scrolling&&(!pointerElemChangedInterval||s!==lastAutoScrollX||o!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var y=getParentAutoScrollElement(document.elementFromPoint(s,o),!0);y!==d&&(d=y,clearAutoScrolls()),autoScroll(t,r.options,y,i)},10),lastAutoScrollX=s,lastAutoScrollY=o)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(a,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(a,!1),!1)}}},_extends(n,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(n){clearInterval(n.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(n,e,t,i){if(e.scroll){var r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,d=getWindowScrollingElement(),y=!1,v;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,v=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var _=0,C=scrollEl;do{var E=C,S=getRect(E),b=S.top,P=S.bottom,x=S.left,T=S.right,R=S.width,L=S.height,k=void 0,N=void 0,D=E.scrollWidth,G=E.scrollHeight,U=css(E),F=E.scrollLeft,B=E.scrollTop;E===d?(k=R<D&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),N=L<G&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(k=R<D&&(U.overflowX==="auto"||U.overflowX==="scroll"),N=L<G&&(U.overflowY==="auto"||U.overflowY==="scroll"));var z=k&&(Math.abs(T-r)<=o&&F+R<D)-(Math.abs(x-r)<=o&&!!F),Y=N&&(Math.abs(P-s)<=o&&B+L<G)-(Math.abs(b-s)<=o&&!!B);if(!autoScrolls[_])for(var X=0;X<=_;X++)autoScrolls[X]||(autoScrolls[X]={});(autoScrolls[_].vx!=z||autoScrolls[_].vy!=Y||autoScrolls[_].el!==E)&&(autoScrolls[_].el=E,autoScrolls[_].vx=z,autoScrolls[_].vy=Y,clearInterval(autoScrolls[_].pid),(z!=0||Y!=0)&&(y=!0,autoScrolls[_].pid=setInterval((function(){i&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var q=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*a:0,K=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*a:0;typeof v=="function"&&v.call(Sortable.dragged.parentNode[expando],K,q,n,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,K,q)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&C!==d&&(C=getParentAutoScrollElement(C,!1)));scrolling=y}},30),drop=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var y=i||s;a();var v=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,_=document.elementFromPoint(v.clientX,v.clientY);d(),y&&!y.el.contains(_)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=getChild(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var checkDsfr=function(){var n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--blue-france-sun-113-625");return e!==""},LayerSwitcherDOM={_createDraggableElement:function(n,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(n,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(i){e._onEndDragAndDropLayerClick(i)}}):Sortable.create(n,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(i){e._onEndDragAndDropLayerClick(i)}})},_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlayerSwitcher"),n.className="GPwidget gpf-widget",n},_createMainLayersShowElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowLayersList"),n.type="checkbox",n},_createMainLayersElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPlayersList"),n.className="GPpanel gpf-panel fr-modal",n},_createMainLayersDivElement:function(){var n=document.createElement("div");return n.className="GPpanelBody gpf-panel__body_ls fr-modal__body",n},_createMainPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn",e.htmlFor=this._addUID("GPshowLayersList"),e.title="Afficher/masquer le gestionnaire de couches",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),document.getElementById(n._addUID("GPshowLayersList")).checked=i,document.getElementById(n._addUID("GPshowLayersList")).checked&&(document.getElementById(n._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),n.onShowLayerSwitcherClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),document.getElementById(n._addUID("GPshowLayersList")).checked&&(document.getElementById(n._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),n.onShowLayerSwitcherClick()}),e},_createMainCounterLayersElement:function(){var n=document.createElement("span");return n.id=this._addUID("GPlayerCounter"),n.className="GPlayerCounter",n.innerHTML="0",n},_createMainInfoElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPlayerInfoPanel"),n.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",n},_createMainInfoDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createLayersPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header_ls",n},_createLayersPanelIconElement:function(){var n=document.createElement("label");return n.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",n.title="Couches de données",n},_createLayersPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle gpf-panel__title_ls",n.id=this._addUID("GPlayersHeaderTitle"),n.innerHTML="Couches de données",n},_createLayersPanelCloseElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(n){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+n.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(n)),e.appendChild(this._createAdvancedToolShowElement(n)),e.appendChild(this._createAdvancedToolElement(n)),e},_createBasicToolElement:function(n){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+n.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(n)),e.appendChild(this._createBasicToolVisibilityElement(n)),e.appendChild(this._createBasicToolDragNDropElement(n)),e},_createBasicToolDragNDropElement:function(n){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+n.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0);var t=this;return e.addEventListener?e.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onStartDragAndDropLayerClick(i)}):e.attachEvent&&e.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onStartDragAndDropLayerClick(i)}),e},_createBasicToolNameElement:function(n){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+n.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=n.description||n.title,e.innerHTML=n.title,e},_createBasicToolVisibilityElement:function(n){var e=typeof n.visibility<"u"?n.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+n.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var i=this;return t.addEventListener?t.addEventListener("click",function(r){var s=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!s),i._onVisibilityLayerClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){var s=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!s),i._onVisibilityLayerClick(r)}),t},_createAdvancedToolShowElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+n.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r);var s=document.getElementById(t._addUID("GPadvancedTools_ID_"+n.id));r?(s.classList.replace("GPelementVisible","GPelementHidden"),s.classList.replace("gpf-visible","gpf-hidden")):(s.classList.replace("GPelementHidden","GPelementVisible"),s.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(n){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+n.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(n)),e.appendChild(this._createAdvancedToolInformationElement(n)),n.type!=="feature")for(var t=this._createAdvancedToolOpacityElement(n),i=0;i<t.length;i++)e.appendChild(t[i]);return e.appendChild(this._createAdvancedToolExtentElement(n)),e},_createAdvancedToolDeleteElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPremove_ID_"+n.id),e.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Supprimer la couche",e.layerId=n.id,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onDropLayerClick(i)}):e.attachEvent&&e.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onDropLayerClick(i)}),e},_createAdvancedToolInformationElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPinfo_ID_"+n.id),e.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!n.title||!n.description)&&(e.style.opacity="0",e.style.visibility="hidden"),e.title="Informations/légende",e.layerId=n.id,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onOpenLayerInfoClick(i)}):e.attachEvent&&e.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onOpenLayerInfoClick(i)}),e},_createAdvancedToolOpacityElement:function(n){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+n.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.style.setProperty("--progress-right","100%"),t.title="Opacité";var i=typeof n.opacity<"u"?n.opacity:1;i=Math.round(i*100);var r=document.createElement("input");r.id=this._addUID("GPopacityValueDiv_ID_"+n.id),r.type="range",r.value=i,r.ariaLabel="Opacité";var s=this;r.addEventListener?r.addEventListener("change",function(d){s._onChangeLayerOpacity(d)}):r.attachEvent&&r.attachEvent("onchange",function(d){s._onChangeLayerOpacity(d)}),r.addEventListener?r.addEventListener("input",function(d){s._onChangeLayerOpacity(d)}):r.attachEvent&&r.attachEvent("oninput",function(d){s._onChangeLayerOpacity(d)}),t.appendChild(r);var o=document.createElement("div");o.id=this._addUID("GPopacityValueDiv_ID_"+n.id),o.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+n.id),a.className="gpf-range__output fr-range__output gpf-visible",a.innerHTML=i+"%",o.appendChild(a),e.push(t),e.push(o),e},_createAdvancedToolExtentElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPextent_ID_"+n.id),e.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Zoomer dans l'étendue",e.layerId=n.id,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onZoomToExtentClick(i)}):e.attachEvent&&e.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),t._onZoomToExtentClick(i)}),e},_createContainerLayerInfoElement:function(n){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var i=document.createElement("label");i.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",i.title="Informations",t.appendChild(i);var r=document.createElement("div");r.id=this._addUID("GPlayerInfoTitle"),r.innerHTML=n.title,r.className="gpf-panel__title_ls",t.appendChild(r);var s=document.createElement("button");s.id=this._addUID("GPlayerInfoClose"),s.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",s.title="Fermer la fenêtre";var o=this,a=function(){document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n.id).classList.add("GPlayerInfoClosed"),document.getElementById(n.id).classList.remove("GPlayerInfoOpened")};s.addEventListener?s.addEventListener("click",a):s.attachEvent&&s.attachEvent("onclick",a),t.appendChild(s),e.appendChild(t);var d=document.createElement("div");if(d.id=this._addUID("GPlayerInfoContent"),d.className="gpf-panel__content fr-modal__content",e.appendChild(d),n.quicklookUrl){var y=document.createElement("div");y.id=this._addUID("GPlayerInfoQuicklook"),y.title="Afficher un aperçu de la couche";var v=document.createElement("a");v.href=n.quicklookUrl,v.appendChild(y),d.appendChild(v)}var _=document.createElement("div");if(_.id=this._addUID("GPlayerInfoDescription"),_.innerHTML=n.description,d.appendChild(_),n.metadata){var C=document.createElement("div");C.id=this._addUID("GPlayerInfoMetadata");var E=document.createElement("div");E.className="GPlayerInfoSubtitle",E.innerHTML="Métadonnées",C.appendChild(E);for(var S=0;S<n.metadata.length;S++){var b=n.metadata[S].url,P=document.createElement("div");P.className="GPlayerInfoLink";var x=document.createElement("a");x.href=b,x.innerHTML=b,P.appendChild(x),C.appendChild(P)}n.metadata.length!==0&&d.appendChild(C)}if(n.legends){var T=document.createElement("div");T.id=this._addUID("GPlayerInfoLegend");var R=document.createElement("div");R.className="GPlayerInfoSubtitle",R.innerHTML="Légende",T.appendChild(R);for(var L={},k=n.maxScaleDenominator||56e7,N=0;N<n.legends.length;N++){var D=n.legends[N].minScaleDenominator;if(D){var G=D.toString();D=Math.round(parseInt(G.substring(0,3),10)/10)*Math.pow(10,G.length-2)}else D=270;L[D]=n.legends[N]}for(var U in L)if(L.hasOwnProperty(U)){var F=L[U].url;if(typeof F=="string"&&F.toLowerCase().indexOf("nolegend.jpg")===-1){var B=document.createElement("div");B.className="GPlayerInfoLink",k=L[U].maxScaleDenominator||k;var z=document.createElement("a");z.href=F,z.innerHTML="Du 1/"+U+" au 1/"+k,B.appendChild(z),T.appendChild(B)}else delete L[U]}Object.keys(L).length!==0&&d.appendChild(T)}return e}},logger$x=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class jn extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},i=e.layers||[];if(super({element:t.element,target:t.target,render:t.render}),!(this instanceof jn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,i),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",i=>{var r=i.element,s;r.hasOwnProperty("gpLayerId")?s=r.gpLayerId:(s=this._layerId,r.gpLayerId=s,this._layerId++),this._layers[s]||this.addLayer(r)}),this._listeners.onRemoveListener=e.getLayers().on("remove",i=>{var r=i.element,s=r.gpLayerId;this._layers[s]&&this.removeLayer(r)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}addLayer(e,t){var i=this.getMap();if(t=t||{},!e){logger$x.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var r=e.gpLayerId;if(typeof r>"u"){logger$x.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var s=!1;if(i.getLayers().forEach(P=>{P.gpLayerId===r&&(s=!0)}),!s){logger$x.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[r]){for(var C in t)t.hasOwnProperty(C)&&(this._layers[r][C]=t[C]);if(t.title){var E=document.getElementById(this._addUID("GPname_ID_"+r));E&&(E.innerHTML=t.title,E.title=t.description||t.title)}var S=document.getElementById(this._addUID("GPinfo_ID_"+r));if(!document.getElementById(this._addUID("GPinfo_ID_"+r))&&t.description){var b=document.getElementById(this._addUID("GPadvancedTools_ID_"+r));b&&b.appendChild(this._createAdvancedToolInformationElement({id:r}))}S&&S.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var o=this.getLayerInfo(e)||{},a=e.getOpacity(),d=e.getVisible(),y=this.isInRange(e,i),v={layer:e,id:r,name:e.name,service:e.service,opacity:a??1,visibility:d??!0,inRange:y??!0,title:t.title!=null?t.title:o._title||r,description:t.description||o._description||null,legends:t.legends||o._legends||[],metadata:t.metadata||o._metadata||[],quicklookUrl:t.quicklookUrl||o._quicklookUrl||null};this._layers[r]=v;var _=this._createLayerDiv(v);this._layers[r].div=_,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(v),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(_,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",P=>this._updateLayerOpacity(P)),this._listeners.updateLayerVisibility=e.on("change:visible",P=>this._updateLayerVisibility(P)),this._layers[r].onZIndexChangeEvent==null&&(this._layers[r].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[r]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$x.trace(e);var t=e.gpLayerId,i=document.getElementById(this._addUID("GPinfo_ID_"+t));i&&i.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var r=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));r&&this._layerListContainer.removeChild(r);var s=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(s,1),this._lastZIndex--;for(var o=this._layersOrder,a=0;a<o.length;a++)o[a].layer.setZIndex(this._lastZIndex-a);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$x.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var i=e.gpLayerId;if(i==null){logger$x.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var r=document.getElementById(this._addUID("GPremove_ID_"+i));r&&(t===!1?r.style.display="none":t===!0&&(r.style.display="block"))}}_initialize(e,t){this._uid=SelectorID.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var i=0;i<t.length;i++){var r=t[i].layer;if(r){var s;r.hasOwnProperty("gpLayerId")?s=r.gpLayerId:(s=this._layerId,r.gpLayerId=s,this._layerId++);var o=t[i].config||{},a=r.getOpacity(),d=r.getVisible(),y={layer:r,id:s,name:r.name,service:r.service,opacity:a??1,visibility:d??!0,title:o.title!=null?o.title:o.id?o.id:s,description:o.description||null,legends:o.legends||[],metadata:o.metadata||[],quicklookUrl:o.quicklookUrl||null};this._layers[s]=y}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var i=this,r=function(b){this.collapsed=!b.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(b){r.call(i,b)});var s=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(s),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var o=this._layerSwitcherCounter=this._createMainCounterLayersElement();s.appendChild(o)}var a=this._createMainLayersElement();if(e.appendChild(a),this.options.panel){var d=this._createLayersPanelHeaderElement();a.appendChild(d);var y=this._createLayersPanelIconElement();d.appendChild(y);var v=this._createLayersPanelTitleElement();d.appendChild(v);var _=this._createLayersPanelCloseElement();d.appendChild(_)}var C=this._layerListContainer=this._createMainLayersDivElement();a.appendChild(C),this._createDraggableElement(C,this);var E=this._createMainInfoElement(),S=this._createMainInfoDivElement();return E.appendChild(S),e.appendChild(E),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(d=>{var y=null;d.hasOwnProperty("gpLayerId")?y=d.gpLayerId:(y=this._layerId,d.gpLayerId=y,this._layerId++);var v=this.getLayerInfo(d)||{};if(this._layers[y])this._layers[y].opacity=d.getOpacity(),this._layers[y].visibility=d.getVisible(),this._layers[y].inRange=this.isInRange(d,e);else{var _=d.getOpacity(),C=d.getVisible(),E=this.isInRange(d,e),S={layer:d,id:y,name:d.name,service:d.service,opacity:_??1,visibility:C??!0,inRange:E??!0,title:v._title||y,description:v._description||null,legends:v._legends||[],metadata:v._metadata||[],quicklookUrl:v._quicklookUrl||null};this._layers[y]=S}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=d.on("change:opacity",P=>this._updateLayerOpacity(P)),this._listeners._updateLayerVisibility=d.on("change:visible",P=>this._updateLayerVisibility(P)),d.getZIndex!==void 0){var b=d.getZIndex()||0;(!this._layersIndex[b]||!Array.isArray(this._layersIndex[b]))&&(this._layersIndex[b]=[]),this._layersIndex[b].push(this._layers[y])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var i=this._layersIndex[t],r=0;r<i.length;r++)this._layersOrder.unshift(i[r]),this._lastZIndex++,i[r].layer.setZIndex(this._lastZIndex),this._layers[i[r].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[i[r].layer.gpLayerId].onZIndexChangeEvent=i[r].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var s=0;s<this._layersOrder.length;s++){var o=this._layersOrder[s],a=this._createLayerDiv(o);this._layerListContainer.querySelector("#"+a.id)||this._layerListContainer.appendChild(a),this._layers[o.id].div=a}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,i=e.metadata&&e.metadata.length!==0,r=e.quicklookUrl;(t||i||r)&&(e.displayInformationElement=!0);var s=this._createContainerLayerElement(e);return e.inRange||s.classList.add("outOfRange"),s}onShowLayerSwitcherClick(){var e=this._showLayerSwitcherButton.ariaPressed;this.collapsed=e!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,i=SelectorID.index(t),r=this._layers[i].layer,s=e.target.value,o=document.getElementById(this._addUID("GPopacityValue_ID_"+i));o.innerHTML=s+"%",r.setOpacity(s/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var i=e.target.gpLayerId,r=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+i));r&&(r.value=Math.round(t*100));var s=document.getElementById(this._addUID("GPopacityValue_ID_"+i));s&&(s.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[i]})}_onVisibilityLayerClick(e){var t=e.target.id,i=SelectorID.index(t),r=this._layers[i].layer;r.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),i=e.target.gpLayerId,r=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+i));r&&(r.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[i]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,i;e.getLayers().forEach(y=>{i=y.gpLayerId,unByKey(this._layers[i].onZIndexChangeEvent),this._layers[i].onZIndexChangeEvent=null,t=null,y.getZIndex!==void 0&&(t=y.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[i]))}),this._lastZIndex=0,this._layersOrder=[];for(var r in this._layersIndex)if(this._layersIndex.hasOwnProperty(r))for(var s=this._layersIndex[r],o=0;o<s.length;o++)this._layersOrder.unshift(s[o]),this._lastZIndex++,this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent=s[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let y=0;y<this._layerListContainer.childNodes.length;y++){const v=this._layerListContainer.childNodes[y];v.id!==""&&v.remove()}for(var a=0;a<this._layersOrder.length;a++){var d=this._layersOrder[a];this._layerListContainer.appendChild(d.div)}}else logger$x.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,i=SelectorID.index(t),r=this._layers[i],s,o,a=document.getElementById(e.target.id);if(a.classList.contains("GPlayerInfoOpened")){a.classList.remove("GPlayerInfoOpened"),a.classList.add("GPlayerInfoClosed"),s=document.getElementById(this._addUID("GPlayerInfoPanel")),s.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),s.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),o=document.getElementById(this._addUID("GPlayerInfoContent")),o&&o.parentNode.remove();return}a.classList.contains("GPlayerInfoClosed")&&(a.classList.remove("GPlayerInfoClosed"),a.classList.add("GPlayerInfoOpened")),s=document.getElementById(this._addUID("GPlayerInfoPanel")),s.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),s.classList.add("GPlayerInfoPanelOpened","gpf-visible"),o=document.getElementById(this._addUID("GPlayerInfoContent")),o&&o.parentNode.remove();var d={id:t,title:r.title,description:r.description,quicklookUrl:r.quicklookUrl,metadata:r.metadata,legends:r.legends},y=r.layer.getMaxResolution();y===1/0?d._maxScaleDenominator=56e7:d._maxScaleDenominator=Math.round(y/28e-5);var v=this._createContainerLayerInfoElement(d);s.firstChild.appendChild(v)}_onDropLayerClick(e){var t=e.target.id,i=SelectorID.index(t),r=this._layers[i].layer;this.getMap().getLayers().remove(r)}_onEndDragAndDropLayerClick(){var e=this.getMap(),t=document.querySelectorAll("div.GPlayerSwitcher_layer"),i=t.length;this._layersOrder=[];for(var r=0;r<t.length;r++){var s=t[r].id,o=SelectorID.index(s),a=this._layers[o].layer;unByKey(this._layers[o].onZIndexChangeEvent),this._layers[o].onZIndexChangeEvent=null,a.setZIndex&&(a.setZIndex(i),this._layersOrder.push(this._layers[o]),i--),this._layers[o].onZIndexChangeEvent==null&&(this._layers[o].onZIndexChangeEvent=a.on("change:zIndex",()=>this._updateLayersOrder()))}e.updateSize()}_onStartDragAndDropLayerClick(e){logger$x.debug(e)}_onZoomToExtentClick(e){logger$x.debug(e);var t=e.target.id,i=SelectorID.index(t),r=this._layers[i],s=null,o=null;try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";if(!r.layer.hasOwnProperty("gpLayerId"))throw"WARN : User data not yet implemented !";var a=r.layer.name||r.layer.getSource().name,d=r.layer.service||r.layer.getSource().service,y=Config.configuration.getLayerId(a,d);if(!y)throw"ERROR : Layer ID not found into the catalogue !?";var v=Config.configuration.getGlobalConstraints(y);if(v){var _=this.getMap();if(!_||!_.getView())return;var C=_.getView(),E=C.getProjection(),S=[v.extent.left,v.extent.bottom,v.extent.right,v.extent.top],b=v.crs;b||(b="EPSG:4326"),s=transformExtent(S,b,E),s&&C.fit(s)}}catch(P){o=P}this.dispatchEvent({type:"layerswitcher:extent",extent:s,layer:r,error:o})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var i=t.gpLayerId;if(this._layers[i]){var r=this._layers[i],s;this.isInRange(t,e)&&!r.inRange?(r.inRange=!0,s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+i)),s.classList.remove("outOfRange")):!this.isInRange(t,e)&&r.inRange&&(r.inRange=!1,s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+i)),s.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(i=>{i===e&&(t=i.hasOwnProperty("gpLayerId")?i.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var i=t.getView().getResolution();if(i>e.getMaxResolution()||i<e.getMinResolution())return!1;var r=t.getView().calculateExtent(t.getSize()),s=e.getExtent();return!(s&&!intersects$1(r,s))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var i=e.getProperties(),r=i.source;r&&(t._title=r._title||i.id||"",t._description=r._description||"",t._quicklookUrl=r._quicklookUrl||"",t._metadata=r._metadata||[],t._legends=r._legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);var GetFeatureInfoDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPgetFeatureInfo"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createMainPictoElement:function(n){var e=this,t=document.createElement("button");return t.id=this._addUID("GPgetFeatureInfoPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn",t.title="activer/desactiver l'interrogation des couches",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",n),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onActivateGetFeatureInfoElementChange(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onActivateGetFeatureInfoElementChange(i)}),t}},logger$w=LoggerByDefault.getLogger("getfeatureinfo"),GetFeatureInfo=class Vn extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},i=e.layers||[];if(super({element:t.element,target:t.target,render:t.render}),!(this instanceof Vn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this._initialize(t,i),this._container=this._initContainer(t),this.element?this.element.appendChild(this._container):this.element=this._container,this}_initialize(e,t){if(this._uid=SelectorID.generate(),this.options=e,this.options.layers=t,this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},typeof e.auto<"u"&&typeof e.auto!="boolean"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean");return}if(this._auto=e.auto||!1,typeof e.active<"u"&&typeof e.active!="boolean"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");return}if(this._active=typeof e.active>"u"?!0:e.active,e.defaultEvent&&typeof e.defaultEvent!="string"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");return}if(this._defaultEvent=e.defaultEvent||"singleclick",!this._isValidEvent(this._defaultEvent)){logger$w.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");return}if(e.defaultInfoFormat&&typeof e.defaultInfoFormat!="string"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");return}if(this._defaultInfoFormat=e.defaultInfoFormat||"text/html",e.cursorStyle&&typeof e.cursorStyle!="string"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");return}if(this._cursorStyle=e.cursorStyle||"pointer",e.proxyUrl){if(typeof e.proxyUrl!="string"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");return}this._proxyUrl=e.proxyUrl}if(e.noProxyDomains){if(!Array.isArray(e.noProxyDomains)){logger$w.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");return}this._noProxyDomains=e.noProxyDomains}if(typeof e.autoPan<"u"&&typeof e.autoPan!="boolean"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean");return}if(this._autoPan=typeof e.autoPan>"u"?!0:e.autoPan,e.autoPanAnimation){if(e.autoPanAnimation.duration&&typeof e.autoPanAnimation.duration!="number"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");return}if(e.autoPanAnimation.easing&&typeof e.autoPanAnimation.easing!="function"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");return}this._autoPanAnimation=e.autoPanAnimation}if(e.autoPanMargin){if(typeof e.autoPanMargin!="number"){logger$w.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");return}this._autoPanMargin=e.autoPanMargin}if(!Array.isArray(t)){logger$w.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array");return}this._setLayers(t),this._activateGetFeatureInfoButton=null}setMap(e){if(e){if(this._updateEvents(e),this._cursorStyle&&this._active&&this._activateCursor(!0,e),e.getLayers().on("remove",i=>{for(var r=0;r<this._layers.length;++r)if(this._layers[r].obj===i.element){this._layers.splice(r,1);break}this._updateEvents(e)}),this._auto){var t=!1;e.getLayers().forEach(i=>{this._hasLayer(i)||(this._layers.push({obj:i}),t=!0)}),t&&this._updateEvents(e),e.getLayers().on("add",i=>{this._layers.push({obj:i.element}),this._updateEvents(e)})}}else this._clearEvents(),this._activateCursor(!1);super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getLayers(){return this._layers}setDefaultEvent(e){if(typeof e!="string"){logger$w.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string");return}if(!e||!this._isValidEvent(e)){logger$w.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+e+"' is not allowed.");return}this._defaultEvent=e,this._updateEvents()}setCursorStyle(e){if(typeof e!="string"){logger$w.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string");return}this._active&&(!this._cursorStyle&&e?this._activateCursor(!0):this._cursorStyle&&!e&&this._activateCursor(!1)),this._cursorStyle=e}setActive(e){this._setActive(e),this._activateGetFeatureInfoButton.setAttribute("aria-pressed",e)}_setActive(e){if(typeof e!="boolean"){logger$w.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean");return}this._active!==e&&(this._active=e,this._cursorStyle&&this._activateCursor(e))}isActive(){return this._active}setHidden(e){this.element.style.visibility=e?"hidden":""}isHidden(){return this.element.style.visibility==="hidden"}setLayers(e){this._setLayers(e),this._updateEvents()}_isValidEvent(e){return Object.keys(this._events).indexOf(e)>-1}_activateEvent(e,t){var i=this,r=function(s){Gfi.onDisplayFeatureInfo(s,i)};e==="contextmenu"?t.getViewport().addEventListener(e,r):t.on(e,r),this._eventsHandler[e]=r,this._events[e]=!0}_deactivateEvent(e,t){e==="contextmenu"?t.getViewport().removeEventListener(e,this._eventsHandler[e]):t.un(e,this._eventsHandler[e]),delete this._eventsHandler[e],this._events[e]=!1}_updateEvents(e){e||(e=this.getMap());for(var t=[],i=0;i<this._layers.length;++i){var r=this._layers[i].event?this._layers[i].event:this._defaultEvent;t.indexOf(r)<0&&t.push(r)}for(var s in this._events)!this._events[s]&&t.indexOf(s)>=0?this._activateEvent(s,e):this._events[s]&&t.indexOf(s)<0&&this._deactivateEvent(s,e)}_clearEvents(){var e=this.getMap();for(var t in this._events)this._events[t]&&this._deactivateEvent(t,e)}_hasLayer(e){for(var t=0;t<this._layers.length;++t)if(this._layers[t].obj===e)return!0;return!1}_activateCursor(e,t){if(t||(t=this.getMap()),e){if(this._eventsHandler.hasOwnProperty("pointermove")){logger$w.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");return}var i=this,r=function(s){var o=t.forEachFeatureAtPixel(s.pixel,(a,d)=>{for(var y=i.getLayers(),v=0;v<y.length;++v)if(y[v].obj===d)return!0});o?t.getTargetElement().style.cursor=i._cursorStyle:t.getTargetElement().style.cursor=""};this._eventsHandler.pointermove=r,t.on("pointermove",r)}else this._eventsHandler.hasOwnProperty("pointermove")&&(t.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove),t.getTargetElement().style.cursor=""}_setLayers(e){if(!e||!Array.isArray(e)){logger$w.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array");return}this._layers=[];for(var t=0;t<e.length;++t){var i=this._layers.push({})-1;e[t].event&&(this._isValidEvent(e[t].event)?this._layers[i].event=e[t].event:logger$w.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[t].event+"' is not allowed.")),e[t].infoFormat&&(this._layers[i].infoFormat=e[t].infoFormat),this._layers[i].obj=e[t].obj}}onActivateGetFeatureInfoElementChange(e){var t=e.target.getAttribute("aria-pressed");this._setActive(t==="true")}_initContainer(e){var t=this._createMainContainerElement(),i=this._createMainPictoElement(this.isActive());if(t.appendChild(i),typeof e.hidden<"u"){if(typeof e.hidden!="boolean"){logger$w.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");return}e.hidden&&(t.style.visibility="hidden")}return t}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(n,e){var t=n%e;return t*e<0?t+e:t},decimalToDMS:function(n,e,t){var i=this.modulo(n+180,360)-180,r=Math.abs(3600*i),s=t||0,o=Math.pow(10,s),a=Math.floor(r/3600),d=Math.floor((r-a*3600)/60),y=r-a*3600-d*60;y=Math.ceil(y*o)/o,y>=60&&(y=0,d+=1),d>=60&&(d=0,a+=1);var v=e.charAt(i<0?1:0);return{d:a,m:d,s:y,direction:v}},dmsToDecimal(n,e,t,i){var r=n+e/60+t/3600;return(i=="S"||i=="O")&&(r=r*-1),r},coordinateToDecimal(n){var e={};return e.lat=n[1].toFixed(6),e.lng=n[0].toFixed(6),e.unit="°",e},coordinateToDMS(n){return{lng:MathUtils.decimalToDMS(n[0],"EO",2),lat:MathUtils.decimalToDMS(n[1],"NS",2),unit:"DMS"}},coordinateToRad(n){var e={},t=.017453292519943295;return e.lng=n[0]*t,e.lng=e.lng.toFixed(8),e.lat=n[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(n){var e={},t=1.1111111111111112;return e.lng=n[0]*t,e.lng=e.lng.toFixed(8),e.lat=n[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(n){var e={};return e.x=n[0].toFixed(2),e.y=n[1].toFixed(2),e.unit="m",e},coordinateToKMeter(n){var e={};return e.x=(n[0]/1e3).toFixed(2),e.y=(n[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(n,e){var t=e||10,i=parseInt(n,t);return!isNaN(i)&&isFinite(i)?i:null},isInteger:function(n){if(isNaN(n))return!1;var e=parseFloat(n);return(e|0)===e},toFloat:function(n){var e=parseFloat(n);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(n){var e=15,t=n.service,i=n.fields,r=n.type,s={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&r==="PositionOfInterest"&&(e=s[i.classification]),t==="GeocodedLocation"&&r==="PositionOfInterest"&&(e=s[i.importance]||14),r==="StreetAddress"&&(e=17),r==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(n){var e=n.placeAttributes;if(e.label)return e.label;if(n.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return n.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:n.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(n){if(n.fullText)return n.fullText;var e=[];return e.push(n.street||""),e.push(n.postalCode||""),e.push(n.commune||""),n.type==="PositionOfInterest"&&(e.push(n.poi||""),e.push(n.kind||"")),e.join(" - ")}};function globals(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$3={};exports$3.greenwich=0;exports$3.lisbon=-9.131906111111;exports$3.paris=2.337229166667;exports$3.bogota=-74.080916666667;exports$3.madrid=-3.687938888889;exports$3.rome=12.452333333333;exports$3.bern=7.439583333333;exports$3.jakarta=106.807719444444;exports$3.ferro=-17.666666666667;exports$3.brussels=4.367975;exports$3.stockholm=18.058277777778;exports$3.athens=23.7163375;exports$3.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(n,e){if(n[e])return n[e];for(var t=Object.keys(n),i=e.toLowerCase().replace(ignoredChar,""),r=-1,s,o;++r<t.length;)if(s=t[r],o=s.toLowerCase().replace(ignoredChar,""),o===i)return n[s]}function projStr(n){var e={},t=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,d){var y=d.split("=");return y.push(!0),a[y[0].toLowerCase()]=y[1],a},{}),i,r,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*D2R$1},lat_1:function(a){e.lat1=a*D2R$1},lat_2:function(a){e.lat2=a*D2R$1},lat_ts:function(a){e.lat_ts=a*D2R$1},lon_0:function(a){e.long0=a*D2R$1},lon_1:function(a){e.long1=a*D2R$1},lon_2:function(a){e.long2=a*D2R$1},alpha:function(a){e.alpha=parseFloat(a)*D2R$1},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*D2R$1},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(d){return parseFloat(d)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var d=match(units,a);d&&(e.to_meter=d.to_meter)},from_greenwich:function(a){e.from_greenwich=a*D2R$1},pm:function(a){var d=match(exports$3,a);e.from_greenwich=(d||parseFloat(a))*D2R$1},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var d="ewnsud";a.length===3&&d.indexOf(a.substr(0,1))!==-1&&d.indexOf(a.substr(1,1))!==-1&&d.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(i in t)r=t[i],i in o?(s=o[i],typeof s=="function"?s(r):e[s]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(n);case KEYWORD:return this.keyword(n);case QUOTED:return this.quoted(n);case AFTERQUOTE:return this.afterquote(n);case NUMBER:return this.number(n);case ENDED:return}};Parser.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(n){if(digets.test(n)){this.word+=n;return}if(endThings.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(n){if(n==='"'){this.state=AFTERQUOTE;return}this.word+=n};Parser.prototype.keyword=function(n){if(keyword.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(n){if(latin.test(n)){this.word=n,this.state=KEYWORD;return}if(n==='"'){this.word="",this.state=QUOTED;return}if(digets.test(n)){this.word=n,this.state=NUMBER;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(n){var e=new Parser(n);return e.output()}function mapit(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:n,r=t.reduce(function(s,o){return sExpr(o,s),s},i);e&&(n[e]=r)}function sExpr(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},sExpr(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&sExpr(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&sExpr(n[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],mapit(e,t,n);return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return sExpr(n,e[t]);return mapit(e,t,n)}}var D2R=.017453292519943295;function rename(n,e){var t=e[0],i=e[1];!(t in n)&&i in n&&(n[t]=n[i],e.length===3&&(n[t]=e[2](n[t])))}function d2r(n){return n*D2R}function cleanWKT(n){if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",t=0,i=n.AXIS.length;t<i;++t){var r=[n.AXIS[t][0].toLowerCase(),n.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var s=n.GEOGCS;n.type==="GEOGCS"&&(s=n),s&&(s.DATUM?n.datumCode=s.DATUM.name.toLowerCase():n.datumCode=s.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(n.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=s.DATUM.SPHEROID.a,n.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(n.datum_params=s.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(y){var v=n.to_meter||1;return y*v}var a=function(y){return rename(n,y)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];d.forEach(a),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=d2r(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=d2r(n.lat0>0?90:-90))}function wkt(n){var e=parseString(n),t=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",t]);var r={};return sExpr(e,r),cleanWKT(r),r}function defs(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[n]=projStr(arguments[1]):defs[n]=wkt(arguments[1]):defs[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?defs.apply(e,i):defs(i)});if(typeof n=="string"){if(n in defs)return defs[n]}else"EPSG"in n?defs["EPSG:"+n.EPSG]=n:"ESRI"in n?defs["ESRI:"+n.ESRI]=n:"IAU2000"in n?defs["IAU2000:"+n.IAU2000]=n:console.log(n);return}}globals(defs);function testObj(n){return typeof n=="string"}function testDef(n){return n in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(n){return codeWords.some(function(e){return n.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(n){var e=match(n,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(n){var e=match(n,"extension");if(e)return match(e,"proj4")}function testProj(n){return n[0]==="+"}function parse(n){if(testObj(n)){if(testDef(n))return defs[n];if(testWKT(n)){var e=wkt(n);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(n))return projStr(n)}else return n}function extend(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function msfnz(n,e,t){var i=n*e;return t/Math.sqrt(1-i*i)}function sign(n){return n<0?-1:1}function adjust_lon(n){return Math.abs(n)<=SPI?n:n-sign(n)*TWO_PI}function tsfnz(n,e,t){var i=n*t,r=.5*n;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(HALF_PI-e))/i}function phi2z(n,e){for(var t=.5*n,i,r,s=HALF_PI-2*Math.atan(e),o=0;o<=15;o++)if(i=n*Math.sin(s),r=HALF_PI-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function init$w(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(n){var e=n.x,t=n.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var i,r;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)i=this.x0+this.a*this.k0*adjust_lon(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var s=Math.sin(t),o=tsfnz(this.e,t,s);i=this.x0+this.a*this.k0*adjust_lon(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return n.x=i,n.y=r,n}function inverse$v(n){var e=n.x-this.x0,t=n.y-this.y0,i,r;if(this.sphere)r=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(r=phi2z(this.e,s),r===-9999)return null}return i=adjust_lon(this.long0+e/(this.a*this.k0)),n.x=i,n.y=r,n}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$w,forward:forward$v,inverse:inverse$v,names:names$x};function init$v(){}function identity(n){return n}var names$w=["longlat","identity"];const longlat={init:init$v,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(n,e){var t=projStore.length;return n.names?(projStore[t]=n,n.names.forEach(function(i){names$v[i.toLowerCase()]=t}),this):(console.log(e),!0)}function get(n){if(!n)return!1;var e=n.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$2={};exports$2.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$2.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$2.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$2.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$2.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$2.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$2.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$2.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$2.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$2.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$2.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$2.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$2.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$2.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$2.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$2.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$2.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$2.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$2.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$2.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$2.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$2.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$2.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$2.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$2.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$2.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$2.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$2.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$2.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$2.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$2.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$2.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$2.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$2.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$2.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$2.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$2.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$2.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$2.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$2.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$2.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$2.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$2.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$2.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(n,e,t,i){var r=n*n,s=e*e,o=(r-s)/r,a=0;i?(n*=1-o*(SIXTH+o*(RA4+o*RA6)),r=n*n,o=0):a=Math.sqrt(o);var d=(r-s)/s;return{es:o,e:a,ep2:d}}function sphere(n,e,t,i,r){if(!n){var s=match(exports$2,i);s||(s=WGS84),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<EPSLN)&&(r=!0,e=n),{a:n,b:e,rf:t,sphere:r}}var exports$1={};exports$1.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports$1.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports$1.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports$1.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports$1.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports$1.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports$1.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports$1.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports$1.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};exports$1.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports$1.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports$1.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports$1.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports$1.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports$1.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports$1.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports$1.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports$1.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(n,e,t,i,r,s,o){var a={};return n===void 0||n==="none"?a.datum_type=PJD_NODATUM:a.datum_type=PJD_WGS84,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=PJD_3PARAM),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=PJD_7PARAM,a.datum_params[3]*=SEC_TO_RAD,a.datum_params[4]*=SEC_TO_RAD,a.datum_params[5]*=SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=PJD_GRIDSHIFT,a.grids=o),a.a=t,a.b=i,a.es=r,a.ep2=s,a}var loadedNadgrids={};function nadgrid(n,e){var t=new DataView(e),i=detectLittleEndian(t),r=readHeader(t,i),s=readSubgrids(t,r,i),o={header:r,subgrids:s};return loadedNadgrids[n]=o,o}function getNadgrids(n){if(n===void 0)return null;var e=n.split(",");return e.map(parseNadgridString)}function parseNadgridString(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:loadedNadgrids[n]||null,isNull:!1}}function secondsToRadians(n){return n/3600*Math.PI/180}function detectLittleEndian(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:decodeString(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function decodeString(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function readSubgrids(n,e,t){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=readGridHeader(n,i,t),a=readGridNodes(n,i,o,t),d=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),y=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[secondsToRadians(o.lowerLongitude),secondsToRadians(o.lowerLatitude)],del:[secondsToRadians(o.longitudeInterval),secondsToRadians(o.latitudeInterval)],lim:[d,y],count:o.gridNodeCount,cvs:mapNodes(a)}),i+=176+o.gridNodeCount*16}return r}function mapNodes(n){return n.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(n,e,t){return{name:decodeString(n,e+8,e+16).trim(),parent:decodeString(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function readGridNodes(n,e,t,i){for(var r=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var d={latitudeShift:n.getFloat32(r+a*s,i),longitudeShift:n.getFloat32(r+a*s+4,i),latitudeAccuracy:n.getFloat32(r+a*s+8,i),longitudeAccuracy:n.getFloat32(r+a*s+12,i)};o.push(d)}return o}function Projection(n,e){if(!(this instanceof Projection))return new Projection(n);e=e||function(y){if(y)throw y};var t=parse(n);if(typeof t!="object"){e(n);return}var i=Projection.projections.get(t.projName);if(!i){e(n);return}if(t.datumCode&&t.datumCode!=="none"){var r=match(exports$1,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),o=eccentricity(s.a,s.b,s.rf,t.R_A),a=getNadgrids(t.nadgrids),d=t.datum||datum(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);extend(this,t),extend(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=d,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===PJD_3PARAM?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===PJD_7PARAM?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(n,e,t){var i=n.x,r=n.y,s=n.z?n.z:0,o,a,d,y;if(r<-HALF_PI&&r>-1.001*HALF_PI)r=-HALF_PI;else if(r>HALF_PI&&r<1.001*HALF_PI)r=HALF_PI;else{if(r<-HALF_PI)return{x:-1/0,y:-1/0,z:n.z};if(r>HALF_PI)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(r),y=Math.cos(r),d=a*a,o=t/Math.sqrt(1-e*d),{x:(o+s)*y*Math.cos(i),y:(o+s)*y*Math.sin(i),z:(o*(1-e)+s)*a}}function geocentricToGeodetic(n,e,t,i){var r=1e-12,s=r*r,o=30,a,d,y,v,_,C,E,S,b,P,x,T,R,L=n.x,k=n.y,N=n.z?n.z:0,D,G,U;if(a=Math.sqrt(L*L+k*k),d=Math.sqrt(L*L+k*k+N*N),a/t<r){if(D=0,d/t<r)return G=HALF_PI,U=-i,{x:n.x,y:n.y,z:n.z}}else D=Math.atan2(k,L);y=N/d,v=a/d,_=1/Math.sqrt(1-e*(2-e)*v*v),S=v*(1-e)*_,b=y*_,R=0;do R++,E=t/Math.sqrt(1-e*b*b),U=a*S+N*b-E*(1-e*b*b),C=e*E/(E+U),_=1/Math.sqrt(1-C*(2-C)*v*v),P=v*(1-C)*_,x=y*_,T=x*S-P*b,S=P,b=x;while(T*T>s&&R<o);return G=Math.atan(x/Math.abs(P)),{x:D,y:G,z:U}}function geocentricToWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===PJD_7PARAM){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],d=t[5],y=t[6];return{x:y*(n.x-d*n.y+a*n.z)+i,y:y*(d*n.x+n.y-o*n.z)+r,z:y*(-a*n.x+o*n.y+n.z)+s}}}function geocentricFromWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===PJD_7PARAM){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],d=t[5],y=t[6],v=(n.x-i)/y,_=(n.y-r)/y,C=(n.z-s)/y;return{x:v+d*_-a*C,y:-d*v+_+o*C,z:a*v-o*_+C}}}function checkParams(n){return n===PJD_3PARAM||n===PJD_7PARAM}function datum_transform(n,e,t){if(compareDatums(n,e)||n.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var i=n.a,r=n.es;if(n.datum_type===PJD_GRIDSHIFT){var s=applyGridShift(n,!1,t);if(s!==0)return;i=SRS_WGS84_SEMIMAJOR,r=SRS_WGS84_ESQUARED}var o=e.a,a=e.b,d=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(o=SRS_WGS84_SEMIMAJOR,a=SRS_WGS84_SEMIMINOR,d=SRS_WGS84_ESQUARED),r===d&&i===o&&!checkParams(n.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,r,i),checkParams(n.datum_type)&&(t=geocentricToWgs84(t,n.datum_type,n.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,d,o,a),e.datum_type===PJD_GRIDSHIFT){var y=applyGridShift(e,!0,t);if(y!==0)return}return t}function applyGridShift(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<n.grids.length;o++){var a=n.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var d=a.grid.subgrids,y=0,v=d.length;y<v;y++){var _=d[y],C=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,E=_.ll[0]-C,S=_.ll[1]-C,b=_.ll[0]+(_.lim[0]-1)*_.del[0]+C,P=_.ll[1]+(_.lim[1]-1)*_.del[1]+C;if(!(S>i.y||E>i.x||P<i.y||b<i.x)&&(r=applySubgridShift(i,e,_),!isNaN(r.x)))break e}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*R2D+" "+i.y*R2D+" tried: '"+s+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function applySubgridShift(n,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var r={x:n.x,y:n.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=adjust_lon(r.x-Math.PI)+Math.PI;var s=nadInterpolate(r,t);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o=9,a=1e-12,d,y;do{if(y=nadInterpolate(s,t),isNaN(y.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:r.x-(y.x+s.x),y:r.y-(y.y+s.y)},s.x+=d.x,s.y+=d.y}while(o--&&Math.abs(d.x)>a&&Math.abs(d.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=adjust_lon(s.x+t.ll[0]),i.y=s.y+t.ll[1]}else isNaN(s.x)||(i.x=n.x+s.x,i.y=n.y+s.y);return i}function nadInterpolate(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*i.x,y:t.y-1*i.y},s={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;o=i.y*e.lim[0]+i.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var d={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var y={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var v={x:e.cvs[o][0],y:e.cvs[o][1]},_=r.x*r.y,C=r.x*(1-r.y),E=(1-r.x)*(1-r.y),S=(1-r.x)*r.y;return s.x=E*a.x+C*d.x+S*v.x+_*y.x,s.y=E*a.y+C*d.y+S*v.y+_*y.y,s}function adjust_axis(n,e,t){var i=t.x,r=t.y,s=t.z||0,o,a,d,y={};for(d=0;d<3;d++)if(!(e&&d===2&&t.z===void 0))switch(d===0?(o=i,"ew".indexOf(n.axis[d])!==-1?a="x":a="y"):d===1?(o=r,"ns".indexOf(n.axis[d])!==-1?a="y":a="x"):(o=s,a="z"),n.axis[d]){case"e":y[a]=o;break;case"w":y[a]=-o;break;case"n":y[a]=o;break;case"s":y[a]=-o;break;case"u":t[a]!==void 0&&(y.z=o);break;case"d":t[a]!==void 0&&(y.z=-o);break;default:return null}return y}function common(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function checkSanity(n){checkCoord(n.x),checkCoord(n.y)}function checkCoord(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(n,e){return(n.datum.datum_type===PJD_3PARAM||n.datum.datum_type===PJD_7PARAM||n.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&n.datumCode!=="WGS84"}function transform(n,e,t,i){var r;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(checkSanity(t),n.datum&&e.datum&&checkNotWGS(n,e)&&(r=new Projection("WGS84"),t=transform(n,r,t,i),n=r),i&&n.axis!=="enu"&&(t=adjust_axis(n,!1,t)),n.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=datum_transform(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!s&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(n,e,t,i){var r,s,o;return Array.isArray(t)?(r=transform(n,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(s=transform(n,e,t,i),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function checkProj(n){return n instanceof Projection?n:n.oProj?n.oProj:Projection(n)}function proj4(n,e,t){n=checkProj(n);var i=!1,r;return typeof e>"u"?(e=n,n=wgs84,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=n,n=wgs84,i=!0),e=checkProj(e),t?transformer(n,e,t):(r={forward:function(s,o){return transformer(n,e,s,o)},inverse:function(s,o){return transformer(e,n,s,o)}},i&&(r.oProj=e),r)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(n,e){return e=e||5,encode(LLtoUTM({lat:n[1],lon:n[0]}),e)}function inverse$u(n){var e=UTMtoLL(decode(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(n){var e=UTMtoLL(decode(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(n){return n*(Math.PI/180)}function radToDeg(n){return 180*(n/Math.PI)}function LLtoUTM(n){var e=n.lat,t=n.lon,i=6378137,r=.00669438,s=.9996,o,a,d,y,v,_,C,E=degToRad(e),S=degToRad(t),b,P;P=Math.floor((t+180)/6)+1,t===180&&(P=60),e>=56&&e<64&&t>=3&&t<12&&(P=32),e>=72&&e<84&&(t>=0&&t<9?P=31:t>=9&&t<21?P=33:t>=21&&t<33?P=35:t>=33&&t<42&&(P=37)),o=(P-1)*6-180+3,b=degToRad(o),a=r/(1-r),d=i/Math.sqrt(1-r*Math.sin(E)*Math.sin(E)),y=Math.tan(E)*Math.tan(E),v=a*Math.cos(E)*Math.cos(E),_=Math.cos(E)*(S-b),C=i*((1-r/4-3*r*r/64-5*r*r*r/256)*E-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*E)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*E)-35*r*r*r/3072*Math.sin(6*E));var x=s*d*(_+(1-y+v)*_*_*_/6+(5-18*y+y*y+72*v-58*a)*_*_*_*_*_/120)+5e5,T=s*(C+d*Math.tan(E)*(_*_/2+(5-y+9*v+4*v*v)*_*_*_*_/24+(61-58*y+y*y+600*v-330*a)*_*_*_*_*_*_/720));return e<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(x),zoneNumber:P,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(n){var e=n.northing,t=n.easting,i=n.zoneLetter,r=n.zoneNumber;if(r<0||r>60)return null;var s=.9996,o=6378137,a=.00669438,d,y=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),v,_,C,E,S,b,P,x,T,R=t-5e5,L=e;i<"N"&&(L-=1e7),P=(r-1)*6-180+3,d=a/(1-a),b=L/s,x=b/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),T=x+(3*y/2-27*y*y*y/32)*Math.sin(2*x)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*x)+151*y*y*y/96*Math.sin(6*x),v=o/Math.sqrt(1-a*Math.sin(T)*Math.sin(T)),_=Math.tan(T)*Math.tan(T),C=d*Math.cos(T)*Math.cos(T),E=o*(1-a)/Math.pow(1-a*Math.sin(T)*Math.sin(T),1.5),S=R/(v*s);var k=T-v*Math.tan(T)/E*(S*S/2-(5+3*_+10*C-4*C*C-9*d)*S*S*S*S/24+(61+90*_+298*C+45*_*_-252*d-3*C*C)*S*S*S*S*S*S/720);k=radToDeg(k);var N=(S-(1+2*_+C)*S*S*S/6+(5-2*C+28*_-3*C*C+8*d+24*_*_)*S*S*S*S*S/120)/Math.cos(T);N=P+radToDeg(N);var D;if(n.accuracy){var G=UTMtoLL({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});D={top:G.lat,right:G.lon,bottom:k,left:N}}else D={lat:k,lon:N};return D}function getLetterDesignator(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function encode(n,e){var t="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+get100kID(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function get100kID(n,e,t){var i=get100kSetForZone(t),r=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return getLetter100kID(r,s,i)}function get100kSetForZone(n){var e=n%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(n,e,t){var i=t-1,r=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(i),s=SET_ORIGIN_ROW_LETTERS.charCodeAt(i),o=r+n-1,a=s+e,d=!1;o>Z&&(o=o-Z+A-1,d=!0),(o===I||r<I&&o>I||(o>I||r<I)&&d)&&o++,(o===O||r<O&&o>O||(o>O||r<O)&&d)&&(o++,o===I&&o++),o>Z&&(o=o-Z+A-1),a>V?(a=a-V+A-1,d=!0):d=!1,(a===I||s<I&&a>I||(a>I||s<I)&&d)&&a++,(a===O||s<O&&a>O||(a>O||s<O)&&d)&&(a++,a===I&&a++),a>V&&(a=a-V+A-1);var y=String.fromCharCode(o)+String.fromCharCode(a);return y}function decode(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,i="",r,s=0;!/[A-Z]/.test(r=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;i+=r,s++}var o=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+n;t=n.substring(s,s+=2);for(var d=get100kSetForZone(o),y=getEastingFromChar(t.charAt(0),d),v=getNorthingFromChar(t.charAt(1),d);v<getMinNorthing(a);)v+=2e6;var _=e-s;if(_%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var C=_/2,E=0,S=0,b,P,x,T,R;return C>0&&(b=1e5/Math.pow(10,C),P=n.substring(s,s+C),E=parseFloat(P)*b,x=n.substring(s+C),S=parseFloat(x)*b),T=E+y,R=S+v,{easting:T,northing:R,zoneLetter:a,zoneNumber:o,accuracy:b}}function getEastingFromChar(n,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),i=1e5,r=!1;t!==n.charCodeAt(0);){if(t++,t===I&&t++,t===O&&t++,t>Z){if(r)throw"Bad character: "+n;t=A,r=!0}i+=1e5}return i}function getNorthingFromChar(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),i=0,r=!1;t!==n.charCodeAt(0);){if(t++,t===I&&t++,t===O&&t++,t>V){if(r)throw"Bad character: "+n;t=A,r=!0}i+=1e5}return i}function getMinNorthing(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Point(n,e,t){if(!(this instanceof Point))return new Point(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(n){return new Point(toPoint(n))};Point.prototype.toMGRS=function(n){return forward$u([this.x,this.y],n)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(n){var e=[];e[0]=C00-n*(C02+n*(C04+n*(C06+n*C08))),e[1]=n*(C22-n*(C04+n*(C06+n*C08)));var t=n*n;return e[2]=t*(C44-n*(C46+n*C48)),t*=n,e[3]=t*(C66-n*C68),e[4]=t*n*C88,e}function pj_mlfn(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(n,e,t){for(var i=1/(1-e),r=n,s=MAX_ITER$3;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(pj_mlfn(r,o,Math.cos(r),t)-n)*(a*Math.sqrt(a))*i,r-=a,Math.abs(a)<EPSLN)return r}return r}function init$u(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(n){var e=n.x,t=n.y,i=adjust_lon(e-this.long0),r,s,o,a=Math.sin(t),d=Math.cos(t);if(this.es){var v=d*i,_=Math.pow(v,2),C=this.ep2*Math.pow(d,2),E=Math.pow(C,2),S=Math.abs(d)>EPSLN?Math.tan(t):0,b=Math.pow(S,2),P=Math.pow(b,2);r=1-this.es*Math.pow(a,2),v=v/Math.sqrt(r);var x=pj_mlfn(t,a,d,this.en);s=this.a*(this.k0*v*(1+_/6*(1-b+C+_/20*(5-18*b+P+14*C-58*b*C+_/42*(61+179*P-P*b-479*b)))))+this.x0,o=this.a*(this.k0*(x-this.ml0+a*i*v/2*(1+_/12*(5-b+9*C+4*E+_/30*(61+P-58*b+270*C-330*b*C+_/56*(1385+543*P-P*b-3111*b))))))+this.y0}else{var y=d*Math.sin(i);if(Math.abs(Math.abs(y)-1)<EPSLN)return 93;if(s=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,o=d*Math.cos(i)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(o),y>=1){if(y-1>EPSLN)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=s,n.y=o,n}function inverse$t(n){var e,t,i,r,s=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var _=Math.sin(t),C=Math.cos(t),E=Math.abs(C)>EPSLN?Math.tan(t):0,S=this.ep2*Math.pow(C,2),b=Math.pow(S,2),P=Math.pow(E,2),x=Math.pow(P,2);e=1-this.es*Math.pow(_,2);var T=s*Math.sqrt(e)/this.k0,R=Math.pow(T,2);e=e*E,i=t-e*R/(1-this.es)*.5*(1-R/12*(5+3*P-9*S*P+S-4*b-R/30*(61+90*P-252*S*P+45*x+46*S-R/56*(1385+3633*P+4095*x+1574*x*P)))),r=adjust_lon(this.long0+T*(1-R/6*(1+2*P+S-R/20*(5+28*P+24*x+8*S*P+6*S-R/42*(61+662*P+1320*x+720*x*P))))/C)}else i=HALF_PI*sign(o),r=0;else{var a=Math.exp(s/this.k0),d=.5*(a-1/a),y=this.lat0+o/this.k0,v=Math.cos(y);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(d,2))),i=Math.asin(e),o<0&&(i=-i),d===0&&v===0?r=0:r=adjust_lon(Math.atan2(d,v)+this.long0)}return n.x=r,n.y=i,n}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$u,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function hypot(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),i=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function log1py(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function asinhy(n){var e=Math.abs(n);return e=log1py(e*(1+e/(hypot(1,e)+1))),n<0?-e:e}function gatg(n,e){for(var t=2*Math.cos(2*e),i=n.length-1,r=n[i],s=0,o;--i>=0;)o=-s+t*r+n[i],s=r,r=o;return e+o*Math.sin(2*e)}function clens(n,e){for(var t=2*Math.cos(e),i=n.length-1,r=n[i],s=0,o;--i>=0;)o=-s+t*r+n[i],s=r,r=o;return Math.sin(e)*o}function cosh(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function clens_cmplx(n,e,t){for(var i=Math.sin(e),r=Math.cos(e),s=sinh(t),o=cosh(t),a=2*r*o,d=-2*i*s,y=n.length-1,v=n[y],_=0,C=0,E=0,S,b;--y>=0;)S=C,b=_,C=v,_=E,v=-S+a*C-d*_+n[y],E=-b+d*C+a*_;return a=i*o,d=r*s,[a*v-d*E,a*E+d*v]}function init$t(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(i+clens(this.gtu,2*i))}function forward$s(n){var e=adjust_lon(n.x-this.long0),t=n.y;t=gatg(this.cbg,t);var i=Math.sin(t),r=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(i,o*r),e=Math.atan2(s*r,hypot(i,r*o)),e=asinhy(Math.tan(e));var a=clens_cmplx(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var d,y;return Math.abs(e)<=2.623395162778?(d=this.a*(this.Qn*e)+this.x0,y=this.a*(this.Qn*t+this.Zb)+this.y0):(d=1/0,y=1/0),n.x=d,n.y=y,n}function inverse$s(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var s=clens_cmplx(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(sinh(e));var o=Math.sin(t),a=Math.cos(t),d=Math.sin(e),y=Math.cos(e);t=Math.atan2(o*y,hypot(d,y*a)),e=Math.atan2(d,y*a),i=adjust_lon(e+this.long0),r=gatg(this.cgb,t)}else i=1/0,r=1/0;return n.x=i,n.y=r,n}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(n,e){if(n===void 0){if(n=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var dependsOn="etmerc";function init$s(){var n=adjust_zone(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$s,names:names$s,dependsOn};function srat(n,e){return Math.pow((1-n)/(1+n),e)}var MAX_ITER$2=20;function init$r(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*n,this.ratexp))}function forward$r(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,n.x=this.C*e,n}function inverse$r(n){for(var e=1e-14,t=n.x/this.C,i=n.y,r=Math.pow(Math.tan(.5*i+FORTPI)/this.K,1/this.C),s=MAX_ITER$2;s>0&&(i=2*Math.atan(r*srat(this.e*Math.sin(n.y),-.5*this.e))-HALF_PI,!(Math.abs(i-n.y)<e));--s)n.y=i;return s?(n.x=t,n.y=i,n):null}var names$r=["gauss"];const gauss={init:init$r,forward:forward$r,inverse:inverse$r,names:names$r};function init$q(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(n){var e,t,i,r;return n.x=adjust_lon(n.x-this.long0),gauss.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=r*t*Math.sin(n.x),n.y=r*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse$q(n){var e,t,i,r,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=hypot(n.x,n.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),i=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else r=this.phic0,i=0;return n.x=i,n.y=r,gauss.inverse.apply(this,[n]),n.x=adjust_lon(n.x+this.long0),n}var names$q=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function ssfn_(n,e,t){return e*=t,Math.tan(.5*(HALF_PI+n))*Math.pow((1-e)/(1+e),.5*t)}function init$p(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(n){var e=n.x,t=n.y,i=Math.sin(t),r=Math.cos(t),s,o,a,d,y,v,_=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(_)),n.x=this.a*s*r*Math.sin(_)+this.x0,n.y=this.a*s*(this.coslat0*i-this.sinlat0*r*Math.cos(_))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,i,this.e))-HALF_PI,d=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=EPSLN?(y=tsfnz(this.e,t*this.con,this.con*i),v=2*this.a*this.k0*y/this.cons,n.x=this.x0+v*Math.sin(e-this.long0),n.y=this.y0-this.con*v*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<EPSLN?(s=2*this.a*this.k0/(1+d*Math.cos(_)),n.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*d*Math.cos(_))),n.y=s*(this.cosX0*a-this.sinX0*d*Math.cos(_))+this.y0),n.x=s*d*Math.sin(_)+this.x0,n))}function inverse$p(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,s,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=EPSLN?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(a)*this.sinlat0+n.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(n.x,-1*n.y)):e=adjust_lon(this.long0+Math.atan2(n.x,n.y)):e=adjust_lon(this.long0+Math.atan2(n.x*Math.sin(a),o*this.coslat0*Math.cos(a)-n.y*this.sinlat0*Math.sin(a))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=EPSLN){if(o<=EPSLN)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,i=o*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,i),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=EPSLN?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+n.y*Math.sin(r)*this.cosX0/o),e=adjust_lon(this.long0+Math.atan2(n.x*Math.sin(r),o*this.cosX0*Math.cos(r)-n.y*this.sinX0*Math.sin(r)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+s)));return n.x=e,n.y=t,n}var names$p=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p,ssfn_};function init$o(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),d=Math.log(Math.tan(Math.PI/4+n/2)),y=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*d+this.alpha*o/2*y}function forward$o(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,n.x=this.R*o+this.x0,n}function inverse$o(n){for(var e=n.x-this.x0,t=n.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,d=0,y=s,v=-1e3,_=0;Math.abs(y-v)>1e-7;){if(++_>20)return;d=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(y))/2)),v=y,y=2*Math.atan(Math.exp(d))-Math.PI/2}return n.x=a,n.y=y,n}var names$o=["somerc"];const somerc={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o};var TOL=1e-7;function isTypeA(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function init$n(){var n,e,t,i,r,s,o,a,d,y,v=0,_,C=0,E=0,S=0,b=0,P=0,x=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var R=!1;if("rectified_grid_angle"in this&&(R=!0),T&&(x=this.alpha),R&&(v=this.rectified_grid_angle*D2R$1),T||R)C=this.longc;else if(E=this.long1,b=this.lat1,S=this.long2,P=this.lat2,Math.abs(b-P)<=TOL||(n=Math.abs(b))<=TOL||Math.abs(n-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(P)-HALF_PI)<=TOL)throw new Error;var L=1-this.es;e=Math.sqrt(L),Math.abs(this.lat0)>EPSLN?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/L),this.A=this.B*this.k0*e/n,i=this.B*e/(t*Math.sqrt(n)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(tsfnz(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),T||R?(T?(_=Math.asin(Math.sin(x)/i),R||(v=x)):(_=v,x=Math.asin(i*Math.sin(_))),this.lam0=C-Math.asin(.5*(r-1/r)*Math.tan(_))/this.B):(s=Math.pow(tsfnz(this.e,b,Math.sin(b)),this.B),o=Math.pow(tsfnz(this.e,P,Math.sin(P)),this.B),r=this.E/s,d=(o-s)/(o+s),y=this.E*this.E,y=(y-o*s)/(y+o*s),n=E-S,n<-Math.pi?S-=TWO_PI:n>Math.pi&&(S+=TWO_PI),this.lam0=adjust_lon(.5*(E+S)-Math.atan(y*Math.tan(.5*this.B*(E-S))/d)/this.B),_=Math.atan(2*Math.sin(this.B*adjust_lon(E-this.lam0))/(r-1/r)),v=x=Math.asin(i*Math.sin(_))),this.singam=Math.sin(_),this.cosgam=Math.cos(_),this.sinrot=Math.sin(v),this.cosrot=Math.cos(v),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(x))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*_,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+r))}function forward$n(n){var e={},t,i,r,s,o,a,d,y;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-HALF_PI)>EPSLN){if(o=this.E/Math.pow(tsfnz(this.e,n.y,Math.sin(n.y)),this.B),a=1/o,t=.5*(o-a),i=.5*(o+a),s=Math.sin(this.B*n.x),r=(t*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(r)-1)<EPSLN)throw new Error;y=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*n.x),Math.abs(a)<TOL?d=this.A*n.x:d=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else y=n.y>0?this.v_pole_n:this.v_pole_s,d=this.ArB*n.y;return this.no_rot?(e.x=d,e.y=y):(d-=this.u_0,e.x=y*this.cosrot+d*this.sinrot,e.y=d*this.cosrot-y*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(n){var e,t,i,r,s,o,a,d={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),r=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<EPSLN)d.x=0,d.y=a<0?-HALF_PI:HALF_PI;else{if(d.y=this.E/Math.sqrt((1+a)/(1-a)),d.y=phi2z(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return d.x+=this.lam0,d}var names$n=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n};function init$m(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=msfnz(this.e,e,t),r=tsfnz(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=msfnz(this.e,s,o),d=tsfnz(this.e,this.lat2,s),y=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(i/a)/Math.log(r/d):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(y,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var i=Math.abs(Math.abs(t)-HALF_PI),r,s;if(i>EPSLN)r=tsfnz(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(i=t*this.ns,i<=0)return null;s=0}var o=this.ns*adjust_lon(e-this.long0);return n.x=this.k0*(s*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,n}function inverse$m(n){var e,t,i,r,s,o=(n.x-this.x0)/this.k0,a=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var d=0;if(e!==0&&(d=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),r=phi2z(this.e,i),r===-9999)return null}else r=-HALF_PI;return s=adjust_lon(d/this.ns+this.long0),n.x=s,n.y=r,n}var names$m=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(n){var e,t,i,r,s,o,a,d=n.x,y=n.y,v=adjust_lon(d-this.long0);return e=Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(y/2+this.s45),this.alfa)/e)-this.s45),i=-v*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),s=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),n.y=a*Math.cos(o)/1,n.x=a*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function inverse$l(n){var e,t,i,r,s,o,a,d,y=n.x;n.x=n.y,n.y=y,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),t=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),n.x=this.long0-t/this.alfa,a=e,d=0;var v=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-n.y)<1e-10&&(d=1),a=n.y,v+=1;while(d===0&&v<15);return v>=15?null:n}var names$l=["Krovak","krovak"];const krovak={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function mlfn(n,e,t,i,r){return n*r-e*Math.sin(2*r)+t*Math.sin(4*r)-i*Math.sin(6*r)}function e0fn(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function e1fn(n){return .375*n*(1+.25*n*(1+.46875*n))}function e2fn(n){return .05859375*n*n*(1+.75*n)}function e3fn(n){return n*n*n*(35/3072)}function gN(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function adjust_lat(n){return Math.abs(n)<HALF_PI?n:n-sign(n)*Math.PI}function imlfn(n,e,t,i,r){var s,o;s=n/e;for(var a=0;a<15;a++)if(o=(n-(e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function init$k(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(n){var e,t,i=n.x,r=n.y;if(i=adjust_lon(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=gN(this.a,this.e,s),d=Math.tan(r)*Math.tan(r),y=i*Math.cos(r),v=y*y,_=this.es*o*o/(1-this.es),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,r);e=a*y*(1-v*d*(1/6-(8-d+8*_)*v/120)),t=C-this.ml0+a*s/o*v*(.5+(5-d+6*_)*v/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function inverse$k(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r;if(this.sphere){var s=t+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=imlfn(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-HALF_PI)<=EPSLN)return n.x=this.long0,n.y=HALF_PI,t<0&&(n.y*=-1),n;var d=gN(this.a,this.e,Math.sin(a)),y=d*d*d/this.a/this.a*(1-this.es),v=Math.pow(Math.tan(a),2),_=e*this.a/d,C=_*_;i=a-d*Math.tan(a)/y*_*_*(.5-(1+3*v)*_*_/24),r=_*(1-C*(v/3+(1+3*v)*v*C/15))/Math.cos(a)}return n.x=adjust_lon(r+this.long0),n.y=adjust_lat(i),n}var names$k=["Cassini","Cassini_Soldner","cass"];const cass={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function qsfnz(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$j(){var n=Math.abs(this.lat0);if(Math.abs(n-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(n){var e,t,i,r,s,o,a,d,y,v,_=n.x,C=n.y;if(_=adjust_lon(_-this.long0),this.sphere){if(s=Math.sin(C),v=Math.cos(C),i=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+v*i:1+this.sinph0*s+this.cosph0*v*i,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*v*Math.sin(_),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*v*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(C+this.lat0)<EPSLN)return null;t=FORTPI-C*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(_),t*=i}}else{switch(a=0,d=0,y=0,i=Math.cos(_),r=Math.sin(_),s=Math.sin(C),o=qsfnz(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,d=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:y=1+this.sinb1*a+this.cosb1*d*i;break;case this.EQUIT:y=1+d*i;break;case this.N_POLE:y=HALF_PI+C,o=this.qp-o;break;case this.S_POLE:y=C-HALF_PI,o=this.qp+o;break}if(Math.abs(y)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:y=Math.sqrt(2/y),this.mode===this.OBLIQ?t=this.ymf*y*(this.cosb1*a-this.sinb1*d*i):t=(y=Math.sqrt(2/(1+d*i)))*a*this.ymf,e=this.xmf*y*d*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(y=Math.sqrt(o))*r,t=i*(this.mode===this.S_POLE?y:-y)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function inverse$j(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r,s,o,a,d,y;if(this.sphere){var v=0,_,C=0;if(_=Math.sqrt(e*e+t*t),r=_*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(C=Math.sin(r),v=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(_)<=EPSLN?0:Math.asin(t*C/_),e*=C,t=v*_;break;case this.OBLIQ:r=Math.abs(_)<=EPSLN?this.lat0:Math.asin(v*this.sinph0+t*C*this.cosph0/_),e*=C*this.cosph0,t=(v-Math.sin(r)*this.sinph0)*_;break;case this.N_POLE:t=-t,r=HALF_PI-r;break;case this.S_POLE:r-=HALF_PI;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(y=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,d=Math.sqrt(e*e+t*t),d<EPSLN)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*d/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(y=s*this.sinb1+t*o*this.cosb1/d,a=this.qp*y,t=d*this.cosb1*s-t*this.sinb1*o):(y=t*o/d,a=this.qp*y,t=d*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return n.x=this.long0,n.y=this.lat0,n;y=1-a/this.qp,this.mode===this.S_POLE&&(y=-y)}i=Math.atan2(e,t),r=authlat(Math.asin(y),this.apa)}return n.x=adjust_lon(this.long0+i),n.y=r,n}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(n){var e,t=[];return t[0]=n*P00,e=n*n,t[0]+=e*P01,t[1]=e*P10,e*=n,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$j=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function init$i(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=qsfnz(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*adjust_lon(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return n.x=o,n.y=a,n}function inverse$i(n){var e,t,i,r,s,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*n.x,i*n.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,t)),s=adjust_lon(r/this.ns0+this.long0),n.x=s,n.y=o,n}function phi1z(n,e){var t,i,r,s,o,a=asinz(.5*e);if(n<EPSLN)return a;for(var d=n*n,y=1;y<=25;y++)if(t=Math.sin(a),i=Math.cos(a),r=n*t,s=1-r*r,o=.5*s*s/i*(e/(1-d)-t/s+.5/n*Math.log((1-r)/(1+r))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var names$i=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,phi1z};function init$h(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(n){var e,t,i,r,s,o,a,d,y=n.x,v=n.y;return i=adjust_lon(y-this.long0),e=Math.sin(v),t=Math.cos(v),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,s=1,o>0||Math.abs(o)<=EPSLN?(a=this.x0+this.a*s*t*Math.sin(i)/o,d=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)/o):(a=this.x0+this.infinity_dist*t*Math.sin(i),d=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),n.x=a,n.y=d,n}function inverse$h(n){var e,t,i,r,s,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),i=Math.cos(r),o=asinz(i*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*i-n.y*this.sin_p14*t),s=adjust_lon(this.long0+s)):(o=this.phic0,s=0),n.x=s,n.y=o,n}var names$h=["gnom"];const gnom={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h};function iqsfnz(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var i=Math.asin(.5*e),r,s,o,a,d=0;d<30;d++)if(s=Math.sin(i),o=Math.cos(i),a=n*s,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-n*n)-s/(1-a*a)+.5/n*Math.log((1-a)/(1+a))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function init$g(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(n){var e=n.x,t=n.y,i,r,s=adjust_lon(e-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=qsfnz(this.e,Math.sin(t));i=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return n.x=i,n.y=r,n}function inverse$g(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*n.y*this.k0/this.a),e=adjust_lon(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var names$g=["cea"];const cea={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function init$f(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(n){var e=n.x,t=n.y,i=adjust_lon(e-this.long0),r=adjust_lat(t-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*r,n}function inverse$f(n){var e=n.x,t=n.y;return n.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=adjust_lat(this.lat0+(t-this.y0)/this.a),n}var names$f=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};var MAX_ITER$1=20;function init$e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(n){var e=n.x,t=n.y,i,r,s,o=adjust_lon(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(t),r=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)i=this.a*o,r=-1*this.ml0;else{var a=gN(this.a,this.e,Math.sin(t))/Math.tan(t);i=a*Math.sin(s),r=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return n.x=i+this.x0,n.y=r+this.y0,n}function inverse$e(n){var e,t,i,r,s,o,a,d,y;if(i=n.x-this.x0,r=n.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=EPSLN)e=adjust_lon(i/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,d=o;var v;for(s=MAX_ITER$1;s;--s)if(v=Math.tan(d),y=-1*(o*(d*v+1)-d-.5*(d*d+a)*v)/((d-o)/v-1),d+=y,Math.abs(y)<=EPSLN){t=d;break}e=adjust_lon(this.long0+Math.asin(i*Math.tan(d)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,d=o;var _,C,E,S,b;for(s=MAX_ITER$1;s;--s)if(b=this.e*Math.sin(d),_=Math.sqrt(1-b*b)*Math.tan(d),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,d),E=this.e0-2*this.e1*Math.cos(2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),S=C/this.a,y=(o*(_*S+1)-S-.5*_*(S*S+a))/(this.es*Math.sin(2*d)*(S*S+a-2*o*S)/(4*_)+(o-S)*(_*E-2/Math.sin(2*d))-E),d-=y,Math.abs(y)<=EPSLN){t=d;break}_=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(i*_/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var names$e=["Polyconic","poly"];const poly={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e};function init$d(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(n){var e,t=n.x,i=n.y,r=i-this.lat0,s=t-this.long0,o=r/SEC_TO_RAD*1e-5,a=s,d=1,y=0;for(e=1;e<=10;e++)d=d*o,y=y+this.A[e]*d;var v=y,_=a,C=1,E=0,S,b,P=0,x=0;for(e=1;e<=6;e++)S=C*v-E*_,b=E*v+C*_,C=S,E=b,P=P+this.B_re[e]*C-this.B_im[e]*E,x=x+this.B_im[e]*C+this.B_re[e]*E;return n.x=x*this.a+this.x0,n.y=P*this.a+this.y0,n}function inverse$d(n){var e,t=n.x,i=n.y,r=t-this.x0,s=i-this.y0,o=s/this.a,a=r/this.a,d=1,y=0,v,_,C=0,E=0;for(e=1;e<=6;e++)v=d*o-y*a,_=y*o+d*a,d=v,y=_,C=C+this.C_re[e]*d-this.C_im[e]*y,E=E+this.C_im[e]*d+this.C_re[e]*y;for(var S=0;S<this.iterations;S++){var b=C,P=E,x,T,R=o,L=a;for(e=2;e<=6;e++)x=b*C-P*E,T=P*C+b*E,b=x,P=T,R=R+(e-1)*(this.B_re[e]*b-this.B_im[e]*P),L=L+(e-1)*(this.B_im[e]*b+this.B_re[e]*P);b=1,P=0;var k=this.B_re[1],N=this.B_im[1];for(e=2;e<=6;e++)x=b*C-P*E,T=P*C+b*E,b=x,P=T,k=k+e*(this.B_re[e]*b-this.B_im[e]*P),N=N+e*(this.B_im[e]*b+this.B_re[e]*P);var D=k*k+N*N;C=(R*k+L*N)/D,E=(L*k-R*N)/D}var G=C,U=E,F=1,B=0;for(e=1;e<=9;e++)F=F*G,B=B+this.D[e]*F;var z=this.lat0+B*SEC_TO_RAD*1e5,Y=this.long0+U;return n.x=Y,n.y=z,n}var names$d=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){}function forward$c(n){var e=n.x,t=n.y,i=adjust_lon(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=r,n.y=s,n}function inverse$c(n){n.x-=this.x0,n.y-=this.y0;var e=adjust_lon(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var names$c=["Miller_Cylindrical","mill"];const mill={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};var MAX_ITER=20;function init$b(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(n){var e,t,i=n.x,r=n.y;if(i=adjust_lon(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),o=MAX_ITER;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<EPSLN)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var d=Math.sin(r),y=Math.cos(r);t=this.a*pj_mlfn(r,d,y,this.en),e=this.a*i*y/Math.sqrt(1-this.es*d*d)}return n.x=e,n.y=t,n}function inverse$b(n){var e,t,i,r;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),i=adjust_lon(i+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(n.y/this.a,this.es,this.en),r=Math.abs(e),r<HALF_PI?(r=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=adjust_lon(t)):r-EPSLN<HALF_PI&&(i=this.long0)),n.x=i,n.y=e,n}var names$b=["Sinusoidal","sinu"];const sinu={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b};function init$a(){}function forward$a(n){for(var e=n.x,t=n.y,i=adjust_lon(e-this.long0),r=t,s=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<EPSLN)break}r/=2,Math.PI/2-Math.abs(t)<EPSLN&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,d=1.4142135623731*this.a*Math.sin(r)+this.y0;return n.x=a,n.y=d,n}function inverse$a(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=adjust_lon(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return n.x=i,n.y=r,n}var names$a=["Mollweide","moll"];const moll={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(n){var e=n.x,t=n.y,i;if(this.sphere)i=this.a*(this.g-t);else{var r=mlfn(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-r)}var s=this.ns*adjust_lon(e-this.long0),o=this.x0+i*Math.sin(s),a=this.y0+this.rh-i*Math.cos(s);return n.x=o,n.y=a,n}function inverse$9(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,i,r;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return r=adjust_lon(this.long0+s/this.ns),i=adjust_lat(this.g-t/this.a),n.x=r,n.y=i,n;var o=this.g-t/this.a;return i=imlfn(o,this.e0,this.e1,this.e2,this.e3),r=adjust_lon(this.long0+s/this.ns),n.x=r,n.y=i,n}var names$9=["Equidistant_Conic","eqdc"];const eqdc={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){this.R=this.a}function forward$8(n){var e=n.x,t=n.y,i=adjust_lon(e-this.long0),r,s;Math.abs(t)<=EPSLN&&(r=this.x0+this.R*i,s=this.y0);var o=asinz(2*Math.abs(t/Math.PI));(Math.abs(i)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(r=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),d=a*a,y=Math.sin(o),v=Math.cos(o),_=v/(y+v-1),C=_*_,E=_*(2/y-1),S=E*E,b=Math.PI*this.R*(a*(_-S)+Math.sqrt(d*(_-S)*(_-S)-(S+d)*(C-S)))/(S+d);i<0&&(b=-b),r=this.x0+b;var P=d+_;return b=Math.PI*this.R*(E*P-a*Math.sqrt((S+d)*(d+1)-P*P))/(S+d),t>=0?s=this.y0+b:s=this.y0-b,n.x=r,n.y=s,n}function inverse$8(n){var e,t,i,r,s,o,a,d,y,v,_,C,E;return n.x-=this.x0,n.y-=this.y0,_=Math.PI*this.R,i=n.x/_,r=n.y/_,s=i*i+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+i*i,d=-2*o+1+2*r*r+s*s,E=r*r/d+(2*a*a*a/d/d/d-9*o*a/d/d)/27,y=(o-a*a/3/d)/d,v=2*Math.sqrt(-y/3),_=3*E/y/v,Math.abs(_)>1&&(_>=0?_=1:_=-1),C=Math.acos(_)/3,n.y>=0?t=(-v*Math.cos(C+Math.PI/3)-a/3/d)*Math.PI:t=-(-v*Math.cos(C+Math.PI/3)-a/3/d)*Math.PI,Math.abs(i)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),n.x=e,n.y=t,n}var names$8=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(n){var e=n.x,t=n.y,i=Math.sin(n.y),r=Math.cos(n.y),s=adjust_lon(e-this.long0),o,a,d,y,v,_,C,E,S,b,P,x,T,R,L,k,N,D,G,U,F,B,z;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI-t)*Math.sin(s),n.y=this.y0-this.a*(HALF_PI-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI+t)*Math.sin(s),n.y=this.y0+this.a*(HALF_PI+t)*Math.cos(s),n):(D=this.sin_p12*i+this.cos_p12*r*Math.cos(s),k=Math.acos(D),N=k?k/Math.sin(k):1,n.x=this.x0+this.a*N*r*Math.sin(s),n.y=this.y0+this.a*N*(this.cos_p12*i-this.sin_p12*r*Math.cos(s)),n):(o=e0fn(this.es),a=e1fn(this.es),d=e2fn(this.es),y=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(v=this.a*mlfn(o,a,d,y,HALF_PI),_=this.a*mlfn(o,a,d,y,t),n.x=this.x0+(v-_)*Math.sin(s),n.y=this.y0-(v-_)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=EPSLN?(v=this.a*mlfn(o,a,d,y,HALF_PI),_=this.a*mlfn(o,a,d,y,t),n.x=this.x0+(v+_)*Math.sin(s),n.y=this.y0+(v+_)*Math.cos(s),n):(C=i/r,E=gN(this.a,this.e,this.sin_p12),S=gN(this.a,this.e,i),b=Math.atan((1-this.es)*C+this.es*E*this.sin_p12/(S*r)),P=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(s)),P===0?G=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(P)-Math.PI)<=EPSLN?G=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):G=Math.asin(Math.sin(s)*Math.cos(b)/Math.sin(P)),x=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(P)/Math.sqrt(1-this.es),R=x*T,L=T*T,U=G*G,F=U*G,B=F*G,z=B*G,k=E*G*(1-U*L*(1-L)/6+F/8*R*(1-2*L)+B/120*(L*(4-7*L)-3*x*x*(1-7*L))-z/48*R),n.x=this.x0+k*Math.sin(P),n.y=this.y0+k*Math.cos(P),n))}function inverse$7(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,s,o,a,d,y,v,_,C,E,S,b,P,x,T,R,L,k,N,D,G;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,i=Math.sin(t),r=Math.cos(t),s=this.long0,Math.abs(e)<=EPSLN?o=this.lat0:(o=asinz(r*this.sin_p12+n.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-HALF_PI,Math.abs(a)<=EPSLN?this.lat0>=0?s=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):s=adjust_lon(this.long0-Math.atan2(-n.x,n.y)):s=adjust_lon(this.long0+Math.atan2(n.x*i,e*this.cos_p12*r-n.y*this.sin_p12*i))),n.x=s,n.y=o,n)):(d=e0fn(this.es),y=e1fn(this.es),v=e2fn(this.es),_=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(C=this.a*mlfn(d,y,v,_,HALF_PI),e=Math.sqrt(n.x*n.x+n.y*n.y),E=C-e,o=imlfn(E/this.a,d,y,v,_),s=adjust_lon(this.long0+Math.atan2(n.x,-1*n.y)),n.x=s,n.y=o,n):Math.abs(this.sin_p12+1)<=EPSLN?(C=this.a*mlfn(d,y,v,_,HALF_PI),e=Math.sqrt(n.x*n.x+n.y*n.y),E=e-C,o=imlfn(E/this.a,d,y,v,_),s=adjust_lon(this.long0+Math.atan2(n.x,n.y)),n.x=s,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),P=Math.atan2(n.x,n.y),S=gN(this.a,this.e,this.sin_p12),x=Math.cos(P),T=this.e*this.cos_p12*x,R=-T*T/(1-this.es),L=3*this.es*(1-R)*this.sin_p12*this.cos_p12*x/(1-this.es),k=e/S,N=k-R*(1+R)*Math.pow(k,3)/6-L*(1+3*R)*Math.pow(k,4)/24,D=1-R*N*N/2-k*N*N*N/6,b=Math.asin(this.sin_p12*Math.cos(N)+this.cos_p12*Math.sin(N)*x),s=adjust_lon(this.long0+Math.asin(Math.sin(P)*Math.sin(N)/Math.cos(b))),G=Math.sin(b),o=Math.atan2((G-this.es*D*this.sin_p12)*Math.tan(b),G*(1-this.es)),n.x=s,n.y=o,n))}var names$7=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(n){var e,t,i,r,s,o,a,d,y=n.x,v=n.y;return i=adjust_lon(y-this.long0),e=Math.sin(v),t=Math.cos(v),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,s=1,(o>0||Math.abs(o)<=EPSLN)&&(a=this.a*s*t*Math.sin(i),d=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)),n.x=a,n.y=d,n}function inverse$6(n){var e,t,i,r,s,o,a;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=asinz(e/this.a),i=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=EPSLN?(a=this.lat0,n.x=o,n.y=a,n):(a=asinz(r*this.sin_p14+n.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-HALF_PI,Math.abs(s)<=EPSLN?(this.lat0>=0?o=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):o=adjust_lon(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=a,n):(o=adjust_lon(this.long0+Math.atan2(n.x*i,e*this.cos_p14*r-n.y*this.sin_p14*i)),n.x=o,n.y=a,n))}var names$6=["ortho"];const ortho={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(n){var e={x:0,y:0},t,i,r,s,o,a,d={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,i=n.x,this.face===FACE_ENUM.TOP)s=HALF_PI-t,i>=FORTPI&&i<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,r=i-HALF_PI):i>HALF_PI+FORTPI||i<=-(HALF_PI+FORTPI)?(d.value=AREA_ENUM.AREA_1,r=i>0?i-SPI:i+SPI):i>-(HALF_PI+FORTPI)&&i<=-FORTPI?(d.value=AREA_ENUM.AREA_2,r=i+HALF_PI):(d.value=AREA_ENUM.AREA_3,r=i);else if(this.face===FACE_ENUM.BOTTOM)s=HALF_PI+t,i>=FORTPI&&i<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,r=-i+HALF_PI):i<FORTPI&&i>=-FORTPI?(d.value=AREA_ENUM.AREA_1,r=-i):i<-FORTPI&&i>=-(HALF_PI+FORTPI)?(d.value=AREA_ENUM.AREA_2,r=-i-HALF_PI):(d.value=AREA_ENUM.AREA_3,r=i>0?-i+SPI:-i-SPI);else{var y,v,_,C,E,S,b;this.face===FACE_ENUM.RIGHT?i=qsc_shift_lon_origin(i,+HALF_PI):this.face===FACE_ENUM.BACK?i=qsc_shift_lon_origin(i,+SPI):this.face===FACE_ENUM.LEFT&&(i=qsc_shift_lon_origin(i,-HALF_PI)),C=Math.sin(t),E=Math.cos(t),S=Math.sin(i),b=Math.cos(i),y=E*b,v=E*S,_=C,this.face===FACE_ENUM.FRONT?(s=Math.acos(y),r=qsc_fwd_equat_face_theta(s,_,v,d)):this.face===FACE_ENUM.RIGHT?(s=Math.acos(v),r=qsc_fwd_equat_face_theta(s,_,-y,d)):this.face===FACE_ENUM.BACK?(s=Math.acos(-y),r=qsc_fwd_equat_face_theta(s,_,-v,d)):this.face===FACE_ENUM.LEFT?(s=Math.acos(-v),r=qsc_fwd_equat_face_theta(s,_,y,d)):(s=r=0,d.value=AREA_ENUM.AREA_0)}return a=Math.atan(12/SPI*(r+Math.acos(Math.sin(r)*Math.cos(FORTPI))-HALF_PI)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),d.value===AREA_ENUM.AREA_1?a+=HALF_PI:d.value===AREA_ENUM.AREA_2?a+=SPI:d.value===AREA_ENUM.AREA_3&&(a+=1.5*SPI),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function inverse$5(n){var e={lam:0,phi:0},t,i,r,s,o,a,d,y,v,_={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?_.value=AREA_ENUM.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(_.value=AREA_ENUM.AREA_1,t-=HALF_PI):n.x<0&&-n.x>=Math.abs(n.y)?(_.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(_.value=AREA_ENUM.AREA_3,t+=HALF_PI),v=SPI/12*Math.tan(t),o=Math.sin(v)/(Math.cos(v)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(t),s=Math.tan(i),d=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),d<-1?d=-1:d>1&&(d=1),this.face===FACE_ENUM.TOP)y=Math.acos(d),e.phi=HALF_PI-y,_.value===AREA_ENUM.AREA_0?e.lam=a+HALF_PI:_.value===AREA_ENUM.AREA_1?e.lam=a<0?a+SPI:a-SPI:_.value===AREA_ENUM.AREA_2?e.lam=a-HALF_PI:e.lam=a;else if(this.face===FACE_ENUM.BOTTOM)y=Math.acos(d),e.phi=y-HALF_PI,_.value===AREA_ENUM.AREA_0?e.lam=-a+HALF_PI:_.value===AREA_ENUM.AREA_1?e.lam=-a:_.value===AREA_ENUM.AREA_2?e.lam=-a-HALF_PI:e.lam=a<0?-a-SPI:-a+SPI;else{var C,E,S;C=d,v=C*C,v>=1?S=0:S=Math.sqrt(1-v)*Math.sin(a),v+=S*S,v>=1?E=0:E=Math.sqrt(1-v),_.value===AREA_ENUM.AREA_1?(v=E,E=-S,S=v):_.value===AREA_ENUM.AREA_2?(E=-E,S=-S):_.value===AREA_ENUM.AREA_3&&(v=E,E=S,S=-v),this.face===FACE_ENUM.RIGHT?(v=C,C=-E,E=v):this.face===FACE_ENUM.BACK?(C=-C,E=-E):this.face===FACE_ENUM.LEFT&&(v=C,C=E,E=-v),e.phi=Math.acos(-S)-HALF_PI,e.lam=Math.atan2(E,C),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var b,P,x;b=e.phi<0?1:0,P=Math.tan(e.phi),x=this.b/Math.sqrt(P*P+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-x*x)/(this.one_minus_f*x)),b&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function qsc_fwd_equat_face_theta(n,e,t,i){var r;return n<EPSLN?(i.value=AREA_ENUM.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=FORTPI?i.value=AREA_ENUM.AREA_0:r>FORTPI&&r<=HALF_PI+FORTPI?(i.value=AREA_ENUM.AREA_1,r-=HALF_PI):r>HALF_PI+FORTPI||r<=-(HALF_PI+FORTPI)?(i.value=AREA_ENUM.AREA_2,r=r>=0?r-SPI:r+SPI):(i.value=AREA_ENUM.AREA_3,r+=HALF_PI)),r}function qsc_shift_lon_origin(n,e){var t=n+e;return t<-SPI?t+=TWO_PI:t>+SPI&&(t-=TWO_PI),t}var names$5=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},poly3_der=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function newton_rapshon(n,e,t,i){for(var r=e;i;--i){var s=n(r);if(r-=s,Math.abs(s)<t)break}return r}function init$4(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(n){var e=adjust_lon(n.x-this.long0),t=Math.abs(n.y),i=Math.floor(t*C1);i<0?i=0:i>=NODES&&(i=NODES-1),t=R2D*(t-RC1*i);var r={x:poly3_val(COEFS_X[i],t)*e,y:poly3_val(COEFS_Y[i],t)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*FXC+this.x0,r.y=r.y*this.a*FYC+this.y0,r}function inverse$4(n){var e={x:(n.x-this.x0)/(this.a*FXC),y:Math.abs(n.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=n.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var i=COEFS_Y[t],r=5*(e.y-i[0])/(COEFS_Y[t+1][0]-i[0]);r=newton_rapshon(function(s){return(poly3_val(i,s)-e.y)/poly3_der(i,s)},r,EPSLN,100),e.x/=poly3_val(COEFS_X[t],r),e.y=(5*t+r)*D2R$1,n.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$4=["Robinson","robin"];const robin={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4};function init$3(){this.name="geocent"}function forward$3(n){var e=geodeticToGeocentric(n,this.es,this.a);return e}function inverse$3(n){var e=geocentricToGeodetic(n,this.es,this.a,this.b);return e}var names$3=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$2(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function forward$2(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r,s;switch(this.mode){case mode.OBLIQ:s=this.sinph0*e+this.cosph0*t*i;break;case mode.EQUIT:s=t*i;break;case mode.S_POLE:s=-e;break;case mode.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*t*Math.sin(n.x),this.mode){case mode.OBLIQ:s*=this.cosph0*e-this.sinph0*t*i;break;case mode.EQUIT:s*=e;break;case mode.N_POLE:s*=-(t*i);break;case mode.S_POLE:s*=t*i;break}var o,a;return o=s*this.cg+r*this.sg,a=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*a,s=o*a,n.x=r*this.a,n.y=s*this.a,n}function inverse$2(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,i,r;r=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*r,i=this.pn1*n.y*this.cw*r,n.x=t*this.cg+i*this.sg,n.y=i*this.cg-t*this.sg;var s=hypot(n.x,n.y);if(Math.abs(s)<EPSLN)e.x=0,e.y=n.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case mode.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*a*this.cosph0/s),n.y=(o-this.sinph0*Math.sin(e.y))*s,n.x*=a*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(n.y*a/s),n.y=o*s,n.x*=a;break;case mode.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case mode.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var names$2=["Tilted_Perspective","tpers"];const tpers={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2};function init$1(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(n){var e=n.x,t=n.y,i,r,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(r=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-r)*r-s*s-o*o*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;i=this.radius_g-r,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/hypot(o,i)),n.y=this.radius_g_1*Math.atan(o/i)):(n.x=this.radius_g_1*Math.atan(s/i),n.y=this.radius_g_1*Math.atan(o/hypot(s,i)))}else this.shape==="sphere"&&(i=Math.cos(t),r=Math.cos(e)*i,s=Math.sin(e)*i,o=Math.sin(t),i=this.radius_g-r,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/hypot(o,i)),n.y=this.radius_g_1*Math.atan(o/i)):(n.x=this.radius_g_1*Math.atan(s/i),n.y=this.radius_g_1*Math.atan(o/hypot(s,i))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function inverse$1(n){var e=-1,t=0,i=0,r,s,o,a;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*hypot(1,i)):(t=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*hypot(1,t));var d=i/this.radius_p;if(r=t*t+d*d+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,i*=a,n.x=Math.atan2(t,e),n.y=Math.atan(i*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+i*i)):(t=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),r=t*t+i*i+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,i*=a,n.x=Math.atan2(t,e),n.y=Math.atan(i*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var names$1=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2;function init(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(n){var e=adjust_lon(n.x-this.long0),t=n.y,i=Math.asin(M*Math.sin(t)),r=i*i,s=r*r*r;return n.x=e*Math.cos(i)/(M*(A1+3*A2*r+s*(7*A3+9*A4*r))),n.y=i*(A1+A2*r+s*(A3+A4*r)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,i=n.y,r,s,o,a,d,y;for(y=0;y<t&&(r=i*i,s=r*r*r,o=i*(A1+A2*r+s*(A3+A4*r))-n.y,a=A1+3*A2*r+s*(7*A3+9*A4*r),i-=d=o/a,!(Math.abs(d)<e));++y);return r=i*i,s=r*r*r,n.x=M*n.x*(A1+3*A2*r+s*(7*A3+9*A4*r))/Math.cos(i),n.y=Math.asin(Math.sin(i)/M),n.x=adjust_lon(n.x+this.long0),n}var names=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init,forward,inverse,names};function includedProjections(n){n.Proj.projections.add(tmerc),n.Proj.projections.add(etmerc),n.Proj.projections.add(utm),n.Proj.projections.add(sterea),n.Proj.projections.add(stere),n.Proj.projections.add(somerc),n.Proj.projections.add(omerc),n.Proj.projections.add(lcc),n.Proj.projections.add(krovak),n.Proj.projections.add(cass),n.Proj.projections.add(laea),n.Proj.projections.add(aea),n.Proj.projections.add(gnom),n.Proj.projections.add(cea),n.Proj.projections.add(eqc),n.Proj.projections.add(poly),n.Proj.projections.add(nzmg),n.Proj.projections.add(mill),n.Proj.projections.add(sinu),n.Proj.projections.add(moll),n.Proj.projections.add(eqdc),n.Proj.projections.add(vandg),n.Proj.projections.add(aeqd),n.Proj.projections.add(ortho),n.Proj.projections.add(qsc),n.Proj.projections.add(robin),n.Proj.projections.add(geocent),n.Proj.projections.add(tpers),n.Proj.projections.add(geos),n.Proj.projections.add(eqearth)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$v=LoggerByDefault.getLogger("CRS");function register(n){const e=Object.keys(n.defs);logger$v.trace("proj. codes :",e);const t=e.length;let i,r;for(i=0;i<t;++i){const s=e[i];if(!get$3(s)){const o=n.defs(s);addProjection(new Projection$1({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:o.units}))}}for(i=0;i<t;++i){const s=e[i],o=get$3(s);for(r=0;r<t;++r){const a=e[r],d=get$3(a);if(!get$4(s,a))if(n.defs[s]===n.defs[a])addEquivalentProjections([o,d]);else{const y=n(s,a);addCoordinateTransforms(o,d,y.forward,y.inverse)}}}}var Register={isLoaded:!1,get:function(n){if(!(n===""||n===null||typeof n>"u")){var e=n.split(":");if(e.length===2){var t=e[0],i=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(i))return this[t][i]}}},exist:function(n){if(n===""||n===null||typeof n>"u")return!1;var e=n.split(":");if(e.length!==2)return!1;var t=e[0],i=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(i))},load:function(n){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var i=e[t],r=this[i];for(var s in r)if(r.hasOwnProperty(s)){var o=i+":"+s;n.defs(o,this.get(o))}}this.isLoaded=!0}},loadByDefault:function(n){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];for(var r in i)if(i.hasOwnProperty(r)){var s=t+":"+r;n.defs(s,i[r])}}},loadByName:function(n,e){if(!this.exist(e))return!1;try{n.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$u=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$u.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(n){logger$u.error(n)}}},loadByDefault:function(){if(logger$u.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(n){logger$u.error(n)}}},loadByName:function(n){if(logger$u.trace("Loading a custom definition projection : ",n),!Register.isLoaded){Register.loadByName(proj4,n);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$u.error(e)}}},overload:function(){logger$u.trace("Loading projections aera (extent)");for(var n in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(n)){var e=this.projectionsExtent[n],t=get$3(n),i=getTransform("EPSG:4326",t),r=applyTransform([e.bottom,e.right,e.top,e.left],i);t.setExtent(r),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=5,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async n=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:n,fields:m_fields,size:m_size};Object.keys(t).forEach(a=>e.searchParams.append(a,t[a]));var i=await fetch(e,{}),r=await i.json();if(i.status!==200)throw new Error(i.message);if(!(!r||r.length===0)){for(let a=0;a<r.length;a++){const d=r[a];var s=m_filterByService.length===0||m_filterByService.includes(d.source.type);if(s){if(unique().length>=m_maximumResponses)break;var o={originators:d.source.attributions,srs:d.source.srs,metadata:d.source.metadata_url,name:d.source.layer_name,title:d.source.title,description:d.source.description,service:d.source.type,url:d.source.url};if(m_filterByTMS.length&&(o.service==="WMTS"&&m_filterByTMS.includes(o.name)||o.service==="TMS"&&!m_filterByTMS.includes(o.name))||m_filterByProjection.length&&m_filterByProjection.includes(o.srs[0]))continue;m_suggestions.push(o)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((n,e,t)=>e===t.findIndex(i=>i.service===n.service&&i.name===n.name&&i.title===n.title&&i.description===n.description)),clear=()=>{controller.abort(),m_suggestions=[]},getSuggestions=()=>unique(),getNames=()=>unique().map(n=>n.name),getTitles=()=>unique().map(n=>n.title),setIndex=n=>{m_index=n},setFields=n=>{m_fields=n},setSize=n=>{m_size=parseInt(n)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=n=>{m_maximumResponses=parseInt(n)},setFiltersByService=n=>{m_filterByService=n===""?[]:n.split(",")},setFiltersByProjection=n=>{m_filterByProjection=n===""?[]:n.split(",")},setFiltersByTMS=n=>{m_filterByTMS=n===""?[]:n.split(",")},updateFilterByTMS=async n=>{var e=n;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const t=await fetch(e),i=await t.json();if(t.status!==200)throw new Error(t.message);if(!i)throw new Error("Liste vide !");var r=Object.keys(i.layers).map(s=>s.split("$")[0]);return r&&setFiltersByTMS(r.toString()),m_filterByTMS},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection};var SearchEngineDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPsearchEngine"),n.className="GPwidget gpf-widget",n},_createSearchDivElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPshowSearchDiv"),n},_createShowSearchEnginePictoElement:function(n){var e=this;checkDsfr()&&(n=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!n),t.disabled=!n,t.setAttribute("type","button"),t.addEventListener("click",function(i){if(checkDsfr()){var r=document.getElementById(e._addUID("GPautocompleteResults")),s=r.getElementsByClassName("GPautoCompleteProposal gpf-panel__items current"),o=r.getElementsByClassName("GPautoCompleteProposal gpf-panel__items"),a=o.length;if(!a)return;var d=null;s.length?d=s[0]:(d=o[0],d.className="GPautoCompleteProposal gpf-panel__items current",d.style.color="#000000",d.style["background-color"]="#CEDBEF"),d.click();return}var y=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!y),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var v=document.getElementById(e._addUID("GPshowAdvancedSearch"));v&&(v.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var _=document.getElementById(e._addUID("GPshowGeolocate"));_&&(_.style.display=null);var C=document.getElementById(e._addUID("GPshowSearchByCoordinate"));C&&(C.style.display=null);var E="#GPsearchInput-"+e._uid;document.querySelector(E+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick()}),t},_createSearchInputElement:function(n){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(r){return r.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(r)),!1});var i=document.createElement("input");return i.id=this._addUID("GPsearchInputText"),i.className="GPsearchInputText gpf-input fr-input",i.type="text",i.placeholder=n,i.autocomplete="off",i.addEventListener("keyup",function(r){var s=r.which||r.keyCode;s===13||s===10||s===38||s===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),i.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(r))}),i.addEventListener("keydown",function(r){var s=r.which||r.keyCode;s===13&&r.preventDefault();var o=document.getElementById(e._addUID("GPautocompleteResults"));if(o){var a=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items current"),d=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items"),y=d.length;if(y){var v=null;if(a.length)v=a[0];else if(v=d[0],v.className="GPautoCompleteProposal gpf-panel__items current",v.style.color="#000000",v.style["background-color"]="#CEDBEF",s!==13)return;var _=parseInt(SelectorID.index(v.id),10),C=_===y-1?d[0]:d[_+1],E=_===0?d[y-1]:d[_-1];switch(v.style["background-color"]="",v.style.color="",E.style["background-color"]="",E.style.color="",C.style["background-color"]="",C.style.color="",s){case 38:v.className="GPautoCompleteProposal gpf-panel__items",E.className="GPautoCompleteProposal gpf-panel__items current",E.style.color="#000000",E.style["background-color"]="#CEDBEF",v.scrollIntoView();break;case 40:v.className="GPautoCompleteProposal gpf-panel__items",C.className="GPautoCompleteProposal gpf-panel__items current",C.style.color="#000000",C.style["background-color"]="#CEDBEF",v.scrollIntoView();break;case 13:r.preventDefault(),v.click(r);break}v.focus()}}}),t.appendChild(i),t},_createSearchResetElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(n._addUID("GPsearchInputText")).value="",document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),n.onSearchResetClick()}),e},_createButtonsElement:function(){var n=document.createElement("div");return n.className="GPbuttonsContainer",n},_createFirstLineWrapper:function(){var n=document.createElement("div");return n.className="GPsearchFirstLineWrapper",n},_createRadioContainer:function(){var n=document.createElement("div");return n.className="GPsearchRadioContainer",n},_createRadioElements:function(){var n=document.createElement("div");n.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var i=document.createElement("label");i.className="gpf-label fr-label",i.htmlFor=this._addUID("GPsearchSplitLocations"),i.title="Adresses",i.innerHTML="Adresses",e.appendChild(i),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var r=document.createElement("div");r.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var s=document.createElement("input");s.id=this._addUID("GPsearchSplitData"),s.type="radio",s.name="GPsearchSplit",s.value="data",r.appendChild(s);var o=document.createElement("label");return o.className="gpf-label fr-label",o.htmlFor=this._addUID("GPsearchSplitData"),o.title="Cartes et données",o.innerHTML="Cartes et données",r.appendChild(o),s.addEventListener?s.addEventListener("change",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):s.attachEvent&&s.attachEvent("onchange",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),n.appendChild(e),n.appendChild(r),[n,t,s]},_createShowAdvancedSearchElement:function(){var n=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i);var r="#GPsearchInput-"+n._uid;i?(document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(r+" input").disabled=!1,document.querySelector(r+" .GPsearchInputReset")&&(document.querySelector(r+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1)):(document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(r+" input").disabled=!0,document.querySelector(r+" .GPsearchInputReset")&&(document.querySelector(r+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!0)),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la geolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowSearchGeolocateClick()}),e},_createShowSearchByCoordinateElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i);var r="#GPsearchInput-"+n._uid;i?(document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(r+" input").disabled=!1,document.querySelector(r+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1)):(document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(r+" input").disabled=!0,document.querySelector(r+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!0)),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPadvancedSearchPanel"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n},_createAdvancedSearchPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createGeocodeResultsElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPgeocodeResultsList"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n.appendChild(this._createGeocodeResultsHeaderElement()),n},_createGeocodeResultsDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createAutoCompleteElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPautoCompleteList"),n.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",n},_createCoordinateSearchPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPcoordinateSearchPanel"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n},_createCoordinateSearchPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createAutoCompleteListElement:function(){var n=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var n=document.createElement("select");return n.id=this._addUID("GPautocompleteResultsLocation"),n.className="GPelementHidden gpf-hidden gpf-select",n.size=6,n.autofocus=!0,n},_createAutoCompletedLocationTitleElement(){var n=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",n.appendChild(e)},_createAutoCompletedLocationElement:function(n,e){var t=this,i=document.getElementById(this._addUID("GPautocompleteResultsLocation")),r=document.createElement("option");r.id=this._addUID("AutoCompletedLocation_"+e),r.className="GPautoCompleteProposal gpf-panel__items";var s=GeocodeUtils.getSuggestedLocationFreeform(n);r.innerHTML=s,r.title=s,r.addEventListener?r.addEventListener("click",function(o){t.onAutoCompletedResultsItemClick(o)},!1):r.attachEvent&&r.attachEvent("onclick",function(o){t.onAutoCompletedResultsItemClick(o)}),i.appendChild(r)},_createSearchedSuggestContainer(){var n=document.createElement("select");return n.id=this._addUID("GPautocompleteResultsSuggest"),n.className="GPelementHidden gpf-hidden gpf-select",n.size=6,n.autofocus=!0,n},_createSearchedSuggestTitleElement(){var n=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et données",n.appendChild(e)},_createSearchedSuggestElement:function(n,e){var t=this,i=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),r=document.createElement("option");r.id=this._addUID("AutoCompletedSuggest_"+e),r.className="GPautoCompleteProposal gpf-panel__items",r.innerHTML=n.title+" ("+n.service+")",r.dataset.layer=n.name,r.title=n.description,r.addEventListener?r.addEventListener("click",function(s){t.onSearchedResultsItemClick(s)},!1):r.attachEvent&&r.attachEvent("onclick",function(s){t.onSearchedResultsItemClick(s)}),i.appendChild(r)},_createAdvancedSearchPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avancée",e.appendChild(t);var i=document.createElement("button");i.id=this._addUID("GPadvancedSearchClose"),i.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Fermer la recherche avancée",i.addEventListener?i.addEventListener("click",function(){var s="#GPsearchInput-"+n._uid;document.querySelector(s+" input").disabled=!1,document.querySelector(s+" .GPsearchInputReset")&&(document.querySelector(s+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):i.attachEvent&&i.attachEvent("onclick",function(){var s="#GPsearchInput-"+n._uid;document.querySelector(s+" input").disabled=!1,document.querySelector(s+" .GPsearchInputReset")&&(document.querySelector(s+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",i.appendChild(r),e.appendChild(i),e},_createAdvancedSearchPanelFormElement:function(n){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(o){o.preventDefault();for(var a=[],d="#GPadvancedSearchFilters-"+e._uid,y=document.querySelectorAll(d+" > div > div > input,select#category"),v=0;v<y.length;v++){var _=y[v];a.push({key:_.name,value:_.value})}return e.onGeocodingAdvancedSearchSubmit(o,a),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var i=document.createElement("div");i.className="GPflexInput gpf-flex-column ";var r=document.createElement("label");r.className="GPadvancedSearchCodeLabel gpf-label fr-label",r.innerHTML="Recherche par",i.appendChild(r);var s=this._createAdvancedSearchFormCodeElement(n);return i.appendChild(s),t.appendChild(i),t},_createAdvancedSearchFormCodeElement:function(n){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(s){e.onGeocodingAdvancedSearchCodeChange(s)},!1),n||(n=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var i=0;i<n.length;i++){var r=document.createElement("option");r.value=n[i].id,r.text=n[i].title,t.appendChild(r)}return t},_createAdvancedSearchFormInputElement:function(){var n=document.createElement("input");return n.type="submit",n.id=this._addUID("GPadvancedSearchSubmit"),n.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",n.value="Chercher",n},_createAdvancedSearchFormFiltersElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchFilters"),n},_createAdvancedSearchFiltersTableElement:function(n,e){var t=document.createElement("div");return t.id=this._addUID(n),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(n){var e=null,t=n.name,i=n.title,r=n.description,s=n.code,o=n.value,a=document.createElement("div");a.className="GPflexInput gpf-flex-column ";var d=document.createElement("label");if(d.className="GPadvancedSearchFilterLabel gpf-label fr-label",d.htmlFor=t,d.title=r||i,d.innerHTML=i,a.appendChild(d),t==="category"){var y=document.createElement("select");if(y.id=t,y.name=t,y.title=i,y.className="GPadvancedSearchFilterInput gpf-select fr-select",o&&Array.isArray(o))for(var v=0;v<o.length;v++){var _=document.createElement("option");_.value=o[v],_.text=o[v],y.appendChild(_)}a.appendChild(y)}else{var C=document.createElement("input");if(C.id=t,C.className="GPadvancedSearchFilterInput gpf-input fr-input",C.type="text",C.name=t,o)if(Array.isArray(o)){var E=t+"_list";C.setAttribute("list",E);var S=document.createElement("datalist");S.id=E;for(var v=0;v<o.length;++v){var _=document.createElement("option");_.value=o[v],S.appendChild(_)}a.appendChild(S)}else C.value=o;a.appendChild(C)}return e=document.getElementById(this._addUID(s)),e?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Résultats de la recherche",e.appendChild(t);var i=document.createElement("button");i.id=this._addUID("GPgeocodeResultsClose"),i.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Fermer la fenêtre de résultats",i.addEventListener?i.addEventListener("click",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",i.appendChild(r),e.appendChild(i),e},_createGeocodeResultsListElement:function(){var n=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),n.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),n.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(n,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),i=document.createElement("div");i.id=this._addUID("GeocodedLocation_"+e),i.className="GPautoCompleteProposal gpf-panel__items",typeof n=="string"?i.innerHTML=n:i.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(n),t.appendChild(i)},_createCoordinateSearchPanelHeaderElement(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnées",e.appendChild(t);var i=document.createElement("button");i.id=this._addUID("GPcoordinateSearchClose"),i.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Fermer la recherche par coordonnées",i.addEventListener?i.addEventListener("click",function(){var s="#GPsearchInput-"+n._uid;document.querySelector(s+" input").disabled=!1,document.querySelector(s+" .GPsearchInputReset")&&(document.querySelector(s+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),n.onCoordinateSearchClose()},!1):i.attachEvent&&i.attachEvent("onclick",function(){var s="#GPsearchInput-"+n._uid;document.querySelector(s+" input").disabled=!1,document.querySelector(s+" .GPsearchInputReset")&&(document.querySelector(s+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),n.onCoordinateSearchClose()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",i.appendChild(r),e.appendChild(i),e},_createCoordinateSearchPanelFormElement(){var n=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),n.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var n=document.createElement("div");return n.className="GPflexInput gpf-flex-column ",n},_createCoordinateSearchSystemsLabelElement(){var n=document.createElement("label");return n.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",n.innerHTML="Système de référence",n},_setCoordinateSearchSystemsSelectElement(n){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un système de réference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onCoordinateSearchSystemChange(o)});for(var i=0;i<n.length;i++){var r=n[i],s=document.createElement("option");s.value=r.code,s.text=r.label||i,t.appendChild(s)}return t},_createCoordinateSearchUnitsLabelElement(){var n=document.createElement("label");return n.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",n.innerHTML="Unités",n},_setCoordinateSearchUnitsSelectElement(n){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unité",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onCoordinateSearchUnitsChange(o)});for(var i=0;i<n.length;i++){var r=n[i],s=document.createElement("option");s.value=r.code?r.code:i,s.text=r.label||i,t.appendChild(s)}return t},_setCoordinateSearchLngLabelElement(n){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=n==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(n){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",n){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var n=document.createElement("div");return n.id=this._addUID("GPcoordinateSearchLngDMS"),n.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,n},_setCoordinateSearchLatLabelElement(n){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=n==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(n){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",n){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var n=document.createElement("div");return n.id=this._addUID("GPcoordinateSearchLatDMS"),n.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,n},_createCoordinateSearchSubmitElement(){var n=document.createElement("input");return n.type="submit",n.id=this._addUID("GPcoordinateSearchSubmit"),n.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",n.value="Chercher",n}},logger$t=LoggerByDefault.getLogger("searchengine"),SearchEngine=class zn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof zn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$t.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterVectortiles&&Search$1.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search$1.updateFilterByTMS()),Search$1.target.addEventListener("suggest",i=>{logger$t.debug(i),this._fillSearchedSuggestListContainer(i.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle;this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var i=e.resources.geocode;if(i)if(Array.isArray(i)){var r=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<i.length;t++)r.indexOf(i[t])===-1&&logger$t.log("[SearchEngine] options.resources.geocode : "+i[t]+" is not a resource for geocode")}else logger$t.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),i=null;var s=e.resources.autocomplete;if(s)if(Array.isArray(s)){var o=["StreetAddress","PositionOfInterest"];for(t=0;t<s.length;t++)o.indexOf(s[t])===-1&&logger$t.log("[SearchEngine] options.resources.autocomplete : "+s[t]+" is not a resource for autocomplete")}else logger$t.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),s=null}else logger$t.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$t.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$t.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var i=0;i<t.length;i++){var r=t[i];this._setSystem(r)}if(this._coordinateSearchSystems.length===0)for(var s=0;s<e.length;s++)this._setSystem(e[s])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var i in e)if(e.hasOwnProperty(i)){for(var r=!1,s=0;s<e[i].length;s++)for(var o=e[i][s],a=0;a<t.length;a++){var d=t[a];o.code===d&&(r=!0,this._coordinateSearchUnits[i]||(this._coordinateSearchUnits[i]=[]),this._coordinateSearchUnits[i].push(o))}r||(this._coordinateSearchUnits[i]=e[i])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(i),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),i=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(i),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var r=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&r.appendChild(this._createSearchResetElement());var s=this;r.addEventListener?r.addEventListener("click",function(){s.onAutoCompleteInputClick()}):r.attachEvent&&r.attachEvent("onclick",function(){s.onAutoCompleteInputClick()}),t.appendChild(r);var o=this._createButtonsElement(),a=this._createFirstLineWrapper();if(a.appendChild(t),a.appendChild(o),e.appendChild(a),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var d=this._createRadioContainer();e.appendChild(d)}if(checkDsfr()&&this.options.splitResults){var y;[y,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),d.appendChild(y)}if(this.options.displayButtonAdvancedSearch){var v=this._createShowAdvancedSearchElement();d.appendChild(v);var _=this._createAdvancedSearchPanelElement(),C=this._createAdvancedSearchPanelDivElement(),E=this._createAdvancedSearchPanelHeaderElement(),S=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),b=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var P=this._createAdvancedSearchFormInputElement();S.appendChild(b),S.appendChild(P),C.appendChild(E),C.appendChild(S),_.appendChild(C),e.appendChild(_)}if(this.options.displayButtonGeolocate){var x=this._createShowGeolocateElement();o.appendChild(x)}if(this.options.displayButtonCoordinateSearch){var T=this._createShowSearchByCoordinateElement();o.appendChild(T);var R=this._createCoordinateSearchPanelElement(),L=this._createCoordinateSearchPanelDivElement(),k=this._createCoordinateSearchPanelHeaderElement(),N=this._createCoordinateSearchPanelFormElement(),D=null;D=this._containerSystems=this.__createCoordinateSearchDivElement(),N.appendChild(D);var G=this._createCoordinateSearchSystemsLabelElement(),U=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);D.appendChild(G),D.appendChild(U),D=this._containerUnits=this.__createCoordinateSearchDivElement(),N.appendChild(D);var F=this._createCoordinateSearchUnitsLabelElement(),B=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);D.appendChild(F),D.appendChild(B),D=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),N.appendChild(D);var z=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Y=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);D.appendChild(z),D.appendChild(Y),D=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),N.appendChild(D);var X=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),q=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);D.appendChild(X),D.appendChild(q);var K=this._createCoordinateSearchSubmitElement();N.appendChild(K),L.appendChild(k),L.appendChild(N),R.appendChild(L),e.appendChild(R)}var ee=this._autocompleteContainer=this._createAutoCompleteElement(),te=this._createAutoCompleteListElement(),Oe=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),ie=this._containerResultsSuggest=this._createSearchedSuggestContainer();te.appendChild(Oe),te.appendChild(ie),ee.appendChild(te),e.appendChild(ee);var it=this._createGeocodeResultsElement(),oe=this._createGeocodeResultsDivElement();it.appendChild(oe);var ft=this._geocodedContainer=this._createGeocodeResultsListElement();return oe.appendChild(ft),e.appendChild(it),e}_setFilter(e){for(var t=this._filterContainer,i=!1,r=0;r<this._advancedSearchCodes.length;r++)if(this._advancedSearchCodes[r].id===e){i=!0;break}if(!i){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var s=this._advancedSearchFilters[e];if(!(!s||s.length===0)){for(var o=this._createAdvancedSearchFiltersTableElement(e,!0),a=0;a<s.length;a++){var d=this._createAdvancedSearchFiltersAttributElement(s[a]);o.appendChild(d)}return t.appendChild(o),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$t.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions.serviceOptions),Helper.assign(t,e);var i=this.options.resources.autocomplete;i&&Array.isArray(i)&&(t.type||(t.type=i)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$t.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var i=0;i<e.length;i++)this._createAutoCompletedLocationElement(e[i],i)}}}_fillSearchedSuggestListContainer(e){var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let i=0;i<e.length;i++){const r=e[i];this._createSearchedSuggestElement(r,i)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$t.log(e);var t={};Helper.assign(t,this.options.geocodeOptions.serviceOptions),Helper.assign(t,e);var i=this,r=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",s=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(s){var o=function(y){e.onSuccess.call(i,y),i.options.geocodeOptions.serviceOptions.onSuccess.call(i,y)};t.onSuccess=o}if(r){var a=function(y){e.onFailure.call(i,y),i.options.geocodeOptions.serviceOptions.onFailure.call(i,y)};t.onFailure=a}var d=this.options.resources.geocode;d&&(t.index||(t.index=d)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$t.log(t),Gp.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++)logger$t.log(e[i]),this._createGeocodedLocationElement(e[i],i);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var i=this.getMap().getView();i.setCenter(e),i.setZoom(t)}_setMarker(e,t){var i=this.getMap(),r=this;if(this._marker!=null&&(i.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,s.addEventListener?s.addEventListener("click",function(){r._onResultMarkerSelect(t)}):s.attachEvent&&s.attachEvent("onclick",function(){r._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,offset:[-25.5,-38],element:s,stopEvent:!1}),i.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),i=this.options.zoomTo,r=null;if(typeof i=="function"&&(logger$t.trace("zoom function"),r=i.call(this,e)),typeof i=="number"&&(logger$t.trace("zoom level"),r=i),typeof i=="string")if(i==="auto")logger$t.trace("zoom auto"),r=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$t.trace("zoom level parsing");var s=parseInt(i,10);isNaN(s)||(logger$t.trace("zoom parsing"),r=s)}Number.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d},(!r||r===""||!Number.isInteger(r))&&(logger$t.trace("zoom not found, current zoom..."),r=t.getView().getZoom());var o=t.minZoom,a=t.maxZoom;return r<o&&(logger$t.trace("zoom level min..."),r=o),r>a&&(logger$t.trace("zoom level max..."),r=a),logger$t.trace("zoom",r),r}_onResultMarkerSelect(e){var t=this.getMap(),i="";if(typeof e!="string")if(e.service==="GeocodedLocation"){i="<ul>";var r=e.location.placeAttributes;for(var s in r)r.hasOwnProperty(s)&&s!=="trueGeometry"&&s!=="extraFields"&&s!=="houseNumberInfos"&&s!=="_count"&&(i+="<li>",i+='<span class="gp-attname-others-span">'+s.toUpperCase()+" : </span>",i+=r[s],i+=" </li>");i+=" </ul>"}else e.service==="SuggestedLocation"?i=GeocodeUtils.getSuggestedLocationFreeform(e.location):i="sans informations.";else i=e;this._popupContent.innerHTML=i,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$t.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$t.error("crs not defined !");return}if(e.label||(logger$t.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$t.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$t.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var i=this._coordinateSearchSystems[t];e.crs===i.crs&&logger$t.info("crs '{}' already configured",i.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(){var e=this.getMap();Interactions.unset(e);var t=this._showSearchEngineButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),i=t.getProjection().getCode(),r=[e.coords.longitude,e.coords.latitude];if(i!=="EPSG:4326"&&(r=transform$1(r,"EPSG:4326",i)),isNaN(r[0])||isNaN(r[1])){this._setMarker();return}this._setPosition(r,10),this._displayMarker&&this._setMarker(r,"sans information")})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var i=[e,t],r=this.getMap().getView(),s=r.getProjection().getCode();if(s!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",s)),isNaN(i[0])||isNaN(i[1])){this._setMarker();return}this._setPosition(i,10),this._displayMarker&&this._setMarker(i,"sans information")}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var i=MathUtils.toInteger(t[0].value),r=MathUtils.toInteger(t[1].value),s=MathUtils.toInteger(t[2].value),o=t[3].options[t[3].selectedIndex].text;return!i||!r||!s||!o?void 0:MathUtils.dmsToDecimal(i,r,s,o)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var i=this.options.autocompleteOptions.triggerGeocode,r=this.options.autocompleteOptions.triggerDelay,s=this;this._requestAutoComplete({text:t,onSuccess:function(a){if(logger$t.log("request from AutoComplete",a),a){s._suggestedLocations=a.suggestedLocations,s._locationsToBeDisplayed=[];for(var d=0;d<s._suggestedLocations.length;d++){var y=s._suggestedLocations[d];y.position&&y.position.x===0&&y.position.y===0&&y.fullText?s._getGeocodeCoordinatesFromFullText(y,d):s._locationsToBeDisplayed.push(y)}s._fillAutoCompletedLocationListContainer(s._locationsToBeDisplayed),s._triggerHandler&&(clearTimeout(s._triggerHandler),s._triggerHandler=null,logger$t.warn("Cancel a geocode request !"))}},onFailure:function(a){s._clearSuggestedLocation(),logger$t.log(a.message),a.message==="No suggestion matching the search"&&i&&(s._triggerHandler&&(clearTimeout(s._triggerHandler),logger$t.warn("Cancel the last geocode request !")),s._triggerHandler=setTimeout(function(){logger$t.warn("Launch a geocode request !"),s._requestGeocoding({location:t,onSuccess:function(d){if(logger$t.log("request from Geocoding",d),d){s._locationsToBeDisplayed=[];for(var y=d.locations,v=0;v<y.length;v++){var _=y[v];_.fullText=GeocodeUtils.getGeocodedLocationFreeform(_),_.position={x:_.position.lon,y:_.position.lat},s._locationsToBeDisplayed.push(_)}s._fillAutoCompletedLocationListContainer(y)}},onFailure:function(d){logger$t.log(d.message)}})},r))}}),this.options.resources.search&&Search$1.suggest(t);var o=this.getMap();o.on("click",this._hideSuggestedLocation,this),o.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var i=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(r){logger$t.log("request from Geocoding (coordinates null)",r),r.locations&&r.locations.length!==0&&r.locations[0].position&&i._suggestedLocations&&i._suggestedLocations[t]&&(i._suggestedLocations[t].position={lon:r.locations[0].position.y,lat:r.locations[0].position.x},i._locationsToBeDisplayed.unshift(i._suggestedLocations[t]),i._fillAutoCompletedLocationListContainer(i._locationsToBeDisplayed))},onFailure:function(){i._suggestedLocations&&i._suggestedLocations[t]&&i._createAutoCompletedLocationElement(i._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger$t.log(t),logger$t.log(this._locationsToBeDisplayed[t]),!!t){var i=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],r={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},s=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(s),this._currentGeocodingLocation=s;var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",a));var d=this._getZoom(r);this._setPosition(i,d),this._displayMarker&&this._setMarker(i,r),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),i=null;try{var r=Search$1.getSuggestions()[t];if(!r)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var s=r.service,o=r.name,a=null;switch(s){case"WMS":a=new LayerWMS({layer:o});break;case"WMTS":a=new LayerWMTS({layer:o});break;case"TMS":a=new LayerMapBox({layer:o});default:break}if(a){var d=this.getMap();d.addLayer(a)}}}catch(y){i=y}this.dispatchEvent({type:"searchengine:search:click",suggest:r,error:i})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var i=this;this._requestGeocoding({query:t,onSuccess:function(r){if(logger$t.log("request from Geocoding",r),r){var s=r.locations;i._fillGeocodedLocationListContainer(s)}},onFailure:function(r){i._clearGeocodedLocation(),logger$t.log(r.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var i=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],r={service:"GeocodedLocation",location:this._geocodedLocations[t]},s=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(s);var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",a));var d=this._getZoom(this.options.zoomTo);this._setPosition(i,d),this._displayMarker&&this._setMarker(i,r),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger$t.log(e);var t=e.target.selectedIndex,i=e.target.options[t].value;i&&this._setFilter(i)}onGeocodingAdvancedSearchSubmit(e,t){if(logger$t.log(t),!(!t||t.length===0)){for(var i,r={},s=0;s<t.length;s++){var o=t[s];o.value&&(o.key==="section"&&(o.value=o.value.toUpperCase()),r[o.key]=o.value)}var a=document.getElementById("GPsearchInputText-"+this._uid);i=a.value,this._currentGeocodingCode==="CadastralParcel"&&(i="");var d=this;this._requestGeocoding({query:i,index:this._currentGeocodingCode,filters:r,onSuccess:function(y){if(logger$t.log(y),y){var v=y.locations;d._fillGeocodedLocationListContainer(v)}},onFailure:function(y){d._clearGeocodedLocation(),logger$t.log(y.message)}})}}_getCadastralParcelRequestParams(e){var t="",i,r=e.department;r?(i=r.length,i===2?t=r:i===1?t="0"+r:t=r.substring(0,2)):t="__";var s=e.commune;s?(i=s.length,i===3?t+=s:i===2?t+="_"+s:i===1?t+="__"+s:t+=s.substring(0,3)):t+="___";var o=e.insee;o&&o.length===5&&(t=o);var a=e.absorbedCity;a?(i=a.length,i===3?t+=a:i<3?i===2?t+="_"+a:i===1&&(t+="__"+a):t+=a.substring(0,3)):t+="___";var d=e.section;d?(i=d.length,i===2?t+=d:i===1?t+="_"+d:t+=d.substring(0,2)):t+="__";var y=e.number;return y?(i=y.length,i===4?t+=y:i===3?t+="_"+y:i===2?t+="__"+y:i===1?t+="___"+y:t+=y.substring(0,4)):t+="___",logger$t.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var r=null,s=0;s<this._coordinateSearchSystems.length;++s)if(this._coordinateSearchSystems[s].code===Number(i)){r=this._coordinateSearchSystems[s].type;break}if(!r){logger$t.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(i)],r!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=r,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[r][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[r])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=i,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var logger$s=LoggerByDefault.getLogger("draggable"),Draggable={dragElement:function(n,e,t){var i,r,s=!1,o={x:0,y:0};e?e.addEventListener("mousedown",a,!0):n.addEventListener("mousedown",a,!0);function a(v){v=v||window.event,v.preventDefault(),s=!0,v._pageX=v._pageX||v.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),v._pageY=v._pageY||v.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),o.x=v._pageX-n.offsetLeft,o.y=v._pageY-n.offsetTop,document.addEventListener("mouseup",d,!0),document.addEventListener("mousemove",y,!0)}function d(){s=!1,document.removeEventListener("mouseup",d,!0),document.removeEventListener("mousemove",y,!0)}function y(v){if(v=v||window.event,s){v._pageX=v._pageX||v.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),v._pageY=v._pageY||v.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);var _=t?t.offsetLeft:n.parentElement.offsetLeft,C=t?t.offsetTop:n.parentElement.parentElement.offsetTop;logger$s.trace("parent offset",_,C),v._pageX-o.x<0-_?i=0-_:v._pageX-o.x+n.clientWidth>document.body.clientWidth?i=document.body.clientWidth-n.clientWidth:i=v._pageX-o.x,logger$s.trace("left/right constraint",i),v._pageY-o.y<0-C?r=0-C:v._pageY-o.y+n.clientHeight>document.body.clientHeight?r=document.body.clientHeight-n.clientHeight:r=v._pageY-o.y,logger$s.trace("top/bottom constraint",r),n.style.top=r+"px",n.style.bottom="unset",n.style.left=i+"px",n.style.right="unset"}}}},MousePositionDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmousePosition"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowMousePositionPictoElement:function(n){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-position fr-btn",t.title="Afficher les coordonnées du curseur",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onShowMousePositionClick()}):t.attachEvent&&t.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onShowMousePositionClick()}),t},_createMousePositionPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPmousePositionPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createMousePositionPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createMapCenter:function(){var n=document.createElement("div");return n.id="GPmapCenter",n.className="",n},_createMousePositionPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",n.id=this._addUID("GPmousePositionHeaderTitle"),n.innerHTML="Coordonnées",n},_createMousePositionPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header fr-modal__header",n},_createMousePositionPanelCloseElement:function(){var n=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(i){i.keyCode===13&&document.getElementById(n._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(i){i.keyCode===13&&document.getElementById(n._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(n,e,t,i){n=typeof n>"u"?!0:n,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var r=document.createElement("div");return r.id=this._addUID("GPmousePositionBasicPanel"),r.classList.add("fr-mx-1w"),r.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,i)),r.appendChild(this._createMousePositionPanelEditToolsElement(t)),r.appendChild(this._createMousePositionPanelBasicAltitudeElement(n)),r},_createCoordinateElement:function(n,e){var t=this;if(["Lon","Lat"].indexOf(n)===-1)return[];var i=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+n),r.title=e===!0?"Cliquer pour saisir des coordonnées":"",r.readOnly=!0,e&&(r.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(o){this.classList.remove("error");var a=t.validateExtentCoordinate(n,this.value,o);a?this.classList.remove("error"):this.classList.add("error")})),i.push(r);var s=document.createElement("span");return s.className="GPmousePositionUnits",i.push(s),i},_createDMSCoordinateElement:function(n,e){if(["Lon","Lat"].indexOf(n)===-1)return[];var t=this,i=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+n+"Degrees"),r.className="GPSexagesimal",r.setAttribute("name","degrees"),r.title=e===!0?"Cliquer pour saisir des coordonnées":"",r.readOnly=!0,r.dataset.min=0,r.dataset.max=n==="Lon"?180:90,e&&(r.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(){this.classList.remove("error");var E=t._checkDMSDegrees(n,this);E?this.classList.remove("error"):this.classList.add("error")})),i.push(r);var s=document.createElement("span");s.className="GPmousePositionSexagesimalLabel",s.innerHTML="°",i.push(s);var o=document.createElement("input");o.id=this._addUID("GPmousePosition"+n+"Minutes"),o.className="GPSexagesimal",o.setAttribute("name","minutes"),o.title=e===!0?"Cliquer pour saisir des coordonnées":"",o.readOnly=!0,o.dataset.min=0,o.dataset.max=59,e&&(o.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),o.addEventListener("change",function(){this.classList.remove("error");var E=t._checkDMSElement(this);E?this.classList.remove("error"):this.classList.add("error")})),i.push(o);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",i.push(a);var d=document.createElement("input");d.id=this._addUID("GPmousePosition"+n+"Seconds"),d.className="GPSexagesimalsec",d.setAttribute("name","seconds"),d.title=e===!0?"Cliquer pour saisir des coordonnées":"",d.readOnly=!0,d.dataset.min=0,d.dataset.max=59,e&&(d.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),d.addEventListener("change",function(){this.classList.remove("error");var E=t._checkDMSElement(this,!0);E?this.classList.remove("error"):this.classList.add("error")})),i.push(d);var y=document.createElement("span");y.className="GPmousePositionSexagesimalLabel",y.innerHTML="''",i.push(y);var v=document.createElement("select");v.id=this._addUID("GPmousePosition"+n+"Direction"),v.className="GPmousePositionDirection",v.setAttribute("name","direction"),v.disabled=!0;var _=document.createElement("option");_.value=n==="Lon"?"E":"N",_.innerHTML=n==="Lon"?"E":"N",v.appendChild(_);var C=document.createElement("option");return C.value=n==="Lon"?"O":"S",C.innerHTML=n==="Lon"?"O":"S",v.appendChild(C),i.push(v),i},_createMousePositionPanelBasicCoordinateElement:function(n,e,t){var i=document.createElement("div");i.id=this._addUID("GPmousePositionCoordinate"),i.style.display=n?"block":"none";var r=document.createElement("div");r.classList.add("fr-mb-1w");var s=document.createElement("span");s.className="GPmousePositionLabel",s.id=this._addUID("GPmousePositionLatLabel"),s.innerHTML="Latitude : ",r.appendChild(s);var o=document.createElement("span");o.id=this._addUID("GPmousePositionLatCoordinate");var a;t==="DMS"?a=this._createDMSCoordinateElement("Lat",e):a=this._createCoordinateElement("Lat",e);for(var d=0;d<a.length;d++)o.appendChild(a[d]);r.appendChild(o),i.appendChild(r);var y=document.createElement("div");y.classList.add("fr-mb-1w");var v=document.createElement("span");v.className="GPmousePositionLabel",v.id=this._addUID("GPmousePositionLonLabel"),v.innerHTML="Longitude : ",y.appendChild(v);var _=document.createElement("span");_.id=this._addUID("GPmousePositionLonCoordinate");var C;t==="DMS"?C=this._createDMSCoordinateElement("Lon",e):C=this._createCoordinateElement("Lon",e);for(var E=0;E<C.length;E++)_.appendChild(C[E]);return y.appendChild(_),i.appendChild(y),i},_createMousePositionPanelBasicAltitudeElement:function(n){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=n?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var i=document.createElement("span");i.className="GPmousePositionCoords",i.id=this._addUID("GPmousePositionAlt"),i.innerHTML="...",e.appendChild(i);var r=document.createElement("span");return r.className="GPmousePositionAltitudeUnits",r.innerHTML="m",e.appendChild(r),e},_createMousePositionPanelEditToolsElement:function(n){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),n||(t.style.display="none");var i=document.createElement("span");i.className="GPmousePositionEditTool",i.id=this._addUID("GPmousePositionLocate"),i.title=n===!0?"Cliquer pour saisir des coordonnées":"",n&&i.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(i);var r=document.createElement("span");return r.className="GPmousePositionEditTool",r.id=this._addUID("GPmousePositionCloseEdit"),r.title="Quitter la saisie des coordonnées",r.style.display="none",n&&r.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(r),t},_createShowMousePositionSettingsElement:function(n){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-icon-arrow-down-fill",t.title="Réglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.addEventListener?t.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onShowMousePositionSettingsClick(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r),e.onShowMousePositionSettingsClick(i)}),t},_createMousePositionSettingsElement:function(n){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=n===void 0||n?"block":"none",e.classList.add("fr-m-1w");var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Système de référence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(n){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",t.addEventListener("change",function(o){e.onMousePositionProjectionSystemChange(o)}),t.addEventListener("mouseover",function(o){o.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(o)}),t.title="Type de système";for(var i=0;i<n.length;i++){var r=n[i],s=document.createElement("option");s.value=r.code,s.text=r.label||i,t.appendChild(s)}return t},_createMousePositionSettingsUnitsElement:function(n){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onMousePositionProjectionUnitsChange(o)}),t.title="Unités du système";for(var i=0;i<n.length;i++){var r=n[i],s=document.createElement("option");s.value=r.code?r.code:i,s.text=r.label||i,t.appendChild(s)}return t},_resetLabelElements:function(n){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=n==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=n==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(n){var e="";(n==="M"||n==="KM")&&(e=n.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),i=0;i<t.length;i++)t[i].innerHTML=e},_resetCoordinateElements:function(n,e,t){for(var i=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));i.firstChild;)i.removeChild(i.firstChild);var r;t==="DMS"?r=this._createDMSCoordinateElement("Lat",n):r=this._createCoordinateElement("Lat",n);for(var s=0;s<r.length;s++)i.appendChild(r[s]);for(var o=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));o.firstChild;)o.removeChild(o.firstChild);var a;t==="DMS"?a=this._createDMSCoordinateElement("Lon",n):a=this._createCoordinateElement("Lon",n);for(var d=0;d<a.length;d++)o.appendChild(a[d])},_setEditMode:function(n){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=n?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=n?"inline-block":"none";for(var i="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",r=document.querySelectorAll(i+" input"),s=0;s<r.length;s++)r[s].readOnly=!n,n&&(r[s].value="",r[s].classList.remove("error"));for(var o=document.querySelectorAll(i+" select"),a=0;a<o.length;a++)o[a].disabled=!n},_checkDMSElement:function(n,e){var t=e!==void 0,i=n.value;if(t&&(i=i.replace(",",".")),isNaN(i))return!1;var r=parseFloat(i);if(!t&&(r|0)!==r)return!1;var s=Number(n.dataset.min),o=Number(n.dataset.max);return r>=s&&r<=o},_checkDMSDegrees:function(n,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var i=Number(e.dataset.min),r=Number(e.dataset.max);if(t<i||t>r)return!1;var s=document.getElementById(this._addUID("GPmousePosition"+n+"Minutes")),o=document.getElementById(this._addUID("GPmousePosition"+n+"Seconds"));return t>=r?(s.dataset.max=0,o.dataset.max=0):(s.dataset.max=59,o.dataset.max=59.9999),!0},GPdisplayCoords:function(n){if(n){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(n.x||n.y?(t.innerHTML="X : ",e.innerHTML="Y : "):n.e||n.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof n.lat=="object"&&typeof n.lng=="object"){var i={lng:"Lon",lat:"Lat"},r=["Degrees","Minutes","Seconds"];for(var s in i)for(var o=0;o<r.length;++o){var a="GPmousePosition"+i[s]+r[o],d=document.getElementById(this._addUID(a)),y=r[o].charAt(0).toLowerCase();d.value=n[s][y]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=n.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=n.lat.direction}else{var v=document.getElementById(this._addUID("GPmousePositionLat")),_=document.getElementById(this._addUID("GPmousePositionLon"));v.value=n.x||n.lat||n.e||"0",_.value=n.y||n.lng||n.lon||n.n||"0",v.title="Latitude",_.title="Longitude",v.type="number",_.type="number";for(var C=n.unit===void 0?"":n.unit,E=document.getElementsByClassName("GPmousePositionUnits"),S=0;S<E.length;++S)E[S].innerHTML=C}}},GPdisplayElevation:function(n,e,t,i){var r=this,s;e||(e=500),clearTimeout(s),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),i==null&&(i=99980);var o=t+i,a=t-i;n&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(s=setTimeout(function(){r.onRequestAltitude(n,function(d){a<d&&d<o?r.GPresetElevation():document.getElementById(r._addUID("GPmousePositionAlt")).innerHTML=d})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$r=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Hn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Hn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var t=this._initContainer(this.options);return this.element?this.element.appendChild(t):this.element=t,this}setMap(e){var t=this;if(e){var i=this._createMapCenter();if(e.getViewport().appendChild(i),!this.collapsed&&!this._isDesktop&&(i.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderMousePositionContainer,this.options.position?null:e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",o=>{this.onMouseMove(o)}):this.listenerKey=e.on("moveend",o=>this.onMapMove(o)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var r=document.createElement("img");r.id=this._addUID("GPmousePositionMarker"),r.src=this._markerUrl,r.title="Cliquer pour supprimer",r.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:r,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),!this.collapsed)){var s=document.getElementById("GPshowMousePosition-"+this._uid);s.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$r.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$r.error("crs not defined !");return}if(e.label||(logger$r.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$r.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$r.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var i=this._projectionSystems[t];e.crs===i.crs&&logger$r.info("crs '{}' already configured",i.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var r=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(r){var s=document.createElement("option");s.value=e.code,s.text=e.label,r.appendChild(s)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$r.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){logger$r.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),i=null,r=0;r<this._projectionSystems.length;r++){var s=this._projectionSystems[r];if(e===s.crs){i=s.code,this._projectionSystems.splice(r,1);break}}if(i==null){logger$r.log("[WARN] MousePosition:removeSystem - system not found");return}for(var o=[],a=0;a<this._projectionSystems.length;a++)o[Number(this._projectionSystems[a].code)]=a,this._projectionSystems[a].code=a;for(var d=null,y=0;y<t.childNodes.length;y++){if(i===t.childNodes[a].value){d=y;continue}t.childNodes[a].value=o[Number(t.childNodes[a].value)]}d!=null&&t.removeChild(t.childNodes[d]),this._currentProjectionSystems.code===Number(i)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$r.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$r.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[t]!==void 0?Marker[t]:Marker.lightOrange:this._markerUrl=t:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,i=0;i<t.length;i++){var r=t[i];this.addSystem(r)}if(this._projectionSystems.length===0)for(var s=0;s<e.length;s++)this.addSystem(e[s])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"radians",format:MathUtils.coordinateToRad},{code:"GON",label:"grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.units;for(var i in e)if(e.hasOwnProperty(i)){for(var r=!1,s=0;s<e[i].length;s++)for(var o=e[i][s],a=0;a<t.length;a++){var d=t[a];o.code===d&&(r=!0,this._projectionUnits[i]||(this._projectionUnits[i]=[]),this._projectionUnits[i].push(o))}r||(this._projectionUnits[i]=e[i])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],i=0;i<t.length;++i)if(t[i].code===this._currentProjectionUnits){e.push(t[i].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var i=this._panelMousePositionContainer=this._createMousePositionPanelElement(),r=this._createMousePositionPanelDivElement();i.appendChild(r);var s=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),o=this._panelTitleContainer=this._createMousePositionPanelTitleElement();s.appendChild(o);var a=this._panelCloseButton=this._createMousePositionPanelCloseElement();s.appendChild(a),r.appendChild(s);var d=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);r.appendChild(d);var y=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);r.appendChild(y);var v=this._createMousePositionSettingsElement(),_=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),C=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return v.appendChild(_),v.appendChild(C),r.appendChild(v),e.appendChild(i),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),i=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",i.style.display=""):(t.style.display="none",i.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var i=this._projectionUnits[e],r=0;r<i.length;r++){var s=i[r],o=document.createElement("option");o.value=s.code?s.code:r,o.text=s.label||r,t.appendChild(o)}var a=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||a==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,a),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(a),this._currentProjectionUnits=a}_setCoordinate(e,t){var i={},r=this._currentProjectionSystems.crs;if(!r){logger$r.log("ERROR : system crs not found");return}e=transform$1(e,t,r);for(var s=this._currentProjectionSystems.type,o=null,a=this._projectionUnits[s],d=0;d<a.length;d++)if(a[d].code===this._currentProjectionUnits){o=a[d].format;break}if(!o||typeof o!="function"){logger$r.log("WARNING : coordinates format function not found");return}else i=o(e);!i||Object.keys(i).length===0||this.GPdisplayCoords(i)}_setElevation(e){var t=this.options.altitude.responseDelay,i=this.options.altitude.noDataValue,r=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,i,r)}onMoveStopped(e,t){var i=transform$1(e,t,"EPSG:4326");this._setElevation(i)}onMouseMove(e){var t=this,i=e.coordinate;if(!(!e.map||!e.map.getView())){var r=e.map.getView().getProjection();this._setCoordinate(i,r),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(i,r)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var i=t.getView(),r=i.getCenter(),s=i.getProjection();this._setCoordinate(r,s),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(r,s)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var i=this.options.altitude.serviceOptions||{},r=i.protocol||"XHR",s=i.timeOut||0;r==="JSONP"&&s===0&&(s=15e3);var o=i.outputFormat||"json",a=!0,a;i.zonly===!1?a=i.zonly:a=!0;var d=i.measures||!1,y=[{lon:e[0],lat:e[1]}],v=i.resource,_=this,C=i.rawResponse||!1,E=i.onSuccess||null,S=null,b=null;C?S=function(T){E&&E.call(this,T),logger$r.log("alti service raw response : ",T)}:S=function(T){T&&Object.keys(T).length&&(E&&E.call(this,T),t.call(this,T.elevations[0].z))},b=function(T){logger$r.log("[getAltitude] ERROR : "+T.message)};var P=i.apiKey||this.options.apiKey;typeof i.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?i.ssl=this.options.ssl:i.ssl=!0);var x=i.ssl;Gp.Services.getAltitude({apiKey:P,protocol:r,ssl:x,timeOut:s,scope:_,outputFormat:o,rawResponse:C,onSuccess:S,onFailure:b,zonly:a,measures:d,resource:v,positions:y})}}onShowMousePositionClick(){var e=this.getMap();Interactions.unset(e);var t=this._showMousePositionButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),t==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=e.on("pointermove",i=>{this.onMouseMove(i)}):(this.listenerKey=e.on("moveend",i=>this.onMapMove(i)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("pointermove",i=>{this.onMouseMove(i)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("moveend",i=>this.onMapMove(i)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),i=t.value;if(!i||(i=i.replace(",","."),!MathUtils.isInteger(i)))return null;var r=MathUtils.toInteger(i);if(r<Number(t.dataset.min)||r>Number(t.dataset.max))return null;var s=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,o=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),a=o.value;if(a&&(a=a.replace(",","."),MathUtils.isInteger(a))){var d=MathUtils.toInteger(a);d>=Number(o.dataset.min)&&d<=Number(o.dataset.max)&&(r+=d/60)}var y=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),v=y.value;if(v){v=v.replace(",",".");var _=MathUtils.toFloat(v);_&&_>=Number(y.dataset.min)&&_<=Number(y.dataset.max)&&(r+=_/3600)}return(s==="O"||s==="S")&&(r=-r),r}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){logger$r.log("ERROR : system crs not found");return}var i=this.getMap().getView(),r=transform$1(e,t,i.getProjection());i.setCenter(r),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(r)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=MathUtils.toFloat(t),t!==null){var i=this._currentProjectionSystems.crs;if(!i){logger$r.log("ERROR : system crs not found");return}var r;this._currentProjectionSystems.type==="Geographical"?r=[this.convert(e),this.convert(t)]:r=[this.convert(t),this.convert(e)];var s=transform$1(r,this._currentProjectionSystems.crs,"EPSG:4326"),o=this._currentProjectionSystems.geoBBox;if(o){var a=[o.left,o.bottom,o.right,o.top];if(s[0]<a[0]||s[0]>a[2]||s[1]<a[1]||s[1]>a[3])return}var d=this.getMap().getView(),y=transform$1(r,i,d.getProjection());d.setCenter(y),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(y)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),i=t.getCenter();e.call(this,i)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value;this._setCurrentSystem(i)}_setCurrentSystem(e){for(var t=null,i=0;i<this._projectionSystems.length;++i)if(this._projectionSystems[i].code===Number(e)){t=this._projectionSystems[i].type;break}if(!t){logger$r.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$r.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var i=t.getView(),r=i.getProjection(),s=i.calculateExtent(t.getSize());s=transformExtent(s,r,"EPSG:4326");var o=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));o.innerHTML="";for(var a=0;a<this._projectionSystems.length;a++){var d=this._projectionSystems[a],y=null;if(d.geoBBox&&(s[0]>d.geoBBox.right||s[1]>d.geoBBox.top||s[2]<d.geoBBox.left||s[3]<d.geoBBox.bottom)){d===this._currentProjectionSystems&&(y=document.createElement("option"),y.value=d.code,y.text=d.label||a,y.setAttribute("selected","selected"),y.setAttribute("disabled","disabled"),o.appendChild(y));continue}var v=document.createElement("option");v.value=d.code,v.text=d.label||a,d===this._currentProjectionSystems&&v.setAttribute("selected","selected"),o.appendChild(v)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value,r=this._currentProjectionUnits;this._currentProjectionUnits=i,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(r==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var i=(180/Math.PI).toFixed(20);t=(e*i).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var r=.9.toFixed(20);t=(e*r).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var i=t.replace(",",".");if(i=MathUtils.toFloat(i),i===null)return!1;i=this.convert(i);var r=this._currentProjectionSystems.geoBBox;if(r===void 0)return!0;var s=[r.left,r.bottom,r.right,r.top];return s=transformExtent(s,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(i<s[0]||i>s[2])||e==="Lon"&&(i<s[1]||i>s[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_portail:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD//////////////////////////////////////////////////////////fv/+fL//////////////////////////////////////////////////////////////////////////////////////v7//////fr/////+vL//////////////////Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////9+v/9ej/9+z/7tT/3q3/y3//v2D/uU//+O7/5L3/xW//piH/mQH/mAD//v7/79f/yXj/oxr/lwD/mQD//fv/58T/tkr/mQL//v3/58P/sTz/79b/tUf/x3X/mQP/5Lv/oRX/ng3/s0H/w2n/u1b/4rf/8Nr/9eb/7tX/pBv/x3P/8d7/3av/79j///7/zH//mgX/2qP//vz/9+3/wGH/qyz/6Mb/vFj/sj//7NH/wGL/rTP/6sr/+fH/yXf/oBP/37H/2aH/6sz/nw//oBT/0pD/+vT/9OX/uE7/pB3/y33/7ND//Pj/26b/mwj/nAn/sT7/w2r/zYL/8+P/ulT/mwb/5Lz/qCj/+/b/1JT/nQz/nQ3/9uj/w2j/mAH/9un/6sv/skH/lwH/3Kf/pB7/pR7/3Kj/nAj/y37/+/f/8t//mQT/rDD/rDH/1JX/7tb/4LT/pR//z4j/z4n/vFn/7dP/4rn//fq31ydlAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKnVAysoAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDM6MjIrMDA6MDB1WI3HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACplBMVEUAAAD//////////////////////////////////////////////////////////fz/9/P//////////////////////////////////////////////////////////////////////////////////////v7//////Pr/////////////////////+/n//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////8+3/8er/9O7/5dj/zrX/s4z/oHH/lmL/9fD/2MT/qX7/ejj/Zxz/Zhn/Zhr//v7/59z/rof/djL/ZBf/Zxv//fz/3Mr/k13/aBz/ZRn//f3/i1D/5tr/kVr/ZRj/rIP//v3/1sL/cy3/byf/jVX/pnn/aB3/mmf/077/6d7/8On/5tn/dzT/q4H/6+H/zbP/lmH/s43/ah//yK3/9O//oXL/gUP/3cz/m2n/jVT/5Nb/onP/hkn/4ND/9vL/rob/cSv/0Ln/x6r/Zxr/Yxb/pXn/8+7/4NH/cCj/ciz/vZz/+PX/7+f/lWH/eDT/sov/49X/+/n/ya//ayH/bCP/jFL/pnr/tJD/7ub/mWb/ZBb/aiD/18P/fj3/+vf/vp//bSX/bib/v5//pXj/8uv/yrD/eDX/eTb/y7H/bCL/soz/7OL/18T/g0b/hEb/v6D/cy7/wKH/9vP/5tv/jlX/59v/0rz/ejf/uJX/nGr/aR//nGv/g0X/1cD//PvyoJNrAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0JJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVaivrygrLUUBhWV1lrYK8HNAALp6k+oZGNHmgisaG+iQeLkYGQXHF1KZ8mO2NZWUwtYX5TamK4oIMXErNLa0FEKGatvbMzPa2GoiSgtaWZiUuBmWV5I5GiHxnV3dPb29Pd1cnREVjR7KKMoOqWl9/IcTICROLkoCgaOIEiJWF/X1qqgzqGpPA3MKyycVgeaCK4slgTxXmT9JQZ9AUmAJRPnVaRRIUVEybChGbIqDJoDV9BpjTOHNWEhzMmgl2VuGM6VoMScmzwQrK5sxFKJg7pwysYHZyEoP29HkQE+YvQChYMB9iwrzp2gw6CxeBFRQsXlIEky9ashgcMoWLFuow6OotBXOWLV+xEqZg5Yrly8CalurpMugbrFoNMWLN2nUQ+XVr10AMWL3KQJ/B0Gj9BkhINm7ctBkkv3nTRqjAhvVGhgzGJlu2boMG7fYdO3ft2rljOzTot23dYmLMYGqmvXvPXmgE7i3bt69sLzQ69+7ZrW1mysBpblGx/0AjLLGBAITdeGB/hYU5JwOjpaHVwUOHMRPMkaMHrQwtgWmO0dpGO+VYAXqSK+g4bmtnDU61nPYOjgvaURNdYWP7Kkcne05Ispdzdqk4cbIGSUVhzanTFa7OcrCMIejmfnDTmQKEgoIzZw+6eyCyFqenl/e5PeVwIwrL95zz9vLkRMqcPr5J5y/AHFpYcPG8qK8Pavb2k026dBkaGo2XryTJ+qPIMzAE2KlcXbEN7IyCbR1XVQIDUOUZGIOC+a61VwMtKay+foMvJAjNAKCK0LCkm7dAIX3rZlJYOIY8UIVkRMXtI4WFR25XREhikQcGeWRU8p27d+8lR0VaY1MAdEa0bdr9+2m20UFY5YEqYmJrHzyojY3BIQ+M+bj4hw/j4yxxKQA6IyExMQHVAQBpWLIaKI0lIgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MDYrMDA6MDAh7rXQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+/v/8vL//////////////////////////////////////////////////////////////////////////////////////v7/////+vr/////////////////////+Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////6+v/6Oj/7Oz/1NT/ra3/f3//YGD/T0//7u7/vb3/b2//ISH/AQH/AAD//v7/19f/eHj/Ghr/+/v/xMT/Skr/AgL//f3/w8P/PDz/1tb/R0f/dXX/AwP/u7v/FRX/DQ3/QUH/aWn/Vlb/t7f/2tr/5ub/1dX/Gxv/c3P/3t7/q6v/2Nj/BQX/o6P//Pz/7e3/YWH/LCz/xsb/WFj/Pz//0dH/YmL/MzP/ysr/8fH/d3f/ExP/sbH/oaH/zMz/Dw//FBT/kJD/9PT/5eX/Tk7/HR3/fX3/0ND/+Pj/pqb/CAj/CQn/Pj7/amr/goL/4+P/VFT/Bgb/vLz/KCj/9vb/lJT/DAz/aGj/6en/y8v/p6f/Hh7/qKj/fn7/9/f/39//BAT/MDD/MTH/lZX/tLT/Hx//iIj/iYn/WVn/09P/ubn/+vpgzcAPAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo0NDoxOSswMDowMBsMxacAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUAAAD//////////////////////////////////////////////////////////P3/9Pn//////////////////////////////////////////////////////////////////////////////////////v7/////+/3/////9fr/////////////////+vz//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////7/f/7PX/8Pf/3O7/vd7/mcv/gL//c7n/8fj/yuT/jMX/Tab/NJn/MZj/Mpj//v7/3+//k8n/R6P/L5f/M5n//P3/0Of/brb//f7/z+f/Y7H/MJf/bLX/kcf/yeT/Q6H/PZ7/ZrP/h8P/d7v/xeL/4fD/6/X/3e7/SaT/j8f/5PH/u93/crn//v//mMz/N5r/tdr/gcD/Vqv/0ej/ebz/ZrL/2uz/gsD/XK3/1er/8/n/ksn/QaD/wN//tNn/1ur/P5//QqD/ptL/9vr/6vT/cbj/l8v/+vz/t9v/OJv/Opz/ZLH/iMP/m83/6fP/d7r/N5v/Uqj/Mpn/+Pv/qdT/PJ3/7fb/Z7L/uNz/SqT/S6X/udz/OZz/mMv/5fL/drr/Waz/Wqz/qtT/RKH/q9T/9Pn/3u7/Z7P/w+D/TKX/oM//PZ3/erz/Npr/3O3/x+L/+/0F2pMDAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM4SURBVDjLdZNnWxNBFIVnEZGEGpBeROkSuoIUwS4KFkTFQp+wFEWzk+AmEFhEDBZQlA5ioxcRsCDYELADSvlBbnY2kACeTztz3r1znztnAOBEEAYbDDcabTKG0HiT0UbDDQYEAXRECIQmpmbmFpaS7GyJpYW5mamJUKBDECIr6802ZE5uXv6lS/l5uTmkzWZrK9EyQdja2cPLBVeuSinEipJevVJwGdrb2RJa38FRJi+8RiOk4IQQfa1QLnN0wATh5OyiLCqWUgodUdLiIqWLs5OGcN3ipiopZZBCT4gpLVG5bXFlCwhNobxsta8hyuTQVEgAkd1W8rpUezrDSvstvU5utRMB4TZV+Q18PqIqbubn36ygMELdKFdtEwJ3D4ma4X+pvHX7zp3btyr5goxa4uEOPL3uViHsV9+TQVaye9WYQFV3vTyBt899bomYGvkDyOmBvIZrBEnv+3gD3+0PMV5bp4K8VHW1eO/hdl/gR9ZzC6ahES6rsYFrC9WTfgBKmjiAbm5ZAVqaaQ5okkAgJltxhUdtK0DbI1yhlRQD/8dPOIB6+kym9WXPnnKTQU8e+4OAwOe4IVpNagFSTeO954EBICi4vQOvOru6sd/d1Yl3OtqDg0BIaE8vnjRT1dfCniJr6avCo6V6e0JDwI6d/QMv+NEOvhwaHh56OciP/sVA/84dICxcPPKK5i+Qpl+/pmn+OulXI+LwMCDYFaEsf8PH6a0mk2/5UL0pV0bsEgAiMiRq9N3Y2sCMvRuNColkM0dE7xaPq6nVkaPU4zGx0VxqBXv27mtr1g8dYt637du/R4Bj73rgoPLDR90aiPr0WXnogKv2YYgOx432Tejknhr8Mhp3ZOVpCY7GJ0xOKZZLIMXUZEL8UYHO4zx2HBZMaw9B1NcCm+PH9J/3CRf47Tt/CPX9B3Q5qecDkBjr8VON26Amhn56nErU9wGRdNr8129NfJH0t9z8TNKqAixxNhnOzGpGPTsDk8+t8VnC4bxybgyhP3PK8w7r+OzIL1yU/J2f/yu5eCF6PYBtIyVmYXp6ISYlaV2fJVLTVIuLqrTU//jszadnLC1lpEf+D2DbyMzKytRv4B+n7ayGbXJj1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MjkrMDA6MDCVg8JEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACslBMVEUAAAD////////////////////////////////////////////////////////+/fz79/T////////////////////////////////////////////////////////////////////////////////////+/v7////9/Pv////79/X////////////////9+/r////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////58+/48ez69PDz5dzpzr3cspnUoIDQlXP69PHt18rYqIzDeU27ZjS6ZTG6ZTL+/v7059/brpPCdUe6Yy+7ZjP+/fzv29DOkm67ZzS6ZDH+/f3v28/LiWO6YzD05t/OkGy6ZDDarJH+/v3t1snAckO+bj3MjWbUn4DXpYfRmXfr08X16eH48Ovz5t3CdknZqo/26+TozLvQlXL//v7dspi8aTfmyLXUoIHGgFbv3NHSm3m5Yy/LjGby49rVoYLIhVzx39X79vPbrZK/cEHq0MDmxrS6ZjK5Yi/58/Dx4Na+bz/AcULhvab8+Pb47+rPlHHCd0ncsZf9+/rnybe9aji9azrLi2TXpojdtJv37unt18nFfVK7ZTL8+vjivqm+bTziv6n58e3WpIfWpYfx4NXMjWfnyrjCd0rDeEvoyrm9azncsZj27OXRmHbHg1nIg1rt2Mriv6rAckTjwKv79vS8ajm9ajnXpYj05t7r0sPDeUzfuKC+bT3Sm3q8aTbIglns1cf9/Pua7OXrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANISURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlRUUVYFBUVF5WWlIsJQlRwSgtI1tZVV1TW4EEamuqqyplZaRBKuTkFerqGxqLKlBAUWNDfZ2CvBzQAC6e5KbmFjR5oIqW5qZkHi5GBkFxxbTWApjtLY2NMLVFBa1piuKCDFxKbe0dhRCh2s6u7u6uzlqIksKO9jYlLgZllZSeFoh8TW9f/4QJ/X29NRAVLT0pKsoMqmoTJxVBjJw8pTgZCIqnTIZYWTRpopoqg7rGVDC3qHFayfRkMJheMg3sqaKCqRrqDJpaMyDKZ86qS4aCulkzIWIztDQZtNNmgzktc+Ymw8HcOWBnFc1O02ZITpkHVjB/wUKEgoUL5oMVzEtJZtBJWwQxYfEShIIliyEmLErTYdBdugysoHD5imKYfPGK5eCQKVq2VJdBT38lWMGq1T1rYArW9KxeBVawUl+PwcBw7TqIk9dv2AiR37hhPURk3VpDAwYj402bITHdsmXrQqAtxQu3boEEbe3mTcZGDCam27bvgAbtzl279+zZvWsnNOh3bN9masJgZq6zt3c+NALnz585c/58aHTO792rY27GwGlhWblvPzQ5HQClyQPQRLV/X6WlBScDo5WR9cFDhzETzOEjB62NrIBpjtHGVufosUL0JFd4/KidvQ041XI6ODqd6EJNdEUtJ084OTtwQpK9nItr5anTtUgqimrPnK10c5GDZQxBd4+DW88VIhQU7jx/0MMTkbU4vbx9LlysgBtRVHHxgo+3FydS5vT1S869BHNoUeHlK6J+vqjZ2182+eo1aGjUXrueLBuAIs/AEGivcqPnJtgZhbdu31AJCkSVZ2AMDuG7cxKU3otqTpbwhQajGQBUERaefPceKKjv3U0Oj8CQB6qQjKy8f7io6MH9ykhJLPLAII+KTnn46NHDlOgoG2wKgM6IsUt//DjdLiYYqzxQRWxc3ZMndXGxOOSBMR+f8PRpQrwVLgVAZyQmJSWiOgAArqa4BP2YBKMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjQ2KzAwOjAwpaS7KgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAChVBMVEUAAAD//////////////////////////////////////////////////////////vv//fL//////////////////////////////////////////////////////////////////////////////////////v7//////vr//////////////////////vj//////v///////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7//////////////Ov/++j//Oz/+dT/863/7X//6mD/50///O7/9r3/62//4SH/3QH/3AD//v7/+df/7Xj/4Br/3QD//vv/98T/5kr/3QL//v3/98P/5Tz/+db/5kf/7HX/3QP/9rv/4BX/3g3/5UH/6WD/62n/6Fb/9bf/+tr/++b/+dX/4Bv/7HP/+t7///7/86v/+dj/3QX/8qP//vz//O3/6mH/4iz/98b/6Fj/5T//+dH/6mL/4zP/+Mr//fH/7Hf/3xP/9LH/8qH/6mn/+Mz/3g//3xT/8JD//fT/++X/507/4B3/7X3/+ND//vj/86b/3Qj/3gn/5T7/62r/7oL/++P/6FT/3Qb/9rz/4ij//fb/8ZT/3gz//Oj/62j/3AH//On/+Mv/86f/4R7/86j/7n7//vf/+t//3QT/4zD/4zH/8JX/3xX/3gj/9bT/4R//74j/74n/6Fn/+dP/9bn//vrsMn7uAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAxZJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSVAqVIwADJKiosKpSQhKhilZWTLyisqobJQNZUV5WWyMtIgFXLyClXVNQUo8iBTaqqrFOTlgAZw8STV1qHLg1TU1SbxcDEyCIorptY3IGxHuKShPlVRXJCBS6mqsakAKt3c0tra0gxVUtDUWKXExaCsktwGFahs7+js6ursaIc6uKAtWUWZQVWtuwfML8jv7etPAoL+vt58iEhPt5oqg7rGBDC3oCBrYmESGBROzALbUpA/QUOdQVMgA6J80uQpSVAwZfIkiFiGgCaD1tRpEM70GUlwMGM6RGzaVC2GpOSZEM6s2QgFs2dBxGYmJzFoT50D4cydh1Awby5EbM5UbQad+QsgnIWLCmHyhYsWQsQWzNdh0NVbDPX1klSYgtQlUKHFeroM+gZLl0GUL1+xEiK/csVyiMiypQb6DIZGq1ZD1a9Zuw5oS+G6tWugAqtXGRkyGJus37ARKrBp85atW7ds3gTlbtyw3sSYwdRMe9t2RGTu2IGIzu3btM1MGTjNLcp27oIlB0Rslxbs2llmYc7JwGhpaLV7z17MBNO8Z7eVoSUwzTFa22jv238APckd2HLQ1s4anGo57R0cD7Wgqig40HLI0cmeE5Ls5Zxdyg4fQVZQUHDkaJmrsxwsYwi6ue9euxFJRcGmY8fdPRBZi9PTy/vE9pNwFQUnt5/w9vLkRMqcPr5JOacQOet0jqivD2r29pNNOnMWpuDsmSRZfxR5BoYAO5X5becgcbSpbb5KYACqPANjUDBfbQsoAxU0tBTxhQShGQBUERqWdP4CKKgvnE8KC8eQB6qQjCi7uLegYO+lsghJLPLAII+MSr48adLl5KhIa2wKgM6Itr1y6tQV2+ggrPJAFTGxU65enRIbg0MeGPNx8deuxcdZ4lIAdEZCYmICqgMA6f6os3UKuXAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjU4KzAwOjAwOTHA6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////7/v3y+/n////////////////////////////////////////////////////////////////////////////////////+/v7////6/f3////y+/r////////////////4/fz//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r+ffo+PXs+ffU8+2t591/28tg0r5Pzbju+vi97ORv1sQhwKUBt5gAtpf+/v7X9O942ckavqIAtZYAt5j7/v3E7udKy7UCt5j9/v7D7uY8x7DW8+5Hy7QAtpZ118cDt5i77OQVvKANup1BybJg0b5p1cJWz7q36uLa9PDm9/XV8u4bvqNz18be9fGr59zY8+9/2ssFuJmj5dr8/v7t+fdh0r8sw6rG7+hYz7s/ybHR8uxi0r8zxazK8Onx+/l32MgTvJ+x6N+h5Nlp1MLM8OoPu54UvJ+Q39L0/Prl9/ROzbcdv6N92srQ8ez4/fym5tsIuJoJuZs+yLBq1cOC28zj9/NUz7oGuJq87OMowaf2/PuU4NQMupwNupyU4dTo+PZo1MIBtpdq1cLp+fbL8OoBtpan5tsev6Mev6So5twIuZt+2sv3/Pvf9fJUzroEt5gwxKsxxKuV4NQVvaCV4dTW8+/X8++06eEfv6T7/f2I3c6J3c9Zz7wFuJrT8u256+L6/f3ow7cxAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMvSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN/QiCYPVNHYUJ/Mw8XIICiumNbUDLO9sawMprawuSlNUVyQgUuppqW1EOq4tvaOjvY2qGMLW1tqlLgYlFVSOhuhDuvq7unt7enugjq4sTNFRZlBVa2vH8wvLJgwsSgZCIomTiiAiPT3qakyqGtMAnMLG7Mng+WBKiZngx1SWDBJQ51BU2sKRPnUadOToWD6tKkQsSlamgzaM2aCOY2zZifDwexZYGcVzpyhzZCcMgesoGzuPISCeXPLwArmpCQz6MyYDzFhwUKEgoULICbMn6HDoLtoMcS+JUuLYPJFS5dAxBYv0mXQ018G4ZQtT4MpSFsOiZrCZfp6DAaGK1ZCeKtWr4HIr1m9CiKycoWhAYOR8dp10IBbv2Ej0JaijRvWQ4N23VpjIwYT002bt0BVbN22fceO7du2QuW3bN5kasJgZq6zc1cZLBGU7d5dBksaZbt26pibMXBaWFbs2QtLDqAkCWPu3VNhacHJwGhlZL1v/wHMBHPw0D5rIytgmmO0sdU5fOQoepI7euy4nb0NONVyOjg6nWg/iZpoT7afcHJ24IQkezkX14pTpwuRVBQWnjlb4eYiB8sYgu4e+zacQ1aw9fwFD09E1uL08va5eOkyXEXh5UsXfby9OJEyp69fcu4VRM66mivq54uavf1lk6+1whRcv5EsG4Aiz8AQaK+yaDnEGYVbly9SCQpElWdgDA7hu9kOykCFze23+EKD0QwAqggLT759BxTUd24nh0dgyANVSEbevXegsPDA/buRkljkgUEeFZ3y4OHDBynRUTbYFACdEWP36MqVR3YxwVjlgSpi46Y/fjw9LhaHPDDm4xOePEmIt8KlAOiMxKSkRFQHAAAsgrQ2sknLAAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDU6MTIrMDA6MDD2yfpjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/vz0/fT////////////////////////////////////////////////////////////////////////////////////+/v7////7/vv////1/fX////////////////6/vr//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v/O/s++zw/PDc+dy9872Z7ZmA6oBz53Px/PHK9sqM64xN4U003TQx3DEy3DL+/v7f+d+T7ZNH4Ecv3C8z3TP8/vzQ99Bu5m79/v3P989j5WMw3DBs5myR7JHJ9slD4EM93j1m5WaA6YCH64d36HfF9cXh+uHr++vd+d1J4EmP7I/k+uT+//6787ty53KY7Zg33Te18rWB6oFW4lbR99F56Hna+dqC6oJc41zV+NXz/fOS7JJB30HA9MC08rQy3TKH6ofW+NY/3j9C30Km8Kb2/fbq++px53GX7Zfa+Nr6/vq387c43Tg63jpk5WSI64ib7pvp++lS4lL4/fip8ak83jzt/O1n5We487hK4UpL4Uu587k53TmY7pj4/vjl+uV26HZZ41la41qq8KpE30Sr8Kv0/fQ53jne+d7D9cNM4Uyg76B66Ho23TbH9cf7/vts+qXUAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ1OjQxKzAwOjAwj8HumgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////9/vv5+/L////////////////////////////////////////////////////////////////////////////////////+/v7////9/fr////5+/P////////////////8/fn////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////3+uz1+en3+u3t9Nbd6rHK34W912i20lj4+u/j7sDD23ajxyyWvw6VvguVvgz+/v7u9drH3X+gxSWUvgmWvw39/vvm8Me00VP+/v3m8MauzkXu9Nmz0FDG3HyUvgrj7r+exCCbwhqwz0rB2XGWvw+51F7h7Lrv9dz0+Oft9NehxifF3Hrx9t/c6a+201j+//7K3oaYwBHZ56j+/vy+12moyjfn8Mn2+uy61WCwzkns89P3+u6+12qryz7p8c35+/HH3X6dwx7e67XY56aVvg2UvQjq8s6cwhuexB/R45b6/PT0+Oa20leVvgqhxijJ3oT8/fna6KqYwBOZwRavzkfB2XLL34nz+OS41F2UvQmYwBKmyDGWvwz7/PfS5JmawRebwhjT5JrB2XD1+erp8s79/vzb6ayiximixir7/PbJ3oOZwRXK3oTx9+Cpyzuqyzvj7sGexCH5+/KZwBSwz0vu9dng7LijxivO4Y6awRjO4Y+61WGXwBHt89Wpyzri7bz9/frM0I39AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANESURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QWIEECguqqyplZaRBKuTkFWpq68qLKlBAUXldbY2CvBzQAC6e5PoGdHmQiob6ZB4uRgZBccW0xgKY7U3l5U0wdkFjmqK4IAOXUk1zSyHUca1tWVltrVDHFrY01yhxMSirpLQ3QeQ7Oru6e3q6uzo7ICqa2lNUlBlU1Xr7iiBG9k8oTgaC4gn9ECuL+nrVVBnUNSaCuUXlk0omJ4PB5JJJYEcXFUzUUGfQ1JoCUT512vRkKJg+bSpEbIqWJoN22gwwp2nmrGQ4mDUT7KyiGWnaDMmz54AVlM+dh1Awb245WMGc2ckMOvMXQBQsXIRQsGghRMGC+ToMuouXgBUULl1WDJMvXrYUHDJFSxbrMujpLwdzVqxsT4MpSGtfuQKsabm+HoOB4arVECPWrF0HkV+3dg3EgNWrDA0YjIzXb9gICbhNm+cBbSmet3kTJGg3blhvbMRgYrpl6zZo0G7fsXPXrp07tkODftvWLaYmDGbmOrv3rIQmk5V79+3buxKadFbu2a1jbsbAaWFZ2bwfYknFAVCaPABhb9zfXGlpwcnAaGVkffDQYcwEc+ToQWsjK2CaY7Sx1Uk9Voie5Ap3HreztwGnWk4HR6cTbU0oKoqa2k44OTtwQpK9nIvryVOnNyKpKNp45tRJNxc5WMYQdPc4e+48UrovPH/hoIcnImtxenn7XNxTATeiqGLPRR9vL06kzOnrl5x7CZGzLl8R9fNFzd7+sslHr0JDY+PVo8myASjyDAyB9irX2q+DnVF4vf2aSlAgqjwDY3AIX30bKPkWFdy4yRcajGYAUEVYePKt26Cgvn0rOTwCQx6oQjKy8s7doqK79yojJbHIA4M8Knr2/QcP7s+OjrLBpgDojBi7h48ePbSLCcYqD1QRGzf98ePpcbE45IExH5/w5ElCvBUuBUBnJCYlJaI6AADXv7i4Kd/lawAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDk6NDUrMDA6MDBhsioHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACnVBMVEUAAAD////////////////////////////////////////////////////////7/fvy+fL////////////////////////////////////////////////////////////////////////////////////+/v7////6/Pr////////////////////4/Pj////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r9uvo9Ojs9uzU69St2K1/w39gtWBPrU/u9+694L1vu28hlyEBiAEAhwD+/v7X7Nd4wHgalBoAhgAAiAD7/fvE48RKqkoCiAL9/v3D48M8pDzW7NZHqUd1vnUDiAO737sVkRUNjg1BpkFgtGBpuWkCiQJWsFa33bfa7drm8+bV69UblBtzvXPe796r16vY7Nj+//4FigWj1KP8/fzt9u1htWEsnCzG5Mbr9etYsVg/pT/R6dFitmIzoDPK5srx+PF3wHcTkBOx2rGh06EAhQDM58wPjg8UkRSQy5D0+vTl8uVOrE4dlR19wn3Q6dD4/Pim1aYIiwgJjAk+pD5qumqCxYLj8uNUr1QGiga837womij2+/aUzZQMjQwNjQ1ouGgBhwFquWrp9OnL5ssBhgGn1qcelR4elh6o1qj2+vZ+w373+/ff8N8EiAQwnjAxnjGVzZUVkhUJiwm03LQflh+IyIiJyIlZsVnT6tP8/vy53rn6/Pq97PRtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAzFJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSWlBQVlYFBQUFpSXFQoJQlRwSgtI1teUVkFlYWqqaqsKJeVkQapkJNXqK6pLUWRB6oora2pVpCXAxrAxZNUV48uD1JRX5fEw8XIICiumNrQCLO9FAhg7MaGVEVxQQYupeqm5gKo41pa29paW6COLWhuqlbiYlBWSW4vhQh0dHZ19/R0d3V2QFSUtierKDOoqvX2gfkF+f0TCpOAoHBCfz5EpK9XTZVBXWMimFtQmjVpchIYTJ6UBXZIQf5EDXUGTYEMiPIpU6clQcG0qVMgYhkCmgxa02eAOaUzZyXBwayZYGcVzJiuxZA0ew5Ewdx5CAXz5kIUzJmdxKA9fT5EwYKFCAULF0AUzJ+uzaCzaDHEviVLC2HyhUuXQMQWL9Jh0NVbBuEsb0+FKUhtXw4RW6any6BvsGIlhLdq9RqI/JrVqyAiK1cY6DMYGq1dBwnJ0vUbNgJDYvLGDeuhAuvWGhkyGJts2rwFGrRbt23fsWP7tq3QoN+yeZOJMYOpmfbOXcuhEbi8dPfu0uXQ6Fy+a6e2mSkDp7lF+Z69pbBUUABLd2Wle/eUW5hzMjBaGlrt238AM8Ec3L/PytASmOYYrW20Uw4dRk9yh48ctbWzBqdaTnsHx2Otx1ET7fHWY45O9pyQZC/n7FJ+4mQBkoqCglOny12d5WAZQ9DN/cyGLcgKtp495+6ByFqcnl7e53ddgKsouLDrvLeXJydS5vTxTcq5iMhZl3JEfX1Qs7efbNLlK9DQKL1yOUnWH0WegSHATmVRO8QZBVfbF6kEBqDKMzAGBfPVtYIyUEFjaxFfSBCaAUAVoWFJ166Dgvr6taSwcAx5oArJiPIbBwoKDtwsj5DEIg8M8sio2bemTLk1OyrSGpsCoDOibW9fvHjbNjoIqzxQRUzsnbt378TG4JAHxnxc/L178XGWuBQAnZGQmJiA6gAAFLyvxAL3bxQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ5OjU2KzAwOjAwnPAwBAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////7//3y//n////////////////////////////////////////////////////////////////////////////////////+//7////6//3////y//r////////////////4//z////////////////////////////////////////////////////////////////////////+//7////////////////////////////////////+//7////////////////////////////////////////////////////////////////////////////+//7////////////r//fo//Xs//fU/+6t/95//8tg/79P/7nu//i9/+Rv/8Uh/6YB/5kA/5j+//7X/+94/8ka/6MA/5cA/5n7//3E/+dK/7YC/5n9//7D/+c8/7HW/+9H/7V1/8cD/5m7/+QV/6EN/55B/7Np/8NW/7u3/+La//Dm//XV/+4b/6Rz/8fe//Gr/93Y/+/+//9//8wF/5qj/9r8//7t//dh/8As/6vG/+hY/7w//7LR/+xi/8Az/63K/+rx//l3/8kT/6Cx/9+h/9nM/+oP/58U/6CQ/9L0//rl//RO/7gd/6R9/8vQ/+z4//ym/9sI/5sJ/5w+/7Fq/8OC/83j//NU/7oG/5u8/+Qo/6j2//uU/9QM/50N/53o//Zo/8MB/5jp//bL/+pB/7IB/5en/9we/6Qe/6Wo/9wI/5x+/8v3//vf//IE/5kw/6wx/6yV/9TW/+60/+Af/6WI/8+J/89Z/7zT/+25/+L6//2DMMmrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6MDYrMDA6MDDpi8pqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD////////////////////////////////////////////////////////7///y///////////////////////////////////////////////////////////////////////////////////////+///////6///////////////////////4///////////////////////////////////////////////////////////////////////////+///////////////////////////////////////+///////////////////////////////////////////////////////////////////////////////+///////////////r///o///s///U//+t//9///9g//9P///u//+9//9v//8h//8B//8A///+///X//94//8a///7///E//9K//8C///9///D//88///W//9H//91//8D//+7//8V//8N//9B//9p//9W//+3///a///m///V//8b//9z///e//+r///Y//8F//+j///8///t//9h//8s///G//9Y//8////R//9i//8z///K///x//93//8T//+x//+h///M//8P//8U//+Q///0///l//9O//8d//99///Q///4//+m//8I//8J//8+//9q//+C///j//9U//8G//+8//8o///2//+U//8M//9o///p///L//+n//8e//+o//9+///3///f//8E//8w//8x//+V//+0//8f//+I//+J//9Z///T//+5///6//8Ngdu6AAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MDoyMSswMDowMG4J85kAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACu1BMVEUAAAD////////////////////////////////////////////////////////8/f3y9/r////////////////////////////////////////////////////////////////////////////////////+/v7////6/P3////z9/r////////////////5+/z//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////s8/jp8fft9PjW5vCwz+KEtdJno8hXmcLu9fnA2Oh1q80qfrIMa6cJaqYKaqb+/v7Z6PF+sdAkea8HaKULa6f8/f3G3epRlcAJaab9/f7G3OpEjrsHaaXY5/FOlL97rs8Iaab9/v6+2Ocfdq0Yc6tJkb1no8dvqMsIaaUNbKhdncS61ebb6fLn8PbX5vAle7B5rs7f7POuzuGFtdMPbainyt/8/f5oo8g1hbbI3utfnsVHkLzT5O/u9PhppMk8ibjM4Ozx9/p9sNAcda200eSlyN4La6YGaKVwqMvO4e0Zc6wddq2Vv9j0+Pvm8PZWmMIme7GDs9LS5O/+/v/5+/ypy98Rb6kTcKpGj7xxqcyIt9Pk7/VcnMQQbqj7/f0wgbQKaqf3+vyYwdkVcaoWcquZwdpvp8vq8vfN4e1JkL2rzOAnfLEofLGszOH2+vyCs9ITb6mDtNLg7PNbnMQ5h7c5h7jA2egfd66awtry9/pvqMoSb6kMbKe30+UpfbGNutaOutZgn8XV5vC81ub7/P0PF+8/AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANLSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QU4EEagqqqyplZaRBKuTkFWrr6huKKlBAUUN9Xa2CvBzQAC6e5MYmdHmQiqbGZB4uRgZBccW05gKY7S3l5S0wdkFzmqK4IAOXUmtbeyFEqKajs6urs6MGoqSwva1ViYtBWSWluwci39vXP2HixAn9fb0QFT3dKSrKDKpqkyYXQYycMrU4GQiKp06BWFk0eZKaKoO6xjQwt6ghuwQsD1RRkg12dFHBNA11Bk2t6RDlM2bOSoaCWTNnQMSma2kyaKfNBnNa5sxNhoO5c1rACmanaTMkp8wDKyifvwChYMH8crCCeSnJDDoLF4EVNCxeglCwZHEDWMGihToMukuXgRUULl9RDJMvXrEcHDJFy5bqMujprwRzVq1ekwZTkLZm9SqwppX6egwGhmvXQYxYv2EjRH7jhvUQA9atNTRgMDLetBns5IqWLVu3bU9O3r5t6xaowOZNxkYMJqY7du6CBG3L7j179+3bu2c3RL5o184dpiYMZuY6+w+shkRg4erygwfLV0OirmL1gf065mYMnBaWh9oOQ/RUHAGlySMQdsvhtkOWFpwMjFZG1kePHcdMMCdOHrU2sgKmOUYbW53UU4XoSa5wzWk7extwquV0cHQ6c7YFRUVRy9kzTs4OnJBkL+fiWnnuPLKKopYLFyvdXORgGUPQ3ePS5SuFCAWFu68e9fBEZC1OL2+fa9cr4EYUVRy45uPtxYmUOX39knNvIHLWzVuifr6o2dtfNvnkbWhotNy+kywbgCLPwBBor3L33n2wMwrvr7mrEhSIKs/AGBzC13j2AdCSogdnS/hCg9EMAKoIC09++AgU1I8eJodHYMgDVUhGHnp8oqjoxJNDkZJY5IFBHhWd8nTGjKcp0VE22BQAnRFj9+zGjWd2McFY5YEqYuNmPX8+Ky4Whzww5uMTXrxIiLfCpQDojMSkpERUBwAAPAa7YJpbYIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjM0KzAwOjAw8JvcoAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACzVBMVEUAAAD////////////////////////////////////////////////////////7/Pzy9Pb////////////////////////////////////////////////////////////////////////////////////+/v7////6+/v////////////////////4+fr////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r7/Ho7O/s7/LU2+GtusZ/lKdge5JPbIfu8fO9yNFvh5whRWYBK1AAKE8AKU/+/v7X3uR4j6IaP2EAJk0AKlD7/PzEztZKZ4ICK1EAKE79/f3DzdY8XHkAJ03W3eNHZYB1jKADK1EAJ067xtAVO14NNVlBYHxgepHr7vFpgpgCLFFWcou3ws3a4OXm6u3V2+IbQWMBK1Fzip7e4+iruMVPbIbY3uQFLlOjssD8/f3t8PJhe5IsT27Gz9hYc4w/X3vR2d9ifJMzVXPK09vx8/V3jqITOVyxvcmhsL4AKVAAJUzM1NwPNloUOl2QorP09vfl6e1Oa4UdQmN9k6bQ2N/4+fqmtMIIL1QJMVY+XXpqg5mCl6nj6OxUcYoAJkwGL1S8x9EoSmr2+PmUpbUMM1cNNFiUprVogZgBKE5qgpjp7PDL1NsBJ06ntcIeQmQeQ2WotsP29/l9kqUIMVV+k6b3+Pnf5OlUcIoEKlAwUnExUnG9yNKVprYVPF4IMFUJMFVBYH3X3uO0wMwfRGWInK0MNFiJnK5ZdI3T2uEwUnC5xM/6+/yAxxLtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0hJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVauvqGwrLUUBhQ31drYK8HNAALp6kxiZ0eZCKpsYkHi5GBkFxxdTmFpjtrWVlrTB2S3OqorggA5dSbVs7xP7Cmo7Orq7OjhqIkpr2tlolLgZlle6eBoh8b1//hIkTJ/T39UJUNPR0qygzqKpNmgzmF06ZOq0oCQiKpk2dAhGZPElNlUFdY3p+IdhRM2aC5YEqZs4AO7owf7qGOoOmQAZE+azZc5KgYM7sWRCxDAFNBq2588Cc1vkLkuBgwfxWsIJ5c7UYkroXghWULVqMULB4URlYwcLuJAbtuUvAChqWLkMoWLYU7LHCJXO1GXSWrwArKFi5qggmX7RqZQFYwYrlOgy6eqvBCtas7UmFKUjtWbsGrGC1ni6DvsG69RAnb9i4CSK/aeMGiMj6dQb6DIZGm7dAQrp167btQFuKtm/b2goJ6y2bjQwZjE127NwFCdrW3Xv27tu3d89uiHzhrp07TIwZTM209x84CI3AgwcPHTp4EBqdBw/s1zYzZeA0t6g4fKQGlthAAJqojhyusDDnZGC0NLQ6euw4ZoI5cfKolaElMM0xWttop5w6jZ7kTp85a2tnDU61nPYOjuc6z6OoKDzfec7RyZ4TkuzlnF0qLlysQVJRWHPpcoWrsxwsYwi6uV+5eg0p3dfsvn7D3QORtTg9vbxv3roNN6Lw9q2b3l6enEiZ08c3KecOzJLCmrv3RH19ULO3n2zSfWjiLq95cD9J1h9FnoEhwE5lec9DcCQXPOpZrhIYgCrPwBgUzNfYCcpAhS2Pn/CFBKEZAFQRGpb09BkopJ89TQoLx5AHqpCMqHj+orDwxcuKCEks8sAgj4zqfjVr1qvuqEhrbAqAzoi2ff3mzWvb6CCs8kAVMbFz3r6dExuDQx4Y83Hx797Fx1niUgB0RkJiYgKqAwC8prs7Sn3FCAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6NDMrMDA6MDA/+es3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/P709P3////////////////////////////////////////////////////////////////////////////////////+/v7////7+/7////19f3////////////////6+v7///////7////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v7/zs7Pvw8Pzc3Pm9vfOZme2AgOpzc+fx8fzKyvaMjOtNTeE0NN0xMdwyMtz+/v7f3/mTk+1HR+AvL9wzM938/P7Q0Pdubub9/f7Pz/djY+UwMNxsbOaRkezJyfZDQ+A9Pd5mZuWAgOmHh+t3d+jFxfXh4frr6/vd3flJSeCPj+zk5Pr+/v+7u/NycueYmO03N921tfKBgepWVuLR0fd5eeja2vmCgupcXOPV1fjz8/2SkuxBQd/AwPS0tPIyMt2Hh+rW1vg/P95CQt+mpvD29v3q6vtxceeXl+3a2vj6+v63t/M4ON06Ot5kZOWIiOubm+7p6ftSUuL4+P2pqfE8PN7t7fxnZ+W4uPNKSuFLS+G5ufM5Od2YmO74+P7l5fp2duhZWeNaWuOqqvBERN+rq/D09P05Od7e3vnDw/VMTOGgoO96eug2Nt3Hx/X7+/4Nm4E+AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjU2KzAwOjAwoWvEDgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACTFBMVEUAAAD////////////////////////////////////////////////////////9/v/5+v/////////////////////////////////////////////////////////////////////////////////////+/v/////8/f/////////////////////8/P///////v/////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////2+P/09//r8P/Y5P/D1P+1yv+txP/3+f/g6f+7z/+Xtf+Iqv+Hqf/+/v/s8f/A0v+Usv+GqP/9/f/j6/+qwv+kvv+pwf++0f+Gqf/f6P+RsP+Orv+mv/+0yv+5zf+Jq/+wxv/d5//t8v/z9v+Us/+90P/v9P/X4/+Kq//U4P/9/v/2+f+cuP/k7P/1+P+xx/+lv//p7/+2yv+gu//m7f/4+v+Qr//a5P/T3/+FqP/n7f/L2v/6+//y9v+sxP+Vs//C1P/8/P/V4f+LrP+Mrf+6zf/F1f/y9f+vxv+KrP+atv/7/P/N2/+Nrf+Nrv+4zP/W4v+VtP+WtP/6/P/C0/+MrP/D0//w9P+euv+SsP+Ssf/N3P/c5v/I1//q8P/e5//8/f/tCMxjAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAyFJREFUOMt1k+db01AUxm+U1QKllT0KAlXUInsjoOICRREVFZGRMMrKTSFlBVoKKGgZUqZShiJDUUARFyrrHzPkJrRlnE855/09J+9z7jkAcIFhx47b2NrZO+C4g72drc3xYxgGLAITiR2dnCUuUqKkhJC6SJydHMUiCwKTnXB1cydKy8pVFRWq8rJSwt3N9YRsj8A8PL3wyqrqGhJyQdZUV1XiXp4emKB7+1Dq2jqalbiAkK6rVVM+3ojAfP3kmvoGkld5hmyo18j9fHcJ/4CTVH0jbaWzBN1YT50M8GcbiJ1wddN+fZdoUuNOYgzIPAOJZqE/ZGiaEb7JZiLQUwbEQVRLK+TNaXVtbTotbxa2tlBBYhCsIPQ0KrR3dD57/vxZZ0c7Img9oQgGp06XdkHUsvsFhbNBvehGv4RdpadPgZAzL7kU0hVqnA91BWcaki/PhICz0nKEG3p6BaC3x4Bq5dKz4FyfikuY/lf4XrzqZzhA1XcO4ANGDqAHh8zA0CDnGxoHcKDsG0bAyKgZGB1BwHCfEoSO1aL/vX5DCTr15jWq1Y6FgvNh4ygx6QkBIPQmVBsPOw/CIya0KGudnEL61CQaLdRORISDyKjpt5xlknk3w/kcmnnHF95OR0WC6Jj3s3NotMx848KHDwuN80iHc7PvY6JBbJzy46KJf0AT/ekTbeKf07T4URkXC0TxCZqWz4ywBVDYO5L53KJJiBcBLDEyaWl55eDCfFleSopMZHcOS76gLPkK968c1JekpCZzWytKu3hpVMdYLy2jG710OU2E1t4//Ypm9ZtlDwjXVjVX0/2Fw5Bdu/79x5wl8PPX0vUb5tMSZWTe/L1ovgxILv6+mZkhsjjOW1l41br5star3LNuWZ/3bTm+/IefBvP3Hy6/Y6UDkJ2qGNMjG3BOP6a4m22tAyznnkSt27UBSZ1acj9nXwOWeJCLb6ztjnptA899eEBnCe9Hms0VCFc2NY+8D9HZkT/OGzAaDMaBvMfJhwGsjScpW+vrWylPcg7VWSL/KbW9TT3NP0JnX76gcGensCDxKIC1UVRcXGRt4D+SPpTGEJHXggAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MDYrMDA6MDAGSaFUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////9+//58v/////////////////////////////////////////////////////////////////////////////////////+/v/////9+v/////68v/////////////////8+P/////////////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////36//16P/37P/u1P/erf/Lf/+/YP+5T//47v/kvf/Fb/+mIf+ZAf+YAP/+/v/v1//JeP+jGv+XAP+ZAP/9+//nxP+2Sv+ZAv/+/f/nw/+xPP/v1v+1R//Hdf+ZA//ku/+hFf+eDf+zQf/Daf+7Vv/it//w2v/15v/u1f+kG//Hc//x3v/dq//v2P///v/Mf/+aBf/ao//+/P/37f/AYf+rLP/oxv+8WP+yP//s0f/AYv+tM//qyv/58f/Jd/+gE//fsf/Zof/qzP+fD/+gFP/SkP/69P/05f+4Tv+kHf/Lff/s0P/8+P/bpv+bCP+cCf+xPv/Dav/Ngv/z4/+6VP+bBv/kvP+oKP/79v/UlP+dDP+dDf/26P/DaP+YAf/26f/qy/+yQf+XAf/cp/+kHv+lHv/cqP+cCP/Lfv/79//y3/+ZBP+sMP+sMf/Ulf/u1v/gtP+lH//PiP/Pif+8Wf/t0//iuf/9+v/1rAt3AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MjArMDA6MDAnvJMTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+///8v///////////////////////////////////////////////////////////////////////////////////////v//////+v//////////////////////+P///////////////////////////////////////////////////////////////////////////v///////////////////////////////////////v///////////////////////////////////////////////////////////////////////////////v//////////////6///6P//7P//1P//rf//f///YP//T///7v//vf//b///If//Af//AP///v//1///eP//Gv//+///xP//Sv//Av///f//w///PP//1v//R///df//A///u///Ff//Df//Qf//af//Vv//t///2v//5v//1f//G///c///3v//q///2P//Bf//o////P//7f//Yf//LP//xv//WP//P///0f//Yv//M///yv//8f//d///E///sf//of//zP//D///FP//kP//9P//5f//Tv//Hf//ff//0P//+P//pv//CP//Cf//Pv//av//gv//4///VP//Bv//vP//KP//9v//lP//DP//aP//6f//y///p///Hv//qP//fv//9///3///BP//MP//Mf//lf//tP//H///iP//if//Wf//0///uf//+v8BRUUXAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MTo0MiswMDowMHZMi70AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADj0lEQVRIx5WWO2xURxSGvzN7H7a0AdFRkFSQBovKqcCyBF0kmlDS0SHRpkJKEYmGEBeENImFRJMoLlLk4caJrCguEDSguMEijYMQAu+uwfZ672v+FHe93nu9fnCmO3P+f87jn7nXGDIBNPiAD5limgk+oglsssoyf/E3/7FBAcZIEzKd0CXd1yslPve+ULm897kSvdJ9XdIJmfaBhzqnu1qTL5QrUVeb2tCGNtVVolyF5LWmuzqnUCPg47qsJalQqi2tq63W0GprXVtKVUjSki5rfIfC+rWP8xlf6GNPSoLf3RruDo6YCIet8CU/s21llCDiU77S6YJtMvZtEgJCxmlgz/mceVLDAY4Jbh4OL3cytinQaW4ygQMnOM4NJv2h8GEKD5Pc4LhwhFzgiifZA9fQqlMkeLjCBUJHk2s6VpBW4EIYITExIVYhMSClQMe4RjPgDNMixVfgJdhhgCjz0yDC8KQ0sGnOBFxUU2S1XsfENAaeBg5Hb4gCMsZQ0y46pnBFZQuiCrykiIkqnRAFOKYcZ0uC4fQj3J7+OyKsEleA46zjpMzXTnMjhmm4WlYeGScd8d7Q0VoY6Y8dvu6rzv0Qv3e0rFaxx48IFb52lsOg5XiGH67N8GQjCbKKVqABnmeOR+YdrgLJSGsUIq1pxeEwzyPHApkjqOWQ0KMYeAp6JLXzAxxkLDie8NRqMzYKenTpss02Xbr0KGpSjzB4yhNHh1nzAWFtZCKj119ZTakQEmCeWTqOlAUWjZhG7draYHRWu+YNYgwWWSB1iJfcsdcBcaWMHZK6fIQjJsBec4eXyBnkLDFjPiKCfUS0C4eICCv4miVyw4HBFj8xZ4oJD6QoH9UIE3PMsWXQF6FY5RtbbhCPuIdV9cU0sH+4x2p5kitrxfOYGVsPR3RieHgxIbbODI/xxoAADHJ+Y5Zk5w0cBQ+JIWGW38ltkNNOx8UaD2zR9V+jupTLV8nJFnnA2u73dahkg2W+5XkwshPl8PiXeyxbxV+ZO3/wvXWiWhll+hHW4Tv+tBpx1Xr8wK+WjhEMKIQRMIal/MKP9DjYhD7RQylRRy211VZLHSWS9FCT4ggmdFUvvLr9f4S2uvLSC109EhyEmrqtd4U21FZbGyqkd7qt5hEJQOiU5pXnequ3yqVc8zp1ZHif4rxWvFKl8tKKzr8XHIQCXfdvvLz8G11X8J4E/U7cUkst3Tqo+v8BGqkQrMMFpyAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUyOjAxKzAwOjAwKNkk2QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAD/0lEQVRIx5WVP2wcRRTGf29u9/44a5/Pd2cHEagIEgoFRYSQHMtSQkVJOsoICUVKi+gokFIgghubArAipTHCBVL448ZBFiI0caQ4whGKFRoTx3aS89k+fL7b3ZtHcb7zzdkOyWyzOzPf99773jezQsdQgAS9vMIIo7zJqwTAvyyzyG/8zj9UaIBw6FBUNKfn9Kquad3GsY001FAjja2Nta5relXPaU5FO1DSEd3nDT7kAwZiiaixS0gMeCTJkMbHUzaYYpK/iMQlUMjwLp8wHFNli01C3DhJ+snSgwd/8Dk32JV9AoUM7/Opvl6nRInQTa6lDkny5EkhS3zGD00KAYUk7/GFvrbDKtvoUSKhCH28xDHkAR8zQygIqOEtvtbTO6xQ4UiN25n08jLHkNt8xIJYo5DlEqdrrP4vvLlaYZUanOYSWcXgc4bzMSW2D9S9/7gU25SI4Txn8A0BF7SvSsmpXVES9FGgQB8Jh0RQSlTRPi4QeJxktEGZyIELOfKkSAAN6pQodwQQIsr04I1y0uOsBhFbXVoPUSS5B/BJkSbJupPjFoMkAjlrGMHUiBydsxTa8JaNCmTbfgCIqIFhxHDKml2HW8iR6uqGkCLn7FF2sYZThuMqobM5cwDeosg4MyEqHDekwDoLCcyhHjAknG8LkDJYugDW6XunuLaLELCGkuA7C3WiQyiUiLoz4yNQMtwXm3ZqjdiicYCgwZbjFUgjlvuGW8am8RynldnoomiwQdmxmkcaY7llmCXyCZwcYtZYp9qeqbLOGrETP8CHiFmPBe567wywje2wasgaFTL4QMQuOx2roBgG8OAuCx5lJs3bgclSdrKwVKhgWu3qckaWAGOZpGwImWXOp0i669gKYLHt9/34aYr4MMcsoUF5xBV5HDBIoqt9sve47UwwSIA85gqPUCMQc5MxY3MMwBEm2odDnhymwZfcJBYMCOzwPdOeFuh9JkXzRszjKdNMsyMtP6IsMy6LPRRJHkmhQJIiPcifTLDc3Gb2FLbMMyab/RSOOErNzQX6kU3GmMcKbQIQiPmZSannySKHngWhnzxSZ5JfiKVN2lJceco1mUtRJHOgDAUyFEmpzHGNp/v/1458BRb5igd9FLrOJ4BPgV74mwkWOxvrFCxwg28p5+nHdOSgGPrJQ5lv+NX1RbdiNab4KREOEbSVUISAIRIhP/IdNZ5FIPCQCe6kGdxraLN5g6ThDhM87L4tD/RMYJ5xVrIU9+7ABEWysMI4tw9etoc3/TpTUimQxWDIUkAqTHGd5x2KntAZjat6T+9pVTXWGT2hz41vUgzrktVN3VSruqTDLwQHRT29aJ9YtWqf6EX1XpAAFA30spa0pJc1OBr+H/Nbm042akI7AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MjoyOCswMDowMP9kZncAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEJklEQVRIx5XVT2xc1RUG8N+9M2M79tgxJDLR1MHYjosQrdRFVFUKUSToqsuy6xJVqpDYVuy6qMSiKmSTdNHWQmKTqllUon+yIFRRVbohSAQRgRxRJXWwSQzGjpzYnsnMOyzsOPPGNoX7Nk9P9/vO+b7z5yVdJ6Bi2FEnnfI9j6vjrnlX/cu/3bSmQ7LnCZHikXguXo9b0SzarWIzNmIjNqNVFO1oxq14PZ6LRyJFFyp1Ra95ys/9zKPNtOmuVeta6DNoVN2A/vClc2Z97H4qEwQH/NjLTrSsWrTonnKcIQ0No/r4j99420Z6SBAc8FO/iu+u+Z8b1iVlpYEw6AkThqVrfu0vWxSJoM9P/LY49qWP3RL7mSQkRzzlUfkTv3RBK0lE9gO/j+PLPrQk7QvfNtqY7zskvecXrqQiBwe95Piaj/4vnCRZ8pE1jnvJwZDVPOP5phtu98BDKBSix87kthuaPO8ZtazuhRhZdb2kPYSaMVOmjKmVSJJw3aoY8YJ61YxTLQs25S549h2ThlTRds91CwoPa79pwaj+U2aqno36psVS9GTGMYM73+qGDbrWlWOyaFpfPT2bnYy8ZqOUfMOkoS7KZMikRknIhjWRncye7uQ7Jf0V44Z3+T9sXKXkwx2d7OnsSKT1nqv1PYqZ1Hto10VyJOsPnVLx+rsidZ+K/lJBO4L+rEg9gLZiT4JCu4cwUWTLyUAp1bs2SpEeZLbhbknagMRyNpeLsram21q7CFpua/Z4lQtz2bu5GFHbiZkkN833pNs272ZXq4eaEbnwbnYx3T9grCSiac6c1Z0vq+bMaZYEjDkg3Xex6ooP+n501C2drj5bN2fJQQPYdMeKdqlXK47q4wNXqlbMVn54ODfMl3qvbcnS9izYNacNh1UKs1aylosuDZgy0jO2WdLR2X7rho+YMsAlF7WysOjVvHTYjGpP+dL2Uy5nzYzD8pJXLYqcaHvH6UoxboI9OqAMZ8K4Ssdr3tFOMol7/ux8f0wa+1qKwJgn9IfzzruX2N4iYd6ZdHXUtKF9KQJDpo1KHzprfuta3tKqcNnpvNowsc8oQcWEhrzqtMuKLW/yA7u0/d1sbk5qSHvOQtIwKTfN+of2A2t3FmEKX3gjXdpKsldGYNS0oUiXvOGLh//Xh5tU4qrf+WTMpP5dGQyYMsZ/nXW1u7C5+1LibX+0MuGoSlcOoWLc46z4g3+W+yL3BNp0zt9qrWMO7TgRkkOOqbX81Z9s+jqCxKfOen/EkwbZ3sODnjTC+876tHdb9mYgcdkZC4+ZVgVV0x5jwRnv7V62uwjAm87ltUkNWd4q3ppz3vRNT4jxuBDt1Xgr3orViHZciPH4xvgtihNxrYjP4rMoIq7FiW8FJ0Q1Xiw+70Qnis/jxah+SwJC1OOVWI7leCXq+8O/AuFKp/3c1qOQAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo0MiswMDowMJ17ML4AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAER0lEQVRIx5XVS2xV1xXG8d/evrbxC7CpMbVSECGg2qlRU5tXDEVNOmmHzazDqFIVKdOqsw4qZVA1RZGgg7ZWpEyoyqBS+qADgpxSOglYkIQE2aFCIuGNMcEOhsu9Z3WAgXts0yb7zI7O919nfevbeycNK6BJl2/YY69vWa8Tcy4445/+5VOz6iTLrhApuuPFeDOuxL167W4xF7fjdszF3aJei3txJd6MF6M7UjSoUkP1ZgN+4sd67qRZ110xYx5tuq3Tq0t7uOmgMWfdT2VA0Ob7fm503iUf+9iMcp1ugwb1a+PffuUd8+kxIGjzI7+ILTdMmHBLVu40UFht2LCvSVN+6c8PEImgxQ/9unjmgnFT6vLyJik02eJ71svn/Mxh1SQR2bf9rhi54B/OS0/y+KHRNvqB9fJJP3U6FTlY5VUjNxz9v3KS5LyjbjDiVatC1my3l+446ZNF8lAsPLEI8YmT7vCS3ZqzTi/HyosmRIM8FFbYbJttNltRgiRhwkWx0ss6Kzbbe8dHZhusC9mQYWu0oGrahA8VHs9+1kf6dey1ueKF6JxztlQ9222X7kfv1ui1yvES4qxd2jvTC9meIl/zecnnAdsb5A9itN2AaGjkc9cU2Z7s2Vq+Wuq/YsiaRdNI1hhSKflwVS17NltXTzMl73v1LBOlrEdvaR4z6sm6rDXUSoB2LctmoEV7CVATtGZF0lz62ar6soC6aqmxZokim846SoCbbpcqPfyz226WAB0y09lkpVhbAsyZMr8EMG/KXAmwVqUwmb3XVPRpa6iZfeCUakledcoHpai16dNUeC87ku6v9HQpqnOOedflhXfhsncdK9UPT1sp3Xek4rT323duNan26INsxjHn9enCrKs+VS3Vb7ZVO+87XTFjrLJ9Yx50WlNDG/edc25hL5BLySgM2qhSGDOTVR0x3mWHPkXJzCZZTU3WVDKv0GeHLsYdUc3CJa/naxs8r3XR+NLCUx7nCqM2yNe87pLIiZrj9jUXWw2zTALKcr5jSHPdbxxXSzKJL/zJoY4Ysam045bKwyYjOsIhh3yRWPAmXLA/nem3Q88TESH02KFf+tABFx58lh/0qnDCvnxr0PATthK0GDYo37LPCUXyCECi5m/GKveGfVNadi8kA4ZV7hnzd7XHmXnoeLjhrTTeY6evLzEz0G+nnkjj3nLj8f3akI/EGb917hnbdS4BdNpmE/9xwJnGwZaOnsQ7/mDmOUNaGhChxZDnmPF7R8u5WHx23XXQX1dUn7f+kRMh2WDUiqq/+KO7/hcg8ZkDTq31XasXRsdqe/RyygGfLb76lpyeiRP2u7jFTq2g1S5buGi/k0tvzuVv8rcdzLPbDGjSZMCIPOugt33ZFeKpOBy1y/FGvBGXI2pxOJ6KL61/gBiNqXpMxmTUI6Zi9CvJCVGJV4rrtahFcT1eicpXBBCiM16L6ZiO16LzyfL/AjzmtojnBFLlAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo1NCswMDowMDIBBRoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEXklEQVRIx5XVS2xdxR3H8c/MuX5g/CBGTQzkATIggQt1K7fNgzgI5YVDWmjaRdsdrRQhsa2666ISi6o0m6SLtu6CRYIS1Er0EdGYEKV1GwlbTaxGRYkCgWAiYuKH4kaxfX3PdOHg3HPttDBnNXPm9x39/vObmaCqJci0WGOzLb5orWb8xyVnnfQ3H5pWIVRpQkEe3OUrvq/Piko2G8shR1SXGvKsYtJRB/3TlBSWAhJ1HvFD39N+LUz40EVjptFipQes0a41mXBIv3eUQxGQuMNWP7Zp2rtO+YcrKov0JLPKRht0auHvfuZNN8ItQOIO3/KT9PCoYwaMiUV3EnIrbbPdauG8n/r9AiKQqNfn55UH3/GqIRXR8i2X+arvekR2wY8cNRcEUtTtV3nPv/3WiFhYubYluS/5gUfFYXudCXlMtHlRz6iD/1dOEI04aJQeL2pLojpP2HPNG4Zr5EmuoiJfyEcVYtgbrrHHE+pKmj2ft15wTF7lPUnu9LBVuOK864JbG5c7pkd3a3zeYMlDtkwbNCGrkke9drhXI2Zc9hd/lS8iogmDOrVt8VDJU6l5yqnC6tEe39CxKLjXal/wuwLilG9qbQ5PRZsr8QNXC8436KuSE3Tos6FQjas+UIk2R11z8X2panq9XvfV7EZwn171Vf3kfXNRV9QxH8YKYVnrnmWiFN1jrbxqZMx80BE1JLOFqS0al81Ao5ZCf1aiIcpDjeCG8rKAshs1wEAejWfaCm4/Nl6IzqfFHfdxoTJtMsajc/X5uoLXScOmlwCmDZss1Gad+ty56O26fJ3mqjUzJx03U5DPOO5kIWrN1qnLvR0NKN/t8SpAMOU1h723OPKew14zVWUgedzdlA2UnDHSuv5JQ8pVObviiBEPaMeEi86ZKWS13pNaGXGmZFJ/3dceixu9pVRViVmnnb55FsgK7iu2eExdrt9kNGfAiXa73F+ISZDJlJVlskL1c/fbpZ0TBsxFyWUvZ2NdntVUc/JvfdXbeafndMnGvOyyFAPzBu1ryHttY5kEFNPANr0aKn5h0HwQCVx32JG70k7d0v9AJEm3HdqSI464HrhZm+SS/eFsp11W3RaRJB2e0Sn8ywGXFqbFBbdyQ/ZlUxtt13hbQKPtNsqm7DMkDxYBBOb9SX/97E5fF5c9C9F6O9TN6vdn87cy82nNk6teCSc67Na5xEaSPGi3jhROeMXVsPi7Kh+Bs37pwpf1WbEEsMLTunnXAWert7Vw9QTe9BuTW/VqqEIkDXptZdKvHS9edrV314xD/tg096xHFyuRRF2e0zTnD16tOaa1gMCoA06v9R0rb3pnpW9bw2kHjNY+fUtuz8CQ/T7q8Ywm0GS3Hj6y3/DSl3P5l/x1h7Lpp61XUrLeTtm0Q173WVuSVqejaf5i2pv2pospzaejaXX6zPoFxKZ0vpKG0lCqpHQ+bfpccpJUSi/kn5RTOeWfpBdS6XMCSFJzeimNp/H0Umq+vfy/0JikOgfvvUIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUzOjA1KzAwOjAwM1Rr9AAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADzElEQVRIx5WVTUxUVxiG33tnhmF0iJ0iCVF+NJpghTSUVNOoTTMrCS1qm4mJZVFSu+h048Jg2dCdSatb3TWkTaw2ISkbBY2waGBBJGmsoggkasEfyDhDsQjM33m6YGjnzgw4fmd1v++8z7nnnPecYykrkCSXylStD/WRGlQjv6RFTWtMv2tIM/pHacnK0lgOuaW31KQ2tSiQci3bcSstySUvPuNOa159+kV/6G9h5QOQPHpHX+lzvR21ZjWhO/pL85ICqtW7qlOlylFMl/WjxpXM/gtJCB+tDEOMQU6xEwtlNYudnGKQGMAwrfjIk7cxYRink20OaXbbRifjGJigLQuBKOEYU0mGacFeVy6ETQvDJGGKY5RkENg0MZpmiEMbitfaIYZIwyhN2KvjB+iG+xwuSi7EYe4DdBNAwkMrCy/owFU0wEUHL2CBVjwiQG+am1TkdSsjSDvtBCnLq1VwkzT0EhD7iUUI5y3WcfqZ5BnPmKSf43mLGyYCMfaLTpO4x/acXT/NQwxrYXjI6RxnbOceJkGnuJZI9eQUj/IgS76KeMDRnEF6SKS4Zqt+xR5Ttq88Cmm3nFa1tFsheRzmG9OKrXpblUlr2tG5TrvkUm64tEt1jsy0kpYqbXmNlh2Fcm1Wodiscsf3sozktWVsbXIUFhUvCIhr0fG9SbZkbEXdqnAUHuu5Y03W5vxcjx2ZCrmlqK0Jr9nrKER1XbE8QEzXFXVk9sprNGHrltfUa4uj1KNLeuXIvNIl9TgyW1Qvr9Et0czSU47k+KyaLm5nvGC4TRfVOT2O8BSWaLaoVG/8g9/0pVYcI/i0Tw2qlDSrMY3m7FSpuvWZvCP6VHg5SXqGUMFzV0JJwXyIGUhzEq+wqGEgyQB7ij7OexggCQPUYAnhppm5JS7gL0pexgWWYI5m3KzuMH6+JT3L1zmHqlCz+IY5SHEG///XqsUOrhgzSvA1CIsgoxjDZXZkvS4ImwPcSXKFmg0BNfxKEv7kAHbuy+ChnfkluihdV+7jO5Zhni/w5Jkdi62cNyuPCOEuKHcT4hFmhfNsxVJ+IBroh0EaCwLeYxAM/TSgdQLxCVNwscAdXcFFgCk+XlcuSZRyhtgC4ZyV8BFmAWJ0UKoNAaKKn4nfJ5j10LgIMg5xfqJqw/EziH2MwFVq/wPUchVghPdfK88g2niS5PuMtf38QBKe0FaUPGPtc7yMcAIPHk4QgZecy7JuEYgq+kjdpZFG7kKKviJmn4M4yGSKG9wgBZMcfCO5Vo0XNpEECUyEcObgviHCz1miRDm70ez/BYYI/lv2W3BZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MzoxNiswMDowMM4WcfcAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]}],drawing_api:[{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]}]},logger$q=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPdrawing"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowDrawingPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn-icon gpf-btn-icon-drawing fr-btn",e.title=this.options.labels.control,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowDrawingClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowDrawingClick(t)}),e},_createDrawingPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPdrawingPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createDrawingPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createDrawingToolsDivSections:function(){var n=document.createElement("div");return n.className="gpf-panel__content fr-modal__content",n},_createDrawingPanelHeaderElement:function(){var n=document.createElement("div");n.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",n.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var i=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",t.appendChild(r),n.appendChild(t),n},_createDrawingToolsSections:function(){var n=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&n.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&n.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&n.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),n},_createDrawingToolSection:function(n,e){var t=document.createElement("div");t.className="drawing-tool-section fr-m-1w";var i=document.createElement("p");i.className="drawing-tool-section-title fr-m-1w",i.innerHTML=n,t.appendChild(i);var r=document.createElement("ul");r.className="drawing-tools-flex-display fr-m-1w";var s=this;function o(y){s._handleDOMToolClick(y,this.id,s),s._handleToolClick(y,this.id,s)}for(var a in this.dtOptions)if(this.dtOptions[a].panel===e){var d=document.createElement("li");d.className="drawing-tool fr-m-1w",d.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),d.title=this.dtOptions[a].label,d.addEventListener("click",o),r.appendChild(d)}return t.appendChild(r),t},_createSavingSection:function(n,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var i=document.createElement("button");i.title=e,i.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",i.id=this._addUID("drawing-export"),i.setAttribute("type","button"),i.textContent=n;var r=this;return i.onclick=function(){r.onExportFeatureClick()},t.appendChild(i),t},_createMarkersChooser:function(n){var e=document.createElement("li");e.className=n.className;for(var t=0;t<this.options.markersList.length;t++){var i=document.createElement("input");i.type="radio",i.name="marker",i.id=this._addUID("marker-"+t),i.value=this.options.markersList[t].src,i.className="marker-input-radio",n.defaultValue===i.value&&(i.checked=!0),e.appendChild(i);var r=document.createElement("label");r.className="marker-label",r.setAttribute("for",i.id);var s=document.createElement("img");s.src=i.value,r.appendChild(s),e.appendChild(r)}return e},_createStylingElement:function(n){var e=document.createElement("li");e.className=n.className;var t=document.createTextNode(n.label);e.appendChild(t);var i=document.createElement("input");try{i.type=n.type}catch{i.type="text"}return i.id=n.id,i.value=n.defaultValue,n.title&&(i.title=n.title),n.checked!==void 0&&(i.checked=n.checked),n.min!==void 0&&(i.min=n.min),n.max!==void 0&&(i.max=n.max),n.step!==void 0&&(i.step=n.step),e.appendChild(i),e},_createStylingDiv:function(n){var e=document.createElement("div");e.className="gp-styling-div";var t=document.createElement("ul"),i=null,r=n.geomType.toLowerCase();switch(r){case"point&text":case"point":i=this._createMarkersChooser({className:"gp-styling-option",defaultValue:n.initValues.markerSrc}),t.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:n.initValues.markerSize*10}),t.appendChild(i),n.initValues.markerCustom,r==="point&text"&&(i=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:n.initValues.labelDisplay,defaultValue:n.initValues.labelDisplay}),t.appendChild(i));break;case"text":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:n.initValues.fillColor}),t.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),t.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:n.initValues.strokeWidth}),t.appendChild(i);break;case"line":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),t.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:n.initValues.strokeWidth}),t.appendChild(i);break;case"polygon":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),t.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:n.initValues.strokeWidth}),t.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:n.initValues.fillColor}),t.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:n.initValues.fillOpacity*10}),t.appendChild(i);break;default:logger$q.log("Unhandled geometry type for styling.")}e.appendChild(t);var s=document.createElement("input");s.type="button",s.className="gp-styling-button",s.value=this.options.labels.applyToObject,s.onclick=function(){n.applyFunc.call(this,"apply")},e.appendChild(s);var o=document.createElement("input");o.type="button",o.value=this.options.labels.setAsDefault,o.className="gp-styling-button",o.onclick=function(){n.applyFunc.call(this,"default")},e.appendChild(o);var a=document.createElement("input");return a.type="button",a.className="gp-styling-button closer",a.onclick=function(){n.applyFunc.call(this,"cancel")},e.appendChild(a),e},_createLabelDiv:function(n){var e=document.createElement("div");e.className="gp-label-div";var t=null;if(n.geomType==="Text"?(t=document.createElement("input"),t.type="text",t.className="gp-input-label-style"):(t=document.createElement("textArea"),t.rows=2,t.cols=40,t.className="gp-textarea-att-label-style"),n.text&&(t.value=n.text),t.autocomplete="off",t.placeholder=n.placeholder,t.id=n.inputId,e.appendChild(t),t.onblur=function(){n.applyFunc.call(this,n.key,t.value,!0)},t.onkeyup=function(o){n.geomType==="Text"&&o.keyCode===13&&n.applyFunc.call(this,n.key,t.value,!0),o.keyCode===27&&n.applyFunc.call(this,n.key,t.value,!1)},n.measure&&n.geomType!=="Text"){var i=document.createElement("input");i.type="text",i.readonly=!0,i.className="gp-input-measure-style",i.value=n.measure,e.appendChild(i)}if(n.geomType!=="Text"){var r=document.createElement("input");r.type="button",r.className="gp-styling-button",r.value=this.options.labels.saveDescription,r.onclick=function(){n.applyFunc.call(this,n.key,t.value,!0)},e.appendChild(r);var s=document.createElement("input");s.type="button",s.className="gp-styling-button closer",s.onclick=function(){n.applyFunc.call(this,n.key,t.value,!1)},e.appendChild(s)}return e},_handleDOMToolClick:function(n,e,t){for(var i in t.dtOptions){var r=t._addUID("drawing-tool-"+t.dtOptions[i].id),s=document.getElementById(r);if(r!==e){s.className="drawing-tool",t.dtOptions[i].active=!1;continue}t.dtOptions[i].active?s.className="drawing-tool":s.className="drawing-tool drawing-tool-active",t.dtOptions[i].active=!t.dtOptions[i].active}}},logger$p=LoggerByDefault.getLogger("Drawing"),Xt,Drawing=(Xt=class extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Xt))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,this.options.position?null:e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$p.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$p.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$p.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new KML({writeStyles:!0});break;case"GPX":t=new GPX({});break;case"GEOJSON":t=new GeoJSON({});break}if(!t)return logger$p.log("Impossible to export : format unknown !?"),e;var i=this.layer.getSource().getProjection();return i=i||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:i}),e}setCollapsed(e){if(e===void 0){logger$p.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$p.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var i=!1;t.forEach(r=>{r===e&&(logger$p.trace("layer already in map. Not adding."),i=!0)}),i||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(r=>{var s=r.getStyle();if(typeof s=="function"){var o=r.getStyleFunction();if(o){var a=o.call(this,r,0);a&&a.length!==0&&r.setStyle(Array.isArray(a)?a[0]:a)}}}),this.layer=e,this.getMap().getControls().forEach(r=>{if(r instanceof LayerSwitcher){var s=this.layer.gpLayerId;r._layers[s].title===s&&r.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,i=0;i<this.options.markersList.length;i++)if(e&&this.options.markersList[i].src===e)return t=this.options.markersList[i],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(i=>{switch(i){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[i]=e[i];break}}),t}_initialize(e){this._uid=SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Xt.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=Xt.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Xt.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=Xt.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Xt.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=Xt.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Xt.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=Xt.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){logger$p.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=Xt.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var i=parseInt(e.defaultStyles[t],10);if(isNaN(i)||i<0){logger$p.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=Xt.DefaultStyles[t];return}this.options.defaultStyles[t]=i}if(t==="markerSize"){var r=parseFloat(e.defaultStyles[t]);if(isNaN(r)||r<0){logger$p.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=Xt.DefaultStyles[t];return}this.options.defaultStyles[t]=r}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,t=new VectorLayer({source:new VectorSource({features:e})});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var i=this._drawingPanel=this._createDrawingPanelElement(),r=this._createDrawingPanelDivElement();i.appendChild(r);var s=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();r.appendChild(s);var o=this._createDrawingToolsDivSections();r.appendChild(o);for(var a=this._createDrawingToolsSections(),d=0;d<a.length;d++)o.appendChild(a[d]);return e.appendChild(i),e}_drawEndFeature(e,t){var i=null;switch(t){case"Point":i=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":i=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":i=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(i),this._updateMeasure(e,t),this.options.popup.display){var r=this,s=function(v,_,C){if(r.getMap().removeOverlay(r.popupOvl),r.popupOvl=null,C&&_&&_.trim().length>0){var E={};E[v]=_.replace(/\n/g,"<br>"),e.setProperties(E)}},o=null,a=!0,d=this.options.popup.function;d&&typeof d=="function"&&(o=d.call(r,{feature:e,geomType:t,closeFunc:function(){s(null,!1)},saveFunc:function(v){s(v,!0)}}),o&&(a=!1,o.tabIndex=-1,o.onblur=function(){r.getMap().removeOverlay(r.popupOvl),r.popupOvl=null})),a&&(o=this._createLabelDiv({applyFunc:s,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:o,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var y=e.getGeometry().getExtent();this.popupOvl.setPosition([(y[0]+y[2])/2,(y[1]+y[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var i=null,r=null,s=null,o=null,a={},d=t.selected[0].getGeometry(),y=t.selected[0].getStyle();if(d instanceof Point$1||d instanceof MultiPoint){if(y&&y.getImage()&&typeof y.getImage().getSrc=="function"&&y.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(o="Point",typeof y.getImage().getSrc=="function"?(a.markerSrc=y.getImage().getSrc(),a.markerSize=y.getImage().getScale()||1,a.markerAnchor=y.getImage().getAnchor(),y.getImage().getColor()?(i=y.getImage().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.markerColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.markerColor=r.hex,a.markerOpacity=r.opacity):a.markerColor=this.options.markersList[0].color||"#ffffff"):(a.markerSrc=this.options.markersList[0].src,a.markerSize=this.options.markersList[0].scale||1,a.markerColor=this.options.markersList[0].color||"#ffffff",a.markerAnchor=this.options.markersList[0].anchor),a.markerCustom=!this._getsMarkersOptionsFromSrc(a.markerSrc)),y&&y.getText()){var v=t.selected[0].getProperties().name;if(v&&(o=o==="Point"?"Point&Text":"Text",y.getText().getStroke()&&y.getText().getStroke().getColor()&&(i=y.getText().getStroke().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.strokeColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity),y.getText().getStroke()&&y.getText().getStroke().getWidth()&&(a.strokeWidth=y.getText().getStroke().getWidth()),y.getText().getFill()&&y.getText().getFill().getColor()&&(i=y.getText().getFill().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.fillColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.fillColor=r.hex,a.fillOpacity=r.opacity),a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.textStrokeColor,a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.textStrokeWidth,a.fillColor=a.hasOwnProperty("fillColor")?a.fillColor:this.options.defaultStyles.textFillColor,o==="Point&Text")){var _=y.getText().getText();_||y.getText().setText(v);var C=t.selected[0].get("checked");a.labelDisplay=C===void 0?this.options.defaultStyles.labelDisplay:C}}}else d instanceof LineString||d instanceof MultiLineString?(o="Line",y&&y.getStroke()&&(y.getStroke().getWidth()&&(a.strokeWidth=y.getStroke().getWidth()),y.getStroke().getColor()&&(i=y.getStroke().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.strokeColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity)),a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.strokeWidth,a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.strokeColor):(d instanceof Polygon||d instanceof MultiPolygon)&&(o="Polygon",y&&y.getStroke()&&(y.getStroke().getWidth()&&(a.strokeWidth=y.getStroke().getWidth()),y.getStroke().getColor()&&(i=y.getStroke().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.strokeColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity)),y&&y.getFill()&&y.getFill().getColor()&&(i=y.getFill().getColor(),Array.isArray(i)?i="rgba("+i.join()+")":a.fillColor=i,r=ColorUtils.isRGB(i)?ColorUtils.rgbaToHex(i):{hex:i,opacity:1},a.fillColor=r.hex,a.fillOpacity=r.opacity),a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.polyStrokeWidth,a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.polyStrokeColor,a.fillColor=a.hasOwnProperty("fillColor")?a.fillColor:this.options.defaultStyles.polyFillColor,a.fillOpacity=a.hasOwnProperty("fillOpacity")?a.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!o){logger$p.log("Unhandled geometry type for styling.");return}var E=this,S=function(P){if(P==="cancel"){E.getMap().removeOverlay(s);return}var x=P!=="apply",T=document.getElementById(E._addUID("fillColor")),R=document.getElementById(E._addUID("fillOpacity")),L=document.getElementById(E._addUID("strokeColor")),k=document.getElementById(E._addUID("strokeWidth")),N=document.getElementById(E._addUID("markerSize"));switch(o.toLowerCase()){case"text":x?(E.options.defaultStyles.textStrokeColor=L.value,E.options.defaultStyles.textStrokeWidth=k.value,E.options.defaultStyles.textFillColor=T.value):t.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:y.getText().getText(),fill:new Fill({color:T.value}),stroke:new Stroke({color:L.value,width:parseInt(k.value,10)})})}));break;case"point&text":case"point":var D=document.querySelector("input[type='checkbox']"),G=null,U=parseInt(N.value,10)/10,F=document.querySelector("input[name='marker']:checked");if(F&&(G=E._getsMarkersOptionsFromSrc(F.value),G.scale=U),x){if(E.options.defaultStyles.markerSize=U,E.options.markersList.length>1){var B=E.options.markersList.findIndex(function(X){return X===G});B>0&&(E.options.markersList.splice(B,1),E.options.markersList.splice(0,0,G))}o.toLowerCase()==="point&text"&&(E.options.defaultStyles.textStrokeColor=a.strokeColor,E.options.defaultStyles.textStrokeWidth=a.strokeWidth,E.options.defaultStyles.textFillColor=a.fillColor,E.options.defaultStyles.labelDisplay=a.labelDisplay)}else{var z={};o.toLowerCase()==="point&text"&&(t.selected[0].set("checked",D.checked),z={text:new Text({font:"16px sans",textAlign:"left",text:D.checked?t.selected[0].get("name"):"",fill:new Fill({color:a.fillColor}),stroke:new Stroke({color:a.strokeColor,width:parseInt(a.strokeWidth,10)})})}),G?t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(E._getIconStyleOptions(G))},z))):t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:a.markerSrc,anchor:a.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:U})},z)))}break;case"line":x?(E.options.defaultStyles.strokeColor=L.value,E.options.defaultStyles.strokeWidth=parseInt(k.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(k.value,10),color:L.value})}));break;case"polygon":var Y=parseInt(R.value,10)/10;x?(E.options.defaultStyles.polyStrokeColor=L.value,E.options.defaultStyles.polyFillColor=T.value,E.options.defaultStyles.polyFillOpacity=Y,E.options.defaultStyles.polyStrokeWidth=parseInt(k.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(k.value,10),color:L.value}),fill:new Fill({color:ColorUtils.hexToRgba(T.value,Y)})}));break}x||E.getMap().removeOverlay(s)},b=this._createStylingDiv({geomType:o,initValues:a,applyFunc:S});s=new Overlay({element:b,positioning:"top-center"}),this.getMap().addOverlay(s),s.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=s,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var i=null,r=null,s=null,o=null,a=t.selected[0].getGeometry(),d=t.selected[0].getStyle();if(a instanceof Point$1||a instanceof MultiPoint){var y=t.selected[0].getProperties().name;d&&d.getText()&&y?r="Text":d&&d.getImage()&&(r="Point")}else if(a instanceof LineString||a instanceof MultiLineString)r="Line";else if(a instanceof Polygon||a instanceof MultiPolygon)r="Polygon";else{logger$p.log("Geometry type for styling not supported .");return}if(!r){logger$p.log("Unhandled geometry type for styling.");return}if(r==="Text")s=d.getText().getText();else{var v=t.selected[0].getProperties();v&&(v.hasOwnProperty("description")||v.hasOwnProperty("desc"))&&(s=v.description||v.desc),v&&v.hasOwnProperty("measure")&&(o=v.measure)}var _=this,C=function(S,b,P){if(_.getMap().removeOverlay(i),!!P){var x=t.selected[0];if(r==="Text"){var T=x.getStyle();T.getText().setText(b),x.setProperties({name:b}),x.setStyle(T);return}var R={};R[S]=b.replace(/\n/g,"<br>"),x.setProperties(R)}},E=this._createLabelDiv({applyFunc:C,inputId:this._addUID("label-input"),placeholder:r==="Text"?"Saisir un label...":"Saisir une description...",text:s,key:"description",measure:this.options.tools.measure?o:null,geomType:r});i=new Overlay({element:E,positioning:"top-center"}),this.getMap().addOverlay(i),i.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=i,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){logger$p.log(e);var i=null,r=this.getMap().getView().getProjection();function s(k,N){N=N||2;var D=Math.pow(10,N);return Math.round(k*D)/D}var o=t||e.getProperties().type;switch(o){case"Point":var a=e.getGeometry().getCoordinates(),d=transform$1(a,r,"EPSG:4326");i="lon : ",i+=s(d[0],4)+"°",i+=" / ",i+="lat : ",i+=s(d[1],4)+"°";break;case"LineString":for(var y=0,v=e.getGeometry().getCoordinates(),_=0,C=v.length-1;_<C;++_){var E=transform$1(v[_],r,"EPSG:4326"),S=transform$1(v[_+1],r,"EPSG:4326");y+=getDistance(E,S)}i=y>1e3?s(y/1e3,3)+" km":s(y,3)+" m";break;case"Polygon":var b=0,P=e.getGeometry().clone(),x=P.getLinearRing(0).getCoordinates();b=Math.abs(getArea(new Polygon([x])));var T=P.getLinearRings();if(T.length>1)for(var R=1;R<T.length;R++){var L=T[R].getCoordinates();b-=Math.abs(getArea(new Polygon([L])))}i=b>1e6?s(b/1e6,3)+" km^2":s(b,2)+" m^2";break}e.setProperties({measure:i,type:o})}_handleToolClick(e,t,i){var r=i.getMap();if(!r){logger$p.trace("Drawing control not attached to any map.");return}switch(Interactions.unset(r,{current:"Drawing"}),i.interactionCurrent&&(r.removeInteraction(i.interactionCurrent),i.interactionCurrent=null),i.interactionSelectEdit&&(r.removeInteraction(i.interactionSelectEdit),i.interactionSelectEdit=null),i.popupOvl&&(i.getMap().removeOverlay(i.popupOvl),i.popupOvl=null),this.layer||this._createEmptyLayer(),t){case this._addUID("drawing-tool-point"):i.dtOptions.points.active&&(i.interactionCurrent=new Draw({stopClick:!0,source:i.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"Point")},i));break;case this._addUID("drawing-tool-line"):i.dtOptions.lines.active&&(i.interactionCurrent=new Draw({stopClick:!0,source:i.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"LineString")},i));break;case this._addUID("drawing-tool-polygon"):i.dtOptions.polygons.active&&(i.interactionCurrent=new Draw({stopClick:!0,source:i.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"Polygon")},i));break;case this._addUID("drawing-tool-holes"):i.dtOptions.holes.active&&(i.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),i.interactionSelectEdit.setProperties({name:"Drawing",source:i}),r.addInteraction(i.interactionSelectEdit),i.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),i.interactionCurrent.on("drawstart",function(s){},i),i.interactionCurrent.on("drawend",function(s){var o=i.interactionSelectEdit.getFeatures();if(o.getLength()){for(var a=o.item(0),d=s.feature.getGeometry().getCoordinates()[0],y=!0,v=0;v<d.length;v++)if(!a.getGeometry().intersectsCoordinate(d[v])){y=!1;break}if(!y)return;a.getGeometry().appendLinearRing(new LinearRing(d)),s.feature=a,i._drawEndFeature(s.feature,"Polygon")}},i));break;case this._addUID("drawing-tool-text"):i.dtOptions.text.active&&(i.interactionCurrent=new Draw({stopClick:!0,source:i.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),i.interactionCurrent.on("drawend",s=>{var o=null,a=function(y,v,_){if(i.getMap().removeOverlay(o),!_){i.layer.getSource().removeFeature(s.feature);return}var C={};C[y]=v,s.feature.setProperties(C),s.feature.setStyle(new Style$1({image:new Icon(i._getIconStyleOptions(i.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:v,fill:new Fill({color:i.options.defaultStyles.textFillColor}),stroke:new Stroke({color:i.options.defaultStyles.textStrokeColor,width:3})})}))},d=this._createLabelDiv({applyFunc:a,inputId:i._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});o=new Overlay({element:d,positioning:"top-center"}),i.getMap().addOverlay(o),o.setPosition(s.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):i.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,i.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),i.interactionSelectEdit.on("select",s=>{}),i.interactionSelectEdit.setProperties({name:"Drawing",source:i}),r.addInteraction(i.interactionSelectEdit),i.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),i.interactionCurrent.on("modifyend",s=>{var o=s.features.item(0);i._updateMeasure(o)}));break;case this._addUID("drawing-tool-display"):i.dtOptions.display.active&&(i.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):i.dtOptions.tooltip.active&&(i.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):i.dtOptions.remove.active&&(i.interactionCurrent=i._createRemoveInteraction());break;default:logger$p.trace("unhandled tool type")}i.interactionCurrent&&(i.interactionCurrent.setProperties({name:"Drawing",source:this}),r.addInteraction(i.interactionCurrent)),logger$p.log("interactions",r.getInteractions())}onShowDrawingClick(){var e=this.getMap();Interactions.unset(e);var t=this._showDrawingButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position);for(var i in this.dtOptions)if(this.dtOptions.hasOwnProperty(i)&&this.dtOptions[i].active){var r=this._addUID("drawing-tool-"+this.dtOptions[i].id);document.getElementById(r).className="drawing-tool",this.dtOptions[i].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),i="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+i+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),t.dispatchEvent(r)}else t.click()}}},_n(Xt,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),_n(Xt,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Outils de création",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'édition",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),_n(Xt,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),_n(Xt,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Xt);Object.assign(Drawing.prototype,DrawingDOM);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$o=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.className=this._addUID("GPlocationPoint"),n.className+=" GPwidget gpf-widget ",n},_createLocationPointElement:function(n,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+n),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(n,e){var t=this,i=document.createElement("button");return i.id=this._addUID("GPlocationOriginLabel_"+n),i.innerHTML=e,i.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",i.setAttribute("type","button"),i.addEventListener("click",function(r){for(var s=SelectorID.index(this.id),o=document.getElementsByClassName(t._addUID("GPlocationPoint")),a=0;a<o.length;a++){var d=o[a].childNodes[0].id,y=SelectorID.index(d);document.getElementById(t._addUID("GPlocationPoint_"+y)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+s)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+s)).value="",document.getElementById(t._addUID("GPlocationPoint_"+s)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+s)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+s)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+s)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),t.onLocationClearPointClick(r)}),i},_createLocationAutoCompleteteInputElement:function(n){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+n),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse, un lieu...",t.autocomplete="off",t.addEventListener("keyup",function(i){var r=i.which||i.keyCode;if(!(r===13||r===10||r===38||r===40)){var s=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+s)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(i)}}),t.addEventListener("keydown",function(i){var r=i.which||i.keyCode,s=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+n));if(s){var o=s.getElementsByClassName("GPautoCompleteProposal current"),a=s.getElementsByClassName("GPautoCompleteProposal"),d=a.length;if(d){var y=null;if(o.length)y=o[0];else{y=a[0],y.className="GPautoCompleteProposal current",y.style.color="#000000",y.style["background-color"]="#CEDBEF";return}var v=parseInt(SelectorID.index(y.id),10),_=v===d-1?a[0]:a[v+1],C=v===0?a[d-1]:a[v-1];switch(y.style["background-color"]="",y.style.color="",C.style["background-color"]="",C.style.color="",_.style["background-color"]="",_.style.color="",r){case 38:logger$o.log("arrow up"),y.className="GPautoCompleteProposal",C.className="GPautoCompleteProposal current",C.style.color="#000000",C.style["background-color"]="#CEDBEF";break;case 40:logger$o.log("arrow down"),y.className="GPautoCompleteProposal",_.className="GPautoCompleteProposal current",_.style.color="#000000",_.style["background-color"]="#CEDBEF";break;case 13:logger$o.log("enter"),y.click(i);break}y.focus()}}}),t},_createLocationCoordinateInputElement:function(n){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+n),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var i=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+i)).click()}),t},_createLocationPointerShowInputElement:function(n){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+n),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(n){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+n),t.htmlFor=this._addUID("GPlocationOriginPointer_"+n),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",t.title="Pointer un lieu sur la carte",t.setAttribute("type","button"),t.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var r=SelectorID.index(this.id),s=document.getElementsByClassName(e._addUID("GPlocationPoint")),o,a,d;for(o=0;o<s.length;o++)a=s[o].childNodes[0].id,d=SelectorID.index(a),r!==d&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+d)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+d)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+d)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+d)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+d)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value="",o=0;o<s.length;o++)a=s[o].childNodes[0].id,d=SelectorID.index(a),document.getElementById(e._addUID("GPlocationPoint_"+d)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+r)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+r)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value="Pointer un lieu sur la carte",o=0;o<s.length;o++)a=s[o].childNodes[0].id,d=SelectorID.index(a),r===d?document.getElementById(e._addUID("GPlocationPoint_"+d)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+d)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+r)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+r)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).disabled=!0}e.onActivateMapPointClick(i)}),t},_createLocationRemovePointElement:function(n){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+n),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",t.title="Supprimer l'étape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener("click",function(i){var r=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!r);var s=document.getElementsByClassName(e._addUID("GPlocationPoint")),o=s.length-1,a=s[0].childNodes[0].id,d=s[o].childNodes[0].id,y=SelectorID.index(a),v=SelectorID.index(d);if(n!==y&&n!==v){var _=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+_)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+_)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+_)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+_)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+_)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",e.onLocationRemovePointClick(i)}}),t},_createLocationAddPointElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(t){for(var i=1,r=0,s=document.getElementsByClassName(n._addUID("GPlocationPoint")),o=1;o<s.length-1;o++){var a=s[o].childNodes[0].id,d=SelectorID.index(a);document.getElementById(n._addUID("GPlocationPoint_"+d))&&(document.getElementById(n._addUID("GPlocationPoint_"+d)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?i===1&&(i=d):r++)}i<s.length&&(document.getElementById(n._addUID("GPlocationPoint_"+i)).className="GPflexInput GPlocationStageFlexInput gpf-flex"),r===4&&(document.getElementById(n._addUID("GPlocationStageAdd")).style.display="none");var y=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!y),n.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(n){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+n),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(n){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+n),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(n,e,t){var i=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+n)),r=document.createElement("div");r.id=this._addUID("AutoCompletedLocation_"+t),r.className="GPautoCompleteProposal gpf-panel__items",r.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),i.appendChild(r)},GPdisplayCoordinate:function(n){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var i=e[t].childNodes[0].id,r=SelectorID.index(i);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=n,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var s=0;s<e.length;s++){i=e[s].childNodes[0].id;var o=SelectorID.index(i);document.getElementById(this._addUID("GPlocationPoint_"+o)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+o))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+o)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$n=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Wn extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Wn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$n.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var i=this.getMap(),r=i.getView().getProjection().getCode();t||(t=r),this._setCoordinate(e,t),e=transform$1(e,t,r),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),i=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(i);var r=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);i.appendChild(r);var s=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);s.addEventListener?s.addEventListener("click",()=>this.onAutoCompleteInputClick()):s.attachEvent&&s.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),i.appendChild(s);var o=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);i.appendChild(o);var a=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);i.appendChild(a);var d=this._inputShowPointer=this._createLocationPointerInputElement(e);if(i.appendChild(d),this.options.tag.addOption){var y=this._addPointElement=this._createLocationAddPointElement();i.appendChild(y)}if(this.options.tag.removeOption){var v=this._removePointElement=this._createLocationRemovePointElement(e);i.appendChild(v)}var _=this._suggestedContainer=this._createLocationAutoCompleteElement(e),C=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return _.appendChild(C),t.appendChild(_),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var i=this.options.autocompleteOptions||{},r=i.onSuccess||null,s=i.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var o=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(d){if(d){var y=d.suggestedLocations;o._fillAutoCompletedLocationListContainer(y),r&&r.call(this,d)}},onFailure:function(d){o._clearSuggestedLocation(),logger$n.log(d.message),s&&s.call(this,d)}});var a=this.getMap();a.on("click",()=>this._hideSuggestedLocation()),a.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var i=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=i;var r={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},s=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(s);var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",a)),this._setPosition(i),this._setMarker(i,r,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$n.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var i=e.map.getView().getProjection();this._setCoordinate(t,i),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),i=t.getTargetElement();e?i.style.cursor=e:i.style.cursor=null}_setCoordinate(e,t){this._coordinate=transform$1(e,t,"EPSG:4326");var i=this._coordinate[0].toFixed(4),r=this._coordinate[1].toFixed(4),s=r+" / "+i;this.GPdisplayCoordinate(s)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,i){var r=this.getMap();if(this._marker!=null&&(r.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:s,stopEvent:!1}),r.addOverlay(this._marker),i&&logger$n.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$n.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$n.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions),Helper.assign(t,e);var i=this._resources.AutoCompletion||null;i&&Array.isArray(i)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=i),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$n.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[i],i);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(n){var e=this.uid?n+"-"+this.uid:n;return e}},logger$m=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{control:null,target:null,format:"geojson",name:"export",title:"Exporter",menu:!1,onExport:null},logger$m.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:e.target}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.menu=null,this.icon="☰ ",this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer();this.options.target=e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options=e,this.options.control,this.options.target;var t=this.options.format;t?this.setFormat(t):this.setFormat(""),this.options.name||this.setName("export"),this.options.title||this.setTitle("Exporter"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.icon+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer";var i=this.stringToHTML(`
            <input type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn"
                value="${e}">
        `);this.button=i.firstChild,this.button&&this.button.addEventListener("click",a=>this.onClickButtonExport(a)),t.appendChild(i.firstChild);var r=this.stringToHTML(`
            <div class="GPexportMenuContent ${this.menuClassHidden}">
                <label class="container">GeoJSON
                    <input type="radio" 
                        id="GPmenuFormatGeojson-${this.uid}"
                        name="format" 
                        value="geojson">
                    <span class="checkmark"></span>
                </label>
                <label class="container">KML
                    <input type="radio" 
                        id="GPmenuFormatKml-${this.uid}"
                        name="format" 
                        value="kml">
                    <span class="checkmark"></span>
                </label>
                <label class="container">GPX
                    <input type="radio" 
                        id="GPmenuFormatGpx-${this.uid}"
                        name="format" 
                        value="gpx">
                    <span class="checkmark"></span>
                </label>
            </div>
        `);if(this.menu=r.firstChild,this.menu){if(this.options.menu){var s=this.menu.className;this.menu.className=s.replace(this.menuClassHidden,"")}var o=this.menu.querySelectorAll('input[type=radio][name="format"]');o.forEach(a=>{a.id.toUpperCase().includes(this.options.format.toUpperCase())&&(a.checked=!0),a.addEventListener("change",d=>{this.setFormat(d.target.value)})})}t.appendChild(r.firstChild),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var o=new DOMParser;try{o.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var i=new DOMParser,r=i.parseFromString(e,"text/html");return r.body}var s=document.createElement("div");return s.innerHTML=e,s}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,i){var r=null;if(!e)return logger$m.warn("Impossible to export : no layer is hosting features."),r;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$m.warn("Impossible to export : no features found."),r;e.getSource().getFeatures().forEach(v=>{var _=v.getStyle();!_&&typeof this.options.control.getStyle=="function"&&v.setStyle(this.options.control.getStyle())});var s={defaultStyle:i};t&&(s.extensions={"geoportail:compute":t});var o=null;switch(this.options.format.toUpperCase()){case"KML":s.writeStyles=!0,s.showPointNames=!0,o=new KML(s);break;case"GPX":o=new GPX(s);break;case"GEOJSON":o=new GeoJSON(s);break}if(!o)return logger$m.warn("Impossible to export : format unknown !?"),r;var a=e.getSource().getProjection(),d=this.getMap();d&&(a=a||d.getView().getProjection());var y=e.getSource().getFeatures();return r=o.writeFeatures(y,{dataProjection:"EPSG:4326",featureProjection:a||"EPSG:3857"}),r}onClickButtonExport(e){if(!this.isPluggableControl()){logger$m.warn("Componant not pluggable with the control !");return}var t=this.options.control.getLayer(),i=this.options.control.getData!==void 0?this.options.control.getData():{},r=this.options.control.getStyle!==void 0?this.options.control.getStyle():{},s=this.exportFeatures(t,i,r);if(!(!s||s==="null")){if(this.dispatchEvent({type:"export:compute",content:s}),this.options.onExport&&typeof this.options.onExport=="function"){this.options.onExport(s);return}var o=document.createElement("a"),a="utf-8";if(o.setAttribute("href","data:"+this.mimeType+";charset="+a+","+encodeURIComponent(s)),o.setAttribute("download",this.options.name+this.extension),document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0),o.dispatchEvent(d)}else o.click()}}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setTitle(e){this.options.title=e,this.button&&(this.button.value=this.options.menu?this.icon+e:e)}setMenu(e){if(this.options.menu=e,this.button&&(this.button.value=this.options.menu?this.icon+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var i=this.menu.querySelectorAll('input[type=radio][name="format"]');i.forEach(r=>{r.id.toUpperCase().includes(this.options.format.toUpperCase())&&(r.checked=!0)})}}}Object.assign(ButtonExport.prototype,ExportDOM);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$l=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProute"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowRoutePictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn-icon gpf-btn-icon-route fr-btn",e.title="Ouvrir le calcul d'itinéraire",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowRoutePanelClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowRoutePanelClick(t)}),e},_createRoutePanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GProutePanel"),n.className="GPpanel gpf-panel fr-modal",n},_createRoutePanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createRoutePanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'itinéraire",e.appendChild(t);var i=document.createElement("button");i.id=this._addUID("GProutePanelClose"),i.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Masquer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(n._addUID("GPshowRoutePicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowRoutePicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",i.appendChild(r),e.appendChild(i),e},_createRoutePanelFooterElement:function(){var n=document.createElement("div");return n.className="GPpanelFooter gpf-panel__footer fr-modal__footer",n},_createRoutePanelFormElement:function(){var n=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){logger$l.log(t),t.preventDefault();var i=document.getElementsByClassName(n._addUID("GPlocationPoint")),r=i[0].childNodes[0].id,s=i[i.length-1].childNodes[0].id,o=SelectorID.index(r),a=SelectorID.index(s);if(document.getElementById(n._addUID("GPlocationOrigin_"+o)).value===""&&document.getElementById(n._addUID("GPlocationOriginCoords_"+o)).value===""||document.getElementById(n._addUID("GPlocationOrigin_"+a)).value===""&&document.getElementById(n._addUID("GPlocationOriginCoords_"+a)).value==="")return!1;n._addRouteResultsStagesValuesElement(i);var d=null;document.getElementById(n._addUID("GProuteComputationChoice"))&&(document.getElementById(n._addUID("GProuteComputationFastest"))&&document.getElementById(n._addUID("GProuteComputationFastest")).checked&&(d=document.getElementById(n._addUID("GProuteComputationFastest")).value),document.getElementById(n._addUID("GProuteComputationShortest"))&&document.getElementById(n._addUID("GProuteComputationShortest")).checked&&(d=document.getElementById(n._addUID("GProuteComputationShortest")).value));var y=null;document.getElementById(n._addUID("GProuteTransportCar"))&&document.getElementById(n._addUID("GProuteTransportCar")).checked&&(y=document.getElementById(n._addUID("GProuteTransportCar")).value),document.getElementById(n._addUID("GProuteTransportPedestrian"))&&document.getElementById(n._addUID("GProuteTransportPedestrian")).checked&&(y=document.getElementById(n._addUID("GProuteTransportPedestrian")).value);for(var v=[],_=document.getElementsByClassName("GProuteExclusionsOption"),C=0;C<_.length;C++){var E=_[C].htmlFor,S=document.getElementById(E);S.checked||v.push(S.value)}return n.onRouteComputationSubmit({computation:d,transport:y,exclusions:v}),!1}),e},_createRoutePanelResultsElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteResultsPanel"),n.className="GPelementHidden gpf-hidden",n.appendChild(this._createRouteResultsStagesElement()),n.appendChild(this._createRouteResultsElement()),n.appendChild(this._createRouteShowResultsDetailsElement()),n.appendChild(this._createRouteResultsDetailsElement()),n},_createRouteWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GProuteCalcWaitingContainer"),n.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createRouteResultsStagesElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteResultsStages"),n},_addRouteResultsStagesValuesElement:function(n){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<n.length;e++){var t=n[e].childNodes[0].id,i=SelectorID.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+i)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var r=document.createElement("div");r.className="GProuteResultsStages";var s=document.createElement("div");s.className="GProuteResultStageLabel",s.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+i)).innerHTML+" :",r.appendChild(s);var o=document.createElement("div");o.className="GProuteResultStageValue";var a=document.getElementById(this._addUID("GPlocationOriginCoords_"+i)),d=a.value,y=a.className==="GPelementVisible gpf-visible";d!==null&&d!==""&&y?o.innerHTML=d:o.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+i)).value,r.appendChild(o),o.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(r)}}},_createRouteResultsElement:function(){var n=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var i=document.createElement("div");i.id=this._addUID("GProuteResultsMode");var r=document.createElement("select");r.id=this._addUID("GProuteResultsComputationSelect"),r.className="GPselect gpf-select fr-select",r.addEventListener("change",function(y){n.onRouteModeComputationChangeAndRun(y)});for(var s=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],o=0;o<s.length;o++){var a=document.createElement("option");a.value=s[o].code,a.text=s[o].label,r.appendChild(a)}i.appendChild(r),e.appendChild(i);var d=document.createElement("div");return d.id=this._addUID("GProuteResultsNew"),d.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",d.title="Modifier le calcul",d.addEventListener("click",function(y){document.getElementById(n._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(n._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",n.onShowRouteResultsNewClick(y)}),e.appendChild(d),e},_addRouteResultsValuesElement:function(n,e,t){var i=document.getElementById(this._addUID("GProuteResultsValues"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);var r=document.createElement("div");r.className="GProuteResultsValue";var s=document.createElement("label");s.className="GProuteResultsValueLabel",s.innerHTML="Distance :",r.appendChild(s);var o=0,a=parseInt(n/1e3,10);if(!a)o=Math.round(n)+" m";else{var d=Math.round(n);d=d/1e3,o=d+" km"}var y=document.createElement("div");y.id=this._addUID("GProuteResultsValueDist"),y.innerHTML=o,r.appendChild(y),i.appendChild(r);var v=document.createElement("div");v.className="GProuteResultsValue";var _=document.createElement("label");_.className="GProuteResultsValueLabel",_.innerHTML="Durée :",v.appendChild(_);var C=document.createElement("div");return C.id=this._addUID("GProuteResultsValueDist"),C.innerHTML=t(e),v.appendChild(C),i.appendChild(v),i},_createRouteShowResultsDetailsElement:function(){var n=document.createElement("div");if(n.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",n.appendChild(e)}var t=document.createElement("input");t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",n.appendChild(t);var i=document.createElement("label");if(i.className="gpf-label fr-label",i.htmlFor=this._addUID("GProuteResultsShowDetails"),i.innerHTML="Afficher le détail",n.appendChild(i),!checkDsfr()){var r=document.createElement("label");r.htmlFor=this._addUID("GProuteResultsShowDetails"),r.innerHTML="Masquer le détail",n.appendChild(r);var s=document.createElement("div");s.className="GPfakeBorder",n.appendChild(s)}return n},_createRouteResultsDetailsElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteResultsDetails"),n},_addRouteResultsDetailsElement:function(n,e){var t=this,i=document.getElementById(this._addUID("GProuteResultsDetails"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);for(var r=0,s=0,o=0;o<n.length;o++){var a=o+1,d=n[o],y=document.createElement("div");y.className="GProuteResultsDetailsNumber",y.innerHTML=a+".",i.appendChild(y),s+=parseFloat(d.duration),r+=parseFloat(d.distance);var v=0,_=parseInt(r/1e3,10);if(!_)v=Math.round(r)+" m";else{var C=Math.round(r);C=C/1e3,v=C+" km"}var E=document.createElement("div");E.className="GProuteResultsDetailsInstruction",E.id=this._addUID("GProuteResultsDetailsInstruction_"+a),E.title="distance : "+v+" / temps : "+e(s),E.innerHTML=d.instruction,E.addEventListener("mouseover",function(S){t.onRouteResultsDetailsMouseOver(S)}),E.addEventListener("mouseout",function(S){t.onRouteResultsDetailsMouseOut(S)}),E.addEventListener("click",function(S){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(S)}),i.appendChild(E)}return i},_createRoutePanelFormPointElement:function(n,e,t){var i=this,r=document.createElement("div");r.id="GProutePoint"+n,r.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var s=document.createElement("label");s.id="GProuteOriginLabel"+n,s.htmlFor="GProuteOrigin"+n,s.innerHTML=e,s.addEventListener("click",function(){var v=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+v).value="";for(var _=1;_<8;_++)document.getElementById("GProutePoint"+_).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+v).checked=!1,document.getElementById("GProuteOrigin"+v).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+v).className="GPelementHidden gpf-hidden"}),r.appendChild(s);var o=document.createElement("input");o.id="GProuteOrigin"+n,o.className="GPelementVisible gpf-visible",o.type="text",o.placeholder="Saisir une adresse, un lieu...",o.addEventListener("keyup",function(v){var _=v.which||v.keyCode;if(!(_===13||_===10)){var C=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+C).value.length>2?document.getElementById("GProuteAutoCompleteList"+C).style.display="block":document.getElementById("GProuteAutoCompleteList"+C).style.display="none",i.onAutoCompleteSearchText(v)}}),o.addEventListener("blur",function(){var v=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+v).style.display="none"}),r.appendChild(o);var a=document.createElement("input");a.id="GProuteOriginCoords"+n,a.className="GPelementHidden gpf-hidden",a.type="text",a.disabled=!0,r.appendChild(a);var d=document.createElement("input");d.id="GProuteOriginPointer"+n,d.type="checkbox",r.appendChild(d);var y=document.createElement("label");return y.id="GProuteOriginPointerImg"+n,y.htmlFor="GProuteOriginPointer"+n,y.className="GProuteOriginPointerImg",y.title="Pointer un lieu sur la carte",y.addEventListener("click",function(v){v.preventDefault(),v.stopPropagation();var _=this.id.charAt(this.id.length-1),C;for(C=1;C<8;C++)_!==C&&(document.getElementById("GProuteOriginPointer"+C).checked=!1,document.getElementById("GProuteOriginCoords"+C).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+C).value="",document.getElementById("GProuteOrigin"+C).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+C).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+_).checked){for(document.getElementById("GProuteOriginCoords"+_).value="",C=1;C<8;C++)document.getElementById("GProutePoint"+C).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+_).checked=!1,document.getElementById("GProuteOrigin"+_).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+_).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+_).value="Pointer un lieu sur la carte",C=1;C<8;C++)_===C?document.getElementById("GProutePoint"+C).style.display="flex":document.getElementById("GProutePoint"+C).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+_).checked=!0,document.getElementById("GProuteOrigin"+_).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+_).className="GPelementVisible gpf-visible"}i.onRouteMapPointClick(v)}),r.appendChild(y),r},_createRoutePanelFormRemoveStageElement:function(n){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+n,t.className="GProuteStageRemove",t.title="Supprimer l'étape",n!==1&&n!==7&&t.addEventListener("click",function(i){var r=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+r).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+r).value="",document.getElementById("GProuteOrigin"+r).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+r).value="",document.getElementById("GProuteOriginCoords"+r).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(i)}),t},_createRoutePanelFormAddStageElement:function(){var n=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(t){for(var i=1,r=0,s=2;s<7;s++)document.getElementById("GProutePoint"+s).className==="GPflexInput GProuteStageFlexInputHidden"?i===1&&(i=s):r++;i<7&&(document.getElementById("GProutePoint"+i).className="GPflexInput GProuteStageFlexInput"),r===4&&(document.getElementById("GProuteStageAdd").style.display="none"),n.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(n){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+n,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById("GProuteAutoCompleteList"+n).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById("GProuteAutoCompleteList"+n).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(n,e,t){var i=document.getElementById("GProuteAutoCompleteList"+e),r=document.createElement("div");r.id="AutoCompletedLocation"+t,r.className="GPautoCompleteProposal",r.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(n),i.appendChild(r)},_createRoutePanelFormModeChoiceTransportElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var i=document.createElement("label");i.className="GProuteModeLabel gpf-label fr-label",i.innerHTML="Choisir un mode de déplacement",t.appendChild(i);var r=document.createElement("div");r.className="gpf-radio-btn-group";for(var s=0;s<n.length;s++){var o=n[s],a=document.createElement("div");if(a.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",o==="Voiture"){var d=document.createElement("input");d.id=this._addUID("GProuteTransportCar"),d.type="radio",d.name="GProuteTransport",d.value="Voiture",s===0&&(d.checked=!0),d.addEventListener?d.addEventListener("change",function(C){e.onRouteModeTransportChange(C)}):d.attachEvent&&d.attachEvent("onchange",function(C){e.onRouteModeTransportChange(C)}),a.appendChild(d);var y=document.createElement("label");y.className="GProuteTransportImg gpf-label fr-label",y.htmlFor=this._addUID("GProuteTransportCar"),y.title="Voiture",y.innerHTML="Voiture",a.appendChild(y)}if(o==="Pieton"){var v=document.createElement("input");v.id=this._addUID("GProuteTransportPedestrian"),v.type="radio",v.name="GProuteTransport",v.value="Pieton",s===0&&(v.checked=!0),v.addEventListener?v.addEventListener("change",function(C){e.onRouteModeTransportChange(C)}):v.attachEvent&&v.attachEvent("onchange",function(C){e.onRouteModeTransportChange(C)}),a.appendChild(v);var _=document.createElement("label");_.className="GProuteTransportImg gpf-label fr-label",_.htmlFor=this._addUID("GProuteTransportPedestrian"),_.title="Piéton",_.innerHTML="Piéton",a.appendChild(_)}r.appendChild(a)}return t.appendChild(r),t},_createRoutePanelFormModeChoiceComputeElement:function(){var n=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var t=document.createElement("label");t.className="GProuteComputationLabel gpf-label fr-label",t.innerHTML="Mode de calcul",e.appendChild(t);var i=document.createElement("div");i.className="gpf-radio-btn-group";var r=document.createElement("div");r.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var s=document.createElement("input");s.id=this._addUID("GProuteComputationFastest"),s.type="radio",s.name="GProuteComputation",s.value="fastest",s.checked=!0,s.addEventListener?s.addEventListener("change",function(v){n.onRouteModeComputationChange(v)}):s.attachEvent&&s.attachEvent("onchange",function(v){n.onRouteModeComputationChange(v)}),r.appendChild(s);var o=document.createElement("label");o.className="gpf-label fr-label",o.htmlFor=this._addUID("GProuteComputationFastest"),o.title="Plus rapide",o.innerHTML="Plus rapide",r.appendChild(o),i.appendChild(r);var a=document.createElement("div");a.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var d=document.createElement("input");d.id=this._addUID("GProuteComputationShortest"),d.type="radio",d.name="GProuteComputation",d.value="shortest",d.addEventListener?d.addEventListener("change",function(v){n.onRouteModeComputationChange(v)}):d.attachEvent&&d.attachEvent("onchange",function(v){n.onRouteModeComputationChange(v)}),a.appendChild(d);var y=document.createElement("label");return y.className="gpf-label fr-label",y.htmlFor=this._addUID("GProuteComputationShortest"),y.title="Plus court",y.innerHTML="Plus court",a.appendChild(y),i.appendChild(a),e.appendChild(i),e},_createShowRouteExclusionsPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowRouteExclusionsPicto"),e.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-icon-arrow-down-fill",e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowRouteExclusionsClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowRouteExclusionsClick(t)}),e},_createRoutePanelFormExclusionsElement:function(){var n=document.createElement("div");n.id=this._addUID("GProuteExclusions"),n.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-m-1w",e.innerHTML="Passages autorisés",n.appendChild(e),n},_createRoutePanelFormExclusionOptionsElement:function(n){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];switch(i){case"toll":var s=document.createElement("input");s.id=this._addUID("GProuteExclusionsToll"),s.type="checkbox",s.value="Toll",s.name="Peage",s.checked=!r,s.addEventListener?s.addEventListener("change",function(_){e.onRouteExclusionsChange(_)}):s.attachEvent&&s.attachEvent("onchange",function(_){e.onRouteExclusionsChange(_)}),t.appendChild(s);var o=document.createElement("label");o.className="GProuteExclusionsOption",o.htmlFor=this._addUID("GProuteExclusionsToll"),o.innerHTML="Péages",t.appendChild(o);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.name="Tunnel",a.checked=!r,a.addEventListener?a.addEventListener("change",function(_){e.onRouteExclusionsChange(_)}):a.attachEvent&&a.attachEvent("onchange",function(_){e.onRouteExclusionsChange(_)}),t.appendChild(a);var d=document.createElement("label");d.className="GProuteExclusionsOption",d.htmlFor=this._addUID("GProuteExclusionsTunnel"),d.innerHTML="Tunnels",t.appendChild(d);break;case"bridge":var y=document.createElement("input");y.id=this._addUID("GProuteExclusionsBridge"),y.type="checkbox",y.value="Bridge",y.name="Ponts",y.checked=!r,y.addEventListener?y.addEventListener("change",function(_){e.onRouteExclusionsChange(_)}):y.attachEvent&&y.attachEvent("onchange",function(_){e.onRouteExclusionsChange(_)}),t.appendChild(y);var v=document.createElement("label");v.className="GProuteExclusionsOption",v.htmlFor=this._addUID("GProuteExclusionsBridge"),v.innerHTML="Ponts",t.appendChild(v);break}}return t},_createRouteSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GProuteSubmit"),n.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",n.type="submit",n.value="Calculer",n},_createRouteFormResetElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onRouteResetClick(t)}),e}},logger$k=LoggerByDefault.getLogger("route"),Route=class qn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof qn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var i=this;this.export.on("export:compute",r=>{i.dispatchEvent({type:"export:compute",content:r.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$k.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$k.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$k.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let i=0;i<this._currentPoints.length;i++){const r=this._currentPoints[i];e.push(r.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<this._currentPoints.length;t++){var i=this._currentPoints[t];if(i.getCoordinate()){i.clearResults();var r=t+1+"-"+this._uid;document.getElementById("GPlocationOriginCoords_"+r).value="",document.getElementById("GPlocationOrigin_"+r).value="",document.getElementById("GPlocationPoint_"+r).style.cssText="",t>0&&t<6&&(document.getElementById("GPlocationPoint_"+r).className="GPflexInput GPelementHidden gpf-flex gpf-hidden "),document.getElementById("GPlocationOriginPointer_"+r).checked=!1,document.getElementById("GPlocationOrigin_"+r).className="GPelementVisible gpf-visible",document.getElementById("GPlocationOriginCoords_"+r).className="GPelementHidden gpf-hidden"}}for(var s=0;s<e.points.length;s++){const o=e.points[s];o&&this._currentPoints[s].setCoordinate(o,"EPSG:4326")}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let E=0;E<this._currentPoints.length;E++){const S=this._currentPoints[E];var e=E+1,t=S.getCoordinate();if(t){var i=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);i.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),E>0&&E<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var r=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(r);var s;this._currentTransport==="Pieton"?(s=document.getElementById("GProuteTransportPedestrian-"+this._uid),s&&(s.checked="true")):(s=document.getElementById("GProuteTransportCar-"+this._uid),s&&(s.checked="true"));var o=document.getElementById("GProuteComputationSelect-"+this._uid);o&&(o.value=this._currentComputation);var a=document.getElementById("GProuteExclusionsToll-"+this._uid);a&&(this._currentExclusions.indexOf("toll")!==-1?a.checked=!1:a.checked=!0);var d=document.getElementById("GProuteExclusionsTunnel-"+this._uid);d&&(this._currentExclusions.indexOf("tunnel")!==-1?d.checked=!1:d.checked=!0);var y=document.getElementById("GProuteExclusionsBridge-"+this._uid);y&&(this._currentExclusions.indexOf("bridge")!==-1?y.checked=!1:y.checked=!0);var v=this._currentRouteInformations.totalDistance,_=this._currentRouteInformations.totalTime,C=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);C&&this._fillRouteResultsDetailsContainer(v,_,C),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var t={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(logger$k.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else logger$k.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var i=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(i);var r=this._panelRouteContainer=this._createRoutePanelElement(),s=this._createRoutePanelDivElement();r.appendChild(s);var o=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();s.appendChild(o);var a=this._formRouteContainer=this._createRoutePanelFormElement();a.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var d=this._createRoutePanelFormPointsElement(e),y=0;y<d.length;y++)a.appendChild(d[y]);a.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),a.appendChild(this._showRouteExclusionsElement);var v=this._createRoutePanelFormExclusionsElement();v.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(v);var _=this._createRoutePanelFooterElement();a.appendChild(_);var C=this._createRouteFormResetElement();_.appendChild(C);var E=this._createRouteSubmitFormElement();_.appendChild(E),s.appendChild(a);var S=this._resultsRouteContainer=this._createRoutePanelResultsElement();s.appendChild(S);var b=this._waitingContainer=this._createRouteWaitingElement();return s.appendChild(b),t.appendChild(r),t.addEventListener&&t.addEventListener("click",P=>this._hideRouteSuggestedLocations(P)),t}_initTransport(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var i=this.options.routeOptions;Array.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(i),t}_createRoutePanelFormPointsElement(e){var t=[],i=1,r=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(r.setMap(e),this._addFormPointsEventListeners(r),t.push(r._container),this._currentPoints.push(r),i=2;i<7;i++){var s=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});s.setMap(e),this._addFormPointsEventListeners(s),t.push(s._container),this._currentPoints.push(s)}var o=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arrivée",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return o.setMap(e),this._addFormPointsEventListeners(o),t.push(o._container),this._currentPoints.push(o),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{logger$k.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{logger$k.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){logger$k.log("onRouteComputationSubmit",e);var t=this._currentPoints,i;if(t[0]&&t[0].getCoordinate){var r=t[0].getCoordinate();i={x:r[0],y:r[1]},logger$k.log("start",i)}var s,o=t[t.length-1];if(o&&o.getCoordinate){var a=o.getCoordinate();s={x:a[0],y:a[1]},logger$k.log("end",s)}for(var d=[],y=1;y<t.length-1;y++)if(t[y]&&t[y].getCoordinate){var v=t[y].getCoordinate();if(v){var _={x:v[0],y:v[1]};logger$k.log("step",_),d.push(_)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var C=this.options.routeOptions,E;C.resource?E=C.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(E="bdtopo-valhalla");var S=C.protocol||"XHR",b=C.timeOut||0;S==="JSONP"&&b===0&&(b=15e3);var P=C.onFailure!==null&&typeof C.onFailure=="function",x=C.onSuccess!==null&&typeof C.onSuccess=="function",T=this;this._requestRouting({startPoint:i,endPoint:s,viaPoints:d,graph:C.graph||this._currentTransport,routePreference:C.routePreference||this._currentComputation,exclusions:C.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:b,protocol:S,resource:E,onSuccess:function(R){logger$k.log(R),R&&T._fillRouteResultsDetails(R),x&&C.onSuccess.call(T,R)},onFailure:function(R){T._hideWaitingContainer(),T._clearRouteResultsDetails(),logger$k.log(R.message),P&&C.onFailure.call(T,R)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var i=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=i.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){var t=this.getMap();Interactions.unset(t),!this._geojsonSections&&!this._waiting&&this._clear();var i=this._showRouteButton.ariaPressed;this.collapsed=i!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var t=e.target.value;t&&(logger$k.log(t),this._currentComputation=t)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){logger$k.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,i=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var r=!1,s=null,o=0;o<this._currentExclusions.length;o++)this._currentExclusions[o]===t&&(s=o,r=!0);!r&&!i&&this._currentExclusions.push(t),r&&i&&this._currentExclusions.splice(s,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()}onRouteResultsDetailsMouseOver(e){var t=e.target.id,i=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var r=this._geojsonSections.getSource().getFeatureById(parseInt(i,10));r.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,i=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var r=this._geojsonSections.getSource().getFeatureById(parseInt(i,10));r.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$k.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,i=e.totalTime,r=this._simplifiedInstructions(e.routeInstructions);r&&this._fillRouteResultsDetailsContainer(t,i,r);var s=e.routeGeometry;s&&this._fillRouteResultsDetailsGeometry(s,this._defaultFeatureStyle),r&&r[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(r,this._defaultFeatureStyle);var o=e.bbox;if(o){var a=this.getMap(),d=[o.left,o.bottom,o.right,o.top],y=a.getView().getProjection().getCode();y!=="EPSG:4326"&&(d=transformExtent(d,"EPSG:4326",y)),a.getView().fit(d,a.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,i){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(i,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var i=this.getMap();if(e){var r={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},s=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),o=s.readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:o}),style:t}),i.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var i=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var r=0;r<e.length;r++){for(var s=e[r],o=r+1,a=s.geometry.coordinates,d=0;d<a.length;d++)typeof a[d][0]=="string"&&(a[d][0]=parseFloat(a[d][0]),a[d][1]=parseFloat(a[d][1]));this._geojsonObject.features.push({type:"Feature",geometry:s.geometry,properties:{popupContent:"("+o+") distance : "+this._convertDistance(s.distance)+" / temps : "+this._convertSecondsToTime(s.duration)},id:o})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var y=1;y<this._currentPoints.length-1;y++)if(this._currentPoints[y]&&this._currentPoints[y].getCoordinate){var v=this._currentPoints[y].getCoordinate();v&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var _=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),C=this.getMap().getView().getProjection().getCode(),E=_.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:C});this._geojsonSections=new VectorLayer({source:new VectorSource({features:E}),style:t,opacity:.9});var S;this._currentTransport==="Pieton"?(S="piéton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(S="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),i.addLayer(this._geojsonSections),i.getControls().forEach(b=>{if(b instanceof LayerSwitcher){var P=this._geojsonSections.gpLayerId;b._layers[P].title===P&&b.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+S+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",b=>this._onResultsFeatureMouseOver(b)),i.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",b=>this._onResultsFeatureSelect(b)),i.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],i=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);i&&i.classList&&i.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var r=e.deselected[0],s=document.getElementById("GProuteResultsDetailsInstruction_"+r.getId()+"-"+this._uid);s&&s.classList&&s.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var i=e.selected[0];this._popupContent.innerHTML=i.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var i=document.getElementById("GProuteExclusionsToll-"+this._uid);i&&(this._currentExclusions.indexOf("toll")!==-1?i.checked=!1:i.checked=!0);var r=document.getElementById("GProuteExclusionsTunnel-"+this._uid);r&&(this._currentExclusions.indexOf("tunnel")!==-1?r.checked=!1:r.checked=!0);var s=document.getElementById("GProuteExclusionsBridge-"+this._uid);s&&(this._currentExclusions.indexOf("bridge")!==-1?s.checked=!1:s.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],i=0;i<e.length;i++)e[i].id.indexOf(this._uid)!==-1&&t.push(e[i]);for(var r=1;r<t.length-1;r++){var s=t[r].classList;if(s.length!==0)for(var o=0;o<s.length;o++)s[o]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(r+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,i=0;i<this._currentPoints.length;i++)i!==parseInt(t,10)&&this._currentPoints[i]._hideSuggestedLocation();else for(var r=0;r<this._currentPoints.length;r++)this._currentPoints[r]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],i=e[0];e.length===1&&t.push(i);for(var r=1;r<e.length;r++){var s=e[r];if(s.instruction===i.instruction){i.distance=(parseFloat(s.distance)+parseFloat(i.distance)).toString(),i.duration=(parseFloat(s.duration)+parseFloat(i.duration)).toString();for(var o=1;o<s.geometry.coordinates.length;o++)i.geometry.coordinates.push(s.geometry.coordinates[o])}else t.push(i),i=s,r===e.length-1&&(t.push(s),i=null)}return logger$k.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var i=Math.floor(e/(60*60)),r=e%(60*60),s=Math.floor(r/60);return i&&(t=i+"h "),t+=s+" min",t}_convertDistance(e){var t="",i=parseInt(e/1e3,10);return i?t=i+" km":t=parseInt(e,10)+" m",t}};Object.assign(Route.prototype,RouteDOM);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochron"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowIsoPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn-icon gpf-btn-icon-isocurve fr-btn",e.title="Calculer une isochrone",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowIsoPanelClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowIsoPanelClick(t)}),e},_createIsoPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPisochronPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createIsoPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createIsoPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var i=document.createElement("button");i.id=this._addUID("GPisochronPanelClose"),i.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Fermer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(n._addUID("GPshowIsochronPicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowIsochronPicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",i.appendChild(r),e.appendChild(i),e},_createIsoPanelFormElement:function(){var n=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),n.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPisochronCalcWaitingContainer"),n.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createIsoPanelFooterElement:function(){var n=document.createElement("div");return n.className="GPpanelFooter gpf-panel__footer fr-modal__footer",n},_createIsoPanelFormPointLabel:function(){var n=document.createElement("p");return n.id=this._addUID("GPisochronPointLabelP"),n.className="gpf-label fr-label",n.innerHTML="Départ",n},_createIsoPanelFormTypeChoiceElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochronChoice"),n.className="fr-mt-4w",n},_createIsoPanelFormTypeChoiceChronElement:function(n){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltChron"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!n,i.addEventListener?i.addEventListener("change",function(o){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange(o)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange()}),i.value="isochron",t.appendChild(i);var r=document.createElement("label");r.className="GPisochronChoiceAltImg gpf-label fr-label",r.htmlFor=this._addUID("GPisochronChoiceAltChron"),r.innerHTML="Durée",r.title="Durée",t.appendChild(r);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltChronTxt"),s.className="gpf-hidden",s.innerHTML="Durée",s.addEventListener?s.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(s),t},_createIsoPanelFormTypeChoiceDistElement:function(n){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltDist"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!n,i.addEventListener?i.addEventListener("change",function(o){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange(o)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange()}),i.value="isodistance",t.appendChild(i);var r=document.createElement("label");r.className="GPisochronChoiceAltImg gpf-label fr-label",r.htmlFor=this._addUID("GPisochronChoiceAltDist"),r.innerHTML="Distance",r.title="Distance",t.appendChild(r);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltDistTxt"),s.className="gpf-hidden",s.innerHTML="Distance",s.addEventListener?s.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(s),t},_createIsoPanelFormLabelIsochronElement:function(n){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=n?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=n?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var i=document.createElement("input");i.id=this._addUID("GPisochronValueChronInput1"),i.className="gpf-input fr-input",i.min="0",i.step="1",i.value="0",i.type="number",i.title="Temps",i.addEventListener?i.addEventListener("change",function(a){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(a)}):i.attachEvent&&i.attachEvent("onchange",function(a){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(a)}),t.appendChild(i);var r=document.createElement("label");r.innerHTML="h",r.className="gpf-label fr-label",t.appendChild(r);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.className="gpf-input fr-input",s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.title="Heures",s.addEventListener?s.addEventListener("change",function(a){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(a)}):s.attachEvent&&s.attachEvent("onchange",function(a){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(a)}),t.appendChild(s);var o=document.createElement("label");return o.innerHTML="min",o.className="gpf-label fr-label",t.appendChild(o),t},_createIsoPanelFormLabelIsodistanceElement:function(n){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=n?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=n?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var i=document.createElement("input");i.id=this._addUID("GPisochronValueDistInput"),i.className="gpf-input fr-input fr-ml-1w",i.min="0",i.step="any",i.value="0",i.type="number",i.title="Distance",i.addEventListener?i.addEventListener("change",function(s){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(s)}):i.attachEvent&&i.attachEvent("onchange",function(s){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(s)}),t.appendChild(i);var r=document.createElement("label");return r.innerHTML="km",r.className="gpf-label fr-label",t.appendChild(r),t},_createIsoPanelFormModeChoiceElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochronModeChoice"),n.className="fr-my-4w",n},_createIsoPanelFormModeChoiceTransportElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var i=document.createElement("label");i.className="GPisochronModeLabel gpf-label fr-label",i.innerHTML="Mode de transport",t.appendChild(i);for(var r=0;r<n.length;r++){var s=n[r],o=document.createElement("div");if(o.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-m-1w",s==="Voiture"){var a=document.createElement("input");a.id=this._addUID("GPisochronTransportCar"),a.type="radio",a.name="GPisochronTransport",r===0&&(a.checked=!0),a.addEventListener?a.addEventListener("change",function(_){e.onIsoModeTransportChange(_)}):a.attachEvent&&a.attachEvent("onchange",function(_){e.onIsoModeTransportChange(_)}),a.value="Voiture",o.appendChild(a);var d=document.createElement("label");d.className="GPisochronTransportImg gpf-label fr-label",d.htmlFor=this._addUID("GPisochronTransportCar"),d.title="Véhicule",d.innerHTML="Véhicule",o.appendChild(d)}if(s==="Pieton"){var y=document.createElement("input");y.id=this._addUID("GPisochronTransportPedestrian"),y.type="radio",y.name="GPisochronTransport",r===0&&(y.checked=!0),y.addEventListener?y.addEventListener("change",function(_){e.onIsoModeTransportChange(_)}):y.attachEvent&&y.attachEvent("onchange",function(_){e.onIsoModeTransportChange(_)}),y.value="Pieton",o.appendChild(y);var v=document.createElement("label");v.className="GPisochronTransportImg gpf-label fr-label",v.htmlFor=this._addUID("GPisochronTransportPedestrian"),v.title="À pied",v.innerHTML="À pied",o.appendChild(v)}t.appendChild(o)}return t},_createIsoPanelFormModeChoiceDirectionElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice");var i=document.createElement("label");i.className="GPisochronModeLabel gpf-label fr-label",i.innerHTML="Sens de parcours",t.appendChild(i);var r=document.createElement("select");r.id=this._addUID("GPisochronDirectionSelect"),r.className="GPselect gpf-select fr-select",r.title="Sens de parcours",r.addEventListener("change",function(y){e.onIsoModeDirectionChange(y)});for(var s=0;s<n.length;s++){var o=n[s];if(o.toLowerCase()==="departure"){var a=document.createElement("option");s===0&&(a.selected="selected"),a.value="departure",a.text="Départ",r.appendChild(a)}if(o.toLowerCase()==="arrival"){var d=document.createElement("option");s===0&&(d.selected="selected"),d.value="arrival",d.text="Arrivée",r.appendChild(d)}}return t.appendChild(r),t},_createShowIsoExclusionsPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowIsoExclusionsPicto"),e.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-icon-arrow-down-fill",e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowIsoSettingsClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowIsoSettingsClick(t)}),e},_createIsoPanelFormExclusionsElement:function(){var n=document.createElement("div");n.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",n.appendChild(e),n},_createIsoPanelFormExclusionOptionsElement:function(n){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];switch(i){case"toll":var s=document.createElement("input");s.id=this._addUID("GPisoExclusionsToll"),s.type="checkbox",s.name="Péages",s.checked=!r,s.addEventListener?s.addEventListener("change",function(_){e.onIsoExclusionsChange(_)}):s.attachEvent&&s.attachEvent("onchange",function(_){e.onIsoExclusionsChange(_)}),s.value="Toll",t.appendChild(s);var o=document.createElement("label");o.className="GPisoExclusionsOption",o.htmlFor=this._addUID("GPisoExclusionsToll"),o.innerHTML="Péages",t.appendChild(o);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.name="Tunnel",a.checked=!r,a.addEventListener?a.addEventListener("change",function(_){e.onIsoExclusionsChange(_)}):a.attachEvent&&a.attachEvent("onchange",function(_){e.onIsoExclusionsChange(_)}),a.value="Tunnel",t.appendChild(a);var d=document.createElement("label");d.className="GPisoExclusionsOption",d.htmlFor=this._addUID("GPisoExclusionsTunnel"),d.innerHTML="Tunnels",t.appendChild(d);break;case"bridge":var y=document.createElement("input");y.id=this._addUID("GPisoExclusionsBridge"),y.type="checkbox",y.name="Ponts",y.checked=!r,y.addEventListener?y.addEventListener("change",function(_){e.onIsoExclusionsChange(_)}):y.attachEvent&&y.attachEvent("onchange",function(_){e.onIsoExclusionsChange(_)}),y.value="Bridge",t.appendChild(y);var v=document.createElement("label");v.className="GPisoExclusionsOption",v.htmlFor=this._addUID("GPisoExclusionsBridge"),v.innerHTML="Ponts",t.appendChild(v);break}}return t},_createIsoSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPisochronSubmit"),n.className="GPsubmit gpf-btn fr-btn",n.type="submit",n.value="Calculer",n},_createIsoFormResetElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onIsoResetClick(t)}),e}},logger$j=LoggerByDefault.getLogger("isocurve"),Isocurve=class Kn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Kn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var i=this;this.export.on("export:compute",r=>{i.dispatchEvent({type:"export:compute",content:r.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$j.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$j.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$j.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var i=document.getElementById("GPlocationOriginCoords_1-"+this._uid);i.value="",this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,i){this._clear();var r=this._pictoIsoButton.ariaPressed;r!=="true"&&this._pictoIsoButton.click();var s=this.getMap();if(s){var o={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(o,i),this._originPoint.setCoordinate(e);var a=this._originPoint.getCoordinate(),d=document.getElementById("GPlocationOrigin_1-"+this._uid);if(d.value=a[0].toFixed(4)+" / "+a[1].toFixed(4),this._currentTransport=o.transport,o.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=o.exclusions,this._currentComputation=o.method,o.method==="time"){var y=t.split(".");this._currentTimeHour=y[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=y[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=o.direction,o.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var i=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(i/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((i/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&logger$j.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$j.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?logger$j.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else logger$j.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&logger$j.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$j.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var i=this.options.isocurveOptions;Array.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var i=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(i);var r=this._IsoPanelContainer=this._createIsoPanelElement(),s=this._createIsoPanelDivElement();r.appendChild(s);var o=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();s.appendChild(o);var a=this._formContainer=this._createIsoPanelFormElement();a.appendChild(this._createIsoPanelFormPointLabel());var d=this._createIsoPanelFormPointElement(e);a.appendChild(d);for(var y=!1,v=!1,_=this._createIsoPanelFormTypeChoiceElement(),C=0;C<this.options.methods.length;C++)this.options.methods[C]==="time"&&(y=C===0,_.appendChild(this._createIsoPanelFormTypeChoiceChronElement(y))),this.options.methods[C]==="distance"&&(v=C===0,_.appendChild(this._createIsoPanelFormTypeChoiceDistElement(v)));a.appendChild(_),a.appendChild(this._createIsoPanelFormLabelIsochronElement(y)),a.appendChild(this._createIsoPanelFormValueIsochronElement(y)),a.appendChild(this._createIsoPanelFormLabelIsodistanceElement(v)),a.appendChild(this._createIsoPanelFormValueIsodistanceElement(v));var E=this._createIsoPanelFormModeChoiceElement();if(E.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),E.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),a.appendChild(E),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){a.appendChild(this._createShowIsoExclusionsPictoElement());var S=this._createIsoPanelFormExclusionsElement();S.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(S)}var b=this._createIsoPanelFooterElement();a.appendChild(b);var P=this._createIsoFormResetElement();b.appendChild(P);var x=this._submitContainer=this._createIsoSubmitFormElement();b.appendChild(x),s.appendChild(a);var T=this._waitingContainer=this._createIsoWaitingElement();return r.appendChild(T),t.appendChild(r),t.addEventListener&&t.addEventListener("click",R=>this._hideIsoSuggestedLocations(R)),t}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var i=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=i.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$j.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};logger$j.log("origin : ",t);var i,r;if(this._currentComputation.toLowerCase()==="time"){var s=document.getElementById("GPisochronValueChronInput1-"+this._uid),o=parseInt(s.value,10);isNaN&&isNaN(o)&&(o=0);var a=document.getElementById("GPisochronValueChronInput2-"+this._uid),d=parseInt(a.value,10);isNaN&&isNaN(d)&&(d=0),i=o*3600+d*60,logger$j.log("time : "+i)}if(this._currentComputation.toLowerCase()==="distance"){var y=document.getElementById("GPisochronValueDistInput-"+this._uid);r=parseFloat(y.value)*1e3,logger$j.log("distance : "+r)}if(!i&&!r){logger$j.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var v=this.options.isocurveOptions||{},_=v.protocol||"XHR",C=v.timeOut||0;_==="JSONP"&&C===0&&(C=15e3);var E=v.onFailure!==null&&typeof v.onFailure=="function",S=v.onSuccess!==null&&typeof v.onSuccess=="function",b=this,P={position:t,graph:v.graph||this._currentTransport,exclusions:v.exclusions||this._currentExclusions,method:v.method||this._currentComputation,smoothing:v.smoothing||!0,timeOut:C,protocol:_,resource:v.resource,onSuccess:function(x){logger$j.log(x),x&&b._drawIsoResults(x),S&&v.onSuccess.call(b,x)},onFailure:function(x){b._hideWaitingContainer(),logger$j.log(x.message),E&&v.onFailure.call(b,x)}};(this._currentDirection.toLowerCase()==="arrival"||v.reverse)&&(P.reverse=!0),i&&(P.time=i),r&&(P.distance=r),this._requestIsoCurve(P)}onShowIsoPanelClick(){var e=this.getMap();Interactions.unset(e);var t=this._pictoIsoButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,i=e.target.checked;if(t){for(var r=!1,s=null,o=0;o<this._currentExclusions.length;o++)deepEqual(this._currentExclusions[o],t.toLowerCase())&&(s=o,r=!0);!r&&!i&&this._currentExclusions.push(t.toLowerCase()),r&&i&&(this._currentExclusions[s]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$j.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var i=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),r=t.getView().getProjection().getCode(),s=i.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:r});this._geojsonLayer=new VectorLayer({source:new VectorSource({features:s}),style:this._defaultFeatureStyle,opacity:.9});var o;if(this._currentTransport==="Pieton"?(o="piéton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(o="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),s[0]&&s[0].getGeometry()&&s[0].getGeometry().getExtent()){var a=s[0].getGeometry().getExtent();t.getView().fit(a,t.getSize())}var d=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(y=>{if(y instanceof LayerSwitcher){var v=this._geojsonLayer.gpLayerId;y._layers[v].title===v&&y.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+d+"/"+o+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var i=document.getElementById("GPisochronValueDistInput-"+this._uid);i&&(i.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var r;this._currentTransport==="Pieton"?(r=document.getElementById("GPisochronTransportPedestrian-"+this._uid),r&&(r.checked="true")):(r=document.getElementById("GPisochronTransportCar-"+this._uid),r&&(r.checked="true"));var s;this._currentComputation.toLowerCase()==="distance"?(s=document.getElementById("GPisochronChoiceAltDist-"+this._uid),s&&(s.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(s=document.getElementById("GPisochronChoiceAltChron-"+this._uid),s&&(s.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var o=document.getElementById("GPisochronDirectionSelect-"+this._uid);o&&(o.value=this._currentDirection),o.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var a=document.getElementById("GPisoExclusionsToll-"+this._uid);a&&(this._currentExclusions.indexOf("toll")!==-1?a.checked=!1:a.checked=!0);var d=document.getElementById("GPisoExclusionsTunnel-"+this._uid);d&&(this._currentExclusions.indexOf("tunnel")!==-1?d.checked=!1:d.checked=!0);var y=document.getElementById("GPisoExclusionsBridge-"+this._uid);y&&(this._currentExclusions.indexOf("bridge")!==-1?y.checked=!1:y.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(n,e){if(n===e)return!0;if(typeof n=="object"&&n!=null&&typeof e=="object"&&e!=null){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(var t in n)if(e.hasOwnProperty(t)){if(!deepEqual(n[t],e[t]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocoding"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowReverseGeocodingPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn-icon gpf-btn-icon-reverse fr-btn",e.title="Ouvrir la recherche inverse",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowReverseGeocodingClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowReverseGeocodingClick()}),e},_createReverseGeocodingWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),n.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createReverseGeocodingResultsPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocodingResultsPanel"),n.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",n},_createReverseGeocodingResultsListElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocodingResultsList"),n.className="gpf-panel__list",n.setAttribute("tabindex","0"),n},_createReverseGeocodingResultElement:function(n,e){var t=this,i=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),r=document.createElement("div");r.id=this._addUID("GPreverseGeocodedLocation_"+e),r.setAttribute("tabindex","0"),r.className="GPautoCompleteProposal gpf-panel__items",r.innerHTML=n,r.title=n,r.addEventListener?(r.addEventListener("mouseover",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.addEventListener("focus",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.addEventListener("mouseout",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.addEventListener("blur",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.addEventListener("click",function(s){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(s)})):r.attachEvent&&(r.attachEvent("onmouseover",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.attachEvent("onmouseout",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.attachEvent("onclick",function(s){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(s)})),i.appendChild(r)},_createReverseGeocodingPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPreverseGeocodingPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createReverseGeocodingPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createReverseGeocodingPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header fr-modal__header",n},_createReverseGeocodingPanelReturnPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPreverseGeocodingReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),e.addEventListener?e.addEventListener("click",function(t){document.getElementById(n._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(n._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(n._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),n.onGPreverseGeocodingReturnPictoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(n._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(n._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(n._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),n.onGPreverseGeocodingReturnPictoClick(t)}),e},_createReverseGeocodingPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",n.id=this._addUID("GPreverseGeocodingHeaderTitle"),n.innerHTML="Recherche inverse",n},_createReverseGeocodingPanelCloseElement:function(){var n=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(i){i.keyCode===13&&document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(i){i.keyCode===13&&document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var n=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),n.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),n.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(n){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var i=document.createElement("label");i.id="label-recherche-par",i.className="GPlabel gpf-label fr-label",i.innerHTML="Recherche par",i.title="Recherche par",t.appendChild(i);var r=document.createElement("select");r.setAttribute("aria-labelledby","label-recherche-par"),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(y){e.onReverseGeocodingTypeChange(y)}):r.attachEvent&&r.attachEvent("onchange",function(y){e.onReverseGeocodingTypeChange(y)}),(!n||!Array.isArray(n))&&(n=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var s=0;s<n.length;s++)switch(n[s]){case"PositionOfInterest":var o=document.createElement("option");o.value="PositionOfInterest",o.text="Lieux/toponymes",r.appendChild(o);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",r.appendChild(a);break;case"CadastralParcel":var d=document.createElement("option");d.value="CadastralParcel",d.text="Parcelles cadastrales",r.appendChild(d);break}return t.appendChild(r),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(n){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var i=document.createElement("label");i.id="label-delimitation",i.className="GPlabel gpf-label fr-label",i.innerHTML="Délimitation",i.title="Délimitation",t.appendChild(i);var r=document.createElement("select");r.setAttribute("aria-labelledby","label-delimitation"),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(y){e.onReverseGeocodingDelimitationChange(y)}):r.attachEvent&&r.attachEvent("onchange",function(y){e.onReverseGeocodingDelimitationChange(y)}),(!n||!Array.isArray(n))&&(n=["Point","Circle","Extent"]);for(var s=0;s<n.length;s++)switch(n[s].toLowerCase()){case"point":var o=document.createElement("option");o.value="point",o.text="Pointer un lieu",r.appendChild(o);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",r.appendChild(a);break;case"extent":var d=document.createElement("option");d.value="extent",d.text="Dessiner une emprise",r.appendChild(d);break}return t.appendChild(r),t},_createReverseGeocodingSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPreverseGeocodingSubmit"),n.className="GPsubmit gpf-btn fr-btn fr-btn--secondary gpf-btn--secondary",n.type="submit",n.value="Rechercher",n}},logger$i=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class $n extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof $n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$i.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getData(){return this._reverseGeocodingLocations}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,i;if(e.resources){var r=e.resources;if(Array.isArray(r)){var s=["StreetAddress","PositionOfInterest","CadastralParcel"],o=[];for(t=0;t<r.length;t++)s.indexOf(r[t])===-1&&(o.push(t),logger$i.log("[ReverseGeocode] options.resources : "+r[t]+" is not a resource for reverse geocode"));if(o.length!==0)for(i=0;i<o.length;i++)r.splice(o[i],1)}else logger$i.log("[ReverseGeocode] 'options.resources' parameter should be an array"),r=null}if(e.delimitations){var a=e.delimitations;if(Array.isArray(a)){var d=["Circle","Point","Extent"],y=[];for(t=0;t<a.length;t++)d.indexOf(a[t])===-1&&(y.push(t),logger$i.log("[ReverseGeocode] options.delimitations : "+a[t]+" is not a delimitation for reverse geocode"));if(y.length!==0)for(i=0;i<y.length;i++)a.splice(y[i],1)}else logger$i.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),a=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(i),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var i=this._panelContainer=this._createReverseGeocodingPanelElement(),r=this._createReverseGeocodingPanelDivElement();i.appendChild(r);var s=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),o=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();s.appendChild(o);var a=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();s.appendChild(a);var d=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();s.appendChild(d),r.appendChild(s);var y=this._formContainer=this._createReverseGeocodingPanelFormElement();y.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),y.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var v=this._createReverseGeocodingSubmitFormElement();y.appendChild(v),r.appendChild(y);var _=this._waitingContainer=this._createReverseGeocodingWaitingElement();r.appendChild(_);var C=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),E=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return C.appendChild(E),r.appendChild(C),e.appendChild(i),logger$i.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(i=>{if(i instanceof LayerSwitcher){var r=this._inputFeaturesLayer.gpLayerId;i._layers[r].title===r&&(i.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),i.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$i.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{logger$i.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$i.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(logger$i.log("on drawend",t),t.feature&&t.feature.getGeometry){var i=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=i,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$i.log("circle radius : ",i)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(i,r){r||(r=new Polygon([]));var s=i[0],o=i[1];return r.setCoordinates([[s,[s[0],o[1]],o,[o[0],s[1]],s]]),r};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",i=>{logger$i.log("on drawstart",i),this._inputFeatures.clear(),this._onDrawStart(i,"polygon")}),this._mapInteraction.on("drawend",i=>{logger$i.log("on drawend",i),this._onBoxDrawEnd(i)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var i;if(e.feature&&e.feature.getGeometry){var r=e.feature.getGeometry();t==="point"&&(i=r.getCoordinates()),t==="circle"&&(i=r.getCenter()),t==="polygon"&&(i=r.getFirstCoordinate())}if(i){var s;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var o=this.getMap();if(!o||!o.getView())return;s=o.getView().getProjection()}var a=transform$1(i,s,"EPSG:4326");this._requestPosition={lon:a[0],lat:a[1]},logger$i.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],i=t[0],r=t[2],s;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var o=this.getMap();if(!o||!o.getView())return;s=o.getView().getProjection()}var a=transform$1(i,s,"EPSG:4326"),d=transform$1(r,s,"EPSG:4326"),y={};a[0]<d[0]?(y.left=a[0],y.right=d[0]):(y.left=d[0],y.right=a[0]),a[1]<d[1]?(y.bottom=a[1],y.top=d[1]):(y.bottom=d[1],y.top=a[1]),this._requestGeom={type:"Polygon",coordinates:[[[y.left,y.top],[y.left,y.bottom],[y.right,y.bottom],[y.right,y.top],[y.left,y.top]]]},logger$i.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var i=t.getTargetElement();e?i.style.cursor=e:i.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,i=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var r=t.onFailure!==null&&typeof t.onFailure=="function",s=t.onSuccess!==null&&typeof t.onSuccess=="function",o={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(a){a.locations&&(logger$i.log("reverseGeocode results : ",a.locations),i._displayGeocodedLocations(a.locations)),s&&t.onSuccess.call(i,a.locations)},onFailure:function(a){i._hideWaitingContainer(),i._clearResults(),i._clearInputFeatures(),i._activateMapInteraction(e),logger$i.log(a.message),r&&t.onFailure.call(i,a)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$i.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),o.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?o.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(o.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},o.maximumResponses=1):o.searchGeometry=this._requestGeom),logger$i.log("reverseGeocode request options : ",o),o}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var i=e[t];logger$i.log(i);var r=this._fillGeocodedLocationDescription(i);r.length!==0&&this._createReverseGeocodingResultElement(r,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,i="";switch(e.type){case"StreetAddress":t.street&&(i+=t.housenumber?t.housenumber+" ":"",i+=t.street+", "),i+=t.postcode+" "+t.city;break;case"PositionOfInterest":i+=t.toponym,t.postcode.length===1&&(i+=", "+t.postcode[0]),i+=" ("+t.category.join(",")+")";break;case"CadastralParcel":i+=t.id,i+=t.city?" ("+t.city+")":"";break;default:i+=t.city?t.city:"";break}return i}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var i=0;i<e.length;i++)this._addResultFeature(e[i],i);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var r=this._resultsFeaturesSource.getExtent();t.getView().fit(r,t.getSize())}}else{var s=this._resultsFeatures.item(0),o=s.getGeometry().getCoordinates();t.getView().setCenter(o),t.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",d=>this._onResultsFeatureMouseOver(d)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",d=>this._onResultsFeatureSelect(d)),t.addInteraction(this._resultsSelectInteraction);var a="";switch(this._currentGeocodingType){case"StreetAddress":a="adresses";break;case"PositionOfInterest":a="toponymes";break;case"CadastralParcel":a="parcelles cadastrales";break}t.getControls().forEach(d=>{if(d instanceof LayerSwitcher){var y=this._resultsFeaturesLayer.gpLayerId;d._layers[y].title===y&&(d.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+a}),d.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var i=this.getMap(),r=[e.position.lon,e.position.lat];if(r.length!==0){var s=i.getView(),o=s.getProjection().getCode();o!=="EPSG:4326"&&(r=transform$1(r,"EPSG:4326",o));var a=new Feature({geometry:new Point$1(r)});a.setStyle(this._resultsDefaultStyle),a.setId(t),a.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(a)}}_fillPopupContent(e){var t="<ul>",i=e.placeAttributes;for(var r in i)i.hasOwnProperty(r)&&r!=="trueGeometry"&&r!=="extraFields"&&r!=="houseNumberInfos"&&r!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+r.toUpperCase()+" : </span>",t+=i[r],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var i=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);i&&i.classList&&i.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var r=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);r&&r.classList&&r.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var i=e.selected[0];this._popupContent.innerHTML=i.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:i.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(){var e=this.getMap();if(e){Interactions.unset(e);var t=this._showReverseGeocodingButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),this._inputFeaturesLayer!=null&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(e))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value;i&&(logger$i.log(i),this._currentGeocodingType=i)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,i=e.target.options[t].value;if(i){logger$i.log(i),this._currentGeocodingDelimitation=i;var r=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(r),this._activateMapInteraction(r)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$i.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,i=t.substring(t.indexOf("_")+1),r=this._resultsFeaturesSource.getFeatureById(parseInt(i,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:r.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,i=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var r=this._resultsFeaturesSource.getFeatureById(parseInt(i,10));r.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,i=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var r=this._resultsFeaturesSource.getFeatureById(parseInt(i,10));r.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(n){return n.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"],PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)});class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return t||null}}const SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(n,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,n,e)}function readBoundingBox$1(n,e){const t=[readDecimalString(n.getAttribute("minx")),readDecimalString(n.getAttribute("miny")),readDecimalString(n.getAttribute("maxx")),readDecimalString(n.getAttribute("maxy"))],i=[readDecimalString(n.getAttribute("resx")),readDecimalString(n.getAttribute("resy"))];return{crs:n.getAttribute("CRS"),extent:t,res:i}}function readEXGeographicBoundingBox(n,e){const t=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,n,e);if(!t)return;const i=t.westBoundLongitude,r=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(i===void 0||r===void 0||s===void 0||o===void 0))return[i,r,s,o]}function readCapability(n,e){return pushParseAndPop({},CAPABILITY_PARSERS,n,e)}function readService(n,e){return pushParseAndPop({},SERVICE_PARSERS,n,e)}function readContactInformation(n,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,n,e)}function readContactPersonPrimary(n,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,n,e)}function readContactAddress(n,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,n,e)}function readException(n,e){return pushParseAndPop([],EXCEPTION_PARSERS,n,e)}function readCapabilityLayer(n,e){const t=pushParseAndPop({},LAYER_PARSERS$1,n,e);return t.Layer===void 0?Object.assign(t,readLayer$1(n,e)):t}function readLayer$1(n,e){const t=e[e.length-1],i=pushParseAndPop({},LAYER_PARSERS$1,n,e);if(!i)return;let r=readBooleanString(n.getAttribute("queryable"));r===void 0&&(r=t.queryable),i.queryable=r!==void 0?r:!1;let s=readNonNegativeIntegerString(n.getAttribute("cascaded"));s===void 0&&(s=t.cascaded),i.cascaded=s;let o=readBooleanString(n.getAttribute("opaque"));o===void 0&&(o=t.opaque),i.opaque=o!==void 0?o:!1;let a=readBooleanString(n.getAttribute("noSubsets"));a===void 0&&(a=t.noSubsets),i.noSubsets=a!==void 0?a:!1;let d=readDecimalString(n.getAttribute("fixedWidth"));d||(d=t.fixedWidth),i.fixedWidth=d;let y=readDecimalString(n.getAttribute("fixedHeight"));return y||(y=t.fixedHeight),i.fixedHeight=y,["Style","CRS","AuthorityURL"].forEach(function(C){if(C in t){const E=i[C]||[];i[C]=E.concat(t[C])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(C){if(!(C in i)){const E=t[C];i[C]=E}}),i}function readDimension(n,e){return{name:n.getAttribute("name"),units:n.getAttribute("units"),unitSymbol:n.getAttribute("unitSymbol"),default:n.getAttribute("default"),multipleValues:readBooleanString(n.getAttribute("multipleValues")),nearestValue:readBooleanString(n.getAttribute("nearestValue")),current:readBooleanString(n.getAttribute("current")),values:readString(n)}}function readFormatOnlineresource(n,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,n,e)}function readRequest(n,e){return pushParseAndPop({},REQUEST_PARSERS,n,e)}function readDCPType(n,e){return pushParseAndPop({},DCPTYPE_PARSERS,n,e)}function readHTTP(n,e){return pushParseAndPop({},HTTP_PARSERS$1,n,e)}function readOperationType(n,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,n,e)}function readSizedFormatOnlineresource(n,e){const t=readFormatOnlineresource(n,e);if(t){const i=[readNonNegativeIntegerString(n.getAttribute("width")),readNonNegativeIntegerString(n.getAttribute("height"))];return t.size=i,t}}function readAuthorityURL(n,e){const t=readFormatOnlineresource(n,e);if(t)return t.name=n.getAttribute("name"),t}function readMetadataURL(n,e){const t=readFormatOnlineresource(n,e);if(t)return t.type=n.getAttribute("type"),t}function readStyle$1(n,e){return pushParseAndPop({},STYLE_PARSERS$1,n,e)}function readKeywordList(n,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,n,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(n,e){return pushParseAndPop({},ADDRESS_PARSERS,n,e)}function readAllowedValues(n,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,n,e)}function readConstraint(n,e){const t=n.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,n,e)}function readContactInfo(n,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,n,e)}function readDcp(n,e){return pushParseAndPop({},DCP_PARSERS,n,e)}function readGet(n,e){const t=readHref(n);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,n,e)}function readHttp(n,e){return pushParseAndPop({},HTTP_PARSERS,n,e)}function readOperation(n,e){const t=n.getAttribute("name"),i=pushParseAndPop({},OPERATION_PARSERS,n,e);if(!i)return;const r=e[e.length-1];r[t]=i}function readOperationsMetadata(n,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,n,e)}function readPhone(n,e){return pushParseAndPop({},PHONE_PARSERS,n,e)}function readServiceIdentification(n,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,n,e)}function readServiceContact(n,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,n,e)}function readServiceProvider(n,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,n,e)}function readValue(n,e){return readString(n)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=pushParseAndPop(i,PARSERS,e,[]),i||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(n,e){return pushParseAndPop({},CONTENTS_PARSERS,n,e)}function readLayer(n,e){return pushParseAndPop({},LAYER_PARSERS,n,e)}function readTileMatrixSet(n,e){return pushParseAndPop({},TMS_PARSERS,n,e)}function readStyle(n,e){const t=pushParseAndPop({},STYLE_PARSERS,n,e);if(!t)return;const i=n.getAttribute("isDefault")==="true";return t.isDefault=i,t}function readTileMatrixSetLink(n,e){return pushParseAndPop({},TMS_LINKS_PARSERS,n,e)}function readDimensions(n,e){return pushParseAndPop({},DIMENSION_PARSERS,n,e)}function readResourceUrl(n,e){const t=n.getAttribute("format"),i=n.getAttribute("template"),r=n.getAttribute("resourceType"),s={};return t&&(s.format=t),i&&(s.template=i),r&&(s.resourceType=r),s}function readBoundingBox(n,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,n,e);if(t.length==2)return boundingExtent(t)}function readLegendUrl(n,e){const t={};return t.format=n.getAttribute("format"),t.href=readHref(n),t}function readCoordinates(n,e){const t=readString(n).split(/\s+/);if(!t||t.length!=2)return;const i=+t[0],r=+t[1];if(!(isNaN(i)||isNaN(r)))return[i,r]}function readTileMatrix(n,e){return pushParseAndPop({},TM_PARSERS,n,e)}function readTileMatrixLimitsList(n,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,n,e)}function readTileMatrixLimits(n,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,n,e)}var eventbus_min={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(r,s,o){for(var a=[],d=arguments.length,y=0;y<d;y++)a.push(arguments[y]);a=a.length>3?a.splice(3,a.length-1):[],typeof this.listeners[r]<"u"?this.listeners[r].push({scope:o,callback:s,args:a}):this.listeners[r]=[{scope:o,callback:s,args:a}]},removeEventListener:function(r,s,o){if(typeof this.listeners[r]<"u"){for(var a=this.listeners[r].length,d=[],y=0;y<a;y++){var v=this.listeners[r][y];v.scope==o&&v.callback==s||d.push(v)}this.listeners[r]=d}},hasEventListener:function(r,s,o){if(typeof this.listeners[r]<"u"){var a=this.listeners[r].length;if(s===void 0&&o===void 0)return a>0;for(var d=0;d<a;d++){var y=this.listeners[r][d];if((!o||y.scope==o)&&y.callback==s)return!0}}return!1},dispatch:function(r,s){for(var o={type:r,target:s},a=[],d=arguments.length,y=0;y<d;y++)a.push(arguments[y]);if(a=a.length>2?a.splice(2,a.length-1):[],a=[o].concat(a),typeof this.listeners[r]<"u")for(var v=this.listeners[r].slice(),_=v.length,y=0;y<_;y++){var C=v[y];if(C&&C.callback){var E=a.concat(C.args);C.callback.apply(C.scope,E)}}},getEvents:function(){var r="";for(var s in this.listeners)for(var o=this.listeners[s].length,a=0;a<o;a++){var d=this.listeners[s][a];r+=d.scope&&d.scope.className?d.scope.className:"anonymous",r+=" listen for '"+s+`'
`}return r}};var i=new t;return i})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$h=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$h.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,i=JSON.parse(JSON.stringify(this.options.obj)),r={};i.paint&&(t=!0,r.paint=i.paint,Object.keys(i.paint).length===0&&logger$h.info("tag 'paint' is empty !")),i.layout&&(t=!0,r.layout=i.layout,i.layout.visibility&&delete r.visibility,Object.keys(i.layout).length===0&&logger$h.info("tag 'layout' is empty !"));var s=document.createElement("div");s.className=this.name.container;var o=null;if(t){var a=JSON.stringify(r,null,4);o=this._syntaxHighlight(a)}var d=document.createElement("div");d.className=this.name.containerjson;var y=document.createElement("label");y.className=this.name.jsonlabel,y.innerHTML=this.options.title,d.appendChild(y);var v=document.createElement("pre");v.className=this.name.jsondisplay,v.innerHTML=o,v.addEventListener?v.addEventListener("click",function(_){e.options.tools.edition&&e.onEditJsonStyleMapBox(_)}):v.attachEvent&&v.attachEvent("onclick",function(_){e.options.tools.edition&&e.onEditJsonStyleMapBox(_)}),d.appendChild(v),s.appendChild(d),this.options.tools.scale&&s.appendChild(this._createElementToolsScale({min:r.layout?r.layout.minzoom:0,max:r.layout?r.layout.maxzoom:21})),this.options.tools.edition&&s.appendChild(this._createElementToolsEdition()),this.container=s}_createElementToolsScale(e){logger$h.trace("_createElementToolsScale");var t=this,i=this.options.obj,r=document.createElement("div");r.className=this.name.containertoolsscale;var s=document.createElement("div");s.className=this.name.containertoolsminscale;var o=document.createElement("label");o.className=this.name.scalelabelmin,o.innerHTML="min :",s.appendChild(o);var a=document.createElement("input");a.className=this.name.scaleinputmin,a.type="range",a.value=e.min||0,a.title=e.min||0,a.disabled=!1,a.min=0,a.max=21,a.data=i,a.addEventListener?a.addEventListener("change",function(_){t.onChangeStyleScaleMinMapBox(_)}):a.appendChild&&a.appendChild("onchange",function(_){t.onChangeStyleScaleMinMapBox(_)}),s.appendChild(a),r.appendChild(s);var d=document.createElement("div");d.className=this.name.containertoolsmaxscale;var y=document.createElement("label");y.className=this.name.scalelabelmax,y.innerHTML="max :",d.appendChild(y);var v=document.createElement("input");return v.className=this.name.scaleinputmin,v.type="range",v.value=e.max||21,v.title=e.max||21,v.disabled=!1,v.min=0,v.max=21,v.data=i,v.addEventListener?v.addEventListener("change",function(_){t.onChangeStyleScaleMaxMapBox(_)}):v.appendChild&&v.appendChild("onchange",function(_){t.onChangeStyleScaleMaxMapBox(_)}),d.appendChild(v),r.appendChild(d),r}_createElementToolsEdition(){logger$h.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var i="gp-json-number";return/^"/.test(t)?/:$/.test(t)?i="gp-json-key":i="gp-json-string":/true|false/.test(t)?i="gp-json-boolean":/null/.test(t)&&(i="gp-json-null"),"<span class='"+i+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$h.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$h.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$h.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$h.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$g=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$g.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,i=this.id||SelectorID.generate(),r=document.createElement("div");r.className=this.name.container,r.title=t.themesSummary||"";var s=t.themes;if(s)for(var o=0;o<s.length;o++){var a=s[o],d=document.createElement("div");d.id=this.name.containerthemeID+o+"_"+i,d.className=this.name.containertheme,d.tabIndex=o;var y=a.url,v=a.selected||!1;if(y){var _=this.options.tools.button;if(_.visible){var C=_.type==="checkbox"?"checkbox":"radio",E=document.createElement("input");E.type=C,E.id=this.name.inputID+o+"_"+i,E.className=this.name.input,E.name=i,E.checked=v,E.data=y,E.addEventListener?E.addEventListener("click",function(x){e.onClickThemeTitleMapBox(x)}):E.attachEvent&&E.attachEvent("onclick",function(x){e.onClickThemeTitleMapBox(x)}),d.appendChild(E)}if(this.options.tools.thumbnails&&a.thumbnail){var S=document.createElement("img");S.id=this.name.imageID+o+"_"+i,S.className=this.name.image,S.src=a.thumbnail,S.alt=a.thumbnail,S.title=a.description||"",S.data=y,S.addEventListener?S.addEventListener("click",function(x){e.onClickThemeImageMapBox(x);var T=x.target.parentElement.childNodes;if(T){var R=T[0];R.tagName.toLowerCase()==="input"&&(R.checked=!R.checked)}}):S.attachEvent&&S.attachEvent("onclick",function(x){e.onClickThemeImageMapBox(x);var T=x.target.parentElement.childNodes;if(T){var R=T[0];R.tagName.toLowerCase()==="input"&&(R.checked=!R.checked)}}),d.appendChild(S)}if(a.name){var b=document.createElement("label");b.id=this.name.labelID+o+"_"+i,this.options.tools.button.visible&&(b.htmlFor=E.id),b.className=this.name.label,b.innerHTML=a.name,b.title=a.description||"",b.data=y,this.options.tools.button.visible||(b.addEventListener?b.addEventListener("click",function(x){e.onClickThemeTitleMapBox(x)}):b.attachEvent&&b.attachEvent("onclick",function(x){e.onClickThemeTitleMapBox(x)})),d.appendChild(b)}}else{var P=document.createElement("label");P.className=this.name.message,P.innerHTML="Thème non disponible...",d.appendChild(P)}r.appendChild(d)}this.container=r}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$g.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$g.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),i=document.getElementsByClassName(this.name.input),r=0;r<i.length;r++){var s=i[r];if(s.id!==e.target.previousSibling.id){var o=s.id.substring(s.id.lastIndexOf("_")+1);o===t&&(s.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$g.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),i=document.getElementsByClassName(this.name.input),r=0;r<i.length;r++){var s=i[r];if(s.id!==e.target.id){var o=s.id.substring(s.id.lastIndexOf("_")+1);o===t&&(s.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$f=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$f.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,i=JSON.parse(JSON.stringify(this.options.obj));i.filter&&(t=!0,i.filter.length===0&&logger$f.info("tag 'filter' is empty !"));var r=document.createElement("div");r.className=this.name.container;var s=null;t&&(s=JSON.stringify(i.filter,null,4));var o=document.createElement("div");o.className=this.name.containerjson;var a=document.createElement("label");a.className=this.name.jsonlabel,a.innerHTML=this.options.title,o.appendChild(a);var d=document.createElement("pre");if(d.className=this.name.jsondisplay,d.innerHTML=s,d.addEventListener?d.addEventListener("click",function(v){e.options.tools.edition&&e.onEditJsonFilterMapBox(v)}):d.attachEvent&&d.attachEvent("onclick",function(v){e.options.tools.edition&&e.onEditJsonFilterMapBox(v)}),o.appendChild(d),r.appendChild(o),this.options.tools.edition){var y=document.createElement("div");y.className=this.name.containertoolsedit,r.appendChild(y)}this.container=r}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$f.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$e=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$e.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var i=Object.assign({},e.paint,e.layout),r=Object.keys(i);if(r.length===0){logger$e.info("tag 'paint' or 'layout' is empty !");return}for(var s={},o=!1,a=0;a<r.length;a++){var d=r[a];if(/fill-/.test(d)||/line-/.test(d)||/circle-/.test(d)||/background-/.test(d)||/text-/.test(d)||/icon-/.test(d)){o=!0;var y=e.title||"",v=d.split("-")[0];(v==="text"||v==="icon")&&(v="symbol"),this.legendRender=this._getProperties(v,i),s={edit:this.editable,title:y,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(s));break}}o||(s={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(s)),logger$e.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(s),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var i=t["text-field"],r=t["icon-image"];if(e=i&&r?"icon":i?"text":r?"icon":"unknow",e==="unknow"){logger$e.warn("type unknow !?");return}}var s={};for(const y in t)if(Object.hasOwnProperty.call(t,y)){const v=t[y];if(Legend.PROPERTIES[e].includes(y)){var o=y.replace(e,"").slice(1),a=this._getValue(v);if(a){if((o==="pattern"||o==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[a])){var d=e+":"+o;logger$e.warn("sprites mandatory for key ",d);break}s[o]=a}}else logger$e.warn("property not supported : ",y)}return{type:e,values:s}}_renderThumbnail(e,t){var i=this.rendercontainer;if(!i)return!1;var r=null,s=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var o="font-size: 5em;font-weight: bold;";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,i.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",o);break;case"icon":if(t.image)r="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),i.innerHTML=r;else{var a="fill: transparent;stroke-width: 10;";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,i.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%style%",a)}break;case"line":var d=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,i.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",d).replace("%stroke-width%",(t.width||0)*s);break;case"circle":var y=t["stroke-color"]||"#FFFFFF";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,i.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",y.indexOf("rgb")===0?y:ColorUtils.hexToRgba(y,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*s);break;case"background":case"fill":if(t.pattern)r="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),i.innerHTML=r;else{var v=t["outline-color"]||"#FFFFFF";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,i.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",v.indexOf("rgb")===0?v:ColorUtils.hexToRgba(v,1))}break;default:return logger$e.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var i=!0;e.forEach(s=>{typeof s!="number"&&(i=!1)}),i&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((s,o)=>{var a=s[0],d=o[0];return a>d?-1:a<d?1:0});var r=e.stops.slice(-1);t=r[0][1]}}else logger$e.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,i=document.createElement("div");i.className=this.name.containerlegendrender;var r=this.rendercontainer=document.createElement("div");r.className=this.name.legendrender,e.edit&&(r.className+=" ",r.className+=this.name.legendeditable,r.addEventListener?r.addEventListener("click",function(a){t.onEditionLegendMapBox(a)}):r.attachEvent&&r.attachEvent("onclick",function(a){t.onEditionLegendMapBox(a)}));var s=e.type;this._renderThumbnail(s,e.values)?r.className+=e.edit?" legend-"+s:" legend-"+s+"-not-editable":r.className+=" legend-unknow",i.appendChild(r);var o=document.createElement("span");return o.className=this.name.legendtitle,o.innerHTML=e.title||"",i.appendChild(o),i}_createElementEditionLegend(e){var t=this,i=document.createElement("div");if(i.className=this.name.containerlegendtools,!e.edit)return i;switch(e.type){case"line":r.call(t),s.call(t),o.call(t);break;case"background":case"fill":a.call(t),d.call(t);break}function r(){var y=document.createElement("div");y.className="legend-styling-div";var v=document.createElement("label");v.className="legend-line",v.htmlFor=this.id?"line-color-"+this.id:"line-color",v.innerHTML=this.labels["line-color"];var _=document.createElement("input");_.className="legend-styling",_.id=this.id?"line-color-"+this.id:"line-color",_.title="Selectionner une couleur de trait",_.type="color",_.value=e.values.color,_.setAttribute("data-id","line-color"),_.addEventListener?_.addEventListener("change",function(C){t._renderThumbnail(e.type,Object.assign(e.values,{color:C.target.value})),t.onChangeValueLegendMapBox(C)}):_.attachEvent&&_.attachEvent("onchange",function(C){t._renderThumbnail(e.type,Object.assign(e.values,{color:C.target.value})),t.onChangeValueLegendMapBox(C)}),y.appendChild(v),y.appendChild(_),i.appendChild(y)}function s(){var y=document.createElement("div");y.className="legend-styling-div";var v=document.createElement("label");v.className="legend-line",v.htmlFor=this.id?"line-width-"+this.id:"line-width",v.innerHTML=this.labels["line-width"];var _=document.createElement("input");_.className="legend-styling",_.id=this.id?"line-width-"+this.id:"line-width",_.title=e.values.width,_.type="range",_.min="0",_.max="10",_.step="1",_.defaultValue=e.values.width,_.setAttribute("data-id","line-width"),_.addEventListener?_.addEventListener("change",function(C){logger$e.trace(C),C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:C.target.value})),t.onChangeValueLegendMapBox(C)}):_.attachEvent&&_.attachEvent("onchange",function(C){logger$e.trace(C),C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:C.target.value})),t.onChangeValueLegendMapBox(C)}),y.appendChild(v),y.appendChild(_),i.appendChild(y)}function o(){var y=document.createElement("div");y.className="legend-styling-div";var v=document.createElement("label");v.className="legend-line",v.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",v.innerHTML=this.labels["line-opacity"];var _=document.createElement("input");_.className="legend-styling",_.id=this.id?"line-opacity-"+this.id:"line-opacity",_.title=e.values.opacity,_.type="range",_.min="0",_.max="1",_.step="0.1",_.defaultValue=e.values.opacity,_.setAttribute("data-id","line-opacity"),_.addEventListener?_.addEventListener("change",function(C){logger$e.trace(C),C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:C.target.value})),t.onChangeValueLegendMapBox(C)}):_.attachEvent&&_.attachEvent("onchange",function(C){logger$e.trace(C),C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:C.target.value})),t.onChangeValueLegendMapBox(C)}),y.appendChild(v),y.appendChild(_),i.appendChild(y)}function a(){var y=document.createElement("div");y.className="legend-styling-div";var v=document.createElement("label");v.className="legend-fill",v.htmlFor=this.id?"fill-color-"+this.id:"fill-color",v.innerHTML=this.labels["fill-color"];var _=document.createElement("input");_.className="legend-styling",_.id=this.id?"fill-color-"+this.id:"fill-color",_.title="Selectionner une couleur de remplissage",_.type="color",_.value=e.values.color,_.setAttribute("data-id","fill-color"),_.addEventListener?_.addEventListener("change",function(C){t._renderThumbnail(e.type,Object.assign(e.values,{color:C.target.value})),t.onChangeValueLegendMapBox(C)}):_.attachEvent&&_.attachEvent("onchange",function(C){t._renderThumbnail(e.type,Object.assign(e.values,{color:C.target.value})),t.onChangeValueLegendMapBox(C)}),y.appendChild(v),y.appendChild(_),i.appendChild(y)}function d(){var y=document.createElement("div");y.className="legend-styling-div";var v=document.createElement("label");v.className="legend-fill",v.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",v.innerHTML=this.labels["fill-opacity"];var _=document.createElement("input");_.className="legend-styling",_.id=this.id?"fill-opacity-"+this.id:"fill-opacity",_.title=e.values.opacity,_.type="range",_.min="0",_.max="1",_.step="0.1",_.defaultValue=e.values.opacity,_.setAttribute("data-id","fill-opacity"),_.addEventListener?_.addEventListener("change",function(C){C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:C.target.value})),t.onChangeValueLegendMapBox(C)}):_.attachEvent&&_.attachEvent("onchange",function(C){C.target.title=C.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:C.target.value})),t.onChangeValueLegendMapBox(C)}),y.appendChild(v),y.appendChild(_),i.appendChild(y)}return i}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$e.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$e.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$e.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$d=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$d.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Helper.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,i=document.createElement("div");i.className=this.name.container;var r=document.createElement("div");if(r.id=this.name.containertitle+"-"+this.options.position,r.className=this.name.containertitle,this.options.tools.pin){var s=document.createElement("input");s.id=this.name.imagelabelinput+"-"+this.options.position,s.className=this.name.imagelabelinput,s.type="checkbox",r.appendChild(s);var o=document.createElement("label");o.className=this.name.imagelabel,o.htmlFor=s.id,o.addEventListener?o.addEventListener("click",function(C){e.onClickLayerMapBox(C)}):o.attachEvent&&o.attachEvent("onclick",function(C){e.onClickLayerMapBox(C)}),r.appendChild(o)}var a=function(){var C=document.createElement("div");if(C.id=this.name.containertools+"-"+this.options.position,C.className=this.name.containertools,this.options.tools.visibility){var E=document.createElement("input");E.id=this.name.visibilityinput+"-"+this.options.position,E.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,E.type="checkbox",E.checked="checked",E.addEventListener?E.addEventListener("click",function(b){e.onVisibilityLayerMapBox(b)}):E.attachEvent&&E.attachEvent("onclick",function(b){e.onVisibilityLayerMapBox(b)}),C.appendChild(E),this.DomVisibility=E;var S=document.createElement("label");S.htmlFor=this.name.visibilityinput+"-"+this.options.position,S.id=this.name.visibilitylabel+"-"+this.options.position,S.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,S.title="Afficher/masquer la couche",C.appendChild(S),i.appendChild(C)}this.options.tools.clone&&logger$d.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$d.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&a.apply(this),this.options.tools.type&&t.type){var d=document.createElement("img");switch(d.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":d.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":d.style["background-position"]="-194px 0";break;case"SYMBOL":d.style["background-position"]="-84px 0";break;case"LINE":d.style["background-position"]="-28px 0";break;case"FILL":d.style["background-position"]="-56px 0";break;case"BACKGROUND":d.style["background-position"]="-140px 0";break;case"CIRCLE":d.style["background-position"]="-168px 0";break;default:d.style["background-position"]="-112px 0"}r.appendChild(d)}var y=document.createElement("div");y.id=this.name.containerlegend+"-"+this.options.position,y.className=this.name.containerlegend,r.appendChild(y);var v=document.createElement("input");v.id=this.name.titleinput+"-"+this.options.position,v.className=this.name.titleinput,v.type="checkbox",r.appendChild(v);var _=document.createElement("label");_.className=this.name.titlelabel,_.htmlFor=v.id,_.innerHTML=t.id||t["source-layer"]||t.source,_.title=t["source-layer"]||t.source||t.id,_.addEventListener?_.addEventListener("click",function(C){e.onClickLayerMapBox(C)}):_.attachEvent&&_.attachEvent("onclick",function(C){e.onClickLayerMapBox(C)}),r.appendChild(_),this.DomToggle=_,i.appendChild(r),this.options.tools.icon.anchor==="end"&&a.apply(this),this.container=i}add(){if(logger$d.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$d.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$d.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$d.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,i=this.container.childNodes;if(i.length)for(var r=this.options.tools.icon.anchor==="start"?1:0,s=i[r].childNodes,o=0;o<s.length;o++){var a=s[o];a.id.indexOf(this.name.containerlegend)!==-1&&(t=a)}if(t){var d=e.getRenderContainer();d&&(t.appendChild(d),this.bSlotLegend=!0)}}}visibility(e){if(logger$d.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$d.trace("collapse()"),this.DomToggle.click()}visible(){logger$d.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$d.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return logger$d.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$d.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),i=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!i),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!i),this.oStyle&&this.oStyle.display(!i),this.oFilter&&this.oFilter.display(!i),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!i)}onVisibilityLayerMapBox(e){logger$d.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$d.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$d.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$c=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$c.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var i=document.createElement("summary");i.className=this.name.summary,i.innerHTML=this.options.title,t.appendChild(i),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$c.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$b=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$b.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$b.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$b.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$b.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$b.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e}},logger$a=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$a.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$a.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$a.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$a.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$a.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$a.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];r&&(EventBus.hasEventListener(i,r,e)||EventBus.addEventListener(i,r,e))}}}_initContainer(){logger$a.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var i=document.createElement("div");i.id=this.name.titleThemesID+this.id,i.className=this.name.titleThemes,i.innerHTML="Liste des 'thèmes'",e.appendChild(i)}var r=new Themes({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});r.add()}if(this.options.tools.search){var s=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});s.add()}for(var o in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(o)){if(this.options.tools.layers){var a=Object.keys(this.mapbox.sources).length>1?1:0;if(a){var d=document.createElement("hr");d.className=this.name.sep,e.appendChild(d)}if(this.options.tools.title){var y=document.createElement("div");y.id=this.name.titleLayersID+this.id,y.className=this.name.titleLayers,y.innerHTML=a?"Liste des 'couches' ("+o+")":"Liste des 'couches'",e.appendChild(y)}}var v=this.mapbox.layers.slice();if(v.forEach(function(te,Oe){var ie=te.metadata;ie?ie["geoportail:order"]=Oe:te.metadata={"geoportail:order":Oe}}),this.options.tools.sort){var _=this.options.tools.sortBy,C=this.options.tools.sortOrder,E=function(te,Oe){var ie=0;if(te.metadata&&te.metadata["geoportail:group"]&&Oe.metadata&&Oe.metadata["geoportail:group"]){var it=null,oe=null;it=te.metadata["geoportail:group"],oe=Oe.metadata["geoportail:group"],ie=it.localeCompare(oe)}else switch(_){case"geom":ie=C==="asc"?te.type.localeCompare(Oe.type)||te.id.localeCompare(Oe.id):Oe.type.localeCompare(te.type)||Oe.id.localeCompare(te.id);break;case"class":ie=C==="asc"?te["source-layer"].localeCompare(Oe["source-layer"])||te.id.localeCompare(Oe.id):Oe["source-layer"].localeCompare(te["source-layer"])||Oe.id.localeCompare(te.id);break;case"id":default:ie=C==="asc"?te.id.localeCompare(Oe.id):Oe.id.localeCompare(te.id);break}return ie};v.sort(E)}logger$a.trace("Layers : ",v);var S=this.options.tools.sortBy,b=this.options.tools.groupAuto,P={};v.forEach(function(te){var Oe=te.metadata;if(Oe&&Oe["geoportail:group"]){var ie=Oe["geoportail:group"];P[ie]=P[ie]?P[ie]+1:1}else{var it=null;switch(S){case"class":it=te["source-layer"];break;case"geom":it=te.type;break;case"id":default:it=te.id;break}var oe=it;if(b){var ft=/_|-|:|=/,ct=it.search(ft);oe=ct!==-1?it.substring(0,ct).trim():it}P[oe]=P[oe]?P[oe]+1:1,Oe?Oe["geoportail:group"]=oe:te.metadata={"geoportail:group":oe}}}),logger$a.trace("Groups : ",P);var x=document.createElement("div");x.className=this.name.containerLayers,e.appendChild(x);var T;if(this.options.tools.collapse!==void 0){T=document.createElement("details"),T.className="",T.open=!this.options.tools.collapse,x.appendChild(T);var R=document.createElement("summary");R.className="",R.innerHTML="",T.appendChild(R)}for(var L=this.options.tools.collapse!==void 0?T:x,k=-1,N=0;N<v.length;N++){var D=v[N];if(k++,D.source===o){if(this.options.tools.group&&this.options.tools.sort){var G=D.metadata;if(G){var U=D.metadata["geoportail:group"];if(U)if(P[U]>1){P[U]=-1;var F=new Group({id:this.id,target:this.options.tools.collapse!==void 0?T:x,title:U,collapse:!0});F.add(),L=F.getContainer()}else P[U]===1&&(L=this.options.tools.collapse!==void 0?T:x);else L=this.options.tools.collapse!==void 0?T:x}else L=this.options.tools.collapse!==void 0?T:x}if(this.options.tools.layers){var B=new Layer({id:this.id,target:L,position:k+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:D.id,type:D.type,source:D.source,"source-layer":D["source-layer"]}});B.add(),D.layout&&D.layout.visibility&&D.layout.visibility==="none"&&B.visibility(!1),this.layers.push(B)}if(this.options.tools.legend){var z=this.options.tools.editable;typeof z>"u"&&(z=D.editable);var Y=new Legend({id:this.id,target:L,sprites:this.sprites,obj:{id:D.id,source:D.source,title:D.id,editable:typeof z<"u"?z:!1,paint:D.paint,layout:D.layout}});Y.add(),Y.display(!1),B&&(B.addLegend(Y),B.slotLegend())}if(this.options.tools.style){var X=new Style({id:this.id,target:L,position:k+"_"+this.id,obj:{id:D.id,source:D.source,layout:D.layout,paint:D.paint}});X.add(),X.display(!1),B&&B.addStyle(X),D.layout&&D.layout.visibility&&D.layout.visibility==="none"&&B.visibility(!1)}if(this.options.tools.filter){var q=new Filter({id:this.id,target:L,position:k+"_"+this.id,obj:{id:D.id,source:D.source,filter:D.Filter}});q.add(),q.display(!1),B&&B.addFilter(q)}}else k>=0&&k--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var K=document.createElement("div");K.id=this.name.target;var ee=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;ee.appendChild(K)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((s,o)=>{logger$a.error("Protocole mapbox:// non géré !"),s(t)});if(!e)return new Promise((s,o)=>{logger$a.error("Auncun sprites disponibles !"),s(t)});var i=function(){var s=e+".png";return fetch(s,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.blob().then(function(d){t.sprites.url=s;var y=new Image;return y.src=s,y.decode().then(function(){t.sprites.size={},t.sprites.size.h=y.height,t.sprites.size.w=y.width})}).catch(d=>{logger$a.warn("fetch image sprites exception :",d)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,d)=>{logger$a.error("fetch image sprites exception :",o),d(o)}))},r=function(){var s=e+".json";return fetch(s,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.json().then(function(d){t.sprites.json=d}).catch(d=>{logger$a.warn("fetch json sprites exception :",d)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,d)=>{logger$a.error("fetch json sprites exception :",o),d(o)}))};return Promise.all([i(),r()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{logger$a.warn("fetch sprites exception :",t)}):new Promise((t,i)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(i=>{e.mapbox=i}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(i=>{logger$a.warn("fetch sprites exception :",i)}):new Promise((i,r)=>{e._initContainer(),i(e)})}).catch(i=>{logger$a.error("json exception :",i)})).catch(t=>{logger$a.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,i=this.getLayer(e),r=i.options.obj.id,s=0;s<this.mapbox.layers.length;s++){var o=this.mapbox.layers[s];if(o.id===r){t=o;break}}return t}getLayerFromStyle(e){for(var t=null,i=this.mapbox.layers[e],r=0;r<this.getLayers().length;r++){var s=this.getLayer(r);if(i.id===s.options.obj.id){t=s;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createLoadingElement:function(){var n=document.createElement("div");return n.id="GPmapLoading",n.className="",n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimport"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowImportPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn-icon gpf-btn-icon-import fr-btn",e.title="Ouvrir l'import de couches",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n._onShowImportClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n._onShowImportClick()}),e},_createImportPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPimportPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createImportPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createImportPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header fr-modal__header",n},_createImportPanelTitleElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportHeaderTitle"),n.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",n.innerHTML="Import de données",n},_createImportPanelCloseElement:function(){var n=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowImportPicto")).click()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var n=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),n._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),n._onImportSubmit()}),e},_createImportTypeLineElement:function(n){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var i=document.createElement("label");i.id=this._addUID("GPimportTypeLabel"),i.className="GPlabel gpf-label fr-label",i.innerHTML="Type de donnée",i.title="Type de donnée",t.appendChild(i);var r=document.createElement("select");r.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(a){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(a)}):r.attachEvent&&r.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),r.id=this._addUID("GPimportTypeSelect"),(!n||!Array.isArray(n))&&(n=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var s,o=0;o<n.length;o++)s=document.createElement("option"),s.value=n[o],s.text=n[o]==="MAPBOX"?"Tuiles vectorielles":n[o],r.appendChild(s);return t.appendChild(r),t},_createImportWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPimportWaitingContainer"),n.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createImportStaticParamsContainer:function(n){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),n==="KML"||n==="GPX"||n==="GeoJSON"||n==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var n=document.createElement("div");n.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",n.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",n.appendChild(t),n},_createStaticModeChoiceDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportChoice"),n.className="fr-my-1w",n},_createStaticLocalChoiceDiv:function(){var n=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(r){document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(n._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",n._onStaticImportTypeChange(r)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(n._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",n._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt gpf-label fr-label",i.htmlFor=this._addUID("GPimportChoiceAltLocal"),i.innerHTML="par fichier local",i.title="par fichier local",e.appendChild(i),e},_createStaticUrlChoiceDiv:function(){var n=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(r){document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",n._onStaticImportTypeChange(r)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",n._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt gpf-label fr-label",i.htmlFor=this._addUID("GPimportChoiceAltUrl"),i.innerHTML="par URL",i.title="par URL",e.appendChild(i),e},_createStaticLocalInputDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportValueLocal"),n.className="GPimportInputLine",n},_createStaticLocalInputLabel:function(){var n=document.createElement("label");return n.className="GPlabel gpf-label fr-label fr-mb-1w",n.htmlFor=this._addUID("GPimportFile"),n.innerHTML="Fichier local",n.title="Fichier local",n},_createStaticLocalInput:function(){var n=document.createElement("input");return n.type="file",n.id=this._addUID("GPimportFile"),n.className="GPimportInputFile gpf-upload fr-upload",n},_createStaticUrlInputDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportValueUrl"),n.className="GPelementHidden gpf-hidden",n},_createStaticUrlInputLabel:function(){var n=document.createElement("label");return n.className="GPlabel gpf-label fr-label",n.htmlFor=this._addUID("GPimportUrl"),n.innerHTML="URL",n.title="URL",n},_createStaticUrlInput:function(){var n=document.createElement("input");return n.type="text",n.id=this._addUID("GPimportUrl"),n.className="GPinput gpf-input fr-input",n},_createServiceParamsContainer:function(n){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),n==="WMS"||n==="WMTS"||n==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var n=document.createElement("div");return n.className="GPimportInputLine",n},_createServiceUrlInputLabel:function(){var n=document.createElement("label");return n.className="GPlabel gpf-label fr-label",n.htmlFor=this._addUID("GPimportServiceUrl"),n.innerHTML="URL du service",n.title="URL du service",n},_createServiceUrlInput:function(){var n=document.createElement("input");return n.type="text",n.id=this._addUID("GPimportServiceUrl"),n.className="GPinput gpf-input fr-input",n},_createImportSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPimportSubmit"),n.className="GPsubmit gpf-btn fr-btn fr-btn--secondary gpf-btn--secondary",n.type="submit",n.value="Importer",n},_createImportGetCapPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportGetCapPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createImportGetCapPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var i=document.createElement("button");return i.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",i.title="Fermer le panneau",i.id=this._addUID("GPimportGetCapPanelClose"),i.addEventListener?i.addEventListener("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click(),document.getElementById(n._addUID("GPimportGetCapPanel")).style.display="none",n._onGetCapPanelClose()}):i.attachEvent&&i.attachEvent("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click(),document.getElementById(n._addUID("GPimportGetCapPanel")).style.display="none",n._onGetCapPanelClose()}),e.appendChild(i),e},_createImportGetCapResultsContainer:function(){var n=document.createElement("div");return n.className="GPimportGetCapRoot gpf-panel__list",n.id=this._addUID("GPimportGetCapResults"),n},_addImportGetCapResultListRubrique:function(n,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=n,e.appendChild(t),e},_addImportGetCapResultRubrique:function(n,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items";var i=document.createElement("input");i.id="GPimportGetCapRubrique-"+SelectorID.generate(),i.className="GPimportGetCapRubrique",i.type="checkbox",t.appendChild(i);var r=document.createElement("label");return r.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",r.htmlFor=i.id,r.innerHTML=n,r.title=n,t.appendChild(r),e.appendChild(t),e},_addImportGetCapResultListLayer:function(n){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",n.appendChild(e),n},_addImportGetCapResultLayer:function(n,e,t){var i=document.createElement("li");i.className="GPimportGetCapProposal gpf-panel__items",i.innerHTML=n.content,i.title=n.title,i.id="GPimportGetCapProposal_"+e;var r=this;return i.addEventListener?i.addEventListener("click",function(s){r._onGetCapResponseLayerClick(s)}):i.attachEvent&&i.attachEvent("onclick",function(){r._onGetCapResponseLayerClick()}),t.appendChild(i),t},_createImportMapBoxPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportMapBoxPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createImportMapBoxPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Masquer le panneau",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",t.addEventListener?t.addEventListener("click",function(s){document.getElementById(n._addUID("GPshowImportPicto")).click(),n._onMapBoxReturnPictoClick(s)}):t.attachEvent&&t.attachEvent("onclick",function(s){document.getElementById(n._addUID("GPshowImportPicto")).click(),n._onMapBoxReturnPictoClick(s)}),e.appendChild(t);var i=document.createElement("div");i.className="GPpanelTitle gpf-panel__title fr-modal__title",i.innerHTML="Edition des styles",i.title="Edition des styles",e.appendChild(i);var r=document.createElement("button");return r.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",r.title="Fermer le panneau",r.id=this._addUID("GPimportMapBoxPanelClose"),r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click(),document.getElementById(n._addUID("GPimportMapBoxPanel")).style.display="none",n._onMapBoxPanelClose()}):r.attachEvent&&r.attachEvent("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click(),document.getElementById(n._addUID("GPimportMapBoxPanel")).style.display="none",n._onMapBoxPanelClose()}),e.appendChild(r),e},_createImportMapBoxResultsContainer:function(){var n=document.createElement("div");return n.className="GPimportMapBoxpRoot",n.id=this._addUID("GPimportMapBoxResults"),n}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(n){return n?this._toolboxId+"-"+n:this._toolboxId},getButtonID:function(n){return n?this._buttonId+"-"+n:this._buttonId},getWidgetID:function(n){return n?this._widgetId+"-"+n:this._widgetId},_createToolBoxContainerElement:function(n){var e=document.createElement("div");e.id=this.getToolBoxID(n),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(n),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var i=this;t.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),this.blur();var a=document.getElementById(i.getWidgetID(n));a.style.display==="block"?a.style.display="none":a.style.display="block"}),e.appendChild(t);var r=document.createElement("div");return r.id=this.getWidgetID(n),r.addEventListener("click",function(){},!1),e.appendChild(r),e}},logger$9=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(n,e){if(logger$9.trace("ToolBox.add()",e),!n){logger$9.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var i=n.getTargetElement(),r=i.ownerDocument,s=i.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[s]=SelectorID.generate()):this._toolbox[s]||(this._toolbox[s]=SelectorID.generate());var o=this._toolbox[s];if(!r.getElementById(this.getToolBoxID(o))){logger$9.trace("create toolbox !");var a=this._createToolBoxContainerElement(o);a.style.pointerEvents="auto";var d=i.getElementsByClassName("ol-overlaycontainer-stopevent");d[0].appendChild(a)}var y=r.getElementById(this.getWidgetID(o));e.setTarget(y),t&&(t.gpShareMeasureToolBox=this._toolbox),logger$9.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$8=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var n=this.CLASSNAME;logger$8.trace("["+n+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(n){if(!n.dragging){var e=n.coordinate;if(this.sketch){var t,i=this.sketch.getGeometry();if(t=this.format(i),i.getType()==="LineString")e=i.getLastCoordinate();else if(i.getType()==="Polygon")e=i.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(n,e){var t=this.getMap(),i=t.getTargetElement().id,r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(this.tools=r.gpShareMeasures||{});var s=this.CLASSNAME;for(var o in this.tools)if(this.tools.hasOwnProperty(o))for(var a=this.tools[o],d=0;d<a.length;d++){var y=a[d];y&&y.active&&o!==s&&y.map.id===i&&(y.active=!1,y.instance!==null&&y.instance.clean())}Interactions.unset(t,{current:"Measures"});var v=this._pictoContainer.ariaPressed;if(v==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var _=0;_<this.tools[s].length;_++)this.tools[s][_].map.id===i&&(this.tools[s][_].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var C=0;C<this.tools[s].length;C++)this.tools[s][C].map.id===i&&(this.tools[s][C].active=!1)}},clearMeasureToolTip:function(){var n=this.getMap();if(n)for(var e=n.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),i=0;i<t.length;i++){for(var r=t[i],s=r.children.length,o=[],a=0;a<s;a++){var d=r.children[a];if(d.children.length!==0){var y=d.children[0];(y.className==="GPmeasureTooltip GPmeasureTooltip-static"||y.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&o.push(d)}}for(var v=0;v<o.length;v++)r.removeChild(o[v])}},clearMeasure:function(){var n=this.getMap();this.measureVector&&(n.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(n.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(n){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),n.addOverlay(this.measureTooltip)},createHelpTooltip:function(n){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),n.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(n){this.options.styles=n||{},logger$8.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$8.trace("style finish",this.options.styles.finish);var t={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(t)},addMeasureInteraction:function(n){var e=this.getMap(),t=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(i){return i.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:n,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",i=>{t.sketch=i.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var i,r,s=t.sketch.getGeometry();if(i=t.format(s),s.getType()==="LineString")r=s.getLastCoordinate();else if(s.getType()==="Polygon")r=s.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=i,t.measureTooltip.setPosition(r)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var n=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",n.addLayer(this.measureVector),n.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPelevationPath"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowElevationPathPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-elevation fr-btn",e.title="Calculer un profil",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowElevationPathClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowElevationPathClick(t)}),e},_createElevationPathPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPelevationPathPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createElevationPathPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createElevationPathPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){n.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){n.onOpenElevationPathInfoClick()}),e.appendChild(t);var i=document.createElement("div");i.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",i.innerHTML="Profil Altimétrique",e.appendChild(i);var r=document.createElement("button");r.id=this._addUID("GPelevationPathPanelReduce"),r.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",r.title="Masquer le panneau",r.addEventListener?r.addEventListener("click",function(a){typeof n.onReduceElevationPathPanelClick=="function"&&n.onReduceElevationPathPanelClick()},!1):r.attachEvent&&r.attachEvent("onclick",function(a){typeof n.onReduceElevationPathPanelClick=="function"&&n.onReduceElevationPathPanelClick()}),e.appendChild(r);var s=document.createElement("button");s.id=this._addUID("GPelevationPathPanelClose"),s.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",s.title="Fermer le panneau",s.addEventListener?s.addEventListener("click",function(){document.getElementById(n._addUID("GPshowElevationPathPicto")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowElevationPathPicto")).click()});var o=document.createElement("span");return o.className="GPelementHidden gpf-visible",o.innerText="Fermer",s.appendChild(o),e.appendChild(s),e},_createElevationPathPanelProfilElement:function(){var n=document.createElement("div");return n.id="GPelevationPathProfil",n},_createElevationPathWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPelevationPathCalcWaitingContainer"),n.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createElevationPathInformationsElement:function(){var n=document.createElement("div");n.id=this._addUID("GPelevationPathInformationsContainer"),n.className="GPelementHidden gpf-hidden";var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",n.appendChild(e),n},_addElevationPathInformationsItem:function(n){var e=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(e){var t=document.createElement("p");t.className="GPelevationPathInformations",t.innerHTML=n,e.appendChild(t)}return e}},ProfileElevationPathDOM={_getCssProperty:function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)},_getTextWidth:function(n,e,t=null){var i=this.canvas||(this.canvas=document.createElement("canvas")),r=i.getContext("2d");t===null?r.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:r.font=t;var s=r.measureText(n);return s.width},_dataZToSvgY:function(n,e,t,i){return e-(n-t)*i-.5},_dataDistToSvgX:function(n,e,t,i){return e-t+n*i},_svgXToDataDist:function(n,e,t,i){return(n+t-e)/i},_arrayBisect:function(n,e){let t;if(n.length===0)return 0;for(t=0;t<n.length;t++)if(e<n[t].dist)return t;return t-1},displayProfileByDefault:function(n,e,t,i){var r=t;if(!e||!n)return;for(;e.firstChild;)e.removeChild(e.firstChild);const s={top:25,right:15,bottom:10,left:10};var o=r.options.displayProfileOptions,a=n.points,d=JSON.parse(JSON.stringify(a));d.sort(function(Gt,Kt){return Gt.z-Kt.z});var y=d[0].z,v=d[d.length-1].z,_=n.distance;let C="m";const E=document.createElement("div");E.id="profileElevationByDefault",e.appendChild(E);var S=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),b=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const P=b-s.top-s.bottom,x=S-s.left-s.right,T=17,R=this._getTextWidth(Math.round(v).toLocaleString()+",88",e,"400 10 Verdana"),L=17,k=15,N=15,D=this._getTextWidth(Math.round(_).toLocaleString()+",5",e),G=1,U=P-L-k,F=x-T-R,B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.id="profileElevationByDefaultSvg",B.setAttribute("style","display: block; margin: auto; overflow: visible; position: absolute; left: 10px;"),B.setAttribute("viewBox",`0 0 ${S} ${b}`),B.setAttribute("width","100%"),B.setAttribute("height","100%");const z=Math.floor(U/N);let Y;v===y?Y=.1:Y=Math.pow(10,Math.ceil(Math.log((v-y)/z)/Math.log(10)))/2;let X=Math.floor(y/Y)*Y,q=Math.ceil(v/Y)*Y;q===v&&(q+=Y),X=Math.round(X*100)/100,q=Math.round(q*100)/100;let K=Math.round((q-X)/Y);K+1>z&&(Y=Math.pow(10,Math.ceil(Math.log((v-y)/z)/Math.log(10))),X=Math.floor(y/Y)*Y,q=Math.ceil(v/Y)*Y,q===v&&(q+=Y),X=Math.round(X*100)/100,q=Math.round(q*100)/100,K=Math.floor((q-X)/Y)),K=Math.max(Math.round(K),1);const ee=document.createElementNS("http://www.w3.org/2000/svg","g");ee.setAttribute("class","profile-z-vertical");const te=document.createElementNS("http://www.w3.org/2000/svg","g"),Oe=U/K;let ie;v===y?ie=U/.2:ie=U/(q-X);let it,oe,ft,ct,Qe,dt;for(let Gt=0;Gt<=K;Gt++)it=document.createElementNS("http://www.w3.org/2000/svg","text"),it.setAttribute("class","profile-z-graduation"),it.setAttribute("font-family","Verdana"),it.setAttribute("font-size","10px"),it.setAttribute("fill","#5E5E5E"),it.textContent=(Math.round(100*(X+Gt*Y))/100).toLocaleString(),oe=U-Gt*Oe,it.setAttribute("transform",`translate(${T+R-8}, ${oe+5})`),it.setAttribute("text-anchor","end"),ee.appendChild(it),ft=Math.round(oe)-.5,ct=document.createElementNS("http://www.w3.org/2000/svg","g"),Qe=document.createElementNS("http://www.w3.org/2000/svg","path"),Qe.setAttribute("cs","100,100"),Qe.setAttribute("stroke-width","1"),Gt!==0?Qe.setAttribute("stroke-opacity","0.2"):Qe.setAttribute("stroke-opacity","1"),Qe.setAttribute("stroke","#000000"),Qe.setAttribute("fill","none"),Qe.setAttribute("d",`M${T+R},${ft} L${F+T+R},${ft}`),dt=document.createElementNS("http://www.w3.org/2000/svg","path"),dt.setAttribute("cs","100,100"),dt.setAttribute("stroke-width","1"),dt.setAttribute("stroke-opacity","1"),dt.setAttribute("stroke","#000000"),dt.setAttribute("fill","none"),dt.setAttribute("d",`M${T+R},${ft} L${T+R+5},${ft}`),dt.setAttribute("transform","translate(-5, 0)"),ct.appendChild(dt),ct.appendChild(Qe),te.appendChild(ct);var re=document.createElementNS("http://www.w3.org/2000/svg","text");re.setAttribute("class","profile-z-legend"),re.setAttribute("font-family","Verdana"),re.setAttribute("font-size","11px"),re.setAttribute("fill","#5E5E5E"),re.textContent="Altitude (m)",re.setAttribute("transform",`translate(${T-8}, ${Math.round(U/2)}) rotate(-90)`),re.setAttribute("text-anchor","middle"),ee.appendChild(re),B.appendChild(ee),B.appendChild(te),_>2e3&&(_/=1e3,C="km");const Ve=Math.floor(F/D);let je=Math.pow(10,Math.ceil(Math.log(_/Ve)/Math.log(10)))/2;const se=_;let pt=Math.floor(se/je);pt>Ve?(je=Math.pow(10,Math.ceil(Math.log(_/Ve)/Math.log(10))),pt=Math.floor(se/je)):pt<G&&(je=Math.pow(10,Math.ceil(Math.log(_/Ve)/Math.log(10))-1),pt=Math.floor(se/je)),pt=Math.max(pt,1);const xt=je*pt,H=document.createElementNS("http://www.w3.org/2000/svg","g");H.setAttribute("class","profile-x-vertical");const W=document.createElementNS("http://www.w3.org/2000/svg","g"),$=F/se,de=(se-xt)*$,ue=Math.round((F-de)/pt);let fe,Ge,Be,ye,pe,J;for(let Gt=0;Gt<=pt+1;Gt++)fe=document.createElementNS("http://www.w3.org/2000/svg","text"),fe.setAttribute("class","profile-x-graduation"),fe.setAttribute("font-family","Verdana"),fe.setAttribute("font-size","10px"),fe.setAttribute("fill","#5E5E5E"),Gt!==pt+1&&(fe.textContent=(Math.round(100*Gt*je)/100).toLocaleString()),Ge=T+R+Gt*ue,Gt===pt+1&&(Ge=T+R+F),fe.setAttribute("transform",`translate(${Ge}, ${U+k+5})`),fe.setAttribute("text-anchor","middle"),H.appendChild(fe),Be=Ge-.5,ye=document.createElementNS("http://www.w3.org/2000/svg","g"),pe=document.createElementNS("http://www.w3.org/2000/svg","path"),pe.setAttribute("cs","100,100"),pe.setAttribute("stroke-width","1"),Gt!==0?pe.setAttribute("stroke-opacity","0.2"):pe.setAttribute("stroke-opacity","1"),pe.setAttribute("stroke","#000000"),pe.setAttribute("fill","none"),pe.setAttribute("d",`M${Be},${U} L${Be},0`),J=document.createElementNS("http://www.w3.org/2000/svg","path"),J.setAttribute("cs","100,100"),J.setAttribute("stroke-width","1"),J.setAttribute("stroke-opacity","1"),J.setAttribute("stroke","#000000"),J.setAttribute("fill","none"),J.setAttribute("d",`M${Be},${U} L${Be},${U-5}`),J.setAttribute("transform","translate(0, 5)"),ye.appendChild(J),ye.appendChild(pe),W.appendChild(ye);var Q=document.createElementNS("http://www.w3.org/2000/svg","text");Q.setAttribute("class","profile-x-legend"),Q.setAttribute("font-family","Verdana"),Q.setAttribute("font-size","11px"),Q.setAttribute("fill","#5E5E5E"),Q.textContent=`Distance (${C})`,Q.setAttribute("transform",`translate(${T+R+F/2}, ${U+k+L+3})`),Q.setAttribute("text-anchor","middle"),H.appendChild(Q),B.appendChild(H),B.appendChild(W);const ne=document.createElementNS("http://www.w3.org/2000/svg","g");let le=1;C==="km"&&(le=1e3);let ke=this._dataDistToSvgX(a[0].dist/le,x,F,$),be=this._dataZToSvgY(a[0].z,U,X,ie),Ze=`M${ke},${be}`;for(let Gt=1;Gt<a.length;Gt++)ke=this._dataDistToSvgX(a[Gt].dist/le,x,F,$),be=this._dataZToSvgY(a[Gt].z,U,X,ie),Ze+=` L${ke},${be}`;const mt=document.createElementNS("http://www.w3.org/2000/svg","path");mt.setAttribute("cs","100,100"),mt.setAttribute("stroke-width","1"),mt.setAttribute("stroke-opacity","1"),mt.setAttribute("stroke","#0B6BA7"),mt.setAttribute("fill","none"),mt.setAttribute("d",Ze),Ze+=` L${ke},${U}`,Ze+=` L${x-F},${U}`;const ut=document.createElementNS("http://www.w3.org/2000/svg","path");ut.setAttribute("cs","100,100"),ut.setAttribute("stroke-width","1"),ut.setAttribute("stroke-opacity","0"),ut.setAttribute("stroke","#000000"),ut.setAttribute("fill","#00B798"),ut.setAttribute("fill-opacity","0.4"),ut.setAttribute("d",Ze),ne.appendChild(mt),ne.appendChild(ut),B.appendChild(ne);const Ot=document.createElementNS("http://www.w3.org/2000/svg","g"),Pt=document.createElementNS("http://www.w3.org/2000/svg","rect");Pt.setAttribute("width",F),Pt.setAttribute("height",U),Pt.setAttribute("transform",`translate(${x-F},0)`),Pt.setAttribute("visibility","hidden"),Pt.setAttribute("pointer-events","all");const Wt=JSON.parse(JSON.stringify(a));Wt.sort(function(Gt,Kt){return Gt.dist-Kt.dist});const Ft=document.createElementNS("http://www.w3.org/2000/svg","line");Ft.setAttribute("id","focusLineX"),Ft.setAttribute("class","focusLine-default"),Ft.setAttribute("fill","none"),Ft.setAttribute("stroke","#F90"),Ft.setAttribute("stroke-width","0.5px"),Ft.setAttribute("visibility","hidden");const vt=document.createElementNS("http://www.w3.org/2000/svg","line");vt.setAttribute("id","focusLineY"),vt.setAttribute("class","focusLine-default"),vt.setAttribute("fill","none"),vt.setAttribute("stroke","#F90"),vt.setAttribute("stroke-width","0.5px"),vt.setAttribute("visibility","hidden");const Nt=document.createElementNS("http://www.w3.org/2000/svg","circle");Nt.setAttribute("id","focusCircle"),Nt.setAttribute("r",4),Nt.setAttribute("class","circle-default focusCircle-default"),Nt.setAttribute("fill","#F90"),Nt.setAttribute("visibility","hidden"),Ot.appendChild(Nt),Ot.appendChild(Ft),Ot.appendChild(vt);const Ut=document.createElementNS("http://www.w3.org/2000/svg","text"),Yt=document.createElementNS("http://www.w3.org/2000/svg","tspan"),jt=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Zt=document.createElementNS("http://www.w3.org/2000/svg","tspan");Ut.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),Ut.style.pointerEvents="none",Ut.style.position="fixed",Ut.setAttribute("class","tooltipInit"),Ut.setAttribute("text-anchor","middle"),E.appendChild(Ut),Yt.setAttribute("class","altiPathValue"),Yt.setAttribute("x","0"),Yt.setAttribute("dy","-.7em"),jt.setAttribute("class","altiPathValue"),jt.setAttribute("x","0"),jt.setAttribute("dy","1em"),Zt.setAttribute("class","altiPathCoords"),Zt.setAttribute("x","0"),Zt.setAttribute("dy","1em"),Ut.appendChild(Yt),o.currentSlope&&Ut.appendChild(jt),Ut.appendChild(Zt);const Jt=document.createElementNS("http://www.w3.org/2000/svg","g");Ot.appendChild(Jt);const fn=document.createElementNS("http://www.w3.org/2000/svg","path");fn.setAttribute("cs","100,100"),fn.setAttribute("fill","#FFFFFF"),fn.setAttribute("stroke","#CCCCCC"),fn.setAttribute("fill-opacity","0.8"),fn.setAttribute("stroke-width","1"),fn.setAttribute("stroke-opacity","1");const dn=document.createElementNS("http://www.w3.org/2000/svg","path");dn.setAttribute("cs","100,100"),dn.setAttribute("fill","#FFFFFF"),dn.setAttribute("stroke","#000000"),dn.setAttribute("fill-opacity","0"),dn.setAttribute("stroke-width","1"),dn.setAttribute("stroke-opacity","0.4"),dn.setAttribute("transform","translate(1,1)"),Jt.appendChild(dn),Jt.appendChild(fn),Jt.appendChild(Ut),Jt.setAttribute("class","tooltipInit"),Jt.style.pointerEvents="none";function cn(){Ft.setAttribute("visibility","visible"),vt.setAttribute("visibility","visible"),Nt.setAttribute("visibility","visible"),i.__createProfileMarker(r,a[0]),Ut.setAttribute("class","tooltipFadeIn"),Jt.setAttribute("class","tooltipFadeIn")}function yn(){Ft.setAttribute("visibility","hidden"),vt.setAttribute("visibility","hidden"),Nt.setAttribute("visibility","hidden"),i.__removeProfileMarker(r),Ut.setAttribute("class","tooltipFadeOut"),Jt.setAttribute("class","tooltipFadeOut")}function hn(Gt){const Kt=B.createSVGPoint();Kt.x=Gt.clientX,Kt.y=Gt.clientY;const Cn=Kt.matrixTransform(B.getScreenCTM().inverse()),vn=this._svgXToDataDist(Cn.x,x,F,$)*le,Qt=Math.max(1,this._arrayBisect(Wt,vn)),un=a[Qt-1],gn=a[Qt];let pn=un;vn-un.dist>gn.dist-vn&&(pn=gn);const Sn=this._dataDistToSvgX(pn.dist/le,x,F,$),bn=this._dataZToSvgY(pn.z,U,X,ie);Nt.setAttribute("cx",Sn),Nt.setAttribute("cy",bn),Ft.setAttribute("x1",Sn),Ft.setAttribute("y1",U),Ft.setAttribute("x2",Sn),Ft.setAttribute("y2",0),vt.setAttribute("x1",T+R),vt.setAttribute("y1",bn),vt.setAttribute("x2",F+T+R),vt.setAttribute("y2",bn),i.__updateProfileMarker(r,pn);const Tn=`Altitude : ${pn.z.toLocaleString()} m`,ti=`Pente : ${pn.slope} %`,Mn=`(lat : ${pn.lat.toLocaleString()} / lon : ${pn.lon.toLocaleString()})`;Yt.innerHTML=Tn,jt.innerHTML=ti,Zt.innerHTML=Mn;const En=Math.max(this._getTextWidth(Mn,Zt),this._getTextWidth(Tn,Yt));let wn;pn.dist>_*le/2?(wn=`M -0.5 -0.5 l -6 6 l 0 16 l -${En+10} 0 l 0 -44 l ${En+10} 0 l 0 16 l 6 6`,Ut.setAttribute("transform",`translate(${-(En/2+12)},0)`)):pn.dist<=_*le/2&&(wn=`M -0.5 -0.5 l 6 6 l 0 16 l ${En+10} 0 l 0 -44 l -${En+10} 0 l 0 16 l -6 6`,Ut.setAttribute("transform",`translate(${En/2+12},0)`)),fn.setAttribute("d",wn),dn.setAttribute("d",wn),Jt.setAttribute("transform",`translate(${Sn},${bn})`),Jt.style.transform=`translate(${Sn}px,${bn}px)`}return Pt.addEventListener("pointerover",cn),Pt.addEventListener("pointerout",yn),Pt.addEventListener("pointermove",hn.bind(this)),Ot.appendChild(Pt),B.appendChild(Ot),E.appendChild(B),e},displayProfileRaw:function(n,e,t,i){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var r=n&&n.points?n.points:{},s=document.createElement("textarea");return s.id="profilElevationResults",s.rows=10,s.cols=50,s.style.width="100%",s.innerHTML=JSON.stringify(r,void 0,4),s.addEventListener("mouseover",function(o){i.__customRawProfileMouseOverEvent(t,o)}),e.appendChild(s),e}},displayProfileLibD3:function(n,e,t,i){var r=t;if(e&&n){for(;e.firstChild;)e.removeChild(e.firstChild);var s=n.points;if(n.distance>2e3){n.unit="km";for(let G=0;G<s.length;G++)s[G].dist/=1e3}var o=r.options.displayProfileOptions,a={top:20,right:20,bottom:30,left:40},d=window.getComputedStyle(e).getPropertyValue("width"),y=window.getComputedStyle(e).getPropertyValue("height"),v=d.replace(/px/,"")-a.left-a.right,_=y.replace(/px/,"")-a.top-a.bottom,C=d3.scale.linear().range([0,v]),E=d3.scale.linear().range([_,0]),S=d3.svg.axis().scale(C).orient("bottom").ticks(5),b=d3.svg.axis().scale(E).orient("left").ticks(5),P=d3.svg.line().interpolate("basis").x(function(G){return C(G.dist)}).y(function(G){return E(G.z)}),x=d3.svg.area().interpolate("basis").x(function(G){return C(G.dist)}).y0(_).y1(function(G){return E(G.z)}),T=d3.select(e).append("svg").attr("width",v+a.left+a.right).attr("height",_+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),R=d3.extent(s,function(G){return G.dist});C.domain(R);var L=[0,d3.max(s,function(G){return G.z})];E.domain(L),T.append("path").datum(s).attr("class","area-d3").attr("d",x),T.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+_+")").call(S).append("text").attr("y",-15).attr("dy",".71em").attr("x",v).text("Distance ("+n.unit+")"),T.append("g").attr("class","y axis-d3").call(b).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),T.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+_+")").call(S.orient("bottom").tickSize(-_,0,0).tickFormat("")),T.append("g").attr("class","grid-d3 horizontal").call(b.orient("left").tickSize(-v,0,0).tickFormat("")),T.append("path").datum(s).attr("class","line-d3").attr("d",P),T.selectAll("circle").data(s).enter().append("circle").attr("cx",function(G){return C(G.dist)}).attr("cy",function(G){return E(G.z)}).attr("r",0).attr("class","circle-d3");var k=T.append("g").style("display","none");k.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),k.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),k.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var N=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),D=d3.bisector(function(G){return G.dist}).left;return T.append("rect").attr("class","overlay-d3").attr("width",v).attr("height",_).on("mouseover",function(){k.style("display",null),i.__createProfileMarker(r,s[0])}).on("mouseout",function(){k.style("display","none"),i.__removeProfileMarker(r),N.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var G=d3.mouse(this),U=C.invert(G[0]),F=Math.max(1,D(s,U)),B=s[F-1],z=s[F],Y=U-B[0]>z[0]-U?z:B,X=C(Y.dist),q=E(Y.z);k.select("#focusCircle").attr("cx",X).attr("cy",q),k.select("#focusLineX").attr("x1",X).attr("y1",E(L[0])).attr("x2",X).attr("y2",E(L[1])),k.select("#focusLineY").attr("x1",C(R[0])).attr("y1",q).attr("x2",C(R[1])).attr("y2",q),i.__updateProfileMarker(r,Y),N.transition().duration(200).style("opacity",.9);var K="";K+=" Altitude : "+Y.z+" m",o.currentSlope&&(K+="<br/> Pente : "+Y.slope+" %"),K+="<br/> (Lat : "+Y.lat+"/ Lon : "+Y.lon+")",N.html(K).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),T}},displayProfileLibAmCharts:function(n,e,t,i){var r=t;if(e&&n){var s=n.points,o="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",a=r.options.displayProfileOptions.currentSlope;if(a&&(o+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),o+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),n.distance>2e3){n.unit="km";for(let C=0;C<s.length;C++)s[C].dist/=1e3}for(let C=0;C<s.length;C++){var d=s[C].dist,y=100;d>100?y=1:d>10&&(y=10),d=Math.round(d*y)/y,s[C].dist=d}var v={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+n.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:o,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:s},_=AmCharts.makeChart(e,v);return _.addListener("changed",function(C){var E=C.chart.dataProvider[C.index];i.__updateProfileMarker(r,E)}),_}}},logger$7=LoggerByDefault.getLogger("elevationpath"),sn,ElevationPath=(sn=class extends ControlExtended{constructor(e){if(logger$7.trace("ElevationPath()"),e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof sn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var i=e;i._marker&&(i._measureSource.removeFeature(i._marker),i._marker=null);var r=i.getMap(),s=r.getView().getProjection(),o=transform$1([t.lon,t.lat],"EPSG:4326",s),a=i._measureSource.getFeatures()[0].getGeometry().getClosestPoint(o),d=new Point$1(a);i._marker=new Feature({geometry:d}),logger$7.trace(d),i._marker.setStyle(i._markerStyle),i._measureSource.addFeature(i._marker)}static __updateProfileMarker(e,t){var i=e;sn.__removeProfileMarker(i),sn.__createProfileMarker(i,t)}static __customRawProfileOperation(e,t){logger$7.log("__customRawProfileOperation");for(var i=e,r=t.points,s=i.getMap().getView().getProjection(),o=0;o<r.length;o++){var a=r[o],d=transform$1([a.lon,a.lat],"EPSG:4326",s),y=new Point$1(d);i._marker=new Feature({geometry:y}),logger$7.trace(y);var v=sn.DEFAULT_STYLES.RESULTS,_=new CircleStyle({radius:v.imageRadius,stroke:new Stroke({color:v.imageStrokeColor,width:v.imageStrokeWidth}),fill:new Fill({color:v.imageFillColor})});i._marker.setStyle(new Style$1({image:_})),i._measureSource.addFeature(i._marker)}}static __customRawProfileMouseOverEvent(e,t){logger$7.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,i){if(logger$7.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$7.log("Lib. AmCharts is not loaded !");return}var r=ProfileElevationPathDOM.displayProfileLibAmCharts(e,t,i,sn);r&&(this._profile=r)}static DISPLAY_PROFILE_LIB_D3(e,t,i){if(logger$7.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$7.log("Lib. D3 is not loaded !");return}var r=ProfileElevationPathDOM.displayProfileLibD3(e,t,i,sn);r&&(this._profile=r)}static DISPLAY_PROFILE_RAW(e,t,i){logger$7.trace("ElevationPath.DISPLAY_PROFILE_RAW");var r=ProfileElevationPathDOM.displayProfileRaw(e,t,i,sn);r&&(this._profile=r)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,i){logger$7.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var r=ProfileElevationPathDOM.displayProfileByDefault(e,t,i,sn);r&&(this._profile=r)}setMap(e){if(logger$7.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var i=this;this.export.on("export:compute",r=>{i.dispatchEvent({type:"export:compute",content:r.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getActive(){return logger$7.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$7.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$7.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new GeoJSON({defaultStyle:this._drawStyleFinish}),i=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return i}getStyle(){return this._drawStyleFinish}clean(e){logger$7.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$7.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var i=t.apply;this.options.displayProfileOptions.apply=typeof i=="function"?i:sn.DISPLAY_PROFILE_BY_DEFAULT;var r=t.target;this.options.displayProfileOptions.target=typeof r<"u"?r:null;var s=e.stylesOptions||{};this.options.stylesOptions.draw=s.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=s.marker||{},this._createStylingMarker()}_initializeContainer(){logger$7.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var i=this._panelContainer=this._createElevationPathPanelElement(),r=this._createElevationPathPanelDivElement();i.appendChild(r);var s=this._createElevationPathPanelHeaderElement();r.appendChild(s);var o=this._profileContainer=this._createElevationPathPanelProfilElement();r.appendChild(o);var a=this._waitingContainer=this._createElevationPathWaitingElement();r.appendChild(a);var d=this._infoContainer=this._createElevationPathInformationsElement();return r.appendChild(d),this.options.displayProfileOptions.target===null&&e.appendChild(i),e}_createStylingMarker(){logger$7.trace("ElevationPath::_createStylingMarker ");var e=sn.DEFAULT_STYLES.MARKER;logger$7.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$7.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$7.trace("style start",e.start);var t={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(t.stroke=e.start),this._drawStyleStart=new Style$1(t),logger$7.trace("style finish",e.finish);var i={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(i.stroke=e.finish),this._drawStyleFinish=new Style$1(i)}_createStylingProfile(){logger$7.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$7.trace("style profile",e);var t=sn.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(i=>{if(!e.hasOwnProperty(i))e[i]=t[i];else{var r=t[i];typeof r=="object"&&(Helper.mergeParams(r,e[i]),e[i]=r)}})}_initMeasureInteraction(e){logger$7.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof LayerSwitcher){var i=this._measureVector.gpLayerId;t._layers[i].title===i&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$7.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{logger$7.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var i=this._measureSource.getFeatures(),r=0;r<i.length;r++)this._measureSource.removeFeature(i[r]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{logger$7.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){logger$7.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$7.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),i=t.getView().getProjection(),r="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),o=0;o<s.length;o++){var a=s[o],d=a;i!==r&&(d=transform$1(a,i,r)),e.push({lon:Math.round(d[0]*1e8)/1e8,lat:Math.round(d[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$7.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),i=t.getView().getProjection(),r="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),o=0,a=s.length-1;o<a;++o){var d=transform$1(s[o],i,r),y=transform$1(s[o+1],i,r);d[0]=Math.round(d[0]*1e8)/1e8,d[1]=Math.round(d[1]*1e8)/1e8,y[0]=Math.round(y[0]*1e8)/1e8,y[1]=Math.round(y[1]*1e8)/1e8,e+=getDistance(d,y)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$7.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),i="EPSG:4326",r=[],s=this._currentSketch.getGeometry().getCoordinates(),o=0;o<s.length;o++){var a=transform$1(s[o],t,i);a[0]=Math.round(a[0]*1e8)/1e8,a[1]=Math.round(a[1]*1e8)/1e8,r.push(a)}return r}_requestService(){logger$7.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$7.trace("geometry",e),!e){logger$7.warn("missing geometry !?");return}var t={};Helper.mergeParams(t,this.options.elevationOptions),Helper.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),Helper.mergeParams(t,{ssl:t.ssl});var i=this,r=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",s=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",o=function(E){logger$7.trace(E),E&&(i._panelContainer.style.display="block",i._data&&(i._data={}),i._data=i._computeElevationMeasure(E.elevations),i._displayProfile(i._data),i._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",i._waiting=!1,i._measureDraw.setActive(!0)),s&&i.options.elevationOptions.onSuccess.call(i,i.getData())},a=function(E){i._panelContainer.style.display="none",logger$7.error(E.message),i._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",i._waiting=!1,i._measureDraw.setActive(!0),r&&i.options.elevationOptions.onFailure.call(i,E)};Helper.mergeParams(t,{onSuccess:o,onFailure:a});var d=t.sampling;if(!d){var y,v=this._getLength();logger$7.trace("length",v);var _=Math.max(50,Math.floor(v)/5);_>200?y=200:y=Math.floor(_);var C=this._getSketchCoords().length;C>100&&(y=0)}y>0&&Helper.mergeParams(t,{sampling:y}),Helper.mergeParams(t,{positions:e}),logger$7.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(t)}_computeElevationMeasure(e){logger$7.trace("ElevationPath::_computeElevationMeasure",e);var t=e,i="m",r=this._getSketchCoords();if(r){var s=0,o=0,a=r[1];t[0].dist=0,t[0].slope=0,t[0].lat=Math.round(t[0].lat*1e4)/1e4,t[0].lon=Math.round(t[0].lon*1e4)/1e4;for(var d=0,y=0,v=0,_=0,C=0,E=0,S=[],b=1;b<t.length;b++){var P=[t[b].lon,t[b].lat],x=o+getDistance(P,r[s]),T=x-C;P[0]===a[0]&&P[1]===a[1]&&(s++,o=x,b!==t.length-1&&(a=r[s+1]));var R=t[b].z,L=t[b-1].z;R<0&&(R=0),L<0&&(L=0);var k=R-L;k<0?(d+=T,_+=k):k>0&&(y+=T,v+=k),C=x,t[b].dist=x,S.push(x),E+=k?Math.abs(Math.round(k/T*100)):0,t[b].slope=k?Math.abs(Math.round(k/T*100)):0;var N=t[b].slope;N>15&&N<30?t[b].color="#005b4c":N>30&&N<45?t[b].color="#00362d":N>45?t[b].color="#00120f":t[b].color="#00B798",t[b].lat=Math.round(t[b].lat*1e4)/1e4,t[b].lon=Math.round(t[b].lon*1e4)/1e4}logger$7.trace("List Distances",S);for(var D=t[0].z,G=t[0].z,U=t[0].slope,F=0;F<t.length;F++){var B=t[F];B.z<-100&&(B.z=0),B.z>G&&(G=B.z),B.z<D&&(D=B.z),B.slope>U&&(U=B.slope)}return{greaterSlope:U,meanSlope:Math.round(E/t.length),distancePlus:y,distanceMinus:d,ascendingElevation:v,descendingElevation:_,altMin:D.toLocaleString(),altMax:G.toLocaleString(),distance:this._getLength(),unit:i,points:t}}}_displayProfile(e){logger$7.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var i=this,r=this.options.displayProfileOptions.apply;r.call(this,e,t,i);var s=this.options.displayProfileOptions,o=document.getElementById("GPelevationPathPanelInfo-"+this._uid);o&&(s.totalDistance||s.greaterSlope||s.meanSlope||s.ascendingElevation||s.descendingElevation)&&(o.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$7.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,i=this.options.displayProfileOptions.greaterSlope,r=this.options.displayProfileOptions.ascendingElevation,s=this.options.displayProfileOptions.descendingElevation,o=this._infoContainer;if(o.childElementCount)for(;o.firstChild;)o.removeChild(o.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : "+Math.round(this._data.distance).toLocaleString()+" m"),r&&this._addElevationPathInformationsItem("Dénivelé positif : "+this._data.ascendingElevation.toLocaleString()+" m"),s&&this._addElevationPathInformationsItem("Dénivelé négatif : "+this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),i&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){var t=this.getMap();Interactions.unset(t,{current:"ElevationPath"});var i=this._pictoButton.ariaPressed;i==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(t,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(t,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},_n(sn,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),sn);Object.assign(ElevationPath.prototype,ElevationPathDOM);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$6=LoggerByDefault.getLogger("layerimport"),qt,LayerImport=(qt=class extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof qt))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(i){i.element.gpResultLayerId==="layerimport:MAPBOX"&&i.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(i.element.gpEditorId),t._mapBoxPanel.style.display="none",t._importPanel.style.display="")},t),this.draggable&&(Draggable.dragElement(this._importPanel,this._importPanelHeader,this.options.position?null:e.getTargetElement()),Draggable.dragElement(this._getCapPanel,this._getCapPanelHeader,e.getTargetElement()),Draggable.dragElement(this._mapBoxPanel,this._mapBoxPanelHeader,e.getTargetElement())),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$6.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:qt.DefaultStyles.image,stroke:qt.DefaultStyles.stroke,fill:qt.DefaultStyles.fill,text:qt.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:qt.DefaultStyles.image,stroke:qt.DefaultStyles.stroke,fill:qt.DefaultStyles.fill,text:qt.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:qt.DefaultStyles.image,stroke:qt.DefaultStyles.stroke,fill:qt.DefaultStyles.fill,text:qt.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:qt.DefaultStyles.image,stroke:qt.DefaultStyles.stroke,fill:qt.DefaultStyles.fill,text:qt.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],i=0;i<e.layerTypes.length;i++)t.push(e.layerTypes[i]);this.options.layerTypes=t}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))logger$6.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var i=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],r=[],s=0;s<t.length;s++)typeof t[s]!="string"?(r.push(s),logger$6.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[s]+")")):(t[s]=t[s].toUpperCase(),i.indexOf(t[s])===-1&&(r.push(s),logger$6.log("[ol.control.LayerImport] options.layerTypes : "+t[s]+" is not a supported type")),t[s]==="GEOJSON"&&(t[s]="GeoJSON"),t[s]==="MAPBOX"&&(t[s]="MAPBOX"));if(r.length!==0)for(var o=r.length-1;o>=0;o--)t.splice(r[o],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var i=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:i.image,stroke:i.stroke,fill:i.fill,text:i.text});var r=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:r.image,stroke:r.stroke,fill:r.fill,text:r.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var i=this._importPanel=this._createImportPanelElement(),r=this._createImportPanelDivElement();i.appendChild(r);var s=this._importPanelHeader=this._createImportPanelHeaderElement(),o=this._createImportPanelTitleElement();s.appendChild(o);var a=this._panelCloseButton=this._createImportPanelCloseElement();s.appendChild(a),r.appendChild(s);var d=this._formContainer=this._initInputFormElement();r.appendChild(d);var y=this._getCapPanel=this._createImportGetCapPanelElement(),v=this._getCapPanelHeader=this._createImportGetCapPanelHeaderElement();y.appendChild(v);var _=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();y.appendChild(_),r.appendChild(y);var C=this._mapBoxPanel=this._createImportMapBoxPanelElement(),E=this._mapBoxPanelHeader=this._createImportMapBoxPanelHeaderElement();C.appendChild(E);var S=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();C.appendChild(S);var b=this._loadingContainer=this._createLoadingElement();C.appendChild(b),r.appendChild(C);var P=this._waitingContainer=this._createImportWaitingElement();return r.appendChild(P),e.appendChild(i),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var i=this._createImportStaticParamsContainer(this.options.layerTypes[0]),r=this._createStaticNameLabel();i.appendChild(r);var s=this._createStaticModeChoiceDiv(),o=this._createStaticLocalChoiceDiv();s.appendChild(o);var a=this._createStaticUrlChoiceDiv();s.appendChild(a),i.appendChild(s);var d=this._createStaticLocalInputDiv();d.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),d.appendChild(this._staticLocalImportInput),i.appendChild(d);var y=this._createStaticUrlInputDiv();y.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),y.appendChild(this._staticUrlImportInput),i.appendChild(y),e.appendChild(i);var v=this._createServiceParamsContainer(this.options.layerTypes[0]),_=this._createServiceUrlDiv();_.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),_.appendChild(this._serviceUrlImportInput),v.appendChild(_),e.appendChild(v);var C=this._createImportSubmitFormElement();return e.appendChild(C),e}_onShowImportClick(){var e=this.getMap();Interactions.unset(e);var t=this._showImportButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?this._mapBoxPanel.style.display="block":(this._formContainer.style.display="block",this._importPanelHeader.style.display="")}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className=""}_onMapBoxReturnPictoClick(e){this._mapBoxPanel.style.display="none",this._loadingContainer.className=""}_onImportSubmit(){logger$6.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",logger$6.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$6.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$6.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(logger$6.log("url : ",t),t.length===0){logger$6.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=ProxyUtils.proxifyUrl(t,this.options.webServicesOptions));var i=this;Gp.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(r){i._hideWaitingContainer(),i._addFeaturesFromImportStaticLayer(r,e)},onFailure:function(r){i._hideWaitingContainer(),logger$6.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",r)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){logger$6.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var i=new FileReader,r=this;i.onerror=s=>{r._hideWaitingContainer(),logger$6.error("error fileReader : ",s)},i.onprogress=()=>{logger$6.log("onprogress")},i.onloadstart=()=>{r._displayWaitingContainer(),logger$6.log("onloadstart")},i.onabort=()=>{r._hideWaitingContainer(),logger$6.log("onabort")},i.onloadend=s=>{logger$6.log("onloadend : ",s)},i.onload=s=>{logger$6.log("fileReader onload - file content : ",s.target.result),r._hideWaitingContainer(),r._addFeaturesFromImportStaticLayer(s.target.result,e)},i.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var i=this.getMap();if(!(!i||!e)){var r=null,s=null,o=null,a=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var d=this,y=JSON.parse(e),v=y.sources,_=Object.keys(v).length>1?1:0;for(var C in v)if(v.hasOwnProperty(C)){var E="",S="",b=null,P=null,x=null,T=null;if(y.metadata){for(var R in y.metadata)if(y.metadata.hasOwnProperty(R)){var L=R.split(":");if(L[0]==="geoportail"){var k=L[1];if(k==="title"){E=y.metadata[R];continue}if(k==="description"){S=y.metadata[R];continue}if(k==="quicklookUrl"){b=y.metadata[R];continue}if(k==="legends"){P=y.metadata[R];continue}if(k==="metadata"){x=y.metadata[R];continue}if(k==="originators"){T=y.metadata[R];continue}}}}E||(E="Couche MapBox"),S||(S="Couche MapBox"),E=_?E+"("+C+")":E;var N=v[C],D=N.type;if(D==="vector"){var G=N.url,U=N.tiles,F=y.sprite;if(G&&G.indexOf("mapbox://")===0){var B=this._url;if(B){if(U=["a","b","c","d"].map(function($){var de=G.replace("mapbox://",""),ue=B.split("?")[1];return"https://"+$+".tiles.mapbox.com/v4/"+de+"/{z}/{x}/{y}.vector.pbf?"+ue}),F.indexOf("mapbox://")===0){var z=B.split("?");y.sprite=z[0]+"/sprite?"+z[1]}}else logger$6.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(U)o=new MVT({featureClass:Feature}),s=new VectorTile({attributions:N.attribution,format:o,urls:U}),s._title=E,s._description=S,s._quicklookUrl=b,s._metadata=x,s._legends=P,s._originators=T,s.on("tileloadstart",function($){d._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function($){d._loadingContainer.className=""}),s.on("tileloaderror",function($){d._loadingContainer.className=""}),r=new VectorTileLayer({source:s,visible:!1,declutter:!0}),r.id=C,r.gpResultLayerId="layerimport:"+this._currentImportType;else if(G){o=new MVT({featureClass:Feature}),r=new VectorTileLayer({visible:!1,declutter:!0}),r.id=C,r.gpResultLayerId="layerimport:"+this._currentImportType;var Y=new TileJSON({url:G}),X=Y.on("change",function(){if(Y.getState()==="ready"){for(var $=Y.getTileJSON(),de=Array.isArray($.tiles)?$.tiles:[$.tiles],ue=0;ue<de.length;ue++){var fe=de[ue];fe.indexOf("http")!==0&&(de[ue]=G+fe)}s=new VectorTile({attributions:Y.getAttributions()||$.attribution,format:o,urls:de}),s._title=E,s._description=S,s._quicklookUrl=b,s._metadata=x,s._legends=P,s._originators=T,s.on("tileloadstart",function(Ge){d._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function(Ge){d._loadingContainer.className=""}),r.setSource(s),r.set("mapbox-extension",$.vector_layers),unByKey(X)}})}}else if(D==="geojson"){var q=N.data;o=new GeoJSON,s=new VectorTile({attributions:N.attribution,format:o,url:q}),s._title=E,s._description=S,s._quicklookUrl=b,s._metadata=x,s._legends=P,s._originators=T,r=new VectorTileLayer({source:s,visible:!1,declutter:!0}),r.id=C,r.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$6.warn("Type MapBox format unknown !");return}var K=JSON.parse(JSON.stringify(y));if(_){for(var ee=K.layers,te=0;te<ee.length;te++){var Oe=ee[te];if(Oe.source!==C){ee.splice(te,1);continue}}for(var ie in K.sources)K.sources.hasOwnProperty(ie)&&ie!==C&&delete K.sources[ie]}var it={id:C,styles:K,layer:r,options:{title:t||E,description:S,quicklookUrl:b,metadata:x,legends:P,originators:T}};(function($){var de=()=>{applyStyle($.layer,$.styles,$.id).then(function(){var Ge=!0;$.layer.setVisible(Ge);var Be=1;$.layer.setOpacity(Be)}).then(function(){var Ge=i.getView().getProjection().getCode();i.getView()&&$.styles.center&&$.styles.center.length&&i.getView().setCenter(transform$1($.styles.center,"EPSG:4326",Ge)),i.getView()&&($.styles.zoom||$.styles.zoom===0)&&i.getView().setZoom($.styles.zoom);var Be=$.layer.getSource();if(i.getView()&&i.getSize()&&Be.getExtent){var ye=Be.getExtent();ye&&ye[0]!==1/0&&i.getView().fit(Be.getExtent(),i.getSize())}}).then(function(){d._formContainer.style.display="none",d._importPanelHeader.style.display="none";var Ge=new Editor({target:d._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify($.styles)),scope:this,events:{"editor:onloaded":d._onLoadedMapBox,"editor:layer:onclickvisibility":d._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":d._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":d._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":d._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":d._onDisplayLayerSourceMapBox},tools:d.options.vectorStyleOptions.MapBox.editor});return Ge.setContext("map",i),Ge.setContext("layer",$.layer),Ge.createElement().then(function(){if(Ge.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){d.options.vectorStyleOptions.MapBox.display&&(d._mapBoxPanel.style.display="block")}).then(function(){var Be=d._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let ye=0;ye<Be.length;ye++){const pe=Be[ye];pe.textContent==="bckgrd"&&(pe.textContent="Couleur de remplissage")}}).then(function(){$.layer.set("mapbox-editor",Ge.getID()),setTimeout(function(){i.dispatchEvent({id:Ge.getID(),type:"editor:loaded",style:$.styles,layer:$.layer})},100)}).catch(function(Be){throw Be})}).then(function(){i.dispatchEvent({id:$.id,type:"render:success",style:$.styles})}).catch(function(Ge){logger$6.error(Ge),i.dispatchEvent({id:$.id,type:"render:failure",error:Ge})})};logger$6.warn($.layer);var ue=i.get("mapbox-styles")||{},fe=$.id;ue[fe]=$.styles,i.set("mapbox-styles",ue),$.layer.set("mapbox-styles",$.styles),i.addLayer($.layer),$.layer.getSource()?de():$.layer.once("change:source",de),i.getControls().forEach(Ge=>{Ge instanceof LayerSwitcher&&Ge.addLayer($.layer,$.options)})})(it)}}else{this._currentImportType==="KML"?(a=this.options.vectorStyleOptions.KML.defaultStyle,o=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[a]})):this._currentImportType==="GPX"?(a=this.options.vectorStyleOptions.GPX.defaultStyle,o=new GPX({defaultStyle:a})):this._currentImportType==="GeoJSON"&&(a=this.options.vectorStyleOptions.GeoJSON.defaultStyle,o=new GeoJSON({defaultStyle:a}));var oe=o.readProjection(e),ft=this._getMapProjectionCode(),ct=null;ct=o.readFeatures(e,{dataProjection:oe,featureProjection:ft}),logger$6.log("loaded features : ",ct),s=new VectorSource({features:new Collection}),s.addFeatures(ct),logger$6.trace(s),s._title=s._description=t,r=new VectorLayer({source:s,style:a}),r.gpResultLayerId="layerimport:"+this._currentImportType;var Qe=o.readRootExtensions("geoportail:compute");if(Qe&&Object.keys(Qe).length!==0){var dt={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},re=Qe.type,Ve=Qe.transport;if(re){var je=dt[re].name,se=Ve?je+" ("+Ve+")":je,pt=dt[re].class;if(pt){r.gpResultLayerId="layerimport:COMPUTE",r.set("control",re),r.set("name",je),r.set("graph",Ve),r.set("data",Qe),r.set("title",se);var xt=new GeoJSON({defaultStyle:a}),H=xt.writeFeatures(ct,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});r.set("geojson",H),this.getMap().getControls().forEach($=>{$ instanceof pt&&($.setData(Qe),$.setLayer(r),$.init())})}}}if(i.addLayer(r),i.getView()&&i.getSize()&&s.getExtent){var W=s.getExtent();W&&W[0]!==1/0&&i.getView().fit(s.getExtent(),i.getSize())}}}}_addFeaturesFromImportStaticLayerUrl(e,t){var i=this.getMap();if(!(!i||!e)){var r,s,o;if(this._currentImportType==="MAPBOX"?logger$6.trace("Not yet implemented !"):(this._currentImportType==="KML"?o=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?o=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(o=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),r=new VectorSource({url:e,format:o}),this._currentImportType==="GPX"&&r.forEachFeature(function(d){d.getStyle()==null&&(logger$6.log("[ol.control.LayerImport] set default style for GPX feature"),d.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&r.forEachFeature(function(d){d.getStyle()==null&&(logger$6.log("[ol.control.LayerImport] set default style for GeoJSON feature"),d.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),r._title=r._description=t,s=new VectorLayer({source:r})),s.gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(s),i.getView()&&i.getSize()&&r.getExtent){var a=r.getExtent();a&&a[0]!==1/0&&i.getView().fit(r.getExtent(),i.getSize())}}}_onLoadedMapBox(e){var t=e.target.data.obj,i=this.getContext("layer");i.get("mapbox-source")===t.source&&(i.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,i=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){var d=o[a].layout;d?d.visibility=i.checked?"visible":"none":o[a].layout={visibility:i.checked?"visible":"none"};break}applyStyle(r,s,t.source).then(function(){}).catch(function(y){logger$6.error(y)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,i=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){o[a].minzoom=i.value,i.title=i.value;break}applyStyle(r,s,t.source).then(function(){}).catch(function(d){logger$6.error(d)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,i=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){o[a].maxzoom=i.value,i.title=i.value;break}applyStyle(r,s,t.source).then(function(){}).catch(function(d){logger$6.error(d)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,i=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){var d=o[a].paint;d&&(d[i.dataset.id]=i.value);break}applyStyle(r,s,t.source).then(function(){}).catch(function(y){logger$6.error(y)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,i=this.getContext("layer");if(i.get("mapbox-source")===t.source&&i.get("mapbox-editor")===e.target.editorID){var r=e.target.currentTarget.parentNode.id,s=r.substring(r.indexOf("-")+1,r.indexOf("_")),o=this.getLayer(s);o.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$6.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$6.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$6.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var i=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(r){i._hideWaitingContainer(),i._displayGetCapResponseLayers(r)},onFailure:function(r){i._hideWaitingContainer(),logger$6.error("[ol.control.LayerImport] getCapabilities request failed : ",r)}})}_displayGetCapResponseLayers(e){var t,i,r={content:null,title:null},s;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block",this._currentImportType==="WMS"){t=new WMSCapabilities;var o=this._getCapResponseWMS=t.read(e);if(logger$6.log("getCapabilities response : ",o),o&&o.Capability&&o.Capability.Layer){var a=o.Capability.Layer;if(Array.isArray(a))for(var d=0;d<a.length;d++)this._displayGetCapResponseWMSLayer(a[d]);else this._displayGetCapResponseWMSLayer(a)}}else if(this._currentImportType==="WMTS"){t=new WMTSCapabilities;var y=this._getCapResponseWMTS=t.read(e);if(logger$6.log("getCapabilities response : ",y),y&&y.Contents&&y.Contents.Layer&&(i=y.Contents.Layer,Array.isArray(i))){this._getCapResponseWMTSLayers=i;for(var v=0;v<i.length;v++)if(s=this._getWMTSLayerProjection(i[v],y),s&&typeof s=="string")if(get$3(s)||get$3(s.toUpperCase()))r={content:i[v].Title,title:i[v].Abstract||i[v].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(r,v,this._getCapResultsListContainer);else{logger$6.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",i[v]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){logger$6.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$6.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var i=this._getMapProjectionCode(),r,s={content:null,title:null};if(t){var o,a,d=["CRS","Style"];for(a=0;a<d.length;a++)if(o=d[a],Array.isArray(t[o])&&t[o].length!==0)if(Array.isArray(e[o])&&e[o].length!==0)for(var y=0;y<t[o].length;y++)e[o].indexOf(t[o][y])===-1&&e[o].push(t[o][y]);else e[o]=t[o];var v=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(a=0;a<v.length;a++)o=v[a],t[o]&&!e[o]&&(e[o]=t[o])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var _=e?e._container:t._container,C=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(C,_).lastChild;for(var E=0;E<e.Layer.length;E++){for(var S=!1,b=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),P=0;P<b.length;P++)b[P].title===e.Title&&(S=!0,e.Layer[E]._container=b[P].parentElement);S||(e.Layer[E]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[E],e)}}}else{var x=this._getCapResponseWMSLayers.length;if(r=this._getWMSLayerProjection(e,i),!r)logger$6.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=r,s={content:e.Title,title:e.Abstract||e.Title};var T=e._container;T.localName==="ul"&&(T=T.lastChild),this._addImportGetCapResultLayer(s,x,T),this._getCapResponseWMSLayers[x]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var i;this._currentImportType==="WMS"?(i=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(i)):this._currentImportType==="WMTS"&&(i=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(i))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){logger$6.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$6.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var i=this._getMapProjectionCode(),r={},s=this._getWMSLayerGetMapUrl();if(s)r.url=s;else{var o=this._getCapRequestUrl.indexOf("?");o!==-1?r.url=this._getCapRequestUrl.substring(0,o):r.url=this._getCapRequestUrl}if(r.params={},e.Name)r.params.LAYERS=e.Name;else{logger$6.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}r.params.SERVICE="WMS",this._getCapResponseWMS.version&&(r.params.VERSION=this._getCapResponseWMS.version);var a=e._projection;if(a)a!==i&&(r.projection=a);else{logger$6.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var d;if(e.Style&&Array.isArray(e.Style)){var y=e.Style[0];r.params.STYLES=y.Name,y.LegendURL&&Array.isArray(y.LegendURL)&&y.LegendURL.length!==0&&(d=y.LegendURL[0].OnlineResource)}var v=new TileWMS(r);this._getWMSLayerInfoForLayerSwitcher(e,d,v);var _={};_.source=v,this._getWMSLayerMinMaxResolution(e,i,_),this._getWMSLayerExtent(e,i,_);var C=new TileLayer(_);C.gpResultLayerId="layerimport:WMS",e.queryable&&(C.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(C.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(C)}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var i=t.DCPType[0];i&&i.HTTP&&i.HTTP.Get&&(e=i.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var i;if(!e||typeof e!="object"){logger$6.warn("missing layer information (from getCapabilities)");return}var r=e.CRS;if(Array.isArray(r)){if(r.includes(t))return i=t,i;var s,o;for(o=0;o<r.length;o++)if(s=r[o],s&&typeof s=="string"&&(get$3(s)||get$3(s.toUpperCase())))return i=s,i}return i}_getWMSLayerMinMaxResolution(e,t,i){var r=get$3(t).getUnits();if(r==="m")e.MinScaleDenominator&&(i.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(i.maxResolution=e.MaxScaleDenominator*28e-5);else if(r==="degrees"){var s=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(i.minResolution=e.MinScaleDenominator*s),e.MaxScaleDenominator&&(i.maxResolution=e.MaxScaleDenominator*s)}}_getWMSLayerExtent(e,t,i){if(!e){logger$6.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var r=e.EX_GeographicBoundingBox,s=e.BoundingBox;if(r&&Array.isArray(r))t==="EPSG:4326"?i.extent=r:i.extent=transformExtent(r,"EPSG:4326",t);else if(s&&Array.isArray(s)){for(var o,a,d=0;d<s.length;d++)if(o=s[d].crs,a=s[d].extent,o){if(o===t){i.extent=a;break}else if(typeof o=="string"){var y=get$3(o)?get$3(o):get$3(o.toUpperCase());if(y){if(y.getUnits()==="degrees"&&o.toUpperCase().indexOf("EPSG")===0){var v=[a[1],a[0],a[3],a[2]];i.extent=transformExtent(v,y,t)}else i.extent=transformExtent(a,y,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,i){if(e.Title?(i._title=e.Title,i._description=e.Abstract?e.Abstract:e.Title):(i._title=e.Name,i._description=e.Abstract?e.Abstract:e.Name),t&&(i._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){i._metadata=[];for(var r=0;r<e.MetadataURL.length;r++){var s=e.MetadataURL[r].OnlineResource;s&&i._metadata.push({url:s})}}if(e.Attribution){var o=e.Attribution;i._originators={},o.OnlineResource&&(i._originators.url=o.OnlineResource),o.Title&&(i._originators.name=i._originators.attribution=o.Title),o.LogoURL&&o.LogoURL.OnlineResource&&(i._originators.logo=o.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$6.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var i={};i.layer=e.Identifier,this._getCapResponseWMTS.version&&(i.version=this._getCapResponseWMTS.version);var r=this._getWMTSLayerGetTileUrl();if(r)i.url=r;else{var s=this._getCapRequestUrl.indexOf("?");s!==-1?i.url=this._getCapRequestUrl.substring(0,s):i.url=this._getCapRequestUrl}var o=this._getTMSParams(e);i.matrixSet=o.tms,i.projection=o.projCode,i.tileGrid=new WMTSTileGrid({resolutions:o.resolutions,matrixIds:o.matrixIds,origin:o.origin});var a,d;if(e.Style&&Array.isArray(e.Style))for(var y,v=0;v<e.Style.length&&(y=e.Style[v],a=y.Identifier,!y.isDefault);v++)y.LegendURL&&Array.isArray(y.LegendURL)&&y.LegendURL.length!==0&&(d=y.LegendURL[0].href);a==null&&logger$6.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),i.style=a;var _;e.Format&&Array.isArray(e.Format)&&(_=e.Format[0]),_==null&&logger$6.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),i.format=_;var C=new WMTS$1(i);e.Title?(C._title=e.Title,C._description=e.Abstract?e.Abstract:e.Title):(C._title=e.Identifier,C._description=e.Abstract?e.Abstract:e.Identifier),d&&(C._legends=[{url:d}]);var E={};E.source=C,E.extent=this._getWMTSLayerExtent(e);var S;try{S=new TileLayer(E)}catch(b){logger$6.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",b);return}S.gpResultLayerId="layerimport:WMTS",t.addLayer(S)}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var i;if(!e||typeof e!="object"){logger$6.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){logger$6.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var r=e.TileMatrixSetLink[0].TileMatrixSet,s;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var o=t.Contents.TileMatrixSet,a=0;a<o.length;a++)if(o[a].Identifier===r&&o[a].TileMatrix){var d=o[a];s=d.SupportedCRS,s&&typeof s=="string"&&(get$3(s)||get$3(s.toUpperCase()))&&(i=s);break}}}return i}_getTMSParams(e){var t={},i=[],r=[],s=[],o,a,d,y=this.getMap();if(y){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(o=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var v=this._getCapResponseWMTS.Contents.TileMatrixSet,_=0;_<v.length;_++)if(v[_].Identifier===o&&v[_].TileMatrix){var C=v[_],E,S,b,P,x;if(C.SupportedCRS&&(a=C.SupportedCRS,d=get$3(a)),d&&d.getUnits&&(x=d.getUnits()),Array.isArray(C.TileMatrix))for(var T=0;T<C.TileMatrix.length;T++)E=C.TileMatrix[T],E.Identifier!=null&&(S=parseInt(E.Identifier,10),i.push(S)),b=E.ScaleDenominator,x==="degrees"?P=b*28e-5*180/(Math.PI*6378137):P=b*28e-5,r.push(P),s=E.TopLeftCorner;r.sort!==void 0&&r.sort(function(R,L){return L-R}),i.sort!==void 0&&i.sort(function(R,L){return R-L})}}else logger$6.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=o,t.projCode=a,t.matrixIds=i,t.resolutions=r,t.origin=s,t}}_getWMTSLayerExtent(e){var t,i=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=transformExtent(e.WGS84BoundingBox,"EPSG:4326",i)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$6.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}cleanGetCapResultsList(){if(this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let i=0;i<t.length;i++){const r=t[i];r.id==="GPEditorMapBoxContainer_ID_"+e&&r.remove()}}}},_n(qt,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),qt);Object.assign(LayerImport.prototype,LayerImportDOM);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$5=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class Rn extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof Rn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(i=>{if(!(i instanceof Rn)&&i){for(var r=i.element.classList,s=0;s<r.length;s++)if(r[s]==="ol-attribution"){t.remove(i);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},i=e.getView(),r=i.calculateExtent(e.getSize()),s=i.getProjection().getCode(),o=transformExtent(r,s,"EPSG:4326"),a=[o[3],o[0],o[1],o[2]],d=i.getZoom(),y=e.getLayers().getArray(),v=0;v<y.length;v++)if(y[v].getSource)this._updateLayerAttributions(y[v],t,a,s,d);else if(y[v].getLayers){var _=y[v].getLayers();_.forEach(C=>{C.getSource?this._updateLayerAttributions(C,t,a,s,d):logger$5.log("cannot find layer source in layergroup ",y[v])})}}_updateLayerAttributions(e,t,i,r,s){if(!e){logger$5.trace("layer is null !?");return}var o=e.getSource();if(!o){logger$5.trace("source is not yet loaded !");return}t||(t={});var a=[],d=e.getVisible(),y=o._originators;if(typeof y<"u"&&o.setAttributions(),y&&d){for(var v=LayerUtils.getAttributions({extent:i,crs:r,zoom:s,visibility:d,originators:y}),_=0;_<v.length;_++){var C=v[_];t.hasOwnProperty(C)||(a.push(C),t[C]=!0)}a.length!==0&&(o.setAttributions(a),this.dispatchEvent({type:"attributions:update",attributions:a}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureLength"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowMeasureLengthPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-length fr-btn",e.title="Mesurer une distance",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureLengthClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureLengthClick(t)}),e}},logger$4=LoggerByDefault.getLogger("measurelength"),MeasureLength=class Jn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Jn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$4.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var i=typeof window<"u"?window:typeof self<"u"?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}_initialize(e){logger$4.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$4.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$4.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$4.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$4.trace("call MeasureLength::format()");var t=this.getMap(),i;if(this.options.geodesic){var r=e.getCoordinates();i=0;for(var s=t.getView().getProjection(),o=0,a=r.length-1;o<a;++o){var d=transform$1(r[o],s,"EPSG:4326"),y=transform$1(r[o+1],s,"EPSG:4326");i+=getDistance(d,y)}}else i=Math.round(e.getLength()*100)/100;var v;return i>1e3?v=Math.round(i/1e3*100)/100+" km":v=Math.round(i*100)/100+" m",v}onShowMeasureLengthClick(e){logger$4.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureArea"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowMeasureAreaPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-area fr-btn",e.title="Mesurer une surface",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureAreaClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureAreaClick(t)}),e}},logger$3=LoggerByDefault.getLogger("measurearea"),MeasureArea=class Qn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Qn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$3.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var i=typeof window<"u"?window:typeof self<"u"?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}_initialize(e){logger$3.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$3.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$3.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$3.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$3.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var i=e.clone(),r=i.getLinearRing(0).getCoordinates();t=Math.abs(getArea(new Polygon([r])))}else t=e.getArea();var s;return t>1e6?s=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?s=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?s=Math.round(t/10)*10+" m<sup>2</sup>":s=Math.round(t*100)/100+" m<sup>2</sup>",s}onShowMeasureAreaClick(e){logger$3.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureAzimuth"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowMeasureAzimuthPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-azimuth fr-btn",e.title="Mesurer un azimut",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureAzimuthClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowMeasureAzimuthClick(t)}),e}},logger$2=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class ei extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof ei))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$2.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var i=typeof window<"u"?window:typeof self<"u"?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}_initialize(e){logger$2.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$2.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$2.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$2.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$2.trace("call MeasureAzimuth::format()");var t=this.getMap(),i=t.getView().getProjection(),r=transform$1(e.getFirstCoordinate(),i,"EPSG:4326"),s=transform$1(e.getLastCoordinate(),i,"EPSG:4326");if(!this.options.geodesic){var o=getDistance(r,s);if(logger$2.trace("measure between 2 points with geodesic method",o),o>500){var a=500/o;logger$2.trace("%",a),s=transform$1(e.getCoordinateAt(a),i,"EPSG:4326")}}var d=Math.PI/180,y=180/Math.PI,v=d*r[0],_=d*s[0],C=d*r[1],E=d*s[1],S=Math.sin(_-v)*Math.cos(E),b=Math.cos(C)*Math.sin(E)-Math.sin(C)*Math.cos(E)*Math.cos(_-v),P=Math.atan2(S,b),x=y*P;logger$2.trace("azimut",x),x<0&&(x+=360);var T=Math.round(x*100)/100+" °";return T}onShowMeasureAzimuthClick(e){logger$2.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var i=document.createElement("div");i.id=t,i.classList.add("position"),i.classList.add(t),this.container.appendChild(i)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let i=0;i<t.length;i++){const r=t[i];r.classList.contains(this.options.className+"-in")&&(r.classList.add("GPzoomIn","gpf-btn-icon-zoom-in","fr-btn","fr-btn--primary"),r.id="GPzoomIn",r.innerHTML="",r.addEventListener?r.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):r.attachEvent&&r.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})),r.classList.contains(this.options.className+"-out")&&(r.classList.add("GPzoomOut","gpf-btn-icon-zoom-out","fr-btn","fr-btn--primary"),r.id="GPzoomOut",r.innerHTML="",r.addEventListener?r.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):r.attachEvent&&r.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")}))}this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(i=>{i.element.classList.contains("ol-zoom")&&(i.element.classList.add("ol-hidden"),i.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(i):requestFullScreen(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,r=e.length;i<r;++i)unlistenByKey(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();isFullScreenSupported(i)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let r=0,s=events.length;r<s;++r)e.push(listen(i,events[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function isFullScreen(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function requestFullScreen(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function requestFullScreenWithKeys(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():requestFullScreen(n)}function exitFullScreen(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var i=document.createElement("div");i.id=t,i.classList.add("position"),i.classList.add(t),this.container.appendChild(i)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0];e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i)}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i)}),this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(i=>{i.element.classList.contains("ol-full-screen")&&(i.element.classList.add("ol-hidden"),i.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const s=e.label!==void 0?e.label:"›";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(o),a.addEventListener(EventType$1.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const d=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=d,e.layers&&e.layers.forEach(function(T){d.addLayer(T)});const y=document.createElement("div");y.className="ol-overviewmap-box",y.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:y}),this.ovmap_.addOverlay(this.boxOverlay_);const v=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=v,_.appendChild(this.ovmapDiv_),_.appendChild(a);const C=this,E=this.boxOverlay_,S=this.boxOverlay_.getElement(),b=function(T){return{clientX:T.clientX,clientY:T.clientY}},P=function(T){const R=b(T),L=d.getEventCoordinateInternal(R);E.setPosition(L)},x=function(T){const R=d.getEventCoordinateInternal(T);C.getMap().getView().setCenterInternal(R),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",x)};S.addEventListener("mousedown",function(){window.addEventListener("mousemove",P),window.addEventListener("mouseup",x)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const i=t.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&equals$1(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),d=t.getView().calculateExtentInternal(o),y=t.getPixelFromCoordinateInternal(getTopLeft(s)),v=t.getPixelFromCoordinateInternal(getBottomRight(s)),_=Math.abs(y[0]-v[0]),C=Math.abs(y[1]-v[1]),E=o[0],S=o[1];_<E*MIN_RATIO||C<S*MIN_RATIO||_>E*MAX_RATIO||C>S*MAX_RATIO?this.resetExtent_():containsExtent(d,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),o=t.getView(),a=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,d=1/(Math.pow(2,a/2)*MIN_RATIO);scaleFromCenter(s,d),o.fitInternal(fromExtent(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),r=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-r.getRotation(),a=this.boxOverlay_,d=this.boxOverlay_.getElement(),y=r.getCenterInternal(),v=r.getResolution(),_=s.getResolution(),C=i[0]*v/_,E=i[1]*v/_;if(a.setPosition(y),d){d.style.width=C+"px",d.style.height=E+"px";const S="rotate("+o+"rad)";d.style.transform=S}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const t={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var i="ol-overviewmap";e.className=e.className||i,e.collapseLabel=e.collapseLabel||"",e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:t})],super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var i=document.createElement("div");i.id=t,i.classList.add("position"),i.classList.add(t),this.container.appendChild(i)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,t=e[1];t.id="GPshowOverviewMap-"+this._uid,t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon-overviewmap","fr-btn","fr-btn--primary"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var i=this;t.addEventListener?t.addEventListener("click",function(r){var s=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!s),i.dispatchEvent({type:"overviewmap:toggle",status:s})}):t.attachEvent&&t.attachEvent("onclick",function(r){var s=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!s),i.dispatchEvent({type:"overviewmap:toggle",status:s})}),this.options.position&&(this.element.style.position="unset")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(n){var e=this.uid?n+"-"+this.uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlegends"),n.className="GPwidget gpf-widget gpf-widget-button",n},_createShowLegendsPictoElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn-icon gpf-btn-icon-legends fr-btn",e.title="Afficher les légendes",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowLegendsClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var i=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!i),n.onShowLegendsClick()}),e},_createLegendsPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPlegendsPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createLegendsPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__legends",n},_createLegendsPanelHeaderElement:function(){var n=document.createElement("div");return n.className="gpf-panel__header_legends",n},_createLegendsPanelIconElement:function(){var n=document.createElement("label");return n.className="gpf-btn-header-legends gpf-btn-icon-header-legends",n.title="Légendes",n},_createLegendsPanelTitleElement:function(){var n=document.createElement("div");return n.className="gpf-panel__title_legends",n.innerHTML="Légendes",n},_createLegendsPanelCloseElement:function(){var n=this,e=document.createElement("button");return e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var n=document.createElement("div");return n.className="legends-entries gpf-panel__body fr-modal__body",n},_createLegendEntry:function(n){const e=s=>{var o=function(){if(!window.DOMParser)return!1;var v=new DOMParser;try{v.parseFromString("x","text/html")}catch{return!1}return!0};if(o()){var a=new DOMParser,d=a.parseFromString(s,"text/html");return d.body}var y=document.createElement("div");return y.innerHTML=s,y};if(n&&n.legends&&n.legends.length){var t=n.legends[0].url,i=e(`
                    <div 
                        id="${n.id}" 
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${n.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${n.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${n.id}" class="legend-entry-image gpf-hidden">
                            <img src="${t}" alt="${n.desc}">
                        </div>
                    </div>
                `),r=i.firstChild.querySelector("button");return r&&r.addEventListener("click",s=>{var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o);var a=document.getElementById("GPlegend_ID_"+n.id);o?a.classList.replace("gpf-visible","gpf-hidden"):a.classList.replace("gpf-hidden","gpf-visible")}),i.firstChild}}},logger$1=LoggerByDefault.getLogger("legends");class Legends extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Legends))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var t=this;e.getLayers().forEach(i=>{t.add(i)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let t=0;t<e.length;t++)this.add(layer)}add(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return this.exist(t)?!1:(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}remove(e){var t=!1;if(e)for(let i=0;i<this.legends.length;i++){const r=this.legends[i];if(e.name===r.obj.name&&e.service===r.obj.service){r.dom&&this.legends[i].dom.remove(),this.legends.splice(i,1),t=!0;break}}return t}exist(e){var t=!1;for(let i=0;i<this.legends.length;i++)if(this.legends[i].dom.id===e.id){t=!0;break}return t}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var i=this.panelLegendsContainer=this._createLegendsPanelElement(),r=this._createLegendsPanelDivElement();i.appendChild(r);var s=this.panelLegendsEntriesContainer=this._createLegendElement();if(i.appendChild(s),this.options.panel){var o=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),a=this._createLegendsPanelIconElement();o.appendChild(a);var d=this._createLegendsPanelTitleElement();o.appendChild(d);var y=this.buttonLegendsClose=this._createLegendsPanelCloseElement();o.appendChild(y),r.appendChild(o)}return e.appendChild(i),logger$1.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners["layer:add"]=function(i){if(logger$1.trace(i),!t.add(i.element)){logger$1.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(i){if(logger$1.trace(i),!t.remove(i.element)){logger$1.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(i){logger$1.trace(i)},this.eventsListeners["view:change:resolution"]=function(i){logger$1.trace(i);var r=t.getMap();for(let C=0;C<t.legends.length;C++){const E=t.legends[C];var s=t.getMetaInformations(E.obj);if(s){var o=r.getView().getResolution()||r.getView().getResolutionForZoom(r.getZoom()),a=o*3570,d=s.legends.slice(),y=d[0];for(let S=0;S<d.length;++S){const b=d[S];b.minScaleDenominator||(b.minScaleDenominator=0),(a>y.minScaleDenominator&&b.minScaleDenominator>y.minScaleDenominator&&b.minScaleDenominator<a||a<y.minScaleDenominator&&b.minScaleDenominator<y.minScaleDenominator)&&(y=b)}if(s.legends[0]!==y){s.legends=[],s.legends.push(y);var v=t._createLegendEntry(s),_=E.dom;_.replaceWith(v),E.dom=v}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){logger$1.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}}Object.assign(Legends.prototype,LegendsDOM);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const _sfc_main$s={__name:"FullScreen",props:{visibility:Boolean,fullscreenOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(i.value):t.removeControl(i.value)}),(r,s)=>null}},useDataStore=defineStore("data",()=>{const n=ref({}),e=ref([]),t=ref({}),i=ref({}),r=ref({}),s=ref(!1),o=ref("");async function a(){try{const N="data/layers.json",G=await fetch("data/edito.json"),F=await(await fetch(N)).json(),B=await G.json(),z=Object.fromEntries(Object.keys(B.layers).map(X=>[X,{...F.layers[X],...B.layers[X]}])),Y={...F.layers,...z};return n.value=B.informations,e.value=B.thematics,t.value=Y,i.value=F.generalOptions,r.value=F.tileMatrixSets,this.isLoaded=!0,Y}catch(N){console.log(N),this.isLoaded=!1,o.value=N.message}}function d(){return n.value}function y(){return e.value}function v(){return t.value}function _(N,D){for(const G in t.value)if(Object.hasOwnProperty.call(t.value,G)){const U=t.value[G];if(U.name===N&&U.serviceParams.id.split(":")[1]===D)return U.name+"$GEOPORTAIL:"+U.serviceParams.id}}function C(N,D){const G=this.getLayerIdByName(N,D);return this.getLayerByID(G)}function E(N){return t.value[N]}function S(N){return Object.values(t.value).filter(D=>{if(N&&D.title==N)return D})}function b(N){var D=[],G=i.value.apiKeys;for(var U in G){var F=G[U];F.forEach(function(B){B===N&&D.push(U)})}return D}function P(N,D){var G=null;if((D==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var U=this.getLayerIdByName(N,D);G=this.getLayerParamsByID(U)}return G}function x(N){var D=null;if(N){D={};var G=this.getLayerByID(N),U=this.getLayerKeysByID(N);if(U.length===0)return;for(var F=0;F<U.length;F++)G.serviceParams.serverUrl[U[F]]&&(D.url=G.serviceParams.serverUrl[U[F]]);if(/\/v\//.test(D.url)?D.styles=" ":D.styles=G.styles[0].name,D.version=G.serviceParams.version,D.format=G.formats[0].name,D.projection=G.defaultProjection,D.minScale=G.globalConstraint.minScaleDenominator,D.maxScale=G.globalConstraint.maxScaleDenominator,D.extent=G.globalConstraint.bbox,D.legends=G.legends,D.title=G.title,D.description=G.description,G.wmtsOptions){D.tileMatrixSetLimits=G.wmtsOptions.tileMatrixSetLimits;var B=G.wmtsOptions.tileMatrixSetLink;if(B){D.TMSLink=B;var z=this.getTileMatrixSetByID(B);D.matrixIds=Object.keys(z.tileMatrices),D.tileMatrices=z.tileMatrices,D.nativeResolutions=z.nativeResolutions}}}return D}function T(N){var D=null;if(N){var G=this.getLayerByID(N);D={},D.projection=G.defaultProjection,D.minScale=G.globalConstraint.minScaleDenominator,D.maxScale=G.globalConstraint.maxScaleDenominator,D.extent=G.globalConstraint.bbox}return D}function R(N,D){var G=this.getLayerIdByName(N,D);return this.getGlobalConstraintsByID(G)}function L(){return r.value}function k(N){return r.value[N]}return{error:o,isLoaded:s,fetchData:a,getInformations:d,getThematics:y,getLayers:v,getLayerKeysByID:b,getLayerIdByName:_,getLayerByName:C,getLayerByID:E,getLayerByTitle:S,getTileMatrixSets:L,getTileMatrixSetByID:k,getLayerParamsByName:P,getLayerParamsByID:x,getGlobalConstraintsByID:T,getGlobalConstraintsByName:R}}),_sfc_main$r={__name:"ReverseGeocode",props:{visibility:Boolean,reverseGeocodeOptions:Object},setup(n){const e=n,t=dist.useLogger();useDataStore();const i=inject("map"),r=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{e.visibility&&(i.addControl(r.value),r.value.on("reverseGeocode:onclickresult",s),r.value.on("reverseGeocode:compute",o))}),onBeforeUpdate(()=>{e.visibility||i.removeControl(r.value)}),onUpdated(()=>{e.visibility&&i.addControl(r.value)});const s=a=>{t.debug(a)},o=a=>{t.debug(a)};return(a,d)=>null}},_sfc_main$q={__name:"SearchEngine",props:{visibility:Boolean,searchEngineOptions:Object},setup(n){const e=n,t=dist.useLogger(),i=useMapStore(),r=useDataStore(),s=inject("map"),o=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(s.addControl(o.value),o.value.on("searchengine:search:click",a))}),onBeforeUpdate(()=>{e.visibility||s.removeControl(o.value)}),onUpdated(()=>{e.visibility&&s.addControl(o.value)}),onUnmounted(()=>{});const a=d=>{var y=r.getLayerIdByName(d.suggest.name,d.suggest.service);t.debug("onClickSearch",y),i.addLayer(y)};return(d,y)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=getPointResolution(i,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,d=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let y=a*o,v="";if(r=="degrees"){const R=METERS_PER_UNIT$1.degrees;y*=R,y<R/60?(v="″",o*=3600):y<R?(v="′",o*=60):v="°"}else if(r=="imperial")y<.9144?(v="in",o/=.0254):y<1609.344?(v="ft",o/=.3048):(v="mi",o/=1609.344);else if(r=="nautical")o/=1852,v="NM";else if(r=="metric")y<.001?(v="μm",o*=1e6):y<1?(v="mm",o*=1e3):y<1e3?v="m":(v="km",o/=1e3);else if(r=="us")y<.9144?(v="in",o*=39.37):y<1609.344?(v="ft",o/=.30480061):(v="mi",o/=1609.3472);else throw new Error("Invalid units");let _=3*Math.floor(Math.log(a*o)/Math.log(10)),C,E,S,b,P,x;for(;;){S=Math.floor(_/3);const R=Math.pow(10,S);if(C=LEADING_DIGITS[(_%3+3)%3]*R,E=Math.round(C/o),isNaN(E)){this.element.style.display="none",this.renderedVisible_=!1;return}if(d!==void 0&&E>=d){C=b,E=P,S=x;break}else if(E>=a)break;b=C,P=E,x=S,++_}const T=this.scaleBar_?this.createScaleBar(E,C,v):C.toFixed(S<0?-S:0)+" "+v;this.renderedHTML_!=T&&(this.innerElement_.innerHTML=T,this.renderedHTML_=T),this.renderedWidth_!=E&&(this.innerElement_.style.width=E+"px",this.renderedWidth_=E),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,d=[this.createMarker("absolute")];for(let v=0;v<o;++v){const _=v%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";d.push(`<div><div class="ol-scale-singlebar ${_}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(v%2===0||o===2?this.createStepText(v,e,!1,t,i):"")+"</div>")}return d.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+d.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),d=e===0?-3:t/this.scaleBarSteps_*-1,y=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${d}px;text-align: ${e===0?"left":"center"};min-width: ${y}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$p={__name:"ScaleLine",props:{visibility:Boolean,scaleLineOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(i.value)}),onUpdated(()=>{e.visibility&&t.addControl(i.value)}),(r,s)=>null}},_sfc_main$o={__name:"OverviewMap",props:{visibility:Boolean,overviewMapOptions:Object},setup(n){const e=n,t=dist.useLogger(),i=inject("map"),r=ref(new GeoportalOverviewMap(e.overviewMapOptions)),s=useMatchMedia("SM");watch(s,()=>{e.visibility&&!s.value?i.addControl(r.value):i.removeControl(r.value)}),onMounted(()=>{e.visibility&&!s.value&&(i.addControl(r.value),r.value.on("overviewmap:toggle",o))}),onBeforeUpdate(()=>{e.visibility&&!s.value?i.addControl(r.value):i.removeControl(r.value)});function o(a){t.debug(a)}return(a,d)=>null}},_sfc_main$n={__name:"Zoom",props:{visibility:Boolean,zoomOptions:Object},setup(n){const e=n,t=dist.useLogger(),i=inject("map"),r=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(i.addControl(r.value),r.value.on("zoom:in",s),r.value.on("zoom:out",o))}),onBeforeUpdate(()=>{e.visibility||i.removeControl(r.value)}),onUpdated(()=>{e.visibility&&i.addControl(r.value)});function s(a){t.debug(a)}function o(a){t.debug(a)}return(a,d)=>null}},_export_sfc=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},_sfc_main$m={__name:"Attributions",props:{visibility:Boolean,attributionsOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new Attribution(e.attributionsOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(i.value)}),onUpdated(()=>{e.visibility&&t.addControl(i.value)}),(r,s)=>null}},Attributions=_export_sfc(_sfc_main$m,[["__scopeId","data-v-ea8a5dd7"]]),_sfc_main$l={__name:"LayerSwitcher",props:{visibility:Boolean,layerSwitcherOptions:Object},setup(n){const e=n,t=dist.useLogger(),i=useMapStore(),r=useDataStore(),s=inject("map"),o=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{e.visibility&&(s.addControl(o.value),o.value.on("layerswitcher:add",a),o.value.on("layerswitcher:remove",d),o.value.on("layerswitcher:extent",y),o.value.on("layerswitcher:change:opacity",v),o.value.on("layerswitcher:change:visibility",_))}),onBeforeUpdate(()=>{e.visibility||s.removeControl(o.value)}),onUpdated(()=>{e.visibility&&s.addControl(o.value)});const a=C=>{var E=r.getLayerIdByName(C.layer.name,C.layer.service);t.debug("onAddLayer",E),i.addLayer(E)},d=C=>{var E=r.getLayerIdByName(C.layer.name,C.layer.service);t.debug("onRemoveLayer",E),i.removeLayer(E)},y=C=>{if(t.debug("onZoomToExtentLayer",C),C.error){var E=r.getGlobalConstraintsByName(C.layer.name,C.layer.service);if(E){var S=s.getView(),b=S.getProjection(),P=[E.extent.left,E.extent.bottom,E.extent.right,E.extent.top],x=E.crs;x||(x="EPSG:4326");var T=transformExtent(P,x,b);T&&S.fit(T)}}},v=C=>{t.debug("onChangeOpacityLayer",C)},_=C=>{t.debug("onChangeVisibilityLayer",C)};return(C,E)=>null}},_sfc_main$k={__name:"Legends",props:{visibility:Boolean,legendsOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new Legends(e.legendsOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(i.value):t.removeControl(i.value)}),(r,s)=>null}},_sfc_main$j={__name:"Isocurve",props:{visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(n){const e=n,t=dist.useLogger();useDataStore();const i=inject("map"),r=ref(new Isocurve(e.isocurveOptions));onMounted(()=>{if(e.visibility){if(i.addControl(r.value),e.analytic){var d=r.value.element.querySelector("button[id^=GPshowIsochronPicto-]");d.setAttribute("data-fr-analytics-action",d.title)}r.value.on("isocurve:drawstart",s),r.value.on("socurve:drawend",o),r.value.on("isocurve:compute",a)}}),onBeforeUpdate(()=>{e.visibility||i.removeControl(r.value)}),onUpdated(()=>{if(e.visibility&&(i.addControl(r.value),e.analytic)){var d=r.value.element.querySelector("button[id^=GPshowIsochronPicto-]");d.setAttribute("data-fr-analytics-action",d.title)}});const s=d=>{t.debug(d)},o=d=>{t.debug(d)},a=d=>{t.debug(d)};return(d,y)=>null}},_sfc_main$i={__name:"Route",props:{visibility:Boolean,routeOptions:Object},setup(n){const e=n,t=dist.useLogger();useDataStore();const i=inject("map"),r=ref(new Route(e.routeOptions));onMounted(()=>{e.visibility&&(i.addControl(r.value),r.value.on("route:drawstart",s),r.value.on("route:drawend",o),r.value.on("route:compute",a))}),onBeforeUpdate(()=>{e.visibility||i.removeControl(r.value)}),onUpdated(()=>{e.visibility&&i.addControl(r.value)});const s=d=>{t.debug(d)},o=d=>{t.debug(d)},a=d=>{t.debug(d)};return(d,y)=>null}},_sfc_main$h={__name:"MeasureLength",props:{visibility:Boolean,measureLengthOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(i.value):t.removeControl(i.value)}),(r,s)=>null}},_sfc_main$g={__name:"MeasureArea",props:{visibility:Boolean,measureAreaOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(i.value):t.removeControl(i.value)}),(r,s)=>null}},_sfc_main$f={__name:"MeasureAzimuth",props:{visibility:Boolean,measureAzimuthOptions:Object},setup(n){const e=n,t=inject("map"),i=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{e.visibility&&t.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(i.value):t.removeControl(i.value)}),(r,s)=>null}},_sfc_main$e={__name:"Controls",props:{controlOptions:Array},setup(n){const e=n;dist.useLogger().debug(e.controlOptions);const i={options:{position:"top-right",collapsed:!0,panel:!0,counter:!0}},r={position:"top-right",panel:!0,auto:!0,draggable:!1},s={units:"metric",bar:!1},o={collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:"WMTS,WMS,TMS",serviceOptions:{}}},a={position:"bottom-left"},d={position:"bottom-right"},y={},v={position:"bottom-right"},_={position:"bottom-right"},C={position:"bottom-right"},E={position:"bottom-right"},S={position:"top-left"},b={position:"top-left"},P={position:"top-left"};return(x,T)=>{const R=_sfc_main$r,L=_sfc_main$s;return openBlock(),createElementBlock(Fragment,null,[n.controlOptions?(openBlock(),createBlock(_sfc_main$l,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),"layer-switcher-options":i},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$k,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),"legends-options":r},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$i,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),"route-options":_},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$j,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":v},null,8,["visibility","analytic"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(R,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),"reverse-geocode-options":C},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(L,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),"fullscreen-options":E},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$n,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),"zoom-options":d},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(Attributions,{key:7,visibility:e.controlOptions.includes(unref(useControls).Attributions.id),"attributions-options":y},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$q,{key:8,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),"search-engine-options":o},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$p,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),"scale-line-options":s},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$o,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),"overview-map-options":a},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$h,{key:11,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),"measure-length-options":S},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$g,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),"measure-area-options":b},null,8,["visibility"])):createCommentVNode("",!0),n.controlOptions?(openBlock(),createBlock(_sfc_main$f,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),"measure-azimuth-options":P},null,8,["visibility"])):createCommentVNode("",!0)],64)}}},_sfc_main$d={__name:"Layer",props:{layerOptions:Object},setup(n){const e=n,t=dist.useLogger();t.debug(e.layerOptions);const i=useDataStore(),r=inject("map"),s=ref(null);return onMounted(()=>{var o=i.getLayerByName(e.layerOptions.name,e.layerOptions.service),a=i.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);o.params=a,t.debug("layer to add",o);var d=e.layerOptions.service,y=e.layerOptions.name;switch(d){case"WMS":s.value=new LayerWMS({layer:y,configuration:o});break;case"WMTS":s.value=new LayerWMTS({layer:y,configuration:o});break;case"TMS":s.value=new LayerMapBox({layer:y,configuration:o});break}s.value&&r.addLayer(s.value)}),onUnmounted(()=>{r.removeLayer(s.value)}),(o,a)=>(openBlock(),createElementBlock("div",null,[renderSlot(o.$slots,"default")]))}},_sfc_main$c={__name:"Layers",props:{selectedLayers:Object},setup(n){const e=n;dist.useLogger().debug(e.selectedLayers);var i=computed(()=>toRaw(e.selectedLayers).map(r=>({name:r.name,service:r.serviceParams.id.split(":")[1]})));return(r,s)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(i),o=>(openBlock(),createBlock(_sfc_main$d,{"layer-options":o},null,8,["layer-options"]))),256))}},_sfc_main$b={__name:"Carto",props:{selectedControls:Array,selectedLayers:Object},setup(n){const e=n,t=useMapStore(),i=ref(null),r=computed(()=>i.value&&i.value.mapRef);return(s,o)=>(openBlock(),createBlock(_sfc_main$u,{ref_key:"refMap",ref:i},{default:withCtx(()=>[createVNode(_sfc_main$t,{center:unref(t).center,zoom:unref(t).zoom},null,8,["center","zoom"]),unref(r)?(openBlock(),createBlock(_sfc_main$e,{key:0,"control-options":e.selectedControls},null,8,["control-options"])):createCommentVNode("",!0),createVNode(_sfc_main$c,{"selected-layers":e.selectedLayers},null,8,["selected-layers"])]),_:1},512))}},_hoisted_1$4={class:"menu-content-list"},_hoisted_2$1={class:"menu-collapse-icon-wrapper"},_hoisted_3={class:"menu-content"},icon="io-close",defaultScale=.8325,_sfc_main$a={__name:"MenuLateralWrapper",props:mergeModels({side:String,visibility:Boolean},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(n,{expose:e}){useCssVars(v=>({fa6fd4be:unref(o)}));const t=n,i=computed(()=>({scale:defaultScale.value,name:icon})),r=useModel(n,"modelValue",!1),s=ref();s.value=30;const o=computed(()=>s.value+"vw"),a=ref();function d(){r.value=!1}function y(){r.value=!0}return e({closeMenu:d,openMenu:y}),(v,_)=>{const C=Ae;return n.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${r.value&&"is_expanded"} ${t.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:a,class:"menu-logo-list"},[renderSlot(v.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$1,[createVNode(C,{id:v.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:d},{default:withCtx(()=>[_[0]||(_[0]=createTextVNode(" Fermer ")),createVNode(unref(g),normalizeProps(guardReactiveProps(unref(i))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3,[renderSlot(v.$slots,"content",{},void 0,!0)])],512),[[vShow,r.value]])],2)):createCommentVNode("",!0)}}},__unplugin_components_1=_export_sfc(_sfc_main$a,[["__scopeId","data-v-81b9380c"]]),_sfc_main$9={__name:"MenuLateralNavButton",props:{icon:String,id:String,active:Boolean},emits:["tabClicked"],setup(n,{emit:e}){const t=n,i=t.icon,r=e,s=()=>{r("tabClicked",t.id)};return(o,a)=>{const d=Ae;return openBlock(),createBlock(d,{id:n.id,primary:"",class:normalizeClass(`${n.active?"active":""}  'navBarIcon'`&&"navButton"),icon:unref(i),iconOnly:!0,onClick:s},null,8,["id","class","icon"])}}},__unplugin_components_0=_export_sfc(_sfc_main$9,[["__scopeId","data-v-d64db25a"]]),side$1="left",_sfc_main$8={__name:"LeftMenuTool",props:{},setup(n){const e=ref(),t=computed(()=>[{componentName:"MenuCatalogue",icon:"co-list-low-priority"}]),i=ref("MenuCatalogueContent"),r=ref(null);function s(a){o(a)&&e.value?r.value.closeMenu():(i.value=a+"Content",r.value.openMenu())}function o(a){return i.value.replace("Content","")===a}return(a,d)=>{const y=__unplugin_components_0,v=__unplugin_components_1;return openBlock(),createBlock(v,{side:side$1,visibility:!1,modelValue:unref(e),"onUpdate:modelValue":d[0]||(d[0]=_=>isRef(e)?e.value=_:null),ref_key:"wrapper",ref:r},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(i)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[renderSlot(a.$slots,"default",{},void 0,!0)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),_=>(openBlock(),createBlock(y,{icon:_.icon,id:_.componentName,active:o(_.componentName),onTabClicked:s},null,8,["icon","id","active"]))),256))]),_:3},8,["modelValue"])}}},LeftMenuTool=_export_sfc(_sfc_main$8,[["__scopeId","data-v-e10c2073"]]),side="right",_sfc_main$7={__name:"RightMenuTool",props:{},setup(n){const e=computed(()=>[{componentName:"MenuControl",icon:"io-settings-sharp"}]),t=ref("MenuControlContent"),i=ref(),r=ref(null);function s(a){o(a)&&i.value?r.value.closeMenu():(t.value=a+"Content",r.value.openMenu())}function o(a){return t.value.replace("Content","")===a}return(a,d)=>{const y=__unplugin_components_0,v=__unplugin_components_1;return openBlock(),createBlock(v,{side,visibility:!0,modelValue:unref(i),"onUpdate:modelValue":d[0]||(d[0]=_=>isRef(i)?i.value=_:null),ref_key:"wrapper",ref:r},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(t)==="MenuControlContent"?"activeTab":"inactiveTab"])},[renderSlot(a.$slots,"default",{},void 0,!0)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e),_=>(openBlock(),createBlock(y,{icon:_.icon,id:_.componentName,active:o(_.componentName),onTabClicked:s},null,8,["icon","id","active"]))),256))]),_:3},8,["modelValue"])}}},RightMenuTool=_export_sfc(_sfc_main$7,[["__scopeId","data-v-a70944bf"]]),__default__={name:"CatalogueMenu"},_sfc_main$6=Object.assign(__default__,{props:{layers:Object},emits:["onClickSelectLayer"],setup(n,{emit:e}){const t=dist.useLogger(),i=useMapStore(),r=n;t.debug(r.layers);const s="Catalogue de données",o="Liste des couches du catalogue",a=!0,d=Object.keys(r.layers).map(v=>({text:r.layers[v].title,to:"/?key="+v,id:v}));function y(v){const _=v.target.baseURI.split("?key=")[1];t.debug(_),i.addLayer(_)}return(v,_)=>{const C=Ci;return openBlock(),createBlock(C,{"heading-title":s,"button-label":o,collapsable:a,"menu-items":unref(d),onClick:y},null,8,["menu-items"])}}}),_hoisted_1$3={class:"control-search-bar"},disabled=!1,inline=!1,required=!1,small=!1,tabListName="Gestion d'outils",initialSelectedIndex=0,_sfc_main$5={__name:"MenuControl",props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){dist.useLogger();const e=useMapStore(),t=n,i=useModel(n,"modelValue"),r=useControlsMenuOptions(),s=computed(()=>r.filter(E=>{if(E.label.toLowerCase().includes(_.value.toLowerCase())||E.hint.toLowerCase().includes(_.value.toLowerCase())||E.name.toLowerCase().includes(_.value.toLowerCase()))return E})),o=computed(()=>t.selectedControls?s.value.filter(E=>{if(t.selectedControls.includes(E.name))return E}):[]),a=[{title:"Ajouter des outils",tabId:"tab-0",panelId:"tab-content-0"},{title:"Mes Outils",tabId:"tab-1",panelId:"tab-content-1"}],d=ref(0),y=ref(!0);function v(E){y.value=d.value<E,d.value=E}const _=ref("");function C(E){_.value=E}return watch(i,E=>{e.cleanControls();for(let S=0;S<E.length;S++){const b=E[S];e.addControl(b)}}),onMounted(()=>{}),onUpdated(()=>{}),(E,S)=>{const b=Fe,P=tn,x=Rt,T=xi;return openBlock(),createElementBlock(Fragment,null,[S[2]||(S[2]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_1$3,[createVNode(b,{"model-value":unref(_),"onUpdate:modelValue":C},null,8,["model-value"])]),createVNode(T,{"tab-list-name":tabListName,"tab-titles":a,"initial-selected-index":initialSelectedIndex,onSelectTab:v},{default:withCtx(()=>[createVNode(x,{"panel-id":"tab-content-0","tab-id":"tab-0",selected:unref(d)===0,asc:unref(y)},{default:withCtx(()=>[createVNode(P,{modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=R=>i.value=R),disabled,inline,small,required,options:unref(s),"model-value":t.selectedControls},null,8,["modelValue","options","model-value"])]),_:1},8,["selected","asc"]),createVNode(x,{"panel-id":"tab-content-1","tab-id":"tab-1",selected:unref(d)===1,asc:unref(y)},{default:withCtx(()=>[createVNode(P,{modelValue:i.value,"onUpdate:modelValue":S[1]||(S[1]=R=>i.value=R),disabled,inline,small,required,options:unref(o),"model-value":t.selectedControls},null,8,["modelValue","options","model-value"])]),_:1},8,["selected","asc"])]),_:1})],64)}}},MenuControl=_export_sfc(_sfc_main$5,[["__scopeId","data-v-c4258f72"]]),_hoisted_1$2={id:"map-and-tools-container"},_sfc_main$4=defineComponent({__name:"CartoAndTools",setup(n){const e=useMapStore(),t=useDataStore(),i=computed(()=>e.getLayers().map(o=>t.getLayerByID(o))),r=computed(()=>{let s=e.getControls();return s.length?s:[]});return(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createVNode(LeftMenuTool,null,{default:withCtx(()=>[createVNode(_sfc_main$6,{layers:unref(t).getLayers()},null,8,["layers"])]),_:1}),createVNode(_sfc_main$b,{"selected-layers":unref(i),"selected-controls":unref(r)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,null,{default:withCtx(()=>[createVNode(MenuControl,{"selected-controls":unref(r)},null,8,["selected-controls"])]),_:1})]))}}),CartoAndTools=_export_sfc(_sfc_main$4,[["__scopeId","data-v-0e356ff3"]]),_sfc_main$3={},_hoisted_1$1={class:"loader"};function _sfc_render(n,e){return openBlock(),createElementBlock("span",_hoisted_1$1)}const Patience=_export_sfc(_sfc_main$3,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$2={__name:"StoreData",props:{},async setup(n){let e,t;const i=dist.useLogger(),r=useDataStore(),{fetchData:s}=r,o=([e,t]=withAsyncContext(()=>s()),e=await e,t(),e);return i.debug(o),(a,d)=>unref(r).isLoaded&&!unref(r).error?renderSlot(a.$slots,"default",{key:0}):createCommentVNode("",!0)}},_sfc_main$1={__name:"ModalInformation",setup(n){const e=useMapStore(),i=useDataStore().getInformations(),r=i.title,s=i.description,o=i.type,a=i.version,d=ref(i.opened&&a!==parseInt(e.noInformation,10)),y=()=>{d.value=!1},v=()=>{d.value=!1,e.noInformation=a};return(_,C)=>{const E=ga,S=_s;return openBlock(),createBlock(S,{opened:unref(d),title:unref(r),size:"md",onClose:y},{default:withCtx(()=>[createVNode(E,{description:unref(s),type:unref(o)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:v},C[0]||(C[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}},_hoisted_1={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2={class:"patience-container"},_sfc_main=defineComponent({__name:"Load",setup(n){return(e,t)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$2,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createVNode(_sfc_main$1)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(n=>{if(n.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(n.href),!1;const e=n.meta.title?`${n.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});const RiArrowRightLine={name:"ri-arrow-right-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>'},RiCloseLine={name:"ri-close-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/>'},RiFlagLine={name:"ri-flag-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 16v6H3V3h9.382a1 1 0 01.894.553L14 5h6a1 1 0 011 1v11a1 1 0 01-1 1h-6.382a1 1 0 01-.894-.553L12 16H5zM5 5v9h8.236l1 2H19V7h-6.236l-1-2H5z"/>'},RiHome2Line={name:"ri-home-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/>'},RiHome4Line={name:"ri-home-4-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zm-6-2h5V9.157l-6-5.454-6 5.454V19h5v-6h2v6z"/>'},RiQuestionMark={name:"ri-question-mark",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 19a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 0112 19zm0-17a6 6 0 016 6c0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8a6 6 0 016-6z"/>'},RiRefreshLine={name:"ri-refresh-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},FaUserCircle={name:"fa-user-circle",minX:-51.52,minY:-43.52,width:599.04,height:599.04,raw:'<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/>'},BiChevronDoubleRight={name:"bi-chevron-double-right",minX:-1.6,minY:-1.6,width:19.2,height:19.2,raw:'<path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L9.293 8 3.646 2.354a.5.5 0 010-.708z"/><path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L13.293 8 7.646 2.354a.5.5 0 010-.708z"/>'},CoListLowPriority={name:"co-list-low-priority",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M256 56h240v32H256zM256 162.667h240v32H256zM256 269.333h240v32H256zM328 376h168v32H328z" class="ci-primary"/><path fill="var(--ci-primary-color, currentColor)" d="M161.231 408h5.969v68.783L302 393l-134.8-86.228V376h-5.965C98.8 376 48 311.4 48 232S98.8 88 161.231 88H216V56h-54.769C121.783 56 84.91 74.755 57.4 108.81 30.7 141.866 16 185.616 16 232s14.7 90.134 41.4 123.19C84.91 389.245 121.783 408 161.231 408zm37.969-42.772l42.8 27.381-42.8 26.608z" class="ci-primary"/>'},IoClose={name:"io-close",minX:0,minY:0,width:512,height:512,raw:'<path d="M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"/>'},IoSettingsSharp={name:"io-settings-sharp",minX:0,minY:0,width:512,height:512,raw:'<path d="M256 176a80 80 0 1080 80 80.24 80.24 0 00-80-80zm172.72 80a165.53 165.53 0 01-1.64 22.34l48.69 38.12a11.59 11.59 0 012.63 14.78l-46.06 79.52a11.64 11.64 0 01-14.14 4.93l-57.25-23a176.56 176.56 0 01-38.82 22.67l-8.56 60.78a11.93 11.93 0 01-11.51 9.86h-92.12a12 12 0 01-11.51-9.53l-8.56-60.78A169.3 169.3 0 01151.05 393L93.8 416a11.64 11.64 0 01-14.14-4.92L33.6 331.57a11.59 11.59 0 012.63-14.78l48.69-38.12A174.58 174.58 0 0183.28 256a165.53 165.53 0 011.64-22.34l-48.69-38.12a11.59 11.59 0 01-2.63-14.78l46.06-79.52a11.64 11.64 0 0114.14-4.93l57.25 23a176.56 176.56 0 0138.82-22.67l8.56-60.78A11.93 11.93 0 01209.94 26h92.12a12 12 0 0111.51 9.53l8.56 60.78A169.3 169.3 0 01361 119l57.2-23a11.64 11.64 0 0114.14 4.92l46.06 79.52a11.59 11.59 0 01-2.63 14.78l-48.69 38.12a174.58 174.58 0 011.64 22.66z"/>'},icons=Object.freeze(Object.defineProperty({__proto__:null,BiChevronDoubleRight,CoListLowPriority,FaUserCircle,IoClose,IoSettingsSharp,RiArrowRightLine,RiCloseLine,RiFlagLine,RiHome2Line,RiHome4Line,RiQuestionMark,RiRefreshLine},Symbol.toStringTag,{value:"Module"}));c(...Object.values(icons));const eulerian=createEulerian({domain:"acwg.cartes.gouv.fr",isActionEnabled:!0,site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia();createApp(_sfc_main$v).use(pinia).use(router).use(logger).use(eulerian).mount("#app")});export default oi();
