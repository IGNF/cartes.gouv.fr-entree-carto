{"version":3,"file":"Logout-C5PfPt4g.js","sources":["../../src/views/Logout.vue"],"sourcesContent":["<script lang=\"js\">\n/**\n * @description\n * Redirection sur l'IAM de la geoplateforme\n */\nexport default {};\n</script>\n\n<script setup lang=\"js\">\nimport { inject } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\nconst service = inject('services');\n\nonMounted(() => {\n  const queryString = location.search;\n  const urlParams = new URLSearchParams(queryString);\n  // parametres\n  var session = urlParams.get('session_state');\n  var success = urlParams.get('success'); // remote\n\n  // Si aucun parametre de session dans l'URL de la route '/logout',\n  // on redirige vers IAM de deconnexion\n  if (!queryString) {\n    service.getAccessLogout().then((url) => {\n      location.href = url;\n    });\n    return;\n  }\n  // IAM de deconnexion redirige vers la route '/logout' apr√©s validation\n  // Et, elle fournit la 'session' en mode 'local' ou 'success' pour le mode 'remote'\n  var value = 0;\n  if (service.mode === \"local\" && session) {\n    value = 1;\n  } else if (service.mode === \"remote\" && success !== null) {\n    value = parseInt(success, 10);\n  } else {\n    value = 0;\n  }\n  router.push({ path : '/',  query: { from : 'logout', success : value } });\n});\n</script>\n\n<template>\n  <slot />\n</template>"],"names":["__default__","router","useRouter","service","inject","onMounted","queryString","urlParams","session","success","url","value","_renderSlot","_ctx"],"mappings":"6DAKA,MAAAA,EAAe,CAAA,8CAOf,MAAMC,EAASC,EAAS,EAClBC,EAAUC,EAAO,UAAU,EAEjC,OAAAC,EAAU,IAAM,CACd,MAAMC,EAAc,SAAS,OACvBC,EAAY,IAAI,gBAAgBD,CAAW,EAEjD,IAAIE,EAAUD,EAAU,IAAI,eAAe,EACvCE,EAAUF,EAAU,IAAI,SAAS,EAIrC,GAAI,CAACD,EAAa,CAChBH,EAAQ,gBAAe,EAAG,KAAMO,GAAQ,CACtC,SAAS,KAAOA,CAClB,CAAC,EACD,MACF,CAGA,IAAIC,EAAQ,EACRR,EAAQ,OAAS,SAAWK,EAC9BG,EAAQ,EACCR,EAAQ,OAAS,UAAYM,IAAY,KAClDE,EAAQ,SAASF,EAAS,EAAE,EAE5BE,EAAQ,EAEVV,EAAO,KAAK,CAAE,KAAO,IAAM,MAAO,CAAE,KAAO,SAAU,QAAUU,CAAK,CAAE,CAAE,CAC1E,CAAC,SAICC,EAAQC,EAAA,OAAA,SAAA"}